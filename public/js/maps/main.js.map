{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","runAnimations","pop","canvasId","palette","colors","colorNames","#20171C","#1E2A43","#28377D","#352747","#CA2E26","#9A2A1F","#DA6C26","#453121","#916A47","#DAAD27","#7F7D31","#2B5E2E","gradients","pops","colorSize","selectedColorSize","contextualTuts","type","copy","2","process","global","define","amd","window","self","Promise","_dereq_","any","promises","ret","SomePromiseArray","promise","setHowMany","setUnwrap","init","_SomePromiseArray","prototype","this","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","fn","receiver","arg","push","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","write","stack","exit","throwLater","arguments","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","shift","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","undefined","_setOnCancel","obj","_boundTo","_isBound","value","resolve","4","noConflict","bluebird","old","./promise","5","cr","Object","create","callerCache","getterCache","ensureMethod","methodName","message","classString","toString","TypeError","caller","apply","namedGetter","indexedGetter","index","Math","max","getGetter","canEvaluate","isIdentifier","args","slice","get","propertyName","getter","isIndex","maybeGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancel","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","cb","boundTo","predicateLoop","item","matchesPredicate","isObject","keys","getKeys","j","key","./es5","8","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","name","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","error","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","join","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","split","cleanStack","line","nodeFramePattern","test","lineMatches","match","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","config","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","charAt","stackFramesAsArray","replace","title","isSoft","console","formatStack","String","printWarning","log","fireRejectionEvent","localHandler","reason","localEventFired","formatNonError","str","ruselessToString","newStr","JSON","stringify","snip","maxChars","substr","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","result","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","env","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","toLowerCase","detail","cancelable","Event","document","createEvent","initCustomEvent","fireGlobalEvent","emit","method","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","inherits","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","err","indexOf","hasStackAfterThrow","isTTY","color","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","reduce","all","each","mapSeries","12","subError","nameProperty","defaultMessage","SubError","constructor","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","Array","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","set","has","hasOwnProperty","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","14","PromiseMap","map","filter","options","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","then","lastly","tap","16","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","callback","totalResolved","_totalResolved","_resolve","booleans","len","19","_resolveFromSyncValue","attempt","20","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","wrapped","maybeWrapAsError","21","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","p","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","catchInstances","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","version","toFastProperties","b","c","./any.js","./async","./bind","./call_get.js","./cancel","./catch_filter","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","defaultSuffix","noCopyProps","copyDescriptors","isClass","25","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","Map","extractEntry","size","forEach","entriesToMap","keyOffset","26","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","27","race","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","navigator","standalone","cordova","div","createElement","attributes","toggleScheduled","div2","o2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","ms","afterTimeout","timeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","Disposer","data","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","prefix","isError","ignore","from","to","hasEnvVariables","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","_process","exportName","setTimeoutContext","bindFn","invokeArrayArg","deprecate","deprecationMessage","inherit","properties","childP","baseP","_super","assign","boolOrFn","TYPE_FUNCTION","ifUndefined","val1","val2","addEventListeners","types","splitStr","addEventListener","removeEventListeners","removeEventListener","hasParent","parentNode","inStr","find","trim","inArray","findByKey","toArray","uniqueArray","sort","results","prefixed","property","camelProp","toUpperCase","VENDOR_PREFIXES","uniqueId","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","Input","manager","inputTarget","domHandler","ev","enable","createInputInstance","Type","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","SUPPORT_ONLY_TOUCH","TouchInput","SUPPORT_TOUCH","TouchMouseInput","MouseInput","inputHandler","eventType","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","INPUT_START","isFinal","INPUT_END","INPUT_CANCEL","session","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","now","deltaTime","angle","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","y","abs","scale","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offset","offsetDelta","prevDelta","velocity","velocityX","velocityY","direction","lastInterval","COMPUTE_INTERVAL","clientX","round","clientY","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","p1","p2","PROPS_XY","sqrt","atan2","PI","start","end","PROPS_CLIENT_XY","evEl","MOUSE_ELEMENT_EVENTS","evWin","MOUSE_WINDOW_EVENTS","pressed","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","SingleTouchInput","evTarget","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","started","normalizeSingleTouches","touches","changed","changedTouches","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","INPUT_MOVE","identifier","targetTouches","changedTargetTouches","touch","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","DEDUP_TIMEOUT","isSyntheticEvent","dx","dy","DEDUP_DISTANCE","TouchAction","cleanTouchActions","actions","TOUCH_ACTION_NONE","hasPanX","TOUCH_ACTION_PAN_X","hasPanY","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_AUTO","getTouchActionProps","NATIVE_TOUCH_ACTION","touchMap","cssSupports","CSS","supports","Recognizer","defaults","id","state","STATE_POSSIBLE","simultaneous","requireFail","stateStr","STATE_CANCELLED","STATE_ENDED","STATE_CHANGED","STATE_BEGAN","directionStr","getRecognizerByNameIfManager","otherRecognizer","recognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","recognizers","preset","Manager","handlers","oldCssProps","touchAction","toggleCssProps","add","recognizeWith","requireFailure","style","cssProps","triggerDomEvent","gestureEvent","initEvent","gesture","TEST_ELEMENT","Date","output","source","nextKey","extend","dest","merge","MOBILE_REGEX","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","TOUCH_INPUT_MAP","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_MAP","compute","update","getTouchAction","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_RECOGNIZED","STATE_FAILED","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","reset","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","stop","force","stopped","curRecognizer","existing","remove","on","events","off","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","HowlerGlobal","Howler","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","mobileAutoEnable","_setup","volume","vol","parseFloat","setupAudioContext","gain","_webAudio","ids","_getSoundIds","sound","_soundById","_node","mute","muted","unload","close","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","checkOpera","isOldOpera","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_enableMobileAudio","isMobile","maxTouchPoints","msMaxTouchPoints","_mobileEnabled","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","createBufferSource","buffer","connect","destination","noteOn","onended","suspend","_sounds","_paused","_suspendTimer","_resumeAfterSuspend","_autoResume","resume","_emit","Howl","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_state","_endTimers","_onend","onend","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onresume","action","play","load","url","exec","location","protocol","Sound","loadBuffer","num","_ended","_id","_inactiveSound","seek","_seek","duration","_start","_stop","playWebAudio","_refreshBuffer","setValueAtTime","currentTime","_playStart","bufferSource","noteGrainOn","Infinity","isRunning","once","_clearTimer","playHtml5","playbackRate","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","fade","diff","dir","steps","stepLen","ceil","linearRampToValueAtTime","_interval","setInterval","soundId","min","clearInterval","cancelScheduledValues","loopStart","loopEnd","realTime","playing","rateSeek","sounds","_errorFn","_loadFn","remCache","cache","_loadQueue","task","_drain","cnt","_panner","howl","random","createGain","createGainNode","paused","_errorListener","_loadListener","__default","loadSound","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","responseType","status","response","onerror","safeXhrSend","send","arraybuffer","AudioContext","webkitAudioContext","iOS","platform","appVersion","safari","_pos","_orientation","stereo","pan","pos","z","setPosition","orientation","xUp","yUp","zUp","or","setOrientation","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_panningModel","_refDistance","_rolloffFactor","pa","panner","createPanner","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","noop","browser","argv","addListener","removeListener","removeAllListeners","binding","cwd","chdir","umask","RecordRTC","mediaStream","startRecording","disableLogs","mediaRecorder","clearRecordedData","record","recordingDuration","handleRecordingDuration","initRecorder","initCallback","Recorder","GetRecorderType","stopRecording","__blob","recordRTC","blob","URL","createObjectURL","bytesToSize","autoWriteToDisk","getDataURL","dataURL","parameter","DiskStorage","Store","WARNING","pauseRecording","resumeRecording","readFile","_blob","postMessage","FileReaderSync","readAsDataURL","_mediaRecorder","processInWebWorker","_function","Blob","worker","Worker","revokeObjectURL","mozGetUserMedia","reader","FileReader","webWorker","onmessage","onRecordingStopped","RecordRTCConfiguration","returnObject","setRecordingDuration","milliseconds","getBlob","toURL","save","invokeSaveAsDialog","getFromDisk","setAdvertisementArray","arrayOfWebPImages","advertisement","image","bufferSize","view","recorderType","WhammyRecorder","CanvasRecorder","GifRecorder","StereoAudioRecorder","MediaStreamRecorder","getAudioTracks","getVideoTracks","MediaRecorder","mimeType","bitsPerSecond","recorder","isChrome","isEdge","isOpera","isMediaRecorderCompatible","isTypeSupported","MultiStreamRecorder","MRecordRTC","addStream","_mediaStream","mediaType","audio","video","gif","audioRecorder","numberOfAudioChannels","newStream","videoTrack","MediaStream","addTrack","videoRecorder","canvas","frameInterval","gifRecorder","frameRate","quality","blobURL","callback00","webkitURL","_audioDataURL","_videoDataURL","writeToDisk","bytes","k","sizes","floor","pow","toPrecision","file","fileExtension","splitted","fileFullName","msSaveOrOpenBlob","msSaveBlob","hyperlink","href","download","onclick","body","documentElement","removeChild","appendChild","evt","MouseEvent","bubbles","opera","isFirefox","InstallTrigger","verOffset","ix","nAgt","fullVersion","majorVersion","substring","isMediaStreamActive","active","ended","stream","recorderHints","canRecordMimeType","ignoreMutedMedia","ondataavailable","dontFireOnDataAvailableEvent","recordingCallback","getNativeBlob","onAudioProcessStarted","looper","mergeLeftRightBuffers","mergeAudioBuffers","mergeBuffers","channelBuffer","rLength","Float64Array","lng","interleave","leftChannel","rightChannel","inputIndex","writeUTFBytes","string","setUint8","leftBuffers","rightBuffers","internalInterleavedLength","interleaved","interleavedLength","resultingBufferLength","ArrayBuffer","DataView","setUint32","setUint16","setInt16","workerURL","onAudioProcessDataAvailable","isPaused","jsAudioNode","recording","audioInput","isAudioProcessStarted","left","inputBuffer","getChannelData","leftchannel","Float32Array","right","rightchannel","recordingLength","byteLength","Storage","AudioContextConstructor","createMediaStreamSource","legalBufferValues","createJavaScriptNode","createScriptProcessor","onaudioprocess","htmlElement","cloneCanvas","newCanvas","getContext","width","height","drawImage","drawCanvasFrame","isPausedRecording","lastTime","getTime","nodeName","whammy","frames","isRecording","html2canvas","grabMouse","showMousePointer","onrendered","toDataURL","isCanvasSupportsStreamCapturing","_isChrome","webkitRTCPeerConnection","webkitGetUserMedia","chromeVersion","matchArray","globalCanvas","mediaStreamRecorder","HTMLCanvasElement","CanvasRenderingContext2D","canvasMediaStream","captureStream","mozCaptureStream","webkitCaptureStream","mdStream","getWebPImages","framesLength","frame","idx","framesRemaining","onEncodingCallback","webp","that","compile","Whammy","Video","drawFrames","isStopDrawing","asyncLoop","functionToLoop","dropBlackFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","localCanvas","context2d","resultFrames","checkUntilNotBlack","endCheckFrame","sampleColor","g","maxColorDifference","pixTolerance","frameTolerance","doNotCheckNext","matchPixCount","endPixCheck","maxPixCount","finishImage","Image","imageData","getImageData","pix","currentColor","colorDifference","HTMLVideoElement","cloneNode","srcObject","onloadedmetadata","_this","GIFEncoder","isHTMLObject","drawVideoFrame","lastAnimationFrame","requestAnimationFrame","lastFrameTime","onGifPreview","gifEncoder","addFrame","offsetWidth","offsetHeight","setRepeat","setDelay","setQuality","startTime","cancelAnimationFrame","endTime","bin","arrayOfMediaStreams","getMixedAudioStream","audioContext","audioSources","audioTracksLength","audioiDestination","createMediaStreamDestination","audioSource","getMixedVideoStream","getVideo","videos","capturedStream","drawVideosToCanvas","isStoppedRecording","videosLength","mixedVideoStream","mixedAudioStream","track","previewStream","clearRect","Fetch","_type","audioDataURL","videoDataURL","gifDataURL","audioBlob","videoBlob","gifBlob","browserFakeUserAgent","getUserMedia","hash","screen","webkitRequestAnimationFrame","mozRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","mozAudioContext","webkitMediaStream","getTracks","tracks","kind","WhammyVideo","whammyInWebWorker","ArrayToWebM","checkFrames","clusterMaxDuration","EBML","doubleToString","frameNumber","clusterTimecode","clusterFrames","clusterDuration","clusterCounter","cluster","getClusterData","generateEBML","block","makeSimpleBlock","discardable","invisible","keyframe","lacing","trackNum","timecode","numToBuffer","parts","reverse","strToBuffer","bitsToBuffer","bits","pad","json","ebml","zeroes","sizeToString","padded","out","fromCharCode","parseWebP","riff","VP8","RIFF","WEBP","frameStart","tmp","getStrLength","unpadded","parseRIFF","chunks","createObjectStore","dataBase","dataStoreName","putInDB","getFromStore","portionName","transaction","objectStore","onsuccess","db","put","indexedDB","dbVersion","dbName","request","onError","setVersion","onupgradeneeded","getPathColorName","path","hexColor","originalColor","getColorName","getRandomPop","getIndexedPopColor","transparent","Color","./../../config","root","factory","ShapeDetector","deg2Rad","Stroke","points","processStroke","patterns","_nbSamplePoints","nbSamplePoints","learn","_squareSize","_phi","_angleRange","_anglePrecision","_halfDiagonal","_origin","resample","setCentroid","rotateBy","indicativeAngle","scaleToSquare","translateToOrigin","localDistance","q","strokeLength","newPoints","point","cos","sin","box","minX","maxX","minY","maxY","distanceAtBestAngle","pattern","x1","f1","distanceAtAngle","x2","f2","strokePoints","patternPoints","defaultShapes","spot","patternName","score","stroke","bestDistance","bestPattern","bestScore","resetWindow","kan","composition","compositionInterval","compositionTimeout","soundTimeouts","lastEvent","interaction","moves","pinching","pinchedGroup","pinchedTut","pathData","shapePath","prevAngle","sides","side","corners","lastScale","lastRotation","originalPosition","tutorialCompletion","fill","pinch","swipe","inactivityTimeout","playPromptTimeout","userHasDrawnFirstShape","firstTimePlaying","shapesSinceTut","refreshCheckInterval","sha","scheduledOverlay","continueCountdownInterval","shapeSounds","ui","overlays","timing","$","setSha","reload","./overlays","./sound","./timing","./touch","./ui","./video","openOverlay","overlayName","allOverlays","includes","panning","preventInactivityTimeout","closeAndResetOverlays","tutorial","hideContextualTuts","$body","addClass","overlayActiveClass","tapEvent","openIntroOverlay","anyShapesOnCanvas","openPlayPromptOverlay","playPromptDelay","openSharePromptOverlay","openContinueOverlay","openTipsOverlay","openShareOverlay","resetContinueCountdown","html","continueInactivityDelay","$countdownNumWrap","enterTutorialMode","activateTipsCards","cardNavNext","$old","$new","$cardItems","first","$next","$third","slide","removeClass","updateCardCounter","cardsCount","cardInteractions","timeOfLastInteraction","closest","resetTips","$sharePhone","overlayOpenClasses","total","$footer","phoneNumberInputs","mask","$shareKeypad","phoneNumber","masked","randomCardGraphics","el","attr","initTips","initShare","hammerCanvas","$cardsWrap","overlay","./tutorial","destroyGroupPops","group","groupPopsBefore","getGroupPops","fillInGroupPopsById","groupId","paper","project","getItem","className","children","groupChild","toggleFill","interior","fillColor","strokeColor","cleanUpGroup","acceptableNames","updatePops","freshGroups","getFreshGroups","popCandidates","getPopCandidates","getAllPops","freshGroup","freshOuter","_namedChildren","bringToFront","otherGroup","otherGroupOuter","thisPop","intersect","popColor","popGroup","intersectingGroup","visible","closed","addChild","fresh","getOutlineGroup","truedShape","outerPath","Path","middlePath","lastAngle","firstTop","firstBottom","lastTop","lastBottom","Group","firstSegment","cumSize","avgSize","getPointAt","normal","getNormalAt","top","Point","bottom","insert","centerTop","centerBottom","flatten","simplify","selected","returnGroup","getTruedShape","pathClone","clone","completedPath","getCompletedPath","truedPath","strokeWidth","intersections","getIntersections","trimmedPath","getTrimmedPath","extendedPath","getExtendedPath","_intersections","_trimmedPath","replaceWith","getBruteExtendedPath","_intersections2","_trimmedPath2","getShapePrediction","prediction","shapeJSON","exportJSON","shapeData","processShapeData","shapePrediction","detector","closedShapes","randomPick","intersects","getIntegerPoint","stringifyPoint","parsePoint","pointStr","getClosestPointFromPathData","leastDistance","closestPoint","Base","datum","returnShape","jsonObj","parse","segments","segment","positionInfo","findInteriorCurves","interiorCurves","dividedPath","resolveCrossings","enclosedLoop","_enclosedLoop","thresholdDist","thresholdDistMultiplier","nextSegment","startAngle","inverseStartAngle","extendedStartPoint","lastSegment","penSegment","previous","endAngle","extendedEndPoint","firstPoint","lastPoint","unite","crossings","maxArea","maxChild","area","intersection","intersectionPoint","pathCrossings","subtract","_ret2","closedChildren","childClone","accumulator","_j","newPath","copyContent","copyAttributes","_typeof","hitTestGroupBounds","groups","getAllGroups","hitTestBounds","strokeBounds","isInside","cornerThresholdDeg","shapeNames","./color","./lib/shape-detector","asyncPlayCompositionOnce","drawCanvas","getElementById","recordrtc","asyncInitShapeSounds","reinitShapeSounds","getShapeSoundObj","viewWidth","viewSize","initShapeSounds","shape","colorName","quantizedSoundStartTime","quantizeLength","bounds","compositionLength","quantizedSoundDuration","soundObj","pathId","spriteName","startPlaying","hasClass","playEnabledClass","playingClass","startComposition","stopPlaying","stopComposition","asyncGetShapeSoundFromShapeName","shapeName","shapeSoundJSONPath","getJSON","resp","shapeSoundData","formatShapeSoundData","when","returnSounds","returnData","urls","smallestDuration","bpm","returnDuration","quantizePosition","position","smallestInterval","measures","returnPosition","asyncPlayShape","asyncPlayShapeSound","asyncPlayShapeAnimation","animating","totalDuration","measureLength","animate","rotate","settings","easing","complete","removeShapeFromComposition","shapeGroup","getItems","clearSoundTimeouts","soundTimeout","playCompositionFirstTime","trimmedCompositionObj","getTrimmedCompositionObj","res","iterations","repeatComposition","playCompositionOnce","asyncPlayCompositionMultipleTimes","repeats","promisedRepeats","shapePromises","asyncPlayShapeWithDelay","playTime","trimmedComposition","getCompositionStartTime","modifiedSound","shallowCopy","beatLength","./shape","howler","pauseVideo","exitTutorialMode","drawInactivityDelay","inputDelay","refreshCheckDelay","overlayDelay","hammerTips","tipsOverlay","doubleTap","panStart","panMove","panEnd","pinchStart","pinchMove","pinchEnd","enablePanAndPinchEvents","enablePanEvents","enablePinchEvents","enableTapEvents","disableTapEvents","disablePanEvents","disablePinchEvents","pointer","hitResult","hitTest","hitOptions","eventTargetIsOnCanvas","hideContextualTutByName","stopPropagation","strokeCap","maxShapeLength","angleDelta","prevPoint","halfPointX","halfPointY","halfPoint","topX","topY","bottomX","bottomY","smooth","speed","tooLong","draw","minShapeSize","shapeSize","centerPoint","rad","gradientSize","originX","originY","destinationX","destinationY","origin","gradient","stops","shapeSoundObj","outlineGroup","outline","outer","outlineCenter","middle","sendToBack","shapeMask","enclosedLoops","unditherButtonsByName","scaleFactor","allTutsCompleted","tutName","_groups","addContextualTut","tut","interacting","originalRotation","originalScale","thrown","$tut","$pinchedTut","currentScale","scaleDelta","currentRotation","rotationDelta","moveContextualTut","hypot","viewHypot","maxScaleFactor","move","hideContextualTut","throwPinchedGroup","velocityMultiplier","viewHeight","offScreen","newX","newY","newPos","tolerance","hammerjs","getTutByName","tutObj","tutorialCompletionObj","completion","shapeCenter","tutCopy","tutPos","getTutPositionFromCenter","css","visibility","$tuts","resetContextualTuts","tutWidth","outerWidth","tutHeight","outerHeight","leftPos","topPos","tutArrowHeight","initLogoRefresh","initColorPalette","initNewButton","initUndoButton","initPlayButton","initTipsButton","initShareButton","initContextualTuts","resetCanvas","ditherButtonsByName","buttonNames","undither","ditherButtonByName","buttonName","$button","ditheredClass","unditherButtonByName","newPressed","activeLayer","removeChildren","undoPressed","lastMove","clearGroupPops","numGroups","getNumGroups","tipsPressed","sharePressed","share","$paletteWrap","$paletteColors","paletteColorSize","paletteSelectedColorSize","paletteSelectedClass","$svg","clear","numCanvasses","randomCanvasIndex","canvasBg","Raster","scaleFactorHorizontal","scaleFactorVertical","Layer","./share","degrees","deg","radians","delta","toLocaleTimeString","returnPops","groupPops","intersectingPops","original","playVideo","videoPlayingClass","main","$video","$videoWrapper","./main"],"mappings":"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,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAClmCzyB,KAAM,SAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX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IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAC9hDzyB,KAAM,aAENkvD,SAAWl0C,EAAG,EAAGyX,EAAG,IAAOzX,EAAG,EAAGyX,EAAG,KAAQzX,EAAG,GAAIyX,EAAG,KAAQzX,EAAG,GAAIyX,EAAG,IACxEzyB,KAAM,WAENkvD,SAAWl0C,EAAG,EAAGyX,EAAG,IAAOzX,EAAG,EAAGyX,EAAG,MAASzX,EAAG,GAAIyX,EAAG,MAASzX,EAAG,GAAIyX,EAAG,IAC1EzyB,KAAM,WAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MACl5DzyB,KAAM,WAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MACvezyB,KAAM,UAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,KACrNzyB,KAAM,UAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,IAAKyX,EAAK,KAAQzX,EAAK,GAAIyX,EAAK,KAAQzX,EAAK,GAAIyX,EAAK,MACzIzyB,KAAM,UAENkvD,SAAWl0C,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAC1vCzyB,KAAM,UAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MACjhDzyB,KAAM,UAENkvD,SAAWl0C,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,GAAIyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKyX,EAAK,MAASzX,EAAK,IAAKy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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nexports.runAnimations = false;\nexports.pop = true;\nexports.canvasId = 'canvas';\n\nexports.palette = {\n  colors: [\"#20171C\", \"#1E2A43\", \"#28377D\", \"#352747\", \"#CA2E26\", \"#9A2A1F\", \"#DA6C26\", \"#453121\", \"#916A47\", \"#DAAD27\", \"#7F7D31\", \"#2B5E2E\"],\n  colorNames: {\n    \"#20171C\": \"black\",\n    \"#1E2A43\": \"blue\",\n    \"#28377D\": \"blue\",\n    \"#352747\": \"blue\",\n    \"#CA2E26\": \"red\",\n    \"#9A2A1F\": \"red\",\n    \"#DA6C26\": \"orange\",\n    \"#453121\": \"brown\",\n    \"#916A47\": \"brown\",\n    \"#DAAD27\": \"orange\",\n    \"#7F7D31\": \"green\",\n    \"#2B5E2E\": \"green\"\n  },\n  gradients: {\n    '#20171C': ['#20171C', '#000000'],\n    '#1E2A43': ['#1E2A43', '#263166'],\n    '#28377D': ['#28377D', '#1E4695'],\n    '#352747': ['#352747', '#45005B'],\n    '#CA2E26': ['#CA2E26', '#9B352F'],\n    '#9A2A1F': ['#9A2A1F', '#CD3621'],\n    '#DA6C26': ['#DA6C26', '#BD4820'],\n    '#453121': ['#453121', '#281806'],\n    '#916A47': ['#916A47', '#623A22'],\n    '#DAAD27': ['#DAAD27', '#AF871D'],\n    '#7F7D31': ['#7F7D31', '#555827'],\n    '#2B5E2E': ['#2B5E2E', '#16451D']\n  },\n  pops: [\"#00ADEF\", \"#F285A5\", \"#7DC57F\", \"#F6EB16\", \"#F4EAE0\"],\n  colorSize: 20,\n  selectedColorSize: 30\n};\n\nexports.contextualTuts = [{\n  type: \"fill\",\n  copy: \"<strong>Double-tap</strong> a filled shape to <strong>UNFILL</strong> it. Repeat to <strong>FILL</strong> an unfilled shape.\"\n}, {\n  type: \"pinch\",\n  copy: \"<strong>Pinch</strong> shapes with <strong>TWO FINGERS</strong> to <strong>resize</strong> and <strong>move</strong> them.\"\n}, {\n  type: \"swipe\",\n  copy: \"To <strong>remove</strong> shapes, <strong>pinch</strong> with <strong>two fingers</strong> then <strong>swipe</strong> or hit <strong>undo</strong>.\"\n}];\n\n},{}],2:[function(require,module,exports){\n(function (process,global){\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2015 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.4.7\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n    if (self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n}\n\nfunction Promise(executor) {\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    if (executor !== INTERNAL) {\n        check(this, executor);\n        this._resolveFromExecutor(executor);\n    }\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"expecting an object but got \" +\n                    \"A catch statement predicate \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.4.7\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n                toggleScheduled = true;\n                div2.classList.toggle(\"foo\");\n            };\n\n            return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":5}],3:[function(require,module,exports){\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n},{}],4:[function(require,module,exports){\n(function (global){\n/*!\n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto iOS enabler.\n      self.mobileAutoEnable = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.value = vol;\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.value = muted ? 0 : self._volume;\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'running' : 'running';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Mobile browsers will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _enableMobileAudio: function() {\n      var self = this || Howler;\n\n      // Only run this on mobile devices if audio isn't already eanbled.\n      var isMobile = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(self._navigator && self._navigator.userAgent);\n      var isTouch = !!(('ontouchend' in window) || (self._navigator && self._navigator.maxTouchPoints > 0) || (self._navigator && self._navigator.msMaxTouchPoints > 0));\n      if (self._mobileEnabled || !self.ctx || (!isMobile && !isTouch)) {\n        return;\n      }\n\n      self._mobileEnabled = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function() {\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._mobileEnabled = true;\n          self.mobileAutoEnable = false;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchend', unlock, true);\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchend', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.state = 'resuming';\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio on iOS.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.mobileAutoEnable) {\n        Howler._enableMobileAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Check if this extension is available.\n        if (Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        var num = 0;\n        for (var i=0; i<self._sounds.length; i++) {\n          if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n            num++;\n            id = self._sounds[i]._id;\n          }\n        }\n\n        if (num === 1) {\n          sprite = null;\n        } else {\n          id = null;\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If we have no sprite and the sound hasn't loaded, we must wait\n      // for the sound to load to get our audio's duration.\n      if (self._state !== 'loaded' && !self._sprite[sprite]) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(self._soundById(sound._id) ? sound._id : undefined);\n          }\n        });\n\n        return sound._id;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          setTimeout(function() {\n            self._emit('play', sound._id);\n          }, 0);\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n      // Update the parameters of the sound\n      sound._paused = false;\n      sound._ended = false;\n      sound._sprite = sprite;\n      sound._seek = seek;\n      sound._start = self._sprite[sprite][0] / 1000;\n      sound._stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n            }, 0);\n          }\n        };\n\n        var isRunning = (Howler.state === 'running');\n        if (self._state === 'loaded' && isRunning) {\n          playWebAudio();\n        } else {\n          // Wait for the audio to load and then begin playback.\n          self.once(isRunning ? 'load' : 'resume', playWebAudio, isRunning ? sound._id : null);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          setTimeout(function() {\n            node.play();\n\n            // Setup the new end timer.\n            if (timeout !== Infinity) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            if (!internal) {\n              self._emit('play', sound._id);\n            }\n          }, 0);\n        };\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (self._state === 'loaded' && (window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS));\n        if (node.readyState === 4 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                if (!internal) {\n                  self._emit('stop', sound._id);\n                }\n\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n            }\n          }\n        }\n\n        if (sound && !internal) {\n          self._emit('stop', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n      var diff = Math.abs(from - to);\n      var dir = from > to ? 'out' : 'in';\n      var steps = diff / 0.01;\n      var stepLen = (steps > 0) ? len / steps : len;\n\n      // Since browsers clamp timeouts to 4ms, we need to clamp our steps to that too.\n      if (stepLen < 4) {\n        steps = Math.ceil(steps / (4 / stepLen));\n        stepLen = 4;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          var vol = from;\n          sound._interval = setInterval(function(soundId, sound) {\n            // Update the volume amount, but only if the volume should change.\n            if (steps > 0) {\n              vol += (dir === 'in' ? 0.01 : -0.01);\n            }\n\n            // Make sure the volume is in the right bounds.\n            vol = Math.max(0, vol);\n            vol = Math.min(1, vol);\n\n            // Round to within 2 decimal points.\n            vol = Math.round(vol * 100) / 100;\n\n            // Change the volume.\n            if (self._webAudio) {\n              if (typeof id === 'undefined') {\n                self._volume = vol;\n              }\n\n              sound._volume = vol;\n            } else {\n              self.volume(vol, soundId, true);\n            }\n\n            // When the fade is complete, stop it and fire event.\n            if (vol === to) {\n              clearInterval(sound._interval);\n              sound._interval = null;\n              self.volume(vol, soundId);\n              self._emit('fade', soundId);\n            }\n          }.bind(self, ids[i], sound), stepLen);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            sound._rateSeek = self.seek(id[i]);\n            sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.value = rate;\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Restart the playback if the sound was playing.\n          if (playing) {\n            self.play(id, true);\n          }\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node) {\n            sound._node.currentTime = seek;\n          }\n\n          self._emit('seek', id);\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n          self._emit('end', sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading.\n          sounds[i]._node.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=';\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n\n        // Remove the references in the global Howler object.\n        var index = Howler._howls.indexOf(self);\n        if (index >= 0) {\n          Howler._howls.splice(index, 1);\n        }\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      if (fn) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          if (fn === events[i].fn && id === events[i].id) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function() {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // don't move onto the next task until this one is done\n        self.once(task.event, function() {\n          self._queue.shift();\n          self._loadQueue();\n        });\n\n        task.action();\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        clearTimeout(self._endTimers[id]);\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop;\n      }\n      sound._node.bufferSource.playbackRate.value = sound._rate;\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n\n      if (self._scratchBuffer) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        try { node.bufferSource.buffer = self._scratchBuffer; } catch(e) {}\n      }\n      node.bufferSource = null;\n\n      return self;\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        self._node = new Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorListener, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Decode the buffer into an audio source.\n    Howler.ctx.decodeAudioData(arraybuffer, function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      }\n    }, function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    });\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.value = 1;\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n  \n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n      self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n      self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              sound._panner.setPosition(pan, 0, 0);\n            } else {\n              sound._panner.pan.value = pan;\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or\n   * all in the group. The most common usage is to set the 'x' position for\n   * left/right panning. Setting any value higher than 1.0 will begin to\n   * decrease the volume of the sound as it moves further away.\n   * @param  {Number} x  The x-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} y  The y-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} z  The z-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setPosition(x, y, z);\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setOrientation(x, y, z);\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) There will be no volume reduction inside this angle.\n   *     coneOuterAngle - (360 by default) The volume will be reduced to a constant value of\n   *                      `coneOuterGain` outside this angle.\n   *     coneOuterGain - (0 by default) The amount of volume reduction outside of `coneOuterAngle`.\n   *     distanceModel - ('inverse' by default) Determines algorithm to use to reduce volume as audio moves\n   *                      away from listener. Can be `linear`, `inverse` or `exponential`.\n   *     maxDistance - (10000 by default) Volume won't reduce between source/listener beyond this distance.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *     refDistance - (1 by default) A reference distance for reducing volume as the source\n   *                    moves away from the listener.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener.\n   * \n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : self._distanceModel,\n            maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : self._maxDistance,\n            panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : self._panningModel,\n            refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : self._refDistance,\n            rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : self._rolloffFactor\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.panningModel = pa.panningModel;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.value = sound._stereo;\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id);\n    }\n  };\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],5:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],6:[function(require,module,exports){\n(function (global){\n// Last time updated: 2017-02-13 9:58:18 AM UTC\n\n// ________________\n// RecordRTC v5.4.1\n\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\n\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\n'use strict';\n\n// ____________\n// RecordRTC.js\n\n/**\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a JavaScript-based media-recording library for modern web-browsers (supporting WebRTC getUserMedia API). It is optimized for different devices and browsers to bring all client-side (pluginfree) recording solutions in single place.\n * @summary JavaScript audio/video recording library runs top over WebRTC getUserMedia API.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTC\n * @class\n * @example\n * var recordRTC = RecordRTC(mediaStream, {\n *     type: 'video' // audio or video or gif or canvas\n * });\n *\n * // or, you can also use the \"new\" keyword\n * var recordRTC = new RecordRTC(mediaStream[, config]);\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n */\n\nfunction RecordRTC(mediaStream, config) {\n    if (!mediaStream) {\n        throw 'MediaStream is mandatory.';\n    }\n\n    config = config || {\n        type: 'video'\n    };\n\n    config = new RecordRTCConfiguration(mediaStream, config);\n\n    // a reference to user's recordRTC object\n    var self = this;\n\n    function startRecording() {\n        if (!config.disableLogs) {\n            console.debug('started recording ' + config.type + ' stream.');\n        }\n\n        if (mediaRecorder) {\n            mediaRecorder.clearRecordedData();\n            mediaRecorder.record();\n\n            if (self.recordingDuration) {\n                handleRecordingDuration();\n            }\n            return self;\n        }\n\n        initRecorder(function() {\n            if (self.recordingDuration) {\n                handleRecordingDuration();\n            }\n        });\n\n        return self;\n    }\n\n    function initRecorder(initCallback) {\n        if (initCallback) {\n            config.initCallback = function() {\n                initCallback();\n                initCallback = config.initCallback = null; // recordRTC.initRecorder should be call-backed once.\n            };\n        }\n\n        var Recorder = new GetRecorderType(mediaStream, config);\n\n        mediaRecorder = new Recorder(mediaStream, config);\n        mediaRecorder.record();\n\n        if (!config.disableLogs) {\n            console.debug('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\n        }\n    }\n\n    function stopRecording(callback) {\n        if (!mediaRecorder) {\n            return console.warn(WARNING);\n        }\n\n        /*jshint validthis:true */\n        var recordRTC = this;\n\n        if (!config.disableLogs) {\n            console.warn('Stopped recording ' + config.type + ' stream.');\n        }\n\n        if (config.type !== 'gif') {\n            mediaRecorder.stop(_callback);\n        } else {\n            mediaRecorder.stop();\n            _callback();\n        }\n\n        function _callback(__blob) {\n            for (var item in mediaRecorder) {\n                if (self) {\n                    self[item] = mediaRecorder[item];\n                }\n\n                if (recordRTC) {\n                    recordRTC[item] = mediaRecorder[item];\n                }\n            }\n\n            var blob = mediaRecorder.blob;\n\n            if (!blob) {\n                if (__blob) {\n                    mediaRecorder.blob = blob = __blob;\n                } else {\n                    throw 'Recording failed.';\n                }\n            }\n\n            if (callback) {\n                var url = URL.createObjectURL(blob);\n                callback(url);\n            }\n\n            if (blob && !config.disableLogs) {\n                console.debug(blob.type, '->', bytesToSize(blob.size));\n            }\n\n            if (!config.autoWriteToDisk) {\n                return;\n            }\n\n            getDataURL(function(dataURL) {\n                var parameter = {};\n                parameter[config.type + 'Blob'] = dataURL;\n                DiskStorage.Store(parameter);\n            });\n        }\n    }\n\n    function pauseRecording() {\n        if (!mediaRecorder) {\n            return console.warn(WARNING);\n        }\n\n        mediaRecorder.pause();\n\n        if (!config.disableLogs) {\n            console.debug('Paused recording.');\n        }\n    }\n\n    function resumeRecording() {\n        if (!mediaRecorder) {\n            return console.warn(WARNING);\n        }\n\n        // not all libs have this method yet\n        mediaRecorder.resume();\n\n        if (!config.disableLogs) {\n            console.debug('Resumed recording.');\n        }\n    }\n\n    function readFile(_blob) {\n        postMessage(new FileReaderSync().readAsDataURL(_blob));\n    }\n\n    function getDataURL(callback, _mediaRecorder) {\n        if (!callback) {\n            throw 'Pass a callback function over getDataURL.';\n        }\n\n        var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\n\n        if (!blob) {\n            if (!config.disableLogs) {\n                console.warn('Blob encoder did not finish its job yet.');\n            }\n\n            setTimeout(function() {\n                getDataURL(callback, _mediaRecorder);\n            }, 1000);\n            return;\n        }\n\n        if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\n            var webWorker = processInWebWorker(readFile);\n\n            webWorker.onmessage = function(event) {\n                callback(event.data);\n            };\n\n            webWorker.postMessage(blob);\n        } else {\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);\n            reader.onload = function(event) {\n                callback(event.target.result);\n            };\n        }\n\n        function processInWebWorker(_function) {\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\n                'this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n            ], {\n                type: 'application/javascript'\n            }));\n\n            var worker = new Worker(blob);\n            URL.revokeObjectURL(blob);\n            return worker;\n        }\n    }\n\n    function handleRecordingDuration() {\n        setTimeout(function() {\n            stopRecording(self.onRecordingStopped);\n        }, self.recordingDuration);\n    }\n\n    var WARNING = 'It seems that \"startRecording\" is not invoked for ' + config.type + ' recorder.';\n\n    var mediaRecorder;\n\n    var returnObject = {\n        /**\n         * This method starts recording. It doesn't take any arguments.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.startRecording();\n         */\n        startRecording: startRecording,\n\n        /**\n         * This method stops recording. It takes a single \"callback\" argument. It is suggested to get blob or URI in the callback to make sure all encoders finished their jobs.\n         * @param {function} callback - This callback function is invoked after completion of all encoding jobs.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function(videoURL) {\n         *     video.src = videoURL;\n         *     recordRTC.blob; recordRTC.buffer;\n         * });\n         */\n        stopRecording: stopRecording,\n\n        /**\n         * This method pauses the recording process.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.pauseRecording();\n         */\n        pauseRecording: pauseRecording,\n\n        /**\n         * This method resumes the recording process.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.resumeRecording();\n         */\n        resumeRecording: resumeRecording,\n\n        /**\n         * This method initializes the recording process.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.initRecorder();\n         */\n        initRecorder: initRecorder,\n\n        /**\n         * This method sets the recording duration.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.setRecordingDuration();\n         */\n        setRecordingDuration: function(milliseconds, callback) {\n            if (typeof milliseconds === 'undefined') {\n                throw 'milliseconds is required.';\n            }\n\n            if (typeof milliseconds !== 'number') {\n                throw 'milliseconds must be a number.';\n            }\n\n            self.recordingDuration = milliseconds;\n            self.onRecordingStopped = callback || function() {};\n\n            return {\n                onRecordingStopped: function(callback) {\n                    self.onRecordingStopped = callback;\n                }\n            };\n        },\n\n        /**\n         * This method can be used to clear/reset all the recorded data.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.clearRecordedData();\n         */\n        clearRecordedData: function() {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            mediaRecorder.clearRecordedData();\n\n            if (!config.disableLogs) {\n                console.debug('Cleared old recorded data.');\n            }\n        },\n\n        /**\n         * It is equivalent to <code class=\"str\">\"recordRTC.blob\"</code> property.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var blob = recordRTC.getBlob();\n         *\n         *     // equivalent to: recordRTC.blob property\n         *     var blob = recordRTC.blob;\n         * });\n         */\n        getBlob: function() {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            return mediaRecorder.blob;\n        },\n\n        /**\n         * This method returns the DataURL. It takes a single \"callback\" argument.\n         * @param {function} callback - DataURL is passed back over this callback.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     recordRTC.getDataURL(function(dataURL) {\n         *         video.src = dataURL;\n         *     });\n         * });\n         */\n        getDataURL: getDataURL,\n\n        /**\n         * This method returns the Virutal/Blob URL. It doesn't take any arguments.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     video.src = recordRTC.toURL();\n         * });\n         */\n        toURL: function() {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            return URL.createObjectURL(mediaRecorder.blob);\n        },\n\n        /**\n         * This method saves the blob/file to disk (by invoking save-as dialog). It takes a single (optional) argument i.e. FileName\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     recordRTC.save('file-name');\n         * });\n         */\n        save: function(fileName) {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            invokeSaveAsDialog(mediaRecorder.blob, fileName);\n        },\n\n        /**\n         * This method gets a blob from indexed-DB storage. It takes a single \"callback\" argument.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.getFromDisk(function(dataURL) {\n         *     video.src = dataURL;\n         * });\n         */\n        getFromDisk: function(callback) {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            RecordRTC.getFromDisk(config.type, callback);\n        },\n\n        /**\n         * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\n         * @type {Array.<Array>}\n         * @param {Array} arrayOfWebPImages - Array of webp images.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * var arrayOfWebPImages = [];\n         * arrayOfWebPImages.push({\n         *     duration: index,\n         *     image: 'data:image/webp;base64,...'\n         * });\n         * recordRTC.setAdvertisementArray(arrayOfWebPImages);\n         */\n        setAdvertisementArray: function(arrayOfWebPImages) {\n            config.advertisement = [];\n\n            var length = arrayOfWebPImages.length;\n            for (var i = 0; i < length; i++) {\n                config.advertisement.push({\n                    duration: i,\n                    image: arrayOfWebPImages[i]\n                });\n            }\n        },\n\n        /**\n         * It is equivalent to <code class=\"str\">\"recordRTC.getBlob()\"</code> method.\n         * @property {Blob} blob - Recorded Blob can be accessed using this property.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var blob = recordRTC.blob;\n         *\n         *     // equivalent to: recordRTC.getBlob() method\n         *     var blob = recordRTC.getBlob();\n         * });\n         */\n        blob: null,\n\n        /**\n         * @todo Add descriptions.\n         * @property {number} bufferSize - Either audio device's default buffer-size, or your custom value.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var bufferSize = recordRTC.bufferSize;\n         * });\n         */\n        bufferSize: 0,\n\n        /**\n         * @todo Add descriptions.\n         * @property {number} sampleRate - Audio device's default sample rates.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var sampleRate = recordRTC.sampleRate;\n         * });\n         */\n        sampleRate: 0,\n\n        /**\n         * @todo Add descriptions.\n         * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var buffer = recordRTC.buffer;\n         * });\n         */\n        buffer: null,\n\n        /**\n         * @todo Add descriptions.\n         * @property {DataView} view - Audio DataView, supported only in Chrome.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var dataView = recordRTC.view;\n         * });\n         */\n        view: null\n    };\n\n    if (!this) {\n        self = returnObject;\n        return returnObject;\n    }\n\n    // if someone wants to use RecordRTC with the \"new\" keyword.\n    for (var prop in returnObject) {\n        this[prop] = returnObject[prop];\n    }\n\n    self = this;\n\n    return returnObject;\n}\n\n/**\n * This method can be used to get all recorded blobs from IndexedDB storage.\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\n * @param {function} callback - Callback function to get all stored blobs.\n * @method\n * @memberof RecordRTC\n * @example\n * RecordRTC.getFromDisk('all', function(dataURL, type){\n *     if(type === 'audio') { }\n *     if(type === 'video') { }\n *     if(type === 'gif')   { }\n * });\n */\nRecordRTC.getFromDisk = function(type, callback) {\n    if (!callback) {\n        throw 'callback is mandatory.';\n    }\n\n    console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\n    DiskStorage.Fetch(function(dataURL, _type) {\n        if (type !== 'all' && _type === type + 'Blob' && callback) {\n            callback(dataURL);\n        }\n\n        if (type === 'all' && callback) {\n            callback(dataURL, _type.replace('Blob', ''));\n        }\n    });\n};\n\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof RecordRTC\n * @example\n * RecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\nRecordRTC.writeToDisk = function(options) {\n    console.log('Writing recorded blob(s) to disk!');\n    options = options || {};\n    if (options.audio && options.video && options.gif) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.video.getDataURL(function(videoDataURL) {\n                options.gif.getDataURL(function(gifDataURL) {\n                    DiskStorage.Store({\n                        audioBlob: audioDataURL,\n                        videoBlob: videoDataURL,\n                        gifBlob: gifDataURL\n                    });\n                });\n            });\n        });\n    } else if (options.audio && options.video) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.video.getDataURL(function(videoDataURL) {\n                DiskStorage.Store({\n                    audioBlob: audioDataURL,\n                    videoBlob: videoDataURL\n                });\n            });\n        });\n    } else if (options.audio && options.gif) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.gif.getDataURL(function(gifDataURL) {\n                DiskStorage.Store({\n                    audioBlob: audioDataURL,\n                    gifBlob: gifDataURL\n                });\n            });\n        });\n    } else if (options.video && options.gif) {\n        options.video.getDataURL(function(videoDataURL) {\n            options.gif.getDataURL(function(gifDataURL) {\n                DiskStorage.Store({\n                    videoBlob: videoDataURL,\n                    gifBlob: gifDataURL\n                });\n            });\n        });\n    } else if (options.audio) {\n        options.audio.getDataURL(function(audioDataURL) {\n            DiskStorage.Store({\n                audioBlob: audioDataURL\n            });\n        });\n    } else if (options.video) {\n        options.video.getDataURL(function(videoDataURL) {\n            DiskStorage.Store({\n                videoBlob: videoDataURL\n            });\n        });\n    } else if (options.gif) {\n        options.gif.getDataURL(function(gifDataURL) {\n            DiskStorage.Store({\n                gifBlob: gifDataURL\n            });\n        });\n    }\n};\n\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\n    module.exports = RecordRTC;\n}\n\nif (typeof define === 'function' && define.amd) {\n    define('RecordRTC', [], function() {\n        return RecordRTC;\n    });\n}\n\n// __________________________\n// RecordRTC-Configuration.js\n\n/**\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTCConfiguration\n * @class\n * @example\n * var options = RecordRTCConfiguration(mediaStream, options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\n */\n\nfunction RecordRTCConfiguration(mediaStream, config) {\n    if (config.recorderType && !config.type) {\n        if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder) {\n            config.type = 'video';\n        } else if (config.recorderType === GifRecorder) {\n            config.type = 'gif';\n        } else if (config.recorderType === StereoAudioRecorder) {\n            config.type = 'audio';\n        } else if (config.recorderType === MediaStreamRecorder) {\n            if (mediaStream.getAudioTracks().length && mediaStream.getVideoTracks().length) {\n                config.type = 'video';\n            } else if (mediaStream.getAudioTracks().length && !mediaStream.getVideoTracks().length) {\n                config.type = 'audio';\n            } else if (!mediaStream.getAudioTracks().length && mediaStream.getVideoTracks().length) {\n                config.type = 'audio';\n            } else {\n                // config.type = 'UnKnown';\n            }\n        }\n    }\n\n    if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n        if (!config.mimeType) {\n            config.mimeType = 'video/webm';\n        }\n\n        if (!config.type) {\n            config.type = config.mimeType.split('/')[0];\n        }\n\n        if (!config.bitsPerSecond) {\n            // config.bitsPerSecond = 128000;\n        }\n    }\n\n    // consider default type=audio\n    if (!config.type) {\n        if (config.mimeType) {\n            config.type = config.mimeType.split('/')[0];\n        }\n        if (!config.type) {\n            config.type = 'audio';\n        }\n    }\n\n    return config;\n}\n\n// __________________\n// GetRecorderType.js\n\n/**\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\n * @summary It returns best recorder-type available for your browser.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GetRecorderType\n * @class\n * @example\n * var RecorderType = GetRecorderType(options);\n * var recorder = new RecorderType(options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n */\n\nfunction GetRecorderType(mediaStream, config) {\n    var recorder;\n\n    // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\n    // todo: detect if it is Edge, then auto use: StereoAudioRecorder\n    if (isChrome || isEdge || isOpera) {\n        // Media Stream Recording API has not been implemented in chrome yet;\n        // That's why using WebAudio API to record stereo audio in WAV format\n        recorder = StereoAudioRecorder;\n    }\n\n    if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\n        recorder = MediaStreamRecorder;\n    }\n\n    // video recorder (in WebM format)\n    if (config.type === 'video' && (isChrome || isOpera)) {\n        recorder = WhammyRecorder;\n    }\n\n    // video recorder (in Gif format)\n    if (config.type === 'gif') {\n        recorder = GifRecorder;\n    }\n\n    // html2canvas recording!\n    if (config.type === 'canvas') {\n        recorder = CanvasRecorder;\n    }\n\n    if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n        if ((mediaStream.getVideoTracks && mediaStream.getVideoTracks().length) || (mediaStream.getAudioTracks && mediaStream.getAudioTracks().length)) {\n            // audio-only recording\n            if (config.type === 'audio') {\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\n                    recorder = MediaStreamRecorder;\n                }\n                // else recorder = StereoAudioRecorder;\n            } else {\n                // video or screen tracks\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\n                    recorder = MediaStreamRecorder;\n                }\n            }\n        }\n    }\n\n    if (config.recorderType) {\n        recorder = config.recorderType;\n    }\n\n    if (mediaStream instanceof Array && mediaStream.length) {\n        recorder = MultiStreamRecorder;\n    }\n\n    if (!config.disableLogs && !!recorder && !!recorder.name) {\n        console.debug('Using recorderType:', recorder.name || recorder.constructor.name);\n    }\n\n    return recorder;\n}\n\n// _____________\n// MRecordRTC.js\n\n/**\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MRecordRTC\n * @class\n * @example\n * var recorder = new MRecordRTC();\n * recorder.addStream(MediaStream);\n * recorder.mediaType = {\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\n *     video: true, // or WhammyRecorder or MediaStreamRecorder\n *     gif: true    // or GifRecorder\n * };\n * // mimeType is optional and should be set only in advance cases.\n * recorder.mimeType = {\n *     audio: 'audio/wav',\n *     video: 'video/webm',\n *     gif:   'image/gif'\n * };\n * recorder.startRecording();\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n */\n\nfunction MRecordRTC(mediaStream) {\n\n    /**\n     * This method attaches MediaStream object to {@link MRecordRTC}.\n     * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.addStream(MediaStream);\n     */\n    this.addStream = function(_mediaStream) {\n        if (_mediaStream) {\n            mediaStream = _mediaStream;\n        }\n    };\n\n    /**\n     * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\n     * @property {object} mediaType - {audio: true, video: true, gif: true}\n     * @memberof MRecordRTC\n     * @example\n     * var recorder = new MRecordRTC();\n     * recorder.mediaType = {\n     *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\n     *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder\n     *     gif  : true  // TRUE or GifRecorder\n     * };\n     */\n    this.mediaType = {\n        audio: true,\n        video: true\n    };\n\n    /**\n     * This method starts recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.startRecording();\n     */\n    this.startRecording = function() {\n        var mediaType = this.mediaType;\n        var recorderType;\n        var mimeType = this.mimeType || {\n            audio: null,\n            video: null,\n            gif: null\n        };\n\n        if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && mediaStream.getAudioTracks && !mediaStream.getAudioTracks().length) {\n            // Firefox supports both audio/video in single blob\n            mediaType.audio = false;\n        }\n\n        if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && mediaStream.getVideoTracks && !mediaStream.getVideoTracks().length) {\n            // Firefox supports both audio/video in single blob\n            mediaType.video = false;\n        }\n\n        if (!mediaType.audio && !mediaType.video) {\n            throw 'MediaStream must have either audio or video tracks.';\n        }\n\n        if (!!mediaType.audio) {\n            recorderType = null;\n            if (typeof mediaType.audio === 'function') {\n                recorderType = mediaType.audio;\n            }\n\n            this.audioRecorder = new RecordRTC(mediaStream, {\n                type: 'audio',\n                bufferSize: this.bufferSize,\n                sampleRate: this.sampleRate,\n                numberOfAudioChannels: this.numberOfAudioChannels || 2,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.audio\n            });\n\n            if (!mediaType.video) {\n                this.audioRecorder.startRecording();\n            }\n        }\n\n        if (!!mediaType.video) {\n            recorderType = null;\n            if (typeof mediaType.video === 'function') {\n                recorderType = mediaType.video;\n            }\n\n            var newStream = mediaStream;\n\n            if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\n                var videoTrack = mediaStream.getVideoTracks()[0];\n\n                if (!!navigator.mozGetUserMedia) {\n                    newStream = new MediaStream();\n                    newStream.addTrack(videoTrack);\n\n                    if (recorderType && recorderType === WhammyRecorder) {\n                        // Firefox does NOT support webp-encoding yet\n                        recorderType = MediaStreamRecorder;\n                    }\n                } else {\n                    newStream = new MediaStream([videoTrack]);\n                }\n            }\n\n            this.videoRecorder = new RecordRTC(newStream, {\n                type: 'video',\n                video: this.video,\n                canvas: this.canvas,\n                frameInterval: this.frameInterval || 10,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.video\n            });\n\n            if (!mediaType.audio) {\n                this.videoRecorder.startRecording();\n            }\n        }\n\n        if (!!mediaType.audio && !!mediaType.video) {\n            var self = this;\n            if (isMediaRecorderCompatible()) {\n                self.audioRecorder = null;\n                self.videoRecorder.startRecording();\n            } else {\n                self.videoRecorder.initRecorder(function() {\n                    self.audioRecorder.initRecorder(function() {\n                        // Both recorders are ready to record things accurately\n                        self.videoRecorder.startRecording();\n                        self.audioRecorder.startRecording();\n                    });\n                });\n            }\n        }\n\n        if (!!mediaType.gif) {\n            recorderType = null;\n            if (typeof mediaType.gif === 'function') {\n                recorderType = mediaType.gif;\n            }\n            this.gifRecorder = new RecordRTC(mediaStream, {\n                type: 'gif',\n                frameRate: this.frameRate || 200,\n                quality: this.quality || 10,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.gif\n            });\n            this.gifRecorder.startRecording();\n        }\n    };\n\n    /**\n     * This method stops recording.\n     * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.stopRecording(function(recording){\n     *     var audioBlob = recording.audio;\n     *     var videoBlob = recording.video;\n     *     var gifBlob   = recording.gif;\n     * });\n     */\n    this.stopRecording = function(callback) {\n        callback = callback || function() {};\n\n        if (this.audioRecorder) {\n            this.audioRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'audio');\n            });\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'video');\n            });\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'gif');\n            });\n        }\n    };\n\n    /**\n     * This method pauses recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.pauseRecording();\n     */\n    this.pauseRecording = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.pauseRecording();\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.pauseRecording();\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.pauseRecording();\n        }\n    };\n\n    /**\n     * This method resumes recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.resumeRecording();\n     */\n    this.resumeRecording = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.resumeRecording();\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.resumeRecording();\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.resumeRecording();\n        }\n    };\n\n    /**\n     * This method can be used to manually get all recorded blobs.\n     * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.getBlob(function(recording){\n     *     var audioBlob = recording.audio;\n     *     var videoBlob = recording.video;\n     *     var gifBlob   = recording.gif;\n     * });\n     * // or\n     * var audioBlob = recorder.getBlob().audio;\n     * var videoBlob = recorder.getBlob().video;\n     */\n    this.getBlob = function(callback) {\n        var output = {};\n\n        if (this.audioRecorder) {\n            output.audio = this.audioRecorder.getBlob();\n        }\n\n        if (this.videoRecorder) {\n            output.video = this.videoRecorder.getBlob();\n        }\n\n        if (this.gifRecorder) {\n            output.gif = this.gifRecorder.getBlob();\n        }\n\n        if (callback) {\n            callback(output);\n        }\n\n        return output;\n    };\n\n    /**\n     * This method can be used to manually get all recorded blobs' DataURLs.\n     * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.getDataURL(function(recording){\n     *     var audioDataURL = recording.audio;\n     *     var videoDataURL = recording.video;\n     *     var gifDataURL   = recording.gif;\n     * });\n     */\n    this.getDataURL = function(callback) {\n        this.getBlob(function(blob) {\n            if (blob.audio && blob.video) {\n                getDataURL(blob.audio, function(_audioDataURL) {\n                    getDataURL(blob.video, function(_videoDataURL) {\n                        callback({\n                            audio: _audioDataURL,\n                            video: _videoDataURL\n                        });\n                    });\n                });\n            } else if (blob.audio) {\n                getDataURL(blob.audio, function(_audioDataURL) {\n                    callback({\n                        audio: _audioDataURL\n                    });\n                });\n            } else if (blob.video) {\n                getDataURL(blob.video, function(_videoDataURL) {\n                    callback({\n                        video: _videoDataURL\n                    });\n                });\n            }\n        });\n\n        function getDataURL(blob, callback00) {\n            if (typeof Worker !== 'undefined') {\n                var webWorker = processInWebWorker(function readFile(_blob) {\n                    postMessage(new FileReaderSync().readAsDataURL(_blob));\n                });\n\n                webWorker.onmessage = function(event) {\n                    callback00(event.data);\n                };\n\n                webWorker.postMessage(blob);\n            } else {\n                var reader = new FileReader();\n                reader.readAsDataURL(blob);\n                reader.onload = function(event) {\n                    callback00(event.target.result);\n                };\n            }\n        }\n\n        function processInWebWorker(_function) {\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\n                'this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n            ], {\n                type: 'application/javascript'\n            }));\n\n            var worker = new Worker(blob);\n            var url;\n            if (typeof URL !== 'undefined') {\n                url = URL;\n            } else if (typeof webkitURL !== 'undefined') {\n                url = webkitURL;\n            } else {\n                throw 'Neither URL nor webkitURL detected.';\n            }\n            url.revokeObjectURL(blob);\n            return worker;\n        }\n    };\n\n    /**\n     * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.writeToDisk();\n     */\n    this.writeToDisk = function() {\n        RecordRTC.writeToDisk({\n            audio: this.audioRecorder,\n            video: this.videoRecorder,\n            gif: this.gifRecorder\n        });\n    };\n\n    /**\n     * This method can be used to invoke a save-as dialog for all recorded blobs.\n     * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.save({\n     *     audio: 'audio-file-name',\n     *     video: 'video-file-name',\n     *     gif  : 'gif-file-name'\n     * });\n     */\n    this.save = function(args) {\n        args = args || {\n            audio: true,\n            video: true,\n            gif: true\n        };\n\n        if (!!args.audio && this.audioRecorder) {\n            this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\n        }\n\n        if (!!args.video && this.videoRecorder) {\n            this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\n        }\n        if (!!args.gif && this.gifRecorder) {\n            this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\n        }\n    };\n}\n\n/**\n * This method can be used to get all recorded blobs from IndexedDB storage.\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\n * @param {function} callback - Callback function to get all stored blobs.\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\n *     if(type === 'audio') { }\n *     if(type === 'video') { }\n *     if(type === 'gif')   { }\n * });\n */\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\n\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MRecordRTC = MRecordRTC;\n}\n\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n(function(that) {\n    if (!that) {\n        return;\n    }\n\n    if (typeof window !== 'undefined') {\n        return;\n    }\n\n    if (typeof global === 'undefined') {\n        return;\n    }\n\n    global.navigator = {\n        userAgent: browserFakeUserAgent,\n        getUserMedia: function() {}\n    };\n\n    if (!global.console) {\n        global.console = {};\n    }\n\n    if (typeof global.console.debug === 'undefined') {\n        global.console.debug = global.console.info = global.console.error = global.console.log = global.console.log || function() {\n            console.log(arguments);\n        };\n    }\n\n    if (typeof document === 'undefined') {\n        /*global document:true */\n        that.document = {};\n\n        document.createElement = document.captureStream = document.mozCaptureStream = function() {\n            var obj = {\n                getContext: function() {\n                    return obj;\n                },\n                play: function() {},\n                pause: function() {},\n                drawImage: function() {},\n                toDataURL: function() {\n                    return '';\n                }\n            };\n            return obj;\n        };\n\n        that.HTMLVideoElement = function() {};\n    }\n\n    if (typeof location === 'undefined') {\n        /*global location:true */\n        that.location = {\n            protocol: 'file:',\n            href: '',\n            hash: ''\n        };\n    }\n\n    if (typeof screen === 'undefined') {\n        /*global screen:true */\n        that.screen = {\n            width: 0,\n            height: 0\n        };\n    }\n\n    if (typeof URL === 'undefined') {\n        /*global screen:true */\n        that.URL = {\n            createObjectURL: function() {\n                return '';\n            },\n            revokeObjectURL: function() {\n                return '';\n            }\n        };\n    }\n\n    /*global window:true */\n    that.window = global;\n})(typeof global !== 'undefined' ? global : null);\n\n// _____________________________\n// Cross-Browser-Declarations.js\n\n// animation-frame used in WebM recording\n\n/*jshint -W079 */\nvar requestAnimationFrame = window.requestAnimationFrame;\nif (typeof requestAnimationFrame === 'undefined') {\n    if (typeof webkitRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = webkitRequestAnimationFrame;\n    }\n\n    if (typeof mozRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = mozRequestAnimationFrame;\n    }\n}\n\n/*jshint -W079 */\nvar cancelAnimationFrame = window.cancelAnimationFrame;\nif (typeof cancelAnimationFrame === 'undefined') {\n    if (typeof webkitCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = webkitCancelAnimationFrame;\n    }\n\n    if (typeof mozCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = mozCancelAnimationFrame;\n    }\n}\n\n// WebAudio API representer\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n    if (typeof webkitAudioContext !== 'undefined') {\n        /*global AudioContext:true */\n        AudioContext = webkitAudioContext;\n    }\n\n    if (typeof mozAudioContext !== 'undefined') {\n        /*global AudioContext:true */\n        AudioContext = mozAudioContext;\n    }\n}\n\n/*jshint -W079 */\nvar URL = window.URL;\n\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n    /*global URL:true */\n    URL = webkitURL;\n}\n\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n        navigator.getUserMedia = navigator.webkitGetUserMedia;\n    }\n\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\n        navigator.getUserMedia = navigator.mozGetUserMedia;\n    }\n}\n\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\nvar isChrome = !isOpera && !isEdge && !!navigator.webkitGetUserMedia;\n\nvar MediaStream = window.MediaStream;\n\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n    MediaStream = webkitMediaStream;\n}\n\n/*global MediaStream:true */\nif (typeof MediaStream !== 'undefined') {\n    if (!('getVideoTracks' in MediaStream.prototype)) {\n        MediaStream.prototype.getVideoTracks = function() {\n            if (!this.getTracks) {\n                return [];\n            }\n\n            var tracks = [];\n            this.getTracks.forEach(function(track) {\n                if (track.kind.toString().indexOf('video') !== -1) {\n                    tracks.push(track);\n                }\n            });\n            return tracks;\n        };\n\n        MediaStream.prototype.getAudioTracks = function() {\n            if (!this.getTracks) {\n                return [];\n            }\n\n            var tracks = [];\n            this.getTracks.forEach(function(track) {\n                if (track.kind.toString().indexOf('audio') !== -1) {\n                    tracks.push(track);\n                }\n            });\n            return tracks;\n        };\n    }\n\n    if (!('stop' in MediaStream.prototype)) {\n        MediaStream.prototype.stop = function() {\n            this.getAudioTracks().forEach(function(track) {\n                if (!!track.stop) {\n                    track.stop();\n                }\n            });\n\n            this.getVideoTracks().forEach(function(track) {\n                if (!!track.stop) {\n                    track.stop();\n                }\n            });\n        };\n    }\n}\n\n// below function via: http://goo.gl/B3ae8c\n/**\n * @param {number} bytes - Pass bytes and get formafted string.\n * @returns {string} - formafted string\n * @example\n * bytesToSize(1024*1024*5) === '5 GB'\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction bytesToSize(bytes) {\n    var k = 1000;\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n        return '0 Bytes';\n    }\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n}\n\n/**\n * @param {Blob} file - File or Blob object. This parameter is required.\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\n * @example\n * invokeSaveAsDialog(blob or file, [optional] fileName);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction invokeSaveAsDialog(file, fileName) {\n    if (!file) {\n        throw 'Blob object is required.';\n    }\n\n    if (!file.type) {\n        try {\n            file.type = 'video/webm';\n        } catch (e) {}\n    }\n\n    var fileExtension = (file.type || 'video/webm').split('/')[1];\n\n    if (fileName && fileName.indexOf('.') !== -1) {\n        var splitted = fileName.split('.');\n        fileName = splitted[0];\n        fileExtension = splitted[1];\n    }\n\n    var fileFullName = (fileName || (Math.round(Math.random() * 9999999999) + 888888888)) + '.' + fileExtension;\n\n    if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n        return navigator.msSaveOrOpenBlob(file, fileFullName);\n    } else if (typeof navigator.msSaveBlob !== 'undefined') {\n        return navigator.msSaveBlob(file, fileFullName);\n    }\n\n    var hyperlink = document.createElement('a');\n    hyperlink.href = URL.createObjectURL(file);\n    hyperlink.target = '_blank';\n    hyperlink.download = fileFullName;\n\n    if (!!navigator.mozGetUserMedia) {\n        hyperlink.onclick = function() {\n            (document.body || document.documentElement).removeChild(hyperlink);\n        };\n        (document.body || document.documentElement).appendChild(hyperlink);\n    }\n\n    var evt = new MouseEvent('click', {\n        view: window,\n        bubbles: true,\n        cancelable: true\n    });\n\n    hyperlink.dispatchEvent(evt);\n\n    if (!navigator.mozGetUserMedia) {\n        URL.revokeObjectURL(hyperlink.href);\n    }\n}\n\n// __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// Storage.js\n\n/**\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * Storage.AudioContext === webkitAudioContext\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\nvar Storage = {};\n\nif (typeof AudioContext !== 'undefined') {\n    Storage.AudioContext = AudioContext;\n} else if (typeof webkitAudioContext !== 'undefined') {\n    Storage.AudioContext = webkitAudioContext;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.Storage = Storage;\n}\n\nfunction isMediaRecorderCompatible() {\n    var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n    var isChrome = !!window.chrome && !isOpera;\n    var isFirefox = typeof window.InstallTrigger !== 'undefined';\n\n    if (isFirefox) {\n        return true;\n    }\n\n    var nVer = navigator.appVersion;\n    var nAgt = navigator.userAgent;\n    var fullVersion = '' + parseFloat(navigator.appVersion);\n    var majorVersion = parseInt(navigator.appVersion, 10);\n    var nameOffset, verOffset, ix;\n\n    if (isChrome || isOpera) {\n        verOffset = nAgt.indexOf('Chrome');\n        fullVersion = nAgt.substring(verOffset + 7);\n    }\n\n    // trim the fullVersion string at semicolon/space if present\n    if ((ix = fullVersion.indexOf(';')) !== -1) {\n        fullVersion = fullVersion.substring(0, ix);\n    }\n\n    if ((ix = fullVersion.indexOf(' ')) !== -1) {\n        fullVersion = fullVersion.substring(0, ix);\n    }\n\n    majorVersion = parseInt('' + fullVersion, 10);\n\n    if (isNaN(majorVersion)) {\n        fullVersion = '' + parseFloat(navigator.appVersion);\n        majorVersion = parseInt(navigator.appVersion, 10);\n    }\n\n    return majorVersion >= 49;\n}\n\n// ______________________\n// MediaStreamRecorder.js\n\n/*\n * Implementation of https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/MediaRecorder.html\n * The MediaRecorder accepts a mediaStream as input source passed from UA. When recorder starts,\n * a MediaEncoder will be created and accept the mediaStream as input source.\n * Encoder will get the raw data by track data changes, encode it by selected MIME Type, then store the encoded in EncodedBufferCache object.\n * The encoded data will be extracted on every timeslice passed from Start function call or by RequestData function.\n * Thread model:\n * When the recorder starts, it creates a \"Media Encoder\" thread to read data from MediaEncoder object and store buffer in EncodedBufferCache object.\n * Also extract the encoded data and create blobs on every timeslice passed from start function or RequestData function called by UA.\n */\n\n/**\n * MediaStreamRecorder is an abstraction layer for \"MediaRecorder API\". It is used by {@link RecordRTC} to record MediaStream(s) in Firefox.\n * @summary Runs top over MediaRecorder API.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MediaStreamRecorder\n * @class\n * @example\n * var options = {\n *     mimeType: 'video/webm',\n *     audioBitsPerSecond : 256 * 8 * 1024,\n *     videoBitsPerSecond : 256 * 8 * 1024,\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\n *     getNativeBlob: true // by default: it is false\n * }\n * var recorder = new MediaStreamRecorder(MediaStream, options);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", onAudioProcessStarted: function}\n */\n\nfunction MediaStreamRecorder(mediaStream, config) {\n    var self = this;\n\n    config = config || {\n        // bitsPerSecond: 256 * 8 * 1024,\n        mimeType: 'video/webm'\n    };\n\n    if (config.type === 'audio') {\n        if (mediaStream.getVideoTracks().length && mediaStream.getAudioTracks().length) {\n            var stream;\n            if (!!navigator.mozGetUserMedia) {\n                stream = new MediaStream();\n                stream.addTrack(mediaStream.getAudioTracks()[0]);\n            } else {\n                // webkitMediaStream\n                stream = new MediaStream(mediaStream.getAudioTracks());\n            }\n            mediaStream = stream;\n        }\n\n        if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\n            config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\n        }\n\n        if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\n            // forcing better codecs on Firefox (via #166)\n            config.mimeType = 'audio/ogg';\n        }\n    }\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        self.blob = null;\n\n        var recorderHints = config;\n\n        if (!config.disableLogs) {\n            console.log('Passing following config over MediaRecorder API.', recorderHints);\n        }\n\n        if (mediaRecorder) {\n            // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\n            mediaRecorder = null;\n        }\n\n        if (isChrome && !isMediaRecorderCompatible()) {\n            // to support video-only recording on stable\n            recorderHints = 'video/vp8';\n        }\n\n        if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\n            if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\n                if (!config.disableLogs) {\n                    console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n                }\n\n                recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\n            }\n        }\n\n        // http://dxr.mozilla.org/mozilla-central/source/content/media/MediaRecorder.cpp\n        // https://wiki.mozilla.org/Gecko:MediaRecorder\n        // https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/MediaRecorder.html\n\n        // starting a recording session; which will initiate \"Reading Thread\"\n        // \"Reading Thread\" are used to prevent main-thread blocking scenarios\n        try {\n            mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\n        } catch (e) {\n            mediaRecorder = new MediaRecorder(mediaStream);\n        }\n\n        if (!MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(config.mimeType) === false) {\n            if (!config.disableLogs) {\n                console.warn('MediaRecorder API seems unable to record mimeType:', config.mimeType);\n            }\n        }\n\n        // i.e. stop recording when <video> is paused by the user; and auto restart recording \n        // when video is resumed. E.g. yourStream.getVideoTracks()[0].muted = true; // it will auto-stop recording.\n        mediaRecorder.ignoreMutedMedia = config.ignoreMutedMedia || false;\n\n        // Dispatching OnDataAvailable Handler\n        mediaRecorder.ondataavailable = function(e) {\n            if (self.dontFireOnDataAvailableEvent) {\n                return;\n            }\n\n            if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\n                // make sure that stopRecording always getting fired\n                // even if there is invalid data\n                if (self.recordingCallback) {\n                    self.recordingCallback(new Blob([], {\n                        type: recorderHints.mimeType || 'video/webm'\n                    }));\n                    self.recordingCallback = null;\n                }\n                return;\n            }\n\n            /**\n             * @property {Blob} blob - Recorded frames in video/webm blob.\n             * @memberof MediaStreamRecorder\n             * @example\n             * recorder.stop(function() {\n             *     var blob = recorder.blob;\n             * });\n             */\n            self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n                type: recorderHints.mimeType || 'video/webm'\n            });\n\n            if (self.recordingCallback) {\n                self.recordingCallback(self.blob);\n                self.recordingCallback = null;\n            }\n        };\n\n        mediaRecorder.onerror = function(error) {\n            if (!config.disableLogs) {\n                if (error.name === 'InvalidState') {\n                    console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.');\n                } else if (error.name === 'OutOfMemory') {\n                    console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.');\n                } else if (error.name === 'IllegalStreamModification') {\n                    console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.');\n                } else if (error.name === 'OtherRecordingError') {\n                    console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.');\n                } else if (error.name === 'GenericError') {\n                    console.error('The UA cannot provide the codec or recording option that has been requested.', error);\n                } else {\n                    console.error('MediaRecorder Error', error);\n                }\n            }\n\n            // When the stream is \"ended\" set recording to 'inactive' \n            // and stop gathering data. Callers should not rely on \n            // exactness of the timeSlice value, especially \n            // if the timeSlice value is small. Callers should \n            // consider timeSlice as a minimum value\n\n            if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\n                mediaRecorder.stop();\n            }\n        };\n\n        // void start(optional long mTimeSlice)\n        // The interval of passing encoded data from EncodedBufferCache to onDataAvailable\n        // handler. \"mTimeSlice < 0\" means Session object does not push encoded data to\n        // onDataAvailable, instead, it passive wait the client side pull encoded data\n        // by calling requestData API.\n        mediaRecorder.start(3.6e+6);\n\n        // Start recording. If timeSlice has been provided, mediaRecorder will\n        // raise a dataavailable event containing the Blob of collected data on every timeSlice milliseconds.\n        // If timeSlice isn't provided, UA should call the RequestData to obtain the Blob data, also set the mTimeSlice to zero.\n\n        if (config.onAudioProcessStarted) {\n            config.onAudioProcessStarted();\n        }\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        this.recordingCallback = function(blob) {\n            mediaRecorder = null;\n\n            if (callback) {\n                callback(blob);\n            }\n        };\n\n        // mediaRecorder.state === 'recording' means that media recorder is associated with \"session\"\n        // mediaRecorder.state === 'stopped' means that media recorder is detached from the \"session\" ... in this case; \"session\" will also be deleted.\n\n        if (mediaRecorder.state === 'recording') {\n            // \"stop\" method auto invokes \"requestData\"!\n            // mediaRecorder.requestData();\n            mediaRecorder.stop();\n        }\n    };\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (mediaRecorder.state === 'recording') {\n            mediaRecorder.pause();\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (this.dontFireOnDataAvailableEvent) {\n            this.dontFireOnDataAvailableEvent = false;\n\n            var disableLogs = config.disableLogs;\n            config.disableLogs = true;\n            this.record();\n            config.disableLogs = disableLogs;\n            return;\n        }\n\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (mediaRecorder.state === 'paused') {\n            mediaRecorder.resume();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        this.pause();\n\n        this.dontFireOnDataAvailableEvent = true;\n        this.stop();\n    };\n\n    // Reference to \"MediaRecorder\" object\n    var mediaRecorder;\n\n    function isMediaStreamActive() {\n        if ('active' in mediaStream) {\n            if (!mediaStream.active) {\n                return false;\n            }\n        } else if ('ended' in mediaStream) { // old hack\n            if (mediaStream.ended) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var self = this;\n\n    // this method checks if media stream is stopped\n    // or any track is ended.\n    (function looper() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (isMediaStreamActive() === false) {\n            if (!config.disableLogs) {\n                console.log('MediaStream seems stopped.');\n            }\n            self.stop();\n            return;\n        }\n\n        setTimeout(looper, 1000); // check every second\n    })();\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\n}\n\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\n// https://github.com/mattdiamond/Recorderjs#license-mit\n// ______________________\n// StereoAudioRecorder.js\n\n/**\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\n * @summary JavaScript standalone object for stereo audio recording.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef StereoAudioRecorder\n * @class\n * @example\n * var recorder = new StereoAudioRecorder(MediaStream, {\n *     sampleRate: 44100,\n *     bufferSize: 4096\n * });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\n */\n\nfunction StereoAudioRecorder(mediaStream, config) {\n    if (!mediaStream.getAudioTracks().length) {\n        throw 'Your stream has no audio tracks.';\n    }\n\n    config = config || {};\n\n    var self = this;\n\n    // variables\n    var leftchannel = [];\n    var rightchannel = [];\n    var recording = false;\n    var recordingLength = 0;\n    var jsAudioNode;\n\n    var numberOfAudioChannels = 2;\n\n    // backward compatibility\n    if (config.leftChannel === true) {\n        numberOfAudioChannels = 1;\n    }\n\n    if (config.numberOfAudioChannels === 1) {\n        numberOfAudioChannels = 1;\n    }\n\n    if (!config.disableLogs) {\n        console.debug('StereoAudioRecorder is set to record number of channels: ', numberOfAudioChannels);\n    }\n\n    function isMediaStreamActive() {\n        if ('active' in mediaStream) {\n            if (!mediaStream.active) {\n                return false;\n            }\n        } else if ('ended' in mediaStream) { // old hack\n            if (mediaStream.ended) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (isMediaStreamActive() === false) {\n            throw 'Please make sure MediaStream is active.';\n        }\n\n        // reset the buffers for the new recording\n        leftchannel.length = rightchannel.length = 0;\n        recordingLength = 0;\n\n        if (audioInput) {\n            audioInput.connect(jsAudioNode);\n        }\n\n        // to prevent self audio to be connected with speakers\n        // jsAudioNode.connect(context.destination);\n\n        isAudioProcessStarted = isPaused = false;\n        recording = true;\n    };\n\n    function mergeLeftRightBuffers(config, callback) {\n        function mergeAudioBuffers(config, cb) {\n            var numberOfAudioChannels = config.numberOfAudioChannels;\n\n            // todo: \"slice(0)\" --- is it causes loop? Should be removed?\n            var leftBuffers = config.leftBuffers.slice(0);\n            var rightBuffers = config.rightBuffers.slice(0);\n            var sampleRate = config.sampleRate;\n            var internalInterleavedLength = config.internalInterleavedLength;\n\n            if (numberOfAudioChannels === 2) {\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n                rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\n            }\n\n            if (numberOfAudioChannels === 1) {\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n            }\n\n            function mergeBuffers(channelBuffer, rLength) {\n                var result = new Float64Array(rLength);\n                var offset = 0;\n                var lng = channelBuffer.length;\n\n                for (var i = 0; i < lng; i++) {\n                    var buffer = channelBuffer[i];\n                    result.set(buffer, offset);\n                    offset += buffer.length;\n                }\n\n                return result;\n            }\n\n            function interleave(leftChannel, rightChannel) {\n                var length = leftChannel.length + rightChannel.length;\n\n                var result = new Float64Array(length);\n\n                var inputIndex = 0;\n\n                for (var index = 0; index < length;) {\n                    result[index++] = leftChannel[inputIndex];\n                    result[index++] = rightChannel[inputIndex];\n                    inputIndex++;\n                }\n                return result;\n            }\n\n            function writeUTFBytes(view, offset, string) {\n                var lng = string.length;\n                for (var i = 0; i < lng; i++) {\n                    view.setUint8(offset + i, string.charCodeAt(i));\n                }\n            }\n\n            // interleave both channels together\n            var interleaved;\n\n            if (numberOfAudioChannels === 2) {\n                interleaved = interleave(leftBuffers, rightBuffers);\n            }\n\n            if (numberOfAudioChannels === 1) {\n                interleaved = leftBuffers;\n            }\n\n            var interleavedLength = interleaved.length;\n\n            // create wav file\n            var resultingBufferLength = 44 + interleavedLength * 2;\n\n            var buffer = new ArrayBuffer(resultingBufferLength);\n\n            var view = new DataView(buffer);\n\n            // RIFF chunk descriptor/identifier \n            writeUTFBytes(view, 0, 'RIFF');\n\n            // RIFF chunk length\n            view.setUint32(4, 44 + interleavedLength * 2, true);\n\n            // RIFF type \n            writeUTFBytes(view, 8, 'WAVE');\n\n            // format chunk identifier \n            // FMT sub-chunk\n            writeUTFBytes(view, 12, 'fmt ');\n\n            // format chunk length \n            view.setUint32(16, 16, true);\n\n            // sample format (raw)\n            view.setUint16(20, 1, true);\n\n            // stereo (2 channels)\n            view.setUint16(22, numberOfAudioChannels, true);\n\n            // sample rate \n            view.setUint32(24, sampleRate, true);\n\n            // byte rate (sample rate * block align)\n            view.setUint32(28, sampleRate * 2, true);\n\n            // block align (channel count * bytes per sample) \n            view.setUint16(32, numberOfAudioChannels * 2, true);\n\n            // bits per sample \n            view.setUint16(34, 16, true);\n\n            // data sub-chunk\n            // data chunk identifier \n            writeUTFBytes(view, 36, 'data');\n\n            // data chunk length \n            view.setUint32(40, interleavedLength * 2, true);\n\n            // write the PCM samples\n            var lng = interleavedLength;\n            var index = 44;\n            var volume = 1;\n            for (var i = 0; i < lng; i++) {\n                view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n                index += 2;\n            }\n\n            if (cb) {\n                return cb({\n                    buffer: buffer,\n                    view: view\n                });\n            }\n\n            postMessage({\n                buffer: buffer,\n                view: view\n            });\n        }\n\n        if (!isChrome) {\n            // its Microsoft Edge\n            mergeAudioBuffers(config, function(data) {\n                callback(data.buffer, data.view);\n            });\n            return;\n        }\n\n\n        var webWorker = processInWebWorker(mergeAudioBuffers);\n\n        webWorker.onmessage = function(event) {\n            callback(event.data.buffer, event.data.view);\n\n            // release memory\n            URL.revokeObjectURL(webWorker.workerURL);\n        };\n\n        webWorker.postMessage(config);\n    }\n\n    function processInWebWorker(_function) {\n        var workerURL = URL.createObjectURL(new Blob([_function.toString(),\n            ';this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n        ], {\n            type: 'application/javascript'\n        }));\n\n        var worker = new Worker(workerURL);\n        worker.workerURL = workerURL;\n        return worker;\n    }\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        // stop recording\n        recording = false;\n\n        // to make sure onaudioprocess stops firing\n        // audioInput.disconnect();\n\n        mergeLeftRightBuffers({\n            sampleRate: sampleRate,\n            numberOfAudioChannels: numberOfAudioChannels,\n            internalInterleavedLength: recordingLength,\n            leftBuffers: leftchannel,\n            rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel\n        }, function(buffer, view) {\n            /**\n             * @property {Blob} blob - The recorded blob object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var blob = recorder.blob;\n             * });\n             */\n            self.blob = new Blob([view], {\n                type: 'audio/wav'\n            });\n\n            /**\n             * @property {ArrayBuffer} buffer - The recorded buffer object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var buffer = recorder.buffer;\n             * });\n             */\n            self.buffer = new ArrayBuffer(view.buffer.byteLength);\n\n            /**\n             * @property {DataView} view - The recorded data-view object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var view = recorder.view;\n             * });\n             */\n            self.view = view;\n\n            self.sampleRate = sampleRate;\n            self.bufferSize = bufferSize;\n\n            // recorded audio length\n            self.length = recordingLength;\n\n            if (callback) {\n                callback();\n            }\n\n            isAudioProcessStarted = false;\n        });\n    };\n\n    if (!Storage.AudioContextConstructor) {\n        Storage.AudioContextConstructor = new Storage.AudioContext();\n    }\n\n    var context = Storage.AudioContextConstructor;\n\n    // creates an audio node from the microphone incoming stream\n    var audioInput = context.createMediaStreamSource(mediaStream);\n\n    var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\n\n    /**\n     * From the spec: This value controls how frequently the audioprocess event is\n     * dispatched and how many sample-frames need to be processed each call.\n     * Lower values for buffer size will result in a lower (better) latency.\n     * Higher values will be necessary to avoid audio breakup and glitches\n     * The size of the buffer (in sample-frames) which needs to\n     * be processed each time onprocessaudio is called.\n     * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\n     * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder = new StereoAudioRecorder(mediaStream, {\n     *     bufferSize: 4096\n     * });\n     */\n\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\n    var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\n\n    if (legalBufferValues.indexOf(bufferSize) === -1) {\n        if (!config.disableLogs) {\n            console.warn('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\n        }\n    }\n\n    if (context.createJavaScriptNode) {\n        jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n    } else if (context.createScriptProcessor) {\n        jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n    } else {\n        throw 'WebAudio API has no support on this browser.';\n    }\n\n    // connect the stream to the gain node\n    audioInput.connect(jsAudioNode);\n\n    if (!config.bufferSize) {\n        bufferSize = jsAudioNode.bufferSize; // device buffer-size\n    }\n\n    /**\n     * The sample rate (in sample-frames per second) at which the\n     * AudioContext handles audio. It is assumed that all AudioNodes\n     * in the context run at this rate. In making this assumption,\n     * sample-rate converters or \"varispeed\" processors are not supported\n     * in real-time processing.\n     * The sampleRate parameter describes the sample-rate of the\n     * linear PCM audio data in the buffer in sample-frames per second.\n     * An implementation must support sample-rates in at least\n     * the range 22050 to 96000.\n     * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder = new StereoAudioRecorder(mediaStream, {\n     *     sampleRate: 44100\n     * });\n     */\n    var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\n\n    if (sampleRate < 22050 || sampleRate > 96000) {\n        // Ref: http://stackoverflow.com/a/26303918/552182\n        if (!config.disableLogs) {\n            console.warn('sample-rate must be under range 22050 and 96000.');\n        }\n    }\n\n    if (!config.disableLogs) {\n        console.log('sample-rate', sampleRate);\n        console.log('buffer-size', bufferSize);\n    }\n\n    var isPaused = false;\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPaused = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (isMediaStreamActive() === false) {\n            throw 'Please make sure MediaStream is active.';\n        }\n\n        if (!recording) {\n            if (!config.disableLogs) {\n                console.info('Seems recording has been restarted.');\n            }\n            this.record();\n            return;\n        }\n\n        isPaused = false;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        this.pause();\n\n        leftchannel.length = rightchannel.length = 0;\n        recordingLength = 0;\n    };\n\n    var isAudioProcessStarted = false;\n\n    function onAudioProcessDataAvailable(e) {\n        if (isPaused) {\n            return;\n        }\n\n        if (isMediaStreamActive() === false) {\n            if (!config.disableLogs) {\n                console.log('MediaStream seems stopped.');\n            }\n            jsAudioNode.disconnect();\n            recording = false;\n        }\n\n        if (!recording) {\n            audioInput.disconnect();\n            return;\n        }\n\n        /**\n         * This method is called on \"onaudioprocess\" event's first invocation.\n         * @method {function} onAudioProcessStarted\n         * @memberof StereoAudioRecorder\n         * @example\n         * recorder.onAudioProcessStarted: function() { };\n         */\n        if (!isAudioProcessStarted) {\n            isAudioProcessStarted = true;\n            if (config.onAudioProcessStarted) {\n                config.onAudioProcessStarted();\n            }\n\n            if (config.initCallback) {\n                config.initCallback();\n            }\n        }\n\n        var left = e.inputBuffer.getChannelData(0);\n\n        // we clone the samples\n        leftchannel.push(new Float32Array(left));\n\n        if (numberOfAudioChannels === 2) {\n            var right = e.inputBuffer.getChannelData(1);\n            rightchannel.push(new Float32Array(right));\n        }\n\n        recordingLength += bufferSize;\n    }\n\n    jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\n\n    // to prevent self audio to be connected with speakers\n    jsAudioNode.connect(context.destination);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\n}\n\n// _________________\n// CanvasRecorder.js\n\n/**\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\n * @summary HTML2Canvas recording into video WebM.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef CanvasRecorder\n * @class\n * @example\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\n * @param {object} config - {disableLogs:true, initCallback: function}\n */\n\nfunction CanvasRecorder(htmlElement, config) {\n    if (typeof html2canvas === 'undefined' && htmlElement.nodeName.toLowerCase() !== 'canvas') {\n        throw 'Please link: https://cdn.webrtc-experiment.com/screenshot.js';\n    }\n\n    config = config || {};\n    if (!config.frameInterval) {\n        config.frameInterval = 10;\n    }\n\n    // via DetectRTC.js\n    var isCanvasSupportsStreamCapturing = false;\n    ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\n        if (item in document.createElement('canvas')) {\n            isCanvasSupportsStreamCapturing = true;\n        }\n    });\n\n    var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\n\n    var chromeVersion = 50;\n    var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n    if (_isChrome && matchArray && matchArray[2]) {\n        chromeVersion = parseInt(matchArray[2], 10);\n    }\n\n    if (_isChrome && chromeVersion < 52) {\n        isCanvasSupportsStreamCapturing = false;\n    }\n\n    var globalCanvas, mediaStreamRecorder;\n\n    if (isCanvasSupportsStreamCapturing) {\n        if (!config.disableLogs) {\n            console.debug('Your browser supports both MediRecorder API and canvas.captureStream!');\n        }\n\n        if (htmlElement instanceof HTMLCanvasElement) {\n            globalCanvas = htmlElement;\n        } else if (htmlElement instanceof CanvasRenderingContext2D) {\n            globalCanvas = htmlElement.canvas;\n        } else {\n            throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\n        }\n    } else if (!!navigator.mozGetUserMedia) {\n        if (!config.disableLogs) {\n            console.error('Canvas recording is NOT supported in Firefox.');\n        }\n    }\n\n    var isRecording;\n\n    /**\n     * This method records Canvas.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        isRecording = true;\n\n        if (isCanvasSupportsStreamCapturing) {\n            // CanvasCaptureMediaStream\n            var canvasMediaStream;\n            if ('captureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\n            } else if ('mozCaptureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.mozCaptureStream(25);\n            } else if ('webkitCaptureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.webkitCaptureStream(25);\n            }\n\n            try {\n                var mdStream = new MediaStream();\n                mdStream.addTrack(canvasMediaStream.getVideoTracks()[0]);\n                canvasMediaStream = mdStream;\n            } catch (e) {}\n\n            if (!canvasMediaStream) {\n                throw 'captureStream API are NOT available.';\n            }\n\n            // Note: Jan 18, 2016 status is that, \n            // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\n            mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\n                mimeType: 'video/webm'\n            });\n            mediaStreamRecorder.record();\n        } else {\n            whammy.frames = [];\n            lastTime = new Date().getTime();\n            drawCanvasFrame();\n        }\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    this.getWebPImages = function(callback) {\n        if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\n            callback();\n            return;\n        }\n\n        var framesLength = whammy.frames.length;\n        whammy.frames.forEach(function(frame, idx) {\n            var framesRemaining = framesLength - idx;\n            if (!config.disableLogs) {\n                console.debug(framesRemaining + '/' + framesLength + ' frames remaining');\n            }\n\n            if (config.onEncodingCallback) {\n                config.onEncodingCallback(framesRemaining, framesLength);\n            }\n\n            var webp = frame.image.toDataURL('image/webp', 1);\n            whammy.frames[idx].image = webp;\n        });\n\n        if (!config.disableLogs) {\n            console.debug('Generating WebM');\n        }\n\n        callback();\n    };\n\n    /**\n     * This method stops recording Canvas.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isRecording = false;\n\n        var that = this;\n\n        if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\n            mediaStreamRecorder.stop(callback);\n            return;\n        }\n\n        this.getWebPImages(function() {\n            /**\n             * @property {Blob} blob - Recorded frames in video/webm blob.\n             * @memberof CanvasRecorder\n             * @example\n             * recorder.stop(function() {\n             *     var blob = recorder.blob;\n             * });\n             */\n            whammy.compile(function(blob) {\n                if (!config.disableLogs) {\n                    console.debug('Recording finished!');\n                }\n\n                that.blob = blob;\n\n                if (that.blob.forEach) {\n                    that.blob = new Blob([], {\n                        type: 'video/webm'\n                    });\n                }\n\n                if (callback) {\n                    callback(that.blob);\n                }\n\n                whammy.frames = [];\n            });\n        });\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n\n        if (!isRecording) {\n            this.record();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        this.pause();\n        whammy.frames = [];\n    };\n\n    function cloneCanvas() {\n        //create a new canvas\n        var newCanvas = document.createElement('canvas');\n        var context = newCanvas.getContext('2d');\n\n        //set dimensions\n        newCanvas.width = htmlElement.width;\n        newCanvas.height = htmlElement.height;\n\n        //apply the old canvas to the new one\n        context.drawImage(htmlElement, 0, 0);\n\n        //return the new canvas\n        return newCanvas;\n    }\n\n    function drawCanvasFrame() {\n        if (isPausedRecording) {\n            lastTime = new Date().getTime();\n            return setTimeout(drawCanvasFrame, 500);\n        }\n\n        if (htmlElement.nodeName.toLowerCase() === 'canvas') {\n            var duration = new Date().getTime() - lastTime;\n            // via #206, by Jack i.e. @Seymourr\n            lastTime = new Date().getTime();\n\n            whammy.frames.push({\n                image: cloneCanvas(),\n                duration: duration\n            });\n\n            if (isRecording) {\n                setTimeout(drawCanvasFrame, config.frameInterval);\n            }\n            return;\n        }\n\n        html2canvas(htmlElement, {\n            grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\n            onrendered: function(canvas) {\n                var duration = new Date().getTime() - lastTime;\n                if (!duration) {\n                    return setTimeout(drawCanvasFrame, config.frameInterval);\n                }\n\n                // via #206, by Jack i.e. @Seymourr\n                lastTime = new Date().getTime();\n\n                whammy.frames.push({\n                    image: canvas.toDataURL('image/webp', 1),\n                    duration: duration\n                });\n\n                if (isRecording) {\n                    setTimeout(drawCanvasFrame, config.frameInterval);\n                }\n            }\n        });\n    }\n\n    var lastTime = new Date().getTime();\n\n    var whammy = new Whammy.Video(100);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.CanvasRecorder = CanvasRecorder;\n}\n\n// _________________\n// WhammyRecorder.js\n\n/**\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\n * @summary Video recording feature in Chrome.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef WhammyRecorder\n * @class\n * @example\n * var recorder = new WhammyRecorder(mediaStream);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\n */\n\nfunction WhammyRecorder(mediaStream, config) {\n\n    config = config || {};\n\n    if (!config.frameInterval) {\n        config.frameInterval = 10;\n    }\n\n    if (!config.disableLogs) {\n        console.log('Using frames-interval:', config.frameInterval);\n    }\n\n    /**\n     * This method records video.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (!config.width) {\n            config.width = 320;\n        }\n\n        if (!config.height) {\n            config.height = 240;\n        }\n\n        if (!config.video) {\n            config.video = {\n                width: config.width,\n                height: config.height\n            };\n        }\n\n        if (!config.canvas) {\n            config.canvas = {\n                width: config.width,\n                height: config.height\n            };\n        }\n\n        canvas.width = config.canvas.width || 320;\n        canvas.height = config.canvas.height || 240;\n\n        context = canvas.getContext('2d');\n\n        // setting defaults\n        if (config.video && config.video instanceof HTMLVideoElement) {\n            video = config.video.cloneNode();\n\n            if (config.initCallback) {\n                config.initCallback();\n            }\n        } else {\n            video = document.createElement('video');\n\n            if (typeof video.srcObject !== 'undefined') {\n                video.srcObject = mediaStream;\n            } else {\n                video.src = URL.createObjectURL(mediaStream);\n            }\n\n            video.onloadedmetadata = function() { // \"onloadedmetadata\" may NOT work in FF?\n                if (config.initCallback) {\n                    config.initCallback();\n                }\n            };\n\n            video.width = config.video.width;\n            video.height = config.video.height;\n        }\n\n        video.muted = true;\n        video.play();\n\n        lastTime = new Date().getTime();\n        whammy = new Whammy.Video();\n\n        if (!config.disableLogs) {\n            console.log('canvas resolutions', canvas.width, '*', canvas.height);\n            console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\n        }\n\n        drawFrames(config.frameInterval);\n    };\n\n    /**\n     * Draw and push frames to Whammy\n     * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\n     */\n    function drawFrames(frameInterval) {\n        frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\n\n        var duration = new Date().getTime() - lastTime;\n        if (!duration) {\n            return setTimeout(drawFrames, frameInterval, frameInterval);\n        }\n\n        if (isPausedRecording) {\n            lastTime = new Date().getTime();\n            return setTimeout(drawFrames, 100);\n        }\n\n        // via #206, by Jack i.e. @Seymourr\n        lastTime = new Date().getTime();\n\n        if (video.paused) {\n            // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n            // Tweak for Android Chrome\n            video.play();\n        }\n\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        whammy.frames.push({\n            duration: duration,\n            image: canvas.toDataURL('image/webp')\n        });\n\n        if (!isStopDrawing) {\n            setTimeout(drawFrames, frameInterval, frameInterval);\n        }\n    }\n\n    function asyncLoop(o) {\n        var i = -1,\n            length = o.length;\n\n        var loop = function() {\n            i++;\n            if (i === length) {\n                o.callback();\n                return;\n            }\n            o.functionToLoop(loop, i);\n        };\n        loop(); //init\n    }\n\n\n    /**\n     * remove black frames from the beginning to the specified frame\n     * @param {Array} _frames - array of frames to be checked\n     * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\n     * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\n     * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\n     * @returns {Array} - array of frames\n     */\n    // pull#293 by @volodalexey\n    function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\n        var localCanvas = document.createElement('canvas');\n        localCanvas.width = canvas.width;\n        localCanvas.height = canvas.height;\n        var context2d = localCanvas.getContext('2d');\n        var resultFrames = [];\n\n        var checkUntilNotBlack = _framesToCheck === -1;\n        var endCheckFrame = (_framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length) ?\n            _framesToCheck : _frames.length;\n        var sampleColor = {\n            r: 0,\n            g: 0,\n            b: 0\n        };\n        var maxColorDifference = Math.sqrt(\n            Math.pow(255, 2) +\n            Math.pow(255, 2) +\n            Math.pow(255, 2)\n        );\n        var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n        var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n        var doNotCheckNext = false;\n\n        asyncLoop({\n            length: endCheckFrame,\n            functionToLoop: function(loop, f) {\n                var matchPixCount, endPixCheck, maxPixCount;\n\n                var finishImage = function() {\n                    if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\n                        // console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\n                    } else {\n                        // console.log('frame is passed : ' + f);\n                        if (checkUntilNotBlack) {\n                            doNotCheckNext = true;\n                        }\n                        resultFrames.push(_frames[f]);\n                    }\n                    loop();\n                };\n\n                if (!doNotCheckNext) {\n                    var image = new Image();\n                    image.onload = function() {\n                        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n                        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n                        matchPixCount = 0;\n                        endPixCheck = imageData.data.length;\n                        maxPixCount = imageData.data.length / 4;\n\n                        for (var pix = 0; pix < endPixCheck; pix += 4) {\n                            var currentColor = {\n                                r: imageData.data[pix],\n                                g: imageData.data[pix + 1],\n                                b: imageData.data[pix + 2]\n                            };\n                            var colorDifference = Math.sqrt(\n                                Math.pow(currentColor.r - sampleColor.r, 2) +\n                                Math.pow(currentColor.g - sampleColor.g, 2) +\n                                Math.pow(currentColor.b - sampleColor.b, 2)\n                            );\n                            // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n                            if (colorDifference <= maxColorDifference * pixTolerance) {\n                                matchPixCount++;\n                            }\n                        }\n                        finishImage();\n                    };\n                    image.src = _frames[f].image;\n                } else {\n                    finishImage();\n                }\n            },\n            callback: function() {\n                resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\n\n                if (resultFrames.length <= 0) {\n                    // at least one last frame should be available for next manipulation\n                    // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\n                    resultFrames.push(_frames[_frames.length - 1]);\n                }\n                callback(resultFrames);\n            }\n        });\n    }\n\n    var isStopDrawing = false;\n\n    /**\n     * This method stops recording video.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isStopDrawing = true;\n\n        var _this = this;\n        // analyse of all frames takes some time!\n        setTimeout(function() {\n            // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\n            // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\n            // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\n            dropBlackFrames(whammy.frames, -1, null, null, function(frames) {\n                whammy.frames = frames;\n\n                // to display advertisement images!\n                if (config.advertisement && config.advertisement.length) {\n                    whammy.frames = config.advertisement.concat(whammy.frames);\n                }\n\n                /**\n                 * @property {Blob} blob - Recorded frames in video/webm blob.\n                 * @memberof WhammyRecorder\n                 * @example\n                 * recorder.stop(function() {\n                 *     var blob = recorder.blob;\n                 * });\n                 */\n                whammy.compile(function(blob) {\n                    _this.blob = blob;\n\n                    if (_this.blob.forEach) {\n                        _this.blob = new Blob([], {\n                            type: 'video/webm'\n                        });\n                    }\n\n                    if (callback) {\n                        callback(_this.blob);\n                    }\n                });\n            });\n        }, 10);\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n\n        if (isStopDrawing) {\n            this.record();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        this.pause();\n        whammy.frames = [];\n    };\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    var video;\n    var lastTime;\n    var whammy;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.WhammyRecorder = WhammyRecorder;\n}\n\n// https://github.com/antimatter15/whammy/blob/master/LICENSE\n// _________\n// Whammy.js\n\n// todo: Firefox now supports webp for webm containers!\n// their MediaRecorder implementation works well!\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\n\n/**\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\n * @summary A real time javascript webm encoder based on a canvas hack.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef Whammy\n * @class\n * @example\n * var recorder = new Whammy().Video(15);\n * recorder.add(context || canvas || dataURL);\n * var output = recorder.compile();\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\nvar Whammy = (function() {\n    // a more abstract-ish API\n\n    function WhammyVideo(duration) {\n        this.frames = [];\n        this.duration = duration || 1;\n        this.quality = 0.8;\n    }\n\n    /**\n     * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * recorder.add(canvas || context || 'image/webp');\n     * @param {string} frame - Canvas || Context || image/webp\n     * @param {number} duration - Stick a duration (in milliseconds)\n     */\n    WhammyVideo.prototype.add = function(frame, duration) {\n        if ('canvas' in frame) { //CanvasRenderingContext2D\n            frame = frame.canvas;\n        }\n\n        if ('toDataURL' in frame) {\n            frame = frame.toDataURL('image/webp', this.quality);\n        }\n\n        if (!(/^data:image\\/webp;base64,/ig).test(frame)) {\n            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\n        }\n        this.frames.push({\n            image: frame,\n            duration: duration || this.duration\n        });\n    };\n\n    function processInWebWorker(_function) {\n        var blob = URL.createObjectURL(new Blob([_function.toString(),\n            'this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n        ], {\n            type: 'application/javascript'\n        }));\n\n        var worker = new Worker(blob);\n        URL.revokeObjectURL(blob);\n        return worker;\n    }\n\n    function whammyInWebWorker(frames) {\n        function ArrayToWebM(frames) {\n            var info = checkFrames(frames);\n            if (!info) {\n                return [];\n            }\n\n            var clusterMaxDuration = 30000;\n\n            var EBML = [{\n                'id': 0x1a45dfa3, // EBML\n                'data': [{\n                    'data': 1,\n                    'id': 0x4286 // EBMLVersion\n                }, {\n                    'data': 1,\n                    'id': 0x42f7 // EBMLReadVersion\n                }, {\n                    'data': 4,\n                    'id': 0x42f2 // EBMLMaxIDLength\n                }, {\n                    'data': 8,\n                    'id': 0x42f3 // EBMLMaxSizeLength\n                }, {\n                    'data': 'webm',\n                    'id': 0x4282 // DocType\n                }, {\n                    'data': 2,\n                    'id': 0x4287 // DocTypeVersion\n                }, {\n                    'data': 2,\n                    'id': 0x4285 // DocTypeReadVersion\n                }]\n            }, {\n                'id': 0x18538067, // Segment\n                'data': [{\n                    'id': 0x1549a966, // Info\n                    'data': [{\n                        'data': 1e6, //do things in millisecs (num of nanosecs for duration scale)\n                        'id': 0x2ad7b1 // TimecodeScale\n                    }, {\n                        'data': 'whammy',\n                        'id': 0x4d80 // MuxingApp\n                    }, {\n                        'data': 'whammy',\n                        'id': 0x5741 // WritingApp\n                    }, {\n                        'data': doubleToString(info.duration),\n                        'id': 0x4489 // Duration\n                    }]\n                }, {\n                    'id': 0x1654ae6b, // Tracks\n                    'data': [{\n                        'id': 0xae, // TrackEntry\n                        'data': [{\n                            'data': 1,\n                            'id': 0xd7 // TrackNumber\n                        }, {\n                            'data': 1,\n                            'id': 0x73c5 // TrackUID\n                        }, {\n                            'data': 0,\n                            'id': 0x9c // FlagLacing\n                        }, {\n                            'data': 'und',\n                            'id': 0x22b59c // Language\n                        }, {\n                            'data': 'V_VP8',\n                            'id': 0x86 // CodecID\n                        }, {\n                            'data': 'VP8',\n                            'id': 0x258688 // CodecName\n                        }, {\n                            'data': 1,\n                            'id': 0x83 // TrackType\n                        }, {\n                            'id': 0xe0, // Video\n                            'data': [{\n                                'data': info.width,\n                                'id': 0xb0 // PixelWidth\n                            }, {\n                                'data': info.height,\n                                'id': 0xba // PixelHeight\n                            }]\n                        }]\n                    }]\n                }]\n            }];\n\n            //Generate clusters (max duration)\n            var frameNumber = 0;\n            var clusterTimecode = 0;\n            while (frameNumber < frames.length) {\n\n                var clusterFrames = [];\n                var clusterDuration = 0;\n                do {\n                    clusterFrames.push(frames[frameNumber]);\n                    clusterDuration += frames[frameNumber].duration;\n                    frameNumber++;\n                } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\n\n                var clusterCounter = 0;\n                var cluster = {\n                    'id': 0x1f43b675, // Cluster\n                    'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\n                }; //Add cluster to segment\n                EBML[1].data.push(cluster);\n                clusterTimecode += clusterDuration;\n            }\n\n            return generateEBML(EBML);\n        }\n\n        function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\n            return [{\n                'data': clusterTimecode,\n                'id': 0xe7 // Timecode\n            }].concat(clusterFrames.map(function(webp) {\n                var block = makeSimpleBlock({\n                    discardable: 0,\n                    frame: webp.data.slice(4),\n                    invisible: 0,\n                    keyframe: 1,\n                    lacing: 0,\n                    trackNum: 1,\n                    timecode: Math.round(clusterCounter)\n                });\n                clusterCounter += webp.duration;\n                return {\n                    data: block,\n                    id: 0xa3\n                };\n            }));\n        }\n\n        // sums the lengths of all the frames and gets the duration\n\n        function checkFrames(frames) {\n            if (!frames[0]) {\n                postMessage({\n                    error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\n                });\n                return;\n            }\n\n            var width = frames[0].width,\n                height = frames[0].height,\n                duration = frames[0].duration;\n\n            for (var i = 1; i < frames.length; i++) {\n                duration += frames[i].duration;\n            }\n            return {\n                duration: duration,\n                width: width,\n                height: height\n            };\n        }\n\n        function numToBuffer(num) {\n            var parts = [];\n            while (num > 0) {\n                parts.push(num & 0xff);\n                num = num >> 8;\n            }\n            return new Uint8Array(parts.reverse());\n        }\n\n        function strToBuffer(str) {\n            return new Uint8Array(str.split('').map(function(e) {\n                return e.charCodeAt(0);\n            }));\n        }\n\n        function bitsToBuffer(bits) {\n            var data = [];\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\n            bits = pad + bits;\n            for (var i = 0; i < bits.length; i += 8) {\n                data.push(parseInt(bits.substr(i, 8), 2));\n            }\n            return new Uint8Array(data);\n        }\n\n        function generateEBML(json) {\n            var ebml = [];\n            for (var i = 0; i < json.length; i++) {\n                var data = json[i].data;\n\n                if (typeof data === 'object') {\n                    data = generateEBML(data);\n                }\n\n                if (typeof data === 'number') {\n                    data = bitsToBuffer(data.toString(2));\n                }\n\n                if (typeof data === 'string') {\n                    data = strToBuffer(data);\n                }\n\n                var len = data.size || data.byteLength || data.length;\n                var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\n                var sizeToString = len.toString(2);\n                var padded = (new Array((zeroes * 7 + 7 + 1) - sizeToString.length)).join('0') + sizeToString;\n                var size = (new Array(zeroes)).join('0') + '1' + padded;\n\n                ebml.push(numToBuffer(json[i].id));\n                ebml.push(bitsToBuffer(size));\n                ebml.push(data);\n            }\n\n            return new Blob(ebml, {\n                type: 'video/webm'\n            });\n        }\n\n        function toBinStrOld(bits) {\n            var data = '';\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\n            bits = pad + bits;\n            for (var i = 0; i < bits.length; i += 8) {\n                data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\n            }\n            return data;\n        }\n\n        function makeSimpleBlock(data) {\n            var flags = 0;\n\n            if (data.keyframe) {\n                flags |= 128;\n            }\n\n            if (data.invisible) {\n                flags |= 8;\n            }\n\n            if (data.lacing) {\n                flags |= (data.lacing << 1);\n            }\n\n            if (data.discardable) {\n                flags |= 1;\n            }\n\n            if (data.trackNum > 127) {\n                throw 'TrackNumber > 127 not supported';\n            }\n\n            var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function(e) {\n                return String.fromCharCode(e);\n            }).join('') + data.frame;\n\n            return out;\n        }\n\n        function parseWebP(riff) {\n            var VP8 = riff.RIFF[0].WEBP[0];\n\n            var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\n            for (var i = 0, c = []; i < 4; i++) {\n                c[i] = VP8.charCodeAt(frameStart + 3 + i);\n            }\n\n            var width, height, tmp;\n\n            //the code below is literally copied verbatim from the bitstream spec\n            tmp = (c[1] << 8) | c[0];\n            width = tmp & 0x3FFF;\n            tmp = (c[3] << 8) | c[2];\n            height = tmp & 0x3FFF;\n            return {\n                width: width,\n                height: height,\n                data: VP8,\n                riff: riff\n            };\n        }\n\n        function getStrLength(string, offset) {\n            return parseInt(string.substr(offset + 4, 4).split('').map(function(i) {\n                var unpadded = i.charCodeAt(0).toString(2);\n                return (new Array(8 - unpadded.length + 1)).join('0') + unpadded;\n            }).join(''), 2);\n        }\n\n        function parseRIFF(string) {\n            var offset = 0;\n            var chunks = {};\n\n            while (offset < string.length) {\n                var id = string.substr(offset, 4);\n                var len = getStrLength(string, offset);\n                var data = string.substr(offset + 4 + 4, len);\n                offset += 4 + 4 + len;\n                chunks[id] = chunks[id] || [];\n\n                if (id === 'RIFF' || id === 'LIST') {\n                    chunks[id].push(parseRIFF(data));\n                } else {\n                    chunks[id].push(data);\n                }\n            }\n            return chunks;\n        }\n\n        function doubleToString(num) {\n            return [].slice.call(\n                new Uint8Array((new Float64Array([num])).buffer), 0).map(function(e) {\n                return String.fromCharCode(e);\n            }).reverse().join('');\n        }\n\n        var webm = new ArrayToWebM(frames.map(function(frame) {\n            var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\n            webp.duration = frame.duration;\n            return webp;\n        }));\n\n        postMessage(webm);\n    }\n\n    /**\n     * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * recorder.compile(function(blob) {\n     *    // blob.size - blob.type\n     * });\n     */\n    WhammyVideo.prototype.compile = function(callback) {\n        var webWorker = processInWebWorker(whammyInWebWorker);\n\n        webWorker.onmessage = function(event) {\n            if (event.data.error) {\n                console.error(event.data.error);\n                return;\n            }\n            callback(event.data);\n        };\n\n        webWorker.postMessage(this.frames);\n    };\n\n    return {\n        /**\n         * A more abstract-ish API.\n         * @method\n         * @memberof Whammy\n         * @example\n         * recorder = new Whammy().Video(0.8, 100);\n         * @param {?number} speed - 0.8\n         * @param {?number} quality - 100\n         */\n        Video: WhammyVideo\n    };\n})();\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.Whammy = Whammy;\n}\n\n// ______________ (indexed-db)\n// DiskStorage.js\n\n/**\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\n * @summary Writing blobs into IndexedDB.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * DiskStorage.Store({\n *     audioBlob: yourAudioBlob,\n *     videoBlob: yourVideoBlob,\n *     gifBlob  : yourGifBlob\n * });\n * DiskStorage.Fetch(function(dataURL, type) {\n *     if(type === 'audioBlob') { }\n *     if(type === 'videoBlob') { }\n *     if(type === 'gifBlob')   { }\n * });\n * // DiskStorage.dataStoreName = 'recordRTC';\n * // DiskStorage.onError = function(error) { };\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\n * @property {function} Store - This method stores blobs in IndexedDB.\n * @property {function} onError - This function is invoked for any known/unknown error.\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nvar DiskStorage = {\n    /**\n     * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.init();\n     */\n    init: function() {\n        var self = this;\n\n        if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\n            console.error('IndexedDB API are not available in this browser.');\n            return;\n        }\n\n        var dbVersion = 1;\n        var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\n            db;\n        var request = indexedDB.open(dbName, dbVersion);\n\n        function createObjectStore(dataBase) {\n            dataBase.createObjectStore(self.dataStoreName);\n        }\n\n        function putInDB() {\n            var transaction = db.transaction([self.dataStoreName], 'readwrite');\n\n            if (self.videoBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\n            }\n\n            if (self.gifBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\n            }\n\n            if (self.audioBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\n            }\n\n            function getFromStore(portionName) {\n                transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function(event) {\n                    if (self.callback) {\n                        self.callback(event.target.result, portionName);\n                    }\n                };\n            }\n\n            getFromStore('audioBlob');\n            getFromStore('videoBlob');\n            getFromStore('gifBlob');\n        }\n\n        request.onerror = self.onError;\n\n        request.onsuccess = function() {\n            db = request.result;\n            db.onerror = self.onError;\n\n            if (db.setVersion) {\n                if (db.version !== dbVersion) {\n                    var setVersion = db.setVersion(dbVersion);\n                    setVersion.onsuccess = function() {\n                        createObjectStore(db);\n                        putInDB();\n                    };\n                } else {\n                    putInDB();\n                }\n            } else {\n                putInDB();\n            }\n        };\n        request.onupgradeneeded = function(event) {\n            createObjectStore(event.target.result);\n        };\n    },\n    /**\n     * This method fetches stored blobs from IndexedDB.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.Fetch(function(dataURL, type) {\n     *     if(type === 'audioBlob') { }\n     *     if(type === 'videoBlob') { }\n     *     if(type === 'gifBlob')   { }\n     * });\n     */\n    Fetch: function(callback) {\n        this.callback = callback;\n        this.init();\n\n        return this;\n    },\n    /**\n     * This method stores blobs in IndexedDB.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.Store({\n     *     audioBlob: yourAudioBlob,\n     *     videoBlob: yourVideoBlob,\n     *     gifBlob  : yourGifBlob\n     * });\n     */\n    Store: function(config) {\n        this.audioBlob = config.audioBlob;\n        this.videoBlob = config.videoBlob;\n        this.gifBlob = config.gifBlob;\n\n        this.init();\n\n        return this;\n    },\n    /**\n     * This function is invoked for any known/unknown error.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.onError = function(error){\n     *     alerot( JSON.stringify(error) );\n     * };\n     */\n    onError: function(error) {\n        console.error(JSON.stringify(error, null, '\\t'));\n    },\n\n    /**\n     * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.dataStoreName = 'recordRTC';\n     */\n    dataStoreName: 'recordRTC',\n    dbName: null\n};\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.DiskStorage = DiskStorage;\n}\n\n// ______________\n// GifRecorder.js\n\n/**\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GifRecorder\n * @class\n * @example\n * var recorder = new GifRecorder(mediaStream || canvas || context, { width: 1280, height: 720, frameRate: 200, quality: 10 });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     img.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\n */\n\nfunction GifRecorder(mediaStream, config) {\n    if (typeof GIFEncoder === 'undefined') {\n        throw 'Please link: https://cdn.webrtc-experiment.com/gif-recorder.js';\n    }\n\n    config = config || {};\n\n    var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (!isHTMLObject) {\n            if (!config.width) {\n                config.width = video.offsetWidth || 320;\n            }\n\n            if (!this.height) {\n                config.height = video.offsetHeight || 240;\n            }\n\n            if (!config.video) {\n                config.video = {\n                    width: config.width,\n                    height: config.height\n                };\n            }\n\n            if (!config.canvas) {\n                config.canvas = {\n                    width: config.width,\n                    height: config.height\n                };\n            }\n\n            canvas.width = config.canvas.width || 320;\n            canvas.height = config.canvas.height || 240;\n\n            video.width = config.video.width || 320;\n            video.height = config.video.height || 240;\n        }\n\n        // external library to record as GIF images\n        gifEncoder = new GIFEncoder();\n\n        // void setRepeat(int iter) \n        // Sets the number of times the set of GIF frames should be played. \n        // Default is 1; 0 means play indefinitely.\n        gifEncoder.setRepeat(0);\n\n        // void setFrameRate(Number fps) \n        // Sets frame rate in frames per second. \n        // Equivalent to setDelay(1000/fps).\n        // Using \"setDelay\" instead of \"setFrameRate\"\n        gifEncoder.setDelay(config.frameRate || 200);\n\n        // void setQuality(int quality) \n        // Sets quality of color quantization (conversion of images to the \n        // maximum 256 colors allowed by the GIF specification). \n        // Lower values (minimum = 1) produce better colors, \n        // but slow processing significantly. 10 is the default, \n        // and produces good color mapping at reasonable speeds. \n        // Values greater than 20 do not yield significant improvements in speed.\n        gifEncoder.setQuality(config.quality || 10);\n\n        // Boolean start() \n        // This writes the GIF Header and returns false if it fails.\n        gifEncoder.start();\n\n        startTime = Date.now();\n\n        var self = this;\n\n        function drawVideoFrame(time) {\n            if (isPausedRecording) {\n                return setTimeout(function() {\n                    drawVideoFrame(time);\n                }, 100);\n            }\n\n            lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n            if (typeof lastFrameTime === undefined) {\n                lastFrameTime = time;\n            }\n\n            // ~10 fps\n            if (time - lastFrameTime < 90) {\n                return;\n            }\n\n            if (!isHTMLObject && video.paused) {\n                // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n                // Tweak for Android Chrome\n                video.play();\n            }\n\n            if (!isHTMLObject) {\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\n            }\n\n            if (config.onGifPreview) {\n                config.onGifPreview(canvas.toDataURL('image/png'));\n            }\n\n            gifEncoder.addFrame(context);\n            lastFrameTime = time;\n        }\n\n        lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     img.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function() {\n        if (lastAnimationFrame) {\n            cancelAnimationFrame(lastAnimationFrame);\n        }\n\n        endTime = Date.now();\n\n        /**\n         * @property {Blob} blob - The recorded blob object.\n         * @memberof GifRecorder\n         * @example\n         * recorder.stop(function(){\n         *     var blob = recorder.blob;\n         * });\n         */\n        this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\n            type: 'image/gif'\n        });\n\n        // bug: find a way to clear old recorded blobs\n        gifEncoder.stream().bin = [];\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (!gifEncoder) {\n            return;\n        }\n\n        this.pause();\n\n        gifEncoder.stream().bin = [];\n    };\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    if (isHTMLObject) {\n        if (mediaStream instanceof CanvasRenderingContext2D) {\n            context = mediaStream;\n            canvas = context.canvas;\n        } else if (mediaStream instanceof HTMLCanvasElement) {\n            context = mediaStream.getContext('2d');\n            canvas = mediaStream;\n        }\n    }\n\n    if (!isHTMLObject) {\n        var video = document.createElement('video');\n        video.muted = true;\n        video.autoplay = true;\n\n        if (typeof video.srcObject !== 'undefined') {\n            video.srcObject = mediaStream;\n        } else {\n            video.src = URL.createObjectURL(mediaStream);\n        }\n\n        video.play();\n    }\n\n    var lastAnimationFrame = null;\n    var startTime, endTime, lastFrameTime;\n\n    var gifEncoder;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.GifRecorder = GifRecorder;\n}\n\n// ______________________\n// MultiStreamRecorder.js\n\n/*\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\n */\n\n/**\n * MultiStreamRecorder can record multiple videos in single container.\n * @summary Multi-videos recorder.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MultiStreamRecorder\n * @class\n * @example\n * var options = {\n *     mimeType: 'video/webm'\n * }\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\n * @param {object} config - {disableLogs:true, frameInterval: 10, mimeType: \"video/webm\"}\n */\n\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\n    var self = this;\n\n    options = options || {\n        mimeType: 'video/webm',\n        video: {\n            width: 320,\n            height: 240\n        }\n    };\n\n    if (!options.frameInterval) {\n        options.frameInterval = 10;\n    }\n\n    if (!options.video) {\n        options.video = {};\n    }\n\n    if (!options.video.width) {\n        options.video.width = 320;\n    }\n\n    if (!options.video.height) {\n        options.video.height = 240;\n    }\n\n    /**\n     * This method records all MediaStreams.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        isStoppedRecording = false;\n        var mixedVideoStream = getMixedVideoStream();\n\n        var mixedAudioStream = getMixedAudioStream();\n        if (mixedAudioStream) {\n            mixedAudioStream.getAudioTracks().forEach(function(track) {\n                mixedVideoStream.addTrack(track);\n            });\n        }\n\n        if (options.previewStream && typeof options.previewStream === 'function') {\n            options.previewStream(mixedVideoStream);\n        }\n\n        mediaRecorder = new MediaStreamRecorder(mixedVideoStream, {\n            mimeType: 'video/webm'\n        });\n\n        canvas.width = videos.length > 1 ? videos[0].width * 2 : videos[0].width;\n        canvas.height = videos.length > 2 ? videos[0].height * 2 : videos[0].height;\n\n        drawVideosToCanvas();\n\n        mediaRecorder.record();\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isStoppedRecording = true;\n\n        if (!mediaRecorder) {\n            return;\n        }\n\n        mediaRecorder.stop(function(blob) {\n            callback(blob);\n        });\n    };\n\n    function getMixedAudioStream() {\n        // via: @pehrsons\n        var audioContext = new AudioContext();\n        var audioSources = [];\n\n        var audioTracksLength = 0;\n        arrayOfMediaStreams.forEach(function(stream) {\n            if (!stream.getAudioTracks().length) {\n                return;\n            }\n\n            audioTracksLength++;\n\n            audioSources.push(audioContext.createMediaStreamSource(stream));\n        });\n\n        if (!audioTracksLength) {\n            return;\n        }\n\n        var audioiDestination = audioContext.createMediaStreamDestination();\n        audioSources.forEach(function(audioSource) {\n            audioSource.connect(audioiDestination);\n        });\n        return audioiDestination.stream;\n    }\n\n    var videos = [];\n    var mediaRecorder;\n\n    function getMixedVideoStream() {\n        // via: @adrian-ber\n        arrayOfMediaStreams.forEach(function(stream) {\n            if (!stream.getVideoTracks().length) {\n                return;\n            }\n\n            var video = getVideo(stream);\n            video.width = options.video.width;\n            video.height = options.video.height;\n            videos.push(video);\n        });\n\n        var capturedStream;\n\n        if ('captureStream' in canvas) {\n            capturedStream = canvas.captureStream();\n        } else if ('mozCaptureStream' in canvas) {\n            capturedStream = canvas.mozCaptureStream();\n        } else if (!options.disableLogs) {\n            console.error('captureStream API requires this flag: chrome://flags/#enable-experimental-web-platform-features');\n        }\n\n        return capturedStream;\n    }\n\n    function getVideo(stream) {\n        var video = document.createElement('video');\n        video.src = URL.createObjectURL(stream);\n        video.play();\n        return video;\n    }\n\n    var isStoppedRecording = false;\n\n    function drawVideosToCanvas() {\n        if (isStoppedRecording) {\n            return;\n        }\n\n        var videosLength = videos.length;\n        videos.forEach(function(video, idx) {\n            if (videosLength === 1) {\n                context.drawImage(video, 0, 0, video.width, video.height);\n                return;\n            }\n\n            if (videosLength === 2) {\n                var x = 0;\n                var y = 0;\n\n                if (idx === 1) {\n                    x = video.width;\n                }\n\n                context.drawImage(video, x, y, video.width, video.height);\n                return;\n            }\n\n            if (videosLength === 3) {\n                var x = 0;\n                var y = 0;\n\n                if (idx === 1) {\n                    x = video.width;\n                }\n\n                if (idx === 2) {\n                    y = video.height;\n                }\n\n                context.drawImage(video, x, y, video.width, video.height);\n                return;\n            }\n\n            if (videosLength === 4) {\n                var x = 0;\n                var y = 0;\n\n                if (idx === 1) {\n                    x = video.width;\n                }\n\n                if (idx === 2) {\n                    y = video.height;\n                }\n\n                if (idx === 3) {\n                    x = video.width;\n                    y = video.height;\n                }\n\n                context.drawImage(video, x, y, video.width, video.height);\n                return;\n            }\n        });\n\n        setTimeout(drawVideosToCanvas, options.frameInterval);\n    }\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    canvas.style = 'opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000;';\n\n    document.body.appendChild(canvas);\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        if (mediaRecorder) {\n            mediaRecorder.pause();\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (mediaRecorder) {\n            mediaRecorder.resume();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        videos = [];\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        isStoppedRecording = false;\n        mediaRecorder = null;\n\n        if (mediaRecorder) {\n            mediaRecorder.clearRecordedData();\n        }\n    };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPathColorName = getPathColorName;\nexports.getColorName = getColorName;\nexports.getRandomPop = getRandomPop;\nexports.getIndexedPopColor = getIndexedPopColor;\nvar config = require('./../../config');\n\nvar transparent = exports.transparent = new Color(0, 0);\n\nfunction getPathColorName(path) {\n  var hexColor = path.parent.data.originalColor;\n  // let hexColor = path.strokeColor.toCSS(true); // This fails when it's a gradient\n  return getColorName(hexColor);\n}\n\nfunction getColorName(color) {\n  if (color) {\n    color = color.toUpperCase(); // make sure\n    if (color in config.palette.colorNames) {\n      return config.palette.colorNames[color];\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\nfunction getRandomPop() {\n  var pops = config.palette.pops;\n  return pops[Math.floor(Math.random() * pops.length)];\n}\n\nfunction getIndexedPopColor(index) {\n  var pops = config.palette.pops;\n  return pops[index % pops.length];\n}\n\n},{\"./../../config\":1}],8:[function(require,module,exports){\n\"use strict\";\n\n(function (root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.ShapeDetector = factory();\n  }\n})(undefined, function () {\n\n  var _nbSamplePoints;\n  var _squareSize = 250;\n  var _phi = 0.5 * (-1.0 + Math.sqrt(5.0));\n  var _angleRange = deg2Rad(45.0);\n  var _anglePrecision = deg2Rad(2.0);\n  var _halfDiagonal = Math.sqrt(_squareSize * _squareSize + _squareSize * _squareSize) * 0.5;\n  var _origin = {\n    x: 0,\n    y: 0\n  };\n\n  function deg2Rad(d) {\n\n    return d * Math.PI / 180.0;\n  };\n\n  function getDistance(a, b) {\n\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  function Stroke(points, name) {\n\n    this.points = points;\n    this.name = name;\n    this.processStroke();\n  };\n\n  Stroke.prototype.processStroke = function () {\n\n    this.points = this.resample();\n    this.setCentroid();\n    this.points = this.rotateBy(-this.indicativeAngle());\n    this.points = this.scaleToSquare();\n    this.setCentroid();\n    this.points = this.translateToOrigin();\n\n    return this;\n  };\n\n  Stroke.prototype.resample = function () {\n\n    var localDistance, q;\n    var interval = this.strokeLength() / (_nbSamplePoints - 1);\n    var distance = 0.0;\n    var newPoints = [this.points[0]];\n\n    for (var i = 1; i < this.points.length; i++) {\n      localDistance = getDistance(this.points[i - 1], this.points[i]);\n\n      if (distance + localDistance >= interval) {\n        q = {\n          x: this.points[i - 1].x + (interval - distance) / localDistance * (this.points[i].x - this.points[i - 1].x),\n          y: this.points[i - 1].y + (interval - distance) / localDistance * (this.points[i].y - this.points[i - 1].y)\n        };\n\n        newPoints.push(q);\n        this.points.splice(i, 0, q);\n        distance = 0.0;\n      } else {\n        distance += localDistance;\n      }\n    }\n\n    if (newPoints.length === _nbSamplePoints - 1) {\n      newPoints.push(this.points[this.points.length - 1]);\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.rotateBy = function (angle) {\n\n    var point;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: (point.x - this.c.x) * cos - (point.y - this.c.y) * sin + this.c.x,\n        y: (point.x - this.c.x) * sin + (point.y - this.c.y) * cos + this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.scaleToSquare = function () {\n\n    var point;\n    var newPoints = [];\n    var box = {\n      minX: +Infinity,\n      maxX: -Infinity,\n      minY: +Infinity,\n      maxY: -Infinity\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      box.minX = Math.min(box.minX, point.x);\n      box.minY = Math.min(box.minY, point.y);\n      box.maxX = Math.max(box.maxX, point.x);\n      box.maxY = Math.max(box.maxY, point.y);\n    }\n\n    box.width = box.maxX - box.minX;\n    box.height = box.maxY - box.minY;\n\n    for (i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x * (_squareSize / box.width),\n        y: point.y * (_squareSize / box.height)\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.translateToOrigin = function (points) {\n\n    var point;\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x + _origin.x - this.c.x,\n        y: point.y + _origin.y - this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.setCentroid = function () {\n\n    var point;\n    this.c = {\n      x: 0.0,\n      y: 0.0\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      this.c.x += point.x;\n      this.c.y += point.y;\n    }\n\n    this.c.x /= this.points.length;\n    this.c.y /= this.points.length;\n\n    return this;\n  };\n\n  Stroke.prototype.indicativeAngle = function () {\n\n    return Math.atan2(this.c.y - this.points[0].y, this.c.x - this.points[0].x);\n  };\n\n  Stroke.prototype.strokeLength = function () {\n\n    var d = 0.0;\n\n    for (var i = 1; i < this.points.length; i++) {\n      d += getDistance(this.points[i - 1], this.points[i]);\n    }\n\n    return d;\n  };\n\n  Stroke.prototype.distanceAtBestAngle = function (pattern) {\n\n    var a = -_angleRange;\n    var b = _angleRange;\n    var x1 = _phi * a + (1.0 - _phi) * b;\n    var f1 = this.distanceAtAngle(pattern, x1);\n    var x2 = (1.0 - _phi) * a + _phi * b;\n    var f2 = this.distanceAtAngle(pattern, x2);\n\n    while (Math.abs(b - a) > _anglePrecision) {\n\n      if (f1 < f2) {\n        b = x2;\n        x2 = x1;\n        f2 = f1;\n        x1 = _phi * a + (1.0 - _phi) * b;\n        f1 = this.distanceAtAngle(pattern, x1);\n      } else {\n        a = x1;\n        x1 = x2;\n        f1 = f2;\n        x2 = (1.0 - _phi) * a + _phi * b;\n        f2 = this.distanceAtAngle(pattern, x2);\n      }\n    }\n\n    return Math.min(f1, f2);\n  };\n\n  Stroke.prototype.distanceAtAngle = function (pattern, angle) {\n\n    var strokePoints = this.rotateBy(angle);\n    var patternPoints = pattern.points;\n    var d = 0.0;\n\n    for (var i = 0; i < strokePoints.length; i++) {\n      d += getDistance(strokePoints[i], patternPoints[i]);\n    }\n\n    return d / strokePoints.length;\n  };\n\n  function ShapeDetector(patterns, options) {\n\n    options = options || {};\n    this.threshold = options.threshold || 0;\n    _nbSamplePoints = options.nbSamplePoints || 64;\n\n    this.patterns = [];\n\n    for (var i = 0; i < patterns.length; i++) {\n      this.learn(patterns[i].name, patterns[i].points);\n    }\n  }\n\n  ShapeDetector.defaultShapes = [{\n    points: [{ x: 0, y: 50 }, { x: 100, y: 50 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 50, y: 0 }, { x: 50, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 100, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 89, \"y\": 164 }, { \"x\": 90, \"y\": 162 }, { \"x\": 92, \"y\": 162 }, { \"x\": 94, \"y\": 164 }, { \"x\": 95, \"y\": 166 }, { \"x\": 96, \"y\": 169 }, { \"x\": 97, \"y\": 171 }, { \"x\": 99, \"y\": 175 }, { \"x\": 101, \"y\": 178 }, { \"x\": 103, \"y\": 182 }, { \"x\": 106, \"y\": 189 }, { \"x\": 108, \"y\": 194 }, { \"x\": 111, \"y\": 199 }, { \"x\": 114, \"y\": 204 }, { \"x\": 117, \"y\": 209 }, { \"x\": 119, \"y\": 214 }, { \"x\": 122, \"y\": 218 }, { \"x\": 124, \"y\": 222 }, { \"x\": 126, \"y\": 225 }, { \"x\": 128, \"y\": 228 }, { \"x\": 130, \"y\": 229 }, { \"x\": 133, \"y\": 233 }, { \"x\": 134, \"y\": 236 }, { \"x\": 136, \"y\": 239 }, { \"x\": 138, \"y\": 240 }, { \"x\": 139, \"y\": 242 }, { \"x\": 140, \"y\": 244 }, { \"x\": 142, \"y\": 242 }, { \"x\": 142, \"y\": 240 }, { \"x\": 142, \"y\": 237 }, { \"x\": 143, \"y\": 235 }, { \"x\": 143, \"y\": 233 }, { \"x\": 145, \"y\": 229 }, { \"x\": 146, \"y\": 226 }, { \"x\": 148, \"y\": 217 }, { \"x\": 149, \"y\": 208 }, { \"x\": 149, \"y\": 205 }, { \"x\": 151, \"y\": 196 }, { \"x\": 151, \"y\": 193 }, { \"x\": 153, \"y\": 182 }, { \"x\": 155, \"y\": 172 }, { \"x\": 157, \"y\": 165 }, { \"x\": 159, \"y\": 160 }, { \"x\": 162, \"y\": 155 }, { \"x\": 164, \"y\": 150 }, { \"x\": 165, \"y\": 148 }, { \"x\": 166, \"y\": 146 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 91, \"y\": 185 }, { \"x\": 93, \"y\": 185 }, { \"x\": 95, \"y\": 185 }, { \"x\": 97, \"y\": 185 }, { \"x\": 100, \"y\": 188 }, { \"x\": 102, \"y\": 189 }, { \"x\": 104, \"y\": 190 }, { \"x\": 106, \"y\": 193 }, { \"x\": 108, \"y\": 195 }, { \"x\": 110, \"y\": 198 }, { \"x\": 112, \"y\": 201 }, { \"x\": 114, \"y\": 204 }, { \"x\": 115, \"y\": 207 }, { \"x\": 117, \"y\": 210 }, { \"x\": 118, \"y\": 212 }, { \"x\": 120, \"y\": 214 }, { \"x\": 121, \"y\": 217 }, { \"x\": 122, \"y\": 219 }, { \"x\": 123, \"y\": 222 }, { \"x\": 124, \"y\": 224 }, { \"x\": 126, \"y\": 226 }, { \"x\": 127, \"y\": 229 }, { \"x\": 129, \"y\": 231 }, { \"x\": 130, \"y\": 233 }, { \"x\": 129, \"y\": 231 }, { \"x\": 129, \"y\": 228 }, { \"x\": 129, \"y\": 226 }, { \"x\": 129, \"y\": 224 }, { \"x\": 129, \"y\": 221 }, { \"x\": 129, \"y\": 218 }, { \"x\": 129, \"y\": 212 }, { \"x\": 129, \"y\": 208 }, { \"x\": 130, \"y\": 198 }, { \"x\": 132, \"y\": 189 }, { \"x\": 134, \"y\": 182 }, { \"x\": 137, \"y\": 173 }, { \"x\": 143, \"y\": 164 }, { \"x\": 147, \"y\": 157 }, { \"x\": 151, \"y\": 151 }, { \"x\": 155, \"y\": 144 }, { \"x\": 161, \"y\": 137 }, { \"x\": 165, \"y\": 131 }, { \"x\": 171, \"y\": 122 }, { \"x\": 174, \"y\": 118 }, { \"x\": 176, \"y\": 114 }, { \"x\": 177, \"y\": 112 }, { \"x\": 177, \"y\": 114 }, { \"x\": 175, \"y\": 116 }, { \"x\": 173, \"y\": 118 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 113, \"y\": 68 }, { \"x\": 86, \"y\": 79 }, { \"x\": 63, \"y\": 131 }, { \"x\": 78, \"y\": 147 }, { \"x\": 156, \"y\": 149 }, { \"x\": 195, \"y\": 100 }, { \"x\": 189, \"y\": 79 }, { \"x\": 125.73497, \"y\": 62.81168 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 98, \"y\": 67 }, { \"x\": 77, \"y\": 85 }, { \"x\": 77, \"y\": 162 }, { \"x\": 179, \"y\": 156 }, { \"x\": 197, \"y\": 123 }, { \"x\": 167, \"y\": 63 }, { \"x\": 141, \"y\": 61 }, { \"x\": 110, \"y\": 59 }, { \"x\": 106.51192, \"y\": 59.70407 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 60, \"y\": 47 }, { \"x\": 43, \"y\": 96 }, { \"x\": 52, \"y\": 206 }, { \"x\": 63, \"y\": 246 }, { \"x\": 118, \"y\": 296 }, { \"x\": 144, \"y\": 246 }, { \"x\": 141, \"y\": 147 }, { \"x\": 133, \"y\": 129 }, { \"x\": 113, \"y\": 80 }, { \"x\": 60.42738, \"y\": 45.76813 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 127, \"y\": 141 }, { \"x\": 124, \"y\": 140 }, { \"x\": 120, \"y\": 139 }, { \"x\": 118, \"y\": 139 }, { \"x\": 116, \"y\": 139 }, { \"x\": 111, \"y\": 140 }, { \"x\": 109, \"y\": 141 }, { \"x\": 104, \"y\": 144 }, { \"x\": 100, \"y\": 147 }, { \"x\": 96, \"y\": 152 }, { \"x\": 93, \"y\": 157 }, { \"x\": 90, \"y\": 163 }, { \"x\": 87, \"y\": 169 }, { \"x\": 85, \"y\": 175 }, { \"x\": 83, \"y\": 181 }, { \"x\": 82, \"y\": 190 }, { \"x\": 82, \"y\": 195 }, { \"x\": 83, \"y\": 200 }, { \"x\": 84, \"y\": 205 }, { \"x\": 88, \"y\": 213 }, { \"x\": 91, \"y\": 216 }, { \"x\": 96, \"y\": 219 }, { \"x\": 103, \"y\": 222 }, { \"x\": 108, \"y\": 224 }, { \"x\": 111, \"y\": 224 }, { \"x\": 120, \"y\": 224 }, { \"x\": 133, \"y\": 223 }, { \"x\": 142, \"y\": 222 }, { \"x\": 152, \"y\": 218 }, { \"x\": 160, \"y\": 214 }, { \"x\": 167, \"y\": 210 }, { \"x\": 173, \"y\": 204 }, { \"x\": 178, \"y\": 198 }, { \"x\": 179, \"y\": 196 }, { \"x\": 182, \"y\": 188 }, { \"x\": 182, \"y\": 177 }, { \"x\": 178, \"y\": 167 }, { \"x\": 170, \"y\": 150 }, { \"x\": 163, \"y\": 138 }, { \"x\": 152, \"y\": 130 }, { \"x\": 143, \"y\": 129 }, { \"x\": 140, \"y\": 131 }, { \"x\": 129, \"y\": 136 }, { \"x\": 126, \"y\": 139 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 516, \"y\": 284 }, { \"x\": 496, \"y\": 319 }, { \"x\": 496, \"y\": 329 }, { \"x\": 513, \"y\": 329 }, { \"x\": 550, \"y\": 324 }, { \"x\": 696, \"y\": 305 }, { \"x\": 737, \"y\": 298 }, { \"x\": 746, \"y\": 292 }, { \"x\": 734, \"y\": 278 }, { \"x\": 709, \"y\": 252 }, { \"x\": 664, \"y\": 193 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 179, \"y\": 159 }, { \"x\": 152, \"y\": 290 }, { \"x\": 143, \"y\": 336 }, { \"x\": 142, \"y\": 355 }, { \"x\": 160, \"y\": 348 }, { \"x\": 208, \"y\": 337 }, { \"x\": 241, \"y\": 330 }, { \"x\": 256, \"y\": 328 }, { \"x\": 254, \"y\": 315 }, { \"x\": 238, \"y\": 277 }, { \"x\": 210, \"y\": 200 }, { \"x\": 182.94356, \"y\": 110.45656 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 105, \"y\": 335 }, { \"x\": 115, \"y\": 362 }, { \"x\": 128, \"y\": 338 }, { \"x\": 163, \"y\": 271 }, { \"x\": 241, \"y\": 135 }, { \"x\": 261, \"y\": 104 }, { \"x\": 267, \"y\": 98 }, { \"x\": 261, \"y\": 102 }, { \"x\": 236, \"y\": 119 }, { \"x\": 151, \"y\": 195 }, { \"x\": 108, \"y\": 235 }, { \"x\": 83, \"y\": 267 }, { \"x\": 79.92616, \"y\": 270.93451 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 137, \"y\": 139 }, { \"x\": 135, \"y\": 141 }, { \"x\": 133, \"y\": 144 }, { \"x\": 132, \"y\": 146 }, { \"x\": 130, \"y\": 149 }, { \"x\": 128, \"y\": 151 }, { \"x\": 126, \"y\": 155 }, { \"x\": 123, \"y\": 160 }, { \"x\": 120, \"y\": 166 }, { \"x\": 116, \"y\": 171 }, { \"x\": 112, \"y\": 177 }, { \"x\": 107, \"y\": 183 }, { \"x\": 102, \"y\": 188 }, { \"x\": 100, \"y\": 191 }, { \"x\": 95, \"y\": 195 }, { \"x\": 90, \"y\": 199 }, { \"x\": 86, \"y\": 203 }, { \"x\": 82, \"y\": 206 }, { \"x\": 80, \"y\": 209 }, { \"x\": 75, \"y\": 213 }, { \"x\": 73, \"y\": 213 }, { \"x\": 70, \"y\": 216 }, { \"x\": 67, \"y\": 219 }, { \"x\": 64, \"y\": 221 }, { \"x\": 61, \"y\": 223 }, { \"x\": 60, \"y\": 225 }, { \"x\": 62, \"y\": 226 }, { \"x\": 65, \"y\": 225 }, { \"x\": 67, \"y\": 226 }, { \"x\": 74, \"y\": 226 }, { \"x\": 77, \"y\": 227 }, { \"x\": 85, \"y\": 229 }, { \"x\": 91, \"y\": 230 }, { \"x\": 99, \"y\": 231 }, { \"x\": 108, \"y\": 232 }, { \"x\": 116, \"y\": 233 }, { \"x\": 125, \"y\": 233 }, { \"x\": 134, \"y\": 234 }, { \"x\": 145, \"y\": 233 }, { \"x\": 153, \"y\": 232 }, { \"x\": 160, \"y\": 233 }, { \"x\": 170, \"y\": 234 }, { \"x\": 177, \"y\": 235 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 237 }, { \"x\": 193, \"y\": 238 }, { \"x\": 198, \"y\": 239 }, { \"x\": 200, \"y\": 237 }, { \"x\": 202, \"y\": 239 }, { \"x\": 204, \"y\": 238 }, { \"x\": 206, \"y\": 234 }, { \"x\": 205, \"y\": 230 }, { \"x\": 202, \"y\": 222 }, { \"x\": 197, \"y\": 216 }, { \"x\": 192, \"y\": 207 }, { \"x\": 186, \"y\": 198 }, { \"x\": 179, \"y\": 189 }, { \"x\": 174, \"y\": 183 }, { \"x\": 170, \"y\": 178 }, { \"x\": 164, \"y\": 171 }, { \"x\": 161, \"y\": 168 }, { \"x\": 154, \"y\": 160 }, { \"x\": 148, \"y\": 155 }, { \"x\": 143, \"y\": 150 }, { \"x\": 138, \"y\": 148 }, { \"x\": 136, \"y\": 148 }],\n    name: \"triangle\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 50 }, { x: 50, y: 50 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 100 }, { x: 50, y: 100 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 78, \"y\": 149 }, { \"x\": 78, \"y\": 153 }, { \"x\": 78, \"y\": 157 }, { \"x\": 78, \"y\": 160 }, { \"x\": 79, \"y\": 162 }, { \"x\": 79, \"y\": 164 }, { \"x\": 79, \"y\": 167 }, { \"x\": 79, \"y\": 169 }, { \"x\": 79, \"y\": 173 }, { \"x\": 79, \"y\": 178 }, { \"x\": 79, \"y\": 183 }, { \"x\": 80, \"y\": 189 }, { \"x\": 80, \"y\": 193 }, { \"x\": 80, \"y\": 198 }, { \"x\": 80, \"y\": 202 }, { \"x\": 81, \"y\": 208 }, { \"x\": 81, \"y\": 210 }, { \"x\": 81, \"y\": 216 }, { \"x\": 82, \"y\": 222 }, { \"x\": 82, \"y\": 224 }, { \"x\": 82, \"y\": 227 }, { \"x\": 83, \"y\": 229 }, { \"x\": 83, \"y\": 231 }, { \"x\": 85, \"y\": 230 }, { \"x\": 88, \"y\": 232 }, { \"x\": 90, \"y\": 233 }, { \"x\": 92, \"y\": 232 }, { \"x\": 94, \"y\": 233 }, { \"x\": 99, \"y\": 232 }, { \"x\": 102, \"y\": 233 }, { \"x\": 106, \"y\": 233 }, { \"x\": 109, \"y\": 234 }, { \"x\": 117, \"y\": 235 }, { \"x\": 123, \"y\": 236 }, { \"x\": 126, \"y\": 236 }, { \"x\": 135, \"y\": 237 }, { \"x\": 142, \"y\": 238 }, { \"x\": 145, \"y\": 238 }, { \"x\": 152, \"y\": 238 }, { \"x\": 154, \"y\": 239 }, { \"x\": 165, \"y\": 238 }, { \"x\": 174, \"y\": 237 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 235 }, { \"x\": 191, \"y\": 235 }, { \"x\": 195, \"y\": 233 }, { \"x\": 197, \"y\": 233 }, { \"x\": 200, \"y\": 233 }, { \"x\": 201, \"y\": 235 }, { \"x\": 201, \"y\": 233 }, { \"x\": 199, \"y\": 231 }, { \"x\": 198, \"y\": 226 }, { \"x\": 198, \"y\": 220 }, { \"x\": 196, \"y\": 207 }, { \"x\": 195, \"y\": 195 }, { \"x\": 195, \"y\": 181 }, { \"x\": 195, \"y\": 173 }, { \"x\": 195, \"y\": 163 }, { \"x\": 194, \"y\": 155 }, { \"x\": 192, \"y\": 145 }, { \"x\": 192, \"y\": 143 }, { \"x\": 192, \"y\": 138 }, { \"x\": 191, \"y\": 135 }, { \"x\": 191, \"y\": 133 }, { \"x\": 191, \"y\": 130 }, { \"x\": 190, \"y\": 128 }, { \"x\": 188, \"y\": 129 }, { \"x\": 186, \"y\": 129 }, { \"x\": 181, \"y\": 132 }, { \"x\": 173, \"y\": 131 }, { \"x\": 162, \"y\": 131 }, { \"x\": 151, \"y\": 132 }, { \"x\": 149, \"y\": 132 }, { \"x\": 138, \"y\": 132 }, { \"x\": 136, \"y\": 132 }, { \"x\": 122, \"y\": 131 }, { \"x\": 120, \"y\": 131 }, { \"x\": 109, \"y\": 130 }, { \"x\": 107, \"y\": 130 }, { \"x\": 90, \"y\": 132 }, { \"x\": 81, \"y\": 133 }, { \"x\": 76, \"y\": 133 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 67, \"y\": 172 }, { \"x\": 80, \"y\": 85 }, { \"x\": 83, \"y\": 58 }, { \"x\": 83, \"y\": 54 }, { \"x\": 136, \"y\": 110 }, { \"x\": 157, \"y\": 136 }, { \"x\": 162, \"y\": 140 }, { \"x\": 166, \"y\": 143 }, { \"x\": 80, \"y\": 124 }, { \"x\": 45, \"y\": 116 }, { \"x\": 37, \"y\": 114 }, { \"x\": 31, \"y\": 113 }, { \"x\": 52, \"y\": 106 }, { \"x\": 101, \"y\": 86 }, { \"x\": 131, \"y\": 75 }, { \"x\": 157, \"y\": 63 }, { \"x\": 163, \"y\": 62 }, { \"x\": 158, \"y\": 64 }, { \"x\": 153, \"y\": 73 }, { \"x\": 128, \"y\": 103 }, { \"x\": 71, \"y\": 170 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 30, \"y\": 69 }, { \"x\": 116, \"y\": 118 }, { \"x\": 90, \"y\": 164 }, { \"x\": 75, \"y\": 117 }, { \"x\": 157, \"y\": 83 }, { \"x\": 182, \"y\": 140 }, { \"x\": 155, \"y\": 163 }, { \"x\": 144, \"y\": 119 }, { \"x\": 221, \"y\": 54 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 87, \"y\": 76 }, { \"x\": 62, \"y\": 73 }, { \"x\": 100, \"y\": 98 }, { \"x\": 107, \"y\": 57 }, { \"x\": 61, \"y\": 38 }, { \"x\": 73, \"y\": 137 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 123, \"y\": 129 }, { \"x\": 123, \"y\": 131 }, { \"x\": 124, \"y\": 133 }, { \"x\": 125, \"y\": 136 }, { \"x\": 127, \"y\": 140 }, { \"x\": 129, \"y\": 142 }, { \"x\": 133, \"y\": 148 }, { \"x\": 137, \"y\": 154 }, { \"x\": 143, \"y\": 158 }, { \"x\": 145, \"y\": 161 }, { \"x\": 148, \"y\": 164 }, { \"x\": 153, \"y\": 170 }, { \"x\": 158, \"y\": 176 }, { \"x\": 160, \"y\": 178 }, { \"x\": 164, \"y\": 183 }, { \"x\": 168, \"y\": 188 }, { \"x\": 171, \"y\": 191 }, { \"x\": 175, \"y\": 196 }, { \"x\": 178, \"y\": 200 }, { \"x\": 180, \"y\": 202 }, { \"x\": 181, \"y\": 205 }, { \"x\": 184, \"y\": 208 }, { \"x\": 186, \"y\": 210 }, { \"x\": 187, \"y\": 213 }, { \"x\": 188, \"y\": 215 }, { \"x\": 186, \"y\": 212 }, { \"x\": 183, \"y\": 211 }, { \"x\": 177, \"y\": 208 }, { \"x\": 169, \"y\": 206 }, { \"x\": 162, \"y\": 205 }, { \"x\": 154, \"y\": 207 }, { \"x\": 145, \"y\": 209 }, { \"x\": 137, \"y\": 210 }, { \"x\": 129, \"y\": 214 }, { \"x\": 122, \"y\": 217 }, { \"x\": 118, \"y\": 218 }, { \"x\": 111, \"y\": 221 }, { \"x\": 109, \"y\": 222 }, { \"x\": 110, \"y\": 219 }, { \"x\": 112, \"y\": 217 }, { \"x\": 118, \"y\": 209 }, { \"x\": 120, \"y\": 207 }, { \"x\": 128, \"y\": 196 }, { \"x\": 135, \"y\": 187 }, { \"x\": 138, \"y\": 183 }, { \"x\": 148, \"y\": 167 }, { \"x\": 157, \"y\": 153 }, { \"x\": 163, \"y\": 145 }, { \"x\": 165, \"y\": 142 }, { \"x\": 172, \"y\": 133 }, { \"x\": 177, \"y\": 127 }, { \"x\": 179, \"y\": 127 }, { \"x\": 180, \"y\": 125 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 81, \"y\": 219 }, { \"x\": 84, \"y\": 218 }, { \"x\": 86, \"y\": 220 }, { \"x\": 88, \"y\": 220 }, { \"x\": 90, \"y\": 220 }, { \"x\": 92, \"y\": 219 }, { \"x\": 95, \"y\": 220 }, { \"x\": 97, \"y\": 219 }, { \"x\": 99, \"y\": 220 }, { \"x\": 102, \"y\": 218 }, { \"x\": 105, \"y\": 217 }, { \"x\": 107, \"y\": 216 }, { \"x\": 110, \"y\": 216 }, { \"x\": 113, \"y\": 214 }, { \"x\": 116, \"y\": 212 }, { \"x\": 118, \"y\": 210 }, { \"x\": 121, \"y\": 208 }, { \"x\": 124, \"y\": 205 }, { \"x\": 126, \"y\": 202 }, { \"x\": 129, \"y\": 199 }, { \"x\": 132, \"y\": 196 }, { \"x\": 136, \"y\": 191 }, { \"x\": 139, \"y\": 187 }, { \"x\": 142, \"y\": 182 }, { \"x\": 144, \"y\": 179 }, { \"x\": 146, \"y\": 174 }, { \"x\": 148, \"y\": 170 }, { \"x\": 149, \"y\": 168 }, { \"x\": 151, \"y\": 162 }, { \"x\": 152, \"y\": 160 }, { \"x\": 152, \"y\": 157 }, { \"x\": 152, \"y\": 155 }, { \"x\": 152, \"y\": 151 }, { \"x\": 152, \"y\": 149 }, { \"x\": 152, \"y\": 146 }, { \"x\": 149, \"y\": 142 }, { \"x\": 148, \"y\": 139 }, { \"x\": 145, \"y\": 137 }, { \"x\": 141, \"y\": 135 }, { \"x\": 139, \"y\": 135 }, { \"x\": 134, \"y\": 136 }, { \"x\": 130, \"y\": 140 }, { \"x\": 128, \"y\": 142 }, { \"x\": 126, \"y\": 145 }, { \"x\": 122, \"y\": 150 }, { \"x\": 119, \"y\": 158 }, { \"x\": 117, \"y\": 163 }, { \"x\": 115, \"y\": 170 }, { \"x\": 114, \"y\": 175 }, { \"x\": 117, \"y\": 184 }, { \"x\": 120, \"y\": 190 }, { \"x\": 125, \"y\": 199 }, { \"x\": 129, \"y\": 203 }, { \"x\": 133, \"y\": 208 }, { \"x\": 138, \"y\": 213 }, { \"x\": 145, \"y\": 215 }, { \"x\": 155, \"y\": 218 }, { \"x\": 164, \"y\": 219 }, { \"x\": 166, \"y\": 219 }, { \"x\": 177, \"y\": 219 }, { \"x\": 182, \"y\": 218 }, { \"x\": 192, \"y\": 216 }, { \"x\": 196, \"y\": 213 }, { \"x\": 199, \"y\": 212 }, { \"x\": 201, \"y\": 211 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 75, \"y\": 250 }, { \"x\": 75, \"y\": 247 }, { \"x\": 77, \"y\": 244 }, { \"x\": 78, \"y\": 242 }, { \"x\": 79, \"y\": 239 }, { \"x\": 80, \"y\": 237 }, { \"x\": 82, \"y\": 234 }, { \"x\": 82, \"y\": 232 }, { \"x\": 84, \"y\": 229 }, { \"x\": 85, \"y\": 225 }, { \"x\": 87, \"y\": 222 }, { \"x\": 88, \"y\": 219 }, { \"x\": 89, \"y\": 216 }, { \"x\": 91, \"y\": 212 }, { \"x\": 92, \"y\": 208 }, { \"x\": 94, \"y\": 204 }, { \"x\": 95, \"y\": 201 }, { \"x\": 96, \"y\": 196 }, { \"x\": 97, \"y\": 194 }, { \"x\": 98, \"y\": 191 }, { \"x\": 100, \"y\": 185 }, { \"x\": 102, \"y\": 178 }, { \"x\": 104, \"y\": 173 }, { \"x\": 104, \"y\": 171 }, { \"x\": 105, \"y\": 164 }, { \"x\": 106, \"y\": 158 }, { \"x\": 107, \"y\": 156 }, { \"x\": 107, \"y\": 152 }, { \"x\": 108, \"y\": 145 }, { \"x\": 109, \"y\": 141 }, { \"x\": 110, \"y\": 139 }, { \"x\": 112, \"y\": 133 }, { \"x\": 113, \"y\": 131 }, { \"x\": 116, \"y\": 127 }, { \"x\": 117, \"y\": 125 }, { \"x\": 119, \"y\": 122 }, { \"x\": 121, \"y\": 121 }, { \"x\": 123, \"y\": 120 }, { \"x\": 125, \"y\": 122 }, { \"x\": 125, \"y\": 125 }, { \"x\": 127, \"y\": 130 }, { \"x\": 128, \"y\": 133 }, { \"x\": 131, \"y\": 143 }, { \"x\": 136, \"y\": 153 }, { \"x\": 140, \"y\": 163 }, { \"x\": 144, \"y\": 172 }, { \"x\": 145, \"y\": 175 }, { \"x\": 151, \"y\": 189 }, { \"x\": 156, \"y\": 201 }, { \"x\": 161, \"y\": 213 }, { \"x\": 166, \"y\": 225 }, { \"x\": 169, \"y\": 233 }, { \"x\": 171, \"y\": 236 }, { \"x\": 174, \"y\": 243 }, { \"x\": 177, \"y\": 247 }, { \"x\": 178, \"y\": 249 }, { \"x\": 179, \"y\": 251 }, { \"x\": 180, \"y\": 253 }, { \"x\": 180, \"y\": 255 }, { \"x\": 179, \"y\": 257 }, { \"x\": 177, \"y\": 257 }, { \"x\": 174, \"y\": 255 }, { \"x\": 169, \"y\": 250 }, { \"x\": 164, \"y\": 247 }, { \"x\": 160, \"y\": 245 }, { \"x\": 149, \"y\": 238 }, { \"x\": 138, \"y\": 230 }, { \"x\": 127, \"y\": 221 }, { \"x\": 124, \"y\": 220 }, { \"x\": 112, \"y\": 212 }, { \"x\": 110, \"y\": 210 }, { \"x\": 96, \"y\": 201 }, { \"x\": 84, \"y\": 195 }, { \"x\": 74, \"y\": 190 }, { \"x\": 64, \"y\": 182 }, { \"x\": 55, \"y\": 175 }, { \"x\": 51, \"y\": 172 }, { \"x\": 49, \"y\": 170 }, { \"x\": 51, \"y\": 169 }, { \"x\": 56, \"y\": 169 }, { \"x\": 66, \"y\": 169 }, { \"x\": 78, \"y\": 168 }, { \"x\": 92, \"y\": 166 }, { \"x\": 107, \"y\": 164 }, { \"x\": 123, \"y\": 161 }, { \"x\": 140, \"y\": 162 }, { \"x\": 156, \"y\": 162 }, { \"x\": 171, \"y\": 160 }, { \"x\": 173, \"y\": 160 }, { \"x\": 186, \"y\": 160 }, { \"x\": 195, \"y\": 160 }, { \"x\": 198, \"y\": 161 }, { \"x\": 203, \"y\": 163 }, { \"x\": 208, \"y\": 163 }, { \"x\": 206, \"y\": 164 }, { \"x\": 200, \"y\": 167 }, { \"x\": 187, \"y\": 172 }, { \"x\": 174, \"y\": 179 }, { \"x\": 172, \"y\": 181 }, { \"x\": 153, \"y\": 192 }, { \"x\": 137, \"y\": 201 }, { \"x\": 123, \"y\": 211 }, { \"x\": 112, \"y\": 220 }, { \"x\": 99, \"y\": 229 }, { \"x\": 90, \"y\": 237 }, { \"x\": 80, \"y\": 244 }, { \"x\": 73, \"y\": 250 }, { \"x\": 69, \"y\": 254 }, { \"x\": 69, \"y\": 252 }],\n    name: \"other\"\n  }];\n\n  ShapeDetector.prototype.spot = function (points, patternName) {\n\n    if (patternName == null) {\n      patternName = '';\n    }\n\n    var distance, pattern, score;\n    var stroke = new Stroke(points);\n    var bestDistance = +Infinity;\n    var bestPattern = null;\n    var bestScore = 0;\n\n    for (var i = 0; i < this.patterns.length; i++) {\n      pattern = this.patterns[i];\n\n      if (pattern.name.indexOf(patternName) > -1) {\n        distance = stroke.distanceAtBestAngle(pattern);\n        score = 1.0 - distance / _halfDiagonal;\n\n        if (distance < bestDistance && score > this.threshold) {\n          bestDistance = distance;\n          bestPattern = pattern.name;\n          bestScore = score;\n        }\n      }\n    }\n\n    return {\n      pattern: bestPattern,\n      score: bestScore\n    };\n  };\n\n  ShapeDetector.prototype.learn = function (name, points) {\n\n    return this.patterns.push(new Stroke(points, name));\n  };\n\n  return ShapeDetector;\n});\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetWindow = resetWindow;\nvar touch = require('./touch');\nvar ui = require('./ui');\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar timing = require('./timing');\nvar util = require('./util');\nvar sound = require('./sound');\n\nfunction resetWindow() {\n  window.kan = {\n    currentColor: '#2B5E2E',\n    composition: [],\n    compositionInterval: null,\n    compositionTimeout: null,\n    soundTimeouts: [],\n    lastEvent: null,\n    interaction: false,\n    moves: [],\n    playing: false,\n    pinching: false,\n    pinchedGroup: null,\n    pinchedTut: null,\n    pathData: {},\n    shapePath: null,\n    prevAngle: null,\n    sides: [],\n    side: [],\n    corners: [],\n    lastScale: 1,\n    lastRotation: 0,\n    originalPosition: null,\n    tutorialCompletion: {\n      \"fill\": false,\n      \"pinch\": false,\n      \"swipe\": false\n    },\n    inactivityTimeout: null,\n    playPromptTimeout: null,\n    userHasDrawnFirstShape: false,\n    firstTimePlaying: true,\n    shapesSinceTut: 0,\n    refreshCheckInterval: null,\n    sha: null,\n    scheduledOverlay: null,\n    continueCountdownInterval: null,\n    shapeSounds: null\n  };\n}\n\n$(window).on('load', function () {\n  function run() {\n    resetWindow();\n    util.setSha();\n    ui.init();\n    overlays.init();\n    timing.init();\n    sound.init().then(function () {\n      // sound.init() is async because it loads in the sound files\n      touch.init();\n    }).fail(function (e) {\n      console.error('error initting shape sounds:', e);\n      location.reload();\n    });\n  }\n\n  try {\n    run();\n  } catch (e) {\n    console.error(e);\n    setTimeout(function () {\n      // wait 5 seconds then reload\n      location.reload();\n    }, 5 * 1000);\n  }\n});\n\n},{\"./overlays\":10,\"./sound\":13,\"./timing\":14,\"./touch\":15,\"./ui\":17,\"./util\":18,\"./video\":19}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openOverlay = openOverlay;\nexports.resetContinueCountdown = resetContinueCountdown;\nexports.cardNavNext = cardNavNext;\nexports.closeAndResetOverlays = closeAndResetOverlays;\nexports.init = init;\nvar config = require('./../../config');\n\nvar touch = require('./touch');\nvar video = require('./video');\nvar timing = require('./timing');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar hammerCanvas = touch.hammerCanvas;\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar $cardsWrap = $body.find('.overlay.tips .card-wrap');\nvar $cardItems = $cardsWrap.find('article');\nvar cardsCount = $cardItems.length;\nvar $footer = $body.find('.overlay.tips .footer');\n\nvar $sharePhone = $body.find('#phone');\nvar $shareKeypad = $body.find('.keypad');\n\nvar allOverlays = ['intro', 'play-prompt', 'share-prompt', 'continue', 'tips', 'share'];\nvar overlayOpenClasses = allOverlays.map(function (overlay) {\n  return overlay + '-active';\n}).join(' ');\n\nvar overlayActiveClass = 'overlay-active';\n\nfunction openOverlay(overlayName) {\n  // console.log('attempting to open overlay', overlayName);\n  if (window.kan.overlays === false) return;\n  if (allOverlays.includes(overlayName)) {\n    if (window.kan.pinching === true || window.kan.panning === true) {\n      if (overlayName === 'continue') {\n        timing.preventInactivityTimeout();\n      } else {\n        // console.log('scheduling overlay', overlayName);\n        window.kan.scheduledOverlay = overlayName;\n      }\n      return;\n    }\n    closeAndResetOverlays();\n    tutorial.hideContextualTuts();\n    $body.addClass(overlayActiveClass);\n    $body.find('.overlay:not(.tips)').on(tapEvent, function () {\n      closeAndResetOverlays();\n    });\n\n    switch (overlayName) {\n      case 'intro':\n        openIntroOverlay();\n        break;\n      case 'play-prompt':\n        if (util.anyShapesOnCanvas()) {\n          openPlayPromptOverlay();\n        } else {\n          window.kan.playPromptTimeout = setTimeout(function () {\n            openOverlay('play-prompt');\n          }, timing.playPromptDelay / 2);\n        }\n        break;\n      case 'share-prompt':\n        openSharePromptOverlay();\n        break;\n      case 'continue':\n        openContinueOverlay();\n        break;\n      case 'tips':\n        openTipsOverlay();\n        break;\n      case 'share':\n        openShareOverlay();\n        break;\n    }\n  } else {\n    // console.log('unable to open unknown overlay', overlayName);\n  }\n}\n\nfunction openIntroOverlay() {\n  $body.addClass('intro-active');\n}\n\nfunction openPlayPromptOverlay() {\n  $body.addClass('play-prompt-active');\n}\n\nfunction openSharePromptOverlay() {\n  $body.addClass('share-prompt-active');\n}\n\nfunction resetContinueCountdown() {\n  $('.overlay.continue .countdown-num').html(parseInt(timing.continueInactivityDelay / 1000));\n  clearInterval(window.kan.continueCountdownInterval);\n}\n\nfunction openContinueOverlay() {\n  $body.addClass('continue-active');\n\n  resetContinueCountdown();\n  clearTimeout(window.kan.inactivityTimeout);\n  clearTimeout(window.kan.playPromptTimeout);\n\n  window.kan.continueCountdownInterval = setInterval(function () {\n    var $countdownNumWrap = $('.overlay.continue .countdown-num');\n    var count = parseInt($countdownNumWrap.html());\n    if (count > 1) {\n      $countdownNumWrap.html(count - 1);\n    }\n  }, 1000);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    video.enterTutorialMode();\n  }, timing.continueInactivityDelay);\n}\n\nfunction openTipsOverlay() {\n  $body.addClass('tips-active');\n  activateTipsCards();\n}\n\nfunction openShareOverlay() {\n  $body.addClass('share-active');\n}\n\n// card slider navigation\nfunction cardNavNext() {\n  var $old = $body.find('.card-wrap .current');\n  var $new = $old.next().length ? $old.next() : $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  var slide = $new.index();\n  $old.removeClass().addClass('remove');\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(slide + 1, cardsCount);\n  setTimeout(function () {\n    $old.removeClass();\n  }, 600);\n}\n\n// tips card interactions\nfunction cardInteractions() {\n  var timeOfLastInteraction = 0;\n\n  $body.find('.overlay').on(tapEvent, function (e) {\n    var currentTime = Date.now();\n    if (timeOfLastInteraction > currentTime - 250) {\n      return;\n    }\n    timeOfLastInteraction = currentTime;\n\n    if ($(e.target).closest('.card-wrap').length == 1) {\n      // directly on a card, navigate to the next one\n      cardNavNext();\n    } else {\n      // outside elements, close everything and reset\n      closeAndResetOverlays();\n    }\n  });\n}\n\nfunction resetTips() {\n  $cardItems.removeClass();\n  $sharePhone.html('');\n}\n\n// close and reset tips\nfunction closeAndResetOverlays() {\n  $body.removeClass('overlay-active');\n  $body.removeClass(overlayOpenClasses);\n  resetTips();\n}\n\n// deal a fresh stack of cards\nfunction activateTipsCards() {\n  var $new = $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  $cardItems.removeClass();\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(1, cardsCount);\n}\n\n// counting cards\nfunction updateCardCounter(current, total) {\n  $footer.find('.current').html(current);\n  $footer.find('.next').html(total);\n}\n\n// phone inputs\nfunction phoneNumberInputs() {\n  // mask the output\n  $sharePhone.mask('000-000-0000');\n  // get interactions from the keypad\n  $shareKeypad.find('.num').on(tapEvent, function (e) {\n    var phoneNumber = $sharePhone.html().toString() + $(e.target).html().toString();\n    phoneNumber = $sharePhone.masked(phoneNumber);\n    $sharePhone.html(phoneNumber);\n  });\n  // clear the display\n  $shareKeypad.find('.clear').on(tapEvent, function (e) {\n    $sharePhone.html('');\n  });\n  // FIXME: send sms\n  // $shareKeypad.find('.send').on(tapEvent, e => {});\n}\n\n// \"randomly\" place fiddly bits on the cards\nfunction randomCardGraphics() {\n  $body.find('.card-wrap article').each(function (i, el) {\n    $(el).attr('data-bg', i);\n  });\n}\n\nfunction initTips() {\n  cardInteractions();\n}\n\nfunction initShare() {\n  phoneNumberInputs();\n  randomCardGraphics();\n}\n\nfunction init() {\n  initTips();\n  initShare();\n}\n\n},{\"./../../config\":1,\"./timing\":14,\"./touch\":15,\"./tutorial\":16,\"./util\":18,\"./video\":19}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.destroyGroupPops = destroyGroupPops;\nexports.fillInGroupPopsById = fillInGroupPopsById;\nexports.toggleFill = toggleFill;\nexports.cleanUpGroup = cleanUpGroup;\nexports.updatePops = updatePops;\nexports.getOutlineGroup = getOutlineGroup;\nexports.getTruedShape = getTruedShape;\nexports.getCompletedPath = getCompletedPath;\nexports.getShapePrediction = getShapePrediction;\nexports.getIntegerPoint = getIntegerPoint;\nexports.stringifyPoint = stringifyPoint;\nexports.parsePoint = parsePoint;\nexports.getClosestPointFromPathData = getClosestPointFromPathData;\nexports.processShapeData = processShapeData;\nexports.findInteriorCurves = findInteriorCurves;\nexports.getExtendedPath = getExtendedPath;\nexports.getBruteExtendedPath = getBruteExtendedPath;\nexports.getTrimmedPath = getTrimmedPath;\nexports.hitTestGroupBounds = hitTestGroupBounds;\nexports.hitTestBounds = hitTestBounds;\nvar ShapeDetector = require('./lib/shape-detector');\n\nvar config = require('./../../config');\n\nvar util = require('./util');\nvar color = require('./color');\n\nvar cornerThresholdDeg = exports.cornerThresholdDeg = 30;\nvar thresholdDistMultiplier = exports.thresholdDistMultiplier = 0.1;\n\nvar detector = exports.detector = new ShapeDetector(ShapeDetector.defaultShapes);\n\nvar shapeNames = exports.shapeNames = [\"line\", \"circle\", \"square\", \"triangle\", \"other\"];\n\nfunction clearPops() {\n  var pops = util.getAllPops();\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction destroyGroupPops(group) {\n  // console.log('destroying pops');\n  var groupPopsBefore = util.getGroupPops(group);\n  // console.log('pops to be destroyed', groupPopsBefore);\n  if (groupPopsBefore.length > 0) {\n    groupPopsBefore.forEach(function (pop) {\n      return pop.remove();\n    });\n  }\n  var groupPopsAfter = util.getGroupPops(group);\n  // console.log('group pops after', groupPopsAfter);\n}\n\nfunction fillInGroupPopsById(groupId) {\n  var group = paper.project.getItem({\n    className: 'Group',\n    match: function match(el) {\n      return el.id === groupId;\n    }\n  });\n\n  if (!!group && group.children.length > 0) {\n    group.children.forEach(function (groupChild) {\n      if (groupChild.name === 'loop') {\n        toggleFill(groupChild);\n      }\n    });\n  }\n}\n\nfunction toggleFill(item) {\n  var transparent = color.transparent;\n  // console.log('hit');\n  var parent = item.parent;\n\n  // console.log('hit item', item);\n  // console.log('hit parent', parent);\n\n  if (item.data.interior) {\n    // console.log('interior');\n    item.data.transparent = !item.data.transparent;\n\n    if (item.data.transparent) {\n      // console.log('transparent');\n      item.fillColor = transparent;\n      item.strokeColor = transparent;\n    } else {\n      // console.log('not transparent');\n      item.fillColor = parent.data.color;\n      item.strokeColor = parent.data.color;\n    }\n\n    window.kan.moves.push({\n      type: 'fillChange',\n      id: item.id,\n      fill: parent.data.color,\n      transparent: item.data.transparent\n    });\n  } else {\n    // console.log('not interior');\n    // check if item is a pop, because then we'll fill the pop's parent\n    if (!!item.data && item.data.pop === true) {\n      if (!!item.parent) {\n        if (config.pop === true) {\n          fillInGroupPopsById(item.parent.id);\n        }\n      }\n    }\n  }\n}\n\nfunction cleanUpGroup(group) {\n  // console.log('cleaning up group');\n  var acceptableNames = ['mask', 'outer', 'shapePath', 'loop', 'pop'];\n\n  group.children.forEach(function (groupChild) {\n    if (groupChild.name === null || !acceptableNames.includes(groupChild.name) || !groupChild.length > 0) {\n      groupChild.remove();\n    }\n  });\n\n  return group;\n}\n\nfunction updatePops() {\n  var freshGroups = util.getFreshGroups();\n  var popCandidates = util.getPopCandidates();\n  var allPops = util.getAllPops();\n  popCandidates.reverse();\n  // console.log('freshGroups', freshGroups);\n  // console.log('popCandidates', popCandidates);\n  // clearPops();\n\n  freshGroups.forEach(function (freshGroup, i) {\n    // if (i >= 4) return;\n    // console.log('freshGroup', freshGroup);\n\n    var freshOuter = freshGroup._namedChildren.mask[0];\n    freshOuter.bringToFront();\n    // freshOuter.visible = true;\n    // freshOuter.fillColor = 'black';\n    // freshOuter.selected = true;\n    // console.log('freshOuter', freshOuter);\n    // freshOuter.selected = true;\n    popCandidates.forEach(function (otherGroup, j) {\n      var otherGroupOuter = otherGroup._namedChildren.mask[0];\n      if (freshGroup.id !== otherGroup.id) {\n        // console.log('otherGroup', otherGroup);\n        // console.log('otherGroupOuter', otherGroupOuter);\n        // otherGroupOuter.fillColor = 'white';\n        otherGroupOuter.bringToFront();\n        var thisPop = freshOuter.intersect(otherGroupOuter);\n        if (!!thisPop && thisPop.length > 0) {\n          // const popColor = color.getIndexedPopColor(i + j);\n          var popColor = color.getRandomPop();\n          thisPop.fillColor = popColor;\n          thisPop.strokeColor = popColor;\n          thisPop.data.pop = true;\n          thisPop.name = 'pop';\n          thisPop.data.popGroup = freshGroup.id;\n          thisPop.data.intersectingGroup = otherGroup.id;\n          thisPop.visible = true;\n          thisPop.closed = true;\n          thisPop.bringToFront();\n          freshGroup.addChild(thisPop);\n        }\n\n        cleanUpGroup(freshGroup);\n\n        // figure out if this pop intersects any other pops\n        // allPops.forEach((otherPop, k) => {\n        //   console.log('checking other pop', otherPop);\n        //   if (thisPop.id !== otherPop.id && thisPop.intersects(otherPop)) {\n        //     let popIntersection = thisPop.getIntersections(otherPop);\n        //     if (!!popIntersection && popIntersection.length > 0) {\n        //       popIntersection = new Path([popIntersection])\n        //       console.log('popIntersection', popIntersection);\n        //       // const popColor = color.getIndexedPopColor(i + j + k);\n        //       const popColor = color.getRandomPop();\n        //       popIntersection.data.pop = true;\n        //       popIntersection.fillColor = popColor\n        //       popIntersection.strokeColor = popColor;\n        //       popIntersection.visible = true;\n        //       popIntersection.closed = true;\n        //       popIntersection.bringToFront();\n        //     }\n        //   }\n        // });\n      }\n    });\n\n    freshGroup.data.fresh = false;\n  });\n}\n\nfunction getOutlineGroup(truedShape) {\n  // console.log('truedShape', truedShape);\n  var outerPath = new Path();\n  outerPath.name = 'outer';\n  outerPath.visible = true;\n\n  var middlePath = new Path();\n  middlePath.name = 'middle';\n  var sizes = [];\n  var angle = null,\n      lastAngle = null,\n      angleDelta = void 0;\n\n  var firstTop = null,\n      firstBottom = null;\n  var lastTop = null,\n      lastBottom = null;\n\n  if (!(truedShape.length > 0)) return new Group(outerPath, middlePath);\n\n  middlePath.add(truedShape.firstSegment.point);\n\n  for (var i = 0; i < truedShape.length; i += 10) {\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n\n    var size = Math.random() * 9; // This is just random variance\n    sizes.push(size);\n\n    var cumSize = 0;\n    for (var j = 0; j < sizes.length; j++) {\n      cumSize += sizes[j];\n    }\n    var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n    var point = truedShape.getPointAt(i);\n    var normal = truedShape.getNormalAt(i);\n\n    var top = new Point(point.x + normal.x * avgSize, point.y + normal.y * avgSize);\n    var bottom = new Point(point.x - normal.x * avgSize, point.y - normal.y * avgSize);\n\n    // console.log('point', point, 'normal', normal);\n    // console.log('top', top, 'bottom', bottom);\n\n    outerPath.add(top);\n    outerPath.insert(0, bottom);\n    middlePath.add(point);\n\n    lastAngle = angle;\n\n    if (i == 10) {\n      firstTop = top;\n      firstBottom = bottom;\n    } else {\n      lastTop = top;\n      lastBottom = bottom;\n    }\n  }\n\n  if (truedShape.closed === true) {\n    var centerTop = new Point((firstTop.x + lastTop.x) / 2, (firstTop.y + lastTop.y) / 2);\n    var centerBottom = new Point((firstBottom.x + lastBottom.x) / 2, (firstBottom.y + lastBottom.y) / 2);\n    var center = new Point((centerTop.x + centerBottom.x) / 2, (centerTop.y + centerBottom.y) / 2);\n\n    outerPath.add(centerTop);\n    outerPath.insert(0, centerBottom);\n    middlePath.add(center);\n\n    outerPath.add(firstTop);\n    outerPath.insert(0, firstBottom);\n    middlePath.closed = true;\n  }\n\n  outerPath.flatten(50);\n  middlePath.flatten(50);\n  outerPath.simplify();\n  middlePath.simplify();\n\n  outerPath.selected = false;\n  // middlePath.selected = true;\n  outerPath.name = 'outer';\n  middlePath.name = 'middle';\n  var returnGroup = new Group(outerPath, middlePath);\n  return returnGroup;\n}\n\nfunction getTruedShape(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  // console.log('pathClone', pathClone);\n  var completedPath = getCompletedPath(pathClone);\n  // completedPath.reduce();\n\n  // true the path!\n  var truedPath = completedPath;\n  // console.log('truedPath', truedPath);\n\n  truedPath.strokeWidth = pathClone.strokeWidth;\n\n  pathClone.remove();\n  return truedPath;\n}\n\n// extend or trim path if the ends are close\nfunction getCompletedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  pathClone.reduce();\n  pathClone.simplify();\n\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    // trim path if ends are close\n    var trimmedPath = getTrimmedPath(pathClone);\n\n    pathClone.remove();\n\n    return trimmedPath;\n  } else {\n    // extend path to see if an intersection is near\n    var extendedPath = getExtendedPath(pathClone);\n    var _intersections = extendedPath.getIntersections();\n\n    // pathClone.remove();\n\n    if (_intersections.length > 0) {\n      // trim extra extended path\n      var _trimmedPath = getTrimmedPath(extendedPath);\n      extendedPath.remove();\n      return _trimmedPath;\n    } else {\n      // extended path does not intersect, return the original path\n      extendedPath.replaceWith(getBruteExtendedPath(pathClone));\n      if (extendedPath !== null) {\n        var _intersections2 = extendedPath.getIntersections();\n\n        if (_intersections2.length > 0) {\n          var _trimmedPath2 = getTrimmedPath(extendedPath);\n          extendedPath.remove();\n          return _trimmedPath2;\n        }\n\n        if (!!extendedPath && extendedPath.length > 0) {\n          extendedPath.remove();\n        }\n      }\n\n      pathClone.visible = true;\n      return pathClone;\n    }\n  }\n}\n\nfunction getShapePrediction(path) {\n  var prediction = {};\n\n  var shapeJSON = path.exportJSON();\n  var shapeData = processShapeData(shapeJSON);\n  // console.log(JSON.stringify(shapeData));\n  var shapePrediction = detector.spot(shapeData);\n\n  if (shapePrediction.score === 0) {\n    // algorithm doesn't like vertical lines for some reason\n    // if the certainty is 0 it's probably a line\n    prediction.pattern = \"line\";\n    prediction.score = 0.9;\n  } else {\n    if (shapePrediction.score > 0.5) {\n      prediction.pattern = shapePrediction.pattern;\n    } else {\n      prediction.pattern = \"other\";\n    }\n    prediction.score = shapePrediction.score;\n  }\n\n  if (path.closed === true) {\n    var closedShapes = ['triangle', 'square', 'circle'];\n    if (closedShapes.includes(prediction.pattern) === false) {\n      // closed shape should be one of the above, make a random pick\n      prediction.pattern = util.randomPick(closedShapes);\n    }\n  } else if (path.intersects(path) === true) {\n    prediction.pattern = 'other';\n    // const intersectingShapes = ['triangle', 'square', 'circle', 'other'];\n    // if (intersectingShapes.includes(prediction.pattern) === false) {\n    //   prediction.pattern = util.randomPick(intersectingShapes);\n    // }\n  } else {\n    prediction.pattern = 'line'; // lines are the only shape that is not closed and does not intersect\n  }\n\n  // console.log('shape prediction', prediction);\n\n  return prediction;\n}\n\n// floors the coordinates of a point\nfunction getIntegerPoint(point) {\n  return new Point(Math.floor(point.x), Math.floor(point.y));\n}\n\nfunction stringifyPoint(point) {\n  return Math.floor(point.x) + ',' + Math.floor(point.y);\n}\n\nfunction parsePoint(pointStr) {\n  var split = pointStr.split(',').map(function (num) {\n    return Math.floor(num);\n  });\n\n  if (split.length >= 2) {\n    return new Point(split[0], split[1]);\n  }\n\n  return null;\n}\n\nfunction getClosestPointFromPathData(point, pathData) {\n  var leastDistance = void 0,\n      closestPoint = void 0;\n\n  Base.each(pathData, function (datum, i) {\n    var distance = point.getDistance(datum.point);\n    if (!leastDistance || distance < leastDistance) {\n      leastDistance = distance;\n      closestPoint = datum.point;\n    }\n  });\n\n  return closestPoint || point;\n}\n\nfunction processShapeData(json) {\n  var returnShape = [];\n  var jsonObj = JSON.parse(json)[1]; // zero index is stringified type (e.g. \"Path\")\n\n  if ('segments' in jsonObj) {\n    var segments = jsonObj.segments;\n    Base.each(segments, function (segment, i) {\n      if (segment.length === 3) {\n        var positionInfo = segment[0]; // indexes 1 and 2 are superfluous matrix details\n        returnShape.push({\n          x: positionInfo[0],\n          y: positionInfo[1]\n        });\n      } else {\n        returnShape.push({\n          x: segment[0],\n          y: segment[1]\n        });\n      };\n    });\n  }\n  return returnShape;\n}\n\nfunction findInteriorCurves(path) {\n  var transparent = color.transparent;\n\n  var interiorCurves = [];\n\n  var pathClone = path.clone();\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    var dividedPath = pathClone.resolveCrossings();\n    // console.log(dividedPath);\n\n    if (dividedPath.className === 'CompoundPath') {\n      Base.each(dividedPath.children, function (child, i) {\n        if (child.length > 0 && child.closed) {\n          var enclosedLoop = child.clone();\n          if (pathClone.closed) {\n            enclosedLoop.fillColor = pathClone.strokeColor;\n            enclosedLoop.data.interior = true;\n            enclosedLoop.data.transparent = false;\n          } else {\n            enclosedLoop.fillColor = transparent;\n            enclosedLoop.data.transparent = true;\n          }\n          enclosedLoop.data.interior = true;\n          enclosedLoop.visible = true;\n          enclosedLoop.closed = true;\n          interiorCurves.push(enclosedLoop);\n        }\n      });\n    } else {\n      if (pathClone.closed) {\n        var enclosedLoop = pathClone.clone();\n        enclosedLoop.visible = true;\n        enclosedLoop.fillColor = pathClone.strokeColor;\n        enclosedLoop.data.interior = true;\n        enclosedLoop.data.transparent = false;\n        interiorCurves.push(enclosedLoop);\n      }\n    }\n  } else {\n    if (pathClone.closed) {\n      var _enclosedLoop = pathClone.clone();\n      _enclosedLoop.visible = true;\n      _enclosedLoop.fillColor = pathClone.strokeColor;\n      _enclosedLoop.data.interior = true;\n      _enclosedLoop.data.transparent = false;\n      interiorCurves.push(_enclosedLoop);\n    }\n  }\n\n  return interiorCurves;\n}\n\nfunction getExtendedPath(path) {\n  var bruteForce = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n\n  var firstSegment = extendedPath.firstSegment;\n  var nextSegment = firstSegment.next;\n  var startAngle = Math.atan2(nextSegment.point.y - firstSegment.point.y, nextSegment.point.x - firstSegment.point.x); // rad\n  var inverseStartAngle = startAngle + Math.PI;\n  var extendedStartPoint = new Point(firstSegment.point.x + Math.cos(inverseStartAngle) * thresholdDist / 2, firstSegment.point.y + Math.sin(inverseStartAngle) * thresholdDist / 2);\n  extendedPath.insert(0, extendedStartPoint);\n\n  var lastSegment = extendedPath.lastSegment;\n  var penSegment = lastSegment.previous; // penultimate\n  var endAngle = Math.atan2(lastSegment.point.y - penSegment.point.y, lastSegment.point.x - penSegment.point.x); // rad\n  var extendedEndPoint = new Point(lastSegment.point.x + Math.cos(endAngle) * thresholdDist / 2, lastSegment.point.y + Math.sin(endAngle) * thresholdDist / 2);\n  extendedPath.add(extendedEndPoint);\n\n  // extendedPath.visible = true;\n\n  return extendedPath;\n}\n\nfunction getBruteExtendedPath(path) {\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n  var firstPoint = extendedPath.firstSegment.point;\n  var lastPoint = extendedPath.lastSegment.point;\n\n  if (firstPoint.getDistance(lastPoint) < thresholdDist) {\n    extendedPath.insert(0, lastPoint);\n    extendedPath.add(firstPoint);\n    extendedPath.closed = true;\n    extendedPath.unite();\n    var crossings = extendedPath.resolveCrossings();\n    if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n      (function () {\n        var maxArea = 0,\n            maxChild = null;\n        crossings.children.forEach(function (child) {\n          if (child.area > maxArea) {\n            maxChild = child;\n            maxArea = child.area;\n          }\n        });\n\n        extendedPath = maxChild;\n      })();\n    }\n  }\n\n  return extendedPath;\n}\n\nfunction getTrimmedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n\n  var firstPoint = pathClone.firstSegment.point;\n  var lastPoint = pathClone.lastSegment.point;\n  var thresholdDist = thresholdDistMultiplier * pathClone.length;\n\n  var intersections = pathClone.getIntersections();\n  intersections.forEach(function (intersection, i) {\n    if (intersection.offset === 0) {\n      intersections.splice(i, 1);\n    }\n  });\n\n  // console.log('intersections', intersections);\n\n  if (intersections.length == 1) {\n    for (var i = 0; i < intersections.length; i++) {\n      var intersectionPoint = intersections[i].point;\n\n      // if the average of the distance between the first and last points and the intersection point is within the threshold, trim\n      if (firstPoint.getDistance(intersectionPoint) + lastPoint.getDistance(intersectionPoint) < 2 * thresholdDist) {\n        // console.log('trimming path');\n        var dividedPath = pathClone.clone(); // resolve crossings seems to modify the path it was passed, so make an extra clone to be safe\n        dividedPath.visible = false;\n        var pathCrossings = dividedPath.resolveCrossings();\n\n        if (pathCrossings.className === 'CompoundPath' && pathCrossings.children.length > 0) {\n          for (var j = 0; j < pathCrossings.children.length; j++) {\n            var child = pathCrossings.children[j];\n            if (child.closed) {\n              // child.selected = true;\n              dividedPath = dividedPath.subtract(child);\n            }\n          }\n        }\n\n        // dividedPath.selected = true;\n\n        var trimmedPath = pathClone.subtract(dividedPath);\n        if (trimmedPath.length === 0) return pathClone;\n        if (trimmedPath.className === 'CompoundPath' && trimmedPath.children.length > 0) {\n          var _ret2 = function () {\n            var closedChildren = [];\n            trimmedPath.children.forEach(function (child, i) {\n              if (child.length > 0 && child.closed) {\n                var childClone = child.clone();\n                childClone.visible = false;\n                closedChildren.push(childClone);\n              }\n            });\n\n            if (closedChildren.length > 0) {\n              if (closedChildren.length > 1) {\n                // for some reason there are more than one closed children, merge them\n                var accumulator = closedChildren[0];\n\n                for (var _j = 1; _j < closedChildren.length; _j++) {\n                  accumulator = accumulator.unite(closedChildren[_j]);\n                }\n\n                if (accumulator.length > 0 && accumulator.className === 'Path') {\n                  // console.log('trimmed accumulator', accumulator);\n                  var newPath = new Path();\n                  newPath.copyContent(accumulator);\n                  newPath.copyAttributes(pathClone);\n                  accumulator.remove();\n                  pathClone.remove();\n                  dividedPath.remove();\n                  trimmedPath.remove();\n                  return {\n                    v: newPath\n                  };\n                }\n              }\n\n              pathClone.remove();\n              dividedPath.remove();\n              trimmedPath.remove();\n              // console.log('trimmed closedChildren[0]', closedChildren[0]);\n              return {\n                v: closedChildren[0]\n              };\n            }\n          }();\n\n          if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n        }\n\n        // console.log('trimmed path return', trimmedPath);\n        // console.log('path clone', pathClone);\n        // console.log('dividedPath', dividedPath);\n        pathClone.remove();\n        dividedPath.remove();\n        return trimmedPath;\n      }\n    }\n\n    // no close intersection were found so nothing can be trimmed\n    return pathClone;\n  } else {\n    return path;\n  }\n}\n\nfunction hitTestGroupBounds(point) {\n  var groups = util.getAllGroups();\n  return hitTestBounds(point, groups);\n}\n\nfunction hitTestBounds(point, children) {\n  if (!point) return null;\n\n  for (var i = children.length - 1; i >= 0; i--) {\n    var child = children[i];\n    var bounds = child.strokeBounds;\n    if (point.isInside(child.strokeBounds)) {\n      return child;\n    }\n  }\n\n  return null;\n}\n\n},{\"./../../config\":1,\"./color\":7,\"./lib/shape-detector\":8,\"./util\":18}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.record = record;\nvar config = require('./../../config');\n\nvar RecordRTC = require('recordrtc');\n\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar drawCanvas = document.getElementById(config.canvasId);\nvar canvasRecorder = RecordRTC(drawCanvas, {\n  type: 'canvas'\n});\n\nfunction record() {\n  startRecording();\n\n  var now = new Date().getTime();\n\n  sound.asyncPlayCompositionOnce().then(function () {\n    stopRecording();\n    // return sound.asyncPlayCompositionOnce().then(() => {\n    //   stopRecording();\n    // });\n  }).error(function (e) {\n    stopRecording();\n  });\n}\n//\n// let audioRecorder;\n// let chunks = [];\n// let buffer;\n// let offlineCtx;\n// let source;\n// let chunks = [];\n// let dest;\n// let audioRecorder;\nvar context = new AudioContext();\n// let offlineCtx;\n// let sourceNode;\n\nfunction startRecording() {\n  Howler.masterGain.connect(context.destination);\n  // dest = context.createMediaStreamDestination();\n  // Howler.ctx.connect(dest);\n  // audioRecorder = new MediaRecorder(dest.stream);\n  // audioRecorder.ondataavailable = function(e) {\n  //   // push each chunk (blobs) in an array\n  //   chunks.push(e.data);\n  // };\n  //\n  // audioRecorder.start();\n  // console.log('start recording');\n  // offlineCtx = new OfflineAudioContext(2, Howler.ctx.sampleRate * 40, Howler.ctx.sampleRate);\n  // sourceNode = offlineCtx.createMediaStreamSource\n  // source = offlineCtx.createBufferSource();\n  // console.log(offlineCtx);\n  // let processor = Howler.ctx.createScriptProcessor();\n  // console.log(processor);\n  // let otherNode = AudioNode.connect(node);\n  // console.log(otherNode);\n  // audioRecorder = new Recorder(processor);\n  // audioRecorder.record();\n  // navigator.getUserMedia({ audio: true }, function(audioStream) {\n  // audioRecorder = RecordRTC(processor);\n  // audioRecorder.startRecording();\n  //   // audioRecorder = new MediaRecorder(stream);\n  //   // console.log(audioRecorder.state);\n  //   // audioRecorder.ondataavailable = function(e) {\n  //   //   console.log('hi');\n  //   //   chunks.push(e.data);\n  //   // }\n  //   // audioRecorder.start();\n  //   // console.log(audioRecorder.state);\n  //   // audioRecorder = new Recorder(stream);\n  //   // audioRecorder.record();\n  //\n  //   // recordAudio.startRecording();\n  //   // mediaRecorder = new MediaStreamRecorder(stream);\n  //   // mediaRecorder.mimeType = 'video/webm';\n  //   // mediaRecorder.ondataavailable = function (blob) {\n  //   //   console.log('hi');\n  //   //     // POST/PUT \"Blob\" using FormData/XHR2\n  //   //     // let blobURL = URL.createObjectURL(blob);\n  //   //     // document.write('<a href=\"' + blobURL + '\">' + blobURL + '</a>');\n  //   //     // download(blob, 'foo.webm');\n  //   // };\n  //   // mediaRecorder.start();\n  //\n  // }, function(error) { console.log( JSON.stringify ( error ) ); });\n  // canvasRecorder.startRecording();\n}\n\nfunction stopRecording() {\n  console.log('stop recording');\n  audioRecorder.stop();\n  console.log(chunks);\n  // audioRecorder.exportWAV(function(blob) {\n  //   // Recorder.forceDownload(blob);\n  //   console.log(blob);\n  //   download(blob);\n  // });\n  // audioRecorder.stopRecording(function(audioURL) {\n  //   // audio.src = audioURL;\n  //\n  //   var recordedBlob = audioRecorder.getBlob();\n  //   download(recordedBlob);\n  //   // audioRecorder.getDataURL(function(dataURL) { });\n  // });\n  // audioRecorder.stop();\n  // console.log(chunks);\n  // var blob = new Blob(chunks, { 'type' : 'audio/ogg; codecs=opus' });\n  // // download(blob, 'foo.ogg');\n  // chunks = [];\n  // mediaRecorder.stop();\n  // mediaRecorder.save();\n  // audioRecorder.stop();\n  // audioRecorder.exportWAV(function(blob) {\n  //   download(blob, 'test.wav');\n  // });\n  // canvasRecorder.stopRecording(function() {\n  //   console.log('stopping recording');\n  //   const blob = canvasRecorder.getBlob();\n  //   download(blob, 'blob.webm');\n  // });\n}\n\n},{\"./../../config\":1,\"./sound\":13,\"./ui\":17,\"recordrtc\":6}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.init = init;\nexports.reinitShapeSounds = reinitShapeSounds;\nexports.getShapeSoundObj = getShapeSoundObj;\nexports.startPlaying = startPlaying;\nexports.stopPlaying = stopPlaying;\nexports.asyncInitShapeSounds = asyncInitShapeSounds;\nexports.formatShapeSoundData = formatShapeSoundData;\nexports.quantizeLength = quantizeLength;\nexports.quantizePosition = quantizePosition;\nexports.removeShapeFromComposition = removeShapeFromComposition;\nexports.clearSoundTimeouts = clearSoundTimeouts;\nexports.startComposition = startComposition;\nexports.asyncPlayCompositionMultipleTimes = asyncPlayCompositionMultipleTimes;\nexports.asyncPlayCompositionOnce = asyncPlayCompositionOnce;\nexports.stopComposition = stopComposition;\nexports.getTrimmedCompositionObj = getTrimmedCompositionObj;\nrequire('howler');\nvar Promise = require(\"bluebird\");\n\nvar ui = require('./ui');\nvar shape = require('./shape');\nvar color = require('./color');\nvar overlays = require('./overlays');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar measures = 4;\nvar bpm = 120;\nvar beatLength = 60 / bpm * 1000; // ms\nvar measureLength = beatLength * 4;\nvar compositionLength = exports.compositionLength = measureLength * measures;\n\nvar playingClass = exports.playingClass = 'playing';\nvar playEnabledClass = exports.playEnabledClass = 'play-enabled';\n\nfunction init() {\n  return asyncInitShapeSounds();\n}\n\nfunction reinitShapeSounds() {\n  return asyncInitShapeSounds();\n}\n\nfunction getShapeSoundObj(path) {\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var shapeSounds = window.kan.shapeSounds || initShapeSounds();\n  // alert(JSON.stringify(window.kan.shapeSounds));\n  // console.log(JSON.stringify(window.kan.shapeSounds));\n\n  var shapePrediction = shape.getShapePrediction(path);\n  var colorName = color.getPathColorName(path);\n  if (colorName === null) colorName = 'black'; // just in case\n\n  var quantizedSoundStartTime = quantizeLength(path.bounds.x / viewWidth * compositionLength); // ms\n  var quantizedSoundDuration = quantizeLength(path.bounds.width / viewWidth * compositionLength); // ms\n\n  var soundObj = {};\n  soundObj.sound = shapeSounds[shapePrediction.pattern];\n  soundObj.startTime = quantizedSoundStartTime;\n  soundObj.duration = quantizedSoundDuration;\n  soundObj.pathId = path.id;\n  soundObj.spriteName = colorName;\n\n  if (!!path.parent && path.parent.className === 'Group') {\n    soundObj.groupId = path.parent.id;\n  }\n\n  return soundObj;\n}\n\nfunction startPlaying() {\n  // console.log('first time', window.kan.firstTimePlaying);\n  if ($body.hasClass(playEnabledClass)) {\n    $body.addClass(playingClass);\n\n    Howler.mute(false);\n\n    window.kan.playing = true;\n\n    if (window.kan.firstTimePlaying === true) {\n      window.kan.firstTimePlaying = false;\n      startComposition(window.kan.composition, false);\n    } else {\n      startComposition(window.kan.composition, true);\n    }\n  } else {\n    window.kan.playing = false;\n    $body.removeClass(playingClass);\n  }\n}\n\nfunction stopPlaying() {\n  var mute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!!mute) {\n    Howler.mute(true);\n  }\n\n  window.kan.playing = false;\n  $body.removeClass(playingClass);\n\n  stopComposition();\n}\n\nfunction asyncGetShapeSoundFromShapeName(shapeName) {\n  var shapeSoundJSONPath = './audio/shapes/' + shapeName + '/' + shapeName + '.json';\n  return $.getJSON(shapeSoundJSONPath).then(function (resp) {\n    var shapeSoundData = formatShapeSoundData(shapeName, resp);\n    var sound = new Howl(shapeSoundData);\n    return {\n      shapeName: shapeName,\n      sound: sound\n    };\n  });\n}\n\nfunction asyncInitShapeSounds() {\n  var returnSounds = {};\n  var extensions = ['ogg', 'm4a', 'mp3', 'ac3'];\n\n  var shapeNames = shape.shapeNames;\n  var promises = [];\n  Base.each(shapeNames, function (shapeName) {\n    promises.push(asyncGetShapeSoundFromShapeName(shapeName));\n  });\n\n  return $.when.apply($, promises).done(function () {\n    var returnSounds = {};\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      returnSounds[arg.shapeName] = arg.sound;\n    }\n\n    window.kan.shapeSounds = returnSounds;\n    return returnSounds;\n  });\n}\n\nfunction formatShapeSoundData(shapeName, data) {\n  var returnData = {};\n\n  returnData.src = data.urls.map(function (url) {\n    return './audio/shapes/' + shapeName + '/' + url;\n  });\n  returnData.sprite = data.sprite;\n  returnData.html5 = true;\n  returnData.loop = false;\n\n  return returnData;\n}\n\nfunction quantizeLength(duration) {\n  var smallestDuration = 60 / bpm;\n  var returnDuration = Math.floor(duration / smallestDuration) * smallestDuration;\n\n  if (returnDuration > 0) {\n    return returnDuration;\n  } else {\n    // always return something greater than zero\n    return smallestDuration;\n  }\n}\n\nfunction quantizePosition(position, viewWidth) {\n  var smallestInterval = viewWidth / (4 * measures);\n  return returnPosition = Math.floor(position / smallestInterval) * smallestInterval;\n}\n\nfunction asyncPlayShape(shape) {\n  return new Promise(function (resolve, reject) {\n    Promise.all([asyncPlayShapeSound(shape), asyncPlayShapeAnimation(shape)]).then(function () {\n      resolve('Group ' + shape.groupId + ' fully done playing');\n    }).error(function (e) {\n      reject('Group ' + shape.groupId + ' errored while playing: ' + e);\n    });\n  });\n}\n\nfunction asyncPlayShapeSound(shape) {\n  return new Promise(function (resolve, reject) {\n    try {\n      // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n      shape.sound.play(shape.spriteName);\n      shape.sound.on('end', function () {\n        resolve('Group ' + shape.groupId + ' done playing sound');\n      });\n    } catch (e) {\n      reject('Error playing shape sound: ' + e);\n    }\n  });\n}\n\nfunction asyncPlayShapeAnimation(shape) {\n  return new Promise(function (resolve, reject) {\n    var item = paper.project.getItem({\n      className: 'Path',\n      match: function match(el) {\n        return el.id === shape.pathId;\n      }\n    });\n    if (!!item) {\n      (function () {\n        var group = item.parent;\n        group.data.animating = true;\n        var totalDuration = measureLength / 2;\n        group.animate([{\n          properties: {\n            scale: 1,\n            rotate: -5\n          },\n          settings: {\n            duration: totalDuration / 4,\n            easing: \"easeInOut\"\n          }\n        }, {\n          properties: {\n            scale: 1.15,\n            rotate: 5\n          },\n          settings: {\n            duration: totalDuration / 2,\n            easing: \"easeInOut\"\n          }\n        }, {\n          properties: {\n            scale: 1,\n            rotate: 0\n          },\n          settings: {\n            duration: totalDuration / 4,\n            easing: \"easeInOut\",\n            complete: function complete() {\n              this.data.animating = false;\n              resolve('Group ' + group.id + ' done animating');\n              // console.log('animation step 3')\n            }\n          }\n        }]);\n      })();\n    } else {\n      reject('Item not specified. Could not animate');\n    }\n  });\n}\n\nfunction removeShapeFromComposition(shapeGroup) {\n  var _loop = function _loop(i) {\n    var sound = window.kan.composition[i];\n\n    if ('groupId' in sound) {\n      if (sound.groupId === shapeGroup.id) {\n        window.kan.composition.splice(i, 1);\n        return {\n          v: void 0\n        };\n      }\n    } else if ('pathId' in sound) {\n      var item = getItems({\n        match: function match(el) {\n          return el.id === sound.pathId;\n        }\n      });\n      if (item.length > 0) {\n        if (!!item.parent && item.parent.className === 'Group' && item.parent.id === shapeGroup.id) {\n          window.kan.composition.splice(i, 1);\n          return {\n            v: void 0\n          };\n        }\n      }\n    }\n  };\n\n  for (var i = 0; i < window.kan.composition.length; i++) {\n    var _ret2 = _loop(i);\n\n    if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n  }\n}\n\nfunction clearSoundTimeouts() {\n  if (window.kan.soundTimeouts.length > 0) {\n    window.kan.soundTimeouts.forEach(function (soundTimeout) {\n      clearTimeout(soundTimeout);\n    });\n  }\n\n  window.kan.soundTimeouts = [];\n}\n\nfunction startComposition(composition) {\n  var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  stopComposition();\n  tutorial.hideContextualTuts();\n\n  clearTimeout(window.kan.playPromptTimeout);\n\n  var iterations = 0;\n  playCompositionFirstTime();\n\n  function playCompositionFirstTime() {\n    clearSoundTimeouts();\n    // console.log('playing composition first time');\n    var trimmedCompositionObj = getTrimmedCompositionObj(composition);\n\n    Base.each(trimmedCompositionObj.composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          // console.log('not playing, returning');\n          return;\n        }\n\n        if (shape.spriteName === null) {\n          // console.log('%cshape is null', 'color:red', shape);\n          return;\n        }\n\n        asyncPlayShape(shape).then(function (res) {\n          console.log(res);\n        }).error(function (e) {\n          console.log('Error playing shape', e);\n        });\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n\n    iterations++;\n    window.kan.compositionTimeout = setTimeout(repeatComposition, compositionLength - trimmedCompositionObj.startTime);\n  }\n\n  function playCompositionOnce() {\n    clearSoundTimeouts();\n    // console.log('repeat');\n    Base.each(composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          // console.log('not playing, returing');\n          return;\n        }\n\n        // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n        asyncPlayShape(shape).then(function (res) {\n          console.log(res);\n        }).error(function (e) {\n          console.log('Error playing shape', e);\n        });\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n    iterations++;\n  }\n\n  function repeatComposition() {\n    if (loop === true) {\n      playCompositionOnce();\n      window.kan.compositionInterval = setInterval(playCompositionOnce, compositionLength);\n    } else {\n      if (iterations < 2) {\n        playCompositionOnce();\n        setTimeout(repeatComposition, compositionLength);\n      } else {\n        stopPlaying();\n        overlays.openOverlay('share-prompt');\n      }\n    }\n  }\n}\n\nfunction asyncPlayCompositionMultipleTimes() {\n  var repeats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n  return new Promise(function (resolve, reject) {\n    var promisedRepeats = [];\n\n    for (var i = 0; i < repeats; i++) {\n      promisedRepeats.push(asyncPlayCompositionOnce());\n    }\n\n    Promise.each(promisedRepeats, function () {\n      console.log('repeat');\n    }).then(function () {\n      resolve('Repeats done');\n    }).error(function (e) {\n      reject(e);\n    });\n  });\n}\n\nfunction asyncPlayCompositionOnce() {\n  return new Promise(function (resolve, reject) {\n    var composition = window.kan.composition;\n    var startTime = new Date().getTime();\n    clearSoundTimeouts();\n\n    var shapePromises = [];\n\n    Base.each(composition, function (shape, i) {\n      shapePromises.push(asyncPlayShapeWithDelay(shape));\n    });\n\n    Promise.all(shapePromises).then(function (res) {\n      var endTime = new Date().getTime();\n      var playTime = endTime - startTime;\n\n      // wait for composition to be fully done before repeating (play is naturally truncated when the last shape finishes playing)\n      if (playTime < compositionLength) {\n        return Promise.delay(compositionLength - playTime).then(function () {\n          resolve('Composition fully done, after a wait');\n        });\n      } else {\n        resolve('Composition fully done, with no wait');\n      }\n    }).error(function (e) {\n      reject(e);\n    });\n  });\n}\n\nfunction asyncPlayShapeWithDelay(shape) {\n  return new Promise(function (resolve, reject) {\n    var soundTimeout = setTimeout(function () {\n      // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n      asyncPlayShape(shape).then(function (res) {\n        resolve(res);\n      }).error(function (e) {\n        reject('Error playing shape with delay: ' + e);\n      });\n    }, shape.startTime);\n    window.kan.soundTimeouts.push(soundTimeout);\n  });\n}\n\nfunction stopComposition() {\n  clearInterval(window.kan.compositionInterval);\n  clearTimeout(window.kan.compositionTimeout);\n  clearSoundTimeouts();\n}\n\nfunction getTrimmedCompositionObj(composition) {\n  var firstTime = 0;\n  var trimmedComposition = [];\n  var startTime = getCompositionStartTime(composition);\n\n  composition.forEach(function (sound) {\n    var modifiedSound = util.shallowCopy(sound);\n    modifiedSound.startTime = sound.startTime - startTime;\n    if (modifiedSound.startTime < 0) modifiedSound.startTime = 0; // this shouldn't happen\n    trimmedComposition.push(modifiedSound);\n  });\n\n  return {\n    composition: trimmedComposition,\n    startTime: startTime\n  };\n}\n\nfunction getCompositionStartTime(composition) {\n  var startTime = compositionLength;\n\n  composition.forEach(function (sound) {\n    // console.log(sound);\n    // console.log(sound.startTime)\n    if ('startTime' in sound && sound.startTime < startTime) {\n      startTime = sound.startTime;\n    }\n  });\n\n  // console.log('start time', startTime);\n\n  if (startTime !== compositionLength) {\n    return startTime;\n  } else {\n    return 0;\n  }\n}\n\n},{\"./color\":7,\"./overlays\":10,\"./shape\":11,\"./tutorial\":16,\"./ui\":17,\"./util\":18,\"bluebird\":2,\"howler\":4}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.preventInactivityTimeout = preventInactivityTimeout;\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar drawInactivityDelay = exports.drawInactivityDelay = 40 * 1000; // ms\nvar continueInactivityDelay = exports.continueInactivityDelay = 30 * 1000; // ms\nvar playPromptDelay = exports.playPromptDelay = 60 * 1000; // ms;\nvar inputDelay = exports.inputDelay = 100; // ms\nvar refreshCheckDelay = exports.refreshCheckDelay = 60 * 1000; // ms\nvar overlayDelay = exports.overlayDelay = 1000; // ms\n\nfunction init() {\n  if (window.location.hash.length > 0 && window.location.hash == '#dev') {\n    window.kan.overlays = false;\n    video.pauseVideo();\n    video.exitTutorialMode();\n  } else {\n    video.enterTutorialMode();\n  }\n}\n\nfunction preventInactivityTimeout() {\n  console.log('prevent timeout: ' + util.getTime());\n  // overlays.closeAndResetOverlays();\n\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    overlays.openOverlay('continue');\n  }, drawInactivityDelay);\n}\n\n},{\"./overlays\":10,\"./util\":18,\"./video\":19}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nrequire('hammerjs');\n\nvar config = require('./../../config');\nvar sound = require('./sound');\nvar color = require('./color');\nvar shape = require('./shape');\nvar util = require('./util');\nvar tutorial = require('./tutorial');\nvar timing = require('./timing');\nvar overlays = require('./overlays');\nvar ui = require('./ui');\n\nvar $body = $('body');\n\nvar hitOptions = {\n  segments: false,\n  stroke: true,\n  fill: true,\n  tolerance: 5\n};\n\nvar minShapeSize = 100;\nvar maxShapeLength = 5000;\nvar maxScaleFactor = 0.8;\n\nvar outerPath = void 0;\nvar sizes = [];\nvar size = void 0;\nvar cumSize = void 0;\nvar prevPoint = void 0;\n\nvar hammerTips = exports.hammerTips = void 0;\nvar hammerCanvas = exports.hammerCanvas = void 0;\n\nfunction init() {\n  exports.hammerTips = hammerTips = new Hammer.Manager(ui.tipsOverlay);\n  hammerTips.add(new Hammer.Swipe({ direction: Hammer.DIRECTION_ALL }));\n  hammerTips.on('swipe', overlays.cardNavNext);\n\n  exports.hammerCanvas = hammerCanvas = new Hammer.Manager(ui.drawCanvas);\n  hammerCanvas.add(new Hammer.Tap({ event: 'doubletap', taps: 2, interval: 400, time: 150, posThreshold: 50 }));\n  hammerCanvas.add(new Hammer.Tap({ event: 'singletap' }));\n  hammerCanvas.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL }));\n  hammerCanvas.add(new Hammer.Pinch());\n\n  hammerCanvas.get('doubletap').recognizeWith('singletap');\n  // hammerCanvas.get('singletap').requireFailure('doubletap');\n  hammerCanvas.get('pan').requireFailure('pinch');\n  hammerCanvas.get('pinch').requireFailure('pan');\n\n  // hammerCanvas.on('singletap', singleTap);\n  hammerCanvas.on('doubletap', doubleTap);\n\n  hammerCanvas.on('panstart', panStart);\n  hammerCanvas.on('panmove', panMove);\n  hammerCanvas.on('panend', panEnd);\n  // hammerCanvas.on('pancancel', panCancel);\n\n  hammerCanvas.on('pinchstart', pinchStart);\n  hammerCanvas.on('pinchmove', pinchMove);\n  hammerCanvas.on('pinchend', pinchEnd);\n  // hammerCanvas.on('pinchcancel', pinchCancel);\n}\n\nfunction enablePanAndPinchEvents() {\n  enablePanEvents();\n  enablePinchEvents();\n}\n\nfunction enableTapEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n  hammerCanvas.get('singletap').set({ enable: enable });\n  hammerCanvas.get('doubletap').set({ enable: enable });\n}\n\nfunction disableTapEvents() {\n  enableTapEvents(false);\n}\n\nfunction enablePanEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pan').set({ enable: enable });\n  // hammerCanvas.get('panstart').set({enable: enable});\n  // hammerCanvas.get('panmove').set({enable: enable});\n  // hammerCanvas.get('panend').set({enable: enable});\n}\n\nfunction disablePanEvents() {\n  enablePanEvents(false);\n}\n\nfunction enablePinchEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pinch').set({ enable: enable });\n  // hammerCanvas.get('pinchstart').set({enable: enable});\n  // hammerCanvas.get('pinchmove').set({enable: enable});\n  // hammerCanvas.get('pinchend').set({enable: enable});\n}\n\nfunction disablePinchEvents() {\n  enablePinchEvents(false);\n}\n\nfunction singleTap(event) {\n  // console.log(event.target);\n  // event.preventDefault();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  tutorial.hideContextualTuts();\n  // $(event.target).click();\n\n  // sound.stopPlaying();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  // console.log(event);\n  // tutorial.hideContextualTuts();\n  //\n  // sound.stopPlaying();\n  //\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (hitResult) {\n    var item = hitResult.item;\n    // item.selected = !item.selected;\n    console.log(item);\n  }\n}\n\nfunction doubleTap(event) {\n  event.preventDefault();\n  // console.log('doubletap');\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  if (hitResult) {\n    shape.toggleFill(hitResult.item);\n    tutorial.hideContextualTutByName('fill');\n  } else {\n    window.kan.pinchedGroup = null;\n    // console.log('hit no item');\n  }\n}\n\nfunction panStart(event) {\n  // console.log(event);\n  // console.log('panstart');\n  // paper.project.activeLayer.removeChildren(); // REMOVE\n  // event.preventDefault();\n  timing.preventInactivityTimeout();\n\n  if (!eventTargetIsOnCanvas(event)) {\n    window.kan.panning = false;\n    // check if tips modal is up\n    if ($body.hasClass('overlay-active tips-active')) {\n      // if so, go to next tip card\n      overlays.cardNavNext();\n    }\n    event.srcEvent.stopPropagation();\n    return;\n  }\n\n  window.kan.panning = true;\n  tutorial.hideContextualTuts();\n\n  hammerCanvas.off('panstart');\n  // hammerCanvas.get('pan').set({enable: false});\n  disablePinchEvents();\n  disableTapEvents();\n\n  // ignore other touch inputs\n  // if (window.kan.pinching) return;\n  // if (!(event.changedPointers && event.changedPointers.length > 0)) return;\n  // if (event.changedPointers.length > 1) {\n  //   console.log('event.changedPointers > 1');\n  // }\n\n  sound.stopPlaying();\n\n  window.kan.prevAngle = Math.atan2(event.velocityY, event.velocityX);\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  outerPath = new Path();\n  outerPath.fillColor = window.kan.currentColor;\n  // outerPath.fillColor = new Color(0, 0.5);\n\n  sizes = [];\n\n  var shapePath = new Path({\n    strokeColor: window.kan.currentColor,\n    name: 'shapePath',\n    strokeWidth: 5,\n    visible: false,\n    strokeCap: 'round'\n  });\n\n  shapePath.add(point);\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    first: true\n  };\n\n  window.kan.shapePath = shapePath;\n}\n\nfunction panMove(event) {\n  // console.log('panmove');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  // don't let the user draw past the max length\n  if (window.kan.shapePath.length <= maxShapeLength) {\n    var pointer = event.center;\n    var point = new Point(pointer.x, pointer.y);\n\n    var angle = Math.atan2(event.velocityY, event.velocityX);\n    var prevAngle = window.kan.prevAngle;\n    var angleDelta = util.angleDelta(angle, prevAngle);\n    window.kan.prevAngle = angle;\n\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n    if (sizes.length > 0) {\n      var dist = prevPoint.getDistance(point);\n\n      // These are based on acceleration\n      size = Math.random() * 10; // This is just random variance\n\n      cumSize = 0;\n      for (var j = 0; j < sizes.length; j++) {\n        cumSize += sizes[j];\n      }\n      // const avgSize = ((cumSize / sizes.length) + size) / 2;\n      var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n      var halfPointX = (point.x + prevPoint.x) / 2;\n      var halfPointY = (point.y + prevPoint.y) / 2;\n      var halfPoint = new Point(halfPointX, halfPointY);\n\n      var topX = halfPoint.x + Math.cos(angle - Math.PI / 2) * avgSize;\n      var topY = halfPoint.y + Math.sin(angle - Math.PI / 2) * avgSize;\n      var top = new Point(topX, topY);\n\n      var bottomX = halfPoint.x + Math.cos(angle + Math.PI / 2) * avgSize;\n      var bottomY = halfPoint.y + Math.sin(angle + Math.PI / 2) * avgSize;\n      var bottom = new Point(bottomX, bottomY);\n\n      outerPath.add(top);\n      outerPath.insert(0, bottom);\n      outerPath.smooth();\n    } else {\n      size = 5;\n    }\n\n    sizes.push(size);\n    prevPoint = point;\n\n    window.kan.pathData[shape.stringifyPoint(point)] = {\n      point: point,\n      speed: Math.abs(event.overallVelocity),\n      angle: angle\n    };\n\n    window.kan.shapePath.add(point);\n  } else {\n    window.kan.shapePath.data.tooLong = true;\n  }\n\n  paper.view.draw();\n}\n\nfunction panEnd(event) {\n  // console.log('panend');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  var transparent = color.transparent;\n  var colorName = color.getColorName(window.kan.currentColor);\n\n  var shapePath = window.kan.shapePath;\n\n  if (shapePath.length <= maxShapeLength) {\n    shapePath.add(point);\n  }\n  outerPath.visible = false;\n\n  if (shapePath.length < minShapeSize || shapePath.data && shapePath.data.tooLong === true) {\n    // console.log('path is too short');\n    shapePath.remove();\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    window.kan.panning = false;\n    return;\n  }\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    last: true\n  };\n\n  var group = new Group();\n\n  var truedShape = shape.getTruedShape(shapePath);\n\n  // group.data.color = truedShape.strokeColor;\n  // console.log('currentGradient:', config.palette.gradients[window.kan.currentColor]);\n\n  var shapeSize = truedShape.strokeBounds;\n  var centerPoint = new Point(shapeSize.width / 2, shapeSize.height / 2);\n  var angle = util.rad(Math.random() * 360);\n  var gradientSize = (shapeSize.width + shapeSize.height) / 4;\n  var originX = centerPoint.x + Math.cos(angle - Math.PI / 2) * gradientSize;\n  var originY = centerPoint.y + Math.sin(angle - Math.PI / 2) * gradientSize;\n  var destinationX = centerPoint.x + Math.cos(angle + Math.PI / 2) * gradientSize;\n  var destinationY = centerPoint.y + Math.sin(angle + Math.PI / 2) * gradientSize;\n\n  var origin = new Point(originX + shapeSize.x, originY + shapeSize.y);\n  var destination = new Point(destinationX + shapeSize.x, destinationY + shapeSize.y);\n  // group.addChild(new Path.Circle({\n  //   center: origin,\n  //   radius: 5,\n  //   fillColor: 'red',\n  // }));\n  // group.addChild(new Path.Circle({\n  //   center: destination,\n  //   radius: 5,\n  //   fillColor: 'green',\n  // }));\n  group.data.originalColor = window.kan.currentColor;\n  group.data.color = {\n    gradient: {\n      stops: config.palette.gradients[window.kan.currentColor]\n    },\n    origin: origin,\n    destination: destination\n  };\n  group.data.scale = 1; // init variable to track scale changes\n  group.data.rotation = 0; // init variable to track rotation changes\n  group.data.fresh = true;\n\n  shapePath.remove();\n  truedShape.visible = false;\n  truedShape.strokeColor = new Color(0, 0);\n  window.kan.shapePath = truedShape;\n  truedShape.name = 'shapePath';\n\n  if (!(truedShape.length > 0)) {\n    truedShape.remove();\n    group.remove();\n    window.kan.panning = false;\n    return;\n  }\n\n  group.addChild(truedShape);\n\n  var shapeSoundObj = sound.getShapeSoundObj(truedShape);\n  window.kan.composition.push(shapeSoundObj);\n\n  truedShape.visible = false;\n  var outlineGroup = shape.getOutlineGroup(truedShape);\n  var outline = outlineGroup._namedChildren.outer[0].clone();\n  outline.name = 'outer';\n  outline.fillColor = window.kan.currentColor;\n  outline.fillColor = group.data.color;\n\n  var outlineCenter = outlineGroup._namedChildren.middle[0].clone();\n  outlineCenter.strokeColor = group.data.color;\n  outlineCenter.visible = false;\n  group.addChild(outline);\n  outline.sendToBack();\n\n  outlineGroup.remove();\n\n  var shapeMask = outline.clone();\n  shapeMask.fillColor = outline.fillColor;\n  shapeMask.strokeColor = outline.strokeColor;\n  shapeMask.closed = true;\n\n  var enclosedLoops = shape.findInteriorCurves(outlineCenter);\n  if (enclosedLoops.length > 0 || truedShape.closed === true) {\n    group.data.line = false;\n  } else {\n    group.data.line = true;\n  }\n\n  enclosedLoops.forEach(function (loop) {\n    shapeMask.unite(loop);\n    shapeMask.sendToBack();\n    loop.name = 'loop';\n    loop.data.loop = true;\n    loop.visible = true;\n    group.addChild(loop);\n  });\n\n  shapeMask.unite();\n  var crossings = shapeMask.resolveCrossings();\n  if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n    (function () {\n      var maxArea = 0,\n          maxChild = null;\n      crossings.children.forEach(function (child) {\n        if (child.area > maxArea) {\n          maxChild = child;\n          maxArea = child.area;\n        }\n      });\n\n      shapeMask = maxChild;\n    })();\n  }\n\n  outlineCenter.remove();\n  shapeMask.visible = false;\n  shapeMask.name = 'mask';\n  shapeMask.data.mask = true;\n  group.addChild(shapeMask);\n  shapeMask.sendToBack();\n\n  shape.cleanUpGroup(group);\n\n  window.kan.moves.push({\n    type: 'newGroup',\n    id: group.id\n  });\n\n  ui.unditherButtonsByName(['new', 'undo']);\n\n  if (window.kan.userHasDrawnFirstShape !== true) {\n    // first shape!\n    // set play prompt timeout\n    window.kan.playPromptTimeout = setTimeout(function () {\n      overlays.openOverlay('play-prompt');\n    }, timing.playPromptDelay);\n\n    window.kan.userHasDrawnFirstShape = true;\n  } else {\n    var groups = util.getAllGroups();\n    if (groups.length >= 3) {\n      $body.addClass(sound.playEnabledClass);\n      ui.unditherButtonsByName(['play-stop', 'share']);\n    }\n    // console.log(groups.length, $body.hasClass(sound.playEnabledClass));\n  }\n\n  if (config.runAnimations) {\n    var scaleFactor = 0.9;\n    group.animate([{\n      properties: {\n        scale: scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeOut\"\n      }\n    }, {\n      properties: {\n        scale: 1 / scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeIn\"\n      }\n    }]);\n  }\n\n  if (!tutorial.allTutsCompleted()) {\n    var tutorialCompletion = window.kan.tutorialCompletion;\n    var tutName = null;\n\n    if (!tutorialCompletion['fill'] && truedShape.closed) {\n      tutName = 'fill';\n    } else {\n      var _groups = paper.project.getItems({\n        match: function match(el) {\n          return el.className === 'Group';\n        }\n      });\n      if (!tutorialCompletion['pinch'] && _groups.length >= 3) {\n        tutName = 'pinch';\n      } else if (!tutorialCompletion['swipe'] && _groups.length >= 5) {\n        tutName = 'swipe';\n      }\n    }\n\n    if (tutName !== null) {\n      // console.log(`${tutName} tutorial`);\n      tutorial.addContextualTut(tutName);\n      window.kan.tutorialCompletion[tutName] = true;\n      group.data.tut = tutName;\n    }\n  }\n\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  // console.log('pan done');\n  hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    hammerCanvas.set({ enable: true });\n    console.log('touch enabled');\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n\n    window.kan.panning = false;\n  }, timing.inputDelay);\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n}\n\nfunction panCancel(event) {\n  console.log('pancancel');\n  event.srcEvent.stopPropagation();\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('panstart', panStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n  window.kan.panning = false;\n}\n\nfunction pinchStart(event) {\n  // console.log('pinchstart');\n  timing.preventInactivityTimeout();\n  tutorial.hideContextualTuts();\n  window.kan.interacting = true;\n  window.kan.pinching = true;\n  // event.preventDefault();\n\n  // hammerCanvas.get('pinchstart').set({enable: false});\n  hammerCanvas.off('pinchstart');\n  disablePanEvents();\n  disableTapEvents();\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  sound.stopPlaying();\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = shape.hitTestGroupBounds(point);\n\n  if (hitResult) {\n    window.kan.pinching = true;\n    window.kan.pinchedGroup = hitResult;\n    window.kan.lastScale = 1;\n    window.kan.lastRotation = event.rotation;\n\n    window.kan.originalPosition = hitResult.position;\n    window.kan.originalRotation = hitResult.data.rotation;\n    window.kan.originalScale = hitResult.data.scale;\n    hitResult.data.thrown = false;\n\n    if (config.pop === true) {\n      shape.destroyGroupPops(hitResult);\n    }\n\n    hitResult.bringToFront();\n\n    if (hitResult.data.tut && hitResult.data.tut.length > 0) {\n      var $tut = $('.tut[data-tut-type=\\'' + hitResult.data.tut + '\\']');\n      if ($tut) {\n        window.kan.pinchedTut = $tut;\n      } else {\n        window.kan.pinchedTut = null;\n      }\n    } else {\n      window.kan.pinchedTut = null;\n    }\n\n    // if (config.runAnimations) {\n    //   hitResult.animate({\n    //     properties: {\n    //       scale: 1.25\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n    window.kan.pinchedTut = null;\n    // console.log('hit no item');\n  }\n}\n\nfunction pinchMove(event) {\n  // console.log('pinchMove');\n  // event.preventDefault();\n\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n\n  if (!!pinchedGroup) {\n    var currentScale = event.scale;\n    var scaleDelta = void 0;\n\n    tutorial.hideContextualTutByName('pinch');\n\n    if (pinchedGroup.bounds.width < minShapeSize || pinchedGroup.bounds.height < minShapeSize) {\n      // only allow a shape to scale down if it is larger than the minimum size\n      scaleDelta = 1.1;\n    } else if (pinchedGroup.bounds.width >= paper.view.viewSize.width || pinchedGroup.bounds.height >= paper.view.viewSize.height) {\n      // only allow shape to scale up if it fits in the viewport\n      scaleDelta = 0.9;\n    } else {\n      scaleDelta = currentScale / window.kan.lastScale;\n    }\n\n    window.kan.lastScale = currentScale;\n\n    var currentRotation = event.rotation;\n    var rotationDelta = currentRotation - window.kan.lastRotation;\n    window.kan.lastRotation = currentRotation;\n\n    // console.log(`scaling by ${scaleDelta}`);\n    // console.log(`rotating by ${rotationDelta}`);\n\n    var centerPoint = event.center;\n    pinchedGroup.position = centerPoint;\n    if (!!$pinchedTut) {\n      tutorial.moveContextualTut($pinchedTut, centerPoint);\n    }\n\n    if (scaleDelta !== 1) {\n      pinchedGroup.scale(scaleDelta);\n\n      // check if scaling went awry, cannot be too big or too small\n      // hypotenuse must fit within view bounds\n      var hypot = util.hypot(pinchedGroup.bounds.width, pinchedGroup.bounds.height);\n      var viewHypot = util.hypot(paper.view.viewSize.width, paper.view.viewSize.height);\n      if (hypot >= viewHypot) {\n        // shape is too big, bring it back down to size\n        scaleDelta = viewHypot * maxScaleFactor / hypot;\n        pinchedGroup.scale(scaleDelta);\n      } else if (hypot <= minShapeSize) {\n        scaleDelta = minShapeSize / hypot;\n        pinchedGroup.scale(scaleDelta);\n      }\n    }\n    pinchedGroup.rotate(rotationDelta);\n\n    pinchedGroup.data.scale *= scaleDelta;\n    pinchedGroup.data.rotation += rotationDelta;\n  }\n}\n\nfunction pinchEnd(event) {\n  // event.preventDefault();\n\n  window.kan.lastEvent = event;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n  var originalPosition = window.kan.originalPosition;\n  var originalRotation = window.kan.originalRotation;\n  var originalScale = window.kan.originalScale;\n\n  if (!!pinchedGroup) {\n    pinchedGroup.data.fresh = true;\n    var move = {\n      id: pinchedGroup.id,\n      type: 'transform'\n    };\n    if (pinchedGroup.position != originalPosition) {\n      move.position = originalPosition;\n    }\n\n    if (pinchedGroup.data.rotation != originalRotation) {\n      move.rotation = originalRotation - pinchedGroup.data.rotation;\n    }\n\n    if (pinchedGroup.data.scale != originalScale) {\n      move.scale = originalScale / pinchedGroup.data.scale;\n    }\n\n    if (pinchedGroup.children.length > 0 && pinchedGroup._namedChildren.shapePath && pinchedGroup._namedChildren.shapePath.length > 0) {\n      // update shapePath sound object if possible\n      sound.removeShapeFromComposition(pinchedGroup); // sound is now wrong\n\n      var shapePath = pinchedGroup._namedChildren.shapePath[0];\n      var shapeSoundObj = sound.getShapeSoundObj(shapePath);\n      window.kan.composition.push(shapeSoundObj);\n    }\n\n    window.kan.moves.push(move);\n\n    if (Math.abs(event.velocity) > 1) {\n      tutorial.hideContextualTutByName('swipe');\n\n      // hide any connected tuts\n      if (!!$pinchedTut) {\n        tutorial.hideContextualTut($pinchedTut);\n      }\n      // dispose of group offscreen\n      if (config.pop === true) {\n        shape.destroyGroupPops(pinchedGroup);\n        pinchedGroup.data.fresh = false;\n      }\n\n      pinchedGroup.data.thrown = true;\n      throwPinchedGroup();\n    }\n\n    // if (config.runAnimations) {\n    //   pinchedGroup.animate({\n    //     properties: {\n    //       scale: 0.8\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n  }\n\n  // if an overlay was interrupted, open it up now\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  window.kan.pinching = false;\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n\n  // console.log('pinch done');\n  // hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    console.log('touch enabled');\n    hammerCanvas.on('pinchstart', pinchStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    // hammerCanvas.set({ enable: true });\n    // hammerCanvas.on('pinchstart', pinchStart);\n    // enablePanAndPinchEvents();\n    // enableTapEvents();\n    // window.kan.pinching = false;\n    // window.kan.pinchedGroup = null;\n  }, timing.inputDelay);\n}\n\nfunction pinchCancel(event) {\n  // console.log(event);\n  event.srcEvent.stopPropagation();\n  console.log('pinchcancel');\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('pinchstart', pinchStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n\n  window.kan.pinching = false;\n}\n\nfunction throwPinchedGroup() {\n\n  var velocityMultiplier = 25;\n  var lastEvent = window.kan.lastEvent;\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n\n  if (pinchedGroup === null || pinchedGroup.data && pinchedGroup.data.thrown === false) return;\n  if (pinchedGroup.position.x <= 0 - pinchedGroup.bounds.width || pinchedGroup.position.x >= viewWidth + pinchedGroup.bounds.width || pinchedGroup.position.y <= 0 - pinchedGroup.bounds.height || pinchedGroup.position.y >= viewHeight + pinchedGroup.bounds.height) {\n    pinchedGroup.data.offScreen = true;\n    pinchedGroup.visible = false;\n    sound.removeShapeFromComposition(pinchedGroup);\n    window.kan.pinchedGroup = null;\n    return;\n  }\n  requestAnimationFrame(throwPinchedGroup);\n  var newX = pinchedGroup.position.x + lastEvent.velocityX * velocityMultiplier;\n  var newY = pinchedGroup.position.y + lastEvent.velocityY * velocityMultiplier;\n  var newPos = new Point(newX, newY);\n  pinchedGroup.position = newPos;\n}\n\nfunction eventTargetIsOnCanvas(event) {\n  if (!event) return false;\n  if (event.target != ui.drawCanvas) return false;\n  return true;\n}\n\n},{\"./../../config\":1,\"./color\":7,\"./overlays\":10,\"./shape\":11,\"./sound\":13,\"./timing\":14,\"./tutorial\":16,\"./ui\":17,\"./util\":18,\"hammerjs\":3}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTutByName = getTutByName;\nexports.allTutsCompleted = allTutsCompleted;\nexports.addContextualTut = addContextualTut;\nexports.hideContextualTut = hideContextualTut;\nexports.hideContextualTutByName = hideContextualTutByName;\nexports.hideContextualTuts = hideContextualTuts;\nexports.resetContextualTuts = resetContextualTuts;\nexports.moveContextualTut = moveContextualTut;\nexports.getTutPositionFromCenter = getTutPositionFromCenter;\nvar config = require('./../../config');\n\nvar contextualTuts = config.contextualTuts;\nvar tutArrowHeight = 16;\n\nfunction getTutByName(tutName) {\n  for (var i = 0; i < contextualTuts.length; i++) {\n    var tutObj = contextualTuts[i];\n\n    if (tutObj.type === tutName) {\n      return tutObj.copy;\n    }\n  }\n\n  return null;\n}\n\nfunction allTutsCompleted() {\n  var tutorialCompletionObj = window.kan.tutorialCompletion;\n  var completion = true;\n\n  Object.keys(tutorialCompletionObj).forEach(function (key, val) {\n    completion = completion && tutorialCompletionObj[key];\n  });\n\n  return completion === true;\n}\n\nfunction addContextualTut(tutName) {\n  if (!!window.kan.shapePath && window.kan.shapePath.length > 0) {\n    hideContextualTuts();\n    window.kan.shapesSinceTut = 0;\n\n    var shapePath = window.kan.shapePath;\n    var shapeCenter = shapePath.bounds.center;\n\n    var tutCopy = getTutByName(tutName);\n\n    if (tutCopy !== null) {\n      var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n      if ($tut.length > 0) {\n        var tutPos = getTutPositionFromCenter($tut, shapeCenter);\n        $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px', visibility: 'visible' });\n        $tut.addClass('animated bounceIn');\n      }\n    }\n  }\n}\n\nfunction hideContextualTut($tut) {\n  $tut.css({ visibility: 'hidden' });\n}\n\nfunction hideContextualTutByName(tutName) {\n  var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n  hideContextualTut($tut);\n}\n\nfunction hideContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.css({ visibility: 'hidden' });\n}\n\nfunction resetContextualTuts() {\n  hideContextualTuts();\n  window.kan.tutorialCompletion = {\n    \"fill\": false,\n    \"pinch\": false,\n    \"swipe\": false\n  };\n}\n\nfunction moveContextualTut($tut, centerPoint) {\n  var tutPos = getTutPositionFromCenter($tut, centerPoint);\n  $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px' });\n}\n\nfunction getTutPositionFromCenter($tut, centerPoint) {\n  var tutWidth = $tut.outerWidth();\n  var tutHeight = $tut.outerHeight();\n  var leftPos = centerPoint.x - tutWidth / 2;\n  var topPos = centerPoint.y - tutHeight - tutArrowHeight;\n  return new Point(leftPos, topPos);\n}\n\n},{\"./../../config\":1}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.ditherButtonsByName = ditherButtonsByName;\nexports.unditherButtonsByName = unditherButtonsByName;\nexports.ditherButtonByName = ditherButtonByName;\nexports.unditherButtonByName = unditherButtonByName;\nexports.resetCanvas = resetCanvas;\nvar config = require('./../../config');\n\nvar sound = require('./sound');\nvar tutorial = require('./tutorial');\nvar overlays = require('./overlays');\nvar util = require('./util');\nvar color = require('./color');\nvar shape = require('./shape');\nvar share = require('./share');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar playingClass = sound.playingClass;\nvar playEnabledClass = sound.playEnabledClass;\n\nvar $newButton = $('.controls .new');\nvar $undoButton = $('.controls .undo');\nvar $playButton = $('.controls .play-stop');\nvar $shareButton = $('.controls .share');\nvar $tipsButton = $('.controls .tips');\n\nvar drawCanvas = exports.drawCanvas = $('#canvas')[0];\nvar tipsOverlay = exports.tipsOverlay = $('.overlay.tips')[0];\n\nvar ditheredClass = 'dithered';\n\nfunction init() {\n  initLogoRefresh();\n  initColorPalette();\n  initNewButton();\n  initUndoButton();\n  initPlayButton();\n  initTipsButton();\n  initShareButton();\n  initContextualTuts();\n  resetCanvas();\n}\n\nfunction unditherAllButtons() {\n  $('.controls .' + ditheredClass).removeClass(ditheredClass);\n}\n\nfunction ditherButtonsByName(buttonNames) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (buttonNames.length > 0) {\n    if ($.isArray(buttonNames)) {\n      buttonNames.forEach(function (name) {\n        return ditherButtonByName(name, undither);\n      });\n    } else {\n      ditherButtonByName(buttonNames, undither);\n    }\n  }\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction ditherButtonByName(buttonName) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var $button = $('.controls .' + buttonName);\n  // console.log($button);\n  if ($button.length > 0) {\n    if (undither !== true) {\n      $button.addClass(ditheredClass);\n    } else {\n      $button.removeClass(ditheredClass);\n    }\n  }\n}\n\nfunction unditherButtonByName(buttonName) {\n  ditherButtonByName(buttonName, true);\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction newPressed() {\n  // console.log('new pressed');\n  window.kan.composition = [];\n  paper.project.activeLayer.removeChildren();\n  tutorial.hideContextualTuts();\n  ditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n  sound.stopPlaying();\n  // window.kan.userHasDrawnFirstShape = false;\n  // tutorial.resetContextualTuts();\n}\n\nfunction undoPressed() {\n  sound.stopPlaying();\n  tutorial.hideContextualTuts();\n\n  var transparent = new Color(0, 0);\n  // console.log('undo pressed');\n  if (!(window.kan.moves.length > 0)) {\n    // console.log('no moves yet');\n    window.kan.userHasDrawnFirstShape = false;\n    return;\n  }\n\n  var lastMove = window.kan.moves.pop();\n  var item = project.getItem({\n    id: lastMove.id\n  });\n\n  if (item) {\n    item.visible = true; // make sure\n    switch (lastMove.type) {\n      case 'newGroup':\n        // console.log('removing group');\n        sound.removeShapeFromComposition(item);\n        util.clearGroupPops(item);\n        item.remove();\n\n        var numGroups = util.getNumGroups();\n        // console.log('numGroups', numGroups);\n\n        if (numGroups <= 0) {\n          ditherButtonsByName(['undo', 'new']);\n        }\n\n        if (numGroups < 3) {\n          ditherButtonsByName(['play-stop', 'share']);\n          $body.removeClass(sound.playEnabledClass);\n        } else {\n          unditherButtonsByName(['play-stop', 'share']);\n          $body.addClass(sound.playEnabledClass);\n        }\n        break;\n      case 'fillChange':\n        if (lastMove.transparent) {\n          item.fillColor = lastMove.fill;\n          item.strokeColor = lastMove.fill;\n        } else {\n          item.fillColor = transparent;\n          item.strokeColor = transparent;\n        }\n      case 'transform':\n        item.data.fresh = true;\n        if (!!lastMove.position) {\n          item.position = lastMove.position;\n          if (item.data && item.data.tut && item.data.tut.length > 0) {\n            // item has connected contextual tut, move it to the right place\n            var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n            tutorial.moveContextualTut($tut, lastMove.position);\n          }\n        }\n        if (!!lastMove.rotation) {\n          item.rotation = lastMove.rotation;\n        }\n        if (!!lastMove.scale) {\n          item.scale(lastMove.scale);\n        }\n        if (config.pop === true) {\n          shape.updatePops();\n        }\n        break;\n      default:\n      // console.log('unknown case');\n    }\n  } else {\n      // console.log('could not find matching item');\n    }\n}\n\nfunction playPressed() {\n  // console.log('play pressed');\n  // sound.stopComposition();\n  // overlays.closeAndResetOverlays();\n  // tutorial.hideContextualTuts();\n  var playing = window.kan.playing;\n  // console.log(playing, util.getNumGroups() > 2, !playing && util.getNumGroups() > 2, $body);\n\n  clearTimeout(window.kan.playPromptTimeout);\n  if (!playing && util.getNumGroups() > 2) {\n    // console.log('starting playing');\n    sound.startPlaying();\n  } else {\n    // console.log('stopping playing');\n    sound.stopPlaying(true);\n  }\n}\n\nfunction tipsPressed() {\n  sound.stopPlaying();\n  overlays.openOverlay('tips');\n  // console.log('tips pressed');\n}\n\nfunction sharePressed() {\n  share.record();\n  // console.log('share pressed');\n  // sound.stopPlaying();\n  // if ($body.hasClass(sound.playEnabledClass)) {\n  //   overlays.openOverlay('share');\n  // }\n}\n\nfunction initLogoRefresh() {\n  $('.main-logo').on(tapEvent, function () {\n    location.reload();\n  });\n}\n\nfunction initColorPalette() {\n  var $paletteWrap = $('ul.palette-colors');\n  var $paletteColors = $paletteWrap.find('li');\n  var paletteColorSize = 20;\n  var paletteSelectedColorSize = 30;\n  var paletteSelectedClass = 'palette-selected';\n\n  // hook up click\n  $paletteColors.on('click tap touch', function () {\n    if (!$body.hasClass(playingClass)) {\n      var $svg = $(this).find('svg.palette-color');\n\n      if (!$svg.hasClass(paletteSelectedClass)) {\n        $('.' + paletteSelectedClass).removeClass(paletteSelectedClass).attr('width', paletteColorSize).attr('height', paletteColorSize).find('rect').attr('rx', 0).attr('ry', 0);\n\n        $svg.addClass(paletteSelectedClass).attr('width', paletteSelectedColorSize).attr('height', paletteSelectedColorSize).find('rect').attr('rx', paletteSelectedColorSize / 2).attr('ry', paletteSelectedColorSize / 2);\n\n        window.kan.currentColor = $svg.find('rect').attr('fill');\n        // console.log('%ccolor', 'color:red', color.getColorName(window.kan.currentColor));\n      }\n    };\n  });\n}\n\nfunction initNewButton() {\n  $('.main-controls .new').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      newPressed();\n    }\n  });\n}\n\nfunction initUndoButton() {\n  $('.main-controls .undo').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      undoPressed();\n    }\n  });\n}\n\nfunction initPlayButton() {\n  $('.main-controls .play-stop .play').on(tapEvent, sound.startPlaying);\n  $('.main-controls .play-stop .stop').on(tapEvent, sound.stopPlaying);\n}\n\nfunction initTipsButton() {\n  $('.controls .tips').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      tipsPressed();\n    }\n  });\n}\n\nfunction initShareButton() {\n  $('.controls .share').on(tapEvent, sharePressed);\n}\n\nfunction initContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.on(tapEvent, function () {\n    $(this).css({ visibility: 'hidden' });\n  });\n}\n\nfunction resetCanvas() {\n  paper.project.clear();\n\n  // add random background\n  paper.project.activeLayer.name = 'background';\n  var numCanvasses = 10;\n  var randomCanvasIndex = Math.round(Math.random() * (numCanvasses - 1)) + 1; // [1, numCanvasses]\n  var canvasBg = new Raster('canvas-' + randomCanvasIndex);\n  canvasBg.name = 'canvasBg';\n  canvasBg.position = paper.view.center;\n\n  // add canvas layer\n  var scaleFactorHorizontal = paper.view.viewSize.width / canvasBg.size.width;\n  var scaleFactorVertical = paper.view.viewSize.height / canvasBg.size.height;\n  canvasBg.scale(Math.max(scaleFactorHorizontal, scaleFactorVertical));\n  var layer = new Layer(); // init new layer that all other shapes will be drawn upon\n  paper.project.activeLayer.name = 'canvas';\n}\n\n},{\"./../../config\":1,\"./color\":7,\"./overlays\":10,\"./shape\":11,\"./share\":12,\"./sound\":13,\"./tutorial\":16,\"./util\":18}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rad = rad;\nexports.deg = deg;\nexports.hypot = hypot;\nexports.angleDelta = angleDelta;\nexports.delta = delta;\nexports.getTime = getTime;\nexports.getAllGroups = getAllGroups;\nexports.anyShapesOnCanvas = anyShapesOnCanvas;\nexports.getNumGroups = getNumGroups;\nexports.getFreshGroups = getFreshGroups;\nexports.getAllPops = getAllPops;\nexports.clearGroupPops = clearGroupPops;\nexports.getGroupPops = getGroupPops;\nexports.getPopCandidates = getPopCandidates;\nexports.setSha = setSha;\nexports.shallowCopy = shallowCopy;\nexports.randomPick = randomPick;\nvar config = require('./../../config');\n\n// Converts from degrees to radians.\nfunction rad(degrees) {\n  return degrees * Math.PI / 180;\n};\n\n// Converts from radians to degrees.\nfunction deg(radians) {\n  return radians * 180 / Math.PI;\n};\n\nfunction hypot(a, b) {\n  return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2)); // pythagorean!\n}\n\n// returns absolute value of the delta of two angles in radians\nfunction angleDelta(x, y) {\n  return Math.abs(Math.atan2(Math.sin(y - x), Math.cos(y - x)));;\n}\n\n// distance between two points\nfunction delta(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)); // pythagorean!\n}\n\nfunction getTime() {\n  return new Date().toLocaleTimeString();\n}\n\nfunction getAllGroups() {\n  return paper.project.getItems({\n    className: 'Group'\n  });\n}\n\nfunction anyShapesOnCanvas() {\n  var groups = getAllGroups();\n  return groups.length > 0;\n}\n\nfunction getNumGroups() {\n  var groups = getAllGroups();\n  // console.log('numgroups', groups.length);\n  return groups.length;\n}\n\nfunction getFreshGroups() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false && el.data.fresh === true;\n    }\n  });\n}\n\nfunction getAllPops() {\n  return paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true;\n    }\n  });\n}\n\nfunction clearGroupPops(group) {\n  var pops = getGroupPops(group);\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction getGroupPops(group) {\n  // console.log('group pop group', group.id, group);\n  var returnPops = [];\n\n  if (group.children.length > 0) {\n    var groupPops = group.getItems({\n      match: function match(el) {\n        return el.data && el.data.pop === true;\n      }\n    });\n    returnPops = returnPops.concat(groupPops);\n  }\n\n  var intersectingPops = paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true && el.data.intersectingGroup === group.id;\n    }\n  });\n\n  if (intersectingPops.length > 0) {\n    returnPops = returnPops.concat(intersectingPops);\n  }\n\n  return returnPops;\n}\n\nfunction getPopCandidates() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false;\n    }\n  });\n}\n\nfunction setSha() {\n  $.get('/hash').done(function (res) {\n    console.log('current hash:', res);\n    window.kan.hash = res;\n  }).fail(function (e) {\n    console.error('error getting hash:', e);\n  });\n}\n\n// http://blog.soulserv.net/understanding-object-cloning-in-javascript-part-i/\nfunction shallowCopy(original) {\n  // First create an empty object with\n  // same prototype of our original source\n  var clone = Object.create(Object.getPrototypeOf(original));\n\n  var i,\n      keys = Object.getOwnPropertyNames(original);\n\n  for (i = 0; i < keys.length; i++) {\n    // copy each property into the clone\n    Object.defineProperty(clone, keys[i], Object.getOwnPropertyDescriptor(original, keys[i]));\n  }\n\n  return clone;\n}\n\nfunction randomPick(array) {\n  if (array.length > 0) {\n    return array[Math.floor(Math.random() * array.length)];\n  }\n\n  return null;\n}\n\n},{\"./../../config\":1}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enterTutorialMode = enterTutorialMode;\nexports.exitTutorialMode = exitTutorialMode;\nexports.pauseVideo = pauseVideo;\nexports.playVideo = playVideo;\nvar config = require('./../../config');\n\nvar main = require('./main');\nvar overlays = require('./overlays');\nvar timing = require('./timing');\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar videoPlayingClass = exports.videoPlayingClass = 'video-playing';\n\nvar $videoWrapper = $body.find('#video-wrap');\nvar $video = $videoWrapper.find('video');\n\nfunction enterTutorialMode() {\n  console.log('entering tutorial mode');\n  playVideo();\n  $body.addClass(videoPlayingClass);\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n  $body.off(tapEvent, timing.preventInactivityTimeout);\n  $body.on(tapEvent, exitTutorialMode);\n  main.resetWindow();\n  ui.resetCanvas();\n  window.kan.refreshCheckInterval = setInterval(function () {\n    $.get('/hash').done(function (res) {\n      if (res !== window.kan.hash) {\n        console.log('different hash, reloading');\n        location.reload();\n      }\n    }).fail(function (e) {\n      console.error('error getting hash:', e);\n    });\n  }, timing.refreshCheckDelay);\n}\n\nfunction exitTutorialMode() {\n  console.log('exiting tutorial mode');\n  sound.reinitShapeSounds().then(function () {\n    clearInterval(window.kan.refreshCheckInterval);\n    Howler.mute(false);\n    pauseVideo();\n    $body.off(tapEvent, exitTutorialMode);\n    $body.on(tapEvent, timing.preventInactivityTimeout);\n    $body.removeClass(videoPlayingClass);\n    clearTimeout(window.kan.inactivityTimeout);\n    clearInterval(window.kan.continueCountdownInterval);\n\n    overlays.openOverlay('intro');\n\n    window.kan.inactivityTimeout = setTimeout(function () {\n      overlays.openOverlay('continue');\n    }, timing.continueInactivityDelay);\n  }).fail(function (e) {\n    console.error('error initting shape sounds:', e);\n    location.reload();\n  });\n}\n\nfunction pauseVideo() {\n  $video.get(0).pause();\n}\n\nfunction playVideo() {\n  $video.get(0).play();\n}\n\n},{\"./../../config\":1,\"./main\":9,\"./overlays\":10,\"./sound\":13,\"./timing\":14,\"./ui\":17}]},{},[9])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25maWcuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvYnJvd3Nlci9ibHVlYmlyZC5qcyIsIm5vZGVfbW9kdWxlcy9oYW1tZXJqcy9oYW1tZXIuanMiLCJub2RlX21vZHVsZXMvaG93bGVyL2Rpc3QvaG93bGVyLmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWNvcmRydGMvUmVjb3JkUlRDLmpzIiwic3JjL2pzL2NvbG9yLmpzIiwic3JjL2pzL2xpYi9zaGFwZS1kZXRlY3Rvci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL292ZXJsYXlzLmpzIiwic3JjL2pzL3NoYXBlLmpzIiwic3JjL2pzL3NoYXJlLmpzIiwic3JjL2pzL3NvdW5kLmpzIiwic3JjL2pzL3RpbWluZy5qcyIsInNyYy9qcy90b3VjaC5qcyIsInNyYy9qcy90dXRvcmlhbC5qcyIsInNyYy9qcy91aS5qcyIsInNyYy9qcy91dGlsLmpzIiwic3JjL2pzL3ZpZGVvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxRQUFRLGFBQVIsR0FBd0IsS0FBeEI7QUFDQSxRQUFRLEdBQVIsR0FBYyxJQUFkO0FBQ0EsUUFBUSxRQUFSLEdBQW1CLFFBQW5COztBQUVBLFFBQVEsT0FBUixHQUFrQjtBQUNoQixVQUFRLENBQUMsU0FBRCxFQUFZLFNBQVosRUFBdUIsU0FBdkIsRUFBa0MsU0FBbEMsRUFBNkMsU0FBN0MsRUFBd0QsU0FBeEQsRUFBbUUsU0FBbkUsRUFBOEUsU0FBOUUsRUFBeUYsU0FBekYsRUFBb0csU0FBcEcsRUFBK0csU0FBL0csRUFBeUgsU0FBekgsQ0FEUTtBQUVoQixjQUFZO0FBQ1YsZUFBVyxPQUREO0FBRVYsZUFBVyxNQUZEO0FBR1YsZUFBVyxNQUhEO0FBSVYsZUFBVyxNQUpEO0FBS1YsZUFBVyxLQUxEO0FBTVYsZUFBVyxLQU5EO0FBT1YsZUFBVyxRQVBEO0FBUVYsZUFBVyxPQVJEO0FBU1YsZUFBVyxPQVREO0FBVVYsZUFBVyxRQVZEO0FBV1YsZUFBVyxPQVhEO0FBWVYsZUFBVztBQVpELEdBRkk7QUFnQmhCLGFBQVc7QUFDVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FERjtBQUVULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQUZGO0FBR1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBSEY7QUFJVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FKRjtBQUtULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQUxGO0FBTVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBTkY7QUFPVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FQRjtBQVFULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVJGO0FBU1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBVEY7QUFVVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FWRjtBQVdULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVhGO0FBWVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaO0FBWkYsR0FoQks7QUE4QmhCLFFBQU0sQ0FBQyxTQUFELEVBQVksU0FBWixFQUF1QixTQUF2QixFQUFrQyxTQUFsQyxFQUE2QyxTQUE3QyxDQTlCVTtBQStCaEIsYUFBVyxFQS9CSztBQWdDaEIscUJBQW1CO0FBaENILENBQWxCOztBQW1DQSxRQUFRLGNBQVIsR0FBeUIsQ0FDdkI7QUFDRSxRQUFNLE1BRFI7QUFFRSxRQUFNO0FBRlIsQ0FEdUIsRUFLdkI7QUFDRSxRQUFNLE9BRFI7QUFFRSxRQUFNO0FBRlIsQ0FMdUIsRUFTdkI7QUFDRSxRQUFNLE9BRFI7QUFFRSxRQUFNO0FBRlIsQ0FUdUIsQ0FBekI7Ozs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM1OEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNubEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsdEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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LEtBQUssR0FBZCxFQUF2QyxFQUEwRCxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUExRCxFQUE2RSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3RSxFQUFpRyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqRyxFQUFxSCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFySCxFQUF5SSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6SSxFQUE2SixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3SixFQUFpTCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqTCxFQUFxTSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyTSxFQUF5TixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6TixFQUE2TyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3TyxFQUFpUSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqUSxFQUFxUixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyUixFQUF5UyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6UyxFQUE2VCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3VCxFQUFpVixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqVixFQUFxVyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyVyxFQUF5WCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6WCxFQUE2WSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3WSxFQUFpYSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqYSxFQUFxYixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyYixFQUF5YyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6YyxF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QixTQUFPLEdBQVAsQ0FBVyxDQUFYLEVBQWMsSUFBZDtBQUNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImV4cG9ydHMucnVuQW5pbWF0aW9ucyA9IGZhbHNlO1xuZXhwb3J0cy5wb3AgPSB0cnVlO1xuZXhwb3J0cy5jYW52YXNJZCA9ICdjYW52YXMnO1xuXG5leHBvcnRzLnBhbGV0dGUgPSB7XG4gIGNvbG9yczogW1wiIzIwMTcxQ1wiLCBcIiMxRTJBNDNcIiwgXCIjMjgzNzdEXCIsIFwiIzM1Mjc0N1wiLCBcIiNDQTJFMjZcIiwgXCIjOUEyQTFGXCIsIFwiI0RBNkMyNlwiLCBcIiM0NTMxMjFcIiwgXCIjOTE2QTQ3XCIsIFwiI0RBQUQyN1wiLCBcIiM3RjdEMzFcIixcIiMyQjVFMkVcIl0sXG4gIGNvbG9yTmFtZXM6IHtcbiAgICBcIiMyMDE3MUNcIjogXCJibGFja1wiLFxuICAgIFwiIzFFMkE0M1wiOiBcImJsdWVcIixcbiAgICBcIiMyODM3N0RcIjogXCJibHVlXCIsXG4gICAgXCIjMzUyNzQ3XCI6IFwiYmx1ZVwiLFxuICAgIFwiI0NBMkUyNlwiOiBcInJlZFwiLFxuICAgIFwiIzlBMkExRlwiOiBcInJlZFwiLFxuICAgIFwiI0RBNkMyNlwiOiBcIm9yYW5nZVwiLFxuICAgIFwiIzQ1MzEyMVwiOiBcImJyb3duXCIsXG4gICAgXCIjOTE2QTQ3XCI6IFwiYnJvd25cIixcbiAgICBcIiNEQUFEMjdcIjogXCJvcmFuZ2VcIixcbiAgICBcIiM3RjdEMzFcIjogXCJncmVlblwiLFxuICAgIFwiIzJCNUUyRVwiOiBcImdyZWVuXCJcbiAgfSxcbiAgZ3JhZGllbnRzOiB7XG4gICAgJyMyMDE3MUMnOiBbJyMyMDE3MUMnLCAnIzAwMDAwMCddLFxuICAgICcjMUUyQTQzJzogWycjMUUyQTQzJywgJyMyNjMxNjYnXSxcbiAgICAnIzI4Mzc3RCc6IFsnIzI4Mzc3RCcsICcjMUU0Njk1J10sXG4gICAgJyMzNTI3NDcnOiBbJyMzNTI3NDcnLCAnIzQ1MDA1QiddLFxuICAgICcjQ0EyRTI2JzogWycjQ0EyRTI2JywgJyM5QjM1MkYnXSxcbiAgICAnIzlBMkExRic6IFsnIzlBMkExRicsICcjQ0QzNjIxJ10sXG4gICAgJyNEQTZDMjYnOiBbJyNEQTZDMjYnLCAnI0JENDgyMCddLFxuICAgICcjNDUzMTIxJzogWycjNDUzMTIxJywgJyMyODE4MDYnXSxcbiAgICAnIzkxNkE0Nyc6IFsnIzkxNkE0NycsICcjNjIzQTIyJ10sXG4gICAgJyNEQUFEMjcnOiBbJyNEQUFEMjcnLCAnI0FGODcxRCddLFxuICAgICcjN0Y3RDMxJzogWycjN0Y3RDMxJywgJyM1NTU4MjcnXSxcbiAgICAnIzJCNUUyRSc6IFsnIzJCNUUyRScsICcjMTY0NTFEJ10sXG4gIH0sXG4gIHBvcHM6IFtcIiMwMEFERUZcIiwgXCIjRjI4NUE1XCIsIFwiIzdEQzU3RlwiLCBcIiNGNkVCMTZcIiwgXCIjRjRFQUUwXCJdLFxuICBjb2xvclNpemU6IDIwLFxuICBzZWxlY3RlZENvbG9yU2l6ZTogMzBcbn07XG5cbmV4cG9ydHMuY29udGV4dHVhbFR1dHMgPSBbXG4gIHtcbiAgICB0eXBlOiBcImZpbGxcIixcbiAgICBjb3B5OiBcIjxzdHJvbmc+RG91YmxlLXRhcDwvc3Ryb25nPiBhIGZpbGxlZCBzaGFwZSB0byA8c3Ryb25nPlVORklMTDwvc3Ryb25nPiBpdC4gUmVwZWF0IHRvIDxzdHJvbmc+RklMTDwvc3Ryb25nPiBhbiB1bmZpbGxlZCBzaGFwZS5cIixcbiAgfSxcbiAge1xuICAgIHR5cGU6IFwicGluY2hcIixcbiAgICBjb3B5OiBcIjxzdHJvbmc+UGluY2g8L3N0cm9uZz4gc2hhcGVzIHdpdGggPHN0cm9uZz5UV08gRklOR0VSUzwvc3Ryb25nPiB0byA8c3Ryb25nPnJlc2l6ZTwvc3Ryb25nPiBhbmQgPHN0cm9uZz5tb3ZlPC9zdHJvbmc+IHRoZW0uXCIsXG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInN3aXBlXCIsXG4gICAgY29weTogXCJUbyA8c3Ryb25nPnJlbW92ZTwvc3Ryb25nPiBzaGFwZXMsIDxzdHJvbmc+cGluY2g8L3N0cm9uZz4gd2l0aCA8c3Ryb25nPnR3byBmaW5nZXJzPC9zdHJvbmc+IHRoZW4gPHN0cm9uZz5zd2lwZTwvc3Ryb25nPiBvciBoaXQgPHN0cm9uZz51bmRvPC9zdHJvbmc+LlwiXG4gIH0sXG5dO1xuIiwiLyogQHByZXNlcnZlXG4gKiBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbiAqIFxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgUGV0a2EgQW50b25vdlxuICogXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiBcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqIFxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICogVEhFIFNPRlRXQVJFLlxuICogXG4gKi9cbi8qKlxuICogYmx1ZWJpcmQgYnVpbGQgdmVyc2lvbiAzLjQuN1xuICogRmVhdHVyZXMgZW5hYmxlZDogY29yZSwgcmFjZSwgY2FsbF9nZXQsIGdlbmVyYXRvcnMsIG1hcCwgbm9kZWlmeSwgcHJvbWlzaWZ5LCBwcm9wcywgcmVkdWNlLCBzZXR0bGUsIHNvbWUsIHVzaW5nLCB0aW1lcnMsIGZpbHRlciwgYW55LCBlYWNoXG4qL1xuIWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgZjtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P2Y9d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Zj1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJihmPXNlbGYpLGYuUHJvbWlzZT1lKCl9fShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgX2RlcmVxXz09XCJmdW5jdGlvblwiJiZfZGVyZXFfO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiBfZGVyZXFfPT1cImZ1bmN0aW9uXCImJl9kZXJlcV87Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgU29tZVByb21pc2VBcnJheSA9IFByb21pc2UuX1NvbWVQcm9taXNlQXJyYXk7XG5mdW5jdGlvbiBhbnkocHJvbWlzZXMpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICByZXQuc2V0SG93TWFueSgxKTtcbiAgICByZXQuc2V0VW53cmFwKCk7XG4gICAgcmV0LmluaXQoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5hbnkgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gYW55KHByb21pc2VzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYW55KHRoaXMpO1xufTtcblxufTtcblxufSx7fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBmaXJzdExpbmVFcnJvcjtcbnRyeSB7dGhyb3cgbmV3IEVycm9yKCk7IH0gY2F0Y2ggKGUpIHtmaXJzdExpbmVFcnJvciA9IGU7fVxudmFyIHNjaGVkdWxlID0gX2RlcmVxXyhcIi4vc2NoZWR1bGVcIik7XG52YXIgUXVldWUgPSBfZGVyZXFfKFwiLi9xdWV1ZVwiKTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxuZnVuY3Rpb24gQXN5bmMoKSB7XG4gICAgdGhpcy5fY3VzdG9tU2NoZWR1bGVyID0gZmFsc2U7XG4gICAgdGhpcy5faXNUaWNrVXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2xhdGVRdWV1ZSA9IG5ldyBRdWV1ZSgxNik7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUgPSBuZXcgUXVldWUoMTYpO1xuICAgIHRoaXMuX2hhdmVEcmFpbmVkUXVldWVzID0gZmFsc2U7XG4gICAgdGhpcy5fdHJhbXBvbGluZUVuYWJsZWQgPSB0cnVlO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmRyYWluUXVldWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLl9kcmFpblF1ZXVlcygpO1xuICAgIH07XG4gICAgdGhpcy5fc2NoZWR1bGUgPSBzY2hlZHVsZTtcbn1cblxuQXN5bmMucHJvdG90eXBlLnNldFNjaGVkdWxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIHByZXYgPSB0aGlzLl9zY2hlZHVsZTtcbiAgICB0aGlzLl9zY2hlZHVsZSA9IGZuO1xuICAgIHRoaXMuX2N1c3RvbVNjaGVkdWxlciA9IHRydWU7XG4gICAgcmV0dXJuIHByZXY7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuaGFzQ3VzdG9tU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbVNjaGVkdWxlcjtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5lbmFibGVUcmFtcG9saW5lID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdHJhbXBvbGluZUVuYWJsZWQgPSB0cnVlO1xufTtcblxuQXN5bmMucHJvdG90eXBlLmRpc2FibGVUcmFtcG9saW5lSWZOZWNlc3NhcnkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5oYXNEZXZUb29scykge1xuICAgICAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5oYXZlSXRlbXNRdWV1ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzVGlja1VzZWQgfHwgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXM7XG59O1xuXG5cbkFzeW5jLnByb3RvdHlwZS5mYXRhbEVycm9yID0gZnVuY3Rpb24oZSwgaXNOb2RlKSB7XG4gICAgaWYgKGlzTm9kZSkge1xuICAgICAgICBwcm9jZXNzLnN0ZGVyci53cml0ZShcIkZhdGFsIFwiICsgKGUgaW5zdGFuY2VvZiBFcnJvciA/IGUuc3RhY2sgOiBlKSArXG4gICAgICAgICAgICBcIlxcblwiKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGhyb3dMYXRlcihlKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUudGhyb3dMYXRlciA9IGZ1bmN0aW9uKGZuLCBhcmcpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhcmcgPSBmbjtcbiAgICAgICAgZm4gPSBmdW5jdGlvbiAoKSB7IHRocm93IGFyZzsgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmbihhcmcpO1xuICAgICAgICB9LCAwKTtcbiAgICB9IGVsc2UgdHJ5IHtcbiAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmbihhcmcpO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFzeW5jIHNjaGVkdWxlciBhdmFpbGFibGVcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIEFzeW5jSW52b2tlTGF0ZXIoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl9sYXRlUXVldWUucHVzaChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmZ1bmN0aW9uIEFzeW5jSW52b2tlKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUucHVzaChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmZ1bmN0aW9uIEFzeW5jU2V0dGxlUHJvbWlzZXMocHJvbWlzZSkge1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLl9wdXNoT25lKHByb21pc2UpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufVxuXG5pZiAoIXV0aWwuaGFzRGV2VG9vbHMpIHtcbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlTGF0ZXIgPSBBc3luY0ludm9rZUxhdGVyO1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2UgPSBBc3luY0ludm9rZTtcbiAgICBBc3luYy5wcm90b3R5cGUuc2V0dGxlUHJvbWlzZXMgPSBBc3luY1NldHRsZVByb21pc2VzO1xufSBlbHNlIHtcbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlTGF0ZXIgPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkKSB7XG4gICAgICAgICAgICBBc3luY0ludm9rZUxhdGVyLmNhbGwodGhpcywgZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZm4uY2FsbChyZWNlaXZlciwgYXJnKTtcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jSW52b2tlLmNhbGwodGhpcywgZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbChyZWNlaXZlciwgYXJnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEFzeW5jLnByb3RvdHlwZS5zZXR0bGVQcm9taXNlcyA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkKSB7XG4gICAgICAgICAgICBBc3luY1NldHRsZVByb21pc2VzLmNhbGwodGhpcywgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9zZXR0bGVQcm9taXNlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbihxdWV1ZSkge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBmbi5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWNlaXZlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHZhciBhcmcgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9ub3JtYWxRdWV1ZSk7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcyA9IHRydWU7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9sYXRlUXVldWUpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl9xdWV1ZVRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1RpY2tVc2VkKSB7XG4gICAgICAgIHRoaXMuX2lzVGlja1VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zY2hlZHVsZSh0aGlzLmRyYWluUXVldWVzKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2lzVGlja1VzZWQgPSBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQXN5bmM7XG5tb2R1bGUuZXhwb3J0cy5maXJzdExpbmVFcnJvciA9IGZpcnN0TGluZUVycm9yO1xuXG59LHtcIi4vcXVldWVcIjoyNixcIi4vc2NoZWR1bGVcIjoyOSxcIi4vdXRpbFwiOjM2fV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGRlYnVnKSB7XG52YXIgY2FsbGVkQmluZCA9IGZhbHNlO1xudmFyIHJlamVjdFRoaXMgPSBmdW5jdGlvbihfLCBlKSB7XG4gICAgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxudmFyIHRhcmdldFJlamVjdGVkID0gZnVuY3Rpb24oZSwgY29udGV4dCkge1xuICAgIGNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCA9IHRydWU7XG4gICAgY29udGV4dC5iaW5kaW5nUHJvbWlzZS5fdGhlbihyZWplY3RUaGlzLCByZWplY3RUaGlzLCBudWxsLCB0aGlzLCBlKTtcbn07XG5cbnZhciBiaW5kaW5nUmVzb2x2ZWQgPSBmdW5jdGlvbih0aGlzQXJnLCBjb250ZXh0KSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayhjb250ZXh0LnRhcmdldCk7XG4gICAgfVxufTtcblxudmFyIGJpbmRpbmdSZWplY3RlZCA9IGZ1bmN0aW9uKGUsIGNvbnRleHQpIHtcbiAgICBpZiAoIWNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCkgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnKSB7XG4gICAgaWYgKCFjYWxsZWRCaW5kKSB7XG4gICAgICAgIGNhbGxlZEJpbmQgPSB0cnVlO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGRlYnVnLnByb3BhZ2F0ZUZyb21GdW5jdGlvbigpO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYm91bmRWYWx1ZSA9IGRlYnVnLmJvdW5kVmFsdWVGdW5jdGlvbigpO1xuICAgIH1cbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzQXJnKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fcHJvcGFnYXRlRnJvbSh0aGlzLCAxKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgcmV0Ll9zZXRCb3VuZFRvKG1heWJlUHJvbWlzZSk7XG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7XG4gICAgICAgICAgICBwcm9taXNlUmVqZWN0aW9uUXVldWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHByb21pc2U6IHJldCxcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgYmluZGluZ1Byb21pc2U6IG1heWJlUHJvbWlzZVxuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQuX3RoZW4oSU5URVJOQUwsIHRhcmdldFJlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgIGJpbmRpbmdSZXNvbHZlZCwgYmluZGluZ1JlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIHJldC5fc2V0T25DYW5jZWwobWF5YmVQcm9taXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQuX3Jlc29sdmVDYWxsYmFjayh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEJvdW5kVG8gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyMDk3MTUyO1xuICAgICAgICB0aGlzLl9ib3VuZFRvID0gb2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjIwOTcxNTIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0JvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSA9PT0gMjA5NzE1Mjtcbn07XG5cblByb21pc2UuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnLCB2YWx1ZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLmJpbmQodGhpc0FyZyk7XG59O1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBvbGQ7XG5pZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIpIG9sZCA9IFByb21pc2U7XG5mdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgIHRyeSB7IGlmIChQcm9taXNlID09PSBibHVlYmlyZCkgUHJvbWlzZSA9IG9sZDsgfVxuICAgIGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBibHVlYmlyZDtcbn1cbnZhciBibHVlYmlyZCA9IF9kZXJlcV8oXCIuL3Byb21pc2VcIikoKTtcbmJsdWViaXJkLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xubW9kdWxlLmV4cG9ydHMgPSBibHVlYmlyZDtcblxufSx7XCIuL3Byb21pc2VcIjoyMn1dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY3IgPSBPYmplY3QuY3JlYXRlO1xuaWYgKGNyKSB7XG4gICAgdmFyIGNhbGxlckNhY2hlID0gY3IobnVsbCk7XG4gICAgdmFyIGdldHRlckNhY2hlID0gY3IobnVsbCk7XG4gICAgY2FsbGVyQ2FjaGVbXCIgc2l6ZVwiXSA9IGdldHRlckNhY2hlW1wiIHNpemVcIl0gPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgaXNJZGVudGlmaWVyID0gdXRpbC5pc0lkZW50aWZpZXI7XG5cbnZhciBnZXRNZXRob2RDYWxsZXI7XG52YXIgZ2V0R2V0dGVyO1xuaWYgKCF0cnVlKSB7XG52YXIgbWFrZU1ldGhvZENhbGxlciA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcImVuc3VyZU1ldGhvZFwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBlbnN1cmVNZXRob2Qob2JqLCAnbWV0aG9kTmFtZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSk7ICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSwgdGhpc1syXSk7ICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubWV0aG9kTmFtZS5hcHBseShvYmosIHRoaXMpOyAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoL21ldGhvZE5hbWUvZywgbWV0aG9kTmFtZSkpKGVuc3VyZU1ldGhvZCk7XG59O1xuXG52YXIgbWFrZUdldHRlciA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwib2JqXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIG9iai5wcm9wZXJ0eU5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcInByb3BlcnR5TmFtZVwiLCBwcm9wZXJ0eU5hbWUpKTtcbn07XG5cbnZhciBnZXRDb21waWxlZCA9IGZ1bmN0aW9uKG5hbWUsIGNvbXBpbGVyLCBjYWNoZSkge1xuICAgIHZhciByZXQgPSBjYWNoZVtuYW1lXTtcbiAgICBpZiAodHlwZW9mIHJldCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghaXNJZGVudGlmaWVyKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXQgPSBjb21waWxlcihuYW1lKTtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSByZXQ7XG4gICAgICAgIGNhY2hlW1wiIHNpemVcIl0rKztcbiAgICAgICAgaWYgKGNhY2hlW1wiIHNpemVcIl0gPiA1MTIpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY2FjaGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkgZGVsZXRlIGNhY2hlW2tleXNbaV1dO1xuICAgICAgICAgICAgY2FjaGVbXCIgc2l6ZVwiXSA9IGtleXMubGVuZ3RoIC0gMjU2O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5nZXRNZXRob2RDYWxsZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VNZXRob2RDYWxsZXIsIGNhbGxlckNhY2hlKTtcbn07XG5cbmdldEdldHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0Q29tcGlsZWQobmFtZSwgbWFrZUdldHRlciwgZ2V0dGVyQ2FjaGUpO1xufTtcbn1cblxuZnVuY3Rpb24gZW5zdXJlTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSkge1xuICAgIHZhciBmbjtcbiAgICBpZiAob2JqICE9IG51bGwpIGZuID0gb2JqW21ldGhvZE5hbWVdO1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiT2JqZWN0IFwiICsgdXRpbC5jbGFzc1N0cmluZyhvYmopICsgXCIgaGFzIG5vIG1ldGhvZCAnXCIgK1xuICAgICAgICAgICAgdXRpbC50b1N0cmluZyhtZXRob2ROYW1lKSArIFwiJ1wiO1xuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZS5UeXBlRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbn1cblxuZnVuY3Rpb24gY2FsbGVyKG9iaikge1xuICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5wb3AoKTtcbiAgICB2YXIgZm4gPSBlbnN1cmVNZXRob2Qob2JqLCBtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gZm4uYXBwbHkob2JqLCB0aGlzKTtcbn1cblByb21pc2UucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOztcbiAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgaWYgKGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICB2YXIgbWF5YmVDYWxsZXIgPSBnZXRNZXRob2RDYWxsZXIobWV0aG9kTmFtZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVDYWxsZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVDYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFyZ3MucHVzaChtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihjYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xufTtcblxuZnVuY3Rpb24gbmFtZWRHZXR0ZXIob2JqKSB7XG4gICAgcmV0dXJuIG9ialt0aGlzXTtcbn1cbmZ1bmN0aW9uIGluZGV4ZWRHZXR0ZXIob2JqKSB7XG4gICAgdmFyIGluZGV4ID0gK3RoaXM7XG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBNYXRoLm1heCgwLCBpbmRleCArIG9iai5sZW5ndGgpO1xuICAgIHJldHVybiBvYmpbaW5kZXhdO1xufVxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBpc0luZGV4ID0gKHR5cGVvZiBwcm9wZXJ0eU5hbWUgPT09IFwibnVtYmVyXCIpO1xuICAgIHZhciBnZXR0ZXI7XG4gICAgaWYgKCFpc0luZGV4KSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlR2V0dGVyID0gZ2V0R2V0dGVyKHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBnZXR0ZXIgPSBtYXliZUdldHRlciAhPT0gbnVsbCA/IG1heWJlR2V0dGVyIDogbmFtZWRHZXR0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXR0ZXIgPSBuYW1lZEdldHRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGluZGV4ZWRHZXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKGdldHRlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcImJyZWFrXCJdID0gUHJvbWlzZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFkZWJ1Zy5jYW5jZWxsYXRpb24oKSkgcmV0dXJuIHRoaXMuX3dhcm4oXCJjYW5jZWxsYXRpb24gaXMgZGlzYWJsZWRcIik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNoaWxkID0gcHJvbWlzZTtcbiAgICB3aGlsZSAocHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIGlmICghcHJvbWlzZS5fY2FuY2VsQnkoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuX2NhbmNlbEJyYW5jaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnQgPSBwcm9taXNlLl9jYW5jZWxsYXRpb25QYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCB8fCAhcGFyZW50Ll9pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlLl9pc0ZvbGxvd2luZygpKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fY2FuY2VsQnJhbmNoZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHByb21pc2UuX2ZvbGxvd2VlKCkuY2FuY2VsKCk7XG4gICAgICAgICAgICBwcm9taXNlLl9zZXRXaWxsQmVDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHByb21pc2UgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYnJhbmNoSGFzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbC0tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA8PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJ5ID0gZnVuY3Rpb24oY2FuY2VsbGVyKSB7XG4gICAgaWYgKGNhbmNlbGxlciA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnJhbmNoSGFzQ2FuY2VsbGVkKCk7XG4gICAgICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxCcmFuY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl9zZXRDYW5jZWxsZWQoKTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fY2FuY2VsUHJvbWlzZXMsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsUHJvbWlzZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fbGVuZ3RoKCkgPiAwKSB0aGlzLl9zZXR0bGVQcm9taXNlcygpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0T25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5faXNDYW5jZWxsZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2RvSW52b2tlT25DYW5jZWwgPSBmdW5jdGlvbihvbkNhbmNlbENhbGxiYWNrLCBpbnRlcm5hbE9ubHkpIHtcbiAgICBpZiAodXRpbC5pc0FycmF5KG9uQ2FuY2VsQ2FsbGJhY2spKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25DYW5jZWxDYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbChvbkNhbmNlbENhbGxiYWNrW2ldLCBpbnRlcm5hbE9ubHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvbkNhbmNlbENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbENhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJuYWxPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0cnlDYXRjaChvbkNhbmNlbENhbGxiYWNrKS5jYWxsKHRoaXMuX2JvdW5kVmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZS5lKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlLmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2FsbGJhY2suX3Jlc3VsdENhbmNlbGxlZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbkNhbmNlbENhbGxiYWNrID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICB0aGlzLl91bnNldE9uQ2FuY2VsKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2RvSW52b2tlT25DYW5jZWwsIHRoaXMsIG9uQ2FuY2VsQ2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZUludGVybmFsT25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuX2RvSW52b2tlT25DYW5jZWwodGhpcy5fb25DYW5jZWwoKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3Vuc2V0T25DYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSw3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihORVhUX0ZJTFRFUikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGdldEtleXMgPSBfZGVyZXFfKFwiLi9lczVcIikua2V5cztcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xuXG5mdW5jdGlvbiBjYXRjaEZpbHRlcihpbnN0YW5jZXMsIGNiLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGJvdW5kVG8gPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgIHByZWRpY2F0ZUxvb3A6IGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGluc3RhbmNlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IEVycm9yIHx8XG4gICAgICAgICAgICAgICAgKGl0ZW0gIT0gbnVsbCAmJiBpdGVtLnByb3RvdHlwZSBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXNQcmVkaWNhdGUgPSB0cnlDYXRjaChpdGVtKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzUHJlZGljYXRlID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1ByZWRpY2F0ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXNQcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXRpbC5pc09iamVjdChlKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gZ2V0S2V5cyhpdGVtKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gIT0gZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBwcmVkaWNhdGVMb29wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTkVYVF9GSUxURVI7XG4gICAgfTtcbn1cblxucmV0dXJuIGNhdGNoRmlsdGVyO1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG52YXIgY29udGV4dFN0YWNrID0gW107XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gbnVsbDt9O1xuUHJvbWlzZS5fcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuXG5mdW5jdGlvbiBDb250ZXh0KCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENvbnRleHQuQ2FwdHVyZWRUcmFjZShwZWVrQ29udGV4dCgpKTtcbn1cbkNvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl90cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICBjb250ZXh0U3RhY2sucHVzaCh0aGlzLl90cmFjZSk7XG4gICAgfVxufTtcblxuQ29udGV4dC5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3RyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHRyYWNlID0gY29udGV4dFN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgcmV0ID0gdHJhY2UuX3Byb21pc2VDcmVhdGVkO1xuICAgICAgICB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQoKSB7XG4gICAgaWYgKGxvbmdTdGFja1RyYWNlcykgcmV0dXJuIG5ldyBDb250ZXh0KCk7XG59XG5cbmZ1bmN0aW9uIHBlZWtDb250ZXh0KCkge1xuICAgIHZhciBsYXN0SW5kZXggPSBjb250ZXh0U3RhY2subGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdEluZGV4ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRTdGFja1tsYXN0SW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuQ29udGV4dC5DYXB0dXJlZFRyYWNlID0gbnVsbDtcbkNvbnRleHQuY3JlYXRlID0gY3JlYXRlQ29udGV4dDtcbkNvbnRleHQuZGVhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge307XG5Db250ZXh0LmFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFByb21pc2VfcHVzaENvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcG9wQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIHZhciBQcm9taXNlX1BlZWtDb250ZXh0ID0gUHJvbWlzZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcHJvbWlzZUNyZWF0ZWQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IFByb21pc2VfcHVzaENvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0ID0gUHJvbWlzZV9wb3BDb250ZXh0O1xuICAgICAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfUGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfcGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2VfcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIGxvbmdTdGFja1RyYWNlcyA9IGZhbHNlO1xuICAgIH07XG4gICAgbG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dDtcbiAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IHBlZWtDb250ZXh0O1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fcGVla0NvbnRleHQoKTtcbiAgICAgICAgaWYgKGN0eCAmJiBjdHguX3Byb21pc2VDcmVhdGVkID09IG51bGwpIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPSB0aGlzO1xuICAgIH07XG59O1xucmV0dXJuIENvbnRleHQ7XG59O1xuXG59LHt9XSw5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBDb250ZXh0KSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgV2FybmluZyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5XYXJuaW5nO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkF0dGFjaFRyYWNlID0gdXRpbC5jYW5BdHRhY2hUcmFjZTtcbnZhciB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkO1xudmFyIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uO1xudmFyIGJsdWViaXJkRnJhbWVQYXR0ZXJuID1cbiAgICAvW1xcXFxcXC9dYmx1ZWJpcmRbXFxcXFxcL11qc1tcXFxcXFwvXShyZWxlYXNlfGRlYnVnfGluc3RydW1lbnRlZCkvO1xudmFyIG5vZGVGcmFtZVBhdHRlcm4gPSAvXFwoKD86dGltZXJzXFwuanMpOlxcZCs6XFxkK1xcKS87XG52YXIgcGFyc2VMaW5lUGF0dGVybiA9IC9bXFwvPFxcKF0oLis/KTooXFxkKyk6KFxcZCspXFwpP1xccyokLztcbnZhciBzdGFja0ZyYW1lUGF0dGVybiA9IG51bGw7XG52YXIgZm9ybWF0U3RhY2sgPSBudWxsO1xudmFyIGluZGVudFN0YWNrRnJhbWVzID0gZmFsc2U7XG52YXIgcHJpbnRXYXJuaW5nO1xudmFyIGRlYnVnZ2luZyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfREVCVUdcIikgIT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHRydWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmVudihcIkJMVUVCSVJEX0RFQlVHXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5lbnYoXCJOT0RFX0VOVlwiKSA9PT0gXCJkZXZlbG9wbWVudFwiKSk7XG5cbnZhciB3YXJuaW5ncyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfV0FSTklOR1NcIikgIT0gMCAmJlxuICAgIChkZWJ1Z2dpbmcgfHwgdXRpbC5lbnYoXCJCTFVFQklSRF9XQVJOSU5HU1wiKSkpO1xuXG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gISEodXRpbC5lbnYoXCJCTFVFQklSRF9MT05HX1NUQUNLX1RSQUNFU1wiKSAhPSAwICYmXG4gICAgKGRlYnVnZ2luZyB8fCB1dGlsLmVudihcIkJMVUVCSVJEX0xPTkdfU1RBQ0tfVFJBQ0VTXCIpKSk7XG5cbnZhciB3Rm9yZ290dGVuUmV0dXJuID0gdXRpbC5lbnYoXCJCTFVFQklSRF9XX0ZPUkdPVFRFTl9SRVRVUk5cIikgIT0gMCAmJlxuICAgICh3YXJuaW5ncyB8fCAhIXV0aWwuZW52KFwiQkxVRUJJUkRfV19GT1JHT1RURU5fUkVUVVJOXCIpKTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHRhcmdldC5fYml0RmllbGQgPSAoKHRhcmdldC5fYml0RmllbGQgJiAofjEwNDg1NzYpKSB8XG4gICAgICAgICAgICAgICAgICAgICAgNTI0Mjg4KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9lbnN1cmVQb3NzaWJsZVJlamVjdGlvbkhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCh0aGlzLl9iaXRGaWVsZCAmIDUyNDI4OCkgIT09IDApIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIGFzeW5jLmludm9rZUxhdGVyKHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZmlyZVJlamVjdGlvbkV2ZW50KFwicmVqZWN0aW9uSGFuZGxlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQsIHVuZGVmaW5lZCwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjY4NDM1NDU2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JldHVybmVkTm9uVW5kZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDI2ODQzNTQ1NikgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1JlamVjdGlvblVuaGFuZGxlZCgpKSB7XG4gICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbiAgICAgICAgdGhpcy5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICBmaXJlUmVqZWN0aW9uRXZlbnQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24sIHJlYXNvbiwgdGhpcyk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDI2MjE0NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MjYyMTQ0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjIxNDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTA0ODU3Njtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEwNDg1NzYpO1xuICAgIGlmICh0aGlzLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkKCkpIHtcbiAgICAgICAgdGhpcy5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkKCk7XG4gICAgICAgIHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbklzSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1JlamVjdGlvblVuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTA0ODU3NikgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3dhcm4gPSBmdW5jdGlvbihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSkge1xuICAgIHJldHVybiB3YXJuKG1lc3NhZ2UsIHNob3VsZFVzZU93blRyYWNlLCBwcm9taXNlIHx8IHRoaXMpO1xufTtcblxuUHJvbWlzZS5vblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID1cbiAgICAgICAgdHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyAoZG9tYWluID09PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2Uub25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQgPVxuICAgICAgICB0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IChkb21haW4gPT09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xufTtcblxudmFyIGRpc2FibGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICB2YXIgUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgdmFyIFByb21pc2VfYXR0YWNoRXh0cmFUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICBjb25maWcubG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IGVuYWJsZSBsb25nIHN0YWNrIHRyYWNlcyBhZnRlciBwcm9taXNlcyBoYXZlIGJlZW4gY3JlYXRlZFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2UgPSBQcm9taXNlX2NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgICAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgICAgIGFzeW5jLmVuYWJsZVRyYW1wb2xpbmUoKTtcbiAgICAgICAgICAgIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQ2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgQ29udGV4dC5hY3RpdmF0ZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICBhc3luYy5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5KCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKTtcbn07XG5cbnZhciBmaXJlRG9tRXZlbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KG5hbWUudG9Mb3dlckNhc2UoKSwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGRvbUV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBuZXcgRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5kZXRhaWwgPSBldmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZG9tRXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgICAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQoXCJ0ZXN0aW5ndGhlZXZlbnRcIiwgZmFsc2UsIHRydWUsIHt9KTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5pbml0Q3VzdG9tRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCBmYWxzZSwgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufSkoKTtcblxudmFyIGZpcmVHbG9iYWxFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5pc05vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdC5hcHBseShwcm9jZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdXRpbC5nbG9iYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IFwib25cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB1dGlsLmdsb2JhbFttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBtZXRob2QuYXBwbHkodXRpbC5nbG9iYWwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdChuYW1lLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlfTtcbn1cblxudmFyIGV2ZW50VG9PYmplY3RHZW5lcmF0b3IgPSB7XG4gICAgcHJvbWlzZUNyZWF0ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VGdWxmaWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VSZWplY3RlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlc29sdmVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2FuY2VsbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2hhaW5lZDogZnVuY3Rpb24obmFtZSwgcHJvbWlzZSwgY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlLCBjaGlsZDogY2hpbGR9O1xuICAgIH0sXG4gICAgd2FybmluZzogZnVuY3Rpb24obmFtZSwgd2FybmluZykge1xuICAgICAgICByZXR1cm4ge3dhcm5pbmc6IHdhcm5pbmd9O1xuICAgIH0sXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uOiBmdW5jdGlvbiAobmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB7cmVhc29uOiByZWFzb24sIHByb21pc2U6IHByb21pc2V9O1xuICAgIH0sXG4gICAgcmVqZWN0aW9uSGFuZGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3Rcbn07XG5cbnZhciBhY3RpdmVGaXJlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBnbG9iYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IGZpcmVHbG9iYWxFdmVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRvbUV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb21FdmVudEZpcmVkID0gZmlyZURvbUV2ZW50KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9PYmplY3RHZW5lcmF0b3JbbmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBkb21FdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tRXZlbnRGaXJlZCB8fCBnbG9iYWxFdmVudEZpcmVkO1xufTtcblxuUHJvbWlzZS5jb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IE9iamVjdChvcHRzKTtcbiAgICBpZiAoXCJsb25nU3RhY2tUcmFjZXNcIiBpbiBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5sb25nU3RhY2tUcmFjZXMgJiYgUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMoKSkge1xuICAgICAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIndhcm5pbmdzXCIgaW4gb3B0cykge1xuICAgICAgICB2YXIgd2FybmluZ3NPcHRpb24gPSBvcHRzLndhcm5pbmdzO1xuICAgICAgICBjb25maWcud2FybmluZ3MgPSAhIXdhcm5pbmdzT3B0aW9uO1xuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gY29uZmlnLndhcm5pbmdzO1xuXG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KHdhcm5pbmdzT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKFwid0ZvcmdvdHRlblJldHVyblwiIGluIHdhcm5pbmdzT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgd0ZvcmdvdHRlblJldHVybiA9ICEhd2FybmluZ3NPcHRpb24ud0ZvcmdvdHRlblJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJjYW5jZWxsYXRpb25cIiBpbiBvcHRzICYmIG9wdHMuY2FuY2VsbGF0aW9uICYmICFjb25maWcuY2FuY2VsbGF0aW9uKSB7XG4gICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiY2Fubm90IGVuYWJsZSBjYW5jZWxsYXRpb24gYWZ0ZXIgcHJvbWlzZXMgYXJlIGluIHVzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYW5jZWxsYXRpb25EYXRhID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkNsZWFyQ2FuY2VsbGF0aW9uRGF0YTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBjYW5jZWxsYXRpb25PbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gY2FuY2VsbGF0aW9uU2V0T25DYW5jZWw7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9XG4gICAgICAgICAgICBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjaztcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBjYW5jZWxsYXRpb25FeGVjdXRlO1xuICAgICAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBjb25maWcuY2FuY2VsbGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFwibW9uaXRvcmluZ1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubW9uaXRvcmluZyAmJiAhY29uZmlnLm1vbml0b3JpbmcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tb25pdG9yaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBhY3RpdmVGaXJlRXZlbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdHMubW9uaXRvcmluZyAmJiBjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlO1xufTtcblxuZnVuY3Rpb24gZGVmYXVsdEZpcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihleGVjdXRvciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5Qcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7IDsgfTtcblByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgO1xufTtcblByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBmdW5jdGlvbiAocGFyZW50LCBmbGFncykge1xuICAgIDtcbiAgICA7XG59O1xuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25FeGVjdXRlKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LCBmdW5jdGlvbihvbkNhbmNlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9uQ2FuY2VsIG11c3QgYmUgYSBmdW5jdGlvbiwgZ290OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG9uQ2FuY2VsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCkge1xuICAgIGlmICghdGhpcy5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBwcmV2aW91c09uQ2FuY2VsID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICBpZiAocHJldmlvdXNPbkNhbmNlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh1dGlsLmlzQXJyYXkocHJldmlvdXNPbkNhbmNlbCkpIHtcbiAgICAgICAgICAgIHByZXZpb3VzT25DYW5jZWwucHVzaChvbkNhbmNlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRPbkNhbmNlbChbcHJldmlvdXNPbkNhbmNlbCwgb25DYW5jZWxdKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKG9uQ2FuY2VsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvbk9uQ2FuY2VsKCkge1xuICAgIHJldHVybiB0aGlzLl9vbkNhbmNlbEZpZWxkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25TZXRPbkNhbmNlbChvbkNhbmNlbCkge1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSBvbkNhbmNlbDtcbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uQ2xlYXJDYW5jZWxsYXRpb25EYXRhKCkge1xuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMSkgIT09IDApIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gcGFyZW50O1xuICAgICAgICB2YXIgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IHBhcmVudC5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbDtcbiAgICAgICAgaWYgKGJyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCArIDE7XG4gICAgfVxuICAgIGlmICgoZmxhZ3MgJiAyKSAhPT0gMCAmJiBwYXJlbnQuX2lzQm91bmQoKSkge1xuICAgICAgICB0aGlzLl9zZXRCb3VuZFRvKHBhcmVudC5fYm91bmRUbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiaW5kaW5nUHJvcGFnYXRlRnJvbShwYXJlbnQsIGZsYWdzKSB7XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG52YXIgcHJvcGFnYXRlRnJvbUZ1bmN0aW9uID0gYmluZGluZ1Byb3BhZ2F0ZUZyb207XG5cbmZ1bmN0aW9uIGJvdW5kVmFsdWVGdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fYm91bmRUbztcbiAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXQuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQudmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNDYXB0dXJlU3RhY2tUcmFjZSgpIHtcbiAgICB0aGlzLl90cmFjZSA9IG5ldyBDYXB0dXJlZFRyYWNlKHRoaXMuX3BlZWtDb250ZXh0KCkpO1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNBdHRhY2hFeHRyYVRyYWNlKGVycm9yLCBpZ25vcmVTZWxmKSB7XG4gICAgaWYgKGNhbkF0dGFjaFRyYWNlKGVycm9yKSkge1xuICAgICAgICB2YXIgdHJhY2UgPSB0aGlzLl90cmFjZTtcbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChpZ25vcmVTZWxmKSB0cmFjZSA9IHRyYWNlLl9wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyYWNlLmF0dGFjaEV4dHJhVHJhY2UoZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKCFlcnJvci5fX3N0YWNrQ2xlYW5lZF9fKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VTdGFja0FuZE1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJzdGFja1wiLFxuICAgICAgICAgICAgICAgIHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwiX19zdGFja0NsZWFuZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKHJldHVyblZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgbmFtZSwgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQpIHtcbiAgICBpZiAocmV0dXJuVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBwcm9taXNlQ3JlYXRlZCAhPT0gbnVsbCAmJlxuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuKSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCAmJiBwYXJlbnQuX3JldHVybmVkTm9uVW5kZWZpbmVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKChwcm9taXNlLl9iaXRGaWVsZCAmIDY1NTM1KSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChuYW1lKSBuYW1lID0gbmFtZSArIFwiIFwiO1xuICAgICAgICB2YXIgaGFuZGxlckxpbmUgPSBcIlwiO1xuICAgICAgICB2YXIgY3JlYXRvckxpbmUgPSBcIlwiO1xuICAgICAgICBpZiAocHJvbWlzZUNyZWF0ZWQuX3RyYWNlKSB7XG4gICAgICAgICAgICB2YXIgdHJhY2VMaW5lcyA9IHByb21pc2VDcmVhdGVkLl90cmFjZS5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGNsZWFuU3RhY2sodHJhY2VMaW5lcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZUZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lTWF0Y2hlcyA9IGxpbmUubWF0Y2gocGFyc2VMaW5lUGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lTWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlckxpbmUgID0gXCJhdCBcIiArIGxpbmVNYXRjaGVzWzFdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjpcIiArIGxpbmVNYXRjaGVzWzJdICsgXCI6XCIgKyBsaW5lTWF0Y2hlc1szXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RVc2VyTGluZSA9IHN0YWNrWzBdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2VMaW5lcy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFjZUxpbmVzW2ldID09PSBmaXJzdFVzZXJMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdG9yTGluZSA9IFwiXFxuXCIgKyB0cmFjZUxpbmVzW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1zZyA9IFwiYSBwcm9taXNlIHdhcyBjcmVhdGVkIGluIGEgXCIgKyBuYW1lICtcbiAgICAgICAgICAgIFwiaGFuZGxlciBcIiArIGhhbmRsZXJMaW5lICsgXCJidXQgd2FzIG5vdCByZXR1cm5lZCBmcm9tIGl0LCBcIiArXG4gICAgICAgICAgICBcInNlZSBodHRwOi8vZ29vLmdsL3JScU1Vd1wiICtcbiAgICAgICAgICAgIGNyZWF0b3JMaW5lO1xuICAgICAgICBwcm9taXNlLl93YXJuKG1zZywgdHJ1ZSwgcHJvbWlzZUNyZWF0ZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lLCByZXBsYWNlbWVudCkge1xuICAgIHZhciBtZXNzYWdlID0gbmFtZSArXG4gICAgICAgIFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLlwiO1xuICAgIGlmIChyZXBsYWNlbWVudCkgbWVzc2FnZSArPSBcIiBVc2UgXCIgKyByZXBsYWNlbWVudCArIFwiIGluc3RlYWQuXCI7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICBpZiAoIWNvbmZpZy53YXJuaW5ncykgcmV0dXJuO1xuICAgIHZhciB3YXJuaW5nID0gbmV3IFdhcm5pbmcobWVzc2FnZSk7XG4gICAgdmFyIGN0eDtcbiAgICBpZiAoc2hvdWxkVXNlT3duVHJhY2UpIHtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3YXJuaW5nKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgKGN0eCA9IFByb21pc2UuX3BlZWtDb250ZXh0KCkpKSB7XG4gICAgICAgIGN0eC5hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZSh3YXJuaW5nKTtcbiAgICAgICAgd2FybmluZy5zdGFjayA9IHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KFwid2FybmluZ1wiLCB3YXJuaW5nKSkge1xuICAgICAgICBmb3JtYXRBbmRMb2dFcnJvcih3YXJuaW5nLCBcIlwiLCB0cnVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIHN0YWNrc1tpXS5wdXNoKFwiRnJvbSBwcmV2aW91cyBldmVudDpcIik7XG4gICAgICAgIHN0YWNrc1tpXSA9IHN0YWNrc1tpXS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IHN0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlICsgXCJcXG5cIiArIHN0YWNrcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHN0YWNrc1tpXS5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICgoaSArIDEgPCBzdGFja3MubGVuZ3RoKSAmJiBzdGFja3NbaV1bMF0gPT09IHN0YWNrc1tpKzFdWzBdKSkge1xuICAgICAgICAgICAgc3RhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGFja3NbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHByZXYgPSBzdGFja3NbaV07XG4gICAgICAgIHZhciBjdXJyZW50TGFzdEluZGV4ID0gY3VycmVudC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICAgICAgdmFyIGNvbW1vblJvb3RNZWV0UG9pbnQgPSAtMTtcblxuICAgICAgICBmb3IgKHZhciBqID0gcHJldi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgaWYgKHByZXZbal0gPT09IGN1cnJlbnRMYXN0TGluZSkge1xuICAgICAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBqO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGNvbW1vblJvb3RNZWV0UG9pbnQ7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHByZXZbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQucG9wKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExhc3RJbmRleC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gcHJldjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuU3RhY2soc3RhY2spIHtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmUgfHxcbiAgICAgICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5kZW50U3RhY2tGcmFtZXMgJiYgbGluZS5jaGFyQXQoMCkgIT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiICAgIFwiICsgbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL1xccyskL2csIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzdGFja1tpXTtcbiAgICAgICAgaWYgKFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fCBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDAgJiYgZXJyb3IubmFtZSAhPSBcIlN5bnRheEVycm9yXCIpIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICBzdGFjayA9IHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIiAmJiBzdGFjay5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzdGFja0ZyYW1lc0FzQXJyYXkoZXJyb3IpIDogW1wiICAgIChObyBzdGFjayB0cmFjZSlcIl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLm5hbWUgPT0gXCJTeW50YXhFcnJvclwiID8gc3RhY2sgOiBjbGVhblN0YWNrKHN0YWNrKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFuZExvZ0Vycm9yKGVycm9yLCB0aXRsZSwgaXNTb2Z0KSB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHZhciBtZXNzYWdlO1xuICAgICAgICBpZiAodXRpbC5pc09iamVjdChlcnJvcikpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgZm9ybWF0U3RhY2soc3RhY2ssIGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aXRsZSArIFN0cmluZyhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwcmludFdhcm5pbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcHJpbnRXYXJuaW5nKG1lc3NhZ2UsIGlzU29mdCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbnNvbGUubG9nID09PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpcmVSZWplY3Rpb25FdmVudChuYW1lLCBsb2NhbEhhbmRsZXIsIHJlYXNvbiwgcHJvbWlzZSkge1xuICAgIHZhciBsb2NhbEV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGxvY2FsSGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBsb2NhbEV2ZW50RmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwicmVqZWN0aW9uSGFuZGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxIYW5kbGVyKHByb21pc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSA9PT0gXCJ1bmhhbmRsZWRSZWplY3Rpb25cIikge1xuICAgICAgICBpZiAoIWFjdGl2ZUZpcmVFdmVudChuYW1lLCByZWFzb24sIHByb21pc2UpICYmICFsb2NhbEV2ZW50RmlyZWQpIHtcbiAgICAgICAgICAgIGZvcm1hdEFuZExvZ0Vycm9yKHJlYXNvbiwgXCJVbmhhbmRsZWQgcmVqZWN0aW9uIFwiKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGl2ZUZpcmVFdmVudChuYW1lLCBwcm9taXNlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE5vbkVycm9yKG9iaikge1xuICAgIHZhciBzdHI7XG4gICAgaWYgKHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBzdHIgPSBcIltmdW5jdGlvbiBcIiArXG4gICAgICAgICAgICAob2JqLm5hbWUgfHwgXCJhbm9ueW1vdXNcIikgK1xuICAgICAgICAgICAgXCJdXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gb2JqICYmIHR5cGVvZiBvYmoudG9TdHJpbmcgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBvYmoudG9TdHJpbmcoKSA6IHV0aWwudG9TdHJpbmcob2JqKTtcbiAgICAgICAgdmFyIHJ1c2VsZXNzVG9TdHJpbmcgPSAvXFxbb2JqZWN0IFthLXpBLVowLTkkX10rXFxdLztcbiAgICAgICAgaWYgKHJ1c2VsZXNzVG9TdHJpbmcudGVzdChzdHIpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdTdHIgPSBKU09OLnN0cmluZ2lmeShvYmopO1xuICAgICAgICAgICAgICAgIHN0ciA9IG5ld1N0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzdHIgPSBcIihlbXB0eSBhcnJheSlcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKFwiKDxcIiArIHNuaXAoc3RyKSArIFwiPiwgbm8gc3RhY2sgdHJhY2UpXCIpO1xufVxuXG5mdW5jdGlvbiBzbmlwKHN0cikge1xuICAgIHZhciBtYXhDaGFycyA9IDQxO1xuICAgIGlmIChzdHIubGVuZ3RoIDwgbWF4Q2hhcnMpIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgbWF4Q2hhcnMgLSAzKSArIFwiLi4uXCI7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0eXBlb2YgY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxudmFyIHNob3VsZElnbm9yZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH07XG52YXIgcGFyc2VMaW5lSW5mb1JlZ2V4ID0gL1tcXC88XFwoXShbXjpcXC9dKyk6KFxcZCspOig/OlxcZCspXFwpP1xccyokLztcbmZ1bmN0aW9uIHBhcnNlTGluZUluZm8obGluZSkge1xuICAgIHZhciBtYXRjaGVzID0gbGluZS5tYXRjaChwYXJzZUxpbmVJbmZvUmVnZXgpO1xuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlTmFtZTogbWF0Y2hlc1sxXSxcbiAgICAgICAgICAgIGxpbmU6IHBhcnNlSW50KG1hdGNoZXNbMl0sIDEwKVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0Qm91bmRzKGZpcnN0TGluZUVycm9yLCBsYXN0TGluZUVycm9yKSB7XG4gICAgaWYgKCFsb25nU3RhY2tUcmFjZXNJc1N1cHBvcnRlZCgpKSByZXR1cm47XG4gICAgdmFyIGZpcnN0U3RhY2tMaW5lcyA9IGZpcnN0TGluZUVycm9yLnN0YWNrLnNwbGl0KFwiXFxuXCIpO1xuICAgIHZhciBsYXN0U3RhY2tMaW5lcyA9IGxhc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGZpcnN0SW5kZXggPSAtMTtcbiAgICB2YXIgbGFzdEluZGV4ID0gLTE7XG4gICAgdmFyIGZpcnN0RmlsZU5hbWU7XG4gICAgdmFyIGxhc3RGaWxlTmFtZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0U3RhY2tMaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VMaW5lSW5mbyhmaXJzdFN0YWNrTGluZXNbaV0pO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaXJzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgZmlyc3RJbmRleCA9IHJlc3VsdC5saW5lO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0U3RhY2tMaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VMaW5lSW5mbyhsYXN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGxhc3RGaWxlTmFtZSA9IHJlc3VsdC5maWxlTmFtZTtcbiAgICAgICAgICAgIGxhc3RJbmRleCA9IHJlc3VsdC5saW5lO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpcnN0SW5kZXggPCAwIHx8IGxhc3RJbmRleCA8IDAgfHwgIWZpcnN0RmlsZU5hbWUgfHwgIWxhc3RGaWxlTmFtZSB8fFxuICAgICAgICBmaXJzdEZpbGVOYW1lICE9PSBsYXN0RmlsZU5hbWUgfHwgZmlyc3RJbmRleCA+PSBsYXN0SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNob3VsZElnbm9yZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSkpIHJldHVybiB0cnVlO1xuICAgICAgICB2YXIgaW5mbyA9IHBhcnNlTGluZUluZm8obGluZSk7XG4gICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5maWxlTmFtZSA9PT0gZmlyc3RGaWxlTmFtZSAmJlxuICAgICAgICAgICAgICAgIChmaXJzdEluZGV4IDw9IGluZm8ubGluZSAmJiBpbmZvLmxpbmUgPD0gbGFzdEluZGV4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBDYXB0dXJlZFRyYWNlKHBhcmVudCkge1xuICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLl9wcm9taXNlc0NyZWF0ZWQgPSAwO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSAxICsgKHBhcmVudCA9PT0gdW5kZWZpbmVkID8gMCA6IHBhcmVudC5fbGVuZ3RoKTtcbiAgICBjYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBDYXB0dXJlZFRyYWNlKTtcbiAgICBpZiAobGVuZ3RoID4gMzIpIHRoaXMudW5jeWNsZSgpO1xufVxudXRpbC5pbmhlcml0cyhDYXB0dXJlZFRyYWNlLCBFcnJvcik7XG5Db250ZXh0LkNhcHR1cmVkVHJhY2UgPSBDYXB0dXJlZFRyYWNlO1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS51bmN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgICBpZiAobGVuZ3RoIDwgMikgcmV0dXJuO1xuICAgIHZhciBub2RlcyA9IFtdO1xuICAgIHZhciBzdGFja1RvSW5kZXggPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBub2RlID0gdGhpczsgbm9kZSAhPT0gdW5kZWZpbmVkOyArK2kpIHtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgbm9kZSA9IG5vZGUuX3BhcmVudDtcbiAgICB9XG4gICAgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoID0gaTtcbiAgICBmb3IgKHZhciBpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIHN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIGlmIChzdGFja1RvSW5kZXhbc3RhY2tdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0YWNrVG9JbmRleFtzdGFja10gPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRTdGFjayA9IG5vZGVzW2ldLnN0YWNrO1xuICAgICAgICB2YXIgaW5kZXggPSBzdGFja1RvSW5kZXhbY3VycmVudFN0YWNrXTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQgJiYgaW5kZXggIT09IGkpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgbm9kZXNbaW5kZXggLSAxXS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGVzW2ldLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBub2Rlc1tpXS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHZhciBjeWNsZUVkZ2VOb2RlID0gaSA+IDAgPyBub2Rlc1tpIC0gMV0gOiB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPCBsZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50ID0gbm9kZXNbaW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQudW5jeWNsZSgpO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX2xlbmd0aCA9XG4gICAgICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC5fbGVuZ3RoICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX2xlbmd0aCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3VycmVudENoaWxkTGVuZ3RoID0gY3ljbGVFZGdlTm9kZS5fbGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpIC0gMjsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICBub2Rlc1tqXS5fbGVuZ3RoID0gY3VycmVudENoaWxkTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaGlsZExlbmd0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuQ2FwdHVyZWRUcmFjZS5wcm90b3R5cGUuYXR0YWNoRXh0cmFUcmFjZSA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLl9fc3RhY2tDbGVhbmVkX18pIHJldHVybjtcbiAgICB0aGlzLnVuY3ljbGUoKTtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VTdGFja0FuZE1lc3NhZ2UoZXJyb3IpO1xuICAgIHZhciBtZXNzYWdlID0gcGFyc2VkLm1lc3NhZ2U7XG4gICAgdmFyIHN0YWNrcyA9IFtwYXJzZWQuc3RhY2tdO1xuXG4gICAgdmFyIHRyYWNlID0gdGhpcztcbiAgICB3aGlsZSAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdGFja3MucHVzaChjbGVhblN0YWNrKHRyYWNlLnN0YWNrLnNwbGl0KFwiXFxuXCIpKSk7XG4gICAgICAgIHRyYWNlID0gdHJhY2UuX3BhcmVudDtcbiAgICB9XG4gICAgcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKTtcbiAgICByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcInN0YWNrXCIsIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSk7XG4gICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJfX3N0YWNrQ2xlYW5lZF9fXCIsIHRydWUpO1xufTtcblxudmFyIGNhcHR1cmVTdGFja1RyYWNlID0gKGZ1bmN0aW9uIHN0YWNrRGV0ZWN0aW9uKCkge1xuICAgIHZhciB2OHN0YWNrRnJhbWVQYXR0ZXJuID0gL15cXHMqYXRcXHMqLztcbiAgICB2YXIgdjhzdGFja0Zvcm1hdHRlciA9IGZ1bmN0aW9uKHN0YWNrLCBlcnJvcikge1xuICAgICAgICBpZiAodHlwZW9mIHN0YWNrID09PSBcInN0cmluZ1wiKSByZXR1cm4gc3RhY2s7XG5cbiAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZXJyb3IubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0Tm9uRXJyb3IoZXJyb3IpO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICB0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgKz0gNjtcbiAgICAgICAgc3RhY2tGcmFtZVBhdHRlcm4gPSB2OHN0YWNrRnJhbWVQYXR0ZXJuO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIHZhciBjYXB0dXJlU3RhY2tUcmFjZSA9IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlO1xuXG4gICAgICAgIHNob3VsZElnbm9yZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBibHVlYmlyZEZyYW1lUGF0dGVybi50ZXN0KGxpbmUpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjZWl2ZXIsIGlnbm9yZVVudGlsKSB7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgKz0gNjtcbiAgICAgICAgICAgIGNhcHR1cmVTdGFja1RyYWNlKHJlY2VpdmVyLCBpZ25vcmVVbnRpbCk7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgLT0gNjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuXG4gICAgaWYgKHR5cGVvZiBlcnIuc3RhY2sgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgZXJyLnN0YWNrLnNwbGl0KFwiXFxuXCIpWzBdLmluZGV4T2YoXCJzdGFja0RldGVjdGlvbkBcIikgPj0gMCkge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IC9ALztcbiAgICAgICAgZm9ybWF0U3RhY2sgPSB2OHN0YWNrRm9ybWF0dGVyO1xuICAgICAgICBpbmRlbnRTdGFja0ZyYW1lcyA9IHRydWU7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBjYXB0dXJlU3RhY2tUcmFjZShvKSB7XG4gICAgICAgICAgICBvLnN0YWNrID0gbmV3IEVycm9yKCkuc3RhY2s7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGhhc1N0YWNrQWZ0ZXJUaHJvdztcbiAgICB0cnkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIGNhdGNoKGUpIHtcbiAgICAgICAgaGFzU3RhY2tBZnRlclRocm93ID0gKFwic3RhY2tcIiBpbiBlKTtcbiAgICB9XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIGVycikgJiYgaGFzU3RhY2tBZnRlclRocm93ICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5zdGFja1RyYWNlTGltaXQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgc3RhY2tGcmFtZVBhdHRlcm4gPSB2OHN0YWNrRnJhbWVQYXR0ZXJuO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBjYXB0dXJlU3RhY2tUcmFjZShvKSB7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgKz0gNjtcbiAgICAgICAgICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgICAgICAgICBjYXRjaChlKSB7IG8uc3RhY2sgPSBlLnN0YWNrOyB9XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgLT0gNjtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmb3JtYXRTdGFjayA9IGZ1bmN0aW9uKHN0YWNrLCBlcnJvcikge1xuICAgICAgICBpZiAodHlwZW9mIHN0YWNrID09PSBcInN0cmluZ1wiKSByZXR1cm4gc3RhY2s7XG5cbiAgICAgICAgaWYgKCh0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBlcnJvciA9PT0gXCJmdW5jdGlvblwiKSAmJlxuICAgICAgICAgICAgZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIHJldHVybiBudWxsO1xuXG59KShbXSk7XG5cbmlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgY29uc29sZS53YXJuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgIH07XG4gICAgaWYgKHV0aWwuaXNOb2RlICYmIHByb2Nlc3Muc3RkZXJyLmlzVFRZKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gaXNTb2Z0ID8gXCJcXHUwMDFiWzMzbVwiIDogXCJcXHUwMDFiWzMxbVwiO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGNvbG9yICsgbWVzc2FnZSArIFwiXFx1MDAxYlswbVxcblwiKTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCF1dGlsLmlzTm9kZSAmJiB0eXBlb2YgKG5ldyBFcnJvcigpLnN0YWNrKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbihtZXNzYWdlLCBpc1NvZnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIiVjXCIgKyBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTb2Z0ID8gXCJjb2xvcjogZGFya29yYW5nZVwiIDogXCJjb2xvcjogcmVkXCIpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxudmFyIGNvbmZpZyA9IHtcbiAgICB3YXJuaW5nczogd2FybmluZ3MsXG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmYWxzZSxcbiAgICBjYW5jZWxsYXRpb246IGZhbHNlLFxuICAgIG1vbml0b3Jpbmc6IGZhbHNlXG59O1xuXG5pZiAobG9uZ1N0YWNrVHJhY2VzKSBQcm9taXNlLmxvbmdTdGFja1RyYWNlcygpO1xuXG5yZXR1cm4ge1xuICAgIGxvbmdTdGFja1RyYWNlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcubG9uZ1N0YWNrVHJhY2VzO1xuICAgIH0sXG4gICAgd2FybmluZ3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLndhcm5pbmdzO1xuICAgIH0sXG4gICAgY2FuY2VsbGF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5jYW5jZWxsYXRpb247XG4gICAgfSxcbiAgICBtb25pdG9yaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5tb25pdG9yaW5nO1xuICAgIH0sXG4gICAgcHJvcGFnYXRlRnJvbUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb3BhZ2F0ZUZyb21GdW5jdGlvbjtcbiAgICB9LFxuICAgIGJvdW5kVmFsdWVGdW5jdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBib3VuZFZhbHVlRnVuY3Rpb247XG4gICAgfSxcbiAgICBjaGVja0ZvcmdvdHRlblJldHVybnM6IGNoZWNrRm9yZ290dGVuUmV0dXJucyxcbiAgICBzZXRCb3VuZHM6IHNldEJvdW5kcyxcbiAgICB3YXJuOiB3YXJuLFxuICAgIGRlcHJlY2F0ZWQ6IGRlcHJlY2F0ZWQsXG4gICAgQ2FwdHVyZWRUcmFjZTogQ2FwdHVyZWRUcmFjZSxcbiAgICBmaXJlRG9tRXZlbnQ6IGZpcmVEb21FdmVudCxcbiAgICBmaXJlR2xvYmFsRXZlbnQ6IGZpcmVHbG9iYWxFdmVudFxufTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbmZ1bmN0aW9uIHJldHVybmVyKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xufVxuZnVuY3Rpb24gdGhyb3dlcigpIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGVbXCJyZXR1cm5cIl0gPVxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJldHVybiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHZhbHVlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICByZXR1cm5lciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGVbXCJ0aHJvd1wiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuVGhyb3cgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHRocm93ZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7cmVhc29uOiByZWFzb259LCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2hUaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICAgICAgdW5kZWZpbmVkLCB0aHJvd2VyLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9yZWFzb24gPSBhcmd1bWVudHNbMV07XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7dGhyb3cgX3JlYXNvbjt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQocmVhc29uLCBoYW5kbGVyKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFJldHVybiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICAgICAgdW5kZWZpbmVkLCByZXR1cm5lciwgdW5kZWZpbmVkLCB7dmFsdWU6IHZhbHVlfSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3ZhbHVlID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBpZiAoX3ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgX3ZhbHVlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCkge3JldHVybiBfdmFsdWU7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2F1Z2h0KHZhbHVlLCBoYW5kbGVyKTtcbiAgICB9XG59O1xufTtcblxufSx7fV0sMTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgUHJvbWlzZVJlZHVjZSA9IFByb21pc2UucmVkdWNlO1xudmFyIFByb21pc2VBbGwgPSBQcm9taXNlLmFsbDtcblxuZnVuY3Rpb24gcHJvbWlzZUFsbFRoaXMoKSB7XG4gICAgcmV0dXJuIFByb21pc2VBbGwodGhpcyk7XG59XG5cbmZ1bmN0aW9uIFByb21pc2VNYXBTZXJpZXMocHJvbWlzZXMsIGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UocHJvbWlzZXMsIGZuLCBJTlRFUk5BTCwgSU5URVJOQUwpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UodGhpcywgZm4sIElOVEVSTkFMLCAwKVxuICAgICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubWFwU2VyaWVzID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UodGhpcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmVhY2ggPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UocHJvbWlzZXMsIGZuLCBJTlRFUk5BTCwgMClcbiAgICAgICAgICAgICAgLl90aGVuKHByb21pc2VBbGxUaGlzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcHJvbWlzZXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLm1hcFNlcmllcyA9IFByb21pc2VNYXBTZXJpZXM7XG59O1xuXG5cbn0se31dLDEyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGVzNSA9IF9kZXJlcV8oXCIuL2VzNVwiKTtcbnZhciBPYmplY3RmcmVlemUgPSBlczUuZnJlZXplO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGluaGVyaXRzID0gdXRpbC5pbmhlcml0cztcbnZhciBub3RFbnVtZXJhYmxlUHJvcCA9IHV0aWwubm90RW51bWVyYWJsZVByb3A7XG5cbmZ1bmN0aW9uIHN1YkVycm9yKG5hbWVQcm9wZXJ0eSwgZGVmYXVsdE1lc3NhZ2UpIHtcbiAgICBmdW5jdGlvbiBTdWJFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTdWJFcnJvcikpIHJldHVybiBuZXcgU3ViRXJyb3IobWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLFxuICAgICAgICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogZGVmYXVsdE1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm5hbWVcIiwgbmFtZVByb3BlcnR5KTtcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5oZXJpdHMoU3ViRXJyb3IsIEVycm9yKTtcbiAgICByZXR1cm4gU3ViRXJyb3I7XG59XG5cbnZhciBfVHlwZUVycm9yLCBfUmFuZ2VFcnJvcjtcbnZhciBXYXJuaW5nID0gc3ViRXJyb3IoXCJXYXJuaW5nXCIsIFwid2FybmluZ1wiKTtcbnZhciBDYW5jZWxsYXRpb25FcnJvciA9IHN1YkVycm9yKFwiQ2FuY2VsbGF0aW9uRXJyb3JcIiwgXCJjYW5jZWxsYXRpb24gZXJyb3JcIik7XG52YXIgVGltZW91dEVycm9yID0gc3ViRXJyb3IoXCJUaW1lb3V0RXJyb3JcIiwgXCJ0aW1lb3V0IGVycm9yXCIpO1xudmFyIEFnZ3JlZ2F0ZUVycm9yID0gc3ViRXJyb3IoXCJBZ2dyZWdhdGVFcnJvclwiLCBcImFnZ3JlZ2F0ZSBlcnJvclwiKTtcbnRyeSB7XG4gICAgX1R5cGVFcnJvciA9IFR5cGVFcnJvcjtcbiAgICBfUmFuZ2VFcnJvciA9IFJhbmdlRXJyb3I7XG59IGNhdGNoKGUpIHtcbiAgICBfVHlwZUVycm9yID0gc3ViRXJyb3IoXCJUeXBlRXJyb3JcIiwgXCJ0eXBlIGVycm9yXCIpO1xuICAgIF9SYW5nZUVycm9yID0gc3ViRXJyb3IoXCJSYW5nZUVycm9yXCIsIFwicmFuZ2UgZXJyb3JcIik7XG59XG5cbnZhciBtZXRob2RzID0gKFwiam9pbiBwb3AgcHVzaCBzaGlmdCB1bnNoaWZ0IHNsaWNlIGZpbHRlciBmb3JFYWNoIHNvbWUgXCIgK1xuICAgIFwiZXZlcnkgbWFwIGluZGV4T2YgbGFzdEluZGV4T2YgcmVkdWNlIHJlZHVjZVJpZ2h0IHNvcnQgcmV2ZXJzZVwiKS5zcGxpdChcIiBcIik7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7ICsraSkge1xuICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlW21ldGhvZHNbaV1dID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgQWdncmVnYXRlRXJyb3IucHJvdG90eXBlW21ldGhvZHNbaV1dID0gQXJyYXkucHJvdG90eXBlW21ldGhvZHNbaV1dO1xuICAgIH1cbn1cblxuZXM1LmRlZmluZVByb3BlcnR5KEFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgIHZhbHVlOiAwLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxufSk7XG5BZ2dyZWdhdGVFcnJvci5wcm90b3R5cGVbXCJpc09wZXJhdGlvbmFsXCJdID0gdHJ1ZTtcbnZhciBsZXZlbCA9IDA7XG5BZ2dyZWdhdGVFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZW50ID0gQXJyYXkobGV2ZWwgKiA0ICsgMSkuam9pbihcIiBcIik7XG4gICAgdmFyIHJldCA9IFwiXFxuXCIgKyBpbmRlbnQgKyBcIkFnZ3JlZ2F0ZUVycm9yIG9mOlwiICsgXCJcXG5cIjtcbiAgICBsZXZlbCsrO1xuICAgIGluZGVudCA9IEFycmF5KGxldmVsICogNCArIDEpLmpvaW4oXCIgXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgc3RyID0gdGhpc1tpXSA9PT0gdGhpcyA/IFwiW0NpcmN1bGFyIEFnZ3JlZ2F0ZUVycm9yXVwiIDogdGhpc1tpXSArIFwiXCI7XG4gICAgICAgIHZhciBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgbGluZXNbal0gPSBpbmRlbnQgKyBsaW5lc1tqXTtcbiAgICAgICAgfVxuICAgICAgICBzdHIgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXQgKz0gc3RyICsgXCJcXG5cIjtcbiAgICB9XG4gICAgbGV2ZWwtLTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gT3BlcmF0aW9uYWxFcnJvcihtZXNzYWdlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE9wZXJhdGlvbmFsRXJyb3IpKVxuICAgICAgICByZXR1cm4gbmV3IE9wZXJhdGlvbmFsRXJyb3IobWVzc2FnZSk7XG4gICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJuYW1lXCIsIFwiT3BlcmF0aW9uYWxFcnJvclwiKTtcbiAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgdGhpcy5jYXVzZSA9IG1lc3NhZ2U7XG4gICAgdGhpc1tcImlzT3BlcmF0aW9uYWxcIl0gPSB0cnVlO1xuXG4gICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIiwgbWVzc2FnZS5tZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJzdGFja1wiLCBtZXNzYWdlLnN0YWNrKTtcbiAgICB9IGVsc2UgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cblxufVxuaW5oZXJpdHMoT3BlcmF0aW9uYWxFcnJvciwgRXJyb3IpO1xuXG52YXIgZXJyb3JUeXBlcyA9IEVycm9yW1wiX19CbHVlYmlyZEVycm9yVHlwZXNfX1wiXTtcbmlmICghZXJyb3JUeXBlcykge1xuICAgIGVycm9yVHlwZXMgPSBPYmplY3RmcmVlemUoe1xuICAgICAgICBDYW5jZWxsYXRpb25FcnJvcjogQ2FuY2VsbGF0aW9uRXJyb3IsXG4gICAgICAgIFRpbWVvdXRFcnJvcjogVGltZW91dEVycm9yLFxuICAgICAgICBPcGVyYXRpb25hbEVycm9yOiBPcGVyYXRpb25hbEVycm9yLFxuICAgICAgICBSZWplY3Rpb25FcnJvcjogT3BlcmF0aW9uYWxFcnJvcixcbiAgICAgICAgQWdncmVnYXRlRXJyb3I6IEFnZ3JlZ2F0ZUVycm9yXG4gICAgfSk7XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KEVycm9yLCBcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIiwge1xuICAgICAgICB2YWx1ZTogZXJyb3JUeXBlcyxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxuICAgIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBFcnJvcjogRXJyb3IsXG4gICAgVHlwZUVycm9yOiBfVHlwZUVycm9yLFxuICAgIFJhbmdlRXJyb3I6IF9SYW5nZUVycm9yLFxuICAgIENhbmNlbGxhdGlvbkVycm9yOiBlcnJvclR5cGVzLkNhbmNlbGxhdGlvbkVycm9yLFxuICAgIE9wZXJhdGlvbmFsRXJyb3I6IGVycm9yVHlwZXMuT3BlcmF0aW9uYWxFcnJvcixcbiAgICBUaW1lb3V0RXJyb3I6IGVycm9yVHlwZXMuVGltZW91dEVycm9yLFxuICAgIEFnZ3JlZ2F0ZUVycm9yOiBlcnJvclR5cGVzLkFnZ3JlZ2F0ZUVycm9yLFxuICAgIFdhcm5pbmc6IFdhcm5pbmdcbn07XG5cbn0se1wiLi9lczVcIjoxMyxcIi4vdXRpbFwiOjM2fV0sMTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGlzRVM1ID0gKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgcmV0dXJuIHRoaXMgPT09IHVuZGVmaW5lZDtcbn0pKCk7XG5cbmlmIChpc0VTNSkge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBmcmVlemU6IE9iamVjdC5mcmVlemUsXG4gICAgICAgIGRlZmluZVByb3BlcnR5OiBPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gICAgICAgIGdldERlc2NyaXB0b3I6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gICAgICAgIGtleXM6IE9iamVjdC5rZXlzLFxuICAgICAgICBuYW1lczogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gICAgICAgIGdldFByb3RvdHlwZU9mOiBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG4gICAgICAgIGlzRVM1OiBpc0VTNSxcbiAgICAgICAgcHJvcGVydHlJc1dyaXRhYmxlOiBmdW5jdGlvbihvYmosIHByb3ApIHtcbiAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApO1xuICAgICAgICAgICAgcmV0dXJuICEhKCFkZXNjcmlwdG9yIHx8IGRlc2NyaXB0b3Iud3JpdGFibGUgfHwgZGVzY3JpcHRvci5zZXQpO1xuICAgICAgICB9XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgdmFyIGhhcyA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgIHZhciBzdHIgPSB7fS50b1N0cmluZztcbiAgICB2YXIgcHJvdG8gPSB7fS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbiAgICB2YXIgT2JqZWN0S2V5cyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG8pIHtcbiAgICAgICAgICAgIGlmIChoYXMuY2FsbChvLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0R2V0RGVzY3JpcHRvciA9IGZ1bmN0aW9uKG8sIGtleSkge1xuICAgICAgICByZXR1cm4ge3ZhbHVlOiBvW2tleV19O1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0RGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAobywga2V5LCBkZXNjKSB7XG4gICAgICAgIG9ba2V5XSA9IGRlc2MudmFsdWU7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0RnJlZXplID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0R2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0KG9iaikuY29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIEFycmF5SXNBcnJheSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzdHIuY2FsbChvYmopID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2goZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBpc0FycmF5OiBBcnJheUlzQXJyYXksXG4gICAgICAgIGtleXM6IE9iamVjdEtleXMsXG4gICAgICAgIG5hbWVzOiBPYmplY3RLZXlzLFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eTogT2JqZWN0RGVmaW5lUHJvcGVydHksXG4gICAgICAgIGdldERlc2NyaXB0b3I6IE9iamVjdEdldERlc2NyaXB0b3IsXG4gICAgICAgIGZyZWV6ZTogT2JqZWN0RnJlZXplLFxuICAgICAgICBnZXRQcm90b3R5cGVPZjogT2JqZWN0R2V0UHJvdG90eXBlT2YsXG4gICAgICAgIGlzRVM1OiBpc0VTNSxcbiAgICAgICAgcHJvcGVydHlJc1dyaXRhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxufSx7fV0sMTQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgUHJvbWlzZU1hcCA9IFByb21pc2UubWFwO1xuXG5Qcm9taXNlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gUHJvbWlzZU1hcCh0aGlzLCBmbiwgb3B0aW9ucywgSU5URVJOQUwpO1xufTtcblxuUHJvbWlzZS5maWx0ZXIgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBJTlRFUk5BTCk7XG59O1xufTtcblxufSx7fV0sMTU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBDYW5jZWxsYXRpb25FcnJvciA9IFByb21pc2UuQ2FuY2VsbGF0aW9uRXJyb3I7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xuXG5mdW5jdGlvbiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0KHByb21pc2UsIHR5cGUsIGhhbmRsZXIpIHtcbiAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcbiAgICB0aGlzLmNhbGxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsUHJvbWlzZSA9IG51bGw7XG59XG5cblBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQucHJvdG90eXBlLmlzRmluYWxseUhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSAwO1xufTtcblxuZnVuY3Rpb24gRmluYWxseUhhbmRsZXJDYW5jZWxSZWFjdGlvbihmaW5hbGx5SGFuZGxlcikge1xuICAgIHRoaXMuZmluYWxseUhhbmRsZXIgPSBmaW5hbGx5SGFuZGxlcjtcbn1cblxuRmluYWxseUhhbmRsZXJDYW5jZWxSZWFjdGlvbi5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGNoZWNrQ2FuY2VsKHRoaXMuZmluYWxseUhhbmRsZXIpO1xufTtcblxuZnVuY3Rpb24gY2hlY2tDYW5jZWwoY3R4LCByZWFzb24pIHtcbiAgICBpZiAoY3R4LmNhbmNlbFByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGN0eC5jYW5jZWxQcm9taXNlLl9yZWplY3QocmVhc29uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5jYW5jZWxQcm9taXNlLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICBjdHguY2FuY2VsUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHN1Y2NlZWQoKSB7XG4gICAgcmV0dXJuIGZpbmFsbHlIYW5kbGVyLmNhbGwodGhpcywgdGhpcy5wcm9taXNlLl90YXJnZXQoKS5fc2V0dGxlZFZhbHVlKCkpO1xufVxuZnVuY3Rpb24gZmFpbChyZWFzb24pIHtcbiAgICBpZiAoY2hlY2tDYW5jZWwodGhpcywgcmVhc29uKSkgcmV0dXJuO1xuICAgIGVycm9yT2JqLmUgPSByZWFzb247XG4gICAgcmV0dXJuIGVycm9yT2JqO1xufVxuZnVuY3Rpb24gZmluYWxseUhhbmRsZXIocmVhc29uT3JWYWx1ZSkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuICAgIHZhciBoYW5kbGVyID0gdGhpcy5oYW5kbGVyO1xuXG4gICAgaWYgKCF0aGlzLmNhbGxlZCkge1xuICAgICAgICB0aGlzLmNhbGxlZCA9IHRydWU7XG4gICAgICAgIHZhciByZXQgPSB0aGlzLmlzRmluYWxseUhhbmRsZXIoKVxuICAgICAgICAgICAgPyBoYW5kbGVyLmNhbGwocHJvbWlzZS5fYm91bmRWYWx1ZSgpKVxuICAgICAgICAgICAgOiBoYW5kbGVyLmNhbGwocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCByZWFzb25PclZhbHVlKTtcbiAgICAgICAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9zZXRSZXR1cm5lZE5vblVuZGVmaW5lZCgpO1xuICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmV0LCBwcm9taXNlKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuY2VsUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UuX2lzQ2FuY2VsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFzb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXliZVByb21pc2UuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24odGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVByb21pc2UuX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHN1Y2NlZWQsIGZhaWwsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9taXNlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbk9yVmFsdWU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJlYXNvbk9yVmFsdWU7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5fcGFzc1Rocm91Z2ggPSBmdW5jdGlvbihoYW5kbGVyLCB0eXBlLCBzdWNjZXNzLCBmYWlsKSB7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0aGlzLnRoZW4oKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihzdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIGZhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0KHRoaXMsIHR5cGUsIGhhbmRsZXIpLFxuICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5sYXN0bHkgPVxuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRhcCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bhc3NUaHJvdWdoKGhhbmRsZXIsIDEsIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cbnJldHVybiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94eWFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZXJyb3JzID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpO1xudmFyIFR5cGVFcnJvciA9IGVycm9ycy5UeXBlRXJyb3I7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciB5aWVsZEhhbmRsZXJzID0gW107XG5cbmZ1bmN0aW9uIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKHZhbHVlLCB5aWVsZEhhbmRsZXJzLCB0cmFjZVBhcmVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeWllbGRIYW5kbGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0cmFjZVBhcmVudC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHlpZWxkSGFuZGxlcnNbaV0pKHZhbHVlKTtcbiAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmVzdWx0LCB0cmFjZVBhcmVudCk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gbWF5YmVQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZVNwYXduKGdlbmVyYXRvckZ1bmN0aW9uLCByZWNlaXZlciwgeWllbGRIYW5kbGVyLCBzdGFjaykge1xuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICB2YXIgaW50ZXJuYWwgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHZhciBfZmluYWxseVByb21pc2UgPSB0aGlzLl9maW5hbGx5UHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZSA9IGludGVybmFsLmxhc3RseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfZmluYWxseVByb21pc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpbnRlcm5hbC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaW50ZXJuYWwuX3NldE9uQ2FuY2VsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhY2sgPSBzdGFjaztcbiAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IGdlbmVyYXRvckZ1bmN0aW9uO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMgPSB0eXBlb2YgeWllbGRIYW5kbGVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyBbeWllbGRIYW5kbGVyXS5jb25jYXQoeWllbGRIYW5kbGVycylcbiAgICAgICAgOiB5aWVsZEhhbmRsZXJzO1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlU3Bhd24sIFByb3h5YWJsZSk7XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZSA9PT0gbnVsbDtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9wcm9taXNlID0gdGhpcy5fZ2VuZXJhdG9yID0gbnVsbDtcbiAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdGhpcy5fZmluYWxseVByb21pc2UgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UuX2Z1bGZpbGwoKTtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UgPSBudWxsO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIGltcGxlbWVudHNSZXR1cm4gPSB0eXBlb2YgdGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoIWltcGxlbWVudHNSZXR1cm4pIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yKFxuICAgICAgICAgICAgXCJnZW5lcmF0b3IgLnJldHVybigpIHNlbnRpbmVsXCIpO1xuICAgICAgICBQcm9taXNlLmNvcm91dGluZS5yZXR1cm5TZW50aW5lbCA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJ0aHJvd1wiXSkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdKS5jYWxsKHRoaXMuX2dlbmVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfVxuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlID0gdHJ1ZTtcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3IubmV4dCkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsIHZhbHVlKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1widGhyb3dcIl0pXG4gICAgICAgIC5jYWxsKHRoaXMuX2dlbmVyYXRvciwgcmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl95aWVsZGVkUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl95aWVsZGVkUHJvbWlzZTtcbiAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgICAgICBwcm9taXNlLmNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3J1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9nZW5lcmF0b3IgPSB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbi5jYWxsKHRoaXMuX3JlY2VpdmVyKTtcbiAgICB0aGlzLl9yZWNlaXZlciA9XG4gICAgICAgIHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodW5kZWZpbmVkKTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NvbnRpbnVlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICBpZiAocmVzdWx0LmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPVxuICAgICAgICAgICAgICAgIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKG1heWJlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl95aWVsZEhhbmRsZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VSZWplY3RlZChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQSB2YWx1ZSAlcyB3YXMgeWllbGRlZCB0aGF0IGNvdWxkIG5vdCBiZSB0cmVhdGVkIGFzIGEgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcXHUwMDBhXCIucmVwbGFjZShcIiVzXCIsIHZhbHVlKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZyb20gY29yb3V0aW5lOlxcdTAwMGFcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFjay5zcGxpdChcIlxcblwiKS5zbGljZSgxLCAtNykuam9pbihcIlxcblwiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgO1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9wcm94eSh0aGlzLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgUHJvbWlzZS5fYXN5bmMuaW52b2tlKFxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQsIHRoaXMsIG1heWJlUHJvbWlzZS5fdmFsdWUoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgUHJvbWlzZS5fYXN5bmMuaW52b2tlKFxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VSZWplY3RlZCwgdGhpcywgbWF5YmVQcm9taXNlLl9yZWFzb24oKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UuY29yb3V0aW5lID0gZnVuY3Rpb24gKGdlbmVyYXRvckZ1bmN0aW9uLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBnZW5lcmF0b3JGdW5jdGlvbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJnZW5lcmF0b3JGdW5jdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgeWllbGRIYW5kbGVyID0gT2JqZWN0KG9wdGlvbnMpLnlpZWxkSGFuZGxlcjtcbiAgICB2YXIgUHJvbWlzZVNwYXduJCA9IFByb21pc2VTcGF3bjtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gZ2VuZXJhdG9yRnVuY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHNwYXduID0gbmV3IFByb21pc2VTcGF3biQodW5kZWZpbmVkLCB1bmRlZmluZWQsIHlpZWxkSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2spO1xuICAgICAgICB2YXIgcmV0ID0gc3Bhd24ucHJvbWlzZSgpO1xuICAgICAgICBzcGF3bi5fZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xuICAgICAgICBzcGF3bi5fcHJvbWlzZUZ1bGZpbGxlZCh1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG59O1xuXG5Qcm9taXNlLmNvcm91dGluZS5hZGRZaWVsZEhhbmRsZXIgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgeWllbGRIYW5kbGVycy5wdXNoKGZuKTtcbn07XG5cblByb21pc2Uuc3Bhd24gPSBmdW5jdGlvbiAoZ2VuZXJhdG9yRnVuY3Rpb24pIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiUHJvbWlzZS5zcGF3bigpXCIsIFwiUHJvbWlzZS5jb3JvdXRpbmUoKVwiKTtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciBzcGF3biA9IG5ldyBQcm9taXNlU3Bhd24oZ2VuZXJhdG9yRnVuY3Rpb24sIHRoaXMpO1xuICAgIHZhciByZXQgPSBzcGF3bi5wcm9taXNlKCk7XG4gICAgc3Bhd24uX3J1bihQcm9taXNlLnNwYXduKTtcbiAgICByZXR1cm4gcmV0O1xufTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMTc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG5mdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMLCBhc3luYyxcbiAgICAgICAgIGdldERvbWFpbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHJlamVjdDtcblxuaWYgKCF0cnVlKSB7XG5pZiAoY2FuRXZhbHVhdGUpIHtcbiAgICB2YXIgdGhlbkNhbGxiYWNrID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwidmFsdWVcIiwgXCJob2xkZXJcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIuY2hlY2tGdWxmaWxsbWVudCh0aGlzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlU2V0dGVyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwicHJvbWlzZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBnZW5lcmF0ZUhvbGRlckNsYXNzID0gZnVuY3Rpb24odG90YWwpIHtcbiAgICAgICAgdmFyIHByb3BzID0gbmV3IEFycmF5KHRvdGFsKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcHJvcHNbaV0gPSBcInRoaXMucFwiICsgKGkrMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBwcm9wcy5qb2luKFwiID0gXCIpICsgXCIgPSBudWxsO1wiO1xuICAgICAgICB2YXIgY2FuY2VsbGF0aW9uQ29kZT0gXCJ2YXIgcHJvbWlzZTtcXG5cIiArIHByb3BzLm1hcChmdW5jdGlvbihwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBcIiArIHByb3AgKyBcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2FuY2VsKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgICAgdmFyIHBhc3NlZEFyZ3VtZW50cyA9IHByb3BzLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSBcIkhvbGRlciRcIiArIHRvdGFsO1xuXG5cbiAgICAgICAgdmFyIGNvZGUgPSBcInJldHVybiBmdW5jdGlvbih0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKSB7ICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBmdW5jdGlvbiBbVGhlTmFtZV0oZm4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW1RoZVByb3BlcnRpZXNdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5mbiA9IGZuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5hc3luY05lZWRlZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5ub3cgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLl9jYWxsRnVuY3Rpb24gPSBmdW5jdGlvbihwcm9taXNlKSB7ICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKHRoaXMuZm4pKFtUaGVQYXNzZWRBcmd1bWVudHNdKTsgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcG9wQ29udGV4dCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJldC5lLCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayhyZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLmNoZWNrRnVsZmlsbG1lbnQgPSBmdW5jdGlvbihwcm9taXNlKSB7ICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9ICsrdGhpcy5ub3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKG5vdyA9PT0gW1RoZVRvdGFsXSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFzeW5jTmVlZGVkKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYy5pbnZva2UodGhpcy5fY2FsbEZ1bmN0aW9uLCB0aGlzLCBwcm9taXNlKTsgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuY3Rpb24ocHJvbWlzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHsgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NhbmNlbGxhdGlvbkNvZGVdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gW1RoZU5hbWVdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH0odHJ5Q2F0Y2gsIGVycm9yT2JqLCBQcm9taXNlLCBhc3luYyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiO1xuXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcW1RoZU5hbWVcXF0vZywgbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVUb3RhbFxcXS9nLCB0b3RhbClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVQYXNzZWRBcmd1bWVudHNcXF0vZywgcGFzc2VkQXJndW1lbnRzKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVByb3BlcnRpZXNcXF0vZywgYXNzaWdubWVudClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtDYW5jZWxsYXRpb25Db2RlXFxdL2csIGNhbmNlbGxhdGlvbkNvZGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ0cnlDYXRjaFwiLCBcImVycm9yT2JqXCIsIFwiUHJvbWlzZVwiLCBcImFzeW5jXCIsIGNvZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAodHJ5Q2F0Y2gsIGVycm9yT2JqLCBQcm9taXNlLCBhc3luYyk7XG4gICAgfTtcblxuICAgIHZhciBob2xkZXJDbGFzc2VzID0gW107XG4gICAgdmFyIHRoZW5DYWxsYmFja3MgPSBbXTtcbiAgICB2YXIgcHJvbWlzZVNldHRlcnMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgKytpKSB7XG4gICAgICAgIGhvbGRlckNsYXNzZXMucHVzaChnZW5lcmF0ZUhvbGRlckNsYXNzKGkgKyAxKSk7XG4gICAgICAgIHRoZW5DYWxsYmFja3MucHVzaCh0aGVuQ2FsbGJhY2soaSArIDEpKTtcbiAgICAgICAgcHJvbWlzZVNldHRlcnMucHVzaChwcm9taXNlU2V0dGVyKGkgKyAxKSk7XG4gICAgfVxuXG4gICAgcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICB9O1xufX1cblxuUHJvbWlzZS5qb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgdmFyIGZuO1xuICAgIGlmIChsYXN0ID4gMCAmJiB0eXBlb2YgYXJndW1lbnRzW2xhc3RdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm4gPSBhcmd1bWVudHNbbGFzdF07XG4gICAgICAgIGlmICghdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGxhc3QgPD0gOCAmJiBjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIHZhciBIb2xkZXJDbGFzcyA9IGhvbGRlckNsYXNzZXNbbGFzdCAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBob2xkZXIgPSBuZXcgSG9sZGVyQ2xhc3MoZm4pO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGVuQ2FsbGJhY2tzO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoYXJndW1lbnRzW2ldLCByZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3RoZW4oY2FsbGJhY2tzW2ldLCByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcmV0LCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VTZXR0ZXJzW2ldKG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkZXIuYXN5bmNOZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl92YWx1ZSgpLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwocmV0LCBtYXliZVByb21pc2UsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXJldC5faXNGYXRlU2VhbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvbGRlci5hc3luY05lZWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbWFpbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlci5mbiA9IHV0aWwuZG9tYWluQmluZChkb21haW4sIGhvbGRlci5mbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChob2xkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpOztcbiAgICBpZiAoZm4pIGFyZ3MucG9wKCk7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlQXJyYXkoYXJncykucHJvbWlzZSgpO1xuICAgIHJldHVybiBmbiAhPT0gdW5kZWZpbmVkID8gcmV0LnNwcmVhZChmbikgOiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMTg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2VBcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVqZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xuXG5mdW5jdGlvbiBNYXBwaW5nUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgbGltaXQsIF9maWx0ZXIpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJChwcm9taXNlcyk7XG4gICAgdGhpcy5fcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBkb21haW4gPT09IG51bGwgPyBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKTtcbiAgICB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXMgPSBfZmlsdGVyID09PSBJTlRFUk5BTFxuICAgICAgICA/IG5ldyBBcnJheSh0aGlzLmxlbmd0aCgpKVxuICAgICAgICA6IG51bGw7XG4gICAgdGhpcy5fbGltaXQgPSBsaW1pdDtcbiAgICB0aGlzLl9pbkZsaWdodCA9IDA7XG4gICAgdGhpcy5fcXVldWUgPSBbXTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fYXN5bmNJbml0LCB0aGlzLCB1bmRlZmluZWQpO1xufVxudXRpbC5pbmhlcml0cyhNYXBwaW5nUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYXN5bmNJbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtMik7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHZhciBwcmVzZXJ2ZWRWYWx1ZXMgPSB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXM7XG4gICAgdmFyIGxpbWl0ID0gdGhpcy5fbGltaXQ7XG5cbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gKGluZGV4ICogLTEpIC0gMTtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAobGltaXQgPj0gMSkge1xuICAgICAgICAgICAgdGhpcy5faW5GbGlnaHQtLTtcbiAgICAgICAgICAgIHRoaXMuX2RyYWluUXVldWUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGxpbWl0ID49IDEgJiYgdGhpcy5faW5GbGlnaHQgPj0gbGltaXQpIHtcbiAgICAgICAgICAgIHZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwpIHByZXNlcnZlZFZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2U7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMuX2NhbGxiYWNrO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSB0cnlDYXRjaChjYWxsYmFjaykuY2FsbChyZWNlaXZlciwgdmFsdWUsIGluZGV4LCBsZW5ndGgpO1xuICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHJldCxcbiAgICAgICAgICAgIHByb21pc2VDcmVhdGVkLFxuICAgICAgICAgICAgcHJlc2VydmVkVmFsdWVzICE9PSBudWxsID8gXCJQcm9taXNlLmZpbHRlclwiIDogXCJQcm9taXNlLm1hcFwiLFxuICAgICAgICAgICAgcHJvbWlzZVxuICAgICAgICApO1xuICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KHJldC5lKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmV0LCB0aGlzLl9wcm9taXNlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgICAgICB2YXIgYml0RmllbGQgPSBtYXliZVByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbWl0ID49IDEpIHRoaXMuX2luRmxpZ2h0Kys7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IG1heWJlUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3Byb3h5KHRoaXMsIChpbmRleCArIDEpICogLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZXQgPSBtYXliZVByb21pc2UuX3ZhbHVlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gcmV0O1xuICAgIH1cbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fZmlsdGVyKHZhbHVlcywgcHJlc2VydmVkVmFsdWVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHF1ZXVlID0gdGhpcy5fcXVldWU7XG4gICAgdmFyIGxpbWl0ID0gdGhpcy5fbGltaXQ7XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiB0aGlzLl9pbkZsaWdodCA8IGxpbWl0KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICAgICAgdmFyIGluZGV4ID0gcXVldWUucG9wKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodmFsdWVzW2luZGV4XSwgaW5kZXgpO1xuICAgIH1cbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9maWx0ZXIgPSBmdW5jdGlvbiAoYm9vbGVhbnMsIHZhbHVlcykge1xuICAgIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuKTtcbiAgICB2YXIgaiA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBpZiAoYm9vbGVhbnNbaV0pIHJldFtqKytdID0gdmFsdWVzW2ldO1xuICAgIH1cbiAgICByZXQubGVuZ3RoID0gajtcbiAgICB0aGlzLl9yZXNvbHZlKHJldCk7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5wcmVzZXJ2ZWRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbn07XG5cbmZ1bmN0aW9uIG1hcChwcm9taXNlcywgZm4sIG9wdGlvbnMsIF9maWx0ZXIpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuXG4gICAgdmFyIGxpbWl0ID0gMDtcbiAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29uY3VycmVuY3kgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUeXBlRXJyb3IoXCInY29uY3VycmVuY3knIG11c3QgYmUgYSBudW1iZXIgYnV0IGl0IGlzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucy5jb25jdXJyZW5jeSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbWl0ID0gb3B0aW9ucy5jb25jdXJyZW5jeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9ucyBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdCBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKG9wdGlvbnMpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGltaXQgPSB0eXBlb2YgbGltaXQgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgaXNGaW5pdGUobGltaXQpICYmIGxpbWl0ID49IDEgPyBsaW1pdCA6IDA7XG4gICAgcmV0dXJuIG5ldyBNYXBwaW5nUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgbGltaXQsIF9maWx0ZXIpLnByb21pc2UoKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG1hcCh0aGlzLCBmbiwgb3B0aW9ucywgbnVsbCk7XG59O1xuXG5Qcm9taXNlLm1hcCA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIG9wdGlvbnMsIF9maWx0ZXIpIHtcbiAgICByZXR1cm4gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcik7XG59O1xuXG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwxOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24sIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuXG5Qcm9taXNlLm1ldGhvZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZS5UeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIHJldC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHZhbHVlID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHJldC5fcG9wQ29udGV4dCgpO1xuICAgICAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgICAgICB2YWx1ZSwgcHJvbWlzZUNyZWF0ZWQsIFwiUHJvbWlzZS5tZXRob2RcIiwgcmV0KTtcbiAgICAgICAgcmV0Ll9yZXNvbHZlRnJvbVN5bmNWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn07XG5cblByb21pc2UuYXR0ZW1wdCA9IFByb21pc2VbXCJ0cnlcIl0gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHJldC5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJjYWxsaW5nIFByb21pc2UudHJ5IHdpdGggbW9yZSB0aGFuIDEgYXJndW1lbnRcIik7XG4gICAgICAgIHZhciBhcmcgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIHZhciBjdHggPSBhcmd1bWVudHNbMl07XG4gICAgICAgIHZhbHVlID0gdXRpbC5pc0FycmF5KGFyZykgPyB0cnlDYXRjaChmbikuYXBwbHkoY3R4LCBhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnlDYXRjaChmbikuY2FsbChjdHgsIGFyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0cnlDYXRjaChmbikoKTtcbiAgICB9XG4gICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICB2YWx1ZSwgcHJvbWlzZUNyZWF0ZWQsIFwiUHJvbWlzZS50cnlcIiwgcmV0KTtcbiAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVGcm9tU3luY1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1dGlsLmVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdENhbGxiYWNrKHZhbHVlLmUsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ2FsbGJhY2sodmFsdWUsIHRydWUpO1xuICAgIH1cbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgbWF5YmVXcmFwQXNFcnJvciA9IHV0aWwubWF5YmVXcmFwQXNFcnJvcjtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgT3BlcmF0aW9uYWxFcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xudmFyIGVzNSA9IF9kZXJlcV8oXCIuL2VzNVwiKTtcblxuZnVuY3Rpb24gaXNVbnR5cGVkRXJyb3Iob2JqKSB7XG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgIGVzNS5nZXRQcm90b3R5cGVPZihvYmopID09PSBFcnJvci5wcm90b3R5cGU7XG59XG5cbnZhciByRXJyb3JLZXkgPSAvXig/Om5hbWV8bWVzc2FnZXxzdGFja3xjYXVzZSkkLztcbmZ1bmN0aW9uIHdyYXBBc09wZXJhdGlvbmFsRXJyb3Iob2JqKSB7XG4gICAgdmFyIHJldDtcbiAgICBpZiAoaXNVbnR5cGVkRXJyb3Iob2JqKSkge1xuICAgICAgICByZXQgPSBuZXcgT3BlcmF0aW9uYWxFcnJvcihvYmopO1xuICAgICAgICByZXQubmFtZSA9IG9iai5uYW1lO1xuICAgICAgICByZXQubWVzc2FnZSA9IG9iai5tZXNzYWdlO1xuICAgICAgICByZXQuc3RhY2sgPSBvYmouc3RhY2s7XG4gICAgICAgIHZhciBrZXlzID0gZXM1LmtleXMob2JqKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmICghckVycm9yS2V5LnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgICAgIHJldFtrZXldID0gb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24ob2JqKTtcbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgbXVsdGlBcmdzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVyciwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHByb21pc2UgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgdmFyIHdyYXBwZWQgPSB3cmFwQXNPcGVyYXRpb25hbEVycm9yKG1heWJlV3JhcEFzRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHdyYXBwZWQpO1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHdyYXBwZWQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFtdWx0aUFyZ3MpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7O1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5vZGViYWNrRm9yUHJvbWlzZTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi9lczVcIjoxMyxcIi4vdXRpbFwiOjM2fV0sMjE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIHNwcmVhZEFkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICBpZiAoIXV0aWwuaXNBcnJheSh2YWwpKSByZXR1cm4gc3VjY2Vzc0FkYXB0ZXIuY2FsbChwcm9taXNlLCB2YWwsIG5vZGViYWNrKTtcbiAgICB2YXIgcmV0ID1cbiAgICAgICAgdHJ5Q2F0Y2gobm9kZWJhY2spLmFwcGx5KHByb21pc2UuX2JvdW5kVmFsdWUoKSwgW251bGxdLmNvbmNhdCh2YWwpKTtcbiAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKHJldC5lKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NBZGFwdGVyKHZhbCwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIHJlY2VpdmVyID0gcHJvbWlzZS5fYm91bmRWYWx1ZSgpO1xuICAgIHZhciByZXQgPSB2YWwgPT09IHVuZGVmaW5lZFxuICAgICAgICA/IHRyeUNhdGNoKG5vZGViYWNrKS5jYWxsKHJlY2VpdmVyLCBudWxsKVxuICAgICAgICA6IHRyeUNhdGNoKG5vZGViYWNrKS5jYWxsKHJlY2VpdmVyLCBudWxsLCB2YWwpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVycm9yQWRhcHRlcihyZWFzb24sIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghcmVhc29uKSB7XG4gICAgICAgIHZhciBuZXdSZWFzb24gPSBuZXcgRXJyb3IocmVhc29uICsgXCJcIik7XG4gICAgICAgIG5ld1JlYXNvbi5jYXVzZSA9IHJlYXNvbjtcbiAgICAgICAgcmVhc29uID0gbmV3UmVhc29uO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCByZWFzb24pO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYXNDYWxsYmFjayA9IFByb21pc2UucHJvdG90eXBlLm5vZGVpZnkgPSBmdW5jdGlvbiAobm9kZWJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBub2RlYmFjayA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIGFkYXB0ZXIgPSBzdWNjZXNzQWRhcHRlcjtcbiAgICAgICAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qob3B0aW9ucykuc3ByZWFkKSB7XG4gICAgICAgICAgICBhZGFwdGVyID0gc3ByZWFkQWRhcHRlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90aGVuKFxuICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgIGVycm9yQWRhcHRlcixcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBub2RlYmFja1xuICAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xudmFyIG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiY2lyY3VsYXIgcHJvbWlzZSByZXNvbHV0aW9uIGNoYWluXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbn07XG52YXIgcmVmbGVjdEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UuUHJvbWlzZUluc3BlY3Rpb24odGhpcy5fdGFyZ2V0KCkpO1xufTtcbnZhciBhcGlSZWplY3Rpb24gPSBmdW5jdGlvbihtc2cpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcihtc2cpKTtcbn07XG5mdW5jdGlvbiBQcm94eWFibGUoKSB7fVxudmFyIFVOREVGSU5FRF9CSU5ESU5HID0ge307XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbnZhciBnZXREb21haW47XG5pZiAodXRpbC5pc05vZGUpIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJldCA9IHByb2Nlc3MuZG9tYWluO1xuICAgICAgICBpZiAocmV0ID09PSB1bmRlZmluZWQpIHJldCA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgZ2V0RG9tYWluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG59XG51dGlsLm5vdEVudW1lcmFibGVQcm9wKFByb21pc2UsIFwiX2dldERvbWFpblwiLCBnZXREb21haW4pO1xuXG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIEFzeW5jID0gX2RlcmVxXyhcIi4vYXN5bmNcIik7XG52YXIgYXN5bmMgPSBuZXcgQXN5bmMoKTtcbmVzNS5kZWZpbmVQcm9wZXJ0eShQcm9taXNlLCBcIl9hc3luY1wiLCB7dmFsdWU6IGFzeW5jfSk7XG52YXIgZXJyb3JzID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpO1xudmFyIFR5cGVFcnJvciA9IFByb21pc2UuVHlwZUVycm9yID0gZXJyb3JzLlR5cGVFcnJvcjtcblByb21pc2UuUmFuZ2VFcnJvciA9IGVycm9ycy5SYW5nZUVycm9yO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gUHJvbWlzZS5DYW5jZWxsYXRpb25FcnJvciA9IGVycm9ycy5DYW5jZWxsYXRpb25FcnJvcjtcblByb21pc2UuVGltZW91dEVycm9yID0gZXJyb3JzLlRpbWVvdXRFcnJvcjtcblByb21pc2UuT3BlcmF0aW9uYWxFcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xuUHJvbWlzZS5SZWplY3Rpb25FcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xuUHJvbWlzZS5BZ2dyZWdhdGVFcnJvciA9IGVycm9ycy5BZ2dyZWdhdGVFcnJvcjtcbnZhciBJTlRFUk5BTCA9IGZ1bmN0aW9uKCl7fTtcbnZhciBBUFBMWSA9IHt9O1xudmFyIE5FWFRfRklMVEVSID0ge307XG52YXIgdHJ5Q29udmVydFRvUHJvbWlzZSA9IF9kZXJlcV8oXCIuL3RoZW5hYmxlc1wiKShQcm9taXNlLCBJTlRFUk5BTCk7XG52YXIgUHJvbWlzZUFycmF5ID1cbiAgICBfZGVyZXFfKFwiLi9wcm9taXNlX2FycmF5XCIpKFByb21pc2UsIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgUHJveHlhYmxlKTtcbnZhciBDb250ZXh0ID0gX2RlcmVxXyhcIi4vY29udGV4dFwiKShQcm9taXNlKTtcbiAvKmpzaGludCB1bnVzZWQ6ZmFsc2UqL1xudmFyIGNyZWF0ZUNvbnRleHQgPSBDb250ZXh0LmNyZWF0ZTtcbnZhciBkZWJ1ZyA9IF9kZXJlcV8oXCIuL2RlYnVnZ2FiaWxpdHlcIikoUHJvbWlzZSwgQ29udGV4dCk7XG52YXIgQ2FwdHVyZWRUcmFjZSA9IGRlYnVnLkNhcHR1cmVkVHJhY2U7XG52YXIgUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dCA9XG4gICAgX2RlcmVxXyhcIi4vZmluYWxseVwiKShQcm9taXNlLCB0cnlDb252ZXJ0VG9Qcm9taXNlKTtcbnZhciBjYXRjaEZpbHRlciA9IF9kZXJlcV8oXCIuL2NhdGNoX2ZpbHRlclwiKShORVhUX0ZJTFRFUik7XG52YXIgbm9kZWJhY2tGb3JQcm9taXNlID0gX2RlcmVxXyhcIi4vbm9kZWJhY2tcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbmZ1bmN0aW9uIGNoZWNrKHNlbGYsIGV4ZWN1dG9yKSB7XG4gICAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhleGVjdXRvcikpO1xuICAgIH1cbiAgICBpZiAoc2VsZi5jb25zdHJ1Y3RvciAhPT0gUHJvbWlzZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHByb21pc2UgY29uc3RydWN0b3IgY2Fubm90IGJlIGludm9rZWQgZGlyZWN0bHlcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gMDtcbiAgICB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2UwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JlY2VpdmVyMCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoZXhlY3V0b3IgIT09IElOVEVSTkFMKSB7XG4gICAgICAgIGNoZWNrKHRoaXMsIGV4ZWN1dG9yKTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZUZyb21FeGVjdXRvcihleGVjdXRvcik7XG4gICAgfVxuICAgIHRoaXMuX3Byb21pc2VDcmVhdGVkKCk7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNyZWF0ZWRcIiwgdGhpcyk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgUHJvbWlzZV1cIjtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdWdodCA9IFByb21pc2UucHJvdG90eXBlW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAobGVuID4gMSkge1xuICAgICAgICB2YXIgY2F0Y2hJbnN0YW5jZXMgPSBuZXcgQXJyYXkobGVuIC0gMSksXG4gICAgICAgICAgICBqID0gMCwgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbiAtIDE7ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAodXRpbC5pc09iamVjdChpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNhdGNoSW5zdGFuY2VzW2orK10gPSBpdGVtO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGFuIG9iamVjdCBidXQgZ290IFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJBIGNhdGNoIHN0YXRlbWVudCBwcmVkaWNhdGUgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGl0ZW0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaEluc3RhbmNlcy5sZW5ndGggPSBqO1xuICAgICAgICBmbiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIGNhdGNoRmlsdGVyKGNhdGNoSW5zdGFuY2VzLCBmbiwgdGhpcykpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgZm4pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVmbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihyZWZsZWN0SGFuZGxlcixcbiAgICAgICAgcmVmbGVjdEhhbmRsZXIsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0KSB7XG4gICAgaWYgKGRlYnVnLndhcm5pbmdzKCkgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgdHlwZW9mIGRpZEZ1bGZpbGwgIT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgZGlkUmVqZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIG1zZyA9IFwiLnRoZW4oKSBvbmx5IGFjY2VwdHMgZnVuY3Rpb25zIGJ1dCB3YXMgcGFzc2VkOiBcIiArXG4gICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhkaWRGdWxmaWxsKTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBtc2cgKz0gXCIsIFwiICsgdXRpbC5jbGFzc1N0cmluZyhkaWRSZWplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dhcm4obXNnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0KSB7XG4gICAgdmFyIHByb21pc2UgPVxuICAgICAgICB0aGlzLl90aGVuKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgcHJvbWlzZS5fc2V0SXNGaW5hbCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3ByZWFkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hbGwoKS5fdGhlbihmbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIEFQUExZLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXQgPSB7XG4gICAgICAgIGlzRnVsZmlsbGVkOiBmYWxzZSxcbiAgICAgICAgaXNSZWplY3RlZDogZmFsc2UsXG4gICAgICAgIGZ1bGZpbGxtZW50VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVqZWN0aW9uUmVhc29uOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgcmV0LmZ1bGZpbGxtZW50VmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICAgIHJldC5pc0Z1bGZpbGxlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICByZXQucmVqZWN0aW9uUmVhc29uID0gdGhpcy5yZWFzb24oKTtcbiAgICAgICAgcmV0LmlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLl93YXJuKFwiLmFsbCgpIHdhcyBwYXNzZWQgYXJndW1lbnRzIGJ1dCBpdCBkb2VzIG5vdCB0YWtlIGFueVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlQXJyYXkodGhpcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5jYXVnaHQodXRpbC5vcmlnaW5hdGVzRnJvbVJlamVjdGlvbiwgZm4pO1xufTtcblxuUHJvbWlzZS5nZXROZXdMaWJyYXJ5Q29weSA9IG1vZHVsZS5leHBvcnRzO1xuXG5Qcm9taXNlLmlzID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiB2YWwgaW5zdGFuY2VvZiBQcm9taXNlO1xufTtcblxuUHJvbWlzZS5mcm9tTm9kZSA9IFByb21pc2UuZnJvbUNhbGxiYWNrID0gZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB2YXIgbXVsdGlBcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyAhIU9iamVjdChhcmd1bWVudHNbMV0pLm11bHRpQXJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChmbikobm9kZWJhY2tGb3JQcm9taXNlKHJldCwgbXVsdGlBcmdzKSk7XG4gICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcmV0Ll9yZWplY3RDYWxsYmFjayhyZXN1bHQuZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmICghcmV0Ll9pc0ZhdGVTZWFsZWQoKSkgcmV0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2VBcnJheShwcm9taXNlcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5jYXN0ID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHZhciByZXQgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKG9iaik7XG4gICAgaWYgKCEocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIHJldC5fc2V0RnVsZmlsbGVkKCk7XG4gICAgICAgIHJldC5fcmVqZWN0aW9uSGFuZGxlcjAgPSBvYmo7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnJlc29sdmUgPSBQcm9taXNlLmZ1bGZpbGxlZCA9IFByb21pc2UuY2FzdDtcblxuUHJvbWlzZS5yZWplY3QgPSBQcm9taXNlLnJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHJldC5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCB0cnVlKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5zZXRTY2hlZHVsZXIgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzeW5jLnNldFNjaGVkdWxlcihmbik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdGhlbiA9IGZ1bmN0aW9uIChcbiAgICBkaWRGdWxmaWxsLFxuICAgIGRpZFJlamVjdCxcbiAgICBfLCAgICByZWNlaXZlcixcbiAgICBpbnRlcm5hbERhdGFcbikge1xuICAgIHZhciBoYXZlSW50ZXJuYWxEYXRhID0gaW50ZXJuYWxEYXRhICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIHByb21pc2UgPSBoYXZlSW50ZXJuYWxEYXRhID8gaW50ZXJuYWxEYXRhIDogbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICB2YXIgYml0RmllbGQgPSB0YXJnZXQuX2JpdEZpZWxkO1xuXG4gICAgaWYgKCFoYXZlSW50ZXJuYWxEYXRhKSB7XG4gICAgICAgIHByb21pc2UuX3Byb3BhZ2F0ZUZyb20odGhpcywgMyk7XG4gICAgICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAoKHRoaXMuX2JpdEZpZWxkICYgMjA5NzE1MikgIT09IDApKSB7XG4gICAgICAgICAgICBpZiAoISgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0aGlzLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gdGFyZ2V0ID09PSB0aGlzID8gdW5kZWZpbmVkIDogdGhpcy5fYm91bmRUbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ2hhaW5lZFwiLCB0aGlzLCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgaWYgKCEoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICB2YXIgaGFuZGxlciwgdmFsdWUsIHNldHRsZXIgPSB0YXJnZXQuX3NldHRsZVByb21pc2VDdHg7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0YXJnZXQuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgICAgICAgICAgaGFuZGxlciA9IGRpZEZ1bGZpbGw7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGFyZ2V0Ll9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgICAgICAgICAgaGFuZGxlciA9IGRpZFJlamVjdDtcbiAgICAgICAgICAgIHRhcmdldC5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0dGxlciA9IHRhcmdldC5fc2V0dGxlUHJvbWlzZUxhdGVDYW5jZWxsYXRpb25PYnNlcnZlcjtcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IENhbmNlbGxhdGlvbkVycm9yKFwibGF0ZSBjYW5jZWxsYXRpb24gb2JzZXJ2ZXJcIik7XG4gICAgICAgICAgICB0YXJnZXQuX2F0dGFjaEV4dHJhVHJhY2UodmFsdWUpO1xuICAgICAgICAgICAgaGFuZGxlciA9IGRpZFJlamVjdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jLmludm9rZShzZXR0bGVyLCB0YXJnZXQsIHtcbiAgICAgICAgICAgIGhhbmRsZXI6IGRvbWFpbiA9PT0gbnVsbCA/IGhhbmRsZXJcbiAgICAgICAgICAgICAgICA6ICh0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICAgICAgICAgIHV0aWwuZG9tYWluQmluZChkb21haW4sIGhhbmRsZXIpKSxcbiAgICAgICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgICAgICByZWNlaXZlcjogcmVjZWl2ZXIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0Ll9hZGRDYWxsYmFja3MoZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCBwcm9taXNlLCByZWNlaXZlciwgZG9tYWluKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JpdEZpZWxkICYgNjU1MzU7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGYXRlU2VhbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMTc1MDYwNDgpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRm9sbG93aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA2NzEwODg2NCkgPT09IDY3MTA4ODY0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9ICh0aGlzLl9iaXRGaWVsZCAmIC02NTUzNikgfFxuICAgICAgICAobGVuICYgNjU1MzUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEZ1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMzM1NTQ0MzI7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUZ1bGZpbGxlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRSZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTY3NzcyMTY7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZVJlamVjdGVkXCIsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEZvbGxvd2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNjcxMDg4NjQ7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZVJlc29sdmVkXCIsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldElzRmluYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDQxOTQzMDQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGaW5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNDE5NDMwNCkgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+NjU1MzYpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA2NTUzNjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ2FuY2VsbGVkXCIsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFdpbGxCZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA4Mzg4NjA4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEFzeW5jR3VhcmFudGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChhc3luYy5oYXNDdXN0b21TY2hlZHVsZXIoKSkgcmV0dXJuO1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzQyMTc3Mjg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVjZWl2ZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHZhciByZXQgPSBpbmRleCA9PT0gMCA/IHRoaXMuX3JlY2VpdmVyMCA6IHRoaXNbXG4gICAgICAgICAgICBpbmRleCAqIDQgLSA0ICsgM107XG4gICAgaWYgKHJldCA9PT0gVU5ERUZJTkVEX0JJTkRJTkcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHJldCA9PT0gdW5kZWZpbmVkICYmIHRoaXMuX2lzQm91bmQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm91bmRWYWx1ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDJdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Z1bGZpbGxtZW50SGFuZGxlckF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXNbXG4gICAgICAgICAgICBpbmRleCAqIDQgLSA0ICsgMF07XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0aW9uSGFuZGxlckF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXNbXG4gICAgICAgICAgICBpbmRleCAqIDQgLSA0ICsgMV07XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYm91bmRWYWx1ZSA9IGZ1bmN0aW9uKCkge307XG5cblByb21pc2UucHJvdG90eXBlLl9taWdyYXRlQ2FsbGJhY2swID0gZnVuY3Rpb24gKGZvbGxvd2VyKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gZm9sbG93ZXIuX2JpdEZpZWxkO1xuICAgIHZhciBmdWxmaWxsID0gZm9sbG93ZXIuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgdmFyIHJlamVjdCA9IGZvbGxvd2VyLl9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICB2YXIgcHJvbWlzZSA9IGZvbGxvd2VyLl9wcm9taXNlMDtcbiAgICB2YXIgcmVjZWl2ZXIgPSBmb2xsb3dlci5fcmVjZWl2ZXJBdCgwKTtcbiAgICBpZiAocmVjZWl2ZXIgPT09IHVuZGVmaW5lZCkgcmVjZWl2ZXIgPSBVTkRFRklORURfQklORElORztcbiAgICB0aGlzLl9hZGRDYWxsYmFja3MoZnVsZmlsbCwgcmVqZWN0LCBwcm9taXNlLCByZWNlaXZlciwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbWlncmF0ZUNhbGxiYWNrQXQgPSBmdW5jdGlvbiAoZm9sbG93ZXIsIGluZGV4KSB7XG4gICAgdmFyIGZ1bGZpbGwgPSBmb2xsb3dlci5fZnVsZmlsbG1lbnRIYW5kbGVyQXQoaW5kZXgpO1xuICAgIHZhciByZWplY3QgPSBmb2xsb3dlci5fcmVqZWN0aW9uSGFuZGxlckF0KGluZGV4KTtcbiAgICB2YXIgcHJvbWlzZSA9IGZvbGxvd2VyLl9wcm9taXNlQXQoaW5kZXgpO1xuICAgIHZhciByZWNlaXZlciA9IGZvbGxvd2VyLl9yZWNlaXZlckF0KGluZGV4KTtcbiAgICBpZiAocmVjZWl2ZXIgPT09IHVuZGVmaW5lZCkgcmVjZWl2ZXIgPSBVTkRFRklORURfQklORElORztcbiAgICB0aGlzLl9hZGRDYWxsYmFja3MoZnVsZmlsbCwgcmVqZWN0LCBwcm9taXNlLCByZWNlaXZlciwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYWRkQ2FsbGJhY2tzID0gZnVuY3Rpb24gKFxuICAgIGZ1bGZpbGwsXG4gICAgcmVqZWN0LFxuICAgIHByb21pc2UsXG4gICAgcmVjZWl2ZXIsXG4gICAgZG9tYWluXG4pIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLl9sZW5ndGgoKTtcblxuICAgIGlmIChpbmRleCA+PSA2NTUzNSAtIDQpIHtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3Byb21pc2UwID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5fcmVjZWl2ZXIwID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmICh0eXBlb2YgZnVsZmlsbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyBmdWxmaWxsIDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgZnVsZmlsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiByZWplY3QgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IHJlamVjdCA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYmFzZSA9IGluZGV4ICogNCAtIDQ7XG4gICAgICAgIHRoaXNbYmFzZSArIDJdID0gcHJvbWlzZTtcbiAgICAgICAgdGhpc1tiYXNlICsgM10gPSByZWNlaXZlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBmdWxmaWxsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXNbYmFzZSArIDBdID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyBmdWxmaWxsIDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgZnVsZmlsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiByZWplY3QgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpc1tiYXNlICsgMV0gPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IHJlamVjdCA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc2V0TGVuZ3RoKGluZGV4ICsgMSk7XG4gICAgcmV0dXJuIGluZGV4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKHByb3h5YWJsZSwgYXJnKSB7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmcsIHByb3h5YWJsZSwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUNhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUsIHNob3VsZEJpbmQpIHtcbiAgICBpZiAoKCh0aGlzLl9iaXRGaWVsZCAmIDExNzUwNjA0OCkgIT09IDApKSByZXR1cm47XG4gICAgaWYgKHZhbHVlID09PSB0aGlzKVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0Q2FsbGJhY2sobWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKSwgZmFsc2UpO1xuICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlLCB0aGlzKTtcbiAgICBpZiAoIShtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSkgcmV0dXJuIHRoaXMuX2Z1bGZpbGwodmFsdWUpO1xuXG4gICAgaWYgKHNob3VsZEJpbmQpIHRoaXMuX3Byb3BhZ2F0ZUZyb20obWF5YmVQcm9taXNlLCAyKTtcblxuICAgIHZhciBwcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcblxuICAgIGlmIChwcm9taXNlID09PSB0aGlzKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBiaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5fbGVuZ3RoKCk7XG4gICAgICAgIGlmIChsZW4gPiAwKSBwcm9taXNlLl9taWdyYXRlQ2FsbGJhY2swKHRoaXMpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9taWdyYXRlQ2FsbGJhY2tBdCh0aGlzLCBpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRGb2xsb3dpbmcoKTtcbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgICAgICB0aGlzLl9zZXRGb2xsb3dlZShwcm9taXNlKTtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgIHRoaXMuX2Z1bGZpbGwocHJvbWlzZS5fdmFsdWUoKSk7XG4gICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICB0aGlzLl9yZWplY3QocHJvbWlzZS5fcmVhc29uKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZWFzb24gPSBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoXCJsYXRlIGNhbmNlbGxhdGlvbiBvYnNlcnZlclwiKTtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0Q2FsbGJhY2sgPVxuZnVuY3Rpb24ocmVhc29uLCBzeW5jaHJvbm91cywgaWdub3JlTm9uRXJyb3JXYXJuaW5ncykge1xuICAgIHZhciB0cmFjZSA9IHV0aWwuZW5zdXJlRXJyb3JPYmplY3QocmVhc29uKTtcbiAgICB2YXIgaGFzU3RhY2sgPSB0cmFjZSA9PT0gcmVhc29uO1xuICAgIGlmICghaGFzU3RhY2sgJiYgIWlnbm9yZU5vbkVycm9yV2FybmluZ3MgJiYgZGVidWcud2FybmluZ3MoKSkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiYSBwcm9taXNlIHdhcyByZWplY3RlZCB3aXRoIGEgbm9uLWVycm9yOiBcIiArXG4gICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3dhcm4obWVzc2FnZSwgdHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UodHJhY2UsIHN5bmNocm9ub3VzID8gaGFzU3RhY2sgOiBmYWxzZSk7XG4gICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21FeGVjdXRvciA9IGZ1bmN0aW9uIChleGVjdXRvcikge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB0aGlzLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHRoaXMuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICB2YXIgciA9IHRoaXMuX2V4ZWN1dGUoZXhlY3V0b3IsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZWFzb24sIHN5bmNocm9ub3VzKTtcbiAgICB9KTtcbiAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgIHRoaXMuX3BvcENvbnRleHQoKTtcblxuICAgIGlmIChyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sociwgdHJ1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlciA9IGZ1bmN0aW9uIChcbiAgICBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUsIHByb21pc2Vcbikge1xuICAgIHZhciBiaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkgcmV0dXJuO1xuICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHg7XG4gICAgaWYgKHJlY2VpdmVyID09PSBBUFBMWSkge1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZS5sZW5ndGggIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHggPSBlcnJvck9iajtcbiAgICAgICAgICAgIHguZSA9IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgLnNwcmVhZCgpIGEgbm9uLWFycmF5OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gdHJ5Q2F0Y2goaGFuZGxlcikuYXBwbHkodGhpcy5fYm91bmRWYWx1ZSgpLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gdHJ5Q2F0Y2goaGFuZGxlcikuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDY1NTM2KSAhPT0gMCkpIHJldHVybjtcblxuICAgIGlmICh4ID09PSBORVhUX0ZJTFRFUikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoeCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2soeC5lLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKHgsIHByb21pc2VDcmVhdGVkLCBcIlwiLCAgcHJvbWlzZSwgdGhpcyk7XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh4KTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IHRoaXM7XG4gICAgd2hpbGUgKHJldC5faXNGb2xsb3dpbmcoKSkgcmV0ID0gcmV0Ll9mb2xsb3dlZSgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZm9sbG93ZWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Rm9sbG93ZWUgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSBwcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2UgPSBmdW5jdGlvbihwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpIHtcbiAgICB2YXIgaXNQcm9taXNlID0gcHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgdmFyIGFzeW5jR3VhcmFudGVlZCA9ICgoYml0RmllbGQgJiAxMzQyMTc3MjgpICE9PSAwKTtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDY1NTM2KSAhPT0gMCkpIHtcbiAgICAgICAgaWYgKGlzUHJvbWlzZSkgcHJvbWlzZS5faW52b2tlSW50ZXJuYWxPbkNhbmNlbCgpO1xuXG4gICAgICAgIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQgJiZcbiAgICAgICAgICAgIHJlY2VpdmVyLmlzRmluYWxseUhhbmRsZXIoKSkge1xuICAgICAgICAgICAgcmVjZWl2ZXIuY2FuY2VsUHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgICAgICBpZiAodHJ5Q2F0Y2goaGFuZGxlcikuY2FsbChyZWNlaXZlciwgdmFsdWUpID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX3JlamVjdChlcnJvck9iai5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyID09PSByZWZsZWN0SGFuZGxlcikge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbChyZWZsZWN0SGFuZGxlci5jYWxsKHJlY2VpdmVyKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQcm94eWFibGUpIHtcbiAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlQ2FuY2VsbGVkKHByb21pc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZSB8fCBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZUFycmF5KSB7XG4gICAgICAgICAgICBwcm9taXNlLl9jYW5jZWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlY2VpdmVyLmNhbmNlbCgpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghaXNQcm9taXNlKSB7XG4gICAgICAgICAgICBoYW5kbGVyLmNhbGwocmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhc3luY0d1YXJhbnRlZWQpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyKGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUHJveHlhYmxlKSB7XG4gICAgICAgIGlmICghcmVjZWl2ZXIuX2lzUmVzb2x2ZWQoKSkge1xuICAgICAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VGdWxmaWxsZWQodmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZVJlamVjdGVkKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKSB7XG4gICAgICAgIGlmIChhc3luY0d1YXJhbnRlZWQpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlTGF0ZUNhbmNlbGxhdGlvbk9ic2VydmVyID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdmFyIGhhbmRsZXIgPSBjdHguaGFuZGxlcjtcbiAgICB2YXIgcHJvbWlzZSA9IGN0eC5wcm9taXNlO1xuICAgIHZhciByZWNlaXZlciA9IGN0eC5yZWNlaXZlcjtcbiAgICB2YXIgdmFsdWUgPSBjdHgudmFsdWU7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKCEocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICBoYW5kbGVyLmNhbGwocmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlcihoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlQ3R4ID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdGhpcy5fc2V0dGxlUHJvbWlzZShjdHgucHJvbWlzZSwgY3R4LmhhbmRsZXIsIGN0eC5yZWNlaXZlciwgY3R4LnZhbHVlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlMCA9IGZ1bmN0aW9uKGhhbmRsZXIsIHZhbHVlLCBiaXRGaWVsZCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTA7XG4gICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdCgwKTtcbiAgICB0aGlzLl9wcm9taXNlMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZWNlaXZlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleCA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgdmFyIGJhc2UgPSBpbmRleCAqIDQgLSA0O1xuICAgIHRoaXNbYmFzZSArIDJdID1cbiAgICB0aGlzW2Jhc2UgKyAzXSA9XG4gICAgdGhpc1tiYXNlICsgMF0gPVxuICAgIHRoaXNbYmFzZSArIDFdID0gdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Z1bGZpbGwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDExNzUwNjA0OCkgPj4+IDE2KSkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcykge1xuICAgICAgICB2YXIgZXJyID0gbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKTtcbiAgICAgICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZShlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0KGVycik7XG4gICAgfVxuICAgIHRoaXMuX3NldEZ1bGZpbGxlZCgpO1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7XG5cbiAgICBpZiAoKGJpdEZpZWxkICYgNjU1MzUpID4gMCkge1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDEzNDIxNzcyOCkgIT09IDApKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXN5bmMuc2V0dGxlUHJvbWlzZXModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMTE3NTA2MDQ4KSA+Pj4gMTYpKSByZXR1cm47XG4gICAgdGhpcy5fc2V0UmVqZWN0ZWQoKTtcbiAgICB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwID0gcmVhc29uO1xuXG4gICAgaWYgKHRoaXMuX2lzRmluYWwoKSkge1xuICAgICAgICByZXR1cm4gYXN5bmMuZmF0YWxFcnJvcihyZWFzb24sIHV0aWwuaXNOb2RlKTtcbiAgICB9XG5cbiAgICBpZiAoKGJpdEZpZWxkICYgNjU1MzUpID4gMCkge1xuICAgICAgICBhc3luYy5zZXR0bGVQcm9taXNlcyh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9lbnN1cmVQb3NzaWJsZVJlamVjdGlvbkhhbmRsZWQoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbFByb21pc2VzID0gZnVuY3Rpb24gKGxlbiwgdmFsdWUpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyQXQoaSk7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZUF0KGkpO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KGkpO1xuICAgICAgICB0aGlzLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXgoaSk7XG4gICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0UHJvbWlzZXMgPSBmdW5jdGlvbiAobGVuLCByZWFzb24pIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5fcmVqZWN0aW9uSGFuZGxlckF0KGkpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2VBdChpKTtcbiAgICAgICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdChpKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4KGkpO1xuICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCByZWFzb24pO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICB2YXIgbGVuID0gKGJpdEZpZWxkICYgNjU1MzUpO1xuXG4gICAgaWYgKGxlbiA+IDApIHtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAxNjg0Mjc1MikgIT09IDApKSB7XG4gICAgICAgICAgICB2YXIgcmVhc29uID0gdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UwKHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwLCByZWFzb24sIGJpdEZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdFByb21pc2VzKGxlbiwgcmVhc29uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZTAodGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCwgdmFsdWUsIGJpdEZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGZpbGxQcm9taXNlcyhsZW4sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgfVxuICAgIHRoaXMuX2NsZWFyQ2FuY2VsbGF0aW9uRGF0YSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBkZWZlclJlc29sdmUodikge3RoaXMucHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHYpO31cbmZ1bmN0aW9uIGRlZmVyUmVqZWN0KHYpIHt0aGlzLnByb21pc2UuX3JlamVjdENhbGxiYWNrKHYsIGZhbHNlKTt9XG5cblByb21pc2UuZGVmZXIgPSBQcm9taXNlLnBlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiUHJvbWlzZS5kZWZlclwiLCBcIm5ldyBQcm9taXNlXCIpO1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgIHJlc29sdmU6IGRlZmVyUmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0OiBkZWZlclJlamVjdFxuICAgIH07XG59O1xuXG51dGlsLm5vdEVudW1lcmFibGVQcm9wKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgIFwiX21ha2VTZWxmUmVzb2x1dGlvbkVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgIG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKTtcblxuX2RlcmVxXyhcIi4vbWV0aG9kXCIpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24sXG4gICAgZGVidWcpO1xuX2RlcmVxXyhcIi4vYmluZFwiKShQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgZGVidWcpO1xuX2RlcmVxXyhcIi4vY2FuY2VsXCIpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9kaXJlY3RfcmVzb2x2ZVwiKShQcm9taXNlKTtcbl9kZXJlcV8oXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIikoUHJvbWlzZSk7XG5fZGVyZXFfKFwiLi9qb2luXCIpKFxuICAgIFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGFzeW5jLCBnZXREb21haW4pO1xuUHJvbWlzZS5Qcm9taXNlID0gUHJvbWlzZTtcblByb21pc2UudmVyc2lvbiA9IFwiMy40LjdcIjtcbl9kZXJlcV8oJy4vbWFwLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2NhbGxfZ2V0LmpzJykoUHJvbWlzZSk7XG5fZGVyZXFfKCcuL3VzaW5nLmpzJykoUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBjcmVhdGVDb250ZXh0LCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi90aW1lcnMuanMnKShQcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9nZW5lcmF0b3JzLmpzJykoUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgUHJveHlhYmxlLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL25vZGVpZnkuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vcHJvbWlzaWZ5LmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9wcm9wcy5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vcmFjZS5qcycpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yZWR1Y2UuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vc2V0dGxlLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3NvbWUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL2ZpbHRlci5qcycpKFByb21pc2UsIElOVEVSTkFMKTtcbl9kZXJlcV8oJy4vZWFjaC5qcycpKFByb21pc2UsIElOVEVSTkFMKTtcbl9kZXJlcV8oJy4vYW55LmpzJykoUHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgdXRpbC50b0Zhc3RQcm9wZXJ0aWVzKFByb21pc2UucHJvdG90eXBlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZ1bmN0aW9uIGZpbGxUeXBlcyh2YWx1ZSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgdmFyIHAgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9yZWplY3Rpb25IYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcHJvbWlzZTAgPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlY2VpdmVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAvLyBDb21wbGV0ZSBzbGFjayB0cmFja2luZywgb3B0IG91dCBvZiBmaWVsZC10eXBlIHRyYWNraW5nIGFuZCAgICAgICAgICAgXG4gICAgLy8gc3RhYmlsaXplIG1hcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YTogMX0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2I6IDJ9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHtjOiAzfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcygxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoZnVuY3Rpb24oKXt9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHVuZGVmaW5lZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmYWxzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMobmV3IFByb21pc2UoSU5URVJOQUwpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZGVidWcuc2V0Qm91bmRzKEFzeW5jLmZpcnN0TGluZUVycm9yLCB1dGlsLmxhc3RMaW5lRXJyb3IpOyAgICAgICAgICAgICAgIFxuICAgIHJldHVybiBQcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxufTtcblxufSx7XCIuL2FueS5qc1wiOjEsXCIuL2FzeW5jXCI6MixcIi4vYmluZFwiOjMsXCIuL2NhbGxfZ2V0LmpzXCI6NSxcIi4vY2FuY2VsXCI6NixcIi4vY2F0Y2hfZmlsdGVyXCI6NyxcIi4vY29udGV4dFwiOjgsXCIuL2RlYnVnZ2FiaWxpdHlcIjo5LFwiLi9kaXJlY3RfcmVzb2x2ZVwiOjEwLFwiLi9lYWNoLmpzXCI6MTEsXCIuL2Vycm9yc1wiOjEyLFwiLi9lczVcIjoxMyxcIi4vZmlsdGVyLmpzXCI6MTQsXCIuL2ZpbmFsbHlcIjoxNSxcIi4vZ2VuZXJhdG9ycy5qc1wiOjE2LFwiLi9qb2luXCI6MTcsXCIuL21hcC5qc1wiOjE4LFwiLi9tZXRob2RcIjoxOSxcIi4vbm9kZWJhY2tcIjoyMCxcIi4vbm9kZWlmeS5qc1wiOjIxLFwiLi9wcm9taXNlX2FycmF5XCI6MjMsXCIuL3Byb21pc2lmeS5qc1wiOjI0LFwiLi9wcm9wcy5qc1wiOjI1LFwiLi9yYWNlLmpzXCI6MjcsXCIuL3JlZHVjZS5qc1wiOjI4LFwiLi9zZXR0bGUuanNcIjozMCxcIi4vc29tZS5qc1wiOjMxLFwiLi9zeW5jaHJvbm91c19pbnNwZWN0aW9uXCI6MzIsXCIuL3RoZW5hYmxlc1wiOjMzLFwiLi90aW1lcnMuanNcIjozNCxcIi4vdXNpbmcuanNcIjozNSxcIi4vdXRpbFwiOjM2fV0sMjM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgIGFwaVJlamVjdGlvbiwgUHJveHlhYmxlKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgaXNBcnJheSA9IHV0aWwuaXNBcnJheTtcblxuZnVuY3Rpb24gdG9SZXNvbHV0aW9uVmFsdWUodmFsKSB7XG4gICAgc3dpdGNoKHZhbCkge1xuICAgIGNhc2UgLTI6IHJldHVybiBbXTtcbiAgICBjYXNlIC0zOiByZXR1cm4ge307XG4gICAgfVxufVxuXG5mdW5jdGlvbiBQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UuX3Byb3BhZ2F0ZUZyb20odmFsdWVzLCAzKTtcbiAgICB9XG4gICAgcHJvbWlzZS5fc2V0T25DYW5jZWwodGhpcyk7XG4gICAgdGhpcy5fdmFsdWVzID0gdmFsdWVzO1xuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgdGhpcy5fdG90YWxSZXNvbHZlZCA9IDA7XG4gICAgdGhpcy5faW5pdCh1bmRlZmluZWQsIC0yKTtcbn1cbnV0aWwuaW5oZXJpdHMoUHJvbWlzZUFycmF5LCBQcm94eWFibGUpO1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5wcm9taXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQoXywgcmVzb2x2ZVZhbHVlSWZFbXB0eSkge1xuICAgIHZhciB2YWx1ZXMgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXMuX3ZhbHVlcywgdGhpcy5fcHJvbWlzZSk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFsdWVzID0gdmFsdWVzLl90YXJnZXQoKTtcbiAgICAgICAgdmFyIGJpdEZpZWxkID0gdmFsdWVzLl9iaXRGaWVsZDtcbiAgICAgICAgO1xuICAgICAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuX3RoZW4oXG4gICAgICAgICAgICAgICAgaW5pdCxcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZVZhbHVlSWZFbXB0eVxuICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3ZhbHVlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWplY3QodmFsdWVzLl9yZWFzb24oKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFsdWVzID0gdXRpbC5hc0FycmF5KHZhbHVlcyk7XG4gICAgaWYgKHZhbHVlcyA9PT0gbnVsbCkge1xuICAgICAgICB2YXIgZXJyID0gYXBpUmVqZWN0aW9uKFxuICAgICAgICAgICAgXCJleHBlY3RpbmcgYW4gYXJyYXkgb3IgYW4gaXRlcmFibGUgb2JqZWN0IGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKHZhbHVlcykpLnJlYXNvbigpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9yZWplY3RDYWxsYmFjayhlcnIsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmIChyZXNvbHZlVmFsdWVJZkVtcHR5ID09PSAtNSkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUVtcHR5QXJyYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUodG9SZXNvbHV0aW9uVmFsdWUocmVzb2x2ZVZhbHVlSWZFbXB0eSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faXRlcmF0ZSh2YWx1ZXMpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faXRlcmF0ZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICAgIHZhciBsZW4gPSB0aGlzLmdldEFjdHVhbExlbmd0aCh2YWx1ZXMubGVuZ3RoKTtcbiAgICB0aGlzLl9sZW5ndGggPSBsZW47XG4gICAgdGhpcy5fdmFsdWVzID0gdGhpcy5zaG91bGRDb3B5VmFsdWVzKCkgPyBuZXcgQXJyYXkobGVuKSA6IHRoaXMuX3ZhbHVlcztcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5fcHJvbWlzZTtcbiAgICB2YXIgaXNSZXNvbHZlZCA9IGZhbHNlO1xuICAgIHZhciBiaXRGaWVsZCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZXNbaV0sIHJlc3VsdCk7XG5cbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgICAgICBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiaXRGaWVsZCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNSZXNvbHZlZCkge1xuICAgICAgICAgICAgaWYgKGJpdEZpZWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGJpdEZpZWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3Byb3h5KHRoaXMsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlc1tpXSA9IG1heWJlUHJvbWlzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UuX3ZhbHVlKCksIGkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlUmVqZWN0ZWQobWF5YmVQcm9taXNlLl9yZWFzb24oKSwgaSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlQ2FuY2VsbGVkKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VGdWxmaWxsZWQobWF5YmVQcm9taXNlLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzUmVzb2x2ZWQpIHJlc3VsdC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pc1Jlc29sdmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZXMgPT09IG51bGw7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9mdWxmaWxsKHZhbHVlKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2NhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkgfHwgIXRoaXMuX3Byb21pc2UuX2lzQ2FuY2VsbGFibGUoKSkgcmV0dXJuO1xuICAgIHRoaXMuX3ZhbHVlcyA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fY2FuY2VsKCk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZWFzb24sIGZhbHNlKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fY2FuY2VsKCk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdG90YWxSZXNvbHZlZCsrO1xuICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdGhpcy5fY2FuY2VsKCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFsdWVzLmNhbmNlbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWVzW2ldIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuc2hvdWxkQ29weVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuZ2V0QWN0dWFsTGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHJldHVybiBsZW47XG59O1xuXG5yZXR1cm4gUHJvbWlzZUFycmF5O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIFRISVMgPSB7fTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBub2RlYmFja0ZvclByb21pc2UgPSBfZGVyZXFfKFwiLi9ub2RlYmFja1wiKTtcbnZhciB3aXRoQXBwZW5kZWQgPSB1dGlsLndpdGhBcHBlbmRlZDtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciBUeXBlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xudmFyIGRlZmF1bHRTdWZmaXggPSBcIkFzeW5jXCI7XG52YXIgZGVmYXVsdFByb21pc2lmaWVkID0ge19faXNQcm9taXNpZmllZF9fOiB0cnVlfTtcbnZhciBub0NvcHlQcm9wcyA9IFtcbiAgICBcImFyaXR5XCIsICAgIFwibGVuZ3RoXCIsXG4gICAgXCJuYW1lXCIsXG4gICAgXCJhcmd1bWVudHNcIixcbiAgICBcImNhbGxlclwiLFxuICAgIFwiY2FsbGVlXCIsXG4gICAgXCJwcm90b3R5cGVcIixcbiAgICBcIl9faXNQcm9taXNpZmllZF9fXCJcbl07XG52YXIgbm9Db3B5UHJvcHNQYXR0ZXJuID0gbmV3IFJlZ0V4cChcIl4oPzpcIiArIG5vQ29weVByb3BzLmpvaW4oXCJ8XCIpICsgXCIpJFwiKTtcblxudmFyIGRlZmF1bHRGaWx0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHV0aWwuaXNJZGVudGlmaWVyKG5hbWUpICYmXG4gICAgICAgIG5hbWUuY2hhckF0KDApICE9PSBcIl9cIiAmJlxuICAgICAgICBuYW1lICE9PSBcImNvbnN0cnVjdG9yXCI7XG59O1xuXG5mdW5jdGlvbiBwcm9wc0ZpbHRlcihrZXkpIHtcbiAgICByZXR1cm4gIW5vQ29weVByb3BzUGF0dGVybi50ZXN0KGtleSk7XG59XG5cbmZ1bmN0aW9uIGlzUHJvbWlzaWZpZWQoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZm4uX19pc1Byb21pc2lmaWVkX18gPT09IHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc1Byb21pc2lmaWVkKG9iaiwga2V5LCBzdWZmaXgpIHtcbiAgICB2YXIgdmFsID0gdXRpbC5nZXREYXRhUHJvcGVydHlPckRlZmF1bHQob2JqLCBrZXkgKyBzdWZmaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRQcm9taXNpZmllZCk7XG4gICAgcmV0dXJuIHZhbCA/IGlzUHJvbWlzaWZpZWQodmFsKSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gY2hlY2tWYWxpZChyZXQsIHN1ZmZpeCwgc3VmZml4UmVnZXhwKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgdmFyIGtleSA9IHJldFtpXTtcbiAgICAgICAgaWYgKHN1ZmZpeFJlZ2V4cC50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgIHZhciBrZXlXaXRob3V0QXN5bmNTdWZmaXggPSBrZXkucmVwbGFjZShzdWZmaXhSZWdleHAsIFwiXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByZXQubGVuZ3RoOyBqICs9IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV0W2pdID09PSBrZXlXaXRob3V0QXN5bmNTdWZmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBwcm9taXNpZnkgYW4gQVBJIHRoYXQgaGFzIG5vcm1hbCBtZXRob2RzIHdpdGggJyVzJy1zdWZmaXhcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiJXNcIiwgc3VmZml4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwcm9taXNpZmlhYmxlTWV0aG9kcyhvYmosIHN1ZmZpeCwgc3VmZml4UmVnZXhwLCBmaWx0ZXIpIHtcbiAgICB2YXIga2V5cyA9IHV0aWwuaW5oZXJpdGVkRGF0YUtleXMob2JqKTtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgdmFyIHBhc3Nlc0RlZmF1bHRGaWx0ZXIgPSBmaWx0ZXIgPT09IGRlZmF1bHRGaWx0ZXJcbiAgICAgICAgICAgID8gdHJ1ZSA6IGRlZmF1bHRGaWx0ZXIoa2V5LCB2YWx1ZSwgb2JqKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICAhaXNQcm9taXNpZmllZCh2YWx1ZSkgJiZcbiAgICAgICAgICAgICFoYXNQcm9taXNpZmllZChvYmosIGtleSwgc3VmZml4KSAmJlxuICAgICAgICAgICAgZmlsdGVyKGtleSwgdmFsdWUsIG9iaiwgcGFzc2VzRGVmYXVsdEZpbHRlcikpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrVmFsaWQocmV0LCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCk7XG4gICAgcmV0dXJuIHJldDtcbn1cblxudmFyIGVzY2FwZUlkZW50UmVnZXggPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbJF0pLywgXCJcXFxcJFwiKTtcbn07XG5cbnZhciBtYWtlTm9kZVByb21pc2lmaWVkRXZhbDtcbmlmICghdHJ1ZSkge1xudmFyIHN3aXRjaENhc2VBcmd1bWVudE9yZGVyID0gZnVuY3Rpb24obGlrZWx5QXJndW1lbnRDb3VudCkge1xuICAgIHZhciByZXQgPSBbbGlrZWx5QXJndW1lbnRDb3VudF07XG4gICAgdmFyIG1pbiA9IE1hdGgubWF4KDAsIGxpa2VseUFyZ3VtZW50Q291bnQgLSAxIC0gMyk7XG4gICAgZm9yKHZhciBpID0gbGlrZWx5QXJndW1lbnRDb3VudCAtIDE7IGkgPj0gbWluOyAtLWkpIHtcbiAgICAgICAgcmV0LnB1c2goaSk7XG4gICAgfVxuICAgIGZvcih2YXIgaSA9IGxpa2VseUFyZ3VtZW50Q291bnQgKyAxOyBpIDw9IDM7ICsraSkge1xuICAgICAgICByZXQucHVzaChpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbnZhciBhcmd1bWVudFNlcXVlbmNlID0gZnVuY3Rpb24oYXJndW1lbnRDb3VudCkge1xuICAgIHJldHVybiB1dGlsLmZpbGxlZFJhbmdlKGFyZ3VtZW50Q291bnQsIFwiX2FyZ1wiLCBcIlwiKTtcbn07XG5cbnZhciBwYXJhbWV0ZXJEZWNsYXJhdGlvbiA9IGZ1bmN0aW9uKHBhcmFtZXRlckNvdW50KSB7XG4gICAgcmV0dXJuIHV0aWwuZmlsbGVkUmFuZ2UoXG4gICAgICAgIE1hdGgubWF4KHBhcmFtZXRlckNvdW50LCAzKSwgXCJfYXJnXCIsIFwiXCIpO1xufTtcblxudmFyIHBhcmFtZXRlckNvdW50ID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oZm4ubGVuZ3RoLCAxMDIzICsgMSksIDApO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbn07XG5cbm1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsID1cbmZ1bmN0aW9uKGNhbGxiYWNrLCByZWNlaXZlciwgb3JpZ2luYWxOYW1lLCBmbiwgXywgbXVsdGlBcmdzKSB7XG4gICAgdmFyIG5ld1BhcmFtZXRlckNvdW50ID0gTWF0aC5tYXgoMCwgcGFyYW1ldGVyQ291bnQoZm4pIC0gMSk7XG4gICAgdmFyIGFyZ3VtZW50T3JkZXIgPSBzd2l0Y2hDYXNlQXJndW1lbnRPcmRlcihuZXdQYXJhbWV0ZXJDb3VudCk7XG4gICAgdmFyIHNob3VsZFByb3h5VGhpcyA9IHR5cGVvZiBjYWxsYmFjayA9PT0gXCJzdHJpbmdcIiB8fCByZWNlaXZlciA9PT0gVEhJUztcblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQ2FsbEZvckFyZ3VtZW50Q291bnQoY291bnQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudFNlcXVlbmNlKGNvdW50KS5qb2luKFwiLCBcIik7XG4gICAgICAgIHZhciBjb21tYSA9IGNvdW50ID4gMCA/IFwiLCBcIiA6IFwiXCI7XG4gICAgICAgIHZhciByZXQ7XG4gICAgICAgIGlmIChzaG91bGRQcm94eVRoaXMpIHtcbiAgICAgICAgICAgIHJldCA9IFwicmV0ID0gY2FsbGJhY2suY2FsbCh0aGlzLCB7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldCA9IHJlY2VpdmVyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IFwicmV0ID0gY2FsbGJhY2soe3thcmdzfX0sIG5vZGViYWNrKTsgYnJlYWs7XFxuXCJcbiAgICAgICAgICAgICAgICA6IFwicmV0ID0gY2FsbGJhY2suY2FsbChyZWNlaXZlciwge3thcmdzfX0sIG5vZGViYWNrKTsgYnJlYWs7XFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldC5yZXBsYWNlKFwie3thcmdzfX1cIiwgYXJncykucmVwbGFjZShcIiwgXCIsIGNvbW1hKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUFyZ3VtZW50U3dpdGNoQ2FzZSgpIHtcbiAgICAgICAgdmFyIHJldCA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRPcmRlci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcmV0ICs9IFwiY2FzZSBcIiArIGFyZ3VtZW50T3JkZXJbaV0gK1wiOlwiICtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUNhbGxGb3JBcmd1bWVudENvdW50KGFyZ3VtZW50T3JkZXJbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0ICs9IFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShsZW4gKyAxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgaSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBhcmdzW2ldID0gbm9kZWJhY2s7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbQ29kZUZvckNhbGxdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoXCJbQ29kZUZvckNhbGxdXCIsIChzaG91bGRQcm94eVRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInJldCA9IGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xcblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJyZXQgPSBjYWxsYmFjay5hcHBseShyZWNlaXZlciwgYXJncyk7XFxuXCIpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICB2YXIgZ2V0RnVuY3Rpb25Db2RlID0gdHlwZW9mIGNhbGxiYWNrID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKFwidGhpcyAhPSBudWxsID8gdGhpc1snXCIrY2FsbGJhY2srXCInXSA6IGZuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJmblwiO1xuICAgIHZhciBib2R5ID0gXCIndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgdmFyIHJldCA9IGZ1bmN0aW9uIChQYXJhbWV0ZXJzKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBub2RlYmFjayA9IG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBcIiArIG11bHRpQXJncyArIFwiKTsgICBcXG5cXFxuICAgICAgICAgICAgdmFyIHJldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdHJ5Q2F0Y2goW0dldEZ1bmN0aW9uQ29kZV0pOyAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgc3dpdGNoKGxlbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIFtDb2RlRm9yU3dpdGNoQ2FzZV0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKG1heWJlV3JhcEFzRXJyb3IocmV0LmUpLCB0cnVlLCB0cnVlKTtcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgaWYgKCFwcm9taXNlLl9pc0ZhdGVTZWFsZWQoKSkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7ICAgICBcXG5cXFxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcChyZXQsICdfX2lzUHJvbWlzaWZpZWRfXycsIHRydWUpOyAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXR1cm4gcmV0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgIFwiLnJlcGxhY2UoXCJbQ29kZUZvclN3aXRjaENhc2VdXCIsIGdlbmVyYXRlQXJndW1lbnRTd2l0Y2hDYXNlKCkpXG4gICAgICAgIC5yZXBsYWNlKFwiW0dldEZ1bmN0aW9uQ29kZV1cIiwgZ2V0RnVuY3Rpb25Db2RlKTtcbiAgICBib2R5ID0gYm9keS5yZXBsYWNlKFwiUGFyYW1ldGVyc1wiLCBwYXJhbWV0ZXJEZWNsYXJhdGlvbihuZXdQYXJhbWV0ZXJDb3VudCkpO1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJQcm9taXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJlY2VpdmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpdGhBcHBlbmRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXliZVdyYXBBc0Vycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vZGViYWNrRm9yUHJvbWlzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0cnlDYXRjaFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvck9ialwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJub3RFbnVtZXJhYmxlUHJvcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJTlRFUk5BTFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keSkoXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIGZuLFxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlcixcbiAgICAgICAgICAgICAgICAgICAgd2l0aEFwcGVuZGVkLFxuICAgICAgICAgICAgICAgICAgICBtYXliZVdyYXBBc0Vycm9yLFxuICAgICAgICAgICAgICAgICAgICBub2RlYmFja0ZvclByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIHV0aWwudHJ5Q2F0Y2gsXG4gICAgICAgICAgICAgICAgICAgIHV0aWwuZXJyb3JPYmosXG4gICAgICAgICAgICAgICAgICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AsXG4gICAgICAgICAgICAgICAgICAgIElOVEVSTkFMKTtcbn07XG59XG5cbmZ1bmN0aW9uIG1ha2VOb2RlUHJvbWlzaWZpZWRDbG9zdXJlKGNhbGxiYWNrLCByZWNlaXZlciwgXywgZm4sIF9fLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgZGVmYXVsdFRoaXMgPSAoZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXM7fSkoKTtcbiAgICB2YXIgbWV0aG9kID0gY2FsbGJhY2s7XG4gICAgaWYgKHR5cGVvZiBtZXRob2QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvbWlzaWZpZWQoKSB7XG4gICAgICAgIHZhciBfcmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgaWYgKHJlY2VpdmVyID09PSBUSElTKSBfcmVjZWl2ZXIgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgdmFyIGNiID0gdHlwZW9mIG1ldGhvZCA9PT0gXCJzdHJpbmdcIiAmJiB0aGlzICE9PSBkZWZhdWx0VGhpc1xuICAgICAgICAgICAgPyB0aGlzW21ldGhvZF0gOiBjYWxsYmFjaztcbiAgICAgICAgdmFyIGZuID0gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UsIG11bHRpQXJncyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjYi5hcHBseShfcmVjZWl2ZXIsIHdpdGhBcHBlbmRlZChhcmd1bWVudHMsIGZuKSk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sobWF5YmVXcmFwQXNFcnJvcihlKSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcm9taXNlLl9pc0ZhdGVTZWFsZWQoKSkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKHByb21pc2lmaWVkLCBcIl9faXNQcm9taXNpZmllZF9fXCIsIHRydWUpO1xuICAgIHJldHVybiBwcm9taXNpZmllZDtcbn1cblxudmFyIG1ha2VOb2RlUHJvbWlzaWZpZWQgPSBjYW5FdmFsdWF0ZVxuICAgID8gbWFrZU5vZGVQcm9taXNpZmllZEV2YWxcbiAgICA6IG1ha2VOb2RlUHJvbWlzaWZpZWRDbG9zdXJlO1xuXG5mdW5jdGlvbiBwcm9taXNpZnlBbGwob2JqLCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncykge1xuICAgIHZhciBzdWZmaXhSZWdleHAgPSBuZXcgUmVnRXhwKGVzY2FwZUlkZW50UmVnZXgoc3VmZml4KSArIFwiJFwiKTtcbiAgICB2YXIgbWV0aG9kcyA9XG4gICAgICAgIHByb21pc2lmaWFibGVNZXRob2RzKG9iaiwgc3VmZml4LCBzdWZmaXhSZWdleHAsIGZpbHRlcik7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbWV0aG9kcy5sZW5ndGg7IGkgPCBsZW47IGkrPSAyKSB7XG4gICAgICAgIHZhciBrZXkgPSBtZXRob2RzW2ldO1xuICAgICAgICB2YXIgZm4gPSBtZXRob2RzW2krMV07XG4gICAgICAgIHZhciBwcm9taXNpZmllZEtleSA9IGtleSArIHN1ZmZpeDtcbiAgICAgICAgaWYgKHByb21pc2lmaWVyID09PSBtYWtlTm9kZVByb21pc2lmaWVkKSB7XG4gICAgICAgICAgICBvYmpbcHJvbWlzaWZpZWRLZXldID1cbiAgICAgICAgICAgICAgICBtYWtlTm9kZVByb21pc2lmaWVkKGtleSwgVEhJUywga2V5LCBmbiwgc3VmZml4LCBtdWx0aUFyZ3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb21pc2lmaWVkID0gcHJvbWlzaWZpZXIoZm4sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlTm9kZVByb21pc2lmaWVkKGtleSwgVEhJUywga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuLCBzdWZmaXgsIG11bHRpQXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AocHJvbWlzaWZpZWQsIFwiX19pc1Byb21pc2lmaWVkX19cIiwgdHJ1ZSk7XG4gICAgICAgICAgICBvYmpbcHJvbWlzaWZpZWRLZXldID0gcHJvbWlzaWZpZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXRpbC50b0Zhc3RQcm9wZXJ0aWVzKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gcHJvbWlzaWZ5KGNhbGxiYWNrLCByZWNlaXZlciwgbXVsdGlBcmdzKSB7XG4gICAgcmV0dXJuIG1ha2VOb2RlUHJvbWlzaWZpZWQoY2FsbGJhY2ssIHJlY2VpdmVyLCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLCBudWxsLCBtdWx0aUFyZ3MpO1xufVxuXG5Qcm9taXNlLnByb21pc2lmeSA9IGZ1bmN0aW9uIChmbiwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgaWYgKGlzUHJvbWlzaWZpZWQoZm4pKSB7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gICAgb3B0aW9ucyA9IE9iamVjdChvcHRpb25zKTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBvcHRpb25zLmNvbnRleHQgPT09IHVuZGVmaW5lZCA/IFRISVMgOiBvcHRpb25zLmNvbnRleHQ7XG4gICAgdmFyIG11bHRpQXJncyA9ICEhb3B0aW9ucy5tdWx0aUFyZ3M7XG4gICAgdmFyIHJldCA9IHByb21pc2lmeShmbiwgcmVjZWl2ZXIsIG11bHRpQXJncyk7XG4gICAgdXRpbC5jb3B5RGVzY3JpcHRvcnMoZm4sIHJldCwgcHJvcHNGaWx0ZXIpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb21pc2lmeUFsbCA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInRoZSB0YXJnZXQgb2YgcHJvbWlzaWZ5QWxsIG11c3QgYmUgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBvcHRpb25zID0gT2JqZWN0KG9wdGlvbnMpO1xuICAgIHZhciBtdWx0aUFyZ3MgPSAhIW9wdGlvbnMubXVsdGlBcmdzO1xuICAgIHZhciBzdWZmaXggPSBvcHRpb25zLnN1ZmZpeDtcbiAgICBpZiAodHlwZW9mIHN1ZmZpeCAhPT0gXCJzdHJpbmdcIikgc3VmZml4ID0gZGVmYXVsdFN1ZmZpeDtcbiAgICB2YXIgZmlsdGVyID0gb3B0aW9ucy5maWx0ZXI7XG4gICAgaWYgKHR5cGVvZiBmaWx0ZXIgIT09IFwiZnVuY3Rpb25cIikgZmlsdGVyID0gZGVmYXVsdEZpbHRlcjtcbiAgICB2YXIgcHJvbWlzaWZpZXIgPSBvcHRpb25zLnByb21pc2lmaWVyO1xuICAgIGlmICh0eXBlb2YgcHJvbWlzaWZpZXIgIT09IFwiZnVuY3Rpb25cIikgcHJvbWlzaWZpZXIgPSBtYWtlTm9kZVByb21pc2lmaWVkO1xuXG4gICAgaWYgKCF1dGlsLmlzSWRlbnRpZmllcihzdWZmaXgpKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwic3VmZml4IG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG5cbiAgICB2YXIga2V5cyA9IHV0aWwuaW5oZXJpdGVkRGF0YUtleXModGFyZ2V0KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGFyZ2V0W2tleXNbaV1dO1xuICAgICAgICBpZiAoa2V5c1tpXSAhPT0gXCJjb25zdHJ1Y3RvclwiICYmXG4gICAgICAgICAgICB1dGlsLmlzQ2xhc3ModmFsdWUpKSB7XG4gICAgICAgICAgICBwcm9taXNpZnlBbGwodmFsdWUucHJvdG90eXBlLCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsXG4gICAgICAgICAgICAgICAgbXVsdGlBcmdzKTtcbiAgICAgICAgICAgIHByb21pc2lmeUFsbCh2YWx1ZSwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2lmeUFsbCh0YXJnZXQsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKTtcbn07XG59O1xuXG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vbm9kZWJhY2tcIjoyMCxcIi4vdXRpbFwiOjM2fV0sMjU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFxuICAgIFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgaXNPYmplY3QgPSB1dGlsLmlzT2JqZWN0O1xudmFyIGVzNSA9IF9kZXJlcV8oXCIuL2VzNVwiKTtcbnZhciBFczZNYXA7XG5pZiAodHlwZW9mIE1hcCA9PT0gXCJmdW5jdGlvblwiKSBFczZNYXAgPSBNYXA7XG5cbnZhciBtYXBUb0VudHJpZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgc2l6ZSA9IDA7XG5cbiAgICBmdW5jdGlvbiBleHRyYWN0RW50cnkodmFsdWUsIGtleSkge1xuICAgICAgICB0aGlzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICB0aGlzW2luZGV4ICsgc2l6ZV0gPSBrZXk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1hcFRvRW50cmllcyhtYXApIHtcbiAgICAgICAgc2l6ZSA9IG1hcC5zaXplO1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIHZhciByZXQgPSBuZXcgQXJyYXkobWFwLnNpemUgKiAyKTtcbiAgICAgICAgbWFwLmZvckVhY2goZXh0cmFjdEVudHJ5LCByZXQpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG59KSgpO1xuXG52YXIgZW50cmllc1RvTWFwID0gZnVuY3Rpb24oZW50cmllcykge1xuICAgIHZhciByZXQgPSBuZXcgRXM2TWFwKCk7XG4gICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoIC8gMiB8IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0gZW50cmllc1tsZW5ndGggKyBpXTtcbiAgICAgICAgdmFyIHZhbHVlID0gZW50cmllc1tpXTtcbiAgICAgICAgcmV0LnNldChrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIFByb3BlcnRpZXNQcm9taXNlQXJyYXkob2JqKSB7XG4gICAgdmFyIGlzTWFwID0gZmFsc2U7XG4gICAgdmFyIGVudHJpZXM7XG4gICAgaWYgKEVzNk1hcCAhPT0gdW5kZWZpbmVkICYmIG9iaiBpbnN0YW5jZW9mIEVzNk1hcCkge1xuICAgICAgICBlbnRyaWVzID0gbWFwVG9FbnRyaWVzKG9iaik7XG4gICAgICAgIGlzTWFwID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIga2V5cyA9IGVzNS5rZXlzKG9iaik7XG4gICAgICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZW50cmllcyA9IG5ldyBBcnJheShsZW4gKiAyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBlbnRyaWVzW2ldID0gb2JqW2tleV07XG4gICAgICAgICAgICBlbnRyaWVzW2kgKyBsZW5dID0ga2V5O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29uc3RydWN0b3IkKGVudHJpZXMpO1xuICAgIHRoaXMuX2lzTWFwID0gaXNNYXA7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtMyk7XG59XG51dGlsLmluaGVyaXRzKFByb3BlcnRpZXNQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbDtcbiAgICAgICAgaWYgKHRoaXMuX2lzTWFwKSB7XG4gICAgICAgICAgICB2YWwgPSBlbnRyaWVzVG9NYXAodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbCA9IHt9O1xuICAgICAgICAgICAgdmFyIGtleU9mZnNldCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5sZW5ndGgoKTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFsW3RoaXMuX3ZhbHVlc1tpICsga2V5T2Zmc2V0XV0gPSB0aGlzLl92YWx1ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuc2hvdWxkQ29weVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgcmV0dXJuIGxlbiA+PiAxO1xufTtcblxuZnVuY3Rpb24gcHJvcHMocHJvbWlzZXMpIHtcbiAgICB2YXIgcmV0O1xuICAgIHZhciBjYXN0VmFsdWUgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHByb21pc2VzKTtcblxuICAgIGlmICghaXNPYmplY3QoY2FzdFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiY2Fubm90IGF3YWl0IHByb3BlcnRpZXMgb2YgYSBub24tb2JqZWN0XFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9IGVsc2UgaWYgKGNhc3RWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0ID0gY2FzdFZhbHVlLl90aGVuKFxuICAgICAgICAgICAgUHJvbWlzZS5wcm9wcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBuZXcgUHJvcGVydGllc1Byb21pc2VBcnJheShjYXN0VmFsdWUpLnByb21pc2UoKTtcbiAgICB9XG5cbiAgICBpZiAoY2FzdFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20oY2FzdFZhbHVlLCAyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUucHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb3BzKHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm9wcyA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBwcm9wcyhwcm9taXNlcyk7XG59O1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGFycmF5TW92ZShzcmMsIHNyY0luZGV4LCBkc3QsIGRzdEluZGV4LCBsZW4pIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgIGRzdFtqICsgZHN0SW5kZXhdID0gc3JjW2ogKyBzcmNJbmRleF07XG4gICAgICAgIHNyY1tqICsgc3JjSW5kZXhdID0gdm9pZCAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUXVldWUoY2FwYWNpdHkpIHtcbiAgICB0aGlzLl9jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgdGhpcy5fZnJvbnQgPSAwO1xufVxuXG5RdWV1ZS5wcm90b3R5cGUuX3dpbGxCZU92ZXJDYXBhY2l0eSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcGFjaXR5IDwgc2l6ZTtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fcHVzaE9uZSA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKTtcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KGxlbmd0aCArIDEpO1xuICAgIHZhciBpID0gKHRoaXMuX2Zyb250ICsgbGVuZ3RoKSAmICh0aGlzLl9jYXBhY2l0eSAtIDEpO1xuICAgIHRoaXNbaV0gPSBhcmc7XG4gICAgdGhpcy5fbGVuZ3RoID0gbGVuZ3RoICsgMTtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCkgKyAzO1xuICAgIGlmICh0aGlzLl93aWxsQmVPdmVyQ2FwYWNpdHkobGVuZ3RoKSkge1xuICAgICAgICB0aGlzLl9wdXNoT25lKGZuKTtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShyZWNlaXZlcik7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUoYXJnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaiA9IHRoaXMuX2Zyb250ICsgbGVuZ3RoIC0gMztcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KGxlbmd0aCk7XG4gICAgdmFyIHdyYXBNYXNrID0gdGhpcy5fY2FwYWNpdHkgLSAxO1xuICAgIHRoaXNbKGogKyAwKSAmIHdyYXBNYXNrXSA9IGZuO1xuICAgIHRoaXNbKGogKyAxKSAmIHdyYXBNYXNrXSA9IHJlY2VpdmVyO1xuICAgIHRoaXNbKGogKyAyKSAmIHdyYXBNYXNrXSA9IGFyZztcbiAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZyb250ID0gdGhpcy5fZnJvbnQsXG4gICAgICAgIHJldCA9IHRoaXNbZnJvbnRdO1xuXG4gICAgdGhpc1tmcm9udF0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZnJvbnQgPSAoZnJvbnQgKyAxKSAmICh0aGlzLl9jYXBhY2l0eSAtIDEpO1xuICAgIHRoaXMuX2xlbmd0aC0tO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX2NoZWNrQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgIGlmICh0aGlzLl9jYXBhY2l0eSA8IHNpemUpIHtcbiAgICAgICAgdGhpcy5fcmVzaXplVG8odGhpcy5fY2FwYWNpdHkgPDwgMSk7XG4gICAgfVxufTtcblxuUXVldWUucHJvdG90eXBlLl9yZXNpemVUbyA9IGZ1bmN0aW9uIChjYXBhY2l0eSkge1xuICAgIHZhciBvbGRDYXBhY2l0eSA9IHRoaXMuX2NhcGFjaXR5O1xuICAgIHRoaXMuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdmFyIGZyb250ID0gdGhpcy5fZnJvbnQ7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgICB2YXIgbW92ZUl0ZW1zQ291bnQgPSAoZnJvbnQgKyBsZW5ndGgpICYgKG9sZENhcGFjaXR5IC0gMSk7XG4gICAgYXJyYXlNb3ZlKHRoaXMsIDAsIHRoaXMsIG9sZENhcGFjaXR5LCBtb3ZlSXRlbXNDb3VudCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFF1ZXVlO1xuXG59LHt9XSwyNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oXG4gICAgUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuXG52YXIgcmFjZUxhdGVyID0gZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHJldHVybiByYWNlKGFycmF5LCBwcm9taXNlKTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIHJhY2UocHJvbWlzZXMsIHBhcmVudCkge1xuICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHByb21pc2VzKTtcblxuICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiByYWNlTGF0ZXIobWF5YmVQcm9taXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlcyA9IHV0aWwuYXNBcnJheShwcm9taXNlcyk7XG4gICAgICAgIGlmIChwcm9taXNlcyA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gYXJyYXkgb3IgYW4gaXRlcmFibGUgb2JqZWN0IGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKHByb21pc2VzKSk7XG4gICAgfVxuXG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICBpZiAocGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0Ll9wcm9wYWdhdGVGcm9tKHBhcmVudCwgMyk7XG4gICAgfVxuICAgIHZhciBmdWxmaWxsID0gcmV0Ll9mdWxmaWxsO1xuICAgIHZhciByZWplY3QgPSByZXQuX3JlamVjdDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcHJvbWlzZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHZhbCA9IHByb21pc2VzW2ldO1xuXG4gICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCAmJiAhKGkgaW4gcHJvbWlzZXMpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIFByb21pc2UuY2FzdCh2YWwpLl90aGVuKGZ1bGZpbGwsIHJlamVjdCwgdW5kZWZpbmVkLCByZXQsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gcmFjZShwcm9taXNlcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnJhY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJhY2UodGhpcywgdW5kZWZpbmVkKTtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zykge1xudmFyIGdldERvbWFpbiA9IFByb21pc2UuX2dldERvbWFpbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cbmZ1bmN0aW9uIFJlZHVjdGlvblByb21pc2VBcnJheShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJChwcm9taXNlcyk7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHRoaXMuX2ZuID0gZG9tYWluID09PSBudWxsID8gZm4gOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmbik7XG4gICAgaWYgKGluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGluaXRpYWxWYWx1ZSA9IFByb21pc2UucmVzb2x2ZShpbml0aWFsVmFsdWUpO1xuICAgICAgICBpbml0aWFsVmFsdWUuX2F0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLl9pbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlID0gbnVsbDtcbiAgICBpZihfZWFjaCA9PT0gSU5URVJOQUwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcyA9IEFycmF5KHRoaXMuX2xlbmd0aCk7XG4gICAgfSBlbHNlIGlmIChfZWFjaCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLl9wcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTUpO1xufVxudXRpbC5pbmhlcml0cyhSZWR1Y3Rpb25Qcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX2dvdEFjY3VtID0gZnVuY3Rpb24oYWNjdW0pIHtcbiAgICBpZiAodGhpcy5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkICYmIFxuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzICE9PSBudWxsICYmIFxuICAgICAgICBhY2N1bSAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcy5wdXNoKGFjY3VtKTtcbiAgICB9XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9lYWNoQ29tcGxldGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lYWNoVmFsdWVzO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge307XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmVFbXB0eUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyB0aGlzLl9lYWNoVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsVmFsdWUpO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3Byb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKHNlbmRlcikge1xuICAgIGlmIChzZW5kZXIgPT09IHRoaXMuX2luaXRpYWxWYWx1ZSkgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB0aGlzLl9yZXN1bHRDYW5jZWxsZWQkKCk7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDYW5jZWxsYWJsZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlLmNhbmNlbCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5pdGlhbFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9pbml0aWFsVmFsdWUuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faXRlcmF0ZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdmFyIHZhbHVlO1xuICAgIHZhciBpO1xuICAgIHZhciBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuX2luaXRpYWxWYWx1ZTtcbiAgICAgICAgaSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBQcm9taXNlLnJlc29sdmUodmFsdWVzWzBdKTtcbiAgICAgICAgaSA9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG5cbiAgICBpZiAoIXZhbHVlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0ge1xuICAgICAgICAgICAgICAgIGFjY3VtOiBudWxsLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgICAgICAgYXJyYXk6IHRoaXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl90aGVuKGdvdEFjY3VtLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3R4LCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICAuX3RoZW4odGhpcy5fZWFjaENvbXBsZXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgdmFsdWUuX3RoZW4oY29tcGxldGVkLCBjb21wbGV0ZWQsIHVuZGVmaW5lZCwgdmFsdWUsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gKGZuLCBpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gcmVkdWNlKHRoaXMsIGZuLCBpbml0aWFsVmFsdWUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5yZWR1Y2UgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgcmV0dXJuIHJlZHVjZShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xufTtcblxuZnVuY3Rpb24gY29tcGxldGVkKHZhbHVlT3JSZWFzb24sIGFycmF5KSB7XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICBhcnJheS5fcmVzb2x2ZSh2YWx1ZU9yUmVhc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJheS5fcmVqZWN0KHZhbHVlT3JSZWFzb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIGFycmF5ID0gbmV3IFJlZHVjdGlvblByb21pc2VBcnJheShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xuICAgIHJldHVybiBhcnJheS5wcm9taXNlKCk7XG59XG5cbmZ1bmN0aW9uIGdvdEFjY3VtKGFjY3VtKSB7XG4gICAgdGhpcy5hY2N1bSA9IGFjY3VtO1xuICAgIHRoaXMuYXJyYXkuX2dvdEFjY3VtKGFjY3VtKTtcbiAgICB2YXIgdmFsdWUgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXMudmFsdWUsIHRoaXMuYXJyYXkuX3Byb21pc2UpO1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5hcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZS5fdGhlbihnb3RWYWx1ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdvdFZhbHVlLmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ290VmFsdWUodmFsdWUpIHtcbiAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuICAgIHZhciBwcm9taXNlID0gYXJyYXkuX3Byb21pc2U7XG4gICAgdmFyIGZuID0gdHJ5Q2F0Y2goYXJyYXkuX2ZuKTtcbiAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXQ7XG4gICAgaWYgKGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtLCB2YWx1ZSwgdGhpcy5pbmRleCwgdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBhcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gcmV0O1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICByZXQsXG4gICAgICAgIHByb21pc2VDcmVhdGVkLFxuICAgICAgICBhcnJheS5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkID8gXCJQcm9taXNlLmVhY2hcIiA6IFwiUHJvbWlzZS5yZWR1Y2VcIixcbiAgICAgICAgcHJvbWlzZVxuICAgICk7XG4gICAgcmV0dXJuIHJldDtcbn1cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBzY2hlZHVsZTtcbnZhciBub0FzeW5jU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG59O1xudmFyIE5hdGl2ZVByb21pc2UgPSB1dGlsLmdldE5hdGl2ZVByb21pc2UoKTtcbmlmICh1dGlsLmlzTm9kZSAmJiB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBHbG9iYWxTZXRJbW1lZGlhdGUgPSBnbG9iYWwuc2V0SW1tZWRpYXRlO1xuICAgIHZhciBQcm9jZXNzTmV4dFRpY2sgPSBwcm9jZXNzLm5leHRUaWNrO1xuICAgIHNjaGVkdWxlID0gdXRpbC5pc1JlY2VudE5vZGVcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uKGZuKSB7IEdsb2JhbFNldEltbWVkaWF0ZS5jYWxsKGdsb2JhbCwgZm4pOyB9XG4gICAgICAgICAgICAgICAgOiBmdW5jdGlvbihmbikgeyBQcm9jZXNzTmV4dFRpY2suY2FsbChwcm9jZXNzLCBmbik7IH07XG59IGVsc2UgaWYgKHR5cGVvZiBOYXRpdmVQcm9taXNlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIE5hdGl2ZVByb21pc2UucmVzb2x2ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIG5hdGl2ZVByb21pc2UgPSBOYXRpdmVQcm9taXNlLnJlc29sdmUoKTtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIG5hdGl2ZVByb21pc2UudGhlbihmbik7XG4gICAgfTtcbn0gZWxzZSBpZiAoKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICEodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvciAmJlxuICAgICAgICAgICAgKHdpbmRvdy5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSB8fCB3aW5kb3cuY29yZG92YSkpKSB7XG4gICAgc2NoZWR1bGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgb3B0cyA9IHthdHRyaWJ1dGVzOiB0cnVlfTtcbiAgICAgICAgdmFyIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZGl2MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvMiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG8yLm9ic2VydmUoZGl2Miwgb3B0cyk7XG5cbiAgICAgICAgdmFyIHNjaGVkdWxlVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodG9nZ2xlU2NoZWR1bGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdG9nZ2xlU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkaXYyLmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2NoZWR1bGUoZm4pIHtcbiAgICAgICAgICAgIHZhciBvID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgby5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgby5vYnNlcnZlKGRpdiwgb3B0cyk7XG4gICAgICAgICAgICBzY2hlZHVsZVRvZ2dsZSgpO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG59IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRJbW1lZGlhdGUoZm4pO1xuICAgIH07XG59IGVsc2UgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgc2NoZWR1bGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgc2NoZWR1bGUgPSBub0FzeW5jU2NoZWR1bGVyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBzY2hlZHVsZTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDMwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuICAgIGZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgZGVidWcpIHtcbnZhciBQcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2UuUHJvbWlzZUluc3BlY3Rpb247XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbmZ1bmN0aW9uIFNldHRsZWRQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbn1cbnV0aWwuaW5oZXJpdHMoU2V0dGxlZFByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZXNvbHZlZCA9IGZ1bmN0aW9uIChpbmRleCwgaW5zcGVjdGlvbikge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSBpbnNwZWN0aW9uO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VJbnNwZWN0aW9uKCk7XG4gICAgcmV0Ll9iaXRGaWVsZCA9IDMzNTU0NDMyO1xuICAgIHJldC5fc2V0dGxlZFZhbHVlRmllbGQgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMTY3NzcyMTY7XG4gICAgcmV0Ll9zZXR0bGVkVmFsdWVGaWVsZCA9IHJlYXNvbjtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblxuUHJvbWlzZS5zZXR0bGUgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiLnNldHRsZSgpXCIsIFwiLnJlZmxlY3QoKVwiKTtcbiAgICByZXR1cm4gbmV3IFNldHRsZWRQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNldHRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5zZXR0bGUodGhpcyk7XG59O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDMxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBSYW5nZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlJhbmdlRXJyb3I7XG52YXIgQWdncmVnYXRlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuQWdncmVnYXRlRXJyb3I7XG52YXIgaXNBcnJheSA9IHV0aWwuaXNBcnJheTtcbnZhciBDQU5DRUxMQVRJT04gPSB7fTtcblxuXG5mdW5jdGlvbiBTb21lUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHZhbHVlcyk7XG4gICAgdGhpcy5faG93TWFueSA9IDA7XG4gICAgdGhpcy5fdW53cmFwID0gZmFsc2U7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcbn1cbnV0aWwuaW5oZXJpdHMoU29tZVByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9ob3dNYW55ID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUoW10pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTUpO1xuICAgIHZhciBpc0FycmF5UmVzb2x2ZWQgPSBpc0FycmF5KHRoaXMuX3ZhbHVlcyk7XG4gICAgaWYgKCF0aGlzLl9pc1Jlc29sdmVkKCkgJiZcbiAgICAgICAgaXNBcnJheVJlc29sdmVkICYmXG4gICAgICAgIHRoaXMuX2hvd01hbnkgPiB0aGlzLl9jYW5Qb3NzaWJseUZ1bGZpbGwoKSkge1xuICAgICAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcih0aGlzLmxlbmd0aCgpKSk7XG4gICAgfVxufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgdGhpcy5faW5pdCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuc2V0VW53cmFwID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3Vud3JhcCA9IHRydWU7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5ob3dNYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9ob3dNYW55O1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuc2V0SG93TWFueSA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHRoaXMuX2hvd01hbnkgPSBjb3VudDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fYWRkRnVsZmlsbGVkKHZhbHVlKTtcbiAgICBpZiAodGhpcy5fZnVsZmlsbGVkKCkgPT09IHRoaXMuaG93TWFueSgpKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSB0aGlzLmhvd01hbnkoKTtcbiAgICAgICAgaWYgKHRoaXMuaG93TWFueSgpID09PSAxICYmIHRoaXMuX3Vud3JhcCkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG5cbn07XG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX2FkZFJlamVjdGVkKHJlYXNvbik7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrT3V0Y29tZSgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UgfHwgdGhpcy5fdmFsdWVzID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIH1cbiAgICB0aGlzLl9hZGRSZWplY3RlZChDQU5DRUxMQVRJT04pO1xuICAgIHJldHVybiB0aGlzLl9jaGVja091dGNvbWUoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9jaGVja091dGNvbWUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5ob3dNYW55KCkgPiB0aGlzLl9jYW5Qb3NzaWJseUZ1bGZpbGwoKSkge1xuICAgICAgICB2YXIgZSA9IG5ldyBBZ2dyZWdhdGVFcnJvcigpO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGgoKTsgaSA8IHRoaXMuX3ZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZhbHVlc1tpXSAhPT0gQ0FOQ0VMTEFUSU9OKSB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuX3ZhbHVlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9mdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvdGFsUmVzb2x2ZWQ7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcy5sZW5ndGggLSB0aGlzLmxlbmd0aCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2FkZFJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHJlYXNvbik7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWVzW3RoaXMuX3RvdGFsUmVzb2x2ZWQrK10gPSB2YWx1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9jYW5Qb3NzaWJseUZ1bGZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoKCkgLSB0aGlzLl9yZWplY3RlZCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2dldFJhbmdlRXJyb3IgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICB2YXIgbWVzc2FnZSA9IFwiSW5wdXQgYXJyYXkgbXVzdCBjb250YWluIGF0IGxlYXN0IFwiICtcbiAgICAgICAgICAgIHRoaXMuX2hvd01hbnkgKyBcIiBpdGVtcyBidXQgY29udGFpbnMgb25seSBcIiArIGNvdW50ICsgXCIgaXRlbXNcIjtcbiAgICByZXR1cm4gbmV3IFJhbmdlRXJyb3IobWVzc2FnZSk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZUVtcHR5QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcmVqZWN0KHRoaXMuX2dldFJhbmdlRXJyb3IoMCkpO1xufTtcblxuZnVuY3Rpb24gc29tZShwcm9taXNlcywgaG93TWFueSkge1xuICAgIGlmICgoaG93TWFueSB8IDApICE9PSBob3dNYW55IHx8IGhvd01hbnkgPCAwKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBwb3NpdGl2ZSBpbnRlZ2VyXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBTb21lUHJvbWlzZUFycmF5KHByb21pc2VzKTtcbiAgICB2YXIgcHJvbWlzZSA9IHJldC5wcm9taXNlKCk7XG4gICAgcmV0LnNldEhvd01hbnkoaG93TWFueSk7XG4gICAgcmV0LmluaXQoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5zb21lID0gZnVuY3Rpb24gKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgcmV0dXJuIHNvbWUocHJvbWlzZXMsIGhvd01hbnkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc29tZSA9IGZ1bmN0aW9uIChob3dNYW55KSB7XG4gICAgcmV0dXJuIHNvbWUodGhpcywgaG93TWFueSk7XG59O1xuXG5Qcm9taXNlLl9Tb21lUHJvbWlzZUFycmF5ID0gU29tZVByb21pc2VBcnJheTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMzI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbmZ1bmN0aW9uIFByb21pc2VJbnNwZWN0aW9uKHByb21pc2UpIHtcbiAgICBpZiAocHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQgPSBwcm9taXNlLl9pc0ZhdGVTZWFsZWQoKVxuICAgICAgICAgICAgPyBwcm9taXNlLl9zZXR0bGVkVmFsdWUoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gMDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuX3NldHRsZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZDtcbn07XG5cbnZhciB2YWx1ZSA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBvZiBhIG5vbi1mdWxmaWxsZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cbnZhciByZWFzb24gPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuZXJyb3IgPVxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cbnZhciBpc0Z1bGZpbGxlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDA7XG59O1xuXG52YXIgaXNSZWplY3RlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDA7XG59O1xuXG52YXIgaXNQZW5kaW5nID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTAzOTcxODQpID09PSAwO1xufTtcblxudmFyIGlzUmVzb2x2ZWQgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTAzMzE2NDgpICE9PSAwO1xufTtcblxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDg0NTQxNDQpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX19pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA2NTUzNikgPT09IDY1NTM2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldCgpLl9faXNDYW5jZWxsZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl90YXJnZXQoKS5fYml0RmllbGQgJiA4NDU0MTQ0KSAhPT0gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1BlbmRpbmcuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUmVqZWN0ZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc0Z1bGZpbGxlZC5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNSZXNvbHZlZC5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHZhbHVlLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVhc29uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHRhcmdldC5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIHJldHVybiByZWFzb24uY2FsbCh0YXJnZXQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3ZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlYXNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG59O1xuXG5Qcm9taXNlLlByb21pc2VJbnNwZWN0aW9uID0gUHJvbWlzZUluc3BlY3Rpb247XG59O1xuXG59LHt9XSwzMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgaXNPYmplY3QgPSB1dGlsLmlzT2JqZWN0O1xuXG5mdW5jdGlvbiB0cnlDb252ZXJ0VG9Qcm9taXNlKG9iaiwgY29udGV4dCkge1xuICAgIGlmIChpc09iamVjdChvYmopKSB7XG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gb2JqO1xuICAgICAgICB2YXIgdGhlbiA9IGdldFRoZW4ob2JqKTtcbiAgICAgICAgaWYgKHRoZW4gPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgICAgIHZhciByZXQgPSBQcm9taXNlLnJlamVjdCh0aGVuLmUpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaWYgKGlzQW55Qmx1ZWJpcmRQcm9taXNlKG9iaikpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICAgICAgICAgIG9iai5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9mdWxmaWxsLFxuICAgICAgICAgICAgICAgICAgICByZXQuX3JlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICByZXQsXG4gICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZG9UaGVuYWJsZShvYmosIHRoZW4sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGRvR2V0VGhlbihvYmopIHtcbiAgICByZXR1cm4gb2JqLnRoZW47XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRvR2V0VGhlbihvYmopO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5cbnZhciBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5mdW5jdGlvbiBpc0FueUJsdWViaXJkUHJvbWlzZShvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gaGFzUHJvcC5jYWxsKG9iaiwgXCJfcHJvbWlzZTBcIik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkb1RoZW5hYmxlKHgsIHRoZW4sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICB2YXIgcmV0ID0gcHJvbWlzZTtcbiAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcHVzaENvbnRleHQoKTtcbiAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgdmFyIHN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICB2YXIgcmVzdWx0ID0gdXRpbC50cnlDYXRjaCh0aGVuKS5jYWxsKHgsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgc3luY2hyb25vdXMgPSBmYWxzZTtcblxuICAgIGlmIChwcm9taXNlICYmIHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIHRydWUsIHRydWUpO1xuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIGlmICghcHJvbWlzZSkgcmV0dXJuO1xuICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodmFsdWUpO1xuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgICAgIGlmICghcHJvbWlzZSkgcmV0dXJuO1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZWFzb24sIHN5bmNocm9ub3VzLCB0cnVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbnJldHVybiB0cnlDb252ZXJ0VG9Qcm9taXNlO1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDM0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBUaW1lb3V0RXJyb3IgPSBQcm9taXNlLlRpbWVvdXRFcnJvcjtcblxuZnVuY3Rpb24gSGFuZGxlV3JhcHBlcihoYW5kbGUpICB7XG4gICAgdGhpcy5oYW5kbGUgPSBoYW5kbGU7XG59XG5cbkhhbmRsZVdyYXBwZXIucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpO1xufTtcblxudmFyIGFmdGVyVmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gZGVsYXkoK3RoaXMpLnRoZW5SZXR1cm4odmFsdWUpOyB9O1xudmFyIGRlbGF5ID0gUHJvbWlzZS5kZWxheSA9IGZ1bmN0aW9uIChtcywgdmFsdWUpIHtcbiAgICB2YXIgcmV0O1xuICAgIHZhciBoYW5kbGU7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0ID0gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIC5fdGhlbihhZnRlclZhbHVlLCBudWxsLCBudWxsLCBtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpICYmIHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHJldC5fZnVsZmlsbCgpOyB9LCArbXMpO1xuICAgICAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkpIHtcbiAgICAgICAgICAgIHJldC5fc2V0T25DYW5jZWwobmV3IEhhbmRsZVdyYXBwZXIoaGFuZGxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIH1cbiAgICByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uIChtcykge1xuICAgIHJldHVybiBkZWxheShtcywgdGhpcyk7XG59O1xuXG52YXIgYWZ0ZXJUaW1lb3V0ID0gZnVuY3Rpb24gKHByb21pc2UsIG1lc3NhZ2UsIHBhcmVudCkge1xuICAgIHZhciBlcnI7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIGVyciA9IG1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnIgPSBuZXcgVGltZW91dEVycm9yKFwib3BlcmF0aW9uIHRpbWVkIG91dFwiKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGVyciA9IG5ldyBUaW1lb3V0RXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHV0aWwubWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uKGVycik7XG4gICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShlcnIpO1xuICAgIHByb21pc2UuX3JlamVjdChlcnIpO1xuXG4gICAgaWYgKHBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgIHBhcmVudC5jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBzdWNjZXNzQ2xlYXIodmFsdWUpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZmFpbHVyZUNsZWFyKHJlYXNvbikge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG4gICAgdGhyb3cgcmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKG1zLCBtZXNzYWdlKSB7XG4gICAgbXMgPSArbXM7XG4gICAgdmFyIHJldCwgcGFyZW50O1xuXG4gICAgdmFyIGhhbmRsZVdyYXBwZXIgPSBuZXcgSGFuZGxlV3JhcHBlcihzZXRUaW1lb3V0KGZ1bmN0aW9uIHRpbWVvdXRUaW1lb3V0KCkge1xuICAgICAgICBpZiAocmV0LmlzUGVuZGluZygpKSB7XG4gICAgICAgICAgICBhZnRlclRpbWVvdXQocmV0LCBtZXNzYWdlLCBwYXJlbnQpO1xuICAgICAgICB9XG4gICAgfSwgbXMpKTtcblxuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICBwYXJlbnQgPSB0aGlzLnRoZW4oKTtcbiAgICAgICAgcmV0ID0gcGFyZW50Ll90aGVuKHN1Y2Nlc3NDbGVhciwgZmFpbHVyZUNsZWFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgaGFuZGxlV3JhcHBlciwgdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChoYW5kbGVXcmFwcGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSB0aGlzLl90aGVuKHN1Y2Nlc3NDbGVhciwgZmFpbHVyZUNsZWFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgaGFuZGxlV3JhcHBlciwgdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDM1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgIGNyZWF0ZUNvbnRleHQsIElOVEVSTkFMLCBkZWJ1Zykge1xuICAgIHZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbiAgICB2YXIgVHlwZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlR5cGVFcnJvcjtcbiAgICB2YXIgaW5oZXJpdHMgPSBfZGVyZXFfKFwiLi91dGlsXCIpLmluaGVyaXRzO1xuICAgIHZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG4gICAgdmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbiAgICB2YXIgTlVMTCA9IHt9O1xuXG4gICAgZnVuY3Rpb24gdGhyb3dlcihlKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlO30sIDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhc3RQcmVzZXJ2aW5nRGlzcG9zYWJsZSh0aGVuYWJsZSkge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGVuYWJsZSk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgIT09IHRoZW5hYmxlICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhlbmFibGUuX2dldERpc3Bvc2VyID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHRoZW5hYmxlLl9pc0Rpc3Bvc2FibGUoKSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9zZXREaXNwb3NhYmxlKHRoZW5hYmxlLl9nZXREaXNwb3NlcigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaXNwb3NlKHJlc291cmNlcywgaW5zcGVjdGlvbikge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBsZW4gPSByZXNvdXJjZXMubGVuZ3RoO1xuICAgICAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBmdW5jdGlvbiBpdGVyYXRvcigpIHtcbiAgICAgICAgICAgIGlmIChpID49IGxlbikgcmV0dXJuIHJldC5fZnVsZmlsbCgpO1xuICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IGNhc3RQcmVzZXJ2aW5nRGlzcG9zYWJsZShyZXNvdXJjZXNbaSsrXSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSAmJlxuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5faXNEaXNwb3NhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9nZXREaXNwb3NlcigpLnRyeURpc3Bvc2UoaW5zcGVjdGlvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhyb3dlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZS5fdGhlbihpdGVyYXRvciwgdGhyb3dlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVyYXRvcigpO1xuICAgICAgICB9XG4gICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRGlzcG9zZXIoZGF0YSwgcHJvbWlzZSwgY29udGV4dCkge1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucmVzb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb21pc2UoKS5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlKCkudmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTlVMTDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLnRyeURpc3Bvc2UgPSBmdW5jdGlvbihpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciByZXNvdXJjZSA9IHRoaXMucmVzb3VyY2UoKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLl9jb250ZXh0O1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgcmV0ID0gcmVzb3VyY2UgIT09IE5VTExcbiAgICAgICAgICAgID8gdGhpcy5kb0Rpc3Bvc2UocmVzb3VyY2UsIGluc3BlY3Rpb24pIDogbnVsbDtcbiAgICAgICAgaWYgKGNvbnRleHQgIT09IHVuZGVmaW5lZCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl91bnNldERpc3Bvc2FibGUoKTtcbiAgICAgICAgdGhpcy5fZGF0YSA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLmlzRGlzcG9zZXIgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gKGQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnJlc291cmNlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZC50cnlEaXNwb3NlID09PSBcImZ1bmN0aW9uXCIpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBGdW5jdGlvbkRpc3Bvc2VyKGZuLCBwcm9taXNlLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IkKGZuLCBwcm9taXNlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaW5oZXJpdHMoRnVuY3Rpb25EaXNwb3NlciwgRGlzcG9zZXIpO1xuXG4gICAgRnVuY3Rpb25EaXNwb3Nlci5wcm90b3R5cGUuZG9EaXNwb3NlID0gZnVuY3Rpb24gKHJlc291cmNlLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBmbiA9IHRoaXMuZGF0YSgpO1xuICAgICAgICByZXR1cm4gZm4uY2FsbChyZXNvdXJjZSwgcmVzb3VyY2UsIGluc3BlY3Rpb24pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtYXliZVVud3JhcERpc3Bvc2VyKHZhbHVlKSB7XG4gICAgICAgIGlmIChEaXNwb3Nlci5pc0Rpc3Bvc2VyKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXNbdGhpcy5pbmRleF0uX3NldERpc3Bvc2FibGUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUmVzb3VyY2VMaXN0KGxlbmd0aCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpc1tsZW5ndGgtMV0gPSBudWxsO1xuICAgIH1cblxuICAgIFJlc291cmNlTGlzdC5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpc1tpXTtcbiAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgUHJvbWlzZS51c2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPCAyKSByZXR1cm4gYXBpUmVqZWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ5b3UgbXVzdCBwYXNzIGF0IGxlYXN0IDIgYXJndW1lbnRzIHRvIFByb21pc2UudXNpbmdcIik7XG4gICAgICAgIHZhciBmbiA9IGFyZ3VtZW50c1tsZW4gLSAxXTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5wdXQ7XG4gICAgICAgIHZhciBzcHJlYWRBcmdzID0gdHJ1ZTtcbiAgICAgICAgaWYgKGxlbiA9PT0gMiAmJiBBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgICAgIGlucHV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgbGVuID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgc3ByZWFkQXJncyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5wdXQgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzb3VyY2VzID0gbmV3IFJlc291cmNlTGlzdChsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSBpbnB1dFtpXTtcbiAgICAgICAgICAgIGlmIChEaXNwb3Nlci5pc0Rpc3Bvc2VyKHJlc291cmNlKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaXNwb3NlciA9IHJlc291cmNlO1xuICAgICAgICAgICAgICAgIHJlc291cmNlID0gcmVzb3VyY2UucHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIHJlc291cmNlLl9zZXREaXNwb3NhYmxlKGRpc3Bvc2VyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmVzb3VyY2UpO1xuICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihtYXliZVVud3JhcERpc3Bvc2VyLCBudWxsLCBudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzOiByZXNvdXJjZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgICAgICAgICAgICAgfSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvdXJjZXNbaV0gPSByZXNvdXJjZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWZsZWN0ZWRSZXNvdXJjZXMgPSBuZXcgQXJyYXkocmVzb3VyY2VzLmxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVmbGVjdGVkUmVzb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICByZWZsZWN0ZWRSZXNvdXJjZXNbaV0gPSBQcm9taXNlLnJlc29sdmUocmVzb3VyY2VzW2ldKS5yZWZsZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0UHJvbWlzZSA9IFByb21pc2UuYWxsKHJlZmxlY3RlZFJlc291cmNlcylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGluc3BlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnNwZWN0aW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IGluc3BlY3Rpb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGlvbi5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yT2JqLmUgPSBpbnNwZWN0aW9uLmVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWluc3BlY3Rpb24uaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UHJvbWlzZS5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnNwZWN0aW9uc1tpXSA9IGluc3BlY3Rpb24udmFsdWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcblxuICAgICAgICAgICAgICAgIGZuID0gdHJ5Q2F0Y2goZm4pO1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBzcHJlYWRBcmdzXG4gICAgICAgICAgICAgICAgICAgID8gZm4uYXBwbHkodW5kZWZpbmVkLCBpbnNwZWN0aW9ucykgOiBmbihpbnNwZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2VDcmVhdGVkID0gcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgICAgICAgICAgcmV0LCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLnVzaW5nXCIsIHByb21pc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IHJlc3VsdFByb21pc2UubGFzdGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGluc3BlY3Rpb24gPSBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbihyZXN1bHRQcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiBkaXNwb3NlKHJlc291cmNlcywgaW5zcGVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXNvdXJjZXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgIHByb21pc2UuX3NldE9uQ2FuY2VsKHJlc291cmNlcyk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5fc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3Nlcikge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTMxMDcyO1xuICAgICAgICB0aGlzLl9kaXNwb3NlciA9IGRpc3Bvc2VyO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5faXNEaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTMxMDcyKSA+IDA7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9nZXREaXNwb3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3Bvc2VyO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5fdW5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4xMzEwNzIpO1xuICAgICAgICB0aGlzLl9kaXNwb3NlciA9IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuZGlzcG9zZXIgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHRoaXMsIGNyZWF0ZUNvbnRleHQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgIH07XG5cbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMzY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIGNhbkV2YWx1YXRlID0gdHlwZW9mIG5hdmlnYXRvciA9PSBcInVuZGVmaW5lZFwiO1xuXG52YXIgZXJyb3JPYmogPSB7ZToge319O1xudmFyIHRyeUNhdGNoVGFyZ2V0O1xudmFyIGdsb2JhbE9iamVjdCA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6XG4gICAgdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6XG4gICAgdGhpcyAhPT0gdW5kZWZpbmVkID8gdGhpcyA6IG51bGw7XG5cbmZ1bmN0aW9uIHRyeUNhdGNoZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRyeUNhdGNoVGFyZ2V0O1xuICAgICAgICB0cnlDYXRjaFRhcmdldCA9IG51bGw7XG4gICAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJ5Q2F0Y2goZm4pIHtcbiAgICB0cnlDYXRjaFRhcmdldCA9IGZuO1xuICAgIHJldHVybiB0cnlDYXRjaGVyO1xufVxuXG52YXIgaW5oZXJpdHMgPSBmdW5jdGlvbihDaGlsZCwgUGFyZW50KSB7XG4gICAgdmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICAgIGZ1bmN0aW9uIFQoKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBDaGlsZDtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQgPSBQYXJlbnQ7XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5TmFtZSBpbiBQYXJlbnQucHJvdG90eXBlKSB7XG4gICAgICAgICAgICBpZiAoaGFzUHJvcC5jYWxsKFBhcmVudC5wcm90b3R5cGUsIHByb3BlcnR5TmFtZSkgJiZcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUuY2hhckF0KHByb3BlcnR5TmFtZS5sZW5ndGgtMSkgIT09IFwiJFwiXG4gICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXNbcHJvcGVydHlOYW1lICsgXCIkXCJdID0gUGFyZW50LnByb3RvdHlwZVtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFQucHJvdG90eXBlID0gUGFyZW50LnByb3RvdHlwZTtcbiAgICBDaGlsZC5wcm90b3R5cGUgPSBuZXcgVCgpO1xuICAgIHJldHVybiBDaGlsZC5wcm90b3R5cGU7XG59O1xuXG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT0gbnVsbCB8fCB2YWwgPT09IHRydWUgfHwgdmFsID09PSBmYWxzZSB8fFxuICAgICAgICB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCI7XG5cbn1cblxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBtYXliZVdyYXBBc0Vycm9yKG1heWJlRXJyb3IpIHtcbiAgICBpZiAoIWlzUHJpbWl0aXZlKG1heWJlRXJyb3IpKSByZXR1cm4gbWF5YmVFcnJvcjtcblxuICAgIHJldHVybiBuZXcgRXJyb3Ioc2FmZVRvU3RyaW5nKG1heWJlRXJyb3IpKTtcbn1cblxuZnVuY3Rpb24gd2l0aEFwcGVuZGVkKHRhcmdldCwgYXBwZW5kZWUpIHtcbiAgICB2YXIgbGVuID0gdGFyZ2V0Lmxlbmd0aDtcbiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGxlbiArIDEpO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICByZXRbaV0gPSB0YXJnZXRbaV07XG4gICAgfVxuICAgIHJldFtpXSA9IGFwcGVuZGVlO1xuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdChvYmosIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuXG4gICAgICAgIGlmIChkZXNjICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjLmdldCA9PSBudWxsICYmIGRlc2Muc2V0ID09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgPyBkZXNjLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHt9Lmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpID8gb2JqW2tleV0gOiB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3RFbnVtZXJhYmxlUHJvcChvYmosIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGlzUHJpbWl0aXZlKG9iaikpIHJldHVybiBvYmo7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9O1xuICAgIGVzNS5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHRocm93ZXIocikge1xuICAgIHRocm93IHI7XG59XG5cbnZhciBpbmhlcml0ZWREYXRhS2V5cyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgZXhjbHVkZWRQcm90b3R5cGVzID0gW1xuICAgICAgICBBcnJheS5wcm90b3R5cGUsXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUsXG4gICAgICAgIEZ1bmN0aW9uLnByb3RvdHlwZVxuICAgIF07XG5cbiAgICB2YXIgaXNFeGNsdWRlZFByb3RvID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhjbHVkZWRQcm90b3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZWRQcm90b3R5cGVzW2ldID09PSB2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGlmIChlczUuaXNFUzUpIHtcbiAgICAgICAgdmFyIGdldEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICAgICAgdmFyIHZpc2l0ZWRLZXlzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIHdoaWxlIChvYmogIT0gbnVsbCAmJiAhaXNFeGNsdWRlZFByb3RvKG9iaikpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5cztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzID0gZ2V0S2V5cyhvYmopO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaXRlZEtleXNba2V5XSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRLZXlzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzYyAhPSBudWxsICYmIGRlc2MuZ2V0ID09IG51bGwgJiYgZGVzYy5zZXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmogPSBlczUuZ2V0UHJvdG90eXBlT2Yob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgaWYgKGlzRXhjbHVkZWRQcm90byhvYmopKSByZXR1cm4gW107XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG5cbiAgICAgICAgICAgIC8qanNoaW50IGZvcmluOmZhbHNlICovXG4gICAgICAgICAgICBlbnVtZXJhdGlvbjogZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGNsdWRlZFByb3RvdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwoZXhjbHVkZWRQcm90b3R5cGVzW2ldLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgZW51bWVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgIH1cblxufSkoKTtcblxudmFyIHRoaXNBc3NpZ25tZW50UGF0dGVybiA9IC90aGlzXFxzKlxcLlxccypcXFMrXFxzKj0vO1xuZnVuY3Rpb24gaXNDbGFzcyhmbikge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBlczUubmFtZXMoZm4ucHJvdG90eXBlKTtcblxuICAgICAgICAgICAgdmFyIGhhc01ldGhvZHMgPSBlczUuaXNFUzUgJiYga2V5cy5sZW5ndGggPiAxO1xuICAgICAgICAgICAgdmFyIGhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciA9IGtleXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICEoa2V5cy5sZW5ndGggPT09IDEgJiYga2V5c1swXSA9PT0gXCJjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgICAgIHZhciBoYXNUaGlzQXNzaWdubWVudEFuZFN0YXRpY01ldGhvZHMgPVxuICAgICAgICAgICAgICAgIHRoaXNBc3NpZ25tZW50UGF0dGVybi50ZXN0KGZuICsgXCJcIikgJiYgZXM1Lm5hbWVzKGZuKS5sZW5ndGggPiAwO1xuXG4gICAgICAgICAgICBpZiAoaGFzTWV0aG9kcyB8fCBoYXNNZXRob2RzT3RoZXJUaGFuQ29uc3RydWN0b3IgfHxcbiAgICAgICAgICAgICAgICBoYXNUaGlzQXNzaWdubWVudEFuZFN0YXRpY01ldGhvZHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0b0Zhc3RQcm9wZXJ0aWVzKG9iaikge1xuICAgIC8qanNoaW50IC1XMDI3LC1XMDU1LC1XMDMxKi9cbiAgICBmdW5jdGlvbiBGYWtlQ29uc3RydWN0b3IoKSB7fVxuICAgIEZha2VDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBvYmo7XG4gICAgdmFyIGwgPSA4O1xuICAgIHdoaWxlIChsLS0pIG5ldyBGYWtlQ29uc3RydWN0b3IoKTtcbiAgICByZXR1cm4gb2JqO1xuICAgIGV2YWwob2JqKTtcbn1cblxudmFyIHJpZGVudCA9IC9eW2EteiRfXVthLXokXzAtOV0qJC9pO1xuZnVuY3Rpb24gaXNJZGVudGlmaWVyKHN0cikge1xuICAgIHJldHVybiByaWRlbnQudGVzdChzdHIpO1xufVxuXG5mdW5jdGlvbiBmaWxsZWRSYW5nZShjb3VudCwgcHJlZml4LCBzdWZmaXgpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICByZXRbaV0gPSBwcmVmaXggKyBpICsgc3VmZml4O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBzYWZlVG9TdHJpbmcob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG9iaiArIFwiXCI7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gXCJbbm8gc3RyaW5nIHJlcHJlc2VudGF0aW9uXVwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmXG4gICAgICAgICAgIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iai5tZXNzYWdlID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgIHR5cGVvZiBvYmoubmFtZSA9PT0gXCJzdHJpbmdcIjtcbn1cblxuZnVuY3Rpb24gbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uKGUpIHtcbiAgICB0cnkge1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcChlLCBcImlzT3BlcmF0aW9uYWxcIiwgdHJ1ZSk7XG4gICAgfVxuICAgIGNhdGNoKGlnbm9yZSkge31cbn1cblxuZnVuY3Rpb24gb3JpZ2luYXRlc0Zyb21SZWplY3Rpb24oZSkge1xuICAgIGlmIChlID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKChlIGluc3RhbmNlb2YgRXJyb3JbXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCJdLk9wZXJhdGlvbmFsRXJyb3IpIHx8XG4gICAgICAgIGVbXCJpc09wZXJhdGlvbmFsXCJdID09PSB0cnVlKTtcbn1cblxuZnVuY3Rpb24gY2FuQXR0YWNoVHJhY2Uob2JqKSB7XG4gICAgcmV0dXJuIGlzRXJyb3Iob2JqKSAmJiBlczUucHJvcGVydHlJc1dyaXRhYmxlKG9iaiwgXCJzdGFja1wiKTtcbn1cblxudmFyIGVuc3VyZUVycm9yT2JqZWN0ID0gKGZ1bmN0aW9uKCkge1xuICAgIGlmICghKFwic3RhY2tcIiBpbiBuZXcgRXJyb3IoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoY2FuQXR0YWNoVHJhY2UodmFsdWUpKSByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB0cnkge3Rocm93IG5ldyBFcnJvcihzYWZlVG9TdHJpbmcodmFsdWUpKTt9XG4gICAgICAgICAgICBjYXRjaChlcnIpIHtyZXR1cm4gZXJyO31cbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3Ioc2FmZVRvU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcblxuZnVuY3Rpb24gY2xhc3NTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwob2JqKTtcbn1cblxuZnVuY3Rpb24gY29weURlc2NyaXB0b3JzKGZyb20sIHRvLCBmaWx0ZXIpIHtcbiAgICB2YXIga2V5cyA9IGVzNS5uYW1lcyhmcm9tKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIGlmIChmaWx0ZXIoa2V5KSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBlczUuZGVmaW5lUHJvcGVydHkodG8sIGtleSwgZXM1LmdldERlc2NyaXB0b3IoZnJvbSwga2V5KSk7XG4gICAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBhc0FycmF5ID0gZnVuY3Rpb24odikge1xuICAgIGlmIChlczUuaXNBcnJheSh2KSkge1xuICAgICAgICByZXR1cm4gdjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG5pZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IpIHtcbiAgICB2YXIgQXJyYXlGcm9tID0gdHlwZW9mIEFycmF5LmZyb20gPT09IFwiZnVuY3Rpb25cIiA/IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odik7XG4gICAgfSA6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICB2YXIgaXQgPSB2W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgdmFyIGl0UmVzdWx0O1xuICAgICAgICB3aGlsZSAoISgoaXRSZXN1bHQgPSBpdC5uZXh0KCkpLmRvbmUpKSB7XG4gICAgICAgICAgICByZXQucHVzaChpdFJlc3VsdC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgYXNBcnJheSA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgaWYgKGVzNS5pc0FycmF5KHYpKSB7XG4gICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgfSBlbHNlIGlmICh2ICE9IG51bGwgJiYgdHlwZW9mIHZbU3ltYm9sLml0ZXJhdG9yXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXlGcm9tKHYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG59XG5cbnZhciBpc05vZGUgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICBjbGFzc1N0cmluZyhwcm9jZXNzKS50b0xvd2VyQ2FzZSgpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIjtcblxudmFyIGhhc0VudlZhcmlhYmxlcyA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MuZW52ICE9PSBcInVuZGVmaW5lZFwiO1xuXG5mdW5jdGlvbiBlbnYoa2V5KSB7XG4gICAgcmV0dXJuIGhhc0VudlZhcmlhYmxlcyA/IHByb2Nlc3MuZW52W2tleV0gOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGdldE5hdGl2ZVByb21pc2UoKSB7XG4gICAgaWYgKHR5cGVvZiBQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24oKXt9KTtcbiAgICAgICAgICAgIGlmICh7fS50b1N0cmluZy5jYWxsKHByb21pc2UpID09PSBcIltvYmplY3QgUHJvbWlzZV1cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZG9tYWluQmluZChzZWxmLCBjYikge1xuICAgIHJldHVybiBzZWxmLmJpbmQoY2IpO1xufVxuXG52YXIgcmV0ID0ge1xuICAgIGlzQ2xhc3M6IGlzQ2xhc3MsXG4gICAgaXNJZGVudGlmaWVyOiBpc0lkZW50aWZpZXIsXG4gICAgaW5oZXJpdGVkRGF0YUtleXM6IGluaGVyaXRlZERhdGFLZXlzLFxuICAgIGdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdDogZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0LFxuICAgIHRocm93ZXI6IHRocm93ZXIsXG4gICAgaXNBcnJheTogZXM1LmlzQXJyYXksXG4gICAgYXNBcnJheTogYXNBcnJheSxcbiAgICBub3RFbnVtZXJhYmxlUHJvcDogbm90RW51bWVyYWJsZVByb3AsXG4gICAgaXNQcmltaXRpdmU6IGlzUHJpbWl0aXZlLFxuICAgIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgICBpc0Vycm9yOiBpc0Vycm9yLFxuICAgIGNhbkV2YWx1YXRlOiBjYW5FdmFsdWF0ZSxcbiAgICBlcnJvck9iajogZXJyb3JPYmosXG4gICAgdHJ5Q2F0Y2g6IHRyeUNhdGNoLFxuICAgIGluaGVyaXRzOiBpbmhlcml0cyxcbiAgICB3aXRoQXBwZW5kZWQ6IHdpdGhBcHBlbmRlZCxcbiAgICBtYXliZVdyYXBBc0Vycm9yOiBtYXliZVdyYXBBc0Vycm9yLFxuICAgIHRvRmFzdFByb3BlcnRpZXM6IHRvRmFzdFByb3BlcnRpZXMsXG4gICAgZmlsbGVkUmFuZ2U6IGZpbGxlZFJhbmdlLFxuICAgIHRvU3RyaW5nOiBzYWZlVG9TdHJpbmcsXG4gICAgY2FuQXR0YWNoVHJhY2U6IGNhbkF0dGFjaFRyYWNlLFxuICAgIGVuc3VyZUVycm9yT2JqZWN0OiBlbnN1cmVFcnJvck9iamVjdCxcbiAgICBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbjogb3JpZ2luYXRlc0Zyb21SZWplY3Rpb24sXG4gICAgbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uOiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24sXG4gICAgY2xhc3NTdHJpbmc6IGNsYXNzU3RyaW5nLFxuICAgIGNvcHlEZXNjcmlwdG9yczogY29weURlc2NyaXB0b3JzLFxuICAgIGhhc0RldlRvb2xzOiB0eXBlb2YgY2hyb21lICE9PSBcInVuZGVmaW5lZFwiICYmIGNocm9tZSAmJlxuICAgICAgICAgICAgICAgICB0eXBlb2YgY2hyb21lLmxvYWRUaW1lcyA9PT0gXCJmdW5jdGlvblwiLFxuICAgIGlzTm9kZTogaXNOb2RlLFxuICAgIGhhc0VudlZhcmlhYmxlczogaGFzRW52VmFyaWFibGVzLFxuICAgIGVudjogZW52LFxuICAgIGdsb2JhbDogZ2xvYmFsT2JqZWN0LFxuICAgIGdldE5hdGl2ZVByb21pc2U6IGdldE5hdGl2ZVByb21pc2UsXG4gICAgZG9tYWluQmluZDogZG9tYWluQmluZFxufTtcbnJldC5pc1JlY2VudE5vZGUgPSByZXQuaXNOb2RlICYmIChmdW5jdGlvbigpIHtcbiAgICB2YXIgdmVyc2lvbiA9IHByb2Nlc3MudmVyc2lvbnMubm9kZS5zcGxpdChcIi5cIikubWFwKE51bWJlcik7XG4gICAgcmV0dXJuICh2ZXJzaW9uWzBdID09PSAwICYmIHZlcnNpb25bMV0gPiAxMCkgfHwgKHZlcnNpb25bMF0gPiAwKTtcbn0pKCk7XG5cbmlmIChyZXQuaXNOb2RlKSByZXQudG9GYXN0UHJvcGVydGllcyhwcm9jZXNzKTtcblxudHJ5IHt0aHJvdyBuZXcgRXJyb3IoKTsgfSBjYXRjaCAoZSkge3JldC5sYXN0TGluZUVycm9yID0gZTt9XG5tb2R1bGUuZXhwb3J0cyA9IHJldDtcblxufSx7XCIuL2VzNVwiOjEzfV19LHt9LFs0XSkoNClcbn0pOyAgICAgICAgICAgICAgICAgICAgO2lmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cgIT09IG51bGwpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlAgPSB3aW5kb3cuUHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgIT09IG51bGwpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuUCA9IHNlbGYuUHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IiwiLyohIEhhbW1lci5KUyAtIHYyLjAuNyAtIDIwMTYtMDQtMjJcbiAqIGh0dHA6Ly9oYW1tZXJqcy5naXRodWIuaW8vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IEpvcmlrIFRhbmdlbGRlcjtcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIGV4cG9ydE5hbWUsIHVuZGVmaW5lZCkge1xuICAndXNlIHN0cmljdCc7XG5cbnZhciBWRU5ET1JfUFJFRklYRVMgPSBbJycsICd3ZWJraXQnLCAnTW96JywgJ01TJywgJ21zJywgJ28nXTtcbnZhciBURVNUX0VMRU1FTlQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxudmFyIFRZUEVfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXG52YXIgcm91bmQgPSBNYXRoLnJvdW5kO1xudmFyIGFicyA9IE1hdGguYWJzO1xudmFyIG5vdyA9IERhdGUubm93O1xuXG4vKipcbiAqIHNldCBhIHRpbWVvdXQgd2l0aCBhIGdpdmVuIHNjb3BlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBzZXRUaW1lb3V0Q29udGV4dChmbiwgdGltZW91dCwgY29udGV4dCkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGJpbmRGbihmbiwgY29udGV4dCksIHRpbWVvdXQpO1xufVxuXG4vKipcbiAqIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgd2Ugd2FudCB0byBleGVjdXRlIHRoZSBmbiBvbiBlYWNoIGVudHJ5XG4gKiBpZiBpdCBhaW50IGFuIGFycmF5IHdlIGRvbid0IHdhbnQgdG8gZG8gYSB0aGluZy5cbiAqIHRoaXMgaXMgdXNlZCBieSBhbGwgdGhlIG1ldGhvZHMgdGhhdCBhY2NlcHQgYSBzaW5nbGUgYW5kIGFycmF5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfEFycmF5fSBhcmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBmblxuICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGludm9rZUFycmF5QXJnKGFyZywgZm4sIGNvbnRleHQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgIGVhY2goYXJnLCBjb250ZXh0W2ZuXSwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogd2FsayBvYmplY3RzIGFuZCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICovXG5mdW5jdGlvbiBlYWNoKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgaTtcblxuICAgIGlmICghb2JqKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob2JqLmZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpIGluIG9iaikge1xuICAgICAgICAgICAgb2JqLmhhc093blByb3BlcnR5KGkpICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIHdyYXAgYSBtZXRob2Qgd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgYW5kIHN0YWNrIHRyYWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyB0aGUgc3VwcGxpZWQgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBkZXByZWNhdGUobWV0aG9kLCBuYW1lLCBtZXNzYWdlKSB7XG4gICAgdmFyIGRlcHJlY2F0aW9uTWVzc2FnZSA9ICdERVBSRUNBVEVEIE1FVEhPRDogJyArIG5hbWUgKyAnXFxuJyArIG1lc3NhZ2UgKyAnIEFUIFxcbic7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignZ2V0LXN0YWNrLXRyYWNlJyk7XG4gICAgICAgIHZhciBzdGFjayA9IGUgJiYgZS5zdGFjayA/IGUuc3RhY2sucmVwbGFjZSgvXlteXFwoXSs/W1xcbiRdL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eXFxzK2F0XFxzKy9nbSwgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sICd7YW5vbnltb3VzfSgpQCcpIDogJ1Vua25vd24gU3RhY2sgVHJhY2UnO1xuXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUud2FybiB8fCB3aW5kb3cuY29uc29sZS5sb2cpO1xuICAgICAgICBpZiAobG9nKSB7XG4gICAgICAgICAgICBsb2cuY2FsbCh3aW5kb3cuY29uc29sZSwgZGVwcmVjYXRpb25NZXNzYWdlLCBzdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHsuLi5PYmplY3R9IG9iamVjdHNfdG9fYXNzaWduXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB0YXJnZXRcbiAqL1xudmFyIGFzc2lnbjtcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xufVxuXG4vKipcbiAqIGV4dGVuZCBvYmplY3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFttZXJnZT1mYWxzZV1cbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIGV4dGVuZCA9IGRlcHJlY2F0ZShmdW5jdGlvbiBleHRlbmQoZGVzdCwgc3JjLCBtZXJnZSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc3JjKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW1lcmdlIHx8IChtZXJnZSAmJiBkZXN0W2tleXNbaV1dID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBkZXN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59LCAnZXh0ZW5kJywgJ1VzZSBgYXNzaWduYC4nKTtcblxuLyoqXG4gKiBtZXJnZSB0aGUgdmFsdWVzIGZyb20gc3JjIGluIHRoZSBkZXN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIHRoYXQgZXhpc3QgaW4gZGVzdCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzcmNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG4gKi9cbnZhciBtZXJnZSA9IGRlcHJlY2F0ZShmdW5jdGlvbiBtZXJnZShkZXN0LCBzcmMpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYywgdHJ1ZSk7XG59LCAnbWVyZ2UnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIHNpbXBsZSBjbGFzcyBpbmhlcml0YW5jZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hpbGRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGJhc2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc11cbiAqL1xuZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcGVydGllcykge1xuICAgIHZhciBiYXNlUCA9IGJhc2UucHJvdG90eXBlLFxuICAgICAgICBjaGlsZFA7XG5cbiAgICBjaGlsZFAgPSBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VQKTtcbiAgICBjaGlsZFAuY29uc3RydWN0b3IgPSBjaGlsZDtcbiAgICBjaGlsZFAuX3N1cGVyID0gYmFzZVA7XG5cbiAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICBhc3NpZ24oY2hpbGRQLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogc2ltcGxlIGZ1bmN0aW9uIGJpbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBiaW5kRm4oZm4sIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gYm91bmRGbigpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBsZXQgYSBib29sZWFuIHZhbHVlIGFsc28gYmUgYSBmdW5jdGlvbiB0aGF0IG11c3QgcmV0dXJuIGEgYm9vbGVhblxuICogdGhpcyBmaXJzdCBpdGVtIGluIGFyZ3Mgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZXh0XG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IHZhbFxuICogQHBhcmFtIHtBcnJheX0gW2FyZ3NdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gYm9vbE9yRm4odmFsLCBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT0gVFlQRV9GVU5DVElPTikge1xuICAgICAgICByZXR1cm4gdmFsLmFwcGx5KGFyZ3MgPyBhcmdzWzBdIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogdXNlIHRoZSB2YWwyIHdoZW4gdmFsMSBpcyB1bmRlZmluZWRcbiAqIEBwYXJhbSB7Kn0gdmFsMVxuICogQHBhcmFtIHsqfSB2YWwyXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gaWZVbmRlZmluZWQodmFsMSwgdmFsMikge1xuICAgIHJldHVybiAodmFsMSA9PT0gdW5kZWZpbmVkKSA/IHZhbDIgOiB2YWwxO1xufVxuXG4vKipcbiAqIGFkZEV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiByZW1vdmVFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2VcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcbiAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogZmluZCBpZiBhIG5vZGUgaXMgaW4gdGhlIGdpdmVuIHBhcmVudFxuICogQG1ldGhvZCBoYXNQYXJlbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHJldHVybiB7Qm9vbGVhbn0gZm91bmRcbiAqL1xuZnVuY3Rpb24gaGFzUGFyZW50KG5vZGUsIHBhcmVudCkge1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHNtYWxsIGluZGV4T2Ygd3JhcHBlclxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEByZXR1cm5zIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBpblN0cihzdHIsIGZpbmQpIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2YoZmluZCkgPiAtMTtcbn1cblxuLyoqXG4gKiBzcGxpdCBzdHJpbmcgb24gd2hpdGVzcGFjZVxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybnMge0FycmF5fSB3b3Jkc1xuICovXG5mdW5jdGlvbiBzcGxpdFN0cihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy9nKTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgYXJyYXkgY29udGFpbnMgdGhlIG9iamVjdCB1c2luZyBpbmRleE9mIG9yIGEgc2ltcGxlIHBvbHlGaWxsXG4gKiBAcGFyYW0ge0FycmF5fSBzcmNcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG4gKiBAcGFyYW0ge1N0cmluZ30gW2ZpbmRCeUtleV1cbiAqIEByZXR1cm4ge0Jvb2xlYW58TnVtYmVyfSBmYWxzZSB3aGVuIG5vdCBmb3VuZCwgb3IgdGhlIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGluQXJyYXkoc3JjLCBmaW5kLCBmaW5kQnlLZXkpIHtcbiAgICBpZiAoc3JjLmluZGV4T2YgJiYgIWZpbmRCeUtleSkge1xuICAgICAgICByZXR1cm4gc3JjLmluZGV4T2YoZmluZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICgoZmluZEJ5S2V5ICYmIHNyY1tpXVtmaW5kQnlLZXldID09IGZpbmQpIHx8ICghZmluZEJ5S2V5ICYmIHNyY1tpXSA9PT0gZmluZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufVxuXG4vKipcbiAqIGNvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIHJlYWwgYXJyYXlzXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaiwgMCk7XG59XG5cbi8qKlxuICogdW5pcXVlIGFycmF5IHdpdGggb2JqZWN0cyBiYXNlZCBvbiBhIGtleSAobGlrZSAnaWQnKSBvciBqdXN0IGJ5IHRoZSBhcnJheSdzIHZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSBzcmMgW3tpZDoxfSx7aWQ6Mn0se2lkOjF9XVxuICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzb3J0PUZhbHNlXVxuICogQHJldHVybnMge0FycmF5fSBbe2lkOjF9LHtpZDoyfV1cbiAqL1xuZnVuY3Rpb24gdW5pcXVlQXJyYXkoc3JjLCBrZXksIHNvcnQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbCA9IGtleSA/IHNyY1tpXVtrZXldIDogc3JjW2ldO1xuICAgICAgICBpZiAoaW5BcnJheSh2YWx1ZXMsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goc3JjW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaV0gPSB2YWw7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoc29ydCkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydChmdW5jdGlvbiBzb3J0VW5pcXVlQXJyYXkoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gPiBiW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIGdldCB0aGUgcHJlZml4ZWQgcHJvcGVydHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICogQHJldHVybnMge1N0cmluZ3xVbmRlZmluZWR9IHByZWZpeGVkXG4gKi9cbmZ1bmN0aW9uIHByZWZpeGVkKG9iaiwgcHJvcGVydHkpIHtcbiAgICB2YXIgcHJlZml4LCBwcm9wO1xuICAgIHZhciBjYW1lbFByb3AgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpICsgcHJvcGVydHkuc2xpY2UoMSk7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBWRU5ET1JfUFJFRklYRVMubGVuZ3RoKSB7XG4gICAgICAgIHByZWZpeCA9IFZFTkRPUl9QUkVGSVhFU1tpXTtcbiAgICAgICAgcHJvcCA9IChwcmVmaXgpID8gcHJlZml4ICsgY2FtZWxQcm9wIDogcHJvcGVydHk7XG5cbiAgICAgICAgaWYgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogZ2V0IGEgdW5pcXVlIGlkXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB1bmlxdWVJZFxuICovXG52YXIgX3VuaXF1ZUlkID0gMTtcbmZ1bmN0aW9uIHVuaXF1ZUlkKCkge1xuICAgIHJldHVybiBfdW5pcXVlSWQrKztcbn1cblxuLyoqXG4gKiBnZXQgdGhlIHdpbmRvdyBvYmplY3Qgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybnMge0RvY3VtZW50Vmlld3xXaW5kb3d9XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvd0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgIHZhciBkb2MgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQgfHwgZWxlbWVudDtcbiAgICByZXR1cm4gKGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93IHx8IHdpbmRvdyk7XG59XG5cbnZhciBNT0JJTEVfUkVHRVggPSAvbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2k7XG5cbnZhciBTVVBQT1JUX1RPVUNIID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyk7XG52YXIgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IHByZWZpeGVkKHdpbmRvdywgJ1BvaW50ZXJFdmVudCcpICE9PSB1bmRlZmluZWQ7XG52YXIgU1VQUE9SVF9PTkxZX1RPVUNIID0gU1VQUE9SVF9UT1VDSCAmJiBNT0JJTEVfUkVHRVgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxudmFyIElOUFVUX1RZUEVfVE9VQ0ggPSAndG91Y2gnO1xudmFyIElOUFVUX1RZUEVfUEVOID0gJ3Blbic7XG52YXIgSU5QVVRfVFlQRV9NT1VTRSA9ICdtb3VzZSc7XG52YXIgSU5QVVRfVFlQRV9LSU5FQ1QgPSAna2luZWN0JztcblxudmFyIENPTVBVVEVfSU5URVJWQUwgPSAyNTtcblxudmFyIElOUFVUX1NUQVJUID0gMTtcbnZhciBJTlBVVF9NT1ZFID0gMjtcbnZhciBJTlBVVF9FTkQgPSA0O1xudmFyIElOUFVUX0NBTkNFTCA9IDg7XG5cbnZhciBESVJFQ1RJT05fTk9ORSA9IDE7XG52YXIgRElSRUNUSU9OX0xFRlQgPSAyO1xudmFyIERJUkVDVElPTl9SSUdIVCA9IDQ7XG52YXIgRElSRUNUSU9OX1VQID0gODtcbnZhciBESVJFQ1RJT05fRE9XTiA9IDE2O1xuXG52YXIgRElSRUNUSU9OX0hPUklaT05UQUwgPSBESVJFQ1RJT05fTEVGVCB8IERJUkVDVElPTl9SSUdIVDtcbnZhciBESVJFQ1RJT05fVkVSVElDQUwgPSBESVJFQ1RJT05fVVAgfCBESVJFQ1RJT05fRE9XTjtcbnZhciBESVJFQ1RJT05fQUxMID0gRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUw7XG5cbnZhciBQUk9QU19YWSA9IFsneCcsICd5J107XG52YXIgUFJPUFNfQ0xJRU5UX1hZID0gWydjbGllbnRYJywgJ2NsaWVudFknXTtcblxuLyoqXG4gKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0lucHV0fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIElucHV0KG1hbmFnZXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICB0aGlzLnRhcmdldCA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dFRhcmdldDtcblxuICAgIC8vIHNtYWxsZXIgd3JhcHBlciBhcm91bmQgdGhlIGhhbmRsZXIsIGZvciB0aGUgc2NvcGUgYW5kIHRoZSBlbmFibGVkIHN0YXRlIG9mIHRoZSBtYW5hZ2VyLFxuICAgIC8vIHNvIHdoZW4gZGlzYWJsZWQgdGhlIGlucHV0IGV2ZW50cyBhcmUgY29tcGxldGVseSBieXBhc3NlZC5cbiAgICB0aGlzLmRvbUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICBpZiAoYm9vbE9yRm4obWFuYWdlci5vcHRpb25zLmVuYWJsZSwgW21hbmFnZXJdKSkge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVyKGV2KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmluaXQoKTtcblxufVxuXG5JbnB1dC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2hvdWxkIGhhbmRsZSB0aGUgaW5wdXRFdmVudCBkYXRhIGFuZCB0cmlnZ2VyIHRoZSBjYWxsYmFja1xuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIGFkZEV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5iaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBjYWxsZWQgYnkgdGhlIE1hbmFnZXIgY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0SW5zdGFuY2UobWFuYWdlcikge1xuICAgIHZhciBUeXBlO1xuICAgIHZhciBpbnB1dENsYXNzID0gbWFuYWdlci5vcHRpb25zLmlucHV0Q2xhc3M7XG5cbiAgICBpZiAoaW5wdXRDbGFzcykge1xuICAgICAgICBUeXBlID0gaW5wdXRDbGFzcztcbiAgICB9IGVsc2UgaWYgKFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMpIHtcbiAgICAgICAgVHlwZSA9IFBvaW50ZXJFdmVudElucHV0O1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9PTkxZX1RPVUNIKSB7XG4gICAgICAgIFR5cGUgPSBUb3VjaElucHV0O1xuICAgIH0gZWxzZSBpZiAoIVNVUFBPUlRfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IE1vdXNlSW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoTW91c2VJbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyAoVHlwZSkobWFuYWdlciwgaW5wdXRIYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBoYW5kbGUgaW5wdXQgZXZlbnRzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBpbnB1dEhhbmRsZXIobWFuYWdlciwgZXZlbnRUeXBlLCBpbnB1dCkge1xuICAgIHZhciBwb2ludGVyc0xlbiA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgY2hhbmdlZFBvaW50ZXJzTGVuID0gaW5wdXQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgaXNGaXJzdCA9IChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcbiAgICB2YXIgaXNGaW5hbCA9IChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcblxuICAgIGlucHV0LmlzRmlyc3QgPSAhIWlzRmlyc3Q7XG4gICAgaW5wdXQuaXNGaW5hbCA9ICEhaXNGaW5hbDtcblxuICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgIG1hbmFnZXIuc2Vzc2lvbiA9IHt9O1xuICAgIH1cblxuICAgIC8vIHNvdXJjZSBldmVudCBpcyB0aGUgbm9ybWFsaXplZCB2YWx1ZSBvZiB0aGUgZG9tRXZlbnRzXG4gICAgLy8gbGlrZSAndG91Y2hzdGFydCwgbW91c2V1cCwgcG9pbnRlcmRvd24nXG4gICAgaW5wdXQuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXG4gICAgLy8gY29tcHV0ZSBzY2FsZSwgcm90YXRpb24gZXRjXG4gICAgY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCk7XG5cbiAgICAvLyBlbWl0IHNlY3JldCBldmVudFxuICAgIG1hbmFnZXIuZW1pdCgnaGFtbWVyLmlucHV0JywgaW5wdXQpO1xuXG4gICAgbWFuYWdlci5yZWNvZ25pemUoaW5wdXQpO1xuICAgIG1hbmFnZXIuc2Vzc2lvbi5wcmV2SW5wdXQgPSBpbnB1dDtcbn1cblxuLyoqXG4gKiBleHRlbmQgdGhlIGRhdGEgd2l0aCBzb21lIHVzYWJsZSBwcm9wZXJ0aWVzIGxpa2Ugc2NhbGUsIHJvdGF0ZSwgdmVsb2NpdHkgZXRjXG4gKiBAcGFyYW0ge09iamVjdH0gbWFuYWdlclxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpIHtcbiAgICB2YXIgc2Vzc2lvbiA9IG1hbmFnZXIuc2Vzc2lvbjtcbiAgICB2YXIgcG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycztcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBzdG9yZSB0aGUgZmlyc3QgaW5wdXQgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBhbmQgZGlyZWN0aW9uXG4gICAgaWYgKCFzZXNzaW9uLmZpcnN0SW5wdXQpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdElucHV0ID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH1cblxuICAgIC8vIHRvIGNvbXB1dGUgc2NhbGUgYW5kIHJvdGF0aW9uIHdlIG5lZWQgdG8gc3RvcmUgdGhlIG11bHRpcGxlIHRvdWNoZXNcbiAgICBpZiAocG9pbnRlcnNMZW5ndGggPiAxICYmICFzZXNzaW9uLmZpcnN0TXVsdGlwbGUpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH0gZWxzZSBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0SW5wdXQgPSBzZXNzaW9uLmZpcnN0SW5wdXQ7XG4gICAgdmFyIGZpcnN0TXVsdGlwbGUgPSBzZXNzaW9uLmZpcnN0TXVsdGlwbGU7XG4gICAgdmFyIG9mZnNldENlbnRlciA9IGZpcnN0TXVsdGlwbGUgPyBmaXJzdE11bHRpcGxlLmNlbnRlciA6IGZpcnN0SW5wdXQuY2VudGVyO1xuXG4gICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlciA9IGdldENlbnRlcihwb2ludGVycyk7XG4gICAgaW5wdXQudGltZVN0YW1wID0gbm93KCk7XG4gICAgaW5wdXQuZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gZmlyc3RJbnB1dC50aW1lU3RhbXA7XG5cbiAgICBpbnB1dC5hbmdsZSA9IGdldEFuZ2xlKG9mZnNldENlbnRlciwgY2VudGVyKTtcbiAgICBpbnB1dC5kaXN0YW5jZSA9IGdldERpc3RhbmNlKG9mZnNldENlbnRlciwgY2VudGVyKTtcblxuICAgIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KTtcbiAgICBpbnB1dC5vZmZzZXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuXG4gICAgdmFyIG92ZXJhbGxWZWxvY2l0eSA9IGdldFZlbG9jaXR5KGlucHV0LmRlbHRhVGltZSwgaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVggPSBvdmVyYWxsVmVsb2NpdHkueDtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZID0gb3ZlcmFsbFZlbG9jaXR5Lnk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5ID0gKGFicyhvdmVyYWxsVmVsb2NpdHkueCkgPiBhYnMob3ZlcmFsbFZlbG9jaXR5LnkpKSA/IG92ZXJhbGxWZWxvY2l0eS54IDogb3ZlcmFsbFZlbG9jaXR5Lnk7XG5cbiAgICBpbnB1dC5zY2FsZSA9IGZpcnN0TXVsdGlwbGUgPyBnZXRTY2FsZShmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAxO1xuICAgIGlucHV0LnJvdGF0aW9uID0gZmlyc3RNdWx0aXBsZSA/IGdldFJvdGF0aW9uKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDA7XG5cbiAgICBpbnB1dC5tYXhQb2ludGVycyA9ICFzZXNzaW9uLnByZXZJbnB1dCA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6ICgoaW5wdXQucG9pbnRlcnMubGVuZ3RoID5cbiAgICAgICAgc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpO1xuXG4gICAgY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KTtcblxuICAgIC8vIGZpbmQgdGhlIGNvcnJlY3QgdGFyZ2V0XG4gICAgdmFyIHRhcmdldCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICBpZiAoaGFzUGFyZW50KGlucHV0LnNyY0V2ZW50LnRhcmdldCwgdGFyZ2V0KSkge1xuICAgICAgICB0YXJnZXQgPSBpbnB1dC5zcmNFdmVudC50YXJnZXQ7XG4gICAgfVxuICAgIGlucHV0LnRhcmdldCA9IHRhcmdldDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyO1xuICAgIHZhciBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSB8fCB7fTtcbiAgICB2YXIgcHJldklucHV0ID0gc2Vzc2lvbi5wcmV2SW5wdXQgfHwge307XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9TVEFSVCB8fCBwcmV2SW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9FTkQpIHtcbiAgICAgICAgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBwcmV2SW5wdXQuZGVsdGFYIHx8IDAsXG4gICAgICAgICAgICB5OiBwcmV2SW5wdXQuZGVsdGFZIHx8IDBcbiAgICAgICAgfTtcblxuICAgICAgICBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhID0ge1xuICAgICAgICAgICAgeDogY2VudGVyLngsXG4gICAgICAgICAgICB5OiBjZW50ZXIueVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlucHV0LmRlbHRhWCA9IHByZXZEZWx0YS54ICsgKGNlbnRlci54IC0gb2Zmc2V0LngpO1xuICAgIGlucHV0LmRlbHRhWSA9IHByZXZEZWx0YS55ICsgKGNlbnRlci55IC0gb2Zmc2V0LnkpO1xufVxuXG4vKipcbiAqIHZlbG9jaXR5IGlzIGNhbGN1bGF0ZWQgZXZlcnkgeCBtc1xuICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgbGFzdCA9IHNlc3Npb24ubGFzdEludGVydmFsIHx8IGlucHV0LFxuICAgICAgICBkZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBsYXN0LnRpbWVTdGFtcCxcbiAgICAgICAgdmVsb2NpdHksIHZlbG9jaXR5WCwgdmVsb2NpdHlZLCBkaXJlY3Rpb247XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0NBTkNFTCAmJiAoZGVsdGFUaW1lID4gQ09NUFVURV9JTlRFUlZBTCB8fCBsYXN0LnZlbG9jaXR5ID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBpbnB1dC5kZWx0YVggLSBsYXN0LmRlbHRhWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGlucHV0LmRlbHRhWSAtIGxhc3QuZGVsdGFZO1xuXG4gICAgICAgIHZhciB2ID0gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCBkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgIHZlbG9jaXR5WCA9IHYueDtcbiAgICAgICAgdmVsb2NpdHlZID0gdi55O1xuICAgICAgICB2ZWxvY2l0eSA9IChhYnModi54KSA+IGFicyh2LnkpKSA/IHYueCA6IHYueTtcbiAgICAgICAgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGRlbHRhWCwgZGVsdGFZKTtcblxuICAgICAgICBzZXNzaW9uLmxhc3RJbnRlcnZhbCA9IGlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVzZSBsYXRlc3QgdmVsb2NpdHkgaW5mbyBpZiBpdCBkb2Vzbid0IG92ZXJ0YWtlIGEgbWluaW11bSBwZXJpb2RcbiAgICAgICAgdmVsb2NpdHkgPSBsYXN0LnZlbG9jaXR5O1xuICAgICAgICB2ZWxvY2l0eVggPSBsYXN0LnZlbG9jaXR5WDtcbiAgICAgICAgdmVsb2NpdHlZID0gbGFzdC52ZWxvY2l0eVk7XG4gICAgICAgIGRpcmVjdGlvbiA9IGxhc3QuZGlyZWN0aW9uO1xuICAgIH1cblxuICAgIGlucHV0LnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgaW5wdXQudmVsb2NpdHlYID0gdmVsb2NpdHlYO1xuICAgIGlucHV0LnZlbG9jaXR5WSA9IHZlbG9jaXR5WTtcbiAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG59XG5cbi8qKlxuICogY3JlYXRlIGEgc2ltcGxlIGNsb25lIGZyb20gdGhlIGlucHV0IHVzZWQgZm9yIHN0b3JhZ2Ugb2YgZmlyc3RJbnB1dCBhbmQgZmlyc3RNdWx0aXBsZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBjbG9uZWRJbnB1dERhdGFcbiAqL1xuZnVuY3Rpb24gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpIHtcbiAgICAvLyBtYWtlIGEgc2ltcGxlIGNvcHkgb2YgdGhlIHBvaW50ZXJzIGJlY2F1c2Ugd2Ugd2lsbCBnZXQgYSByZWZlcmVuY2UgaWYgd2UgZG9uJ3RcbiAgICAvLyB3ZSBvbmx5IG5lZWQgY2xpZW50WFkgZm9yIHRoZSBjYWxjdWxhdGlvbnNcbiAgICB2YXIgcG9pbnRlcnMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBpbnB1dC5wb2ludGVycy5sZW5ndGgpIHtcbiAgICAgICAgcG9pbnRlcnNbaV0gPSB7XG4gICAgICAgICAgICBjbGllbnRYOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRYKSxcbiAgICAgICAgICAgIGNsaWVudFk6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0aW1lU3RhbXA6IG5vdygpLFxuICAgICAgICBwb2ludGVyczogcG9pbnRlcnMsXG4gICAgICAgIGNlbnRlcjogZ2V0Q2VudGVyKHBvaW50ZXJzKSxcbiAgICAgICAgZGVsdGFYOiBpbnB1dC5kZWx0YVgsXG4gICAgICAgIGRlbHRhWTogaW5wdXQuZGVsdGFZXG4gICAgfTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGNlbnRlciBvZiBhbGwgdGhlIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBwb2ludGVyc1xuICogQHJldHVybiB7T2JqZWN0fSBjZW50ZXIgY29udGFpbnMgYHhgIGFuZCBgeWAgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBnZXRDZW50ZXIocG9pbnRlcnMpIHtcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBubyBuZWVkIHRvIGxvb3Agd2hlbiBvbmx5IG9uZSB0b3VjaFxuICAgIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WCksXG4gICAgICAgICAgICB5OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciB4ID0gMCwgeSA9IDAsIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcG9pbnRlcnNMZW5ndGgpIHtcbiAgICAgICAgeCArPSBwb2ludGVyc1tpXS5jbGllbnRYO1xuICAgICAgICB5ICs9IHBvaW50ZXJzW2ldLmNsaWVudFk7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB4OiByb3VuZCh4IC8gcG9pbnRlcnNMZW5ndGgpLFxuICAgICAgICB5OiByb3VuZCh5IC8gcG9pbnRlcnNMZW5ndGgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHZlbG9jaXR5IGJldHdlZW4gdHdvIHBvaW50cy4gdW5pdCBpcyBpbiBweCBwZXIgbXMuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsdGFUaW1lXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge09iamVjdH0gdmVsb2NpdHkgYHhgIGFuZCBgeWBcbiAqL1xuZnVuY3Rpb24gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCB4LCB5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogeCAvIGRlbHRhVGltZSB8fCAwLFxuICAgICAgICB5OiB5IC8gZGVsdGFUaW1lIHx8IDBcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpcmVjdGlvblxuICovXG5mdW5jdGlvbiBnZXREaXJlY3Rpb24oeCwgeSkge1xuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgIHJldHVybiBESVJFQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICBpZiAoYWJzKHgpID49IGFicyh5KSkge1xuICAgICAgICByZXR1cm4geCA8IDAgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICB9XG4gICAgcmV0dXJuIHkgPCAwID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhYnNvbHV0ZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMSB7eCwgeX1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwMiB7eCwgeX1cbiAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcbiAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcHJvcHMgPSBQUk9QU19YWTtcbiAgICB9XG4gICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG4gICAgICAgIHkgPSBwMltwcm9wc1sxXV0gLSBwMVtwcm9wc1sxXV07XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KCh4ICogeCkgKyAoeSAqIHkpKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge09iamVjdH0gcDFcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMlxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuICovXG5mdW5jdGlvbiBnZXRBbmdsZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih5LCB4KSAqIDE4MCAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSByb3RhdGlvbiBkZWdyZWVzIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHJvdGF0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldFJvdGF0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0QW5nbGUoZW5kWzFdLCBlbmRbMF0sIFBST1BTX0NMSUVOVF9YWSkgKyBnZXRBbmdsZShzdGFydFsxXSwgc3RhcnRbMF0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBzY2FsZSBmYWN0b3IgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIG5vIHNjYWxlIGlzIDEsIGFuZCBnb2VzIGRvd24gdG8gMCB3aGVuIHBpbmNoZWQgdG9nZXRoZXIsIGFuZCBiaWdnZXIgd2hlbiBwaW5jaGVkIG91dFxuICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuICogQHJldHVybiB7TnVtYmVyfSBzY2FsZVxuICovXG5mdW5jdGlvbiBnZXRTY2FsZShzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGdldERpc3RhbmNlKGVuZFswXSwgZW5kWzFdLCBQUk9QU19DTElFTlRfWFkpIC8gZ2V0RGlzdGFuY2Uoc3RhcnRbMF0sIHN0YXJ0WzFdLCBQUk9QU19DTElFTlRfWFkpO1xufVxuXG52YXIgTU9VU0VfSU5QVVRfTUFQID0ge1xuICAgIG1vdXNlZG93bjogSU5QVVRfU1RBUlQsXG4gICAgbW91c2Vtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIG1vdXNldXA6IElOUFVUX0VORFxufTtcblxudmFyIE1PVVNFX0VMRU1FTlRfRVZFTlRTID0gJ21vdXNlZG93bic7XG52YXIgTU9VU0VfV0lORE9XX0VWRU5UUyA9ICdtb3VzZW1vdmUgbW91c2V1cCc7XG5cbi8qKlxuICogTW91c2UgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIE1vdXNlSW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gTU9VU0VfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IE1PVVNFX1dJTkRPV19FVkVOVFM7XG5cbiAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTsgLy8gbW91c2Vkb3duIHN0YXRlXG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1FaGFuZGxlcihldikge1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gTU9VU0VfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIG9uIHN0YXJ0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgbGVmdCBtb3VzZSBidXR0b24gZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgZXYuYnV0dG9uID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX01PVkUgJiYgZXYud2hpY2ggIT09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9IElOUFVUX0VORDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoIXRoaXMucHJlc3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX01PVVNFLFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG52YXIgUE9JTlRFUl9JTlBVVF9NQVAgPSB7XG4gICAgcG9pbnRlcmRvd246IElOUFVUX1NUQVJULFxuICAgIHBvaW50ZXJtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHBvaW50ZXJ1cDogSU5QVVRfRU5ELFxuICAgIHBvaW50ZXJjYW5jZWw6IElOUFVUX0NBTkNFTCxcbiAgICBwb2ludGVyb3V0OiBJTlBVVF9DQU5DRUxcbn07XG5cbi8vIGluIElFMTAgdGhlIHBvaW50ZXIgdHlwZXMgaXMgZGVmaW5lZCBhcyBhbiBlbnVtXG52YXIgSUUxMF9QT0lOVEVSX1RZUEVfRU5VTSA9IHtcbiAgICAyOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgIDM6IElOUFVUX1RZUEVfUEVOLFxuICAgIDQ6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgNTogSU5QVVRfVFlQRV9LSU5FQ1QgLy8gc2VlIGh0dHBzOi8vdHdpdHRlci5jb20vamFjb2Jyb3NzaS9zdGF0dXMvNDgwNTk2NDM4NDg5ODkwODE2XG59O1xuXG52YXIgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdwb2ludGVyZG93bic7XG52YXIgUE9JTlRFUl9XSU5ET1dfRVZFTlRTID0gJ3BvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsJztcblxuLy8gSUUxMCBoYXMgcHJlZml4ZWQgc3VwcG9ydCwgYW5kIGNhc2Utc2Vuc2l0aXZlXG5pZiAod2luZG93Lk1TUG9pbnRlckV2ZW50ICYmICF3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdNU1BvaW50ZXJEb3duJztcbiAgICBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAnTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWwnO1xufVxuXG4vKipcbiAqIFBvaW50ZXIgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFBvaW50ZXJFdmVudElucHV0KCkge1xuICAgIHRoaXMuZXZFbCA9IFBPSU5URVJfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFBPSU5URVJfV0lORE9XX0VWRU5UUztcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnN0b3JlID0gKHRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHMgPSBbXSk7XG59XG5cbmluaGVyaXQoUG9pbnRlckV2ZW50SW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFBFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnN0b3JlO1xuICAgICAgICB2YXIgcmVtb3ZlUG9pbnRlciA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBldmVudFR5cGVOb3JtYWxpemVkID0gZXYudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ21zJywgJycpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gUE9JTlRFUl9JTlBVVF9NQVBbZXZlbnRUeXBlTm9ybWFsaXplZF07XG4gICAgICAgIHZhciBwb2ludGVyVHlwZSA9IElFMTBfUE9JTlRFUl9UWVBFX0VOVU1bZXYucG9pbnRlclR5cGVdIHx8IGV2LnBvaW50ZXJUeXBlO1xuXG4gICAgICAgIHZhciBpc1RvdWNoID0gKHBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpO1xuXG4gICAgICAgIC8vIGdldCBpbmRleCBvZiB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG4gICAgICAgIHZhciBzdG9yZUluZGV4ID0gaW5BcnJheShzdG9yZSwgZXYucG9pbnRlcklkLCAncG9pbnRlcklkJyk7XG5cbiAgICAgICAgLy8gc3RhcnQgYW5kIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKGV2LmJ1dHRvbiA9PT0gMCB8fCBpc1RvdWNoKSkge1xuICAgICAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcmUucHVzaChldik7XG4gICAgICAgICAgICAgICAgc3RvcmVJbmRleCA9IHN0b3JlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgICAgIHJlbW92ZVBvaW50ZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXQgbm90IGZvdW5kLCBzbyB0aGUgcG9pbnRlciBoYXNuJ3QgYmVlbiBkb3duIChzbyBpdCdzIHByb2JhYmx5IGEgaG92ZXIpXG4gICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgc3RvcmVbc3RvcmVJbmRleF0gPSBldjtcblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogc3RvcmUsXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGUsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlbW92ZVBvaW50ZXIpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHRoZSBzdG9yZVxuICAgICAgICAgICAgc3RvcmUuc3BsaWNlKHN0b3JlSW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbnZhciBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0JztcbnZhciBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8qKlxuICogVG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFNpbmdsZVRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUztcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU2luZ2xlVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBURWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIHNob3VsZCB3ZSBoYW5kbGUgdGhlIHRvdWNoIGV2ZW50cz9cbiAgICAgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b3VjaGVzID0gbm9ybWFsaXplU2luZ2xlVG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcblxuICAgICAgICAvLyB3aGVuIGRvbmUsIHJlc2V0IHRoZSBzdGFydGVkIHN0YXRlXG4gICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgdG91Y2hlc1swXS5sZW5ndGggLSB0b3VjaGVzWzFdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAdGhpcyB7VG91Y2hJbnB1dH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU2luZ2xlVG91Y2hlcyhldiwgdHlwZSkge1xuICAgIHZhciBhbGwgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciBjaGFuZ2VkID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyk7XG5cbiAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIGFsbCA9IHVuaXF1ZUFycmF5KGFsbC5jb25jYXQoY2hhbmdlZCksICdpZGVudGlmaWVyJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFthbGwsIGNoYW5nZWRdO1xufVxuXG52YXIgVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBUT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBNdWx0aS11c2VyIHRvdWNoIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBUb3VjaElucHV0KCkge1xuICAgIHRoaXMuZXZUYXJnZXQgPSBUT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMudGFyZ2V0SWRzID0ge307XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFRvdWNoSW5wdXQsIElucHV0LCB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTVRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFRPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBnZXRUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuICAgICAgICBpZiAoIXRvdWNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBnZXRUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbFRvdWNoZXMgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciB0YXJnZXRJZHMgPSB0aGlzLnRhcmdldElkcztcblxuICAgIC8vIHdoZW4gdGhlcmUgaXMgb25seSBvbmUgdG91Y2gsIHRoZSBwcm9jZXNzIGNhbiBiZSBzaW1wbGlmaWVkXG4gICAgaWYgKHR5cGUgJiAoSU5QVVRfU1RBUlQgfCBJTlBVVF9NT1ZFKSAmJiBhbGxUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0YXJnZXRJZHNbYWxsVG91Y2hlc1swXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgIHJldHVybiBbYWxsVG91Y2hlcywgYWxsVG91Y2hlc107XG4gICAgfVxuXG4gICAgdmFyIGksXG4gICAgICAgIHRhcmdldFRvdWNoZXMsXG4gICAgICAgIGNoYW5nZWRUb3VjaGVzID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzID0gW10sXG4gICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXG4gICAgLy8gZ2V0IHRhcmdldCB0b3VjaGVzIGZyb20gdG91Y2hlc1xuICAgIHRhcmdldFRvdWNoZXMgPSBhbGxUb3VjaGVzLmZpbHRlcihmdW5jdGlvbih0b3VjaCkge1xuICAgICAgICByZXR1cm4gaGFzUGFyZW50KHRvdWNoLnRhcmdldCwgdGFyZ2V0KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbGxlY3QgdG91Y2hlc1xuICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFyZ2V0SWRzW3RhcmdldFRvdWNoZXNbaV0uaWRlbnRpZmllcl0gPSB0cnVlO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmlsdGVyIGNoYW5nZWQgdG91Y2hlcyB0byBvbmx5IGNvbnRhaW4gdG91Y2hlcyB0aGF0IGV4aXN0IGluIHRoZSBjb2xsZWN0ZWQgdGFyZ2V0IGlkc1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl0pIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzLnB1c2goY2hhbmdlZFRvdWNoZXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xlYW51cCByZW1vdmVkIHRvdWNoZXNcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgaWYgKCFjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICAgIC8vIG1lcmdlIHRhcmdldFRvdWNoZXMgd2l0aCBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyBzbyBpdCBjb250YWlucyBBTEwgdG91Y2hlcywgaW5jbHVkaW5nICdlbmQnIGFuZCAnY2FuY2VsJ1xuICAgICAgICB1bmlxdWVBcnJheSh0YXJnZXRUb3VjaGVzLmNvbmNhdChjaGFuZ2VkVGFyZ2V0VG91Y2hlcyksICdpZGVudGlmaWVyJywgdHJ1ZSksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzXG4gICAgXTtcbn1cblxuLyoqXG4gKiBDb21iaW5lZCB0b3VjaCBhbmQgbW91c2UgaW5wdXRcbiAqXG4gKiBUb3VjaCBoYXMgYSBoaWdoZXIgcHJpb3JpdHkgdGhlbiBtb3VzZSwgYW5kIHdoaWxlIHRvdWNoaW5nIG5vIG1vdXNlIGV2ZW50cyBhcmUgYWxsb3dlZC5cbiAqIFRoaXMgYmVjYXVzZSB0b3VjaCBkZXZpY2VzIGFsc28gZW1pdCBtb3VzZSBldmVudHMgd2hpbGUgZG9pbmcgYSB0b3VjaC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cblxudmFyIERFRFVQX1RJTUVPVVQgPSAyNTAwO1xudmFyIERFRFVQX0RJU1RBTkNFID0gMjU7XG5cbmZ1bmN0aW9uIFRvdWNoTW91c2VJbnB1dCgpIHtcbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdmFyIGhhbmRsZXIgPSBiaW5kRm4odGhpcy5oYW5kbGVyLCB0aGlzKTtcbiAgICB0aGlzLnRvdWNoID0gbmV3IFRvdWNoSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcbiAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcblxuICAgIHRoaXMucHJpbWFyeVRvdWNoID0gbnVsbDtcbiAgICB0aGlzLmxhc3RUb3VjaGVzID0gW107XG59XG5cbmluaGVyaXQoVG91Y2hNb3VzZUlucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzXG4gICAgICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXRFdmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBUTUVoYW5kbGVyKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSkge1xuICAgICAgICB2YXIgaXNUb3VjaCA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCksXG4gICAgICAgICAgICBpc01vdXNlID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX01PVVNFKTtcblxuICAgICAgICBpZiAoaXNNb3VzZSAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2hlbiB3ZSdyZSBpbiBhIHRvdWNoIGV2ZW50LCByZWNvcmQgdG91Y2hlcyB0byAgZGUtZHVwZSBzeW50aGV0aWMgbW91c2UgZXZlbnRcbiAgICAgICAgaWYgKGlzVG91Y2gpIHtcbiAgICAgICAgICAgIHJlY29yZFRvdWNoZXMuY2FsbCh0aGlzLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW91c2UgJiYgaXNTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGlucHV0RGF0YSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvdWNoLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tb3VzZS5kZXN0cm95KCk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIHJlY29yZFRvdWNoZXMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcbiAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBldmVudERhdGEuY2hhbmdlZFBvaW50ZXJzWzBdLmlkZW50aWZpZXI7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TGFzdFRvdWNoKGV2ZW50RGF0YSkge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF07XG5cbiAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5wcmltYXJ5VG91Y2gpIHtcbiAgICAgICAgdmFyIGxhc3RUb3VjaCA9IHt4OiB0b3VjaC5jbGllbnRYLCB5OiB0b3VjaC5jbGllbnRZfTtcbiAgICAgICAgdGhpcy5sYXN0VG91Y2hlcy5wdXNoKGxhc3RUb3VjaCk7XG4gICAgICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuICAgICAgICB2YXIgcmVtb3ZlTGFzdFRvdWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGx0cy5pbmRleE9mKGxhc3RUb3VjaCk7XG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbHRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2V0VGltZW91dChyZW1vdmVMYXN0VG91Y2gsIERFRFVQX1RJTUVPVVQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNTeW50aGV0aWNFdmVudChldmVudERhdGEpIHtcbiAgICB2YXIgeCA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRYLCB5ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxhc3RUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5sYXN0VG91Y2hlc1tpXTtcbiAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHQueCksIGR5ID0gTWF0aC5hYnMoeSAtIHQueSk7XG4gICAgICAgIGlmIChkeCA8PSBERURVUF9ESVNUQU5DRSAmJiBkeSA8PSBERURVUF9ESVNUQU5DRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgUFJFRklYRURfVE9VQ0hfQUNUSU9OID0gcHJlZml4ZWQoVEVTVF9FTEVNRU5ULnN0eWxlLCAndG91Y2hBY3Rpb24nKTtcbnZhciBOQVRJVkVfVE9VQ0hfQUNUSU9OID0gUFJFRklYRURfVE9VQ0hfQUNUSU9OICE9PSB1bmRlZmluZWQ7XG5cbi8vIG1hZ2ljYWwgdG91Y2hBY3Rpb24gdmFsdWVcbnZhciBUT1VDSF9BQ1RJT05fQ09NUFVURSA9ICdjb21wdXRlJztcbnZhciBUT1VDSF9BQ1RJT05fQVVUTyA9ICdhdXRvJztcbnZhciBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OID0gJ21hbmlwdWxhdGlvbic7IC8vIG5vdCBpbXBsZW1lbnRlZFxudmFyIFRPVUNIX0FDVElPTl9OT05FID0gJ25vbmUnO1xudmFyIFRPVUNIX0FDVElPTl9QQU5fWCA9ICdwYW4teCc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9ZID0gJ3Bhbi15JztcbnZhciBUT1VDSF9BQ1RJT05fTUFQID0gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpO1xuXG4vKipcbiAqIFRvdWNoIEFjdGlvblxuICogc2V0cyB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgb3IgdXNlcyB0aGUganMgYWx0ZXJuYXRpdmVcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVG91Y2hBY3Rpb24obWFuYWdlciwgdmFsdWUpIHtcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgIHRoaXMuc2V0KHZhbHVlKTtcbn1cblxuVG91Y2hBY3Rpb24ucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWUgb24gdGhlIGVsZW1lbnQgb3IgZW5hYmxlIHRoZSBwb2x5ZmlsbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gZmluZCBvdXQgdGhlIHRvdWNoLWFjdGlvbiBieSB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKHZhbHVlID09IFRPVUNIX0FDVElPTl9DT01QVVRFKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE5BVElWRV9UT1VDSF9BQ1RJT04gJiYgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGUgJiYgVE9VQ0hfQUNUSU9OX01BUFt2YWx1ZV0pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW1BSRUZJWEVEX1RPVUNIX0FDVElPTl0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGlvbnMgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICoganVzdCByZS1zZXQgdGhlIHRvdWNoQWN0aW9uIHZhbHVlXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjb21wdXRlIHRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IGJhc2VkIG9uIHRoZSByZWNvZ25pemVyJ3Mgc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIGNvbXB1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBlYWNoKHRoaXMubWFuYWdlci5yZWNvZ25pemVycywgZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICAgICAgaWYgKGJvb2xPckZuKHJlY29nbml6ZXIub3B0aW9ucy5lbmFibGUsIFtyZWNvZ25pemVyXSkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucy5jb25jYXQocmVjb2duaXplci5nZXRUb3VjaEFjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zLmpvaW4oJyAnKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbiBlYWNoIGlucHV0IGN5Y2xlIGFuZCBwcm92aWRlcyB0aGUgcHJldmVudGluZyBvZiB0aGUgYnJvd3NlciBiZWhhdmlvclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0czogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNyY0V2ZW50ID0gaW5wdXQuc3JjRXZlbnQ7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5vZmZzZXREaXJlY3Rpb247XG5cbiAgICAgICAgLy8gaWYgdGhlIHRvdWNoIGFjdGlvbiBkaWQgcHJldmVudGVkIG9uY2UgdGhpcyBzZXNzaW9uXG4gICAgICAgIGlmICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgdmFyIGhhc05vbmUgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgICAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9ZXTtcbiAgICAgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWF07XG5cbiAgICAgICAgaWYgKGhhc05vbmUpIHtcbiAgICAgICAgICAgIC8vZG8gbm90IHByZXZlbnQgZGVmYXVsdHMgaWYgdGhpcyBpcyBhIHRhcCBnZXN0dXJlXG5cbiAgICAgICAgICAgIHZhciBpc1RhcFBvaW50ZXIgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICB2YXIgaXNUYXBNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgMjtcbiAgICAgICAgICAgIHZhciBpc1RhcFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IDI1MDtcblxuICAgICAgICAgICAgaWYgKGlzVGFwUG9pbnRlciAmJiBpc1RhcE1vdmVtZW50ICYmIGlzVGFwVG91Y2hUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICAgICAgLy8gYHBhbi14IHBhbi15YCBtZWFucyBicm93c2VyIGhhbmRsZXMgYWxsIHNjcm9sbGluZy9wYW5uaW5nLCBkbyBub3QgcHJldmVudFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc05vbmUgfHxcbiAgICAgICAgICAgIChoYXNQYW5ZICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB8fFxuICAgICAgICAgICAgKGhhc1BhblggJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudFNyYyhzcmNFdmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FsbCBwcmV2ZW50RGVmYXVsdCB0byBwcmV2ZW50IHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvciAoc2Nyb2xsaW5nIGluIG1vc3QgY2FzZXMpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNyY0V2ZW50XG4gICAgICovXG4gICAgcHJldmVudFNyYzogZnVuY3Rpb24oc3JjRXZlbnQpIHtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIHdoZW4gdGhlIHRvdWNoQWN0aW9ucyBhcmUgY29sbGVjdGVkIHRoZXkgYXJlIG5vdCBhIHZhbGlkIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIGNsZWFuIHRoaW5ncyB1cC4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvbnNcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zKSB7XG4gICAgLy8gbm9uZVxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cbiAgICAvLyBpZiBib3RoIHBhbi14IGFuZCBwYW4teSBhcmUgc2V0IChkaWZmZXJlbnQgcmVjb2duaXplcnNcbiAgICAvLyBmb3IgZGlmZmVyZW50IGRpcmVjdGlvbnMsIGUuZy4gaG9yaXpvbnRhbCBwYW4gYnV0IHZlcnRpY2FsIHN3aXBlPylcbiAgICAvLyB3ZSBuZWVkIG5vbmUgKGFzIG90aGVyd2lzZSB3aXRoIHBhbi14IHBhbi15IGNvbWJpbmVkIG5vbmUgb2YgdGhlc2VcbiAgICAvLyByZWNvZ25pemVycyB3aWxsIHdvcmssIHNpbmNlIHRoZSBicm93c2VyIHdvdWxkIGhhbmRsZSBhbGwgcGFubmluZ1xuICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIC8vIHBhbi14IE9SIHBhbi15XG4gICAgaWYgKGhhc1BhblggfHwgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gaGFzUGFuWCA/IFRPVUNIX0FDVElPTl9QQU5fWCA6IFRPVUNIX0FDVElPTl9QQU5fWTtcbiAgICB9XG5cbiAgICAvLyBtYW5pcHVsYXRpb25cbiAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTikpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT047XG4gICAgfVxuXG4gICAgcmV0dXJuIFRPVUNIX0FDVElPTl9BVVRPO1xufVxuXG5mdW5jdGlvbiBnZXRUb3VjaEFjdGlvblByb3BzKCkge1xuICAgIGlmICghTkFUSVZFX1RPVUNIX0FDVElPTikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB0b3VjaE1hcCA9IHt9O1xuICAgIHZhciBjc3NTdXBwb3J0cyA9IHdpbmRvdy5DU1MgJiYgd2luZG93LkNTUy5zdXBwb3J0cztcbiAgICBbJ2F1dG8nLCAnbWFuaXB1bGF0aW9uJywgJ3Bhbi15JywgJ3Bhbi14JywgJ3Bhbi14IHBhbi15JywgJ25vbmUnXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCkge1xuXG4gICAgICAgIC8vIElmIGNzcy5zdXBwb3J0cyBpcyBub3Qgc3VwcG9ydGVkIGJ1dCB0aGVyZSBpcyBuYXRpdmUgdG91Y2gtYWN0aW9uIGFzc3VtZSBpdCBzdXBwb3J0c1xuICAgICAgICAvLyBhbGwgdmFsdWVzLiBUaGlzIGlzIHRoZSBjYXNlIGZvciBJRSAxMCBhbmQgMTEuXG4gICAgICAgIHRvdWNoTWFwW3ZhbF0gPSBjc3NTdXBwb3J0cyA/IHdpbmRvdy5DU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsIHZhbCkgOiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0b3VjaE1hcDtcbn1cblxuLyoqXG4gKiBSZWNvZ25pemVyIGZsb3cgZXhwbGFpbmVkOyAqXG4gKiBBbGwgcmVjb2duaXplcnMgaGF2ZSB0aGUgaW5pdGlhbCBzdGF0ZSBvZiBQT1NTSUJMRSB3aGVuIGEgaW5wdXQgc2Vzc2lvbiBzdGFydHMuXG4gKiBUaGUgZGVmaW5pdGlvbiBvZiBhIGlucHV0IHNlc3Npb24gaXMgZnJvbSB0aGUgZmlyc3QgaW5wdXQgdW50aWwgdGhlIGxhc3QgaW5wdXQsIHdpdGggYWxsIGl0J3MgbW92ZW1lbnQgaW4gaXQuICpcbiAqIEV4YW1wbGUgc2Vzc2lvbiBmb3IgbW91c2UtaW5wdXQ6IG1vdXNlZG93biAtPiBtb3VzZW1vdmUgLT4gbW91c2V1cFxuICpcbiAqIE9uIGVhY2ggcmVjb2duaXppbmcgY3ljbGUgKHNlZSBNYW5hZ2VyLnJlY29nbml6ZSkgdGhlIC5yZWNvZ25pemUoKSBtZXRob2QgaXMgZXhlY3V0ZWRcbiAqIHdoaWNoIGRldGVybWluZXMgd2l0aCBzdGF0ZSBpdCBzaG91bGQgYmUuXG4gKlxuICogSWYgdGhlIHJlY29nbml6ZXIgaGFzIHRoZSBzdGF0ZSBGQUlMRUQsIENBTkNFTExFRCBvciBSRUNPR05JWkVEIChlcXVhbHMgRU5ERUQpLCBpdCBpcyByZXNldCB0b1xuICogUE9TU0lCTEUgdG8gZ2l2ZSBpdCBhbm90aGVyIGNoYW5nZSBvbiB0aGUgbmV4dCBjeWNsZS5cbiAqXG4gKiAgICAgICAgICAgICAgIFBvc3NpYmxlXG4gKiAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgKy0tLS0tKy0tLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgKy0tLS0tKy0tLS0tKyAgICAgICAgICAgICAgIHxcbiAqICAgICAgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgIHxcbiAqICAgRmFpbGVkICAgICAgQ2FuY2VsbGVkICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLSstLS0tLS0rXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgUmVjb2duaXplZCAgICAgICBCZWdhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2VkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kZWQvUmVjb2duaXplZFxuICovXG52YXIgU1RBVEVfUE9TU0lCTEUgPSAxO1xudmFyIFNUQVRFX0JFR0FOID0gMjtcbnZhciBTVEFURV9DSEFOR0VEID0gNDtcbnZhciBTVEFURV9FTkRFRCA9IDg7XG52YXIgU1RBVEVfUkVDT0dOSVpFRCA9IFNUQVRFX0VOREVEO1xudmFyIFNUQVRFX0NBTkNFTExFRCA9IDE2O1xudmFyIFNUQVRFX0ZBSUxFRCA9IDMyO1xuXG4vKipcbiAqIFJlY29nbml6ZXJcbiAqIEV2ZXJ5IHJlY29nbml6ZXIgbmVlZHMgdG8gZXh0ZW5kIGZyb20gdGhpcyBjbGFzcy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gUmVjb2duaXplcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMuaWQgPSB1bmlxdWVJZCgpO1xuXG4gICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcblxuICAgIC8vIGRlZmF1bHQgaXMgZW5hYmxlIHRydWVcbiAgICB0aGlzLm9wdGlvbnMuZW5hYmxlID0gaWZVbmRlZmluZWQodGhpcy5vcHRpb25zLmVuYWJsZSwgdHJ1ZSk7XG5cbiAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG5cbiAgICB0aGlzLnNpbXVsdGFuZW91cyA9IHt9O1xuICAgIHRoaXMucmVxdWlyZUZhaWwgPSBbXTtcbn1cblxuUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7fSxcblxuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtSZWNvZ25pemVyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBhbHNvIHVwZGF0ZSB0aGUgdG91Y2hBY3Rpb24sIGluIGNhc2Ugc29tZXRoaW5nIGNoYW5nZWQgYWJvdXQgdGhlIGRpcmVjdGlvbnMvZW5hYmxlZCBzdGF0ZVxuICAgICAgICB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaW11bHRhbmVvdXMgPSB0aGlzLnNpbXVsdGFuZW91cztcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoIXNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdKSB7XG4gICAgICAgICAgICBzaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXSA9IG90aGVyUmVjb2duaXplcjtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZWNvZ25pemVXaXRoKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSBzaW11bHRhbmVvdXMgbGluay4gaXQgZG9lc250IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgZHJvcFJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlY29nbml6ZVdpdGgnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplciBjYW4gb25seSBydW4gd2hlbiBhbiBvdGhlciBpcyBmYWlsaW5nXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ3JlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlcXVpcmVGYWlsID0gdGhpcy5yZXF1aXJlRmFpbDtcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoaW5BcnJheShyZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJlcXVpcmVGYWlsLnB1c2gob3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZXF1aXJlRmFpbHVyZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZHJvcCB0aGUgcmVxdWlyZUZhaWx1cmUgbGluay4gaXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHRoaXMucmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGhhcyByZXF1aXJlIGZhaWx1cmVzIGJvb2xlYW5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBoYXNSZXF1aXJlRmFpbHVyZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGggPiAwO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBpZiB0aGUgcmVjb2duaXplciBjYW4gcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNhblJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBZb3Ugc2hvdWxkIHVzZSBgdHJ5RW1pdGAgaW5zdGVhZCBvZiBgZW1pdGAgZGlyZWN0bHkgdG8gY2hlY2tcbiAgICAgKiB0aGF0IGFsbCB0aGUgbmVlZGVkIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQgYmVmb3JlIGVtaXR0aW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLm1hbmFnZXIuZW1pdChldmVudCwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gJ3BhbnN0YXJ0JyBhbmQgJ3Bhbm1vdmUnXG4gICAgICAgIGlmIChzdGF0ZSA8IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCk7IC8vIHNpbXBsZSAnZXZlbnROYW1lJyBldmVudHNcblxuICAgICAgICBpZiAoaW5wdXQuYWRkaXRpb25hbEV2ZW50KSB7IC8vIGFkZGl0aW9uYWwgZXZlbnQocGFubGVmdCwgcGFucmlnaHQsIHBpbmNoaW4sIHBpbmNob3V0Li4uKVxuICAgICAgICAgICAgZW1pdChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFuZW5kIGFuZCBwYW5jYW5jZWxcbiAgICAgICAgaWYgKHN0YXRlID49IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhhdCBhbGwgdGhlIHJlcXVpcmUgZmFpbHVyZSByZWNvZ25pemVycyBoYXMgZmFpbGVkLFxuICAgICAqIGlmIHRydWUsIGl0IGVtaXRzIGEgZ2VzdHVyZSBldmVudCxcbiAgICAgKiBvdGhlcndpc2UsIHNldHVwIHRoZSBzdGF0ZSB0byBGQUlMRUQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgdHJ5RW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuRW1pdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpdCdzIGZhaWxpbmcgYW55d2F5XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbiB3ZSBlbWl0P1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGNhbkVtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMucmVxdWlyZUZhaWxbaV0uc3RhdGUgJiAoU1RBVEVfRkFJTEVEIHwgU1RBVEVfUE9TU0lCTEUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIC8vIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgaW5wdXREYXRhXG4gICAgICAgIC8vIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGlucHV0RGF0YSB3aXRob3V0IG1lc3NpbmcgdXAgdGhlIG90aGVyIHJlY29nbml6ZXJzXG4gICAgICAgIHZhciBpbnB1dERhdGFDbG9uZSA9IGFzc2lnbih7fSwgaW5wdXREYXRhKTtcblxuICAgICAgICAvLyBpcyBpcyBlbmFibGVkIGFuZCBhbGxvdyByZWNvZ25pemluZz9cbiAgICAgICAgaWYgKCFib29sT3JGbih0aGlzLm9wdGlvbnMuZW5hYmxlLCBbdGhpcywgaW5wdXREYXRhQ2xvbmVdKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0IHdoZW4gd2UndmUgcmVhY2hlZCB0aGUgZW5kXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX1JFQ09HTklaRUQgfCBTVEFURV9DQU5DRUxMRUQgfCBTVEFURV9GQUlMRUQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5wcm9jZXNzKGlucHV0RGF0YUNsb25lKTtcblxuICAgICAgICAvLyB0aGUgcmVjb2duaXplciBoYXMgcmVjb2duaXplZCBhIGdlc3R1cmVcbiAgICAgICAgLy8gc28gdHJpZ2dlciBhbiBldmVudFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCB8IFNUQVRFX0NBTkNFTExFRCkpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5RW1pdChpbnB1dERhdGFDbG9uZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBzdGF0ZSBvZiB0aGUgcmVjb2duaXplclxuICAgICAqIHRoZSBhY3R1YWwgcmVjb2duaXppbmcgaGFwcGVucyBpbiB0aGlzIG1ldGhvZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqIEByZXR1cm5zIHtDb25zdH0gU1RBVEVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dERhdGEpIHsgfSwgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHByZWZlcnJlZCB0b3VjaC1hY3Rpb25cbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZ2VzdHVyZSBpc24ndCBhbGxvd2VkIHRvIHJlY29nbml6ZVxuICAgICAqIGxpa2Ugd2hlbiBhbm90aGVyIGlzIGJlaW5nIHJlY29nbml6ZWQgb3IgaXQgaXMgZGlzYWJsZWRcbiAgICAgKiBAdmlydHVhbFxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgfVxufTtcblxuLyoqXG4gKiBnZXQgYSB1c2FibGUgc3RyaW5nLCB1c2VkIGFzIGV2ZW50IHBvc3RmaXhcbiAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdGF0ZVxuICovXG5mdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSAmIFNUQVRFX0NBTkNFTExFRCkge1xuICAgICAgICByZXR1cm4gJ2NhbmNlbCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0VOREVEKSB7XG4gICAgICAgIHJldHVybiAnZW5kJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfQ0hBTkdFRCkge1xuICAgICAgICByZXR1cm4gJ21vdmUnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9CRUdBTikge1xuICAgICAgICByZXR1cm4gJ3N0YXJ0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGRpcmVjdGlvbiBjb25zIHRvIHN0cmluZ1xuICogQHBhcmFtIHtDb25zdH0gZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBkaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSB7XG4gICAgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fRE9XTikge1xuICAgICAgICByZXR1cm4gJ2Rvd24nO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9VUCkge1xuICAgICAgICByZXR1cm4gJ3VwJztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fTEVGVCkge1xuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGdldCBhIHJlY29nbml6ZXIgYnkgbmFtZSBpZiBpdCBpcyBib3VuZCB0byBhIG1hbmFnZXJcbiAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IG90aGVyUmVjb2duaXplclxuICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gKiBAcmV0dXJucyB7UmVjb2duaXplcn1cbiAqL1xuZnVuY3Rpb24gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHJlY29nbml6ZXIpIHtcbiAgICB2YXIgbWFuYWdlciA9IHJlY29nbml6ZXIubWFuYWdlcjtcbiAgICBpZiAobWFuYWdlcikge1xuICAgICAgICByZXR1cm4gbWFuYWdlci5nZXQob3RoZXJSZWNvZ25pemVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG90aGVyUmVjb2duaXplcjtcbn1cblxuLyoqXG4gKiBUaGlzIHJlY29nbml6ZXIgaXMganVzdCB1c2VkIGFzIGEgYmFzZSBmb3IgdGhlIHNpbXBsZSBhdHRyaWJ1dGUgcmVjb2duaXplcnMuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gQXR0clJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KEF0dHJSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICBwb2ludGVyczogMVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGNoZWNrIGlmIGl0IHRoZSByZWNvZ25pemVyIHJlY2VpdmVzIHZhbGlkIGlucHV0LCBsaWtlIGlucHV0LmRpc3RhbmNlID4gMTAuXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IHJlY29nbml6ZWRcbiAgICAgKi9cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvblBvaW50ZXJzID0gdGhpcy5vcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICByZXR1cm4gb3B0aW9uUG9pbnRlcnMgPT09IDAgfHwgaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25Qb2ludGVycztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgc3RhdGUgZm9yIHRoZSByZWNvZ25pemVyXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMgeyp9IFN0YXRlXG4gICAgICovXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGlucHV0LmV2ZW50VHlwZTtcblxuICAgICAgICB2YXIgaXNSZWNvZ25pemVkID0gc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEKTtcbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLmF0dHJUZXN0KGlucHV0KTtcblxuICAgICAgICAvLyBvbiBjYW5jZWwgaW5wdXQgYW5kIHdlJ3ZlIHJlY29nbml6ZWQgYmVmb3JlLCByZXR1cm4gU1RBVEVfQ0FOQ0VMTEVEXG4gICAgICAgIGlmIChpc1JlY29nbml6ZWQgJiYgKGV2ZW50VHlwZSAmIElOUFVUX0NBTkNFTCB8fCAhaXNWYWxpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NBTkNFTExFRDtcbiAgICAgICAgfSBlbHNlIGlmIChpc1JlY29nbml6ZWQgfHwgaXNWYWxpZCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0VOREVEO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghKHN0YXRlICYgU1RBVEVfQkVHQU4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX0JFR0FOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0hBTkdFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFBhblxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gYW5kIG1vdmVkIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGFuUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5wWCA9IG51bGw7XG4gICAgdGhpcy5wWSA9IG51bGw7XG59XG5cbmluaGVyaXQoUGFuUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBhblJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BhbicsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICBkaXJlY3Rpb246IERJUkVDVElPTl9BTExcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWN0aW9ucztcbiAgICB9LFxuXG4gICAgZGlyZWN0aW9uVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciBoYXNNb3ZlZCA9IHRydWU7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGlucHV0LmRpc3RhbmNlO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgeCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdmFyIHkgPSBpbnB1dC5kZWx0YVk7XG5cbiAgICAgICAgLy8gbG9jayB0byBheGlzP1xuICAgICAgICBpZiAoIShkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHggPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeCA8IDApID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB4ICE9IHRoaXMucFg7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeSA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh5IDwgMCkgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHkgIT0gdGhpcy5wWTtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gaGFzTW92ZWQgJiYgZGlzdGFuY2UgPiBvcHRpb25zLnRocmVzaG9sZCAmJiBkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbjtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4gfHwgKCEodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKSAmJiB0aGlzLmRpcmVjdGlvblRlc3QoaW5wdXQpKSk7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cbiAgICAgICAgdGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdGhpcy5wWSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0LmRpcmVjdGlvbik7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGluY2hcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVycyBhcmUgbW92aW5nIHRvd2FyZCAoem9vbS1pbikgb3IgYXdheSBmcm9tIGVhY2ggb3RoZXIgKHpvb20tb3V0KS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGluY2hSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUGluY2hSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwaW5jaCcsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnNjYWxlIC0gMSkgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5zY2FsZSAhPT0gMSkge1xuICAgICAgICAgICAgdmFyIGluT3V0ID0gaW5wdXQuc2NhbGUgPCAxID8gJ2luJyA6ICdvdXQnO1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgaW5PdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQcmVzc1xuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gZm9yIHggbXMgd2l0aG91dCBhbnkgbW92ZW1lbnQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUHJlc3NSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG59XG5cbmluaGVyaXQoUHJlc3NSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQcmVzc1JlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3ByZXNzJyxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIHRpbWU6IDI1MSwgLy8gbWluaW1hbCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIHByZXNzZWRcbiAgICAgICAgdGhyZXNob2xkOiA5IC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fQVVUT107XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICB2YXIgdmFsaWRUaW1lID0gaW5wdXQuZGVsdGFUaW1lID4gb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAoIXZhbGlkTW92ZW1lbnQgfHwgIXZhbGlkUG9pbnRlcnMgfHwgKGlucHV0LmV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmICF2YWxpZFRpbWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICB9LCBvcHRpb25zLnRpbWUsIHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0ICYmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyAndXAnLCBpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogUm90YXRlXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlciBhcmUgbW92aW5nIGluIGEgY2lyY3VsYXIgbW90aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBSb3RhdGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUm90YXRlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFJvdGF0ZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3JvdGF0ZScsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnJvdGF0aW9uKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTd2lwZVxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIG1vdmluZyBmYXN0ICh2ZWxvY2l0eSksIHdpdGggZW5vdWdoIGRpc3RhbmNlIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gU3dpcGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU3dpcGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgU3dpcGVSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdzd2lwZScsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHZlbG9jaXR5OiAwLjMsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFBhblJlY29nbml6ZXIucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyk7XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiAoRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICBkaXJlY3Rpb24gJiBpbnB1dC5vZmZzZXREaXJlY3Rpb24gJiZcbiAgICAgICAgICAgIGlucHV0LmRpc3RhbmNlID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCAmJlxuICAgICAgICAgICAgaW5wdXQubWF4UG9pbnRlcnMgPT0gdGhpcy5vcHRpb25zLnBvaW50ZXJzICYmXG4gICAgICAgICAgICBhYnModmVsb2NpdHkpID4gdGhpcy5vcHRpb25zLnZlbG9jaXR5ICYmIGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORDtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5vZmZzZXREaXJlY3Rpb24pO1xuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb24sIGlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEEgdGFwIGlzIGVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvaW5nIGEgc21hbGwgdGFwL2NsaWNrLiBNdWx0aXBsZSB0YXBzIGFyZSByZWNvZ25pemVkIGlmIHRoZXkgb2NjdXJcbiAqIGJldHdlZW4gdGhlIGdpdmVuIGludGVydmFsIGFuZCBwb3NpdGlvbi4gVGhlIGRlbGF5IG9wdGlvbiBjYW4gYmUgdXNlZCB0byByZWNvZ25pemUgbXVsdGktdGFwcyB3aXRob3V0IGZpcmluZ1xuICogYSBzaW5nbGUgdGFwLlxuICpcbiAqIFRoZSBldmVudERhdGEgZnJvbSB0aGUgZW1pdHRlZCBldmVudCBjb250YWlucyB0aGUgcHJvcGVydHkgYHRhcENvdW50YCwgd2hpY2ggY29udGFpbnMgdGhlIGFtb3VudCBvZlxuICogbXVsdGktdGFwcyBiZWluZyByZWNvZ25pemVkLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFRhcFJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgLy8gcHJldmlvdXMgdGltZSBhbmQgY2VudGVyLFxuICAgIC8vIHVzZWQgZm9yIHRhcCBjb3VudGluZ1xuICAgIHRoaXMucFRpbWUgPSBmYWxzZTtcbiAgICB0aGlzLnBDZW50ZXIgPSBmYWxzZTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG4gICAgdGhpcy5jb3VudCA9IDA7XG59XG5cbmluaGVyaXQoVGFwUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICd0YXAnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGFwczogMSxcbiAgICAgICAgaW50ZXJ2YWw6IDMwMCwgLy8gbWF4IHRpbWUgYmV0d2VlbiB0aGUgbXVsdGktdGFwIHRhcHNcbiAgICAgICAgdGltZTogMjUwLCAvLyBtYXggdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBkb3duIChsaWtlIGZpbmdlciBvbiB0aGUgc2NyZWVuKVxuICAgICAgICB0aHJlc2hvbGQ6IDksIC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgICAgIHBvc1RocmVzaG9sZDogMTAgLy8gYSBtdWx0aS10YXAgY2FuIGJlIGEgYml0IG9mZiB0aGUgaW5pdGlhbCBwb3NpdGlvblxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTl07XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IG9wdGlvbnMudGltZTtcblxuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgICAgaWYgKChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkgJiYgKHRoaXMuY291bnQgPT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAodmFsaWRNb3ZlbWVudCAmJiB2YWxpZFRvdWNoVGltZSAmJiB2YWxpZFBvaW50ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWxpZEludGVydmFsID0gdGhpcy5wVGltZSA/IChpbnB1dC50aW1lU3RhbXAgLSB0aGlzLnBUaW1lIDwgb3B0aW9ucy5pbnRlcnZhbCkgOiB0cnVlO1xuICAgICAgICAgICAgdmFyIHZhbGlkTXVsdGlUYXAgPSAhdGhpcy5wQ2VudGVyIHx8IGdldERpc3RhbmNlKHRoaXMucENlbnRlciwgaW5wdXQuY2VudGVyKSA8IG9wdGlvbnMucG9zVGhyZXNob2xkO1xuXG4gICAgICAgICAgICB0aGlzLnBUaW1lID0gaW5wdXQudGltZVN0YW1wO1xuICAgICAgICAgICAgdGhpcy5wQ2VudGVyID0gaW5wdXQuY2VudGVyO1xuXG4gICAgICAgICAgICBpZiAoIXZhbGlkTXVsdGlUYXAgfHwgIXZhbGlkSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXG4gICAgICAgICAgICAvLyBpZiB0YXAgY291bnQgbWF0Y2hlcyB3ZSBoYXZlIHJlY29nbml6ZWQgaXQsXG4gICAgICAgICAgICAvLyBlbHNlIGl0IGhhcyBiZWdhbiByZWNvZ25pemluZy4uLlxuICAgICAgICAgICAgdmFyIHRhcENvdW50ID0gdGhpcy5jb3VudCAlIG9wdGlvbnMudGFwcztcbiAgICAgICAgICAgIGlmICh0YXBDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGZhaWxpbmcgcmVxdWlyZW1lbnRzLCBpbW1lZGlhdGVseSB0cmlnZ2VyIHRoZSB0YXAgZXZlbnRcbiAgICAgICAgICAgICAgICAvLyBvciB3YWl0IGFzIGxvbmcgYXMgdGhlIG11bHRpdGFwIGludGVydmFsIHRvIHRyaWdnZXJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIGZhaWxUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFNUQVRFX1JFQ09HTklaRUQpIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2ltcGxlIHdheSB0byBjcmVhdGUgYSBtYW5hZ2VyIHdpdGggYSBkZWZhdWx0IHNldCBvZiByZWNvZ25pemVycy5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBIYW1tZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMucmVjb2duaXplcnMgPSBpZlVuZGVmaW5lZChvcHRpb25zLnJlY29nbml6ZXJzLCBIYW1tZXIuZGVmYXVsdHMucHJlc2V0KTtcbiAgICByZXR1cm4gbmV3IE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkhhbW1lci5WRVJTSU9OID0gJzIuMC43JztcblxuLyoqXG4gKiBkZWZhdWx0IHNldHRpbmdzXG4gKiBAbmFtZXNwYWNlXG4gKi9cbkhhbW1lci5kZWZhdWx0cyA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgaWYgRE9NIGV2ZW50cyBhcmUgYmVpbmcgdHJpZ2dlcmVkLlxuICAgICAqIEJ1dCB0aGlzIGlzIHNsb3dlciBhbmQgdW51c2VkIGJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbnMsIHNvIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBkb21FdmVudHM6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkvZmFsbGJhY2suXG4gICAgICogV2hlbiBzZXQgdG8gYGNvbXB1dGVgIGl0IHdpbGwgbWFnaWNhbGx5IHNldCB0aGUgY29ycmVjdCB2YWx1ZSBiYXNlZCBvbiB0aGUgYWRkZWQgcmVjb2duaXplcnMuXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKiBAZGVmYXVsdCBjb21wdXRlXG4gICAgICovXG4gICAgdG91Y2hBY3Rpb246IFRPVUNIX0FDVElPTl9DT01QVVRFLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGVuYWJsZTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEVYUEVSSU1FTlRBTCBGRUFUVVJFIC0tIGNhbiBiZSByZW1vdmVkL2NoYW5nZWRcbiAgICAgKiBDaGFuZ2UgdGhlIHBhcmVudCBpbnB1dCB0YXJnZXQgZWxlbWVudC5cbiAgICAgKiBJZiBOdWxsLCB0aGVuIGl0IGlzIGJlaW5nIHNldCB0aGUgdG8gbWFpbiBlbGVtZW50LlxuICAgICAqIEB0eXBlIHtOdWxsfEV2ZW50VGFyZ2V0fVxuICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICBpbnB1dFRhcmdldDogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIGZvcmNlIGFuIGlucHV0IGNsYXNzXG4gICAgICogQHR5cGUge051bGx8RnVuY3Rpb259XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0Q2xhc3M6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHJlY29nbml6ZXIgc2V0dXAgd2hlbiBjYWxsaW5nIGBIYW1tZXIoKWBcbiAgICAgKiBXaGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIgdGhlc2Ugd2lsbCBiZSBza2lwcGVkLlxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICBwcmVzZXQ6IFtcbiAgICAgICAgLy8gUmVjb2duaXplckNsYXNzLCBvcHRpb25zLCBbcmVjb2duaXplV2l0aCwgLi4uXSwgW3JlcXVpcmVGYWlsdXJlLCAuLi5dXG4gICAgICAgIFtSb3RhdGVSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX1dLFxuICAgICAgICBbUGluY2hSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX0sIFsncm90YXRlJ11dLFxuICAgICAgICBbU3dpcGVSZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH1dLFxuICAgICAgICBbUGFuUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9LCBbJ3N3aXBlJ11dLFxuICAgICAgICBbVGFwUmVjb2duaXplcl0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyLCB7ZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyfSwgWyd0YXAnXV0sXG4gICAgICAgIFtQcmVzc1JlY29nbml6ZXJdXG4gICAgXSxcblxuICAgIC8qKlxuICAgICAqIFNvbWUgQ1NTIHByb3BlcnRpZXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSB0aGUgd29ya2luZyBvZiBIYW1tZXIuXG4gICAgICogQWRkIHRoZW0gdG8gdGhpcyBtZXRob2QgYW5kIHRoZXkgd2lsbCBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICBjc3NQcm9wczoge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGV4dCBzZWxlY3Rpb24gdG8gaW1wcm92ZSB0aGUgZHJhZ2dpbmcgZ2VzdHVyZS4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZSB0aGUgV2luZG93cyBQaG9uZSBncmlwcGVycyB3aGVuIHByZXNzaW5nIGFuIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGhlIGRlZmF1bHQgY2FsbG91dCBzaG93biB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldC5cbiAgICAgICAgICogT24gaU9TLCB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldCBzdWNoIGFzIGEgbGluaywgU2FmYXJpIGRpc3BsYXlzXG4gICAgICAgICAqIGEgY2FsbG91dCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5rLiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGlzYWJsZSB0aGF0IGNhbGxvdXQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hDYWxsb3V0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHpvb21pbmcgaXMgZW5hYmxlZC4gVXNlZCBieSBJRTEwPlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIGNvbnRlbnRab29taW5nOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGF0IGFuIGVudGlyZSBlbGVtZW50IHNob3VsZCBiZSBkcmFnZ2FibGUgaW5zdGVhZCBvZiBpdHMgY29udGVudHMuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB1c2VyRHJhZzogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdmVycmlkZXMgdGhlIGhpZ2hsaWdodCBjb2xvciBzaG93biB3aGVuIHRoZSB1c2VyIHRhcHMgYSBsaW5rIG9yIGEgSmF2YVNjcmlwdFxuICAgICAgICAgKiBjbGlja2FibGUgZWxlbWVudCBpbiBpT1MuIFRoaXMgcHJvcGVydHkgb2JleXMgdGhlIGFscGhhIHZhbHVlLCBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdyZ2JhKDAsMCwwLDApJ1xuICAgICAgICAgKi9cbiAgICAgICAgdGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJ1xuICAgIH1cbn07XG5cbnZhciBTVE9QID0gMTtcbnZhciBGT1JDRURfU1RPUCA9IDI7XG5cbi8qKlxuICogTWFuYWdlclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgSGFtbWVyLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBlbGVtZW50O1xuXG4gICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgIHRoaXMucmVjb2duaXplcnMgPSBbXTtcbiAgICB0aGlzLm9sZENzc1Byb3BzID0ge307XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuaW5wdXQgPSBjcmVhdGVJbnB1dEluc3RhbmNlKHRoaXMpO1xuICAgIHRoaXMudG91Y2hBY3Rpb24gPSBuZXcgVG91Y2hBY3Rpb24odGhpcywgdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblxuICAgIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIHRydWUpO1xuXG4gICAgZWFjaCh0aGlzLm9wdGlvbnMucmVjb2duaXplcnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgdmFyIHJlY29nbml6ZXIgPSB0aGlzLmFkZChuZXcgKGl0ZW1bMF0pKGl0ZW1bMV0pKTtcbiAgICAgICAgaXRlbVsyXSAmJiByZWNvZ25pemVyLnJlY29nbml6ZVdpdGgoaXRlbVsyXSk7XG4gICAgICAgIGl0ZW1bM10gJiYgcmVjb2duaXplci5yZXF1aXJlRmFpbHVyZShpdGVtWzNdKTtcbiAgICB9LCB0aGlzKTtcbn1cblxuTWFuYWdlci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBPcHRpb25zIHRoYXQgbmVlZCBhIGxpdHRsZSBtb3JlIHNldHVwXG4gICAgICAgIGlmIChvcHRpb25zLnRvdWNoQWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmlucHV0VGFyZ2V0KSB7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBleGlzdGluZyBldmVudCBsaXN0ZW5lcnMgYW5kIHJlaW5pdGlhbGl6ZVxuICAgICAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnRhcmdldCA9IG9wdGlvbnMuaW5wdXRUYXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlucHV0LmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogc3RvcCByZWNvZ25pemluZyBmb3IgdGhpcyBzZXNzaW9uLlxuICAgICAqIFRoaXMgc2Vzc2lvbiB3aWxsIGJlIGRpc2NhcmRlZCwgd2hlbiBhIG5ldyBbaW5wdXRdc3RhcnQgZXZlbnQgaXMgZmlyZWQuXG4gICAgICogV2hlbiBmb3JjZWQsIHRoZSByZWNvZ25pemVyIGN5Y2xlIGlzIHN0b3BwZWQgaW1tZWRpYXRlbHkuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnN0b3BwZWQgPSBmb3JjZSA/IEZPUkNFRF9TVE9QIDogU1RPUDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcnVuIHRoZSByZWNvZ25pemVycyFcbiAgICAgKiBjYWxsZWQgYnkgdGhlIGlucHV0SGFuZGxlciBmdW5jdGlvbiBvbiBldmVyeSBtb3ZlbWVudCBvZiB0aGUgcG9pbnRlcnMgKHRvdWNoZXMpXG4gICAgICogaXQgd2Fsa3MgdGhyb3VnaCBhbGwgdGhlIHJlY29nbml6ZXJzIGFuZCB0cmllcyB0byBkZXRlY3QgdGhlIGdlc3R1cmUgdGhhdCBpcyBiZWluZyBtYWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBydW4gdGhlIHRvdWNoLWFjdGlvbiBwb2x5ZmlsbFxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnByZXZlbnREZWZhdWx0cyhpbnB1dERhdGEpO1xuXG4gICAgICAgIHZhciByZWNvZ25pemVyO1xuICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuXG4gICAgICAgIC8vIHRoaXMgaG9sZHMgdGhlIHJlY29nbml6ZXIgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuICAgICAgICAvLyBzbyB0aGUgcmVjb2duaXplcidzIHN0YXRlIG5lZWRzIHRvIGJlIEJFR0FOLCBDSEFOR0VELCBFTkRFRCBvciBSRUNPR05JWkVEXG4gICAgICAgIC8vIGlmIG5vIHJlY29nbml6ZXIgaXMgZGV0ZWN0aW5nIGEgdGhpbmcsIGl0IGlzIHNldCB0byBgbnVsbGBcbiAgICAgICAgdmFyIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXI7XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB0aGUgbGFzdCByZWNvZ25pemVyIGlzIHJlY29nbml6ZWRcbiAgICAgICAgLy8gb3Igd2hlbiB3ZSdyZSBpbiBhIG5ldyBzZXNzaW9uXG4gICAgICAgIGlmICghY3VyUmVjb2duaXplciB8fCAoY3VyUmVjb2duaXplciAmJiBjdXJSZWNvZ25pemVyLnN0YXRlICYgU1RBVEVfUkVDT0dOSVpFRCkpIHtcbiAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHJlY29nbml6ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVjb2duaXplciA9IHJlY29nbml6ZXJzW2ldO1xuXG4gICAgICAgICAgICAvLyBmaW5kIG91dCBpZiB3ZSBhcmUgYWxsb3dlZCB0cnkgdG8gcmVjb2duaXplIHRoZSBpbnB1dCBmb3IgdGhpcyBvbmUuXG4gICAgICAgICAgICAvLyAxLiAgIGFsbG93IGlmIHRoZSBzZXNzaW9uIGlzIE5PVCBmb3JjZWQgc3RvcHBlZCAoc2VlIHRoZSAuc3RvcCgpIG1ldGhvZClcbiAgICAgICAgICAgIC8vIDIuICAgYWxsb3cgaWYgd2Ugc3RpbGwgaGF2ZW4ndCByZWNvZ25pemVkIGEgZ2VzdHVyZSBpbiB0aGlzIHNlc3Npb24sIG9yIHRoZSB0aGlzIHJlY29nbml6ZXIgaXMgdGhlIG9uZVxuICAgICAgICAgICAgLy8gICAgICB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgICAgICAvLyAzLiAgIGFsbG93IGlmIHRoZSByZWNvZ25pemVyIGlzIGFsbG93ZWQgdG8gcnVuIHNpbXVsdGFuZW91cyB3aXRoIHRoZSBjdXJyZW50IHJlY29nbml6ZWQgcmVjb2duaXplci5cbiAgICAgICAgICAgIC8vICAgICAgdGhpcyBjYW4gYmUgc2V0dXAgd2l0aCB0aGUgYHJlY29nbml6ZVdpdGgoKWAgbWV0aG9kIG9uIHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCAhPT0gRk9SQ0VEX1NUT1AgJiYgKCAvLyAxXG4gICAgICAgICAgICAgICAgICAgICFjdXJSZWNvZ25pemVyIHx8IHJlY29nbml6ZXIgPT0gY3VyUmVjb2duaXplciB8fCAvLyAyXG4gICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuY2FuUmVjb2duaXplV2l0aChjdXJSZWNvZ25pemVyKSkpIHsgLy8gM1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVjb2duaXplKGlucHV0RGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVzZXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhlIHJlY29nbml6ZXIgaGFzIGJlZW4gcmVjb2duaXppbmcgdGhlIGlucHV0IGFzIGEgdmFsaWQgZ2VzdHVyZSwgd2Ugd2FudCB0byBzdG9yZSB0aGlzIG9uZSBhcyB0aGVcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIHJlY29nbml6ZXIuIGJ1dCBvbmx5IGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgcmVjb2duaXplclxuICAgICAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyICYmIHJlY29nbml6ZXIuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQpKSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgcmVjb2duaXplciBieSBpdHMgZXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TnVsbH1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKHJlY29nbml6ZXIgaW5zdGFuY2VvZiBSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyZWNvZ25pemVyc1tpXS5vcHRpb25zLmV2ZW50ID09IHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcnNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGFkZCBhIHJlY29nbml6ZXIgdG8gdGhlIG1hbmFnZXJcbiAgICAgKiBleGlzdGluZyByZWNvZ25pemVycyB3aXRoIHRoZSBzYW1lIGV2ZW50IG5hbWUgd2lsbCBiZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TWFuYWdlcn1cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdhZGQnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQocmVjb2duaXplci5vcHRpb25zLmV2ZW50KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShleGlzdGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY29nbml6ZXJzLnB1c2gocmVjb2duaXplcik7XG4gICAgICAgIHJlY29nbml6ZXIubWFuYWdlciA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBhIHJlY29nbml6ZXIgYnkgbmFtZSBvciBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cbiAgICAgKi9cbiAgICByZW1vdmU6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdyZW1vdmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICByZWNvZ25pemVyID0gdGhpcy5nZXQocmVjb2duaXplcik7XG5cbiAgICAgICAgLy8gbGV0J3MgbWFrZSBzdXJlIHRoaXMgcmVjb2duaXplciBleGlzdHNcbiAgICAgICAgaWYgKHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHJlY29nbml6ZXJzLCByZWNvZ25pemVyKTtcblxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIGV2ZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gPSBoYW5kbGVyc1tldmVudF0gfHwgW107XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0ucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgZXZlbnQsIGxlYXZlIGVtaXQgYmxhbmsgdG8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaGFuZGxlcl1cbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gJiYgaGFuZGxlcnNbZXZlbnRdLnNwbGljZShpbkFycmF5KGhhbmRsZXJzW2V2ZW50XSwgaGFuZGxlciksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGVtaXQgZXZlbnQgdG8gdGhlIGxpc3RlbmVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgLy8gd2UgYWxzbyB3YW50IHRvIHRyaWdnZXIgZG9tIGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRvbUV2ZW50cykge1xuICAgICAgICAgICAgdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIGhhbmRsZXJzLCBzbyBza2lwIGl0IGFsbFxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW2V2ZW50XSAmJiB0aGlzLmhhbmRsZXJzW2V2ZW50XS5zbGljZSgpO1xuICAgICAgICBpZiAoIWhhbmRsZXJzIHx8ICFoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEudHlwZSA9IGV2ZW50O1xuICAgICAgICBkYXRhLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkYXRhLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlcnNbaV0oZGF0YSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGVzdHJveSB0aGUgbWFuYWdlciBhbmQgdW5iaW5kcyBhbGwgZXZlbnRzXG4gICAgICogaXQgZG9lc24ndCB1bmJpbmQgZG9tIGV2ZW50cywgdGhhdCBpcyB0aGUgdXNlciBvd24gcmVzcG9uc2liaWxpdHlcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ICYmIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB9XG59O1xuXG4vKipcbiAqIGFkZC9yZW1vdmUgdGhlIGNzcyBwcm9wZXJ0aWVzIGFzIGRlZmluZWQgaW4gbWFuYWdlci5vcHRpb25zLmNzc1Byb3BzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYWRkXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZUNzc1Byb3BzKG1hbmFnZXIsIGFkZCkge1xuICAgIHZhciBlbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmICghZWxlbWVudC5zdHlsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwcm9wO1xuICAgIGVhY2gobWFuYWdlci5vcHRpb25zLmNzc1Byb3BzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICBwcm9wID0gcHJlZml4ZWQoZWxlbWVudC5zdHlsZSwgbmFtZSk7XG4gICAgICAgIGlmIChhZGQpIHtcbiAgICAgICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gPSBlbGVtZW50LnN0eWxlW3Byb3BdO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gfHwgJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWFkZCkge1xuICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzID0ge307XG4gICAgfVxufVxuXG4vKipcbiAqIHRyaWdnZXIgZG9tIGV2ZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKi9cbmZ1bmN0aW9uIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSkge1xuICAgIHZhciBnZXN0dXJlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBnZXN0dXJlRXZlbnQuaW5pdEV2ZW50KGV2ZW50LCB0cnVlLCB0cnVlKTtcbiAgICBnZXN0dXJlRXZlbnQuZ2VzdHVyZSA9IGRhdGE7XG4gICAgZGF0YS50YXJnZXQuZGlzcGF0Y2hFdmVudChnZXN0dXJlRXZlbnQpO1xufVxuXG5hc3NpZ24oSGFtbWVyLCB7XG4gICAgSU5QVVRfU1RBUlQ6IElOUFVUX1NUQVJULFxuICAgIElOUFVUX01PVkU6IElOUFVUX01PVkUsXG4gICAgSU5QVVRfRU5EOiBJTlBVVF9FTkQsXG4gICAgSU5QVVRfQ0FOQ0VMOiBJTlBVVF9DQU5DRUwsXG5cbiAgICBTVEFURV9QT1NTSUJMRTogU1RBVEVfUE9TU0lCTEUsXG4gICAgU1RBVEVfQkVHQU46IFNUQVRFX0JFR0FOLFxuICAgIFNUQVRFX0NIQU5HRUQ6IFNUQVRFX0NIQU5HRUQsXG4gICAgU1RBVEVfRU5ERUQ6IFNUQVRFX0VOREVELFxuICAgIFNUQVRFX1JFQ09HTklaRUQ6IFNUQVRFX1JFQ09HTklaRUQsXG4gICAgU1RBVEVfQ0FOQ0VMTEVEOiBTVEFURV9DQU5DRUxMRUQsXG4gICAgU1RBVEVfRkFJTEVEOiBTVEFURV9GQUlMRUQsXG5cbiAgICBESVJFQ1RJT05fTk9ORTogRElSRUNUSU9OX05PTkUsXG4gICAgRElSRUNUSU9OX0xFRlQ6IERJUkVDVElPTl9MRUZULFxuICAgIERJUkVDVElPTl9SSUdIVDogRElSRUNUSU9OX1JJR0hULFxuICAgIERJUkVDVElPTl9VUDogRElSRUNUSU9OX1VQLFxuICAgIERJUkVDVElPTl9ET1dOOiBESVJFQ1RJT05fRE9XTixcbiAgICBESVJFQ1RJT05fSE9SSVpPTlRBTDogRElSRUNUSU9OX0hPUklaT05UQUwsXG4gICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgRElSRUNUSU9OX0FMTDogRElSRUNUSU9OX0FMTCxcblxuICAgIE1hbmFnZXI6IE1hbmFnZXIsXG4gICAgSW5wdXQ6IElucHV0LFxuICAgIFRvdWNoQWN0aW9uOiBUb3VjaEFjdGlvbixcblxuICAgIFRvdWNoSW5wdXQ6IFRvdWNoSW5wdXQsXG4gICAgTW91c2VJbnB1dDogTW91c2VJbnB1dCxcbiAgICBQb2ludGVyRXZlbnRJbnB1dDogUG9pbnRlckV2ZW50SW5wdXQsXG4gICAgVG91Y2hNb3VzZUlucHV0OiBUb3VjaE1vdXNlSW5wdXQsXG4gICAgU2luZ2xlVG91Y2hJbnB1dDogU2luZ2xlVG91Y2hJbnB1dCxcblxuICAgIFJlY29nbml6ZXI6IFJlY29nbml6ZXIsXG4gICAgQXR0clJlY29nbml6ZXI6IEF0dHJSZWNvZ25pemVyLFxuICAgIFRhcDogVGFwUmVjb2duaXplcixcbiAgICBQYW46IFBhblJlY29nbml6ZXIsXG4gICAgU3dpcGU6IFN3aXBlUmVjb2duaXplcixcbiAgICBQaW5jaDogUGluY2hSZWNvZ25pemVyLFxuICAgIFJvdGF0ZTogUm90YXRlUmVjb2duaXplcixcbiAgICBQcmVzczogUHJlc3NSZWNvZ25pemVyLFxuXG4gICAgb246IGFkZEV2ZW50TGlzdGVuZXJzLFxuICAgIG9mZjogcmVtb3ZlRXZlbnRMaXN0ZW5lcnMsXG4gICAgZWFjaDogZWFjaCxcbiAgICBtZXJnZTogbWVyZ2UsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgYXNzaWduOiBhc3NpZ24sXG4gICAgaW5oZXJpdDogaW5oZXJpdCxcbiAgICBiaW5kRm46IGJpbmRGbixcbiAgICBwcmVmaXhlZDogcHJlZml4ZWRcbn0pO1xuXG4vLyB0aGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIEhhbW1lciBpcyBsb2FkZWQgaW4gdGhlIHByZXNlbmNlIG9mIGFuIEFNRFxuLy8gIHN0eWxlIGxvYWRlciBidXQgYnkgc2NyaXB0IHRhZywgbm90IGJ5IHRoZSBsb2FkZXIuXG52YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6ICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge30pKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5mcmVlR2xvYmFsLkhhbW1lciA9IEhhbW1lcjtcblxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEhhbW1lcjtcbiAgICB9KTtcbn0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gSGFtbWVyO1xufSBlbHNlIHtcbiAgICB3aW5kb3dbZXhwb3J0TmFtZV0gPSBIYW1tZXI7XG59XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsICdIYW1tZXInKTtcbiIsIi8qIVxuICogIGhvd2xlci5qcyB2Mi4wLjJcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAxNiwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGdsb2JhbCBjb250cm9sbGVyLiBBbGwgY29udGFpbmVkIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgYXBwbHlcbiAgICogdG8gYWxsIHNvdW5kcyB0aGF0IGFyZSBjdXJyZW50bHkgcGxheWluZyBvciB3aWxsIGJlIGluIHRoZSBmdXR1cmUuXG4gICAqL1xuICB2YXIgSG93bGVyR2xvYmFsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gSW50ZXJuYWwgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHt9O1xuICAgICAgc2VsZi5faG93bHMgPSBbXTtcbiAgICAgIHNlbGYuX211dGVkID0gZmFsc2U7XG4gICAgICBzZWxmLl92b2x1bWUgPSAxO1xuICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXl0aHJvdWdoJztcbiAgICAgIHNlbGYuX25hdmlnYXRvciA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubmF2aWdhdG9yKSA/IHdpbmRvdy5uYXZpZ2F0b3IgOiBudWxsO1xuXG4gICAgICAvLyBQdWJsaWMgcHJvcGVydGllcy5cbiAgICAgIHNlbGYubWFzdGVyR2FpbiA9IG51bGw7XG4gICAgICBzZWxmLm5vQXVkaW8gPSBmYWxzZTtcbiAgICAgIHNlbGYudXNpbmdXZWJBdWRpbyA9IHRydWU7XG4gICAgICBzZWxmLmF1dG9TdXNwZW5kID0gdHJ1ZTtcbiAgICAgIHNlbGYuY3R4ID0gbnVsbDtcblxuICAgICAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhlIGF1dG8gaU9TIGVuYWJsZXIuXG4gICAgICBzZWxmLm1vYmlsZUF1dG9FbmFibGUgPSB0cnVlO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgIHNlbGYuX3NldHVwKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBnbG9iYWwgdm9sdW1lIGZvciBhbGwgc291bmRzLlxuICAgICAqIEBwYXJhbSAge0Zsb2F0fSB2b2wgVm9sdW1lIGZyb20gMC4wIHRvIDEuMC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXIvRmxvYXR9ICAgICBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbih2b2wpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2b2wgPSBwYXJzZUZsb2F0KHZvbCk7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgIC8vIERvbid0IHVwZGF0ZSBhbnkgb2YgdGhlIG5vZGVzIGlmIHdlIGFyZSBtdXRlZC5cbiAgICAgICAgaWYgKHNlbGYuX211dGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHVzaW5nIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIGFkanVzdCB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi52YWx1ZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgY2hhbmdlIHZvbHVtZSBmb3IgYWxsIEhUTUw1IGF1ZGlvIG5vZGVzLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoYW5nZSB0aGUgdm9sdW1lcy5cbiAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiB2b2w7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIG11dGluZyBhbmQgdW5tdXRpbmcgZ2xvYmFsbHkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgSXMgbXV0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgLy8gV2l0aCBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBtdXRlIHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4udmFsdWUgPSBtdXRlZCA/IDAgOiBzZWxmLl92b2x1bWU7XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgbXV0ZSBhbGwgSFRNTDUgQXVkaW8gbm9kZXMuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBtYXJrIHRoZSBhdWRpbyBub2RlIGFzIG11dGVkLlxuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gKG11dGVkKSA/IHRydWUgOiBzb3VuZC5fbXV0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgYWxsIGN1cnJlbnRseSBsb2FkZWQgSG93bCBvYmplY3RzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIHNlbGYuX2hvd2xzW2ldLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHRvIG1ha2Ugc3VyZSBpdCBpcyBmdWxseSByZXNldC5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8gJiYgc2VsZi5jdHggJiYgdHlwZW9mIHNlbGYuY3R4LmNsb3NlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5jbG9zZSgpO1xuICAgICAgICBzZWxmLmN0eCA9IG51bGw7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgY29kZWMgc3VwcG9ydCBvZiBzcGVjaWZpYyBleHRlbnNpb24uXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBleHQgQXVkaW8gZmlsZSBleHRlbnRpb24uXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjb2RlY3M6IGZ1bmN0aW9uKGV4dCkge1xuICAgICAgcmV0dXJuICh0aGlzIHx8IEhvd2xlcikuX2NvZGVjc1tleHQucmVwbGFjZSgvXngtLywgJycpXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBzdXNwZW5kL3Jlc3VtZSBzdGF0ZSBvZiB0aGUgQXVkaW9Db250ZXh0LlxuICAgICAgc2VsZi5zdGF0ZSA9IHNlbGYuY3R4ID8gc2VsZi5jdHguc3RhdGUgfHwgJ3J1bm5pbmcnIDogJ3J1bm5pbmcnO1xuXG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IGJlZ2luIHRoZSAzMC1zZWNvbmQgc3VzcGVuZCBwcm9jZXNzXG4gICAgICBzZWxmLl9hdXRvU3VzcGVuZCgpO1xuXG4gICAgICAvLyBDaGVjayBpZiBhdWRpbyBpcyBhdmFpbGFibGUuXG4gICAgICBpZiAoIXNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAvLyBObyBhdWRpbyBpcyBhdmFpbGFibGUgb24gdGhpcyBzeXN0ZW0gaWYgbm9BdWRpbyBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbnBsYXl0aHJvdWdoIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVzdC5vbmNhbnBsYXl0aHJvdWdoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRlc3QgdG8gbWFrZSBzdXJlIGF1ZGlvIGlzbid0IGRpc2FibGVkIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgaWYgKHRlc3QubXV0ZWQpIHtcbiAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAvLyBDaGVjayBmb3Igc3VwcG9ydGVkIGNvZGVjcy5cbiAgICAgIGlmICghc2VsZi5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX3NldHVwQ29kZWNzKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgYnJvd3NlciBzdXBwb3J0IGZvciB2YXJpb3VzIGNvZGVjcyBhbmQgY2FjaGUgdGhlIHJlc3VsdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cENvZGVjczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdmFyIGF1ZGlvVGVzdCA9IG51bGw7XG5cbiAgICAgIC8vIE11c3Qgd3JhcCBpbiBhIHRyeS9jYXRjaCBiZWNhdXNlIElFMTEgaW4gc2VydmVyIG1vZGUgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgdHJ5IHtcbiAgICAgICAgYXVkaW9UZXN0ID0gKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpID8gbmV3IEF1ZGlvKCkgOiBudWxsO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF1ZGlvVGVzdCB8fCB0eXBlb2YgYXVkaW9UZXN0LmNhblBsYXlUeXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICB2YXIgbXBlZ1Rlc3QgPSBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wZWc7JykucmVwbGFjZSgvXm5vJC8sICcnKTtcblxuICAgICAgLy8gT3BlcmEgdmVyc2lvbiA8MzMgaGFzIG1peGVkIE1QMyBzdXBwb3J0LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciBhbmQgYmxvY2sgaXQuXG4gICAgICB2YXIgY2hlY2tPcGVyYSA9IHNlbGYuX25hdmlnYXRvciAmJiBzZWxmLl9uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUFJcXC8oWzAtNl0uKS9nKTtcbiAgICAgIHZhciBpc09sZE9wZXJhID0gKGNoZWNrT3BlcmEgJiYgcGFyc2VJbnQoY2hlY2tPcGVyYVswXS5zcGxpdCgnLycpWzFdLCAxMCkgPCAzMyk7XG5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHtcbiAgICAgICAgbXAzOiAhISghaXNPbGRPcGVyYSAmJiAobXBlZ1Rlc3QgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDM7JykucmVwbGFjZSgvXm5vJC8sICcnKSkpLFxuICAgICAgICBtcGVnOiAhIW1wZWdUZXN0LFxuICAgICAgICBvcHVzOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJvcHVzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2c6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdhdjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdjsgY29kZWNzPVwiMVwiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgYWFjOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGNhZjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtY2FmOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YTogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbXA0OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJtOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBkb2xieTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsgY29kZWNzPVwiZWMtM1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgZmxhYzogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWZsYWM7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9mbGFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTW9iaWxlIGJyb3dzZXJzIHdpbGwgb25seSBhbGxvdyBhdWRpbyB0byBiZSBwbGF5ZWQgYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIEF0dGVtcHQgdG8gYXV0b21hdGljYWxseSB1bmxvY2sgYXVkaW8gb24gdGhlIGZpcnN0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQ29uY2VwdCBmcm9tOiBodHRwOi8vcGF1bGJha2F1cy5jb20vdHV0b3JpYWxzL2h0bWw1L3dlYi1hdWRpby1vbi1pb3MvXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9lbmFibGVNb2JpbGVBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBPbmx5IHJ1biB0aGlzIG9uIG1vYmlsZSBkZXZpY2VzIGlmIGF1ZGlvIGlzbid0IGFscmVhZHkgZWFuYmxlZC5cbiAgICAgIHZhciBpc01vYmlsZSA9IC9pUGhvbmV8aVBhZHxpUG9kfEFuZHJvaWR8QmxhY2tCZXJyeXxCQjEwfFNpbGt8TW9iaS9pLnRlc3Qoc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgdmFyIGlzVG91Y2ggPSAhISgoJ29udG91Y2hlbmQnIGluIHdpbmRvdykgfHwgKHNlbGYuX25hdmlnYXRvciAmJiBzZWxmLl9uYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwKSB8fCAoc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzID4gMCkpO1xuICAgICAgaWYgKHNlbGYuX21vYmlsZUVuYWJsZWQgfHwgIXNlbGYuY3R4IHx8ICghaXNNb2JpbGUgJiYgIWlzVG91Y2gpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fbW9iaWxlRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBTb21lIG1vYmlsZSBkZXZpY2VzL3BsYXRmb3JtcyBoYXZlIGRpc3RvcnRpb24gaXNzdWVzIHdoZW4gb3BlbmluZy9jbG9zaW5nIHRhYnMgYW5kL29yIHdlYiB2aWV3cy5cbiAgICAgIC8vIEJ1Z3MgaW4gdGhlIGJyb3dzZXIgKGVzcGVjaWFsbHkgTW9iaWxlIFNhZmFyaSkgY2FuIGNhdXNlIHRoZSBzYW1wbGVSYXRlIHRvIGNoYW5nZSBmcm9tIDQ0MTAwIHRvIDQ4MDAwLlxuICAgICAgLy8gQnkgY2FsbGluZyBIb3dsZXIudW5sb2FkKCksIHdlIGNyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgd2l0aCB0aGUgY29ycmVjdCBzYW1wbGVSYXRlLlxuICAgICAgaWYgKCFzZWxmLl9tb2JpbGVVbmxvYWRlZCAmJiBzZWxmLmN0eC5zYW1wbGVSYXRlICE9PSA0NDEwMCkge1xuICAgICAgICBzZWxmLl9tb2JpbGVVbmxvYWRlZCA9IHRydWU7XG4gICAgICAgIHNlbGYudW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNjcmF0Y2ggYnVmZmVyIGZvciBlbmFibGluZyBpT1MgdG8gZGlzcG9zZSBvZiB3ZWIgYXVkaW8gYnVmZmVycyBjb3JyZWN0bHksIGFzIHBlcjpcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjQxMTk2ODRcbiAgICAgIHNlbGYuX3NjcmF0Y2hCdWZmZXIgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXIoMSwgMSwgMjIwNTApO1xuXG4gICAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIG9uIHRvdWNoIHN0YXJ0IHRvIGNyZWF0ZSBhbmQgcGxheSBhIGJ1ZmZlcixcbiAgICAgIC8vIHRoZW4gY2hlY2sgaWYgdGhlIGF1ZGlvIGFjdHVhbGx5IHBsYXllZCB0byBkZXRlcm1pbmUgaWZcbiAgICAgIC8vIGF1ZGlvIGhhcyBub3cgYmVlbiB1bmxvY2tlZCBvbiBpT1MsIEFuZHJvaWQsIGV0Yy5cbiAgICAgIHZhciB1bmxvY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgdmFyIHNvdXJjZSA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBzb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjtcbiAgICAgICAgc291cmNlLmNvbm5lY3Qoc2VsZi5jdHguZGVzdGluYXRpb24pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc291cmNlLm5vdGVPbigwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR1cCBhIHRpbWVvdXQgdG8gY2hlY2sgdGhhdCB3ZSBhcmUgdW5sb2NrZWQgb24gdGhlIG5leHQgZXZlbnQgbG9vcC5cbiAgICAgICAgc291cmNlLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzb3VyY2UuZGlzY29ubmVjdCgwKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdW5sb2NrZWQgc3RhdGUgYW5kIHByZXZlbnQgdGhpcyBjaGVjayBmcm9tIGhhcHBlbmluZyBhZ2Fpbi5cbiAgICAgICAgICBzZWxmLl9tb2JpbGVFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLm1vYmlsZUF1dG9FbmFibGUgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdG91Y2ggc3RhcnQgbGlzdGVuZXIuXG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYSB0b3VjaCBzdGFydCBsaXN0ZW5lciB0byBhdHRlbXB0IGFuIHVubG9jayBpbi5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgc3VzcGVuZCB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCBhZnRlciBubyBzb3VuZCBoYXMgcGxheWVkIGZvciAzMCBzZWNvbmRzLlxuICAgICAqIFRoaXMgc2F2ZXMgcHJvY2Vzc2luZy9lbmVyZ3kgYW5kIGZpeGVzIHZhcmlvdXMgYnJvd3Nlci1zcGVjaWZpYyBidWdzIHdpdGggYXVkaW8gZ2V0dGluZyBzdHVjay5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9TdXNwZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kIHx8ICFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHguc3VzcGVuZCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgYW55IHNvdW5kcyBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHNlbGYuX2hvd2xzW2ldLl9zb3VuZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3NvdW5kc1tqXS5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBzb3VuZCBoYXMgcGxheWVkIGFmdGVyIDMwIHNlY29uZHMsIHN1c3BlbmQgdGhlIGNvbnRleHQuXG4gICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRpbmcnO1xuICAgICAgICBzZWxmLmN0eC5zdXNwZW5kKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRlZCc7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kKSB7XG4gICAgICAgICAgICBkZWxldGUgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kO1xuICAgICAgICAgICAgc2VsZi5fYXV0b1Jlc3VtZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LCAzMDAwMCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHJlc3VtZSB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCB3aGVuIGEgbmV3IHNvdW5kIGlzIHBsYXllZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9SZXN1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSAncnVubmluZycgJiYgc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgICBzZWxmLnN0YXRlID0gJ3Jlc3VtaW5nJztcbiAgICAgICAgc2VsZi5jdHgucmVzdW1lKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3J1bm5pbmcnO1xuXG4gICAgICAgICAgLy8gRW1pdCB0byBhbGwgSG93bHMgdGhhdCB0aGUgYXVkaW8gaGFzIHJlc3VtZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgncmVzdW1lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGluZycpIHtcbiAgICAgICAgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNldHVwIHRoZSBnbG9iYWwgYXVkaW8gY29udHJvbGxlci5cbiAgdmFyIEhvd2xlciA9IG5ldyBIb3dsZXJHbG9iYWwoKTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGF1ZGlvIGdyb3VwIGNvbnRyb2xsZXIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgKi9cbiAgdmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgbm8gc291cmNlIGlzIHByb3ZpZGVkLlxuICAgIGlmICghby5zcmMgfHwgby5zcmMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBbiBhcnJheSBvZiBzb3VyY2UgZmlsZXMgbXVzdCBiZSBwYXNzZWQgd2l0aCBhbnkgbmV3IEhvd2wuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZi5pbml0KG8pO1xuICB9O1xuICBIb3dsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IEhvd2wgZ3JvdXAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2F1dG9wbGF5ID0gby5hdXRvcGxheSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2Zvcm1hdCA9ICh0eXBlb2Ygby5mb3JtYXQgIT09ICdzdHJpbmcnKSA/IG8uZm9ybWF0IDogW28uZm9ybWF0XTtcbiAgICAgIHNlbGYuX2h0bWw1ID0gby5odG1sNSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX211dGVkID0gby5tdXRlIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX3Bvb2wgPSBvLnBvb2wgfHwgNTtcbiAgICAgIHNlbGYuX3ByZWxvYWQgPSAodHlwZW9mIG8ucHJlbG9hZCA9PT0gJ2Jvb2xlYW4nKSA/IG8ucHJlbG9hZCA6IHRydWU7XG4gICAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG4gICAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICAgIHNlbGYuX3NyYyA9ICh0eXBlb2Ygby5zcmMgIT09ICdzdHJpbmcnKSA/IG8uc3JjIDogW28uc3JjXTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG5cbiAgICAgIC8vIFNldHVwIGFsbCBvdGhlciBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IDA7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYuX2VuZFRpbWVycyA9IHt9O1xuICAgICAgc2VsZi5fcXVldWUgPSBbXTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25lbmQgPSBvLm9uZW5kID8gW3tmbjogby5vbmVuZH1dIDogW107XG4gICAgICBzZWxmLl9vbmZhZGUgPSBvLm9uZmFkZSA/IFt7Zm46IG8ub25mYWRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZCA9IG8ub25sb2FkID8gW3tmbjogby5vbmxvYWR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkZXJyb3IgPSBvLm9ubG9hZGVycm9yID8gW3tmbjogby5vbmxvYWRlcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBhdXNlID0gby5vbnBhdXNlID8gW3tmbjogby5vbnBhdXNlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGxheSA9IG8ub25wbGF5ID8gW3tmbjogby5vbnBsYXl9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zdG9wID0gby5vbnN0b3AgPyBbe2ZuOiBvLm9uc3RvcH1dIDogW107XG4gICAgICBzZWxmLl9vbm11dGUgPSBvLm9ubXV0ZSA/IFt7Zm46IG8ub25tdXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udm9sdW1lID0gby5vbnZvbHVtZSA/IFt7Zm46IG8ub252b2x1bWV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yYXRlID0gby5vbnJhdGUgPyBbe2ZuOiBvLm9ucmF0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnNlZWsgPSBvLm9uc2VlayA/IFt7Zm46IG8ub25zZWVrfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucmVzdW1lID0gW107XG5cbiAgICAgIC8vIFdlYiBBdWRpbyBvciBIVE1MNSBBdWRpbz9cbiAgICAgIHNlbGYuX3dlYkF1ZGlvID0gSG93bGVyLnVzaW5nV2ViQXVkaW8gJiYgIXNlbGYuX2h0bWw1O1xuXG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IHRyeSB0byBlbmFibGUgYXVkaW8gb24gaU9TLlxuICAgICAgaWYgKHR5cGVvZiBIb3dsZXIuY3R4ICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4ICYmIEhvd2xlci5tb2JpbGVBdXRvRW5hYmxlKSB7XG4gICAgICAgIEhvd2xlci5fZW5hYmxlTW9iaWxlQXVkaW8oKTtcbiAgICAgIH1cblxuICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGlzIEhvd2wgZ3JvdXAgaW4gdGhlIGdsb2JhbCBjb250cm9sbGVyLlxuICAgICAgSG93bGVyLl9ob3dscy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBJZiB0aGV5IHNlbGVjdGVkIGF1dG9wbGF5LCBhZGQgYSBwbGF5IGV2ZW50IHRvIHRoZSBsb2FkIHF1ZXVlLlxuICAgICAgaWYgKHNlbGYuX2F1dG9wbGF5KSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdXJjZSBmaWxlIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICAgICAgaWYgKHNlbGYuX3ByZWxvYWQpIHtcbiAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBhdWRpbyBmaWxlLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBsb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB1cmwgPSBudWxsO1xuXG4gICAgICAvLyBJZiBubyBhdWRpbyBpcyBhdmFpbGFibGUsIHF1aXQgaW1tZWRpYXRlbHkuXG4gICAgICBpZiAoSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGF1ZGlvIHN1cHBvcnQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIG91ciBzb3VyY2UgaXMgaW4gYW4gYXJyYXkuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuX3NyYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VsZi5fc3JjID0gW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgc291cmNlcyBhbmQgcGljayB0aGUgZmlyc3Qgb25lIHRoYXQgaXMgY29tcGF0aWJsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zcmMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGV4dCwgc3RyO1xuXG4gICAgICAgIGlmIChzZWxmLl9mb3JtYXQgJiYgc2VsZi5fZm9ybWF0W2ldKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXh0ZW5zaW9uIHdhcyBzcGVjaWZpZWQsIHVzZSB0aGF0IGluc3RlYWQuXG4gICAgICAgICAgZXh0ID0gc2VsZi5fZm9ybWF0W2ldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291cmNlIGlzIGEgc3RyaW5nLlxuICAgICAgICAgIHN0ciA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdOb24tc3RyaW5nIGZvdW5kIGluIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMgLSBpZ25vcmluZy4nKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpbGUgZXh0ZW5zaW9uIGZyb20gdGhlIFVSTCBvciBiYXNlNjQgZGF0YSBVUkkuXG4gICAgICAgICAgZXh0ID0gL15kYXRhOmF1ZGlvXFwvKFteOyxdKyk7L2kuZXhlYyhzdHIpO1xuICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICBleHQgPSAvXFwuKFteLl0rKSQvLmV4ZWMoc3RyLnNwbGl0KCc/JywgMSlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IGV4dFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZXh0ZW5zaW9uIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKEhvd2xlci5jb2RlY3MoZXh0KSkge1xuICAgICAgICAgIHVybCA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gY29kZWMgc3VwcG9ydCBmb3Igc2VsZWN0ZWQgYXVkaW8gc291cmNlcy4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9zcmMgPSB1cmw7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkaW5nJztcblxuICAgICAgLy8gSWYgdGhlIGhvc3RpbmcgcGFnZSBpcyBIVFRQUyBhbmQgdGhlIHNvdXJjZSBpc24ndCxcbiAgICAgIC8vIGRyb3AgZG93biB0byBIVE1MNSBBdWRpbyB0byBhdm9pZCBNaXhlZCBDb250ZW50IGVycm9ycy5cbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHVybC5zbGljZSgwLCA1KSA9PT0gJ2h0dHA6Jykge1xuICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBzb3VuZCBvYmplY3QgYW5kIGFkZCBpdCB0byB0aGUgcG9vbC5cbiAgICAgIG5ldyBTb3VuZChzZWxmKTtcblxuICAgICAgLy8gTG9hZCBhbmQgZGVjb2RlIHRoZSBhdWRpbyBkYXRhIGZvciBwbGF5YmFjay5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBsb2FkQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGxheSBhIHNvdW5kIG9yIHJlc3VtZSBwcmV2aW91cyBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmcvTnVtYmVyfSBzcHJpdGUgICBTcHJpdGUgbmFtZSBmb3Igc3ByaXRlIHBsYXliYWNrIG9yIHNvdW5kIGlkIHRvIGNvbnRpbnVlIHByZXZpb3VzLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICBTb3VuZCBJRC5cbiAgICAgKi9cbiAgICBwbGF5OiBmdW5jdGlvbihzcHJpdGUsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgaWQgPSBudWxsO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgYSBzcHJpdGUsIHNvdW5kIGlkIG9yIG5vdGhpbmcgd2FzIHBhc3NlZFxuICAgICAgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gc3ByaXRlO1xuICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnc3RyaW5nJyAmJiBzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIC8vIElmIHRoZSBwYXNzZWQgc3ByaXRlIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBVc2UgdGhlIGRlZmF1bHQgc291bmQgc3ByaXRlIChwbGF5cyB0aGUgZnVsbCBhdWRpbyBsZW5ndGgpLlxuICAgICAgICBzcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHNpbmdsZSBwYXVzZWQgc291bmQgdGhhdCBpc24ndCBlbmRlZC5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMsIHBsYXkgdGhhdCBzb3VuZC4gSWYgbm90LCBjb250aW51ZSBhcyB1c3VhbC5cbiAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9wYXVzZWQgJiYgIXNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAgIG51bSsrO1xuICAgICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbaV0uX2lkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudW0gPT09IDEpIHtcbiAgICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNlbGVjdGVkIG5vZGUsIG9yIGdldCBvbmUgZnJvbSB0aGUgcG9vbC5cbiAgICAgIHZhciBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX2luYWN0aXZlU291bmQoKTtcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICBpZiAoIXNvdW5kKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIHNwcml0ZSBkZWZpbml0aW9uLlxuICAgICAgaWYgKGlkICYmICFzcHJpdGUpIHtcbiAgICAgICAgc3ByaXRlID0gc291bmQuX3Nwcml0ZSB8fCAnX19kZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSBubyBzcHJpdGUgYW5kIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCB3ZSBtdXN0IHdhaXRcbiAgICAgIC8vIGZvciB0aGUgc291bmQgdG8gbG9hZCB0byBnZXQgb3VyIGF1ZGlvJ3MgZHVyYXRpb24uXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnICYmICFzZWxmLl9zcHJpdGVbc3ByaXRlXSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoc2VsZi5fc291bmRCeUlkKHNvdW5kLl9pZCkgPyBzb3VuZC5faWQgOiB1bmRlZmluZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICAgIH1cblxuICAgICAgLy8gRG9uJ3QgcGxheSB0aGUgc291bmQgaWYgYW4gaWQgd2FzIHBhc3NlZCBhbmQgaXQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgaWYgKGlkICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIHBsYXkgZXZlbnQsIGluIG9yZGVyIHRvIGtlZXAgaXRlcmF0aW5nIHRocm91Z2ggcXVldWUuXG4gICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIEF1ZGlvQ29udGV4dCBpc24ndCBzdXNwZW5kZWQsIGFuZCByZXN1bWUgaXQgaWYgaXQgaXMuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgSG93bGVyLl9hdXRvUmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBob3cgbG9uZyB0byBwbGF5IGZvciBhbmQgd2hlcmUgdG8gc3RhcnQgcGxheWluZy5cbiAgICAgIHZhciBzZWVrID0gTWF0aC5tYXgoMCwgc291bmQuX3NlZWsgPiAwID8gc291bmQuX3NlZWsgOiBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDApO1xuICAgICAgdmFyIGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgKChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDApIC0gc2Vlayk7XG4gICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIHNvdW5kXG4gICAgICBzb3VuZC5fcGF1c2VkID0gZmFsc2U7XG4gICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcbiAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG4gICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICBzb3VuZC5fc3RhcnQgPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDA7XG4gICAgICBzb3VuZC5fc3RvcCA9IChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDA7XG4gICAgICBzb3VuZC5fbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgLy8gQmVnaW4gdGhlIGFjdHVhbCBwbGF5YmFjay5cbiAgICAgIHZhciBub2RlID0gc291bmQuX25vZGU7XG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gV2ViIEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheVdlYkF1ZGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5fcmVmcmVzaEJ1ZmZlcihzb3VuZCk7XG5cbiAgICAgICAgICAvLyBTZXR1cCB0aGUgcGxheWJhY2sgcGFyYW1zLlxuICAgICAgICAgIHZhciB2b2wgPSAoc291bmQuX211dGVkIHx8IHNlbGYuX211dGVkKSA/IDAgOiBzb3VuZC5fdm9sdW1lO1xuICAgICAgICAgIG5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgICAgLy8gUGxheSB0aGUgc291bmQgdXNpbmcgdGhlIHN1cHBvcnRlZCBtZXRob2QuXG4gICAgICAgICAgaWYgKHR5cGVvZiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uubm90ZUdyYWluT24oMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uubm90ZUdyYWluT24oMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTdGFydCBhIG5ldyB0aW1lciBpZiBub25lIGlzIHByZXNlbnQuXG4gICAgICAgICAgaWYgKHRpbWVvdXQgIT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBpc1J1bm5pbmcgPSAoSG93bGVyLnN0YXRlID09PSAncnVubmluZycpO1xuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmIGlzUnVubmluZykge1xuICAgICAgICAgIHBsYXlXZWJBdWRpbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhdWRpbyB0byBsb2FkIGFuZCB0aGVuIGJlZ2luIHBsYXliYWNrLlxuICAgICAgICAgIHNlbGYub25jZShpc1J1bm5pbmcgPyAnbG9hZCcgOiAncmVzdW1lJywgcGxheVdlYkF1ZGlvLCBpc1J1bm5pbmcgPyBzb3VuZC5faWQgOiBudWxsKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gSFRNTDUgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5SHRtbDUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICBub2RlLm11dGVkID0gc291bmQuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IEhvd2xlci5fbXV0ZWQgfHwgbm9kZS5tdXRlZDtcbiAgICAgICAgICBub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBub2RlLnBsYXkoKTtcblxuICAgICAgICAgICAgLy8gU2V0dXAgdGhlIG5ldyBlbmQgdGltZXIuXG4gICAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQbGF5IGltbWVkaWF0ZWx5IGlmIHJlYWR5LCBvciB3YWl0IGZvciB0aGUgJ2NhbnBsYXl0aHJvdWdoJ2UgdmVudC5cbiAgICAgICAgdmFyIGxvYWRlZE5vUmVhZHlTdGF0ZSA9IChzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgKHdpbmRvdyAmJiB3aW5kb3cuZWplY3RhIHx8ICFub2RlLnJlYWR5U3RhdGUgJiYgSG93bGVyLl9uYXZpZ2F0b3IuaXNDb2Nvb25KUykpO1xuICAgICAgICBpZiAobm9kZS5yZWFkeVN0YXRlID09PSA0IHx8IGxvYWRlZE5vUmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHBsYXlIdG1sNSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gQmVnaW4gcGxheWJhY2suXG4gICAgICAgICAgICBwbGF5SHRtbDUoKTtcblxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBwbGF5YmFjayBhbmQgc2F2ZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBwYXVzZSBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgcGF1c2U6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gcGF1c2Ugd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BhdXNlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgcGF1c2VkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWxmLnNlZWsoaWRzW2ldKTtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkXG4gICAgICAgICAgICAgIGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJlIHRoZSBwYXVzZSBldmVudCwgdW5sZXNzIGB0cnVlYCBpcyBwYXNzZWQgYXMgdGhlIDJuZCBhcmd1bWVudC5cbiAgICAgICAgaWYgKCFhcmd1bWVudHNbMV0pIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdwYXVzZScsIHNvdW5kID8gc291bmQuX2lkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0b3AgcGxheWJhY2sgYW5kIHJlc2V0IHRvIHN0YXJ0LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBzdG9wIGFsbCBpbiBncm91cCkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKGlkLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHN0b3Agd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3N0b3AnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnN0b3AoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHN0b3BwZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZFxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0b3AnLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNvdW5kICYmICFpbnRlcm5hbCkge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0b3AnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRlL3VubXV0ZSBhIHNpbmdsZSBzb3VuZCBvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBTZXQgdG8gdHJ1ZSB0byBtdXRlIGFuZCBmYWxzZSB0byB1bm11dGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBUaGUgc291bmQgSUQgdG8gdXBkYXRlIChvbWl0IHRvIG11dGUvdW5tdXRlIGFsbCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBtdXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdtdXRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5tdXRlKG11dGVkLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYXBwbHlpbmcgbXV0ZS91bm11dGUgdG8gYWxsIHNvdW5kcywgdXBkYXRlIHRoZSBncm91cCdzIHZhbHVlLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtdXRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fbXV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbXV0ZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNvdW5kLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gSG93bGVyLl9tdXRlZCA/IHRydWUgOiBtdXRlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdtdXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgdm9sdW1lIG9mIHRoaXMgc291bmQgb3Igb2YgdGhlIEhvd2wgZ3JvdXAuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHZvbHVtZSgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3Mgdm9sdW1lIHZhbHVlLlxuICAgICAqICAgdm9sdW1lKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqICAgdm9sdW1lKHZvbCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgdm9sdW1lKHZvbCwgaWQpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgdm9sLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGdyb3Vwcycgdm9sdW1lLlxuICAgICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSB8fCBhcmdzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHZvbHVtZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPj0gMikge1xuICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZvbHVtZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSB2b2x1bWUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3ZvbHVtZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnZvbHVtZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCB2b2x1bWUuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgICAgaWYgKCFhcmdzWzJdKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHZvbCAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgndm9sdW1lJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5fc291bmRzWzBdO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fdm9sdW1lIDogMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZhZGUgYSBjdXJyZW50bHkgcGxheWluZyBzb3VuZCBiZXR3ZWVuIHR3byB2b2x1bWVzIChpZiBubyBpZCBpcyBwYXNzc2VkLCBhbGwgc291bmRzIHdpbGwgZmFkZSkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgKG9taXQgdG8gZmFkZSBhbGwgc291bmRzKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGZhZGU6IGZ1bmN0aW9uKGZyb20sIHRvLCBsZW4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKGZyb20gLSB0byk7XG4gICAgICB2YXIgZGlyID0gZnJvbSA+IHRvID8gJ291dCcgOiAnaW4nO1xuICAgICAgdmFyIHN0ZXBzID0gZGlmZiAvIDAuMDE7XG4gICAgICB2YXIgc3RlcExlbiA9IChzdGVwcyA+IDApID8gbGVuIC8gc3RlcHMgOiBsZW47XG5cbiAgICAgIC8vIFNpbmNlIGJyb3dzZXJzIGNsYW1wIHRpbWVvdXRzIHRvIDRtcywgd2UgbmVlZCB0byBjbGFtcCBvdXIgc3RlcHMgdG8gdGhhdCB0b28uXG4gICAgICBpZiAoc3RlcExlbiA8IDQpIHtcbiAgICAgICAgc3RlcHMgPSBNYXRoLmNlaWwoc3RlcHMgLyAoNCAvIHN0ZXBMZW4pKTtcbiAgICAgICAgc3RlcExlbiA9IDQ7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gZmFkZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnZmFkZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZmFkZShmcm9tLCB0bywgbGVuLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHRoZSB2b2x1bWUgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAgc2VsZi52b2x1bWUoZnJvbSwgaWQpO1xuXG4gICAgICAvLyBGYWRlIHRoZSB2b2x1bWUgb2Ygb25lIG9yIGFsbCBzb3VuZHMuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBsaW5lYXIgZmFkZSBvciBmYWxsIGJhY2sgdG8gdGltZW91dHMgd2l0aCBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gU3RvcCB0aGUgcHJldmlvdXMgZmFkZSBpZiBubyBzcHJpdGUgaXMgYmVpbmcgdXNlZCAob3RoZXJ3aXNlLCB2b2x1bWUgaGFuZGxlcyB0aGlzKS5cbiAgICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8sIGxldCB0aGUgbmF0aXZlIG1ldGhvZHMgZG8gdGhlIGFjdHVhbCBmYWRlLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGN1cnJlbnRUaW1lICsgKGxlbiAvIDEwMDApO1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IGZyb207XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGZyb20sIGN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodG8sIGVuZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHZvbCA9IGZyb207XG4gICAgICAgICAgc291bmQuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oc291bmRJZCwgc291bmQpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIGFtb3VudCwgYnV0IG9ubHkgaWYgdGhlIHZvbHVtZSBzaG91bGQgY2hhbmdlLlxuICAgICAgICAgICAgaWYgKHN0ZXBzID4gMCkge1xuICAgICAgICAgICAgICB2b2wgKz0gKGRpciA9PT0gJ2luJyA/IDAuMDEgOiAtMC4wMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdm9sdW1lIGlzIGluIHRoZSByaWdodCBib3VuZHMuXG4gICAgICAgICAgICB2b2wgPSBNYXRoLm1heCgwLCB2b2wpO1xuICAgICAgICAgICAgdm9sID0gTWF0aC5taW4oMSwgdm9sKTtcblxuICAgICAgICAgICAgLy8gUm91bmQgdG8gd2l0aGluIDIgZGVjaW1hbCBwb2ludHMuXG4gICAgICAgICAgICB2b2wgPSBNYXRoLnJvdW5kKHZvbCAqIDEwMCkgLyAxMDA7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgdm9sdW1lLlxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lKHZvbCwgc291bmRJZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFdoZW4gdGhlIGZhZGUgaXMgY29tcGxldGUsIHN0b3AgaXQgYW5kIGZpcmUgZXZlbnQuXG4gICAgICAgICAgICBpZiAodm9sID09PSB0bykge1xuICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lKHZvbCwgc291bmRJZCk7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBzb3VuZElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LmJpbmQoc2VsZiwgaWRzW2ldLCBzb3VuZCksIHN0ZXBMZW4pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBzdG9wcyB0aGUgY3VycmVudGx5IHBsYXlpbmcgZmFkZSB3aGVuXG4gICAgICogYSBuZXcgZmFkZSBzdGFydHMsIHZvbHVtZSBpcyBjaGFuZ2VkIG9yIHRoZSBzb3VuZCBpcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3N0b3BGYWRlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIGlkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGxvb3AgcGFyYW1ldGVyIG9uIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIGxvb3AoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGxvb3ApIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgZm9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgbG9vcChsb29wLCBpZCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9Cb29sZWFufSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBsb29wIHZhbHVlLlxuICAgICAqL1xuICAgIGxvb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgbG9vcCwgaWQsIHNvdW5kO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBmb3IgbG9vcCBhbmQgaWQuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBncm91J3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3A7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBsb29wIHZhbHVlLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX2xvb3AgOiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIGxvb3BlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX2xvb3AgPSBsb29wO1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gbG9vcDtcbiAgICAgICAgICAgIGlmIChsb29wKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHBsYXliYWNrIHJhdGUgb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgcmF0ZSgpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUocmF0ZSkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIHJhdGUocmF0ZSwgaWQpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKi9cbiAgICByYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHJhdGUsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHJhdGUgb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHJhdGUgdmFsdWUuXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGxheWJhY2sgcmF0ZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICB2YXIgc291bmQ7XG4gICAgICBpZiAodHlwZW9mIHJhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBsYXliYWNrIHJhdGUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3JhdGUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5yYXRlLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHJhdGUuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fcmF0ZSA9IHJhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2Ygb3VyIHBvc2l0aW9uIHdoZW4gdGhlIHJhdGUgY2hhbmdlZCBhbmQgdXBkYXRlIHRoZSBwbGF5YmFja1xuICAgICAgICAgICAgLy8gc3RhcnQgcG9zaXRpb24gc28gd2UgY2FuIHByb3Blcmx5IGFkanVzdCB0aGUgc2VlayBwb3NpdGlvbiBmb3IgdGltZSBlbGFwc2VkLlxuICAgICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBzZWxmLl93ZWJBdWRpbyA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgOiBzb3VuZC5fcGxheVN0YXJ0O1xuICAgICAgICAgICAgc291bmQuX3JhdGUgPSByYXRlO1xuXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIHBsYXliYWNrIHJhdGUuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSByYXRlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wbGF5YmFja1JhdGUgPSByYXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgdGltZXJzLlxuICAgICAgICAgICAgdmFyIHNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gKChzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgZW5kIHRpbWVyIGlmIHNvdW5kIGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRbaV1dIHx8ICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRbaV0pO1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbaWRbaV1dID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3JhdGUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcmF0ZSA6IHNlbGYuX3JhdGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBzZWVrIHBvc2l0aW9uIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHNlZWsoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKHNlZWspIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNvdW5kIG5vZGUuXG4gICAgICogICBzZWVrKHNlZWssIGlkKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICovXG4gICAgc2VlazogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBzZWVrLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIElELCBiYWlsIG91dC5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHNlZWsgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3NlZWsnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnNlZWsuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIHNlZWsgPj0gMCkge1xuICAgICAgICAgIC8vIFBhdXNlIHRoZSBzb3VuZCBhbmQgdXBkYXRlIHBvc2l0aW9uIGZvciByZXN0YXJ0aW5nIHBsYXliYWNrLlxuICAgICAgICAgIHZhciBwbGF5aW5nID0gc2VsZi5wbGF5aW5nKGlkKTtcbiAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTW92ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRyYWNrIGFuZCBjYW5jZWwgdGltZXIuXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWQpO1xuXG4gICAgICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgaWYgdGhlIHNvdW5kIHdhcyBwbGF5aW5nLlxuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoaWQsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2VlayBwb3NpdGlvbiBmb3IgSFRNTDUgQXVkaW8uXG4gICAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3NlZWsnLCBpZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgcmVhbFRpbWUgPSBzZWxmLnBsYXlpbmcoaWQpID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSAtIHNvdW5kLl9wbGF5U3RhcnQgOiAwO1xuICAgICAgICAgICAgdmFyIHJhdGVTZWVrID0gc291bmQuX3JhdGVTZWVrID8gc291bmQuX3JhdGVTZWVrIC0gc291bmQuX3NlZWsgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9zZWVrICsgKHJhdGVTZWVrICsgcmVhbFRpbWUgKiBNYXRoLmFicyhzb3VuZC5fcmF0ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX25vZGUuY3VycmVudFRpbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHNwZWNpZmljIHNvdW5kIGlzIGN1cnJlbnRseSBwbGF5aW5nIG9yIG5vdCAoaWYgaWQgaXMgcHJvdmlkZWQpLCBvciBjaGVjayBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIHNvdW5kcyBpbiB0aGUgZ3JvdXAgaXMgcGxheWluZyBvciBub3QuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgdGhlIHdob2xlIHNvdW5kIGdyb3VwIGlzIGNoZWNrZWQuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBwbGF5aW5nIGFuZCBmYWxzZSBpZiBub3QuXG4gICAgICovXG4gICAgcGxheWluZzogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gQ2hlY2sgdGhlIHBhc3NlZCBzb3VuZCBJRCAoaWYgYW55KS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/ICFzb3VuZC5fcGF1c2VkIDogZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSwgbG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoZWNrIGlmIGFueSBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkdXJhdGlvbiBvZiB0aGlzIHNvdW5kLiBQYXNzaW5nIGEgc291bmQgaWQgd2lsbCByZXR1cm4gdGhlIHNwcml0ZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHJldHVybiBmdWxsIHNvdXJjZSBkdXJhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEF1ZGlvIGR1cmF0aW9uIGluIHNlY29uZHMuXG4gICAgICovXG4gICAgZHVyYXRpb246IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZHVyYXRpb24gPSBzZWxmLl9kdXJhdGlvbjtcblxuICAgICAgLy8gSWYgd2UgcGFzcyBhbiBJRCwgZ2V0IHRoZSBzb3VuZCBhbmQgcmV0dXJuIHRoZSBzcHJpdGUgbGVuZ3RoLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBkdXJhdGlvbiA9IHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSAvIDEwMDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkdXJhdGlvbjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBsb2FkZWQgc3RhdGUgb2YgdGhpcyBIb3dsLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gJ3VubG9hZGVkJywgJ2xvYWRpbmcnLCAnbG9hZGVkJ1xuICAgICAqL1xuICAgIHN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IHRoZSBjdXJyZW50IEhvd2wgb2JqZWN0LlxuICAgICAqIFRoaXMgd2lsbCBpbW1lZGlhdGVseSBzdG9wIGFsbCBzb3VuZCBpbnN0YW5jZXMgYXR0YWNoZWQgdG8gdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTdG9wIHBsYXlpbmcgYW55IGFjdGl2ZSBzb3VuZHMuXG4gICAgICB2YXIgc291bmRzID0gc2VsZi5fc291bmRzO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPHNvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBTdG9wIHRoZSBzb3VuZCBpZiBpdCBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgICAgaWYgKCFzb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHNlbGYuc3RvcChzb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdlbmQnLCBzb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc291cmNlIG9yIGRpc2Nvbm5lY3QuXG4gICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBTZXQgdGhlIHNvdXJjZSB0byAwLXNlY29uZCBzaWxlbmNlIHRvIHN0b3AgYW55IGRvd25sb2FkaW5nLlxuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5zcmMgPSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaVFBQUFCWFFWWkZabTEwSUJBQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQVpHRjBZUUFBQUFBPSc7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzb3VuZHNbaV0uX2Vycm9yRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc291bmRzW2ldLl9sb2FkRm4sIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVtcHR5IG91dCBhbGwgb2YgdGhlIG5vZGVzLlxuICAgICAgICBkZWxldGUgc291bmRzW2ldLl9ub2RlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdGltZXJzIGFyZSBjbGVhcmVkIG91dC5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHJlZmVyZW5jZXMgaW4gdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAgICB2YXIgaW5kZXggPSBIb3dsZXIuX2hvd2xzLmluZGV4T2Yoc2VsZik7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgSG93bGVyLl9ob3dscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZSB0aGlzIHNvdW5kIGZyb20gdGhlIGNhY2hlIChpZiBubyBvdGhlciBIb3dsIGlzIHVzaW5nIGl0KS5cbiAgICAgIHZhciByZW1DYWNoZSA9IHRydWU7XG4gICAgICBmb3IgKGk9MDsgaTxIb3dsZXIuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChIb3dsZXIuX2hvd2xzW2ldLl9zcmMgPT09IHNlbGYuX3NyYykge1xuICAgICAgICAgIHJlbUNhY2hlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlICYmIHJlbUNhY2hlKSB7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBnbG9iYWwgZXJyb3JzLlxuICAgICAgSG93bGVyLm5vQXVkaW8gPSBmYWxzZTtcblxuICAgICAgLy8gQ2xlYXIgb3V0IGBzZWxmYC5cbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZiA9IG51bGw7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBvbmNlICAoSU5URVJOQUwpIE1hcmtzIGV2ZW50IHRvIGZpcmUgb25seSBvbmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQsIG9uY2UpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKG9uY2UgPyB7aWQ6IGlkLCBmbjogZm4sIG9uY2U6IG9uY2V9IDoge2lkOiBpZCwgZm46IGZufSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuIENhbGwgd2l0aG91dCBwYXJhbWV0ZXJzIHRvIHJlbW92ZSBhbGwgZXZlbnRzLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byByZW1vdmUuIExlYXZlIGVtcHR5IHRvIHJlbW92ZSBhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSByZW1vdmUgZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgcmVtb3ZlIHRoZSBwYXNzZWQgZnVuY3Rpb24uXG4gICAgICAgIGZvciAoaT0wOyBpPGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChmbiA9PT0gZXZlbnRzW2ldLmZuICYmIGlkID09PSBldmVudHNbaV0uaWQpIHtcbiAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgdGhpcyB0eXBlLlxuICAgICAgICBzZWxmWydfb24nICsgZXZlbnRdID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiBldmVyeSB0eXBlLlxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGYpO1xuICAgICAgICBmb3IgKGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKChrZXlzW2ldLmluZGV4T2YoJ19vbicpID09PSAwKSAmJiBBcnJheS5pc0FycmF5KHNlbGZba2V5c1tpXV0pKSB7XG4gICAgICAgICAgICBzZWxmW2tleXNbaV1dID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQgYW5kIHJlbW92ZSBpdCBvbmNlIGZpcmVkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uY2U6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5vbihldmVudCwgZm4sIGlkLCAxKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEVtaXQgYWxsIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgYW5kIHBhc3MgdGhlIHNvdW5kIGlkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFNvdW5kIElELlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbXNnICAgTWVzc2FnZSB0byBnbyB3aXRoIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBpZCwgbXNnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCBmaXJlIGFsbCBmdW5jdGlvbnMuXG4gICAgICBmb3IgKHZhciBpPWV2ZW50cy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIGlmICghZXZlbnRzW2ldLmlkIHx8IGV2ZW50c1tpXS5pZCA9PT0gaWQgfHwgZXZlbnQgPT09ICdsb2FkJykge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgaWQsIG1zZyk7XG4gICAgICAgICAgfS5iaW5kKHNlbGYsIGV2ZW50c1tpXS5mbiksIDApO1xuXG4gICAgICAgICAgLy8gSWYgdGhpcyBldmVudCB3YXMgc2V0dXAgd2l0aCBgb25jZWAsIHJlbW92ZSBpdC5cbiAgICAgICAgICBpZiAoZXZlbnRzW2ldLm9uY2UpIHtcbiAgICAgICAgICAgIHNlbGYub2ZmKGV2ZW50LCBldmVudHNbaV0uZm4sIGV2ZW50c1tpXS5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBvZiBhY3Rpb25zIGluaXRpYXRlZCBiZWZvcmUgdGhlIHNvdW5kIGhhcyBsb2FkZWQuXG4gICAgICogVGhlc2Ugd2lsbCBiZSBjYWxsZWQgaW4gc2VxdWVuY2UsIHdpdGggdGhlIG5leHQgb25seSBmaXJpbmdcbiAgICAgKiBhZnRlciB0aGUgcHJldmlvdXMgaGFzIGZpbmlzaGVkIGV4ZWN1dGluZyAoZXZlbiBpZiBhc3luYyBsaWtlIHBsYXkpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2xvYWRRdWV1ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB0YXNrID0gc2VsZi5fcXVldWVbMF07XG5cbiAgICAgICAgLy8gZG9uJ3QgbW92ZSBvbnRvIHRoZSBuZXh0IHRhc2sgdW50aWwgdGhpcyBvbmUgaXMgZG9uZVxuICAgICAgICBzZWxmLm9uY2UodGFzay5ldmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFzay5hY3Rpb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gcGxheWJhY2sgZW5kcyBhdCB0aGUgZW5kIG9mIHRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW5kZWQ6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc3ByaXRlID0gc291bmQuX3Nwcml0ZTtcblxuICAgICAgLy8gU2hvdWxkIHRoaXMgc291bmQgbG9vcD9cbiAgICAgIHZhciBsb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuXG4gICAgICAvLyBGaXJlIHRoZSBlbmRlZCBldmVudC5cbiAgICAgIHNlbGYuX2VtaXQoJ2VuZCcsIHNvdW5kLl9pZCk7XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGZvciBIVE1MNSBBdWRpbyBsb29wLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVzdGFydCB0aGlzIHRpbWVyIGlmIG9uIGEgV2ViIEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgdmFyIHRpbWVvdXQgPSAoKHNvdW5kLl9zdG9wIC0gc291bmQuX3N0YXJ0KSAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgfVxuXG4gICAgICAvLyBNYXJrIHRoZSBub2RlIGFzIHBhdXNlZC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xuICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG5cbiAgICAgICAgLy8gQXR0ZW1wdCB0byBhdXRvLXN1c3BlbmQgQXVkaW9Db250ZXh0IGlmIG5vIHNvdW5kcyBhcmUgc3RpbGwgcGxheWluZy5cbiAgICAgICAgSG93bGVyLl9hdXRvU3VzcGVuZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGVuIHVzaW5nIGEgc3ByaXRlLCBlbmQgdGhlIHRyYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBlbmQgdGltZXIgZm9yIGEgc291bmQgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYXJUaW1lcjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZF0pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX2VuZFRpbWVyc1tpZF0pO1xuICAgICAgICBkZWxldGUgc2VsZi5fZW5kVGltZXJzW2lkXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgc291bmQgaWRlbnRpZmllZCBieSB0aGlzIElELCBvciByZXR1cm4gbnVsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFNvdW5kIElEXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICBTb3VuZCBvYmplY3Qgb3IgbnVsbC5cbiAgICAgKi9cbiAgICBfc291bmRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgZmluZCB0aGUgb25lIHdpdGggdGhpcyBJRC5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlkID09PSBzZWxmLl9zb3VuZHNbaV0uX2lkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGluYWN0aXZlIHNvdW5kIGZyb20gdGhlIHBvb2wgb3IgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH0gU291bmQgcGxheWJhY2sgb2JqZWN0LlxuICAgICAqL1xuICAgIF9pbmFjdGl2ZVNvdW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgc2VsZi5fZHJhaW4oKTtcblxuICAgICAgLy8gRmluZCB0aGUgZmlyc3QgaW5hY3RpdmUgbm9kZSB0byByZWN5Y2xlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV0ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpbmFjdGl2ZSBub2RlIHdhcyBmb3VuZCwgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgIHJldHVybiBuZXcgU291bmQoc2VsZik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERyYWluIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMgZnJvbSB0aGUgcG9vbC5cbiAgICAgKi9cbiAgICBfZHJhaW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGxpbWl0ID0gc2VsZi5fcG9vbDtcbiAgICAgIHZhciBjbnQgPSAwO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbGVzcyBzb3VuZHMgdGhhbiB0aGUgbWF4IHBvb2wgc2l6ZSwgd2UgYXJlIGRvbmUuXG4gICAgICBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCA8IGxpbWl0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBpbmFjdGl2ZSBzb3VuZHMuXG4gICAgICBmb3IgKGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICBjbnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZXhjZXNzIGluYWN0aXZlIHNvdW5kcywgZ29pbmcgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgIGZvciAoaT1zZWxmLl9zb3VuZHMubGVuZ3RoIC0gMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIGlmIChjbnQgPD0gbGltaXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIGF1ZGlvIHNvdXJjZSB3aGVuIHVzaW5nIFdlYiBBdWRpby5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc2VsZi5fc291bmRzW2ldLl9ub2RlKSB7XG4gICAgICAgICAgICBzZWxmLl9zb3VuZHNbaV0uX25vZGUuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZW1vdmUgc291bmRzIHVudGlsIHdlIGhhdmUgdGhlIHBvb2wgc2l6ZS5cbiAgICAgICAgICBzZWxmLl9zb3VuZHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGNudC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgSUQncyBmcm9tIHRoZSBzb3VuZHMgcG9vbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIE9ubHkgcmV0dXJuIG9uZSBJRCBpZiBvbmUgaXMgcGFzc2VkLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSAgICBBcnJheSBvZiBJRHMuXG4gICAgICovXG4gICAgX2dldFNvdW5kSWRzOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZHMucHVzaChzZWxmLl9zb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW2lkXTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgc291bmQgYmFjayBpbnRvIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9yZWZyZXNoQnVmZmVyOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgYnVmZmVyIHNvdXJjZSBmb3IgcGxheWJhY2suXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UgPSBIb3dsZXIuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IGNhY2hlW3NlbGYuX3NyY107XG5cbiAgICAgIC8vIENvbm5lY3QgdG8gdGhlIGNvcnJlY3Qgbm9kZS5cbiAgICAgIGlmIChzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9wYW5uZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCBsb29waW5nIGFuZCBwbGF5YmFjayByYXRlLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBzb3VuZC5fbG9vcDtcbiAgICAgIGlmIChzb3VuZC5fbG9vcCkge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3A7XG4gICAgICB9XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlID0gc291bmQuX3JhdGU7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50IG1lbW9yeSBsZWFrcyBieSBjbGVhbmluZyB1cCB0aGUgYnVmZmVyIHNvdXJjZSBhZnRlciBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgU291bmQncyBhdWRpbyBub2RlIGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYW5CdWZmZXI6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX3NjcmF0Y2hCdWZmZXIpIHtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2Uub25lbmRlZCA9IG51bGw7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIHRyeSB7IG5vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IHNlbGYuX3NjcmF0Y2hCdWZmZXI7IH0gY2F0Y2goZSkge31cbiAgICAgIH1cbiAgICAgIG5vZGUuYnVmZmVyU291cmNlID0gbnVsbDtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob3dsIFRoZSBIb3dsIHBhcmVudCBncm91cC5cbiAgICovXG4gIHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBob3dsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBTb3VuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gTWF0aC5yb3VuZChEYXRlLm5vdygpICogTWF0aC5yYW5kb20oKSk7XG5cbiAgICAgIC8vIEFkZCBpdHNlbGYgdG8gdGhlIHBhcmVudCdzIHBvb2wuXG4gICAgICBwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBub2RlLlxuICAgICAgc2VsZi5jcmVhdGUoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcbiAgICAgIHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XG5cbiAgICAgIGlmIChwYXJlbnQuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxuICAgICAgICBzZWxmLl9ub2RlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBzZWxmLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLl9ub2RlLmNvbm5lY3QoSG93bGVyLm1hc3RlckdhaW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5fbm9kZSA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgZXJyb3JzIChodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjLWF1dGhvci12aWV3L3NwZWMuaHRtbCNtZWRpYWVycm9yKS5cbiAgICAgICAgc2VsZi5fZXJyb3JGbiA9IHNlbGYuX2Vycm9yTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yICdjYW5wbGF5dGhyb3VnaCcgZXZlbnQgdG8gbGV0IHVzIGtub3cgdGhlIHNvdW5kIGlzIHJlYWR5LlxuICAgICAgICBzZWxmLl9sb2FkRm4gPSBzZWxmLl9sb2FkTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGF1ZGlvIG5vZGUuXG4gICAgICAgIHNlbGYuX25vZGUuc3JjID0gcGFyZW50Ll9zcmM7XG4gICAgICAgIHNlbGYuX25vZGUucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgc2VsZi5fbm9kZS52b2x1bWUgPSB2b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG5cbiAgICAgICAgLy8gQmVnaW4gbG9hZGluZyB0aGUgc291cmNlLlxuICAgICAgICBzZWxmLl9ub2RlLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQgdG8gdGhlIG9yaWdpbmFsIHN0YXRlIChmb3IgcmVjeWNsZSkuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIG9mIHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9yYXRlU2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIHNvIHRoYXQgaXQgaXNuJ3QgY29uZnVzZWQgd2l0aCB0aGUgcHJldmlvdXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAqIE1hdGgucmFuZG9tKCkpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZXJyb3IgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2Vycm9yTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBGaXJlIGFuIGVycm9yIGV2ZW50IGFuZCBwYXNzIGJhY2sgdGhlIGNvZGUuXG4gICAgICBzZWxmLl9wYXJlbnQuX2VtaXQoJ2xvYWRlcnJvcicsIHNlbGYuX2lkLCBzZWxmLl9ub2RlLmVycm9yID8gc2VsZi5fbm9kZS5lcnJvci5jb2RlIDogMCk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckxpc3RlbmVyLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGNhbnBsYXl0aHJvdWdoIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9sb2FkTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgICAgaWYgKE9iamVjdC5rZXlzKHBhcmVudC5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcGFyZW50Ll9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHBhcmVudC5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgcGFyZW50Ll9lbWl0KCdsb2FkJyk7XG4gICAgICAgIHBhcmVudC5fbG9hZFF1ZXVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICB2YXIgY2FjaGUgPSB7fTtcblxuICAvKipcbiAgICogQnVmZmVyIGEgc291bmQgZnJvbSBVUkwsIERhdGEgVVJJIG9yIGNhY2hlIGFuZCBkZWNvZGUgdG8gYXVkaW8gc291cmNlIChXZWIgQXVkaW8gQVBJKS5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKi9cbiAgdmFyIGxvYWRCdWZmZXIgPSBmdW5jdGlvbihzZWxmKSB7XG4gICAgdmFyIHVybCA9IHNlbGYuX3NyYztcblxuICAgIC8vIENoZWNrIGlmIHRoZSBidWZmZXIgaGFzIGFscmVhZHkgYmVlbiBjYWNoZWQgYW5kIHVzZSBpdCBpbnN0ZWFkLlxuICAgIGlmIChjYWNoZVt1cmxdKSB7XG4gICAgICAvLyBTZXQgdGhlIGR1cmF0aW9uIGZyb20gdGhlIGNhY2hlLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSBjYWNoZVt1cmxdLmR1cmF0aW9uO1xuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VuZCBpbnRvIHRoaXMgSG93bC5cbiAgICAgIGxvYWRTb3VuZChzZWxmKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgvXmRhdGE6W147XSs7YmFzZTY0LC8udGVzdCh1cmwpKSB7XG4gICAgICAvLyBEZWNvZGUgdGhlIGJhc2U2NCBkYXRhIFVSSSB3aXRob3V0IFhIUiwgc2luY2Ugc29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAgdmFyIGRhdGEgPSBhdG9iKHVybC5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxkYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRhdGFWaWV3W2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgfVxuXG4gICAgICBkZWNvZGVBdWRpb0RhdGEoZGF0YVZpZXcuYnVmZmVyLCBzZWxmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgYnVmZmVyIGZyb20gdGhlIFVSTC5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBnZXQgYSBzdWNjZXNzZnVsIHJlc3BvbnNlIGJhY2suXG4gICAgICAgIHZhciBjb2RlID0gKHhoci5zdGF0dXMgKyAnJylbMF07XG4gICAgICAgIGlmIChjb2RlICE9PSAnMCcgJiYgY29kZSAhPT0gJzInICYmIGNvZGUgIT09ICczJykge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdGYWlsZWQgbG9hZGluZyBhdWRpbyBmaWxlIHdpdGggc3RhdHVzOiAnICsgeGhyLnN0YXR1cyArICcuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVjb2RlQXVkaW9EYXRhKHhoci5yZXNwb25zZSwgc2VsZik7XG4gICAgICB9O1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IsIHN3aXRjaCB0byBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICAgICAgZGVsZXRlIGNhY2hlW3VybF07XG4gICAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBzYWZlWGhyU2VuZCh4aHIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2VuZCB0aGUgWEhSIHJlcXVlc3Qgd3JhcHBlZCBpbiBhIHRyeS9jYXRjaC5cbiAgICogQHBhcmFtICB7T2JqZWN0fSB4aHIgWEhSIHRvIHNlbmQuXG4gICAqL1xuICB2YXIgc2FmZVhoclNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB4aHIub25lcnJvcigpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVjb2RlIGF1ZGlvIGRhdGEgZnJvbSBhbiBhcnJheSBidWZmZXIuXG4gICAqIEBwYXJhbSAge0FycmF5QnVmZmVyfSBhcnJheWJ1ZmZlciBUaGUgYXVkaW8gZGF0YS5cbiAgICogQHBhcmFtICB7SG93bH0gICAgICAgIHNlbGZcbiAgICovXG4gIHZhciBkZWNvZGVBdWRpb0RhdGEgPSBmdW5jdGlvbihhcnJheWJ1ZmZlciwgc2VsZikge1xuICAgIC8vIERlY29kZSB0aGUgYnVmZmVyIGludG8gYW4gYXVkaW8gc291cmNlLlxuICAgIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyLCBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgIGlmIChidWZmZXIgJiYgc2VsZi5fc291bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FjaGVbc2VsZi5fc3JjXSA9IGJ1ZmZlcjtcbiAgICAgICAgbG9hZFNvdW5kKHNlbGYsIGJ1ZmZlcik7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRGVjb2RpbmcgYXVkaW8gZGF0YSBmYWlsZWQuJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNvdW5kIGlzIG5vdyBsb2FkZWQsIHNvIGZpbmlzaCBzZXR0aW5nIGV2ZXJ5dGhpbmcgdXAgYW5kIGZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGJ1ZmZlciBUaGUgZGVjb2RlZCBidWZmZXIgc291bmQgc291cmNlLlxuICAgKi9cbiAgdmFyIGxvYWRTb3VuZCA9IGZ1bmN0aW9uKHNlbGYsIGJ1ZmZlcikge1xuICAgIC8vIFNldCB0aGUgZHVyYXRpb24uXG4gICAgaWYgKGJ1ZmZlciAmJiAhc2VsZi5fZHVyYXRpb24pIHtcbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gYnVmZmVyLmR1cmF0aW9uO1xuICAgIH1cblxuICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICBpZiAoT2JqZWN0LmtleXMoc2VsZi5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBzZWxmLl9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWQnKTtcbiAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIGF1ZGlvIGNvbnRleHQgd2hlbiBhdmFpbGFibGUsIG9yIHN3aXRjaCB0byBIVE1MNSBBdWRpbyBtb2RlLlxuICAgKi9cbiAgdmFyIHNldHVwQXVkaW9Db250ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbyBhbmQgc2V0dXAgdGhlIEF1ZGlvQ29udGV4dCBpZiB3ZSBhcmUuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgQXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IHdlYmtpdEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYSB3ZWJ2aWV3IGlzIGJlaW5nIHVzZWQgb24gaU9TOCBvciBlYXJsaWVyIChyYXRoZXIgdGhhbiB0aGUgYnJvd3NlcikuXG4gICAgLy8gSWYgaXQgaXMsIGRpc2FibGUgV2ViIEF1ZGlvIGFzIGl0IGNhdXNlcyBjcmFzaGluZy5cbiAgICB2YXIgaU9TID0gKC9pUChob25lfG9kfGFkKS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5wbGF0Zm9ybSkpO1xuICAgIHZhciBhcHBWZXJzaW9uID0gSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvT1MgKFxcZCspXyhcXGQrKV8/KFxcZCspPy8pO1xuICAgIHZhciB2ZXJzaW9uID0gYXBwVmVyc2lvbiA/IHBhcnNlSW50KGFwcFZlcnNpb25bMV0sIDEwKSA6IG51bGw7XG4gICAgaWYgKGlPUyAmJiB2ZXJzaW9uICYmIHZlcnNpb24gPCA5KSB7XG4gICAgICB2YXIgc2FmYXJpID0gL3NhZmFyaS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3Iuc3RhbmRhbG9uZSAmJiAhc2FmYXJpIHx8IEhvd2xlci5fbmF2aWdhdG9yICYmICFIb3dsZXIuX25hdmlnYXRvci5zdGFuZGFsb25lICYmICFzYWZhcmkpIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYW5kIGV4cG9zZSB0aGUgbWFzdGVyIEdhaW5Ob2RlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvICh1c2VmdWwgZm9yIHBsdWdpbnMgb3IgYWR2YW5jZWQgdXNhZ2UpLlxuICAgIGlmIChIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4gPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5nYWluLnZhbHVlID0gMTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmNvbm5lY3QoSG93bGVyLmN0eC5kZXN0aW5hdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmUtcnVuIHRoZSBzZXR1cCBvbiBIb3dsZXIuXG4gICAgSG93bGVyLl9zZXR1cCgpO1xuICB9O1xuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBBTUQgKEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbikgbGlicmFyaWVzIHN1Y2ggYXMgcmVxdWlyZS5qcy5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBIb3dsZXI6IEhvd2xlcixcbiAgICAgICAgSG93bDogSG93bFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBDb21tb25KUyBsaWJyYXJpZXMgc3VjaCBhcyBicm93c2VyaWZ5LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZXhwb3J0cy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZXhwb3J0cy5Ib3dsID0gSG93bDtcbiAgfVxuXG4gIC8vIERlZmluZSBnbG9iYWxseSBpbiBjYXNlIEFNRCBpcyBub3QgYXZhaWxhYmxlIG9yIHVudXNlZC5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93Lkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICB3aW5kb3cuSG93bGVyID0gSG93bGVyO1xuICAgIHdpbmRvdy5Ib3dsID0gSG93bDtcbiAgICB3aW5kb3cuU291bmQgPSBTb3VuZDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgeyAvLyBBZGQgdG8gZ2xvYmFsIGluIE5vZGUuanMgKGZvciB0ZXN0aW5nLCBldGMpLlxuICAgIGdsb2JhbC5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgZ2xvYmFsLkhvd2xlciA9IEhvd2xlcjtcbiAgICBnbG9iYWwuSG93bCA9IEhvd2w7XG4gICAgZ2xvYmFsLlNvdW5kID0gU291bmQ7XG4gIH1cbn0pKCk7XG5cblxuLyohXG4gKiAgU3BhdGlhbCBQbHVnaW4gLSBBZGRzIHN1cHBvcnQgZm9yIHN0ZXJlbyBhbmQgM0QgYXVkaW8gd2hlcmUgV2ViIEF1ZGlvIGlzIHN1cHBvcnRlZC5cbiAqICBcbiAqICBob3dsZXIuanMgdjIuMC4yXG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMTYsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIFNldHVwIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fcG9zID0gWzAsIDAsIDBdO1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9vcmllbnRhdGlvbiA9IFswLCAwLCAtMSwgMCwgMSwgMF07XG4gIFxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gdXBkYXRlIHRoZSBzdGVyZW8gcGFubmluZyBwb3NpdGlvbiBvZiBhbGwgY3VycmVudCBIb3dscy5cbiAgICogRnV0dXJlIEhvd2xzIHdpbGwgbm90IHVzZSB0aGlzIHZhbHVlIHVubGVzcyBleHBsaWNpdGx5IHNldC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHJldHVybiB7SG93bGVyL051bWJlcn0gICAgIFNlbGYgb3IgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHVwZGF0ZSB0aGVpciBzdGVyZW8gcGFubmluZy5cbiAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgIHNlbGYuX2hvd2xzW2ldLnN0ZXJlbyhwYW4pO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIgaW4gM0QgY2FydGVzaWFuIHNwYWNlLiBTb3VuZHMgdXNpbmdcbiAgICogM0QgcG9zaXRpb24gd2lsbCBiZSByZWxhdGl2ZSB0byB0aGUgbGlzdGVuZXIncyBwb3NpdGlvbi5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4IFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5IFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6IFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgIFNlbGYgb3IgY3VycmVudCBsaXN0ZW5lciBwb3NpdGlvbi5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMl0gOiB6O1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0UG9zaXRpb24oc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBzcGFjZS5cbiAgICogQSBmcm9udCBhbmQgdXAgdmVjdG9yIG11c3QgYmUgcHJvdmlkZWQuIFRoZSBmcm9udCBpcyB0aGUgZGlyZWN0aW9uIHRoZVxuICAgKiBmYWNlIG9mIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZywgYW5kIHVwIGlzIHRoZSBkaXJlY3Rpb24gdGhlIHRvcCBvZiB0aGVcbiAgICogbGlzdGVuZXIgaXMgcG9pbnRpbmcuIFRodXMsIHRoZXNlIHZhbHVlcyBhcmUgZXhwZWN0ZWQgdG8gYmUgYXQgcmlnaHQgYW5nbGVzXG4gICAqIGZyb20gZWFjaCBvdGhlci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4VXAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geVVwIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHpVcCBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHZlY3RvcnMuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgdmFyIG9yID0gc2VsZi5fb3JpZW50YXRpb247XG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gb3JbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IG9yWzJdIDogejtcbiAgICB4VXAgPSAodHlwZW9mIHhVcCAhPT0gJ251bWJlcicpID8gb3JbM10gOiB4VXA7XG4gICAgeVVwID0gKHR5cGVvZiB5VXAgIT09ICdudW1iZXInKSA/IG9yWzRdIDogeVVwO1xuICAgIHpVcCA9ICh0eXBlb2YgelVwICE9PSAnbnVtYmVyJykgPyBvcls1XSA6IHpVcDtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHosIHhVcCwgeVVwLCB6VXBdO1xuICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7SG93bH1cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gby5vcmllbnRhdGlvbiB8fCBbMSwgMCwgMF07XG4gICAgICBzZWxmLl9zdGVyZW8gPSBvLnN0ZXJlbyB8fCBudWxsO1xuICAgICAgc2VsZi5fcG9zID0gby5wb3MgfHwgbnVsbDtcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiAwLFxuICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6ICdpbnZlcnNlJyxcbiAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiAxMDAwMCxcbiAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiAnSFJURicsXG4gICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogMSxcbiAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiAxXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbnN0ZXJlbyA9IG8ub25zdGVyZW8gPyBbe2ZuOiBvLm9uc3RlcmVvfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucG9zID0gby5vbnBvcyA/IFt7Zm46IG8ub25wb3N9XSA6IFtdO1xuICAgICAgc2VsZi5fb25vcmllbnRhdGlvbiA9IG8ub25vcmllbnRhdGlvbiA/IFt7Zm46IG8ub25vcmllbnRhdGlvbn1dIDogW107XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSdzIGluaXQgZnVuY3Rpb24uXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgbyk7XG4gICAgfTtcbiAgfSkoSG93bC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHN0ZXJlbyBwYW5uaW5nIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgYWxsIGluIHRoZSBncm91cC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuLCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHN0ZXJlbyBwYW4gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3N0ZXJlbycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGVyZW8ocGFuLCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgUGFubmVyU3RlcmVvTm9kZSBzdXBwb3J0IGFuZCBmYWxsYmFjayB0byBQYW5uZXJOb2RlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgdmFyIHBhbm5lclR5cGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyID09PSAndW5kZWZpbmVkJykgPyAnc3BhdGlhbCcgOiAnc3RlcmVvJztcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9zdGVyZW8gPSBwYW47XG4gICAgICAgIHNlbGYuX3BvcyA9IFtwYW4sIDAsIDBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0ZXJlbztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHN0cmVvIHBhbm5pbmcgb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fc3RlcmVvID0gcGFuO1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbcGFuLCAwLCAwXTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGZhbGxpbmcgYmFjaywgbWFrZSBzdXJlIHRoZSBwYW5uaW5nTW9kZWwgaXMgZXF1YWxwb3dlci5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA9ICdlcXVhbHBvd2VyJztcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8ICFzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgcGFubmVyVHlwZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYW5uZXJUeXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihwYW4sIDAsIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wYW4udmFsdWUgPSBwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnc3RlcmVvJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3N0ZXJlbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSAzRCBzcGF0aWFsIHBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3JcbiAgICogYWxsIGluIHRoZSBncm91cC4gVGhlIG1vc3QgY29tbW9uIHVzYWdlIGlzIHRvIHNldCB0aGUgJ3gnIHBvc2l0aW9uIGZvclxuICAgKiBsZWZ0L3JpZ2h0IHBhbm5pbmcuIFNldHRpbmcgYW55IHZhbHVlIGhpZ2hlciB0aGFuIDEuMCB3aWxsIGJlZ2luIHRvXG4gICAqIGRlY3JlYXNlIHRoZSB2b2x1bWUgb2YgdGhlIHNvdW5kIGFzIGl0IG1vdmVzIGZ1cnRoZXIgYXdheS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gZnJvbSAtMTAwMC4wIHRvIDEwMDAuMC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gZnJvbSAtMTAwMC4wIHRvIDEwMDAuMC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gZnJvbSAtMTAwMC4wIHRvIDEwMDAuMC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIHBvc2l0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBvc2l0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdwb3MnLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucG9zKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyAwIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyAtMC41IDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIHBvc2l0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCBzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdwb3MnLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fcG9zO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgYXVkaW8gc291cmNlIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gY29vcmRpbmF0ZVxuICAgKiBzcGFjZS4gRGVwZW5kaW5nIG9uIGhvdyBkaXJlY3Rpb24gdGhlIHNvdW5kIGlzLCBiYXNlZCBvbiB0aGUgYGNvbmVgIGF0dHJpYnV0ZXMsXG4gICAqIGEgc291bmQgcG9pbnRpbmcgYXdheSBmcm9tIHRoZSBsaXN0ZW5lciBjYW4gYmUgcXVpZXQgb3Igc2lsZW50LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgb3JpZW50YXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBvcmllbnRhdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnb3JpZW50YXRpb24nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYub3JpZW50YXRpb24oeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsyXSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgb3JpZW50YXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHopO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ29yaWVudGF0aW9uJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX29yaWVudGF0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBhbm5lciBub2RlJ3MgYXR0cmlidXRlcyBmb3IgYSBzb3VuZCBvciBncm91cCBvZiBzb3VuZHMuXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGwgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgKiAgIHBhbm5lckF0dHIoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKG8pIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAqICAgcGFubmVyQXR0cihvLCBpZCkgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAqXG4gICAqICAgQXR0cmlidXRlczpcbiAgICogICAgIGNvbmVJbm5lckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBUaGVyZSB3aWxsIGJlIG5vIHZvbHVtZSByZWR1Y3Rpb24gaW5zaWRlIHRoaXMgYW5nbGUuXG4gICAqICAgICBjb25lT3V0ZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgVGhlIHZvbHVtZSB3aWxsIGJlIHJlZHVjZWQgdG8gYSBjb25zdGFudCB2YWx1ZSBvZlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgY29uZU91dGVyR2FpbmAgb3V0c2lkZSB0aGlzIGFuZ2xlLlxuICAgKiAgICAgY29uZU91dGVyR2FpbiAtICgwIGJ5IGRlZmF1bHQpIFRoZSBhbW91bnQgb2Ygdm9sdW1lIHJlZHVjdGlvbiBvdXRzaWRlIG9mIGBjb25lT3V0ZXJBbmdsZWAuXG4gICAqICAgICBkaXN0YW5jZU1vZGVsIC0gKCdpbnZlcnNlJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIGFsZ29yaXRobSB0byB1c2UgdG8gcmVkdWNlIHZvbHVtZSBhcyBhdWRpbyBtb3Zlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICBhd2F5IGZyb20gbGlzdGVuZXIuIENhbiBiZSBgbGluZWFyYCwgYGludmVyc2VgIG9yIGBleHBvbmVudGlhbGAuXG4gICAqICAgICBtYXhEaXN0YW5jZSAtICgxMDAwMCBieSBkZWZhdWx0KSBWb2x1bWUgd29uJ3QgcmVkdWNlIGJldHdlZW4gc291cmNlL2xpc3RlbmVyIGJleW9uZCB0aGlzIGRpc3RhbmNlLlxuICAgKiAgICAgcGFubmluZ01vZGVsIC0gKCdIUlRGJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIHdoaWNoIHNwYXRpYWxpemF0aW9uIGFsZ29yaXRobSBpcyB1c2VkIHRvIHBvc2l0aW9uIGF1ZGlvLlxuICAgKiAgICAgICAgICAgICAgICAgICAgIENhbiBiZSBgSFJURmAgb3IgYGVxdWFscG93ZXJgLlxuICAgKiAgICAgcmVmRGlzdGFuY2UgLSAoMSBieSBkZWZhdWx0KSBBIHJlZmVyZW5jZSBkaXN0YW5jZSBmb3IgcmVkdWNpbmcgdm9sdW1lIGFzIHRoZSBzb3VyY2VcbiAgICogICAgICAgICAgICAgICAgICAgIG1vdmVzIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIuXG4gICAqICAgICByb2xsb2ZmRmFjdG9yIC0gKDEgYnkgZGVmYXVsdCkgSG93IHF1aWNrbHkgdGhlIHZvbHVtZSByZWR1Y2VzIGFzIHNvdXJjZSBtb3ZlcyBmcm9tIGxpc3RlbmVyLlxuICAgKiBcbiAgICogQHJldHVybiB7SG93bC9PYmplY3R9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHBhbm5lciBhdHRyaWJ1dGVzLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucGFubmVyQXR0ciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbywgaWQsIHNvdW5kO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgcmV0dXJuIHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvID0gYXJnc1swXTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3UncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiBzZWxmLl9jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogc2VsZi5fY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IHNlbGYuX2NvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6IHNlbGYuX2Rpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IHNlbGYuX21heERpc3RhbmNlLFxuICAgICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBzZWxmLl9wYW5uaW5nTW9kZWwsXG4gICAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IHNlbGYuX3JlZkRpc3RhbmNlLFxuICAgICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiBzZWxmLl9yb2xsb2ZmRmFjdG9yXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3Bhbm5lckF0dHIgOiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgIG8gPSBhcmdzWzBdO1xuICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIHNwZWNpZmllZCBzb3VuZHMuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyB2YWx1ZXMgaW50byB0aGUgc291bmQuXG4gICAgICAgIHZhciBwYSA9IHNvdW5kLl9wYW5uZXJBdHRyO1xuICAgICAgICBwYSA9IHtcbiAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHBhLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogcGEuY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiBwYS5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogcGEuZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IHBhLm1heERpc3RhbmNlLFxuICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogcGEucGFubmluZ01vZGVsLFxuICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogcGEucmVmRGlzdGFuY2UsXG4gICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiBwYS5yb2xsb2ZmRmFjdG9yXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYW5uZXIgdmFsdWVzIG9yIGNyZWF0ZSBhIG5ldyBwYW5uZXIgaWYgbm9uZSBleGlzdHMuXG4gICAgICAgIHZhciBwYW5uZXIgPSBzb3VuZC5fcGFubmVyO1xuICAgICAgICBpZiAocGFubmVyKSB7XG4gICAgICAgICAgcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gcGEuY29uZUlubmVyQW5nbGU7XG4gICAgICAgICAgcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gcGEuY29uZU91dGVyQW5nbGU7XG4gICAgICAgICAgcGFubmVyLmNvbmVPdXRlckdhaW4gPSBwYS5jb25lT3V0ZXJHYWluO1xuICAgICAgICAgIHBhbm5lci5kaXN0YW5jZU1vZGVsID0gcGEuZGlzdGFuY2VNb2RlbDtcbiAgICAgICAgICBwYW5uZXIubWF4RGlzdGFuY2UgPSBwYS5tYXhEaXN0YW5jZTtcbiAgICAgICAgICBwYW5uZXIucGFubmluZ01vZGVsID0gcGEucGFubmluZ01vZGVsO1xuICAgICAgICAgIHBhbm5lci5yZWZEaXN0YW5jZSA9IHBhLnJlZkRpc3RhbmNlO1xuICAgICAgICAgIHBhbm5lci5yb2xsb2ZmRmFjdG9yID0gcGEucm9sbG9mZkZhY3RvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUuXG4gICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBTb3VuZCBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgU291bmQgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUgU291bmQncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgU291bmQucmVzZXQgbWV0aG9kIHRvIGNsZWFuIHVwIHByb3BlcnRpZXMgZnJvbSB0aGUgc3BhdGlhbCBwbHVnaW4uXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgU291bmQgcmVzZXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5yZXNldCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgc3BhdGlhbCBwbHVnaW4gcHJvcGVydGllcyBvbiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBDb21wbGV0ZSByZXNldHRpbmcgb2YgdGhlIHNvdW5kLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5yZXNldCk7XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUgYW5kIHNhdmUgaXQgb24gdGhlIHNvdW5kLlxuICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgU3BlY2lmaWMgc291bmQgdG8gc2V0dXAgcGFubmluZyBvbi5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVHlwZSBvZiBwYW5uZXIgdG8gY3JlYXRlOiAnc3RlcmVvJyBvciAnc3BhdGlhbCcuXG4gICAqL1xuICB2YXIgc2V0dXBQYW5uZXIgPSBmdW5jdGlvbihzb3VuZCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlIHx8ICdzcGF0aWFsJztcblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IHBhbm5lciBub2RlLlxuICAgIGlmICh0eXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVBhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lSW5uZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJHYWluID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyR2FpbjtcbiAgICAgIHNvdW5kLl9wYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWw7XG4gICAgICBzb3VuZC5fcGFubmVyLm1heERpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIubWF4RGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbm5pbmdNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbDtcbiAgICAgIHNvdW5kLl9wYW5uZXIucmVmRGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5yZWZEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucm9sbG9mZkZhY3RvciA9IHNvdW5kLl9wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3I7XG4gICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHNvdW5kLl9wb3NbMF0sIHNvdW5kLl9wb3NbMV0sIHNvdW5kLl9wb3NbMl0pO1xuICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbihzb3VuZC5fb3JpZW50YXRpb25bMF0sIHNvdW5kLl9vcmllbnRhdGlvblsxXSwgc291bmQuX29yaWVudGF0aW9uWzJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbi52YWx1ZSA9IHNvdW5kLl9zdGVyZW87XG4gICAgfVxuXG4gICAgc291bmQuX3Bhbm5lci5jb25uZWN0KHNvdW5kLl9ub2RlKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbnMuXG4gICAgaWYgKCFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICBzb3VuZC5fcGFyZW50LnBhdXNlKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gTGFzdCB0aW1lIHVwZGF0ZWQ6IDIwMTctMDItMTMgOTo1ODoxOCBBTSBVVENcblxuLy8gX19fX19fX19fX19fX19fX1xuLy8gUmVjb3JkUlRDIHY1LjQuMVxuXG4vLyBPcGVuLVNvdXJjZWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNdWF6IEtoYW4gICAgIC0gd3d3Lk11YXpLaGFuLmNvbVxuLy8gTUlUIExpY2Vuc2UgICAtIHd3dy5XZWJSVEMtRXhwZXJpbWVudC5jb20vbGljZW5jZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBfX19fX19fX19fX19cbi8vIFJlY29yZFJUQy5qc1xuXG4vKipcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEN9IGlzIGEgSmF2YVNjcmlwdC1iYXNlZCBtZWRpYS1yZWNvcmRpbmcgbGlicmFyeSBmb3IgbW9kZXJuIHdlYi1icm93c2VycyAoc3VwcG9ydGluZyBXZWJSVEMgZ2V0VXNlck1lZGlhIEFQSSkuIEl0IGlzIG9wdGltaXplZCBmb3IgZGlmZmVyZW50IGRldmljZXMgYW5kIGJyb3dzZXJzIHRvIGJyaW5nIGFsbCBjbGllbnQtc2lkZSAocGx1Z2luZnJlZSkgcmVjb3JkaW5nIHNvbHV0aW9ucyBpbiBzaW5nbGUgcGxhY2UuXG4gKiBAc3VtbWFyeSBKYXZhU2NyaXB0IGF1ZGlvL3ZpZGVvIHJlY29yZGluZyBsaWJyYXJ5IHJ1bnMgdG9wIG92ZXIgV2ViUlRDIGdldFVzZXJNZWRpYSBBUEkuXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBSZWNvcmRSVENcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciByZWNvcmRSVEMgPSBSZWNvcmRSVEMobWVkaWFTdHJlYW0sIHtcbiAqICAgICB0eXBlOiAndmlkZW8nIC8vIGF1ZGlvIG9yIHZpZGVvIG9yIGdpZiBvciBjYW52YXNcbiAqIH0pO1xuICpcbiAqIC8vIG9yLCB5b3UgY2FuIGFsc28gdXNlIHRoZSBcIm5ld1wiIGtleXdvcmRcbiAqIHZhciByZWNvcmRSVEMgPSBuZXcgUmVjb3JkUlRDKG1lZGlhU3RyZWFtWywgY29uZmlnXSk7XG4gKiBAc2VlIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uOlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gbWVkaWFTdHJlYW0gLSBNZWRpYVN0cmVhbSBvYmplY3QgZmV0Y2hlZCB1c2luZyBnZXRVc2VyTWVkaWEgQVBJIG9yIGdlbmVyYXRlZCB1c2luZyBjYXB0dXJlU3RyZWFtVW50aWxFbmRlZCBvciBXZWJBdWRpbyBBUEkuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0ge3R5cGU6XCJ2aWRlb1wiLCBkaXNhYmxlTG9nczogdHJ1ZSwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzOiAxLCBidWZmZXJTaXplOiAwLCBzYW1wbGVSYXRlOiAwLCB2aWRlbzogSFRNTFZpZGVvRWxlbWVudCwgZXRjLn1cbiAqL1xuXG5mdW5jdGlvbiBSZWNvcmRSVEMobWVkaWFTdHJlYW0sIGNvbmZpZykge1xuICAgIGlmICghbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgdGhyb3cgJ01lZGlhU3RyZWFtIGlzIG1hbmRhdG9yeS4nO1xuICAgIH1cblxuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7XG4gICAgICAgIHR5cGU6ICd2aWRlbydcbiAgICB9O1xuXG4gICAgY29uZmlnID0gbmV3IFJlY29yZFJUQ0NvbmZpZ3VyYXRpb24obWVkaWFTdHJlYW0sIGNvbmZpZyk7XG5cbiAgICAvLyBhIHJlZmVyZW5jZSB0byB1c2VyJ3MgcmVjb3JkUlRDIG9iamVjdFxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIHN0YXJ0UmVjb3JkaW5nKCkge1xuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygnc3RhcnRlZCByZWNvcmRpbmcgJyArIGNvbmZpZy50eXBlICsgJyBzdHJlYW0uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5jbGVhclJlY29yZGVkRGF0YSgpO1xuICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5yZWNvcmQoKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYucmVjb3JkaW5nRHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVSZWNvcmRpbmdEdXJhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICBpbml0UmVjb3JkZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5yZWNvcmRpbmdEdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVJlY29yZGluZ0R1cmF0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRSZWNvcmRlcihpbml0Q2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGluaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uZmlnLmluaXRDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGluaXRDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIGluaXRDYWxsYmFjayA9IGNvbmZpZy5pbml0Q2FsbGJhY2sgPSBudWxsOyAvLyByZWNvcmRSVEMuaW5pdFJlY29yZGVyIHNob3VsZCBiZSBjYWxsLWJhY2tlZCBvbmNlLlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBSZWNvcmRlciA9IG5ldyBHZXRSZWNvcmRlclR5cGUobWVkaWFTdHJlYW0sIGNvbmZpZyk7XG5cbiAgICAgICAgbWVkaWFSZWNvcmRlciA9IG5ldyBSZWNvcmRlcihtZWRpYVN0cmVhbSwgY29uZmlnKTtcbiAgICAgICAgbWVkaWFSZWNvcmRlci5yZWNvcmQoKTtcblxuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnSW5pdGlhbGl6ZWQgcmVjb3JkZXJUeXBlOicsIG1lZGlhUmVjb3JkZXIuY29uc3RydWN0b3IubmFtZSwgJ2ZvciBvdXRwdXQtdHlwZTonLCBjb25maWcudHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdG9wUmVjb3JkaW5nKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgIHZhciByZWNvcmRSVEMgPSB0aGlzO1xuXG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1N0b3BwZWQgcmVjb3JkaW5nICcgKyBjb25maWcudHlwZSArICcgc3RyZWFtLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy50eXBlICE9PSAnZ2lmJykge1xuICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKF9jYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTtcbiAgICAgICAgICAgIF9jYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2NhbGxiYWNrKF9fYmxvYikge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZltpdGVtXSA9IG1lZGlhUmVjb3JkZXJbaXRlbV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZFJUQykge1xuICAgICAgICAgICAgICAgICAgICByZWNvcmRSVENbaXRlbV0gPSBtZWRpYVJlY29yZGVyW2l0ZW1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGJsb2IgPSBtZWRpYVJlY29yZGVyLmJsb2I7XG5cbiAgICAgICAgICAgIGlmICghYmxvYikge1xuICAgICAgICAgICAgICAgIGlmIChfX2Jsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5ibG9iID0gYmxvYiA9IF9fYmxvYjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnUmVjb3JkaW5nIGZhaWxlZC4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodXJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJsb2IgJiYgIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYmxvYi50eXBlLCAnLT4nLCBieXRlc1RvU2l6ZShibG9iLnNpemUpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjb25maWcuYXV0b1dyaXRlVG9EaXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnZXREYXRhVVJMKGZ1bmN0aW9uKGRhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyW2NvbmZpZy50eXBlICsgJ0Jsb2InXSA9IGRhdGFVUkw7XG4gICAgICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUocGFyYW1ldGVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF1c2VSZWNvcmRpbmcoKSB7XG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lZGlhUmVjb3JkZXIucGF1c2UoKTtcblxuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUGF1c2VkIHJlY29yZGluZy4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc3VtZVJlY29yZGluZygpIHtcbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFdBUk5JTkcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm90IGFsbCBsaWJzIGhhdmUgdGhpcyBtZXRob2QgeWV0XG4gICAgICAgIG1lZGlhUmVjb3JkZXIucmVzdW1lKCk7XG5cbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1Jlc3VtZWQgcmVjb3JkaW5nLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEZpbGUoX2Jsb2IpIHtcbiAgICAgICAgcG9zdE1lc3NhZ2UobmV3IEZpbGVSZWFkZXJTeW5jKCkucmVhZEFzRGF0YVVSTChfYmxvYikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERhdGFVUkwoY2FsbGJhY2ssIF9tZWRpYVJlY29yZGVyKSB7XG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93ICdQYXNzIGEgY2FsbGJhY2sgZnVuY3Rpb24gb3ZlciBnZXREYXRhVVJMLic7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYmxvYiA9IF9tZWRpYVJlY29yZGVyID8gX21lZGlhUmVjb3JkZXIuYmxvYiA6IChtZWRpYVJlY29yZGVyIHx8IHt9KS5ibG9iO1xuXG4gICAgICAgIGlmICghYmxvYikge1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Jsb2IgZW5jb2RlciBkaWQgbm90IGZpbmlzaCBpdHMgam9iIHlldC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBnZXREYXRhVVJMKGNhbGxiYWNrLCBfbWVkaWFSZWNvcmRlcik7XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgV29ya2VyICE9PSAndW5kZWZpbmVkJyAmJiAhbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuICAgICAgICAgICAgdmFyIHdlYldvcmtlciA9IHByb2Nlc3NJbldlYldvcmtlcihyZWFkRmlsZSk7XG5cbiAgICAgICAgICAgIHdlYldvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd2ViV29ya2VyLnBvc3RNZXNzYWdlKGJsb2IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NJbldlYldvcmtlcihfZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBibG9iID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbX2Z1bmN0aW9uLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgJ3RoaXMub25tZXNzYWdlID0gIGZ1bmN0aW9uIChlKSB7JyArIF9mdW5jdGlvbi5uYW1lICsgJyhlLmRhdGEpO30nXG4gICAgICAgICAgICBdLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnXG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKGJsb2IpO1xuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgIHJldHVybiB3b3JrZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVSZWNvcmRpbmdEdXJhdGlvbigpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHN0b3BSZWNvcmRpbmcoc2VsZi5vblJlY29yZGluZ1N0b3BwZWQpO1xuICAgICAgICB9LCBzZWxmLnJlY29yZGluZ0R1cmF0aW9uKTtcbiAgICB9XG5cbiAgICB2YXIgV0FSTklORyA9ICdJdCBzZWVtcyB0aGF0IFwic3RhcnRSZWNvcmRpbmdcIiBpcyBub3QgaW52b2tlZCBmb3IgJyArIGNvbmZpZy50eXBlICsgJyByZWNvcmRlci4nO1xuXG4gICAgdmFyIG1lZGlhUmVjb3JkZXI7XG5cbiAgICB2YXIgcmV0dXJuT2JqZWN0ID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc3RhcnRzIHJlY29yZGluZy4gSXQgZG9lc24ndCB0YWtlIGFueSBhcmd1bWVudHMuXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnN0YXJ0UmVjb3JkaW5nKCk7XG4gICAgICAgICAqL1xuICAgICAgICBzdGFydFJlY29yZGluZzogc3RhcnRSZWNvcmRpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHN0b3BzIHJlY29yZGluZy4gSXQgdGFrZXMgYSBzaW5nbGUgXCJjYWxsYmFja1wiIGFyZ3VtZW50LiBJdCBpcyBzdWdnZXN0ZWQgdG8gZ2V0IGJsb2Igb3IgVVJJIGluIHRoZSBjYWxsYmFjayB0byBtYWtlIHN1cmUgYWxsIGVuY29kZXJzIGZpbmlzaGVkIHRoZWlyIGpvYnMuXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gVGhpcyBjYWxsYmFjayBmdW5jdGlvbiBpcyBpbnZva2VkIGFmdGVyIGNvbXBsZXRpb24gb2YgYWxsIGVuY29kaW5nIGpvYnMuXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24odmlkZW9VUkwpIHtcbiAgICAgICAgICogICAgIHZpZGVvLnNyYyA9IHZpZGVvVVJMO1xuICAgICAgICAgKiAgICAgcmVjb3JkUlRDLmJsb2I7IHJlY29yZFJUQy5idWZmZXI7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgc3RvcFJlY29yZGluZzogc3RvcFJlY29yZGluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgcGF1c2VzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMucGF1c2VSZWNvcmRpbmcoKTtcbiAgICAgICAgICovXG4gICAgICAgIHBhdXNlUmVjb3JkaW5nOiBwYXVzZVJlY29yZGluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgcmVzdW1lcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnJlc3VtZVJlY29yZGluZygpO1xuICAgICAgICAgKi9cbiAgICAgICAgcmVzdW1lUmVjb3JkaW5nOiByZXN1bWVSZWNvcmRpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGluaXRpYWxpemVzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuaW5pdFJlY29yZGVyKCk7XG4gICAgICAgICAqL1xuICAgICAgICBpbml0UmVjb3JkZXI6IGluaXRSZWNvcmRlcixcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgcmVjb3JkaW5nIGR1cmF0aW9uLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zZXRSZWNvcmRpbmdEdXJhdGlvbigpO1xuICAgICAgICAgKi9cbiAgICAgICAgc2V0UmVjb3JkaW5nRHVyYXRpb246IGZ1bmN0aW9uKG1pbGxpc2Vjb25kcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWlsbGlzZWNvbmRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93ICdtaWxsaXNlY29uZHMgaXMgcmVxdWlyZWQuJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtaWxsaXNlY29uZHMgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ21pbGxpc2Vjb25kcyBtdXN0IGJlIGEgbnVtYmVyLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYucmVjb3JkaW5nRHVyYXRpb24gPSBtaWxsaXNlY29uZHM7XG4gICAgICAgICAgICBzZWxmLm9uUmVjb3JkaW5nU3RvcHBlZCA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgb25SZWNvcmRpbmdTdG9wcGVkOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uUmVjb3JkaW5nU3RvcHBlZCA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGNsZWFyL3Jlc2V0IGFsbCB0aGUgcmVjb3JkZWQgZGF0YS5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyUmVjb3JkZWREYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oV0FSTklORyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcblxuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdDbGVhcmVkIG9sZCByZWNvcmRlZCBkYXRhLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJdCBpcyBlcXVpdmFsZW50IHRvIDxjb2RlIGNsYXNzPVwic3RyXCI+XCJyZWNvcmRSVEMuYmxvYlwiPC9jb2RlPiBwcm9wZXJ0eS5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbigpIHtcbiAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkUlRDLmdldEJsb2IoKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIGVxdWl2YWxlbnQgdG86IHJlY29yZFJUQy5ibG9iIHByb3BlcnR5XG4gICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZFJUQy5ibG9iO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIGdldEJsb2I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1lZGlhUmVjb3JkZXIuYmxvYjtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgRGF0YVVSTC4gSXQgdGFrZXMgYSBzaW5nbGUgXCJjYWxsYmFja1wiIGFyZ3VtZW50LlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIERhdGFVUkwgaXMgcGFzc2VkIGJhY2sgb3ZlciB0aGlzIGNhbGxiYWNrLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgcmVjb3JkUlRDLmdldERhdGFVUkwoZnVuY3Rpb24oZGF0YVVSTCkge1xuICAgICAgICAgKiAgICAgICAgIHZpZGVvLnNyYyA9IGRhdGFVUkw7XG4gICAgICAgICAqICAgICB9KTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBnZXREYXRhVVJMOiBnZXREYXRhVVJMLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBWaXJ1dGFsL0Jsb2IgVVJMLiBJdCBkb2Vzbid0IHRha2UgYW55IGFyZ3VtZW50cy5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbigpIHtcbiAgICAgICAgICogICAgIHZpZGVvLnNyYyA9IHJlY29yZFJUQy50b1VSTCgpO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIHRvVVJMOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oV0FSTklORyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG1lZGlhUmVjb3JkZXIuYmxvYik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHNhdmVzIHRoZSBibG9iL2ZpbGUgdG8gZGlzayAoYnkgaW52b2tpbmcgc2F2ZS1hcyBkaWFsb2cpLiBJdCB0YWtlcyBhIHNpbmdsZSAob3B0aW9uYWwpIGFyZ3VtZW50IGkuZS4gRmlsZU5hbWVcbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbigpIHtcbiAgICAgICAgICogICAgIHJlY29yZFJUQy5zYXZlKCdmaWxlLW5hbWUnKTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBzYXZlOiBmdW5jdGlvbihmaWxlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW52b2tlU2F2ZUFzRGlhbG9nKG1lZGlhUmVjb3JkZXIuYmxvYiwgZmlsZU5hbWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBnZXRzIGEgYmxvYiBmcm9tIGluZGV4ZWQtREIgc3RvcmFnZS4gSXQgdGFrZXMgYSBzaW5nbGUgXCJjYWxsYmFja1wiIGFyZ3VtZW50LlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5nZXRGcm9tRGlzayhmdW5jdGlvbihkYXRhVVJMKSB7XG4gICAgICAgICAqICAgICB2aWRlby5zcmMgPSBkYXRhVVJMO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIGdldEZyb21EaXNrOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUmVjb3JkUlRDLmdldEZyb21EaXNrKGNvbmZpZy50eXBlLCBjYWxsYmFjayk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGFwcGVuZHMgYW4gYXJyYXkgb2Ygd2VicCBpbWFnZXMgdG8gdGhlIHJlY29yZGVkIHZpZGVvLWJsb2IuIEl0IHRha2VzIGFuIFwiYXJyYXlcIiBvYmplY3QuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48QXJyYXk+fVxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheU9mV2ViUEltYWdlcyAtIEFycmF5IG9mIHdlYnAgaW1hZ2VzLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHZhciBhcnJheU9mV2ViUEltYWdlcyA9IFtdO1xuICAgICAgICAgKiBhcnJheU9mV2ViUEltYWdlcy5wdXNoKHtcbiAgICAgICAgICogICAgIGR1cmF0aW9uOiBpbmRleCxcbiAgICAgICAgICogICAgIGltYWdlOiAnZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCwuLi4nXG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKiByZWNvcmRSVEMuc2V0QWR2ZXJ0aXNlbWVudEFycmF5KGFycmF5T2ZXZWJQSW1hZ2VzKTtcbiAgICAgICAgICovXG4gICAgICAgIHNldEFkdmVydGlzZW1lbnRBcnJheTogZnVuY3Rpb24oYXJyYXlPZldlYlBJbWFnZXMpIHtcbiAgICAgICAgICAgIGNvbmZpZy5hZHZlcnRpc2VtZW50ID0gW107XG5cbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcnJheU9mV2ViUEltYWdlcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmFkdmVydGlzZW1lbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBpLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogYXJyYXlPZldlYlBJbWFnZXNbaV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSXQgaXMgZXF1aXZhbGVudCB0byA8Y29kZSBjbGFzcz1cInN0clwiPlwicmVjb3JkUlRDLmdldEJsb2IoKVwiPC9jb2RlPiBtZXRob2QuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QmxvYn0gYmxvYiAtIFJlY29yZGVkIEJsb2IgY2FuIGJlIGFjY2Vzc2VkIHVzaW5nIHRoaXMgcHJvcGVydHkuXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgdmFyIGJsb2IgPSByZWNvcmRSVEMuYmxvYjtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIGVxdWl2YWxlbnQgdG86IHJlY29yZFJUQy5nZXRCbG9iKCkgbWV0aG9kXG4gICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZFJUQy5nZXRCbG9iKCk7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgYmxvYjogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHRvZG8gQWRkIGRlc2NyaXB0aW9ucy5cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGJ1ZmZlclNpemUgLSBFaXRoZXIgYXVkaW8gZGV2aWNlJ3MgZGVmYXVsdCBidWZmZXItc2l6ZSwgb3IgeW91ciBjdXN0b20gdmFsdWUuXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgdmFyIGJ1ZmZlclNpemUgPSByZWNvcmRSVEMuYnVmZmVyU2l6ZTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBidWZmZXJTaXplOiAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdG9kbyBBZGQgZGVzY3JpcHRpb25zLlxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gc2FtcGxlUmF0ZSAtIEF1ZGlvIGRldmljZSdzIGRlZmF1bHQgc2FtcGxlIHJhdGVzLlxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbigpIHtcbiAgICAgICAgICogICAgIHZhciBzYW1wbGVSYXRlID0gcmVjb3JkUlRDLnNhbXBsZVJhdGU7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgc2FtcGxlUmF0ZTogMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHRvZG8gQWRkIGRlc2NyaXB0aW9ucy5cbiAgICAgICAgICogQHByb3BlcnR5IHtBcnJheUJ1ZmZlcn0gYnVmZmVyIC0gQXVkaW8gQXJyYXlCdWZmZXIsIHN1cHBvcnRlZCBvbmx5IGluIENocm9tZS5cbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICAgICAqICAgICB2YXIgYnVmZmVyID0gcmVjb3JkUlRDLmJ1ZmZlcjtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBidWZmZXI6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0b2RvIEFkZCBkZXNjcmlwdGlvbnMuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RGF0YVZpZXd9IHZpZXcgLSBBdWRpbyBEYXRhVmlldywgc3VwcG9ydGVkIG9ubHkgaW4gQ2hyb21lLlxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbigpIHtcbiAgICAgICAgICogICAgIHZhciBkYXRhVmlldyA9IHJlY29yZFJUQy52aWV3O1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIHZpZXc6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKCF0aGlzKSB7XG4gICAgICAgIHNlbGYgPSByZXR1cm5PYmplY3Q7XG4gICAgICAgIHJldHVybiByZXR1cm5PYmplY3Q7XG4gICAgfVxuXG4gICAgLy8gaWYgc29tZW9uZSB3YW50cyB0byB1c2UgUmVjb3JkUlRDIHdpdGggdGhlIFwibmV3XCIga2V5d29yZC5cbiAgICBmb3IgKHZhciBwcm9wIGluIHJldHVybk9iamVjdCkge1xuICAgICAgICB0aGlzW3Byb3BdID0gcmV0dXJuT2JqZWN0W3Byb3BdO1xuICAgIH1cblxuICAgIHNlbGYgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHJldHVybk9iamVjdDtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBnZXQgYWxsIHJlY29yZGVkIGJsb2JzIGZyb20gSW5kZXhlZERCIHN0b3JhZ2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtICdhbGwnIG9yICdhdWRpbycgb3IgJ3ZpZGVvJyBvciAnZ2lmJ1xuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiB0byBnZXQgYWxsIHN0b3JlZCBibG9icy5cbiAqIEBtZXRob2RcbiAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAqIEBleGFtcGxlXG4gKiBSZWNvcmRSVEMuZ2V0RnJvbURpc2soJ2FsbCcsIGZ1bmN0aW9uKGRhdGFVUkwsIHR5cGUpe1xuICogICAgIGlmKHR5cGUgPT09ICdhdWRpbycpIHsgfVxuICogICAgIGlmKHR5cGUgPT09ICd2aWRlbycpIHsgfVxuICogICAgIGlmKHR5cGUgPT09ICdnaWYnKSAgIHsgfVxuICogfSk7XG4gKi9cblJlY29yZFJUQy5nZXRGcm9tRGlzayA9IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICB0aHJvdyAnY2FsbGJhY2sgaXMgbWFuZGF0b3J5Lic7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0dldHRpbmcgcmVjb3JkZWQgJyArICh0eXBlID09PSAnYWxsJyA/ICdibG9icycgOiB0eXBlICsgJyBibG9iICcpICsgJyBmcm9tIGRpc2shJyk7XG4gICAgRGlza1N0b3JhZ2UuRmV0Y2goZnVuY3Rpb24oZGF0YVVSTCwgX3R5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdhbGwnICYmIF90eXBlID09PSB0eXBlICsgJ0Jsb2InICYmIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhVVJMKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlID09PSAnYWxsJyAmJiBjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YVVSTCwgX3R5cGUucmVwbGFjZSgnQmxvYicsICcnKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gc3RvcmUgcmVjb3JkZWQgYmxvYnMgaW50byBJbmRleGVkREIgc3RvcmFnZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0ge2F1ZGlvOiBCbG9iLCB2aWRlbzogQmxvYiwgZ2lmOiBCbG9ifVxuICogQG1ldGhvZFxuICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICogQGV4YW1wbGVcbiAqIFJlY29yZFJUQy53cml0ZVRvRGlzayh7XG4gKiAgICAgYXVkaW86IGF1ZGlvQmxvYixcbiAqICAgICB2aWRlbzogdmlkZW9CbG9iLFxuICogICAgIGdpZiAgOiBnaWZCbG9iXG4gKiB9KTtcbiAqL1xuUmVjb3JkUlRDLndyaXRlVG9EaXNrID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGNvbnNvbGUubG9nKCdXcml0aW5nIHJlY29yZGVkIGJsb2IocykgdG8gZGlzayEnKTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAob3B0aW9ucy5hdWRpbyAmJiBvcHRpb25zLnZpZGVvICYmIG9wdGlvbnMuZ2lmKSB7XG4gICAgICAgIG9wdGlvbnMuYXVkaW8uZ2V0RGF0YVVSTChmdW5jdGlvbihhdWRpb0RhdGFVUkwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudmlkZW8uZ2V0RGF0YVVSTChmdW5jdGlvbih2aWRlb0RhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmdpZi5nZXREYXRhVVJMKGZ1bmN0aW9uKGdpZkRhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9CbG9iOiBhdWRpb0RhdGFVUkwsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0Jsb2I6IHZpZGVvRGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZkJsb2I6IGdpZkRhdGFVUkxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmF1ZGlvICYmIG9wdGlvbnMudmlkZW8pIHtcbiAgICAgICAgb3B0aW9ucy5hdWRpby5nZXREYXRhVVJMKGZ1bmN0aW9uKGF1ZGlvRGF0YVVSTCkge1xuICAgICAgICAgICAgb3B0aW9ucy52aWRlby5nZXREYXRhVVJMKGZ1bmN0aW9uKHZpZGVvRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgIERpc2tTdG9yYWdlLlN0b3JlKHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9CbG9iOiBhdWRpb0RhdGFVUkwsXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvQmxvYjogdmlkZW9EYXRhVVJMXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmF1ZGlvICYmIG9wdGlvbnMuZ2lmKSB7XG4gICAgICAgIG9wdGlvbnMuYXVkaW8uZ2V0RGF0YVVSTChmdW5jdGlvbihhdWRpb0RhdGFVUkwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZ2lmLmdldERhdGFVUkwoZnVuY3Rpb24oZ2lmRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgIERpc2tTdG9yYWdlLlN0b3JlKHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9CbG9iOiBhdWRpb0RhdGFVUkwsXG4gICAgICAgICAgICAgICAgICAgIGdpZkJsb2I6IGdpZkRhdGFVUkxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMudmlkZW8gJiYgb3B0aW9ucy5naWYpIHtcbiAgICAgICAgb3B0aW9ucy52aWRlby5nZXREYXRhVVJMKGZ1bmN0aW9uKHZpZGVvRGF0YVVSTCkge1xuICAgICAgICAgICAgb3B0aW9ucy5naWYuZ2V0RGF0YVVSTChmdW5jdGlvbihnaWZEYXRhVVJMKSB7XG4gICAgICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAgICAgICAgICAgICAgICB2aWRlb0Jsb2I6IHZpZGVvRGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgZ2lmQmxvYjogZ2lmRGF0YVVSTFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5hdWRpbykge1xuICAgICAgICBvcHRpb25zLmF1ZGlvLmdldERhdGFVUkwoZnVuY3Rpb24oYXVkaW9EYXRhVVJMKSB7XG4gICAgICAgICAgICBEaXNrU3RvcmFnZS5TdG9yZSh7XG4gICAgICAgICAgICAgICAgYXVkaW9CbG9iOiBhdWRpb0RhdGFVUkxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMudmlkZW8pIHtcbiAgICAgICAgb3B0aW9ucy52aWRlby5nZXREYXRhVVJMKGZ1bmN0aW9uKHZpZGVvRGF0YVVSTCkge1xuICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAgICAgICAgICAgIHZpZGVvQmxvYjogdmlkZW9EYXRhVVJMXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmdpZikge1xuICAgICAgICBvcHRpb25zLmdpZi5nZXREYXRhVVJMKGZ1bmN0aW9uKGdpZkRhdGFVUkwpIHtcbiAgICAgICAgICAgIERpc2tTdG9yYWdlLlN0b3JlKHtcbiAgICAgICAgICAgICAgICBnaWZCbG9iOiBnaWZEYXRhVVJMXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnIC8qICYmICEhbW9kdWxlLmV4cG9ydHMqLyApIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFJlY29yZFJUQztcbn1cblxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZSgnUmVjb3JkUlRDJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gUmVjb3JkUlRDO1xuICAgIH0pO1xufVxuXG4vLyBfX19fX19fX19fX19fX19fX19fX19fX19fX1xuLy8gUmVjb3JkUlRDLUNvbmZpZ3VyYXRpb24uanNcblxuLyoqXG4gKiB7QGxpbmsgUmVjb3JkUlRDQ29uZmlndXJhdGlvbn0gaXMgYW4gaW5uZXIvcHJpdmF0ZSBoZWxwZXIgZm9yIHtAbGluayBSZWNvcmRSVEN9LlxuICogQHN1bW1hcnkgSXQgY29uZmlndXJlcyB0aGUgMm5kIHBhcmFtZXRlciBwYXNzZWQgb3ZlciB7QGxpbmsgUmVjb3JkUlRDfSBhbmQgcmV0dXJucyBhIHZhbGlkIFwiY29uZmlnXCIgb2JqZWN0LlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgUmVjb3JkUlRDQ29uZmlndXJhdGlvblxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIG9wdGlvbnMgPSBSZWNvcmRSVENDb25maWd1cmF0aW9uKG1lZGlhU3RyZWFtLCBvcHRpb25zKTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gTWVkaWFTdHJlYW0gb2JqZWN0IGZldGNoZWQgdXNpbmcgZ2V0VXNlck1lZGlhIEFQSSBvciBnZW5lcmF0ZWQgdXNpbmcgY2FwdHVyZVN0cmVhbVVudGlsRW5kZWQgb3IgV2ViQXVkaW8gQVBJLlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHt0eXBlOlwidmlkZW9cIiwgZGlzYWJsZUxvZ3M6IHRydWUsIG51bWJlck9mQXVkaW9DaGFubmVsczogMSwgYnVmZmVyU2l6ZTogMCwgc2FtcGxlUmF0ZTogMCwgdmlkZW86IEhUTUxWaWRlb0VsZW1lbnQsIGdldE5hdGl2ZUJsb2I6dHJ1ZSwgZXRjLn1cbiAqL1xuXG5mdW5jdGlvbiBSZWNvcmRSVENDb25maWd1cmF0aW9uKG1lZGlhU3RyZWFtLCBjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnJlY29yZGVyVHlwZSAmJiAhY29uZmlnLnR5cGUpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5yZWNvcmRlclR5cGUgPT09IFdoYW1teVJlY29yZGVyIHx8IGNvbmZpZy5yZWNvcmRlclR5cGUgPT09IENhbnZhc1JlY29yZGVyKSB7XG4gICAgICAgICAgICBjb25maWcudHlwZSA9ICd2aWRlbyc7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnJlY29yZGVyVHlwZSA9PT0gR2lmUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIGNvbmZpZy50eXBlID0gJ2dpZic7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnJlY29yZGVyVHlwZSA9PT0gU3RlcmVvQXVkaW9SZWNvcmRlcikge1xuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSAnYXVkaW8nO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5yZWNvcmRlclR5cGUgPT09IE1lZGlhU3RyZWFtUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIGlmIChtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCAmJiBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50eXBlID0gJ3ZpZGVvJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggJiYgIW1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnR5cGUgPSAnYXVkaW8nO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghbWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggJiYgbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25maWcudHlwZSA9ICdhdWRpbyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGNvbmZpZy50eXBlID0gJ1VuS25vd24nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBNZWRpYVN0cmVhbVJlY29yZGVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVkaWFSZWNvcmRlciAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3JlcXVlc3REYXRhJyBpbiBNZWRpYVJlY29yZGVyLnByb3RvdHlwZSkge1xuICAgICAgICBpZiAoIWNvbmZpZy5taW1lVHlwZSkge1xuICAgICAgICAgICAgY29uZmlnLm1pbWVUeXBlID0gJ3ZpZGVvL3dlYm0nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb25maWcudHlwZSkge1xuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSBjb25maWcubWltZVR5cGUuc3BsaXQoJy8nKVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZmlnLmJpdHNQZXJTZWNvbmQpIHtcbiAgICAgICAgICAgIC8vIGNvbmZpZy5iaXRzUGVyU2Vjb25kID0gMTI4MDAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29uc2lkZXIgZGVmYXVsdCB0eXBlPWF1ZGlvXG4gICAgaWYgKCFjb25maWcudHlwZSkge1xuICAgICAgICBpZiAoY29uZmlnLm1pbWVUeXBlKSB7XG4gICAgICAgICAgICBjb25maWcudHlwZSA9IGNvbmZpZy5taW1lVHlwZS5zcGxpdCgnLycpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29uZmlnLnR5cGUpIHtcbiAgICAgICAgICAgIGNvbmZpZy50eXBlID0gJ2F1ZGlvJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb25maWc7XG59XG5cbi8vIF9fX19fX19fX19fX19fX19fX1xuLy8gR2V0UmVjb3JkZXJUeXBlLmpzXG5cbi8qKlxuICoge0BsaW5rIEdldFJlY29yZGVyVHlwZX0gaXMgYW4gaW5uZXIvcHJpdmF0ZSBoZWxwZXIgZm9yIHtAbGluayBSZWNvcmRSVEN9LlxuICogQHN1bW1hcnkgSXQgcmV0dXJucyBiZXN0IHJlY29yZGVyLXR5cGUgYXZhaWxhYmxlIGZvciB5b3VyIGJyb3dzZXIuXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBHZXRSZWNvcmRlclR5cGVcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciBSZWNvcmRlclR5cGUgPSBHZXRSZWNvcmRlclR5cGUob3B0aW9ucyk7XG4gKiB2YXIgcmVjb3JkZXIgPSBuZXcgUmVjb3JkZXJUeXBlKG9wdGlvbnMpO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gbWVkaWFTdHJlYW0gLSBNZWRpYVN0cmVhbSBvYmplY3QgZmV0Y2hlZCB1c2luZyBnZXRVc2VyTWVkaWEgQVBJIG9yIGdlbmVyYXRlZCB1c2luZyBjYXB0dXJlU3RyZWFtVW50aWxFbmRlZCBvciBXZWJBdWRpbyBBUEkuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0ge3R5cGU6XCJ2aWRlb1wiLCBkaXNhYmxlTG9nczogdHJ1ZSwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzOiAxLCBidWZmZXJTaXplOiAwLCBzYW1wbGVSYXRlOiAwLCB2aWRlbzogSFRNTFZpZGVvRWxlbWVudCwgZXRjLn1cbiAqL1xuXG5mdW5jdGlvbiBHZXRSZWNvcmRlclR5cGUobWVkaWFTdHJlYW0sIGNvbmZpZykge1xuICAgIHZhciByZWNvcmRlcjtcblxuICAgIC8vIFN0ZXJlb0F1ZGlvUmVjb3JkZXIgY2FuIHdvcmsgd2l0aCBhbGwgdGhyZWU6IEVkZ2UsIEZpcmVmb3ggYW5kIENocm9tZVxuICAgIC8vIHRvZG86IGRldGVjdCBpZiBpdCBpcyBFZGdlLCB0aGVuIGF1dG8gdXNlOiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgaWYgKGlzQ2hyb21lIHx8IGlzRWRnZSB8fCBpc09wZXJhKSB7XG4gICAgICAgIC8vIE1lZGlhIFN0cmVhbSBSZWNvcmRpbmcgQVBJIGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZCBpbiBjaHJvbWUgeWV0O1xuICAgICAgICAvLyBUaGF0J3Mgd2h5IHVzaW5nIFdlYkF1ZGlvIEFQSSB0byByZWNvcmQgc3RlcmVvIGF1ZGlvIGluIFdBViBmb3JtYXRcbiAgICAgICAgcmVjb3JkZXIgPSBTdGVyZW9BdWRpb1JlY29yZGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgTWVkaWFSZWNvcmRlciAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3JlcXVlc3REYXRhJyBpbiBNZWRpYVJlY29yZGVyLnByb3RvdHlwZSAmJiAhaXNDaHJvbWUpIHtcbiAgICAgICAgcmVjb3JkZXIgPSBNZWRpYVN0cmVhbVJlY29yZGVyO1xuICAgIH1cblxuICAgIC8vIHZpZGVvIHJlY29yZGVyIChpbiBXZWJNIGZvcm1hdClcbiAgICBpZiAoY29uZmlnLnR5cGUgPT09ICd2aWRlbycgJiYgKGlzQ2hyb21lIHx8IGlzT3BlcmEpKSB7XG4gICAgICAgIHJlY29yZGVyID0gV2hhbW15UmVjb3JkZXI7XG4gICAgfVxuXG4gICAgLy8gdmlkZW8gcmVjb3JkZXIgKGluIEdpZiBmb3JtYXQpXG4gICAgaWYgKGNvbmZpZy50eXBlID09PSAnZ2lmJykge1xuICAgICAgICByZWNvcmRlciA9IEdpZlJlY29yZGVyO1xuICAgIH1cblxuICAgIC8vIGh0bWwyY2FudmFzIHJlY29yZGluZyFcbiAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdjYW52YXMnKSB7XG4gICAgICAgIHJlY29yZGVyID0gQ2FudmFzUmVjb3JkZXI7XG4gICAgfVxuXG4gICAgaWYgKGlzTWVkaWFSZWNvcmRlckNvbXBhdGlibGUoKSAmJiByZWNvcmRlciAhPT0gQ2FudmFzUmVjb3JkZXIgJiYgcmVjb3JkZXIgIT09IEdpZlJlY29yZGVyICYmIHR5cGVvZiBNZWRpYVJlY29yZGVyICE9PSAndW5kZWZpbmVkJyAmJiAncmVxdWVzdERhdGEnIGluIE1lZGlhUmVjb3JkZXIucHJvdG90eXBlKSB7XG4gICAgICAgIGlmICgobWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MgJiYgbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHx8IChtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcyAmJiBtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIC8vIGF1ZGlvLW9ubHkgcmVjb3JkaW5nXG4gICAgICAgICAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkID09PSAnZnVuY3Rpb24nICYmIE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKCdhdWRpby93ZWJtJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkZXIgPSBNZWRpYVN0cmVhbVJlY29yZGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlbHNlIHJlY29yZGVyID0gU3RlcmVvQXVkaW9SZWNvcmRlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdmlkZW8gb3Igc2NyZWVuIHRyYWNrc1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQgPT09ICdmdW5jdGlvbicgJiYgTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoJ3ZpZGVvL3dlYm0nKSkge1xuICAgICAgICAgICAgICAgICAgICByZWNvcmRlciA9IE1lZGlhU3RyZWFtUmVjb3JkZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5yZWNvcmRlclR5cGUpIHtcbiAgICAgICAgcmVjb3JkZXIgPSBjb25maWcucmVjb3JkZXJUeXBlO1xuICAgIH1cblxuICAgIGlmIChtZWRpYVN0cmVhbSBpbnN0YW5jZW9mIEFycmF5ICYmIG1lZGlhU3RyZWFtLmxlbmd0aCkge1xuICAgICAgICByZWNvcmRlciA9IE11bHRpU3RyZWFtUmVjb3JkZXI7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MgJiYgISFyZWNvcmRlciAmJiAhIXJlY29yZGVyLm5hbWUpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnVXNpbmcgcmVjb3JkZXJUeXBlOicsIHJlY29yZGVyLm5hbWUgfHwgcmVjb3JkZXIuY29uc3RydWN0b3IubmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY29yZGVyO1xufVxuXG4vLyBfX19fX19fX19fX19fXG4vLyBNUmVjb3JkUlRDLmpzXG5cbi8qKlxuICogTVJlY29yZFJUQyBydW5zIG9uIHRvcCBvZiB7QGxpbmsgUmVjb3JkUlRDfSB0byBicmluZyBtdWx0aXBsZSByZWNvcmRpbmdzIGluIGEgc2luZ2xlIHBsYWNlLCBieSBwcm92aWRpbmcgc2ltcGxlIEFQSS5cbiAqIEBzdW1tYXJ5IE1SZWNvcmRSVEMgc3RhbmRzIGZvciBcIk11bHRpcGxlLVJlY29yZFJUQ1wiLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgTVJlY29yZFJUQ1xuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIHJlY29yZGVyID0gbmV3IE1SZWNvcmRSVEMoKTtcbiAqIHJlY29yZGVyLmFkZFN0cmVhbShNZWRpYVN0cmVhbSk7XG4gKiByZWNvcmRlci5tZWRpYVR5cGUgPSB7XG4gKiAgICAgYXVkaW86IHRydWUsIC8vIG9yIFN0ZXJlb0F1ZGlvUmVjb3JkZXIgb3IgTWVkaWFTdHJlYW1SZWNvcmRlclxuICogICAgIHZpZGVvOiB0cnVlLCAvLyBvciBXaGFtbXlSZWNvcmRlciBvciBNZWRpYVN0cmVhbVJlY29yZGVyXG4gKiAgICAgZ2lmOiB0cnVlICAgIC8vIG9yIEdpZlJlY29yZGVyXG4gKiB9O1xuICogLy8gbWltZVR5cGUgaXMgb3B0aW9uYWwgYW5kIHNob3VsZCBiZSBzZXQgb25seSBpbiBhZHZhbmNlIGNhc2VzLlxuICogcmVjb3JkZXIubWltZVR5cGUgPSB7XG4gKiAgICAgYXVkaW86ICdhdWRpby93YXYnLFxuICogICAgIHZpZGVvOiAndmlkZW8vd2VibScsXG4gKiAgICAgZ2lmOiAgICdpbWFnZS9naWYnXG4gKiB9O1xuICogcmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAqIEBzZWUgRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb246XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQy90cmVlL21hc3Rlci9NUmVjb3JkUlRDfE1SZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBtZWRpYVN0cmVhbSAtIE1lZGlhU3RyZWFtIG9iamVjdCBmZXRjaGVkIHVzaW5nIGdldFVzZXJNZWRpYSBBUEkgb3IgZ2VuZXJhdGVkIHVzaW5nIGNhcHR1cmVTdHJlYW1VbnRpbEVuZGVkIG9yIFdlYkF1ZGlvIEFQSS5cbiAqL1xuXG5mdW5jdGlvbiBNUmVjb3JkUlRDKG1lZGlhU3RyZWFtKSB7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBhdHRhY2hlcyBNZWRpYVN0cmVhbSBvYmplY3QgdG8ge0BsaW5rIE1SZWNvcmRSVEN9LlxuICAgICAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gQSBNZWRpYVN0cmVhbSBvYmplY3QsIGVpdGhlciBmZXRjaGVkIHVzaW5nIGdldFVzZXJNZWRpYSBBUEksIG9yIGdlbmVyYXRlZCB1c2luZyBjYXB0dXJlU3RyZWFtVW50aWxFbmRlZCBvciBXZWJBdWRpbyBBUEkuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5hZGRTdHJlYW0oTWVkaWFTdHJlYW0pO1xuICAgICAqL1xuICAgIHRoaXMuYWRkU3RyZWFtID0gZnVuY3Rpb24oX21lZGlhU3RyZWFtKSB7XG4gICAgICAgIGlmIChfbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgIG1lZGlhU3RyZWFtID0gX21lZGlhU3RyZWFtO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgcHJvcGVydHkgY2FuIGJlIHVzZWQgdG8gc2V0IHRoZSByZWNvcmRpbmcgdHlwZSBlLmcuIGF1ZGlvLCBvciB2aWRlbywgb3IgZ2lmLCBvciBjYW52YXMuXG4gICAgICogQHByb3BlcnR5IHtvYmplY3R9IG1lZGlhVHlwZSAtIHthdWRpbzogdHJ1ZSwgdmlkZW86IHRydWUsIGdpZjogdHJ1ZX1cbiAgICAgKiBAbWVtYmVyb2YgTVJlY29yZFJUQ1xuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIHJlY29yZGVyID0gbmV3IE1SZWNvcmRSVEMoKTtcbiAgICAgKiByZWNvcmRlci5tZWRpYVR5cGUgPSB7XG4gICAgICogICAgIGF1ZGlvOiB0cnVlLCAvLyBUUlVFIG9yIFN0ZXJlb0F1ZGlvUmVjb3JkZXIgb3IgTWVkaWFTdHJlYW1SZWNvcmRlclxuICAgICAqICAgICB2aWRlbzogdHJ1ZSwgLy8gVFJVRSBvciBXaGFtbXlSZWNvcmRlciBvciBNZWRpYVN0cmVhbVJlY29yZGVyXG4gICAgICogICAgIGdpZiAgOiB0cnVlICAvLyBUUlVFIG9yIEdpZlJlY29yZGVyXG4gICAgICogfTtcbiAgICAgKi9cbiAgICB0aGlzLm1lZGlhVHlwZSA9IHtcbiAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgIHZpZGVvOiB0cnVlXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0YXJ0cyByZWNvcmRpbmcuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICAgICAqL1xuICAgIHRoaXMuc3RhcnRSZWNvcmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1lZGlhVHlwZSA9IHRoaXMubWVkaWFUeXBlO1xuICAgICAgICB2YXIgcmVjb3JkZXJUeXBlO1xuICAgICAgICB2YXIgbWltZVR5cGUgPSB0aGlzLm1pbWVUeXBlIHx8IHtcbiAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgdmlkZW86IG51bGwsXG4gICAgICAgICAgICBnaWY6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodHlwZW9mIG1lZGlhVHlwZS5hdWRpbyAhPT0gJ2Z1bmN0aW9uJyAmJiBpc01lZGlhUmVjb3JkZXJDb21wYXRpYmxlKCkgJiYgbWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MgJiYgIW1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGaXJlZm94IHN1cHBvcnRzIGJvdGggYXVkaW8vdmlkZW8gaW4gc2luZ2xlIGJsb2JcbiAgICAgICAgICAgIG1lZGlhVHlwZS5hdWRpbyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBtZWRpYVR5cGUudmlkZW8gIT09ICdmdW5jdGlvbicgJiYgaXNNZWRpYVJlY29yZGVyQ29tcGF0aWJsZSgpICYmIG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzICYmICFtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRmlyZWZveCBzdXBwb3J0cyBib3RoIGF1ZGlvL3ZpZGVvIGluIHNpbmdsZSBibG9iXG4gICAgICAgICAgICBtZWRpYVR5cGUudmlkZW8gPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbWVkaWFUeXBlLmF1ZGlvICYmICFtZWRpYVR5cGUudmlkZW8pIHtcbiAgICAgICAgICAgIHRocm93ICdNZWRpYVN0cmVhbSBtdXN0IGhhdmUgZWl0aGVyIGF1ZGlvIG9yIHZpZGVvIHRyYWNrcy4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEhbWVkaWFUeXBlLmF1ZGlvKSB7XG4gICAgICAgICAgICByZWNvcmRlclR5cGUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZWRpYVR5cGUuYXVkaW8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZWNvcmRlclR5cGUgPSBtZWRpYVR5cGUuYXVkaW87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYXVkaW9SZWNvcmRlciA9IG5ldyBSZWNvcmRSVEMobWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgICAgIGJ1ZmZlclNpemU6IHRoaXMuYnVmZmVyU2l6ZSxcbiAgICAgICAgICAgICAgICBzYW1wbGVSYXRlOiB0aGlzLnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzOiB0aGlzLm51bWJlck9mQXVkaW9DaGFubmVscyB8fCAyLFxuICAgICAgICAgICAgICAgIGRpc2FibGVMb2dzOiB0aGlzLmRpc2FibGVMb2dzLFxuICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZTogcmVjb3JkZXJUeXBlLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZS5hdWRpb1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghbWVkaWFUeXBlLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb1JlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFtZWRpYVR5cGUudmlkZW8pIHtcbiAgICAgICAgICAgIHJlY29yZGVyVHlwZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lZGlhVHlwZS52aWRlbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZSA9IG1lZGlhVHlwZS52aWRlbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG5ld1N0cmVhbSA9IG1lZGlhU3RyZWFtO1xuXG4gICAgICAgICAgICBpZiAoaXNNZWRpYVJlY29yZGVyQ29tcGF0aWJsZSgpICYmICEhbWVkaWFUeXBlLmF1ZGlvICYmIHR5cGVvZiBtZWRpYVR5cGUuYXVkaW8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlkZW9UcmFjayA9IG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XG5cbiAgICAgICAgICAgICAgICBpZiAoISFuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXdTdHJlYW0uYWRkVHJhY2sodmlkZW9UcmFjayk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY29yZGVyVHlwZSAmJiByZWNvcmRlclR5cGUgPT09IFdoYW1teVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IGRvZXMgTk9UIHN1cHBvcnQgd2VicC1lbmNvZGluZyB5ZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZSA9IE1lZGlhU3RyZWFtUmVjb3JkZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oW3ZpZGVvVHJhY2tdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudmlkZW9SZWNvcmRlciA9IG5ldyBSZWNvcmRSVEMobmV3U3RyZWFtLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvJyxcbiAgICAgICAgICAgICAgICB2aWRlbzogdGhpcy52aWRlbyxcbiAgICAgICAgICAgICAgICBjYW52YXM6IHRoaXMuY2FudmFzLFxuICAgICAgICAgICAgICAgIGZyYW1lSW50ZXJ2YWw6IHRoaXMuZnJhbWVJbnRlcnZhbCB8fCAxMCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlTG9nczogdGhpcy5kaXNhYmxlTG9ncyxcbiAgICAgICAgICAgICAgICByZWNvcmRlclR5cGU6IHJlY29yZGVyVHlwZSxcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogbWltZVR5cGUudmlkZW9cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIW1lZGlhVHlwZS5hdWRpbykge1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9SZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEhbWVkaWFUeXBlLmF1ZGlvICYmICEhbWVkaWFUeXBlLnZpZGVvKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaXNNZWRpYVJlY29yZGVyQ29tcGF0aWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hdWRpb1JlY29yZGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzZWxmLnZpZGVvUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi52aWRlb1JlY29yZGVyLmluaXRSZWNvcmRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdWRpb1JlY29yZGVyLmluaXRSZWNvcmRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvdGggcmVjb3JkZXJzIGFyZSByZWFkeSB0byByZWNvcmQgdGhpbmdzIGFjY3VyYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudmlkZW9SZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hdWRpb1JlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEhbWVkaWFUeXBlLmdpZikge1xuICAgICAgICAgICAgcmVjb3JkZXJUeXBlID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVkaWFUeXBlLmdpZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZSA9IG1lZGlhVHlwZS5naWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdpZlJlY29yZGVyID0gbmV3IFJlY29yZFJUQyhtZWRpYVN0cmVhbSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdnaWYnLFxuICAgICAgICAgICAgICAgIGZyYW1lUmF0ZTogdGhpcy5mcmFtZVJhdGUgfHwgMjAwLFxuICAgICAgICAgICAgICAgIHF1YWxpdHk6IHRoaXMucXVhbGl0eSB8fCAxMCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlTG9nczogdGhpcy5kaXNhYmxlTG9ncyxcbiAgICAgICAgICAgICAgICByZWNvcmRlclR5cGU6IHJlY29yZGVyVHlwZSxcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogbWltZVR5cGUuZ2lmXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZ2lmUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9wcyByZWNvcmRpbmcuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiBpcyBpbnZva2VkIHdoZW4gYWxsIGVuY29kZXJzIGZpbmlzaGVkIHRoZWlyIGpvYnMuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKHJlY29yZGluZyl7XG4gICAgICogICAgIHZhciBhdWRpb0Jsb2IgPSByZWNvcmRpbmcuYXVkaW87XG4gICAgICogICAgIHZhciB2aWRlb0Jsb2IgPSByZWNvcmRpbmcudmlkZW87XG4gICAgICogICAgIHZhciBnaWZCbG9iICAgPSByZWNvcmRpbmcuZ2lmO1xuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRoaXMuc3RvcFJlY29yZGluZyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICBpZiAodGhpcy5hdWRpb1JlY29yZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvUmVjb3JkZXIuc3RvcFJlY29yZGluZyhmdW5jdGlvbihibG9iVVJMKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYmxvYlVSTCwgJ2F1ZGlvJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnZpZGVvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9SZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKGJsb2JVUkwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhibG9iVVJMLCAndmlkZW8nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ2lmUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2lmUmVjb3JkZXIuc3RvcFJlY29yZGluZyhmdW5jdGlvbihibG9iVVJMKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYmxvYlVSTCwgJ2dpZicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGF1c2VzIHJlY29yZGluZy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnBhdXNlUmVjb3JkaW5nKCk7XG4gICAgICovXG4gICAgdGhpcy5wYXVzZVJlY29yZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5hdWRpb1JlY29yZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvUmVjb3JkZXIucGF1c2VSZWNvcmRpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnZpZGVvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9SZWNvcmRlci5wYXVzZVJlY29yZGluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ2lmUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2lmUmVjb3JkZXIucGF1c2VSZWNvcmRpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXN1bWVzIHJlY29yZGluZy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlc3VtZVJlY29yZGluZygpO1xuICAgICAqL1xuICAgIHRoaXMucmVzdW1lUmVjb3JkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9SZWNvcmRlci5yZXN1bWVSZWNvcmRpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnZpZGVvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9SZWNvcmRlci5yZXN1bWVSZWNvcmRpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmdpZlJlY29yZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmdpZlJlY29yZGVyLnJlc3VtZVJlY29yZGluZygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIG1hbnVhbGx5IGdldCBhbGwgcmVjb3JkZWQgYmxvYnMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBBbGwgcmVjb3JkZWQgYmxvYnMgYXJlIHBhc3NlZCBiYWNrIHRvIHRoZSBcImNhbGxiYWNrXCIgZnVuY3Rpb24uXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5nZXRCbG9iKGZ1bmN0aW9uKHJlY29yZGluZyl7XG4gICAgICogICAgIHZhciBhdWRpb0Jsb2IgPSByZWNvcmRpbmcuYXVkaW87XG4gICAgICogICAgIHZhciB2aWRlb0Jsb2IgPSByZWNvcmRpbmcudmlkZW87XG4gICAgICogICAgIHZhciBnaWZCbG9iICAgPSByZWNvcmRpbmcuZ2lmO1xuICAgICAqIH0pO1xuICAgICAqIC8vIG9yXG4gICAgICogdmFyIGF1ZGlvQmxvYiA9IHJlY29yZGVyLmdldEJsb2IoKS5hdWRpbztcbiAgICAgKiB2YXIgdmlkZW9CbG9iID0gcmVjb3JkZXIuZ2V0QmxvYigpLnZpZGVvO1xuICAgICAqL1xuICAgIHRoaXMuZ2V0QmxvYiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBvdXRwdXQgPSB7fTtcblxuICAgICAgICBpZiAodGhpcy5hdWRpb1JlY29yZGVyKSB7XG4gICAgICAgICAgICBvdXRwdXQuYXVkaW8gPSB0aGlzLmF1ZGlvUmVjb3JkZXIuZ2V0QmxvYigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudmlkZW9SZWNvcmRlcikge1xuICAgICAgICAgICAgb3V0cHV0LnZpZGVvID0gdGhpcy52aWRlb1JlY29yZGVyLmdldEJsb2IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmdpZlJlY29yZGVyKSB7XG4gICAgICAgICAgICBvdXRwdXQuZ2lmID0gdGhpcy5naWZSZWNvcmRlci5nZXRCbG9iKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG91dHB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBtYW51YWxseSBnZXQgYWxsIHJlY29yZGVkIGJsb2JzJyBEYXRhVVJMcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEFsbCByZWNvcmRlZCBibG9icycgRGF0YVVSTHMgYXJlIHBhc3NlZCBiYWNrIHRvIHRoZSBcImNhbGxiYWNrXCIgZnVuY3Rpb24uXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5nZXREYXRhVVJMKGZ1bmN0aW9uKHJlY29yZGluZyl7XG4gICAgICogICAgIHZhciBhdWRpb0RhdGFVUkwgPSByZWNvcmRpbmcuYXVkaW87XG4gICAgICogICAgIHZhciB2aWRlb0RhdGFVUkwgPSByZWNvcmRpbmcudmlkZW87XG4gICAgICogICAgIHZhciBnaWZEYXRhVVJMICAgPSByZWNvcmRpbmcuZ2lmO1xuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRoaXMuZ2V0RGF0YVVSTCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZ2V0QmxvYihmdW5jdGlvbihibG9iKSB7XG4gICAgICAgICAgICBpZiAoYmxvYi5hdWRpbyAmJiBibG9iLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgZ2V0RGF0YVVSTChibG9iLmF1ZGlvLCBmdW5jdGlvbihfYXVkaW9EYXRhVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldERhdGFVUkwoYmxvYi52aWRlbywgZnVuY3Rpb24oX3ZpZGVvRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBfYXVkaW9EYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiBfdmlkZW9EYXRhVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2IuYXVkaW8pIHtcbiAgICAgICAgICAgICAgICBnZXREYXRhVVJMKGJsb2IuYXVkaW8sIGZ1bmN0aW9uKF9hdWRpb0RhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IF9hdWRpb0RhdGFVUkxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2IudmlkZW8pIHtcbiAgICAgICAgICAgICAgICBnZXREYXRhVVJMKGJsb2IudmlkZW8sIGZ1bmN0aW9uKF92aWRlb0RhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IF92aWRlb0RhdGFVUkxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldERhdGFVUkwoYmxvYiwgY2FsbGJhY2swMCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdlYldvcmtlciA9IHByb2Nlc3NJbldlYldvcmtlcihmdW5jdGlvbiByZWFkRmlsZShfYmxvYikge1xuICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShuZXcgRmlsZVJlYWRlclN5bmMoKS5yZWFkQXNEYXRhVVJMKF9ibG9iKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB3ZWJXb3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2swMChldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgd2ViV29ya2VyLnBvc3RNZXNzYWdlKGJsb2IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2swMChldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0luV2ViV29ya2VyKF9mdW5jdGlvbikge1xuICAgICAgICAgICAgdmFyIGJsb2IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtfZnVuY3Rpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAndGhpcy5vbm1lc3NhZ2UgPSAgZnVuY3Rpb24gKGUpIHsnICsgX2Z1bmN0aW9uLm5hbWUgKyAnKGUuZGF0YSk7fSdcbiAgICAgICAgICAgIF0sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCdcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoYmxvYik7XG4gICAgICAgICAgICB2YXIgdXJsO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBVUkwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gVVJMO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0VVJMICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHVybCA9IHdlYmtpdFVSTDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ05laXRoZXIgVVJMIG5vciB3ZWJraXRVUkwgZGV0ZWN0ZWQuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybC5yZXZva2VPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICByZXR1cm4gd29ya2VyO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGFzayB7QGxpbmsgTVJlY29yZFJUQ30gdG8gd3JpdGUgYWxsIHJlY29yZGVkIGJsb2JzIGludG8gSW5kZXhlZERCIHN0b3JhZ2UuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci53cml0ZVRvRGlzaygpO1xuICAgICAqL1xuICAgIHRoaXMud3JpdGVUb0Rpc2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgUmVjb3JkUlRDLndyaXRlVG9EaXNrKHtcbiAgICAgICAgICAgIGF1ZGlvOiB0aGlzLmF1ZGlvUmVjb3JkZXIsXG4gICAgICAgICAgICB2aWRlbzogdGhpcy52aWRlb1JlY29yZGVyLFxuICAgICAgICAgICAgZ2lmOiB0aGlzLmdpZlJlY29yZGVyXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBpbnZva2UgYSBzYXZlLWFzIGRpYWxvZyBmb3IgYWxsIHJlY29yZGVkIGJsb2JzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzIC0ge2F1ZGlvOiAnYXVkaW8tbmFtZScsIHZpZGVvOiAndmlkZW8tbmFtZScsIGdpZjogJ2dpZi1uYW1lJ31cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnNhdmUoe1xuICAgICAqICAgICBhdWRpbzogJ2F1ZGlvLWZpbGUtbmFtZScsXG4gICAgICogICAgIHZpZGVvOiAndmlkZW8tZmlsZS1uYW1lJyxcbiAgICAgKiAgICAgZ2lmICA6ICdnaWYtZmlsZS1uYW1lJ1xuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgYXJncyA9IGFyZ3MgfHwge1xuICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICB2aWRlbzogdHJ1ZSxcbiAgICAgICAgICAgIGdpZjogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghIWFyZ3MuYXVkaW8gJiYgdGhpcy5hdWRpb1JlY29yZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvUmVjb3JkZXIuc2F2ZSh0eXBlb2YgYXJncy5hdWRpbyA9PT0gJ3N0cmluZycgPyBhcmdzLmF1ZGlvIDogJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEhYXJncy52aWRlbyAmJiB0aGlzLnZpZGVvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9SZWNvcmRlci5zYXZlKHR5cGVvZiBhcmdzLnZpZGVvID09PSAnc3RyaW5nJyA/IGFyZ3MudmlkZW8gOiAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhYXJncy5naWYgJiYgdGhpcy5naWZSZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy5naWZSZWNvcmRlci5zYXZlKHR5cGVvZiBhcmdzLmdpZiA9PT0gJ3N0cmluZycgPyBhcmdzLmdpZiA6ICcnKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gZ2V0IGFsbCByZWNvcmRlZCBibG9icyBmcm9tIEluZGV4ZWREQiBzdG9yYWdlLlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSAnYWxsJyBvciAnYXVkaW8nIG9yICd2aWRlbycgb3IgJ2dpZidcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gZ2V0IGFsbCBzdG9yZWQgYmxvYnMuXG4gKiBAbWV0aG9kXG4gKiBAbWVtYmVyb2YgTVJlY29yZFJUQ1xuICogQGV4YW1wbGVcbiAqIE1SZWNvcmRSVEMuZ2V0RnJvbURpc2soJ2FsbCcsIGZ1bmN0aW9uKGRhdGFVUkwsIHR5cGUpe1xuICogICAgIGlmKHR5cGUgPT09ICdhdWRpbycpIHsgfVxuICogICAgIGlmKHR5cGUgPT09ICd2aWRlbycpIHsgfVxuICogICAgIGlmKHR5cGUgPT09ICdnaWYnKSAgIHsgfVxuICogfSk7XG4gKi9cbk1SZWNvcmRSVEMuZ2V0RnJvbURpc2sgPSBSZWNvcmRSVEMuZ2V0RnJvbURpc2s7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gc3RvcmUgcmVjb3JkZWQgYmxvYnMgaW50byBJbmRleGVkREIgc3RvcmFnZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0ge2F1ZGlvOiBCbG9iLCB2aWRlbzogQmxvYiwgZ2lmOiBCbG9ifVxuICogQG1ldGhvZFxuICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAqIEBleGFtcGxlXG4gKiBNUmVjb3JkUlRDLndyaXRlVG9EaXNrKHtcbiAqICAgICBhdWRpbzogYXVkaW9CbG9iLFxuICogICAgIHZpZGVvOiB2aWRlb0Jsb2IsXG4gKiAgICAgZ2lmICA6IGdpZkJsb2JcbiAqIH0pO1xuICovXG5NUmVjb3JkUlRDLndyaXRlVG9EaXNrID0gUmVjb3JkUlRDLndyaXRlVG9EaXNrO1xuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuTVJlY29yZFJUQyA9IE1SZWNvcmRSVEM7XG59XG5cbnZhciBicm93c2VyRmFrZVVzZXJBZ2VudCA9ICdGYWtlLzUuMCAoRmFrZU9TKSBBcHBsZVdlYktpdC8xMjMgKEtIVE1MLCBsaWtlIEdlY2tvKSBGYWtlLzEyLjMuNDU2Ny44OSBGYWtlLzEyMy40NSc7XG5cbihmdW5jdGlvbih0aGF0KSB7XG4gICAgaWYgKCF0aGF0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZ2xvYmFsLm5hdmlnYXRvciA9IHtcbiAgICAgICAgdXNlckFnZW50OiBicm93c2VyRmFrZVVzZXJBZ2VudCxcbiAgICAgICAgZ2V0VXNlck1lZGlhOiBmdW5jdGlvbigpIHt9XG4gICAgfTtcblxuICAgIGlmICghZ2xvYmFsLmNvbnNvbGUpIHtcbiAgICAgICAgZ2xvYmFsLmNvbnNvbGUgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbC5jb25zb2xlLmRlYnVnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBnbG9iYWwuY29uc29sZS5kZWJ1ZyA9IGdsb2JhbC5jb25zb2xlLmluZm8gPSBnbG9iYWwuY29uc29sZS5lcnJvciA9IGdsb2JhbC5jb25zb2xlLmxvZyA9IGdsb2JhbC5jb25zb2xlLmxvZyB8fCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgZG9jdW1lbnQ6dHJ1ZSAqL1xuICAgICAgICB0aGF0LmRvY3VtZW50ID0ge307XG5cbiAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGRvY3VtZW50LmNhcHR1cmVTdHJlYW0gPSBkb2N1bWVudC5tb3pDYXB0dXJlU3RyZWFtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0ge1xuICAgICAgICAgICAgICAgIGdldENvbnRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGxheTogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgICAgICBwYXVzZTogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgICAgICBkcmF3SW1hZ2U6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgICAgICAgICAgdG9EYXRhVVJMOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoYXQuSFRNTFZpZGVvRWxlbWVudCA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgbG9jYXRpb246dHJ1ZSAqL1xuICAgICAgICB0aGF0LmxvY2F0aW9uID0ge1xuICAgICAgICAgICAgcHJvdG9jb2w6ICdmaWxlOicsXG4gICAgICAgICAgICBocmVmOiAnJyxcbiAgICAgICAgICAgIGhhc2g6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzY3JlZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qZ2xvYmFsIHNjcmVlbjp0cnVlICovXG4gICAgICAgIHRoYXQuc2NyZWVuID0ge1xuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIFVSTCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgc2NyZWVuOnRydWUgKi9cbiAgICAgICAgdGhhdC5VUkwgPSB7XG4gICAgICAgICAgICBjcmVhdGVPYmplY3RVUkw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXZva2VPYmplY3RVUkw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKmdsb2JhbCB3aW5kb3c6dHJ1ZSAqL1xuICAgIHRoYXQud2luZG93ID0gZ2xvYmFsO1xufSkodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiBudWxsKTtcblxuLy8gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbi8vIENyb3NzLUJyb3dzZXItRGVjbGFyYXRpb25zLmpzXG5cbi8vIGFuaW1hdGlvbi1mcmFtZSB1c2VkIGluIFdlYk0gcmVjb3JkaW5nXG5cbi8qanNoaW50IC1XMDc5ICovXG52YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbmlmICh0eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2Ygd2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCByZXF1ZXN0QW5pbWF0aW9uRnJhbWU6dHJ1ZSAqL1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qZ2xvYmFsIHJlcXVlc3RBbmltYXRpb25GcmFtZTp0cnVlICovXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IG1velJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICB9XG59XG5cbi8qanNoaW50IC1XMDc5ICovXG52YXIgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU7XG5pZiAodHlwZW9mIGNhbmNlbEFuaW1hdGlvbkZyYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2Ygd2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qZ2xvYmFsIGNhbmNlbEFuaW1hdGlvbkZyYW1lOnRydWUgKi9cbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG1vekNhbmNlbEFuaW1hdGlvbkZyYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCBjYW5jZWxBbmltYXRpb25GcmFtZTp0cnVlICovXG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gbW96Q2FuY2VsQW5pbWF0aW9uRnJhbWU7XG4gICAgfVxufVxuXG4vLyBXZWJBdWRpbyBBUEkgcmVwcmVzZW50ZXJcbnZhciBBdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0O1xuXG5pZiAodHlwZW9mIEF1ZGlvQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgQXVkaW9Db250ZXh0OnRydWUgKi9cbiAgICAgICAgQXVkaW9Db250ZXh0ID0gd2Via2l0QXVkaW9Db250ZXh0O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbW96QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCBBdWRpb0NvbnRleHQ6dHJ1ZSAqL1xuICAgICAgICBBdWRpb0NvbnRleHQgPSBtb3pBdWRpb0NvbnRleHQ7XG4gICAgfVxufVxuXG4vKmpzaGludCAtVzA3OSAqL1xudmFyIFVSTCA9IHdpbmRvdy5VUkw7XG5cbmlmICh0eXBlb2YgVVJMID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2Via2l0VVJMICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8qZ2xvYmFsIFVSTDp0cnVlICovXG4gICAgVVJMID0gd2Via2l0VVJMO1xufVxuXG5pZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPT09ICd1bmRlZmluZWQnKSB7IC8vIG1heWJlIHdpbmRvdy5uYXZpZ2F0b3I/XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhO1xuICAgIH1cbn1cblxudmFyIGlzRWRnZSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRWRnZScpICE9PSAtMSAmJiAoISFuYXZpZ2F0b3IubXNTYXZlQmxvYiB8fCAhIW5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKTtcbnZhciBpc09wZXJhID0gISF3aW5kb3cub3BlcmEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdPUFIvJykgIT09IC0xO1xudmFyIGlzQ2hyb21lID0gIWlzT3BlcmEgJiYgIWlzRWRnZSAmJiAhIW5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWE7XG5cbnZhciBNZWRpYVN0cmVhbSA9IHdpbmRvdy5NZWRpYVN0cmVhbTtcblxuaWYgKHR5cGVvZiBNZWRpYVN0cmVhbSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdlYmtpdE1lZGlhU3RyZWFtICE9PSAndW5kZWZpbmVkJykge1xuICAgIE1lZGlhU3RyZWFtID0gd2Via2l0TWVkaWFTdHJlYW07XG59XG5cbi8qZ2xvYmFsIE1lZGlhU3RyZWFtOnRydWUgKi9cbmlmICh0eXBlb2YgTWVkaWFTdHJlYW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKCEoJ2dldFZpZGVvVHJhY2tzJyBpbiBNZWRpYVN0cmVhbS5wcm90b3R5cGUpKSB7XG4gICAgICAgIE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldFRyYWNrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5nZXRUcmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgICAgICAgIGlmICh0cmFjay5raW5kLnRvU3RyaW5nKCkuaW5kZXhPZigndmlkZW8nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNrcztcbiAgICAgICAgfTtcblxuICAgICAgICBNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRUcmFja3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0cmFja3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VHJhY2tzLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2sua2luZC50b1N0cmluZygpLmluZGV4T2YoJ2F1ZGlvJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrcy5wdXNoKHRyYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cmFja3M7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCEoJ3N0b3AnIGluIE1lZGlhU3RyZWFtLnByb3RvdHlwZSkpIHtcbiAgICAgICAgTWVkaWFTdHJlYW0ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdHJhY2suc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdHJhY2suc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyBiZWxvdyBmdW5jdGlvbiB2aWE6IGh0dHA6Ly9nb28uZ2wvQjNhZThjXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBieXRlcyAtIFBhc3MgYnl0ZXMgYW5kIGdldCBmb3JtYWZ0ZWQgc3RyaW5nLlxuICogQHJldHVybnMge3N0cmluZ30gLSBmb3JtYWZ0ZWQgc3RyaW5nXG4gKiBAZXhhbXBsZVxuICogYnl0ZXNUb1NpemUoMTAyNCoxMDI0KjUpID09PSAnNSBHQidcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqL1xuZnVuY3Rpb24gYnl0ZXNUb1NpemUoYnl0ZXMpIHtcbiAgICB2YXIgayA9IDEwMDA7XG4gICAgdmFyIHNpemVzID0gWydCeXRlcycsICdLQicsICdNQicsICdHQicsICdUQiddO1xuICAgIGlmIChieXRlcyA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJzAgQnl0ZXMnO1xuICAgIH1cbiAgICB2YXIgaSA9IHBhcnNlSW50KE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpLCAxMCk7XG4gICAgcmV0dXJuIChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b1ByZWNpc2lvbigzKSArICcgJyArIHNpemVzW2ldO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QmxvYn0gZmlsZSAtIEZpbGUgb3IgQmxvYiBvYmplY3QuIFRoaXMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVOYW1lIC0gT3B0aW9uYWwgZmlsZSBuYW1lIGUuZy4gXCJSZWNvcmRlZC1WaWRlby53ZWJtXCJcbiAqIEBleGFtcGxlXG4gKiBpbnZva2VTYXZlQXNEaWFsb2coYmxvYiBvciBmaWxlLCBbb3B0aW9uYWxdIGZpbGVOYW1lKTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqL1xuZnVuY3Rpb24gaW52b2tlU2F2ZUFzRGlhbG9nKGZpbGUsIGZpbGVOYW1lKSB7XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICAgIHRocm93ICdCbG9iIG9iamVjdCBpcyByZXF1aXJlZC4nO1xuICAgIH1cblxuICAgIGlmICghZmlsZS50eXBlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaWxlLnR5cGUgPSAndmlkZW8vd2VibSc7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuXG4gICAgdmFyIGZpbGVFeHRlbnNpb24gPSAoZmlsZS50eXBlIHx8ICd2aWRlby93ZWJtJykuc3BsaXQoJy8nKVsxXTtcblxuICAgIGlmIChmaWxlTmFtZSAmJiBmaWxlTmFtZS5pbmRleE9mKCcuJykgIT09IC0xKSB7XG4gICAgICAgIHZhciBzcGxpdHRlZCA9IGZpbGVOYW1lLnNwbGl0KCcuJyk7XG4gICAgICAgIGZpbGVOYW1lID0gc3BsaXR0ZWRbMF07XG4gICAgICAgIGZpbGVFeHRlbnNpb24gPSBzcGxpdHRlZFsxXTtcbiAgICB9XG5cbiAgICB2YXIgZmlsZUZ1bGxOYW1lID0gKGZpbGVOYW1lIHx8IChNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA5OTk5OTk5OTk5KSArIDg4ODg4ODg4OCkpICsgJy4nICsgZmlsZUV4dGVuc2lvbjtcblxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihmaWxlLCBmaWxlRnVsbE5hbWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hdmlnYXRvci5tc1NhdmVCbG9iICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IoZmlsZSwgZmlsZUZ1bGxOYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgaHlwZXJsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGh5cGVybGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICBoeXBlcmxpbmsudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgaHlwZXJsaW5rLmRvd25sb2FkID0gZmlsZUZ1bGxOYW1lO1xuXG4gICAgaWYgKCEhbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuICAgICAgICBoeXBlcmxpbmsub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgKGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5yZW1vdmVDaGlsZChoeXBlcmxpbmspO1xuICAgICAgICB9O1xuICAgICAgICAoZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKGh5cGVybGluayk7XG4gICAgfVxuXG4gICAgdmFyIGV2dCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIHtcbiAgICAgICAgdmlldzogd2luZG93LFxuICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICBoeXBlcmxpbmsuZGlzcGF0Y2hFdmVudChldnQpO1xuXG4gICAgaWYgKCFuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoaHlwZXJsaW5rLmhyZWYpO1xuICAgIH1cbn1cblxuLy8gX19fX19fX19fXyAodXNlZCB0byBoYW5kbGUgc3R1ZmYgbGlrZSBodHRwOi8vZ29vLmdsL3htRTVlZykgaXNzdWUgIzEyOVxuLy8gU3RvcmFnZS5qc1xuXG4vKipcbiAqIFN0b3JhZ2UgaXMgYSBzdGFuZGFsb25lIG9iamVjdCB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIHN0b3JlIHJldXNhYmxlIG9iamVjdHMgZS5nLiBcIm5ldyBBdWRpb0NvbnRleHRcIi5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEBleGFtcGxlXG4gKiBTdG9yYWdlLkF1ZGlvQ29udGV4dCA9PT0gd2Via2l0QXVkaW9Db250ZXh0XG4gKiBAcHJvcGVydHkge3dlYmtpdEF1ZGlvQ29udGV4dH0gQXVkaW9Db250ZXh0IC0gS2VlcHMgYSByZWZlcmVuY2UgdG8gQXVkaW9Db250ZXh0IG9iamVjdC5cbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqL1xuXG52YXIgU3RvcmFnZSA9IHt9O1xuXG5pZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBTdG9yYWdlLkF1ZGlvQ29udGV4dCA9IEF1ZGlvQ29udGV4dDtcbn0gZWxzZSBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBTdG9yYWdlLkF1ZGlvQ29udGV4dCA9IHdlYmtpdEF1ZGlvQ29udGV4dDtcbn1cblxuaWYgKHR5cGVvZiBSZWNvcmRSVEMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgUmVjb3JkUlRDLlN0b3JhZ2UgPSBTdG9yYWdlO1xufVxuXG5mdW5jdGlvbiBpc01lZGlhUmVjb3JkZXJDb21wYXRpYmxlKCkge1xuICAgIHZhciBpc09wZXJhID0gISF3aW5kb3cub3BlcmEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCcgT1BSLycpID49IDA7XG4gICAgdmFyIGlzQ2hyb21lID0gISF3aW5kb3cuY2hyb21lICYmICFpc09wZXJhO1xuICAgIHZhciBpc0ZpcmVmb3ggPSB0eXBlb2Ygd2luZG93Lkluc3RhbGxUcmlnZ2VyICE9PSAndW5kZWZpbmVkJztcblxuICAgIGlmIChpc0ZpcmVmb3gpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIG5WZXIgPSBuYXZpZ2F0b3IuYXBwVmVyc2lvbjtcbiAgICB2YXIgbkFndCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgdmFyIGZ1bGxWZXJzaW9uID0gJycgKyBwYXJzZUZsb2F0KG5hdmlnYXRvci5hcHBWZXJzaW9uKTtcbiAgICB2YXIgbWFqb3JWZXJzaW9uID0gcGFyc2VJbnQobmF2aWdhdG9yLmFwcFZlcnNpb24sIDEwKTtcbiAgICB2YXIgbmFtZU9mZnNldCwgdmVyT2Zmc2V0LCBpeDtcblxuICAgIGlmIChpc0Nocm9tZSB8fCBpc09wZXJhKSB7XG4gICAgICAgIHZlck9mZnNldCA9IG5BZ3QuaW5kZXhPZignQ2hyb21lJyk7XG4gICAgICAgIGZ1bGxWZXJzaW9uID0gbkFndC5zdWJzdHJpbmcodmVyT2Zmc2V0ICsgNyk7XG4gICAgfVxuXG4gICAgLy8gdHJpbSB0aGUgZnVsbFZlcnNpb24gc3RyaW5nIGF0IHNlbWljb2xvbi9zcGFjZSBpZiBwcmVzZW50XG4gICAgaWYgKChpeCA9IGZ1bGxWZXJzaW9uLmluZGV4T2YoJzsnKSkgIT09IC0xKSB7XG4gICAgICAgIGZ1bGxWZXJzaW9uID0gZnVsbFZlcnNpb24uc3Vic3RyaW5nKDAsIGl4KTtcbiAgICB9XG5cbiAgICBpZiAoKGl4ID0gZnVsbFZlcnNpb24uaW5kZXhPZignICcpKSAhPT0gLTEpIHtcbiAgICAgICAgZnVsbFZlcnNpb24gPSBmdWxsVmVyc2lvbi5zdWJzdHJpbmcoMCwgaXgpO1xuICAgIH1cblxuICAgIG1ham9yVmVyc2lvbiA9IHBhcnNlSW50KCcnICsgZnVsbFZlcnNpb24sIDEwKTtcblxuICAgIGlmIChpc05hTihtYWpvclZlcnNpb24pKSB7XG4gICAgICAgIGZ1bGxWZXJzaW9uID0gJycgKyBwYXJzZUZsb2F0KG5hdmlnYXRvci5hcHBWZXJzaW9uKTtcbiAgICAgICAgbWFqb3JWZXJzaW9uID0gcGFyc2VJbnQobmF2aWdhdG9yLmFwcFZlcnNpb24sIDEwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFqb3JWZXJzaW9uID49IDQ5O1xufVxuXG4vLyBfX19fX19fX19fX19fX19fX19fX19fXG4vLyBNZWRpYVN0cmVhbVJlY29yZGVyLmpzXG5cbi8qXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBodHRwczovL2R2Y3MudzMub3JnL2hnL2RhcC9yYXctZmlsZS9kZWZhdWx0L21lZGlhLXN0cmVhbS1jYXB0dXJlL01lZGlhUmVjb3JkZXIuaHRtbFxuICogVGhlIE1lZGlhUmVjb3JkZXIgYWNjZXB0cyBhIG1lZGlhU3RyZWFtIGFzIGlucHV0IHNvdXJjZSBwYXNzZWQgZnJvbSBVQS4gV2hlbiByZWNvcmRlciBzdGFydHMsXG4gKiBhIE1lZGlhRW5jb2RlciB3aWxsIGJlIGNyZWF0ZWQgYW5kIGFjY2VwdCB0aGUgbWVkaWFTdHJlYW0gYXMgaW5wdXQgc291cmNlLlxuICogRW5jb2RlciB3aWxsIGdldCB0aGUgcmF3IGRhdGEgYnkgdHJhY2sgZGF0YSBjaGFuZ2VzLCBlbmNvZGUgaXQgYnkgc2VsZWN0ZWQgTUlNRSBUeXBlLCB0aGVuIHN0b3JlIHRoZSBlbmNvZGVkIGluIEVuY29kZWRCdWZmZXJDYWNoZSBvYmplY3QuXG4gKiBUaGUgZW5jb2RlZCBkYXRhIHdpbGwgYmUgZXh0cmFjdGVkIG9uIGV2ZXJ5IHRpbWVzbGljZSBwYXNzZWQgZnJvbSBTdGFydCBmdW5jdGlvbiBjYWxsIG9yIGJ5IFJlcXVlc3REYXRhIGZ1bmN0aW9uLlxuICogVGhyZWFkIG1vZGVsOlxuICogV2hlbiB0aGUgcmVjb3JkZXIgc3RhcnRzLCBpdCBjcmVhdGVzIGEgXCJNZWRpYSBFbmNvZGVyXCIgdGhyZWFkIHRvIHJlYWQgZGF0YSBmcm9tIE1lZGlhRW5jb2RlciBvYmplY3QgYW5kIHN0b3JlIGJ1ZmZlciBpbiBFbmNvZGVkQnVmZmVyQ2FjaGUgb2JqZWN0LlxuICogQWxzbyBleHRyYWN0IHRoZSBlbmNvZGVkIGRhdGEgYW5kIGNyZWF0ZSBibG9icyBvbiBldmVyeSB0aW1lc2xpY2UgcGFzc2VkIGZyb20gc3RhcnQgZnVuY3Rpb24gb3IgUmVxdWVzdERhdGEgZnVuY3Rpb24gY2FsbGVkIGJ5IFVBLlxuICovXG5cbi8qKlxuICogTWVkaWFTdHJlYW1SZWNvcmRlciBpcyBhbiBhYnN0cmFjdGlvbiBsYXllciBmb3IgXCJNZWRpYVJlY29yZGVyIEFQSVwiLiBJdCBpcyB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIHJlY29yZCBNZWRpYVN0cmVhbShzKSBpbiBGaXJlZm94LlxuICogQHN1bW1hcnkgUnVucyB0b3Agb3ZlciBNZWRpYVJlY29yZGVyIEFQSS5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciBvcHRpb25zID0ge1xuICogICAgIG1pbWVUeXBlOiAndmlkZW8vd2VibScsXG4gKiAgICAgYXVkaW9CaXRzUGVyU2Vjb25kIDogMjU2ICogOCAqIDEwMjQsXG4gKiAgICAgdmlkZW9CaXRzUGVyU2Vjb25kIDogMjU2ICogOCAqIDEwMjQsXG4gKiAgICAgYml0c1BlclNlY29uZDogMjU2ICogOCAqIDEwMjQsICAvLyBpZiB0aGlzIGlzIHByb3ZpZGVkLCBza2lwIGFib3ZlIHR3b1xuICogICAgIGdldE5hdGl2ZUJsb2I6IHRydWUgLy8gYnkgZGVmYXVsdDogaXQgaXMgZmFsc2VcbiAqIH1cbiAqIHZhciByZWNvcmRlciA9IG5ldyBNZWRpYVN0cmVhbVJlY29yZGVyKE1lZGlhU3RyZWFtLCBvcHRpb25zKTtcbiAqIHJlY29yZGVyLnJlY29yZCgpO1xuICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbihibG9iKSB7XG4gKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAqXG4gKiAgICAgLy8gb3JcbiAqICAgICB2YXIgYmxvYiA9IHJlY29yZGVyLmJsb2I7XG4gKiB9KTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gTWVkaWFTdHJlYW0gb2JqZWN0IGZldGNoZWQgdXNpbmcgZ2V0VXNlck1lZGlhIEFQSSBvciBnZW5lcmF0ZWQgdXNpbmcgY2FwdHVyZVN0cmVhbVVudGlsRW5kZWQgb3IgV2ViQXVkaW8gQVBJLlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHtkaXNhYmxlTG9nczp0cnVlLCBpbml0Q2FsbGJhY2s6IGZ1bmN0aW9uLCBtaW1lVHlwZTogXCJ2aWRlby93ZWJtXCIsIG9uQXVkaW9Qcm9jZXNzU3RhcnRlZDogZnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gTWVkaWFTdHJlYW1SZWNvcmRlcihtZWRpYVN0cmVhbSwgY29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHtcbiAgICAgICAgLy8gYml0c1BlclNlY29uZDogMjU2ICogOCAqIDEwMjQsXG4gICAgICAgIG1pbWVUeXBlOiAndmlkZW8vd2VibSdcbiAgICB9O1xuXG4gICAgaWYgKGNvbmZpZy50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgIGlmIChtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCAmJiBtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHN0cmVhbTtcbiAgICAgICAgICAgIGlmICghIW5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0uYWRkVHJhY2sobWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHdlYmtpdE1lZGlhU3RyZWFtXG4gICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVkaWFTdHJlYW0gPSBzdHJlYW07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmZpZy5taW1lVHlwZSB8fCBjb25maWcubWltZVR5cGUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2F1ZGlvJykgPT09IC0xKSB7XG4gICAgICAgICAgICBjb25maWcubWltZVR5cGUgPSBpc0Nocm9tZSA/ICdhdWRpby93ZWJtJyA6ICdhdWRpby9vZ2cnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy5taW1lVHlwZSAmJiBjb25maWcubWltZVR5cGUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpICE9PSAnYXVkaW8vb2dnJyAmJiAhIW5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgICAgIC8vIGZvcmNpbmcgYmV0dGVyIGNvZGVjcyBvbiBGaXJlZm94ICh2aWEgIzE2NilcbiAgICAgICAgICAgIGNvbmZpZy5taW1lVHlwZSA9ICdhdWRpby9vZ2cnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVjb3JkcyBNZWRpYVN0cmVhbS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlY29yZCgpO1xuICAgICAqL1xuICAgIHRoaXMucmVjb3JkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYuYmxvYiA9IG51bGw7XG5cbiAgICAgICAgdmFyIHJlY29yZGVySGludHMgPSBjb25maWc7XG5cbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYXNzaW5nIGZvbGxvd2luZyBjb25maWcgb3ZlciBNZWRpYVJlY29yZGVyIEFQSS4nLCByZWNvcmRlckhpbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAvLyBtYW5kYXRvcnkgdG8gbWFrZSBzdXJlIEZpcmVmb3ggZG9lc24ndCBmYWlscyB0byByZWNvcmQgc3RyZWFtcyAzLTQgdGltZXMgd2l0aG91dCByZWxvYWRpbmcgdGhlIHBhZ2UuXG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Nocm9tZSAmJiAhaXNNZWRpYVJlY29yZGVyQ29tcGF0aWJsZSgpKSB7XG4gICAgICAgICAgICAvLyB0byBzdXBwb3J0IHZpZGVvLW9ubHkgcmVjb3JkaW5nIG9uIHN0YWJsZVxuICAgICAgICAgICAgcmVjb3JkZXJIaW50cyA9ICd2aWRlby92cDgnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZCA9PT0gJ2Z1bmN0aW9uJyAmJiByZWNvcmRlckhpbnRzLm1pbWVUeXBlKSB7XG4gICAgICAgICAgICBpZiAoIU1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKHJlY29yZGVySGludHMubWltZVR5cGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNZWRpYVJlY29yZGVyIEFQSSBzZWVtcyB1bmFibGUgdG8gcmVjb3JkIG1pbWVUeXBlOicsIHJlY29yZGVySGludHMubWltZVR5cGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlY29yZGVySGludHMubWltZVR5cGUgPSBjb25maWcudHlwZSA9PT0gJ2F1ZGlvJyA/ICdhdWRpby93ZWJtJyA6ICd2aWRlby93ZWJtJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGh0dHA6Ly9keHIubW96aWxsYS5vcmcvbW96aWxsYS1jZW50cmFsL3NvdXJjZS9jb250ZW50L21lZGlhL01lZGlhUmVjb3JkZXIuY3BwXG4gICAgICAgIC8vIGh0dHBzOi8vd2lraS5tb3ppbGxhLm9yZy9HZWNrbzpNZWRpYVJlY29yZGVyXG4gICAgICAgIC8vIGh0dHBzOi8vZHZjcy53My5vcmcvaGcvZGFwL3Jhdy1maWxlL2RlZmF1bHQvbWVkaWEtc3RyZWFtLWNhcHR1cmUvTWVkaWFSZWNvcmRlci5odG1sXG5cbiAgICAgICAgLy8gc3RhcnRpbmcgYSByZWNvcmRpbmcgc2Vzc2lvbjsgd2hpY2ggd2lsbCBpbml0aWF0ZSBcIlJlYWRpbmcgVGhyZWFkXCJcbiAgICAgICAgLy8gXCJSZWFkaW5nIFRocmVhZFwiIGFyZSB1c2VkIHRvIHByZXZlbnQgbWFpbi10aHJlYWQgYmxvY2tpbmcgc2NlbmFyaW9zXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW0sIHJlY29yZGVySGludHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZCAmJiAnY2FuUmVjb3JkTWltZVR5cGUnIGluIG1lZGlhUmVjb3JkZXIgJiYgbWVkaWFSZWNvcmRlci5jYW5SZWNvcmRNaW1lVHlwZShjb25maWcubWltZVR5cGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01lZGlhUmVjb3JkZXIgQVBJIHNlZW1zIHVuYWJsZSB0byByZWNvcmQgbWltZVR5cGU6JywgY29uZmlnLm1pbWVUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGkuZS4gc3RvcCByZWNvcmRpbmcgd2hlbiA8dmlkZW8+IGlzIHBhdXNlZCBieSB0aGUgdXNlcjsgYW5kIGF1dG8gcmVzdGFydCByZWNvcmRpbmcgXG4gICAgICAgIC8vIHdoZW4gdmlkZW8gaXMgcmVzdW1lZC4gRS5nLiB5b3VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0ubXV0ZWQgPSB0cnVlOyAvLyBpdCB3aWxsIGF1dG8tc3RvcCByZWNvcmRpbmcuXG4gICAgICAgIG1lZGlhUmVjb3JkZXIuaWdub3JlTXV0ZWRNZWRpYSA9IGNvbmZpZy5pZ25vcmVNdXRlZE1lZGlhIHx8IGZhbHNlO1xuXG4gICAgICAgIC8vIERpc3BhdGNoaW5nIE9uRGF0YUF2YWlsYWJsZSBIYW5kbGVyXG4gICAgICAgIG1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuZG9udEZpcmVPbkRhdGFBdmFpbGFibGVFdmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFlLmRhdGEgfHwgIWUuZGF0YS5zaXplIHx8IGUuZGF0YS5zaXplIDwgMTAwIHx8IHNlbGYuYmxvYikge1xuICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHN0b3BSZWNvcmRpbmcgYWx3YXlzIGdldHRpbmcgZmlyZWRcbiAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZXJlIGlzIGludmFsaWQgZGF0YVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLnJlY29yZGluZ0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVjb3JkaW5nQ2FsbGJhY2sobmV3IEJsb2IoW10sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJlY29yZGVySGludHMubWltZVR5cGUgfHwgJ3ZpZGVvL3dlYm0nXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNvcmRpbmdDYWxsYmFjayA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jsb2J9IGJsb2IgLSBSZWNvcmRlZCBmcmFtZXMgaW4gdmlkZW8vd2VibSBibG9iLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkZXIuYmxvYjtcbiAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZWxmLmJsb2IgPSBjb25maWcuZ2V0TmF0aXZlQmxvYiA/IGUuZGF0YSA6IG5ldyBCbG9iKFtlLmRhdGFdLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVjb3JkZXJIaW50cy5taW1lVHlwZSB8fCAndmlkZW8vd2VibSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5yZWNvcmRpbmdDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHNlbGYucmVjb3JkaW5nQ2FsbGJhY2soc2VsZi5ibG9iKTtcbiAgICAgICAgICAgICAgICBzZWxmLnJlY29yZGluZ0NhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBtZWRpYVJlY29yZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0ludmFsaWRTdGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIE1lZGlhUmVjb3JkZXIgaXMgbm90IGluIGEgc3RhdGUgaW4gd2hpY2ggdGhlIHByb3Bvc2VkIG9wZXJhdGlvbiBpcyBhbGxvd2VkIHRvIGJlIGV4ZWN1dGVkLicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ091dE9mTWVtb3J5Jykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUaGUgVUEgaGFzIGV4aGF1c2VkIHRoZSBhdmFpbGFibGUgbWVtb3J5LiBVc2VyIGFnZW50cyBTSE9VTEQgcHJvdmlkZSBhcyBtdWNoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYXMgcG9zc2libGUgaW4gdGhlIG1lc3NhZ2UgYXR0cmlidXRlLicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0lsbGVnYWxTdHJlYW1Nb2RpZmljYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0EgbW9kaWZpY2F0aW9uIHRvIHRoZSBzdHJlYW0gaGFzIG9jY3VycmVkIHRoYXQgbWFrZXMgaXQgaW1wb3NzaWJsZSB0byBjb250aW51ZSByZWNvcmRpbmcuIEFuIGV4YW1wbGUgd291bGQgYmUgdGhlIGFkZGl0aW9uIG9mIGEgVHJhY2sgd2hpbGUgcmVjb3JkaW5nIGlzIG9jY3VycmluZy4gVXNlciBhZ2VudHMgU0hPVUxEIHByb3ZpZGUgYXMgbXVjaCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFzIHBvc3NpYmxlIGluIHRoZSBtZXNzYWdlIGF0dHJpYnV0ZS4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdPdGhlclJlY29yZGluZ0Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VkIGZvciBhbiBmYXRhbCBlcnJvciBvdGhlciB0aGFuIHRob3NlIGxpc3RlZCBhYm92ZS4gVXNlciBhZ2VudHMgU0hPVUxEIHByb3ZpZGUgYXMgbXVjaCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFzIHBvc3NpYmxlIGluIHRoZSBtZXNzYWdlIGF0dHJpYnV0ZS4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdHZW5lcmljRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBVQSBjYW5ub3QgcHJvdmlkZSB0aGUgY29kZWMgb3IgcmVjb3JkaW5nIG9wdGlvbiB0aGF0IGhhcyBiZWVuIHJlcXVlc3RlZC4nLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWVkaWFSZWNvcmRlciBFcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFdoZW4gdGhlIHN0cmVhbSBpcyBcImVuZGVkXCIgc2V0IHJlY29yZGluZyB0byAnaW5hY3RpdmUnIFxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgZ2F0aGVyaW5nIGRhdGEuIENhbGxlcnMgc2hvdWxkIG5vdCByZWx5IG9uIFxuICAgICAgICAgICAgLy8gZXhhY3RuZXNzIG9mIHRoZSB0aW1lU2xpY2UgdmFsdWUsIGVzcGVjaWFsbHkgXG4gICAgICAgICAgICAvLyBpZiB0aGUgdGltZVNsaWNlIHZhbHVlIGlzIHNtYWxsLiBDYWxsZXJzIHNob3VsZCBcbiAgICAgICAgICAgIC8vIGNvbnNpZGVyIHRpbWVTbGljZSBhcyBhIG1pbmltdW0gdmFsdWVcblxuICAgICAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIuc3RhdGUgIT09ICdpbmFjdGl2ZScgJiYgbWVkaWFSZWNvcmRlci5zdGF0ZSAhPT0gJ3N0b3BwZWQnKSB7XG4gICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdm9pZCBzdGFydChvcHRpb25hbCBsb25nIG1UaW1lU2xpY2UpXG4gICAgICAgIC8vIFRoZSBpbnRlcnZhbCBvZiBwYXNzaW5nIGVuY29kZWQgZGF0YSBmcm9tIEVuY29kZWRCdWZmZXJDYWNoZSB0byBvbkRhdGFBdmFpbGFibGVcbiAgICAgICAgLy8gaGFuZGxlci4gXCJtVGltZVNsaWNlIDwgMFwiIG1lYW5zIFNlc3Npb24gb2JqZWN0IGRvZXMgbm90IHB1c2ggZW5jb2RlZCBkYXRhIHRvXG4gICAgICAgIC8vIG9uRGF0YUF2YWlsYWJsZSwgaW5zdGVhZCwgaXQgcGFzc2l2ZSB3YWl0IHRoZSBjbGllbnQgc2lkZSBwdWxsIGVuY29kZWQgZGF0YVxuICAgICAgICAvLyBieSBjYWxsaW5nIHJlcXVlc3REYXRhIEFQSS5cbiAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgzLjZlKzYpO1xuXG4gICAgICAgIC8vIFN0YXJ0IHJlY29yZGluZy4gSWYgdGltZVNsaWNlIGhhcyBiZWVuIHByb3ZpZGVkLCBtZWRpYVJlY29yZGVyIHdpbGxcbiAgICAgICAgLy8gcmFpc2UgYSBkYXRhYXZhaWxhYmxlIGV2ZW50IGNvbnRhaW5pbmcgdGhlIEJsb2Igb2YgY29sbGVjdGVkIGRhdGEgb24gZXZlcnkgdGltZVNsaWNlIG1pbGxpc2Vjb25kcy5cbiAgICAgICAgLy8gSWYgdGltZVNsaWNlIGlzbid0IHByb3ZpZGVkLCBVQSBzaG91bGQgY2FsbCB0aGUgUmVxdWVzdERhdGEgdG8gb2J0YWluIHRoZSBCbG9iIGRhdGEsIGFsc28gc2V0IHRoZSBtVGltZVNsaWNlIHRvIHplcm8uXG5cbiAgICAgICAgaWYgKGNvbmZpZy5vbkF1ZGlvUHJvY2Vzc1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5vbkF1ZGlvUHJvY2Vzc1N0YXJ0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcuaW5pdENhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb25maWcuaW5pdENhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgc3RvcHMgcmVjb3JkaW5nIE1lZGlhU3RyZWFtLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24sIHRoYXQgaXMgdXNlZCB0byBwYXNzIHJlY29yZGVkIGJsb2IgYmFjayB0byB0aGUgY2FsbGVlLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTWVkaWFTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbihibG9iKSB7XG4gICAgICogICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgdGhpcy5zdG9wID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY29yZGluZ0NhbGxiYWNrID0gZnVuY3Rpb24oYmxvYikge1xuICAgICAgICAgICAgbWVkaWFSZWNvcmRlciA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGJsb2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIG1lZGlhUmVjb3JkZXIuc3RhdGUgPT09ICdyZWNvcmRpbmcnIG1lYW5zIHRoYXQgbWVkaWEgcmVjb3JkZXIgaXMgYXNzb2NpYXRlZCB3aXRoIFwic2Vzc2lvblwiXG4gICAgICAgIC8vIG1lZGlhUmVjb3JkZXIuc3RhdGUgPT09ICdzdG9wcGVkJyBtZWFucyB0aGF0IG1lZGlhIHJlY29yZGVyIGlzIGRldGFjaGVkIGZyb20gdGhlIFwic2Vzc2lvblwiIC4uLiBpbiB0aGlzIGNhc2U7IFwic2Vzc2lvblwiIHdpbGwgYWxzbyBiZSBkZWxldGVkLlxuXG4gICAgICAgIGlmIChtZWRpYVJlY29yZGVyLnN0YXRlID09PSAncmVjb3JkaW5nJykge1xuICAgICAgICAgICAgLy8gXCJzdG9wXCIgbWV0aG9kIGF1dG8gaW52b2tlcyBcInJlcXVlc3REYXRhXCIhXG4gICAgICAgICAgICAvLyBtZWRpYVJlY29yZGVyLnJlcXVlc3REYXRhKCk7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwYXVzZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTWVkaWFTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucGF1c2UoKTtcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIuc3RhdGUgPT09ICdyZWNvcmRpbmcnKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzdW1lcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNZWRpYVN0cmVhbVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZXN1bWUoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5kb250RmlyZU9uRGF0YUF2YWlsYWJsZUV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRvbnRGaXJlT25EYXRhQXZhaWxhYmxlRXZlbnQgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIGRpc2FibGVMb2dzID0gY29uZmlnLmRpc2FibGVMb2dzO1xuICAgICAgICAgICAgY29uZmlnLmRpc2FibGVMb2dzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVjb3JkKCk7XG4gICAgICAgICAgICBjb25maWcuZGlzYWJsZUxvZ3MgPSBkaXNhYmxlTG9ncztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIuc3RhdGUgPT09ICdwYXVzZWQnKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc2V0cyBjdXJyZW50bHkgcmVjb3JkZWQgZGF0YS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICovXG4gICAgdGhpcy5jbGVhclJlY29yZGVkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIW1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF1c2UoKTtcblxuICAgICAgICB0aGlzLmRvbnRGaXJlT25EYXRhQXZhaWxhYmxlRXZlbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICB9O1xuXG4gICAgLy8gUmVmZXJlbmNlIHRvIFwiTWVkaWFSZWNvcmRlclwiIG9iamVjdFxuICAgIHZhciBtZWRpYVJlY29yZGVyO1xuXG4gICAgZnVuY3Rpb24gaXNNZWRpYVN0cmVhbUFjdGl2ZSgpIHtcbiAgICAgICAgaWYgKCdhY3RpdmUnIGluIG1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoIW1lZGlhU3RyZWFtLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICgnZW5kZWQnIGluIG1lZGlhU3RyZWFtKSB7IC8vIG9sZCBoYWNrXG4gICAgICAgICAgICBpZiAobWVkaWFTdHJlYW0uZW5kZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gdGhpcyBtZXRob2QgY2hlY2tzIGlmIG1lZGlhIHN0cmVhbSBpcyBzdG9wcGVkXG4gICAgLy8gb3IgYW55IHRyYWNrIGlzIGVuZGVkLlxuICAgIChmdW5jdGlvbiBsb29wZXIoKSB7XG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTWVkaWFTdHJlYW1BY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01lZGlhU3RyZWFtIHNlZW1zIHN0b3BwZWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLnN0b3AoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQobG9vcGVyLCAxMDAwKTsgLy8gY2hlY2sgZXZlcnkgc2Vjb25kXG4gICAgfSkoKTtcbn1cblxuaWYgKHR5cGVvZiBSZWNvcmRSVEMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgUmVjb3JkUlRDLk1lZGlhU3RyZWFtUmVjb3JkZXIgPSBNZWRpYVN0cmVhbVJlY29yZGVyO1xufVxuXG4vLyBzb3VyY2UgY29kZSBmcm9tOiBodHRwOi8vdHlwZWRhcnJheS5vcmcvd3AtY29udGVudC9wcm9qZWN0cy9XZWJBdWRpb1JlY29yZGVyL3NjcmlwdC5qc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL21hdHRkaWFtb25kL1JlY29yZGVyanMjbGljZW5zZS1taXRcbi8vIF9fX19fX19fX19fX19fX19fX19fX19cbi8vIFN0ZXJlb0F1ZGlvUmVjb3JkZXIuanNcblxuLyoqXG4gKiBTdGVyZW9BdWRpb1JlY29yZGVyIGlzIGEgc3RhbmRhbG9uZSBjbGFzcyB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIGJyaW5nIFwic3RlcmVvXCIgYXVkaW8tcmVjb3JkaW5nIGluIGNocm9tZS5cbiAqIEBzdW1tYXJ5IEphdmFTY3JpcHQgc3RhbmRhbG9uZSBvYmplY3QgZm9yIHN0ZXJlbyBhdWRpbyByZWNvcmRpbmcuXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gKiBAY2xhc3NcbiAqIEBleGFtcGxlXG4gKiB2YXIgcmVjb3JkZXIgPSBuZXcgU3RlcmVvQXVkaW9SZWNvcmRlcihNZWRpYVN0cmVhbSwge1xuICogICAgIHNhbXBsZVJhdGU6IDQ0MTAwLFxuICogICAgIGJ1ZmZlclNpemU6IDQwOTZcbiAqIH0pO1xuICogcmVjb3JkZXIucmVjb3JkKCk7XG4gKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICogfSk7XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBtZWRpYVN0cmVhbSAtIE1lZGlhU3RyZWFtIG9iamVjdCBmZXRjaGVkIHVzaW5nIGdldFVzZXJNZWRpYSBBUEkgb3IgZ2VuZXJhdGVkIHVzaW5nIGNhcHR1cmVTdHJlYW1VbnRpbEVuZGVkIG9yIFdlYkF1ZGlvIEFQSS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB7c2FtcGxlUmF0ZTogNDQxMDAsIGJ1ZmZlclNpemU6IDQwOTYsIG51bWJlck9mQXVkaW9DaGFubmVsczogMSwgZXRjLn1cbiAqL1xuXG5mdW5jdGlvbiBTdGVyZW9BdWRpb1JlY29yZGVyKG1lZGlhU3RyZWFtLCBjb25maWcpIHtcbiAgICBpZiAoIW1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgIHRocm93ICdZb3VyIHN0cmVhbSBoYXMgbm8gYXVkaW8gdHJhY2tzLic7XG4gICAgfVxuXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gdmFyaWFibGVzXG4gICAgdmFyIGxlZnRjaGFubmVsID0gW107XG4gICAgdmFyIHJpZ2h0Y2hhbm5lbCA9IFtdO1xuICAgIHZhciByZWNvcmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgcmVjb3JkaW5nTGVuZ3RoID0gMDtcbiAgICB2YXIganNBdWRpb05vZGU7XG5cbiAgICB2YXIgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzID0gMjtcblxuICAgIC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoY29uZmlnLmxlZnRDaGFubmVsID09PSB0cnVlKSB7XG4gICAgICAgIG51bWJlck9mQXVkaW9DaGFubmVscyA9IDE7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5udW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPT09IDEpIHtcbiAgICAgICAgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzID0gMTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdTdGVyZW9BdWRpb1JlY29yZGVyIGlzIHNldCB0byByZWNvcmQgbnVtYmVyIG9mIGNoYW5uZWxzOiAnLCBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzTWVkaWFTdHJlYW1BY3RpdmUoKSB7XG4gICAgICAgIGlmICgnYWN0aXZlJyBpbiBtZWRpYVN0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFtZWRpYVN0cmVhbS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoJ2VuZGVkJyBpbiBtZWRpYVN0cmVhbSkgeyAvLyBvbGQgaGFja1xuICAgICAgICAgICAgaWYgKG1lZGlhU3RyZWFtLmVuZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlY29yZHMgTWVkaWFTdHJlYW0uXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZWNvcmQoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaXNNZWRpYVN0cmVhbUFjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhyb3cgJ1BsZWFzZSBtYWtlIHN1cmUgTWVkaWFTdHJlYW0gaXMgYWN0aXZlLic7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXNldCB0aGUgYnVmZmVycyBmb3IgdGhlIG5ldyByZWNvcmRpbmdcbiAgICAgICAgbGVmdGNoYW5uZWwubGVuZ3RoID0gcmlnaHRjaGFubmVsLmxlbmd0aCA9IDA7XG4gICAgICAgIHJlY29yZGluZ0xlbmd0aCA9IDA7XG5cbiAgICAgICAgaWYgKGF1ZGlvSW5wdXQpIHtcbiAgICAgICAgICAgIGF1ZGlvSW5wdXQuY29ubmVjdChqc0F1ZGlvTm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0byBwcmV2ZW50IHNlbGYgYXVkaW8gdG8gYmUgY29ubmVjdGVkIHdpdGggc3BlYWtlcnNcbiAgICAgICAgLy8ganNBdWRpb05vZGUuY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICBpc0F1ZGlvUHJvY2Vzc1N0YXJ0ZWQgPSBpc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICByZWNvcmRpbmcgPSB0cnVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtZXJnZUxlZnRSaWdodEJ1ZmZlcnMoY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICBmdW5jdGlvbiBtZXJnZUF1ZGlvQnVmZmVycyhjb25maWcsIGNiKSB7XG4gICAgICAgICAgICB2YXIgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzID0gY29uZmlnLm51bWJlck9mQXVkaW9DaGFubmVscztcblxuICAgICAgICAgICAgLy8gdG9kbzogXCJzbGljZSgwKVwiIC0tLSBpcyBpdCBjYXVzZXMgbG9vcD8gU2hvdWxkIGJlIHJlbW92ZWQ/XG4gICAgICAgICAgICB2YXIgbGVmdEJ1ZmZlcnMgPSBjb25maWcubGVmdEJ1ZmZlcnMuc2xpY2UoMCk7XG4gICAgICAgICAgICB2YXIgcmlnaHRCdWZmZXJzID0gY29uZmlnLnJpZ2h0QnVmZmVycy5zbGljZSgwKTtcbiAgICAgICAgICAgIHZhciBzYW1wbGVSYXRlID0gY29uZmlnLnNhbXBsZVJhdGU7XG4gICAgICAgICAgICB2YXIgaW50ZXJuYWxJbnRlcmxlYXZlZExlbmd0aCA9IGNvbmZpZy5pbnRlcm5hbEludGVybGVhdmVkTGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAobnVtYmVyT2ZBdWRpb0NoYW5uZWxzID09PSAyKSB7XG4gICAgICAgICAgICAgICAgbGVmdEJ1ZmZlcnMgPSBtZXJnZUJ1ZmZlcnMobGVmdEJ1ZmZlcnMsIGludGVybmFsSW50ZXJsZWF2ZWRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIHJpZ2h0QnVmZmVycyA9IG1lcmdlQnVmZmVycyhyaWdodEJ1ZmZlcnMsIGludGVybmFsSW50ZXJsZWF2ZWRMZW5ndGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobnVtYmVyT2ZBdWRpb0NoYW5uZWxzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbGVmdEJ1ZmZlcnMgPSBtZXJnZUJ1ZmZlcnMobGVmdEJ1ZmZlcnMsIGludGVybmFsSW50ZXJsZWF2ZWRMZW5ndGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtZXJnZUJ1ZmZlcnMoY2hhbm5lbEJ1ZmZlciwgckxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgRmxvYXQ2NEFycmF5KHJMZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBsbmcgPSBjaGFubmVsQnVmZmVyLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG5nOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGNoYW5uZWxCdWZmZXJbaV07XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQoYnVmZmVyLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbnRlcmxlYXZlKGxlZnRDaGFubmVsLCByaWdodENoYW5uZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gbGVmdENoYW5uZWwubGVuZ3RoICsgcmlnaHRDaGFubmVsLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgRmxvYXQ2NEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRJbmRleCA9IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXgrK10gPSBsZWZ0Q2hhbm5lbFtpbnB1dEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4KytdID0gcmlnaHRDaGFubmVsW2lucHV0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlVVRGQnl0ZXModmlldywgb2Zmc2V0LCBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG5nID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxuZzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaSwgc3RyaW5nLmNoYXJDb2RlQXQoaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaW50ZXJsZWF2ZSBib3RoIGNoYW5uZWxzIHRvZ2V0aGVyXG4gICAgICAgICAgICB2YXIgaW50ZXJsZWF2ZWQ7XG5cbiAgICAgICAgICAgIGlmIChudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBpbnRlcmxlYXZlZCA9IGludGVybGVhdmUobGVmdEJ1ZmZlcnMsIHJpZ2h0QnVmZmVycyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpbnRlcmxlYXZlZCA9IGxlZnRCdWZmZXJzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaW50ZXJsZWF2ZWRMZW5ndGggPSBpbnRlcmxlYXZlZC5sZW5ndGg7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB3YXYgZmlsZVxuICAgICAgICAgICAgdmFyIHJlc3VsdGluZ0J1ZmZlckxlbmd0aCA9IDQ0ICsgaW50ZXJsZWF2ZWRMZW5ndGggKiAyO1xuXG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHJlc3VsdGluZ0J1ZmZlckxlbmd0aCk7XG5cbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG5cbiAgICAgICAgICAgIC8vIFJJRkYgY2h1bmsgZGVzY3JpcHRvci9pZGVudGlmaWVyIFxuICAgICAgICAgICAgd3JpdGVVVEZCeXRlcyh2aWV3LCAwLCAnUklGRicpO1xuXG4gICAgICAgICAgICAvLyBSSUZGIGNodW5rIGxlbmd0aFxuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoNCwgNDQgKyBpbnRlcmxlYXZlZExlbmd0aCAqIDIsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBSSUZGIHR5cGUgXG4gICAgICAgICAgICB3cml0ZVVURkJ5dGVzKHZpZXcsIDgsICdXQVZFJyk7XG5cbiAgICAgICAgICAgIC8vIGZvcm1hdCBjaHVuayBpZGVudGlmaWVyIFxuICAgICAgICAgICAgLy8gRk1UIHN1Yi1jaHVua1xuICAgICAgICAgICAgd3JpdGVVVEZCeXRlcyh2aWV3LCAxMiwgJ2ZtdCAnKTtcblxuICAgICAgICAgICAgLy8gZm9ybWF0IGNodW5rIGxlbmd0aCBcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIHNhbXBsZSBmb3JtYXQgKHJhdylcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDIwLCAxLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gc3RlcmVvICgyIGNoYW5uZWxzKVxuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjIsIG51bWJlck9mQXVkaW9DaGFubmVscywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIHNhbXBsZSByYXRlIFxuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMjQsIHNhbXBsZVJhdGUsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBieXRlIHJhdGUgKHNhbXBsZSByYXRlICogYmxvY2sgYWxpZ24pXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIDIsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBibG9jayBhbGlnbiAoY2hhbm5lbCBjb3VudCAqIGJ5dGVzIHBlciBzYW1wbGUpIFxuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMzIsIG51bWJlck9mQXVkaW9DaGFubmVscyAqIDIsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBiaXRzIHBlciBzYW1wbGUgXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQxNigzNCwgMTYsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBkYXRhIHN1Yi1jaHVua1xuICAgICAgICAgICAgLy8gZGF0YSBjaHVuayBpZGVudGlmaWVyIFxuICAgICAgICAgICAgd3JpdGVVVEZCeXRlcyh2aWV3LCAzNiwgJ2RhdGEnKTtcblxuICAgICAgICAgICAgLy8gZGF0YSBjaHVuayBsZW5ndGggXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMig0MCwgaW50ZXJsZWF2ZWRMZW5ndGggKiAyLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gd3JpdGUgdGhlIFBDTSBzYW1wbGVzXG4gICAgICAgICAgICB2YXIgbG5nID0gaW50ZXJsZWF2ZWRMZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSA0NDtcbiAgICAgICAgICAgIHZhciB2b2x1bWUgPSAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsbmc7IGkrKykge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0SW50MTYoaW5kZXgsIGludGVybGVhdmVkW2ldICogKDB4N0ZGRiAqIHZvbHVtZSksIHRydWUpO1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYih7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICB2aWV3OiB2aWV3XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgICAgICAgICB2aWV3OiB2aWV3XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNDaHJvbWUpIHtcbiAgICAgICAgICAgIC8vIGl0cyBNaWNyb3NvZnQgRWRnZVxuICAgICAgICAgICAgbWVyZ2VBdWRpb0J1ZmZlcnMoY29uZmlnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YS5idWZmZXIsIGRhdGEudmlldyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdmFyIHdlYldvcmtlciA9IHByb2Nlc3NJbldlYldvcmtlcihtZXJnZUF1ZGlvQnVmZmVycyk7XG5cbiAgICAgICAgd2ViV29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBjYWxsYmFjayhldmVudC5kYXRhLmJ1ZmZlciwgZXZlbnQuZGF0YS52aWV3KTtcblxuICAgICAgICAgICAgLy8gcmVsZWFzZSBtZW1vcnlcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwod2ViV29ya2VyLndvcmtlclVSTCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgd2ViV29ya2VyLnBvc3RNZXNzYWdlKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc0luV2ViV29ya2VyKF9mdW5jdGlvbikge1xuICAgICAgICB2YXIgd29ya2VyVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbX2Z1bmN0aW9uLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAnO3RoaXMub25tZXNzYWdlID0gIGZ1bmN0aW9uIChlKSB7JyArIF9mdW5jdGlvbi5uYW1lICsgJyhlLmRhdGEpO30nXG4gICAgICAgIF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0J1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIod29ya2VyVVJMKTtcbiAgICAgICAgd29ya2VyLndvcmtlclVSTCA9IHdvcmtlclVSTDtcbiAgICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9wcyByZWNvcmRpbmcgTWVkaWFTdHJlYW0uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiwgdGhhdCBpcyB1c2VkIHRvIHBhc3MgcmVjb3JkZWQgYmxvYiBiYWNrIHRvIHRoZSBjYWxsZWUuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAvLyBzdG9wIHJlY29yZGluZ1xuICAgICAgICByZWNvcmRpbmcgPSBmYWxzZTtcblxuICAgICAgICAvLyB0byBtYWtlIHN1cmUgb25hdWRpb3Byb2Nlc3Mgc3RvcHMgZmlyaW5nXG4gICAgICAgIC8vIGF1ZGlvSW5wdXQuZGlzY29ubmVjdCgpO1xuXG4gICAgICAgIG1lcmdlTGVmdFJpZ2h0QnVmZmVycyh7XG4gICAgICAgICAgICBzYW1wbGVSYXRlOiBzYW1wbGVSYXRlLFxuICAgICAgICAgICAgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzOiBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMsXG4gICAgICAgICAgICBpbnRlcm5hbEludGVybGVhdmVkTGVuZ3RoOiByZWNvcmRpbmdMZW5ndGgsXG4gICAgICAgICAgICBsZWZ0QnVmZmVyczogbGVmdGNoYW5uZWwsXG4gICAgICAgICAgICByaWdodEJ1ZmZlcnM6IG51bWJlck9mQXVkaW9DaGFubmVscyA9PT0gMSA/IFtdIDogcmlnaHRjaGFubmVsXG4gICAgICAgIH0sIGZ1bmN0aW9uKGJ1ZmZlciwgdmlldykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jsb2J9IGJsb2IgLSBUaGUgcmVjb3JkZWQgYmxvYiBvYmplY3QuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZGVyLmJsb2I7XG4gICAgICAgICAgICAgKiB9KTtcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2VsZi5ibG9iID0gbmV3IEJsb2IoW3ZpZXddLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvL3dhdidcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXlCdWZmZXJ9IGJ1ZmZlciAtIFRoZSByZWNvcmRlZCBidWZmZXIgb2JqZWN0LlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgKiAgICAgdmFyIGJ1ZmZlciA9IHJlY29yZGVyLmJ1ZmZlcjtcbiAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZWxmLmJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih2aWV3LmJ1ZmZlci5ieXRlTGVuZ3RoKTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0RhdGFWaWV3fSB2aWV3IC0gVGhlIHJlY29yZGVkIGRhdGEtdmlldyBvYmplY3QuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAqICAgICB2YXIgdmlldyA9IHJlY29yZGVyLnZpZXc7XG4gICAgICAgICAgICAgKiB9KTtcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2VsZi52aWV3ID0gdmlldztcblxuICAgICAgICAgICAgc2VsZi5zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcbiAgICAgICAgICAgIHNlbGYuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG5cbiAgICAgICAgICAgIC8vIHJlY29yZGVkIGF1ZGlvIGxlbmd0aFxuICAgICAgICAgICAgc2VsZi5sZW5ndGggPSByZWNvcmRpbmdMZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlzQXVkaW9Qcm9jZXNzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKCFTdG9yYWdlLkF1ZGlvQ29udGV4dENvbnN0cnVjdG9yKSB7XG4gICAgICAgIFN0b3JhZ2UuQXVkaW9Db250ZXh0Q29uc3RydWN0b3IgPSBuZXcgU3RvcmFnZS5BdWRpb0NvbnRleHQoKTtcbiAgICB9XG5cbiAgICB2YXIgY29udGV4dCA9IFN0b3JhZ2UuQXVkaW9Db250ZXh0Q29uc3RydWN0b3I7XG5cbiAgICAvLyBjcmVhdGVzIGFuIGF1ZGlvIG5vZGUgZnJvbSB0aGUgbWljcm9waG9uZSBpbmNvbWluZyBzdHJlYW1cbiAgICB2YXIgYXVkaW9JbnB1dCA9IGNvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobWVkaWFTdHJlYW0pO1xuXG4gICAgdmFyIGxlZ2FsQnVmZmVyVmFsdWVzID0gWzAsIDI1NiwgNTEyLCAxMDI0LCAyMDQ4LCA0MDk2LCA4MTkyLCAxNjM4NF07XG5cbiAgICAvKipcbiAgICAgKiBGcm9tIHRoZSBzcGVjOiBUaGlzIHZhbHVlIGNvbnRyb2xzIGhvdyBmcmVxdWVudGx5IHRoZSBhdWRpb3Byb2Nlc3MgZXZlbnQgaXNcbiAgICAgKiBkaXNwYXRjaGVkIGFuZCBob3cgbWFueSBzYW1wbGUtZnJhbWVzIG5lZWQgdG8gYmUgcHJvY2Vzc2VkIGVhY2ggY2FsbC5cbiAgICAgKiBMb3dlciB2YWx1ZXMgZm9yIGJ1ZmZlciBzaXplIHdpbGwgcmVzdWx0IGluIGEgbG93ZXIgKGJldHRlcikgbGF0ZW5jeS5cbiAgICAgKiBIaWdoZXIgdmFsdWVzIHdpbGwgYmUgbmVjZXNzYXJ5IHRvIGF2b2lkIGF1ZGlvIGJyZWFrdXAgYW5kIGdsaXRjaGVzXG4gICAgICogVGhlIHNpemUgb2YgdGhlIGJ1ZmZlciAoaW4gc2FtcGxlLWZyYW1lcykgd2hpY2ggbmVlZHMgdG9cbiAgICAgKiBiZSBwcm9jZXNzZWQgZWFjaCB0aW1lIG9ucHJvY2Vzc2F1ZGlvIGlzIGNhbGxlZC5cbiAgICAgKiBMZWdhbCB2YWx1ZXMgYXJlICgyNTYsIDUxMiwgMTAyNCwgMjA0OCwgNDA5NiwgODE5MiwgMTYzODQpLlxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBidWZmZXJTaXplIC0gQnVmZmVyLXNpemUgZm9yIGhvdyBmcmVxdWVudGx5IHRoZSBhdWRpb3Byb2Nlc3MgZXZlbnQgaXMgZGlzcGF0Y2hlZC5cbiAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIgPSBuZXcgU3RlcmVvQXVkaW9SZWNvcmRlcihtZWRpYVN0cmVhbSwge1xuICAgICAqICAgICBidWZmZXJTaXplOiA0MDk2XG4gICAgICogfSk7XG4gICAgICovXG5cbiAgICAvLyBcIjBcIiBtZWFucywgbGV0IGNocm9tZSBkZWNpZGUgdGhlIG1vc3QgYWNjdXJhdGUgYnVmZmVyLXNpemUgZm9yIGN1cnJlbnQgcGxhdGZvcm0uXG4gICAgdmFyIGJ1ZmZlclNpemUgPSB0eXBlb2YgY29uZmlnLmJ1ZmZlclNpemUgPT09ICd1bmRlZmluZWQnID8gNDA5NiA6IGNvbmZpZy5idWZmZXJTaXplO1xuXG4gICAgaWYgKGxlZ2FsQnVmZmVyVmFsdWVzLmluZGV4T2YoYnVmZmVyU2l6ZSkgPT09IC0xKSB7XG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0xlZ2FsIHZhbHVlcyBmb3IgYnVmZmVyLXNpemUgYXJlICcgKyBKU09OLnN0cmluZ2lmeShsZWdhbEJ1ZmZlclZhbHVlcywgbnVsbCwgJ1xcdCcpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb250ZXh0LmNyZWF0ZUphdmFTY3JpcHROb2RlKSB7XG4gICAgICAgIGpzQXVkaW9Ob2RlID0gY29udGV4dC5jcmVhdGVKYXZhU2NyaXB0Tm9kZShidWZmZXJTaXplLCBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMsIG51bWJlck9mQXVkaW9DaGFubmVscyk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcikge1xuICAgICAgICBqc0F1ZGlvTm9kZSA9IGNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGJ1ZmZlclNpemUsIG51bWJlck9mQXVkaW9DaGFubmVscywgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnV2ViQXVkaW8gQVBJIGhhcyBubyBzdXBwb3J0IG9uIHRoaXMgYnJvd3Nlci4nO1xuICAgIH1cblxuICAgIC8vIGNvbm5lY3QgdGhlIHN0cmVhbSB0byB0aGUgZ2FpbiBub2RlXG4gICAgYXVkaW9JbnB1dC5jb25uZWN0KGpzQXVkaW9Ob2RlKTtcblxuICAgIGlmICghY29uZmlnLmJ1ZmZlclNpemUpIHtcbiAgICAgICAgYnVmZmVyU2l6ZSA9IGpzQXVkaW9Ob2RlLmJ1ZmZlclNpemU7IC8vIGRldmljZSBidWZmZXItc2l6ZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBzYW1wbGUgcmF0ZSAoaW4gc2FtcGxlLWZyYW1lcyBwZXIgc2Vjb25kKSBhdCB3aGljaCB0aGVcbiAgICAgKiBBdWRpb0NvbnRleHQgaGFuZGxlcyBhdWRpby4gSXQgaXMgYXNzdW1lZCB0aGF0IGFsbCBBdWRpb05vZGVzXG4gICAgICogaW4gdGhlIGNvbnRleHQgcnVuIGF0IHRoaXMgcmF0ZS4gSW4gbWFraW5nIHRoaXMgYXNzdW1wdGlvbixcbiAgICAgKiBzYW1wbGUtcmF0ZSBjb252ZXJ0ZXJzIG9yIFwidmFyaXNwZWVkXCIgcHJvY2Vzc29ycyBhcmUgbm90IHN1cHBvcnRlZFxuICAgICAqIGluIHJlYWwtdGltZSBwcm9jZXNzaW5nLlxuICAgICAqIFRoZSBzYW1wbGVSYXRlIHBhcmFtZXRlciBkZXNjcmliZXMgdGhlIHNhbXBsZS1yYXRlIG9mIHRoZVxuICAgICAqIGxpbmVhciBQQ00gYXVkaW8gZGF0YSBpbiB0aGUgYnVmZmVyIGluIHNhbXBsZS1mcmFtZXMgcGVyIHNlY29uZC5cbiAgICAgKiBBbiBpbXBsZW1lbnRhdGlvbiBtdXN0IHN1cHBvcnQgc2FtcGxlLXJhdGVzIGluIGF0IGxlYXN0XG4gICAgICogdGhlIHJhbmdlIDIyMDUwIHRvIDk2MDAwLlxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzYW1wbGVSYXRlIC0gQnVmZmVyLXNpemUgZm9yIGhvdyBmcmVxdWVudGx5IHRoZSBhdWRpb3Byb2Nlc3MgZXZlbnQgaXMgZGlzcGF0Y2hlZC5cbiAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIgPSBuZXcgU3RlcmVvQXVkaW9SZWNvcmRlcihtZWRpYVN0cmVhbSwge1xuICAgICAqICAgICBzYW1wbGVSYXRlOiA0NDEwMFxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHZhciBzYW1wbGVSYXRlID0gdHlwZW9mIGNvbmZpZy5zYW1wbGVSYXRlICE9PSAndW5kZWZpbmVkJyA/IGNvbmZpZy5zYW1wbGVSYXRlIDogY29udGV4dC5zYW1wbGVSYXRlIHx8IDQ0MTAwO1xuXG4gICAgaWYgKHNhbXBsZVJhdGUgPCAyMjA1MCB8fCBzYW1wbGVSYXRlID4gOTYwMDApIHtcbiAgICAgICAgLy8gUmVmOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjMwMzkxOC81NTIxODJcbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybignc2FtcGxlLXJhdGUgbXVzdCBiZSB1bmRlciByYW5nZSAyMjA1MCBhbmQgOTYwMDAuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICBjb25zb2xlLmxvZygnc2FtcGxlLXJhdGUnLCBzYW1wbGVSYXRlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2J1ZmZlci1zaXplJywgYnVmZmVyU2l6ZSk7XG4gICAgfVxuXG4gICAgdmFyIGlzUGF1c2VkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGF1c2VzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnBhdXNlKCk7XG4gICAgICovXG4gICAgdGhpcy5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1BhdXNlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc3VtZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVzdW1lKCk7XG4gICAgICovXG4gICAgdGhpcy5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzTWVkaWFTdHJlYW1BY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRocm93ICdQbGVhc2UgbWFrZSBzdXJlIE1lZGlhU3RyZWFtIGlzIGFjdGl2ZS4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZWNvcmRpbmcpIHtcbiAgICAgICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdTZWVtcyByZWNvcmRpbmcgaGFzIGJlZW4gcmVzdGFydGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWNvcmQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzUGF1c2VkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc2V0cyBjdXJyZW50bHkgcmVjb3JkZWQgZGF0YS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICovXG4gICAgdGhpcy5jbGVhclJlY29yZGVkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG5cbiAgICAgICAgbGVmdGNoYW5uZWwubGVuZ3RoID0gcmlnaHRjaGFubmVsLmxlbmd0aCA9IDA7XG4gICAgICAgIHJlY29yZGluZ0xlbmd0aCA9IDA7XG4gICAgfTtcblxuICAgIHZhciBpc0F1ZGlvUHJvY2Vzc1N0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIG9uQXVkaW9Qcm9jZXNzRGF0YUF2YWlsYWJsZShlKSB7XG4gICAgICAgIGlmIChpc1BhdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTWVkaWFTdHJlYW1BY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01lZGlhU3RyZWFtIHNlZW1zIHN0b3BwZWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBqc0F1ZGlvTm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICByZWNvcmRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVjb3JkaW5nKSB7XG4gICAgICAgICAgICBhdWRpb0lucHV0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gXCJvbmF1ZGlvcHJvY2Vzc1wiIGV2ZW50J3MgZmlyc3QgaW52b2NhdGlvbi5cbiAgICAgICAgICogQG1ldGhvZCB7ZnVuY3Rpb259IG9uQXVkaW9Qcm9jZXNzU3RhcnRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRlci5vbkF1ZGlvUHJvY2Vzc1N0YXJ0ZWQ6IGZ1bmN0aW9uKCkgeyB9O1xuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCFpc0F1ZGlvUHJvY2Vzc1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGlzQXVkaW9Qcm9jZXNzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoY29uZmlnLm9uQXVkaW9Qcm9jZXNzU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5vbkF1ZGlvUHJvY2Vzc1N0YXJ0ZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5pbml0Q2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaW5pdENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGVmdCA9IGUuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7XG5cbiAgICAgICAgLy8gd2UgY2xvbmUgdGhlIHNhbXBsZXNcbiAgICAgICAgbGVmdGNoYW5uZWwucHVzaChuZXcgRmxvYXQzMkFycmF5KGxlZnQpKTtcblxuICAgICAgICBpZiAobnVtYmVyT2ZBdWRpb0NoYW5uZWxzID09PSAyKSB7XG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBlLmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDEpO1xuICAgICAgICAgICAgcmlnaHRjaGFubmVsLnB1c2gobmV3IEZsb2F0MzJBcnJheShyaWdodCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjb3JkaW5nTGVuZ3RoICs9IGJ1ZmZlclNpemU7XG4gICAgfVxuXG4gICAganNBdWRpb05vZGUub25hdWRpb3Byb2Nlc3MgPSBvbkF1ZGlvUHJvY2Vzc0RhdGFBdmFpbGFibGU7XG5cbiAgICAvLyB0byBwcmV2ZW50IHNlbGYgYXVkaW8gdG8gYmUgY29ubmVjdGVkIHdpdGggc3BlYWtlcnNcbiAgICBqc0F1ZGlvTm9kZS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xufVxuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuU3RlcmVvQXVkaW9SZWNvcmRlciA9IFN0ZXJlb0F1ZGlvUmVjb3JkZXI7XG59XG5cbi8vIF9fX19fX19fX19fX19fX19fXG4vLyBDYW52YXNSZWNvcmRlci5qc1xuXG4vKipcbiAqIENhbnZhc1JlY29yZGVyIGlzIGEgc3RhbmRhbG9uZSBjbGFzcyB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIGJyaW5nIEhUTUw1LUNhbnZhcyByZWNvcmRpbmcgaW50byB2aWRlbyBXZWJNLiBJdCB1c2VzIEhUTUwyQ2FudmFzIGxpYnJhcnkgYW5kIHJ1bnMgdG9wIG92ZXIge0BsaW5rIFdoYW1teX0uXG4gKiBAc3VtbWFyeSBIVE1MMkNhbnZhcyByZWNvcmRpbmcgaW50byB2aWRlbyBXZWJNLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgQ2FudmFzUmVjb3JkZXJcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciByZWNvcmRlciA9IG5ldyBDYW52YXNSZWNvcmRlcihodG1sRWxlbWVudCwgeyBkaXNhYmxlTG9nczogdHJ1ZSB9KTtcbiAqIHJlY29yZGVyLnJlY29yZCgpO1xuICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbihibG9iKSB7XG4gKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAqIH0pO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gaHRtbEVsZW1lbnQgLSBxdWVyeVNlbGVjdG9yL2dldEVsZW1lbnRCeUlkL2dldEVsZW1lbnRzQnlUYWdOYW1lWzBdL2V0Yy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB7ZGlzYWJsZUxvZ3M6dHJ1ZSwgaW5pdENhbGxiYWNrOiBmdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBDYW52YXNSZWNvcmRlcihodG1sRWxlbWVudCwgY29uZmlnKSB7XG4gICAgaWYgKHR5cGVvZiBodG1sMmNhbnZhcyA9PT0gJ3VuZGVmaW5lZCcgJiYgaHRtbEVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2NhbnZhcycpIHtcbiAgICAgICAgdGhyb3cgJ1BsZWFzZSBsaW5rOiBodHRwczovL2Nkbi53ZWJydGMtZXhwZXJpbWVudC5jb20vc2NyZWVuc2hvdC5qcyc7XG4gICAgfVxuXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIGlmICghY29uZmlnLmZyYW1lSW50ZXJ2YWwpIHtcbiAgICAgICAgY29uZmlnLmZyYW1lSW50ZXJ2YWwgPSAxMDtcbiAgICB9XG5cbiAgICAvLyB2aWEgRGV0ZWN0UlRDLmpzXG4gICAgdmFyIGlzQ2FudmFzU3VwcG9ydHNTdHJlYW1DYXB0dXJpbmcgPSBmYWxzZTtcbiAgICBbJ2NhcHR1cmVTdHJlYW0nLCAnbW96Q2FwdHVyZVN0cmVhbScsICd3ZWJraXRDYXB0dXJlU3RyZWFtJ10uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKSB7XG4gICAgICAgICAgICBpc0NhbnZhc1N1cHBvcnRzU3RyZWFtQ2FwdHVyaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIF9pc0Nocm9tZSA9ICghIXdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiB8fCAhIXdpbmRvdy53ZWJraXRHZXRVc2VyTWVkaWEpICYmICEhd2luZG93LmNocm9tZTtcblxuICAgIHZhciBjaHJvbWVWZXJzaW9uID0gNTA7XG4gICAgdmFyIG1hdGNoQXJyYXkgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbShlfGl1bSlcXC8oWzAtOV0rKVxcLi8pO1xuICAgIGlmIChfaXNDaHJvbWUgJiYgbWF0Y2hBcnJheSAmJiBtYXRjaEFycmF5WzJdKSB7XG4gICAgICAgIGNocm9tZVZlcnNpb24gPSBwYXJzZUludChtYXRjaEFycmF5WzJdLCAxMCk7XG4gICAgfVxuXG4gICAgaWYgKF9pc0Nocm9tZSAmJiBjaHJvbWVWZXJzaW9uIDwgNTIpIHtcbiAgICAgICAgaXNDYW52YXNTdXBwb3J0c1N0cmVhbUNhcHR1cmluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBnbG9iYWxDYW52YXMsIG1lZGlhU3RyZWFtUmVjb3JkZXI7XG5cbiAgICBpZiAoaXNDYW52YXNTdXBwb3J0c1N0cmVhbUNhcHR1cmluZykge1xuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnWW91ciBicm93c2VyIHN1cHBvcnRzIGJvdGggTWVkaVJlY29yZGVyIEFQSSBhbmQgY2FudmFzLmNhcHR1cmVTdHJlYW0hJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaHRtbEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgZ2xvYmFsQ2FudmFzID0gaHRtbEVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoaHRtbEVsZW1lbnQgaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICAgICAgICAgIGdsb2JhbENhbnZhcyA9IGh0bWxFbGVtZW50LmNhbnZhcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93ICdQbGVhc2UgcGFzcyBlaXRoZXIgSFRNTENhbnZhc0VsZW1lbnQgb3IgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELic7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEhbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2FudmFzIHJlY29yZGluZyBpcyBOT1Qgc3VwcG9ydGVkIGluIEZpcmVmb3guJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaXNSZWNvcmRpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZWNvcmRzIENhbnZhcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIENhbnZhc1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZWNvcmQoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1JlY29yZGluZyA9IHRydWU7XG5cbiAgICAgICAgaWYgKGlzQ2FudmFzU3VwcG9ydHNTdHJlYW1DYXB0dXJpbmcpIHtcbiAgICAgICAgICAgIC8vIENhbnZhc0NhcHR1cmVNZWRpYVN0cmVhbVxuICAgICAgICAgICAgdmFyIGNhbnZhc01lZGlhU3RyZWFtO1xuICAgICAgICAgICAgaWYgKCdjYXB0dXJlU3RyZWFtJyBpbiBnbG9iYWxDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNNZWRpYVN0cmVhbSA9IGdsb2JhbENhbnZhcy5jYXB0dXJlU3RyZWFtKDI1KTsgLy8gMjUgRlBTXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCdtb3pDYXB0dXJlU3RyZWFtJyBpbiBnbG9iYWxDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNNZWRpYVN0cmVhbSA9IGdsb2JhbENhbnZhcy5tb3pDYXB0dXJlU3RyZWFtKDI1KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3dlYmtpdENhcHR1cmVTdHJlYW0nIGluIGdsb2JhbENhbnZhcykge1xuICAgICAgICAgICAgICAgIGNhbnZhc01lZGlhU3RyZWFtID0gZ2xvYmFsQ2FudmFzLndlYmtpdENhcHR1cmVTdHJlYW0oMjUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBtZFN0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIG1kU3RyZWFtLmFkZFRyYWNrKGNhbnZhc01lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgIGNhbnZhc01lZGlhU3RyZWFtID0gbWRTdHJlYW07XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAgICAgICBpZiAoIWNhbnZhc01lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ2NhcHR1cmVTdHJlYW0gQVBJIGFyZSBOT1QgYXZhaWxhYmxlLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5vdGU6IEphbiAxOCwgMjAxNiBzdGF0dXMgaXMgdGhhdCwgXG4gICAgICAgICAgICAvLyBGaXJlZm94IE1lZGlhUmVjb3JkZXIgQVBJIGNhbid0IHJlY29yZCBDYW52YXNDYXB0dXJlTWVkaWFTdHJlYW0gb2JqZWN0LlxuICAgICAgICAgICAgbWVkaWFTdHJlYW1SZWNvcmRlciA9IG5ldyBNZWRpYVN0cmVhbVJlY29yZGVyKGNhbnZhc01lZGlhU3RyZWFtLCB7XG4gICAgICAgICAgICAgICAgbWltZVR5cGU6ICd2aWRlby93ZWJtJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtZWRpYVN0cmVhbVJlY29yZGVyLnJlY29yZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2hhbW15LmZyYW1lcyA9IFtdO1xuICAgICAgICAgICAgbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGRyYXdDYW52YXNGcmFtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy5pbml0Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNvbmZpZy5pbml0Q2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldFdlYlBJbWFnZXMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpZiAoaHRtbEVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2NhbnZhcycpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZnJhbWVzTGVuZ3RoID0gd2hhbW15LmZyYW1lcy5sZW5ndGg7XG4gICAgICAgIHdoYW1teS5mcmFtZXMuZm9yRWFjaChmdW5jdGlvbihmcmFtZSwgaWR4KSB7XG4gICAgICAgICAgICB2YXIgZnJhbWVzUmVtYWluaW5nID0gZnJhbWVzTGVuZ3RoIC0gaWR4O1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGZyYW1lc1JlbWFpbmluZyArICcvJyArIGZyYW1lc0xlbmd0aCArICcgZnJhbWVzIHJlbWFpbmluZycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29uZmlnLm9uRW5jb2RpbmdDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5vbkVuY29kaW5nQ2FsbGJhY2soZnJhbWVzUmVtYWluaW5nLCBmcmFtZXNMZW5ndGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgd2VicCA9IGZyYW1lLmltYWdlLnRvRGF0YVVSTCgnaW1hZ2Uvd2VicCcsIDEpO1xuICAgICAgICAgICAgd2hhbW15LmZyYW1lc1tpZHhdLmltYWdlID0gd2VicDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0dlbmVyYXRpbmcgV2ViTScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgc3RvcHMgcmVjb3JkaW5nIENhbnZhcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLCB0aGF0IGlzIHVzZWQgdG8gcGFzcyByZWNvcmRlZCBibG9iIGJhY2sgdG8gdGhlIGNhbGxlZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIENhbnZhc1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpc1JlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBpZiAoaXNDYW52YXNTdXBwb3J0c1N0cmVhbUNhcHR1cmluZyAmJiBtZWRpYVN0cmVhbVJlY29yZGVyKSB7XG4gICAgICAgICAgICBtZWRpYVN0cmVhbVJlY29yZGVyLnN0b3AoY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRXZWJQSW1hZ2VzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jsb2J9IGJsb2IgLSBSZWNvcmRlZCBmcmFtZXMgaW4gdmlkZW8vd2VibSBibG9iLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIENhbnZhc1JlY29yZGVyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZGVyLmJsb2I7XG4gICAgICAgICAgICAgKiB9KTtcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgd2hhbW15LmNvbXBpbGUoZnVuY3Rpb24oYmxvYikge1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1JlY29yZGluZyBmaW5pc2hlZCEnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGF0LmJsb2IgPSBibG9iO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuYmxvYi5mb3JFYWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYmxvYiA9IG5ldyBCbG9iKFtdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vd2VibSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoYXQuYmxvYik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2hhbW15LmZyYW1lcyA9IFtdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgaXNQYXVzZWRSZWNvcmRpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHBhdXNlcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBDYW52YXNSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucGF1c2UoKTtcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlzUGF1c2VkUmVjb3JkaW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzdW1lcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBDYW52YXNSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVzdW1lKCk7XG4gICAgICovXG4gICAgdGhpcy5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaXNQYXVzZWRSZWNvcmRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIWlzUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29yZCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc2V0cyBjdXJyZW50bHkgcmVjb3JkZWQgZGF0YS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIENhbnZhc1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5jbGVhclJlY29yZGVkRGF0YSgpO1xuICAgICAqL1xuICAgIHRoaXMuY2xlYXJSZWNvcmRlZERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICB3aGFtbXkuZnJhbWVzID0gW107XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNsb25lQ2FudmFzKCkge1xuICAgICAgICAvL2NyZWF0ZSBhIG5ldyBjYW52YXNcbiAgICAgICAgdmFyIG5ld0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB2YXIgY29udGV4dCA9IG5ld0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIC8vc2V0IGRpbWVuc2lvbnNcbiAgICAgICAgbmV3Q2FudmFzLndpZHRoID0gaHRtbEVsZW1lbnQud2lkdGg7XG4gICAgICAgIG5ld0NhbnZhcy5oZWlnaHQgPSBodG1sRWxlbWVudC5oZWlnaHQ7XG5cbiAgICAgICAgLy9hcHBseSB0aGUgb2xkIGNhbnZhcyB0byB0aGUgbmV3IG9uZVxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShodG1sRWxlbWVudCwgMCwgMCk7XG5cbiAgICAgICAgLy9yZXR1cm4gdGhlIG5ldyBjYW52YXNcbiAgICAgICAgcmV0dXJuIG5ld0NhbnZhcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkcmF3Q2FudmFzRnJhbWUoKSB7XG4gICAgICAgIGlmIChpc1BhdXNlZFJlY29yZGluZykge1xuICAgICAgICAgICAgbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGRyYXdDYW52YXNGcmFtZSwgNTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChodG1sRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnY2FudmFzJykge1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0VGltZTtcbiAgICAgICAgICAgIC8vIHZpYSAjMjA2LCBieSBKYWNrIGkuZS4gQFNleW1vdXJyXG4gICAgICAgICAgICBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgICB3aGFtbXkuZnJhbWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGltYWdlOiBjbG9uZUNhbnZhcygpLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChpc1JlY29yZGluZykge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZHJhd0NhbnZhc0ZyYW1lLCBjb25maWcuZnJhbWVJbnRlcnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBodG1sMmNhbnZhcyhodG1sRWxlbWVudCwge1xuICAgICAgICAgICAgZ3JhYk1vdXNlOiB0eXBlb2YgY29uZmlnLnNob3dNb3VzZVBvaW50ZXIgPT09ICd1bmRlZmluZWQnIHx8IGNvbmZpZy5zaG93TW91c2VQb2ludGVyLFxuICAgICAgICAgICAgb25yZW5kZXJlZDogZnVuY3Rpb24oY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0VGltZTtcbiAgICAgICAgICAgICAgICBpZiAoIWR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGRyYXdDYW52YXNGcmFtZSwgY29uZmlnLmZyYW1lSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHZpYSAjMjA2LCBieSBKYWNrIGkuZS4gQFNleW1vdXJyXG4gICAgICAgICAgICAgICAgbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgICAgIHdoYW1teS5mcmFtZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS93ZWJwJywgMSksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZHJhd0NhbnZhc0ZyYW1lLCBjb25maWcuZnJhbWVJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgIHZhciB3aGFtbXkgPSBuZXcgV2hhbW15LlZpZGVvKDEwMCk7XG59XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5DYW52YXNSZWNvcmRlciA9IENhbnZhc1JlY29yZGVyO1xufVxuXG4vLyBfX19fX19fX19fX19fX19fX1xuLy8gV2hhbW15UmVjb3JkZXIuanNcblxuLyoqXG4gKiBXaGFtbXlSZWNvcmRlciBpcyBhIHN0YW5kYWxvbmUgY2xhc3MgdXNlZCBieSB7QGxpbmsgUmVjb3JkUlRDfSB0byBicmluZyB2aWRlbyByZWNvcmRpbmcgaW4gQ2hyb21lLiBJdCBydW5zIHRvcCBvdmVyIHtAbGluayBXaGFtbXl9LlxuICogQHN1bW1hcnkgVmlkZW8gcmVjb3JkaW5nIGZlYXR1cmUgaW4gQ2hyb21lLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgV2hhbW15UmVjb3JkZXJcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciByZWNvcmRlciA9IG5ldyBXaGFtbXlSZWNvcmRlcihtZWRpYVN0cmVhbSk7XG4gKiByZWNvcmRlci5yZWNvcmQoKTtcbiAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICogICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gKiB9KTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gTWVkaWFTdHJlYW0gb2JqZWN0IGZldGNoZWQgdXNpbmcgZ2V0VXNlck1lZGlhIEFQSSBvciBnZW5lcmF0ZWQgdXNpbmcgY2FwdHVyZVN0cmVhbVVudGlsRW5kZWQgb3IgV2ViQXVkaW8gQVBJLlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHtkaXNhYmxlTG9nczogdHJ1ZSwgaW5pdENhbGxiYWNrOiBmdW5jdGlvbiwgdmlkZW86IEhUTUxWaWRlb0VsZW1lbnQsIGV0Yy59XG4gKi9cblxuZnVuY3Rpb24gV2hhbW15UmVjb3JkZXIobWVkaWFTdHJlYW0sIGNvbmZpZykge1xuXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXG4gICAgaWYgKCFjb25maWcuZnJhbWVJbnRlcnZhbCkge1xuICAgICAgICBjb25maWcuZnJhbWVJbnRlcnZhbCA9IDEwO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBmcmFtZXMtaW50ZXJ2YWw6JywgY29uZmlnLmZyYW1lSW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlY29yZHMgdmlkZW8uXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVjb3JkKCk7XG4gICAgICovXG4gICAgdGhpcy5yZWNvcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFjb25maWcud2lkdGgpIHtcbiAgICAgICAgICAgIGNvbmZpZy53aWR0aCA9IDMyMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZmlnLmhlaWdodCkge1xuICAgICAgICAgICAgY29uZmlnLmhlaWdodCA9IDI0MDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZmlnLnZpZGVvKSB7XG4gICAgICAgICAgICBjb25maWcudmlkZW8gPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGNvbmZpZy53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbmZpZy5oZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmZpZy5jYW52YXMpIHtcbiAgICAgICAgICAgIGNvbmZpZy5jYW52YXMgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGNvbmZpZy53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbmZpZy5oZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXMud2lkdGggPSBjb25maWcuY2FudmFzLndpZHRoIHx8IDMyMDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNvbmZpZy5jYW52YXMuaGVpZ2h0IHx8IDI0MDtcblxuICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgLy8gc2V0dGluZyBkZWZhdWx0c1xuICAgICAgICBpZiAoY29uZmlnLnZpZGVvICYmIGNvbmZpZy52aWRlbyBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHZpZGVvID0gY29uZmlnLnZpZGVvLmNsb25lTm9kZSgpO1xuXG4gICAgICAgICAgICBpZiAoY29uZmlnLmluaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5pbml0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2aWRlby5zcmNPYmplY3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gbWVkaWFTdHJlYW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwobWVkaWFTdHJlYW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oKSB7IC8vIFwib25sb2FkZWRtZXRhZGF0YVwiIG1heSBOT1Qgd29yayBpbiBGRj9cbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmluaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjb25maWcuaW5pdENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmlkZW8ud2lkdGggPSBjb25maWcudmlkZW8ud2lkdGg7XG4gICAgICAgICAgICB2aWRlby5oZWlnaHQgPSBjb25maWcudmlkZW8uaGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlO1xuICAgICAgICB2aWRlby5wbGF5KCk7XG5cbiAgICAgICAgbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgd2hhbW15ID0gbmV3IFdoYW1teS5WaWRlbygpO1xuXG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FudmFzIHJlc29sdXRpb25zJywgY2FudmFzLndpZHRoLCAnKicsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZpZGVvIHdpZHRoL2hlaWdodCcsIHZpZGVvLndpZHRoIHx8IGNhbnZhcy53aWR0aCwgJyonLCB2aWRlby5oZWlnaHQgfHwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBkcmF3RnJhbWVzKGNvbmZpZy5mcmFtZUludGVydmFsKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRHJhdyBhbmQgcHVzaCBmcmFtZXMgdG8gV2hhbW15XG4gICAgICogQHBhcmFtIHtpbnRlZ2VyfSBmcmFtZUludGVydmFsIC0gc2V0IG1pbmltdW0gaW50ZXJ2YWwgKGluIG1pbGxpc2Vjb25kcykgYmV0d2VlbiBlYWNoIHRpbWUgd2UgcHVzaCBhIGZyYW1lIHRvIFdoYW1teVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyYXdGcmFtZXMoZnJhbWVJbnRlcnZhbCkge1xuICAgICAgICBmcmFtZUludGVydmFsID0gdHlwZW9mIGZyYW1lSW50ZXJ2YWwgIT09ICd1bmRlZmluZWQnID8gZnJhbWVJbnRlcnZhbCA6IDEwO1xuXG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbGFzdFRpbWU7XG4gICAgICAgIGlmICghZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGRyYXdGcmFtZXMsIGZyYW1lSW50ZXJ2YWwsIGZyYW1lSW50ZXJ2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUGF1c2VkUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZHJhd0ZyYW1lcywgMTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZpYSAjMjA2LCBieSBKYWNrIGkuZS4gQFNleW1vdXJyXG4gICAgICAgIGxhc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgaWYgKHZpZGVvLnBhdXNlZCkge1xuICAgICAgICAgICAgLy8gdmlhOiBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1dlYlJUQy1FeHBlcmltZW50L3B1bGwvMzE2XG4gICAgICAgICAgICAvLyBUd2VhayBmb3IgQW5kcm9pZCBDaHJvbWVcbiAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICB3aGFtbXkuZnJhbWVzLnB1c2goe1xuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgaW1hZ2U6IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3dlYnAnKVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWlzU3RvcERyYXdpbmcpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZHJhd0ZyYW1lcywgZnJhbWVJbnRlcnZhbCwgZnJhbWVJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhc3luY0xvb3Aobykge1xuICAgICAgICB2YXIgaSA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gby5sZW5ndGg7XG5cbiAgICAgICAgdmFyIGxvb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGlmIChpID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgby5mdW5jdGlvblRvTG9vcChsb29wLCBpKTtcbiAgICAgICAgfTtcbiAgICAgICAgbG9vcCgpOyAvL2luaXRcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBibGFjayBmcmFtZXMgZnJvbSB0aGUgYmVnaW5uaW5nIHRvIHRoZSBzcGVjaWZpZWQgZnJhbWVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBfZnJhbWVzIC0gYXJyYXkgb2YgZnJhbWVzIHRvIGJlIGNoZWNrZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gX2ZyYW1lc1RvQ2hlY2sgLSBudW1iZXIgb2YgZnJhbWUgdW50aWwgY2hlY2sgd2lsbCBiZSBleGVjdXRlZCAoLTEgLSB3aWxsIGRyb3AgYWxsIGZyYW1lcyB1bnRpbCBmcmFtZSBub3QgbWF0Y2hlZCB3aWxsIGJlIGZvdW5kKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBfcGl4VG9sZXJhbmNlIC0gMCAtIHZlcnkgc3RyaWN0IChvbmx5IGJsYWNrIHBpeGVsIGNvbG9yKSA7IDEgLSBhbGxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gX2ZyYW1lVG9sZXJhbmNlIC0gMCAtIHZlcnkgc3RyaWN0IChvbmx5IGJsYWNrIGZyYW1lIGNvbG9yKSA7IDEgLSBhbGxcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IC0gYXJyYXkgb2YgZnJhbWVzXG4gICAgICovXG4gICAgLy8gcHVsbCMyOTMgYnkgQHZvbG9kYWxleGV5XG4gICAgZnVuY3Rpb24gZHJvcEJsYWNrRnJhbWVzKF9mcmFtZXMsIF9mcmFtZXNUb0NoZWNrLCBfcGl4VG9sZXJhbmNlLCBfZnJhbWVUb2xlcmFuY2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBsb2NhbENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBsb2NhbENhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgbG9jYWxDYW52YXMuaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcbiAgICAgICAgdmFyIGNvbnRleHQyZCA9IGxvY2FsQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHZhciByZXN1bHRGcmFtZXMgPSBbXTtcblxuICAgICAgICB2YXIgY2hlY2tVbnRpbE5vdEJsYWNrID0gX2ZyYW1lc1RvQ2hlY2sgPT09IC0xO1xuICAgICAgICB2YXIgZW5kQ2hlY2tGcmFtZSA9IChfZnJhbWVzVG9DaGVjayAmJiBfZnJhbWVzVG9DaGVjayA+IDAgJiYgX2ZyYW1lc1RvQ2hlY2sgPD0gX2ZyYW1lcy5sZW5ndGgpID9cbiAgICAgICAgICAgIF9mcmFtZXNUb0NoZWNrIDogX2ZyYW1lcy5sZW5ndGg7XG4gICAgICAgIHZhciBzYW1wbGVDb2xvciA9IHtcbiAgICAgICAgICAgIHI6IDAsXG4gICAgICAgICAgICBnOiAwLFxuICAgICAgICAgICAgYjogMFxuICAgICAgICB9O1xuICAgICAgICB2YXIgbWF4Q29sb3JEaWZmZXJlbmNlID0gTWF0aC5zcXJ0KFxuICAgICAgICAgICAgTWF0aC5wb3coMjU1LCAyKSArXG4gICAgICAgICAgICBNYXRoLnBvdygyNTUsIDIpICtcbiAgICAgICAgICAgIE1hdGgucG93KDI1NSwgMilcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIHBpeFRvbGVyYW5jZSA9IF9waXhUb2xlcmFuY2UgJiYgX3BpeFRvbGVyYW5jZSA+PSAwICYmIF9waXhUb2xlcmFuY2UgPD0gMSA/IF9waXhUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgZnJhbWVUb2xlcmFuY2UgPSBfZnJhbWVUb2xlcmFuY2UgJiYgX2ZyYW1lVG9sZXJhbmNlID49IDAgJiYgX2ZyYW1lVG9sZXJhbmNlIDw9IDEgPyBfZnJhbWVUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgZG9Ob3RDaGVja05leHQgPSBmYWxzZTtcblxuICAgICAgICBhc3luY0xvb3Aoe1xuICAgICAgICAgICAgbGVuZ3RoOiBlbmRDaGVja0ZyYW1lLFxuICAgICAgICAgICAgZnVuY3Rpb25Ub0xvb3A6IGZ1bmN0aW9uKGxvb3AsIGYpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hQaXhDb3VudCwgZW5kUGl4Q2hlY2ssIG1heFBpeENvdW50O1xuXG4gICAgICAgICAgICAgICAgdmFyIGZpbmlzaEltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZG9Ob3RDaGVja05leHQgJiYgbWF4UGl4Q291bnQgLSBtYXRjaFBpeENvdW50IDw9IG1heFBpeENvdW50ICogZnJhbWVUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmVkIGJsYWNrIGZyYW1lIDogJyArIGYgKyAnIDsgZnJhbWUgZHVyYXRpb24gJyArIF9mcmFtZXNbZl0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZyYW1lIGlzIHBhc3NlZCA6ICcgKyBmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1VudGlsTm90QmxhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb05vdENoZWNrTmV4dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRGcmFtZXMucHVzaChfZnJhbWVzW2ZdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb29wKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmICghZG9Ob3RDaGVja05leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDJkLmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZURhdGEgPSBjb250ZXh0MmQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFBpeENvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFBpeENoZWNrID0gaW1hZ2VEYXRhLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4UGl4Q291bnQgPSBpbWFnZURhdGEuZGF0YS5sZW5ndGggLyA0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwaXggPSAwOyBwaXggPCBlbmRQaXhDaGVjazsgcGl4ICs9IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudENvbG9yID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByOiBpbWFnZURhdGEuZGF0YVtwaXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnOiBpbWFnZURhdGEuZGF0YVtwaXggKyAxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYjogaW1hZ2VEYXRhLmRhdGFbcGl4ICsgMl1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckRpZmZlcmVuY2UgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGN1cnJlbnRDb2xvci5yIC0gc2FtcGxlQ29sb3IuciwgMikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhjdXJyZW50Q29sb3IuZyAtIHNhbXBsZUNvbG9yLmcsIDIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coY3VycmVudENvbG9yLmIgLSBzYW1wbGVDb2xvci5iLCAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiBjb2xvciBpdCBpcyBkaWZmZXJlbmNlIGluIGNvbG9yIHZlY3RvcnMgKHIxLGcxLGIxKSA8PT4gKHIyLGcyLGIyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xvckRpZmZlcmVuY2UgPD0gbWF4Q29sb3JEaWZmZXJlbmNlICogcGl4VG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUGl4Q291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSBfZnJhbWVzW2ZdLmltYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaEltYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRGcmFtZXMgPSByZXN1bHRGcmFtZXMuY29uY2F0KF9mcmFtZXMuc2xpY2UoZW5kQ2hlY2tGcmFtZSkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdEZyYW1lcy5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhdCBsZWFzdCBvbmUgbGFzdCBmcmFtZSBzaG91bGQgYmUgYXZhaWxhYmxlIGZvciBuZXh0IG1hbmlwdWxhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0b3RhbCBkdXJhdGlvbiBvZiBhbGwgZnJhbWVzIHdpbGwgYmUgPCAxMDAwIHRoYW4gZmZtcGVnIGRvZXNuJ3Qgd29yayB3ZWxsLi4uXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEZyYW1lcy5wdXNoKF9mcmFtZXNbX2ZyYW1lcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdEZyYW1lcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBpc1N0b3BEcmF3aW5nID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9wcyByZWNvcmRpbmcgdmlkZW8uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiwgdGhhdCBpcyB1c2VkIHRvIHBhc3MgcmVjb3JkZWQgYmxvYiBiYWNrIHRvIHRoZSBjYWxsZWUuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbihibG9iKSB7XG4gICAgICogICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgdGhpcy5zdG9wID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgaXNTdG9wRHJhd2luZyA9IHRydWU7XG5cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gYW5hbHlzZSBvZiBhbGwgZnJhbWVzIHRha2VzIHNvbWUgdGltZSFcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGUuZy4gZHJvcEJsYWNrRnJhbWVzKGZyYW1lcywgMTAsIDEsIDEpIC0gd2lsbCBjdXQgYWxsIDEwIGZyYW1lc1xuICAgICAgICAgICAgLy8gZS5nLiBkcm9wQmxhY2tGcmFtZXMoZnJhbWVzLCAxMCwgMC41LCAwLjUpIC0gd2lsbCBhbmFseXNlIDEwIGZyYW1lc1xuICAgICAgICAgICAgLy8gZS5nLiBkcm9wQmxhY2tGcmFtZXMoZnJhbWVzLCAxMCkgPT09IGRyb3BCbGFja0ZyYW1lcyhmcmFtZXMsIDEwLCAwLCAwKSAtIHdpbGwgYW5hbHlzZSAxMCBmcmFtZXMgd2l0aCBzdHJpY3QgYmxhY2sgY29sb3JcbiAgICAgICAgICAgIGRyb3BCbGFja0ZyYW1lcyh3aGFtbXkuZnJhbWVzLCAtMSwgbnVsbCwgbnVsbCwgZnVuY3Rpb24oZnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgd2hhbW15LmZyYW1lcyA9IGZyYW1lcztcblxuICAgICAgICAgICAgICAgIC8vIHRvIGRpc3BsYXkgYWR2ZXJ0aXNlbWVudCBpbWFnZXMhXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5hZHZlcnRpc2VtZW50ICYmIGNvbmZpZy5hZHZlcnRpc2VtZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB3aGFtbXkuZnJhbWVzID0gY29uZmlnLmFkdmVydGlzZW1lbnQuY29uY2F0KHdoYW1teS5mcmFtZXMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QmxvYn0gYmxvYiAtIFJlY29yZGVkIGZyYW1lcyBpbiB2aWRlby93ZWJtIGJsb2IuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIFdoYW1teVJlY29yZGVyXG4gICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZGVyLmJsb2I7XG4gICAgICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgd2hhbW15LmNvbXBpbGUoZnVuY3Rpb24oYmxvYikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5ibG9iID0gYmxvYjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYmxvYi5mb3JFYWNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ibG9iID0gbmV3IEJsb2IoW10sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vd2VibSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfdGhpcy5ibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwKTtcbiAgICB9O1xuXG4gICAgdmFyIGlzUGF1c2VkUmVjb3JkaW5nID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwYXVzZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgV2hhbW15UmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnBhdXNlKCk7XG4gICAgICovXG4gICAgdGhpcy5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1BhdXNlZFJlY29yZGluZyA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc3VtZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgV2hhbW15UmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlc3VtZSgpO1xuICAgICAqL1xuICAgIHRoaXMucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlzUGF1c2VkUmVjb3JkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGlzU3RvcERyYXdpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmVjb3JkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzZXRzIGN1cnJlbnRseSByZWNvcmRlZCBkYXRhLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgV2hhbW15UmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICovXG4gICAgdGhpcy5jbGVhclJlY29yZGVkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIHdoYW1teS5mcmFtZXMgPSBbXTtcbiAgICB9O1xuXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICB2YXIgdmlkZW87XG4gICAgdmFyIGxhc3RUaW1lO1xuICAgIHZhciB3aGFtbXk7XG59XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5XaGFtbXlSZWNvcmRlciA9IFdoYW1teVJlY29yZGVyO1xufVxuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYW50aW1hdHRlcjE1L3doYW1teS9ibG9iL21hc3Rlci9MSUNFTlNFXG4vLyBfX19fX19fX19cbi8vIFdoYW1teS5qc1xuXG4vLyB0b2RvOiBGaXJlZm94IG5vdyBzdXBwb3J0cyB3ZWJwIGZvciB3ZWJtIGNvbnRhaW5lcnMhXG4vLyB0aGVpciBNZWRpYVJlY29yZGVyIGltcGxlbWVudGF0aW9uIHdvcmtzIHdlbGwhXG4vLyBzaG91bGQgd2UgcHJvdmlkZSBhbiBvcHRpb24gdG8gcmVjb3JkIHZpYSBXaGFtbXkuanMgb3IgTWVkaWFSZWNvcmRlciBBUEkgaXMgYSBiZXR0ZXIgc29sdXRpb24/XG5cbi8qKlxuICogV2hhbW15IGlzIGEgc3RhbmRhbG9uZSBjbGFzcyB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIGJyaW5nIHZpZGVvIHJlY29yZGluZyBpbiBDaHJvbWUuIEl0IGlzIHdyaXR0ZW4gYnkge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnRpbWF0dGVyMTV8YW50aW1hdHRlcjE1fVxuICogQHN1bW1hcnkgQSByZWFsIHRpbWUgamF2YXNjcmlwdCB3ZWJtIGVuY29kZXIgYmFzZWQgb24gYSBjYW52YXMgaGFjay5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIFdoYW1teVxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIHJlY29yZGVyID0gbmV3IFdoYW1teSgpLlZpZGVvKDE1KTtcbiAqIHJlY29yZGVyLmFkZChjb250ZXh0IHx8IGNhbnZhcyB8fCBkYXRhVVJMKTtcbiAqIHZhciBvdXRwdXQgPSByZWNvcmRlci5jb21waWxlKCk7XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKi9cblxudmFyIFdoYW1teSA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBhIG1vcmUgYWJzdHJhY3QtaXNoIEFQSVxuXG4gICAgZnVuY3Rpb24gV2hhbW15VmlkZW8oZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uIHx8IDE7XG4gICAgICAgIHRoaXMucXVhbGl0eSA9IDAuODtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXNzIENhbnZhcyBvciBDb250ZXh0IG9yIGltYWdlL3dlYnAoc3RyaW5nKSB0byB7QGxpbmsgV2hhbW15fSBlbmNvZGVyLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgV2hhbW15XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlciA9IG5ldyBXaGFtbXkoKS5WaWRlbygwLjgsIDEwMCk7XG4gICAgICogcmVjb3JkZXIuYWRkKGNhbnZhcyB8fCBjb250ZXh0IHx8ICdpbWFnZS93ZWJwJyk7XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZyYW1lIC0gQ2FudmFzIHx8IENvbnRleHQgfHwgaW1hZ2Uvd2VicFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFN0aWNrIGEgZHVyYXRpb24gKGluIG1pbGxpc2Vjb25kcylcbiAgICAgKi9cbiAgICBXaGFtbXlWaWRlby5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oZnJhbWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIGlmICgnY2FudmFzJyBpbiBmcmFtZSkgeyAvL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFxuICAgICAgICAgICAgZnJhbWUgPSBmcmFtZS5jYW52YXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJ3RvRGF0YVVSTCcgaW4gZnJhbWUpIHtcbiAgICAgICAgICAgIGZyYW1lID0gZnJhbWUudG9EYXRhVVJMKCdpbWFnZS93ZWJwJywgdGhpcy5xdWFsaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKC9eZGF0YTppbWFnZVxcL3dlYnA7YmFzZTY0LC9pZykudGVzdChmcmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93ICdJbnB1dCBtdXN0IGJlIGZvcm1hdHRlZCBwcm9wZXJseSBhcyBhIGJhc2U2NCBlbmNvZGVkIERhdGFVUkkgb2YgdHlwZSBpbWFnZS93ZWJwJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lcy5wdXNoKHtcbiAgICAgICAgICAgIGltYWdlOiBmcmFtZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiB8fCB0aGlzLmR1cmF0aW9uXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzSW5XZWJXb3JrZXIoX2Z1bmN0aW9uKSB7XG4gICAgICAgIHZhciBibG9iID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbX2Z1bmN0aW9uLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAndGhpcy5vbm1lc3NhZ2UgPSAgZnVuY3Rpb24gKGUpIHsnICsgX2Z1bmN0aW9uLm5hbWUgKyAnKGUuZGF0YSk7fSdcbiAgICAgICAgXSwge1xuICAgICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnXG4gICAgICAgIH0pKTtcblxuICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihibG9iKTtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3aGFtbXlJbldlYldvcmtlcihmcmFtZXMpIHtcbiAgICAgICAgZnVuY3Rpb24gQXJyYXlUb1dlYk0oZnJhbWVzKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGNoZWNrRnJhbWVzKGZyYW1lcyk7XG4gICAgICAgICAgICBpZiAoIWluZm8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjbHVzdGVyTWF4RHVyYXRpb24gPSAzMDAwMDtcblxuICAgICAgICAgICAgdmFyIEVCTUwgPSBbe1xuICAgICAgICAgICAgICAgICdpZCc6IDB4MWE0NWRmYTMsIC8vIEVCTUxcbiAgICAgICAgICAgICAgICAnZGF0YSc6IFt7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg0Mjg2IC8vIEVCTUxWZXJzaW9uXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICdpZCc6IDB4NDJmNyAvLyBFQk1MUmVhZFZlcnNpb25cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogNCxcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg0MmYyIC8vIEVCTUxNYXhJRExlbmd0aFxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiA4LFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDQyZjMgLy8gRUJNTE1heFNpemVMZW5ndGhcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogJ3dlYm0nLFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDQyODIgLy8gRG9jVHlwZVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAyLFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDQyODcgLy8gRG9jVHlwZVZlcnNpb25cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogMixcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg0Mjg1IC8vIERvY1R5cGVSZWFkVmVyc2lvblxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgJ2lkJzogMHgxODUzODA2NywgLy8gU2VnbWVudFxuICAgICAgICAgICAgICAgICdkYXRhJzogW3tcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHgxNTQ5YTk2NiwgLy8gSW5mb1xuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IDFlNiwgLy9kbyB0aGluZ3MgaW4gbWlsbGlzZWNzIChudW0gb2YgbmFub3NlY3MgZm9yIGR1cmF0aW9uIHNjYWxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHgyYWQ3YjEgLy8gVGltZWNvZGVTY2FsZVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6ICd3aGFtbXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg0ZDgwIC8vIE11eGluZ0FwcFxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6ICd3aGFtbXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg1NzQxIC8vIFdyaXRpbmdBcHBcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBkb3VibGVUb1N0cmluZyhpbmZvLmR1cmF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4NDQ4OSAvLyBEdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHgxNjU0YWU2YiwgLy8gVHJhY2tzXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4YWUsIC8vIFRyYWNrRW50cnlcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHhkNyAvLyBUcmFja051bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDczYzUgLy8gVHJhY2tVSURcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg5YyAvLyBGbGFnTGFjaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAndW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDIyYjU5YyAvLyBMYW5ndWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogJ1ZfVlA4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDg2IC8vIENvZGVjSURcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6ICdWUDgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4MjU4Njg4IC8vIENvZGVjTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDgzIC8vIFRyYWNrVHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4ZTAsIC8vIFZpZGVvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IGluZm8ud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4YjAgLy8gUGl4ZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBpbmZvLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHhiYSAvLyBQaXhlbEhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XTtcblxuICAgICAgICAgICAgLy9HZW5lcmF0ZSBjbHVzdGVycyAobWF4IGR1cmF0aW9uKVxuICAgICAgICAgICAgdmFyIGZyYW1lTnVtYmVyID0gMDtcbiAgICAgICAgICAgIHZhciBjbHVzdGVyVGltZWNvZGUgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGZyYW1lTnVtYmVyIDwgZnJhbWVzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsdXN0ZXJGcmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY2x1c3RlckR1cmF0aW9uID0gMDtcbiAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJGcmFtZXMucHVzaChmcmFtZXNbZnJhbWVOdW1iZXJdKTtcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlckR1cmF0aW9uICs9IGZyYW1lc1tmcmFtZU51bWJlcl0uZHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lTnVtYmVyKys7XG4gICAgICAgICAgICAgICAgfSB3aGlsZSAoZnJhbWVOdW1iZXIgPCBmcmFtZXMubGVuZ3RoICYmIGNsdXN0ZXJEdXJhdGlvbiA8IGNsdXN0ZXJNYXhEdXJhdGlvbik7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2x1c3RlckNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDFmNDNiNjc1LCAvLyBDbHVzdGVyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogZ2V0Q2x1c3RlckRhdGEoY2x1c3RlclRpbWVjb2RlLCBjbHVzdGVyQ291bnRlciwgY2x1c3RlckZyYW1lcylcbiAgICAgICAgICAgICAgICB9OyAvL0FkZCBjbHVzdGVyIHRvIHNlZ21lbnRcbiAgICAgICAgICAgICAgICBFQk1MWzFdLmRhdGEucHVzaChjbHVzdGVyKTtcbiAgICAgICAgICAgICAgICBjbHVzdGVyVGltZWNvZGUgKz0gY2x1c3RlckR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVFQk1MKEVCTUwpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2x1c3RlckRhdGEoY2x1c3RlclRpbWVjb2RlLCBjbHVzdGVyQ291bnRlciwgY2x1c3RlckZyYW1lcykge1xuICAgICAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICAgICAgJ2RhdGEnOiBjbHVzdGVyVGltZWNvZGUsXG4gICAgICAgICAgICAgICAgJ2lkJzogMHhlNyAvLyBUaW1lY29kZVxuICAgICAgICAgICAgfV0uY29uY2F0KGNsdXN0ZXJGcmFtZXMubWFwKGZ1bmN0aW9uKHdlYnApIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBtYWtlU2ltcGxlQmxvY2soe1xuICAgICAgICAgICAgICAgICAgICBkaXNjYXJkYWJsZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZnJhbWU6IHdlYnAuZGF0YS5zbGljZSg0KSxcbiAgICAgICAgICAgICAgICAgICAgaW52aXNpYmxlOiAwLFxuICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZTogMSxcbiAgICAgICAgICAgICAgICAgICAgbGFjaW5nOiAwLFxuICAgICAgICAgICAgICAgICAgICB0cmFja051bTogMSxcbiAgICAgICAgICAgICAgICAgICAgdGltZWNvZGU6IE1hdGgucm91bmQoY2x1c3RlckNvdW50ZXIpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2x1c3RlckNvdW50ZXIgKz0gd2VicC5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBibG9jayxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDB4YTNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3VtcyB0aGUgbGVuZ3RocyBvZiBhbGwgdGhlIGZyYW1lcyBhbmQgZ2V0cyB0aGUgZHVyYXRpb25cblxuICAgICAgICBmdW5jdGlvbiBjaGVja0ZyYW1lcyhmcmFtZXMpIHtcbiAgICAgICAgICAgIGlmICghZnJhbWVzWzBdKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBNYXliZSBXZWJQIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGJyb3dzZXIuJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHdpZHRoID0gZnJhbWVzWzBdLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGZyYW1lc1swXS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgZHVyYXRpb24gPSBmcmFtZXNbMF0uZHVyYXRpb247XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb24gKz0gZnJhbWVzW2ldLmR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbnVtVG9CdWZmZXIobnVtKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBbXTtcbiAgICAgICAgICAgIHdoaWxlIChudW0gPiAwKSB7XG4gICAgICAgICAgICAgICAgcGFydHMucHVzaChudW0gJiAweGZmKTtcbiAgICAgICAgICAgICAgICBudW0gPSBudW0gPj4gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShwYXJ0cy5yZXZlcnNlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3RyVG9CdWZmZXIoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoc3RyLnNwbGl0KCcnKS5tYXAoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBiaXRzVG9CdWZmZXIoYml0cykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgIHZhciBwYWQgPSAoYml0cy5sZW5ndGggJSA4KSA/IChuZXcgQXJyYXkoMSArIDggLSAoYml0cy5sZW5ndGggJSA4KSkpLmpvaW4oJzAnKSA6ICcnO1xuICAgICAgICAgICAgYml0cyA9IHBhZCArIGJpdHM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdHMubGVuZ3RoOyBpICs9IDgpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnB1c2gocGFyc2VJbnQoYml0cy5zdWJzdHIoaSwgOCksIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlRUJNTChqc29uKSB7XG4gICAgICAgICAgICB2YXIgZWJtbCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBqc29uW2ldLmRhdGE7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBnZW5lcmF0ZUVCTUwoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gYml0c1RvQnVmZmVyKGRhdGEudG9TdHJpbmcoMikpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHN0clRvQnVmZmVyKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBkYXRhLnNpemUgfHwgZGF0YS5ieXRlTGVuZ3RoIHx8IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciB6ZXJvZXMgPSBNYXRoLmNlaWwoTWF0aC5jZWlsKE1hdGgubG9nKGxlbikgLyBNYXRoLmxvZygyKSkgLyA4KTtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZVRvU3RyaW5nID0gbGVuLnRvU3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIHZhciBwYWRkZWQgPSAobmV3IEFycmF5KCh6ZXJvZXMgKiA3ICsgNyArIDEpIC0gc2l6ZVRvU3RyaW5nLmxlbmd0aCkpLmpvaW4oJzAnKSArIHNpemVUb1N0cmluZztcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IChuZXcgQXJyYXkoemVyb2VzKSkuam9pbignMCcpICsgJzEnICsgcGFkZGVkO1xuXG4gICAgICAgICAgICAgICAgZWJtbC5wdXNoKG51bVRvQnVmZmVyKGpzb25baV0uaWQpKTtcbiAgICAgICAgICAgICAgICBlYm1sLnB1c2goYml0c1RvQnVmZmVyKHNpemUpKTtcbiAgICAgICAgICAgICAgICBlYm1sLnB1c2goZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihlYm1sLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvL3dlYm0nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvQmluU3RyT2xkKGJpdHMpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gJyc7XG4gICAgICAgICAgICB2YXIgcGFkID0gKGJpdHMubGVuZ3RoICUgOCkgPyAobmV3IEFycmF5KDEgKyA4IC0gKGJpdHMubGVuZ3RoICUgOCkpKS5qb2luKCcwJykgOiAnJztcbiAgICAgICAgICAgIGJpdHMgPSBwYWQgKyBiaXRzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzLmxlbmd0aDsgaSArPSA4KSB7XG4gICAgICAgICAgICAgICAgZGF0YSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGJpdHMuc3Vic3RyKGksIDgpLCAyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VTaW1wbGVCbG9jayhkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZmxhZ3MgPSAwO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5rZXlmcmFtZSkge1xuICAgICAgICAgICAgICAgIGZsYWdzIHw9IDEyODtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRhdGEuaW52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgZmxhZ3MgfD0gODtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRhdGEubGFjaW5nKSB7XG4gICAgICAgICAgICAgICAgZmxhZ3MgfD0gKGRhdGEubGFjaW5nIDw8IDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5kaXNjYXJkYWJsZSkge1xuICAgICAgICAgICAgICAgIGZsYWdzIHw9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkYXRhLnRyYWNrTnVtID4gMTI3KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1RyYWNrTnVtYmVyID4gMTI3IG5vdCBzdXBwb3J0ZWQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3V0ID0gW2RhdGEudHJhY2tOdW0gfCAweDgwLCBkYXRhLnRpbWVjb2RlID4+IDgsIGRhdGEudGltZWNvZGUgJiAweGZmLCBmbGFnc10ubWFwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlKTtcbiAgICAgICAgICAgIH0pLmpvaW4oJycpICsgZGF0YS5mcmFtZTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlV2ViUChyaWZmKSB7XG4gICAgICAgICAgICB2YXIgVlA4ID0gcmlmZi5SSUZGWzBdLldFQlBbMF07XG5cbiAgICAgICAgICAgIHZhciBmcmFtZVN0YXJ0ID0gVlA4LmluZGV4T2YoJ1xceDlkXFx4MDFcXHgyYScpOyAvLyBBIFZQOCBrZXlmcmFtZSBzdGFydHMgd2l0aCB0aGUgMHg5ZDAxMmEgaGVhZGVyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYyA9IFtdOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY1tpXSA9IFZQOC5jaGFyQ29kZUF0KGZyYW1lU3RhcnQgKyAzICsgaSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3aWR0aCwgaGVpZ2h0LCB0bXA7XG5cbiAgICAgICAgICAgIC8vdGhlIGNvZGUgYmVsb3cgaXMgbGl0ZXJhbGx5IGNvcGllZCB2ZXJiYXRpbSBmcm9tIHRoZSBiaXRzdHJlYW0gc3BlY1xuICAgICAgICAgICAgdG1wID0gKGNbMV0gPDwgOCkgfCBjWzBdO1xuICAgICAgICAgICAgd2lkdGggPSB0bXAgJiAweDNGRkY7XG4gICAgICAgICAgICB0bXAgPSAoY1szXSA8PCA4KSB8IGNbMl07XG4gICAgICAgICAgICBoZWlnaHQgPSB0bXAgJiAweDNGRkY7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgICAgICBkYXRhOiBWUDgsXG4gICAgICAgICAgICAgICAgcmlmZjogcmlmZlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFN0ckxlbmd0aChzdHJpbmcsIG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZy5zdWJzdHIob2Zmc2V0ICsgNCwgNCkuc3BsaXQoJycpLm1hcChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVucGFkZGVkID0gaS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAobmV3IEFycmF5KDggLSB1bnBhZGRlZC5sZW5ndGggKyAxKSkuam9pbignMCcpICsgdW5wYWRkZWQ7XG4gICAgICAgICAgICB9KS5qb2luKCcnKSwgMik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXJzZVJJRkYoc3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHZhciBjaHVua3MgPSB7fTtcblxuICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IHN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBzdHJpbmcuc3Vic3RyKG9mZnNldCwgNCk7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGdldFN0ckxlbmd0aChzdHJpbmcsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBzdHJpbmcuc3Vic3RyKG9mZnNldCArIDQgKyA0LCBsZW4pO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0ICsgNCArIGxlbjtcbiAgICAgICAgICAgICAgICBjaHVua3NbaWRdID0gY2h1bmtzW2lkXSB8fCBbXTtcblxuICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gJ1JJRkYnIHx8IGlkID09PSAnTElTVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtzW2lkXS5wdXNoKHBhcnNlUklGRihkYXRhKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtzW2lkXS5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaHVua3M7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkb3VibGVUb1N0cmluZyhudW0pIHtcbiAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKFxuICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KChuZXcgRmxvYXQ2NEFycmF5KFtudW1dKSkuYnVmZmVyKSwgMCkubWFwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlKTtcbiAgICAgICAgICAgIH0pLnJldmVyc2UoKS5qb2luKCcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3ZWJtID0gbmV3IEFycmF5VG9XZWJNKGZyYW1lcy5tYXAoZnVuY3Rpb24oZnJhbWUpIHtcbiAgICAgICAgICAgIHZhciB3ZWJwID0gcGFyc2VXZWJQKHBhcnNlUklGRihhdG9iKGZyYW1lLmltYWdlLnNsaWNlKDIzKSkpKTtcbiAgICAgICAgICAgIHdlYnAuZHVyYXRpb24gPSBmcmFtZS5kdXJhdGlvbjtcbiAgICAgICAgICAgIHJldHVybiB3ZWJwO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgcG9zdE1lc3NhZ2Uod2VibSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBmcmFtZXMgaW4gV2ViTSBjb250YWluZXIuIEl0IHVzZXMgV2ViV29ya2ludm9rZSB0byBpbnZva2UgJ0FycmF5VG9XZWJNJyBtZXRob2QuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiwgdGhhdCBpcyB1c2VkIHRvIHBhc3MgcmVjb3JkZWQgYmxvYiBiYWNrIHRvIHRoZSBjYWxsZWUuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyID0gbmV3IFdoYW1teSgpLlZpZGVvKDAuOCwgMTAwKTtcbiAgICAgKiByZWNvcmRlci5jb21waWxlKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAvLyBibG9iLnNpemUgLSBibG9iLnR5cGVcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBXaGFtbXlWaWRlby5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB3ZWJXb3JrZXIgPSBwcm9jZXNzSW5XZWJXb3JrZXIod2hhbW15SW5XZWJXb3JrZXIpO1xuXG4gICAgICAgIHdlYldvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGV2ZW50LmRhdGEuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50LmRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHdlYldvcmtlci5wb3N0TWVzc2FnZSh0aGlzLmZyYW1lcyk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1vcmUgYWJzdHJhY3QtaXNoIEFQSS5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgV2hhbW15XG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZGVyID0gbmV3IFdoYW1teSgpLlZpZGVvKDAuOCwgMTAwKTtcbiAgICAgICAgICogQHBhcmFtIHs/bnVtYmVyfSBzcGVlZCAtIDAuOFxuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJ9IHF1YWxpdHkgLSAxMDBcbiAgICAgICAgICovXG4gICAgICAgIFZpZGVvOiBXaGFtbXlWaWRlb1xuICAgIH07XG59KSgpO1xuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuV2hhbW15ID0gV2hhbW15O1xufVxuXG4vLyBfX19fX19fX19fX19fXyAoaW5kZXhlZC1kYilcbi8vIERpc2tTdG9yYWdlLmpzXG5cbi8qKlxuICogRGlza1N0b3JhZ2UgaXMgYSBzdGFuZGFsb25lIG9iamVjdCB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIHN0b3JlIHJlY29yZGVkIGJsb2JzIGluIEluZGV4ZWREQiBzdG9yYWdlLlxuICogQHN1bW1hcnkgV3JpdGluZyBibG9icyBpbnRvIEluZGV4ZWREQi5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEBleGFtcGxlXG4gKiBEaXNrU3RvcmFnZS5TdG9yZSh7XG4gKiAgICAgYXVkaW9CbG9iOiB5b3VyQXVkaW9CbG9iLFxuICogICAgIHZpZGVvQmxvYjogeW91clZpZGVvQmxvYixcbiAqICAgICBnaWZCbG9iICA6IHlvdXJHaWZCbG9iXG4gKiB9KTtcbiAqIERpc2tTdG9yYWdlLkZldGNoKGZ1bmN0aW9uKGRhdGFVUkwsIHR5cGUpIHtcbiAqICAgICBpZih0eXBlID09PSAnYXVkaW9CbG9iJykgeyB9XG4gKiAgICAgaWYodHlwZSA9PT0gJ3ZpZGVvQmxvYicpIHsgfVxuICogICAgIGlmKHR5cGUgPT09ICdnaWZCbG9iJykgICB7IH1cbiAqIH0pO1xuICogLy8gRGlza1N0b3JhZ2UuZGF0YVN0b3JlTmFtZSA9ICdyZWNvcmRSVEMnO1xuICogLy8gRGlza1N0b3JhZ2Uub25FcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7IH07XG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBpbml0IC0gVGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgb25jZSB0byBpbml0aWFsaXplIEluZGV4ZWREQiBPYmplY3RTdG9yZS4gVGhvdWdoLCBpdCBpcyBhdXRvLXVzZWQgaW50ZXJuYWxseS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IEZldGNoIC0gVGhpcyBtZXRob2QgZmV0Y2hlcyBzdG9yZWQgYmxvYnMgZnJvbSBJbmRleGVkREIuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBTdG9yZSAtIFRoaXMgbWV0aG9kIHN0b3JlcyBibG9icyBpbiBJbmRleGVkREIuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBvbkVycm9yIC0gVGhpcyBmdW5jdGlvbiBpcyBpbnZva2VkIGZvciBhbnkga25vd24vdW5rbm93biBlcnJvci5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkYXRhU3RvcmVOYW1lIC0gTmFtZSBvZiB0aGUgT2JqZWN0U3RvcmUgY3JlYXRlZCBpbiBJbmRleGVkREIgc3RvcmFnZS5cbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqL1xuXG5cbnZhciBEaXNrU3RvcmFnZSA9IHtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBvbmNlIHRvIGluaXRpYWxpemUgSW5kZXhlZERCIE9iamVjdFN0b3JlLiBUaG91Z2gsIGl0IGlzIGF1dG8tdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgRGlza1N0b3JhZ2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIERpc2tTdG9yYWdlLmluaXQoKTtcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5kZXhlZERCID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgaW5kZXhlZERCLm9wZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbmRleGVkREIgQVBJIGFyZSBub3QgYXZhaWxhYmxlIGluIHRoaXMgYnJvd3Nlci4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYlZlcnNpb24gPSAxO1xuICAgICAgICB2YXIgZGJOYW1lID0gdGhpcy5kYk5hbWUgfHwgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cXC98OnwjfCV8XFwufFxcW3xcXF0vZywgJycpLFxuICAgICAgICAgICAgZGI7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oZGJOYW1lLCBkYlZlcnNpb24pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU9iamVjdFN0b3JlKGRhdGFCYXNlKSB7XG4gICAgICAgICAgICBkYXRhQmFzZS5jcmVhdGVPYmplY3RTdG9yZShzZWxmLmRhdGFTdG9yZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHV0SW5EQigpIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFtzZWxmLmRhdGFTdG9yZU5hbWVdLCAncmVhZHdyaXRlJyk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLnZpZGVvQmxvYikge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuZGF0YVN0b3JlTmFtZSkucHV0KHNlbGYudmlkZW9CbG9iLCAndmlkZW9CbG9iJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmdpZkJsb2IpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzZWxmLmRhdGFTdG9yZU5hbWUpLnB1dChzZWxmLmdpZkJsb2IsICdnaWZCbG9iJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmF1ZGlvQmxvYikge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuZGF0YVN0b3JlTmFtZSkucHV0KHNlbGYuYXVkaW9CbG9iLCAnYXVkaW9CbG9iJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEZyb21TdG9yZShwb3J0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuZGF0YVN0b3JlTmFtZSkuZ2V0KHBvcnRpb25OYW1lKS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhldmVudC50YXJnZXQucmVzdWx0LCBwb3J0aW9uTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnZXRGcm9tU3RvcmUoJ2F1ZGlvQmxvYicpO1xuICAgICAgICAgICAgZ2V0RnJvbVN0b3JlKCd2aWRlb0Jsb2InKTtcbiAgICAgICAgICAgIGdldEZyb21TdG9yZSgnZ2lmQmxvYicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gc2VsZi5vbkVycm9yO1xuXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkYiA9IHJlcXVlc3QucmVzdWx0O1xuICAgICAgICAgICAgZGIub25lcnJvciA9IHNlbGYub25FcnJvcjtcblxuICAgICAgICAgICAgaWYgKGRiLnNldFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGIudmVyc2lvbiAhPT0gZGJWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXRWZXJzaW9uID0gZGIuc2V0VmVyc2lvbihkYlZlcnNpb24pO1xuICAgICAgICAgICAgICAgICAgICBzZXRWZXJzaW9uLm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT2JqZWN0U3RvcmUoZGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHV0SW5EQigpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHB1dEluREIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHB1dEluREIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgY3JlYXRlT2JqZWN0U3RvcmUoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBmZXRjaGVzIHN0b3JlZCBibG9icyBmcm9tIEluZGV4ZWREQi5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIERpc2tTdG9yYWdlXG4gICAgICogQGludGVybmFsXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBEaXNrU3RvcmFnZS5GZXRjaChmdW5jdGlvbihkYXRhVVJMLCB0eXBlKSB7XG4gICAgICogICAgIGlmKHR5cGUgPT09ICdhdWRpb0Jsb2InKSB7IH1cbiAgICAgKiAgICAgaWYodHlwZSA9PT0gJ3ZpZGVvQmxvYicpIHsgfVxuICAgICAqICAgICBpZih0eXBlID09PSAnZ2lmQmxvYicpICAgeyB9XG4gICAgICogfSk7XG4gICAgICovXG4gICAgRmV0Y2g6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9yZXMgYmxvYnMgaW4gSW5kZXhlZERCLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgRGlza1N0b3JhZ2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIERpc2tTdG9yYWdlLlN0b3JlKHtcbiAgICAgKiAgICAgYXVkaW9CbG9iOiB5b3VyQXVkaW9CbG9iLFxuICAgICAqICAgICB2aWRlb0Jsb2I6IHlvdXJWaWRlb0Jsb2IsXG4gICAgICogICAgIGdpZkJsb2IgIDogeW91ckdpZkJsb2JcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBTdG9yZTogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgIHRoaXMuYXVkaW9CbG9iID0gY29uZmlnLmF1ZGlvQmxvYjtcbiAgICAgICAgdGhpcy52aWRlb0Jsb2IgPSBjb25maWcudmlkZW9CbG9iO1xuICAgICAgICB0aGlzLmdpZkJsb2IgPSBjb25maWcuZ2lmQmxvYjtcblxuICAgICAgICB0aGlzLmluaXQoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgaW52b2tlZCBmb3IgYW55IGtub3duL3Vua25vd24gZXJyb3IuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBEaXNrU3RvcmFnZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBleGFtcGxlXG4gICAgICogRGlza1N0b3JhZ2Uub25FcnJvciA9IGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgKiAgICAgYWxlcm90KCBKU09OLnN0cmluZ2lmeShlcnJvcikgKTtcbiAgICAgKiB9O1xuICAgICAqL1xuICAgIG9uRXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoSlNPTi5zdHJpbmdpZnkoZXJyb3IsIG51bGwsICdcXHQnKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkYXRhU3RvcmVOYW1lIC0gTmFtZSBvZiB0aGUgT2JqZWN0U3RvcmUgY3JlYXRlZCBpbiBJbmRleGVkREIgc3RvcmFnZS5cbiAgICAgKiBAbWVtYmVyb2YgRGlza1N0b3JhZ2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIERpc2tTdG9yYWdlLmRhdGFTdG9yZU5hbWUgPSAncmVjb3JkUlRDJztcbiAgICAgKi9cbiAgICBkYXRhU3RvcmVOYW1lOiAncmVjb3JkUlRDJyxcbiAgICBkYk5hbWU6IG51bGxcbn07XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5EaXNrU3RvcmFnZSA9IERpc2tTdG9yYWdlO1xufVxuXG4vLyBfX19fX19fX19fX19fX1xuLy8gR2lmUmVjb3JkZXIuanNcblxuLyoqXG4gKiBHaWZSZWNvcmRlciBpcyBzdGFuZGFsb25lIGNhbHNzIHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gcmVjb3JkIHZpZGVvIG9yIGNhbnZhcyBpbnRvIGFuaW1hdGVkIGdpZi5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIEdpZlJlY29yZGVyXG4gKiBAY2xhc3NcbiAqIEBleGFtcGxlXG4gKiB2YXIgcmVjb3JkZXIgPSBuZXcgR2lmUmVjb3JkZXIobWVkaWFTdHJlYW0gfHwgY2FudmFzIHx8IGNvbnRleHQsIHsgd2lkdGg6IDEyODAsIGhlaWdodDogNzIwLCBmcmFtZVJhdGU6IDIwMCwgcXVhbGl0eTogMTAgfSk7XG4gKiByZWNvcmRlci5yZWNvcmQoKTtcbiAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICogICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICogfSk7XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBtZWRpYVN0cmVhbSAtIE1lZGlhU3RyZWFtIG9iamVjdCBvciBIVE1MQ2FudmFzRWxlbWVudCBvciBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0ge2Rpc2FibGVMb2dzOnRydWUsIGluaXRDYWxsYmFjazogZnVuY3Rpb24sIHdpZHRoOiAzMjAsIGhlaWdodDogMjQwLCBmcmFtZVJhdGU6IDIwMCwgcXVhbGl0eTogMTB9XG4gKi9cblxuZnVuY3Rpb24gR2lmUmVjb3JkZXIobWVkaWFTdHJlYW0sIGNvbmZpZykge1xuICAgIGlmICh0eXBlb2YgR0lGRW5jb2RlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgJ1BsZWFzZSBsaW5rOiBodHRwczovL2Nkbi53ZWJydGMtZXhwZXJpbWVudC5jb20vZ2lmLXJlY29yZGVyLmpzJztcbiAgICB9XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cbiAgICB2YXIgaXNIVE1MT2JqZWN0ID0gbWVkaWFTdHJlYW0gaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfHwgbWVkaWFTdHJlYW0gaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudDtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlY29yZHMgTWVkaWFTdHJlYW0uXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBHaWZSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVjb3JkKCk7XG4gICAgICovXG4gICAgdGhpcy5yZWNvcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFpc0hUTUxPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICghY29uZmlnLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLndpZHRoID0gdmlkZW8ub2Zmc2V0V2lkdGggfHwgMzIwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlaWdodCA9IHZpZGVvLm9mZnNldEhlaWdodCB8fCAyNDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY29uZmlnLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnZpZGVvID0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbmZpZy5oZWlnaHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5jYW52YXMpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuY2FudmFzID0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbmZpZy5oZWlnaHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSBjb25maWcuY2FudmFzLndpZHRoIHx8IDMyMDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjb25maWcuY2FudmFzLmhlaWdodCB8fCAyNDA7XG5cbiAgICAgICAgICAgIHZpZGVvLndpZHRoID0gY29uZmlnLnZpZGVvLndpZHRoIHx8IDMyMDtcbiAgICAgICAgICAgIHZpZGVvLmhlaWdodCA9IGNvbmZpZy52aWRlby5oZWlnaHQgfHwgMjQwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXh0ZXJuYWwgbGlicmFyeSB0byByZWNvcmQgYXMgR0lGIGltYWdlc1xuICAgICAgICBnaWZFbmNvZGVyID0gbmV3IEdJRkVuY29kZXIoKTtcblxuICAgICAgICAvLyB2b2lkIHNldFJlcGVhdChpbnQgaXRlcikgXG4gICAgICAgIC8vIFNldHMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUgc2V0IG9mIEdJRiBmcmFtZXMgc2hvdWxkIGJlIHBsYXllZC4gXG4gICAgICAgIC8vIERlZmF1bHQgaXMgMTsgMCBtZWFucyBwbGF5IGluZGVmaW5pdGVseS5cbiAgICAgICAgZ2lmRW5jb2Rlci5zZXRSZXBlYXQoMCk7XG5cbiAgICAgICAgLy8gdm9pZCBzZXRGcmFtZVJhdGUoTnVtYmVyIGZwcykgXG4gICAgICAgIC8vIFNldHMgZnJhbWUgcmF0ZSBpbiBmcmFtZXMgcGVyIHNlY29uZC4gXG4gICAgICAgIC8vIEVxdWl2YWxlbnQgdG8gc2V0RGVsYXkoMTAwMC9mcHMpLlxuICAgICAgICAvLyBVc2luZyBcInNldERlbGF5XCIgaW5zdGVhZCBvZiBcInNldEZyYW1lUmF0ZVwiXG4gICAgICAgIGdpZkVuY29kZXIuc2V0RGVsYXkoY29uZmlnLmZyYW1lUmF0ZSB8fCAyMDApO1xuXG4gICAgICAgIC8vIHZvaWQgc2V0UXVhbGl0eShpbnQgcXVhbGl0eSkgXG4gICAgICAgIC8vIFNldHMgcXVhbGl0eSBvZiBjb2xvciBxdWFudGl6YXRpb24gKGNvbnZlcnNpb24gb2YgaW1hZ2VzIHRvIHRoZSBcbiAgICAgICAgLy8gbWF4aW11bSAyNTYgY29sb3JzIGFsbG93ZWQgYnkgdGhlIEdJRiBzcGVjaWZpY2F0aW9uKS4gXG4gICAgICAgIC8vIExvd2VyIHZhbHVlcyAobWluaW11bSA9IDEpIHByb2R1Y2UgYmV0dGVyIGNvbG9ycywgXG4gICAgICAgIC8vIGJ1dCBzbG93IHByb2Nlc3Npbmcgc2lnbmlmaWNhbnRseS4gMTAgaXMgdGhlIGRlZmF1bHQsIFxuICAgICAgICAvLyBhbmQgcHJvZHVjZXMgZ29vZCBjb2xvciBtYXBwaW5nIGF0IHJlYXNvbmFibGUgc3BlZWRzLiBcbiAgICAgICAgLy8gVmFsdWVzIGdyZWF0ZXIgdGhhbiAyMCBkbyBub3QgeWllbGQgc2lnbmlmaWNhbnQgaW1wcm92ZW1lbnRzIGluIHNwZWVkLlxuICAgICAgICBnaWZFbmNvZGVyLnNldFF1YWxpdHkoY29uZmlnLnF1YWxpdHkgfHwgMTApO1xuXG4gICAgICAgIC8vIEJvb2xlYW4gc3RhcnQoKSBcbiAgICAgICAgLy8gVGhpcyB3cml0ZXMgdGhlIEdJRiBIZWFkZXIgYW5kIHJldHVybnMgZmFsc2UgaWYgaXQgZmFpbHMuXG4gICAgICAgIGdpZkVuY29kZXIuc3RhcnQoKTtcblxuICAgICAgICBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBmdW5jdGlvbiBkcmF3VmlkZW9GcmFtZSh0aW1lKSB7XG4gICAgICAgICAgICBpZiAoaXNQYXVzZWRSZWNvcmRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhd1ZpZGVvRnJhbWUodGltZSk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdWaWRlb0ZyYW1lKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0RnJhbWVUaW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsYXN0RnJhbWVUaW1lID0gdGltZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gfjEwIGZwc1xuICAgICAgICAgICAgaWYgKHRpbWUgLSBsYXN0RnJhbWVUaW1lIDwgOTApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNIVE1MT2JqZWN0ICYmIHZpZGVvLnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIC8vIHZpYTogaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9XZWJSVEMtRXhwZXJpbWVudC9wdWxsLzMxNlxuICAgICAgICAgICAgICAgIC8vIFR3ZWFrIGZvciBBbmRyb2lkIENocm9tZVxuICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc0hUTUxPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5vbkdpZlByZXZpZXcpIHtcbiAgICAgICAgICAgICAgICBjb25maWcub25HaWZQcmV2aWV3KGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ2lmRW5jb2Rlci5hZGRGcmFtZShjb250ZXh0KTtcbiAgICAgICAgICAgIGxhc3RGcmFtZVRpbWUgPSB0aW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdWaWRlb0ZyYW1lKTtcblxuICAgICAgICBpZiAoY29uZmlnLmluaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uZmlnLmluaXRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0b3BzIHJlY29yZGluZyBNZWRpYVN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLCB0aGF0IGlzIHVzZWQgdG8gcGFzcyByZWNvcmRlZCBibG9iIGJhY2sgdG8gdGhlIGNhbGxlZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIEdpZlJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgdGhpcy5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChsYXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGxhc3RBbmltYXRpb25GcmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3BlcnR5IHtCbG9ifSBibG9iIC0gVGhlIHJlY29yZGVkIGJsb2Igb2JqZWN0LlxuICAgICAgICAgKiBAbWVtYmVyb2YgR2lmUmVjb3JkZXJcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbigpe1xuICAgICAgICAgKiAgICAgdmFyIGJsb2IgPSByZWNvcmRlci5ibG9iO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmxvYiA9IG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShnaWZFbmNvZGVyLnN0cmVhbSgpLmJpbildLCB7XG4gICAgICAgICAgICB0eXBlOiAnaW1hZ2UvZ2lmJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBidWc6IGZpbmQgYSB3YXkgdG8gY2xlYXIgb2xkIHJlY29yZGVkIGJsb2JzXG4gICAgICAgIGdpZkVuY29kZXIuc3RyZWFtKCkuYmluID0gW107XG4gICAgfTtcblxuICAgIHZhciBpc1BhdXNlZFJlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGF1c2VzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIEdpZlJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5wYXVzZSgpO1xuICAgICAqL1xuICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaXNQYXVzZWRSZWNvcmRpbmcgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXN1bWVzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIEdpZlJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZXN1bWUoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1BhdXNlZFJlY29yZGluZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXNldHMgY3VycmVudGx5IHJlY29yZGVkIGRhdGEuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBHaWZSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFyUmVjb3JkZWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghZ2lmRW5jb2Rlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuXG4gICAgICAgIGdpZkVuY29kZXIuc3RyZWFtKCkuYmluID0gW107XG4gICAgfTtcblxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgaWYgKGlzSFRNTE9iamVjdCkge1xuICAgICAgICBpZiAobWVkaWFTdHJlYW0gaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSBtZWRpYVN0cmVhbTtcbiAgICAgICAgICAgIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICB9IGVsc2UgaWYgKG1lZGlhU3RyZWFtIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSBtZWRpYVN0cmVhbS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgY2FudmFzID0gbWVkaWFTdHJlYW07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzSFRNTE9iamVjdCkge1xuICAgICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICB2aWRlby5tdXRlZCA9IHRydWU7XG4gICAgICAgIHZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTtcblxuICAgICAgICBpZiAodHlwZW9mIHZpZGVvLnNyY09iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHZpZGVvLnNyY09iamVjdCA9IG1lZGlhU3RyZWFtO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChtZWRpYVN0cmVhbSk7XG4gICAgICAgIH1cblxuICAgICAgICB2aWRlby5wbGF5KCk7XG4gICAgfVxuXG4gICAgdmFyIGxhc3RBbmltYXRpb25GcmFtZSA9IG51bGw7XG4gICAgdmFyIHN0YXJ0VGltZSwgZW5kVGltZSwgbGFzdEZyYW1lVGltZTtcblxuICAgIHZhciBnaWZFbmNvZGVyO1xufVxuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuR2lmUmVjb3JkZXIgPSBHaWZSZWNvcmRlcjtcbn1cblxuLy8gX19fX19fX19fX19fX19fX19fX19fX1xuLy8gTXVsdGlTdHJlYW1SZWNvcmRlci5qc1xuXG4vKlxuICogVmlkZW8gY29uZmVyZW5jZSByZWNvcmRpbmcsIHVzaW5nIGNhcHR1cmVTdHJlYW0gQVBJIGFsb25nIHdpdGggV2ViQXVkaW8gYW5kIENhbnZhczJEIEFQSS5cbiAqL1xuXG4vKipcbiAqIE11bHRpU3RyZWFtUmVjb3JkZXIgY2FuIHJlY29yZCBtdWx0aXBsZSB2aWRlb3MgaW4gc2luZ2xlIGNvbnRhaW5lci5cbiAqIEBzdW1tYXJ5IE11bHRpLXZpZGVvcyByZWNvcmRlci5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIE11bHRpU3RyZWFtUmVjb3JkZXJcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciBvcHRpb25zID0ge1xuICogICAgIG1pbWVUeXBlOiAndmlkZW8vd2VibSdcbiAqIH1cbiAqIHZhciByZWNvcmRlciA9IG5ldyBNdWx0aVN0cmVhbVJlY29yZGVyKEFycmF5T2ZNZWRpYVN0cmVhbXMsIG9wdGlvbnMpO1xuICogcmVjb3JkZXIucmVjb3JkKCk7XG4gKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICpcbiAqICAgICAvLyBvclxuICogICAgIHZhciBibG9iID0gcmVjb3JkZXIuYmxvYjtcbiAqIH0pO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtNZWRpYVN0cmVhbXN9IG1lZGlhU3RyZWFtcyAtIEFycmF5IG9mIE1lZGlhU3RyZWFtcy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB7ZGlzYWJsZUxvZ3M6dHJ1ZSwgZnJhbWVJbnRlcnZhbDogMTAsIG1pbWVUeXBlOiBcInZpZGVvL3dlYm1cIn1cbiAqL1xuXG5mdW5jdGlvbiBNdWx0aVN0cmVhbVJlY29yZGVyKGFycmF5T2ZNZWRpYVN0cmVhbXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7XG4gICAgICAgIG1pbWVUeXBlOiAndmlkZW8vd2VibScsXG4gICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgICB3aWR0aDogMzIwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNDBcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIW9wdGlvbnMuZnJhbWVJbnRlcnZhbCkge1xuICAgICAgICBvcHRpb25zLmZyYW1lSW50ZXJ2YWwgPSAxMDtcbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMudmlkZW8pIHtcbiAgICAgICAgb3B0aW9ucy52aWRlbyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy52aWRlby53aWR0aCkge1xuICAgICAgICBvcHRpb25zLnZpZGVvLndpZHRoID0gMzIwO1xuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy52aWRlby5oZWlnaHQpIHtcbiAgICAgICAgb3B0aW9ucy52aWRlby5oZWlnaHQgPSAyNDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVjb3JkcyBhbGwgTWVkaWFTdHJlYW1zLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTXVsdGlTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVjb3JkKCk7XG4gICAgICovXG4gICAgdGhpcy5yZWNvcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaXNTdG9wcGVkUmVjb3JkaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBtaXhlZFZpZGVvU3RyZWFtID0gZ2V0TWl4ZWRWaWRlb1N0cmVhbSgpO1xuXG4gICAgICAgIHZhciBtaXhlZEF1ZGlvU3RyZWFtID0gZ2V0TWl4ZWRBdWRpb1N0cmVhbSgpO1xuICAgICAgICBpZiAobWl4ZWRBdWRpb1N0cmVhbSkge1xuICAgICAgICAgICAgbWl4ZWRBdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICAgICAgICBtaXhlZFZpZGVvU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucHJldmlld1N0cmVhbSAmJiB0eXBlb2Ygb3B0aW9ucy5wcmV2aWV3U3RyZWFtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvcHRpb25zLnByZXZpZXdTdHJlYW0obWl4ZWRWaWRlb1N0cmVhbSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhU3RyZWFtUmVjb3JkZXIobWl4ZWRWaWRlb1N0cmVhbSwge1xuICAgICAgICAgICAgbWltZVR5cGU6ICd2aWRlby93ZWJtJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjYW52YXMud2lkdGggPSB2aWRlb3MubGVuZ3RoID4gMSA/IHZpZGVvc1swXS53aWR0aCAqIDIgOiB2aWRlb3NbMF0ud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWRlb3MubGVuZ3RoID4gMiA/IHZpZGVvc1swXS5oZWlnaHQgKiAyIDogdmlkZW9zWzBdLmhlaWdodDtcblxuICAgICAgICBkcmF3VmlkZW9zVG9DYW52YXMoKTtcblxuICAgICAgICBtZWRpYVJlY29yZGVyLnJlY29yZCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9wcyByZWNvcmRpbmcgTWVkaWFTdHJlYW0uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiwgdGhhdCBpcyB1c2VkIHRvIHBhc3MgcmVjb3JkZWQgYmxvYiBiYWNrIHRvIHRoZSBjYWxsZWUuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNdWx0aVN0cmVhbVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpc1N0b3BwZWRSZWNvcmRpbmcgPSB0cnVlO1xuXG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGJsb2IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0TWl4ZWRBdWRpb1N0cmVhbSgpIHtcbiAgICAgICAgLy8gdmlhOiBAcGVocnNvbnNcbiAgICAgICAgdmFyIGF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgdmFyIGF1ZGlvU291cmNlcyA9IFtdO1xuXG4gICAgICAgIHZhciBhdWRpb1RyYWNrc0xlbmd0aCA9IDA7XG4gICAgICAgIGFycmF5T2ZNZWRpYVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIGlmICghc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhdWRpb1RyYWNrc0xlbmd0aCsrO1xuXG4gICAgICAgICAgICBhdWRpb1NvdXJjZXMucHVzaChhdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghYXVkaW9UcmFja3NMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhdWRpb2lEZXN0aW5hdGlvbiA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7XG4gICAgICAgIGF1ZGlvU291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGF1ZGlvU291cmNlKSB7XG4gICAgICAgICAgICBhdWRpb1NvdXJjZS5jb25uZWN0KGF1ZGlvaURlc3RpbmF0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhdWRpb2lEZXN0aW5hdGlvbi5zdHJlYW07XG4gICAgfVxuXG4gICAgdmFyIHZpZGVvcyA9IFtdO1xuICAgIHZhciBtZWRpYVJlY29yZGVyO1xuXG4gICAgZnVuY3Rpb24gZ2V0TWl4ZWRWaWRlb1N0cmVhbSgpIHtcbiAgICAgICAgLy8gdmlhOiBAYWRyaWFuLWJlclxuICAgICAgICBhcnJheU9mTWVkaWFTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZpZGVvID0gZ2V0VmlkZW8oc3RyZWFtKTtcbiAgICAgICAgICAgIHZpZGVvLndpZHRoID0gb3B0aW9ucy52aWRlby53aWR0aDtcbiAgICAgICAgICAgIHZpZGVvLmhlaWdodCA9IG9wdGlvbnMudmlkZW8uaGVpZ2h0O1xuICAgICAgICAgICAgdmlkZW9zLnB1c2godmlkZW8pO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY2FwdHVyZWRTdHJlYW07XG5cbiAgICAgICAgaWYgKCdjYXB0dXJlU3RyZWFtJyBpbiBjYW52YXMpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkU3RyZWFtID0gY2FudmFzLmNhcHR1cmVTdHJlYW0oKTtcbiAgICAgICAgfSBlbHNlIGlmICgnbW96Q2FwdHVyZVN0cmVhbScgaW4gY2FudmFzKSB7XG4gICAgICAgICAgICBjYXB0dXJlZFN0cmVhbSA9IGNhbnZhcy5tb3pDYXB0dXJlU3RyZWFtKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NhcHR1cmVTdHJlYW0gQVBJIHJlcXVpcmVzIHRoaXMgZmxhZzogY2hyb21lOi8vZmxhZ3MvI2VuYWJsZS1leHBlcmltZW50YWwtd2ViLXBsYXRmb3JtLWZlYXR1cmVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FwdHVyZWRTdHJlYW07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VmlkZW8oc3RyZWFtKSB7XG4gICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcbiAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgICByZXR1cm4gdmlkZW87XG4gICAgfVxuXG4gICAgdmFyIGlzU3RvcHBlZFJlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gZHJhd1ZpZGVvc1RvQ2FudmFzKCkge1xuICAgICAgICBpZiAoaXNTdG9wcGVkUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmlkZW9zTGVuZ3RoID0gdmlkZW9zLmxlbmd0aDtcbiAgICAgICAgdmlkZW9zLmZvckVhY2goZnVuY3Rpb24odmlkZW8sIGlkeCkge1xuICAgICAgICAgICAgaWYgKHZpZGVvc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCB2aWRlby53aWR0aCwgdmlkZW8uaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2aWRlb3NMZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB4ID0gdmlkZW8ud2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIHgsIHksIHZpZGVvLndpZHRoLCB2aWRlby5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZpZGVvc0xlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSB2aWRlby53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB2aWRlby5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIHgsIHksIHZpZGVvLndpZHRoLCB2aWRlby5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZpZGVvc0xlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSB2aWRlby53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB2aWRlby5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICB4ID0gdmlkZW8ud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB2aWRlby5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIHgsIHksIHZpZGVvLndpZHRoLCB2aWRlby5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0VGltZW91dChkcmF3VmlkZW9zVG9DYW52YXMsIG9wdGlvbnMuZnJhbWVJbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBjYW52YXMuc3R5bGUgPSAnb3BhY2l0eTowO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6LTE7dG9wOiAtMTAwMDAwMDAwO2xlZnQ6LTEwMDAwMDAwMDA7JztcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHBhdXNlcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNdWx0aVN0cmVhbVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5wYXVzZSgpO1xuICAgICAqL1xuICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIucGF1c2UoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXN1bWVzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE11bHRpU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlc3VtZSgpO1xuICAgICAqL1xuICAgIHRoaXMucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc2V0cyBjdXJyZW50bHkgcmVjb3JkZWQgZGF0YS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE11bHRpU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICovXG4gICAgdGhpcy5jbGVhclJlY29yZGVkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2aWRlb3MgPSBbXTtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgaXNTdG9wcGVkUmVjb3JkaW5nID0gZmFsc2U7XG4gICAgICAgIG1lZGlhUmVjb3JkZXIgPSBudWxsO1xuXG4gICAgICAgIGlmIChtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuTXVsdGlTdHJlYW1SZWNvcmRlciA9IE11bHRpU3RyZWFtUmVjb3JkZXI7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5leHBvcnQgY29uc3QgdHJhbnNwYXJlbnQgPSBuZXcgQ29sb3IoMCwgMCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoQ29sb3JOYW1lKHBhdGgpIHtcbiAgbGV0IGhleENvbG9yID0gcGF0aC5wYXJlbnQuZGF0YS5vcmlnaW5hbENvbG9yO1xuICAvLyBsZXQgaGV4Q29sb3IgPSBwYXRoLnN0cm9rZUNvbG9yLnRvQ1NTKHRydWUpOyAvLyBUaGlzIGZhaWxzIHdoZW4gaXQncyBhIGdyYWRpZW50XG4gIHJldHVybiBnZXRDb2xvck5hbWUoaGV4Q29sb3IpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sb3JOYW1lKGNvbG9yKSB7XG4gIGlmIChjb2xvcikge1xuICAgIGNvbG9yID0gY29sb3IudG9VcHBlckNhc2UoKTsgLy8gbWFrZSBzdXJlXG4gICAgaWYgKGNvbG9yIGluIGNvbmZpZy5wYWxldHRlLmNvbG9yTmFtZXMpIHtcbiAgICAgIHJldHVybiBjb25maWcucGFsZXR0ZS5jb2xvck5hbWVzW2NvbG9yXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21Qb3AoKSB7XG4gIGNvbnN0IHBvcHMgPSBjb25maWcucGFsZXR0ZS5wb3BzO1xuICByZXR1cm4gcG9wc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3BzLmxlbmd0aCldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5kZXhlZFBvcENvbG9yKGluZGV4KSB7XG4gIGNvbnN0IHBvcHMgPSBjb25maWcucGFsZXR0ZS5wb3BzO1xuICByZXR1cm4gcG9wc1tpbmRleCAlIHBvcHMubGVuZ3RoXTtcbn1cbiIsIihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuU2hhcGVEZXRlY3RvciA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcblxuICB2YXIgX25iU2FtcGxlUG9pbnRzO1xuICB2YXIgX3NxdWFyZVNpemUgPSAyNTA7XG4gIHZhciBfcGhpID0gMC41ICogKC0xLjAgKyBNYXRoLnNxcnQoNS4wKSk7XG4gIHZhciBfYW5nbGVSYW5nZSA9IGRlZzJSYWQoNDUuMCk7XG4gIHZhciBfYW5nbGVQcmVjaXNpb24gPSBkZWcyUmFkKDIuMCk7XG4gIHZhciBfaGFsZkRpYWdvbmFsID0gTWF0aC5zcXJ0KF9zcXVhcmVTaXplICogX3NxdWFyZVNpemUgKyBfc3F1YXJlU2l6ZSAqIF9zcXVhcmVTaXplKSAqIDAuNTtcbiAgdmFyIF9vcmlnaW4gPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgZnVuY3Rpb24gZGVnMlJhZChkKSB7XG5cbiAgICByZXR1cm4gZCAqIE1hdGguUEkgLyAxODAuMDtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXREaXN0YW5jZShhLCBiKSB7XG5cbiAgICB2YXIgZHggPSBiLnggLSBhLng7XG4gICAgdmFyIGR5ID0gYi55IC0gYS55O1xuXG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gU3Ryb2tlKHBvaW50cywgbmFtZSkge1xuXG4gICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnByb2Nlc3NTdHJva2UoKTtcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnByb2Nlc3NTdHJva2UgPSBmdW5jdGlvbigpIHtcblxuICAgIHRoaXMucG9pbnRzID0gdGhpcy5yZXNhbXBsZSgpO1xuICAgIHRoaXMuc2V0Q2VudHJvaWQoKTtcbiAgICB0aGlzLnBvaW50cyA9IHRoaXMucm90YXRlQnkoLXRoaXMuaW5kaWNhdGl2ZUFuZ2xlKCkpO1xuICAgIHRoaXMucG9pbnRzID0gdGhpcy5zY2FsZVRvU3F1YXJlKCk7XG4gICAgdGhpcy5zZXRDZW50cm9pZCgpO1xuICAgIHRoaXMucG9pbnRzID0gdGhpcy50cmFuc2xhdGVUb09yaWdpbigpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5yZXNhbXBsZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGxvY2FsRGlzdGFuY2UsIHE7XG4gICAgdmFyIGludGVydmFsID0gdGhpcy5zdHJva2VMZW5ndGgoKSAvIChfbmJTYW1wbGVQb2ludHMgLSAxKTtcbiAgICB2YXIgZGlzdGFuY2UgPSAwLjA7XG4gICAgdmFyIG5ld1BvaW50cyA9IFt0aGlzLnBvaW50c1swXV07XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsb2NhbERpc3RhbmNlID0gZ2V0RGlzdGFuY2UodGhpcy5wb2ludHNbaSAtIDFdLCB0aGlzLnBvaW50c1tpXSk7XG5cbiAgICAgIGlmIChkaXN0YW5jZSArIGxvY2FsRGlzdGFuY2UgPj0gaW50ZXJ2YWwpIHtcbiAgICAgICAgcSA9IHtcbiAgICAgICAgICB4OiB0aGlzLnBvaW50c1tpIC0gMV0ueCArICgoaW50ZXJ2YWwgLSBkaXN0YW5jZSkgLyBsb2NhbERpc3RhbmNlKSAqICh0aGlzLnBvaW50c1tpXS54IC0gdGhpcy5wb2ludHNbaSAtIDFdLngpLFxuICAgICAgICAgIHk6IHRoaXMucG9pbnRzW2kgLSAxXS55ICsgKChpbnRlcnZhbCAtIGRpc3RhbmNlKSAvIGxvY2FsRGlzdGFuY2UpICogKHRoaXMucG9pbnRzW2ldLnkgLSB0aGlzLnBvaW50c1tpIC0gMV0ueSlcbiAgICAgICAgfTtcblxuICAgICAgICBuZXdQb2ludHMucHVzaChxKTtcbiAgICAgICAgdGhpcy5wb2ludHMuc3BsaWNlKGksIDAsIHEpO1xuICAgICAgICBkaXN0YW5jZSA9IDAuMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3RhbmNlICs9IGxvY2FsRGlzdGFuY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld1BvaW50cy5sZW5ndGggPT09IF9uYlNhbXBsZVBvaW50cyAtIDEpIHtcbiAgICAgIG5ld1BvaW50cy5wdXNoKHRoaXMucG9pbnRzW3RoaXMucG9pbnRzLmxlbmd0aCAtIDFdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3UG9pbnRzO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUucm90YXRlQnkgPSBmdW5jdGlvbihhbmdsZSkge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgbmV3UG9pbnRzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBuZXdQb2ludHMucHVzaCh7XG4gICAgICAgIHg6IChwb2ludC54IC0gdGhpcy5jLngpICogY29zIC0gKHBvaW50LnkgLSB0aGlzLmMueSkgKiBzaW4gKyB0aGlzLmMueCxcbiAgICAgICAgeTogKHBvaW50LnggLSB0aGlzLmMueCkgKiBzaW4gKyAocG9pbnQueSAtIHRoaXMuYy55KSAqIGNvcyArIHRoaXMuYy55XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3UG9pbnRzO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuc2NhbGVUb1NxdWFyZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBuZXdQb2ludHMgPSBbXVxuICAgIHZhciBib3ggPSB7XG4gICAgICBtaW5YOiArSW5maW5pdHksXG4gICAgICBtYXhYOiAtSW5maW5pdHksXG4gICAgICBtaW5ZOiArSW5maW5pdHksXG4gICAgICBtYXhZOiAtSW5maW5pdHlcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgcG9pbnQgPSB0aGlzLnBvaW50c1tpXTtcblxuICAgICAgYm94Lm1pblggPSBNYXRoLm1pbihib3gubWluWCwgcG9pbnQueCk7XG4gICAgICBib3gubWluWSA9IE1hdGgubWluKGJveC5taW5ZLCBwb2ludC55KTtcbiAgICAgIGJveC5tYXhYID0gTWF0aC5tYXgoYm94Lm1heFgsIHBvaW50LngpO1xuICAgICAgYm94Lm1heFkgPSBNYXRoLm1heChib3gubWF4WSwgcG9pbnQueSk7XG4gICAgfVxuXG4gICAgYm94LndpZHRoID0gYm94Lm1heFggLSBib3gubWluWDtcbiAgICBib3guaGVpZ2h0ID0gYm94Lm1heFkgLSBib3gubWluWTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgcG9pbnQgPSB0aGlzLnBvaW50c1tpXTtcblxuICAgICAgbmV3UG9pbnRzLnB1c2goe1xuICAgICAgICB4OiBwb2ludC54ICogKF9zcXVhcmVTaXplIC8gYm94LndpZHRoKSxcbiAgICAgICAgeTogcG9pbnQueSAqIChfc3F1YXJlU2l6ZSAvIGJveC5oZWlnaHQpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3UG9pbnRzO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUudHJhbnNsYXRlVG9PcmlnaW4gPSBmdW5jdGlvbihwb2ludHMpIHtcblxuICAgIHZhciBwb2ludDtcbiAgICB2YXIgbmV3UG9pbnRzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBuZXdQb2ludHMucHVzaCh7XG4gICAgICAgIHg6IHBvaW50LnggKyBfb3JpZ2luLnggLSB0aGlzLmMueCxcbiAgICAgICAgeTogcG9pbnQueSArIF9vcmlnaW4ueSAtIHRoaXMuYy55XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3UG9pbnRzO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuc2V0Q2VudHJvaWQgPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBwb2ludDtcbiAgICB0aGlzLmMgPSB7XG4gICAgICB4OiAwLjAsXG4gICAgICB5OiAwLjBcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgcG9pbnQgPSB0aGlzLnBvaW50c1tpXTtcblxuICAgICAgdGhpcy5jLnggKz0gcG9pbnQueDtcbiAgICAgIHRoaXMuYy55ICs9IHBvaW50Lnk7XG4gICAgfVxuXG4gICAgdGhpcy5jLnggLz0gdGhpcy5wb2ludHMubGVuZ3RoO1xuICAgIHRoaXMuYy55IC89IHRoaXMucG9pbnRzLmxlbmd0aDtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuaW5kaWNhdGl2ZUFuZ2xlID0gZnVuY3Rpb24oKSB7XG5cbiAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLmMueSAtIHRoaXMucG9pbnRzWzBdLnksIHRoaXMuYy54IC0gdGhpcy5wb2ludHNbMF0ueCk7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zdHJva2VMZW5ndGggPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBkID0gMC4wO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgZCArPSBnZXREaXN0YW5jZSh0aGlzLnBvaW50c1tpIC0gMV0sIHRoaXMucG9pbnRzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZDtcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLmRpc3RhbmNlQXRCZXN0QW5nbGUgPSBmdW5jdGlvbihwYXR0ZXJuKSB7XG5cbiAgICB2YXIgYSA9IC1fYW5nbGVSYW5nZTtcbiAgICB2YXIgYiA9IF9hbmdsZVJhbmdlO1xuICAgIHZhciB4MSA9IF9waGkgKiBhICsgKDEuMCAtIF9waGkpICogYjtcbiAgICB2YXIgZjEgPSB0aGlzLmRpc3RhbmNlQXRBbmdsZShwYXR0ZXJuLCB4MSk7XG4gICAgdmFyIHgyID0gKDEuMCAtIF9waGkpICogYSArIF9waGkgKiBiO1xuICAgIHZhciBmMiA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgyKTtcblxuICAgIHdoaWxlIChNYXRoLmFicyhiIC0gYSkgPiBfYW5nbGVQcmVjaXNpb24pIHtcblxuICAgICAgaWYgKGYxIDwgZjIpIHtcbiAgICAgICAgYiA9IHgyO1xuICAgICAgICB4MiA9IHgxO1xuICAgICAgICBmMiA9IGYxO1xuICAgICAgICB4MSA9IF9waGkgKiBhICsgKDEuMCAtIF9waGkpICogYjtcbiAgICAgICAgZjEgPSB0aGlzLmRpc3RhbmNlQXRBbmdsZShwYXR0ZXJuLCB4MSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhID0geDE7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIGYxID0gZjI7XG4gICAgICAgIHgyID0gKDEuMCAtIF9waGkpICogYSArIF9waGkgKiBiO1xuICAgICAgICBmMiA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5taW4oZjEsIGYyKTtcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLmRpc3RhbmNlQXRBbmdsZSA9IGZ1bmN0aW9uKHBhdHRlcm4sIGFuZ2xlKSB7XG5cbiAgICB2YXIgc3Ryb2tlUG9pbnRzID0gdGhpcy5yb3RhdGVCeShhbmdsZSk7XG4gICAgdmFyIHBhdHRlcm5Qb2ludHMgPSBwYXR0ZXJuLnBvaW50cztcbiAgICB2YXIgZCA9IDAuMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Ryb2tlUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkICs9IGdldERpc3RhbmNlKHN0cm9rZVBvaW50c1tpXSwgcGF0dGVyblBvaW50c1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGQgLyBzdHJva2VQb2ludHMubGVuZ3RoO1xuICB9O1xuXG4gIGZ1bmN0aW9uIFNoYXBlRGV0ZWN0b3IocGF0dGVybnMsIG9wdGlvbnMpIHtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMudGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGQgfHwgMDtcbiAgICBfbmJTYW1wbGVQb2ludHMgPSBvcHRpb25zLm5iU2FtcGxlUG9pbnRzIHx8IDY0O1xuXG4gICAgdGhpcy5wYXR0ZXJucyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXR0ZXJucy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5sZWFybihwYXR0ZXJuc1tpXS5uYW1lLCBwYXR0ZXJuc1tpXS5wb2ludHMpO1xuICAgIH1cbiAgfVxuXG4gIFNoYXBlRGV0ZWN0b3IuZGVmYXVsdFNoYXBlcyA9IFtcbiAgICB7XG4gICAgICBwb2ludHM6IFt7IHg6IDAsIHk6IDUwIH0sIHsgeDogMTAwLCB5OiA1MCB9XSxcbiAgICAgIG5hbWU6IFwibGluZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7IHg6IDUwLCB5OiAwIH0sIHsgeDogNTAsIHk6IDEwMCB9XSxcbiAgICAgIG5hbWU6IFwibGluZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7IHg6IDAsIHk6IDAgfSwgeyB4OiAxMDAsIHk6IDEwMCB9XSxcbiAgICAgIG5hbWU6IFwibGluZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDg5LFwieVwiOiAxNjR9LHtcInhcIjogOTAsXCJ5XCI6IDE2Mn0se1wieFwiOiA5MixcInlcIjogMTYyfSx7XCJ4XCI6IDk0LFwieVwiOiAxNjR9LHtcInhcIjogOTUsXCJ5XCI6IDE2Nn0se1wieFwiOiA5NixcInlcIjogMTY5fSx7XCJ4XCI6IDk3LFwieVwiOiAxNzF9LHtcInhcIjogOTksXCJ5XCI6IDE3NX0se1wieFwiOiAxMDEsXCJ5XCI6IDE3OH0se1wieFwiOiAxMDMsXCJ5XCI6IDE4Mn0se1wieFwiOiAxMDYsXCJ5XCI6IDE4OX0se1wieFwiOiAxMDgsXCJ5XCI6IDE5NH0se1wieFwiOiAxMTEsXCJ5XCI6IDE5OX0se1wieFwiOiAxMTQsXCJ5XCI6IDIwNH0se1wieFwiOiAxMTcsXCJ5XCI6IDIwOX0se1wieFwiOiAxMTksXCJ5XCI6IDIxNH0se1wieFwiOiAxMjIsXCJ5XCI6IDIxOH0se1wieFwiOiAxMjQsXCJ5XCI6IDIyMn0se1wieFwiOiAxMjYsXCJ5XCI6IDIyNX0se1wieFwiOiAxMjgsXCJ5XCI6IDIyOH0se1wieFwiOiAxMzAsXCJ5XCI6IDIyOX0se1wieFwiOiAxMzMsXCJ5XCI6IDIzM30se1wieFwiOiAxMzQsXCJ5XCI6IDIzNn0se1wieFwiOiAxMzYsXCJ5XCI6IDIzOX0se1wieFwiOiAxMzgsXCJ5XCI6IDI0MH0se1wieFwiOiAxMzksXCJ5XCI6IDI0Mn0se1wieFwiOiAxNDAsXCJ5XCI6IDI0NH0se1wieFwiOiAxNDIsXCJ5XCI6IDI0Mn0se1wieFwiOiAxNDIsXCJ5XCI6IDI0MH0se1wieFwiOiAxNDIsXCJ5XCI6IDIzN30se1wieFwiOiAxNDMsXCJ5XCI6IDIzNX0se1wieFwiOiAxNDMsXCJ5XCI6IDIzM30se1wieFwiOiAxNDUsXCJ5XCI6IDIyOX0se1wieFwiOiAxNDYsXCJ5XCI6IDIyNn0se1wieFwiOiAxNDgsXCJ5XCI6IDIxN30se1wieFwiOiAxNDksXCJ5XCI6IDIwOH0se1wieFwiOiAxNDksXCJ5XCI6IDIwNX0se1wieFwiOiAxNTEsXCJ5XCI6IDE5Nn0se1wieFwiOiAxNTEsXCJ5XCI6IDE5M30se1wieFwiOiAxNTMsXCJ5XCI6IDE4Mn0se1wieFwiOiAxNTUsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNTcsXCJ5XCI6IDE2NX0se1wieFwiOiAxNTksXCJ5XCI6IDE2MH0se1wieFwiOiAxNjIsXCJ5XCI6IDE1NX0se1wieFwiOiAxNjQsXCJ5XCI6IDE1MH0se1wieFwiOiAxNjUsXCJ5XCI6IDE0OH0se1wieFwiOiAxNjYsXCJ5XCI6IDE0Nn1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogOTEsXCJ5XCI6IDE4NX0se1wieFwiOiA5MyxcInlcIjogMTg1fSx7XCJ4XCI6IDk1LFwieVwiOiAxODV9LHtcInhcIjogOTcsXCJ5XCI6IDE4NX0se1wieFwiOiAxMDAsXCJ5XCI6IDE4OH0se1wieFwiOiAxMDIsXCJ5XCI6IDE4OX0se1wieFwiOiAxMDQsXCJ5XCI6IDE5MH0se1wieFwiOiAxMDYsXCJ5XCI6IDE5M30se1wieFwiOiAxMDgsXCJ5XCI6IDE5NX0se1wieFwiOiAxMTAsXCJ5XCI6IDE5OH0se1wieFwiOiAxMTIsXCJ5XCI6IDIwMX0se1wieFwiOiAxMTQsXCJ5XCI6IDIwNH0se1wieFwiOiAxMTUsXCJ5XCI6IDIwN30se1wieFwiOiAxMTcsXCJ5XCI6IDIxMH0se1wieFwiOiAxMTgsXCJ5XCI6IDIxMn0se1wieFwiOiAxMjAsXCJ5XCI6IDIxNH0se1wieFwiOiAxMjEsXCJ5XCI6IDIxN30se1wieFwiOiAxMjIsXCJ5XCI6IDIxOX0se1wieFwiOiAxMjMsXCJ5XCI6IDIyMn0se1wieFwiOiAxMjQsXCJ5XCI6IDIyNH0se1wieFwiOiAxMjYsXCJ5XCI6IDIyNn0se1wieFwiOiAxMjcsXCJ5XCI6IDIyOX0se1wieFwiOiAxMjksXCJ5XCI6IDIzMX0se1wieFwiOiAxMzAsXCJ5XCI6IDIzM30se1wieFwiOiAxMjksXCJ5XCI6IDIzMX0se1wieFwiOiAxMjksXCJ5XCI6IDIyOH0se1wieFwiOiAxMjksXCJ5XCI6IDIyNn0se1wieFwiOiAxMjksXCJ5XCI6IDIyNH0se1wieFwiOiAxMjksXCJ5XCI6IDIyMX0se1wieFwiOiAxMjksXCJ5XCI6IDIxOH0se1wieFwiOiAxMjksXCJ5XCI6IDIxMn0se1wieFwiOiAxMjksXCJ5XCI6IDIwOH0se1wieFwiOiAxMzAsXCJ5XCI6IDE5OH0se1wieFwiOiAxMzIsXCJ5XCI6IDE4OX0se1wieFwiOiAxMzQsXCJ5XCI6IDE4Mn0se1wieFwiOiAxMzcsXCJ5XCI6IDE3M30se1wieFwiOiAxNDMsXCJ5XCI6IDE2NH0se1wieFwiOiAxNDcsXCJ5XCI6IDE1N30se1wieFwiOiAxNTEsXCJ5XCI6IDE1MX0se1wieFwiOiAxNTUsXCJ5XCI6IDE0NH0se1wieFwiOiAxNjEsXCJ5XCI6IDEzN30se1wieFwiOiAxNjUsXCJ5XCI6IDEzMX0se1wieFwiOiAxNzEsXCJ5XCI6IDEyMn0se1wieFwiOiAxNzQsXCJ5XCI6IDExOH0se1wieFwiOiAxNzYsXCJ5XCI6IDExNH0se1wieFwiOiAxNzcsXCJ5XCI6IDExMn0se1wieFwiOiAxNzcsXCJ5XCI6IDExNH0se1wieFwiOiAxNzUsXCJ5XCI6IDExNn0se1wieFwiOiAxNzMsXCJ5XCI6IDExOH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjoxMTMsXCJ5XCI6Njh9LHtcInhcIjo4NixcInlcIjo3OX0se1wieFwiOjYzLFwieVwiOjEzMX0se1wieFwiOjc4LFwieVwiOjE0N30se1wieFwiOjE1NixcInlcIjoxNDl9LHtcInhcIjoxOTUsXCJ5XCI6MTAwfSx7XCJ4XCI6MTg5LFwieVwiOjc5fSx7XCJ4XCI6MTI1LjczNDk3LFwieVwiOjYyLjgxMTY4fV0sXG4gICAgICBuYW1lOiBcImNpcmNsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6OTgsXCJ5XCI6Njd9LHtcInhcIjo3NyxcInlcIjo4NX0se1wieFwiOjc3LFwieVwiOjE2Mn0se1wieFwiOjE3OSxcInlcIjoxNTZ9LHtcInhcIjoxOTcsXCJ5XCI6MTIzfSx7XCJ4XCI6MTY3LFwieVwiOjYzfSx7XCJ4XCI6MTQxLFwieVwiOjYxfSx7XCJ4XCI6MTEwLFwieVwiOjU5fSx7XCJ4XCI6MTA2LjUxMTkyLFwieVwiOjU5LjcwNDA3fV0sXG4gICAgICBuYW1lOiBcImNpcmNsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6NjAsXCJ5XCI6NDd9LHtcInhcIjo0MyxcInlcIjo5Nn0se1wieFwiOjUyLFwieVwiOjIwNn0se1wieFwiOjYzLFwieVwiOjI0Nn0se1wieFwiOjExOCxcInlcIjoyOTZ9LHtcInhcIjoxNDQsXCJ5XCI6MjQ2fSx7XCJ4XCI6MTQxLFwieVwiOjE0N30se1wieFwiOjEzMyxcInlcIjoxMjl9LHtcInhcIjoxMTMsXCJ5XCI6ODB9LHtcInhcIjo2MC40MjczOCxcInlcIjo0NS43NjgxM31dLFxuICAgICAgbmFtZTogXCJjaXJjbGVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiAxMjcsXCJ5XCI6IDE0MX0se1wieFwiOiAxMjQsXCJ5XCI6IDE0MH0se1wieFwiOiAxMjAsXCJ5XCI6IDEzOX0se1wieFwiOiAxMTgsXCJ5XCI6IDEzOX0se1wieFwiOiAxMTYsXCJ5XCI6IDEzOX0se1wieFwiOiAxMTEsXCJ5XCI6IDE0MH0se1wieFwiOiAxMDksXCJ5XCI6IDE0MX0se1wieFwiOiAxMDQsXCJ5XCI6IDE0NH0se1wieFwiOiAxMDAsXCJ5XCI6IDE0N30se1wieFwiOiA5NixcInlcIjogMTUyfSx7XCJ4XCI6IDkzLFwieVwiOiAxNTd9LHtcInhcIjogOTAsXCJ5XCI6IDE2M30se1wieFwiOiA4NyxcInlcIjogMTY5fSx7XCJ4XCI6IDg1LFwieVwiOiAxNzV9LHtcInhcIjogODMsXCJ5XCI6IDE4MX0se1wieFwiOiA4MixcInlcIjogMTkwfSx7XCJ4XCI6IDgyLFwieVwiOiAxOTV9LHtcInhcIjogODMsXCJ5XCI6IDIwMH0se1wieFwiOiA4NCxcInlcIjogMjA1fSx7XCJ4XCI6IDg4LFwieVwiOiAyMTN9LHtcInhcIjogOTEsXCJ5XCI6IDIxNn0se1wieFwiOiA5NixcInlcIjogMjE5fSx7XCJ4XCI6IDEwMyxcInlcIjogMjIyfSx7XCJ4XCI6IDEwOCxcInlcIjogMjI0fSx7XCJ4XCI6IDExMSxcInlcIjogMjI0fSx7XCJ4XCI6IDEyMCxcInlcIjogMjI0fSx7XCJ4XCI6IDEzMyxcInlcIjogMjIzfSx7XCJ4XCI6IDE0MixcInlcIjogMjIyfSx7XCJ4XCI6IDE1MixcInlcIjogMjE4fSx7XCJ4XCI6IDE2MCxcInlcIjogMjE0fSx7XCJ4XCI6IDE2NyxcInlcIjogMjEwfSx7XCJ4XCI6IDE3MyxcInlcIjogMjA0fSx7XCJ4XCI6IDE3OCxcInlcIjogMTk4fSx7XCJ4XCI6IDE3OSxcInlcIjogMTk2fSx7XCJ4XCI6IDE4MixcInlcIjogMTg4fSx7XCJ4XCI6IDE4MixcInlcIjogMTc3fSx7XCJ4XCI6IDE3OCxcInlcIjogMTY3fSx7XCJ4XCI6IDE3MCxcInlcIjogMTUwfSx7XCJ4XCI6IDE2MyxcInlcIjogMTM4fSx7XCJ4XCI6IDE1MixcInlcIjogMTMwfSx7XCJ4XCI6IDE0MyxcInlcIjogMTI5fSx7XCJ4XCI6IDE0MCxcInlcIjogMTMxfSx7XCJ4XCI6IDEyOSxcInlcIjogMTM2fSx7XCJ4XCI6IDEyNixcInlcIjogMTM5fV0sXG4gICAgICBuYW1lOiBcImNpcmNsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6NTE2LFwieVwiOjI4NH0se1wieFwiOjQ5NixcInlcIjozMTl9LHtcInhcIjo0OTYsXCJ5XCI6MzI5fSx7XCJ4XCI6NTEzLFwieVwiOjMyOX0se1wieFwiOjU1MCxcInlcIjozMjR9LHtcInhcIjo2OTYsXCJ5XCI6MzA1fSx7XCJ4XCI6NzM3LFwieVwiOjI5OH0se1wieFwiOjc0NixcInlcIjoyOTJ9LHtcInhcIjo3MzQsXCJ5XCI6Mjc4fSx7XCJ4XCI6NzA5LFwieVwiOjI1Mn0se1wieFwiOjY2NCxcInlcIjoxOTN9XSxcbiAgICAgIG5hbWU6IFwidHJpYW5nbGVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjE3OSxcInlcIjoxNTl9LHtcInhcIjoxNTIsXCJ5XCI6MjkwfSx7XCJ4XCI6MTQzLFwieVwiOjMzNn0se1wieFwiOjE0MixcInlcIjozNTV9LHtcInhcIjoxNjAsXCJ5XCI6MzQ4fSx7XCJ4XCI6MjA4LFwieVwiOjMzN30se1wieFwiOjI0MSxcInlcIjozMzB9LHtcInhcIjoyNTYsXCJ5XCI6MzI4fSx7XCJ4XCI6MjU0LFwieVwiOjMxNX0se1wieFwiOjIzOCxcInlcIjoyNzd9LHtcInhcIjoyMTAsXCJ5XCI6MjAwfSx7XCJ4XCI6MTgyLjk0MzU2LFwieVwiOjExMC40NTY1Nn1dLFxuICAgICAgbmFtZTogXCJ0cmlhbmdsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6MTA1LFwieVwiOjMzNX0se1wieFwiOjExNSxcInlcIjozNjJ9LHtcInhcIjoxMjgsXCJ5XCI6MzM4fSx7XCJ4XCI6MTYzLFwieVwiOjI3MX0se1wieFwiOjI0MSxcInlcIjoxMzV9LHtcInhcIjoyNjEsXCJ5XCI6MTA0fSx7XCJ4XCI6MjY3LFwieVwiOjk4fSx7XCJ4XCI6MjYxLFwieVwiOjEwMn0se1wieFwiOjIzNixcInlcIjoxMTl9LHtcInhcIjoxNTEsXCJ5XCI6MTk1fSx7XCJ4XCI6MTA4LFwieVwiOjIzNX0se1wieFwiOjgzLFwieVwiOjI2N30se1wieFwiOjc5LjkyNjE2LFwieVwiOjI3MC45MzQ1MX1dLFxuICAgICAgbmFtZTogXCJ0cmlhbmdsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDEzNyxcInlcIjogMTM5fSx7XCJ4XCI6IDEzNSxcInlcIjogMTQxfSx7XCJ4XCI6IDEzMyxcInlcIjogMTQ0fSx7XCJ4XCI6IDEzMixcInlcIjogMTQ2fSx7XCJ4XCI6IDEzMCxcInlcIjogMTQ5fSx7XCJ4XCI6IDEyOCxcInlcIjogMTUxfSx7XCJ4XCI6IDEyNixcInlcIjogMTU1fSx7XCJ4XCI6IDEyMyxcInlcIjogMTYwfSx7XCJ4XCI6IDEyMCxcInlcIjogMTY2fSx7XCJ4XCI6IDExNixcInlcIjogMTcxfSx7XCJ4XCI6IDExMixcInlcIjogMTc3fSx7XCJ4XCI6IDEwNyxcInlcIjogMTgzfSx7XCJ4XCI6IDEwMixcInlcIjogMTg4fSx7XCJ4XCI6IDEwMCxcInlcIjogMTkxfSx7XCJ4XCI6IDk1LFwieVwiOiAxOTV9LHtcInhcIjogOTAsXCJ5XCI6IDE5OX0se1wieFwiOiA4NixcInlcIjogMjAzfSx7XCJ4XCI6IDgyLFwieVwiOiAyMDZ9LHtcInhcIjogODAsXCJ5XCI6IDIwOX0se1wieFwiOiA3NSxcInlcIjogMjEzfSx7XCJ4XCI6IDczLFwieVwiOiAyMTN9LHtcInhcIjogNzAsXCJ5XCI6IDIxNn0se1wieFwiOiA2NyxcInlcIjogMjE5fSx7XCJ4XCI6IDY0LFwieVwiOiAyMjF9LHtcInhcIjogNjEsXCJ5XCI6IDIyM30se1wieFwiOiA2MCxcInlcIjogMjI1fSx7XCJ4XCI6IDYyLFwieVwiOiAyMjZ9LHtcInhcIjogNjUsXCJ5XCI6IDIyNX0se1wieFwiOiA2NyxcInlcIjogMjI2fSx7XCJ4XCI6IDc0LFwieVwiOiAyMjZ9LHtcInhcIjogNzcsXCJ5XCI6IDIyN30se1wieFwiOiA4NSxcInlcIjogMjI5fSx7XCJ4XCI6IDkxLFwieVwiOiAyMzB9LHtcInhcIjogOTksXCJ5XCI6IDIzMX0se1wieFwiOiAxMDgsXCJ5XCI6IDIzMn0se1wieFwiOiAxMTYsXCJ5XCI6IDIzM30se1wieFwiOiAxMjUsXCJ5XCI6IDIzM30se1wieFwiOiAxMzQsXCJ5XCI6IDIzNH0se1wieFwiOiAxNDUsXCJ5XCI6IDIzM30se1wieFwiOiAxNTMsXCJ5XCI6IDIzMn0se1wieFwiOiAxNjAsXCJ5XCI6IDIzM30se1wieFwiOiAxNzAsXCJ5XCI6IDIzNH0se1wieFwiOiAxNzcsXCJ5XCI6IDIzNX0se1wieFwiOiAxNzksXCJ5XCI6IDIzNn0se1wieFwiOiAxODYsXCJ5XCI6IDIzN30se1wieFwiOiAxOTMsXCJ5XCI6IDIzOH0se1wieFwiOiAxOTgsXCJ5XCI6IDIzOX0se1wieFwiOiAyMDAsXCJ5XCI6IDIzN30se1wieFwiOiAyMDIsXCJ5XCI6IDIzOX0se1wieFwiOiAyMDQsXCJ5XCI6IDIzOH0se1wieFwiOiAyMDYsXCJ5XCI6IDIzNH0se1wieFwiOiAyMDUsXCJ5XCI6IDIzMH0se1wieFwiOiAyMDIsXCJ5XCI6IDIyMn0se1wieFwiOiAxOTcsXCJ5XCI6IDIxNn0se1wieFwiOiAxOTIsXCJ5XCI6IDIwN30se1wieFwiOiAxODYsXCJ5XCI6IDE5OH0se1wieFwiOiAxNzksXCJ5XCI6IDE4OX0se1wieFwiOiAxNzQsXCJ5XCI6IDE4M30se1wieFwiOiAxNzAsXCJ5XCI6IDE3OH0se1wieFwiOiAxNjQsXCJ5XCI6IDE3MX0se1wieFwiOiAxNjEsXCJ5XCI6IDE2OH0se1wieFwiOiAxNTQsXCJ5XCI6IDE2MH0se1wieFwiOiAxNDgsXCJ5XCI6IDE1NX0se1wieFwiOiAxNDMsXCJ5XCI6IDE1MH0se1wieFwiOiAxMzgsXCJ5XCI6IDE0OH0se1wieFwiOiAxMzYsXCJ5XCI6IDE0OH1dLFxuICAgICAgbmFtZTogXCJ0cmlhbmdsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7eDogMCwgeTogMH0sIHt4OiAwLCB5OiA1MH0sIHt4OiA1MCwgeTogNTB9LCB7eDogNTAsIHk6IDB9XSxcbiAgICAgIG5hbWU6IFwic3F1YXJlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3t4OiAwLCB5OiAwfSwge3g6IDAsIHk6IDEwMH0sIHt4OiA1MCwgeTogMTAwfSwge3g6IDUwLCB5OiAwfV0sXG4gICAgICBuYW1lOiBcInNxdWFyZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDc4LFwieVwiOiAxNDl9LHtcInhcIjogNzgsXCJ5XCI6IDE1M30se1wieFwiOiA3OCxcInlcIjogMTU3fSx7XCJ4XCI6IDc4LFwieVwiOiAxNjB9LHtcInhcIjogNzksXCJ5XCI6IDE2Mn0se1wieFwiOiA3OSxcInlcIjogMTY0fSx7XCJ4XCI6IDc5LFwieVwiOiAxNjd9LHtcInhcIjogNzksXCJ5XCI6IDE2OX0se1wieFwiOiA3OSxcInlcIjogMTczfSx7XCJ4XCI6IDc5LFwieVwiOiAxNzh9LHtcInhcIjogNzksXCJ5XCI6IDE4M30se1wieFwiOiA4MCxcInlcIjogMTg5fSx7XCJ4XCI6IDgwLFwieVwiOiAxOTN9LHtcInhcIjogODAsXCJ5XCI6IDE5OH0se1wieFwiOiA4MCxcInlcIjogMjAyfSx7XCJ4XCI6IDgxLFwieVwiOiAyMDh9LHtcInhcIjogODEsXCJ5XCI6IDIxMH0se1wieFwiOiA4MSxcInlcIjogMjE2fSx7XCJ4XCI6IDgyLFwieVwiOiAyMjJ9LHtcInhcIjogODIsXCJ5XCI6IDIyNH0se1wieFwiOiA4MixcInlcIjogMjI3fSx7XCJ4XCI6IDgzLFwieVwiOiAyMjl9LHtcInhcIjogODMsXCJ5XCI6IDIzMX0se1wieFwiOiA4NSxcInlcIjogMjMwfSx7XCJ4XCI6IDg4LFwieVwiOiAyMzJ9LHtcInhcIjogOTAsXCJ5XCI6IDIzM30se1wieFwiOiA5MixcInlcIjogMjMyfSx7XCJ4XCI6IDk0LFwieVwiOiAyMzN9LHtcInhcIjogOTksXCJ5XCI6IDIzMn0se1wieFwiOiAxMDIsXCJ5XCI6IDIzM30se1wieFwiOiAxMDYsXCJ5XCI6IDIzM30se1wieFwiOiAxMDksXCJ5XCI6IDIzNH0se1wieFwiOiAxMTcsXCJ5XCI6IDIzNX0se1wieFwiOiAxMjMsXCJ5XCI6IDIzNn0se1wieFwiOiAxMjYsXCJ5XCI6IDIzNn0se1wieFwiOiAxMzUsXCJ5XCI6IDIzN30se1wieFwiOiAxNDIsXCJ5XCI6IDIzOH0se1wieFwiOiAxNDUsXCJ5XCI6IDIzOH0se1wieFwiOiAxNTIsXCJ5XCI6IDIzOH0se1wieFwiOiAxNTQsXCJ5XCI6IDIzOX0se1wieFwiOiAxNjUsXCJ5XCI6IDIzOH0se1wieFwiOiAxNzQsXCJ5XCI6IDIzN30se1wieFwiOiAxNzksXCJ5XCI6IDIzNn0se1wieFwiOiAxODYsXCJ5XCI6IDIzNX0se1wieFwiOiAxOTEsXCJ5XCI6IDIzNX0se1wieFwiOiAxOTUsXCJ5XCI6IDIzM30se1wieFwiOiAxOTcsXCJ5XCI6IDIzM30se1wieFwiOiAyMDAsXCJ5XCI6IDIzM30se1wieFwiOiAyMDEsXCJ5XCI6IDIzNX0se1wieFwiOiAyMDEsXCJ5XCI6IDIzM30se1wieFwiOiAxOTksXCJ5XCI6IDIzMX0se1wieFwiOiAxOTgsXCJ5XCI6IDIyNn0se1wieFwiOiAxOTgsXCJ5XCI6IDIyMH0se1wieFwiOiAxOTYsXCJ5XCI6IDIwN30se1wieFwiOiAxOTUsXCJ5XCI6IDE5NX0se1wieFwiOiAxOTUsXCJ5XCI6IDE4MX0se1wieFwiOiAxOTUsXCJ5XCI6IDE3M30se1wieFwiOiAxOTUsXCJ5XCI6IDE2M30se1wieFwiOiAxOTQsXCJ5XCI6IDE1NX0se1wieFwiOiAxOTIsXCJ5XCI6IDE0NX0se1wieFwiOiAxOTIsXCJ5XCI6IDE0M30se1wieFwiOiAxOTIsXCJ5XCI6IDEzOH0se1wieFwiOiAxOTEsXCJ5XCI6IDEzNX0se1wieFwiOiAxOTEsXCJ5XCI6IDEzM30se1wieFwiOiAxOTEsXCJ5XCI6IDEzMH0se1wieFwiOiAxOTAsXCJ5XCI6IDEyOH0se1wieFwiOiAxODgsXCJ5XCI6IDEyOX0se1wieFwiOiAxODYsXCJ5XCI6IDEyOX0se1wieFwiOiAxODEsXCJ5XCI6IDEzMn0se1wieFwiOiAxNzMsXCJ5XCI6IDEzMX0se1wieFwiOiAxNjIsXCJ5XCI6IDEzMX0se1wieFwiOiAxNTEsXCJ5XCI6IDEzMn0se1wieFwiOiAxNDksXCJ5XCI6IDEzMn0se1wieFwiOiAxMzgsXCJ5XCI6IDEzMn0se1wieFwiOiAxMzYsXCJ5XCI6IDEzMn0se1wieFwiOiAxMjIsXCJ5XCI6IDEzMX0se1wieFwiOiAxMjAsXCJ5XCI6IDEzMX0se1wieFwiOiAxMDksXCJ5XCI6IDEzMH0se1wieFwiOiAxMDcsXCJ5XCI6IDEzMH0se1wieFwiOiA5MCxcInlcIjogMTMyfSx7XCJ4XCI6IDgxLFwieVwiOiAxMzN9LHtcInhcIjogNzYsXCJ5XCI6IDEzM31dLFxuICAgICAgbmFtZTogXCJzcXVhcmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjY3LFwieVwiOjE3Mn0se1wieFwiOjgwLFwieVwiOjg1fSx7XCJ4XCI6ODMsXCJ5XCI6NTh9LHtcInhcIjo4MyxcInlcIjo1NH0se1wieFwiOjEzNixcInlcIjoxMTB9LHtcInhcIjoxNTcsXCJ5XCI6MTM2fSx7XCJ4XCI6MTYyLFwieVwiOjE0MH0se1wieFwiOjE2NixcInlcIjoxNDN9LHtcInhcIjo4MCxcInlcIjoxMjR9LHtcInhcIjo0NSxcInlcIjoxMTZ9LHtcInhcIjozNyxcInlcIjoxMTR9LHtcInhcIjozMSxcInlcIjoxMTN9LHtcInhcIjo1MixcInlcIjoxMDZ9LHtcInhcIjoxMDEsXCJ5XCI6ODZ9LHtcInhcIjoxMzEsXCJ5XCI6NzV9LHtcInhcIjoxNTcsXCJ5XCI6NjN9LHtcInhcIjoxNjMsXCJ5XCI6NjJ9LHtcInhcIjoxNTgsXCJ5XCI6NjR9LHtcInhcIjoxNTMsXCJ5XCI6NzN9LHtcInhcIjoxMjgsXCJ5XCI6MTAzfSx7XCJ4XCI6NzEsXCJ5XCI6MTcwfV0sXG4gICAgICBuYW1lOiBcIm90aGVyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjozMCxcInlcIjo2OX0se1wieFwiOjExNixcInlcIjoxMTh9LHtcInhcIjo5MCxcInlcIjoxNjR9LHtcInhcIjo3NSxcInlcIjoxMTd9LHtcInhcIjoxNTcsXCJ5XCI6ODN9LHtcInhcIjoxODIsXCJ5XCI6MTQwfSx7XCJ4XCI6MTU1LFwieVwiOjE2M30se1wieFwiOjE0NCxcInlcIjoxMTl9LHtcInhcIjoyMjEsXCJ5XCI6NTR9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjg3LFwieVwiOjc2fSx7XCJ4XCI6NjIsXCJ5XCI6NzN9LHtcInhcIjoxMDAsXCJ5XCI6OTh9LHtcInhcIjoxMDcsXCJ5XCI6NTd9LHtcInhcIjo2MSxcInlcIjozOH0se1wieFwiOjczLFwieVwiOjEzN31dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDEyMyxcInlcIjogMTI5fSx7XCJ4XCI6IDEyMyxcInlcIjogMTMxfSx7XCJ4XCI6IDEyNCxcInlcIjogMTMzfSx7XCJ4XCI6IDEyNSxcInlcIjogMTM2fSx7XCJ4XCI6IDEyNyxcInlcIjogMTQwfSx7XCJ4XCI6IDEyOSxcInlcIjogMTQyfSx7XCJ4XCI6IDEzMyxcInlcIjogMTQ4fSx7XCJ4XCI6IDEzNyxcInlcIjogMTU0fSx7XCJ4XCI6IDE0MyxcInlcIjogMTU4fSx7XCJ4XCI6IDE0NSxcInlcIjogMTYxfSx7XCJ4XCI6IDE0OCxcInlcIjogMTY0fSx7XCJ4XCI6IDE1MyxcInlcIjogMTcwfSx7XCJ4XCI6IDE1OCxcInlcIjogMTc2fSx7XCJ4XCI6IDE2MCxcInlcIjogMTc4fSx7XCJ4XCI6IDE2NCxcInlcIjogMTgzfSx7XCJ4XCI6IDE2OCxcInlcIjogMTg4fSx7XCJ4XCI6IDE3MSxcInlcIjogMTkxfSx7XCJ4XCI6IDE3NSxcInlcIjogMTk2fSx7XCJ4XCI6IDE3OCxcInlcIjogMjAwfSx7XCJ4XCI6IDE4MCxcInlcIjogMjAyfSx7XCJ4XCI6IDE4MSxcInlcIjogMjA1fSx7XCJ4XCI6IDE4NCxcInlcIjogMjA4fSx7XCJ4XCI6IDE4NixcInlcIjogMjEwfSx7XCJ4XCI6IDE4NyxcInlcIjogMjEzfSx7XCJ4XCI6IDE4OCxcInlcIjogMjE1fSx7XCJ4XCI6IDE4NixcInlcIjogMjEyfSx7XCJ4XCI6IDE4MyxcInlcIjogMjExfSx7XCJ4XCI6IDE3NyxcInlcIjogMjA4fSx7XCJ4XCI6IDE2OSxcInlcIjogMjA2fSx7XCJ4XCI6IDE2MixcInlcIjogMjA1fSx7XCJ4XCI6IDE1NCxcInlcIjogMjA3fSx7XCJ4XCI6IDE0NSxcInlcIjogMjA5fSx7XCJ4XCI6IDEzNyxcInlcIjogMjEwfSx7XCJ4XCI6IDEyOSxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMixcInlcIjogMjE3fSx7XCJ4XCI6IDExOCxcInlcIjogMjE4fSx7XCJ4XCI6IDExMSxcInlcIjogMjIxfSx7XCJ4XCI6IDEwOSxcInlcIjogMjIyfSx7XCJ4XCI6IDExMCxcInlcIjogMjE5fSx7XCJ4XCI6IDExMixcInlcIjogMjE3fSx7XCJ4XCI6IDExOCxcInlcIjogMjA5fSx7XCJ4XCI6IDEyMCxcInlcIjogMjA3fSx7XCJ4XCI6IDEyOCxcInlcIjogMTk2fSx7XCJ4XCI6IDEzNSxcInlcIjogMTg3fSx7XCJ4XCI6IDEzOCxcInlcIjogMTgzfSx7XCJ4XCI6IDE0OCxcInlcIjogMTY3fSx7XCJ4XCI6IDE1NyxcInlcIjogMTUzfSx7XCJ4XCI6IDE2MyxcInlcIjogMTQ1fSx7XCJ4XCI6IDE2NSxcInlcIjogMTQyfSx7XCJ4XCI6IDE3MixcInlcIjogMTMzfSx7XCJ4XCI6IDE3NyxcInlcIjogMTI3fSx7XCJ4XCI6IDE3OSxcInlcIjogMTI3fSx7XCJ4XCI6IDE4MCxcInlcIjogMTI1fV0sXG4gICAgICBuYW1lOiBcIm90aGVyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogODEsXCJ5XCI6IDIxOX0se1wieFwiOiA4NCxcInlcIjogMjE4fSx7XCJ4XCI6IDg2LFwieVwiOiAyMjB9LHtcInhcIjogODgsXCJ5XCI6IDIyMH0se1wieFwiOiA5MCxcInlcIjogMjIwfSx7XCJ4XCI6IDkyLFwieVwiOiAyMTl9LHtcInhcIjogOTUsXCJ5XCI6IDIyMH0se1wieFwiOiA5NyxcInlcIjogMjE5fSx7XCJ4XCI6IDk5LFwieVwiOiAyMjB9LHtcInhcIjogMTAyLFwieVwiOiAyMTh9LHtcInhcIjogMTA1LFwieVwiOiAyMTd9LHtcInhcIjogMTA3LFwieVwiOiAyMTZ9LHtcInhcIjogMTEwLFwieVwiOiAyMTZ9LHtcInhcIjogMTEzLFwieVwiOiAyMTR9LHtcInhcIjogMTE2LFwieVwiOiAyMTJ9LHtcInhcIjogMTE4LFwieVwiOiAyMTB9LHtcInhcIjogMTIxLFwieVwiOiAyMDh9LHtcInhcIjogMTI0LFwieVwiOiAyMDV9LHtcInhcIjogMTI2LFwieVwiOiAyMDJ9LHtcInhcIjogMTI5LFwieVwiOiAxOTl9LHtcInhcIjogMTMyLFwieVwiOiAxOTZ9LHtcInhcIjogMTM2LFwieVwiOiAxOTF9LHtcInhcIjogMTM5LFwieVwiOiAxODd9LHtcInhcIjogMTQyLFwieVwiOiAxODJ9LHtcInhcIjogMTQ0LFwieVwiOiAxNzl9LHtcInhcIjogMTQ2LFwieVwiOiAxNzR9LHtcInhcIjogMTQ4LFwieVwiOiAxNzB9LHtcInhcIjogMTQ5LFwieVwiOiAxNjh9LHtcInhcIjogMTUxLFwieVwiOiAxNjJ9LHtcInhcIjogMTUyLFwieVwiOiAxNjB9LHtcInhcIjogMTUyLFwieVwiOiAxNTd9LHtcInhcIjogMTUyLFwieVwiOiAxNTV9LHtcInhcIjogMTUyLFwieVwiOiAxNTF9LHtcInhcIjogMTUyLFwieVwiOiAxNDl9LHtcInhcIjogMTUyLFwieVwiOiAxNDZ9LHtcInhcIjogMTQ5LFwieVwiOiAxNDJ9LHtcInhcIjogMTQ4LFwieVwiOiAxMzl9LHtcInhcIjogMTQ1LFwieVwiOiAxMzd9LHtcInhcIjogMTQxLFwieVwiOiAxMzV9LHtcInhcIjogMTM5LFwieVwiOiAxMzV9LHtcInhcIjogMTM0LFwieVwiOiAxMzZ9LHtcInhcIjogMTMwLFwieVwiOiAxNDB9LHtcInhcIjogMTI4LFwieVwiOiAxNDJ9LHtcInhcIjogMTI2LFwieVwiOiAxNDV9LHtcInhcIjogMTIyLFwieVwiOiAxNTB9LHtcInhcIjogMTE5LFwieVwiOiAxNTh9LHtcInhcIjogMTE3LFwieVwiOiAxNjN9LHtcInhcIjogMTE1LFwieVwiOiAxNzB9LHtcInhcIjogMTE0LFwieVwiOiAxNzV9LHtcInhcIjogMTE3LFwieVwiOiAxODR9LHtcInhcIjogMTIwLFwieVwiOiAxOTB9LHtcInhcIjogMTI1LFwieVwiOiAxOTl9LHtcInhcIjogMTI5LFwieVwiOiAyMDN9LHtcInhcIjogMTMzLFwieVwiOiAyMDh9LHtcInhcIjogMTM4LFwieVwiOiAyMTN9LHtcInhcIjogMTQ1LFwieVwiOiAyMTV9LHtcInhcIjogMTU1LFwieVwiOiAyMTh9LHtcInhcIjogMTY0LFwieVwiOiAyMTl9LHtcInhcIjogMTY2LFwieVwiOiAyMTl9LHtcInhcIjogMTc3LFwieVwiOiAyMTl9LHtcInhcIjogMTgyLFwieVwiOiAyMTh9LHtcInhcIjogMTkyLFwieVwiOiAyMTZ9LHtcInhcIjogMTk2LFwieVwiOiAyMTN9LHtcInhcIjogMTk5LFwieVwiOiAyMTJ9LHtcInhcIjogMjAxLFwieVwiOiAyMTF9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA3NSxcInlcIjogMjUwfSx7XCJ4XCI6IDc1LFwieVwiOiAyNDd9LHtcInhcIjogNzcsXCJ5XCI6IDI0NH0se1wieFwiOiA3OCxcInlcIjogMjQyfSx7XCJ4XCI6IDc5LFwieVwiOiAyMzl9LHtcInhcIjogODAsXCJ5XCI6IDIzN30se1wieFwiOiA4MixcInlcIjogMjM0fSx7XCJ4XCI6IDgyLFwieVwiOiAyMzJ9LHtcInhcIjogODQsXCJ5XCI6IDIyOX0se1wieFwiOiA4NSxcInlcIjogMjI1fSx7XCJ4XCI6IDg3LFwieVwiOiAyMjJ9LHtcInhcIjogODgsXCJ5XCI6IDIxOX0se1wieFwiOiA4OSxcInlcIjogMjE2fSx7XCJ4XCI6IDkxLFwieVwiOiAyMTJ9LHtcInhcIjogOTIsXCJ5XCI6IDIwOH0se1wieFwiOiA5NCxcInlcIjogMjA0fSx7XCJ4XCI6IDk1LFwieVwiOiAyMDF9LHtcInhcIjogOTYsXCJ5XCI6IDE5Nn0se1wieFwiOiA5NyxcInlcIjogMTk0fSx7XCJ4XCI6IDk4LFwieVwiOiAxOTF9LHtcInhcIjogMTAwLFwieVwiOiAxODV9LHtcInhcIjogMTAyLFwieVwiOiAxNzh9LHtcInhcIjogMTA0LFwieVwiOiAxNzN9LHtcInhcIjogMTA0LFwieVwiOiAxNzF9LHtcInhcIjogMTA1LFwieVwiOiAxNjR9LHtcInhcIjogMTA2LFwieVwiOiAxNTh9LHtcInhcIjogMTA3LFwieVwiOiAxNTZ9LHtcInhcIjogMTA3LFwieVwiOiAxNTJ9LHtcInhcIjogMTA4LFwieVwiOiAxNDV9LHtcInhcIjogMTA5LFwieVwiOiAxNDF9LHtcInhcIjogMTEwLFwieVwiOiAxMzl9LHtcInhcIjogMTEyLFwieVwiOiAxMzN9LHtcInhcIjogMTEzLFwieVwiOiAxMzF9LHtcInhcIjogMTE2LFwieVwiOiAxMjd9LHtcInhcIjogMTE3LFwieVwiOiAxMjV9LHtcInhcIjogMTE5LFwieVwiOiAxMjJ9LHtcInhcIjogMTIxLFwieVwiOiAxMjF9LHtcInhcIjogMTIzLFwieVwiOiAxMjB9LHtcInhcIjogMTI1LFwieVwiOiAxMjJ9LHtcInhcIjogMTI1LFwieVwiOiAxMjV9LHtcInhcIjogMTI3LFwieVwiOiAxMzB9LHtcInhcIjogMTI4LFwieVwiOiAxMzN9LHtcInhcIjogMTMxLFwieVwiOiAxNDN9LHtcInhcIjogMTM2LFwieVwiOiAxNTN9LHtcInhcIjogMTQwLFwieVwiOiAxNjN9LHtcInhcIjogMTQ0LFwieVwiOiAxNzJ9LHtcInhcIjogMTQ1LFwieVwiOiAxNzV9LHtcInhcIjogMTUxLFwieVwiOiAxODl9LHtcInhcIjogMTU2LFwieVwiOiAyMDF9LHtcInhcIjogMTYxLFwieVwiOiAyMTN9LHtcInhcIjogMTY2LFwieVwiOiAyMjV9LHtcInhcIjogMTY5LFwieVwiOiAyMzN9LHtcInhcIjogMTcxLFwieVwiOiAyMzZ9LHtcInhcIjogMTc0LFwieVwiOiAyNDN9LHtcInhcIjogMTc3LFwieVwiOiAyNDd9LHtcInhcIjogMTc4LFwieVwiOiAyNDl9LHtcInhcIjogMTc5LFwieVwiOiAyNTF9LHtcInhcIjogMTgwLFwieVwiOiAyNTN9LHtcInhcIjogMTgwLFwieVwiOiAyNTV9LHtcInhcIjogMTc5LFwieVwiOiAyNTd9LHtcInhcIjogMTc3LFwieVwiOiAyNTd9LHtcInhcIjogMTc0LFwieVwiOiAyNTV9LHtcInhcIjogMTY5LFwieVwiOiAyNTB9LHtcInhcIjogMTY0LFwieVwiOiAyNDd9LHtcInhcIjogMTYwLFwieVwiOiAyNDV9LHtcInhcIjogMTQ5LFwieVwiOiAyMzh9LHtcInhcIjogMTM4LFwieVwiOiAyMzB9LHtcInhcIjogMTI3LFwieVwiOiAyMjF9LHtcInhcIjogMTI0LFwieVwiOiAyMjB9LHtcInhcIjogMTEyLFwieVwiOiAyMTJ9LHtcInhcIjogMTEwLFwieVwiOiAyMTB9LHtcInhcIjogOTYsXCJ5XCI6IDIwMX0se1wieFwiOiA4NCxcInlcIjogMTk1fSx7XCJ4XCI6IDc0LFwieVwiOiAxOTB9LHtcInhcIjogNjQsXCJ5XCI6IDE4Mn0se1wieFwiOiA1NSxcInlcIjogMTc1fSx7XCJ4XCI6IDUxLFwieVwiOiAxNzJ9LHtcInhcIjogNDksXCJ5XCI6IDE3MH0se1wieFwiOiA1MSxcInlcIjogMTY5fSx7XCJ4XCI6IDU2LFwieVwiOiAxNjl9LHtcInhcIjogNjYsXCJ5XCI6IDE2OX0se1wieFwiOiA3OCxcInlcIjogMTY4fSx7XCJ4XCI6IDkyLFwieVwiOiAxNjZ9LHtcInhcIjogMTA3LFwieVwiOiAxNjR9LHtcInhcIjogMTIzLFwieVwiOiAxNjF9LHtcInhcIjogMTQwLFwieVwiOiAxNjJ9LHtcInhcIjogMTU2LFwieVwiOiAxNjJ9LHtcInhcIjogMTcxLFwieVwiOiAxNjB9LHtcInhcIjogMTczLFwieVwiOiAxNjB9LHtcInhcIjogMTg2LFwieVwiOiAxNjB9LHtcInhcIjogMTk1LFwieVwiOiAxNjB9LHtcInhcIjogMTk4LFwieVwiOiAxNjF9LHtcInhcIjogMjAzLFwieVwiOiAxNjN9LHtcInhcIjogMjA4LFwieVwiOiAxNjN9LHtcInhcIjogMjA2LFwieVwiOiAxNjR9LHtcInhcIjogMjAwLFwieVwiOiAxNjd9LHtcInhcIjogMTg3LFwieVwiOiAxNzJ9LHtcInhcIjogMTc0LFwieVwiOiAxNzl9LHtcInhcIjogMTcyLFwieVwiOiAxODF9LHtcInhcIjogMTUzLFwieVwiOiAxOTJ9LHtcInhcIjogMTM3LFwieVwiOiAyMDF9LHtcInhcIjogMTIzLFwieVwiOiAyMTF9LHtcInhcIjogMTEyLFwieVwiOiAyMjB9LHtcInhcIjogOTksXCJ5XCI6IDIyOX0se1wieFwiOiA5MCxcInlcIjogMjM3fSx7XCJ4XCI6IDgwLFwieVwiOiAyNDR9LHtcInhcIjogNzMsXCJ5XCI6IDI1MH0se1wieFwiOiA2OSxcInlcIjogMjU0fSx7XCJ4XCI6IDY5LFwieVwiOiAyNTJ9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gIF07XG5cbiAgU2hhcGVEZXRlY3Rvci5wcm90b3R5cGUuc3BvdCA9IGZ1bmN0aW9uKHBvaW50cywgcGF0dGVybk5hbWUpIHtcblxuICAgIGlmIChwYXR0ZXJuTmFtZSA9PSBudWxsKSB7XG4gICAgICBwYXR0ZXJuTmFtZSA9ICcnO1xuICAgIH1cblxuICAgIHZhciBkaXN0YW5jZSwgcGF0dGVybiwgc2NvcmU7XG4gICAgdmFyIHN0cm9rZSA9IG5ldyBTdHJva2UocG9pbnRzKTtcbiAgICB2YXIgYmVzdERpc3RhbmNlID0gK0luZmluaXR5O1xuICAgIHZhciBiZXN0UGF0dGVybiA9IG51bGw7XG4gICAgdmFyIGJlc3RTY29yZSA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhdHRlcm4gPSB0aGlzLnBhdHRlcm5zW2ldO1xuXG4gICAgICBpZiAocGF0dGVybi5uYW1lLmluZGV4T2YocGF0dGVybk5hbWUpID4gLTEpIHtcbiAgICAgICAgZGlzdGFuY2UgPSBzdHJva2UuZGlzdGFuY2VBdEJlc3RBbmdsZShwYXR0ZXJuKTtcbiAgICAgICAgc2NvcmUgPSAxLjAgLSBkaXN0YW5jZSAvIF9oYWxmRGlhZ29uYWw7XG5cbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgYmVzdERpc3RhbmNlICYmIHNjb3JlID4gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgICBiZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgICBiZXN0UGF0dGVybiA9IHBhdHRlcm4ubmFtZTtcbiAgICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXR0ZXJuOiBiZXN0UGF0dGVybixcbiAgICAgIHNjb3JlOiBiZXN0U2NvcmVcbiAgICB9O1xuICB9O1xuXG4gIFNoYXBlRGV0ZWN0b3IucHJvdG90eXBlLmxlYXJuID0gZnVuY3Rpb24obmFtZSwgcG9pbnRzKSB7XG5cbiAgICByZXR1cm4gdGhpcy5wYXR0ZXJucy5wdXNoKG5ldyBTdHJva2UocG9pbnRzLCBuYW1lKSk7XG4gIH07XG5cbiAgcmV0dXJuIFNoYXBlRGV0ZWN0b3I7XG59KSk7XG4iLCJjb25zdCB0b3VjaCA9IHJlcXVpcmUoJy4vdG91Y2gnKTtcbmNvbnN0IHVpID0gcmVxdWlyZSgnLi91aScpO1xuY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB2aWRlbyA9IHJlcXVpcmUoJy4vdmlkZW8nKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0V2luZG93KCkge1xuICB3aW5kb3cua2FuID0ge1xuICAgIGN1cnJlbnRDb2xvcjogJyMyQjVFMkUnLFxuICAgIGNvbXBvc2l0aW9uOiBbXSxcbiAgICBjb21wb3NpdGlvbkludGVydmFsOiBudWxsLFxuICAgIGNvbXBvc2l0aW9uVGltZW91dDogbnVsbCxcbiAgICBzb3VuZFRpbWVvdXRzOiBbXSxcbiAgICBsYXN0RXZlbnQ6IG51bGwsXG4gICAgaW50ZXJhY3Rpb246IGZhbHNlLFxuICAgIG1vdmVzOiBbXSxcbiAgICBwbGF5aW5nOiBmYWxzZSxcbiAgICBwaW5jaGluZzogZmFsc2UsXG4gICAgcGluY2hlZEdyb3VwOiBudWxsLFxuICAgIHBpbmNoZWRUdXQ6IG51bGwsXG4gICAgcGF0aERhdGE6IHt9LFxuICAgIHNoYXBlUGF0aDogbnVsbCxcbiAgICBwcmV2QW5nbGU6IG51bGwsXG4gICAgc2lkZXM6IFtdLFxuICAgIHNpZGU6IFtdLFxuICAgIGNvcm5lcnM6IFtdLFxuICAgIGxhc3RTY2FsZTogMSxcbiAgICBsYXN0Um90YXRpb246IDAsXG4gICAgb3JpZ2luYWxQb3NpdGlvbjogbnVsbCxcbiAgICB0dXRvcmlhbENvbXBsZXRpb246IHtcbiAgICAgIFwiZmlsbFwiOiBmYWxzZSxcbiAgICAgIFwicGluY2hcIjogZmFsc2UsXG4gICAgICBcInN3aXBlXCI6IGZhbHNlXG4gICAgfSxcbiAgICBpbmFjdGl2aXR5VGltZW91dDogbnVsbCxcbiAgICBwbGF5UHJvbXB0VGltZW91dDogbnVsbCxcbiAgICB1c2VySGFzRHJhd25GaXJzdFNoYXBlOiBmYWxzZSxcbiAgICBmaXJzdFRpbWVQbGF5aW5nOiB0cnVlLFxuICAgIHNoYXBlc1NpbmNlVHV0OiAwLFxuICAgIHJlZnJlc2hDaGVja0ludGVydmFsOiBudWxsLFxuICAgIHNoYTogbnVsbCxcbiAgICBzY2hlZHVsZWRPdmVybGF5OiBudWxsLFxuICAgIGNvbnRpbnVlQ291bnRkb3duSW50ZXJ2YWw6IG51bGwsXG4gICAgc2hhcGVTb3VuZHM6IG51bGwsXG4gIH07XG59XG5cbiQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBydW4oKSB7XG4gICAgcmVzZXRXaW5kb3coKTtcbiAgICB1dGlsLnNldFNoYSgpO1xuICAgIHVpLmluaXQoKTtcbiAgICBvdmVybGF5cy5pbml0KCk7XG4gICAgdGltaW5nLmluaXQoKTtcbiAgICBzb3VuZC5pbml0KClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gc291bmQuaW5pdCgpIGlzIGFzeW5jIGJlY2F1c2UgaXQgbG9hZHMgaW4gdGhlIHNvdW5kIGZpbGVzXG4gICAgICAgIHRvdWNoLmluaXQoKTtcbiAgICAgIH0pXG4gICAgICAuZmFpbCgoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdlcnJvciBpbml0dGluZyBzaGFwZSBzb3VuZHM6JywgZSk7XG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgcnVuKCk7XG4gIH0gY2F0Y2goZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyB3YWl0IDUgc2Vjb25kcyB0aGVuIHJlbG9hZFxuICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSwgNSAqIDEwMDApO1xuICB9XG59KTtcbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IHRvdWNoID0gcmVxdWlyZSgnLi90b3VjaCcpO1xuY29uc3QgdmlkZW8gPSByZXF1aXJlKCcuL3ZpZGVvJyk7XG5jb25zdCB0aW1pbmcgPSByZXF1aXJlKCcuL3RpbWluZycpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmNvbnN0IGhhbW1lckNhbnZhcyA9IHRvdWNoLmhhbW1lckNhbnZhcztcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5jb25zdCB0YXBFdmVudCA9ICdjbGljayB0YXAgdG91Y2gnO1xuXG5jb25zdCAkY2FyZHNXcmFwID0gJGJvZHkuZmluZCgnLm92ZXJsYXkudGlwcyAuY2FyZC13cmFwJyk7XG5jb25zdCAkY2FyZEl0ZW1zID0gJGNhcmRzV3JhcC5maW5kKCdhcnRpY2xlJyk7XG5jb25zdCBjYXJkc0NvdW50ID0gJGNhcmRJdGVtcy5sZW5ndGg7XG5jb25zdCAkZm9vdGVyID0gJGJvZHkuZmluZCgnLm92ZXJsYXkudGlwcyAuZm9vdGVyJyk7XG5cbmNvbnN0ICRzaGFyZVBob25lID0gJGJvZHkuZmluZCgnI3Bob25lJyk7XG5jb25zdCAkc2hhcmVLZXlwYWQgPSAkYm9keS5maW5kKCcua2V5cGFkJyk7XG5cbmNvbnN0IGFsbE92ZXJsYXlzID0gWydpbnRybycsICdwbGF5LXByb21wdCcsICdzaGFyZS1wcm9tcHQnLCAnY29udGludWUnLCAndGlwcycsICdzaGFyZSddO1xuY29uc3Qgb3ZlcmxheU9wZW5DbGFzc2VzID0gYWxsT3ZlcmxheXMubWFwKChvdmVybGF5KSA9PiBgJHtvdmVybGF5fS1hY3RpdmVgKS5qb2luKCcgJyk7XG5cbmNvbnN0IG92ZXJsYXlBY3RpdmVDbGFzcyA9ICdvdmVybGF5LWFjdGl2ZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuT3ZlcmxheShvdmVybGF5TmFtZSkge1xuICAvLyBjb25zb2xlLmxvZygnYXR0ZW1wdGluZyB0byBvcGVuIG92ZXJsYXknLCBvdmVybGF5TmFtZSk7XG4gIGlmICh3aW5kb3cua2FuLm92ZXJsYXlzID09PSBmYWxzZSkgcmV0dXJuO1xuICBpZiAoYWxsT3ZlcmxheXMuaW5jbHVkZXMob3ZlcmxheU5hbWUpKSB7XG4gICAgaWYgKHdpbmRvdy5rYW4ucGluY2hpbmcgPT09IHRydWUgfHwgd2luZG93Lmthbi5wYW5uaW5nID09PSB0cnVlKSB7XG4gICAgICBpZiAob3ZlcmxheU5hbWUgPT09ICdjb250aW51ZScpIHtcbiAgICAgICAgdGltaW5nLnByZXZlbnRJbmFjdGl2aXR5VGltZW91dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NjaGVkdWxpbmcgb3ZlcmxheScsIG92ZXJsYXlOYW1lKTtcbiAgICAgICAgd2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5ID0gb3ZlcmxheU5hbWU7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuICAgICRib2R5LmFkZENsYXNzKG92ZXJsYXlBY3RpdmVDbGFzcyk7XG4gICAgJGJvZHkuZmluZCgnLm92ZXJsYXk6bm90KC50aXBzKScpLm9uKHRhcEV2ZW50LCAoKSA9PiB7XG4gICAgICBjbG9zZUFuZFJlc2V0T3ZlcmxheXMoKTtcbiAgICB9KTtcblxuICAgIHN3aXRjaCAob3ZlcmxheU5hbWUpIHtcbiAgICAgIGNhc2UgJ2ludHJvJzpcbiAgICAgICAgb3BlbkludHJvT3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BsYXktcHJvbXB0JzpcbiAgICAgICAgaWYgKHV0aWwuYW55U2hhcGVzT25DYW52YXMoKSkge1xuICAgICAgICAgIG9wZW5QbGF5UHJvbXB0T3ZlcmxheSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9wZW5PdmVybGF5KCdwbGF5LXByb21wdCcpO1xuICAgICAgICAgIH0sIHRpbWluZy5wbGF5UHJvbXB0RGVsYXkgLyAyKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NoYXJlLXByb21wdCc6XG4gICAgICAgIG9wZW5TaGFyZVByb21wdE92ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjb250aW51ZSc6XG4gICAgICAgIG9wZW5Db250aW51ZU92ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aXBzJzpcbiAgICAgICAgb3BlblRpcHNPdmVybGF5KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2hhcmUnOlxuICAgICAgICBvcGVuU2hhcmVPdmVybGF5KCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZygndW5hYmxlIHRvIG9wZW4gdW5rbm93biBvdmVybGF5Jywgb3ZlcmxheU5hbWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5JbnRyb092ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdpbnRyby1hY3RpdmUnKTtcbn1cblxuZnVuY3Rpb24gb3BlblBsYXlQcm9tcHRPdmVybGF5KCkge1xuICAkYm9keS5hZGRDbGFzcygncGxheS1wcm9tcHQtYWN0aXZlJyk7XG59XG5cbmZ1bmN0aW9uIG9wZW5TaGFyZVByb21wdE92ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdzaGFyZS1wcm9tcHQtYWN0aXZlJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldENvbnRpbnVlQ291bnRkb3duKCkge1xuICAkKCcub3ZlcmxheS5jb250aW51ZSAuY291bnRkb3duLW51bScpLmh0bWwocGFyc2VJbnQodGltaW5nLmNvbnRpbnVlSW5hY3Rpdml0eURlbGF5IC8gMTAwMCkpO1xuICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4uY29udGludWVDb3VudGRvd25JbnRlcnZhbCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Db250aW51ZU92ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdjb250aW51ZS1hY3RpdmUnKTtcblxuICByZXNldENvbnRpbnVlQ291bnRkb3duKCk7XG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0KTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQpO1xuXG4gIHdpbmRvdy5rYW4uY29udGludWVDb3VudGRvd25JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBsZXQgJGNvdW50ZG93bk51bVdyYXAgPSAkKCcub3ZlcmxheS5jb250aW51ZSAuY291bnRkb3duLW51bScpO1xuICAgIGxldCBjb3VudCA9IHBhcnNlSW50KCRjb3VudGRvd25OdW1XcmFwLmh0bWwoKSk7XG4gICAgaWYgKGNvdW50ID4gMSkge1xuICAgICAgJGNvdW50ZG93bk51bVdyYXAuaHRtbChjb3VudCAtIDEpO1xuICAgIH1cbiAgfSwgMTAwMCk7XG5cbiAgd2luZG93Lmthbi5pbmFjdGl2aXR5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHZpZGVvLmVudGVyVHV0b3JpYWxNb2RlKCk7XG4gIH0sIHRpbWluZy5jb250aW51ZUluYWN0aXZpdHlEZWxheSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5UaXBzT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3RpcHMtYWN0aXZlJyk7XG4gIGFjdGl2YXRlVGlwc0NhcmRzKCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5TaGFyZU92ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdzaGFyZS1hY3RpdmUnKTtcbn1cblxuXG4vLyBjYXJkIHNsaWRlciBuYXZpZ2F0aW9uXG5leHBvcnQgZnVuY3Rpb24gY2FyZE5hdk5leHQoKSB7XG4gIGxldCAkb2xkID0gJGJvZHkuZmluZCgnLmNhcmQtd3JhcCAuY3VycmVudCcpO1xuICBsZXQgJG5ldyA9ICgkb2xkLm5leHQoKS5sZW5ndGgpID8gJG9sZC5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkbmV4dCA9ICgkbmV3Lm5leHQoKS5sZW5ndGgpID8gJG5ldy5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkdGhpcmQgPSAoJG5leHQubmV4dCgpLmxlbmd0aCkgPyAkbmV4dC5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCkubmV4dCgpO1xuICBsZXQgc2xpZGUgPSAkbmV3LmluZGV4KCk7XG4gICRvbGQucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygncmVtb3ZlJyk7XG4gICRuZXcucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnY3VycmVudCcpO1xuICAkbmV4dC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCduZXh0Jyk7XG4gICR0aGlyZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCd0aGlyZCcpO1xuICB1cGRhdGVDYXJkQ291bnRlcihzbGlkZSArIDEsIGNhcmRzQ291bnQpO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAkb2xkLnJlbW92ZUNsYXNzKCk7XG4gIH0sIDYwMCk7XG59XG5cbi8vIHRpcHMgY2FyZCBpbnRlcmFjdGlvbnNcbmZ1bmN0aW9uIGNhcmRJbnRlcmFjdGlvbnMoKSB7XG4gIGxldCB0aW1lT2ZMYXN0SW50ZXJhY3Rpb24gPSAwO1xuXG4gICRib2R5LmZpbmQoJy5vdmVybGF5Jykub24odGFwRXZlbnQsIGUgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGltZU9mTGFzdEludGVyYWN0aW9uID4gKGN1cnJlbnRUaW1lIC0gMjUwKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aW1lT2ZMYXN0SW50ZXJhY3Rpb24gPSBjdXJyZW50VGltZTtcblxuICAgIGlmICggJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhcmQtd3JhcCcpLmxlbmd0aCA9PSAxICkge1xuICAgICAgLy8gZGlyZWN0bHkgb24gYSBjYXJkLCBuYXZpZ2F0ZSB0byB0aGUgbmV4dCBvbmVcbiAgICAgIGNhcmROYXZOZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG91dHNpZGUgZWxlbWVudHMsIGNsb3NlIGV2ZXJ5dGhpbmcgYW5kIHJlc2V0XG4gICAgICBjbG9zZUFuZFJlc2V0T3ZlcmxheXMoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXNldFRpcHMoKSB7XG4gICRjYXJkSXRlbXMucmVtb3ZlQ2xhc3MoKTtcbiAgJHNoYXJlUGhvbmUuaHRtbCgnJyk7XG59XG5cbi8vIGNsb3NlIGFuZCByZXNldCB0aXBzXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VBbmRSZXNldE92ZXJsYXlzKCkge1xuICAkYm9keS5yZW1vdmVDbGFzcygnb3ZlcmxheS1hY3RpdmUnKTtcbiAgJGJvZHkucmVtb3ZlQ2xhc3Mob3ZlcmxheU9wZW5DbGFzc2VzKTtcbiAgcmVzZXRUaXBzKCk7XG59XG5cbi8vIGRlYWwgYSBmcmVzaCBzdGFjayBvZiBjYXJkc1xuZnVuY3Rpb24gYWN0aXZhdGVUaXBzQ2FyZHMoKSB7XG4gIGxldCAkbmV3ID0gJGNhcmRJdGVtcy5maXJzdCgpO1xuICBsZXQgJG5leHQgPSAoJG5ldy5uZXh0KCkubGVuZ3RoKSA/ICRuZXcubmV4dCgpIDogJGNhcmRJdGVtcy5maXJzdCgpO1xuICBsZXQgJHRoaXJkID0gKCRuZXh0Lm5leHQoKS5sZW5ndGgpID8gJG5leHQubmV4dCgpIDogJGNhcmRJdGVtcy5maXJzdCgpLm5leHQoKTtcbiAgJGNhcmRJdGVtcy5yZW1vdmVDbGFzcygpO1xuICAkbmV3LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgJG5leHQucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnbmV4dCcpO1xuICAkdGhpcmQucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygndGhpcmQnKTtcbiAgdXBkYXRlQ2FyZENvdW50ZXIoMSwgY2FyZHNDb3VudCk7XG59XG5cbi8vIGNvdW50aW5nIGNhcmRzXG5mdW5jdGlvbiB1cGRhdGVDYXJkQ291bnRlcihjdXJyZW50LCB0b3RhbCkge1xuICAkZm9vdGVyLmZpbmQoJy5jdXJyZW50JykuaHRtbChjdXJyZW50KTtcbiAgJGZvb3Rlci5maW5kKCcubmV4dCcpLmh0bWwodG90YWwpO1xufVxuXG4vLyBwaG9uZSBpbnB1dHNcbmZ1bmN0aW9uIHBob25lTnVtYmVySW5wdXRzKCkge1xuICAvLyBtYXNrIHRoZSBvdXRwdXRcbiAgJHNoYXJlUGhvbmUubWFzaygnMDAwLTAwMC0wMDAwJyk7XG4gIC8vIGdldCBpbnRlcmFjdGlvbnMgZnJvbSB0aGUga2V5cGFkXG4gICRzaGFyZUtleXBhZC5maW5kKCcubnVtJykub24odGFwRXZlbnQsIGUgPT4ge1xuICAgIGxldCBwaG9uZU51bWJlciA9ICRzaGFyZVBob25lLmh0bWwoKS50b1N0cmluZygpICsgJChlLnRhcmdldCkuaHRtbCgpLnRvU3RyaW5nKCk7XG4gICAgcGhvbmVOdW1iZXIgPSAkc2hhcmVQaG9uZS5tYXNrZWQocGhvbmVOdW1iZXIpO1xuICAgICRzaGFyZVBob25lLmh0bWwocGhvbmVOdW1iZXIpO1xuICB9KTtcbiAgLy8gY2xlYXIgdGhlIGRpc3BsYXlcbiAgJHNoYXJlS2V5cGFkLmZpbmQoJy5jbGVhcicpLm9uKHRhcEV2ZW50LCBlID0+IHtcbiAgICAkc2hhcmVQaG9uZS5odG1sKCcnKTtcbiAgfSk7XG4gIC8vIEZJWE1FOiBzZW5kIHNtc1xuICAvLyAkc2hhcmVLZXlwYWQuZmluZCgnLnNlbmQnKS5vbih0YXBFdmVudCwgZSA9PiB7fSk7XG59XG5cbi8vIFwicmFuZG9tbHlcIiBwbGFjZSBmaWRkbHkgYml0cyBvbiB0aGUgY2FyZHNcbmZ1bmN0aW9uIHJhbmRvbUNhcmRHcmFwaGljcygpIHtcbiAgJGJvZHkuZmluZCgnLmNhcmQtd3JhcCBhcnRpY2xlJykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAkKGVsKS5hdHRyKCdkYXRhLWJnJywgaSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0VGlwcygpIHtcbiAgY2FyZEludGVyYWN0aW9ucygpO1xufVxuXG5mdW5jdGlvbiBpbml0U2hhcmUoKSB7XG4gIHBob25lTnVtYmVySW5wdXRzKCk7XG4gIHJhbmRvbUNhcmRHcmFwaGljcygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaW5pdFRpcHMoKTtcbiAgaW5pdFNoYXJlKCk7XG59XG4iLCJjb25zdCBTaGFwZURldGVjdG9yID0gcmVxdWlyZSgnLi9saWIvc2hhcGUtZGV0ZWN0b3InKTtcblxuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuY29uc3QgY29sb3IgPSByZXF1aXJlKCcuL2NvbG9yJyk7XG5cbmV4cG9ydCBjb25zdCBjb3JuZXJUaHJlc2hvbGREZWcgPSAzMDtcbmV4cG9ydCBjb25zdCB0aHJlc2hvbGREaXN0TXVsdGlwbGllciA9IDAuMTtcblxuZXhwb3J0IGNvbnN0IGRldGVjdG9yID0gbmV3IFNoYXBlRGV0ZWN0b3IoU2hhcGVEZXRlY3Rvci5kZWZhdWx0U2hhcGVzKTtcblxuZXhwb3J0IGNvbnN0IHNoYXBlTmFtZXMgPSBbXCJsaW5lXCIsIFwiY2lyY2xlXCIsIFwic3F1YXJlXCIsIFwidHJpYW5nbGVcIiwgXCJvdGhlclwiXTtcblxuZnVuY3Rpb24gY2xlYXJQb3BzKCkge1xuICBjb25zdCBwb3BzID0gdXRpbC5nZXRBbGxQb3BzKCk7XG4gIHBvcHMuZm9yRWFjaCgocG9wKSA9PiBwb3AucmVtb3ZlKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveUdyb3VwUG9wcyhncm91cCkge1xuICAvLyBjb25zb2xlLmxvZygnZGVzdHJveWluZyBwb3BzJyk7XG4gIGNvbnN0IGdyb3VwUG9wc0JlZm9yZSA9IHV0aWwuZ2V0R3JvdXBQb3BzKGdyb3VwKTtcbiAgLy8gY29uc29sZS5sb2coJ3BvcHMgdG8gYmUgZGVzdHJveWVkJywgZ3JvdXBQb3BzQmVmb3JlKTtcbiAgaWYgKGdyb3VwUG9wc0JlZm9yZS5sZW5ndGggPiAwKSB7XG4gICAgZ3JvdXBQb3BzQmVmb3JlLmZvckVhY2goKHBvcCkgPT4gcG9wLnJlbW92ZSgpKTtcbiAgfVxuICBjb25zdCBncm91cFBvcHNBZnRlciA9IHV0aWwuZ2V0R3JvdXBQb3BzKGdyb3VwKTtcbiAgLy8gY29uc29sZS5sb2coJ2dyb3VwIHBvcHMgYWZ0ZXInLCBncm91cFBvcHNBZnRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxsSW5Hcm91cFBvcHNCeUlkKGdyb3VwSWQpIHtcbiAgY29uc3QgZ3JvdXAgPSBwYXBlci5wcm9qZWN0LmdldEl0ZW0oe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5pZCA9PT0gZ3JvdXBJZFxuICB9KTtcblxuICBpZiAoISFncm91cCAmJiBncm91cC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgZ3JvdXAuY2hpbGRyZW4uZm9yRWFjaCgoZ3JvdXBDaGlsZCkgPT4ge1xuICAgICAgaWYgKGdyb3VwQ2hpbGQubmFtZSA9PT0gJ2xvb3AnKSB7XG4gICAgICAgIHRvZ2dsZUZpbGwoZ3JvdXBDaGlsZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUZpbGwoaXRlbSkge1xuICBjb25zdCB0cmFuc3BhcmVudCA9IGNvbG9yLnRyYW5zcGFyZW50O1xuICAvLyBjb25zb2xlLmxvZygnaGl0Jyk7XG4gIGxldCBwYXJlbnQgPSBpdGVtLnBhcmVudDtcblxuICAvLyBjb25zb2xlLmxvZygnaGl0IGl0ZW0nLCBpdGVtKTtcbiAgLy8gY29uc29sZS5sb2coJ2hpdCBwYXJlbnQnLCBwYXJlbnQpO1xuXG4gIGlmIChpdGVtLmRhdGEuaW50ZXJpb3IpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnaW50ZXJpb3InKTtcbiAgICBpdGVtLmRhdGEudHJhbnNwYXJlbnQgPSAhaXRlbS5kYXRhLnRyYW5zcGFyZW50O1xuXG4gICAgaWYgKGl0ZW0uZGF0YS50cmFuc3BhcmVudCkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RyYW5zcGFyZW50Jyk7XG4gICAgICBpdGVtLmZpbGxDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgaXRlbS5zdHJva2VDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnbm90IHRyYW5zcGFyZW50Jyk7XG4gICAgICBpdGVtLmZpbGxDb2xvciA9IHBhcmVudC5kYXRhLmNvbG9yO1xuICAgICAgaXRlbS5zdHJva2VDb2xvciA9IHBhcmVudC5kYXRhLmNvbG9yO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4ubW92ZXMucHVzaCh7XG4gICAgICB0eXBlOiAnZmlsbENoYW5nZScsXG4gICAgICBpZDogaXRlbS5pZCxcbiAgICAgIGZpbGw6IHBhcmVudC5kYXRhLmNvbG9yLFxuICAgICAgdHJhbnNwYXJlbnQ6IGl0ZW0uZGF0YS50cmFuc3BhcmVudFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKCdub3QgaW50ZXJpb3InKTtcbiAgICAvLyBjaGVjayBpZiBpdGVtIGlzIGEgcG9wLCBiZWNhdXNlIHRoZW4gd2UnbGwgZmlsbCB0aGUgcG9wJ3MgcGFyZW50XG4gICAgaWYgKCEhaXRlbS5kYXRhICYmIGl0ZW0uZGF0YS5wb3AgPT09IHRydWUpIHtcbiAgICAgIGlmICghIWl0ZW0ucGFyZW50KSB7XG4gICAgICAgIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgICAgICAgZmlsbEluR3JvdXBQb3BzQnlJZChpdGVtLnBhcmVudC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuVXBHcm91cChncm91cCkge1xuICAvLyBjb25zb2xlLmxvZygnY2xlYW5pbmcgdXAgZ3JvdXAnKTtcbiAgY29uc3QgYWNjZXB0YWJsZU5hbWVzID0gWydtYXNrJywgJ291dGVyJywgJ3NoYXBlUGF0aCcsICdsb29wJywgJ3BvcCddO1xuXG4gIGdyb3VwLmNoaWxkcmVuLmZvckVhY2goKGdyb3VwQ2hpbGQpID0+IHtcbiAgICBpZiAoZ3JvdXBDaGlsZC5uYW1lID09PSBudWxsIHx8ICFhY2NlcHRhYmxlTmFtZXMuaW5jbHVkZXMoZ3JvdXBDaGlsZC5uYW1lKSB8fCAhZ3JvdXBDaGlsZC5sZW5ndGggPiAwKSB7XG4gICAgICBncm91cENoaWxkLnJlbW92ZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGdyb3VwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUG9wcygpIHtcbiAgY29uc3QgZnJlc2hHcm91cHMgPSB1dGlsLmdldEZyZXNoR3JvdXBzKCk7XG4gIGNvbnN0IHBvcENhbmRpZGF0ZXMgPSB1dGlsLmdldFBvcENhbmRpZGF0ZXMoKTtcbiAgY29uc3QgYWxsUG9wcyA9IHV0aWwuZ2V0QWxsUG9wcygpO1xuICBwb3BDYW5kaWRhdGVzLnJldmVyc2UoKTtcbiAgLy8gY29uc29sZS5sb2coJ2ZyZXNoR3JvdXBzJywgZnJlc2hHcm91cHMpO1xuICAvLyBjb25zb2xlLmxvZygncG9wQ2FuZGlkYXRlcycsIHBvcENhbmRpZGF0ZXMpO1xuICAvLyBjbGVhclBvcHMoKTtcblxuICBmcmVzaEdyb3Vwcy5mb3JFYWNoKChmcmVzaEdyb3VwLCBpKSA9PiB7XG4gICAgLy8gaWYgKGkgPj0gNCkgcmV0dXJuO1xuICAgIC8vIGNvbnNvbGUubG9nKCdmcmVzaEdyb3VwJywgZnJlc2hHcm91cCk7XG5cbiAgICBjb25zdCBmcmVzaE91dGVyID0gZnJlc2hHcm91cC5fbmFtZWRDaGlsZHJlbi5tYXNrWzBdO1xuICAgIGZyZXNoT3V0ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgLy8gZnJlc2hPdXRlci52aXNpYmxlID0gdHJ1ZTtcbiAgICAvLyBmcmVzaE91dGVyLmZpbGxDb2xvciA9ICdibGFjayc7XG4gICAgLy8gZnJlc2hPdXRlci5zZWxlY3RlZCA9IHRydWU7XG4gICAgLy8gY29uc29sZS5sb2coJ2ZyZXNoT3V0ZXInLCBmcmVzaE91dGVyKTtcbiAgICAvLyBmcmVzaE91dGVyLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICBwb3BDYW5kaWRhdGVzLmZvckVhY2goKG90aGVyR3JvdXAsIGopID0+IHtcbiAgICAgIGNvbnN0IG90aGVyR3JvdXBPdXRlciA9IG90aGVyR3JvdXAuX25hbWVkQ2hpbGRyZW4ubWFza1swXTtcbiAgICAgIGlmIChmcmVzaEdyb3VwLmlkICE9PSBvdGhlckdyb3VwLmlkKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvdGhlckdyb3VwJywgb3RoZXJHcm91cCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvdGhlckdyb3VwT3V0ZXInLCBvdGhlckdyb3VwT3V0ZXIpO1xuICAgICAgICAvLyBvdGhlckdyb3VwT3V0ZXIuZmlsbENvbG9yID0gJ3doaXRlJztcbiAgICAgICAgb3RoZXJHcm91cE91dGVyLmJyaW5nVG9Gcm9udCgpO1xuICAgICAgICBsZXQgdGhpc1BvcCA9IGZyZXNoT3V0ZXIuaW50ZXJzZWN0KG90aGVyR3JvdXBPdXRlcik7XG4gICAgICAgIGlmICghIXRoaXNQb3AgJiYgdGhpc1BvcC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRJbmRleGVkUG9wQ29sb3IoaSArIGopO1xuICAgICAgICAgIGNvbnN0IHBvcENvbG9yID0gY29sb3IuZ2V0UmFuZG9tUG9wKCk7XG4gICAgICAgICAgdGhpc1BvcC5maWxsQ29sb3IgPSBwb3BDb2xvcjtcbiAgICAgICAgICB0aGlzUG9wLnN0cm9rZUNvbG9yID0gcG9wQ29sb3I7XG4gICAgICAgICAgdGhpc1BvcC5kYXRhLnBvcCA9IHRydWU7XG4gICAgICAgICAgdGhpc1BvcC5uYW1lID0gJ3BvcCc7XG4gICAgICAgICAgdGhpc1BvcC5kYXRhLnBvcEdyb3VwID0gZnJlc2hHcm91cC5pZDtcbiAgICAgICAgICB0aGlzUG9wLmRhdGEuaW50ZXJzZWN0aW5nR3JvdXAgPSBvdGhlckdyb3VwLmlkO1xuICAgICAgICAgIHRoaXNQb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgdGhpc1BvcC5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXNQb3AuYnJpbmdUb0Zyb250KCk7XG4gICAgICAgICAgZnJlc2hHcm91cC5hZGRDaGlsZCh0aGlzUG9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFuVXBHcm91cChmcmVzaEdyb3VwKTtcblxuICAgICAgICAvLyBmaWd1cmUgb3V0IGlmIHRoaXMgcG9wIGludGVyc2VjdHMgYW55IG90aGVyIHBvcHNcbiAgICAgICAgLy8gYWxsUG9wcy5mb3JFYWNoKChvdGhlclBvcCwgaykgPT4ge1xuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdjaGVja2luZyBvdGhlciBwb3AnLCBvdGhlclBvcCk7XG4gICAgICAgIC8vICAgaWYgKHRoaXNQb3AuaWQgIT09IG90aGVyUG9wLmlkICYmIHRoaXNQb3AuaW50ZXJzZWN0cyhvdGhlclBvcCkpIHtcbiAgICAgICAgLy8gICAgIGxldCBwb3BJbnRlcnNlY3Rpb24gPSB0aGlzUG9wLmdldEludGVyc2VjdGlvbnMob3RoZXJQb3ApO1xuICAgICAgICAvLyAgICAgaWYgKCEhcG9wSW50ZXJzZWN0aW9uICYmIHBvcEludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbiA9IG5ldyBQYXRoKFtwb3BJbnRlcnNlY3Rpb25dKVxuICAgICAgICAvLyAgICAgICBjb25zb2xlLmxvZygncG9wSW50ZXJzZWN0aW9uJywgcG9wSW50ZXJzZWN0aW9uKTtcbiAgICAgICAgLy8gICAgICAgLy8gY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRJbmRleGVkUG9wQ29sb3IoaSArIGogKyBrKTtcbiAgICAgICAgLy8gICAgICAgY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRSYW5kb21Qb3AoKTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmRhdGEucG9wID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmZpbGxDb2xvciA9IHBvcENvbG9yXG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5zdHJva2VDb2xvciA9IHBvcENvbG9yO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24udmlzaWJsZSA9IHRydWU7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24uYnJpbmdUb0Zyb250KCk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9KTtcblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnJlc2hHcm91cC5kYXRhLmZyZXNoID0gZmFsc2U7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0bGluZUdyb3VwKHRydWVkU2hhcGUpIHtcbiAgLy8gY29uc29sZS5sb2coJ3RydWVkU2hhcGUnLCB0cnVlZFNoYXBlKTtcbiAgbGV0IG91dGVyUGF0aCA9IG5ldyBQYXRoKCk7XG4gIG91dGVyUGF0aC5uYW1lID0gJ291dGVyJztcbiAgb3V0ZXJQYXRoLnZpc2libGUgPSB0cnVlO1xuXG4gIGxldCBtaWRkbGVQYXRoID0gbmV3IFBhdGgoKTtcbiAgbWlkZGxlUGF0aC5uYW1lID0gJ21pZGRsZSc7XG4gIGxldCBzaXplcyA9IFtdO1xuICBsZXQgYW5nbGUgPSBudWxsLCBsYXN0QW5nbGUgPSBudWxsLCBhbmdsZURlbHRhO1xuXG4gIGxldCBmaXJzdFRvcCA9IG51bGwsIGZpcnN0Qm90dG9tID0gbnVsbDtcbiAgbGV0IGxhc3RUb3AgPSBudWxsLCBsYXN0Qm90dG9tID0gbnVsbDtcblxuICBpZiAoISh0cnVlZFNoYXBlLmxlbmd0aCA+IDApKSByZXR1cm4gbmV3IEdyb3VwKG91dGVyUGF0aCwgbWlkZGxlUGF0aCk7XG5cbiAgbWlkZGxlUGF0aC5hZGQodHJ1ZWRTaGFwZS5maXJzdFNlZ21lbnQucG9pbnQpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdHJ1ZWRTaGFwZS5sZW5ndGg7IGkgKz0gMTApIHtcbiAgICB3aGlsZSAoc2l6ZXMubGVuZ3RoID4gMTApIHtcbiAgICAgIHNpemVzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiA5OyAvLyBUaGlzIGlzIGp1c3QgcmFuZG9tIHZhcmlhbmNlXG4gICAgc2l6ZXMucHVzaChzaXplKTtcblxuICAgIGxldCBjdW1TaXplID0gMDtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemVzLmxlbmd0aDsgaisrKSB7XG4gICAgICBjdW1TaXplICs9IHNpemVzW2pdO1xuICAgIH1cbiAgICBsZXQgYXZnU2l6ZSA9IE1hdGgubWF4KDUsICgoY3VtU2l6ZSAvIHNpemVzLmxlbmd0aCkgKyBzaXplKSAvIDIpO1xuXG4gICAgY29uc3QgcG9pbnQgPSB0cnVlZFNoYXBlLmdldFBvaW50QXQoaSk7XG4gICAgY29uc3Qgbm9ybWFsID0gdHJ1ZWRTaGFwZS5nZXROb3JtYWxBdChpKTtcblxuICAgIGNvbnN0IHRvcCA9IG5ldyBQb2ludChwb2ludC54ICsgbm9ybWFsLnggKiBhdmdTaXplLCBwb2ludC55ICsgbm9ybWFsLnkgKiBhdmdTaXplKTtcbiAgICBjb25zdCBib3R0b20gPSBuZXcgUG9pbnQocG9pbnQueCAtIG5vcm1hbC54ICogYXZnU2l6ZSwgcG9pbnQueSAtIG5vcm1hbC55ICogYXZnU2l6ZSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygncG9pbnQnLCBwb2ludCwgJ25vcm1hbCcsIG5vcm1hbCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3RvcCcsIHRvcCwgJ2JvdHRvbScsIGJvdHRvbSk7XG5cbiAgICBvdXRlclBhdGguYWRkKHRvcCk7XG4gICAgb3V0ZXJQYXRoLmluc2VydCgwLCBib3R0b20pO1xuICAgIG1pZGRsZVBhdGguYWRkKHBvaW50KTtcblxuICAgIGxhc3RBbmdsZSA9IGFuZ2xlO1xuXG4gICAgaWYgKGkgPT0gMTApIHtcbiAgICAgIGZpcnN0VG9wID0gdG9wO1xuICAgICAgZmlyc3RCb3R0b20gPSBib3R0b207XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3RUb3AgPSB0b3A7XG4gICAgICBsYXN0Qm90dG9tID0gYm90dG9tO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0cnVlZFNoYXBlLmNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgIGNvbnN0IGNlbnRlclRvcCA9IG5ldyBQb2ludCgoZmlyc3RUb3AueCArIGxhc3RUb3AueCkgLyAyLCAoZmlyc3RUb3AueSArIGxhc3RUb3AueSkgLyAyKTtcbiAgICBjb25zdCBjZW50ZXJCb3R0b20gPSBuZXcgUG9pbnQoKGZpcnN0Qm90dG9tLnggKyBsYXN0Qm90dG9tLngpIC8gMiwgKGZpcnN0Qm90dG9tLnkgKyBsYXN0Qm90dG9tLnkpIC8gMik7XG4gICAgY29uc3QgY2VudGVyID0gbmV3IFBvaW50KChjZW50ZXJUb3AueCArIGNlbnRlckJvdHRvbS54KSAvIDIsIChjZW50ZXJUb3AueSArIGNlbnRlckJvdHRvbS55KSAvIDIpO1xuXG4gICAgb3V0ZXJQYXRoLmFkZChjZW50ZXJUb3ApO1xuICAgIG91dGVyUGF0aC5pbnNlcnQoMCwgY2VudGVyQm90dG9tKTtcbiAgICBtaWRkbGVQYXRoLmFkZChjZW50ZXIpO1xuXG4gICAgb3V0ZXJQYXRoLmFkZChmaXJzdFRvcCk7XG4gICAgb3V0ZXJQYXRoLmluc2VydCgwLCBmaXJzdEJvdHRvbSk7XG4gICAgbWlkZGxlUGF0aC5jbG9zZWQgPSB0cnVlO1xuICB9XG5cbiAgb3V0ZXJQYXRoLmZsYXR0ZW4oNTApO1xuICBtaWRkbGVQYXRoLmZsYXR0ZW4oNTApO1xuICBvdXRlclBhdGguc2ltcGxpZnkoKTtcbiAgbWlkZGxlUGF0aC5zaW1wbGlmeSgpO1xuXG4gIG91dGVyUGF0aC5zZWxlY3RlZCA9IGZhbHNlO1xuICAvLyBtaWRkbGVQYXRoLnNlbGVjdGVkID0gdHJ1ZTtcbiAgb3V0ZXJQYXRoLm5hbWUgPSAnb3V0ZXInO1xuICBtaWRkbGVQYXRoLm5hbWUgPSAnbWlkZGxlJztcbiAgY29uc3QgcmV0dXJuR3JvdXAgPSBuZXcgR3JvdXAob3V0ZXJQYXRoLCBtaWRkbGVQYXRoKTtcbiAgcmV0dXJuIHJldHVybkdyb3VwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJ1ZWRTaGFwZShwYXRoKSB7XG4gIGxldCBwYXRoQ2xvbmUgPSBwYXRoLmNsb25lKCk7XG4gIHBhdGhDbG9uZS52aXNpYmxlID0gZmFsc2U7XG4gIC8vIGNvbnNvbGUubG9nKCdwYXRoQ2xvbmUnLCBwYXRoQ2xvbmUpO1xuICBsZXQgY29tcGxldGVkUGF0aCA9IGdldENvbXBsZXRlZFBhdGgocGF0aENsb25lKTtcbiAgLy8gY29tcGxldGVkUGF0aC5yZWR1Y2UoKTtcblxuICAvLyB0cnVlIHRoZSBwYXRoIVxuICBsZXQgdHJ1ZWRQYXRoID0gY29tcGxldGVkUGF0aDtcbiAgLy8gY29uc29sZS5sb2coJ3RydWVkUGF0aCcsIHRydWVkUGF0aCk7XG5cbiAgdHJ1ZWRQYXRoLnN0cm9rZVdpZHRoID0gcGF0aENsb25lLnN0cm9rZVdpZHRoO1xuXG4gIHBhdGhDbG9uZS5yZW1vdmUoKTtcbiAgcmV0dXJuIHRydWVkUGF0aDtcbn1cblxuLy8gZXh0ZW5kIG9yIHRyaW0gcGF0aCBpZiB0aGUgZW5kcyBhcmUgY2xvc2VcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wbGV0ZWRQYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgcGF0aENsb25lLnJlZHVjZSgpO1xuICBwYXRoQ2xvbmUuc2ltcGxpZnkoKTtcblxuICBsZXQgaW50ZXJzZWN0aW9ucyA9IHBhdGhDbG9uZS5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIC8vIHRyaW0gcGF0aCBpZiBlbmRzIGFyZSBjbG9zZVxuICAgIGxldCB0cmltbWVkUGF0aCA9IGdldFRyaW1tZWRQYXRoKHBhdGhDbG9uZSk7XG5cbiAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gdHJpbW1lZFBhdGg7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXh0ZW5kIHBhdGggdG8gc2VlIGlmIGFuIGludGVyc2VjdGlvbiBpcyBuZWFyXG4gICAgbGV0IGV4dGVuZGVkUGF0aCA9IGdldEV4dGVuZGVkUGF0aChwYXRoQ2xvbmUpO1xuICAgIGxldCBpbnRlcnNlY3Rpb25zID0gZXh0ZW5kZWRQYXRoLmdldEludGVyc2VjdGlvbnMoKTtcblxuICAgIC8vIHBhdGhDbG9uZS5yZW1vdmUoKTtcblxuICAgIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIHRyaW0gZXh0cmEgZXh0ZW5kZWQgcGF0aFxuICAgICAgbGV0IHRyaW1tZWRQYXRoID0gZ2V0VHJpbW1lZFBhdGgoZXh0ZW5kZWRQYXRoKTtcbiAgICAgIGV4dGVuZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXh0ZW5kZWQgcGF0aCBkb2VzIG5vdCBpbnRlcnNlY3QsIHJldHVybiB0aGUgb3JpZ2luYWwgcGF0aFxuICAgICAgZXh0ZW5kZWRQYXRoLnJlcGxhY2VXaXRoKGdldEJydXRlRXh0ZW5kZWRQYXRoKHBhdGhDbG9uZSkpO1xuICAgICAgaWYgKGV4dGVuZGVkUGF0aCAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW9ucyA9IGV4dGVuZGVkUGF0aC5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgICAgICAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCB0cmltbWVkUGF0aCA9IGdldFRyaW1tZWRQYXRoKGV4dGVuZGVkUGF0aCk7XG4gICAgICAgICAgZXh0ZW5kZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIWV4dGVuZGVkUGF0aCAmJiBleHRlbmRlZFBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGV4dGVuZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXRoQ2xvbmUudmlzaWJsZSA9IHRydWU7XG4gICAgICByZXR1cm4gcGF0aENsb25lO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcGVQcmVkaWN0aW9uKHBhdGgpIHtcbiAgbGV0IHByZWRpY3Rpb24gPSB7fTtcblxuICBsZXQgc2hhcGVKU09OID0gcGF0aC5leHBvcnRKU09OKCk7XG4gIGxldCBzaGFwZURhdGEgPSBwcm9jZXNzU2hhcGVEYXRhKHNoYXBlSlNPTik7XG4gIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHNoYXBlRGF0YSkpO1xuICBsZXQgc2hhcGVQcmVkaWN0aW9uID0gZGV0ZWN0b3Iuc3BvdChzaGFwZURhdGEpO1xuXG4gIGlmIChzaGFwZVByZWRpY3Rpb24uc2NvcmUgPT09IDApIHtcbiAgICAvLyBhbGdvcml0aG0gZG9lc24ndCBsaWtlIHZlcnRpY2FsIGxpbmVzIGZvciBzb21lIHJlYXNvblxuICAgIC8vIGlmIHRoZSBjZXJ0YWludHkgaXMgMCBpdCdzIHByb2JhYmx5IGEgbGluZVxuICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IFwibGluZVwiO1xuICAgIHByZWRpY3Rpb24uc2NvcmUgPSAwLjk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNoYXBlUHJlZGljdGlvbi5zY29yZSA+IDAuNSkge1xuICAgICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gc2hhcGVQcmVkaWN0aW9uLnBhdHRlcm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcHJlZGljdGlvbi5zY29yZSA9IHNoYXBlUHJlZGljdGlvbi5zY29yZTtcbiAgfVxuXG4gIGlmIChwYXRoLmNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgIGNvbnN0IGNsb3NlZFNoYXBlcyA9IFsndHJpYW5nbGUnLCAnc3F1YXJlJywgJ2NpcmNsZSddO1xuICAgIGlmIChjbG9zZWRTaGFwZXMuaW5jbHVkZXMocHJlZGljdGlvbi5wYXR0ZXJuKSA9PT0gZmFsc2UpIHtcbiAgICAgIC8vIGNsb3NlZCBzaGFwZSBzaG91bGQgYmUgb25lIG9mIHRoZSBhYm92ZSwgbWFrZSBhIHJhbmRvbSBwaWNrXG4gICAgICBwcmVkaWN0aW9uLnBhdHRlcm4gPSB1dGlsLnJhbmRvbVBpY2soY2xvc2VkU2hhcGVzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocGF0aC5pbnRlcnNlY3RzKHBhdGgpID09PSB0cnVlKSB7XG4gICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gJ290aGVyJztcbiAgICAvLyBjb25zdCBpbnRlcnNlY3RpbmdTaGFwZXMgPSBbJ3RyaWFuZ2xlJywgJ3NxdWFyZScsICdjaXJjbGUnLCAnb3RoZXInXTtcbiAgICAvLyBpZiAoaW50ZXJzZWN0aW5nU2hhcGVzLmluY2x1ZGVzKHByZWRpY3Rpb24ucGF0dGVybikgPT09IGZhbHNlKSB7XG4gICAgLy8gICBwcmVkaWN0aW9uLnBhdHRlcm4gPSB1dGlsLnJhbmRvbVBpY2soaW50ZXJzZWN0aW5nU2hhcGVzKTtcbiAgICAvLyB9XG4gIH0gZWxzZSB7XG4gICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gJ2xpbmUnOyAvLyBsaW5lcyBhcmUgdGhlIG9ubHkgc2hhcGUgdGhhdCBpcyBub3QgY2xvc2VkIGFuZCBkb2VzIG5vdCBpbnRlcnNlY3RcbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKCdzaGFwZSBwcmVkaWN0aW9uJywgcHJlZGljdGlvbik7XG5cbiAgcmV0dXJuIHByZWRpY3Rpb247XG59XG5cbi8vIGZsb29ycyB0aGUgY29vcmRpbmF0ZXMgb2YgYSBwb2ludFxuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVnZXJQb2ludChwb2ludCkge1xuICByZXR1cm4gbmV3IFBvaW50KE1hdGguZmxvb3IocG9pbnQueCksIE1hdGguZmxvb3IocG9pbnQueSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UG9pbnQocG9pbnQpIHtcbiAgcmV0dXJuIGAke01hdGguZmxvb3IocG9pbnQueCl9LCR7TWF0aC5mbG9vcihwb2ludC55KX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQb2ludChwb2ludFN0cikge1xuICBsZXQgc3BsaXQgPSBwb2ludFN0ci5zcGxpdCgnLCcpLm1hcCgobnVtKSA9PiBNYXRoLmZsb29yKG51bSkpO1xuXG4gIGlmIChzcGxpdC5sZW5ndGggPj0gMikge1xuICAgIHJldHVybiBuZXcgUG9pbnQoc3BsaXRbMF0sIHNwbGl0WzFdKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvc2VzdFBvaW50RnJvbVBhdGhEYXRhKHBvaW50LCBwYXRoRGF0YSkge1xuICBsZXQgbGVhc3REaXN0YW5jZSwgY2xvc2VzdFBvaW50O1xuXG4gIEJhc2UuZWFjaChwYXRoRGF0YSwgKGRhdHVtLCBpKSA9PiB7XG4gICAgbGV0IGRpc3RhbmNlID0gcG9pbnQuZ2V0RGlzdGFuY2UoZGF0dW0ucG9pbnQpO1xuICAgIGlmICghbGVhc3REaXN0YW5jZSB8fCBkaXN0YW5jZSA8IGxlYXN0RGlzdGFuY2UpIHtcbiAgICAgIGxlYXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgIGNsb3Nlc3RQb2ludCA9IGRhdHVtLnBvaW50O1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNsb3Nlc3RQb2ludCB8fCBwb2ludDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NTaGFwZURhdGEoanNvbikge1xuICBsZXQgcmV0dXJuU2hhcGUgPSBbXTtcbiAgbGV0IGpzb25PYmogPSBKU09OLnBhcnNlKGpzb24pWzFdOyAvLyB6ZXJvIGluZGV4IGlzIHN0cmluZ2lmaWVkIHR5cGUgKGUuZy4gXCJQYXRoXCIpXG5cbiAgaWYgKCdzZWdtZW50cycgaW4ganNvbk9iaikge1xuICAgIGxldCBzZWdtZW50cyA9IGpzb25PYmouc2VnbWVudHM7XG4gICAgQmFzZS5lYWNoKHNlZ21lbnRzLCAoc2VnbWVudCwgaSkgPT4ge1xuICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGxldCBwb3NpdGlvbkluZm8gPSBzZWdtZW50WzBdOyAvLyBpbmRleGVzIDEgYW5kIDIgYXJlIHN1cGVyZmx1b3VzIG1hdHJpeCBkZXRhaWxzXG4gICAgICAgIHJldHVyblNoYXBlLnB1c2goe1xuICAgICAgICAgIHg6IHBvc2l0aW9uSW5mb1swXSxcbiAgICAgICAgICB5OiBwb3NpdGlvbkluZm9bMV1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVyblNoYXBlLnB1c2goe1xuICAgICAgICAgIHg6IHNlZ21lbnRbMF0sXG4gICAgICAgICAgeTogc2VnbWVudFsxXVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJldHVyblNoYXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEludGVyaW9yQ3VydmVzKHBhdGgpIHtcbiAgY29uc3QgdHJhbnNwYXJlbnQgPSBjb2xvci50cmFuc3BhcmVudDtcblxuICBsZXQgaW50ZXJpb3JDdXJ2ZXMgPSBbXTtcblxuICBsZXQgcGF0aENsb25lID0gcGF0aC5jbG9uZSgpO1xuICBsZXQgaW50ZXJzZWN0aW9ucyA9IHBhdGhDbG9uZS5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIGxldCBkaXZpZGVkUGF0aCA9IHBhdGhDbG9uZS5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gICAgLy8gY29uc29sZS5sb2coZGl2aWRlZFBhdGgpO1xuXG4gICAgaWYgKGRpdmlkZWRQYXRoLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcpIHtcbiAgICAgIEJhc2UuZWFjaChkaXZpZGVkUGF0aC5jaGlsZHJlbiwgKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmIChjaGlsZC5sZW5ndGggPiAwICYmIGNoaWxkLmNsb3NlZCkge1xuICAgICAgICAgIGxldCBlbmNsb3NlZExvb3AgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICAgIGlmIChwYXRoQ2xvbmUuY2xvc2VkKSB7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZmlsbENvbG9yID0gcGF0aENsb25lLnN0cm9rZUNvbG9yO1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEuaW50ZXJpb3IgPSB0cnVlO1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS5pbnRlcmlvciA9IHRydWU7XG4gICAgICAgICAgZW5jbG9zZWRMb29wLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIGVuY2xvc2VkTG9vcC5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIGludGVyaW9yQ3VydmVzLnB1c2goZW5jbG9zZWRMb29wKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhdGhDbG9uZS5jbG9zZWQpIHtcbiAgICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IHBhdGhDbG9uZS5jbG9uZSgpO1xuICAgICAgICBlbmNsb3NlZExvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIGVuY2xvc2VkTG9vcC5maWxsQ29sb3IgPSBwYXRoQ2xvbmUuc3Ryb2tlQ29sb3I7XG4gICAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgaW50ZXJpb3JDdXJ2ZXMucHVzaChlbmNsb3NlZExvb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocGF0aENsb25lLmNsb3NlZCkge1xuICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IHBhdGhDbG9uZS5jbG9uZSgpO1xuICAgICAgZW5jbG9zZWRMb29wLnZpc2libGUgPSB0cnVlO1xuICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHBhdGhDbG9uZS5zdHJva2VDb2xvcjtcbiAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLnRyYW5zcGFyZW50ID0gZmFsc2U7XG4gICAgICBpbnRlcmlvckN1cnZlcy5wdXNoKGVuY2xvc2VkTG9vcCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGludGVyaW9yQ3VydmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5kZWRQYXRoKHBhdGgsIGJydXRlRm9yY2UgPSBmYWxzZSkge1xuICBsZXQgZXh0ZW5kZWRQYXRoID0gcGF0aC5jbG9uZSgpO1xuICBleHRlbmRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuXG4gIGNvbnN0IHRocmVzaG9sZERpc3QgPSB0aHJlc2hvbGREaXN0TXVsdGlwbGllciAqIGV4dGVuZGVkUGF0aC5sZW5ndGg7XG5cbiAgY29uc3QgZmlyc3RTZWdtZW50ID0gZXh0ZW5kZWRQYXRoLmZpcnN0U2VnbWVudDtcbiAgY29uc3QgbmV4dFNlZ21lbnQgPSBmaXJzdFNlZ21lbnQubmV4dDtcbiAgY29uc3Qgc3RhcnRBbmdsZSA9IE1hdGguYXRhbjIobmV4dFNlZ21lbnQucG9pbnQueSAtIGZpcnN0U2VnbWVudC5wb2ludC55LCBuZXh0U2VnbWVudC5wb2ludC54IC0gZmlyc3RTZWdtZW50LnBvaW50LngpOyAvLyByYWRcbiAgY29uc3QgaW52ZXJzZVN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlICsgTWF0aC5QSTtcbiAgY29uc3QgZXh0ZW5kZWRTdGFydFBvaW50ID0gbmV3IFBvaW50KGZpcnN0U2VnbWVudC5wb2ludC54ICsgKE1hdGguY29zKGludmVyc2VTdGFydEFuZ2xlKSAqIHRocmVzaG9sZERpc3QgLyAyKSwgZmlyc3RTZWdtZW50LnBvaW50LnkgKyAoTWF0aC5zaW4oaW52ZXJzZVN0YXJ0QW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpKTtcbiAgZXh0ZW5kZWRQYXRoLmluc2VydCgwLCBleHRlbmRlZFN0YXJ0UG9pbnQpO1xuXG4gIGNvbnN0IGxhc3RTZWdtZW50ID0gZXh0ZW5kZWRQYXRoLmxhc3RTZWdtZW50O1xuICBjb25zdCBwZW5TZWdtZW50ID0gbGFzdFNlZ21lbnQucHJldmlvdXM7IC8vIHBlbnVsdGltYXRlXG4gIGNvbnN0IGVuZEFuZ2xlID0gTWF0aC5hdGFuMihsYXN0U2VnbWVudC5wb2ludC55IC0gcGVuU2VnbWVudC5wb2ludC55LCBsYXN0U2VnbWVudC5wb2ludC54IC0gcGVuU2VnbWVudC5wb2ludC54KTsgLy8gcmFkXG4gIGNvbnN0IGV4dGVuZGVkRW5kUG9pbnQgPSBuZXcgUG9pbnQobGFzdFNlZ21lbnQucG9pbnQueCArIChNYXRoLmNvcyhlbmRBbmdsZSkgKiB0aHJlc2hvbGREaXN0IC8gMiksIGxhc3RTZWdtZW50LnBvaW50LnkgKyAoTWF0aC5zaW4oZW5kQW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpKTtcbiAgZXh0ZW5kZWRQYXRoLmFkZChleHRlbmRlZEVuZFBvaW50KTtcblxuICAvLyBleHRlbmRlZFBhdGgudmlzaWJsZSA9IHRydWU7XG5cbiAgcmV0dXJuIGV4dGVuZGVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJydXRlRXh0ZW5kZWRQYXRoKHBhdGgpIHtcbiAgbGV0IGV4dGVuZGVkUGF0aCA9IHBhdGguY2xvbmUoKTtcbiAgZXh0ZW5kZWRQYXRoLnZpc2libGUgPSBmYWxzZTtcblxuICBjb25zdCB0aHJlc2hvbGREaXN0ID0gdGhyZXNob2xkRGlzdE11bHRpcGxpZXIgKiBleHRlbmRlZFBhdGgubGVuZ3RoO1xuICBjb25zdCBmaXJzdFBvaW50ID0gZXh0ZW5kZWRQYXRoLmZpcnN0U2VnbWVudC5wb2ludDtcbiAgY29uc3QgbGFzdFBvaW50ID0gZXh0ZW5kZWRQYXRoLmxhc3RTZWdtZW50LnBvaW50O1xuXG4gIGlmIChmaXJzdFBvaW50LmdldERpc3RhbmNlKGxhc3RQb2ludCkgPCB0aHJlc2hvbGREaXN0KSB7XG4gICAgZXh0ZW5kZWRQYXRoLmluc2VydCgwLCBsYXN0UG9pbnQpO1xuICAgIGV4dGVuZGVkUGF0aC5hZGQoZmlyc3RQb2ludCk7XG4gICAgZXh0ZW5kZWRQYXRoLmNsb3NlZCA9IHRydWU7XG4gICAgZXh0ZW5kZWRQYXRoLnVuaXRlKCk7XG4gICAgbGV0IGNyb3NzaW5ncyA9IGV4dGVuZGVkUGF0aC5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gICAgaWYgKCEhY3Jvc3NpbmdzICYmICEhY3Jvc3NpbmdzLmNoaWxkcmVuICYmIGNyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgbWF4QXJlYSA9IDAsIG1heENoaWxkID0gbnVsbDtcbiAgICAgIGNyb3NzaW5ncy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQuYXJlYSA+IG1heEFyZWEpIHtcbiAgICAgICAgICBtYXhDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIG1heEFyZWEgPSBjaGlsZC5hcmVhO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZXh0ZW5kZWRQYXRoID0gbWF4Q2hpbGQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4dGVuZGVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyaW1tZWRQYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcblxuICBsZXQgZmlyc3RQb2ludCA9IHBhdGhDbG9uZS5maXJzdFNlZ21lbnQucG9pbnQ7XG4gIGxldCBsYXN0UG9pbnQgPSBwYXRoQ2xvbmUubGFzdFNlZ21lbnQucG9pbnQ7XG4gIGxldCB0aHJlc2hvbGREaXN0ID0gdGhyZXNob2xkRGlzdE11bHRpcGxpZXIgKiBwYXRoQ2xvbmUubGVuZ3RoO1xuXG4gIGxldCBpbnRlcnNlY3Rpb25zID0gcGF0aENsb25lLmdldEludGVyc2VjdGlvbnMoKTtcbiAgaW50ZXJzZWN0aW9ucy5mb3JFYWNoKChpbnRlcnNlY3Rpb24sIGkpID0+IHtcbiAgICBpZiAoaW50ZXJzZWN0aW9uLm9mZnNldCA9PT0gMCkge1xuICAgICAgaW50ZXJzZWN0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBjb25zb2xlLmxvZygnaW50ZXJzZWN0aW9ucycsIGludGVyc2VjdGlvbnMpO1xuXG4gIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCA9PSAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb25zW2ldLnBvaW50O1xuXG4gICAgICAvLyBpZiB0aGUgYXZlcmFnZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnRzIGFuZCB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGlzIHdpdGhpbiB0aGUgdGhyZXNob2xkLCB0cmltXG4gICAgICBpZiAoZmlyc3RQb2ludC5nZXREaXN0YW5jZShpbnRlcnNlY3Rpb25Qb2ludCkgKyBsYXN0UG9pbnQuZ2V0RGlzdGFuY2UoaW50ZXJzZWN0aW9uUG9pbnQpIDwgMiAqIHRocmVzaG9sZERpc3QpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1taW5nIHBhdGgnKTtcbiAgICAgICAgbGV0IGRpdmlkZWRQYXRoID0gcGF0aENsb25lLmNsb25lKCk7IC8vIHJlc29sdmUgY3Jvc3NpbmdzIHNlZW1zIHRvIG1vZGlmeSB0aGUgcGF0aCBpdCB3YXMgcGFzc2VkLCBzbyBtYWtlIGFuIGV4dHJhIGNsb25lIHRvIGJlIHNhZmVcbiAgICAgICAgZGl2aWRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBsZXQgcGF0aENyb3NzaW5ncyA9IGRpdmlkZWRQYXRoLnJlc29sdmVDcm9zc2luZ3MoKTtcblxuICAgICAgICBpZiAocGF0aENyb3NzaW5ncy5jbGFzc05hbWUgPT09ICdDb21wb3VuZFBhdGgnICYmIHBhdGhDcm9zc2luZ3MuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGF0aENyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gcGF0aENyb3NzaW5ncy5jaGlsZHJlbltqXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgLy8gY2hpbGQuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBkaXZpZGVkUGF0aCA9IGRpdmlkZWRQYXRoLnN1YnRyYWN0KGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXZpZGVkUGF0aC5zZWxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgbGV0IHRyaW1tZWRQYXRoID0gcGF0aENsb25lLnN1YnRyYWN0KGRpdmlkZWRQYXRoKTtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHBhdGhDbG9uZTtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXRoLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcgJiYgdHJpbW1lZFBhdGguY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBjbG9zZWRDaGlsZHJlbiA9IFtdO1xuICAgICAgICAgIHRyaW1tZWRQYXRoLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGQubGVuZ3RoID4gMCAmJiBjaGlsZC5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgbGV0IGNoaWxkQ2xvbmUgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICAgICAgICBjaGlsZENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgY2xvc2VkQ2hpbGRyZW4ucHVzaChjaGlsZENsb25lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChjbG9zZWRDaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoY2xvc2VkQ2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAvLyBmb3Igc29tZSByZWFzb24gdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgY2xvc2VkIGNoaWxkcmVuLCBtZXJnZSB0aGVtXG4gICAgICAgICAgICAgIGxldCBhY2N1bXVsYXRvciA9IGNsb3NlZENoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgY2xvc2VkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yLnVuaXRlKGNsb3NlZENoaWxkcmVuW2pdKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChhY2N1bXVsYXRvci5sZW5ndGggPiAwICYmIGFjY3VtdWxhdG9yLmNsYXNzTmFtZSA9PT0gJ1BhdGgnKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1tZWQgYWNjdW11bGF0b3InLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1BhdGggPSBuZXcgUGF0aCgpO1xuICAgICAgICAgICAgICAgIG5ld1BhdGguY29weUNvbnRlbnQoYWNjdW11bGF0b3IpO1xuICAgICAgICAgICAgICAgIG5ld1BhdGguY29weUF0dHJpYnV0ZXMocGF0aENsb25lKTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZGl2aWRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdHJpbW1lZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1BhdGg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGF0aENsb25lLnJlbW92ZSgpO1xuICAgICAgICAgICAgZGl2aWRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICB0cmltbWVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmltbWVkIGNsb3NlZENoaWxkcmVuWzBdJywgY2xvc2VkQ2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZENoaWxkcmVuWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmltbWVkIHBhdGggcmV0dXJuJywgdHJpbW1lZFBhdGgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygncGF0aCBjbG9uZScsIHBhdGhDbG9uZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXZpZGVkUGF0aCcsIGRpdmlkZWRQYXRoKTtcbiAgICAgICAgcGF0aENsb25lLnJlbW92ZSgpO1xuICAgICAgICBkaXZpZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRyaW1tZWRQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vIGNsb3NlIGludGVyc2VjdGlvbiB3ZXJlIGZvdW5kIHNvIG5vdGhpbmcgY2FuIGJlIHRyaW1tZWRcbiAgICByZXR1cm4gcGF0aENsb25lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXRoO1xuICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGhpdFRlc3RHcm91cEJvdW5kcyhwb2ludCkge1xuICBsZXQgZ3JvdXBzID0gdXRpbC5nZXRBbGxHcm91cHMoKTtcbiAgcmV0dXJuIGhpdFRlc3RCb3VuZHMocG9pbnQsIGdyb3Vwcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaXRUZXN0Qm91bmRzKHBvaW50LCBjaGlsZHJlbikge1xuICBpZiAoIXBvaW50KSByZXR1cm4gbnVsbDtcblxuICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICBsZXQgYm91bmRzID0gY2hpbGQuc3Ryb2tlQm91bmRzO1xuICAgIGlmIChwb2ludC5pc0luc2lkZShjaGlsZC5zdHJva2VCb3VuZHMpKSB7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBSZWNvcmRSVEMgPSByZXF1aXJlKCdyZWNvcmRydGMnKTtcblxuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcblxuY29uc3QgZHJhd0NhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5jYW52YXNJZCk7XG5jb25zdCBjYW52YXNSZWNvcmRlciA9IFJlY29yZFJUQyhkcmF3Q2FudmFzLCB7XG4gIHR5cGU6ICdjYW52YXMnLFxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWNvcmQoKSB7XG4gIHN0YXJ0UmVjb3JkaW5nKCk7XG5cbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgc291bmQuYXN5bmNQbGF5Q29tcG9zaXRpb25PbmNlKCkudGhlbigoKSA9PiB7XG4gICAgc3RvcFJlY29yZGluZygpO1xuICAgIC8vIHJldHVybiBzb3VuZC5hc3luY1BsYXlDb21wb3NpdGlvbk9uY2UoKS50aGVuKCgpID0+IHtcbiAgICAvLyAgIHN0b3BSZWNvcmRpbmcoKTtcbiAgICAvLyB9KTtcbiAgfSkuZXJyb3IoKGUpID0+IHtcbiAgICBzdG9wUmVjb3JkaW5nKCk7XG4gIH0pO1xufVxuLy9cbi8vIGxldCBhdWRpb1JlY29yZGVyO1xuLy8gbGV0IGNodW5rcyA9IFtdO1xuLy8gbGV0IGJ1ZmZlcjtcbi8vIGxldCBvZmZsaW5lQ3R4O1xuLy8gbGV0IHNvdXJjZTtcbi8vIGxldCBjaHVua3MgPSBbXTtcbi8vIGxldCBkZXN0O1xuLy8gbGV0IGF1ZGlvUmVjb3JkZXI7XG5sZXQgY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbi8vIGxldCBvZmZsaW5lQ3R4O1xuLy8gbGV0IHNvdXJjZU5vZGU7XG5cbmZ1bmN0aW9uIHN0YXJ0UmVjb3JkaW5nKCkge1xuICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAvLyBkZXN0ID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7XG4gIC8vIEhvd2xlci5jdHguY29ubmVjdChkZXN0KTtcbiAgLy8gYXVkaW9SZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKGRlc3Quc3RyZWFtKTtcbiAgLy8gYXVkaW9SZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbihlKSB7XG4gIC8vICAgLy8gcHVzaCBlYWNoIGNodW5rIChibG9icykgaW4gYW4gYXJyYXlcbiAgLy8gICBjaHVua3MucHVzaChlLmRhdGEpO1xuICAvLyB9O1xuICAvL1xuICAvLyBhdWRpb1JlY29yZGVyLnN0YXJ0KCk7XG4gIC8vIGNvbnNvbGUubG9nKCdzdGFydCByZWNvcmRpbmcnKTtcbiAgLy8gb2ZmbGluZUN0eCA9IG5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KDIsIEhvd2xlci5jdHguc2FtcGxlUmF0ZSAqIDQwLCBIb3dsZXIuY3R4LnNhbXBsZVJhdGUpO1xuICAvLyBzb3VyY2VOb2RlID0gb2ZmbGluZUN0eC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZVxuICAvLyBzb3VyY2UgPSBvZmZsaW5lQ3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAvLyBjb25zb2xlLmxvZyhvZmZsaW5lQ3R4KTtcbiAgLy8gbGV0IHByb2Nlc3NvciA9IEhvd2xlci5jdHguY3JlYXRlU2NyaXB0UHJvY2Vzc29yKCk7XG4gIC8vIGNvbnNvbGUubG9nKHByb2Nlc3Nvcik7XG4gIC8vIGxldCBvdGhlck5vZGUgPSBBdWRpb05vZGUuY29ubmVjdChub2RlKTtcbiAgLy8gY29uc29sZS5sb2cob3RoZXJOb2RlKTtcbiAgLy8gYXVkaW9SZWNvcmRlciA9IG5ldyBSZWNvcmRlcihwcm9jZXNzb3IpO1xuICAvLyBhdWRpb1JlY29yZGVyLnJlY29yZCgpO1xuICAvLyBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUgfSwgZnVuY3Rpb24oYXVkaW9TdHJlYW0pIHtcbiAgLy8gYXVkaW9SZWNvcmRlciA9IFJlY29yZFJUQyhwcm9jZXNzb3IpO1xuICAvLyBhdWRpb1JlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG4gIC8vICAgLy8gYXVkaW9SZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKHN0cmVhbSk7XG4gIC8vICAgLy8gY29uc29sZS5sb2coYXVkaW9SZWNvcmRlci5zdGF0ZSk7XG4gIC8vICAgLy8gYXVkaW9SZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbihlKSB7XG4gIC8vICAgLy8gICBjb25zb2xlLmxvZygnaGknKTtcbiAgLy8gICAvLyAgIGNodW5rcy5wdXNoKGUuZGF0YSk7XG4gIC8vICAgLy8gfVxuICAvLyAgIC8vIGF1ZGlvUmVjb3JkZXIuc3RhcnQoKTtcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhhdWRpb1JlY29yZGVyLnN0YXRlKTtcbiAgLy8gICAvLyBhdWRpb1JlY29yZGVyID0gbmV3IFJlY29yZGVyKHN0cmVhbSk7XG4gIC8vICAgLy8gYXVkaW9SZWNvcmRlci5yZWNvcmQoKTtcbiAgLy9cbiAgLy8gICAvLyByZWNvcmRBdWRpby5zdGFydFJlY29yZGluZygpO1xuICAvLyAgIC8vIG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFTdHJlYW1SZWNvcmRlcihzdHJlYW0pO1xuICAvLyAgIC8vIG1lZGlhUmVjb3JkZXIubWltZVR5cGUgPSAndmlkZW8vd2VibSc7XG4gIC8vICAgLy8gbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbiAoYmxvYikge1xuICAvLyAgIC8vICAgY29uc29sZS5sb2coJ2hpJyk7XG4gIC8vICAgLy8gICAgIC8vIFBPU1QvUFVUIFwiQmxvYlwiIHVzaW5nIEZvcm1EYXRhL1hIUjJcbiAgLy8gICAvLyAgICAgLy8gbGV0IGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAvLyAgIC8vICAgICAvLyBkb2N1bWVudC53cml0ZSgnPGEgaHJlZj1cIicgKyBibG9iVVJMICsgJ1wiPicgKyBibG9iVVJMICsgJzwvYT4nKTtcbiAgLy8gICAvLyAgICAgLy8gZG93bmxvYWQoYmxvYiwgJ2Zvby53ZWJtJyk7XG4gIC8vICAgLy8gfTtcbiAgLy8gICAvLyBtZWRpYVJlY29yZGVyLnN0YXJ0KCk7XG4gIC8vXG4gIC8vIH0sIGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUubG9nKCBKU09OLnN0cmluZ2lmeSAoIGVycm9yICkgKTsgfSk7XG4gIC8vIGNhbnZhc1JlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG59XG5cbmZ1bmN0aW9uIHN0b3BSZWNvcmRpbmcoKSB7XG4gIGNvbnNvbGUubG9nKCdzdG9wIHJlY29yZGluZycpO1xuICBhdWRpb1JlY29yZGVyLnN0b3AoKTtcbiAgY29uc29sZS5sb2coY2h1bmtzKTtcbiAgLy8gYXVkaW9SZWNvcmRlci5leHBvcnRXQVYoZnVuY3Rpb24oYmxvYikge1xuICAvLyAgIC8vIFJlY29yZGVyLmZvcmNlRG93bmxvYWQoYmxvYik7XG4gIC8vICAgY29uc29sZS5sb2coYmxvYik7XG4gIC8vICAgZG93bmxvYWQoYmxvYik7XG4gIC8vIH0pO1xuICAvLyBhdWRpb1JlY29yZGVyLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oYXVkaW9VUkwpIHtcbiAgLy8gICAvLyBhdWRpby5zcmMgPSBhdWRpb1VSTDtcbiAgLy9cbiAgLy8gICB2YXIgcmVjb3JkZWRCbG9iID0gYXVkaW9SZWNvcmRlci5nZXRCbG9iKCk7XG4gIC8vICAgZG93bmxvYWQocmVjb3JkZWRCbG9iKTtcbiAgLy8gICAvLyBhdWRpb1JlY29yZGVyLmdldERhdGFVUkwoZnVuY3Rpb24oZGF0YVVSTCkgeyB9KTtcbiAgLy8gfSk7XG4gIC8vIGF1ZGlvUmVjb3JkZXIuc3RvcCgpO1xuICAvLyBjb25zb2xlLmxvZyhjaHVua3MpO1xuICAvLyB2YXIgYmxvYiA9IG5ldyBCbG9iKGNodW5rcywgeyAndHlwZScgOiAnYXVkaW8vb2dnOyBjb2RlY3M9b3B1cycgfSk7XG4gIC8vIC8vIGRvd25sb2FkKGJsb2IsICdmb28ub2dnJyk7XG4gIC8vIGNodW5rcyA9IFtdO1xuICAvLyBtZWRpYVJlY29yZGVyLnN0b3AoKTtcbiAgLy8gbWVkaWFSZWNvcmRlci5zYXZlKCk7XG4gIC8vIGF1ZGlvUmVjb3JkZXIuc3RvcCgpO1xuICAvLyBhdWRpb1JlY29yZGVyLmV4cG9ydFdBVihmdW5jdGlvbihibG9iKSB7XG4gIC8vICAgZG93bmxvYWQoYmxvYiwgJ3Rlc3Qud2F2Jyk7XG4gIC8vIH0pO1xuICAvLyBjYW52YXNSZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAvLyAgIGNvbnNvbGUubG9nKCdzdG9wcGluZyByZWNvcmRpbmcnKTtcbiAgLy8gICBjb25zdCBibG9iID0gY2FudmFzUmVjb3JkZXIuZ2V0QmxvYigpO1xuICAvLyAgIGRvd25sb2FkKGJsb2IsICdibG9iLndlYm0nKTtcbiAgLy8gfSk7XG59XG4iLCJyZXF1aXJlKCdob3dsZXInKTtcbmNvbnN0IFByb21pc2UgPSByZXF1aXJlKFwiYmx1ZWJpcmRcIik7XG5cbmNvbnN0IHVpID0gcmVxdWlyZSgnLi91aScpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbmNvbnN0IG92ZXJsYXlzID0gcmVxdWlyZSgnLi9vdmVybGF5cycpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuXG5jb25zdCBtZWFzdXJlcyA9IDQ7XG5jb25zdCBicG0gPSAxMjA7XG5jb25zdCBiZWF0TGVuZ3RoID0gKDYwIC8gYnBtKSAqIDEwMDA7IC8vIG1zXG5jb25zdCBtZWFzdXJlTGVuZ3RoID0gYmVhdExlbmd0aCAqIDQ7XG5leHBvcnQgY29uc3QgY29tcG9zaXRpb25MZW5ndGggPSBtZWFzdXJlTGVuZ3RoICogbWVhc3VyZXM7XG5cbmV4cG9ydCBjb25zdCBwbGF5aW5nQ2xhc3MgPSAncGxheWluZyc7XG5leHBvcnQgY29uc3QgcGxheUVuYWJsZWRDbGFzcyA9ICdwbGF5LWVuYWJsZWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgcmV0dXJuIGFzeW5jSW5pdFNoYXBlU291bmRzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWluaXRTaGFwZVNvdW5kcygpIHtcbiAgcmV0dXJuIGFzeW5jSW5pdFNoYXBlU291bmRzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaGFwZVNvdW5kT2JqKHBhdGgpIHtcbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBjb25zdCBzaGFwZVNvdW5kcyA9IHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMgfHwgaW5pdFNoYXBlU291bmRzKCk7XG4gIC8vIGFsZXJ0KEpTT04uc3RyaW5naWZ5KHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMpKTtcbiAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkod2luZG93Lmthbi5zaGFwZVNvdW5kcykpO1xuXG4gIGxldCBzaGFwZVByZWRpY3Rpb24gPSBzaGFwZS5nZXRTaGFwZVByZWRpY3Rpb24ocGF0aCk7XG4gIGxldCBjb2xvck5hbWUgPSBjb2xvci5nZXRQYXRoQ29sb3JOYW1lKHBhdGgpO1xuICBpZiAoY29sb3JOYW1lID09PSBudWxsKSBjb2xvck5hbWUgPSAnYmxhY2snOyAvLyBqdXN0IGluIGNhc2VcblxuICBjb25zdCBxdWFudGl6ZWRTb3VuZFN0YXJ0VGltZSA9IHF1YW50aXplTGVuZ3RoKHBhdGguYm91bmRzLnggLyB2aWV3V2lkdGggKiBjb21wb3NpdGlvbkxlbmd0aCk7IC8vIG1zXG4gIGNvbnN0IHF1YW50aXplZFNvdW5kRHVyYXRpb24gPSBxdWFudGl6ZUxlbmd0aChwYXRoLmJvdW5kcy53aWR0aCAvIHZpZXdXaWR0aCAqIGNvbXBvc2l0aW9uTGVuZ3RoKTsgLy8gbXNcblxuICBsZXQgc291bmRPYmogPSB7fTtcbiAgc291bmRPYmouc291bmQgPSBzaGFwZVNvdW5kc1tzaGFwZVByZWRpY3Rpb24ucGF0dGVybl07XG4gIHNvdW5kT2JqLnN0YXJ0VGltZSA9IHF1YW50aXplZFNvdW5kU3RhcnRUaW1lO1xuICBzb3VuZE9iai5kdXJhdGlvbiA9IHF1YW50aXplZFNvdW5kRHVyYXRpb247XG4gIHNvdW5kT2JqLnBhdGhJZCA9IHBhdGguaWQ7XG4gIHNvdW5kT2JqLnNwcml0ZU5hbWUgPSBjb2xvck5hbWU7XG5cbiAgaWYgKCEhcGF0aC5wYXJlbnQgJiYgcGF0aC5wYXJlbnQuY2xhc3NOYW1lID09PSAnR3JvdXAnKSB7XG4gICAgc291bmRPYmouZ3JvdXBJZCA9IHBhdGgucGFyZW50LmlkO1xuICB9XG5cbiAgcmV0dXJuIHNvdW5kT2JqO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRQbGF5aW5nKCkge1xuICAvLyBjb25zb2xlLmxvZygnZmlyc3QgdGltZScsIHdpbmRvdy5rYW4uZmlyc3RUaW1lUGxheWluZyk7XG4gIGlmICgkYm9keS5oYXNDbGFzcyhwbGF5RW5hYmxlZENsYXNzKSkge1xuICAgICRib2R5LmFkZENsYXNzKHBsYXlpbmdDbGFzcyk7XG5cbiAgICBIb3dsZXIubXV0ZShmYWxzZSk7XG5cbiAgICB3aW5kb3cua2FuLnBsYXlpbmcgPSB0cnVlO1xuXG4gICAgaWYgKHdpbmRvdy5rYW4uZmlyc3RUaW1lUGxheWluZyA9PT0gdHJ1ZSkge1xuICAgICAgd2luZG93Lmthbi5maXJzdFRpbWVQbGF5aW5nID0gZmFsc2U7XG4gICAgICBzdGFydENvbXBvc2l0aW9uKHdpbmRvdy5rYW4uY29tcG9zaXRpb24sIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRDb21wb3NpdGlvbih3aW5kb3cua2FuLmNvbXBvc2l0aW9uLCB0cnVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lmthbi5wbGF5aW5nID0gZmFsc2U7XG4gICAgJGJvZHkucmVtb3ZlQ2xhc3MocGxheWluZ0NsYXNzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcFBsYXlpbmcobXV0ZSA9IGZhbHNlKSB7XG4gIGlmICghIW11dGUpIHtcbiAgICBIb3dsZXIubXV0ZSh0cnVlKTtcbiAgfVxuXG4gIHdpbmRvdy5rYW4ucGxheWluZyA9IGZhbHNlO1xuICAkYm9keS5yZW1vdmVDbGFzcyhwbGF5aW5nQ2xhc3MpO1xuXG4gIHN0b3BDb21wb3NpdGlvbigpO1xufVxuXG5mdW5jdGlvbiBhc3luY0dldFNoYXBlU291bmRGcm9tU2hhcGVOYW1lKHNoYXBlTmFtZSkge1xuICBjb25zdCBzaGFwZVNvdW5kSlNPTlBhdGggPSBgLi9hdWRpby9zaGFwZXMvJHtzaGFwZU5hbWV9LyR7c2hhcGVOYW1lfS5qc29uYDtcbiAgcmV0dXJuICQuZ2V0SlNPTihzaGFwZVNvdW5kSlNPTlBhdGgpLnRoZW4oKHJlc3ApID0+IHtcbiAgICBjb25zdCBzaGFwZVNvdW5kRGF0YSA9IGZvcm1hdFNoYXBlU291bmREYXRhKHNoYXBlTmFtZSwgcmVzcCk7XG4gICAgY29uc3Qgc291bmQgPSBuZXcgSG93bChzaGFwZVNvdW5kRGF0YSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNoYXBlTmFtZTogc2hhcGVOYW1lLFxuICAgICAgc291bmQ6IHNvdW5kXG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jSW5pdFNoYXBlU291bmRzKCkge1xuICBsZXQgcmV0dXJuU291bmRzID0ge307XG4gIGNvbnN0IGV4dGVuc2lvbnMgPSBbJ29nZycsICdtNGEnLCAnbXAzJywgJ2FjMyddO1xuXG4gIGNvbnN0IHNoYXBlTmFtZXMgPSBzaGFwZS5zaGFwZU5hbWVzO1xuICBsZXQgcHJvbWlzZXMgPSBbXTtcbiAgQmFzZS5lYWNoKHNoYXBlTmFtZXMsIChzaGFwZU5hbWUpID0+IHtcbiAgICBwcm9taXNlcy5wdXNoKGFzeW5jR2V0U2hhcGVTb3VuZEZyb21TaGFwZU5hbWUoc2hhcGVOYW1lKSk7XG4gIH0pO1xuXG4gIHJldHVybiAkLndoZW4uYXBwbHkoJCwgcHJvbWlzZXMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgbGV0IHJldHVyblNvdW5kcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgICAgcmV0dXJuU291bmRzW2FyZy5zaGFwZU5hbWVdID0gYXJnLnNvdW5kO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMgPSByZXR1cm5Tb3VuZHM7XG4gICAgcmV0dXJuIHJldHVyblNvdW5kcztcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTaGFwZVNvdW5kRGF0YShzaGFwZU5hbWUsIGRhdGEpIHtcbiAgbGV0IHJldHVybkRhdGEgPSB7fTtcblxuICByZXR1cm5EYXRhLnNyYyA9IGRhdGEudXJscy5tYXAoKHVybCkgPT4gYC4vYXVkaW8vc2hhcGVzLyR7c2hhcGVOYW1lfS8ke3VybH1gKTtcbiAgcmV0dXJuRGF0YS5zcHJpdGUgPSBkYXRhLnNwcml0ZTtcbiAgcmV0dXJuRGF0YS5odG1sNSA9IHRydWU7XG4gIHJldHVybkRhdGEubG9vcCA9IGZhbHNlO1xuXG4gIHJldHVybiByZXR1cm5EYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVMZW5ndGgoZHVyYXRpb24pIHtcbiAgY29uc3Qgc21hbGxlc3REdXJhdGlvbiA9ICg2MCAvIGJwbSk7XG4gIGNvbnN0IHJldHVybkR1cmF0aW9uID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIHNtYWxsZXN0RHVyYXRpb24pICogc21hbGxlc3REdXJhdGlvbjtcblxuICBpZiAocmV0dXJuRHVyYXRpb24gPiAwKSB7XG4gICAgcmV0dXJuIHJldHVybkR1cmF0aW9uO1xuICB9IGVsc2Uge1xuICAgIC8vIGFsd2F5cyByZXR1cm4gc29tZXRoaW5nIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgcmV0dXJuIHNtYWxsZXN0RHVyYXRpb247XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplUG9zaXRpb24ocG9zaXRpb24sIHZpZXdXaWR0aCkge1xuICBjb25zdCBzbWFsbGVzdEludGVydmFsID0gdmlld1dpZHRoIC8gKDQgKiBtZWFzdXJlcyk7XG4gIHJldHVybiByZXR1cm5Qb3NpdGlvbiA9IE1hdGguZmxvb3IocG9zaXRpb24gLyBzbWFsbGVzdEludGVydmFsKSAqIHNtYWxsZXN0SW50ZXJ2YWw7XG59XG5cbmZ1bmN0aW9uIGFzeW5jUGxheVNoYXBlKHNoYXBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBQcm9taXNlLmFsbChbYXN5bmNQbGF5U2hhcGVTb3VuZChzaGFwZSksIGFzeW5jUGxheVNoYXBlQW5pbWF0aW9uKHNoYXBlKV0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoYEdyb3VwICR7c2hhcGUuZ3JvdXBJZH0gZnVsbHkgZG9uZSBwbGF5aW5nYCk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKChlKSA9PiB7XG4gICAgICAgIHJlamVjdChgR3JvdXAgJHtzaGFwZS5ncm91cElkfSBlcnJvcmVkIHdoaWxlIHBsYXlpbmc6ICR7ZX1gKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYXN5bmNQbGF5U2hhcGVTb3VuZChzaGFwZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5aW5nOiAnLCBzaGFwZS5zb3VuZCwgc2hhcGUuc3ByaXRlTmFtZSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIHNoYXBlLnNvdW5kLnBsYXkoc2hhcGUuc3ByaXRlTmFtZSk7XG4gICAgICBzaGFwZS5zb3VuZC5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUoYEdyb3VwICR7c2hhcGUuZ3JvdXBJZH0gZG9uZSBwbGF5aW5nIHNvdW5kYCk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJlamVjdChgRXJyb3IgcGxheWluZyBzaGFwZSBzb3VuZDogJHtlfWApO1xuICAgIH1cblxuICB9KTtcbn1cblxuZnVuY3Rpb24gYXN5bmNQbGF5U2hhcGVBbmltYXRpb24oc2hhcGUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IGl0ZW0gPSBwYXBlci5wcm9qZWN0LmdldEl0ZW0oe1xuICAgICAgY2xhc3NOYW1lOiAnUGF0aCcsXG4gICAgICBtYXRjaDogZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgcmV0dXJuIChlbC5pZCA9PT0gc2hhcGUucGF0aElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoISFpdGVtKSB7XG4gICAgICBsZXQgZ3JvdXAgPSBpdGVtLnBhcmVudDtcbiAgICAgIGdyb3VwLmRhdGEuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBtZWFzdXJlTGVuZ3RoIC8gMjtcbiAgICAgIGdyb3VwLmFuaW1hdGUoW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICByb3RhdGU6IC01LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0b3RhbER1cmF0aW9uIC8gNCxcbiAgICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5PdXRcIixcbiAgICAgICAgICAgIC8vIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coJ2FuaW1hdGlvbiBzdGVwIDEnKVxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBzY2FsZTogMS4xNSxcbiAgICAgICAgICAgIHJvdGF0ZTogNSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBkdXJhdGlvbjogdG90YWxEdXJhdGlvbiAvIDIsXG4gICAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluT3V0XCIsXG4gICAgICAgICAgICAvLyBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdhbmltYXRpb24gc3RlcCAyJylcbiAgICAgICAgICAgIC8vIH0sXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgZHVyYXRpb246IHRvdGFsRHVyYXRpb24gLyA0LFxuICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VJbk91dFwiLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aGlzLmRhdGEuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJlc29sdmUoYEdyb3VwICR7Z3JvdXAuaWR9IGRvbmUgYW5pbWF0aW5nYCk7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhbmltYXRpb24gc3RlcCAzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVqZWN0KCdJdGVtIG5vdCBzcGVjaWZpZWQuIENvdWxkIG5vdCBhbmltYXRlJyk7XG4gICAgfVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24oc2hhcGVHcm91cCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvdy5rYW4uY29tcG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgc291bmQgPSB3aW5kb3cua2FuLmNvbXBvc2l0aW9uW2ldO1xuXG4gICAgaWYgKCdncm91cElkJyBpbiBzb3VuZCkge1xuICAgICAgaWYgKHNvdW5kLmdyb3VwSWQgPT09IHNoYXBlR3JvdXAuaWQpIHtcbiAgICAgICAgd2luZG93Lmthbi5jb21wb3NpdGlvbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCdwYXRoSWQnIGluIHNvdW5kKSB7XG4gICAgICBsZXQgaXRlbSA9IGdldEl0ZW1zKHtcbiAgICAgICAgbWF0Y2g6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGVsLmlkID09PSBzb3VuZC5wYXRoSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoaXRlbS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICghIWl0ZW0ucGFyZW50ICYmIGl0ZW0ucGFyZW50LmNsYXNzTmFtZSA9PT0gJ0dyb3VwJyAmJiBpdGVtLnBhcmVudC5pZCA9PT0gc2hhcGVHcm91cC5pZCkge1xuICAgICAgICAgIHdpbmRvdy5rYW4uY29tcG9zaXRpb24uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTb3VuZFRpbWVvdXRzKCkge1xuICBpZiAod2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLmxlbmd0aCA+IDApIHtcbiAgICB3aW5kb3cua2FuLnNvdW5kVGltZW91dHMuZm9yRWFjaCgoc291bmRUaW1lb3V0KSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQoc291bmRUaW1lb3V0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cyA9IFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRDb21wb3NpdGlvbihjb21wb3NpdGlvbiwgbG9vcCA9IGZhbHNlKSB7XG4gIHN0b3BDb21wb3NpdGlvbigpO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcblxuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCk7XG5cbiAgbGV0IGl0ZXJhdGlvbnMgPSAwO1xuICBwbGF5Q29tcG9zaXRpb25GaXJzdFRpbWUoKTtcblxuICBmdW5jdGlvbiBwbGF5Q29tcG9zaXRpb25GaXJzdFRpbWUoKSB7XG4gICAgY2xlYXJTb3VuZFRpbWVvdXRzKCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3BsYXlpbmcgY29tcG9zaXRpb24gZmlyc3QgdGltZScpO1xuICAgIGxldCB0cmltbWVkQ29tcG9zaXRpb25PYmogPSBnZXRUcmltbWVkQ29tcG9zaXRpb25PYmooY29tcG9zaXRpb24pO1xuXG4gICAgQmFzZS5lYWNoKHRyaW1tZWRDb21wb3NpdGlvbk9iai5jb21wb3NpdGlvbiwgKHNoYXBlLCBpKSA9PiB7XG4gICAgICBsZXQgc291bmRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghd2luZG93Lmthbi5wbGF5aW5nKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdCBwbGF5aW5nLCByZXR1cm5pbmcnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hhcGUuc3ByaXRlTmFtZSA9PT0gbnVsbCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCclY3NoYXBlIGlzIG51bGwnLCAnY29sb3I6cmVkJywgc2hhcGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jUGxheVNoYXBlKHNoYXBlKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICB9KS5lcnJvcigoZSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBwbGF5aW5nIHNoYXBlJywgZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5wdXNoKHNvdW5kVGltZW91dCk7XG4gICAgfSk7XG5cbiAgICBpdGVyYXRpb25zKys7XG4gICAgd2luZG93Lmthbi5jb21wb3NpdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlcGVhdENvbXBvc2l0aW9uLCBjb21wb3NpdGlvbkxlbmd0aCAtIHRyaW1tZWRDb21wb3NpdGlvbk9iai5zdGFydFRpbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheUNvbXBvc2l0aW9uT25jZSgpIHtcbiAgICBjbGVhclNvdW5kVGltZW91dHMoKTtcbiAgICAvLyBjb25zb2xlLmxvZygncmVwZWF0Jyk7XG4gICAgQmFzZS5lYWNoKGNvbXBvc2l0aW9uLCAoc2hhcGUsIGkpID0+IHtcbiAgICAgIGxldCBzb3VuZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF3aW5kb3cua2FuLnBsYXlpbmcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbm90IHBsYXlpbmcsIHJldHVyaW5nJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BsYXlpbmc6ICcsIHNoYXBlLnNvdW5kLCBzaGFwZS5zcHJpdGVOYW1lLCBzaGFwZS5zdGFydFRpbWUpO1xuICAgICAgICBhc3luY1BsYXlTaGFwZShzaGFwZSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgfSkuZXJyb3IoKGUpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgcGxheWluZyBzaGFwZScsIGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICB3aW5kb3cua2FuLnNvdW5kVGltZW91dHMucHVzaChzb3VuZFRpbWVvdXQpO1xuICAgIH0pO1xuICAgIGl0ZXJhdGlvbnMrKztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGVhdENvbXBvc2l0aW9uKCkge1xuICAgIGlmIChsb29wID09PSB0cnVlKSB7XG4gICAgICBwbGF5Q29tcG9zaXRpb25PbmNlKCk7XG4gICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwbGF5Q29tcG9zaXRpb25PbmNlLCBjb21wb3NpdGlvbkxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVyYXRpb25zIDwgMikge1xuICAgICAgICBwbGF5Q29tcG9zaXRpb25PbmNlKCk7XG4gICAgICAgIHNldFRpbWVvdXQocmVwZWF0Q29tcG9zaXRpb24sIGNvbXBvc2l0aW9uTGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3BQbGF5aW5nKCk7XG4gICAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdzaGFyZS1wcm9tcHQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jUGxheUNvbXBvc2l0aW9uTXVsdGlwbGVUaW1lcyhyZXBlYXRzID0gMSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgbGV0IHByb21pc2VkUmVwZWF0cyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXRzOyBpKyspIHtcbiAgICAgIHByb21pc2VkUmVwZWF0cy5wdXNoKGFzeW5jUGxheUNvbXBvc2l0aW9uT25jZSgpKTtcbiAgICB9XG5cbiAgICBQcm9taXNlLmVhY2gocHJvbWlzZWRSZXBlYXRzLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZXBlYXQnKTtcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHJlc29sdmUoJ1JlcGVhdHMgZG9uZScpO1xuICAgIH0pLmVycm9yKChlKSA9PiB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXN5bmNQbGF5Q29tcG9zaXRpb25PbmNlKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3QgY29tcG9zaXRpb24gPSB3aW5kb3cua2FuLmNvbXBvc2l0aW9uO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGNsZWFyU291bmRUaW1lb3V0cygpO1xuXG4gICAgbGV0IHNoYXBlUHJvbWlzZXMgPSBbXTtcblxuICAgIEJhc2UuZWFjaChjb21wb3NpdGlvbiwgKHNoYXBlLCBpKSA9PiB7XG4gICAgICBzaGFwZVByb21pc2VzLnB1c2goYXN5bmNQbGF5U2hhcGVXaXRoRGVsYXkoc2hhcGUpKTtcbiAgICB9KTtcblxuICAgIFByb21pc2UuYWxsKHNoYXBlUHJvbWlzZXMpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgY29uc3QgcGxheVRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyB3YWl0IGZvciBjb21wb3NpdGlvbiB0byBiZSBmdWxseSBkb25lIGJlZm9yZSByZXBlYXRpbmcgKHBsYXkgaXMgbmF0dXJhbGx5IHRydW5jYXRlZCB3aGVuIHRoZSBsYXN0IHNoYXBlIGZpbmlzaGVzIHBsYXlpbmcpXG4gICAgICBpZiAocGxheVRpbWUgPCBjb21wb3NpdGlvbkxlbmd0aCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5kZWxheShjb21wb3NpdGlvbkxlbmd0aCAtIHBsYXlUaW1lKS50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKGBDb21wb3NpdGlvbiBmdWxseSBkb25lLCBhZnRlciBhIHdhaXRgKTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoYENvbXBvc2l0aW9uIGZ1bGx5IGRvbmUsIHdpdGggbm8gd2FpdGApO1xuICAgICAgfVxuICAgIH0pLmVycm9yKChlKSA9PiB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfSk7XG4gIH0pXG59XG5cbmZ1bmN0aW9uIGFzeW5jUGxheVNoYXBlV2l0aERlbGF5KHNoYXBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBzb3VuZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5aW5nOiAnLCBzaGFwZS5zb3VuZCwgc2hhcGUuc3ByaXRlTmFtZSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIGFzeW5jUGxheVNoYXBlKHNoYXBlKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSkuZXJyb3IoKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGBFcnJvciBwbGF5aW5nIHNoYXBlIHdpdGggZGVsYXk6ICR7ZX1gKTtcbiAgICAgIH0pO1xuICAgIH0sIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLnB1c2goc291bmRUaW1lb3V0KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wQ29tcG9zaXRpb24oKSB7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb21wb3NpdGlvbkludGVydmFsKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uY29tcG9zaXRpb25UaW1lb3V0KTtcbiAgY2xlYXJTb3VuZFRpbWVvdXRzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmltbWVkQ29tcG9zaXRpb25PYmooY29tcG9zaXRpb24pIHtcbiAgbGV0IGZpcnN0VGltZSA9IDA7XG4gIGxldCB0cmltbWVkQ29tcG9zaXRpb24gPSBbXTtcbiAgbGV0IHN0YXJ0VGltZSA9IGdldENvbXBvc2l0aW9uU3RhcnRUaW1lKGNvbXBvc2l0aW9uKTtcblxuICBjb21wb3NpdGlvbi5mb3JFYWNoKChzb3VuZCkgPT4ge1xuICAgIGxldCBtb2RpZmllZFNvdW5kID0gdXRpbC5zaGFsbG93Q29weShzb3VuZCk7XG4gICAgbW9kaWZpZWRTb3VuZC5zdGFydFRpbWUgPSBzb3VuZC5zdGFydFRpbWUgLSBzdGFydFRpbWU7XG4gICAgaWYgKG1vZGlmaWVkU291bmQuc3RhcnRUaW1lIDwgMCkgbW9kaWZpZWRTb3VuZC5zdGFydFRpbWUgPSAwOyAvLyB0aGlzIHNob3VsZG4ndCBoYXBwZW5cbiAgICB0cmltbWVkQ29tcG9zaXRpb24ucHVzaChtb2RpZmllZFNvdW5kKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb21wb3NpdGlvbjogdHJpbW1lZENvbXBvc2l0aW9uLFxuICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q29tcG9zaXRpb25TdGFydFRpbWUoY29tcG9zaXRpb24pIHtcbiAgbGV0IHN0YXJ0VGltZSA9IGNvbXBvc2l0aW9uTGVuZ3RoO1xuXG4gIGNvbXBvc2l0aW9uLmZvckVhY2goKHNvdW5kKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coc291bmQpO1xuICAgIC8vIGNvbnNvbGUubG9nKHNvdW5kLnN0YXJ0VGltZSlcbiAgICBpZiAoJ3N0YXJ0VGltZScgaW4gc291bmQgJiYgc291bmQuc3RhcnRUaW1lIDwgc3RhcnRUaW1lKSB7XG4gICAgICBzdGFydFRpbWUgPSBzb3VuZC5zdGFydFRpbWU7XG4gICAgfVxuICB9KTtcblxuICAvLyBjb25zb2xlLmxvZygnc3RhcnQgdGltZScsIHN0YXJ0VGltZSk7XG5cbiAgaWYgKHN0YXJ0VGltZSAhPT0gY29tcG9zaXRpb25MZW5ndGgpIHtcbiAgICByZXR1cm4gc3RhcnRUaW1lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG4iLCJjb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHZpZGVvID0gcmVxdWlyZSgnLi92aWRlbycpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcblxuZXhwb3J0IGNvbnN0IGRyYXdJbmFjdGl2aXR5RGVsYXkgPSA0MCAqIDEwMDA7IC8vIG1zXG5leHBvcnQgY29uc3QgY29udGludWVJbmFjdGl2aXR5RGVsYXkgPSAzMCAqIDEwMDA7IC8vIG1zXG5leHBvcnQgY29uc3QgcGxheVByb21wdERlbGF5ID0gNjAgKiAxMDAwOyAvLyBtcztcbmV4cG9ydCBjb25zdCBpbnB1dERlbGF5ID0gMTAwOyAvLyBtc1xuZXhwb3J0IGNvbnN0IHJlZnJlc2hDaGVja0RlbGF5ID0gNjAgKiAxMDAwOyAvLyBtc1xuZXhwb3J0IGNvbnN0IG92ZXJsYXlEZWxheSA9IDEwMDA7IC8vIG1zXG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gubGVuZ3RoID4gMCAmJiB3aW5kb3cubG9jYXRpb24uaGFzaCA9PSAnI2RldicpIHtcbiAgICB3aW5kb3cua2FuLm92ZXJsYXlzID0gZmFsc2U7XG4gICAgdmlkZW8ucGF1c2VWaWRlbygpO1xuICAgIHZpZGVvLmV4aXRUdXRvcmlhbE1vZGUoKTtcbiAgfSBlbHNlIHtcbiAgICB2aWRlby5lbnRlclR1dG9yaWFsTW9kZSgpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50SW5hY3Rpdml0eVRpbWVvdXQoKSB7XG4gIGNvbnNvbGUubG9nKGBwcmV2ZW50IHRpbWVvdXQ6ICR7dXRpbC5nZXRUaW1lKCl9YCk7XG4gIC8vIG92ZXJsYXlzLmNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuXG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0KTtcbiAgY2xlYXJJbnRlcnZhbCh3aW5kb3cua2FuLmNvbnRpbnVlQ291bnRkb3duSW50ZXJ2YWwpO1xuXG4gIHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnY29udGludWUnKTtcbiAgfSwgZHJhd0luYWN0aXZpdHlEZWxheSk7XG59XG4iLCJyZXF1aXJlKCdoYW1tZXJqcycpO1xuXG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuY29uc3Qgc291bmQgPSByZXF1aXJlKCcuL3NvdW5kJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbmNvbnN0IHNoYXBlID0gcmVxdWlyZSgnLi9zaGFwZScpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCB0aW1pbmcgPSByZXF1aXJlKCcuL3RpbWluZycpO1xuY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB1aSA9IHJlcXVpcmUoJy4vdWknKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbmNvbnN0IGhpdE9wdGlvbnMgPSB7XG4gIHNlZ21lbnRzOiBmYWxzZSxcbiAgc3Ryb2tlOiB0cnVlLFxuICBmaWxsOiB0cnVlLFxuICB0b2xlcmFuY2U6IDVcbn07XG5cbmNvbnN0IG1pblNoYXBlU2l6ZSA9IDEwMDtcbmNvbnN0IG1heFNoYXBlTGVuZ3RoID0gNTAwMDtcbmNvbnN0IG1heFNjYWxlRmFjdG9yID0gMC44O1xuXG5sZXQgb3V0ZXJQYXRoO1xubGV0IHNpemVzID0gW107XG5sZXQgc2l6ZTtcbmxldCBjdW1TaXplO1xubGV0IHByZXZQb2ludDtcblxuZXhwb3J0IGxldCBoYW1tZXJUaXBzO1xuZXhwb3J0IGxldCBoYW1tZXJDYW52YXM7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBoYW1tZXJUaXBzID0gbmV3IEhhbW1lci5NYW5hZ2VyKHVpLnRpcHNPdmVybGF5KTtcbiAgaGFtbWVyVGlwcy5hZGQobmV3IEhhbW1lci5Td2lwZSh7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9BTEwgfSkpO1xuICBoYW1tZXJUaXBzLm9uKCdzd2lwZScsIG92ZXJsYXlzLmNhcmROYXZOZXh0KTtcblxuICBoYW1tZXJDYW52YXMgPSBuZXcgSGFtbWVyLk1hbmFnZXIodWkuZHJhd0NhbnZhcyk7XG4gIGhhbW1lckNhbnZhcy5hZGQobmV3IEhhbW1lci5UYXAoeyBldmVudDogJ2RvdWJsZXRhcCcsIHRhcHM6IDIsIGludGVydmFsOiA0MDAsIHRpbWU6IDE1MCwgcG9zVGhyZXNob2xkOiA1MCB9KSk7XG4gIGhhbW1lckNhbnZhcy5hZGQobmV3IEhhbW1lci5UYXAoeyBldmVudDogJ3NpbmdsZXRhcCcgfSkpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuUGFuKHsgZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX0FMTCB9KSk7XG4gIGhhbW1lckNhbnZhcy5hZGQobmV3IEhhbW1lci5QaW5jaCgpKTtcblxuICBoYW1tZXJDYW52YXMuZ2V0KCdkb3VibGV0YXAnKS5yZWNvZ25pemVXaXRoKCdzaW5nbGV0YXAnKTtcbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgnc2luZ2xldGFwJykucmVxdWlyZUZhaWx1cmUoJ2RvdWJsZXRhcCcpO1xuICBoYW1tZXJDYW52YXMuZ2V0KCdwYW4nKS5yZXF1aXJlRmFpbHVyZSgncGluY2gnKTtcbiAgaGFtbWVyQ2FudmFzLmdldCgncGluY2gnKS5yZXF1aXJlRmFpbHVyZSgncGFuJyk7XG5cbiAgLy8gaGFtbWVyQ2FudmFzLm9uKCdzaW5nbGV0YXAnLCBzaW5nbGVUYXApO1xuICBoYW1tZXJDYW52YXMub24oJ2RvdWJsZXRhcCcsIGRvdWJsZVRhcCk7XG5cbiAgaGFtbWVyQ2FudmFzLm9uKCdwYW5zdGFydCcsIHBhblN0YXJ0KTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdwYW5tb3ZlJywgcGFuTW92ZSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGFuZW5kJywgcGFuRW5kKTtcbiAgLy8gaGFtbWVyQ2FudmFzLm9uKCdwYW5jYW5jZWwnLCBwYW5DYW5jZWwpO1xuXG4gIGhhbW1lckNhbnZhcy5vbigncGluY2hzdGFydCcsIHBpbmNoU3RhcnQpO1xuICBoYW1tZXJDYW52YXMub24oJ3BpbmNobW92ZScsIHBpbmNoTW92ZSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGluY2hlbmQnLCBwaW5jaEVuZCk7XG4gIC8vIGhhbW1lckNhbnZhcy5vbigncGluY2hjYW5jZWwnLCBwaW5jaENhbmNlbCk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCkge1xuICBlbmFibGVQYW5FdmVudHMoKTtcbiAgZW5hYmxlUGluY2hFdmVudHMoKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlVGFwRXZlbnRzKGVuYWJsZSA9IHRydWUpIHtcbiAgZW5hYmxlID0gZW5hYmxlID09PSB0cnVlO1xuICBoYW1tZXJDYW52YXMuZ2V0KCdzaW5nbGV0YXAnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIGhhbW1lckNhbnZhcy5nZXQoJ2RvdWJsZXRhcCcpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZVRhcEV2ZW50cygpIHtcbiAgZW5hYmxlVGFwRXZlbnRzKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlUGFuRXZlbnRzKGVuYWJsZSA9IHRydWUpIHtcbiAgZW5hYmxlID0gZW5hYmxlID09PSB0cnVlO1xuXG4gIGhhbW1lckNhbnZhcy5nZXQoJ3BhbicpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgncGFuc3RhcnQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3Bhbm1vdmUnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbmVuZCcpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZVBhbkV2ZW50cygpIHtcbiAgZW5hYmxlUGFuRXZlbnRzKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlUGluY2hFdmVudHMoZW5hYmxlID0gdHJ1ZSkge1xuICBlbmFibGUgPSBlbmFibGUgPT09IHRydWU7XG5cbiAgaGFtbWVyQ2FudmFzLmdldCgncGluY2gnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoc3RhcnQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNobW92ZScpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgncGluY2hlbmQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVQaW5jaEV2ZW50cygpIHtcbiAgZW5hYmxlUGluY2hFdmVudHMoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBzaW5nbGVUYXAoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuICAvLyAkKGV2ZW50LnRhcmdldCkuY2xpY2soKTtcblxuICAvLyBzb3VuZC5zdG9wUGxheWluZygpO1xuICAvLyBpZiAoIWV2ZW50VGFyZ2V0SXNPbkNhbnZhcyhldmVudCkpIHJldHVybjtcbiAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xuICAvLyB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgLy9cbiAgLy8gc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy9cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcixcbiAgICAgIHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KSxcbiAgICAgIGhpdFJlc3VsdCA9IHBhcGVyLnByb2plY3QuaGl0VGVzdChwb2ludCwgaGl0T3B0aW9ucyk7XG5cbiAgaWYgKGhpdFJlc3VsdCkge1xuICAgIGxldCBpdGVtID0gaGl0UmVzdWx0Lml0ZW07XG4gICAgLy8gaXRlbS5zZWxlY3RlZCA9ICFpdGVtLnNlbGVjdGVkO1xuICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvdWJsZVRhcChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyBjb25zb2xlLmxvZygnZG91YmxldGFwJyk7XG5cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcixcbiAgICAgIHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KSxcbiAgICAgIGhpdFJlc3VsdCA9IHBhcGVyLnByb2plY3QuaGl0VGVzdChwb2ludCwgaGl0T3B0aW9ucyk7XG5cbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG5cblxuICBpZiAoaGl0UmVzdWx0KSB7XG4gICAgc2hhcGUudG9nZ2xlRmlsbChoaXRSZXN1bHQuaXRlbSk7XG4gICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRCeU5hbWUoJ2ZpbGwnKTtcblxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgICAvLyBjb25zb2xlLmxvZygnaGl0IG5vIGl0ZW0nKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYW5TdGFydChldmVudCkge1xuICAvLyBjb25zb2xlLmxvZyhldmVudCk7XG4gIC8vIGNvbnNvbGUubG9nKCdwYW5zdGFydCcpO1xuICAvLyBwYXBlci5wcm9qZWN0LmFjdGl2ZUxheWVyLnJlbW92ZUNoaWxkcmVuKCk7IC8vIFJFTU9WRVxuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG5cbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSB7XG4gICAgd2luZG93Lmthbi5wYW5uaW5nID0gZmFsc2U7XG4gICAgLy8gY2hlY2sgaWYgdGlwcyBtb2RhbCBpcyB1cFxuICAgIGlmICgkYm9keS5oYXNDbGFzcygnb3ZlcmxheS1hY3RpdmUgdGlwcy1hY3RpdmUnKSkge1xuICAgICAgLy8gaWYgc28sIGdvIHRvIG5leHQgdGlwIGNhcmRcbiAgICAgIG92ZXJsYXlzLmNhcmROYXZOZXh0KCk7XG4gICAgfVxuICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHdpbmRvdy5rYW4ucGFubmluZyA9IHRydWU7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGhhbW1lckNhbnZhcy5vZmYoJ3BhbnN0YXJ0Jyk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbicpLnNldCh7ZW5hYmxlOiBmYWxzZX0pO1xuICBkaXNhYmxlUGluY2hFdmVudHMoKTtcbiAgZGlzYWJsZVRhcEV2ZW50cygpO1xuXG4gIC8vIGlnbm9yZSBvdGhlciB0b3VjaCBpbnB1dHNcbiAgLy8gaWYgKHdpbmRvdy5rYW4ucGluY2hpbmcpIHJldHVybjtcbiAgLy8gaWYgKCEoZXZlbnQuY2hhbmdlZFBvaW50ZXJzICYmIGV2ZW50LmNoYW5nZWRQb2ludGVycy5sZW5ndGggPiAwKSkgcmV0dXJuO1xuICAvLyBpZiAoZXZlbnQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCA+IDEpIHtcbiAgLy8gICBjb25zb2xlLmxvZygnZXZlbnQuY2hhbmdlZFBvaW50ZXJzID4gMScpO1xuICAvLyB9XG5cbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcblxuICB3aW5kb3cua2FuLnByZXZBbmdsZSA9IE1hdGguYXRhbjIoZXZlbnQudmVsb2NpdHlZLCBldmVudC52ZWxvY2l0eVgpO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXI7XG4gIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KTtcblxuICBvdXRlclBhdGggPSBuZXcgUGF0aCgpO1xuICBvdXRlclBhdGguZmlsbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIC8vIG91dGVyUGF0aC5maWxsQ29sb3IgPSBuZXcgQ29sb3IoMCwgMC41KTtcblxuICBzaXplcyA9IFtdO1xuXG4gIGxldCBzaGFwZVBhdGggPSBuZXcgUGF0aCh7XG4gICAgc3Ryb2tlQ29sb3I6IHdpbmRvdy5rYW4uY3VycmVudENvbG9yLFxuICAgIG5hbWU6ICdzaGFwZVBhdGgnLFxuICAgIHN0cm9rZVdpZHRoOiA1LFxuICAgIHZpc2libGU6IGZhbHNlLFxuICAgIHN0cm9rZUNhcDogJ3JvdW5kJ1xuICB9KTtcblxuICBzaGFwZVBhdGguYWRkKHBvaW50KTtcblxuICB3aW5kb3cua2FuLnBhdGhEYXRhW3NoYXBlLnN0cmluZ2lmeVBvaW50KHBvaW50KV0gPSB7XG4gICAgcG9pbnQ6IHBvaW50LFxuICAgIGZpcnN0OiB0cnVlXG4gIH07XG5cbiAgd2luZG93Lmthbi5zaGFwZVBhdGggPSBzaGFwZVBhdGg7XG59XG5cbmZ1bmN0aW9uIHBhbk1vdmUoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coJ3Bhbm1vdmUnKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSB7XG4gICAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cua2FuLnBhbm5pbmcgIT09IHRydWUpIHJldHVybjtcblxuICAvLyBkb24ndCBsZXQgdGhlIHVzZXIgZHJhdyBwYXN0IHRoZSBtYXggbGVuZ3RoXG4gIGlmICh3aW5kb3cua2FuLnNoYXBlUGF0aC5sZW5ndGggPD0gbWF4U2hhcGVMZW5ndGgpIHtcbiAgICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyO1xuICAgIGxldCBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSk7XG5cbiAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKGV2ZW50LnZlbG9jaXR5WSwgZXZlbnQudmVsb2NpdHlYKTtcbiAgICBsZXQgcHJldkFuZ2xlID0gd2luZG93Lmthbi5wcmV2QW5nbGU7XG4gICAgbGV0IGFuZ2xlRGVsdGEgPSB1dGlsLmFuZ2xlRGVsdGEoYW5nbGUsIHByZXZBbmdsZSk7XG4gICAgd2luZG93Lmthbi5wcmV2QW5nbGUgPSBhbmdsZTtcblxuICAgIHdoaWxlIChzaXplcy5sZW5ndGggPiAxMCkge1xuICAgICAgc2l6ZXMuc2hpZnQoKTtcbiAgICB9XG4gICAgaWYgKHNpemVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGRpc3QgPSBwcmV2UG9pbnQuZ2V0RGlzdGFuY2UocG9pbnQpO1xuXG4gICAgICAvLyBUaGVzZSBhcmUgYmFzZWQgb24gYWNjZWxlcmF0aW9uXG4gICAgICBzaXplID0gTWF0aC5yYW5kb20oKSAqIDEwOyAvLyBUaGlzIGlzIGp1c3QgcmFuZG9tIHZhcmlhbmNlXG5cbiAgICAgIGN1bVNpemUgPSAwO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjdW1TaXplICs9IHNpemVzW2pdO1xuICAgICAgfVxuICAgICAgLy8gY29uc3QgYXZnU2l6ZSA9ICgoY3VtU2l6ZSAvIHNpemVzLmxlbmd0aCkgKyBzaXplKSAvIDI7XG4gICAgICBjb25zdCBhdmdTaXplID0gTWF0aC5tYXgoNSwgKChjdW1TaXplIC8gc2l6ZXMubGVuZ3RoKSArIHNpemUpIC8gMik7XG5cbiAgICAgIGNvbnN0IGhhbGZQb2ludFggPSAocG9pbnQueCArIHByZXZQb2ludC54KSAvIDI7XG4gICAgICBjb25zdCBoYWxmUG9pbnRZID0gKHBvaW50LnkgKyBwcmV2UG9pbnQueSkgLyAyO1xuICAgICAgY29uc3QgaGFsZlBvaW50ID0gbmV3IFBvaW50KGhhbGZQb2ludFgsIGhhbGZQb2ludFkpO1xuXG4gICAgICBjb25zdCB0b3BYID0gaGFsZlBvaW50LnggKyBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkvMikgKiBhdmdTaXplO1xuICAgICAgY29uc3QgdG9wWSA9IGhhbGZQb2ludC55ICsgTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICAgIGNvbnN0IHRvcCA9IG5ldyBQb2ludCh0b3BYLCB0b3BZKTtcblxuICAgICAgY29uc3QgYm90dG9tWCA9IGhhbGZQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICAgIGNvbnN0IGJvdHRvbVkgPSBoYWxmUG9pbnQueSArIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgICBjb25zdCBib3R0b20gPSBuZXcgUG9pbnQoYm90dG9tWCwgYm90dG9tWSk7XG5cbiAgICAgIG91dGVyUGF0aC5hZGQodG9wKTtcbiAgICAgIG91dGVyUGF0aC5pbnNlcnQoMCwgYm90dG9tKTtcbiAgICAgIG91dGVyUGF0aC5zbW9vdGgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2l6ZSA9IDU7XG4gICAgfVxuXG4gICAgc2l6ZXMucHVzaChzaXplKTtcbiAgICBwcmV2UG9pbnQgPSBwb2ludDtcblxuICAgIHdpbmRvdy5rYW4ucGF0aERhdGFbc2hhcGUuc3RyaW5naWZ5UG9pbnQocG9pbnQpXSA9IHtcbiAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgIHNwZWVkOiBNYXRoLmFicyhldmVudC5vdmVyYWxsVmVsb2NpdHkpLFxuICAgICAgYW5nbGU6IGFuZ2xlXG4gICAgfTtcblxuICAgIHdpbmRvdy5rYW4uc2hhcGVQYXRoLmFkZChwb2ludCk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lmthbi5zaGFwZVBhdGguZGF0YS50b29Mb25nID0gdHJ1ZTtcbiAgfVxuXG4gIHBhcGVyLnZpZXcuZHJhdygpO1xufVxuXG5mdW5jdGlvbiBwYW5FbmQoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coJ3BhbmVuZCcpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBpZiAoIWV2ZW50VGFyZ2V0SXNPbkNhbnZhcyhldmVudCkpIHtcbiAgICBldmVudC5zcmNFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHdpbmRvdy5rYW4ucGFubmluZyAhPT0gdHJ1ZSkgcmV0dXJuO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXI7XG4gIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KTtcblxuICBjb25zdCB0cmFuc3BhcmVudCA9IGNvbG9yLnRyYW5zcGFyZW50O1xuICBjb25zdCBjb2xvck5hbWUgPSBjb2xvci5nZXRDb2xvck5hbWUod2luZG93Lmthbi5jdXJyZW50Q29sb3IpO1xuXG4gIGxldCBzaGFwZVBhdGggPSB3aW5kb3cua2FuLnNoYXBlUGF0aDtcblxuICBpZiAoc2hhcGVQYXRoLmxlbmd0aCA8PSBtYXhTaGFwZUxlbmd0aCkge1xuICAgIHNoYXBlUGF0aC5hZGQocG9pbnQpO1xuICB9XG4gIG91dGVyUGF0aC52aXNpYmxlID0gZmFsc2U7XG5cbiAgaWYgKHNoYXBlUGF0aC5sZW5ndGggPCBtaW5TaGFwZVNpemUgfHwgKHNoYXBlUGF0aC5kYXRhICYmIHNoYXBlUGF0aC5kYXRhLnRvb0xvbmcgPT09IHRydWUpKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3BhdGggaXMgdG9vIHNob3J0Jyk7XG4gICAgc2hhcGVQYXRoLnJlbW92ZSgpO1xuICAgIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuXG4gIHdpbmRvdy5rYW4ucGF0aERhdGFbc2hhcGUuc3RyaW5naWZ5UG9pbnQocG9pbnQpXSA9IHtcbiAgICBwb2ludDogcG9pbnQsXG4gICAgbGFzdDogdHJ1ZVxuICB9O1xuXG4gIGxldCBncm91cCA9IG5ldyBHcm91cCgpO1xuXG4gIGxldCB0cnVlZFNoYXBlID0gc2hhcGUuZ2V0VHJ1ZWRTaGFwZShzaGFwZVBhdGgpO1xuXG4gIC8vIGdyb3VwLmRhdGEuY29sb3IgPSB0cnVlZFNoYXBlLnN0cm9rZUNvbG9yO1xuICAvLyBjb25zb2xlLmxvZygnY3VycmVudEdyYWRpZW50OicsIGNvbmZpZy5wYWxldHRlLmdyYWRpZW50c1t3aW5kb3cua2FuLmN1cnJlbnRDb2xvcl0pO1xuXG4gIGNvbnN0IHNoYXBlU2l6ZSA9IHRydWVkU2hhcGUuc3Ryb2tlQm91bmRzO1xuICBjb25zdCBjZW50ZXJQb2ludCA9IG5ldyBQb2ludChzaGFwZVNpemUud2lkdGggLyAyLCBzaGFwZVNpemUuaGVpZ2h0IC8gMik7XG4gIGNvbnN0IGFuZ2xlID0gdXRpbC5yYWQoTWF0aC5yYW5kb20oKSAqIDM2MCk7XG4gIGNvbnN0IGdyYWRpZW50U2l6ZSA9IChzaGFwZVNpemUud2lkdGggKyBzaGFwZVNpemUuaGVpZ2h0KSAvIDQ7XG4gIGNvbnN0IG9yaWdpblggPSBjZW50ZXJQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuICBjb25zdCBvcmlnaW5ZID0gY2VudGVyUG9pbnQueSArIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSS8yKSAqIGdyYWRpZW50U2l6ZTtcbiAgY29uc3QgZGVzdGluYXRpb25YID0gY2VudGVyUG9pbnQueCArIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSS8yKSAqIGdyYWRpZW50U2l6ZTtcbiAgY29uc3QgZGVzdGluYXRpb25ZID0gY2VudGVyUG9pbnQueSArIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSS8yKSAqIGdyYWRpZW50U2l6ZTtcblxuICBjb25zdCBvcmlnaW4gPSBuZXcgUG9pbnQob3JpZ2luWCArIHNoYXBlU2l6ZS54LCBvcmlnaW5ZICsgc2hhcGVTaXplLnkpO1xuICBjb25zdCBkZXN0aW5hdGlvbiA9IG5ldyBQb2ludChkZXN0aW5hdGlvblggKyBzaGFwZVNpemUueCwgZGVzdGluYXRpb25ZICsgc2hhcGVTaXplLnkpO1xuICAvLyBncm91cC5hZGRDaGlsZChuZXcgUGF0aC5DaXJjbGUoe1xuICAvLyAgIGNlbnRlcjogb3JpZ2luLFxuICAvLyAgIHJhZGl1czogNSxcbiAgLy8gICBmaWxsQ29sb3I6ICdyZWQnLFxuICAvLyB9KSk7XG4gIC8vIGdyb3VwLmFkZENoaWxkKG5ldyBQYXRoLkNpcmNsZSh7XG4gIC8vICAgY2VudGVyOiBkZXN0aW5hdGlvbixcbiAgLy8gICByYWRpdXM6IDUsXG4gIC8vICAgZmlsbENvbG9yOiAnZ3JlZW4nLFxuICAvLyB9KSk7XG4gIGdyb3VwLmRhdGEub3JpZ2luYWxDb2xvciA9IHdpbmRvdy5rYW4uY3VycmVudENvbG9yO1xuICBncm91cC5kYXRhLmNvbG9yID0ge1xuICAgIGdyYWRpZW50OiB7XG4gICAgICBzdG9wczogY29uZmlnLnBhbGV0dGUuZ3JhZGllbnRzW3dpbmRvdy5rYW4uY3VycmVudENvbG9yXSxcbiAgICB9LFxuICAgIG9yaWdpbjogb3JpZ2luLFxuICAgIGRlc3RpbmF0aW9uOiBkZXN0aW5hdGlvbixcbiAgfTtcbiAgZ3JvdXAuZGF0YS5zY2FsZSA9IDE7IC8vIGluaXQgdmFyaWFibGUgdG8gdHJhY2sgc2NhbGUgY2hhbmdlc1xuICBncm91cC5kYXRhLnJvdGF0aW9uID0gMDsgLy8gaW5pdCB2YXJpYWJsZSB0byB0cmFjayByb3RhdGlvbiBjaGFuZ2VzXG4gIGdyb3VwLmRhdGEuZnJlc2ggPSB0cnVlO1xuXG4gIHNoYXBlUGF0aC5yZW1vdmUoKTtcbiAgdHJ1ZWRTaGFwZS52aXNpYmxlID0gZmFsc2U7XG4gIHRydWVkU2hhcGUuc3Ryb2tlQ29sb3IgPSBuZXcgQ29sb3IoMCwgMCk7XG4gIHdpbmRvdy5rYW4uc2hhcGVQYXRoID0gdHJ1ZWRTaGFwZTtcbiAgdHJ1ZWRTaGFwZS5uYW1lID0gJ3NoYXBlUGF0aCc7XG5cbiAgaWYgKCEodHJ1ZWRTaGFwZS5sZW5ndGggPiAwKSkge1xuICAgIHRydWVkU2hhcGUucmVtb3ZlKCk7XG4gICAgZ3JvdXAucmVtb3ZlKCk7XG4gICAgd2luZG93Lmthbi5wYW5uaW5nID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZ3JvdXAuYWRkQ2hpbGQodHJ1ZWRTaGFwZSk7XG5cbiAgbGV0IHNoYXBlU291bmRPYmogPSBzb3VuZC5nZXRTaGFwZVNvdW5kT2JqKHRydWVkU2hhcGUpO1xuICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLnB1c2goc2hhcGVTb3VuZE9iaik7XG5cbiAgdHJ1ZWRTaGFwZS52aXNpYmxlID0gZmFsc2U7XG4gIGNvbnN0IG91dGxpbmVHcm91cCA9IHNoYXBlLmdldE91dGxpbmVHcm91cCh0cnVlZFNoYXBlKTtcbiAgY29uc3Qgb3V0bGluZSA9IG91dGxpbmVHcm91cC5fbmFtZWRDaGlsZHJlbi5vdXRlclswXS5jbG9uZSgpO1xuICBvdXRsaW5lLm5hbWUgPSAnb3V0ZXInO1xuICBvdXRsaW5lLmZpbGxDb2xvciA9IHdpbmRvdy5rYW4uY3VycmVudENvbG9yO1xuICBvdXRsaW5lLmZpbGxDb2xvciA9IGdyb3VwLmRhdGEuY29sb3I7XG5cbiAgY29uc3Qgb3V0bGluZUNlbnRlciA9IG91dGxpbmVHcm91cC5fbmFtZWRDaGlsZHJlbi5taWRkbGVbMF0uY2xvbmUoKTtcbiAgb3V0bGluZUNlbnRlci5zdHJva2VDb2xvciA9IGdyb3VwLmRhdGEuY29sb3I7XG4gIG91dGxpbmVDZW50ZXIudmlzaWJsZSA9IGZhbHNlO1xuICBncm91cC5hZGRDaGlsZChvdXRsaW5lKTtcbiAgb3V0bGluZS5zZW5kVG9CYWNrKCk7XG5cbiAgb3V0bGluZUdyb3VwLnJlbW92ZSgpO1xuXG4gIGxldCBzaGFwZU1hc2sgPSBvdXRsaW5lLmNsb25lKCk7XG4gIHNoYXBlTWFzay5maWxsQ29sb3IgPSBvdXRsaW5lLmZpbGxDb2xvcjtcbiAgc2hhcGVNYXNrLnN0cm9rZUNvbG9yID0gb3V0bGluZS5zdHJva2VDb2xvcjtcbiAgc2hhcGVNYXNrLmNsb3NlZCA9IHRydWU7XG5cbiAgbGV0IGVuY2xvc2VkTG9vcHMgPSBzaGFwZS5maW5kSW50ZXJpb3JDdXJ2ZXMob3V0bGluZUNlbnRlcik7XG4gIGlmIChlbmNsb3NlZExvb3BzLmxlbmd0aCA+IDAgfHwgdHJ1ZWRTaGFwZS5jbG9zZWQgPT09IHRydWUpIHtcbiAgICBncm91cC5kYXRhLmxpbmUgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBncm91cC5kYXRhLmxpbmUgPSB0cnVlO1xuICB9XG5cbiAgZW5jbG9zZWRMb29wcy5mb3JFYWNoKChsb29wKSA9PiB7XG4gICAgc2hhcGVNYXNrLnVuaXRlKGxvb3ApO1xuICAgIHNoYXBlTWFzay5zZW5kVG9CYWNrKCk7XG4gICAgbG9vcC5uYW1lID0gJ2xvb3AnO1xuICAgIGxvb3AuZGF0YS5sb29wID0gdHJ1ZTtcbiAgICBsb29wLnZpc2libGUgPSB0cnVlO1xuICAgIGdyb3VwLmFkZENoaWxkKGxvb3ApO1xuICB9KTtcblxuXG4gIHNoYXBlTWFzay51bml0ZSgpO1xuICBsZXQgY3Jvc3NpbmdzID0gc2hhcGVNYXNrLnJlc29sdmVDcm9zc2luZ3MoKTtcbiAgaWYgKCEhY3Jvc3NpbmdzICYmICEhY3Jvc3NpbmdzLmNoaWxkcmVuICYmIGNyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgbGV0IG1heEFyZWEgPSAwLCBtYXhDaGlsZCA9IG51bGw7XG4gICAgY3Jvc3NpbmdzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICBpZiAoY2hpbGQuYXJlYSA+IG1heEFyZWEpIHtcbiAgICAgICAgbWF4Q2hpbGQgPSBjaGlsZDtcbiAgICAgICAgbWF4QXJlYSA9IGNoaWxkLmFyZWE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzaGFwZU1hc2sgPSBtYXhDaGlsZDtcbiAgfVxuXG4gIG91dGxpbmVDZW50ZXIucmVtb3ZlKCk7XG4gIHNoYXBlTWFzay52aXNpYmxlID0gZmFsc2U7XG4gIHNoYXBlTWFzay5uYW1lID0gJ21hc2snO1xuICBzaGFwZU1hc2suZGF0YS5tYXNrID0gdHJ1ZTtcbiAgZ3JvdXAuYWRkQ2hpbGQoc2hhcGVNYXNrKTtcbiAgc2hhcGVNYXNrLnNlbmRUb0JhY2soKTtcblxuICBzaGFwZS5jbGVhblVwR3JvdXAoZ3JvdXApO1xuXG4gIHdpbmRvdy5rYW4ubW92ZXMucHVzaCh7XG4gICAgdHlwZTogJ25ld0dyb3VwJyxcbiAgICBpZDogZ3JvdXAuaWRcbiAgfSk7XG5cblxuICB1aS51bmRpdGhlckJ1dHRvbnNCeU5hbWUoWyduZXcnLCAndW5kbyddKTtcblxuICBpZiAod2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlICE9PSB0cnVlKSB7XG4gICAgLy8gZmlyc3Qgc2hhcGUhXG4gICAgLy8gc2V0IHBsYXkgcHJvbXB0IHRpbWVvdXRcbiAgICB3aW5kb3cua2FuLnBsYXlQcm9tcHRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgncGxheS1wcm9tcHQnKTtcbiAgICB9LCB0aW1pbmcucGxheVByb21wdERlbGF5KTtcblxuICAgIHdpbmRvdy5rYW4udXNlckhhc0RyYXduRmlyc3RTaGFwZSA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZ3JvdXBzID0gdXRpbC5nZXRBbGxHcm91cHMoKTtcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAkYm9keS5hZGRDbGFzcyhzb3VuZC5wbGF5RW5hYmxlZENsYXNzKTtcbiAgICAgIHVpLnVuZGl0aGVyQnV0dG9uc0J5TmFtZShbJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coZ3JvdXBzLmxlbmd0aCwgJGJvZHkuaGFzQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcykpO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgY29uc3Qgc2NhbGVGYWN0b3IgPSAwLjk7XG4gICAgZ3JvdXAuYW5pbWF0ZShcbiAgICAgIFt7XG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzY2FsZTogc2NhbGVGYWN0b3JcbiAgICAgICAgfSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBkdXJhdGlvbjogMTAwLFxuICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0XCIsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzY2FsZTogMSAvIHNjYWxlRmFjdG9yXG4gICAgICAgIH0sXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluXCIsXG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgKTtcbiAgfVxuXG4gIGlmICghdHV0b3JpYWwuYWxsVHV0c0NvbXBsZXRlZCgpKSB7XG4gICAgY29uc3QgdHV0b3JpYWxDb21wbGV0aW9uID0gd2luZG93Lmthbi50dXRvcmlhbENvbXBsZXRpb247XG4gICAgbGV0IHR1dE5hbWUgPSBudWxsO1xuXG4gICAgaWYgKCF0dXRvcmlhbENvbXBsZXRpb25bJ2ZpbGwnXSAmJiB0cnVlZFNoYXBlLmNsb3NlZCkge1xuICAgICAgdHV0TmFtZSA9ICdmaWxsJztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGdyb3VwcyA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgICAgICBtYXRjaDogZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwuY2xhc3NOYW1lID09PSAnR3JvdXAnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCF0dXRvcmlhbENvbXBsZXRpb25bJ3BpbmNoJ10gJiYgZ3JvdXBzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIHR1dE5hbWUgPSAncGluY2gnO1xuICAgICAgfSBlbHNlIGlmICghdHV0b3JpYWxDb21wbGV0aW9uWydzd2lwZSddICYmIGdyb3Vwcy5sZW5ndGggPj0gNSkge1xuICAgICAgICB0dXROYW1lID0gJ3N3aXBlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHV0TmFtZSAhPT0gbnVsbCkge1xuICAgICAgLy8gY29uc29sZS5sb2coYCR7dHV0TmFtZX0gdHV0b3JpYWxgKTtcbiAgICAgIHR1dG9yaWFsLmFkZENvbnRleHR1YWxUdXQodHV0TmFtZSk7XG4gICAgICB3aW5kb3cua2FuLnR1dG9yaWFsQ29tcGxldGlvblt0dXROYW1lXSA9IHRydWU7XG4gICAgICBncm91cC5kYXRhLnR1dCA9IHR1dE5hbWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheSAhPT0gbnVsbCkge1xuICAgIGxldCBzY2hlZHVsZWRPdmVybGF5ID0gd2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5O1xuICAgIHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheSA9IG51bGw7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvdmVybGF5cy5vcGVuT3ZlcmxheShzY2hlZHVsZWRPdmVybGF5KTtcbiAgICB9LCB0aW1pbmcub3ZlcmxheURlbGF5KTtcbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKCdwYW4gZG9uZScpO1xuICBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiBmYWxzZSB9KTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogdHJ1ZSB9KTtcbiAgICBjb25zb2xlLmxvZygndG91Y2ggZW5hYmxlZCcpO1xuICAgIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcblxuICAgIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xuICB9LCB0aW1pbmcuaW5wdXREZWxheSk7XG5cbiAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICBzaGFwZS51cGRhdGVQb3BzKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFuQ2FuY2VsKGV2ZW50KSB7XG4gIGNvbnNvbGUubG9nKCdwYW5jYW5jZWwnKTtcbiAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogdHJ1ZSB9KTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdwYW5zdGFydCcsIHBhblN0YXJ0KTtcbiAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgZW5hYmxlVGFwRXZlbnRzKCk7XG4gIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBwaW5jaFN0YXJ0KGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKCdwaW5jaHN0YXJ0Jyk7XG4gIHRpbWluZy5wcmV2ZW50SW5hY3Rpdml0eVRpbWVvdXQoKTtcbiAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIHdpbmRvdy5rYW4uaW50ZXJhY3RpbmcgPSB0cnVlO1xuICB3aW5kb3cua2FuLnBpbmNoaW5nID0gdHJ1ZTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwaW5jaHN0YXJ0Jykuc2V0KHtlbmFibGU6IGZhbHNlfSk7XG4gIGhhbW1lckNhbnZhcy5vZmYoJ3BpbmNoc3RhcnQnKTtcbiAgZGlzYWJsZVBhbkV2ZW50cygpO1xuICBkaXNhYmxlVGFwRXZlbnRzKCk7XG5cbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG5cbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcblxuICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyLFxuICAgICAgcG9pbnQgPSBuZXcgUG9pbnQocG9pbnRlci54LCBwb2ludGVyLnkpLFxuICAgICAgaGl0UmVzdWx0ID0gc2hhcGUuaGl0VGVzdEdyb3VwQm91bmRzKHBvaW50KTtcblxuICBpZiAoaGl0UmVzdWx0KSB7XG4gICAgd2luZG93Lmthbi5waW5jaGluZyA9IHRydWU7XG4gICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBoaXRSZXN1bHQ7XG4gICAgd2luZG93Lmthbi5sYXN0U2NhbGUgPSAxO1xuICAgIHdpbmRvdy5rYW4ubGFzdFJvdGF0aW9uID0gZXZlbnQucm90YXRpb247XG5cbiAgICB3aW5kb3cua2FuLm9yaWdpbmFsUG9zaXRpb24gPSBoaXRSZXN1bHQucG9zaXRpb247XG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFJvdGF0aW9uID0gaGl0UmVzdWx0LmRhdGEucm90YXRpb247XG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFNjYWxlID0gaGl0UmVzdWx0LmRhdGEuc2NhbGU7XG4gICAgaGl0UmVzdWx0LmRhdGEudGhyb3duID0gZmFsc2U7XG5cbiAgICBpZiAoY29uZmlnLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgc2hhcGUuZGVzdHJveUdyb3VwUG9wcyhoaXRSZXN1bHQpO1xuICAgIH1cblxuICAgIGhpdFJlc3VsdC5icmluZ1RvRnJvbnQoKTtcblxuICAgIGlmIChoaXRSZXN1bHQuZGF0YS50dXQgJiYgaGl0UmVzdWx0LmRhdGEudHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke2hpdFJlc3VsdC5kYXRhLnR1dH0nXWApO1xuICAgICAgaWYgKCR0dXQpIHtcbiAgICAgICAgd2luZG93Lmthbi5waW5jaGVkVHV0ID0gJHR1dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgLy8gICBoaXRSZXN1bHQuYW5pbWF0ZSh7XG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICBzY2FsZTogMS4yNVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBzZXR0aW5nczoge1xuICAgIC8vICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgLy8gICAgICAgZWFzaW5nOiBcImVhc2VPdXRcIixcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG4gICAgLy8gfVxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgICB3aW5kb3cua2FuLnBpbmNoZWRUdXQgPSBudWxsO1xuICAgIC8vIGNvbnNvbGUubG9nKCdoaXQgbm8gaXRlbScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBpbmNoTW92ZShldmVudCkge1xuICAvLyBjb25zb2xlLmxvZygncGluY2hNb3ZlJyk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG4gIGxldCAkcGluY2hlZFR1dCA9IHdpbmRvdy5rYW4ucGluY2hlZFR1dDtcblxuICBpZiAoISFwaW5jaGVkR3JvdXApIHtcbiAgICBsZXQgY3VycmVudFNjYWxlID0gZXZlbnQuc2NhbGU7XG4gICAgbGV0IHNjYWxlRGVsdGE7XG5cbiAgICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dEJ5TmFtZSgncGluY2gnKTtcblxuICAgIGlmIChwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIDwgbWluU2hhcGVTaXplIHx8IHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0IDwgbWluU2hhcGVTaXplKSB7XG4gICAgICAvLyBvbmx5IGFsbG93IGEgc2hhcGUgdG8gc2NhbGUgZG93biBpZiBpdCBpcyBsYXJnZXIgdGhhbiB0aGUgbWluaW11bSBzaXplXG4gICAgICBzY2FsZURlbHRhID0gMS4xO1xuICAgIH0gZWxzZSBpZiAocGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCA+PSBwYXBlci52aWV3LnZpZXdTaXplLndpZHRoIHx8XG4gICAgICAgIHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0ID49IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0KSB7XG4gICAgICAvLyBvbmx5IGFsbG93IHNoYXBlIHRvIHNjYWxlIHVwIGlmIGl0IGZpdHMgaW4gdGhlIHZpZXdwb3J0XG4gICAgICBzY2FsZURlbHRhID0gMC45O1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZURlbHRhID0gY3VycmVudFNjYWxlIC8gd2luZG93Lmthbi5sYXN0U2NhbGU7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5sYXN0U2NhbGUgPSBjdXJyZW50U2NhbGU7XG5cbiAgICBsZXQgY3VycmVudFJvdGF0aW9uID0gZXZlbnQucm90YXRpb247XG4gICAgbGV0IHJvdGF0aW9uRGVsdGEgPSBjdXJyZW50Um90YXRpb24gLSB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbjtcbiAgICB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbiA9IGN1cnJlbnRSb3RhdGlvbjtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBzY2FsaW5nIGJ5ICR7c2NhbGVEZWx0YX1gKTtcbiAgICAvLyBjb25zb2xlLmxvZyhgcm90YXRpbmcgYnkgJHtyb3RhdGlvbkRlbHRhfWApO1xuXG4gICAgY29uc3QgY2VudGVyUG9pbnQgPSBldmVudC5jZW50ZXI7XG4gICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uID0gY2VudGVyUG9pbnQ7XG4gICAgaWYgKCEhJHBpbmNoZWRUdXQpIHtcbiAgICAgIHR1dG9yaWFsLm1vdmVDb250ZXh0dWFsVHV0KCRwaW5jaGVkVHV0LCBjZW50ZXJQb2ludCk7XG4gICAgfVxuXG4gICAgaWYgKHNjYWxlRGVsdGEgIT09IDEpIHtcbiAgICAgIHBpbmNoZWRHcm91cC5zY2FsZShzY2FsZURlbHRhKTtcblxuICAgICAgLy8gY2hlY2sgaWYgc2NhbGluZyB3ZW50IGF3cnksIGNhbm5vdCBiZSB0b28gYmlnIG9yIHRvbyBzbWFsbFxuICAgICAgLy8gaHlwb3RlbnVzZSBtdXN0IGZpdCB3aXRoaW4gdmlldyBib3VuZHNcbiAgICAgIGNvbnN0IGh5cG90ID0gdXRpbC5oeXBvdChwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoLCBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCk7XG4gICAgICBjb25zdCB2aWV3SHlwb3QgPSB1dGlsLmh5cG90KHBhcGVyLnZpZXcudmlld1NpemUud2lkdGgsIHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0KVxuICAgICAgaWYgKGh5cG90ID49IHZpZXdIeXBvdCkge1xuICAgICAgICAvLyBzaGFwZSBpcyB0b28gYmlnLCBicmluZyBpdCBiYWNrIGRvd24gdG8gc2l6ZVxuICAgICAgICBzY2FsZURlbHRhID0gdmlld0h5cG90ICogbWF4U2NhbGVGYWN0b3IgLyBoeXBvdDtcbiAgICAgICAgcGluY2hlZEdyb3VwLnNjYWxlKHNjYWxlRGVsdGEpO1xuICAgICAgfSBlbHNlIGlmIChoeXBvdCA8PSBtaW5TaGFwZVNpemUpIHtcbiAgICAgICAgc2NhbGVEZWx0YSA9IG1pblNoYXBlU2l6ZSAvIGh5cG90O1xuICAgICAgICBwaW5jaGVkR3JvdXAuc2NhbGUoc2NhbGVEZWx0YSk7XG4gICAgICB9XG4gICAgfVxuICAgIHBpbmNoZWRHcm91cC5yb3RhdGUocm90YXRpb25EZWx0YSk7XG5cbiAgICBwaW5jaGVkR3JvdXAuZGF0YS5zY2FsZSAqPSBzY2FsZURlbHRhO1xuICAgIHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uICs9IHJvdGF0aW9uRGVsdGE7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGluY2hFbmQoZXZlbnQpIHtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICB3aW5kb3cua2FuLmxhc3RFdmVudCA9IGV2ZW50O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG4gIGxldCAkcGluY2hlZFR1dCA9IHdpbmRvdy5rYW4ucGluY2hlZFR1dDtcbiAgbGV0IG9yaWdpbmFsUG9zaXRpb24gPSB3aW5kb3cua2FuLm9yaWdpbmFsUG9zaXRpb247XG4gIGxldCBvcmlnaW5hbFJvdGF0aW9uID0gd2luZG93Lmthbi5vcmlnaW5hbFJvdGF0aW9uO1xuICBsZXQgb3JpZ2luYWxTY2FsZSA9IHdpbmRvdy5rYW4ub3JpZ2luYWxTY2FsZTtcblxuICBpZiAoISFwaW5jaGVkR3JvdXApIHtcbiAgICBwaW5jaGVkR3JvdXAuZGF0YS5mcmVzaCA9IHRydWU7XG4gICAgbGV0IG1vdmUgPSB7XG4gICAgICBpZDogcGluY2hlZEdyb3VwLmlkLFxuICAgICAgdHlwZTogJ3RyYW5zZm9ybSdcbiAgICB9O1xuICAgIGlmIChwaW5jaGVkR3JvdXAucG9zaXRpb24gIT0gb3JpZ2luYWxQb3NpdGlvbikge1xuICAgICAgbW92ZS5wb3NpdGlvbiA9IG9yaWdpbmFsUG9zaXRpb247XG4gICAgfVxuXG4gICAgaWYgKHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uICE9IG9yaWdpbmFsUm90YXRpb24pIHtcbiAgICAgIG1vdmUucm90YXRpb24gPSBvcmlnaW5hbFJvdGF0aW9uIC0gcGluY2hlZEdyb3VwLmRhdGEucm90YXRpb247XG4gICAgfVxuXG4gICAgaWYgKHBpbmNoZWRHcm91cC5kYXRhLnNjYWxlICE9IG9yaWdpbmFsU2NhbGUpIHtcbiAgICAgIG1vdmUuc2NhbGUgPSBvcmlnaW5hbFNjYWxlIC8gcGluY2hlZEdyb3VwLmRhdGEuc2NhbGU7XG4gICAgfVxuXG4gICAgaWYgKHBpbmNoZWRHcm91cC5jaGlsZHJlbi5sZW5ndGggPiAwICYmIHBpbmNoZWRHcm91cC5fbmFtZWRDaGlsZHJlbi5zaGFwZVBhdGggJiYgcGluY2hlZEdyb3VwLl9uYW1lZENoaWxkcmVuLnNoYXBlUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAvLyB1cGRhdGUgc2hhcGVQYXRoIHNvdW5kIG9iamVjdCBpZiBwb3NzaWJsZVxuICAgICAgc291bmQucmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24ocGluY2hlZEdyb3VwKTsgLy8gc291bmQgaXMgbm93IHdyb25nXG5cbiAgICAgIGxldCBzaGFwZVBhdGggPSBwaW5jaGVkR3JvdXAuX25hbWVkQ2hpbGRyZW4uc2hhcGVQYXRoWzBdO1xuICAgICAgbGV0IHNoYXBlU291bmRPYmogPSBzb3VuZC5nZXRTaGFwZVNvdW5kT2JqKHNoYXBlUGF0aCk7XG4gICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLnB1c2goc2hhcGVTb3VuZE9iaik7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5tb3Zlcy5wdXNoKG1vdmUpO1xuXG4gICAgaWYgKE1hdGguYWJzKGV2ZW50LnZlbG9jaXR5KSA+IDEpIHtcbiAgICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKCdzd2lwZScpO1xuXG4gICAgICAvLyBoaWRlIGFueSBjb25uZWN0ZWQgdHV0c1xuICAgICAgaWYgKCEhJHBpbmNoZWRUdXQpIHtcbiAgICAgICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXQoJHBpbmNoZWRUdXQpO1xuICAgICAgfVxuICAgICAgLy8gZGlzcG9zZSBvZiBncm91cCBvZmZzY3JlZW5cbiAgICAgIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgICAgIHNoYXBlLmRlc3Ryb3lHcm91cFBvcHMocGluY2hlZEdyb3VwKTtcbiAgICAgICAgcGluY2hlZEdyb3VwLmRhdGEuZnJlc2ggPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcGluY2hlZEdyb3VwLmRhdGEudGhyb3duID0gdHJ1ZTtcbiAgICAgIHRocm93UGluY2hlZEdyb3VwKCk7XG4gICAgfVxuXG4gICAgLy8gaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgLy8gICBwaW5jaGVkR3JvdXAuYW5pbWF0ZSh7XG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICBzY2FsZTogMC44XG4gICAgLy8gICAgIH0sXG4gICAgLy8gICAgIHNldHRpbmdzOiB7XG4gICAgLy8gICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAvLyAgICAgICBlYXNpbmc6IFwiZWFzZU91dFwiLFxuICAgIC8vICAgICB9XG4gICAgLy8gICB9KTtcbiAgICAvLyB9XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBudWxsO1xuICB9XG5cbiAgLy8gaWYgYW4gb3ZlcmxheSB3YXMgaW50ZXJydXB0ZWQsIG9wZW4gaXQgdXAgbm93XG4gIGlmICh3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgIT09IG51bGwpIHtcbiAgICBsZXQgc2NoZWR1bGVkT3ZlcmxheSA9IHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheTtcbiAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBudWxsO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoc2NoZWR1bGVkT3ZlcmxheSk7XG4gICAgfSwgdGltaW5nLm92ZXJsYXlEZWxheSk7XG4gIH1cblxuICB3aW5kb3cua2FuLnBpbmNoaW5nID0gZmFsc2U7XG5cbiAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICBzaGFwZS51cGRhdGVQb3BzKCk7XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZygncGluY2ggZG9uZScpO1xuICAvLyBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiBmYWxzZSB9KTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3RvdWNoIGVuYWJsZWQnKTtcbiAgICBoYW1tZXJDYW52YXMub24oJ3BpbmNoc3RhcnQnLCBwaW5jaFN0YXJ0KTtcbiAgICBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpO1xuICAgIGVuYWJsZVRhcEV2ZW50cygpO1xuICAgIC8vIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gICAgLy8gaGFtbWVyQ2FudmFzLm9uKCdwaW5jaHN0YXJ0JywgcGluY2hTdGFydCk7XG4gICAgLy8gZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICAvLyBlbmFibGVUYXBFdmVudHMoKTtcbiAgICAvLyB3aW5kb3cua2FuLnBpbmNoaW5nID0gZmFsc2U7XG4gICAgLy8gd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBudWxsO1xuICB9LCB0aW1pbmcuaW5wdXREZWxheSk7XG59XG5cbmZ1bmN0aW9uIHBpbmNoQ2FuY2VsKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGNvbnNvbGUubG9nKCdwaW5jaGNhbmNlbCcpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGluY2hzdGFydCcsIHBpbmNoU3RhcnQpO1xuICBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpO1xuICBlbmFibGVUYXBFdmVudHMoKTtcblxuICB3aW5kb3cua2FuLnBpbmNoaW5nID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHRocm93UGluY2hlZEdyb3VwKCkge1xuXG4gIGNvbnN0IHZlbG9jaXR5TXVsdGlwbGllciA9IDI1O1xuICBjb25zdCBsYXN0RXZlbnQgPSB3aW5kb3cua2FuLmxhc3RFdmVudDtcbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG5cbiAgaWYgKHBpbmNoZWRHcm91cCA9PT0gbnVsbCB8fCAocGluY2hlZEdyb3VwLmRhdGEgJiYgcGluY2hlZEdyb3VwLmRhdGEudGhyb3duID09PSBmYWxzZSkpIHJldHVybjtcbiAgaWYgKHBpbmNoZWRHcm91cC5wb3NpdGlvbi54IDw9IDAgLSBwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIHx8XG4gICAgICBwaW5jaGVkR3JvdXAucG9zaXRpb24ueCA+PSB2aWV3V2lkdGggKyBwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIHx8XG4gICAgICBwaW5jaGVkR3JvdXAucG9zaXRpb24ueSA8PSAwIC0gcGluY2hlZEdyb3VwLmJvdW5kcy5oZWlnaHQgfHxcbiAgICAgIHBpbmNoZWRHcm91cC5wb3NpdGlvbi55ID49IHZpZXdIZWlnaHQgKyBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCkge1xuICAgICAgICBwaW5jaGVkR3JvdXAuZGF0YS5vZmZTY3JlZW4gPSB0cnVlO1xuICAgICAgICBwaW5jaGVkR3JvdXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBzb3VuZC5yZW1vdmVTaGFwZUZyb21Db21wb3NpdGlvbihwaW5jaGVkR3JvdXApO1xuICAgICAgICB3aW5kb3cua2FuLnBpbmNoZWRHcm91cCA9IG51bGw7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aHJvd1BpbmNoZWRHcm91cCk7XG4gIGNvbnN0IG5ld1ggPSBwaW5jaGVkR3JvdXAucG9zaXRpb24ueCArIGxhc3RFdmVudC52ZWxvY2l0eVggKiB2ZWxvY2l0eU11bHRpcGxpZXI7XG4gIGNvbnN0IG5ld1kgPSBwaW5jaGVkR3JvdXAucG9zaXRpb24ueSArIGxhc3RFdmVudC52ZWxvY2l0eVkgKiB2ZWxvY2l0eU11bHRpcGxpZXI7XG4gIGNvbnN0IG5ld1BvcyA9IG5ldyBQb2ludChuZXdYLCBuZXdZKTtcbiAgcGluY2hlZEdyb3VwLnBvc2l0aW9uID0gbmV3UG9zO1xufVxuXG5mdW5jdGlvbiBldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpIHtcbiAgaWYgKCFldmVudCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoZXZlbnQudGFyZ2V0ICE9IHVpLmRyYXdDYW52YXMpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG5cbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IGNvbnRleHR1YWxUdXRzID0gY29uZmlnLmNvbnRleHR1YWxUdXRzO1xuY29uc3QgdHV0QXJyb3dIZWlnaHQgPSAxNjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1dEJ5TmFtZSh0dXROYW1lKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dHVhbFR1dHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgdHV0T2JqID0gY29udGV4dHVhbFR1dHNbaV07XG5cbiAgICBpZiAodHV0T2JqLnR5cGUgPT09IHR1dE5hbWUpIHtcbiAgICAgIHJldHVybiB0dXRPYmouY29weTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFsbFR1dHNDb21wbGV0ZWQoKSB7XG4gIGNvbnN0IHR1dG9yaWFsQ29tcGxldGlvbk9iaiA9IHdpbmRvdy5rYW4udHV0b3JpYWxDb21wbGV0aW9uO1xuICBsZXQgY29tcGxldGlvbiA9IHRydWU7XG5cbiAgT2JqZWN0LmtleXModHV0b3JpYWxDb21wbGV0aW9uT2JqKS5mb3JFYWNoKChrZXksIHZhbCkgPT4ge1xuICAgIGNvbXBsZXRpb24gPSBjb21wbGV0aW9uICYmIHR1dG9yaWFsQ29tcGxldGlvbk9ialtrZXldO1xuICB9KTtcblxuICByZXR1cm4gY29tcGxldGlvbiA9PT0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbnRleHR1YWxUdXQodHV0TmFtZSkge1xuICBpZiAoISF3aW5kb3cua2FuLnNoYXBlUGF0aCAmJiB3aW5kb3cua2FuLnNoYXBlUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gICAgd2luZG93Lmthbi5zaGFwZXNTaW5jZVR1dCA9IDA7XG5cbiAgICBsZXQgc2hhcGVQYXRoID0gd2luZG93Lmthbi5zaGFwZVBhdGg7XG4gICAgbGV0IHNoYXBlQ2VudGVyID0gc2hhcGVQYXRoLmJvdW5kcy5jZW50ZXI7XG5cbiAgICBsZXQgdHV0Q29weSA9IGdldFR1dEJ5TmFtZSh0dXROYW1lKTtcblxuICAgIGlmICh0dXRDb3B5ICE9PSBudWxsKSB7XG4gICAgICBjb25zdCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke3R1dE5hbWV9J11gKTtcbiAgICAgIGlmICgkdHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdHV0UG9zID0gZ2V0VHV0UG9zaXRpb25Gcm9tQ2VudGVyKCR0dXQsIHNoYXBlQ2VudGVyKTtcbiAgICAgICAgJHR1dC5jc3Moe3RvcDogYCR7dHV0UG9zLnl9cHhgLCBsZWZ0OiBgJHt0dXRQb3MueH1weGAsIHZpc2liaWxpdHk6ICd2aXNpYmxlJ30pO1xuICAgICAgICAkdHV0LmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUNvbnRleHR1YWxUdXQoJHR1dCkge1xuICAkdHV0LmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKHR1dE5hbWUpIHtcbiAgY29uc3QgJHR1dCA9ICQoYC50dXRbZGF0YS10dXQtdHlwZT0nJHt0dXROYW1lfSddYCk7XG4gIGhpZGVDb250ZXh0dWFsVHV0KCR0dXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUNvbnRleHR1YWxUdXRzKCkge1xuICBjb25zdCAkdHV0cyA9ICQoJy5jb250ZXh0dWFsLXR1dHMgLnR1dCcpO1xuICAkdHV0cy5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldENvbnRleHR1YWxUdXRzKCkge1xuICBoaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgd2luZG93Lmthbi50dXRvcmlhbENvbXBsZXRpb24gPSB7XG4gICAgXCJmaWxsXCI6IGZhbHNlLFxuICAgIFwicGluY2hcIjogZmFsc2UsXG4gICAgXCJzd2lwZVwiOiBmYWxzZVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW92ZUNvbnRleHR1YWxUdXQoJHR1dCwgY2VudGVyUG9pbnQpIHtcbiAgbGV0IHR1dFBvcyA9IGdldFR1dFBvc2l0aW9uRnJvbUNlbnRlcigkdHV0LCBjZW50ZXJQb2ludCk7XG4gICR0dXQuY3NzKHt0b3A6IGAke3R1dFBvcy55fXB4YCwgbGVmdDogYCR7dHV0UG9zLnh9cHhgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXRQb3NpdGlvbkZyb21DZW50ZXIoJHR1dCwgY2VudGVyUG9pbnQpIHtcbiAgY29uc3QgdHV0V2lkdGggPSAkdHV0Lm91dGVyV2lkdGgoKTtcbiAgY29uc3QgdHV0SGVpZ2h0ID0gJHR1dC5vdXRlckhlaWdodCgpO1xuICBjb25zdCBsZWZ0UG9zID0gY2VudGVyUG9pbnQueCAtICh0dXRXaWR0aCAvIDIpO1xuICBjb25zdCB0b3BQb3MgPSBjZW50ZXJQb2ludC55IC0gdHV0SGVpZ2h0IC0gdHV0QXJyb3dIZWlnaHQ7XG4gIHJldHVybiBuZXcgUG9pbnQobGVmdFBvcywgdG9wUG9zKTtcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5jb25zdCBzaGFyZSA9IHJlcXVpcmUoJy4vc2hhcmUnKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5jb25zdCB0YXBFdmVudCA9ICdjbGljayB0YXAgdG91Y2gnO1xuXG5jb25zdCBwbGF5aW5nQ2xhc3MgPSBzb3VuZC5wbGF5aW5nQ2xhc3M7XG5jb25zdCBwbGF5RW5hYmxlZENsYXNzID0gc291bmQucGxheUVuYWJsZWRDbGFzcztcblxuY29uc3QgJG5ld0J1dHRvbiA9ICQoJy5jb250cm9scyAubmV3Jyk7XG5jb25zdCAkdW5kb0J1dHRvbiA9ICQoJy5jb250cm9scyAudW5kbycpO1xuY29uc3QgJHBsYXlCdXR0b24gPSAkKCcuY29udHJvbHMgLnBsYXktc3RvcCcpO1xuY29uc3QgJHNoYXJlQnV0dG9uID0gJCgnLmNvbnRyb2xzIC5zaGFyZScpO1xuY29uc3QgJHRpcHNCdXR0b24gPSAkKCcuY29udHJvbHMgLnRpcHMnKTtcblxuZXhwb3J0IGNvbnN0IGRyYXdDYW52YXMgPSAkKCcjY2FudmFzJylbMF07XG5leHBvcnQgY29uc3QgdGlwc092ZXJsYXkgPSAkKCcub3ZlcmxheS50aXBzJylbMF07XG5cbmNvbnN0IGRpdGhlcmVkQ2xhc3MgPSAnZGl0aGVyZWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaW5pdExvZ29SZWZyZXNoKCk7XG4gIGluaXRDb2xvclBhbGV0dGUoKTtcbiAgaW5pdE5ld0J1dHRvbigpO1xuICBpbml0VW5kb0J1dHRvbigpO1xuICBpbml0UGxheUJ1dHRvbigpO1xuICBpbml0VGlwc0J1dHRvbigpO1xuICBpbml0U2hhcmVCdXR0b24oKTtcbiAgaW5pdENvbnRleHR1YWxUdXRzKCk7XG4gIHJlc2V0Q2FudmFzKCk7XG59XG5cbmZ1bmN0aW9uIHVuZGl0aGVyQWxsQnV0dG9ucygpIHtcbiAgJChgLmNvbnRyb2xzIC4ke2RpdGhlcmVkQ2xhc3N9YCkucmVtb3ZlQ2xhc3MoZGl0aGVyZWRDbGFzcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB1bmRpdGhlciA9IGZhbHNlKSB7XG4gIGlmIChidXR0b25OYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKCQuaXNBcnJheShidXR0b25OYW1lcykpIHtcbiAgICAgIGJ1dHRvbk5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRpdGhlckJ1dHRvbkJ5TmFtZShuYW1lLCB1bmRpdGhlcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZXMsIHVuZGl0aGVyKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcykge1xuICBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdGhlckJ1dHRvbkJ5TmFtZShidXR0b25OYW1lLCB1bmRpdGhlciA9IGZhbHNlKSB7XG4gIGxldCAkYnV0dG9uID0gJChgLmNvbnRyb2xzIC4ke2J1dHRvbk5hbWV9YCk7XG4gIC8vIGNvbnNvbGUubG9nKCRidXR0b24pO1xuICBpZiAoJGJ1dHRvbi5sZW5ndGggPiAwKSB7XG4gICAgaWYgKHVuZGl0aGVyICE9PSB0cnVlKSB7XG4gICAgICAkYnV0dG9uLmFkZENsYXNzKGRpdGhlcmVkQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkYnV0dG9uLnJlbW92ZUNsYXNzKGRpdGhlcmVkQ2xhc3MpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5kaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSkge1xuICBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcykge1xuICBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gbmV3UHJlc3NlZCgpIHtcbiAgLy8gY29uc29sZS5sb2coJ25ldyBwcmVzc2VkJyk7XG4gIHdpbmRvdy5rYW4uY29tcG9zaXRpb24gPSBbXTtcbiAgcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5yZW1vdmVDaGlsZHJlbigpO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgZGl0aGVyQnV0dG9uc0J5TmFtZShbJ3VuZG8nLCAnbmV3JywgJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy8gd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gZmFsc2U7XG4gIC8vIHR1dG9yaWFsLnJlc2V0Q29udGV4dHVhbFR1dHMoKTtcbn1cblxuZnVuY3Rpb24gdW5kb1ByZXNzZWQoKSB7XG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGNvbnN0IHRyYW5zcGFyZW50ID0gbmV3IENvbG9yKDAsIDApO1xuICAvLyBjb25zb2xlLmxvZygndW5kbyBwcmVzc2VkJyk7XG4gIGlmICghKHdpbmRvdy5rYW4ubW92ZXMubGVuZ3RoID4gMCkpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnbm8gbW92ZXMgeWV0Jyk7XG4gICAgd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGxhc3RNb3ZlID0gd2luZG93Lmthbi5tb3Zlcy5wb3AoKTtcbiAgbGV0IGl0ZW0gPSBwcm9qZWN0LmdldEl0ZW0oe1xuICAgIGlkOiBsYXN0TW92ZS5pZFxuICB9KTtcblxuICBpZiAoaXRlbSkge1xuICAgIGl0ZW0udmlzaWJsZSA9IHRydWU7IC8vIG1ha2Ugc3VyZVxuICAgIHN3aXRjaChsYXN0TW92ZS50eXBlKSB7XG4gICAgICBjYXNlICduZXdHcm91cCc6XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmluZyBncm91cCcpO1xuICAgICAgICBzb3VuZC5yZW1vdmVTaGFwZUZyb21Db21wb3NpdGlvbihpdGVtKTtcbiAgICAgICAgdXRpbC5jbGVhckdyb3VwUG9wcyhpdGVtKTtcbiAgICAgICAgaXRlbS5yZW1vdmUoKTtcblxuXG4gICAgICAgIGNvbnN0IG51bUdyb3VwcyA9IHV0aWwuZ2V0TnVtR3JvdXBzKCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdudW1Hcm91cHMnLCBudW1Hcm91cHMpO1xuXG4gICAgICAgIGlmIChudW1Hcm91cHMgPD0gMCkge1xuICAgICAgICAgIGRpdGhlckJ1dHRvbnNCeU5hbWUoWyd1bmRvJywgJ25ldyddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudW1Hcm91cHMgPCAzKSB7XG4gICAgICAgICAgZGl0aGVyQnV0dG9uc0J5TmFtZShbJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgICAgICAgICAkYm9keS5yZW1vdmVDbGFzcyhzb3VuZC5wbGF5RW5hYmxlZENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmRpdGhlckJ1dHRvbnNCeU5hbWUoWydwbGF5LXN0b3AnLCAnc2hhcmUnXSk7XG4gICAgICAgICAgJGJvZHkuYWRkQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmaWxsQ2hhbmdlJzpcbiAgICAgICAgaWYgKGxhc3RNb3ZlLnRyYW5zcGFyZW50KSB7XG4gICAgICAgICAgaXRlbS5maWxsQ29sb3IgPSBsYXN0TW92ZS5maWxsO1xuICAgICAgICAgIGl0ZW0uc3Ryb2tlQ29sb3IgPSBsYXN0TW92ZS5maWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW0uZmlsbENvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgaXRlbS5zdHJva2VDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgICB9XG4gICAgICBjYXNlICd0cmFuc2Zvcm0nOlxuICAgICAgICBpdGVtLmRhdGEuZnJlc2ggPSB0cnVlO1xuICAgICAgICBpZiAoISFsYXN0TW92ZS5wb3NpdGlvbikge1xuICAgICAgICAgIGl0ZW0ucG9zaXRpb24gPSBsYXN0TW92ZS5wb3NpdGlvblxuICAgICAgICAgIGlmIChpdGVtLmRhdGEgJiYgaXRlbS5kYXRhLnR1dCAmJiBpdGVtLmRhdGEudHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGl0ZW0gaGFzIGNvbm5lY3RlZCBjb250ZXh0dWFsIHR1dCwgbW92ZSBpdCB0byB0aGUgcmlnaHQgcGxhY2VcbiAgICAgICAgICAgIGNvbnN0ICR0dXQgPSAkKGAudHV0W2RhdGEtdHV0LXR5cGU9JyR7dHV0TmFtZX0nXWApO1xuICAgICAgICAgICAgdHV0b3JpYWwubW92ZUNvbnRleHR1YWxUdXQoJHR1dCwgbGFzdE1vdmUucG9zaXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISFsYXN0TW92ZS5yb3RhdGlvbikge1xuICAgICAgICAgIGl0ZW0ucm90YXRpb24gPSBsYXN0TW92ZS5yb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFsYXN0TW92ZS5zY2FsZSkge1xuICAgICAgICAgIGl0ZW0uc2NhbGUobGFzdE1vdmUuc2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgICAgICAgc2hhcGUudXBkYXRlUG9wcygpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Vua25vd24gY2FzZScpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZygnY291bGQgbm90IGZpbmQgbWF0Y2hpbmcgaXRlbScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBsYXlQcmVzc2VkKCkge1xuICAvLyBjb25zb2xlLmxvZygncGxheSBwcmVzc2VkJyk7XG4gIC8vIHNvdW5kLnN0b3BDb21wb3NpdGlvbigpO1xuICAvLyBvdmVybGF5cy5jbG9zZUFuZFJlc2V0T3ZlcmxheXMoKTtcbiAgLy8gdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIGxldCBwbGF5aW5nID0gd2luZG93Lmthbi5wbGF5aW5nO1xuICAvLyBjb25zb2xlLmxvZyhwbGF5aW5nLCB1dGlsLmdldE51bUdyb3VwcygpID4gMiwgIXBsYXlpbmcgJiYgdXRpbC5nZXROdW1Hcm91cHMoKSA+IDIsICRib2R5KTtcblxuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCk7XG4gIGlmICghcGxheWluZyAmJiB1dGlsLmdldE51bUdyb3VwcygpID4gMikge1xuICAgIC8vIGNvbnNvbGUubG9nKCdzdGFydGluZyBwbGF5aW5nJyk7XG4gICAgc291bmQuc3RhcnRQbGF5aW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3N0b3BwaW5nIHBsYXlpbmcnKTtcbiAgICBzb3VuZC5zdG9wUGxheWluZyh0cnVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0aXBzUHJlc3NlZCgpIHtcbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ3RpcHMnKTtcbiAgLy8gY29uc29sZS5sb2coJ3RpcHMgcHJlc3NlZCcpO1xufVxuXG5mdW5jdGlvbiBzaGFyZVByZXNzZWQoKSB7XG4gIHNoYXJlLnJlY29yZCgpO1xuICAvLyBjb25zb2xlLmxvZygnc2hhcmUgcHJlc3NlZCcpO1xuICAvLyBzb3VuZC5zdG9wUGxheWluZygpO1xuICAvLyBpZiAoJGJvZHkuaGFzQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcykpIHtcbiAgLy8gICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnc2hhcmUnKTtcbiAgLy8gfVxufVxuXG5mdW5jdGlvbiBpbml0TG9nb1JlZnJlc2goKSB7XG4gICQoJy5tYWluLWxvZ28nKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0Q29sb3JQYWxldHRlKCkge1xuICBjb25zdCAkcGFsZXR0ZVdyYXAgPSAkKCd1bC5wYWxldHRlLWNvbG9ycycpO1xuICBjb25zdCAkcGFsZXR0ZUNvbG9ycyA9ICRwYWxldHRlV3JhcC5maW5kKCdsaScpO1xuICBjb25zdCBwYWxldHRlQ29sb3JTaXplID0gMjA7XG4gIGNvbnN0IHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSA9IDMwO1xuICBjb25zdCBwYWxldHRlU2VsZWN0ZWRDbGFzcyA9ICdwYWxldHRlLXNlbGVjdGVkJztcblxuICAvLyBob29rIHVwIGNsaWNrXG4gICRwYWxldHRlQ29sb3JzLm9uKCdjbGljayB0YXAgdG91Y2gnLCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIGxldCAkc3ZnID0gJCh0aGlzKS5maW5kKCdzdmcucGFsZXR0ZS1jb2xvcicpO1xuXG4gICAgICBpZiAoISRzdmcuaGFzQ2xhc3MocGFsZXR0ZVNlbGVjdGVkQ2xhc3MpKSB7XG4gICAgICAgICQoJy4nICsgcGFsZXR0ZVNlbGVjdGVkQ2xhc3MpXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKHBhbGV0dGVTZWxlY3RlZENsYXNzKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHBhbGV0dGVDb2xvclNpemUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhbGV0dGVDb2xvclNpemUpXG4gICAgICAgICAgLmZpbmQoJ3JlY3QnKVxuICAgICAgICAgIC5hdHRyKCdyeCcsIDApXG4gICAgICAgICAgLmF0dHIoJ3J5JywgMCk7XG5cbiAgICAgICAgJHN2Zy5hZGRDbGFzcyhwYWxldHRlU2VsZWN0ZWRDbGFzcylcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSlcbiAgICAgICAgICAuZmluZCgncmVjdCcpXG4gICAgICAgICAgLmF0dHIoJ3J4JywgcGFsZXR0ZVNlbGVjdGVkQ29sb3JTaXplIC8gMilcbiAgICAgICAgICAuYXR0cigncnknLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUgLyAyKVxuXG4gICAgICAgIHdpbmRvdy5rYW4uY3VycmVudENvbG9yID0gJHN2Zy5maW5kKCdyZWN0JykuYXR0cignZmlsbCcpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnJWNjb2xvcicsICdjb2xvcjpyZWQnLCBjb2xvci5nZXRDb2xvck5hbWUod2luZG93Lmthbi5jdXJyZW50Q29sb3IpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdE5ld0J1dHRvbigpIHtcbiAgJCgnLm1haW4tY29udHJvbHMgLm5ldycpLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIG5ld1ByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0VW5kb0J1dHRvbigpIHtcbiAgJCgnLm1haW4tY29udHJvbHMgLnVuZG8nKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkYm9keS5oYXNDbGFzcyhwbGF5aW5nQ2xhc3MpKSB7XG4gICAgICB1bmRvUHJlc3NlZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRQbGF5QnV0dG9uKCkge1xuICAkKCcubWFpbi1jb250cm9scyAucGxheS1zdG9wIC5wbGF5Jykub24odGFwRXZlbnQsIHNvdW5kLnN0YXJ0UGxheWluZyk7XG4gICQoJy5tYWluLWNvbnRyb2xzIC5wbGF5LXN0b3AgLnN0b3AnKS5vbih0YXBFdmVudCwgc291bmQuc3RvcFBsYXlpbmcpO1xufVxuXG5mdW5jdGlvbiBpbml0VGlwc0J1dHRvbigpIHtcbiAgJCgnLmNvbnRyb2xzIC50aXBzJykub24odGFwRXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgIGlmICghJGJvZHkuaGFzQ2xhc3MocGxheWluZ0NsYXNzKSkge1xuICAgICAgdGlwc1ByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0U2hhcmVCdXR0b24oKSB7XG4gICQoJy5jb250cm9scyAuc2hhcmUnKS5vbih0YXBFdmVudCwgc2hhcmVQcmVzc2VkKTtcbn1cblxuZnVuY3Rpb24gaW5pdENvbnRleHR1YWxUdXRzKCkge1xuICBjb25zdCAkdHV0cyA9ICQoJy5jb250ZXh0dWFsLXR1dHMgLnR1dCcpO1xuICAkdHV0cy5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDYW52YXMoKSB7XG4gIHBhcGVyLnByb2plY3QuY2xlYXIoKTtcblxuICAvLyBhZGQgcmFuZG9tIGJhY2tncm91bmRcbiAgcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5uYW1lID0gJ2JhY2tncm91bmQnO1xuICBjb25zdCBudW1DYW52YXNzZXMgPSAxMDtcbiAgY29uc3QgcmFuZG9tQ2FudmFzSW5kZXggPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAobnVtQ2FudmFzc2VzIC0gMSkpICsgMTsgLy8gWzEsIG51bUNhbnZhc3Nlc11cbiAgY29uc3QgY2FudmFzQmcgPSBuZXcgUmFzdGVyKGBjYW52YXMtJHtyYW5kb21DYW52YXNJbmRleH1gKTtcbiAgY2FudmFzQmcubmFtZSA9ICdjYW52YXNCZyc7XG4gIGNhbnZhc0JnLnBvc2l0aW9uID0gcGFwZXIudmlldy5jZW50ZXI7XG5cbiAgLy8gYWRkIGNhbnZhcyBsYXllclxuICBjb25zdCBzY2FsZUZhY3Rvckhvcml6b250YWwgPSBwYXBlci52aWV3LnZpZXdTaXplLndpZHRoIC8gY2FudmFzQmcuc2l6ZS53aWR0aDtcbiAgY29uc3Qgc2NhbGVGYWN0b3JWZXJ0aWNhbCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0IC8gY2FudmFzQmcuc2l6ZS5oZWlnaHQ7XG4gIGNhbnZhc0JnLnNjYWxlKE1hdGgubWF4KHNjYWxlRmFjdG9ySG9yaXpvbnRhbCwgc2NhbGVGYWN0b3JWZXJ0aWNhbCkpO1xuICBsZXQgbGF5ZXIgPSBuZXcgTGF5ZXIoKTsgLy8gaW5pdCBuZXcgbGF5ZXIgdGhhdCBhbGwgb3RoZXIgc2hhcGVzIHdpbGwgYmUgZHJhd24gdXBvblxuICBwYXBlci5wcm9qZWN0LmFjdGl2ZUxheWVyLm5hbWUgPSAnY2FudmFzJztcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbi8vIENvbnZlcnRzIGZyb20gZGVncmVlcyB0byByYWRpYW5zLlxuZXhwb3J0IGZ1bmN0aW9uIHJhZChkZWdyZWVzKSB7XG4gIHJldHVybiBkZWdyZWVzICogTWF0aC5QSSAvIDE4MDtcbn07XG5cbi8vIENvbnZlcnRzIGZyb20gcmFkaWFucyB0byBkZWdyZWVzLlxuZXhwb3J0IGZ1bmN0aW9uIGRlZyhyYWRpYW5zKSB7XG4gIHJldHVybiByYWRpYW5zICogMTgwIC8gTWF0aC5QSTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBoeXBvdChhLCBiKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYSwgMikgKyBNYXRoLnBvdyhiLCAyKSk7IC8vIHB5dGhhZ29yZWFuIVxufVxuXG4vLyByZXR1cm5zIGFic29sdXRlIHZhbHVlIG9mIHRoZSBkZWx0YSBvZiB0d28gYW5nbGVzIGluIHJhZGlhbnNcbmV4cG9ydCBmdW5jdGlvbiBhbmdsZURlbHRhKHgsIHkpIHtcbiAgcmV0dXJuIE1hdGguYWJzKE1hdGguYXRhbjIoTWF0aC5zaW4oeSAtIHgpLCBNYXRoLmNvcyh5IC0geCkpKTs7XG59XG5cbi8vIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuZXhwb3J0IGZ1bmN0aW9uIGRlbHRhKHAxLCBwMikge1xuICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHAxLnggLSBwMi54LCAyKSArIE1hdGgucG93KHAxLnkgLSBwMi55LCAyKSk7IC8vIHB5dGhhZ29yZWFuIVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZSgpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxHcm91cHMoKSB7XG4gIHJldHVybiBwYXBlci5wcm9qZWN0LmdldEl0ZW1zKHtcbiAgICBjbGFzc05hbWU6ICdHcm91cCdcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbnlTaGFwZXNPbkNhbnZhcygpIHtcbiAgY29uc3QgZ3JvdXBzID0gZ2V0QWxsR3JvdXBzKCk7XG4gIHJldHVybiBncm91cHMubGVuZ3RoID4gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE51bUdyb3VwcygpIHtcbiAgY29uc3QgZ3JvdXBzID0gZ2V0QWxsR3JvdXBzKCk7XG4gIC8vIGNvbnNvbGUubG9nKCdudW1ncm91cHMnLCBncm91cHMubGVuZ3RoKTtcbiAgcmV0dXJuIGdyb3Vwcy5sZW5ndGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmVzaEdyb3VwcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEubGluZSA9PT0gZmFsc2UgJiYgZWwuZGF0YS5mcmVzaCA9PT0gdHJ1ZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFBvcHMoKSB7XG4gIHJldHVybiBwYXBlci5wcm9qZWN0LmdldEl0ZW1zKHtcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEucG9wID09PSB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJHcm91cFBvcHMoZ3JvdXApIHtcbiAgY29uc3QgcG9wcyA9IGdldEdyb3VwUG9wcyhncm91cCk7XG4gIHBvcHMuZm9yRWFjaCgocG9wKSA9PiBwb3AucmVtb3ZlKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JvdXBQb3BzKGdyb3VwKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdncm91cCBwb3AgZ3JvdXAnLCBncm91cC5pZCwgZ3JvdXApO1xuICBsZXQgcmV0dXJuUG9wcyA9IFtdO1xuXG4gIGlmIChncm91cC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZ3JvdXBQb3BzID0gZ3JvdXAuZ2V0SXRlbXMoe1xuICAgICAgbWF0Y2g6IChlbCkgPT4gZWwuZGF0YSAmJiBlbC5kYXRhLnBvcCA9PT0gdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVyblBvcHMgPSByZXR1cm5Qb3BzLmNvbmNhdChncm91cFBvcHMpO1xuICB9XG5cbiAgY29uc3QgaW50ZXJzZWN0aW5nUG9wcyA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5wb3AgPT09IHRydWUgJiYgZWwuZGF0YS5pbnRlcnNlY3RpbmdHcm91cCA9PT0gZ3JvdXAuaWRcbiAgfSk7XG5cbiAgaWYgKGludGVyc2VjdGluZ1BvcHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVyblBvcHMgPSByZXR1cm5Qb3BzLmNvbmNhdChpbnRlcnNlY3RpbmdQb3BzKTtcbiAgfVxuXG4gIHJldHVybiByZXR1cm5Qb3BzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9wQ2FuZGlkYXRlcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEubGluZSA9PT0gZmFsc2VcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTaGEoKSB7XG4gICQuZ2V0KCcvaGFzaCcpXG4gICAgLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnY3VycmVudCBoYXNoOicsIHJlcyk7XG4gICAgICB3aW5kb3cua2FuLmhhc2ggPSByZXM7XG4gICAgfSlcbiAgICAuZmFpbChmdW5jdGlvbihlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdlcnJvciBnZXR0aW5nIGhhc2g6JywgZSk7XG4gICAgfSk7XG59XG5cbi8vIGh0dHA6Ly9ibG9nLnNvdWxzZXJ2Lm5ldC91bmRlcnN0YW5kaW5nLW9iamVjdC1jbG9uaW5nLWluLWphdmFzY3JpcHQtcGFydC1pL1xuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dDb3B5KCBvcmlnaW5hbCApIHtcbiAgICAvLyBGaXJzdCBjcmVhdGUgYW4gZW1wdHkgb2JqZWN0IHdpdGhcbiAgICAvLyBzYW1lIHByb3RvdHlwZSBvZiBvdXIgb3JpZ2luYWwgc291cmNlXG4gICAgdmFyIGNsb25lID0gT2JqZWN0LmNyZWF0ZSggT2JqZWN0LmdldFByb3RvdHlwZU9mKCBvcmlnaW5hbCApICkgO1xuXG4gICAgdmFyIGksIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyggb3JpZ2luYWwgKSA7XG5cbiAgICBmb3IgKCBpID0gMCA7IGkgPCBrZXlzLmxlbmd0aCA7IGkgKysgKSB7XG4gICAgICAvLyBjb3B5IGVhY2ggcHJvcGVydHkgaW50byB0aGUgY2xvbmVcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggY2xvbmUgLCBrZXlzWyBpIF0gLFxuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKCBvcmlnaW5hbCAsIGtleXNbIGkgXSApXG4gICAgICApIDtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tUGljayhhcnJheSkge1xuICBpZiAoYXJyYXkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBhcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpXTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwiY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuY29uc3QgbWFpbiA9IHJlcXVpcmUoJy4vbWFpbicpO1xuY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB0aW1pbmcgPSByZXF1aXJlKCcuL3RpbWluZycpO1xuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5jb25zdCB0YXBFdmVudCA9ICdjbGljayB0YXAgdG91Y2gnO1xuXG5leHBvcnQgY29uc3QgdmlkZW9QbGF5aW5nQ2xhc3MgPSAndmlkZW8tcGxheWluZyc7XG5cbmNvbnN0ICR2aWRlb1dyYXBwZXIgPSAkYm9keS5maW5kKCcjdmlkZW8td3JhcCcpO1xuY29uc3QgJHZpZGVvID0gJHZpZGVvV3JhcHBlci5maW5kKCd2aWRlbycpO1xuXG5leHBvcnQgZnVuY3Rpb24gZW50ZXJUdXRvcmlhbE1vZGUoKSB7XG4gIGNvbnNvbGUubG9nKCdlbnRlcmluZyB0dXRvcmlhbCBtb2RlJyk7XG4gIHBsYXlWaWRlbygpO1xuICAkYm9keS5hZGRDbGFzcyh2aWRlb1BsYXlpbmdDbGFzcyk7XG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0KTtcbiAgY2xlYXJJbnRlcnZhbCh3aW5kb3cua2FuLmNvbnRpbnVlQ291bnRkb3duSW50ZXJ2YWwpO1xuICAkYm9keS5vZmYodGFwRXZlbnQsIHRpbWluZy5wcmV2ZW50SW5hY3Rpdml0eVRpbWVvdXQpO1xuICAkYm9keS5vbih0YXBFdmVudCwgZXhpdFR1dG9yaWFsTW9kZSk7XG4gIG1haW4ucmVzZXRXaW5kb3coKTtcbiAgdWkucmVzZXRDYW52YXMoKTtcbiAgd2luZG93Lmthbi5yZWZyZXNoQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAkLmdldCgnL2hhc2gnKVxuICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGlmIChyZXMgIT09IHdpbmRvdy5rYW4uaGFzaCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdkaWZmZXJlbnQgaGFzaCwgcmVsb2FkaW5nJyk7XG4gICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuZmFpbChmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGdldHRpbmcgaGFzaDonLCBlKTtcbiAgICAgIH0pO1xuICB9LCB0aW1pbmcucmVmcmVzaENoZWNrRGVsYXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhpdFR1dG9yaWFsTW9kZSgpIHtcbiAgY29uc29sZS5sb2coJ2V4aXRpbmcgdHV0b3JpYWwgbW9kZScpO1xuICBzb3VuZC5yZWluaXRTaGFwZVNvdW5kcygpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbCh3aW5kb3cua2FuLnJlZnJlc2hDaGVja0ludGVydmFsKTtcbiAgICAgIEhvd2xlci5tdXRlKGZhbHNlKTtcbiAgICAgIHBhdXNlVmlkZW8oKTtcbiAgICAgICRib2R5Lm9mZih0YXBFdmVudCwgZXhpdFR1dG9yaWFsTW9kZSk7XG4gICAgICAkYm9keS5vbih0YXBFdmVudCwgdGltaW5nLnByZXZlbnRJbmFjdGl2aXR5VGltZW91dCk7XG4gICAgICAkYm9keS5yZW1vdmVDbGFzcyh2aWRlb1BsYXlpbmdDbGFzcyk7XG4gICAgICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5pbmFjdGl2aXR5VGltZW91dCk7XG4gICAgICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4uY29udGludWVDb3VudGRvd25JbnRlcnZhbCk7XG5cbiAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdpbnRybycpO1xuXG4gICAgICB3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdjb250aW51ZScpO1xuICAgICAgfSwgdGltaW5nLmNvbnRpbnVlSW5hY3Rpdml0eURlbGF5KTtcbiAgICB9KVxuICAuZmFpbCgoZSkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGluaXR0aW5nIHNoYXBlIHNvdW5kczonLCBlKTtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXVzZVZpZGVvKCkge1xuICAkdmlkZW8uZ2V0KDApLnBhdXNlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGF5VmlkZW8oKSB7XG4gICR2aWRlby5nZXQoMCkucGxheSgpO1xufVxuIl19\n"]}
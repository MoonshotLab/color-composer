{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","runAnimations","pop","canvasId","palette","colors","colorNames","#20171C","#1E2A43","#28377D","#352747","#CA2E26","#9A2A1F","#DA6C26","#453121","#916A47","#DAAD27","#7F7D31","#2B5E2E","gradients","pops","colorSize","selectedColorSize","contextualTuts","type","copy","2","window","document","exportName","undefined","setTimeoutContext","fn","timeout","context","setTimeout","bindFn","invokeArrayArg","arg","Array","isArray","each","obj","iterator","forEach","hasOwnProperty","deprecate","method","name","message","deprecationMessage","stack","replace","log","console","warn","apply","this","arguments","inherit","child","base","properties","childP","baseP","prototype","Object","create","constructor","_super","assign","boolOrFn","val","args","TYPE_FUNCTION","ifUndefined","val1","val2","addEventListeners","target","types","handler","splitStr","addEventListener","removeEventListeners","removeEventListener","hasParent","node","parent","parentNode","inStr","str","find","indexOf","trim","split","inArray","src","findByKey","toArray","slice","uniqueArray","key","sort","results","values","push","b","prefixed","property","prefix","prop","camelProp","toUpperCase","VENDOR_PREFIXES","uniqueId","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","Input","manager","callback","self","options","inputTarget","domHandler","ev","enable","init","createInputInstance","Type","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","SUPPORT_ONLY_TOUCH","TouchInput","SUPPORT_TOUCH","TouchMouseInput","MouseInput","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","INPUT_START","isFinal","INPUT_END","INPUT_CANCEL","session","computeInputData","emit","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","now","deltaTime","angle","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","x","overallVelocityY","y","abs","scale","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offset","offsetDelta","prevDelta","velocity","velocityX","velocityY","direction","last","lastInterval","COMPUTE_INTERVAL","v","clientX","round","clientY","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","p1","p2","props","PROPS_XY","Math","sqrt","atan2","PI","start","end","PROPS_CLIENT_XY","evEl","MOUSE_ELEMENT_EVENTS","evWin","MOUSE_WINDOW_EVENTS","pressed","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","SingleTouchInput","evTarget","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","started","normalizeSingleTouches","all","touches","changed","changedTouches","concat","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","INPUT_MOVE","identifier","targetTouches","changedTargetTouches","filter","touch","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","splice","DEDUP_TIMEOUT","isSyntheticEvent","dx","dy","DEDUP_DISTANCE","TouchAction","value","set","cleanTouchActions","actions","TOUCH_ACTION_NONE","hasPanX","TOUCH_ACTION_PAN_X","hasPanY","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_AUTO","getTouchActionProps","NATIVE_TOUCH_ACTION","touchMap","cssSupports","CSS","supports","Recognizer","defaults","id","state","STATE_POSSIBLE","simultaneous","requireFail","stateStr","STATE_CANCELLED","STATE_ENDED","STATE_CHANGED","STATE_BEGAN","directionStr","getRecognizerByNameIfManager","otherRecognizer","recognizer","get","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","recognizers","preset","Manager","handlers","oldCssProps","touchAction","toggleCssProps","item","add","recognizeWith","requireFailure","style","cssProps","triggerDomEvent","event","data","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","TEST_ELEMENT","createElement","Date","TypeError","output","index","source","nextKey","extend","dest","merge","keys","MOBILE_REGEX","test","navigator","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","3","4","5","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","toLowerCase","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","TOUCH_INPUT_MAP","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_MAP","compute","update","getTouchAction","join","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_RECOGNIZED","STATE_FAILED","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","process","reset","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","stop","force","stopped","curRecognizer","existing","remove","on","events","off","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","define","amd","global","HowlerGlobal","Howler","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","mobileAutoEnable","_setup","volume","vol","parseFloat","setupAudioContext","gain","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","unload","close","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","err","canPlayType","mpegTest","checkOpera","match","isOldOpera","parseInt","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_enableMobileAudio","isMobile","maxTouchPoints","msMaxTouchPoints","_mobileEnabled","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","createBufferSource","buffer","connect","destination","noteOn","onended","disconnect","suspend","_sounds","_paused","_suspendTimer","then","_resumeAfterSuspend","_autoResume","resume","_emit","Howl","error","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_state","_endTimers","_queue","_onend","onend","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onresume","action","play","load","url","exec","location","protocol","Sound","loadBuffer","internal","num","_ended","_id","_inactiveSound","seek","max","_seek","duration","_start","_stop","playWebAudio","_refreshBuffer","setValueAtTime","currentTime","_playStart","bufferSource","noteGrainOn","Infinity","bind","isRunning","once","_clearTimer","playHtml5","playbackRate","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","fade","from","to","len","diff","dir","steps","stepLen","ceil","linearRampToValueAtTime","_interval","setInterval","soundId","min","clearInterval","cancelScheduledValues","loopStart","loopEnd","realTime","playing","rateSeek","sounds","_errorFn","_loadFn","remCache","cache","msg","_loadQueue","task","shift","_drain","limit","cnt","_panner","howl","_parent","random","createGain","createGainNode","paused","_errorListener","_loadListener","__default","loadSound","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","responseType","status","response","onerror","safeXhrSend","send","arraybuffer","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","standalone","_pos","_orientation","stereo","pan","pos","z","setPosition","orientation","xUp","yUp","zUp","or","setOrientation","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_panningModel","_refDistance","_rolloffFactor","pa","panner","createPanner","getPathColorName","path","hexColor","originalColor","getColorName","color","config","getRandomPop","floor","getIndexedPopColor","defineProperty","transparent","Color","./../../config","root","factory","ShapeDetector","deg2Rad","d","Stroke","points","processStroke","patterns","_nbSamplePoints","nbSamplePoints","learn","_squareSize","_phi","_angleRange","_anglePrecision","_halfDiagonal","_origin","resample","setCentroid","rotateBy","indicativeAngle","scaleToSquare","translateToOrigin","localDistance","q","strokeLength","newPoints","point","cos","sin","c","box","minX","maxX","minY","maxY","width","height","distanceAtBestAngle","pattern","x1","f1","distanceAtAngle","x2","f2","strokePoints","patternPoints","defaultShapes","spot","patternName","score","stroke","bestDistance","bestPattern","bestScore","6","resetWindow","kan","currentColor","composition","compositionInterval","compositionTimeout","soundTimeouts","lastEvent","interaction","moves","pinching","pinchedGroup","pinchedTut","pathData","shapePath","prevAngle","sides","side","corners","lastScale","lastRotation","originalPosition","tutorialCompletion","fill","pinch","swipe","inactivityTimeout","playPromptTimeout","userHasDrawnFirstShape","firstTimePlaying","shapesSinceTut","refreshCheckInterval","sha","scheduledOverlay","continueCountdownInterval","shapeSounds","ui","overlays","timing","util","$","run","setSha","fail","reload","./overlays","./sound","./timing","./touch","./ui","./util","./video","7","openOverlay","overlayName","allOverlays","includes","panning","preventInactivityTimeout","closeAndResetOverlays","tutorial","hideContextualTuts","$body","addClass","overlayActiveClass","tapEvent","openIntroOverlay","anyShapesOnCanvas","openPlayPromptOverlay","playPromptDelay","openSharePromptOverlay","openContinueOverlay","openTipsOverlay","openShareOverlay","resetContinueCountdown","html","continueInactivityDelay","$countdownNumWrap","video","enterTutorialMode","activateTipsCards","cardNavNext","$old","$new","next","$cardItems","first","$next","$third","slide","removeClass","updateCardCounter","cardsCount","cardInteractions","timeOfLastInteraction","closest","resetTips","$sharePhone","overlayOpenClasses","current","total","$footer","phoneNumberInputs","mask","$shareKeypad","phoneNumber","toString","masked","randomCardGraphics","el","attr","initTips","initShare","hammerCanvas","$cardsWrap","map","overlay","./tutorial","8","destroyGroupPops","group","groupPopsBefore","getGroupPops","groupPopsAfter","fillInGroupPopsById","groupId","paper","project","getItem","className","children","groupChild","toggleFill","interior","fillColor","strokeColor","cleanUpGroup","acceptableNames","updatePops","freshGroups","getFreshGroups","popCandidates","getPopCandidates","getAllPops","reverse","freshGroup","freshOuter","_namedChildren","bringToFront","otherGroup","otherGroupOuter","thisPop","intersect","popColor","popGroup","intersectingGroup","visible","closed","addChild","fresh","getOutlineGroup","truedShape","outerPath","Path","middlePath","sizes","firstTop","firstBottom","lastTop","lastBottom","Group","firstSegment","size","cumSize","avgSize","prevPoint","getPointAt","nextPoint","Point","topX","topY","top","bottomX","bottomY","bottom","insert","centerTop","centerBottom","smooth","returnGroup","getTruedShape","pathClone","clone","completedPath","getCompletedPath","truedPath","strokeWidth","reduce","simplify","intersections","getIntersections","trimmedPath","getTrimmedPath","extendedPath","getExtendedPath","_intersections","_trimmedPath","replaceWith","getBruteExtendedPath","_intersections2","_trimmedPath2","getShapePrediction","prediction","shapeJSON","exportJSON","shapeData","processShapeData","shapePrediction","detector","getIntegerPoint","stringifyPoint","parsePoint","pointStr","getClosestPointFromPathData","leastDistance","closestPoint","Base","datum","json","returnShape","jsonObj","JSON","parse","segments","segment","positionInfo","findInteriorCurves","interiorCurves","dividedPath","resolveCrossings","enclosedLoop","_enclosedLoop","thresholdDist","thresholdDistMultiplier","nextSegment","startAngle","inverseStartAngle","extendedStartPoint","lastSegment","penSegment","previous","endAngle","extendedEndPoint","firstPoint","lastPoint","unite","crossings","maxArea","maxChild","area","intersection","intersectionPoint","pathCrossings","subtract","_ret2","closedChildren","childClone","accumulator","_j","newPath","copyContent","copyAttributes","_typeof","hitTestGroupBounds","groups","getAllGroups","hitTestBounds","strokeBounds","isInside","Symbol","cornerThresholdDeg","shapeNames","./color","./lib/shape-detector","9","asyncInitShapeSounds","reinitShapeSounds","getShapeSoundObj","viewWidth","view","viewSize","initShapeSounds","shape","colorName","quantizedSoundStartTime","quantizeLength","bounds","compositionLength","quantizedSoundDuration","soundObj","startTime","pathId","spriteName","startPlaying","hasClass","playEnabledClass","playingClass","startComposition","stopPlaying","stopComposition","asyncGetShapeSoundFromShapeName","shapeName","shapeSoundJSONPath","getJSON","resp","shapeSoundData","formatShapeSoundData","promises","when","done","returnSounds","returnData","urls","smallestDuration","bpm","returnDuration","quantizePosition","position","smallestInterval","measures","returnPosition","animateShapePlay","animating","totalDuration","measureLength","animate","rotate","settings","easing","complete","removeShapeFromComposition","shapeGroup","getItems","_ret","clearSoundTimeouts","soundTimeout","playCompositionFirstTime","trimmedCompositionObj","getTrimmedCompositionObj","iterations","repeatComposition","playCompositionOnce","trimmedComposition","getCompositionStartTime","modifiedSound","shallowCopy","beatLength","./shape","howler","10","hash","pauseVideo","exitTutorialMode","getTime","drawInactivityDelay","inputDelay","refreshCheckDelay","overlayDelay","11","hammerTips","tipsOverlay","canvas","doubleTap","panStart","panMove","panEnd","pinchStart","pinchMove","pinchEnd","enablePanAndPinchEvents","enablePanEvents","enablePinchEvents","enableTapEvents","disableTapEvents","disablePanEvents","disablePinchEvents","pointer","hitResult","hitTest","hitOptions","eventTargetIsOnCanvas","hideContextualTutByName","stopPropagation","strokeCap","rad","angleDelta","halfPointX","halfPointY","halfPoint","speed","draw","minShapeSize","maxShapeLength","shapeSize","centerPoint","gradientSize","originX","originY","destinationX","destinationY","origin","gradient","stops","shapeSoundObj","outlineGroup","outline","outer","outlineCenter","middle","sendToBack","shapeMask","enclosedLoops","line","unditherButtonsByName","scaleFactor","allTutsCompleted","tutName","_groups","addContextualTut","tut","interacting","originalRotation","originalScale","thrown","$tut","$pinchedTut","currentScale","scaleDelta","currentRotation","rotationDelta","moveContextualTut","hypot","viewHypot","maxScaleFactor","move","hideContextualTut","throwPinchedGroup","velocityMultiplier","viewHeight","offScreen","requestAnimationFrame","newX","newY","newPos","tolerance","hammerjs","12","getTutByName","tutObj","tutorialCompletionObj","completion","shapeCenter","tutCopy","tutPos","getTutPositionFromCenter","css","left","visibility","$tuts","resetContextualTuts","tutWidth","outerWidth","tutHeight","outerHeight","leftPos","topPos","tutArrowHeight","13","initLogoRefresh","initColorPalette","initNewButton","initUndoButton","initPlayButton","initTipsButton","initShareButton","initContextualTuts","resetCanvas","ditherButtonsByName","buttonNames","undither","ditherButtonByName","buttonName","$button","ditheredClass","unditherButtonByName","newPressed","activeLayer","removeChildren","undoPressed","lastMove","numGroups","getNumGroups","tipsPressed","sharePressed","$paletteWrap","$paletteColors","paletteColorSize","paletteSelectedColorSize","paletteSelectedClass","$svg","clear","numCanvasses","randomCanvasIndex","canvasBg","Raster","scaleFactorHorizontal","scaleFactorVertical","Layer","14","degrees","deg","radians","pow","delta","toLocaleTimeString","clearGroupPops","returnPops","groupPops","intersectingPops","res","original","getPrototypeOf","getOwnPropertyNames","getOwnPropertyDescriptor","15","playVideo","videoPlayingClass","main","$video","$videoWrapper","./main"],"mappings":"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,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAClmCxI,KAAM,SAEN+tB,SAAWzlB,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MACtpCxI,KAAM,SAEN+tB,SAAWzlB,EAAK,IAAKE,EAAK,KAAQF,EAAK,GAAIE,EAAK,KAAQF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,KAAQF,EAAK,UAAWE,EAAK,WAClMxI,KAAM,WAEN+tB,SAAWzlB,EAAK,GAAIE,EAAK,KAAQF,EAAK,GAAIE,EAAK,KAAQF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,KAAQF,EAAK,IAAKE,EAAK,KAAQF,EAAK,IAAKE,EAAK,KAAQF,EAAK,UAAWE,EAAK,WACxNxI,KAAM,WAEN+tB,SAAWzlB,EAAK,GAAIE,EAAK,KAAQF,EAAK,GAAIE,EAAK,KAAQF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,KAAQF,EAAK,SAAUE,EAAK,WAChPxI,KAAM,WAEN+tB,SAAWzlB,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MACrhCxI,KAAM,WAEN+tB,SAAWzlB,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK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,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,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SF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAC1vCxI,KAAM,UAEN+tB,SAAWzlB,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MACjhDxI,KAAM,UAEN+tB,SAAWzlB,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,GAAIE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK;AAAKE,EAAK,MAASF,EAAK,IAAKE,EAAK,MAASF,EAAK,IA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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nexports.runAnimations = false;\nexports.pop = true;\nexports.canvasId = 'canvas';\n\nexports.palette = {\n  colors: [\"#20171C\", \"#1E2A43\", \"#28377D\", \"#352747\", \"#CA2E26\", \"#9A2A1F\", \"#DA6C26\", \"#453121\", \"#916A47\", \"#DAAD27\", \"#7F7D31\", \"#2B5E2E\"],\n  colorNames: {\n    \"#20171C\": \"black\",\n    \"#1E2A43\": \"blue\",\n    \"#28377D\": \"blue\",\n    \"#352747\": \"blue\",\n    \"#CA2E26\": \"red\",\n    \"#9A2A1F\": \"red\",\n    \"#DA6C26\": \"orange\",\n    \"#453121\": \"brown\",\n    \"#916A47\": \"brown\",\n    \"#DAAD27\": \"orange\",\n    \"#7F7D31\": \"green\",\n    \"#2B5E2E\": \"green\"\n  },\n  gradients: {\n    '#20171C': ['#20171C', '#000000'],\n    '#1E2A43': ['#1E2A43', '#263166'],\n    '#28377D': ['#28377D', '#1E4695'],\n    '#352747': ['#352747', '#45005B'],\n    '#CA2E26': ['#CA2E26', '#9B352F'],\n    '#9A2A1F': ['#9A2A1F', '#CD3621'],\n    '#DA6C26': ['#DA6C26', '#BD4820'],\n    '#453121': ['#453121', '#281806'],\n    '#916A47': ['#916A47', '#623A22'],\n    '#DAAD27': ['#DAAD27', '#AF871D'],\n    '#7F7D31': ['#7F7D31', '#555827'],\n    '#2B5E2E': ['#2B5E2E', '#16451D']\n  },\n  pops: [\"#00ADEF\", \"#F285A5\", \"#7DC57F\", \"#F6EB16\", \"#F4EAE0\"],\n  colorSize: 20,\n  selectedColorSize: 30\n};\n\nexports.contextualTuts = [{\n  type: \"fill\",\n  copy: \"<strong>Double-tap</strong> a filled shape to <strong>UNFILL</strong> it. Repeat to <strong>FILL</strong> an unfilled shape.\"\n}, {\n  type: \"pinch\",\n  copy: \"<strong>Pinch</strong> shapes with <strong>TWO FINGERS</strong> to <strong>resize</strong> and <strong>move</strong> them.\"\n}, {\n  type: \"swipe\",\n  copy: \"To <strong>remove</strong> shapes, <strong>pinch</strong> with <strong>two fingers</strong> then <strong>swipe</strong> or hit <strong>undo</strong>.\"\n}];\n\n},{}],2:[function(require,module,exports){\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n},{}],3:[function(require,module,exports){\n(function (global){\n/*!\n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto iOS enabler.\n      self.mobileAutoEnable = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.value = vol;\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.value = muted ? 0 : self._volume;\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'running' : 'running';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Mobile browsers will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _enableMobileAudio: function() {\n      var self = this || Howler;\n\n      // Only run this on mobile devices if audio isn't already eanbled.\n      var isMobile = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(self._navigator && self._navigator.userAgent);\n      var isTouch = !!(('ontouchend' in window) || (self._navigator && self._navigator.maxTouchPoints > 0) || (self._navigator && self._navigator.msMaxTouchPoints > 0));\n      if (self._mobileEnabled || !self.ctx || (!isMobile && !isTouch)) {\n        return;\n      }\n\n      self._mobileEnabled = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function() {\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._mobileEnabled = true;\n          self.mobileAutoEnable = false;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchend', unlock, true);\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchend', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.state = 'resuming';\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio on iOS.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.mobileAutoEnable) {\n        Howler._enableMobileAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Check if this extension is available.\n        if (Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        var num = 0;\n        for (var i=0; i<self._sounds.length; i++) {\n          if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n            num++;\n            id = self._sounds[i]._id;\n          }\n        }\n\n        if (num === 1) {\n          sprite = null;\n        } else {\n          id = null;\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If we have no sprite and the sound hasn't loaded, we must wait\n      // for the sound to load to get our audio's duration.\n      if (self._state !== 'loaded' && !self._sprite[sprite]) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(self._soundById(sound._id) ? sound._id : undefined);\n          }\n        });\n\n        return sound._id;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          setTimeout(function() {\n            self._emit('play', sound._id);\n          }, 0);\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n      // Update the parameters of the sound\n      sound._paused = false;\n      sound._ended = false;\n      sound._sprite = sprite;\n      sound._seek = seek;\n      sound._start = self._sprite[sprite][0] / 1000;\n      sound._stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n            }, 0);\n          }\n        };\n\n        var isRunning = (Howler.state === 'running');\n        if (self._state === 'loaded' && isRunning) {\n          playWebAudio();\n        } else {\n          // Wait for the audio to load and then begin playback.\n          self.once(isRunning ? 'load' : 'resume', playWebAudio, isRunning ? sound._id : null);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          setTimeout(function() {\n            node.play();\n\n            // Setup the new end timer.\n            if (timeout !== Infinity) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            if (!internal) {\n              self._emit('play', sound._id);\n            }\n          }, 0);\n        };\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (self._state === 'loaded' && (window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS));\n        if (node.readyState === 4 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                if (!internal) {\n                  self._emit('stop', sound._id);\n                }\n\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n            }\n          }\n        }\n\n        if (sound && !internal) {\n          self._emit('stop', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n      var diff = Math.abs(from - to);\n      var dir = from > to ? 'out' : 'in';\n      var steps = diff / 0.01;\n      var stepLen = (steps > 0) ? len / steps : len;\n\n      // Since browsers clamp timeouts to 4ms, we need to clamp our steps to that too.\n      if (stepLen < 4) {\n        steps = Math.ceil(steps / (4 / stepLen));\n        stepLen = 4;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          var vol = from;\n          sound._interval = setInterval(function(soundId, sound) {\n            // Update the volume amount, but only if the volume should change.\n            if (steps > 0) {\n              vol += (dir === 'in' ? 0.01 : -0.01);\n            }\n\n            // Make sure the volume is in the right bounds.\n            vol = Math.max(0, vol);\n            vol = Math.min(1, vol);\n\n            // Round to within 2 decimal points.\n            vol = Math.round(vol * 100) / 100;\n\n            // Change the volume.\n            if (self._webAudio) {\n              if (typeof id === 'undefined') {\n                self._volume = vol;\n              }\n\n              sound._volume = vol;\n            } else {\n              self.volume(vol, soundId, true);\n            }\n\n            // When the fade is complete, stop it and fire event.\n            if (vol === to) {\n              clearInterval(sound._interval);\n              sound._interval = null;\n              self.volume(vol, soundId);\n              self._emit('fade', soundId);\n            }\n          }.bind(self, ids[i], sound), stepLen);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            sound._rateSeek = self.seek(id[i]);\n            sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.value = rate;\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Restart the playback if the sound was playing.\n          if (playing) {\n            self.play(id, true);\n          }\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node) {\n            sound._node.currentTime = seek;\n          }\n\n          self._emit('seek', id);\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n          self._emit('end', sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading.\n          sounds[i]._node.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=';\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n\n        // Remove the references in the global Howler object.\n        var index = Howler._howls.indexOf(self);\n        if (index >= 0) {\n          Howler._howls.splice(index, 1);\n        }\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      if (fn) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          if (fn === events[i].fn && id === events[i].id) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function() {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // don't move onto the next task until this one is done\n        self.once(task.event, function() {\n          self._queue.shift();\n          self._loadQueue();\n        });\n\n        task.action();\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        clearTimeout(self._endTimers[id]);\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop;\n      }\n      sound._node.bufferSource.playbackRate.value = sound._rate;\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n\n      if (self._scratchBuffer) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        try { node.bufferSource.buffer = self._scratchBuffer; } catch(e) {}\n      }\n      node.bufferSource = null;\n\n      return self;\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        self._node = new Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorListener, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Decode the buffer into an audio source.\n    Howler.ctx.decodeAudioData(arraybuffer, function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      }\n    }, function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    });\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.value = 1;\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n  \n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n      self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n      self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              sound._panner.setPosition(pan, 0, 0);\n            } else {\n              sound._panner.pan.value = pan;\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or\n   * all in the group. The most common usage is to set the 'x' position for\n   * left/right panning. Setting any value higher than 1.0 will begin to\n   * decrease the volume of the sound as it moves further away.\n   * @param  {Number} x  The x-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} y  The y-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} z  The z-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setPosition(x, y, z);\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setOrientation(x, y, z);\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) There will be no volume reduction inside this angle.\n   *     coneOuterAngle - (360 by default) The volume will be reduced to a constant value of\n   *                      `coneOuterGain` outside this angle.\n   *     coneOuterGain - (0 by default) The amount of volume reduction outside of `coneOuterAngle`.\n   *     distanceModel - ('inverse' by default) Determines algorithm to use to reduce volume as audio moves\n   *                      away from listener. Can be `linear`, `inverse` or `exponential`.\n   *     maxDistance - (10000 by default) Volume won't reduce between source/listener beyond this distance.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *     refDistance - (1 by default) A reference distance for reducing volume as the source\n   *                    moves away from the listener.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener.\n   * \n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : self._distanceModel,\n            maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : self._maxDistance,\n            panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : self._panningModel,\n            refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : self._refDistance,\n            rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : self._rolloffFactor\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.panningModel = pa.panningModel;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.value = sound._stereo;\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id);\n    }\n  };\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPathColorName = getPathColorName;\nexports.getColorName = getColorName;\nexports.getRandomPop = getRandomPop;\nexports.getIndexedPopColor = getIndexedPopColor;\nvar config = require('./../../config');\n\nvar transparent = exports.transparent = new Color(0, 0);\n\nfunction getPathColorName(path) {\n  var hexColor = path.parent.data.originalColor;\n  // let hexColor = path.strokeColor.toCSS(true); // This fails when it's a gradient\n  return getColorName(hexColor);\n}\n\nfunction getColorName(color) {\n  if (color) {\n    color = color.toUpperCase(); // make sure\n    if (color in config.palette.colorNames) {\n      return config.palette.colorNames[color];\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\nfunction getRandomPop() {\n  var pops = config.palette.pops;\n  return pops[Math.floor(Math.random() * pops.length)];\n}\n\nfunction getIndexedPopColor(index) {\n  var pops = config.palette.pops;\n  return pops[index % pops.length];\n}\n\n},{\"./../../config\":1}],5:[function(require,module,exports){\n\"use strict\";\n\n(function (root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.ShapeDetector = factory();\n  }\n})(undefined, function () {\n\n  var _nbSamplePoints;\n  var _squareSize = 250;\n  var _phi = 0.5 * (-1.0 + Math.sqrt(5.0));\n  var _angleRange = deg2Rad(45.0);\n  var _anglePrecision = deg2Rad(2.0);\n  var _halfDiagonal = Math.sqrt(_squareSize * _squareSize + _squareSize * _squareSize) * 0.5;\n  var _origin = {\n    x: 0,\n    y: 0\n  };\n\n  function deg2Rad(d) {\n\n    return d * Math.PI / 180.0;\n  };\n\n  function getDistance(a, b) {\n\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  function Stroke(points, name) {\n\n    this.points = points;\n    this.name = name;\n    this.processStroke();\n  };\n\n  Stroke.prototype.processStroke = function () {\n\n    this.points = this.resample();\n    this.setCentroid();\n    this.points = this.rotateBy(-this.indicativeAngle());\n    this.points = this.scaleToSquare();\n    this.setCentroid();\n    this.points = this.translateToOrigin();\n\n    return this;\n  };\n\n  Stroke.prototype.resample = function () {\n\n    var localDistance, q;\n    var interval = this.strokeLength() / (_nbSamplePoints - 1);\n    var distance = 0.0;\n    var newPoints = [this.points[0]];\n\n    for (var i = 1; i < this.points.length; i++) {\n      localDistance = getDistance(this.points[i - 1], this.points[i]);\n\n      if (distance + localDistance >= interval) {\n        q = {\n          x: this.points[i - 1].x + (interval - distance) / localDistance * (this.points[i].x - this.points[i - 1].x),\n          y: this.points[i - 1].y + (interval - distance) / localDistance * (this.points[i].y - this.points[i - 1].y)\n        };\n\n        newPoints.push(q);\n        this.points.splice(i, 0, q);\n        distance = 0.0;\n      } else {\n        distance += localDistance;\n      }\n    }\n\n    if (newPoints.length === _nbSamplePoints - 1) {\n      newPoints.push(this.points[this.points.length - 1]);\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.rotateBy = function (angle) {\n\n    var point;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: (point.x - this.c.x) * cos - (point.y - this.c.y) * sin + this.c.x,\n        y: (point.x - this.c.x) * sin + (point.y - this.c.y) * cos + this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.scaleToSquare = function () {\n\n    var point;\n    var newPoints = [];\n    var box = {\n      minX: +Infinity,\n      maxX: -Infinity,\n      minY: +Infinity,\n      maxY: -Infinity\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      box.minX = Math.min(box.minX, point.x);\n      box.minY = Math.min(box.minY, point.y);\n      box.maxX = Math.max(box.maxX, point.x);\n      box.maxY = Math.max(box.maxY, point.y);\n    }\n\n    box.width = box.maxX - box.minX;\n    box.height = box.maxY - box.minY;\n\n    for (i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x * (_squareSize / box.width),\n        y: point.y * (_squareSize / box.height)\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.translateToOrigin = function (points) {\n\n    var point;\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x + _origin.x - this.c.x,\n        y: point.y + _origin.y - this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.setCentroid = function () {\n\n    var point;\n    this.c = {\n      x: 0.0,\n      y: 0.0\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      this.c.x += point.x;\n      this.c.y += point.y;\n    }\n\n    this.c.x /= this.points.length;\n    this.c.y /= this.points.length;\n\n    return this;\n  };\n\n  Stroke.prototype.indicativeAngle = function () {\n\n    return Math.atan2(this.c.y - this.points[0].y, this.c.x - this.points[0].x);\n  };\n\n  Stroke.prototype.strokeLength = function () {\n\n    var d = 0.0;\n\n    for (var i = 1; i < this.points.length; i++) {\n      d += getDistance(this.points[i - 1], this.points[i]);\n    }\n\n    return d;\n  };\n\n  Stroke.prototype.distanceAtBestAngle = function (pattern) {\n\n    var a = -_angleRange;\n    var b = _angleRange;\n    var x1 = _phi * a + (1.0 - _phi) * b;\n    var f1 = this.distanceAtAngle(pattern, x1);\n    var x2 = (1.0 - _phi) * a + _phi * b;\n    var f2 = this.distanceAtAngle(pattern, x2);\n\n    while (Math.abs(b - a) > _anglePrecision) {\n\n      if (f1 < f2) {\n        b = x2;\n        x2 = x1;\n        f2 = f1;\n        x1 = _phi * a + (1.0 - _phi) * b;\n        f1 = this.distanceAtAngle(pattern, x1);\n      } else {\n        a = x1;\n        x1 = x2;\n        f1 = f2;\n        x2 = (1.0 - _phi) * a + _phi * b;\n        f2 = this.distanceAtAngle(pattern, x2);\n      }\n    }\n\n    return Math.min(f1, f2);\n  };\n\n  Stroke.prototype.distanceAtAngle = function (pattern, angle) {\n\n    var strokePoints = this.rotateBy(angle);\n    var patternPoints = pattern.points;\n    var d = 0.0;\n\n    for (var i = 0; i < strokePoints.length; i++) {\n      d += getDistance(strokePoints[i], patternPoints[i]);\n    }\n\n    return d / strokePoints.length;\n  };\n\n  function ShapeDetector(patterns, options) {\n\n    options = options || {};\n    this.threshold = options.threshold || 0;\n    _nbSamplePoints = options.nbSamplePoints || 64;\n\n    this.patterns = [];\n\n    for (var i = 0; i < patterns.length; i++) {\n      this.learn(patterns[i].name, patterns[i].points);\n    }\n  }\n\n  ShapeDetector.defaultShapes = [{\n    points: [{ x: 0, y: 50 }, { x: 100, y: 50 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 50, y: 0 }, { x: 50, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 100, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 89, \"y\": 164 }, { \"x\": 90, \"y\": 162 }, { \"x\": 92, \"y\": 162 }, { \"x\": 94, \"y\": 164 }, { \"x\": 95, \"y\": 166 }, { \"x\": 96, \"y\": 169 }, { \"x\": 97, \"y\": 171 }, { \"x\": 99, \"y\": 175 }, { \"x\": 101, \"y\": 178 }, { \"x\": 103, \"y\": 182 }, { \"x\": 106, \"y\": 189 }, { \"x\": 108, \"y\": 194 }, { \"x\": 111, \"y\": 199 }, { \"x\": 114, \"y\": 204 }, { \"x\": 117, \"y\": 209 }, { \"x\": 119, \"y\": 214 }, { \"x\": 122, \"y\": 218 }, { \"x\": 124, \"y\": 222 }, { \"x\": 126, \"y\": 225 }, { \"x\": 128, \"y\": 228 }, { \"x\": 130, \"y\": 229 }, { \"x\": 133, \"y\": 233 }, { \"x\": 134, \"y\": 236 }, { \"x\": 136, \"y\": 239 }, { \"x\": 138, \"y\": 240 }, { \"x\": 139, \"y\": 242 }, { \"x\": 140, \"y\": 244 }, { \"x\": 142, \"y\": 242 }, { \"x\": 142, \"y\": 240 }, { \"x\": 142, \"y\": 237 }, { \"x\": 143, \"y\": 235 }, { \"x\": 143, \"y\": 233 }, { \"x\": 145, \"y\": 229 }, { \"x\": 146, \"y\": 226 }, { \"x\": 148, \"y\": 217 }, { \"x\": 149, \"y\": 208 }, { \"x\": 149, \"y\": 205 }, { \"x\": 151, \"y\": 196 }, { \"x\": 151, \"y\": 193 }, { \"x\": 153, \"y\": 182 }, { \"x\": 155, \"y\": 172 }, { \"x\": 157, \"y\": 165 }, { \"x\": 159, \"y\": 160 }, { \"x\": 162, \"y\": 155 }, { \"x\": 164, \"y\": 150 }, { \"x\": 165, \"y\": 148 }, { \"x\": 166, \"y\": 146 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 91, \"y\": 185 }, { \"x\": 93, \"y\": 185 }, { \"x\": 95, \"y\": 185 }, { \"x\": 97, \"y\": 185 }, { \"x\": 100, \"y\": 188 }, { \"x\": 102, \"y\": 189 }, { \"x\": 104, \"y\": 190 }, { \"x\": 106, \"y\": 193 }, { \"x\": 108, \"y\": 195 }, { \"x\": 110, \"y\": 198 }, { \"x\": 112, \"y\": 201 }, { \"x\": 114, \"y\": 204 }, { \"x\": 115, \"y\": 207 }, { \"x\": 117, \"y\": 210 }, { \"x\": 118, \"y\": 212 }, { \"x\": 120, \"y\": 214 }, { \"x\": 121, \"y\": 217 }, { \"x\": 122, \"y\": 219 }, { \"x\": 123, \"y\": 222 }, { \"x\": 124, \"y\": 224 }, { \"x\": 126, \"y\": 226 }, { \"x\": 127, \"y\": 229 }, { \"x\": 129, \"y\": 231 }, { \"x\": 130, \"y\": 233 }, { \"x\": 129, \"y\": 231 }, { \"x\": 129, \"y\": 228 }, { \"x\": 129, \"y\": 226 }, { \"x\": 129, \"y\": 224 }, { \"x\": 129, \"y\": 221 }, { \"x\": 129, \"y\": 218 }, { \"x\": 129, \"y\": 212 }, { \"x\": 129, \"y\": 208 }, { \"x\": 130, \"y\": 198 }, { \"x\": 132, \"y\": 189 }, { \"x\": 134, \"y\": 182 }, { \"x\": 137, \"y\": 173 }, { \"x\": 143, \"y\": 164 }, { \"x\": 147, \"y\": 157 }, { \"x\": 151, \"y\": 151 }, { \"x\": 155, \"y\": 144 }, { \"x\": 161, \"y\": 137 }, { \"x\": 165, \"y\": 131 }, { \"x\": 171, \"y\": 122 }, { \"x\": 174, \"y\": 118 }, { \"x\": 176, \"y\": 114 }, { \"x\": 177, \"y\": 112 }, { \"x\": 177, \"y\": 114 }, { \"x\": 175, \"y\": 116 }, { \"x\": 173, \"y\": 118 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 113, \"y\": 68 }, { \"x\": 86, \"y\": 79 }, { \"x\": 63, \"y\": 131 }, { \"x\": 78, \"y\": 147 }, { \"x\": 156, \"y\": 149 }, { \"x\": 195, \"y\": 100 }, { \"x\": 189, \"y\": 79 }, { \"x\": 125.73497, \"y\": 62.81168 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 98, \"y\": 67 }, { \"x\": 77, \"y\": 85 }, { \"x\": 77, \"y\": 162 }, { \"x\": 179, \"y\": 156 }, { \"x\": 197, \"y\": 123 }, { \"x\": 167, \"y\": 63 }, { \"x\": 141, \"y\": 61 }, { \"x\": 110, \"y\": 59 }, { \"x\": 106.51192, \"y\": 59.70407 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 60, \"y\": 47 }, { \"x\": 43, \"y\": 96 }, { \"x\": 52, \"y\": 206 }, { \"x\": 63, \"y\": 246 }, { \"x\": 118, \"y\": 296 }, { \"x\": 144, \"y\": 246 }, { \"x\": 141, \"y\": 147 }, { \"x\": 133, \"y\": 129 }, { \"x\": 113, \"y\": 80 }, { \"x\": 60.42738, \"y\": 45.76813 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 127, \"y\": 141 }, { \"x\": 124, \"y\": 140 }, { \"x\": 120, \"y\": 139 }, { \"x\": 118, \"y\": 139 }, { \"x\": 116, \"y\": 139 }, { \"x\": 111, \"y\": 140 }, { \"x\": 109, \"y\": 141 }, { \"x\": 104, \"y\": 144 }, { \"x\": 100, \"y\": 147 }, { \"x\": 96, \"y\": 152 }, { \"x\": 93, \"y\": 157 }, { \"x\": 90, \"y\": 163 }, { \"x\": 87, \"y\": 169 }, { \"x\": 85, \"y\": 175 }, { \"x\": 83, \"y\": 181 }, { \"x\": 82, \"y\": 190 }, { \"x\": 82, \"y\": 195 }, { \"x\": 83, \"y\": 200 }, { \"x\": 84, \"y\": 205 }, { \"x\": 88, \"y\": 213 }, { \"x\": 91, \"y\": 216 }, { \"x\": 96, \"y\": 219 }, { \"x\": 103, \"y\": 222 }, { \"x\": 108, \"y\": 224 }, { \"x\": 111, \"y\": 224 }, { \"x\": 120, \"y\": 224 }, { \"x\": 133, \"y\": 223 }, { \"x\": 142, \"y\": 222 }, { \"x\": 152, \"y\": 218 }, { \"x\": 160, \"y\": 214 }, { \"x\": 167, \"y\": 210 }, { \"x\": 173, \"y\": 204 }, { \"x\": 178, \"y\": 198 }, { \"x\": 179, \"y\": 196 }, { \"x\": 182, \"y\": 188 }, { \"x\": 182, \"y\": 177 }, { \"x\": 178, \"y\": 167 }, { \"x\": 170, \"y\": 150 }, { \"x\": 163, \"y\": 138 }, { \"x\": 152, \"y\": 130 }, { \"x\": 143, \"y\": 129 }, { \"x\": 140, \"y\": 131 }, { \"x\": 129, \"y\": 136 }, { \"x\": 126, \"y\": 139 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 516, \"y\": 284 }, { \"x\": 496, \"y\": 319 }, { \"x\": 496, \"y\": 329 }, { \"x\": 513, \"y\": 329 }, { \"x\": 550, \"y\": 324 }, { \"x\": 696, \"y\": 305 }, { \"x\": 737, \"y\": 298 }, { \"x\": 746, \"y\": 292 }, { \"x\": 734, \"y\": 278 }, { \"x\": 709, \"y\": 252 }, { \"x\": 664, \"y\": 193 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 179, \"y\": 159 }, { \"x\": 152, \"y\": 290 }, { \"x\": 143, \"y\": 336 }, { \"x\": 142, \"y\": 355 }, { \"x\": 160, \"y\": 348 }, { \"x\": 208, \"y\": 337 }, { \"x\": 241, \"y\": 330 }, { \"x\": 256, \"y\": 328 }, { \"x\": 254, \"y\": 315 }, { \"x\": 238, \"y\": 277 }, { \"x\": 210, \"y\": 200 }, { \"x\": 182.94356, \"y\": 110.45656 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 105, \"y\": 335 }, { \"x\": 115, \"y\": 362 }, { \"x\": 128, \"y\": 338 }, { \"x\": 163, \"y\": 271 }, { \"x\": 241, \"y\": 135 }, { \"x\": 261, \"y\": 104 }, { \"x\": 267, \"y\": 98 }, { \"x\": 261, \"y\": 102 }, { \"x\": 236, \"y\": 119 }, { \"x\": 151, \"y\": 195 }, { \"x\": 108, \"y\": 235 }, { \"x\": 83, \"y\": 267 }, { \"x\": 79.92616, \"y\": 270.93451 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 137, \"y\": 139 }, { \"x\": 135, \"y\": 141 }, { \"x\": 133, \"y\": 144 }, { \"x\": 132, \"y\": 146 }, { \"x\": 130, \"y\": 149 }, { \"x\": 128, \"y\": 151 }, { \"x\": 126, \"y\": 155 }, { \"x\": 123, \"y\": 160 }, { \"x\": 120, \"y\": 166 }, { \"x\": 116, \"y\": 171 }, { \"x\": 112, \"y\": 177 }, { \"x\": 107, \"y\": 183 }, { \"x\": 102, \"y\": 188 }, { \"x\": 100, \"y\": 191 }, { \"x\": 95, \"y\": 195 }, { \"x\": 90, \"y\": 199 }, { \"x\": 86, \"y\": 203 }, { \"x\": 82, \"y\": 206 }, { \"x\": 80, \"y\": 209 }, { \"x\": 75, \"y\": 213 }, { \"x\": 73, \"y\": 213 }, { \"x\": 70, \"y\": 216 }, { \"x\": 67, \"y\": 219 }, { \"x\": 64, \"y\": 221 }, { \"x\": 61, \"y\": 223 }, { \"x\": 60, \"y\": 225 }, { \"x\": 62, \"y\": 226 }, { \"x\": 65, \"y\": 225 }, { \"x\": 67, \"y\": 226 }, { \"x\": 74, \"y\": 226 }, { \"x\": 77, \"y\": 227 }, { \"x\": 85, \"y\": 229 }, { \"x\": 91, \"y\": 230 }, { \"x\": 99, \"y\": 231 }, { \"x\": 108, \"y\": 232 }, { \"x\": 116, \"y\": 233 }, { \"x\": 125, \"y\": 233 }, { \"x\": 134, \"y\": 234 }, { \"x\": 145, \"y\": 233 }, { \"x\": 153, \"y\": 232 }, { \"x\": 160, \"y\": 233 }, { \"x\": 170, \"y\": 234 }, { \"x\": 177, \"y\": 235 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 237 }, { \"x\": 193, \"y\": 238 }, { \"x\": 198, \"y\": 239 }, { \"x\": 200, \"y\": 237 }, { \"x\": 202, \"y\": 239 }, { \"x\": 204, \"y\": 238 }, { \"x\": 206, \"y\": 234 }, { \"x\": 205, \"y\": 230 }, { \"x\": 202, \"y\": 222 }, { \"x\": 197, \"y\": 216 }, { \"x\": 192, \"y\": 207 }, { \"x\": 186, \"y\": 198 }, { \"x\": 179, \"y\": 189 }, { \"x\": 174, \"y\": 183 }, { \"x\": 170, \"y\": 178 }, { \"x\": 164, \"y\": 171 }, { \"x\": 161, \"y\": 168 }, { \"x\": 154, \"y\": 160 }, { \"x\": 148, \"y\": 155 }, { \"x\": 143, \"y\": 150 }, { \"x\": 138, \"y\": 148 }, { \"x\": 136, \"y\": 148 }],\n    name: \"triangle\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 50 }, { x: 50, y: 50 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 100 }, { x: 50, y: 100 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 78, \"y\": 149 }, { \"x\": 78, \"y\": 153 }, { \"x\": 78, \"y\": 157 }, { \"x\": 78, \"y\": 160 }, { \"x\": 79, \"y\": 162 }, { \"x\": 79, \"y\": 164 }, { \"x\": 79, \"y\": 167 }, { \"x\": 79, \"y\": 169 }, { \"x\": 79, \"y\": 173 }, { \"x\": 79, \"y\": 178 }, { \"x\": 79, \"y\": 183 }, { \"x\": 80, \"y\": 189 }, { \"x\": 80, \"y\": 193 }, { \"x\": 80, \"y\": 198 }, { \"x\": 80, \"y\": 202 }, { \"x\": 81, \"y\": 208 }, { \"x\": 81, \"y\": 210 }, { \"x\": 81, \"y\": 216 }, { \"x\": 82, \"y\": 222 }, { \"x\": 82, \"y\": 224 }, { \"x\": 82, \"y\": 227 }, { \"x\": 83, \"y\": 229 }, { \"x\": 83, \"y\": 231 }, { \"x\": 85, \"y\": 230 }, { \"x\": 88, \"y\": 232 }, { \"x\": 90, \"y\": 233 }, { \"x\": 92, \"y\": 232 }, { \"x\": 94, \"y\": 233 }, { \"x\": 99, \"y\": 232 }, { \"x\": 102, \"y\": 233 }, { \"x\": 106, \"y\": 233 }, { \"x\": 109, \"y\": 234 }, { \"x\": 117, \"y\": 235 }, { \"x\": 123, \"y\": 236 }, { \"x\": 126, \"y\": 236 }, { \"x\": 135, \"y\": 237 }, { \"x\": 142, \"y\": 238 }, { \"x\": 145, \"y\": 238 }, { \"x\": 152, \"y\": 238 }, { \"x\": 154, \"y\": 239 }, { \"x\": 165, \"y\": 238 }, { \"x\": 174, \"y\": 237 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 235 }, { \"x\": 191, \"y\": 235 }, { \"x\": 195, \"y\": 233 }, { \"x\": 197, \"y\": 233 }, { \"x\": 200, \"y\": 233 }, { \"x\": 201, \"y\": 235 }, { \"x\": 201, \"y\": 233 }, { \"x\": 199, \"y\": 231 }, { \"x\": 198, \"y\": 226 }, { \"x\": 198, \"y\": 220 }, { \"x\": 196, \"y\": 207 }, { \"x\": 195, \"y\": 195 }, { \"x\": 195, \"y\": 181 }, { \"x\": 195, \"y\": 173 }, { \"x\": 195, \"y\": 163 }, { \"x\": 194, \"y\": 155 }, { \"x\": 192, \"y\": 145 }, { \"x\": 192, \"y\": 143 }, { \"x\": 192, \"y\": 138 }, { \"x\": 191, \"y\": 135 }, { \"x\": 191, \"y\": 133 }, { \"x\": 191, \"y\": 130 }, { \"x\": 190, \"y\": 128 }, { \"x\": 188, \"y\": 129 }, { \"x\": 186, \"y\": 129 }, { \"x\": 181, \"y\": 132 }, { \"x\": 173, \"y\": 131 }, { \"x\": 162, \"y\": 131 }, { \"x\": 151, \"y\": 132 }, { \"x\": 149, \"y\": 132 }, { \"x\": 138, \"y\": 132 }, { \"x\": 136, \"y\": 132 }, { \"x\": 122, \"y\": 131 }, { \"x\": 120, \"y\": 131 }, { \"x\": 109, \"y\": 130 }, { \"x\": 107, \"y\": 130 }, { \"x\": 90, \"y\": 132 }, { \"x\": 81, \"y\": 133 }, { \"x\": 76, \"y\": 133 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 67, \"y\": 172 }, { \"x\": 80, \"y\": 85 }, { \"x\": 83, \"y\": 58 }, { \"x\": 83, \"y\": 54 }, { \"x\": 136, \"y\": 110 }, { \"x\": 157, \"y\": 136 }, { \"x\": 162, \"y\": 140 }, { \"x\": 166, \"y\": 143 }, { \"x\": 80, \"y\": 124 }, { \"x\": 45, \"y\": 116 }, { \"x\": 37, \"y\": 114 }, { \"x\": 31, \"y\": 113 }, { \"x\": 52, \"y\": 106 }, { \"x\": 101, \"y\": 86 }, { \"x\": 131, \"y\": 75 }, { \"x\": 157, \"y\": 63 }, { \"x\": 163, \"y\": 62 }, { \"x\": 158, \"y\": 64 }, { \"x\": 153, \"y\": 73 }, { \"x\": 128, \"y\": 103 }, { \"x\": 71, \"y\": 170 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 30, \"y\": 69 }, { \"x\": 116, \"y\": 118 }, { \"x\": 90, \"y\": 164 }, { \"x\": 75, \"y\": 117 }, { \"x\": 157, \"y\": 83 }, { \"x\": 182, \"y\": 140 }, { \"x\": 155, \"y\": 163 }, { \"x\": 144, \"y\": 119 }, { \"x\": 221, \"y\": 54 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 87, \"y\": 76 }, { \"x\": 62, \"y\": 73 }, { \"x\": 100, \"y\": 98 }, { \"x\": 107, \"y\": 57 }, { \"x\": 61, \"y\": 38 }, { \"x\": 73, \"y\": 137 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 123, \"y\": 129 }, { \"x\": 123, \"y\": 131 }, { \"x\": 124, \"y\": 133 }, { \"x\": 125, \"y\": 136 }, { \"x\": 127, \"y\": 140 }, { \"x\": 129, \"y\": 142 }, { \"x\": 133, \"y\": 148 }, { \"x\": 137, \"y\": 154 }, { \"x\": 143, \"y\": 158 }, { \"x\": 145, \"y\": 161 }, { \"x\": 148, \"y\": 164 }, { \"x\": 153, \"y\": 170 }, { \"x\": 158, \"y\": 176 }, { \"x\": 160, \"y\": 178 }, { \"x\": 164, \"y\": 183 }, { \"x\": 168, \"y\": 188 }, { \"x\": 171, \"y\": 191 }, { \"x\": 175, \"y\": 196 }, { \"x\": 178, \"y\": 200 }, { \"x\": 180, \"y\": 202 }, { \"x\": 181, \"y\": 205 }, { \"x\": 184, \"y\": 208 }, { \"x\": 186, \"y\": 210 }, { \"x\": 187, \"y\": 213 }, { \"x\": 188, \"y\": 215 }, { \"x\": 186, \"y\": 212 }, { \"x\": 183, \"y\": 211 }, { \"x\": 177, \"y\": 208 }, { \"x\": 169, \"y\": 206 }, { \"x\": 162, \"y\": 205 }, { \"x\": 154, \"y\": 207 }, { \"x\": 145, \"y\": 209 }, { \"x\": 137, \"y\": 210 }, { \"x\": 129, \"y\": 214 }, { \"x\": 122, \"y\": 217 }, { \"x\": 118, \"y\": 218 }, { \"x\": 111, \"y\": 221 }, { \"x\": 109, \"y\": 222 }, { \"x\": 110, \"y\": 219 }, { \"x\": 112, \"y\": 217 }, { \"x\": 118, \"y\": 209 }, { \"x\": 120, \"y\": 207 }, { \"x\": 128, \"y\": 196 }, { \"x\": 135, \"y\": 187 }, { \"x\": 138, \"y\": 183 }, { \"x\": 148, \"y\": 167 }, { \"x\": 157, \"y\": 153 }, { \"x\": 163, \"y\": 145 }, { \"x\": 165, \"y\": 142 }, { \"x\": 172, \"y\": 133 }, { \"x\": 177, \"y\": 127 }, { \"x\": 179, \"y\": 127 }, { \"x\": 180, \"y\": 125 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 81, \"y\": 219 }, { \"x\": 84, \"y\": 218 }, { \"x\": 86, \"y\": 220 }, { \"x\": 88, \"y\": 220 }, { \"x\": 90, \"y\": 220 }, { \"x\": 92, \"y\": 219 }, { \"x\": 95, \"y\": 220 }, { \"x\": 97, \"y\": 219 }, { \"x\": 99, \"y\": 220 }, { \"x\": 102, \"y\": 218 }, { \"x\": 105, \"y\": 217 }, { \"x\": 107, \"y\": 216 }, { \"x\": 110, \"y\": 216 }, { \"x\": 113, \"y\": 214 }, { \"x\": 116, \"y\": 212 }, { \"x\": 118, \"y\": 210 }, { \"x\": 121, \"y\": 208 }, { \"x\": 124, \"y\": 205 }, { \"x\": 126, \"y\": 202 }, { \"x\": 129, \"y\": 199 }, { \"x\": 132, \"y\": 196 }, { \"x\": 136, \"y\": 191 }, { \"x\": 139, \"y\": 187 }, { \"x\": 142, \"y\": 182 }, { \"x\": 144, \"y\": 179 }, { \"x\": 146, \"y\": 174 }, { \"x\": 148, \"y\": 170 }, { \"x\": 149, \"y\": 168 }, { \"x\": 151, \"y\": 162 }, { \"x\": 152, \"y\": 160 }, { \"x\": 152, \"y\": 157 }, { \"x\": 152, \"y\": 155 }, { \"x\": 152, \"y\": 151 }, { \"x\": 152, \"y\": 149 }, { \"x\": 152, \"y\": 146 }, { \"x\": 149, \"y\": 142 }, { \"x\": 148, \"y\": 139 }, { \"x\": 145, \"y\": 137 }, { \"x\": 141, \"y\": 135 }, { \"x\": 139, \"y\": 135 }, { \"x\": 134, \"y\": 136 }, { \"x\": 130, \"y\": 140 }, { \"x\": 128, \"y\": 142 }, { \"x\": 126, \"y\": 145 }, { \"x\": 122, \"y\": 150 }, { \"x\": 119, \"y\": 158 }, { \"x\": 117, \"y\": 163 }, { \"x\": 115, \"y\": 170 }, { \"x\": 114, \"y\": 175 }, { \"x\": 117, \"y\": 184 }, { \"x\": 120, \"y\": 190 }, { \"x\": 125, \"y\": 199 }, { \"x\": 129, \"y\": 203 }, { \"x\": 133, \"y\": 208 }, { \"x\": 138, \"y\": 213 }, { \"x\": 145, \"y\": 215 }, { \"x\": 155, \"y\": 218 }, { \"x\": 164, \"y\": 219 }, { \"x\": 166, \"y\": 219 }, { \"x\": 177, \"y\": 219 }, { \"x\": 182, \"y\": 218 }, { \"x\": 192, \"y\": 216 }, { \"x\": 196, \"y\": 213 }, { \"x\": 199, \"y\": 212 }, { \"x\": 201, \"y\": 211 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 75, \"y\": 250 }, { \"x\": 75, \"y\": 247 }, { \"x\": 77, \"y\": 244 }, { \"x\": 78, \"y\": 242 }, { \"x\": 79, \"y\": 239 }, { \"x\": 80, \"y\": 237 }, { \"x\": 82, \"y\": 234 }, { \"x\": 82, \"y\": 232 }, { \"x\": 84, \"y\": 229 }, { \"x\": 85, \"y\": 225 }, { \"x\": 87, \"y\": 222 }, { \"x\": 88, \"y\": 219 }, { \"x\": 89, \"y\": 216 }, { \"x\": 91, \"y\": 212 }, { \"x\": 92, \"y\": 208 }, { \"x\": 94, \"y\": 204 }, { \"x\": 95, \"y\": 201 }, { \"x\": 96, \"y\": 196 }, { \"x\": 97, \"y\": 194 }, { \"x\": 98, \"y\": 191 }, { \"x\": 100, \"y\": 185 }, { \"x\": 102, \"y\": 178 }, { \"x\": 104, \"y\": 173 }, { \"x\": 104, \"y\": 171 }, { \"x\": 105, \"y\": 164 }, { \"x\": 106, \"y\": 158 }, { \"x\": 107, \"y\": 156 }, { \"x\": 107, \"y\": 152 }, { \"x\": 108, \"y\": 145 }, { \"x\": 109, \"y\": 141 }, { \"x\": 110, \"y\": 139 }, { \"x\": 112, \"y\": 133 }, { \"x\": 113, \"y\": 131 }, { \"x\": 116, \"y\": 127 }, { \"x\": 117, \"y\": 125 }, { \"x\": 119, \"y\": 122 }, { \"x\": 121, \"y\": 121 }, { \"x\": 123, \"y\": 120 }, { \"x\": 125, \"y\": 122 }, { \"x\": 125, \"y\": 125 }, { \"x\": 127, \"y\": 130 }, { \"x\": 128, \"y\": 133 }, { \"x\": 131, \"y\": 143 }, { \"x\": 136, \"y\": 153 }, { \"x\": 140, \"y\": 163 }, { \"x\": 144, \"y\": 172 }, { \"x\": 145, \"y\": 175 }, { \"x\": 151, \"y\": 189 }, { \"x\": 156, \"y\": 201 }, { \"x\": 161, \"y\": 213 }, { \"x\": 166, \"y\": 225 }, { \"x\": 169, \"y\": 233 }, { \"x\": 171, \"y\": 236 }, { \"x\": 174, \"y\": 243 }, { \"x\": 177, \"y\": 247 }, { \"x\": 178, \"y\": 249 }, { \"x\": 179, \"y\": 251 }, { \"x\": 180, \"y\": 253 }, { \"x\": 180, \"y\": 255 }, { \"x\": 179, \"y\": 257 }, { \"x\": 177, \"y\": 257 }, { \"x\": 174, \"y\": 255 }, { \"x\": 169, \"y\": 250 }, { \"x\": 164, \"y\": 247 }, { \"x\": 160, \"y\": 245 }, { \"x\": 149, \"y\": 238 }, { \"x\": 138, \"y\": 230 }, { \"x\": 127, \"y\": 221 }, { \"x\": 124, \"y\": 220 }, { \"x\": 112, \"y\": 212 }, { \"x\": 110, \"y\": 210 }, { \"x\": 96, \"y\": 201 }, { \"x\": 84, \"y\": 195 }, { \"x\": 74, \"y\": 190 }, { \"x\": 64, \"y\": 182 }, { \"x\": 55, \"y\": 175 }, { \"x\": 51, \"y\": 172 }, { \"x\": 49, \"y\": 170 }, { \"x\": 51, \"y\": 169 }, { \"x\": 56, \"y\": 169 }, { \"x\": 66, \"y\": 169 }, { \"x\": 78, \"y\": 168 }, { \"x\": 92, \"y\": 166 }, { \"x\": 107, \"y\": 164 }, { \"x\": 123, \"y\": 161 }, { \"x\": 140, \"y\": 162 }, { \"x\": 156, \"y\": 162 }, { \"x\": 171, \"y\": 160 }, { \"x\": 173, \"y\": 160 }, { \"x\": 186, \"y\": 160 }, { \"x\": 195, \"y\": 160 }, { \"x\": 198, \"y\": 161 }, { \"x\": 203, \"y\": 163 }, { \"x\": 208, \"y\": 163 }, { \"x\": 206, \"y\": 164 }, { \"x\": 200, \"y\": 167 }, { \"x\": 187, \"y\": 172 }, { \"x\": 174, \"y\": 179 }, { \"x\": 172, \"y\": 181 }, { \"x\": 153, \"y\": 192 }, { \"x\": 137, \"y\": 201 }, { \"x\": 123, \"y\": 211 }, { \"x\": 112, \"y\": 220 }, { \"x\": 99, \"y\": 229 }, { \"x\": 90, \"y\": 237 }, { \"x\": 80, \"y\": 244 }, { \"x\": 73, \"y\": 250 }, { \"x\": 69, \"y\": 254 }, { \"x\": 69, \"y\": 252 }],\n    name: \"other\"\n  }];\n\n  ShapeDetector.prototype.spot = function (points, patternName) {\n\n    if (patternName == null) {\n      patternName = '';\n    }\n\n    var distance, pattern, score;\n    var stroke = new Stroke(points);\n    var bestDistance = +Infinity;\n    var bestPattern = null;\n    var bestScore = 0;\n\n    for (var i = 0; i < this.patterns.length; i++) {\n      pattern = this.patterns[i];\n\n      if (pattern.name.indexOf(patternName) > -1) {\n        distance = stroke.distanceAtBestAngle(pattern);\n        score = 1.0 - distance / _halfDiagonal;\n\n        if (distance < bestDistance && score > this.threshold) {\n          bestDistance = distance;\n          bestPattern = pattern.name;\n          bestScore = score;\n        }\n      }\n    }\n\n    return {\n      pattern: bestPattern,\n      score: bestScore\n    };\n  };\n\n  ShapeDetector.prototype.learn = function (name, points) {\n\n    return this.patterns.push(new Stroke(points, name));\n  };\n\n  return ShapeDetector;\n});\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetWindow = resetWindow;\nvar touch = require('./touch');\nvar ui = require('./ui');\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar timing = require('./timing');\nvar util = require('./util');\nvar sound = require('./sound');\n\nfunction resetWindow() {\n  window.kan = {\n    currentColor: '#2B5E2E',\n    composition: [],\n    compositionInterval: null,\n    compositionTimeout: null,\n    soundTimeouts: [],\n    lastEvent: null,\n    interaction: false,\n    moves: [],\n    playing: false,\n    pinching: false,\n    pinchedGroup: null,\n    pinchedTut: null,\n    pathData: {},\n    shapePath: null,\n    prevAngle: null,\n    sides: [],\n    side: [],\n    corners: [],\n    lastScale: 1,\n    lastRotation: 0,\n    originalPosition: null,\n    tutorialCompletion: {\n      \"fill\": false,\n      \"pinch\": false,\n      \"swipe\": false\n    },\n    inactivityTimeout: null,\n    playPromptTimeout: null,\n    userHasDrawnFirstShape: false,\n    firstTimePlaying: true,\n    shapesSinceTut: 0,\n    refreshCheckInterval: null,\n    sha: null,\n    scheduledOverlay: null,\n    continueCountdownInterval: null,\n    shapeSounds: null\n  };\n}\n\n$(window).on('load', function () {\n  function run() {\n    resetWindow();\n    util.setSha();\n    ui.init();\n    overlays.init();\n    timing.init();\n    sound.init().then(function () {\n      // sound.init() is async because it loads in the sound files\n      touch.init();\n    }).fail(function (e) {\n      console.error('error initting shape sounds:', e);\n      location.reload();\n    });\n  }\n\n  try {\n    run();\n  } catch (e) {\n    console.error(e);\n    setTimeout(function () {\n      // wait 5 seconds then reload\n      location.reload();\n    }, 5 * 1000);\n  }\n});\n\n},{\"./overlays\":7,\"./sound\":9,\"./timing\":10,\"./touch\":11,\"./ui\":13,\"./util\":14,\"./video\":15}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openOverlay = openOverlay;\nexports.resetContinueCountdown = resetContinueCountdown;\nexports.cardNavNext = cardNavNext;\nexports.closeAndResetOverlays = closeAndResetOverlays;\nexports.init = init;\nvar config = require('./../../config');\n\nvar touch = require('./touch');\nvar video = require('./video');\nvar timing = require('./timing');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar hammerCanvas = touch.hammerCanvas;\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar $cardsWrap = $body.find('.overlay.tips .card-wrap');\nvar $cardItems = $cardsWrap.find('article');\nvar cardsCount = $cardItems.length;\nvar $footer = $body.find('.overlay.tips .footer');\n\nvar $sharePhone = $body.find('#phone');\nvar $shareKeypad = $body.find('.keypad');\n\nvar allOverlays = ['intro', 'play-prompt', 'share-prompt', 'continue', 'tips', 'share'];\nvar overlayOpenClasses = allOverlays.map(function (overlay) {\n  return overlay + '-active';\n}).join(' ');\n\nvar overlayActiveClass = 'overlay-active';\n\nfunction openOverlay(overlayName) {\n  console.log('attempting to open overlay', overlayName);\n  if (window.kan.overlays === false) return;\n  if (allOverlays.includes(overlayName)) {\n    if (window.kan.pinching === true || window.kan.panning === true) {\n      if (overlayName === 'continue') {\n        timing.preventInactivityTimeout();\n      } else {\n        // console.log('scheduling overlay', overlayName);\n        window.kan.scheduledOverlay = overlayName;\n      }\n      return;\n    }\n    closeAndResetOverlays();\n    tutorial.hideContextualTuts();\n    $body.addClass(overlayActiveClass);\n    $body.find('.overlay:not(.tips)').on(tapEvent, function () {\n      closeAndResetOverlays();\n    });\n\n    switch (overlayName) {\n      case 'intro':\n        openIntroOverlay();\n        break;\n      case 'play-prompt':\n        if (util.anyShapesOnCanvas()) {\n          openPlayPromptOverlay();\n        } else {\n          window.kan.playPromptTimeout = setTimeout(function () {\n            openOverlay('play-prompt');\n          }, timing.playPromptDelay / 2);\n        }\n        break;\n      case 'share-prompt':\n        openSharePromptOverlay();\n        break;\n      case 'continue':\n        openContinueOverlay();\n        break;\n      case 'tips':\n        openTipsOverlay();\n        break;\n      case 'share':\n        openShareOverlay();\n        break;\n    }\n  } else {\n    console.log('unable to open unknown overlay', overlayName);\n  }\n}\n\nfunction openIntroOverlay() {\n  $body.addClass('intro-active');\n}\n\nfunction openPlayPromptOverlay() {\n  $body.addClass('play-prompt-active');\n}\n\nfunction openSharePromptOverlay() {\n  $body.addClass('share-prompt-active');\n}\n\nfunction resetContinueCountdown() {\n  $('.overlay.continue .countdown-num').html(parseInt(timing.continueInactivityDelay / 1000));\n  clearInterval(window.kan.continueCountdownInterval);\n}\n\nfunction openContinueOverlay() {\n  $body.addClass('continue-active');\n\n  resetContinueCountdown();\n  clearTimeout(window.kan.inactivityTimeout);\n  clearTimeout(window.kan.playPromptTimeout);\n\n  window.kan.continueCountdownInterval = setInterval(function () {\n    var $countdownNumWrap = $('.overlay.continue .countdown-num');\n    var count = parseInt($countdownNumWrap.html());\n    if (count > 1) {\n      $countdownNumWrap.html(count - 1);\n    }\n  }, 1000);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    video.enterTutorialMode();\n  }, timing.continueInactivityDelay);\n}\n\nfunction openTipsOverlay() {\n  $body.addClass('tips-active');\n  activateTipsCards();\n}\n\nfunction openShareOverlay() {\n  $body.addClass('share-active');\n}\n\n// card slider navigation\nfunction cardNavNext() {\n  var $old = $body.find('.card-wrap .current');\n  var $new = $old.next().length ? $old.next() : $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  var slide = $new.index();\n  $old.removeClass().addClass('remove');\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(slide + 1, cardsCount);\n  setTimeout(function () {\n    $old.removeClass();\n  }, 600);\n}\n\n// tips card interactions\nfunction cardInteractions() {\n  var timeOfLastInteraction = 0;\n\n  $body.find('.overlay').on(tapEvent, function (e) {\n    var currentTime = Date.now();\n    if (timeOfLastInteraction > currentTime - 250) {\n      return;\n    }\n    timeOfLastInteraction = currentTime;\n\n    if ($(e.target).closest('.card-wrap').length == 1) {\n      // directly on a card, navigate to the next one\n      cardNavNext();\n    } else {\n      // outside elements, close everything and reset\n      closeAndResetOverlays();\n    }\n  });\n}\n\nfunction resetTips() {\n  $cardItems.removeClass();\n  $sharePhone.html('');\n}\n\n// close and reset tips\nfunction closeAndResetOverlays() {\n  $body.removeClass('overlay-active');\n  $body.removeClass(overlayOpenClasses);\n  resetTips();\n}\n\n// deal a fresh stack of cards\nfunction activateTipsCards() {\n  var $new = $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  $cardItems.removeClass();\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(1, cardsCount);\n}\n\n// counting cards\nfunction updateCardCounter(current, total) {\n  $footer.find('.current').html(current);\n  $footer.find('.next').html(total);\n}\n\n// phone inputs\nfunction phoneNumberInputs() {\n  // mask the output\n  $sharePhone.mask('000-000-0000');\n  // get interactions from the keypad\n  $shareKeypad.find('.num').on(tapEvent, function (e) {\n    var phoneNumber = $sharePhone.html().toString() + $(e.target).html().toString();\n    phoneNumber = $sharePhone.masked(phoneNumber);\n    $sharePhone.html(phoneNumber);\n  });\n  // clear the display\n  $shareKeypad.find('.clear').on(tapEvent, function (e) {\n    $sharePhone.html('');\n  });\n  // FIXME: send sms\n  // $shareKeypad.find('.send').on(tapEvent, e => {});\n}\n\n// \"randomly\" place fiddly bits on the cards\nfunction randomCardGraphics() {\n  $body.find('.card-wrap article').each(function (i, el) {\n    $(el).attr('data-bg', i);\n  });\n}\n\nfunction initTips() {\n  cardInteractions();\n}\n\nfunction initShare() {\n  phoneNumberInputs();\n  randomCardGraphics();\n}\n\nfunction init() {\n  initTips();\n  initShare();\n}\n\n},{\"./../../config\":1,\"./timing\":10,\"./touch\":11,\"./tutorial\":12,\"./util\":14,\"./video\":15}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.destroyGroupPops = destroyGroupPops;\nexports.fillInGroupPopsById = fillInGroupPopsById;\nexports.toggleFill = toggleFill;\nexports.cleanUpGroup = cleanUpGroup;\nexports.updatePops = updatePops;\nexports.getOutlineGroup = getOutlineGroup;\nexports.getTruedShape = getTruedShape;\nexports.getCompletedPath = getCompletedPath;\nexports.getShapePrediction = getShapePrediction;\nexports.getIntegerPoint = getIntegerPoint;\nexports.stringifyPoint = stringifyPoint;\nexports.parsePoint = parsePoint;\nexports.getClosestPointFromPathData = getClosestPointFromPathData;\nexports.processShapeData = processShapeData;\nexports.findInteriorCurves = findInteriorCurves;\nexports.getExtendedPath = getExtendedPath;\nexports.getBruteExtendedPath = getBruteExtendedPath;\nexports.getTrimmedPath = getTrimmedPath;\nexports.hitTestGroupBounds = hitTestGroupBounds;\nexports.hitTestBounds = hitTestBounds;\nvar ShapeDetector = require('./lib/shape-detector');\n\nvar config = require('./../../config');\n\nvar util = require('./util');\nvar color = require('./color');\n\nvar cornerThresholdDeg = exports.cornerThresholdDeg = 30;\nvar thresholdDistMultiplier = exports.thresholdDistMultiplier = 0.1;\n\nvar detector = exports.detector = new ShapeDetector(ShapeDetector.defaultShapes);\n\nvar shapeNames = exports.shapeNames = [\"line\", \"circle\", \"square\", \"triangle\", \"other\"];\n\nfunction clearPops() {\n  var pops = util.getAllPops();\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction destroyGroupPops(group) {\n  console.log('destroying pops');\n  var groupPopsBefore = util.getGroupPops(group);\n  console.log('pops to be destroyed', groupPopsBefore);\n  if (groupPopsBefore.length > 0) {\n    groupPopsBefore.forEach(function (pop) {\n      return pop.remove();\n    });\n  }\n  var groupPopsAfter = util.getGroupPops(group);\n  console.log('group pops after', groupPopsAfter);\n}\n\nfunction fillInGroupPopsById(groupId) {\n  var group = paper.project.getItem({\n    className: 'Group',\n    match: function match(el) {\n      return el.id === groupId;\n    }\n  });\n\n  if (!!group && group.children.length > 0) {\n    group.children.forEach(function (groupChild) {\n      if (groupChild.name === 'loop') {\n        toggleFill(groupChild);\n      }\n    });\n  }\n}\n\nfunction toggleFill(item) {\n  var transparent = color.transparent;\n  // console.log('hit');\n  var parent = item.parent;\n\n  // console.log('hit item', item);\n  // console.log('hit parent', parent);\n\n  if (item.data.interior) {\n    // console.log('interior');\n    item.data.transparent = !item.data.transparent;\n\n    if (item.data.transparent) {\n      // console.log('transparent');\n      item.fillColor = transparent;\n      item.strokeColor = transparent;\n    } else {\n      // console.log('not transparent');\n      item.fillColor = parent.data.color;\n      item.strokeColor = parent.data.color;\n    }\n\n    window.kan.moves.push({\n      type: 'fillChange',\n      id: item.id,\n      fill: parent.data.color,\n      transparent: item.data.transparent\n    });\n  } else {\n    // console.log('not interior');\n    // check if item is a pop, because then we'll fill the pop's parent\n    if (!!item.data && item.data.pop === true) {\n      if (!!item.parent) {\n        if (config.pop === true) {\n          fillInGroupPopsById(item.parent.id);\n        }\n      }\n    }\n  }\n}\n\nfunction cleanUpGroup(group) {\n  console.log('cleaning up group');\n  var acceptableNames = ['mask', 'outer', 'shapePath', 'loop', 'pop'];\n\n  group.children.forEach(function (groupChild) {\n    if (groupChild.name === null || !acceptableNames.includes(groupChild.name) || !groupChild.length > 0) {\n      groupChild.remove();\n    }\n  });\n\n  return group;\n}\n\nfunction updatePops() {\n  var freshGroups = util.getFreshGroups();\n  var popCandidates = util.getPopCandidates();\n  var allPops = util.getAllPops();\n  popCandidates.reverse();\n  console.log('freshGroups', freshGroups);\n  console.log('popCandidates', popCandidates);\n  // clearPops();\n\n  freshGroups.forEach(function (freshGroup, i) {\n    // if (i >= 4) return;\n    console.log('freshGroup', freshGroup);\n\n    var freshOuter = freshGroup._namedChildren.mask[0];\n    freshOuter.bringToFront();\n    // freshOuter.visible = true;\n    // freshOuter.fillColor = 'black';\n    // freshOuter.selected = true;\n    // console.log('freshOuter', freshOuter);\n    // freshOuter.selected = true;\n    popCandidates.forEach(function (otherGroup, j) {\n      var otherGroupOuter = otherGroup._namedChildren.mask[0];\n      if (freshGroup.id !== otherGroup.id) {\n        // console.log('otherGroup', otherGroup);\n        // console.log('otherGroupOuter', otherGroupOuter);\n        // otherGroupOuter.fillColor = 'white';\n        otherGroupOuter.bringToFront();\n        var thisPop = freshOuter.intersect(otherGroupOuter);\n        if (!!thisPop && thisPop.length > 0) {\n          // const popColor = color.getIndexedPopColor(i + j);\n          var popColor = color.getRandomPop();\n          thisPop.fillColor = popColor;\n          thisPop.strokeColor = popColor;\n          thisPop.data.pop = true;\n          thisPop.name = 'pop';\n          thisPop.data.popGroup = freshGroup.id;\n          thisPop.data.intersectingGroup = otherGroup.id;\n          thisPop.visible = true;\n          thisPop.closed = true;\n          thisPop.bringToFront();\n          freshGroup.addChild(thisPop);\n        } else {\n          console.log('no pop');\n        }\n\n        cleanUpGroup(freshGroup);\n\n        // figure out if this pop intersects any other pops\n        // allPops.forEach((otherPop, k) => {\n        //   console.log('checking other pop', otherPop);\n        //   if (thisPop.id !== otherPop.id && thisPop.intersects(otherPop)) {\n        //     let popIntersection = thisPop.getIntersections(otherPop);\n        //     if (!!popIntersection && popIntersection.length > 0) {\n        //       popIntersection = new Path([popIntersection])\n        //       console.log('popIntersection', popIntersection);\n        //       // const popColor = color.getIndexedPopColor(i + j + k);\n        //       const popColor = color.getRandomPop();\n        //       popIntersection.data.pop = true;\n        //       popIntersection.fillColor = popColor\n        //       popIntersection.strokeColor = popColor;\n        //       popIntersection.visible = true;\n        //       popIntersection.closed = true;\n        //       popIntersection.bringToFront();\n        //     }\n        //   }\n        // });\n      }\n    });\n\n    freshGroup.data.fresh = false;\n  });\n}\n\nfunction getOutlineGroup(truedShape) {\n  // console.log('truedShape', truedShape);\n  var outerPath = new Path();\n  outerPath.name = 'outer';\n\n  var middlePath = new Path();\n  middlePath.name = 'middle';\n  var sizes = [];\n  var angle = void 0;\n\n  var firstTop = null,\n      firstBottom = null;\n  var lastTop = null,\n      lastBottom = null;\n\n  if (!(truedShape.length > 0)) return new Group(outerPath, middlePath);\n\n  // outerPath.add(truedShape.firstSegment.point);\n  middlePath.add(truedShape.firstSegment.point);\n\n  for (var i = 10; i < truedShape.length - 10; i += 20) {\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n\n    var size = Math.random() * 8; // This is just random variance\n    sizes.push(size);\n\n    var cumSize = 0;\n    for (var j = 0; j < sizes.length; j++) {\n      cumSize += sizes[j];\n    }\n    var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n    var prevPoint = truedShape.getPointAt(i - 10);\n    var nextPoint = truedShape.getPointAt(i + 10);\n    var point = new Point((prevPoint.x + nextPoint.x) / 2, (prevPoint.y + nextPoint.y) / 2);\n\n    angle = Math.atan2(nextPoint.y - prevPoint.y, nextPoint.x - prevPoint.x);\n\n    var topX = point.x + Math.cos(angle - Math.PI / 2) * avgSize;\n    var topY = point.y + Math.sin(angle - Math.PI / 2) * avgSize;\n    var top = new Point(topX, topY);\n\n    var bottomX = point.x + Math.cos(angle + Math.PI / 2) * avgSize;\n    var bottomY = point.y + Math.sin(angle + Math.PI / 2) * avgSize;\n    var bottom = new Point(bottomX, bottomY);\n\n    outerPath.add(top);\n    outerPath.insert(0, bottom);\n    middlePath.add(point);\n\n    if (i == 10) {\n      firstTop = top;\n      firstBottom = bottom;\n      // new Path.Line({\n      //   from: bottom,\n      //   to: top,\n      //   strokeWidth: 5,\n      //   strokeColor: 'red'\n      // });\n    } else {\n      lastTop = top;\n      lastBottom = bottom;\n      // new Path.Line({\n      //   from: bottom,\n      //   to: top,\n      //   strokeWidth: 5,\n      //   strokeColor: new Color(0, i / truedShape.length)\n      // });\n    }\n  }\n\n  // new Path.Line({\n  //   from: lastBottom,\n  //   to: lastTop,\n  //   strokeWidth: 5,\n  //   strokeColor: 'blue'\n  // });\n\n  if (truedShape.closed === true) {\n    var centerTop = new Point((firstTop.x + lastTop.x) / 2, (firstTop.y + lastTop.y) / 2);\n    var centerBottom = new Point((firstBottom.x + lastBottom.x) / 2, (firstBottom.y + lastBottom.y) / 2);\n    var center = new Point((centerTop.x + centerBottom.x) / 2, (centerTop.y + centerBottom.y) / 2);\n\n    outerPath.add(centerTop);\n    outerPath.insert(0, centerBottom);\n    middlePath.add(center);\n    // new Path.Line({\n    //   from: centerBottom,\n    //   to: centerTop,\n    //   strokeWidth: 5,\n    //   strokeColor: 'yellow'\n    // });\n    outerPath.add(firstTop);\n    outerPath.insert(0, firstBottom);\n    middlePath.closed = true;\n    // middlePath.add(point);\n    // console.log('closed');\n  }\n  //  else {\n  //   const lastCenter = ((lastTop.x + lastBottom.x) / 2, (lastTop.y + lastBottom.y) / 2);\n  //   const lastPoint = truedShape.lastSegment.point;\n  //   const adjustedLastPoint = new Point((lastCenter.x + lastPoint.x) / 2, (lastCenter.y + lastPoint.y) / 2);\n  //   // outerPath.add(adjustedLastPoint);\n  //   // outerPath.lastSegment.smooth();\n  // }\n\n  // outerPath.selected = true;\n\n  // new Path.Circle({\n  //   center: outerPath.firstSegment.point,\n  //   radius: 3,\n  //   fillColor: 'red'\n  // });\n  // new Path.Circle({\n  //   center: outerPath.firstSegment.next.point,\n  //   radius: 3,\n  //   fillColor: 'red'\n  // });\n  //\n  // new Path.Circle({\n  //   center: outerPath.lastSegment.point,\n  //   radius: 3,\n  //   fillColor: 'blue'\n  // });\n  // new Path.Circle({\n  //   center: outerPath.lastSegment.previous.point,\n  //   radius: 3,\n  //   fillColor: 'blue'\n  // });\n\n  outerPath.smooth();\n  middlePath.smooth();\n  outerPath.name = 'outer';\n  middlePath.name = 'middle';\n  var returnGroup = new Group(outerPath, middlePath);\n  return returnGroup;\n}\n\nfunction getTruedShape(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  // console.log('pathClone', pathClone);\n  var completedPath = getCompletedPath(pathClone);\n  // completedPath.reduce();\n\n  // true the path!\n  var truedPath = completedPath;\n  // console.log('truedPath', truedPath);\n\n  truedPath.strokeWidth = pathClone.strokeWidth;\n\n  pathClone.remove();\n  return truedPath;\n}\n\n// extend or trim path if the ends are close\nfunction getCompletedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  pathClone.reduce();\n  pathClone.simplify();\n\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    // trim path if ends are close\n    var trimmedPath = getTrimmedPath(pathClone);\n\n    pathClone.remove();\n\n    return trimmedPath;\n  } else {\n    // extend path to see if an intersection is near\n    var extendedPath = getExtendedPath(pathClone);\n    var _intersections = extendedPath.getIntersections();\n\n    // pathClone.remove();\n\n    if (_intersections.length > 0) {\n      // trim extra extended path\n      var _trimmedPath = getTrimmedPath(extendedPath);\n      extendedPath.remove();\n      return _trimmedPath;\n    } else {\n      // extended path does not intersect, return the original path\n      extendedPath.replaceWith(getBruteExtendedPath(pathClone));\n      if (extendedPath !== null) {\n        var _intersections2 = extendedPath.getIntersections();\n\n        if (_intersections2.length > 0) {\n          var _trimmedPath2 = getTrimmedPath(extendedPath);\n          extendedPath.remove();\n          return _trimmedPath2;\n        }\n\n        if (!!extendedPath && extendedPath.length > 0) {\n          extendedPath.remove();\n        }\n      }\n\n      pathClone.visible = true;\n      return pathClone;\n    }\n  }\n}\n\nfunction getShapePrediction(path) {\n  var prediction = {};\n\n  var shapeJSON = path.exportJSON();\n  var shapeData = processShapeData(shapeJSON);\n  // console.log(JSON.stringify(shapeData));\n  var shapePrediction = detector.spot(shapeData);\n\n  if (shapePrediction.score === 0) {\n    // algorithm doesn't like vertical lines for some reason\n    // if the certainty is 0 it's probably a line\n    prediction.pattern = \"line\";\n    prediction.score = 0.9;\n  } else {\n    if (shapePrediction.score > 0.5) {\n      prediction.pattern = shapePrediction.pattern;\n    } else {\n      prediction.pattern = \"other\";\n    }\n    prediction.score = shapePrediction.score;\n  }\n\n  console.log('shape prediction', prediction);\n\n  return prediction;\n}\n\n// floors the coordinates of a point\nfunction getIntegerPoint(point) {\n  return new Point(Math.floor(point.x), Math.floor(point.y));\n}\n\nfunction stringifyPoint(point) {\n  return Math.floor(point.x) + ',' + Math.floor(point.y);\n}\n\nfunction parsePoint(pointStr) {\n  var split = pointStr.split(',').map(function (num) {\n    return Math.floor(num);\n  });\n\n  if (split.length >= 2) {\n    return new Point(split[0], split[1]);\n  }\n\n  return null;\n}\n\nfunction getClosestPointFromPathData(point, pathData) {\n  var leastDistance = void 0,\n      closestPoint = void 0;\n\n  Base.each(pathData, function (datum, i) {\n    var distance = point.getDistance(datum.point);\n    if (!leastDistance || distance < leastDistance) {\n      leastDistance = distance;\n      closestPoint = datum.point;\n    }\n  });\n\n  return closestPoint || point;\n}\n\nfunction processShapeData(json) {\n  var returnShape = [];\n  var jsonObj = JSON.parse(json)[1]; // zero index is stringified type (e.g. \"Path\")\n\n  if ('segments' in jsonObj) {\n    var segments = jsonObj.segments;\n    Base.each(segments, function (segment, i) {\n      if (segment.length === 3) {\n        var positionInfo = segment[0]; // indexes 1 and 2 are superfluous matrix details\n        returnShape.push({\n          x: positionInfo[0],\n          y: positionInfo[1]\n        });\n      } else {\n        returnShape.push({\n          x: segment[0],\n          y: segment[1]\n        });\n      };\n    });\n  }\n  return returnShape;\n}\n\nfunction findInteriorCurves(path) {\n  var transparent = color.transparent;\n\n  var interiorCurves = [];\n\n  var pathClone = path.clone();\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    var dividedPath = pathClone.resolveCrossings();\n    // console.log(dividedPath);\n\n    if (dividedPath.className === 'CompoundPath') {\n      Base.each(dividedPath.children, function (child, i) {\n        if (child.length > 0 && child.closed) {\n          var enclosedLoop = child.clone();\n          if (pathClone.closed) {\n            enclosedLoop.fillColor = pathClone.strokeColor;\n            enclosedLoop.data.interior = true;\n            enclosedLoop.data.transparent = false;\n          } else {\n            enclosedLoop.fillColor = transparent;\n            enclosedLoop.data.transparent = true;\n          }\n          enclosedLoop.data.interior = true;\n          enclosedLoop.visible = true;\n          enclosedLoop.closed = true;\n          interiorCurves.push(enclosedLoop);\n        }\n      });\n    } else {\n      if (pathClone.closed) {\n        var enclosedLoop = pathClone.clone();\n        enclosedLoop.visible = true;\n        enclosedLoop.fillColor = pathClone.strokeColor;\n        enclosedLoop.data.interior = true;\n        enclosedLoop.data.transparent = false;\n        interiorCurves.push(enclosedLoop);\n      }\n    }\n  } else {\n    if (pathClone.closed) {\n      var _enclosedLoop = pathClone.clone();\n      _enclosedLoop.visible = true;\n      _enclosedLoop.fillColor = pathClone.strokeColor;\n      _enclosedLoop.data.interior = true;\n      _enclosedLoop.data.transparent = false;\n      interiorCurves.push(_enclosedLoop);\n    }\n  }\n\n  return interiorCurves;\n}\n\nfunction getExtendedPath(path) {\n  var bruteForce = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n\n  var firstSegment = extendedPath.firstSegment;\n  var nextSegment = firstSegment.next;\n  var startAngle = Math.atan2(nextSegment.point.y - firstSegment.point.y, nextSegment.point.x - firstSegment.point.x); // rad\n  var inverseStartAngle = startAngle + Math.PI;\n  var extendedStartPoint = new Point(firstSegment.point.x + Math.cos(inverseStartAngle) * thresholdDist / 2, firstSegment.point.y + Math.sin(inverseStartAngle) * thresholdDist / 2);\n  extendedPath.insert(0, extendedStartPoint);\n\n  var lastSegment = extendedPath.lastSegment;\n  var penSegment = lastSegment.previous; // penultimate\n  var endAngle = Math.atan2(lastSegment.point.y - penSegment.point.y, lastSegment.point.x - penSegment.point.x); // rad\n  var extendedEndPoint = new Point(lastSegment.point.x + Math.cos(endAngle) * thresholdDist / 2, lastSegment.point.y + Math.sin(endAngle) * thresholdDist / 2);\n  extendedPath.add(extendedEndPoint);\n\n  // extendedPath.visible = true;\n\n  return extendedPath;\n}\n\nfunction getBruteExtendedPath(path) {\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n  var firstPoint = extendedPath.firstSegment.point;\n  var lastPoint = extendedPath.lastSegment.point;\n\n  if (firstPoint.getDistance(lastPoint) < thresholdDist) {\n    extendedPath.insert(0, lastPoint);\n    extendedPath.add(firstPoint);\n    extendedPath.closed = true;\n    extendedPath.unite();\n    var crossings = extendedPath.resolveCrossings();\n    if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n      (function () {\n        var maxArea = 0,\n            maxChild = null;\n        crossings.children.forEach(function (child) {\n          if (child.area > maxArea) {\n            maxChild = child;\n            maxArea = child.area;\n          }\n        });\n\n        extendedPath = maxChild;\n      })();\n    }\n  }\n\n  return extendedPath;\n}\n\nfunction getTrimmedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n\n  var firstPoint = pathClone.firstSegment.point;\n  var lastPoint = pathClone.lastSegment.point;\n  var thresholdDist = thresholdDistMultiplier * pathClone.length;\n\n  var intersections = pathClone.getIntersections();\n  intersections.forEach(function (intersection, i) {\n    if (intersection.offset === 0) {\n      intersections.splice(i, 1);\n    }\n  });\n\n  console.log('intersections', intersections);\n\n  if (intersections.length == 1) {\n    for (var i = 0; i < intersections.length; i++) {\n      var intersectionPoint = intersections[i].point;\n\n      // if the average of the distance between the first and last points and the intersection point is within the threshold, trim\n      if (firstPoint.getDistance(intersectionPoint) + lastPoint.getDistance(intersectionPoint) < 2 * thresholdDist) {\n        // console.log('trimming path');\n        var dividedPath = pathClone.clone(); // resolve crossings seems to modify the path it was passed, so make an extra clone to be safe\n        dividedPath.visible = false;\n        var pathCrossings = dividedPath.resolveCrossings();\n\n        if (pathCrossings.className === 'CompoundPath' && pathCrossings.children.length > 0) {\n          for (var j = 0; j < pathCrossings.children.length; j++) {\n            var child = pathCrossings.children[j];\n            if (child.closed) {\n              // child.selected = true;\n              dividedPath = dividedPath.subtract(child);\n            }\n          }\n        }\n\n        // dividedPath.selected = true;\n\n        var trimmedPath = pathClone.subtract(dividedPath);\n        if (trimmedPath.length === 0) return pathClone;\n        if (trimmedPath.className === 'CompoundPath' && trimmedPath.children.length > 0) {\n          var _ret2 = function () {\n            var closedChildren = [];\n            trimmedPath.children.forEach(function (child, i) {\n              if (child.length > 0 && child.closed) {\n                var childClone = child.clone();\n                childClone.visible = false;\n                closedChildren.push(childClone);\n              }\n            });\n\n            if (closedChildren.length > 0) {\n              if (closedChildren.length > 1) {\n                // for some reason there are more than one closed children, merge them\n                var accumulator = closedChildren[0];\n\n                for (var _j = 1; _j < closedChildren.length; _j++) {\n                  accumulator = accumulator.unite(closedChildren[_j]);\n                }\n\n                if (accumulator.length > 0 && accumulator.className === 'Path') {\n                  // console.log('trimmed accumulator', accumulator);\n                  var newPath = new Path();\n                  newPath.copyContent(accumulator);\n                  newPath.copyAttributes(pathClone);\n                  accumulator.remove();\n                  pathClone.remove();\n                  dividedPath.remove();\n                  trimmedPath.remove();\n                  return {\n                    v: newPath\n                  };\n                }\n              }\n\n              pathClone.remove();\n              dividedPath.remove();\n              trimmedPath.remove();\n              // console.log('trimmed closedChildren[0]', closedChildren[0]);\n              return {\n                v: closedChildren[0]\n              };\n            }\n          }();\n\n          if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n        }\n\n        // console.log('trimmed path return', trimmedPath);\n        // console.log('path clone', pathClone);\n        // console.log('dividedPath', dividedPath);\n        pathClone.remove();\n        dividedPath.remove();\n        return trimmedPath;\n      }\n    }\n\n    // no close intersection were found so nothing can be trimmed\n    return pathClone;\n  } else {\n    return path;\n  }\n}\n\nfunction hitTestGroupBounds(point) {\n  var groups = util.getAllGroups();\n  return hitTestBounds(point, groups);\n}\n\nfunction hitTestBounds(point, children) {\n  if (!point) return null;\n\n  for (var i = children.length - 1; i >= 0; i--) {\n    var child = children[i];\n    var bounds = child.strokeBounds;\n    if (point.isInside(child.strokeBounds)) {\n      return child;\n    }\n  }\n\n  return null;\n}\n\n},{\"./../../config\":1,\"./color\":4,\"./lib/shape-detector\":5,\"./util\":14}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.init = init;\nexports.reinitShapeSounds = reinitShapeSounds;\nexports.getShapeSoundObj = getShapeSoundObj;\nexports.startPlaying = startPlaying;\nexports.stopPlaying = stopPlaying;\nexports.asyncInitShapeSounds = asyncInitShapeSounds;\nexports.formatShapeSoundData = formatShapeSoundData;\nexports.quantizeLength = quantizeLength;\nexports.quantizePosition = quantizePosition;\nexports.removeShapeFromComposition = removeShapeFromComposition;\nexports.clearSoundTimeouts = clearSoundTimeouts;\nexports.startComposition = startComposition;\nexports.stopComposition = stopComposition;\nexports.getTrimmedCompositionObj = getTrimmedCompositionObj;\nrequire('howler');\n\nvar ui = require('./ui');\nvar shape = require('./shape');\nvar color = require('./color');\nvar overlays = require('./overlays');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar measures = 4;\nvar bpm = 120;\nvar beatLength = 60 / bpm * 1000; // ms\nvar measureLength = beatLength * 4;\nvar compositionLength = exports.compositionLength = measureLength * measures;\n\nvar playingClass = exports.playingClass = 'playing';\nvar playEnabledClass = exports.playEnabledClass = 'play-enabled';\n\nfunction init() {\n  return asyncInitShapeSounds();\n}\n\nfunction reinitShapeSounds() {\n  return asyncInitShapeSounds();\n}\n\nfunction getShapeSoundObj(path) {\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var shapeSounds = window.kan.shapeSounds || initShapeSounds();\n  // alert(JSON.stringify(window.kan.shapeSounds));\n  // console.log(JSON.stringify(window.kan.shapeSounds));\n\n  var shapePrediction = shape.getShapePrediction(path);\n  var colorName = color.getPathColorName(path);\n  if (colorName === null) colorName = 'black'; // just in case\n\n  var quantizedSoundStartTime = quantizeLength(path.bounds.x / viewWidth * compositionLength); // ms\n  var quantizedSoundDuration = quantizeLength(path.bounds.width / viewWidth * compositionLength); // ms\n\n  var soundObj = {};\n  soundObj.sound = shapeSounds[shapePrediction.pattern];\n  soundObj.startTime = quantizedSoundStartTime;\n  soundObj.duration = quantizedSoundDuration;\n  soundObj.pathId = path.id;\n  soundObj.spriteName = colorName;\n\n  if (!!path.parent && path.parent.className === 'Group') {\n    soundObj.groupId = path.parent.id;\n  }\n\n  return soundObj;\n}\n\nfunction startPlaying() {\n  console.log('first time', window.kan.firstTimePlaying);\n  if ($body.hasClass(playEnabledClass)) {\n    $body.addClass(playingClass);\n\n    Howler.mute(false);\n\n    window.kan.playing = true;\n\n    if (window.kan.firstTimePlaying === true) {\n      window.kan.firstTimePlaying = false;\n      startComposition(window.kan.composition, false);\n    } else {\n      startComposition(window.kan.composition, true);\n    }\n  } else {\n    window.kan.playing = false;\n    $body.removeClass(playingClass);\n  }\n}\n\nfunction stopPlaying() {\n  var mute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!!mute) {\n    Howler.mute(true);\n  }\n\n  window.kan.playing = false;\n  $body.removeClass(playingClass);\n\n  stopComposition();\n}\n\nfunction asyncGetShapeSoundFromShapeName(shapeName) {\n  var shapeSoundJSONPath = './audio/shapes/' + shapeName + '/' + shapeName + '.json';\n  return $.getJSON(shapeSoundJSONPath).then(function (resp) {\n    var shapeSoundData = formatShapeSoundData(shapeName, resp);\n    var sound = new Howl(shapeSoundData);\n    return {\n      shapeName: shapeName,\n      sound: sound\n    };\n  });\n}\n\nfunction asyncInitShapeSounds() {\n  var returnSounds = {};\n  var extensions = ['ogg', 'm4a', 'mp3', 'ac3'];\n\n  var shapeNames = shape.shapeNames;\n  var promises = [];\n  Base.each(shapeNames, function (shapeName) {\n    promises.push(asyncGetShapeSoundFromShapeName(shapeName));\n  });\n\n  return $.when.apply($, promises).done(function () {\n    var returnSounds = {};\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      returnSounds[arg.shapeName] = arg.sound;\n    }\n\n    window.kan.shapeSounds = returnSounds;\n    return returnSounds;\n  });\n}\n\nfunction formatShapeSoundData(shapeName, data) {\n  var returnData = {};\n\n  returnData.src = data.urls.map(function (url) {\n    return './audio/shapes/' + shapeName + '/' + url;\n  });\n  returnData.sprite = data.sprite;\n  returnData.html5 = true;\n  returnData.loop = false;\n\n  return returnData;\n}\n\nfunction quantizeLength(duration) {\n  var smallestDuration = 60 / bpm;\n  var returnDuration = Math.floor(duration / smallestDuration) * smallestDuration;\n\n  if (returnDuration > 0) {\n    return returnDuration;\n  } else {\n    // always return something greater than zero\n    return smallestDuration;\n  }\n}\n\nfunction quantizePosition(position, viewWidth) {\n  var smallestInterval = viewWidth / (4 * measures);\n  return returnPosition = Math.floor(position / smallestInterval) * smallestInterval;\n}\n\nfunction animateShapePlay(shape) {\n  var item = paper.project.getItem({\n    className: 'Path',\n    match: function match(el) {\n      return el.id === shape.pathId;\n    }\n  });\n  if (!!item) {\n    var group = item.parent;\n    group.data.animating = true;\n    var totalDuration = measureLength / 2;\n    group.animate([{\n      properties: {\n        scale: 1,\n        rotate: -5\n      },\n      settings: {\n        duration: totalDuration / 4,\n        easing: \"easeInOut\"\n      }\n    }, {\n      properties: {\n        scale: 1.15,\n        rotate: 5\n      },\n      settings: {\n        duration: totalDuration / 2,\n        easing: \"easeInOut\"\n      }\n    }, {\n      properties: {\n        scale: 1,\n        rotate: 0\n      },\n      settings: {\n        duration: totalDuration / 4,\n        easing: \"easeInOut\",\n        complete: function complete() {\n          this.data.animating = false;\n          // console.log('animation step 3')\n        }\n      }\n    }]);\n  }\n}\n\nfunction removeShapeFromComposition(shapeGroup) {\n  var _loop = function _loop(i) {\n    var sound = window.kan.composition[i];\n\n    if ('groupId' in sound) {\n      if (sound.groupId === shapeGroup.id) {\n        window.kan.composition.splice(i, 1);\n        return {\n          v: void 0\n        };\n      }\n    } else if ('pathId' in sound) {\n      var item = getItems({\n        match: function match(el) {\n          return el.id === sound.pathId;\n        }\n      });\n      if (item.length > 0) {\n        if (!!item.parent && item.parent.className === 'Group' && item.parent.id === shapeGroup.id) {\n          window.kan.composition.splice(i, 1);\n          return {\n            v: void 0\n          };\n        }\n      }\n    }\n  };\n\n  for (var i = 0; i < window.kan.composition.length; i++) {\n    var _ret = _loop(i);\n\n    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n  }\n}\n\nfunction clearSoundTimeouts() {\n  if (window.kan.soundTimeouts.length > 0) {\n    window.kan.soundTimeouts.forEach(function (soundTimeout) {\n      clearTimeout(soundTimeout);\n    });\n  }\n\n  window.kan.soundTimeouts = [];\n}\n\nfunction startComposition(composition) {\n  var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  stopComposition();\n  tutorial.hideContextualTuts();\n\n  clearTimeout(window.kan.playPromptTimeout);\n\n  var iterations = 0;\n  playCompositionFirstTime();\n\n  function playCompositionFirstTime() {\n    clearSoundTimeouts();\n    console.log('playing composition first time');\n    var trimmedCompositionObj = getTrimmedCompositionObj(composition);\n\n    Base.each(trimmedCompositionObj.composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          console.log('not playing, returning');\n          return;\n        }\n\n        if (shape.spriteName === null) {\n          console.log('%cshape is null', 'color:red', shape);\n          return;\n        }\n\n        console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n        shape.sound.play(shape.spriteName);\n        animateShapePlay(shape);\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n\n    iterations++;\n    window.kan.compositionTimeout = setTimeout(repeatComposition, compositionLength - trimmedCompositionObj.startTime);\n  }\n\n  function playCompositionOnce() {\n    clearSoundTimeouts();\n    console.log('repeat');\n    Base.each(composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          console.log('not playing, returing');\n          return;\n        }\n\n        console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n        shape.sound.play(shape.spriteName);\n        animateShapePlay(shape);\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n    iterations++;\n  }\n\n  function repeatComposition() {\n    if (loop === true) {\n      playCompositionOnce();\n      window.kan.compositionInterval = setInterval(playCompositionOnce, compositionLength);\n    } else {\n      if (iterations < 2) {\n        playCompositionOnce();\n        setTimeout(repeatComposition, compositionLength);\n      } else {\n        stopPlaying();\n        overlays.openOverlay('share-prompt');\n      }\n    }\n  }\n}\n\nfunction stopComposition() {\n  clearInterval(window.kan.compositionInterval);\n  clearTimeout(window.kan.compositionTimeout);\n  clearSoundTimeouts();\n}\n\nfunction getTrimmedCompositionObj(composition) {\n  var firstTime = 0;\n  var trimmedComposition = [];\n  var startTime = getCompositionStartTime(composition);\n\n  composition.forEach(function (sound) {\n    var modifiedSound = util.shallowCopy(sound);\n    modifiedSound.startTime = sound.startTime - startTime;\n    if (modifiedSound.startTime < 0) modifiedSound.startTime = 0; // this shouldn't happen\n    trimmedComposition.push(modifiedSound);\n  });\n\n  return {\n    composition: trimmedComposition,\n    startTime: startTime\n  };\n}\n\nfunction getCompositionStartTime(composition) {\n  var startTime = compositionLength;\n\n  composition.forEach(function (sound) {\n    // console.log(sound);\n    // console.log(sound.startTime)\n    if ('startTime' in sound && sound.startTime < startTime) {\n      startTime = sound.startTime;\n    }\n  });\n\n  // console.log('start time', startTime);\n\n  if (startTime !== compositionLength) {\n    return startTime;\n  } else {\n    return 0;\n  }\n}\n\n},{\"./color\":4,\"./overlays\":7,\"./shape\":8,\"./tutorial\":12,\"./ui\":13,\"./util\":14,\"howler\":3}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.preventInactivityTimeout = preventInactivityTimeout;\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar drawInactivityDelay = exports.drawInactivityDelay = 40 * 1000; // ms\nvar continueInactivityDelay = exports.continueInactivityDelay = 30 * 1000; // ms\nvar playPromptDelay = exports.playPromptDelay = 60 * 1000; // ms;\nvar inputDelay = exports.inputDelay = 100; // ms\nvar refreshCheckDelay = exports.refreshCheckDelay = 60 * 1000; // ms\nvar overlayDelay = exports.overlayDelay = 1000; // ms\n\nfunction init() {\n  if (window.location.hash.length > 0 && window.location.hash == '#dev') {\n    window.kan.overlays = false;\n    video.pauseVideo();\n    video.exitTutorialMode();\n  } else {\n    video.enterTutorialMode();\n  }\n}\n\nfunction preventInactivityTimeout() {\n  console.log('prevent timeout: ' + util.getTime());\n  // overlays.closeAndResetOverlays();\n\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    overlays.openOverlay('continue');\n  }, drawInactivityDelay);\n}\n\n},{\"./overlays\":7,\"./util\":14,\"./video\":15}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nrequire('hammerjs');\n\nvar config = require('./../../config');\nvar sound = require('./sound');\nvar color = require('./color');\nvar shape = require('./shape');\nvar util = require('./util');\nvar tutorial = require('./tutorial');\nvar timing = require('./timing');\nvar overlays = require('./overlays');\nvar ui = require('./ui');\n\nvar $body = $('body');\n\nvar hitOptions = {\n  segments: false,\n  stroke: true,\n  fill: true,\n  tolerance: 5\n};\n\nvar minShapeSize = 100;\nvar maxShapeLength = 5000;\nvar maxScaleFactor = 0.8;\n\nvar outerPath = void 0;\nvar sizes = [];\nvar size = void 0;\nvar cumSize = void 0;\nvar prevPoint = void 0;\n\nvar hammerTips = exports.hammerTips = void 0;\nvar hammerCanvas = exports.hammerCanvas = void 0;\n\nfunction init() {\n  exports.hammerTips = hammerTips = new Hammer.Manager(ui.tipsOverlay);\n  hammerTips.add(new Hammer.Swipe({ direction: Hammer.DIRECTION_ALL }));\n  hammerTips.on('swipe', overlays.cardNavNext);\n\n  exports.hammerCanvas = hammerCanvas = new Hammer.Manager(ui.canvas);\n  hammerCanvas.add(new Hammer.Tap({ event: 'doubletap', taps: 2, interval: 400, time: 150, posThreshold: 50 }));\n  hammerCanvas.add(new Hammer.Tap({ event: 'singletap' }));\n  hammerCanvas.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL }));\n  hammerCanvas.add(new Hammer.Pinch());\n\n  hammerCanvas.get('doubletap').recognizeWith('singletap');\n  // hammerCanvas.get('singletap').requireFailure('doubletap');\n  hammerCanvas.get('pan').requireFailure('pinch');\n  hammerCanvas.get('pinch').requireFailure('pan');\n\n  // hammerCanvas.on('singletap', singleTap);\n  hammerCanvas.on('doubletap', doubleTap);\n\n  hammerCanvas.on('panstart', panStart);\n  hammerCanvas.on('panmove', panMove);\n  hammerCanvas.on('panend', panEnd);\n  // hammerCanvas.on('pancancel', panCancel);\n\n  hammerCanvas.on('pinchstart', pinchStart);\n  hammerCanvas.on('pinchmove', pinchMove);\n  hammerCanvas.on('pinchend', pinchEnd);\n  // hammerCanvas.on('pinchcancel', pinchCancel);\n}\n\nfunction enablePanAndPinchEvents() {\n  enablePanEvents();\n  enablePinchEvents();\n}\n\nfunction enableTapEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n  hammerCanvas.get('singletap').set({ enable: enable });\n  hammerCanvas.get('doubletap').set({ enable: enable });\n}\n\nfunction disableTapEvents() {\n  enableTapEvents(false);\n}\n\nfunction enablePanEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pan').set({ enable: enable });\n  // hammerCanvas.get('panstart').set({enable: enable});\n  // hammerCanvas.get('panmove').set({enable: enable});\n  // hammerCanvas.get('panend').set({enable: enable});\n}\n\nfunction disablePanEvents() {\n  enablePanEvents(false);\n}\n\nfunction enablePinchEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pinch').set({ enable: enable });\n  // hammerCanvas.get('pinchstart').set({enable: enable});\n  // hammerCanvas.get('pinchmove').set({enable: enable});\n  // hammerCanvas.get('pinchend').set({enable: enable});\n}\n\nfunction disablePinchEvents() {\n  enablePinchEvents(false);\n}\n\nfunction singleTap(event) {\n  // console.log(event.target);\n  // event.preventDefault();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  tutorial.hideContextualTuts();\n  // $(event.target).click();\n\n  // sound.stopPlaying();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  // console.log(event);\n  // tutorial.hideContextualTuts();\n  //\n  // sound.stopPlaying();\n  //\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (hitResult) {\n    var item = hitResult.item;\n    // item.selected = !item.selected;\n    console.log(item);\n  }\n}\n\nfunction doubleTap(event) {\n  event.preventDefault();\n  // console.log('doubletap');\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  if (hitResult) {\n    shape.toggleFill(hitResult.item);\n    tutorial.hideContextualTutByName('fill');\n  } else {\n    window.kan.pinchedGroup = null;\n    console.log('hit no item');\n  }\n}\n\nfunction panStart(event) {\n  // console.log(event);\n  // console.log('panstart');\n  // paper.project.activeLayer.removeChildren(); // REMOVE\n  // event.preventDefault();\n\n  if (!eventTargetIsOnCanvas(event)) {\n    window.kan.panning = false;\n    timing.preventInactivityTimeout();\n    // check if tips modal is up\n    if ($body.hasClass('overlay-active tips-active')) {\n      // if so, go to next tip card\n      overlays.cardNavNext();\n    }\n    event.srcEvent.stopPropagation();\n    return;\n  }\n\n  window.kan.panning = true;\n  tutorial.hideContextualTuts();\n\n  hammerCanvas.off('panstart');\n  // hammerCanvas.get('pan').set({enable: false});\n  disablePinchEvents();\n  disableTapEvents();\n\n  // ignore other touch inputs\n  // if (window.kan.pinching) return;\n  // if (!(event.changedPointers && event.changedPointers.length > 0)) return;\n  // if (event.changedPointers.length > 1) {\n  //   console.log('event.changedPointers > 1');\n  // }\n\n  sound.stopPlaying();\n\n  window.kan.prevAngle = Math.atan2(event.velocityY, event.velocityX);\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  outerPath = new Path();\n  outerPath.fillColor = window.kan.currentColor;\n  // outerPath.fillColor = new Color(0, 0.5);\n\n  sizes = [];\n\n  var shapePath = new Path({\n    strokeColor: window.kan.currentColor,\n    name: 'shapePath',\n    strokeWidth: 5,\n    visible: false,\n    strokeCap: 'round'\n  });\n\n  shapePath.add(point);\n\n  // window.kan.corners = [point];\n\n  // window.kan.sides = [];\n  // window.kan.side = [point];\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    first: true\n  };\n\n  window.kan.shapePath = shapePath;\n}\n\nfunction panMove(event) {\n  console.log('panmove');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  var thresholdAngleRad = util.rad(shape.cornerThresholdDeg);\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  var angle = Math.atan2(event.velocityY, event.velocityX);\n  var prevAngle = window.kan.prevAngle;\n  var angleDelta = util.angleDelta(angle, prevAngle);\n  window.kan.prevAngle = angle;\n\n  // let side = window.kan.side;\n  // let sides = window.kan.sides;\n\n  // if (angleDelta > thresholdAngleRad) {\n  //   if (side.length > 0) {\n  //     // console.log('corner');\n  //     let cornerPoint = point;\n  //     // new Path.Circle({\n  //     //   center: cornerPoint,\n  //     //   radius: 15,\n  //     //   strokeColor: 'black'\n  //     // });\n  //     // window.kan.corners.push(cornerPoint);\n  //     sides.push(side);\n  //     side = [];\n  //   }\n  // }\n\n  // side.push(point);\n\n  while (sizes.length > 10) {\n    sizes.shift();\n  }\n  if (sizes.length > 0) {\n    var dist = prevPoint.getDistance(point);\n\n    // These are based on acceleration\n    // size = 30 - Math.min(dist * 0.3, 30);\n    // size = dist * 3 + 5;\n    size = Math.random() * 10; // This is just random variance\n\n    cumSize = 0;\n    for (var j = 0; j < sizes.length; j++) {\n      cumSize += sizes[j];\n    }\n    // const avgSize = ((cumSize / sizes.length) + size) / 2;\n    var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n    var halfPointX = (point.x + prevPoint.x) / 2;\n    var halfPointY = (point.y + prevPoint.y) / 2;\n    var halfPoint = new Point(halfPointX, halfPointY);\n\n    var topX = halfPoint.x + Math.cos(angle - Math.PI / 2) * avgSize;\n    var topY = halfPoint.y + Math.sin(angle - Math.PI / 2) * avgSize;\n    var top = new Point(topX, topY);\n\n    var bottomX = halfPoint.x + Math.cos(angle + Math.PI / 2) * avgSize;\n    var bottomY = halfPoint.y + Math.sin(angle + Math.PI / 2) * avgSize;\n    var bottom = new Point(bottomX, bottomY);\n\n    outerPath.add(top);\n    outerPath.insert(0, bottom);\n    outerPath.smooth();\n  } else {\n    size = 5;\n  }\n\n  sizes.push(size);\n  prevPoint = point;\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    speed: Math.abs(event.overallVelocity),\n    angle: angle\n  };\n\n  window.kan.shapePath.add(point);\n  // window.kan.sides = sides;\n  // window.kan.side = side;\n\n  paper.view.draw();\n}\n\nfunction panEnd(event) {\n  console.log('panend');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  var transparent = color.transparent;\n  var colorName = color.getColorName(window.kan.currentColor);\n\n  var shapePath = window.kan.shapePath;\n  // let side = window.kan.side;\n  // let sides = window.kan.sides;\n  // let corners = window.kan.corners;\n\n  shapePath.add(point);\n  outerPath.visible = false;\n\n  if (shapePath.length < minShapeSize || shapePath.length > maxShapeLength) {\n    console.log('path is too short or too long');\n    shapePath.remove();\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    window.kan.panning = false;\n    return;\n  }\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    last: true\n  };\n\n  // side.push(point);\n  // sides.push(side);\n  // corners.push(point);\n\n  var group = new Group();\n\n  var truedShape = shape.getTruedShape(shapePath);\n\n  // group.data.color = truedShape.strokeColor;\n  // console.log('currentGradient:', config.palette.gradients[window.kan.currentColor]);\n\n  var shapeSize = truedShape.strokeBounds;\n  var centerPoint = new Point(shapeSize.width / 2, shapeSize.height / 2);\n  var angle = util.rad(Math.random() * 360);\n  var gradientSize = (shapeSize.width + shapeSize.height) / 4;\n  var originX = centerPoint.x + Math.cos(angle - Math.PI / 2) * gradientSize;\n  var originY = centerPoint.y + Math.sin(angle - Math.PI / 2) * gradientSize;\n  var destinationX = centerPoint.x + Math.cos(angle + Math.PI / 2) * gradientSize;\n  var destinationY = centerPoint.y + Math.sin(angle + Math.PI / 2) * gradientSize;\n\n  var origin = new Point(originX + shapeSize.x, originY + shapeSize.y);\n  var destination = new Point(destinationX + shapeSize.x, destinationY + shapeSize.y);\n  // group.addChild(new Path.Circle({\n  //   center: origin,\n  //   radius: 5,\n  //   fillColor: 'red',\n  // }));\n  // group.addChild(new Path.Circle({\n  //   center: destination,\n  //   radius: 5,\n  //   fillColor: 'green',\n  // }));\n  group.data.originalColor = window.kan.currentColor;\n  group.data.color = {\n    gradient: {\n      stops: config.palette.gradients[window.kan.currentColor]\n    },\n    origin: origin,\n    destination: destination\n  };\n  group.data.scale = 1; // init variable to track scale changes\n  group.data.rotation = 0; // init variable to track rotation changes\n  group.data.fresh = true;\n\n  shapePath.remove();\n  truedShape.visible = false;\n  truedShape.strokeColor = new Color(0, 0);\n  window.kan.shapePath = truedShape;\n  truedShape.name = 'shapePath';\n\n  if (!(truedShape.length > 0)) {\n    truedShape.remove();\n    group.remove();\n    window.kan.panning = false;\n    return;\n  }\n\n  group.addChild(truedShape);\n\n  var shapeSoundObj = sound.getShapeSoundObj(truedShape);\n  window.kan.composition.push(shapeSoundObj);\n\n  truedShape.visible = false;\n  var outlineGroup = shape.getOutlineGroup(truedShape);\n  var outline = outlineGroup._namedChildren.outer[0].clone();\n  outline.name = 'outer';\n  outline.fillColor = window.kan.currentColor;\n  outline.fillColor = group.data.color;\n\n  var outlineCenter = outlineGroup._namedChildren.middle[0].clone();\n  outlineCenter.strokeColor = group.data.color;\n  outlineCenter.visible = false;\n  group.addChild(outline);\n  outline.sendToBack();\n\n  outlineGroup.remove();\n\n  var shapeMask = outline.clone();\n  shapeMask.fillColor = outline.fillColor;\n  shapeMask.strokeColor = outline.strokeColor;\n  shapeMask.closed = true;\n\n  var enclosedLoops = shape.findInteriorCurves(outlineCenter);\n  if (enclosedLoops.length > 0 || truedShape.closed === true) {\n    group.data.line = false;\n  } else {\n    group.data.line = true;\n  }\n\n  enclosedLoops.forEach(function (loop) {\n    shapeMask.unite(loop);\n    shapeMask.sendToBack();\n    loop.name = 'loop';\n    loop.data.loop = true;\n    loop.visible = true;\n    group.addChild(loop);\n  });\n\n  shapeMask.unite();\n  var crossings = shapeMask.resolveCrossings();\n  if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n    (function () {\n      var maxArea = 0,\n          maxChild = null;\n      crossings.children.forEach(function (child) {\n        if (child.area > maxArea) {\n          maxChild = child;\n          maxArea = child.area;\n        }\n      });\n\n      shapeMask = maxChild;\n    })();\n  }\n\n  outlineCenter.remove();\n  shapeMask.visible = false;\n  shapeMask.name = 'mask';\n  shapeMask.data.mask = true;\n  group.addChild(shapeMask);\n  shapeMask.sendToBack();\n\n  shape.cleanUpGroup(group);\n\n  window.kan.moves.push({\n    type: 'newGroup',\n    id: group.id\n  });\n\n  ui.unditherButtonsByName(['new', 'undo']);\n\n  if (window.kan.userHasDrawnFirstShape !== true) {\n    // first shape!\n    // set play prompt timeout\n    window.kan.playPromptTimeout = setTimeout(function () {\n      overlays.openOverlay('play-prompt');\n    }, timing.playPromptDelay);\n\n    window.kan.userHasDrawnFirstShape = true;\n  } else {\n    var groups = util.getAllGroups();\n    if (groups.length >= 3) {\n      $body.addClass(sound.playEnabledClass);\n      ui.unditherButtonsByName(['play-stop', 'share']);\n    }\n    // console.log(groups.length, $body.hasClass(sound.playEnabledClass));\n  }\n\n  if (config.runAnimations) {\n    var scaleFactor = 0.9;\n    group.animate([{\n      properties: {\n        scale: scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeOut\"\n      }\n    }, {\n      properties: {\n        scale: 1 / scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeIn\"\n      }\n    }]);\n  }\n\n  if (!tutorial.allTutsCompleted()) {\n    var tutorialCompletion = window.kan.tutorialCompletion;\n    var tutName = null;\n\n    if (!tutorialCompletion['fill'] && truedShape.closed) {\n      tutName = 'fill';\n    } else {\n      var _groups = paper.project.getItems({\n        match: function match(el) {\n          return el.className === 'Group';\n        }\n      });\n      if (!tutorialCompletion['pinch'] && _groups.length >= 3) {\n        tutName = 'pinch';\n      } else if (!tutorialCompletion['swipe'] && _groups.length >= 5) {\n        tutName = 'swipe';\n      }\n    }\n\n    if (tutName !== null) {\n      // console.log(`${tutName} tutorial`);\n      tutorial.addContextualTut(tutName);\n      window.kan.tutorialCompletion[tutName] = true;\n      group.data.tut = tutName;\n    }\n  }\n\n  // window.kan.side = side;\n  // window.kan.sides = sides;\n  // window.kan.corners = corners;\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  console.log('pan done');\n  hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    hammerCanvas.set({ enable: true });\n    console.log('touch enabled');\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n\n    window.kan.panning = false;\n  }, timing.inputDelay);\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n}\n\nfunction panCancel(event) {\n  console.log('pancancel');\n  event.srcEvent.stopPropagation();\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('panstart', panStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n  window.kan.panning = false;\n}\n\nfunction pinchStart(event) {\n  console.log('pinchstart');\n  timing.preventInactivityTimeout();\n  tutorial.hideContextualTuts();\n  window.kan.interacting = true;\n  window.kan.pinching = true;\n  // event.preventDefault();\n\n  // hammerCanvas.get('pinchstart').set({enable: false});\n  hammerCanvas.off('pinchstart');\n  disablePanEvents();\n  disableTapEvents();\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  console.log('pinchStart', event.center);\n  sound.stopPlaying();\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = shape.hitTestGroupBounds(point);\n\n  if (hitResult) {\n    window.kan.pinching = true;\n    window.kan.pinchedGroup = hitResult;\n    window.kan.lastScale = 1;\n    window.kan.lastRotation = event.rotation;\n\n    window.kan.originalPosition = hitResult.position;\n    window.kan.originalRotation = hitResult.data.rotation;\n    window.kan.originalScale = hitResult.data.scale;\n    hitResult.data.thrown = false;\n\n    if (config.pop === true) {\n      shape.destroyGroupPops(hitResult);\n    }\n\n    hitResult.bringToFront();\n\n    if (hitResult.data.tut && hitResult.data.tut.length > 0) {\n      var $tut = $('.tut[data-tut-type=\\'' + hitResult.data.tut + '\\']');\n      if ($tut) {\n        window.kan.pinchedTut = $tut;\n      } else {\n        window.kan.pinchedTut = null;\n      }\n    } else {\n      window.kan.pinchedTut = null;\n    }\n\n    // if (config.runAnimations) {\n    //   hitResult.animate({\n    //     properties: {\n    //       scale: 1.25\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n    window.kan.pinchedTut = null;\n    console.log('hit no item');\n  }\n}\n\nfunction pinchMove(event) {\n  console.log('pinchMove');\n  // event.preventDefault();\n\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n\n  if (!!pinchedGroup) {\n    var currentScale = event.scale;\n    var scaleDelta = void 0;\n\n    tutorial.hideContextualTutByName('pinch');\n\n    if (pinchedGroup.bounds.width < minShapeSize || pinchedGroup.bounds.height < minShapeSize) {\n      // only allow a shape to scale down if it is larger than the minimum size\n      scaleDelta = 1.1;\n    } else if (pinchedGroup.bounds.width >= paper.view.viewSize.width || pinchedGroup.bounds.height >= paper.view.viewSize.height) {\n      // only allow shape to scale up if it fits in the viewport\n      scaleDelta = 0.9;\n    } else {\n      scaleDelta = currentScale / window.kan.lastScale;\n    }\n\n    window.kan.lastScale = currentScale;\n\n    var currentRotation = event.rotation;\n    var rotationDelta = currentRotation - window.kan.lastRotation;\n    window.kan.lastRotation = currentRotation;\n\n    // console.log(`scaling by ${scaleDelta}`);\n    // console.log(`rotating by ${rotationDelta}`);\n\n    var centerPoint = event.center;\n    pinchedGroup.position = centerPoint;\n    if (!!$pinchedTut) {\n      tutorial.moveContextualTut($pinchedTut, centerPoint);\n    }\n\n    if (scaleDelta !== 1) {\n      pinchedGroup.scale(scaleDelta);\n\n      // check if scaling went awry, cannot be too big or too small\n      // hypotenuse must fit within view bounds\n      var hypot = util.hypot(pinchedGroup.bounds.width, pinchedGroup.bounds.height);\n      var viewHypot = util.hypot(paper.view.viewSize.width, paper.view.viewSize.height);\n      if (hypot >= viewHypot) {\n        // shape is too big, bring it back down to size\n        scaleDelta = viewHypot * maxScaleFactor / hypot;\n        pinchedGroup.scale(scaleDelta);\n      } else if (hypot <= minShapeSize) {\n        scaleDelta = minShapeSize / hypot;\n        pinchedGroup.scale(scaleDelta);\n      }\n    }\n    pinchedGroup.rotate(rotationDelta);\n\n    pinchedGroup.data.scale *= scaleDelta;\n    pinchedGroup.data.rotation += rotationDelta;\n  }\n}\n\nfunction pinchEnd(event) {\n  console.log('pinchend');\n  // event.preventDefault();\n\n  window.kan.lastEvent = event;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n  var originalPosition = window.kan.originalPosition;\n  var originalRotation = window.kan.originalRotation;\n  var originalScale = window.kan.originalScale;\n\n  if (!!pinchedGroup) {\n    pinchedGroup.data.fresh = true;\n    var move = {\n      id: pinchedGroup.id,\n      type: 'transform'\n    };\n    if (pinchedGroup.position != originalPosition) {\n      move.position = originalPosition;\n    }\n\n    if (pinchedGroup.data.rotation != originalRotation) {\n      move.rotation = originalRotation - pinchedGroup.data.rotation;\n    }\n\n    if (pinchedGroup.data.scale != originalScale) {\n      move.scale = originalScale / pinchedGroup.data.scale;\n    }\n\n    if (pinchedGroup.children.length > 0 && pinchedGroup._namedChildren.shapePath && pinchedGroup._namedChildren.shapePath.length > 0) {\n      // update shapePath sound object if possible\n      sound.removeShapeFromComposition(pinchedGroup); // sound is now wrong\n\n      var shapePath = pinchedGroup._namedChildren.shapePath[0];\n      var shapeSoundObj = sound.getShapeSoundObj(shapePath);\n      window.kan.composition.push(shapeSoundObj);\n    }\n\n    window.kan.moves.push(move);\n\n    if (Math.abs(event.velocity) > 1) {\n      tutorial.hideContextualTutByName('swipe');\n\n      // hide any connected tuts\n      if (!!$pinchedTut) {\n        tutorial.hideContextualTut($pinchedTut);\n      }\n      // dispose of group offscreen\n      if (config.pop === true) {\n        shape.destroyGroupPops(pinchedGroup);\n        pinchedGroup.data.fresh = false;\n      }\n\n      pinchedGroup.data.thrown = true;\n      throwPinchedGroup();\n    }\n\n    // if (config.runAnimations) {\n    //   pinchedGroup.animate({\n    //     properties: {\n    //       scale: 0.8\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n  }\n\n  // if an overlay was interrupted, open it up now\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  window.kan.pinching = false;\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n\n  console.log('pinch done');\n  // hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    console.log('touch enabled');\n    hammerCanvas.on('pinchstart', pinchStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    // hammerCanvas.set({ enable: true });\n    // hammerCanvas.on('pinchstart', pinchStart);\n    // enablePanAndPinchEvents();\n    // enableTapEvents();\n    // window.kan.pinching = false;\n    // window.kan.pinchedGroup = null;\n  }, timing.inputDelay);\n}\n\nfunction pinchCancel(event) {\n  // console.log(event);\n  event.srcEvent.stopPropagation();\n  console.log('pinchcancel');\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('pinchstart', pinchStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n\n  window.kan.pinching = false;\n}\n\nfunction throwPinchedGroup() {\n\n  var velocityMultiplier = 25;\n  var lastEvent = window.kan.lastEvent;\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n\n  if (pinchedGroup === null || pinchedGroup.data && pinchedGroup.data.thrown === false) return;\n  if (pinchedGroup.position.x <= 0 - pinchedGroup.bounds.width || pinchedGroup.position.x >= viewWidth + pinchedGroup.bounds.width || pinchedGroup.position.y <= 0 - pinchedGroup.bounds.height || pinchedGroup.position.y >= viewHeight + pinchedGroup.bounds.height) {\n    pinchedGroup.data.offScreen = true;\n    pinchedGroup.visible = false;\n    sound.removeShapeFromComposition(pinchedGroup);\n    window.kan.pinchedGroup = null;\n    return;\n  }\n  requestAnimationFrame(throwPinchedGroup);\n  var newX = pinchedGroup.position.x + lastEvent.velocityX * velocityMultiplier;\n  var newY = pinchedGroup.position.y + lastEvent.velocityY * velocityMultiplier;\n  var newPos = new Point(newX, newY);\n  pinchedGroup.position = newPos;\n}\n\nfunction eventTargetIsOnCanvas(event) {\n  if (!event) return false;\n  if (event.target != ui.canvas) return false;\n  return true;\n}\n\n},{\"./../../config\":1,\"./color\":4,\"./overlays\":7,\"./shape\":8,\"./sound\":9,\"./timing\":10,\"./tutorial\":12,\"./ui\":13,\"./util\":14,\"hammerjs\":2}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTutByName = getTutByName;\nexports.allTutsCompleted = allTutsCompleted;\nexports.addContextualTut = addContextualTut;\nexports.hideContextualTut = hideContextualTut;\nexports.hideContextualTutByName = hideContextualTutByName;\nexports.hideContextualTuts = hideContextualTuts;\nexports.resetContextualTuts = resetContextualTuts;\nexports.moveContextualTut = moveContextualTut;\nexports.getTutPositionFromCenter = getTutPositionFromCenter;\nvar config = require('./../../config');\n\nvar contextualTuts = config.contextualTuts;\nvar tutArrowHeight = 16;\n\nfunction getTutByName(tutName) {\n  for (var i = 0; i < contextualTuts.length; i++) {\n    var tutObj = contextualTuts[i];\n\n    if (tutObj.type === tutName) {\n      return tutObj.copy;\n    }\n  }\n\n  return null;\n}\n\nfunction allTutsCompleted() {\n  var tutorialCompletionObj = window.kan.tutorialCompletion;\n  var completion = true;\n\n  Object.keys(tutorialCompletionObj).forEach(function (key, val) {\n    completion = completion && tutorialCompletionObj[key];\n  });\n\n  return completion === true;\n}\n\nfunction addContextualTut(tutName) {\n  if (!!window.kan.shapePath && window.kan.shapePath.length > 0) {\n    hideContextualTuts();\n    window.kan.shapesSinceTut = 0;\n\n    var shapePath = window.kan.shapePath;\n    var shapeCenter = shapePath.bounds.center;\n\n    var tutCopy = getTutByName(tutName);\n\n    if (tutCopy !== null) {\n      var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n      if ($tut.length > 0) {\n        var tutPos = getTutPositionFromCenter($tut, shapeCenter);\n        $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px', visibility: 'visible' });\n        $tut.addClass('animated bounceIn');\n      }\n    }\n  }\n}\n\nfunction hideContextualTut($tut) {\n  $tut.css({ visibility: 'hidden' });\n}\n\nfunction hideContextualTutByName(tutName) {\n  var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n  hideContextualTut($tut);\n}\n\nfunction hideContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.css({ visibility: 'hidden' });\n}\n\nfunction resetContextualTuts() {\n  hideContextualTuts();\n  window.kan.tutorialCompletion = {\n    \"fill\": false,\n    \"pinch\": false,\n    \"swipe\": false\n  };\n}\n\nfunction moveContextualTut($tut, centerPoint) {\n  var tutPos = getTutPositionFromCenter($tut, centerPoint);\n  $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px' });\n}\n\nfunction getTutPositionFromCenter($tut, centerPoint) {\n  var tutWidth = $tut.outerWidth();\n  var tutHeight = $tut.outerHeight();\n  var leftPos = centerPoint.x - tutWidth / 2;\n  var topPos = centerPoint.y - tutHeight - tutArrowHeight;\n  return new Point(leftPos, topPos);\n}\n\n},{\"./../../config\":1}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.ditherButtonsByName = ditherButtonsByName;\nexports.unditherButtonsByName = unditherButtonsByName;\nexports.ditherButtonByName = ditherButtonByName;\nexports.unditherButtonByName = unditherButtonByName;\nexports.resetCanvas = resetCanvas;\nvar config = require('./../../config');\n\nvar sound = require('./sound');\nvar tutorial = require('./tutorial');\nvar overlays = require('./overlays');\nvar util = require('./util');\nvar color = require('./color');\nvar shape = require('./shape');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar playingClass = sound.playingClass;\nvar playEnabledClass = sound.playEnabledClass;\n\nvar $newButton = $('.controls .new');\nvar $undoButton = $('.controls .undo');\nvar $playButton = $('.controls .play-stop');\nvar $shareButton = $('.controls .share');\nvar $tipsButton = $('.controls .tips');\n\nvar canvas = exports.canvas = $('#canvas')[0];\nvar tipsOverlay = exports.tipsOverlay = $('.overlay.tips')[0];\n\nvar ditheredClass = 'dithered';\n\nfunction init() {\n  initLogoRefresh();\n  initColorPalette();\n  initNewButton();\n  initUndoButton();\n  initPlayButton();\n  initTipsButton();\n  initShareButton();\n  initContextualTuts();\n  resetCanvas();\n}\n\nfunction unditherAllButtons() {\n  $('.controls .' + ditheredClass).removeClass(ditheredClass);\n}\n\nfunction ditherButtonsByName(buttonNames) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (buttonNames.length > 0) {\n    if ($.isArray(buttonNames)) {\n      buttonNames.forEach(function (name) {\n        return ditherButtonByName(name, undither);\n      });\n    } else {\n      ditherButtonByName(buttonNames, undither);\n    }\n  }\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction ditherButtonByName(buttonName) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var $button = $('.controls .' + buttonName);\n  // console.log($button);\n  if ($button.length > 0) {\n    if (undither !== true) {\n      $button.addClass(ditheredClass);\n    } else {\n      $button.removeClass(ditheredClass);\n    }\n  }\n}\n\nfunction unditherButtonByName(buttonName) {\n  ditherButtonByName(buttonName, true);\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction newPressed() {\n  console.log('new pressed');\n  window.kan.composition = [];\n  paper.project.activeLayer.removeChildren();\n  tutorial.hideContextualTuts();\n  ditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n  sound.stopPlaying();\n  // window.kan.userHasDrawnFirstShape = false;\n  // tutorial.resetContextualTuts();\n}\n\nfunction undoPressed() {\n  sound.stopPlaying();\n  tutorial.hideContextualTuts();\n\n  var transparent = new Color(0, 0);\n  console.log('undo pressed');\n  if (!(window.kan.moves.length > 0)) {\n    console.log('no moves yet');\n    window.kan.userHasDrawnFirstShape = false;\n    return;\n  }\n\n  var lastMove = window.kan.moves.pop();\n  var item = project.getItem({\n    id: lastMove.id\n  });\n\n  if (item) {\n    item.visible = true; // make sure\n    switch (lastMove.type) {\n      case 'newGroup':\n        // console.log('removing group');\n        sound.removeShapeFromComposition(item);\n        item.remove();\n\n        var numGroups = util.getNumGroups();\n        // console.log('numGroups', numGroups);\n\n        if (numGroups <= 0) {\n          ditherButtonsByName(['undo', 'new']);\n        }\n\n        if (numGroups < 3) {\n          ditherButtonsByName(['play-stop', 'share']);\n          $body.removeClass(sound.playEnabledClass);\n        } else {\n          unditherButtonsByName(['play-stop', 'share']);\n          $body.addClass(sound.playEnabledClass);\n        }\n        break;\n      case 'fillChange':\n        if (lastMove.transparent) {\n          item.fillColor = lastMove.fill;\n          item.strokeColor = lastMove.fill;\n        } else {\n          item.fillColor = transparent;\n          item.strokeColor = transparent;\n        }\n      case 'transform':\n        item.data.fresh = true;\n        if (!!lastMove.position) {\n          item.position = lastMove.position;\n          if (item.data && item.data.tut && item.data.tut.length > 0) {\n            // item has connected contextual tut, move it to the right place\n            var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n            tutorial.moveContextualTut($tut, lastMove.position);\n          }\n        }\n        if (!!lastMove.rotation) {\n          item.rotation = lastMove.rotation;\n        }\n        if (!!lastMove.scale) {\n          item.scale(lastMove.scale);\n        }\n        if (config.pop === true) {\n          shape.updatePops();\n        }\n        break;\n      default:\n      // console.log('unknown case');\n    }\n  } else {\n      // console.log('could not find matching item');\n    }\n}\n\nfunction playPressed() {\n  console.log('play pressed');\n  // sound.stopComposition();\n  // overlays.closeAndResetOverlays();\n  // tutorial.hideContextualTuts();\n  var playing = window.kan.playing;\n  // console.log(playing, util.getNumGroups() > 2, !playing && util.getNumGroups() > 2, $body);\n\n  clearTimeout(window.kan.playPromptTimeout);\n  if (!playing && util.getNumGroups() > 2) {\n    console.log('starting playing');\n    sound.startPlaying();\n  } else {\n    console.log('stopping playing');\n    sound.stopPlaying(true);\n  }\n}\n\nfunction tipsPressed() {\n  sound.stopPlaying();\n  overlays.openOverlay('tips');\n  console.log('tips pressed');\n}\n\nfunction sharePressed() {\n  console.log('share pressed');\n  sound.stopPlaying();\n  if ($body.hasClass(sound.playEnabledClass)) {\n    overlays.openOverlay('share');\n  }\n}\n\nfunction initLogoRefresh() {\n  $('.main-logo').on(tapEvent, function () {\n    location.reload();\n  });\n}\n\nfunction initColorPalette() {\n  var $paletteWrap = $('ul.palette-colors');\n  var $paletteColors = $paletteWrap.find('li');\n  var paletteColorSize = 20;\n  var paletteSelectedColorSize = 30;\n  var paletteSelectedClass = 'palette-selected';\n\n  // hook up click\n  $paletteColors.on('click tap touch', function () {\n    if (!$body.hasClass(playingClass)) {\n      var $svg = $(this).find('svg.palette-color');\n\n      if (!$svg.hasClass(paletteSelectedClass)) {\n        $('.' + paletteSelectedClass).removeClass(paletteSelectedClass).attr('width', paletteColorSize).attr('height', paletteColorSize).find('rect').attr('rx', 0).attr('ry', 0);\n\n        $svg.addClass(paletteSelectedClass).attr('width', paletteSelectedColorSize).attr('height', paletteSelectedColorSize).find('rect').attr('rx', paletteSelectedColorSize / 2).attr('ry', paletteSelectedColorSize / 2);\n\n        window.kan.currentColor = $svg.find('rect').attr('fill');\n        // console.log('%ccolor', 'color:red', color.getColorName(window.kan.currentColor));\n      }\n    };\n  });\n}\n\nfunction initNewButton() {\n  $('.main-controls .new').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      newPressed();\n    }\n  });\n}\n\nfunction initUndoButton() {\n  $('.main-controls .undo').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      undoPressed();\n    }\n  });\n}\n\nfunction initPlayButton() {\n  $('.main-controls .play-stop .play').on(tapEvent, sound.startPlaying);\n  $('.main-controls .play-stop .stop').on(tapEvent, sound.stopPlaying);\n}\n\nfunction initTipsButton() {\n  $('.controls .tips').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      tipsPressed();\n    }\n  });\n}\n\nfunction initShareButton() {\n  $('.controls .share').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      sharePressed();\n    }\n  });\n}\n\nfunction initContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.on(tapEvent, function () {\n    $(this).css({ visibility: 'hidden' });\n  });\n}\n\nfunction resetCanvas() {\n  paper.project.clear();\n\n  // add random background\n  paper.project.activeLayer.name = 'background';\n  var numCanvasses = 10;\n  var randomCanvasIndex = Math.round(Math.random() * (numCanvasses - 1)) + 1; // [1, numCanvasses]\n  var canvasBg = new Raster('canvas-' + randomCanvasIndex);\n  canvasBg.name = 'canvasBg';\n  canvasBg.position = paper.view.center;\n\n  // add canvas layer\n  var scaleFactorHorizontal = paper.view.viewSize.width / canvasBg.size.width;\n  var scaleFactorVertical = paper.view.viewSize.height / canvasBg.size.height;\n  canvasBg.scale(Math.max(scaleFactorHorizontal, scaleFactorVertical));\n  var layer = new Layer(); // init new layer that all other shapes will be drawn upon\n  paper.project.activeLayer.name = 'canvas';\n}\n\n},{\"./../../config\":1,\"./color\":4,\"./overlays\":7,\"./shape\":8,\"./sound\":9,\"./tutorial\":12,\"./util\":14}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rad = rad;\nexports.deg = deg;\nexports.hypot = hypot;\nexports.angleDelta = angleDelta;\nexports.delta = delta;\nexports.getTime = getTime;\nexports.getAllGroups = getAllGroups;\nexports.anyShapesOnCanvas = anyShapesOnCanvas;\nexports.getNumGroups = getNumGroups;\nexports.getFreshGroups = getFreshGroups;\nexports.getAllPops = getAllPops;\nexports.clearGroupPops = clearGroupPops;\nexports.getGroupPops = getGroupPops;\nexports.getPopCandidates = getPopCandidates;\nexports.setSha = setSha;\nexports.shallowCopy = shallowCopy;\nvar config = require('./../../config');\n\n// Converts from degrees to radians.\nfunction rad(degrees) {\n  return degrees * Math.PI / 180;\n};\n\n// Converts from radians to degrees.\nfunction deg(radians) {\n  return radians * 180 / Math.PI;\n};\n\nfunction hypot(a, b) {\n  return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2)); // pythagorean!\n}\n\n// returns absolute value of the delta of two angles in radians\nfunction angleDelta(x, y) {\n  return Math.abs(Math.atan2(Math.sin(y - x), Math.cos(y - x)));;\n}\n\n// distance between two points\nfunction delta(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)); // pythagorean!\n}\n\nfunction getTime() {\n  return new Date().toLocaleTimeString();\n}\n\nfunction getAllGroups() {\n  return paper.project.getItems({\n    className: 'Group'\n  });\n}\n\nfunction anyShapesOnCanvas() {\n  var groups = getAllGroups();\n  return groups.length > 0;\n}\n\nfunction getNumGroups() {\n  var groups = getAllGroups();\n  // console.log('numgroups', groups.length);\n  return groups.length;\n}\n\nfunction getFreshGroups() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false && el.data.fresh === true;\n    }\n  });\n}\n\nfunction getAllPops() {\n  return paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true;\n    }\n  });\n}\n\nfunction clearGroupPops(group) {\n  var pops = getGroupPops(group);\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction getGroupPops(group) {\n  console.log('group pop group', group.id, group);\n  var returnPops = [];\n\n  if (group.children.length > 0) {\n    var groupPops = group.getItems({\n      match: function match(el) {\n        return el.data && el.data.pop === true;\n      }\n    });\n    returnPops = returnPops.concat(groupPops);\n  }\n\n  var intersectingPops = paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true && el.data.intersectingGroup === group.id;\n    }\n  });\n\n  if (intersectingPops.length > 0) {\n    returnPops = returnPops.concat(intersectingPops);\n  }\n\n  return returnPops;\n}\n\nfunction getPopCandidates() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false;\n    }\n  });\n}\n\nfunction setSha() {\n  $.get('/hash').done(function (res) {\n    console.log('current hash:', res);\n    window.kan.hash = res;\n  }).fail(function (e) {\n    console.error('error getting hash:', e);\n  });\n}\n\n// http://blog.soulserv.net/understanding-object-cloning-in-javascript-part-i/\nfunction shallowCopy(original) {\n  // First create an empty object with\n  // same prototype of our original source\n  var clone = Object.create(Object.getPrototypeOf(original));\n\n  var i,\n      keys = Object.getOwnPropertyNames(original);\n\n  for (i = 0; i < keys.length; i++) {\n    // copy each property into the clone\n    Object.defineProperty(clone, keys[i], Object.getOwnPropertyDescriptor(original, keys[i]));\n  }\n\n  return clone;\n}\n\n},{\"./../../config\":1}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enterTutorialMode = enterTutorialMode;\nexports.exitTutorialMode = exitTutorialMode;\nexports.pauseVideo = pauseVideo;\nexports.playVideo = playVideo;\nvar config = require('./../../config');\n\nvar main = require('./main');\nvar overlays = require('./overlays');\nvar timing = require('./timing');\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar videoPlayingClass = exports.videoPlayingClass = 'video-playing';\n\nvar $videoWrapper = $body.find('#video-wrap');\nvar $video = $videoWrapper.find('video');\n\nfunction enterTutorialMode() {\n  console.log('entering tutorial mode');\n  playVideo();\n  $body.addClass(videoPlayingClass);\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n  $body.off(tapEvent, timing.preventInactivityTimeout);\n  $body.on(tapEvent, exitTutorialMode);\n  main.resetWindow();\n  ui.resetCanvas();\n  window.kan.refreshCheckInterval = setInterval(function () {\n    $.get('/hash').done(function (res) {\n      if (res !== window.kan.hash) {\n        console.log('different hash, reloading');\n        location.reload();\n      }\n    }).fail(function (e) {\n      console.error('error getting hash:', e);\n    });\n  }, timing.refreshCheckDelay);\n}\n\nfunction exitTutorialMode() {\n  console.log('exiting tutorial mode');\n  sound.reinitShapeSounds().then(function () {\n    clearInterval(window.kan.refreshCheckInterval);\n    Howler.mute(false);\n    pauseVideo();\n    $body.off(tapEvent, exitTutorialMode);\n    $body.on(tapEvent, timing.preventInactivityTimeout);\n    $body.removeClass(videoPlayingClass);\n    clearTimeout(window.kan.inactivityTimeout);\n    clearInterval(window.kan.continueCountdownInterval);\n\n    overlays.openOverlay('intro');\n\n    window.kan.inactivityTimeout = setTimeout(function () {\n      overlays.openOverlay('continue');\n    }, timing.continueInactivityDelay);\n  }).fail(function (e) {\n    console.error('error initting shape sounds:', e);\n    location.reload();\n  });\n}\n\nfunction pauseVideo() {\n  $video.get(0).pause();\n}\n\nfunction playVideo() {\n  $video.get(0).play();\n}\n\n},{\"./../../config\":1,\"./main\":6,\"./overlays\":7,\"./sound\":9,\"./timing\":10,\"./ui\":13}]},{},[6])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25maWcuanMiLCJub2RlX21vZHVsZXMvaGFtbWVyanMvaGFtbWVyLmpzIiwibm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsInNyYy9qcy9jb2xvci5qcyIsInNyYy9qcy9saWIvc2hhcGUtZGV0ZWN0b3IuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9vdmVybGF5cy5qcyIsInNyYy9qcy9zaGFwZS5qcyIsInNyYy9qcy9zb3VuZC5qcyIsInNyYy9qcy90aW1pbmcuanMiLCJzcmMvanMvdG91Y2guanMiLCJzcmMvanMvdHV0b3JpYWwuanMiLCJzcmMvanMvdWkuanMiLCJzcmMvanMvdXRpbC5qcyIsInNyYy9qcy92aWRlby5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsUUFBUSxhQUFSLEdBQXdCLEtBQXhCO0FBQ0EsUUFBUSxHQUFSLEdBQWMsSUFBZDtBQUNBLFFBQVEsUUFBUixHQUFtQixRQUFuQjs7QUFFQSxRQUFRLE9BQVIsR0FBa0I7QUFDaEIsVUFBUSxDQUFDLFNBQUQsRUFBWSxTQUFaLEVBQXVCLFNBQXZCLEVBQWtDLFNBQWxDLEVBQTZDLFNBQTdDLEVBQXdELFNBQXhELEVBQW1FLFNBQW5FLEVBQThFLFNBQTlFLEVBQXlGLFNBQXpGLEVBQW9HLFNBQXBHLEVBQStHLFNBQS9HLEVBQXlILFNBQXpILENBRFE7QUFFaEIsY0FBWTtBQUNWLGVBQVcsT0FERDtBQUVWLGVBQVcsTUFGRDtBQUdWLGVBQVcsTUFIRDtBQUlWLGVBQVcsTUFKRDtBQUtWLGVBQVcsS0FMRDtBQU1WLGVBQVcsS0FORDtBQU9WLGVBQVcsUUFQRDtBQVFWLGVBQVcsT0FSRDtBQVNWLGVBQVcsT0FURDtBQVVWLGVBQVcsUUFWRDtBQVdWLGVBQVcsT0FYRDtBQVlWLGVBQVc7QUFaRCxHQUZJO0FBZ0JoQixhQUFXO0FBQ1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBREY7QUFFVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FGRjtBQUdULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQUhGO0FBSVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBSkY7QUFLVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FMRjtBQU1ULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQU5GO0FBT1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBUEY7QUFRVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FSRjtBQVNULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVRGO0FBVVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBVkY7QUFXVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FYRjtBQVlULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWjtBQVpGLEdBaEJLO0FBOEJoQixRQUFNLENBQUMsU0FBRCxFQUFZLFNBQVosRUFBdUIsU0FBdkIsRUFBa0MsU0FBbEMsRUFBNkMsU0FBN0MsQ0E5QlU7QUErQmhCLGFBQVcsRUEvQks7QUFnQ2hCLHFCQUFtQjtBQWhDSCxDQUFsQjs7QUFtQ0EsUUFBUSxjQUFSLEdBQXlCLENBQ3ZCO0FBQ0UsUUFBTSxNQURSO0FBRUUsUUFBTTtBQUZSLENBRHVCLEVBS3ZCO0FBQ0UsUUFBTSxPQURSO0FBRUUsUUFBTTtBQUZSLENBTHVCLEVBU3ZCO0FBQ0UsUUFBTSxPQURSO0FBRUUsUUFBTTtBQUZSLENBVHVCLENBQXpCOzs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25sRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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RUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBekMsRUFBNkQsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBN0QsRUFBaUYsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBakYsRUFBcUcsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBckcsRUFBeUgsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBekgsRUFBNkksRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBN0ksRUFBaUssRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBakssRUFBcUwsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBckwsRUFBeU0sRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBek0sRUFBNk4sRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBN04sRUFBaVAsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBalAsRUFBcVEsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBclEsRUFBeVIsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBelIsRUFBNlMsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBN1MsRUFBaVUsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBalUsRUFBcVYsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBclYsRUFBeVcsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBelcsRUFBNlgsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBN1gsRUFBaVosRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBalosRUFBcWEsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBcmEsRUFBeWIsRUFBQyxLQUFLLEdBQU4sRUFBVSxLQUFLLEdBQWYsRUFBemIsRUFBNmMsRUFBQyxLQUFLLEdBQU4sRUFB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QyxJQWpCRCxDQWlCTSxVQUFDLENBQUQsRUFBTztBQUNYLFlBQVEsS0FBUixDQUFjLDhCQUFkLEVBQThDLENBQTlDO0FBQ0EsYUFBUyxNQUFUO0FBQ0QsR0FwQkQ7QUFxQkQ7O0FBRU0sU0FBUyxVQUFULEdBQXNCO0FBQzNCLFNBQU8sR0FBUCxDQUFXLENBQVgsRUFBYyxLQUFkO0FBQ0Q7O0FBRU0sU0FBUyxTQUFULEdBQXFCO0FBQzFCLFNBQU8sR0FBUCxDQUFXLENBQVgsRUFBYyxJQUFkO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0cy5ydW5BbmltYXRpb25zID0gZmFsc2U7XG5leHBvcnRzLnBvcCA9IHRydWU7XG5leHBvcnRzLmNhbnZhc0lkID0gJ2NhbnZhcyc7XG5cbmV4cG9ydHMucGFsZXR0ZSA9IHtcbiAgY29sb3JzOiBbXCIjMjAxNzFDXCIsIFwiIzFFMkE0M1wiLCBcIiMyODM3N0RcIiwgXCIjMzUyNzQ3XCIsIFwiI0NBMkUyNlwiLCBcIiM5QTJBMUZcIiwgXCIjREE2QzI2XCIsIFwiIzQ1MzEyMVwiLCBcIiM5MTZBNDdcIiwgXCIjREFBRDI3XCIsIFwiIzdGN0QzMVwiLFwiIzJCNUUyRVwiXSxcbiAgY29sb3JOYW1lczoge1xuICAgIFwiIzIwMTcxQ1wiOiBcImJsYWNrXCIsXG4gICAgXCIjMUUyQTQzXCI6IFwiYmx1ZVwiLFxuICAgIFwiIzI4Mzc3RFwiOiBcImJsdWVcIixcbiAgICBcIiMzNTI3NDdcIjogXCJibHVlXCIsXG4gICAgXCIjQ0EyRTI2XCI6IFwicmVkXCIsXG4gICAgXCIjOUEyQTFGXCI6IFwicmVkXCIsXG4gICAgXCIjREE2QzI2XCI6IFwib3JhbmdlXCIsXG4gICAgXCIjNDUzMTIxXCI6IFwiYnJvd25cIixcbiAgICBcIiM5MTZBNDdcIjogXCJicm93blwiLFxuICAgIFwiI0RBQUQyN1wiOiBcIm9yYW5nZVwiLFxuICAgIFwiIzdGN0QzMVwiOiBcImdyZWVuXCIsXG4gICAgXCIjMkI1RTJFXCI6IFwiZ3JlZW5cIlxuICB9LFxuICBncmFkaWVudHM6IHtcbiAgICAnIzIwMTcxQyc6IFsnIzIwMTcxQycsICcjMDAwMDAwJ10sXG4gICAgJyMxRTJBNDMnOiBbJyMxRTJBNDMnLCAnIzI2MzE2NiddLFxuICAgICcjMjgzNzdEJzogWycjMjgzNzdEJywgJyMxRTQ2OTUnXSxcbiAgICAnIzM1Mjc0Nyc6IFsnIzM1Mjc0NycsICcjNDUwMDVCJ10sXG4gICAgJyNDQTJFMjYnOiBbJyNDQTJFMjYnLCAnIzlCMzUyRiddLFxuICAgICcjOUEyQTFGJzogWycjOUEyQTFGJywgJyNDRDM2MjEnXSxcbiAgICAnI0RBNkMyNic6IFsnI0RBNkMyNicsICcjQkQ0ODIwJ10sXG4gICAgJyM0NTMxMjEnOiBbJyM0NTMxMjEnLCAnIzI4MTgwNiddLFxuICAgICcjOTE2QTQ3JzogWycjOTE2QTQ3JywgJyM2MjNBMjInXSxcbiAgICAnI0RBQUQyNyc6IFsnI0RBQUQyNycsICcjQUY4NzFEJ10sXG4gICAgJyM3RjdEMzEnOiBbJyM3RjdEMzEnLCAnIzU1NTgyNyddLFxuICAgICcjMkI1RTJFJzogWycjMkI1RTJFJywgJyMxNjQ1MUQnXSxcbiAgfSxcbiAgcG9wczogW1wiIzAwQURFRlwiLCBcIiNGMjg1QTVcIiwgXCIjN0RDNTdGXCIsIFwiI0Y2RUIxNlwiLCBcIiNGNEVBRTBcIl0sXG4gIGNvbG9yU2l6ZTogMjAsXG4gIHNlbGVjdGVkQ29sb3JTaXplOiAzMFxufTtcblxuZXhwb3J0cy5jb250ZXh0dWFsVHV0cyA9IFtcbiAge1xuICAgIHR5cGU6IFwiZmlsbFwiLFxuICAgIGNvcHk6IFwiPHN0cm9uZz5Eb3VibGUtdGFwPC9zdHJvbmc+IGEgZmlsbGVkIHNoYXBlIHRvIDxzdHJvbmc+VU5GSUxMPC9zdHJvbmc+IGl0LiBSZXBlYXQgdG8gPHN0cm9uZz5GSUxMPC9zdHJvbmc+IGFuIHVuZmlsbGVkIHNoYXBlLlwiLFxuICB9LFxuICB7XG4gICAgdHlwZTogXCJwaW5jaFwiLFxuICAgIGNvcHk6IFwiPHN0cm9uZz5QaW5jaDwvc3Ryb25nPiBzaGFwZXMgd2l0aCA8c3Ryb25nPlRXTyBGSU5HRVJTPC9zdHJvbmc+IHRvIDxzdHJvbmc+cmVzaXplPC9zdHJvbmc+IGFuZCA8c3Ryb25nPm1vdmU8L3N0cm9uZz4gdGhlbS5cIixcbiAgfSxcbiAge1xuICAgIHR5cGU6IFwic3dpcGVcIixcbiAgICBjb3B5OiBcIlRvIDxzdHJvbmc+cmVtb3ZlPC9zdHJvbmc+IHNoYXBlcywgPHN0cm9uZz5waW5jaDwvc3Ryb25nPiB3aXRoIDxzdHJvbmc+dHdvIGZpbmdlcnM8L3N0cm9uZz4gdGhlbiA8c3Ryb25nPnN3aXBlPC9zdHJvbmc+IG9yIGhpdCA8c3Ryb25nPnVuZG88L3N0cm9uZz4uXCJcbiAgfSxcbl07XG4iLCIvKiEgSGFtbWVyLkpTIC0gdjIuMC43IC0gMjAxNi0wNC0yMlxuICogaHR0cDovL2hhbW1lcmpzLmdpdGh1Yi5pby9cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgSm9yaWsgVGFuZ2VsZGVyO1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgZXhwb3J0TmFtZSwgdW5kZWZpbmVkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxudmFyIFZFTkRPUl9QUkVGSVhFUyA9IFsnJywgJ3dlYmtpdCcsICdNb3onLCAnTVMnLCAnbXMnLCAnbyddO1xudmFyIFRFU1RfRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG52YXIgVFlQRV9GVU5DVElPTiA9ICdmdW5jdGlvbic7XG5cbnZhciByb3VuZCA9IE1hdGgucm91bmQ7XG52YXIgYWJzID0gTWF0aC5hYnM7XG52YXIgbm93ID0gRGF0ZS5ub3c7XG5cbi8qKlxuICogc2V0IGEgdGltZW91dCB3aXRoIGEgZ2l2ZW4gc2NvcGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dFxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIHNldFRpbWVvdXRDb250ZXh0KGZuLCB0aW1lb3V0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoYmluZEZuKGZuLCBjb250ZXh0KSwgdGltZW91dCk7XG59XG5cbi8qKlxuICogaWYgdGhlIGFyZ3VtZW50IGlzIGFuIGFycmF5LCB3ZSB3YW50IHRvIGV4ZWN1dGUgdGhlIGZuIG9uIGVhY2ggZW50cnlcbiAqIGlmIGl0IGFpbnQgYW4gYXJyYXkgd2UgZG9uJ3Qgd2FudCB0byBkbyBhIHRoaW5nLlxuICogdGhpcyBpcyB1c2VkIGJ5IGFsbCB0aGUgbWV0aG9kcyB0aGF0IGFjY2VwdCBhIHNpbmdsZSBhbmQgYXJyYXkgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp8QXJyYXl9IGFyZ1xuICogQHBhcmFtIHtTdHJpbmd9IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHRdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaW52b2tlQXJyYXlBcmcoYXJnLCBmbiwgY29udGV4dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcbiAgICAgICAgZWFjaChhcmcsIGNvbnRleHRbZm5dLCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiB3YWxrIG9iamVjdHMgYW5kIGFycmF5c1xuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIHZhciBpO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvYmouZm9yRWFjaCkge1xuICAgICAgICBvYmouZm9yRWFjaChpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICAgICAgICBvYmouaGFzT3duUHJvcGVydHkoaSkgJiYgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogd3JhcCBhIG1ldGhvZCB3aXRoIGEgZGVwcmVjYXRpb24gd2FybmluZyBhbmQgc3RhY2sgdHJhY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIHRoZSBzdXBwbGllZCBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uIGRlcHJlY2F0ZShtZXRob2QsIG5hbWUsIG1lc3NhZ2UpIHtcbiAgICB2YXIgZGVwcmVjYXRpb25NZXNzYWdlID0gJ0RFUFJFQ0FURUQgTUVUSE9EOiAnICsgbmFtZSArICdcXG4nICsgbWVzc2FnZSArICcgQVQgXFxuJztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKCdnZXQtc3RhY2stdHJhY2UnKTtcbiAgICAgICAgdmFyIHN0YWNrID0gZSAmJiBlLnN0YWNrID8gZS5zdGFjay5yZXBsYWNlKC9eW15cXChdKz9bXFxuJF0vZ20sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL15cXHMrYXRcXHMrL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eT2JqZWN0Ljxhbm9ueW1vdXM+XFxzKlxcKC9nbSwgJ3thbm9ueW1vdXN9KClAJykgOiAnVW5rbm93biBTdGFjayBUcmFjZSc7XG5cbiAgICAgICAgdmFyIGxvZyA9IHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS53YXJuIHx8IHdpbmRvdy5jb25zb2xlLmxvZyk7XG4gICAgICAgIGlmIChsb2cpIHtcbiAgICAgICAgICAgIGxvZy5jYWxsKHdpbmRvdy5jb25zb2xlLCBkZXByZWNhdGlvbk1lc3NhZ2UsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBleHRlbmQgb2JqZWN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIGluIGRlc3Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgb25lcyBpbiBzcmMuXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gb2JqZWN0c190b19hc3NpZ25cbiAqIEByZXR1cm5zIHtPYmplY3R9IHRhcmdldFxuICovXG52YXIgYXNzaWduO1xuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59IGVsc2Uge1xuICAgIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW21lcmdlPWZhbHNlXVxuICogQHJldHVybnMge09iamVjdH0gZGVzdFxuICovXG52YXIgZXh0ZW5kID0gZGVwcmVjYXRlKGZ1bmN0aW9uIGV4dGVuZChkZXN0LCBzcmMsIG1lcmdlKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzcmMpO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGtleXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghbWVyZ2UgfHwgKG1lcmdlICYmIGRlc3Rba2V5c1tpXV0gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIGRlc3Rba2V5c1tpXV0gPSBzcmNba2V5c1tpXV07XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn0sICdleHRlbmQnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIG1lcmdlIHRoZSB2YWx1ZXMgZnJvbSBzcmMgaW4gdGhlIGRlc3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgdGhhdCBleGlzdCBpbiBkZXN0IHdpbGwgbm90IGJlIG92ZXJ3cml0dGVuIGJ5IHNyY1xuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIG1lcmdlID0gZGVwcmVjYXRlKGZ1bmN0aW9uIG1lcmdlKGRlc3QsIHNyYykge1xuICAgIHJldHVybiBleHRlbmQoZGVzdCwgc3JjLCB0cnVlKTtcbn0sICdtZXJnZScsICdVc2UgYGFzc2lnbmAuJyk7XG5cbi8qKlxuICogc2ltcGxlIGNsYXNzIGluaGVyaXRhbmNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaGlsZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gYmFzZVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuICovXG5mdW5jdGlvbiBpbmhlcml0KGNoaWxkLCBiYXNlLCBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGJhc2VQID0gYmFzZS5wcm90b3R5cGUsXG4gICAgICAgIGNoaWxkUDtcblxuICAgIGNoaWxkUCA9IGNoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZVApO1xuICAgIGNoaWxkUC5jb25zdHJ1Y3RvciA9IGNoaWxkO1xuICAgIGNoaWxkUC5fc3VwZXIgPSBiYXNlUDtcblxuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGFzc2lnbihjaGlsZFAsIHByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBzaW1wbGUgZnVuY3Rpb24gYmluZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGJpbmRGbihmbiwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBib3VuZEZuKCkge1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIGxldCBhIGJvb2xlYW4gdmFsdWUgYWxzbyBiZSBhIGZ1bmN0aW9uIHRoYXQgbXVzdCByZXR1cm4gYSBib29sZWFuXG4gKiB0aGlzIGZpcnN0IGl0ZW0gaW4gYXJncyB3aWxsIGJlIHVzZWQgYXMgdGhlIGNvbnRleHRcbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gdmFsXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJnc11cbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBib29sT3JGbih2YWwsIGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PSBUWVBFX0ZVTkNUSU9OKSB7XG4gICAgICAgIHJldHVybiB2YWwuYXBwbHkoYXJncyA/IGFyZ3NbMF0gfHwgdW5kZWZpbmVkIDogdW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiB1c2UgdGhlIHZhbDIgd2hlbiB2YWwxIGlzIHVuZGVmaW5lZFxuICogQHBhcmFtIHsqfSB2YWwxXG4gKiBAcGFyYW0geyp9IHZhbDJcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBpZlVuZGVmaW5lZCh2YWwxLCB2YWwyKSB7XG4gICAgcmV0dXJuICh2YWwxID09PSB1bmRlZmluZWQpID8gdmFsMiA6IHZhbDE7XG59XG5cbi8qKlxuICogYWRkRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICovXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG4gICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIHJlbW92ZUV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgbm9kZSBpcyBpbiB0aGUgZ2l2ZW4gcGFyZW50XG4gKiBAbWV0aG9kIGhhc1BhcmVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50XG4gKiBAcmV0dXJuIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBoYXNQYXJlbnQobm9kZSwgcGFyZW50KSB7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogc21hbGwgaW5kZXhPZiB3cmFwcGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmluZFxuICogQHJldHVybnMge0Jvb2xlYW59IGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGluU3RyKHN0ciwgZmluZCkge1xuICAgIHJldHVybiBzdHIuaW5kZXhPZihmaW5kKSA+IC0xO1xufVxuXG4vKipcbiAqIHNwbGl0IHN0cmluZyBvbiB3aGl0ZXNwYWNlXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7QXJyYXl9IHdvcmRzXG4gKi9cbmZ1bmN0aW9uIHNwbGl0U3RyKHN0cikge1xuICAgIHJldHVybiBzdHIudHJpbSgpLnNwbGl0KC9cXHMrL2cpO1xufVxuXG4vKipcbiAqIGZpbmQgaWYgYSBhcnJheSBjb250YWlucyB0aGUgb2JqZWN0IHVzaW5nIGluZGV4T2Ygb3IgYSBzaW1wbGUgcG9seUZpbGxcbiAqIEBwYXJhbSB7QXJyYXl9IHNyY1xuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbZmluZEJ5S2V5XVxuICogQHJldHVybiB7Qm9vbGVhbnxOdW1iZXJ9IGZhbHNlIHdoZW4gbm90IGZvdW5kLCBvciB0aGUgaW5kZXhcbiAqL1xuZnVuY3Rpb24gaW5BcnJheShzcmMsIGZpbmQsIGZpbmRCeUtleSkge1xuICAgIGlmIChzcmMuaW5kZXhPZiAmJiAhZmluZEJ5S2V5KSB7XG4gICAgICAgIHJldHVybiBzcmMuaW5kZXhPZihmaW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKChmaW5kQnlLZXkgJiYgc3JjW2ldW2ZpbmRCeUtleV0gPT0gZmluZCkgfHwgKCFmaW5kQnlLZXkgJiYgc3JjW2ldID09PSBmaW5kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG59XG5cbi8qKlxuICogY29udmVydCBhcnJheS1saWtlIG9iamVjdHMgdG8gcmVhbCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwob2JqLCAwKTtcbn1cblxuLyoqXG4gKiB1bmlxdWUgYXJyYXkgd2l0aCBvYmplY3RzIGJhc2VkIG9uIGEga2V5IChsaWtlICdpZCcpIG9yIGp1c3QgYnkgdGhlIGFycmF5J3MgdmFsdWVcbiAqIEBwYXJhbSB7QXJyYXl9IHNyYyBbe2lkOjF9LHtpZDoyfSx7aWQ6MX1dXG4gKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NvcnQ9RmFsc2VdXG4gKiBAcmV0dXJucyB7QXJyYXl9IFt7aWQ6MX0se2lkOjJ9XVxuICovXG5mdW5jdGlvbiB1bmlxdWVBcnJheShzcmMsIGtleSwgc29ydCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhciBpID0gMDtcblxuICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsID0ga2V5ID8gc3JjW2ldW2tleV0gOiBzcmNbaV07XG4gICAgICAgIGlmIChpbkFycmF5KHZhbHVlcywgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChzcmNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpXSA9IHZhbDtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIGlmIChzb3J0KSB7XG4gICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KGZ1bmN0aW9uIHNvcnRVbmlxdWVBcnJheShhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFba2V5XSA+IGJba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbi8qKlxuICogZ2V0IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcmV0dXJucyB7U3RyaW5nfFVuZGVmaW5lZH0gcHJlZml4ZWRcbiAqL1xuZnVuY3Rpb24gcHJlZml4ZWQob2JqLCBwcm9wZXJ0eSkge1xuICAgIHZhciBwcmVmaXgsIHByb3A7XG4gICAgdmFyIGNhbWVsUHJvcCA9IHByb3BlcnR5WzBdLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zbGljZSgxKTtcblxuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IFZFTkRPUl9QUkVGSVhFUy5sZW5ndGgpIHtcbiAgICAgICAgcHJlZml4ID0gVkVORE9SX1BSRUZJWEVTW2ldO1xuICAgICAgICBwcm9wID0gKHByZWZpeCkgPyBwcmVmaXggKyBjYW1lbFByb3AgOiBwcm9wZXJ0eTtcblxuICAgICAgICBpZiAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBnZXQgYSB1bmlxdWUgaWRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHVuaXF1ZUlkXG4gKi9cbnZhciBfdW5pcXVlSWQgPSAxO1xuZnVuY3Rpb24gdW5pcXVlSWQoKSB7XG4gICAgcmV0dXJuIF91bmlxdWVJZCsrO1xufVxuXG4vKipcbiAqIGdldCB0aGUgd2luZG93IG9iamVjdCBvZiBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJucyB7RG9jdW1lbnRWaWV3fFdpbmRvd31cbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93Rm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgdmFyIGRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudCB8fCBlbGVtZW50O1xuICAgIHJldHVybiAoZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3cgfHwgd2luZG93KTtcbn1cblxudmFyIE1PQklMRV9SRUdFWCA9IC9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaTtcblxudmFyIFNVUFBPUlRfVE9VQ0ggPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KTtcbnZhciBTVVBQT1JUX1BPSU5URVJfRVZFTlRTID0gcHJlZml4ZWQod2luZG93LCAnUG9pbnRlckV2ZW50JykgIT09IHVuZGVmaW5lZDtcbnZhciBTVVBQT1JUX09OTFlfVE9VQ0ggPSBTVVBQT1JUX1RPVUNIICYmIE1PQklMRV9SRUdFWC50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG52YXIgSU5QVVRfVFlQRV9UT1VDSCA9ICd0b3VjaCc7XG52YXIgSU5QVVRfVFlQRV9QRU4gPSAncGVuJztcbnZhciBJTlBVVF9UWVBFX01PVVNFID0gJ21vdXNlJztcbnZhciBJTlBVVF9UWVBFX0tJTkVDVCA9ICdraW5lY3QnO1xuXG52YXIgQ09NUFVURV9JTlRFUlZBTCA9IDI1O1xuXG52YXIgSU5QVVRfU1RBUlQgPSAxO1xudmFyIElOUFVUX01PVkUgPSAyO1xudmFyIElOUFVUX0VORCA9IDQ7XG52YXIgSU5QVVRfQ0FOQ0VMID0gODtcblxudmFyIERJUkVDVElPTl9OT05FID0gMTtcbnZhciBESVJFQ1RJT05fTEVGVCA9IDI7XG52YXIgRElSRUNUSU9OX1JJR0hUID0gNDtcbnZhciBESVJFQ1RJT05fVVAgPSA4O1xudmFyIERJUkVDVElPTl9ET1dOID0gMTY7XG5cbnZhciBESVJFQ1RJT05fSE9SSVpPTlRBTCA9IERJUkVDVElPTl9MRUZUIHwgRElSRUNUSU9OX1JJR0hUO1xudmFyIERJUkVDVElPTl9WRVJUSUNBTCA9IERJUkVDVElPTl9VUCB8IERJUkVDVElPTl9ET1dOO1xudmFyIERJUkVDVElPTl9BTEwgPSBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTDtcblxudmFyIFBST1BTX1hZID0gWyd4JywgJ3knXTtcbnZhciBQUk9QU19DTElFTlRfWFkgPSBbJ2NsaWVudFgnLCAnY2xpZW50WSddO1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSW5wdXQobWFuYWdlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5lbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIHRoaXMudGFyZ2V0ID0gbWFuYWdlci5vcHRpb25zLmlucHV0VGFyZ2V0O1xuXG4gICAgLy8gc21hbGxlciB3cmFwcGVyIGFyb3VuZCB0aGUgaGFuZGxlciwgZm9yIHRoZSBzY29wZSBhbmQgdGhlIGVuYWJsZWQgc3RhdGUgb2YgdGhlIG1hbmFnZXIsXG4gICAgLy8gc28gd2hlbiBkaXNhYmxlZCB0aGUgaW5wdXQgZXZlbnRzIGFyZSBjb21wbGV0ZWx5IGJ5cGFzc2VkLlxuICAgIHRoaXMuZG9tSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChib29sT3JGbihtYW5hZ2VyLm9wdGlvbnMuZW5hYmxlLCBbbWFuYWdlcl0pKSB7XG4gICAgICAgICAgICBzZWxmLmhhbmRsZXIoZXYpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdCgpO1xuXG59XG5cbklucHV0LnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzaG91bGQgaGFuZGxlIHRoZSBpbnB1dEV2ZW50IGRhdGEgYW5kIHRyaWdnZXIgdGhlIGNhbGxiYWNrXG4gICAgICogQHZpcnR1YWxcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIGJpbmQgdGhlIGV2ZW50c1xuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmV2RWwgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZXaW4gJiYgYWRkRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgdGhlIGV2ZW50c1xuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmV2RWwgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZXaW4gJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcbiAqIGNhbGxlZCBieSB0aGUgTWFuYWdlciBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAqIEByZXR1cm5zIHtJbnB1dH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRJbnN0YW5jZShtYW5hZ2VyKSB7XG4gICAgdmFyIFR5cGU7XG4gICAgdmFyIGlucHV0Q2xhc3MgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRDbGFzcztcblxuICAgIGlmIChpbnB1dENsYXNzKSB7XG4gICAgICAgIFR5cGUgPSBpbnB1dENsYXNzO1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9QT0lOVEVSX0VWRU5UUykge1xuICAgICAgICBUeXBlID0gUG9pbnRlckV2ZW50SW5wdXQ7XG4gICAgfSBlbHNlIGlmIChTVVBQT1JUX09OTFlfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoSW5wdXQ7XG4gICAgfSBlbHNlIGlmICghU1VQUE9SVF9UT1VDSCkge1xuICAgICAgICBUeXBlID0gTW91c2VJbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBUeXBlID0gVG91Y2hNb3VzZUlucHV0O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IChUeXBlKShtYW5hZ2VyLCBpbnB1dEhhbmRsZXIpO1xufVxuXG4vKipcbiAqIGhhbmRsZSBpbnB1dCBldmVudHNcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGlucHV0SGFuZGxlcihtYW5hZ2VyLCBldmVudFR5cGUsIGlucHV0KSB7XG4gICAgdmFyIHBvaW50ZXJzTGVuID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoO1xuICAgIHZhciBjaGFuZ2VkUG9pbnRlcnNMZW4gPSBpbnB1dC5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoO1xuICAgIHZhciBpc0ZpcnN0ID0gKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuICAgIHZhciBpc0ZpbmFsID0gKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuXG4gICAgaW5wdXQuaXNGaXJzdCA9ICEhaXNGaXJzdDtcbiAgICBpbnB1dC5pc0ZpbmFsID0gISFpc0ZpbmFsO1xuXG4gICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgbWFuYWdlci5zZXNzaW9uID0ge307XG4gICAgfVxuXG4gICAgLy8gc291cmNlIGV2ZW50IGlzIHRoZSBub3JtYWxpemVkIHZhbHVlIG9mIHRoZSBkb21FdmVudHNcbiAgICAvLyBsaWtlICd0b3VjaHN0YXJ0LCBtb3VzZXVwLCBwb2ludGVyZG93bidcbiAgICBpbnB1dC5ldmVudFR5cGUgPSBldmVudFR5cGU7XG5cbiAgICAvLyBjb21wdXRlIHNjYWxlLCByb3RhdGlvbiBldGNcbiAgICBjb21wdXRlSW5wdXREYXRhKG1hbmFnZXIsIGlucHV0KTtcblxuICAgIC8vIGVtaXQgc2VjcmV0IGV2ZW50XG4gICAgbWFuYWdlci5lbWl0KCdoYW1tZXIuaW5wdXQnLCBpbnB1dCk7XG5cbiAgICBtYW5hZ2VyLnJlY29nbml6ZShpbnB1dCk7XG4gICAgbWFuYWdlci5zZXNzaW9uLnByZXZJbnB1dCA9IGlucHV0O1xufVxuXG4vKipcbiAqIGV4dGVuZCB0aGUgZGF0YSB3aXRoIHNvbWUgdXNhYmxlIHByb3BlcnRpZXMgbGlrZSBzY2FsZSwgcm90YXRlLCB2ZWxvY2l0eSBldGNcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYW5hZ2VyXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCkge1xuICAgIHZhciBzZXNzaW9uID0gbWFuYWdlci5zZXNzaW9uO1xuICAgIHZhciBwb2ludGVycyA9IGlucHV0LnBvaW50ZXJzO1xuICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblxuICAgIC8vIHN0b3JlIHRoZSBmaXJzdCBpbnB1dCB0byBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGFuZCBkaXJlY3Rpb25cbiAgICBpZiAoIXNlc3Npb24uZmlyc3RJbnB1dCkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0SW5wdXQgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG4gICAgfVxuXG4gICAgLy8gdG8gY29tcHV0ZSBzY2FsZSBhbmQgcm90YXRpb24gd2UgbmVlZCB0byBzdG9yZSB0aGUgbXVsdGlwbGUgdG91Y2hlc1xuICAgIGlmIChwb2ludGVyc0xlbmd0aCA+IDEgJiYgIXNlc3Npb24uZmlyc3RNdWx0aXBsZSkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG4gICAgfSBlbHNlIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RJbnB1dCA9IHNlc3Npb24uZmlyc3RJbnB1dDtcbiAgICB2YXIgZmlyc3RNdWx0aXBsZSA9IHNlc3Npb24uZmlyc3RNdWx0aXBsZTtcbiAgICB2YXIgb2Zmc2V0Q2VudGVyID0gZmlyc3RNdWx0aXBsZSA/IGZpcnN0TXVsdGlwbGUuY2VudGVyIDogZmlyc3RJbnB1dC5jZW50ZXI7XG5cbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyID0gZ2V0Q2VudGVyKHBvaW50ZXJzKTtcbiAgICBpbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICBpbnB1dC5kZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBmaXJzdElucHV0LnRpbWVTdGFtcDtcblxuICAgIGlucHV0LmFuZ2xlID0gZ2V0QW5nbGUob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuICAgIGlucHV0LmRpc3RhbmNlID0gZ2V0RGlzdGFuY2Uob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuXG4gICAgY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpO1xuICAgIGlucHV0Lm9mZnNldERpcmVjdGlvbiA9IGdldERpcmVjdGlvbihpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG5cbiAgICB2YXIgb3ZlcmFsbFZlbG9jaXR5ID0gZ2V0VmVsb2NpdHkoaW5wdXQuZGVsdGFUaW1lLCBpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5WCA9IG92ZXJhbGxWZWxvY2l0eS54O1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVkgPSBvdmVyYWxsVmVsb2NpdHkueTtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHkgPSAoYWJzKG92ZXJhbGxWZWxvY2l0eS54KSA+IGFicyhvdmVyYWxsVmVsb2NpdHkueSkpID8gb3ZlcmFsbFZlbG9jaXR5LnggOiBvdmVyYWxsVmVsb2NpdHkueTtcblxuICAgIGlucHV0LnNjYWxlID0gZmlyc3RNdWx0aXBsZSA/IGdldFNjYWxlKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDE7XG4gICAgaW5wdXQucm90YXRpb24gPSBmaXJzdE11bHRpcGxlID8gZ2V0Um90YXRpb24oZmlyc3RNdWx0aXBsZS5wb2ludGVycywgcG9pbnRlcnMpIDogMDtcblxuICAgIGlucHV0Lm1heFBvaW50ZXJzID0gIXNlc3Npb24ucHJldklucHV0ID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogKChpbnB1dC5wb2ludGVycy5sZW5ndGggPlxuICAgICAgICBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycykgPyBpbnB1dC5wb2ludGVycy5sZW5ndGggOiBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycyk7XG5cbiAgICBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpO1xuXG4gICAgLy8gZmluZCB0aGUgY29ycmVjdCB0YXJnZXRcbiAgICB2YXIgdGFyZ2V0ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmIChoYXNQYXJlbnQoaW5wdXQuc3JjRXZlbnQudGFyZ2V0LCB0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldCA9IGlucHV0LnNyY0V2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgaW5wdXQudGFyZ2V0ID0gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCkge1xuICAgIHZhciBjZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG4gICAgdmFyIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgfHwge307XG4gICAgdmFyIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2SW5wdXQgPSBzZXNzaW9uLnByZXZJbnB1dCB8fCB7fTtcblxuICAgIGlmIChpbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX1NUQVJUIHx8IHByZXZJbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX0VORCkge1xuICAgICAgICBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSA9IHtcbiAgICAgICAgICAgIHg6IHByZXZJbnB1dC5kZWx0YVggfHwgMCxcbiAgICAgICAgICAgIHk6IHByZXZJbnB1dC5kZWx0YVkgfHwgMFxuICAgICAgICB9O1xuXG4gICAgICAgIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBjZW50ZXIueCxcbiAgICAgICAgICAgIHk6IGNlbnRlci55XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaW5wdXQuZGVsdGFYID0gcHJldkRlbHRhLnggKyAoY2VudGVyLnggLSBvZmZzZXQueCk7XG4gICAgaW5wdXQuZGVsdGFZID0gcHJldkRlbHRhLnkgKyAoY2VudGVyLnkgLSBvZmZzZXQueSk7XG59XG5cbi8qKlxuICogdmVsb2NpdHkgaXMgY2FsY3VsYXRlZCBldmVyeSB4IG1zXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvblxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnRlcnZhbElucHV0RGF0YShzZXNzaW9uLCBpbnB1dCkge1xuICAgIHZhciBsYXN0ID0gc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgfHwgaW5wdXQsXG4gICAgICAgIGRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGxhc3QudGltZVN0YW1wLFxuICAgICAgICB2ZWxvY2l0eSwgdmVsb2NpdHlYLCB2ZWxvY2l0eVksIGRpcmVjdGlvbjtcblxuICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfQ0FOQ0VMICYmIChkZWx0YVRpbWUgPiBDT01QVVRFX0lOVEVSVkFMIHx8IGxhc3QudmVsb2NpdHkgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGlucHV0LmRlbHRhWCAtIGxhc3QuZGVsdGFYO1xuICAgICAgICB2YXIgZGVsdGFZID0gaW5wdXQuZGVsdGFZIC0gbGFzdC5kZWx0YVk7XG5cbiAgICAgICAgdmFyIHYgPSBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIGRlbHRhWCwgZGVsdGFZKTtcbiAgICAgICAgdmVsb2NpdHlYID0gdi54O1xuICAgICAgICB2ZWxvY2l0eVkgPSB2Lnk7XG4gICAgICAgIHZlbG9jaXR5ID0gKGFicyh2LngpID4gYWJzKHYueSkpID8gdi54IDogdi55O1xuICAgICAgICBkaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oZGVsdGFYLCBkZWx0YVkpO1xuXG4gICAgICAgIHNlc3Npb24ubGFzdEludGVydmFsID0gaW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXNlIGxhdGVzdCB2ZWxvY2l0eSBpbmZvIGlmIGl0IGRvZXNuJ3Qgb3ZlcnRha2UgYSBtaW5pbXVtIHBlcmlvZFxuICAgICAgICB2ZWxvY2l0eSA9IGxhc3QudmVsb2NpdHk7XG4gICAgICAgIHZlbG9jaXR5WCA9IGxhc3QudmVsb2NpdHlYO1xuICAgICAgICB2ZWxvY2l0eVkgPSBsYXN0LnZlbG9jaXR5WTtcbiAgICAgICAgZGlyZWN0aW9uID0gbGFzdC5kaXJlY3Rpb247XG4gICAgfVxuXG4gICAgaW5wdXQudmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgICBpbnB1dC52ZWxvY2l0eVggPSB2ZWxvY2l0eVg7XG4gICAgaW5wdXQudmVsb2NpdHlZID0gdmVsb2NpdHlZO1xuICAgIGlucHV0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbn1cblxuLyoqXG4gKiBjcmVhdGUgYSBzaW1wbGUgY2xvbmUgZnJvbSB0aGUgaW5wdXQgdXNlZCBmb3Igc3RvcmFnZSBvZiBmaXJzdElucHV0IGFuZCBmaXJzdE11bHRpcGxlXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqIEByZXR1cm5zIHtPYmplY3R9IGNsb25lZElucHV0RGF0YVxuICovXG5mdW5jdGlvbiBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCkge1xuICAgIC8vIG1ha2UgYSBzaW1wbGUgY29weSBvZiB0aGUgcG9pbnRlcnMgYmVjYXVzZSB3ZSB3aWxsIGdldCBhIHJlZmVyZW5jZSBpZiB3ZSBkb24ndFxuICAgIC8vIHdlIG9ubHkgbmVlZCBjbGllbnRYWSBmb3IgdGhlIGNhbGN1bGF0aW9uc1xuICAgIHZhciBwb2ludGVycyA9IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGlucHV0LnBvaW50ZXJzLmxlbmd0aCkge1xuICAgICAgICBwb2ludGVyc1tpXSA9IHtcbiAgICAgICAgICAgIGNsaWVudFg6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFgpLFxuICAgICAgICAgICAgY2xpZW50WTogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WSlcbiAgICAgICAgfTtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVTdGFtcDogbm93KCksXG4gICAgICAgIHBvaW50ZXJzOiBwb2ludGVycyxcbiAgICAgICAgY2VudGVyOiBnZXRDZW50ZXIocG9pbnRlcnMpLFxuICAgICAgICBkZWx0YVg6IGlucHV0LmRlbHRhWCxcbiAgICAgICAgZGVsdGFZOiBpbnB1dC5kZWx0YVlcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgY2VudGVyIG9mIGFsbCB0aGUgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtPYmplY3R9IGNlbnRlciBjb250YWlucyBgeGAgYW5kIGB5YCBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIGdldENlbnRlcihwb2ludGVycykge1xuICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblxuICAgIC8vIG5vIG5lZWQgdG8gbG9vcCB3aGVuIG9ubHkgb25lIHRvdWNoXG4gICAgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRYKSxcbiAgICAgICAgICAgIHk6IHJvdW5kKHBvaW50ZXJzWzBdLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIHggPSAwLCB5ID0gMCwgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBwb2ludGVyc0xlbmd0aCkge1xuICAgICAgICB4ICs9IHBvaW50ZXJzW2ldLmNsaWVudFg7XG4gICAgICAgIHkgKz0gcG9pbnRlcnNbaV0uY2xpZW50WTtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHJvdW5kKHggLyBwb2ludGVyc0xlbmd0aCksXG4gICAgICAgIHk6IHJvdW5kKHkgLyBwb2ludGVyc0xlbmd0aClcbiAgICB9O1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgdmVsb2NpdHkgYmV0d2VlbiB0d28gcG9pbnRzLiB1bml0IGlzIGluIHB4IHBlciBtcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVRpbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gKiBAcGFyYW0ge051bWJlcn0geVxuICogQHJldHVybiB7T2JqZWN0fSB2ZWxvY2l0eSBgeGAgYW5kIGB5YFxuICovXG5mdW5jdGlvbiBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIHgsIHkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiB4IC8gZGVsdGFUaW1lIHx8IDAsXG4gICAgICAgIHk6IHkgLyBkZWx0YVRpbWUgfHwgMFxuICAgIH07XG59XG5cbi8qKlxuICogZ2V0IHRoZSBkaXJlY3Rpb24gYmV0d2VlbiB0d28gcG9pbnRzXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge051bWJlcn0gZGlyZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldERpcmVjdGlvbih4LCB5KSB7XG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgcmV0dXJuIERJUkVDVElPTl9OT05FO1xuICAgIH1cblxuICAgIGlmIChhYnMoeCkgPj0gYWJzKHkpKSB7XG4gICAgICAgIHJldHVybiB4IDwgMCA/IERJUkVDVElPTl9MRUZUIDogRElSRUNUSU9OX1JJR0hUO1xuICAgIH1cbiAgICByZXR1cm4geSA8IDAgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFic29sdXRlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtPYmplY3R9IHAxIHt4LCB5fVxuICogQHBhcmFtIHtPYmplY3R9IHAyIHt4LCB5fVxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiBnZXREaXN0YW5jZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcblxuICAgIHJldHVybiBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYW5nbGUgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMVxuICogQHBhcmFtIHtPYmplY3R9IHAyXG4gKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGFuZ2xlXG4gKi9cbmZ1bmN0aW9uIGdldEFuZ2xlKHAxLCBwMiwgcHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKSB7XG4gICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG4gICAgfVxuICAgIHZhciB4ID0gcDJbcHJvcHNbMF1dIC0gcDFbcHJvcHNbMF1dLFxuICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuICAgIHJldHVybiBNYXRoLmF0YW4yKHksIHgpICogMTgwIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHJvdGF0aW9uIGRlZ3JlZXMgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBlbmQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEByZXR1cm4ge051bWJlcn0gcm90YXRpb25cbiAqL1xuZnVuY3Rpb24gZ2V0Um90YXRpb24oc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBnZXRBbmdsZShlbmRbMV0sIGVuZFswXSwgUFJPUFNfQ0xJRU5UX1hZKSArIGdldEFuZ2xlKHN0YXJ0WzFdLCBzdGFydFswXSwgUFJPUFNfQ0xJRU5UX1hZKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHNjYWxlIGZhY3RvciBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuICogbm8gc2NhbGUgaXMgMSwgYW5kIGdvZXMgZG93biB0byAwIHdoZW4gcGluY2hlZCB0b2dldGhlciwgYW5kIGJpZ2dlciB3aGVuIHBpbmNoZWQgb3V0XG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHNjYWxlXG4gKi9cbmZ1bmN0aW9uIGdldFNjYWxlKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0RGlzdGFuY2UoZW5kWzBdLCBlbmRbMV0sIFBST1BTX0NMSUVOVF9YWSkgLyBnZXREaXN0YW5jZShzdGFydFswXSwgc3RhcnRbMV0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbnZhciBNT1VTRV9JTlBVVF9NQVAgPSB7XG4gICAgbW91c2Vkb3duOiBJTlBVVF9TVEFSVCxcbiAgICBtb3VzZW1vdmU6IElOUFVUX01PVkUsXG4gICAgbW91c2V1cDogSU5QVVRfRU5EXG59O1xuXG52YXIgTU9VU0VfRUxFTUVOVF9FVkVOVFMgPSAnbW91c2Vkb3duJztcbnZhciBNT1VTRV9XSU5ET1dfRVZFTlRTID0gJ21vdXNlbW92ZSBtb3VzZXVwJztcblxuLyoqXG4gKiBNb3VzZSBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gTW91c2VJbnB1dCgpIHtcbiAgICB0aGlzLmV2RWwgPSBNT1VTRV9FTEVNRU5UX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gTU9VU0VfV0lORE9XX0VWRU5UUztcblxuICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlOyAvLyBtb3VzZWRvd24gc3RhdGVcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoTW91c2VJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTUVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBNT1VTRV9JTlBVVF9NQVBbZXYudHlwZV07XG5cbiAgICAgICAgLy8gb24gc3RhcnQgd2Ugd2FudCB0byBoYXZlIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBkb3duXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiBldi5idXR0b24gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfTU9WRSAmJiBldi53aGljaCAhPT0gMSkge1xuICAgICAgICAgICAgZXZlbnRUeXBlID0gSU5QVVRfRU5EO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW91c2UgbXVzdCBiZSBkb3duXG4gICAgICAgIGlmICghdGhpcy5wcmVzc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBldmVudFR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbnZhciBQT0lOVEVSX0lOUFVUX01BUCA9IHtcbiAgICBwb2ludGVyZG93bjogSU5QVVRfU1RBUlQsXG4gICAgcG9pbnRlcm1vdmU6IElOUFVUX01PVkUsXG4gICAgcG9pbnRlcnVwOiBJTlBVVF9FTkQsXG4gICAgcG9pbnRlcmNhbmNlbDogSU5QVVRfQ0FOQ0VMLFxuICAgIHBvaW50ZXJvdXQ6IElOUFVUX0NBTkNFTFxufTtcblxuLy8gaW4gSUUxMCB0aGUgcG9pbnRlciB0eXBlcyBpcyBkZWZpbmVkIGFzIGFuIGVudW1cbnZhciBJRTEwX1BPSU5URVJfVFlQRV9FTlVNID0ge1xuICAgIDI6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgMzogSU5QVVRfVFlQRV9QRU4sXG4gICAgNDogSU5QVVRfVFlQRV9NT1VTRSxcbiAgICA1OiBJTlBVVF9UWVBFX0tJTkVDVCAvLyBzZWUgaHR0cHM6Ly90d2l0dGVyLmNvbS9qYWNvYnJvc3NpL3N0YXR1cy80ODA1OTY0Mzg0ODk4OTA4MTZcbn07XG5cbnZhciBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ3BvaW50ZXJkb3duJztcbnZhciBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAncG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwnO1xuXG4vLyBJRTEwIGhhcyBwcmVmaXhlZCBzdXBwb3J0LCBhbmQgY2FzZS1zZW5zaXRpdmVcbmlmICh3aW5kb3cuTVNQb2ludGVyRXZlbnQgJiYgIXdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ01TUG9pbnRlckRvd24nO1xuICAgIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCc7XG59XG5cbi8qKlxuICogUG9pbnRlciBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gUG9pbnRlckV2ZW50SW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gUE9JTlRFUl9FTEVNRU5UX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gUE9JTlRFUl9XSU5ET1dfRVZFTlRTO1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuc3RvcmUgPSAodGhpcy5tYW5hZ2VyLnNlc3Npb24ucG9pbnRlckV2ZW50cyA9IFtdKTtcbn1cblxuaW5oZXJpdChQb2ludGVyRXZlbnRJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gUEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciBzdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICAgIHZhciByZW1vdmVQb2ludGVyID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGV2ZW50VHlwZU5vcm1hbGl6ZWQgPSBldi50eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnbXMnLCAnJyk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBQT0lOVEVSX0lOUFVUX01BUFtldmVudFR5cGVOb3JtYWxpemVkXTtcbiAgICAgICAgdmFyIHBvaW50ZXJUeXBlID0gSUUxMF9QT0lOVEVSX1RZUEVfRU5VTVtldi5wb2ludGVyVHlwZV0gfHwgZXYucG9pbnRlclR5cGU7XG5cbiAgICAgICAgdmFyIGlzVG91Y2ggPSAocG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCk7XG5cbiAgICAgICAgLy8gZ2V0IGluZGV4IG9mIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgdmFyIHN0b3JlSW5kZXggPSBpbkFycmF5KHN0b3JlLCBldi5wb2ludGVySWQsICdwb2ludGVySWQnKTtcblxuICAgICAgICAvLyBzdGFydCBhbmQgbW91c2UgbXVzdCBiZSBkb3duXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAoZXYuYnV0dG9uID09PSAwIHx8IGlzVG91Y2gpKSB7XG4gICAgICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5wdXNoKGV2KTtcbiAgICAgICAgICAgICAgICBzdG9yZUluZGV4ID0gc3RvcmUubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgcmVtb3ZlUG9pbnRlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpdCBub3QgZm91bmQsIHNvIHRoZSBwb2ludGVyIGhhc24ndCBiZWVuIGRvd24gKHNvIGl0J3MgcHJvYmFibHkgYSBob3ZlcilcbiAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGV2ZW50IGluIHRoZSBzdG9yZVxuICAgICAgICBzdG9yZVtzdG9yZUluZGV4XSA9IGV2O1xuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBldmVudFR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiBzdG9yZSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBwb2ludGVyVHlwZSxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVtb3ZlUG9pbnRlcikge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gdGhlIHN0b3JlXG4gICAgICAgICAgICBzdG9yZS5zcGxpY2Uoc3RvcmVJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxudmFyIFNJTkdMRV9UT1VDSF9JTlBVVF9NQVAgPSB7XG4gICAgdG91Y2hzdGFydDogSU5QVVRfU1RBUlQsXG4gICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG4gICAgdG91Y2hjYW5jZWw6IElOUFVUX0NBTkNFTFxufTtcblxudmFyIFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQnO1xudmFyIFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBUb3VjaCBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gU2luZ2xlVG91Y2hJbnB1dCgpIHtcbiAgICB0aGlzLmV2VGFyZ2V0ID0gU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTO1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChTaW5nbGVUb3VjaElucHV0LCBJbnB1dCwge1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFNJTkdMRV9UT1VDSF9JTlBVVF9NQVBbZXYudHlwZV07XG5cbiAgICAgICAgLy8gc2hvdWxkIHdlIGhhbmRsZSB0aGUgdG91Y2ggZXZlbnRzP1xuICAgICAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvdWNoZXMgPSBub3JtYWxpemVTaW5nbGVUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuXG4gICAgICAgIC8vIHdoZW4gZG9uZSwgcmVzZXQgdGhlIHN0YXJ0ZWQgc3RhdGVcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiB0b3VjaGVzWzBdLmxlbmd0aCAtIHRvdWNoZXNbMV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTaW5nbGVUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbCA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG4gICAgdmFyIGNoYW5nZWQgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKTtcblxuICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgYWxsID0gdW5pcXVlQXJyYXkoYWxsLmNvbmNhdChjaGFuZ2VkKSwgJ2lkZW50aWZpZXInLCB0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2FsbCwgY2hhbmdlZF07XG59XG5cbnZhciBUT1VDSF9JTlBVVF9NQVAgPSB7XG4gICAgdG91Y2hzdGFydDogSU5QVVRfU1RBUlQsXG4gICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG4gICAgdG91Y2hjYW5jZWw6IElOUFVUX0NBTkNFTFxufTtcblxudmFyIFRPVUNIX1RBUkdFVF9FVkVOVFMgPSAndG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnO1xuXG4vKipcbiAqIE11bHRpLXVzZXIgdG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFRPVUNIX1RBUkdFVF9FVkVOVFM7XG4gICAgdGhpcy50YXJnZXRJZHMgPSB7fTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBNVEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciB0eXBlID0gVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGdldFRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG4gICAgICAgIGlmICghdG91Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiB0b3VjaGVzWzBdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQHRoaXMge1RvdWNoSW5wdXR9XG4gKiBAcGFyYW0ge09iamVjdH0gZXZcbiAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR8QXJyYXl9IFthbGwsIGNoYW5nZWRdXG4gKi9cbmZ1bmN0aW9uIGdldFRvdWNoZXMoZXYsIHR5cGUpIHtcbiAgICB2YXIgYWxsVG91Y2hlcyA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG4gICAgdmFyIHRhcmdldElkcyA9IHRoaXMudGFyZ2V0SWRzO1xuXG4gICAgLy8gd2hlbiB0aGVyZSBpcyBvbmx5IG9uZSB0b3VjaCwgdGhlIHByb2Nlc3MgY2FuIGJlIHNpbXBsaWZpZWRcbiAgICBpZiAodHlwZSAmIChJTlBVVF9TVEFSVCB8IElOUFVUX01PVkUpICYmIGFsbFRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRhcmdldElkc1thbGxUb3VjaGVzWzBdLmlkZW50aWZpZXJdID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIFthbGxUb3VjaGVzLCBhbGxUb3VjaGVzXTtcbiAgICB9XG5cbiAgICB2YXIgaSxcbiAgICAgICAgdGFyZ2V0VG91Y2hlcyxcbiAgICAgICAgY2hhbmdlZFRvdWNoZXMgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKSxcbiAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMgPSBbXSxcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cbiAgICAvLyBnZXQgdGFyZ2V0IHRvdWNoZXMgZnJvbSB0b3VjaGVzXG4gICAgdGFyZ2V0VG91Y2hlcyA9IGFsbFRvdWNoZXMuZmlsdGVyKGZ1bmN0aW9uKHRvdWNoKSB7XG4gICAgICAgIHJldHVybiBoYXNQYXJlbnQodG91Y2gudGFyZ2V0LCB0YXJnZXQpO1xuICAgIH0pO1xuXG4gICAgLy8gY29sbGVjdCB0b3VjaGVzXG4gICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXJnZXRJZHNbdGFyZ2V0VG91Y2hlc1tpXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgY2hhbmdlZCB0b3VjaGVzIHRvIG9ubHkgY29udGFpbiB0b3VjaGVzIHRoYXQgZXhpc3QgaW4gdGhlIGNvbGxlY3RlZCB0YXJnZXQgaWRzXG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXSkge1xuICAgICAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMucHVzaChjaGFuZ2VkVG91Y2hlc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhbnVwIHJlbW92ZWQgdG91Y2hlc1xuICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoIWNoYW5nZWRUYXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgICAgLy8gbWVyZ2UgdGFyZ2V0VG91Y2hlcyB3aXRoIGNoYW5nZWRUYXJnZXRUb3VjaGVzIHNvIGl0IGNvbnRhaW5zIEFMTCB0b3VjaGVzLCBpbmNsdWRpbmcgJ2VuZCcgYW5kICdjYW5jZWwnXG4gICAgICAgIHVuaXF1ZUFycmF5KHRhcmdldFRvdWNoZXMuY29uY2F0KGNoYW5nZWRUYXJnZXRUb3VjaGVzKSwgJ2lkZW50aWZpZXInLCB0cnVlKSxcbiAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXNcbiAgICBdO1xufVxuXG4vKipcbiAqIENvbWJpbmVkIHRvdWNoIGFuZCBtb3VzZSBpbnB1dFxuICpcbiAqIFRvdWNoIGhhcyBhIGhpZ2hlciBwcmlvcml0eSB0aGVuIG1vdXNlLCBhbmQgd2hpbGUgdG91Y2hpbmcgbm8gbW91c2UgZXZlbnRzIGFyZSBhbGxvd2VkLlxuICogVGhpcyBiZWNhdXNlIHRvdWNoIGRldmljZXMgYWxzbyBlbWl0IG1vdXNlIGV2ZW50cyB3aGlsZSBkb2luZyBhIHRvdWNoLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuXG52YXIgREVEVVBfVElNRU9VVCA9IDI1MDA7XG52YXIgREVEVVBfRElTVEFOQ0UgPSAyNTtcblxuZnVuY3Rpb24gVG91Y2hNb3VzZUlucHV0KCkge1xuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB2YXIgaGFuZGxlciA9IGJpbmRGbih0aGlzLmhhbmRsZXIsIHRoaXMpO1xuICAgIHRoaXMudG91Y2ggPSBuZXcgVG91Y2hJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuICAgIHRoaXMubW91c2UgPSBuZXcgTW91c2VJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuXG4gICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBudWxsO1xuICAgIHRoaXMubGFzdFRvdWNoZXMgPSBbXTtcbn1cblxuaW5oZXJpdChUb3VjaE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGFuZCB0b3VjaCBldmVudHNcbiAgICAgKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dEV2ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRNRWhhbmRsZXIobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBpc1RvdWNoID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKSxcbiAgICAgICAgICAgIGlzTW91c2UgPSAoaW5wdXREYXRhLnBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfTU9VU0UpO1xuXG4gICAgICAgIGlmIChpc01vdXNlICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcy5maXJlc1RvdWNoRXZlbnRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3aGVuIHdlJ3JlIGluIGEgdG91Y2ggZXZlbnQsIHJlY29yZCB0b3VjaGVzIHRvICBkZS1kdXBlIHN5bnRoZXRpYyBtb3VzZSBldmVudFxuICAgICAgICBpZiAoaXNUb3VjaCkge1xuICAgICAgICAgICAgcmVjb3JkVG91Y2hlcy5jYWxsKHRoaXMsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNNb3VzZSAmJiBpc1N5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgaW5wdXREYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayhtYW5hZ2VyLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudG91Y2guZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1vdXNlLmRlc3Ryb3koKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gcmVjb3JkVG91Y2hlcyhldmVudFR5cGUsIGV2ZW50RGF0YSkge1xuICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuICAgICAgICB0aGlzLnByaW1hcnlUb3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF0uaWRlbnRpZmllcjtcbiAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRMYXN0VG91Y2goZXZlbnREYXRhKSB7XG4gICAgdmFyIHRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXTtcblxuICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09PSB0aGlzLnByaW1hcnlUb3VjaCkge1xuICAgICAgICB2YXIgbGFzdFRvdWNoID0ge3g6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFl9O1xuICAgICAgICB0aGlzLmxhc3RUb3VjaGVzLnB1c2gobGFzdFRvdWNoKTtcbiAgICAgICAgdmFyIGx0cyA9IHRoaXMubGFzdFRvdWNoZXM7XG4gICAgICAgIHZhciByZW1vdmVMYXN0VG91Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpID0gbHRzLmluZGV4T2YobGFzdFRvdWNoKTtcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBsdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZUxhc3RUb3VjaCwgREVEVVBfVElNRU9VVCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KGV2ZW50RGF0YSkge1xuICAgIHZhciB4ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFgsIHkgPSBldmVudERhdGEuc3JjRXZlbnQuY2xpZW50WTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGFzdFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLmxhc3RUb3VjaGVzW2ldO1xuICAgICAgICB2YXIgZHggPSBNYXRoLmFicyh4IC0gdC54KSwgZHkgPSBNYXRoLmFicyh5IC0gdC55KTtcbiAgICAgICAgaWYgKGR4IDw9IERFRFVQX0RJU1RBTkNFICYmIGR5IDw9IERFRFVQX0RJU1RBTkNFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gPSBwcmVmaXhlZChURVNUX0VMRU1FTlQuc3R5bGUsICd0b3VjaEFjdGlvbicpO1xudmFyIE5BVElWRV9UT1VDSF9BQ1RJT04gPSBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gIT09IHVuZGVmaW5lZDtcblxuLy8gbWFnaWNhbCB0b3VjaEFjdGlvbiB2YWx1ZVxudmFyIFRPVUNIX0FDVElPTl9DT01QVVRFID0gJ2NvbXB1dGUnO1xudmFyIFRPVUNIX0FDVElPTl9BVVRPID0gJ2F1dG8nO1xudmFyIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04gPSAnbWFuaXB1bGF0aW9uJzsgLy8gbm90IGltcGxlbWVudGVkXG52YXIgVE9VQ0hfQUNUSU9OX05PTkUgPSAnbm9uZSc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9YID0gJ3Bhbi14JztcbnZhciBUT1VDSF9BQ1RJT05fUEFOX1kgPSAncGFuLXknO1xudmFyIFRPVUNIX0FDVElPTl9NQVAgPSBnZXRUb3VjaEFjdGlvblByb3BzKCk7XG5cbi8qKlxuICogVG91Y2ggQWN0aW9uXG4gKiBzZXRzIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBvciB1c2VzIHRoZSBqcyBhbHRlcm5hdGl2ZVxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBUb3VjaEFjdGlvbihtYW5hZ2VyLCB2YWx1ZSkge1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xufVxuXG5Ub3VjaEFjdGlvbi5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZSBvbiB0aGUgZWxlbWVudCBvciBlbmFibGUgdGhlIHBvbHlmaWxsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyBmaW5kIG91dCB0aGUgdG91Y2gtYWN0aW9uIGJ5IHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAodmFsdWUgPT0gVE9VQ0hfQUNUSU9OX0NPTVBVVEUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jb21wdXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoTkFUSVZFX1RPVUNIX0FDVElPTiAmJiB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZSAmJiBUT1VDSF9BQ1RJT05fTUFQW3ZhbHVlXSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGVbUFJFRklYRURfVE9VQ0hfQUNUSU9OXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBqdXN0IHJlLXNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWVcbiAgICAgKi9cbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldCh0aGlzLm1hbmFnZXIub3B0aW9ucy50b3VjaEFjdGlvbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNvbXB1dGUgdGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgYmFzZWQgb24gdGhlIHJlY29nbml6ZXIncyBzZXR0aW5nc1xuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgY29tcHV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhY3Rpb25zID0gW107XG4gICAgICAgIGVhY2godGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLCBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgICAgICBpZiAoYm9vbE9yRm4ocmVjb2duaXplci5vcHRpb25zLmVuYWJsZSwgW3JlY29nbml6ZXJdKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBhY3Rpb25zLmNvbmNhdChyZWNvZ25pemVyLmdldFRvdWNoQWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMuam9pbignICcpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uIGVhY2ggaW5wdXQgY3ljbGUgYW5kIHByb3ZpZGVzIHRoZSBwcmV2ZW50aW5nIG9mIHRoZSBicm93c2VyIGJlaGF2aW9yXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgcHJldmVudERlZmF1bHRzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc3JjRXZlbnQgPSBpbnB1dC5zcmNFdmVudDtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0Lm9mZnNldERpcmVjdGlvbjtcblxuICAgICAgICAvLyBpZiB0aGUgdG91Y2ggYWN0aW9uIGRpZCBwcmV2ZW50ZWQgb25jZSB0aGlzIHNlc3Npb25cbiAgICAgICAgaWYgKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCkge1xuICAgICAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zO1xuICAgICAgICB2YXIgaGFzTm9uZSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1ldO1xuICAgICAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9YXTtcblxuICAgICAgICBpZiAoaGFzTm9uZSkge1xuICAgICAgICAgICAgLy9kbyBub3QgcHJldmVudCBkZWZhdWx0cyBpZiB0aGlzIGlzIGEgdGFwIGdlc3R1cmVcblxuICAgICAgICAgICAgdmFyIGlzVGFwUG9pbnRlciA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgIHZhciBpc1RhcE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCAyO1xuICAgICAgICAgICAgdmFyIGlzVGFwVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgMjUwO1xuXG4gICAgICAgICAgICBpZiAoaXNUYXBQb2ludGVyICYmIGlzVGFwTW92ZW1lbnQgJiYgaXNUYXBUb3VjaFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG4gICAgICAgICAgICAvLyBgcGFuLXggcGFuLXlgIG1lYW5zIGJyb3dzZXIgaGFuZGxlcyBhbGwgc2Nyb2xsaW5nL3Bhbm5pbmcsIGRvIG5vdCBwcmV2ZW50XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzTm9uZSB8fFxuICAgICAgICAgICAgKGhhc1BhblkgJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHx8XG4gICAgICAgICAgICAoaGFzUGFuWCAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2ZW50U3JjKHNyY0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsIHByZXZlbnREZWZhdWx0IHRvIHByZXZlbnQgdGhlIGJyb3dzZXIncyBkZWZhdWx0IGJlaGF2aW9yIChzY3JvbGxpbmcgaW4gbW9zdCBjYXNlcylcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjRXZlbnRcbiAgICAgKi9cbiAgICBwcmV2ZW50U3JjOiBmdW5jdGlvbihzcmNFdmVudCkge1xuICAgICAgICB0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbn07XG5cbi8qKlxuICogd2hlbiB0aGUgdG91Y2hBY3Rpb25zIGFyZSBjb2xsZWN0ZWQgdGhleSBhcmUgbm90IGEgdmFsaWQgdmFsdWUsIHNvIHdlIG5lZWQgdG8gY2xlYW4gdGhpbmdzIHVwLiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uc1xuICogQHJldHVybnMgeyp9XG4gKi9cbmZ1bmN0aW9uIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMpIHtcbiAgICAvLyBub25lXG4gICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcblxuICAgIC8vIGlmIGJvdGggcGFuLXggYW5kIHBhbi15IGFyZSBzZXQgKGRpZmZlcmVudCByZWNvZ25pemVyc1xuICAgIC8vIGZvciBkaWZmZXJlbnQgZGlyZWN0aW9ucywgZS5nLiBob3Jpem9udGFsIHBhbiBidXQgdmVydGljYWwgc3dpcGU/KVxuICAgIC8vIHdlIG5lZWQgbm9uZSAoYXMgb3RoZXJ3aXNlIHdpdGggcGFuLXggcGFuLXkgY29tYmluZWQgbm9uZSBvZiB0aGVzZVxuICAgIC8vIHJlY29nbml6ZXJzIHdpbGwgd29yaywgc2luY2UgdGhlIGJyb3dzZXIgd291bGQgaGFuZGxlIGFsbCBwYW5uaW5nXG4gICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgLy8gcGFuLXggT1IgcGFuLXlcbiAgICBpZiAoaGFzUGFuWCB8fCBoYXNQYW5ZKSB7XG4gICAgICAgIHJldHVybiBoYXNQYW5YID8gVE9VQ0hfQUNUSU9OX1BBTl9YIDogVE9VQ0hfQUNUSU9OX1BBTl9ZO1xuICAgIH1cblxuICAgIC8vIG1hbmlwdWxhdGlvblxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OKSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTjtcbiAgICB9XG5cbiAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX0FVVE87XG59XG5cbmZ1bmN0aW9uIGdldFRvdWNoQWN0aW9uUHJvcHMoKSB7XG4gICAgaWYgKCFOQVRJVkVfVE9VQ0hfQUNUSU9OKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRvdWNoTWFwID0ge307XG4gICAgdmFyIGNzc1N1cHBvcnRzID0gd2luZG93LkNTUyAmJiB3aW5kb3cuQ1NTLnN1cHBvcnRzO1xuICAgIFsnYXV0bycsICdtYW5pcHVsYXRpb24nLCAncGFuLXknLCAncGFuLXgnLCAncGFuLXggcGFuLXknLCAnbm9uZSddLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XG5cbiAgICAgICAgLy8gSWYgY3NzLnN1cHBvcnRzIGlzIG5vdCBzdXBwb3J0ZWQgYnV0IHRoZXJlIGlzIG5hdGl2ZSB0b3VjaC1hY3Rpb24gYXNzdW1lIGl0IHN1cHBvcnRzXG4gICAgICAgIC8vIGFsbCB2YWx1ZXMuIFRoaXMgaXMgdGhlIGNhc2UgZm9yIElFIDEwIGFuZCAxMS5cbiAgICAgICAgdG91Y2hNYXBbdmFsXSA9IGNzc1N1cHBvcnRzID8gd2luZG93LkNTUy5zdXBwb3J0cygndG91Y2gtYWN0aW9uJywgdmFsKSA6IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvdWNoTWFwO1xufVxuXG4vKipcbiAqIFJlY29nbml6ZXIgZmxvdyBleHBsYWluZWQ7ICpcbiAqIEFsbCByZWNvZ25pemVycyBoYXZlIHRoZSBpbml0aWFsIHN0YXRlIG9mIFBPU1NJQkxFIHdoZW4gYSBpbnB1dCBzZXNzaW9uIHN0YXJ0cy5cbiAqIFRoZSBkZWZpbml0aW9uIG9mIGEgaW5wdXQgc2Vzc2lvbiBpcyBmcm9tIHRoZSBmaXJzdCBpbnB1dCB1bnRpbCB0aGUgbGFzdCBpbnB1dCwgd2l0aCBhbGwgaXQncyBtb3ZlbWVudCBpbiBpdC4gKlxuICogRXhhbXBsZSBzZXNzaW9uIGZvciBtb3VzZS1pbnB1dDogbW91c2Vkb3duIC0+IG1vdXNlbW92ZSAtPiBtb3VzZXVwXG4gKlxuICogT24gZWFjaCByZWNvZ25pemluZyBjeWNsZSAoc2VlIE1hbmFnZXIucmVjb2duaXplKSB0aGUgLnJlY29nbml6ZSgpIG1ldGhvZCBpcyBleGVjdXRlZFxuICogd2hpY2ggZGV0ZXJtaW5lcyB3aXRoIHN0YXRlIGl0IHNob3VsZCBiZS5cbiAqXG4gKiBJZiB0aGUgcmVjb2duaXplciBoYXMgdGhlIHN0YXRlIEZBSUxFRCwgQ0FOQ0VMTEVEIG9yIFJFQ09HTklaRUQgKGVxdWFscyBFTkRFRCksIGl0IGlzIHJlc2V0IHRvXG4gKiBQT1NTSUJMRSB0byBnaXZlIGl0IGFub3RoZXIgY2hhbmdlIG9uIHRoZSBuZXh0IGN5Y2xlLlxuICpcbiAqICAgICAgICAgICAgICAgUG9zc2libGVcbiAqICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICArLS0tLS0rLS0tLS0tLS0tLS0tLS0tK1xuICogICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICArLS0tLS0rLS0tLS0rICAgICAgICAgICAgICAgfFxuICogICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgfFxuICogICBGYWlsZWQgICAgICBDYW5jZWxsZWQgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tKy0tLS0tLStcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICBSZWNvZ25pemVkICAgICAgIEJlZ2FuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmRlZC9SZWNvZ25pemVkXG4gKi9cbnZhciBTVEFURV9QT1NTSUJMRSA9IDE7XG52YXIgU1RBVEVfQkVHQU4gPSAyO1xudmFyIFNUQVRFX0NIQU5HRUQgPSA0O1xudmFyIFNUQVRFX0VOREVEID0gODtcbnZhciBTVEFURV9SRUNPR05JWkVEID0gU1RBVEVfRU5ERUQ7XG52YXIgU1RBVEVfQ0FOQ0VMTEVEID0gMTY7XG52YXIgU1RBVEVfRkFJTEVEID0gMzI7XG5cbi8qKlxuICogUmVjb2duaXplclxuICogRXZlcnkgcmVjb2duaXplciBuZWVkcyB0byBleHRlbmQgZnJvbSB0aGlzIGNsYXNzLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBSZWNvZ25pemVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5pZCA9IHVuaXF1ZUlkKCk7XG5cbiAgICB0aGlzLm1hbmFnZXIgPSBudWxsO1xuXG4gICAgLy8gZGVmYXVsdCBpcyBlbmFibGUgdHJ1ZVxuICAgIHRoaXMub3B0aW9ucy5lbmFibGUgPSBpZlVuZGVmaW5lZCh0aGlzLm9wdGlvbnMuZW5hYmxlLCB0cnVlKTtcblxuICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcblxuICAgIHRoaXMuc2ltdWx0YW5lb3VzID0ge307XG4gICAgdGhpcy5yZXF1aXJlRmFpbCA9IFtdO1xufVxuXG5SZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgZGVmYXVsdHM6IHt9LFxuXG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm4ge1JlY29nbml6ZXJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIGFsc28gdXBkYXRlIHRoZSB0b3VjaEFjdGlvbiwgaW4gY2FzZSBzb21ldGhpbmcgY2hhbmdlZCBhYm91dCB0aGUgZGlyZWN0aW9ucy9lbmFibGVkIHN0YXRlXG4gICAgICAgIHRoaXMubWFuYWdlciAmJiB0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgcmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZWNvZ25pemVXaXRoJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNpbXVsdGFuZW91cyA9IHRoaXMuc2ltdWx0YW5lb3VzO1xuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGlmICghc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0pIHtcbiAgICAgICAgICAgIHNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdID0gb3RoZXJSZWNvZ25pemVyO1xuICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlY29nbml6ZVdpdGgodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRyb3AgdGhlIHNpbXVsdGFuZW91cyBsaW5rLiBpdCBkb2VzbnQgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZWNvZ25pemVyIGNhbiBvbmx5IHJ1biB3aGVuIGFuIG90aGVyIGlzIGZhaWxpbmdcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgcmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVxdWlyZUZhaWwgPSB0aGlzLnJlcXVpcmVGYWlsO1xuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGlmIChpbkFycmF5KHJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpID09PSAtMSkge1xuICAgICAgICAgICAgcmVxdWlyZUZhaWwucHVzaChvdGhlclJlY29nbml6ZXIpO1xuICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSByZXF1aXJlRmFpbHVyZSBsaW5rLiBpdCBkb2VzIG5vdCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIGRyb3BSZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkodGhpcy5yZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaGFzIHJlcXVpcmUgZmFpbHVyZXMgYm9vbGVhblxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGhhc1JlcXVpcmVGYWlsdXJlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCA+IDA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGlmIHRoZSByZWNvZ25pemVyIGNhbiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFlvdSBzaG91bGQgdXNlIGB0cnlFbWl0YCBpbnN0ZWFkIG9mIGBlbWl0YCBkaXJlY3RseSB0byBjaGVja1xuICAgICAqIHRoYXQgYWxsIHRoZSBuZWVkZWQgcmVjb2duaXplcnMgaGFzIGZhaWxlZCBiZWZvcmUgZW1pdHRpbmcuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYubWFuYWdlci5lbWl0KGV2ZW50LCBpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAncGFuc3RhcnQnIGFuZCAncGFubW92ZSdcbiAgICAgICAgaWYgKHN0YXRlIDwgU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50KTsgLy8gc2ltcGxlICdldmVudE5hbWUnIGV2ZW50c1xuXG4gICAgICAgIGlmIChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpIHsgLy8gYWRkaXRpb25hbCBldmVudChwYW5sZWZ0LCBwYW5yaWdodCwgcGluY2hpbiwgcGluY2hvdXQuLi4pXG4gICAgICAgICAgICBlbWl0KGlucHV0LmFkZGl0aW9uYWxFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYW5lbmQgYW5kIHBhbmNhbmNlbFxuICAgICAgICBpZiAoc3RhdGUgPj0gU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGF0IGFsbCB0aGUgcmVxdWlyZSBmYWlsdXJlIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQsXG4gICAgICogaWYgdHJ1ZSwgaXQgZW1pdHMgYSBnZXN0dXJlIGV2ZW50LFxuICAgICAqIG90aGVyd2lzZSwgc2V0dXAgdGhlIHN0YXRlIHRvIEZBSUxFRC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICB0cnlFbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5jYW5FbWl0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGl0J3MgZmFpbGluZyBhbnl3YXlcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FuIHdlIGVtaXQ/XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuRW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEodGhpcy5yZXF1aXJlRmFpbFtpXS5zdGF0ZSAmIChTVEFURV9GQUlMRUQgfCBTVEFURV9QT1NTSUJMRSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGUgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcbiAgICAgICAgLy8gbWFrZSBhIG5ldyBjb3B5IG9mIHRoZSBpbnB1dERhdGFcbiAgICAgICAgLy8gc28gd2UgY2FuIGNoYW5nZSB0aGUgaW5wdXREYXRhIHdpdGhvdXQgbWVzc2luZyB1cCB0aGUgb3RoZXIgcmVjb2duaXplcnNcbiAgICAgICAgdmFyIGlucHV0RGF0YUNsb25lID0gYXNzaWduKHt9LCBpbnB1dERhdGEpO1xuXG4gICAgICAgIC8vIGlzIGlzIGVuYWJsZWQgYW5kIGFsbG93IHJlY29nbml6aW5nP1xuICAgICAgICBpZiAoIWJvb2xPckZuKHRoaXMub3B0aW9ucy5lbmFibGUsIFt0aGlzLCBpbnB1dERhdGFDbG9uZV0pKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmRcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfUkVDT0dOSVpFRCB8IFNUQVRFX0NBTkNFTExFRCB8IFNUQVRFX0ZBSUxFRCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnByb2Nlc3MoaW5wdXREYXRhQ2xvbmUpO1xuXG4gICAgICAgIC8vIHRoZSByZWNvZ25pemVyIGhhcyByZWNvZ25pemVkIGEgZ2VzdHVyZVxuICAgICAgICAvLyBzbyB0cmlnZ2VyIGFuIGV2ZW50XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEIHwgU1RBVEVfQ0FOQ0VMTEVEKSkge1xuICAgICAgICAgICAgdGhpcy50cnlFbWl0KGlucHV0RGF0YUNsb25lKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHN0YXRlIG9mIHRoZSByZWNvZ25pemVyXG4gICAgICogdGhlIGFjdHVhbCByZWNvZ25pemluZyBoYXBwZW5zIGluIHRoaXMgbWV0aG9kXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICogQHJldHVybnMge0NvbnN0fSBTVEFURVxuICAgICAqL1xuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0RGF0YSkgeyB9LCAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblxuICAgIC8qKlxuICAgICAqIHJldHVybiB0aGUgcHJlZmVycmVkIHRvdWNoLWFjdGlvblxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHJldHVybnMge0FycmF5fVxuICAgICAqL1xuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBnZXN0dXJlIGlzbid0IGFsbG93ZWQgdG8gcmVjb2duaXplXG4gICAgICogbGlrZSB3aGVuIGFub3RoZXIgaXMgYmVpbmcgcmVjb2duaXplZCBvciBpdCBpcyBkaXNhYmxlZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkgeyB9XG59O1xuXG4vKipcbiAqIGdldCBhIHVzYWJsZSBzdHJpbmcsIHVzZWQgYXMgZXZlbnQgcG9zdGZpeFxuICogQHBhcmFtIHtDb25zdH0gc3RhdGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0YXRlXG4gKi9cbmZ1bmN0aW9uIHN0YXRlU3RyKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlICYgU1RBVEVfQ0FOQ0VMTEVEKSB7XG4gICAgICAgIHJldHVybiAnY2FuY2VsJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgcmV0dXJuICdlbmQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9DSEFOR0VEKSB7XG4gICAgICAgIHJldHVybiAnbW92ZSc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0JFR0FOKSB7XG4gICAgICAgIHJldHVybiAnc3RhcnQnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogZGlyZWN0aW9uIGNvbnMgdG8gc3RyaW5nXG4gKiBAcGFyYW0ge0NvbnN0fSBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGlvblN0cihkaXJlY3Rpb24pIHtcbiAgICBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9ET1dOKSB7XG4gICAgICAgIHJldHVybiAnZG93bic7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1VQKSB7XG4gICAgICAgIHJldHVybiAndXAnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9MRUZUKSB7XG4gICAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1JJR0hUKSB7XG4gICAgICAgIHJldHVybiAncmlnaHQnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogZ2V0IGEgcmVjb2duaXplciBieSBuYW1lIGlmIGl0IGlzIGJvdW5kIHRvIGEgbWFuYWdlclxuICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gb3RoZXJSZWNvZ25pemVyXG4gKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAqIEByZXR1cm5zIHtSZWNvZ25pemVyfVxuICovXG5mdW5jdGlvbiBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgcmVjb2duaXplcikge1xuICAgIHZhciBtYW5hZ2VyID0gcmVjb2duaXplci5tYW5hZ2VyO1xuICAgIGlmIChtYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyLmdldChvdGhlclJlY29nbml6ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gb3RoZXJSZWNvZ25pemVyO1xufVxuXG4vKipcbiAqIFRoaXMgcmVjb2duaXplciBpcyBqdXN0IHVzZWQgYXMgYSBiYXNlIGZvciB0aGUgc2ltcGxlIGF0dHJpYnV0ZSByZWNvZ25pemVycy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBBdHRyUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoQXR0clJlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gY2hlY2sgaWYgaXQgdGhlIHJlY29nbml6ZXIgcmVjZWl2ZXMgdmFsaWQgaW5wdXQsIGxpa2UgaW5wdXQuZGlzdGFuY2UgPiAxMC5cbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gcmVjb2duaXplZFxuICAgICAqL1xuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9uUG9pbnRlcnMgPSB0aGlzLm9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHJldHVybiBvcHRpb25Qb2ludGVycyA9PT0gMCB8fCBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvblBvaW50ZXJzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHRoZSBpbnB1dCBhbmQgcmV0dXJuIHRoZSBzdGF0ZSBmb3IgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKiBAcmV0dXJucyB7Kn0gU3RhdGVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gaW5wdXQuZXZlbnRUeXBlO1xuXG4gICAgICAgIHZhciBpc1JlY29nbml6ZWQgPSBzdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQpO1xuICAgICAgICB2YXIgaXNWYWxpZCA9IHRoaXMuYXR0clRlc3QoaW5wdXQpO1xuXG4gICAgICAgIC8vIG9uIGNhbmNlbCBpbnB1dCBhbmQgd2UndmUgcmVjb2duaXplZCBiZWZvcmUsIHJldHVybiBTVEFURV9DQU5DRUxMRURcbiAgICAgICAgaWYgKGlzUmVjb2duaXplZCAmJiAoZXZlbnRUeXBlICYgSU5QVVRfQ0FOQ0VMIHx8ICFpc1ZhbGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0FOQ0VMTEVEO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUmVjb2duaXplZCB8fCBpc1ZhbGlkKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfRU5ERUQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCEoc3RhdGUgJiBTVEFURV9CRUdBTikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DSEFOR0VEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGFuXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBhbmQgbW92ZWQgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQYW5SZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnBYID0gbnVsbDtcbiAgICB0aGlzLnBZID0gbnVsbDtcbn1cblxuaW5oZXJpdChQYW5SZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGFuUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncGFuJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0FMTFxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChUT1VDSF9BQ1RJT05fUEFOX1kpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChUT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3Rpb25zO1xuICAgIH0sXG5cbiAgICBkaXJlY3Rpb25UZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdmFyIGhhc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gaW5wdXQuZGlzdGFuY2U7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5kaXJlY3Rpb247XG4gICAgICAgIHZhciB4ID0gaW5wdXQuZGVsdGFYO1xuICAgICAgICB2YXIgeSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICAvLyBsb2NrIHRvIGF4aXM/XG4gICAgICAgIGlmICghKGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uKSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeCA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh4IDwgMCkgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHggIT0gdGhpcy5wWDtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh5ID09PSAwKSA/IERJUkVDVElPTl9OT05FIDogKHkgPCAwKSA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xuICAgICAgICAgICAgICAgIGhhc01vdmVkID0geSAhPSB0aGlzLnBZO1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHJldHVybiBoYXNNb3ZlZCAmJiBkaXN0YW5jZSA+IG9wdGlvbnMudGhyZXNob2xkICYmIGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIEF0dHJSZWNvZ25pemVyLnByb3RvdHlwZS5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTiB8fCAoISh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pICYmIHRoaXMuZGlyZWN0aW9uVGVzdChpbnB1dCkpKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblxuICAgICAgICB0aGlzLnBYID0gaW5wdXQuZGVsdGFYO1xuICAgICAgICB0aGlzLnBZID0gaW5wdXQuZGVsdGFZO1xuXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQuZGlyZWN0aW9uKTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpbnB1dC5hZGRpdGlvbmFsRXZlbnQgPSB0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQaW5jaFxuICogUmVjb2duaXplZCB3aGVuIHR3byBvciBtb3JlIHBvaW50ZXJzIGFyZSBtb3ZpbmcgdG93YXJkICh6b29tLWluKSBvciBhd2F5IGZyb20gZWFjaCBvdGhlciAoem9vbS1vdXQpLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQaW5jaFJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChQaW5jaFJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BpbmNoJyxcbiAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICBwb2ludGVyczogMlxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQuc2NhbGUgLSAxKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LnNjYWxlICE9PSAxKSB7XG4gICAgICAgICAgICB2YXIgaW5PdXQgPSBpbnB1dC5zY2FsZSA8IDEgPyAnaW4nIDogJ291dCc7XG4gICAgICAgICAgICBpbnB1dC5hZGRpdGlvbmFsRXZlbnQgPSB0aGlzLm9wdGlvbnMuZXZlbnQgKyBpbk91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFByZXNzXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBmb3IgeCBtcyB3aXRob3V0IGFueSBtb3ZlbWVudC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQcmVzc1JlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcbn1cblxuaW5oZXJpdChQcmVzc1JlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFByZXNzUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncHJlc3MnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGltZTogMjUxLCAvLyBtaW5pbWFsIHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgcHJlc3NlZFxuICAgICAgICB0aHJlc2hvbGQ6IDkgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9BVVRPXTtcbiAgICB9LFxuXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPiBvcHRpb25zLnRpbWU7XG5cbiAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcblxuICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICghdmFsaWRNb3ZlbWVudCB8fCAhdmFsaWRQb2ludGVycyB8fCAoaW5wdXQuZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgIXZhbGlkVGltZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcbiAgICAgICAgICAgIH0sIG9wdGlvbnMudGltZSwgdGhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTVEFURV9SRUNPR05JWkVEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXQgJiYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArICd1cCcsIGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuLyoqXG4gKiBSb3RhdGVcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVyIGFyZSBtb3ZpbmcgaW4gYSBjaXJjdWxhciBtb3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFJvdGF0ZVJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChSb3RhdGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUm90YXRlUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncm90YXRlJyxcbiAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICBwb2ludGVyczogMlxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQucm90YXRpb24pID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFN3aXBlXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgbW92aW5nIGZhc3QgKHZlbG9jaXR5KSwgd2l0aCBlbm91Z2ggZGlzdGFuY2UgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBTd2lwZVJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChTd2lwZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBTd2lwZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3N3aXBlJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgdmVsb2NpdHk6IDAuMyxcbiAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCxcbiAgICAgICAgcG9pbnRlcnM6IDFcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gUGFuUmVjb2duaXplci5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgdmVsb2NpdHk7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIChESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCkpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5O1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVg7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIGRpcmVjdGlvbiAmIGlucHV0Lm9mZnNldERpcmVjdGlvbiAmJlxuICAgICAgICAgICAgaW5wdXQuZGlzdGFuY2UgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkICYmXG4gICAgICAgICAgICBpbnB1dC5tYXhQb2ludGVycyA9PSB0aGlzLm9wdGlvbnMucG9pbnRlcnMgJiZcbiAgICAgICAgICAgIGFicyh2ZWxvY2l0eSkgPiB0aGlzLm9wdGlvbnMudmVsb2NpdHkgJiYgaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0Lm9mZnNldERpcmVjdGlvbik7XG4gICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbiwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQSB0YXAgaXMgZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG9pbmcgYSBzbWFsbCB0YXAvY2xpY2suIE11bHRpcGxlIHRhcHMgYXJlIHJlY29nbml6ZWQgaWYgdGhleSBvY2N1clxuICogYmV0d2VlbiB0aGUgZ2l2ZW4gaW50ZXJ2YWwgYW5kIHBvc2l0aW9uLiBUaGUgZGVsYXkgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHJlY29nbml6ZSBtdWx0aS10YXBzIHdpdGhvdXQgZmlyaW5nXG4gKiBhIHNpbmdsZSB0YXAuXG4gKlxuICogVGhlIGV2ZW50RGF0YSBmcm9tIHRoZSBlbWl0dGVkIGV2ZW50IGNvbnRhaW5zIHRoZSBwcm9wZXJ0eSBgdGFwQ291bnRgLCB3aGljaCBjb250YWlucyB0aGUgYW1vdW50IG9mXG4gKiBtdWx0aS10YXBzIGJlaW5nIHJlY29nbml6ZWQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gVGFwUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyBwcmV2aW91cyB0aW1lIGFuZCBjZW50ZXIsXG4gICAgLy8gdXNlZCBmb3IgdGFwIGNvdW50aW5nXG4gICAgdGhpcy5wVGltZSA9IGZhbHNlO1xuICAgIHRoaXMucENlbnRlciA9IGZhbHNlO1xuXG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcbiAgICB0aGlzLmNvdW50ID0gMDtcbn1cblxuaW5oZXJpdChUYXBSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3RhcCcsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICB0YXBzOiAxLFxuICAgICAgICBpbnRlcnZhbDogMzAwLCAvLyBtYXggdGltZSBiZXR3ZWVuIHRoZSBtdWx0aS10YXAgdGFwc1xuICAgICAgICB0aW1lOiAyNTAsIC8vIG1heCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIGRvd24gKGxpa2UgZmluZ2VyIG9uIHRoZSBzY3JlZW4pXG4gICAgICAgIHRocmVzaG9sZDogOSwgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcbiAgICAgICAgcG9zVGhyZXNob2xkOiAxMCAvLyBhIG11bHRpLXRhcCBjYW4gYmUgYSBiaXQgb2ZmIHRoZSBpbml0aWFsIHBvc2l0aW9uXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OXTtcbiAgICB9LFxuXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgdmFyIHZhbGlkUG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcbiAgICAgICAgdmFyIHZhbGlkVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMucmVzZXQoKTtcblxuICAgICAgICBpZiAoKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSAmJiAodGhpcy5jb3VudCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICh2YWxpZE1vdmVtZW50ICYmIHZhbGlkVG91Y2hUaW1lICYmIHZhbGlkUG9pbnRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbGlkSW50ZXJ2YWwgPSB0aGlzLnBUaW1lID8gKGlucHV0LnRpbWVTdGFtcCAtIHRoaXMucFRpbWUgPCBvcHRpb25zLmludGVydmFsKSA6IHRydWU7XG4gICAgICAgICAgICB2YXIgdmFsaWRNdWx0aVRhcCA9ICF0aGlzLnBDZW50ZXIgfHwgZ2V0RGlzdGFuY2UodGhpcy5wQ2VudGVyLCBpbnB1dC5jZW50ZXIpIDwgb3B0aW9ucy5wb3NUaHJlc2hvbGQ7XG5cbiAgICAgICAgICAgIHRoaXMucFRpbWUgPSBpbnB1dC50aW1lU3RhbXA7XG4gICAgICAgICAgICB0aGlzLnBDZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG5cbiAgICAgICAgICAgIGlmICghdmFsaWRNdWx0aVRhcCB8fCAhdmFsaWRJbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgICAgIC8vIGlmIHRhcCBjb3VudCBtYXRjaGVzIHdlIGhhdmUgcmVjb2duaXplZCBpdCxcbiAgICAgICAgICAgIC8vIGVsc2UgaXQgaGFzIGJlZ2FuIHJlY29nbml6aW5nLi4uXG4gICAgICAgICAgICB2YXIgdGFwQ291bnQgPSB0aGlzLmNvdW50ICUgb3B0aW9ucy50YXBzO1xuICAgICAgICAgICAgaWYgKHRhcENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gZmFpbGluZyByZXF1aXJlbWVudHMsIGltbWVkaWF0ZWx5IHRyaWdnZXIgdGhlIHRhcCBldmVudFxuICAgICAgICAgICAgICAgIC8vIG9yIHdhaXQgYXMgbG9uZyBhcyB0aGUgbXVsdGl0YXAgaW50ZXJ2YWwgdG8gdHJpZ2dlclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgZmFpbFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zLmludGVydmFsLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgdGhpcy5faW5wdXQudGFwQ291bnQgPSB0aGlzLmNvdW50O1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuLyoqXG4gKiBTaW1wbGUgd2F5IHRvIGNyZWF0ZSBhIG1hbmFnZXIgd2l0aCBhIGRlZmF1bHQgc2V0IG9mIHJlY29nbml6ZXJzLlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEhhbW1lcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy5yZWNvZ25pemVycyA9IGlmVW5kZWZpbmVkKG9wdGlvbnMucmVjb2duaXplcnMsIEhhbW1lci5kZWZhdWx0cy5wcmVzZXQpO1xuICAgIHJldHVybiBuZXcgTWFuYWdlcihlbGVtZW50LCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuSGFtbWVyLlZFUlNJT04gPSAnMi4wLjcnO1xuXG4vKipcbiAqIGRlZmF1bHQgc2V0dGluZ3NcbiAqIEBuYW1lc3BhY2VcbiAqL1xuSGFtbWVyLmRlZmF1bHRzID0ge1xuICAgIC8qKlxuICAgICAqIHNldCBpZiBET00gZXZlbnRzIGFyZSBiZWluZyB0cmlnZ2VyZWQuXG4gICAgICogQnV0IHRoaXMgaXMgc2xvd2VyIGFuZCB1bnVzZWQgYnkgc2ltcGxlIGltcGxlbWVudGF0aW9ucywgc28gZGlzYWJsZWQgYnkgZGVmYXVsdC5cbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGRvbUV2ZW50czogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eS9mYWxsYmFjay5cbiAgICAgKiBXaGVuIHNldCB0byBgY29tcHV0ZWAgaXQgd2lsbCBtYWdpY2FsbHkgc2V0IHRoZSBjb3JyZWN0IHZhbHVlIGJhc2VkIG9uIHRoZSBhZGRlZCByZWNvZ25pemVycy5cbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqIEBkZWZhdWx0IGNvbXB1dGVcbiAgICAgKi9cbiAgICB0b3VjaEFjdGlvbjogVE9VQ0hfQUNUSU9OX0NPTVBVVEUsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgZW5hYmxlOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogRVhQRVJJTUVOVEFMIEZFQVRVUkUgLS0gY2FuIGJlIHJlbW92ZWQvY2hhbmdlZFxuICAgICAqIENoYW5nZSB0aGUgcGFyZW50IGlucHV0IHRhcmdldCBlbGVtZW50LlxuICAgICAqIElmIE51bGwsIHRoZW4gaXQgaXMgYmVpbmcgc2V0IHRoZSB0byBtYWluIGVsZW1lbnQuXG4gICAgICogQHR5cGUge051bGx8RXZlbnRUYXJnZXR9XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0VGFyZ2V0OiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogZm9yY2UgYW4gaW5wdXQgY2xhc3NcbiAgICAgKiBAdHlwZSB7TnVsbHxGdW5jdGlvbn1cbiAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgaW5wdXRDbGFzczogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgcmVjb2duaXplciBzZXR1cCB3aGVuIGNhbGxpbmcgYEhhbW1lcigpYFxuICAgICAqIFdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlciB0aGVzZSB3aWxsIGJlIHNraXBwZWQuXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuICAgIHByZXNldDogW1xuICAgICAgICAvLyBSZWNvZ25pemVyQ2xhc3MsIG9wdGlvbnMsIFtyZWNvZ25pemVXaXRoLCAuLi5dLCBbcmVxdWlyZUZhaWx1cmUsIC4uLl1cbiAgICAgICAgW1JvdGF0ZVJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfV0sXG4gICAgICAgIFtQaW5jaFJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfSwgWydyb3RhdGUnXV0sXG4gICAgICAgIFtTd2lwZVJlY29nbml6ZXIsIHtkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMfV0sXG4gICAgICAgIFtQYW5SZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH0sIFsnc3dpcGUnXV0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyXSxcbiAgICAgICAgW1RhcFJlY29nbml6ZXIsIHtldmVudDogJ2RvdWJsZXRhcCcsIHRhcHM6IDJ9LCBbJ3RhcCddXSxcbiAgICAgICAgW1ByZXNzUmVjb2duaXplcl1cbiAgICBdLFxuXG4gICAgLyoqXG4gICAgICogU29tZSBDU1MgcHJvcGVydGllcyBjYW4gYmUgdXNlZCB0byBpbXByb3ZlIHRoZSB3b3JraW5nIG9mIEhhbW1lci5cbiAgICAgKiBBZGQgdGhlbSB0byB0aGlzIG1ldGhvZCBhbmQgdGhleSB3aWxsIGJlIHNldCB3aGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIuXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqL1xuICAgIGNzc1Byb3BzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyB0ZXh0IHNlbGVjdGlvbiB0byBpbXByb3ZlIHRoZSBkcmFnZ2luZyBnZXN0dXJlLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlIHRoZSBXaW5kb3dzIFBob25lIGdyaXBwZXJzIHdoZW4gcHJlc3NpbmcgYW4gZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB0b3VjaFNlbGVjdDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyB0aGUgZGVmYXVsdCBjYWxsb3V0IHNob3duIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0LlxuICAgICAgICAgKiBPbiBpT1MsIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0IHN1Y2ggYXMgYSBsaW5rLCBTYWZhcmkgZGlzcGxheXNcbiAgICAgICAgICogYSBjYWxsb3V0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGxpbmsuIFRoaXMgcHJvcGVydHkgYWxsb3dzIHlvdSB0byBkaXNhYmxlIHRoYXQgY2FsbG91dC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB0b3VjaENhbGxvdXQ6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgem9vbWluZyBpcyBlbmFibGVkLiBVc2VkIGJ5IElFMTA+XG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgY29udGVudFpvb21pbmc6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoYXQgYW4gZW50aXJlIGVsZW1lbnQgc2hvdWxkIGJlIGRyYWdnYWJsZSBpbnN0ZWFkIG9mIGl0cyBjb250ZW50cy4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJEcmFnOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXJyaWRlcyB0aGUgaGlnaGxpZ2h0IGNvbG9yIHNob3duIHdoZW4gdGhlIHVzZXIgdGFwcyBhIGxpbmsgb3IgYSBKYXZhU2NyaXB0XG4gICAgICAgICAqIGNsaWNrYWJsZSBlbGVtZW50IGluIGlPUy4gVGhpcyBwcm9wZXJ0eSBvYmV5cyB0aGUgYWxwaGEgdmFsdWUsIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ3JnYmEoMCwwLDAsMCknXG4gICAgICAgICAqL1xuICAgICAgICB0YXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknXG4gICAgfVxufTtcblxudmFyIFNUT1AgPSAxO1xudmFyIEZPUkNFRF9TVE9QID0gMjtcblxuLyoqXG4gKiBNYW5hZ2VyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gTWFuYWdlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCBIYW1tZXIuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0ID0gdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0IHx8IGVsZW1lbnQ7XG5cbiAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgdGhpcy5zZXNzaW9uID0ge307XG4gICAgdGhpcy5yZWNvZ25pemVycyA9IFtdO1xuICAgIHRoaXMub2xkQ3NzUHJvcHMgPSB7fTtcblxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5pbnB1dCA9IGNyZWF0ZUlucHV0SW5zdGFuY2UodGhpcyk7XG4gICAgdGhpcy50b3VjaEFjdGlvbiA9IG5ldyBUb3VjaEFjdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuXG4gICAgdG9nZ2xlQ3NzUHJvcHModGhpcywgdHJ1ZSk7XG5cbiAgICBlYWNoKHRoaXMub3B0aW9ucy5yZWNvZ25pemVycywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVjb2duaXplciA9IHRoaXMuYWRkKG5ldyAoaXRlbVswXSkoaXRlbVsxXSkpO1xuICAgICAgICBpdGVtWzJdICYmIHJlY29nbml6ZXIucmVjb2duaXplV2l0aChpdGVtWzJdKTtcbiAgICAgICAgaXRlbVszXSAmJiByZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKGl0ZW1bM10pO1xuICAgIH0sIHRoaXMpO1xufVxuXG5NYW5hZ2VyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybnMge01hbmFnZXJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIE9wdGlvbnMgdGhhdCBuZWVkIGEgbGl0dGxlIG1vcmUgc2V0dXBcbiAgICAgICAgaWYgKG9wdGlvbnMudG91Y2hBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW5wdXRUYXJnZXQpIHtcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVpbml0aWFsaXplXG4gICAgICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQudGFyZ2V0ID0gb3B0aW9ucy5pbnB1dFRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuaW5pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBzdG9wIHJlY29nbml6aW5nIGZvciB0aGlzIHNlc3Npb24uXG4gICAgICogVGhpcyBzZXNzaW9uIHdpbGwgYmUgZGlzY2FyZGVkLCB3aGVuIGEgbmV3IFtpbnB1dF1zdGFydCBldmVudCBpcyBmaXJlZC5cbiAgICAgKiBXaGVuIGZvcmNlZCwgdGhlIHJlY29nbml6ZXIgY3ljbGUgaXMgc3RvcHBlZCBpbW1lZGlhdGVseS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmb3JjZV1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICB0aGlzLnNlc3Npb24uc3RvcHBlZCA9IGZvcmNlID8gRk9SQ0VEX1NUT1AgOiBTVE9QO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBydW4gdGhlIHJlY29nbml6ZXJzIVxuICAgICAqIGNhbGxlZCBieSB0aGUgaW5wdXRIYW5kbGVyIGZ1bmN0aW9uIG9uIGV2ZXJ5IG1vdmVtZW50IG9mIHRoZSBwb2ludGVycyAodG91Y2hlcylcbiAgICAgKiBpdCB3YWxrcyB0aHJvdWdoIGFsbCB0aGUgcmVjb2duaXplcnMgYW5kIHRyaWVzIHRvIGRldGVjdCB0aGUgZ2VzdHVyZSB0aGF0IGlzIGJlaW5nIG1hZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIGlmIChzZXNzaW9uLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJ1biB0aGUgdG91Y2gtYWN0aW9uIHBvbHlmaWxsXG4gICAgICAgIHRoaXMudG91Y2hBY3Rpb24ucHJldmVudERlZmF1bHRzKGlucHV0RGF0YSk7XG5cbiAgICAgICAgdmFyIHJlY29nbml6ZXI7XG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cbiAgICAgICAgLy8gdGhpcyBob2xkcyB0aGUgcmVjb2duaXplciB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgIC8vIHNvIHRoZSByZWNvZ25pemVyJ3Mgc3RhdGUgbmVlZHMgdG8gYmUgQkVHQU4sIENIQU5HRUQsIEVOREVEIG9yIFJFQ09HTklaRURcbiAgICAgICAgLy8gaWYgbm8gcmVjb2duaXplciBpcyBkZXRlY3RpbmcgYSB0aGluZywgaXQgaXMgc2V0IHRvIGBudWxsYFxuICAgICAgICB2YXIgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplcjtcblxuICAgICAgICAvLyByZXNldCB3aGVuIHRoZSBsYXN0IHJlY29nbml6ZXIgaXMgcmVjb2duaXplZFxuICAgICAgICAvLyBvciB3aGVuIHdlJ3JlIGluIGEgbmV3IHNlc3Npb25cbiAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyIHx8IChjdXJSZWNvZ25pemVyICYmIGN1clJlY29nbml6ZXIuc3RhdGUgJiBTVEFURV9SRUNPR05JWkVEKSkge1xuICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgcmVjb2duaXplcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWNvZ25pemVyID0gcmVjb2duaXplcnNbaV07XG5cbiAgICAgICAgICAgIC8vIGZpbmQgb3V0IGlmIHdlIGFyZSBhbGxvd2VkIHRyeSB0byByZWNvZ25pemUgdGhlIGlucHV0IGZvciB0aGlzIG9uZS5cbiAgICAgICAgICAgIC8vIDEuICAgYWxsb3cgaWYgdGhlIHNlc3Npb24gaXMgTk9UIGZvcmNlZCBzdG9wcGVkIChzZWUgdGhlIC5zdG9wKCkgbWV0aG9kKVxuICAgICAgICAgICAgLy8gMi4gICBhbGxvdyBpZiB3ZSBzdGlsbCBoYXZlbid0IHJlY29nbml6ZWQgYSBnZXN0dXJlIGluIHRoaXMgc2Vzc2lvbiwgb3IgdGhlIHRoaXMgcmVjb2duaXplciBpcyB0aGUgb25lXG4gICAgICAgICAgICAvLyAgICAgIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgICAgICAgIC8vIDMuICAgYWxsb3cgaWYgdGhlIHJlY29nbml6ZXIgaXMgYWxsb3dlZCB0byBydW4gc2ltdWx0YW5lb3VzIHdpdGggdGhlIGN1cnJlbnQgcmVjb2duaXplZCByZWNvZ25pemVyLlxuICAgICAgICAgICAgLy8gICAgICB0aGlzIGNhbiBiZSBzZXR1cCB3aXRoIHRoZSBgcmVjb2duaXplV2l0aCgpYCBtZXRob2Qgb24gdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkICE9PSBGT1JDRURfU1RPUCAmJiAoIC8vIDFcbiAgICAgICAgICAgICAgICAgICAgIWN1clJlY29nbml6ZXIgfHwgcmVjb2duaXplciA9PSBjdXJSZWNvZ25pemVyIHx8IC8vIDJcbiAgICAgICAgICAgICAgICAgICAgcmVjb2duaXplci5jYW5SZWNvZ25pemVXaXRoKGN1clJlY29nbml6ZXIpKSkgeyAvLyAzXG4gICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemUoaW5wdXREYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjb2duaXplci5yZXNldCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0aGUgcmVjb2duaXplciBoYXMgYmVlbiByZWNvZ25pemluZyB0aGUgaW5wdXQgYXMgYSB2YWxpZCBnZXN0dXJlLCB3ZSB3YW50IHRvIHN0b3JlIHRoaXMgb25lIGFzIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgcmVjb2duaXplci4gYnV0IG9ubHkgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSByZWNvZ25pemVyXG4gICAgICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgJiYgcmVjb2duaXplci5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCkpIHtcbiAgICAgICAgICAgICAgICBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBnZXQgYSByZWNvZ25pemVyIGJ5IGl0cyBldmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxOdWxsfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAocmVjb2duaXplciBpbnN0YW5jZW9mIFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvZ25pemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHJlY29nbml6ZXJzW2ldLm9wdGlvbnMuZXZlbnQgPT0gcmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogYWRkIGEgcmVjb2duaXplciB0byB0aGUgbWFuYWdlclxuICAgICAqIGV4aXN0aW5nIHJlY29nbml6ZXJzIHdpdGggdGhlIHNhbWUgZXZlbnQgbmFtZSB3aWxsIGJlIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxNYW5hZ2VyfVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ2FkZCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSBleGlzdGluZ1xuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChyZWNvZ25pemVyLm9wdGlvbnMuZXZlbnQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGV4aXN0aW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVjb2duaXplcnMucHVzaChyZWNvZ25pemVyKTtcbiAgICAgICAgcmVjb2duaXplci5tYW5hZ2VyID0gdGhpcztcblxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGEgcmVjb2duaXplciBieSBuYW1lIG9yIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHJlbW92ZTogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ3JlbW92ZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlY29nbml6ZXIgPSB0aGlzLmdldChyZWNvZ25pemVyKTtcblxuICAgICAgICAvLyBsZXQncyBtYWtlIHN1cmUgdGhpcyByZWNvZ25pemVyIGV4aXN0c1xuICAgICAgICBpZiAocmVjb2duaXplcikge1xuICAgICAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkocmVjb2duaXplcnMsIHJlY29nbml6ZXIpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVjb2duaXplcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGJpbmQgZXZlbnRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSA9IGhhbmRsZXJzW2V2ZW50XSB8fCBbXTtcbiAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVuYmluZCBldmVudCwgbGVhdmUgZW1pdCBibGFuayB0byByZW1vdmUgYWxsIGhhbmRsZXJzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtoYW5kbGVyXVxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBoYW5kbGVyc1tldmVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSAmJiBoYW5kbGVyc1tldmVudF0uc3BsaWNlKGluQXJyYXkoaGFuZGxlcnNbZXZlbnRdLCBoYW5kbGVyKSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZW1pdCBldmVudCB0byB0aGUgbGlzdGVuZXJzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBlbWl0OiBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICAgICAvLyB3ZSBhbHNvIHdhbnQgdG8gdHJpZ2dlciBkb20gZXZlbnRzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZG9tRXZlbnRzKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gaGFuZGxlcnMsIHNvIHNraXAgaXQgYWxsXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdICYmIHRoaXMuaGFuZGxlcnNbZXZlbnRdLnNsaWNlKCk7XG4gICAgICAgIGlmICghaGFuZGxlcnMgfHwgIWhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50eXBlID0gZXZlbnQ7XG4gICAgICAgIGRhdGEucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRhdGEuc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgaGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tpXShkYXRhKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkZXN0cm95IHRoZSBtYW5hZ2VyIGFuZCB1bmJpbmRzIGFsbCBldmVudHNcbiAgICAgKiBpdCBkb2Vzbid0IHVuYmluZCBkb20gZXZlbnRzLCB0aGF0IGlzIHRoZSB1c2VyIG93biByZXNwb25zaWJpbGl0eVxuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgJiYgdG9nZ2xlQ3NzUHJvcHModGhpcywgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0ge307XG4gICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgIH1cbn07XG5cbi8qKlxuICogYWRkL3JlbW92ZSB0aGUgY3NzIHByb3BlcnRpZXMgYXMgZGVmaW5lZCBpbiBtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHNcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtCb29sZWFufSBhZGRcbiAqL1xuZnVuY3Rpb24gdG9nZ2xlQ3NzUHJvcHMobWFuYWdlciwgYWRkKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgaWYgKCFlbGVtZW50LnN0eWxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHByb3A7XG4gICAgZWFjaChtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHMsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHByb3AgPSBwcmVmaXhlZChlbGVtZW50LnN0eWxlLCBuYW1lKTtcbiAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSA9IGVsZW1lbnQuc3R5bGVbcHJvcF07XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSB8fCAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghYWRkKSB7XG4gICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHMgPSB7fTtcbiAgICB9XG59XG5cbi8qKlxuICogdHJpZ2dlciBkb20gZXZlbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAqL1xuZnVuY3Rpb24gdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgdmFyIGdlc3R1cmVFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGdlc3R1cmVFdmVudC5pbml0RXZlbnQoZXZlbnQsIHRydWUsIHRydWUpO1xuICAgIGdlc3R1cmVFdmVudC5nZXN0dXJlID0gZGF0YTtcbiAgICBkYXRhLnRhcmdldC5kaXNwYXRjaEV2ZW50KGdlc3R1cmVFdmVudCk7XG59XG5cbmFzc2lnbihIYW1tZXIsIHtcbiAgICBJTlBVVF9TVEFSVDogSU5QVVRfU1RBUlQsXG4gICAgSU5QVVRfTU9WRTogSU5QVVRfTU9WRSxcbiAgICBJTlBVVF9FTkQ6IElOUFVUX0VORCxcbiAgICBJTlBVVF9DQU5DRUw6IElOUFVUX0NBTkNFTCxcblxuICAgIFNUQVRFX1BPU1NJQkxFOiBTVEFURV9QT1NTSUJMRSxcbiAgICBTVEFURV9CRUdBTjogU1RBVEVfQkVHQU4sXG4gICAgU1RBVEVfQ0hBTkdFRDogU1RBVEVfQ0hBTkdFRCxcbiAgICBTVEFURV9FTkRFRDogU1RBVEVfRU5ERUQsXG4gICAgU1RBVEVfUkVDT0dOSVpFRDogU1RBVEVfUkVDT0dOSVpFRCxcbiAgICBTVEFURV9DQU5DRUxMRUQ6IFNUQVRFX0NBTkNFTExFRCxcbiAgICBTVEFURV9GQUlMRUQ6IFNUQVRFX0ZBSUxFRCxcblxuICAgIERJUkVDVElPTl9OT05FOiBESVJFQ1RJT05fTk9ORSxcbiAgICBESVJFQ1RJT05fTEVGVDogRElSRUNUSU9OX0xFRlQsXG4gICAgRElSRUNUSU9OX1JJR0hUOiBESVJFQ1RJT05fUklHSFQsXG4gICAgRElSRUNUSU9OX1VQOiBESVJFQ1RJT05fVVAsXG4gICAgRElSRUNUSU9OX0RPV046IERJUkVDVElPTl9ET1dOLFxuICAgIERJUkVDVElPTl9IT1JJWk9OVEFMOiBESVJFQ1RJT05fSE9SSVpPTlRBTCxcbiAgICBESVJFQ1RJT05fVkVSVElDQUw6IERJUkVDVElPTl9WRVJUSUNBTCxcbiAgICBESVJFQ1RJT05fQUxMOiBESVJFQ1RJT05fQUxMLFxuXG4gICAgTWFuYWdlcjogTWFuYWdlcixcbiAgICBJbnB1dDogSW5wdXQsXG4gICAgVG91Y2hBY3Rpb246IFRvdWNoQWN0aW9uLFxuXG4gICAgVG91Y2hJbnB1dDogVG91Y2hJbnB1dCxcbiAgICBNb3VzZUlucHV0OiBNb3VzZUlucHV0LFxuICAgIFBvaW50ZXJFdmVudElucHV0OiBQb2ludGVyRXZlbnRJbnB1dCxcbiAgICBUb3VjaE1vdXNlSW5wdXQ6IFRvdWNoTW91c2VJbnB1dCxcbiAgICBTaW5nbGVUb3VjaElucHV0OiBTaW5nbGVUb3VjaElucHV0LFxuXG4gICAgUmVjb2duaXplcjogUmVjb2duaXplcixcbiAgICBBdHRyUmVjb2duaXplcjogQXR0clJlY29nbml6ZXIsXG4gICAgVGFwOiBUYXBSZWNvZ25pemVyLFxuICAgIFBhbjogUGFuUmVjb2duaXplcixcbiAgICBTd2lwZTogU3dpcGVSZWNvZ25pemVyLFxuICAgIFBpbmNoOiBQaW5jaFJlY29nbml6ZXIsXG4gICAgUm90YXRlOiBSb3RhdGVSZWNvZ25pemVyLFxuICAgIFByZXNzOiBQcmVzc1JlY29nbml6ZXIsXG5cbiAgICBvbjogYWRkRXZlbnRMaXN0ZW5lcnMsXG4gICAgb2ZmOiByZW1vdmVFdmVudExpc3RlbmVycyxcbiAgICBlYWNoOiBlYWNoLFxuICAgIG1lcmdlOiBtZXJnZSxcbiAgICBleHRlbmQ6IGV4dGVuZCxcbiAgICBhc3NpZ246IGFzc2lnbixcbiAgICBpbmhlcml0OiBpbmhlcml0LFxuICAgIGJpbmRGbjogYmluZEZuLFxuICAgIHByZWZpeGVkOiBwcmVmaXhlZFxufSk7XG5cbi8vIHRoaXMgcHJldmVudHMgZXJyb3JzIHdoZW4gSGFtbWVyIGlzIGxvYWRlZCBpbiB0aGUgcHJlc2VuY2Ugb2YgYW4gQU1EXG4vLyAgc3R5bGUgbG9hZGVyIGJ1dCBieSBzY3JpcHQgdGFnLCBub3QgYnkgdGhlIGxvYWRlci5cbnZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fSkpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbmZyZWVHbG9iYWwuSGFtbWVyID0gSGFtbWVyO1xuXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gSGFtbWVyO1xuICAgIH0pO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBIYW1tZXI7XG59IGVsc2Uge1xuICAgIHdpbmRvd1tleHBvcnROYW1lXSA9IEhhbW1lcjtcbn1cblxufSkod2luZG93LCBkb2N1bWVudCwgJ0hhbW1lcicpO1xuIiwiLyohXG4gKiAgaG93bGVyLmpzIHYyLjAuMlxuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDE2LCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuIEFsbCBjb250YWluZWQgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcHBseVxuICAgKiB0byBhbGwgc291bmRzIHRoYXQgYXJlIGN1cnJlbnRseSBwbGF5aW5nIG9yIHdpbGwgYmUgaW4gdGhlIGZ1dHVyZS5cbiAgICovXG4gIHZhciBIb3dsZXJHbG9iYWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBJbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fY29kZWNzID0ge307XG4gICAgICBzZWxmLl9ob3dscyA9IFtdO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IDE7XG4gICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheXRocm91Z2gnO1xuICAgICAgc2VsZi5fbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IpID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGw7XG5cbiAgICAgIC8vIFB1YmxpYyBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5tYXN0ZXJHYWluID0gbnVsbDtcbiAgICAgIHNlbGYubm9BdWRpbyA9IGZhbHNlO1xuICAgICAgc2VsZi51c2luZ1dlYkF1ZGlvID0gdHJ1ZTtcbiAgICAgIHNlbGYuYXV0b1N1c3BlbmQgPSB0cnVlO1xuICAgICAgc2VsZi5jdHggPSBudWxsO1xuXG4gICAgICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgYXV0byBpT1MgZW5hYmxlci5cbiAgICAgIHNlbGYubW9iaWxlQXV0b0VuYWJsZSA9IHRydWU7XG5cbiAgICAgIC8vIFNldHVwIHRoZSB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAgc2VsZi5fc2V0dXAoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGdsb2JhbCB2b2x1bWUgZm9yIGFsbCBzb3VuZHMuXG4gICAgICogQHBhcmFtICB7RmxvYXR9IHZvbCBWb2x1bWUgZnJvbSAwLjAgdG8gMS4wLlxuICAgICAqIEByZXR1cm4ge0hvd2xlci9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKHZvbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZvbCA9IHBhcnNlRmxvYXQodm9sKTtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIGFueSBvZiB0aGUgbm9kZXMgaWYgd2UgYXJlIG11dGVkLlxuICAgICAgICBpZiAoc2VsZi5fbXV0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnZhbHVlID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBjaGFuZ2Ugdm9sdW1lIGZvciBhbGwgSFRNTDUgYXVkaW8gbm9kZXMuXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hhbmdlIHRoZSB2b2x1bWVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIHZvbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbXV0aW5nIGFuZCB1bm11dGluZyBnbG9iYWxseS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBJcyBtdXRlZCBvciBub3QuXG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAvLyBXaXRoIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIG11dGUgdGhlIG1hc3RlciBnYWluLlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi52YWx1ZSA9IG11dGVkID8gMCA6IHNlbGYuX3ZvbHVtZTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBtdXRlIGFsbCBIVE1MNSBBdWRpbyBub2Rlcy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIG1hcmsgdGhlIGF1ZGlvIG5vZGUgYXMgbXV0ZWQuXG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSAobXV0ZWQpID8gdHJ1ZSA6IHNvdW5kLl9tdXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSBhbGwgY3VycmVudGx5IGxvYWRlZCBIb3dsIG9iamVjdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0udW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgdG8gbWFrZSBzdXJlIGl0IGlzIGZ1bGx5IHJlc2V0LlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbyAmJiBzZWxmLmN0eCAmJiB0eXBlb2Ygc2VsZi5jdHguY2xvc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LmNsb3NlKCk7XG4gICAgICAgIHNlbGYuY3R4ID0gbnVsbDtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBjb2RlYyBzdXBwb3J0IG9mIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV4dCBBdWRpbyBmaWxlIGV4dGVudGlvbi5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNvZGVjczogZnVuY3Rpb24oZXh0KSB7XG4gICAgICByZXR1cm4gKHRoaXMgfHwgSG93bGVyKS5fY29kZWNzW2V4dC5yZXBsYWNlKC9eeC0vLCAnJyldO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIHN1c3BlbmQvcmVzdW1lIHN0YXRlIG9mIHRoZSBBdWRpb0NvbnRleHQuXG4gICAgICBzZWxmLnN0YXRlID0gc2VsZi5jdHggPyBzZWxmLmN0eC5zdGF0ZSB8fCAncnVubmluZycgOiAncnVubmluZyc7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcbiAgICAgIHNlbGYuX2F1dG9TdXNwZW5kKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cbiAgICAgIGlmICghc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIE5vIGF1ZGlvIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHN5c3RlbSBpZiBub0F1ZGlvIGlzIHNldCB0byB0cnVlLlxuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FucGxheXRocm91Z2ggZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0Lm9uY2FucGxheXRocm91Z2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuICAgICAgICBpZiAodGVzdC5tdXRlZCkge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0ZWQgY29kZWNzLlxuICAgICAgaWYgKCFzZWxmLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fc2V0dXBDb2RlY3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBicm93c2VyIHN1cHBvcnQgZm9yIHZhcmlvdXMgY29kZWNzIGFuZCBjYWNoZSB0aGUgcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwQ29kZWNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2YXIgYXVkaW9UZXN0ID0gbnVsbDtcblxuICAgICAgLy8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1Rlc3QgPSAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykgPyBuZXcgQXVkaW8oKSA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXVkaW9UZXN0IHx8IHR5cGVvZiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHZhciBtcGVnVGVzdCA9IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXBlZzsnKS5yZXBsYWNlKC9ebm8kLywgJycpO1xuXG4gICAgICAvLyBPcGVyYSB2ZXJzaW9uIDwzMyBoYXMgbWl4ZWQgTVAzIHN1cHBvcnQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGFuZCBibG9jayBpdC5cbiAgICAgIHZhciBjaGVja09wZXJhID0gc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09QUlxcLyhbMC02XS4pL2cpO1xuICAgICAgdmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcblxuICAgICAgc2VsZi5fY29kZWNzID0ge1xuICAgICAgICBtcDM6ICEhKCFpc09sZE9wZXJhICYmIChtcGVnVGVzdCB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wMzsnKS5yZXBsYWNlKC9ebm8kLywgJycpKSksXG4gICAgICAgIG1wZWc6ICEhbXBlZ1Rlc3QsXG4gICAgICAgIG9wdXM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cIm9wdXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nZzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2E6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2F2OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2OyBjb2RlY3M9XCIxXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBhYWM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgY2FmOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1jYWY7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRhOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtcDQ6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYmE6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYm06ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGRvbGJ5OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9XCJlYy0zXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBmbGFjOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtZmxhYzsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2ZsYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJylcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb2JpbGUgYnJvd3NlcnMgd2lsbCBvbmx5IGFsbG93IGF1ZGlvIHRvIGJlIHBsYXllZCBhZnRlciBhIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHVubG9jayBhdWRpbyBvbiB0aGUgZmlyc3QgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBDb25jZXB0IGZyb206IGh0dHA6Ly9wYXVsYmFrYXVzLmNvbS90dXRvcmlhbHMvaHRtbDUvd2ViLWF1ZGlvLW9uLWlvcy9cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2VuYWJsZU1vYmlsZUF1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIE9ubHkgcnVuIHRoaXMgb24gbW9iaWxlIGRldmljZXMgaWYgYXVkaW8gaXNuJ3QgYWxyZWFkeSBlYW5ibGVkLlxuICAgICAgdmFyIGlzTW9iaWxlID0gL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZHxCbGFja0JlcnJ5fEJCMTB8U2lsa3xNb2JpL2kudGVzdChzZWxmLl9uYXZpZ2F0b3IgJiYgc2VsZi5fbmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB2YXIgaXNUb3VjaCA9ICEhKCgnb250b3VjaGVuZCcgaW4gd2luZG93KSB8fCAoc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDApIHx8IChzZWxmLl9uYXZpZ2F0b3IgJiYgc2VsZi5fbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XG4gICAgICBpZiAoc2VsZi5fbW9iaWxlRW5hYmxlZCB8fCAhc2VsZi5jdHggfHwgKCFpc01vYmlsZSAmJiAhaXNUb3VjaCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tb2JpbGVFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIFNvbWUgbW9iaWxlIGRldmljZXMvcGxhdGZvcm1zIGhhdmUgZGlzdG9ydGlvbiBpc3N1ZXMgd2hlbiBvcGVuaW5nL2Nsb3NpbmcgdGFicyBhbmQvb3Igd2ViIHZpZXdzLlxuICAgICAgLy8gQnVncyBpbiB0aGUgYnJvd3NlciAoZXNwZWNpYWxseSBNb2JpbGUgU2FmYXJpKSBjYW4gY2F1c2UgdGhlIHNhbXBsZVJhdGUgdG8gY2hhbmdlIGZyb20gNDQxMDAgdG8gNDgwMDAuXG4gICAgICAvLyBCeSBjYWxsaW5nIEhvd2xlci51bmxvYWQoKSwgd2UgY3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB3aXRoIHRoZSBjb3JyZWN0IHNhbXBsZVJhdGUuXG4gICAgICBpZiAoIXNlbGYuX21vYmlsZVVubG9hZGVkICYmIHNlbGYuY3R4LnNhbXBsZVJhdGUgIT09IDQ0MTAwKSB7XG4gICAgICAgIHNlbGYuX21vYmlsZVVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2NyYXRjaCBidWZmZXIgZm9yIGVuYWJsaW5nIGlPUyB0byBkaXNwb3NlIG9mIHdlYiBhdWRpbyBidWZmZXJzIGNvcnJlY3RseSwgYXMgcGVyOlxuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDExOTY4NFxuICAgICAgc2VsZi5fc2NyYXRjaEJ1ZmZlciA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlcigxLCAxLCAyMjA1MCk7XG5cbiAgICAgIC8vIENhbGwgdGhpcyBtZXRob2Qgb24gdG91Y2ggc3RhcnQgdG8gY3JlYXRlIGFuZCBwbGF5IGEgYnVmZmVyLFxuICAgICAgLy8gdGhlbiBjaGVjayBpZiB0aGUgYXVkaW8gYWN0dWFsbHkgcGxheWVkIHRvIGRldGVybWluZSBpZlxuICAgICAgLy8gYXVkaW8gaGFzIG5vdyBiZWVuIHVubG9ja2VkIG9uIGlPUywgQW5kcm9pZCwgZXRjLlxuICAgICAgdmFyIHVubG9jayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyLlxuICAgICAgICB2YXIgc291cmNlID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgIHNvdXJjZS5idWZmZXIgPSBzZWxmLl9zY3JhdGNoQnVmZmVyO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChzZWxmLmN0eC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgZW1wdHkgYnVmZmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzb3VyY2Uubm90ZU9uKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldHVwIGEgdGltZW91dCB0byBjaGVjayB0aGF0IHdlIGFyZSB1bmxvY2tlZCBvbiB0aGUgbmV4dCBldmVudCBsb29wLlxuICAgICAgICBzb3VyY2Uub25lbmRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNvdXJjZS5kaXNjb25uZWN0KDApO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSB1bmxvY2tlZCBzdGF0ZSBhbmQgcHJldmVudCB0aGlzIGNoZWNrIGZyb20gaGFwcGVuaW5nIGFnYWluLlxuICAgICAgICAgIHNlbGYuX21vYmlsZUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIHNlbGYubW9iaWxlQXV0b0VuYWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b3VjaCBzdGFydCBsaXN0ZW5lci5cbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhIHRvdWNoIHN0YXJ0IGxpc3RlbmVyIHRvIGF0dGVtcHQgYW4gdW5sb2NrIGluLlxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSBzdXNwZW5kIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IGFmdGVyIG5vIHNvdW5kIGhhcyBwbGF5ZWQgZm9yIDMwIHNlY29uZHMuXG4gICAgICogVGhpcyBzYXZlcyBwcm9jZXNzaW5nL2VuZXJneSBhbmQgZml4ZXMgdmFyaW91cyBicm93c2VyLXNwZWNpZmljIGJ1Z3Mgd2l0aCBhdWRpbyBnZXR0aW5nIHN0dWNrLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1N1c3BlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQgfHwgIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5zdXNwZW5kID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBhbnkgc291bmRzIGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8c2VsZi5faG93bHNbaV0uX3NvdW5kcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fc291bmRzW2pdLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIHNvdW5kIGhhcyBwbGF5ZWQgYWZ0ZXIgMzAgc2Vjb25kcywgc3VzcGVuZCB0aGUgY29udGV4dC5cbiAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGluZyc7XG4gICAgICAgIHNlbGYuY3R4LnN1c3BlbmQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGVkJztcblxuICAgICAgICAgIGlmIChzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQ7XG4gICAgICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sIDMwMDAwKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVzdW1lIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IHdoZW4gYSBuZXcgc291bmQgaXMgcGxheWVkLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1Jlc3VtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgIHNlbGYuc3RhdGUgPSAncmVzdW1pbmcnO1xuICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAncnVubmluZyc7XG5cbiAgICAgICAgICAvLyBFbWl0IHRvIGFsbCBIb3dscyB0aGF0IHRoZSBhdWRpbyBoYXMgcmVzdW1lZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCdyZXN1bWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kaW5nJykge1xuICAgICAgICBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2V0dXAgdGhlIGdsb2JhbCBhdWRpbyBjb250cm9sbGVyLlxuICB2YXIgSG93bGVyID0gbmV3IEhvd2xlckdsb2JhbCgpO1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYXVkaW8gZ3JvdXAgY29udHJvbGxlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAqL1xuICB2YXIgSG93bCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBubyBzb3VyY2UgaXMgcHJvdmlkZWQuXG4gICAgaWYgKCFvLnNyYyB8fCBvLnNyYy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGFycmF5IG9mIHNvdXJjZSBmaWxlcyBtdXN0IGJlIHBhc3NlZCB3aXRoIGFueSBuZXcgSG93bC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxmLmluaXQobyk7XG4gIH07XG4gIEhvd2wucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgSG93bCBncm91cCBvYmplY3QuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fYXV0b3BsYXkgPSBvLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fZm9ybWF0ID0gKHR5cGVvZiBvLmZvcm1hdCAhPT0gJ3N0cmluZycpID8gby5mb3JtYXQgOiBbby5mb3JtYXRdO1xuICAgICAgc2VsZi5faHRtbDUgPSBvLmh0bWw1IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBvLm11dGUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9sb29wID0gby5sb29wIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fcG9vbCA9IG8ucG9vbCB8fCA1O1xuICAgICAgc2VsZi5fcHJlbG9hZCA9ICh0eXBlb2Ygby5wcmVsb2FkID09PSAnYm9vbGVhbicpID8gby5wcmVsb2FkIDogdHJ1ZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBvLnJhdGUgfHwgMTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IG8uc3ByaXRlIHx8IHt9O1xuICAgICAgc2VsZi5fc3JjID0gKHR5cGVvZiBvLnNyYyAhPT0gJ3N0cmluZycpID8gby5zcmMgOiBbby5zcmNdO1xuICAgICAgc2VsZi5fdm9sdW1lID0gby52b2x1bWUgIT09IHVuZGVmaW5lZCA/IG8udm9sdW1lIDogMTtcblxuICAgICAgLy8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gMDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZi5fZW5kVGltZXJzID0ge307XG4gICAgICBzZWxmLl9xdWV1ZSA9IFtdO1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbmVuZCA9IG8ub25lbmQgPyBbe2ZuOiBvLm9uZW5kfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uZmFkZSA9IG8ub25mYWRlID8gW3tmbjogby5vbmZhZGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkID0gby5vbmxvYWQgPyBbe2ZuOiBvLm9ubG9hZH1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWRlcnJvciA9IG8ub25sb2FkZXJyb3IgPyBbe2ZuOiBvLm9ubG9hZGVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe2ZuOiBvLm9ucGF1c2V9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe2ZuOiBvLm9ucGxheX1dIDogW107XG4gICAgICBzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7Zm46IG8ub25zdG9wfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tmbjogby5vbm11dGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tmbjogby5vbnZvbHVtZX1dIDogW107XG4gICAgICBzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7Zm46IG8ub25yYXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tmbjogby5vbnNlZWt9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yZXN1bWUgPSBbXTtcblxuICAgICAgLy8gV2ViIEF1ZGlvIG9yIEhUTUw1IEF1ZGlvP1xuICAgICAgc2VsZi5fd2ViQXVkaW8gPSBIb3dsZXIudXNpbmdXZWJBdWRpbyAmJiAhc2VsZi5faHRtbDU7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpbyBvbiBpT1MuXG4gICAgICBpZiAodHlwZW9mIEhvd2xlci5jdHggIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHggJiYgSG93bGVyLm1vYmlsZUF1dG9FbmFibGUpIHtcbiAgICAgICAgSG93bGVyLl9lbmFibGVNb2JpbGVBdWRpbygpO1xuICAgICAgfVxuXG4gICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoaXMgSG93bCBncm91cCBpbiB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuXG4gICAgICBIb3dsZXIuX2hvd2xzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIElmIHRoZXkgc2VsZWN0ZWQgYXV0b3BsYXksIGFkZCBhIHBsYXkgZXZlbnQgdG8gdGhlIGxvYWQgcXVldWUuXG4gICAgICBpZiAoc2VsZi5fYXV0b3BsYXkpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9hZCB0aGUgc291cmNlIGZpbGUgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gICAgICBpZiAoc2VsZi5fcHJlbG9hZCkge1xuICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGF1ZGlvIGZpbGUuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHVybCA9IG51bGw7XG5cbiAgICAgIC8vIElmIG5vIGF1ZGlvIGlzIGF2YWlsYWJsZSwgcXVpdCBpbW1lZGlhdGVseS5cbiAgICAgIGlmIChIb3dsZXIubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gYXVkaW8gc3VwcG9ydC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgb3VyIHNvdXJjZSBpcyBpbiBhbiBhcnJheS5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5fc3JjID09PSAnc3RyaW5nJykge1xuICAgICAgICBzZWxmLl9zcmMgPSBbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBzb3VyY2VzIGFuZCBwaWNrIHRoZSBmaXJzdCBvbmUgdGhhdCBpcyBjb21wYXRpYmxlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NyYy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0LCBzdHI7XG5cbiAgICAgICAgaWYgKHNlbGYuX2Zvcm1hdCAmJiBzZWxmLl9mb3JtYXRbaV0pIHtcbiAgICAgICAgICAvLyBJZiBhbiBleHRlbnNpb24gd2FzIHNwZWNpZmllZCwgdXNlIHRoYXQgaW5zdGVhZC5cbiAgICAgICAgICBleHQgPSBzZWxmLl9mb3JtYXRbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VyY2UgaXMgYSBzdHJpbmcuXG4gICAgICAgICAgc3RyID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vbi1zdHJpbmcgZm91bmQgaW4gc2VsZWN0ZWQgYXVkaW8gc291cmNlcyAtIGlnbm9yaW5nLicpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSB0aGUgVVJMIG9yIGJhc2U2NCBkYXRhIFVSSS5cbiAgICAgICAgICBleHQgPSAvXmRhdGE6YXVkaW9cXC8oW147LF0rKTsvaS5leGVjKHN0cik7XG4gICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhzdHIuc3BsaXQoJz8nLCAxKVswXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4dCkge1xuICAgICAgICAgICAgZXh0ID0gZXh0WzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBleHRlbnNpb24gaXMgYXZhaWxhYmxlLlxuICAgICAgICBpZiAoSG93bGVyLmNvZGVjcyhleHQpKSB7XG4gICAgICAgICAgdXJsID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBjb2RlYyBzdXBwb3J0IGZvciBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX3NyYyA9IHVybDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAvLyBJZiB0aGUgaG9zdGluZyBwYWdlIGlzIEhUVFBTIGFuZCB0aGUgc291cmNlIGlzbid0LFxuICAgICAgLy8gZHJvcCBkb3duIHRvIEhUTUw1IEF1ZGlvIHRvIGF2b2lkIE1peGVkIENvbnRlbnQgZXJyb3JzLlxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgdXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cDonKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNvdW5kIG9iamVjdCBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxuICAgICAgbmV3IFNvdW5kKHNlbGYpO1xuXG4gICAgICAvLyBMb2FkIGFuZCBkZWNvZGUgdGhlIGF1ZGlvIGRhdGEgZm9yIHBsYXliYWNrLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIGxvYWRCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQbGF5IGEgc291bmQgb3IgcmVzdW1lIHByZXZpb3VzIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge1N0cmluZy9OdW1iZXJ9IHNwcml0ZSAgIFNwcml0ZSBuYW1lIGZvciBzcHJpdGUgcGxheWJhY2sgb3Igc291bmQgaWQgdG8gY29udGludWUgcHJldmlvdXMuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgIFNvdW5kIElELlxuICAgICAqL1xuICAgIHBsYXk6IGZ1bmN0aW9uKHNwcml0ZSwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpZCA9IG51bGw7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiBhIHNwcml0ZSwgc291bmQgaWQgb3Igbm90aGluZyB3YXMgcGFzc2VkXG4gICAgICBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBzcHJpdGU7XG4gICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdzdHJpbmcnICYmIHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAhc2VsZi5fc3ByaXRlW3Nwcml0ZV0pIHtcbiAgICAgICAgLy8gSWYgdGhlIHBhc3NlZCBzcHJpdGUgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZGVmYXVsdCBzb3VuZCBzcHJpdGUgKHBsYXlzIHRoZSBmdWxsIGF1ZGlvIGxlbmd0aCkuXG4gICAgICAgIHNwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgc2luZ2xlIHBhdXNlZCBzb3VuZCB0aGF0IGlzbid0IGVuZGVkLlxuICAgICAgICAvLyBJZiB0aGVyZSBpcywgcGxheSB0aGF0IHNvdW5kLiBJZiBub3QsIGNvbnRpbnVlIGFzIHVzdWFsLlxuICAgICAgICB2YXIgbnVtID0gMDtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCAmJiAhc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgICAgbnVtKys7XG4gICAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1tpXS5faWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51bSA9PT0gMSkge1xuICAgICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgbm9kZSwgb3IgZ2V0IG9uZSBmcm9tIHRoZSBwb29sLlxuICAgICAgdmFyIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5faW5hY3RpdmVTb3VuZCgpO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgIGlmICghc291bmQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgc3ByaXRlIGRlZmluaXRpb24uXG4gICAgICBpZiAoaWQgJiYgIXNwcml0ZSkge1xuICAgICAgICBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlIHx8ICdfX2RlZmF1bHQnO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIG5vIHNwcml0ZSBhbmQgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdFxuICAgICAgLy8gZm9yIHRoZSBzb3VuZCB0byBsb2FkIHRvIGdldCBvdXIgYXVkaW8ncyBkdXJhdGlvbi5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgJiYgIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShzZWxmLl9zb3VuZEJ5SWQoc291bmQuX2lkKSA/IHNvdW5kLl9pZCA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBwbGF5IHRoZSBzb3VuZCBpZiBhbiBpZCB3YXMgcGFzc2VkIGFuZCBpdCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICBpZiAoaWQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgcGxheSBldmVudCwgaW4gb3JkZXIgdG8ga2VlcCBpdGVyYXRpbmcgdGhyb3VnaCBxdWV1ZS5cbiAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgQXVkaW9Db250ZXh0IGlzbid0IHN1c3BlbmRlZCwgYW5kIHJlc3VtZSBpdCBpZiBpdCBpcy5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBIb3dsZXIuX2F1dG9SZXN1bWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBsb25nIHRvIHBsYXkgZm9yIGFuZCB3aGVyZSB0byBzdGFydCBwbGF5aW5nLlxuICAgICAgdmFyIHNlZWsgPSBNYXRoLm1heCgwLCBzb3VuZC5fc2VlayA+IDAgPyBzb3VuZC5fc2VlayA6IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMCk7XG4gICAgICB2YXIgZHVyYXRpb24gPSBNYXRoLm1heCgwLCAoKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrKTtcbiAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyYW1ldGVycyBvZiB0aGUgc291bmRcbiAgICAgIHNvdW5kLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcbiAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgIHNvdW5kLl9zdGFydCA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9zdG9wID0gKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9sb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuXG4gICAgICAvLyBCZWdpbiB0aGUgYWN0dWFsIHBsYXliYWNrLlxuICAgICAgdmFyIG5vZGUgPSBzb3VuZC5fbm9kZTtcbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBXZWIgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5V2ViQXVkaW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcblxuICAgICAgICAgIC8vIFNldHVwIHRoZSBwbGF5YmFjayBwYXJhbXMuXG4gICAgICAgICAgdmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XG4gICAgICAgICAgbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAvLyBQbGF5IHRoZSBzb3VuZCB1c2luZyB0aGUgc3VwcG9ydGVkIG1ldGhvZC5cbiAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHRpbWVyIGlmIG5vbmUgaXMgcHJlc2VudC5cbiAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlzUnVubmluZyA9IChIb3dsZXIuc3RhdGUgPT09ICdydW5uaW5nJyk7XG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgaXNSdW5uaW5nKSB7XG4gICAgICAgICAgcGxheVdlYkF1ZGlvKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGF1ZGlvIHRvIGxvYWQgYW5kIHRoZW4gYmVnaW4gcGxheWJhY2suXG4gICAgICAgICAgc2VsZi5vbmNlKGlzUnVubmluZyA/ICdsb2FkJyA6ICdyZXN1bWUnLCBwbGF5V2ViQXVkaW8sIGlzUnVubmluZyA/IHNvdW5kLl9pZCA6IG51bGwpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBIVE1MNSBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlIdG1sNSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIG5vZGUubXV0ZWQgPSBzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgSG93bGVyLl9tdXRlZCB8fCBub2RlLm11dGVkO1xuICAgICAgICAgIG5vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5vZGUucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGVuZCB0aW1lci5cbiAgICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFBsYXkgaW1tZWRpYXRlbHkgaWYgcmVhZHksIG9yIHdhaXQgZm9yIHRoZSAnY2FucGxheXRocm91Z2gnZSB2ZW50LlxuICAgICAgICB2YXIgbG9hZGVkTm9SZWFkeVN0YXRlID0gKHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAod2luZG93ICYmIHdpbmRvdy5lamVjdGEgfHwgIW5vZGUucmVhZHlTdGF0ZSAmJiBIb3dsZXIuX25hdmlnYXRvci5pc0NvY29vbkpTKSk7XG4gICAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUgPT09IDQgfHwgbG9hZGVkTm9SZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcGxheUh0bWw1KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBCZWdpbiBwbGF5YmFjay5cbiAgICAgICAgICAgIHBsYXlIdG1sNSgpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHBsYXliYWNrIGFuZCBzYXZlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHBhdXNlIGFsbCBpbiBncm91cCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBwYXVzZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGF1c2UnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBwYXVzZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlbGYuc2VlayhpZHNbaV0pO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHNvdW5kIGhhcyBiZWVuIGNyZWF0ZWRcbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmUgdGhlIHBhdXNlIGV2ZW50LCB1bmxlc3MgYHRydWVgIGlzIHBhc3NlZCBhcyB0aGUgMm5kIGFyZ3VtZW50LlxuICAgICAgICBpZiAoIWFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BhdXNlJywgc291bmQgPyBzb3VuZC5faWQgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcCBwbGF5YmFjayBhbmQgcmVzZXQgdG8gc3RhcnQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHN0b3AgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oaWQsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc3RvcCB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc3RvcCcsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgc3RvcHBlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkXG4gICAgICAgICAgICAgIGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc291bmQgJiYgIWludGVybmFsKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGUvdW5tdXRlIGEgc2luZ2xlIHNvdW5kIG9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIFNldCB0byB0cnVlIHRvIG11dGUgYW5kIGZhbHNlIHRvIHVubXV0ZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFRoZSBzb3VuZCBJRCB0byB1cGRhdGUgKG9taXQgdG8gbXV0ZS91bm11dGUgYWxsKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIG11dGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ211dGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLm11dGUobXV0ZWQsIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhcHBseWluZyBtdXRlL3VubXV0ZSB0byBhbGwgc291bmRzLCB1cGRhdGUgdGhlIGdyb3VwJ3MgdmFsdWUuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIG11dGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9tdXRlZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBtdXRlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc291bmQuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSBIb3dsZXIuX211dGVkID8gdHJ1ZSA6IG11dGVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ211dGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSB2b2x1bWUgb2YgdGhpcyBzb3VuZCBvciBvZiB0aGUgSG93bCBncm91cC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgdm9sdW1lKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2b2x1bWUgdmFsdWUuXG4gICAgICogICB2b2x1bWUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCB2b2x1bWUuXG4gICAgICogICB2b2x1bWUodm9sKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICB2b2x1bWUodm9sLCBpZCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciB2b2wsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ3JvdXBzJyB2b2x1bWUuXG4gICAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxIHx8IGFyZ3MubGVuZ3RoID09PSAyICYmIHR5cGVvZiBhcmdzWzFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgdm9sdW1lLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdm9sdW1lLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHZvbHVtZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAndm9sdW1lJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHZvbHVtZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgICBpZiAoIWFyZ3NbMl0pIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gdm9sICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCd2b2x1bWUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl92b2x1bWUgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmFkZSBhIGN1cnJlbnRseSBwbGF5aW5nIHNvdW5kIGJldHdlZW4gdHdvIHZvbHVtZXMgKGlmIG5vIGlkIGlzIHBhc3NzZWQsIGFsbCBzb3VuZHMgd2lsbCBmYWRlKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCAob21pdCB0byBmYWRlIGFsbCBzb3VuZHMpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgZmFkZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxlbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoZnJvbSAtIHRvKTtcbiAgICAgIHZhciBkaXIgPSBmcm9tID4gdG8gPyAnb3V0JyA6ICdpbic7XG4gICAgICB2YXIgc3RlcHMgPSBkaWZmIC8gMC4wMTtcbiAgICAgIHZhciBzdGVwTGVuID0gKHN0ZXBzID4gMCkgPyBsZW4gLyBzdGVwcyA6IGxlbjtcblxuICAgICAgLy8gU2luY2UgYnJvd3NlcnMgY2xhbXAgdGltZW91dHMgdG8gNG1zLCB3ZSBuZWVkIHRvIGNsYW1wIG91ciBzdGVwcyB0byB0aGF0IHRvby5cbiAgICAgIGlmIChzdGVwTGVuIDwgNCkge1xuICAgICAgICBzdGVwcyA9IE1hdGguY2VpbChzdGVwcyAvICg0IC8gc3RlcExlbikpO1xuICAgICAgICBzdGVwTGVuID0gNDtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBmYWRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdmYWRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5mYWRlKGZyb20sIHRvLCBsZW4sIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGhlIHZvbHVtZSB0byB0aGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICBzZWxmLnZvbHVtZShmcm9tLCBpZCk7XG5cbiAgICAgIC8vIEZhZGUgdGhlIHZvbHVtZSBvZiBvbmUgb3IgYWxsIHNvdW5kcy5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGxpbmVhciBmYWRlIG9yIGZhbGwgYmFjayB0byB0aW1lb3V0cyB3aXRoIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwcmV2aW91cyBmYWRlIGlmIG5vIHNwcml0ZSBpcyBiZWluZyB1c2VkIChvdGhlcndpc2UsIHZvbHVtZSBoYW5kbGVzIHRoaXMpLlxuICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbywgbGV0IHRoZSBuYXRpdmUgbWV0aG9kcyBkbyB0aGUgYWN0dWFsIGZhZGUuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG4gICAgICAgICAgICB2YXIgZW5kID0gY3VycmVudFRpbWUgKyAobGVuIC8gMTAwMCk7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gZnJvbTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoZnJvbSwgY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0bywgZW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdm9sID0gZnJvbTtcbiAgICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbihzb3VuZElkLCBzb3VuZCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgYW1vdW50LCBidXQgb25seSBpZiB0aGUgdm9sdW1lIHNob3VsZCBjaGFuZ2UuXG4gICAgICAgICAgICBpZiAoc3RlcHMgPiAwKSB7XG4gICAgICAgICAgICAgIHZvbCArPSAoZGlyID09PSAnaW4nID8gMC4wMSA6IC0wLjAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB2b2x1bWUgaXMgaW4gdGhlIHJpZ2h0IGJvdW5kcy5cbiAgICAgICAgICAgIHZvbCA9IE1hdGgubWF4KDAsIHZvbCk7XG4gICAgICAgICAgICB2b2wgPSBNYXRoLm1pbigxLCB2b2wpO1xuXG4gICAgICAgICAgICAvLyBSb3VuZCB0byB3aXRoaW4gMiBkZWNpbWFsIHBvaW50cy5cbiAgICAgICAgICAgIHZvbCA9IE1hdGgucm91bmQodm9sICogMTAwKSAvIDEwMDtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSB2b2x1bWUuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZElkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgZmFkZSBpcyBjb21wbGV0ZSwgc3RvcCBpdCBhbmQgZmlyZSBldmVudC5cbiAgICAgICAgICAgIGlmICh2b2wgPT09IHRvKSB7XG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZElkKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIHNvdW5kSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0uYmluZChzZWxmLCBpZHNbaV0sIHNvdW5kKSwgc3RlcExlbik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IHN0b3BzIHRoZSBjdXJyZW50bHkgcGxheWluZyBmYWRlIHdoZW5cbiAgICAgKiBhIG5ldyBmYWRlIHN0YXJ0cywgdm9sdW1lIGlzIGNoYW5nZWQgb3IgdGhlIHNvdW5kIGlzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfc3RvcEZhZGU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQgJiYgc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgaWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgbG9vcCBwYXJhbWV0ZXIgb24gYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgbG9vcCgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AobG9vcCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBmb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICBsb29wKGxvb3AsIGlkKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL0Jvb2xlYW59IFJldHVybnMgc2VsZiBvciBjdXJyZW50IGxvb3AgdmFsdWUuXG4gICAgICovXG4gICAgbG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBsb29wLCBpZCwgc291bmQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGZvciBsb29wIGFuZCBpZC5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGdyb3UncyBsb29wIHZhbHVlLlxuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgICBzZWxmLl9sb29wID0gbG9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIGxvb3AgdmFsdWUuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fbG9vcCA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbG9vcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbG9vcCA9IGxvb3A7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBsb29wO1xuICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICByYXRlKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgcmF0ZShyYXRlLCBpZCkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqL1xuICAgIHJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgcmF0ZSwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcmF0ZSBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgcmF0ZSB2YWx1ZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAncmF0ZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnJhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBvdXIgcG9zaXRpb24gd2hlbiB0aGUgcmF0ZSBjaGFuZ2VkIGFuZCB1cGRhdGUgdGhlIHBsYXliYWNrXG4gICAgICAgICAgICAvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXG4gICAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IHNlbGYuX3dlYkF1ZGlvID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSA6IHNvdW5kLl9wbGF5U3RhcnQ7XG4gICAgICAgICAgICBzb3VuZC5fcmF0ZSA9IHJhdGU7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZSA9IHJhdGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBsYXliYWNrUmF0ZSA9IHJhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0aW1lcnMuXG4gICAgICAgICAgICB2YXIgc2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAoKHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWs7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAgICAgICAvLyBTdGFydCBhIG5ldyBlbmQgdGltZXIgaWYgc291bmQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gfHwgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZFtpXSk7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgncmF0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9yYXRlIDogc2VsZi5fcmF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHNlZWsgcG9zaXRpb24gb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgc2VlaygpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoc2VlaykgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc291bmQgbm9kZS5cbiAgICAgKiAgIHNlZWsoc2VlaywgaWQpIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBzZWVrOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHNlZWssIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyBzZWVrIHBvc2l0aW9uLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc2VlayB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc2VlaycsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Vlay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XG4gICAgICAgICAgLy8gUGF1c2UgdGhlIHNvdW5kIGFuZCB1cGRhdGUgcG9zaXRpb24gZm9yIHJlc3RhcnRpbmcgcGxheWJhY2suXG4gICAgICAgICAgdmFyIHBsYXlpbmcgPSBzZWxmLnBsYXlpbmcoaWQpO1xuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdHJhY2sgYW5kIGNhbmNlbCB0aW1lci5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZCk7XG5cbiAgICAgICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBpZiB0aGUgc291bmQgd2FzIHBsYXlpbmcuXG4gICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShpZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWVrIHBvc2l0aW9uIGZvciBIVE1MNSBBdWRpby5cbiAgICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnc2VlaycsIGlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHZhciByZWFsVGltZSA9IHNlbGYucGxheWluZyhpZCkgPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIC0gc291bmQuX3BsYXlTdGFydCA6IDA7XG4gICAgICAgICAgICB2YXIgcmF0ZVNlZWsgPSBzb3VuZC5fcmF0ZVNlZWsgPyBzb3VuZC5fcmF0ZVNlZWsgLSBzb3VuZC5fc2VlayA6IDA7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX3NlZWsgKyAocmF0ZVNlZWsgKyByZWFsVGltZSAqIE1hdGguYWJzKHNvdW5kLl9yYXRlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgc3BlY2lmaWMgc291bmQgaXMgY3VycmVudGx5IHBsYXlpbmcgb3Igbm90IChpZiBpZCBpcyBwcm92aWRlZCksIG9yIGNoZWNrIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgc291bmRzIGluIHRoZSBncm91cCBpcyBwbGF5aW5nIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCB0aGUgd2hvbGUgc291bmQgZ3JvdXAgaXMgY2hlY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHBsYXlpbmcgYW5kIGZhbHNlIGlmIG5vdC5cbiAgICAgKi9cbiAgICBwbGF5aW5nOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBDaGVjayB0aGUgcGFzc2VkIHNvdW5kIElEIChpZiBhbnkpLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gIXNvdW5kLl9wYXVzZWQgOiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlLCBsb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hlY2sgaWYgYW55IGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIG9mIHRoaXMgc291bmQuIFBhc3NpbmcgYSBzb3VuZCBpZCB3aWxsIHJldHVybiB0aGUgc3ByaXRlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgcmV0dXJuIGZ1bGwgc291cmNlIGR1cmF0aW9uLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQXVkaW8gZHVyYXRpb24gaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBkdXJhdGlvbjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBkdXJhdGlvbiA9IHNlbGYuX2R1cmF0aW9uO1xuXG4gICAgICAvLyBJZiB3ZSBwYXNzIGFuIElELCBnZXQgdGhlIHNvdW5kIGFuZCByZXR1cm4gdGhlIHNwcml0ZSBsZW5ndGguXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGR1cmF0aW9uID0gc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdIC8gMTAwMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGR1cmF0aW9uO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGxvYWRlZCBzdGF0ZSBvZiB0aGlzIEhvd2wuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSAndW5sb2FkZWQnLCAnbG9hZGluZycsICdsb2FkZWQnXG4gICAgICovXG4gICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgdGhlIGN1cnJlbnQgSG93bCBvYmplY3QuXG4gICAgICogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IHN0b3AgYWxsIHNvdW5kIGluc3RhbmNlcyBhdHRhY2hlZCB0byB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFN0b3AgcGxheWluZyBhbnkgYWN0aXZlIHNvdW5kcy5cbiAgICAgIHZhciBzb3VuZHMgPSBzZWxmLl9zb3VuZHM7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8c291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIFN0b3AgdGhlIHNvdW5kIGlmIGl0IGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAgICAgICBpZiAoIXNvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgc2VsZi5zdG9wKHNvdW5kc1tpXS5faWQpO1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2VuZCcsIHNvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBzb3VyY2Ugb3IgZGlzY29ubmVjdC5cbiAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIFNldCB0aGUgc291cmNlIHRvIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcuXG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnNyYyA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpUUFBQUJYUVZaRlptMTBJQkFBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBWkdGMFlRQUFBQUE9JztcblxuICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNvdW5kc1tpXS5fZXJyb3JGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzb3VuZHNbaV0uX2xvYWRGbiwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW1wdHkgb3V0IGFsbCBvZiB0aGUgbm9kZXMuXG4gICAgICAgIGRlbGV0ZSBzb3VuZHNbaV0uX25vZGU7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCB0aW1lcnMgYXJlIGNsZWFyZWQgb3V0LlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kc1tpXS5faWQpO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlcyBpbiB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBIb3dsZXIuX2hvd2xzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjKSB7XG4gICAgICAgICAgcmVtQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FjaGUgJiYgcmVtQ2FjaGUpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGdsb2JhbCBlcnJvcnMuXG4gICAgICBIb3dsZXIubm9BdWRpbyA9IGZhbHNlO1xuXG4gICAgICAvLyBDbGVhciBvdXQgYHNlbGZgLlxuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmID0gbnVsbDtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIG9uY2UgIChJTlRFUk5BTCkgTWFya3MgZXZlbnQgdG8gZmlyZSBvbmx5IG9uY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCwgb25jZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnRzLnB1c2gob25jZSA/IHtpZDogaWQsIGZuOiBmbiwgb25jZTogb25jZX0gOiB7aWQ6IGlkLCBmbjogZm59KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGN1c3RvbSBldmVudC4gQ2FsbCB3aXRob3V0IHBhcmFtZXRlcnMgdG8gcmVtb3ZlIGFsbCBldmVudHMuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIHJlbW92ZS4gTGVhdmUgZW1wdHkgdG8gcmVtb3ZlIGFsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IHJlbW92ZSBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCByZW1vdmUgdGhlIHBhc3NlZCBmdW5jdGlvbi5cbiAgICAgICAgZm9yIChpPTA7IGk8ZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGZuID09PSBldmVudHNbaV0uZm4gJiYgaWQgPT09IGV2ZW50c1tpXS5pZCkge1xuICAgICAgICAgICAgZXZlbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudCkge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiB0aGlzIHR5cGUuXG4gICAgICAgIHNlbGZbJ19vbicgKyBldmVudF0gPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIGV2ZXJ5IHR5cGUuXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZik7XG4gICAgICAgIGZvciAoaT0wOyBpPGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoKGtleXNbaV0uaW5kZXhPZignX29uJykgPT09IDApICYmIEFycmF5LmlzQXJyYXkoc2VsZltrZXlzW2ldXSkpIHtcbiAgICAgICAgICAgIHNlbGZba2V5c1tpXV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudCBhbmQgcmVtb3ZlIGl0IG9uY2UgZmlyZWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb25jZTogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLm9uKGV2ZW50LCBmbiwgaWQsIDEpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRW1pdCBhbGwgZXZlbnRzIG9mIGEgc3BlY2lmaWMgdHlwZSBhbmQgcGFzcyB0aGUgc291bmQgaWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgU291bmQgSUQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBtc2cgICBNZXNzYWdlIHRvIGdvIHdpdGggZXZlbnQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW1pdDogZnVuY3Rpb24oZXZlbnQsIGlkLCBtc2cpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIGZpcmUgYWxsIGZ1bmN0aW9ucy5cbiAgICAgIGZvciAodmFyIGk9ZXZlbnRzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKCFldmVudHNbaV0uaWQgfHwgZXZlbnRzW2ldLmlkID09PSBpZCB8fCBldmVudCA9PT0gJ2xvYWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiwgZXZlbnRzW2ldLmZuKSwgMCk7XG5cbiAgICAgICAgICAvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChldmVudHNbaV0ub25jZSkge1xuICAgICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIGV2ZW50c1tpXS5mbiwgZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFF1ZXVlIG9mIGFjdGlvbnMgaW5pdGlhdGVkIGJlZm9yZSB0aGUgc291bmQgaGFzIGxvYWRlZC5cbiAgICAgKiBUaGVzZSB3aWxsIGJlIGNhbGxlZCBpbiBzZXF1ZW5jZSwgd2l0aCB0aGUgbmV4dCBvbmx5IGZpcmluZ1xuICAgICAqIGFmdGVyIHRoZSBwcmV2aW91cyBoYXMgZmluaXNoZWQgZXhlY3V0aW5nIChldmVuIGlmIGFzeW5jIGxpa2UgcGxheSkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfbG9hZFF1ZXVlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHRhc2sgPSBzZWxmLl9xdWV1ZVswXTtcblxuICAgICAgICAvLyBkb24ndCBtb3ZlIG9udG8gdGhlIG5leHQgdGFzayB1bnRpbCB0aGlzIG9uZSBpcyBkb25lXG4gICAgICAgIHNlbGYub25jZSh0YXNrLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0YXNrLmFjdGlvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBwbGF5YmFjayBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbmRlZDogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlO1xuXG4gICAgICAvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xuICAgICAgdmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmQuX2lkKTtcblxuICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXN0YXJ0IHRoaXMgdGltZXIgaWYgb24gYSBXZWIgQXVkaW8gbG9vcC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICB2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmsgdGhlIG5vZGUgYXMgcGF1c2VkLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxuICAgICAgICBIb3dsZXIuX2F1dG9TdXNwZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdXNpbmcgYSBzcHJpdGUsIGVuZCB0aGUgdHJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGVuZCB0aW1lciBmb3IgYSBzb3VuZCBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhclRpbWVyOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkXSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZW5kVGltZXJzW2lkXSk7XG4gICAgICAgIGRlbGV0ZSBzZWxmLl9lbmRUaW1lcnNbaWRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzb3VuZCBpZGVudGlmaWVkIGJ5IHRoaXMgSUQsIG9yIHJldHVybiBudWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIFNvdW5kIG9iamVjdCBvciBudWxsLlxuICAgICAqL1xuICAgIF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaWQgPT09IHNlbGYuX3NvdW5kc1tpXS5faWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW5hY3RpdmUgc291bmQgZnJvbSB0aGUgcG9vbCBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfSBTb3VuZCBwbGF5YmFjayBvYmplY3QuXG4gICAgICovXG4gICAgX2luYWN0aXZlU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLl9kcmFpbigpO1xuXG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgcmV0dXJuIG5ldyBTb3VuZChzZWxmKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRHJhaW4gZXhjZXNzIGluYWN0aXZlIHNvdW5kcyBmcm9tIHRoZSBwb29sLlxuICAgICAqL1xuICAgIF9kcmFpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xuICAgICAgdmFyIGNudCA9IDA7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBsZXNzIHNvdW5kcyB0aGFuIHRoZSBtYXggcG9vbCBzaXplLCB3ZSBhcmUgZG9uZS5cbiAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChpPXNlbGYuX3NvdW5kcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKGNudCA8PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzZWxmLl9zb3VuZHNbaV0uX25vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3NvdW5kc1tpXS5fbm9kZS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBzb3VuZHMgdW50aWwgd2UgaGF2ZSB0aGUgcG9vbCBzaXplLlxuICAgICAgICAgIHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgY250LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBJRCdzIGZyb20gdGhlIHNvdW5kcyBwb29sLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgT25seSByZXR1cm4gb25lIElEIGlmIG9uZSBpcyBwYXNzZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cbiAgICAgKi9cbiAgICBfZ2V0U291bmRJZHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlkcy5wdXNoKHNlbGYuX3NvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbaWRdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSA9IEhvd2xlci5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gY2FjaGVbc2VsZi5fc3JjXTtcblxuICAgICAgLy8gQ29ubmVjdCB0byB0aGUgY29ycmVjdCBub2RlLlxuICAgICAgaWYgKHNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGxvb3BpbmcgYW5kIHBsYXliYWNrIHJhdGUuXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xuICAgICAgaWYgKHNvdW5kLl9sb29wKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcbiAgICAgIH1cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgbWVtb3J5IGxlYWtzIGJ5IGNsZWFuaW5nIHVwIHRoZSBidWZmZXIgc291cmNlIGFmdGVyIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBTb3VuZCdzIGF1ZGlvIG5vZGUgY29udGFpbmluZyB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhbkJ1ZmZlcjogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fc2NyYXRjaEJ1ZmZlcikge1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5vbmVuZGVkID0gbnVsbDtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2UuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgdHJ5IHsgbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjsgfSBjYXRjaChlKSB7fVxuICAgICAgfVxuICAgICAgbm9kZS5idWZmZXJTb3VyY2UgPSBudWxsO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc291bmQgb2JqZWN0LCB3aGljaCBlYWNoIG5vZGUgYXR0YWNoZWQgdG8gYSBIb3dsIGdyb3VwIGlzIGNvbnRhaW5lZCBpbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGhvd2wgVGhlIEhvd2wgcGFyZW50IGdyb3VwLlxuICAgKi9cbiAgdmFyIFNvdW5kID0gZnVuY3Rpb24oaG93bCkge1xuICAgIHRoaXMuX3BhcmVudCA9IGhvd2w7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIFNvdW5kLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IFNvdW5kIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIElEIGZvciB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgKiBNYXRoLnJhbmRvbSgpKTtcblxuICAgICAgLy8gQWRkIGl0c2VsZiB0byB0aGUgcGFyZW50J3MgcG9vbC5cbiAgICAgIHBhcmVudC5fc291bmRzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IG5vZGUuXG4gICAgICBzZWxmLmNyZWF0ZSgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBzZXR1cCBhIG5ldyBzb3VuZCBvYmplY3QsIHdoZXRoZXIgSFRNTDUgQXVkaW8gb3IgV2ViIEF1ZGlvLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuICAgICAgdmFyIHZvbHVtZSA9IChIb3dsZXIuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IHNlbGYuX3BhcmVudC5fbXV0ZWQpID8gMCA6IHNlbGYuX3ZvbHVtZTtcblxuICAgICAgaWYgKHBhcmVudC5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBnYWluIG5vZGUgZm9yIGNvbnRyb2xsaW5nIHZvbHVtZSAodGhlIHNvdXJjZSB3aWxsIGNvbm5lY3QgdG8gdGhpcykuXG4gICAgICAgIHNlbGYuX25vZGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHNlbGYuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzZWxmLl9ub2RlLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIHNlbGYuX25vZGUuY29ubmVjdChIb3dsZXIubWFzdGVyR2Fpbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLl9ub2RlID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxuICAgICAgICBzZWxmLl9lcnJvckZuID0gc2VsZi5fZXJyb3JMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCB0byBsZXQgdXMga25vdyB0aGUgc291bmQgaXMgcmVhZHkuXG4gICAgICAgIHNlbGYuX2xvYWRGbiA9IHNlbGYuX2xvYWRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBuZXcgYXVkaW8gbm9kZS5cbiAgICAgICAgc2VsZi5fbm9kZS5zcmMgPSBwYXJlbnQuX3NyYztcbiAgICAgICAgc2VsZi5fbm9kZS5wcmVsb2FkID0gJ2F1dG8nO1xuICAgICAgICBzZWxmLl9ub2RlLnZvbHVtZSA9IHZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcblxuICAgICAgICAvLyBCZWdpbiBsb2FkaW5nIHRoZSBzb3VyY2UuXG4gICAgICAgIHNlbGYuX25vZGUubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZCB0byB0aGUgb3JpZ2luYWwgc3RhdGUgKGZvciByZWN5Y2xlKS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3JhdGVTZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgc28gdGhhdCBpdCBpc24ndCBjb25mdXNlZCB3aXRoIHRoZSBwcmV2aW91cyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gTWF0aC5yb3VuZChEYXRlLm5vdygpICogTWF0aC5yYW5kb20oKSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlcnJvciBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZXJyb3JMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIEZpcmUgYW4gZXJyb3IgZXZlbnQgYW5kIHBhc3MgYmFjayB0aGUgY29kZS5cbiAgICAgIHNlbGYuX3BhcmVudC5fZW1pdCgnbG9hZGVycm9yJywgc2VsZi5faWQsIHNlbGYuX25vZGUuZXJyb3IgPyBzZWxmLl9ub2RlLmVycm9yLmNvZGUgOiAwKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yTGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gY2FucGxheXRocm91Z2ggbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2xvYWRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgICBpZiAoT2JqZWN0LmtleXMocGFyZW50Ll9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBwYXJlbnQuX2R1cmF0aW9uICogMTAwMF19O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Ll9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgcGFyZW50Ll9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICBwYXJlbnQuX2VtaXQoJ2xvYWQnKTtcbiAgICAgICAgcGFyZW50Ll9sb2FkUXVldWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBCdWZmZXIgYSBzb3VuZCBmcm9tIFVSTCwgRGF0YSBVUkkgb3IgY2FjaGUgYW5kIGRlY29kZSB0byBhdWRpbyBzb3VyY2UgKFdlYiBBdWRpbyBBUEkpLlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqL1xuICB2YXIgbG9hZEJ1ZmZlciA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICB2YXIgdXJsID0gc2VsZi5fc3JjO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIGNhY2hlZCBhbmQgdXNlIGl0IGluc3RlYWQuXG4gICAgaWYgKGNhY2hlW3VybF0pIHtcbiAgICAgIC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGNhY2hlW3VybF0uZHVyYXRpb247XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxuICAgICAgbG9hZFNvdW5kKHNlbGYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcbiAgICAgIC8vIERlY29kZSB0aGUgYmFzZTY0IGRhdGEgVVJJIHdpdGhvdXQgWEhSLCBzaW5jZSBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICB2YXIgZGF0YSA9IGF0b2IodXJsLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGF0YVZpZXdbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG5cbiAgICAgIGRlY29kZUF1ZGlvRGF0YShkYXRhVmlldy5idWZmZXIsIHNlbGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGdldCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgYmFjay5cbiAgICAgICAgdmFyIGNvZGUgPSAoeGhyLnN0YXR1cyArICcnKVswXTtcbiAgICAgICAgaWYgKGNvZGUgIT09ICcwJyAmJiBjb2RlICE9PSAnMicgJiYgY29kZSAhPT0gJzMnKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0ZhaWxlZCBsb2FkaW5nIGF1ZGlvIGZpbGUgd2l0aCBzdGF0dXM6ICcgKyB4aHIuc3RhdHVzICsgJy4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkZWNvZGVBdWRpb0RhdGEoeGhyLnJlc3BvbnNlLCBzZWxmKTtcbiAgICAgIH07XG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciwgc3dpdGNoIHRvIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgICAgICBkZWxldGUgY2FjaGVbdXJsXTtcbiAgICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNhZmVYaHJTZW5kKHhocik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kIHRoZSBYSFIgcmVxdWVzdCB3cmFwcGVkIGluIGEgdHJ5L2NhdGNoLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHhociBYSFIgdG8gc2VuZC5cbiAgICovXG4gIHZhciBzYWZlWGhyU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuICAgIHRyeSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHhoci5vbmVycm9yKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWNvZGUgYXVkaW8gZGF0YSBmcm9tIGFuIGFycmF5IGJ1ZmZlci5cbiAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGFycmF5YnVmZmVyIFRoZSBhdWRpbyBkYXRhLlxuICAgKiBAcGFyYW0gIHtIb3dsfSAgICAgICAgc2VsZlxuICAgKi9cbiAgdmFyIGRlY29kZUF1ZGlvRGF0YSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyLCBzZWxmKSB7XG4gICAgLy8gRGVjb2RlIHRoZSBidWZmZXIgaW50byBhbiBhdWRpbyBzb3VyY2UuXG4gICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIsIGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgaWYgKGJ1ZmZlciAmJiBzZWxmLl9zb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjYWNoZVtzZWxmLl9zcmNdID0gYnVmZmVyO1xuICAgICAgICBsb2FkU291bmQoc2VsZiwgYnVmZmVyKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdEZWNvZGluZyBhdWRpbyBkYXRhIGZhaWxlZC4nKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU291bmQgaXMgbm93IGxvYWRlZCwgc28gZmluaXNoIHNldHRpbmcgZXZlcnl0aGluZyB1cCBhbmQgZmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqIEBwYXJhbSAge09iamVjdH0gYnVmZmVyIFRoZSBkZWNvZGVkIGJ1ZmZlciBzb3VuZCBzb3VyY2UuXG4gICAqL1xuICB2YXIgbG9hZFNvdW5kID0gZnVuY3Rpb24oc2VsZiwgYnVmZmVyKSB7XG4gICAgLy8gU2V0IHRoZSBkdXJhdGlvbi5cbiAgICBpZiAoYnVmZmVyICYmICFzZWxmLl9kdXJhdGlvbikge1xuICAgICAgc2VsZi5fZHVyYXRpb24gPSBidWZmZXIuZHVyYXRpb247XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgIGlmIChPYmplY3Qua2V5cyhzZWxmLl9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2VsZi5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHNlbGYuX2R1cmF0aW9uICogMTAwMF19O1xuICAgIH1cblxuICAgIC8vIEZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZCcpO1xuICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgYXVkaW8gY29udGV4dCB3aGVuIGF2YWlsYWJsZSwgb3Igc3dpdGNoIHRvIEhUTUw1IEF1ZGlvIG1vZGUuXG4gICAqL1xuICB2YXIgc2V0dXBBdWRpb0NvbnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBDaGVjayBpZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvIGFuZCBzZXR1cCB0aGUgQXVkaW9Db250ZXh0IGlmIHdlIGFyZS5cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWJraXRBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhIHdlYnZpZXcgaXMgYmVpbmcgdXNlZCBvbiBpT1M4IG9yIGVhcmxpZXIgKHJhdGhlciB0aGFuIHRoZSBicm93c2VyKS5cbiAgICAvLyBJZiBpdCBpcywgZGlzYWJsZSBXZWIgQXVkaW8gYXMgaXQgY2F1c2VzIGNyYXNoaW5nLlxuICAgIHZhciBpT1MgPSAoL2lQKGhvbmV8b2R8YWQpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnBsYXRmb3JtKSk7XG4gICAgdmFyIGFwcFZlcnNpb24gPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XG4gICAgdmFyIHZlcnNpb24gPSBhcHBWZXJzaW9uID8gcGFyc2VJbnQoYXBwVmVyc2lvblsxXSwgMTApIDogbnVsbDtcbiAgICBpZiAoaU9TICYmIHZlcnNpb24gJiYgdmVyc2lvbiA8IDkpIHtcbiAgICAgIHZhciBzYWZhcmkgPSAvc2FmYXJpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5zdGFuZGFsb25lICYmICFzYWZhcmkgfHwgSG93bGVyLl9uYXZpZ2F0b3IgJiYgIUhvd2xlci5fbmF2aWdhdG9yLnN0YW5kYWxvbmUgJiYgIXNhZmFyaSkge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgZXhwb3NlIHRoZSBtYXN0ZXIgR2Fpbk5vZGUgd2hlbiB1c2luZyBXZWIgQXVkaW8gKHVzZWZ1bCBmb3IgcGx1Z2lucyBvciBhZHZhbmNlZCB1c2FnZSkuXG4gICAgaWYgKEhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICBIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmdhaW4udmFsdWUgPSAxO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uY29ubmVjdChIb3dsZXIuY3R4LmRlc3RpbmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZS1ydW4gdGhlIHNldHVwIG9uIEhvd2xlci5cbiAgICBIb3dsZXIuX3NldHVwKCk7XG4gIH07XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uKSBsaWJyYXJpZXMgc3VjaCBhcyByZXF1aXJlLmpzLlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIEhvd2xlcjogSG93bGVyLFxuICAgICAgICBIb3dsOiBIb3dsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTIGxpYnJhcmllcyBzdWNoIGFzIGJyb3dzZXJpZnkuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkhvd2xlciA9IEhvd2xlcjtcbiAgICBleHBvcnRzLkhvd2wgPSBIb3dsO1xuICB9XG5cbiAgLy8gRGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgdW51c2VkLlxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgd2luZG93Lkhvd2wgPSBIb3dsO1xuICAgIHdpbmRvdy5Tb3VuZCA9IFNvdW5kO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7IC8vIEFkZCB0byBnbG9iYWwgaW4gTm9kZS5qcyAoZm9yIHRlc3RpbmcsIGV0YykuXG4gICAgZ2xvYmFsLkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICBnbG9iYWwuSG93bGVyID0gSG93bGVyO1xuICAgIGdsb2JhbC5Ib3dsID0gSG93bDtcbiAgICBnbG9iYWwuU291bmQgPSBTb3VuZDtcbiAgfVxufSkoKTtcblxuXG4vKiFcbiAqICBTcGF0aWFsIFBsdWdpbiAtIEFkZHMgc3VwcG9ydCBmb3Igc3RlcmVvIGFuZCAzRCBhdWRpbyB3aGVyZSBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkLlxuICogIFxuICogIGhvd2xlci5qcyB2Mi4wLjJcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAxNiwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU2V0dXAgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9wb3MgPSBbMCwgMCwgMF07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX29yaWVudGF0aW9uID0gWzAsIDAsIC0xLCAwLCAxLCAwXTtcbiAgXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byB1cGRhdGUgdGhlIHN0ZXJlbyBwYW5uaW5nIHBvc2l0aW9uIG9mIGFsbCBjdXJyZW50IEhvd2xzLlxuICAgKiBGdXR1cmUgSG93bHMgd2lsbCBub3QgdXNlIHRoaXMgdmFsdWUgdW5sZXNzIGV4cGxpY2l0bHkgc2V0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvTnVtYmVyfSAgICAgU2VsZiBvciBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgdXBkYXRlIHRoZWlyIHN0ZXJlbyBwYW5uaW5nLlxuICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgc2VsZi5faG93bHNbaV0uc3RlcmVvKHBhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciBpbiAzRCBjYXJ0ZXNpYW4gc3BhY2UuIFNvdW5kcyB1c2luZ1xuICAgKiAzRCBwb3NpdGlvbiB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBsaXN0ZW5lcidzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggVGhlIHgtcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgVGhlIHktcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogVGhlIHotcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgU2VsZiBvciBjdXJyZW50IGxpc3RlbmVyIHBvc2l0aW9uLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1syXSA6IHo7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG4gICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRQb3NpdGlvbihzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIHNwYWNlLlxuICAgKiBBIGZyb250IGFuZCB1cCB2ZWN0b3IgbXVzdCBiZSBwcm92aWRlZC4gVGhlIGZyb250IGlzIHRoZSBkaXJlY3Rpb24gdGhlXG4gICAqIGZhY2Ugb2YgdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nLCBhbmQgdXAgaXMgdGhlIGRpcmVjdGlvbiB0aGUgdG9wIG9mIHRoZVxuICAgKiBsaXN0ZW5lciBpcyBwb2ludGluZy4gVGh1cywgdGhlc2UgdmFsdWVzIGFyZSBleHBlY3RlZCB0byBiZSBhdCByaWdodCBhbmdsZXNcbiAgICogZnJvbSBlYWNoIG90aGVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHhVcCBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5VXAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0gelVwIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdmVjdG9ycy5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB2YXIgb3IgPSBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBvclsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gb3JbMl0gOiB6O1xuICAgIHhVcCA9ICh0eXBlb2YgeFVwICE9PSAnbnVtYmVyJykgPyBvclszXSA6IHhVcDtcbiAgICB5VXAgPSAodHlwZW9mIHlVcCAhPT0gJ251bWJlcicpID8gb3JbNF0gOiB5VXA7XG4gICAgelVwID0gKHR5cGVvZiB6VXAgIT09ICdudW1iZXInKSA/IG9yWzVdIDogelVwO1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgeiwgeFVwLCB5VXAsIHpVcF07XG4gICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9yO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBvLm9yaWVudGF0aW9uIHx8IFsxLCAwLCAwXTtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IG8uc3RlcmVvIHx8IG51bGw7XG4gICAgICBzZWxmLl9wb3MgPSBvLnBvcyB8fCBudWxsO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IDAsXG4gICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogJ2ludmVyc2UnLFxuICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IDEwMDAwLFxuICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6ICdIUlRGJyxcbiAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiAxLFxuICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IDFcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uc3RlcmVvID0gby5vbnN0ZXJlbyA/IFt7Zm46IG8ub25zdGVyZW99XSA6IFtdO1xuICAgICAgc2VsZi5fb25wb3MgPSBvLm9ucG9zID8gW3tmbjogby5vbnBvc31dIDogW107XG4gICAgICBzZWxmLl9vbm9yaWVudGF0aW9uID0gby5vbm9yaWVudGF0aW9uID8gW3tmbjogby5vbm9yaWVudGF0aW9ufV0gOiBbXTtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvKTtcbiAgICB9O1xuICB9KShIb3dsLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgc3RlcmVvIHBhbm5pbmcgb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBhbGwgaW4gdGhlIGdyb3VwLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiAgQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4sIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugc3RlcmVvIHBhbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnc3RlcmVvJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0ZXJlbyhwYW4sIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBQYW5uZXJTdGVyZW9Ob2RlIHN1cHBvcnQgYW5kIGZhbGxiYWNrIHRvIFBhbm5lck5vZGUgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICB2YXIgcGFubmVyVHlwZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIgPT09ICd1bmRlZmluZWQnKSA/ICdzcGF0aWFsJyA6ICdzdGVyZW8nO1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgc2VsZi5fcG9zID0gW3BhbiwgMCwgMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fc3RlcmVvO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3RyZW8gcGFubmluZyBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9zdGVyZW8gPSBwYW47XG4gICAgICAgICAgc291bmQuX3BvcyA9IFtwYW4sIDAsIDBdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZmFsbGluZyBiYWNrLCBtYWtlIHN1cmUgdGhlIHBhbm5pbmdNb2RlbCBpcyBlcXVhbHBvd2VyLlxuICAgICAgICAgICAgc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsID0gJ2VxdWFscG93ZXInO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgIXNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCBwYW5uZXJUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbm5lclR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHBhbiwgMCwgMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBhbi52YWx1ZSA9IHBhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdzdGVyZW8nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fc3RlcmVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIDNEIHNwYXRpYWwgcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvclxuICAgKiBhbGwgaW4gdGhlIGdyb3VwLiBUaGUgbW9zdCBjb21tb24gdXNhZ2UgaXMgdG8gc2V0IHRoZSAneCcgcG9zaXRpb24gZm9yXG4gICAqIGxlZnQvcmlnaHQgcGFubmluZy4gU2V0dGluZyBhbnkgdmFsdWUgaGlnaGVyIHRoYW4gMS4wIHdpbGwgYmVnaW4gdG9cbiAgICogZGVjcmVhc2UgdGhlIHZvbHVtZSBvZiB0aGUgc291bmQgYXMgaXQgbW92ZXMgZnVydGhlciBhd2F5LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgcG9zaXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcG9zaXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3BvcycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5wb3MoeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IDAgOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IC0wLjUgOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgcG9zaXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8IHNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHgsIHksIHopO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BvcycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9wb3M7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBhdWRpbyBzb3VyY2UgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBjb29yZGluYXRlXG4gICAqIHNwYWNlLiBEZXBlbmRpbmcgb24gaG93IGRpcmVjdGlvbiB0aGUgc291bmQgaXMsIGJhc2VkIG9uIHRoZSBgY29uZWAgYXR0cmlidXRlcyxcbiAgICogYSBzb3VuZCBwb2ludGluZyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyIGNhbiBiZSBxdWlldCBvciBzaWxlbnQuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBvcmllbnRhdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIG9yaWVudGF0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdvcmllbnRhdGlvbicsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5vcmllbnRhdGlvbih4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzJdIDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX29yaWVudGF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBvcmllbnRhdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lcikge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnb3JpZW50YXRpb24nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fb3JpZW50YXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcGFubmVyIG5vZGUncyBhdHRyaWJ1dGVzIGZvciBhIHNvdW5kIG9yIGdyb3VwIG9mIHNvdW5kcy5cbiAgICogVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbCB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAqICAgcGFubmVyQXR0cigpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIobykgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICogICBwYW5uZXJBdHRyKG8sIGlkKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICpcbiAgICogICBBdHRyaWJ1dGVzOlxuICAgKiAgICAgY29uZUlubmVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIFRoZXJlIHdpbGwgYmUgbm8gdm9sdW1lIHJlZHVjdGlvbiBpbnNpZGUgdGhpcyBhbmdsZS5cbiAgICogICAgIGNvbmVPdXRlckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBUaGUgdm9sdW1lIHdpbGwgYmUgcmVkdWNlZCB0byBhIGNvbnN0YW50IHZhbHVlIG9mXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb25lT3V0ZXJHYWluYCBvdXRzaWRlIHRoaXMgYW5nbGUuXG4gICAqICAgICBjb25lT3V0ZXJHYWluIC0gKDAgYnkgZGVmYXVsdCkgVGhlIGFtb3VudCBvZiB2b2x1bWUgcmVkdWN0aW9uIG91dHNpZGUgb2YgYGNvbmVPdXRlckFuZ2xlYC5cbiAgICogICAgIGRpc3RhbmNlTW9kZWwgLSAoJ2ludmVyc2UnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgYWxnb3JpdGhtIHRvIHVzZSB0byByZWR1Y2Ugdm9sdW1lIGFzIGF1ZGlvIG1vdmVzXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGF3YXkgZnJvbSBsaXN0ZW5lci4gQ2FuIGJlIGBsaW5lYXJgLCBgaW52ZXJzZWAgb3IgYGV4cG9uZW50aWFsYC5cbiAgICogICAgIG1heERpc3RhbmNlIC0gKDEwMDAwIGJ5IGRlZmF1bHQpIFZvbHVtZSB3b24ndCByZWR1Y2UgYmV0d2VlbiBzb3VyY2UvbGlzdGVuZXIgYmV5b25kIHRoaXMgZGlzdGFuY2UuXG4gICAqICAgICBwYW5uaW5nTW9kZWwgLSAoJ0hSVEYnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgd2hpY2ggc3BhdGlhbGl6YXRpb24gYWxnb3JpdGhtIGlzIHVzZWQgdG8gcG9zaXRpb24gYXVkaW8uXG4gICAqICAgICAgICAgICAgICAgICAgICAgQ2FuIGJlIGBIUlRGYCBvciBgZXF1YWxwb3dlcmAuXG4gICAqICAgICByZWZEaXN0YW5jZSAtICgxIGJ5IGRlZmF1bHQpIEEgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgdGhlIHNvdXJjZVxuICAgKiAgICAgICAgICAgICAgICAgICAgbW92ZXMgYXdheSBmcm9tIHRoZSBsaXN0ZW5lci5cbiAgICogICAgIHJvbGxvZmZGYWN0b3IgLSAoMSBieSBkZWZhdWx0KSBIb3cgcXVpY2tseSB0aGUgdm9sdW1lIHJlZHVjZXMgYXMgc291cmNlIG1vdmVzIGZyb20gbGlzdGVuZXIuXG4gICAqIFxuICAgKiBAcmV0dXJuIHtIb3dsL09iamVjdH0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGFubmVyIGF0dHJpYnV0ZXMuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wYW5uZXJBdHRyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBvLCBpZCwgc291bmQ7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICByZXR1cm4gc2VsZi5fcGFubmVyQXR0cjtcbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG8gPSBhcmdzWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdSdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHNlbGYuX2NvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBzZWxmLl9jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogc2VsZi5fY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogc2VsZi5fZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogc2VsZi5fbWF4RGlzdGFuY2UsXG4gICAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6IHNlbGYuX3Bhbm5pbmdNb2RlbCxcbiAgICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogc2VsZi5fcmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHNlbGYuX3JvbGxvZmZGYWN0b3JcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcGFubmVyQXR0ciA6IHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgbyA9IGFyZ3NbMF07XG4gICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgc3BlY2lmaWVkIHNvdW5kcy5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IHZhbHVlcyBpbnRvIHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHBhID0gc291bmQuX3Bhbm5lckF0dHI7XG4gICAgICAgIHBhID0ge1xuICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogcGEuY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBwYS5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IHBhLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiBwYS5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogcGEubWF4RGlzdGFuY2UsXG4gICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBwYS5wYW5uaW5nTW9kZWwsXG4gICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiBwYS5yZWZEaXN0YW5jZSxcbiAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHBhLnJvbGxvZmZGYWN0b3JcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHBhbm5lciB2YWx1ZXMgb3IgY3JlYXRlIGEgbmV3IHBhbm5lciBpZiBub25lIGV4aXN0cy5cbiAgICAgICAgdmFyIHBhbm5lciA9IHNvdW5kLl9wYW5uZXI7XG4gICAgICAgIGlmIChwYW5uZXIpIHtcbiAgICAgICAgICBwYW5uZXIuY29uZUlubmVyQW5nbGUgPSBwYS5jb25lSW5uZXJBbmdsZTtcbiAgICAgICAgICBwYW5uZXIuY29uZU91dGVyQW5nbGUgPSBwYS5jb25lT3V0ZXJBbmdsZTtcbiAgICAgICAgICBwYW5uZXIuY29uZU91dGVyR2FpbiA9IHBhLmNvbmVPdXRlckdhaW47XG4gICAgICAgICAgcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBwYS5kaXN0YW5jZU1vZGVsO1xuICAgICAgICAgIHBhbm5lci5tYXhEaXN0YW5jZSA9IHBhLm1heERpc3RhbmNlO1xuICAgICAgICAgIHBhbm5lci5wYW5uaW5nTW9kZWwgPSBwYS5wYW5uaW5nTW9kZWw7XG4gICAgICAgICAgcGFubmVyLnJlZkRpc3RhbmNlID0gcGEucmVmRGlzdGFuY2U7XG4gICAgICAgICAgcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBwYS5yb2xsb2ZmRmFjdG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZS5cbiAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIFNvdW5kIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBTb3VuZCBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSBTb3VuZCdzIGluaXQgZnVuY3Rpb24uXG4gICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBTb3VuZC5yZXNldCBtZXRob2QgdG8gY2xlYW4gdXAgcHJvcGVydGllcyBmcm9tIHRoZSBzcGF0aWFsIHBsdWdpbi5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBTb3VuZCByZXNldCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLnJlc2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBzcGF0aWFsIHBsdWdpbiBwcm9wZXJ0aWVzIG9uIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIHJlc2V0dGluZyBvZiB0aGUgc291bmQuXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLnJlc2V0KTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBhbmQgc2F2ZSBpdCBvbiB0aGUgc291bmQuXG4gICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBTcGVjaWZpYyBzb3VuZCB0byBzZXR1cCBwYW5uaW5nIG9uLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUeXBlIG9mIHBhbm5lciB0byBjcmVhdGU6ICdzdGVyZW8nIG9yICdzcGF0aWFsJy5cbiAgICovXG4gIHZhciBzZXR1cFBhbm5lciA9IGZ1bmN0aW9uKHNvdW5kLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgJ3NwYXRpYWwnO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgcGFubmVyIG5vZGUuXG4gICAgaWYgKHR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZUlubmVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckdhaW4gPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJHYWluO1xuICAgICAgc291bmQuX3Bhbm5lci5kaXN0YW5jZU1vZGVsID0gc291bmQuX3Bhbm5lckF0dHIuZGlzdGFuY2VNb2RlbDtcbiAgICAgIHNvdW5kLl9wYW5uZXIubWF4RGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5tYXhEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFubmluZ01vZGVsID0gc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5yZWZEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLnJlZkRpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcbiAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oc291bmQuX3Bvc1swXSwgc291bmQuX3Bvc1sxXSwgc291bmQuX3Bvc1syXSk7XG4gICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHNvdW5kLl9vcmllbnRhdGlvblswXSwgc291bmQuX29yaWVudGF0aW9uWzFdLCBzb3VuZC5fb3JpZW50YXRpb25bMl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnZhbHVlID0gc291bmQuX3N0ZXJlbztcbiAgICB9XG5cbiAgICBzb3VuZC5fcGFubmVyLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9ucy5cbiAgICBpZiAoIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgIHNvdW5kLl9wYXJlbnQucGF1c2Uoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCk7XG4gICAgfVxuICB9O1xufSkoKTtcbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmV4cG9ydCBjb25zdCB0cmFuc3BhcmVudCA9IG5ldyBDb2xvcigwLCAwKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhDb2xvck5hbWUocGF0aCkge1xuICBsZXQgaGV4Q29sb3IgPSBwYXRoLnBhcmVudC5kYXRhLm9yaWdpbmFsQ29sb3I7XG4gIC8vIGxldCBoZXhDb2xvciA9IHBhdGguc3Ryb2tlQ29sb3IudG9DU1ModHJ1ZSk7IC8vIFRoaXMgZmFpbHMgd2hlbiBpdCdzIGEgZ3JhZGllbnRcbiAgcmV0dXJuIGdldENvbG9yTmFtZShoZXhDb2xvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xvck5hbWUoY29sb3IpIHtcbiAgaWYgKGNvbG9yKSB7XG4gICAgY29sb3IgPSBjb2xvci50b1VwcGVyQ2FzZSgpOyAvLyBtYWtlIHN1cmVcbiAgICBpZiAoY29sb3IgaW4gY29uZmlnLnBhbGV0dGUuY29sb3JOYW1lcykge1xuICAgICAgcmV0dXJuIGNvbmZpZy5wYWxldHRlLmNvbG9yTmFtZXNbY29sb3JdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbVBvcCgpIHtcbiAgY29uc3QgcG9wcyA9IGNvbmZpZy5wYWxldHRlLnBvcHM7XG4gIHJldHVybiBwb3BzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvcHMubGVuZ3RoKV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmRleGVkUG9wQ29sb3IoaW5kZXgpIHtcbiAgY29uc3QgcG9wcyA9IGNvbmZpZy5wYWxldHRlLnBvcHM7XG4gIHJldHVybiBwb3BzW2luZGV4ICUgcG9wcy5sZW5ndGhdO1xufVxuIiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5TaGFwZURldGVjdG9yID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBfbmJTYW1wbGVQb2ludHM7XG4gIHZhciBfc3F1YXJlU2l6ZSA9IDI1MDtcbiAgdmFyIF9waGkgPSAwLjUgKiAoLTEuMCArIE1hdGguc3FydCg1LjApKTtcbiAgdmFyIF9hbmdsZVJhbmdlID0gZGVnMlJhZCg0NS4wKTtcbiAgdmFyIF9hbmdsZVByZWNpc2lvbiA9IGRlZzJSYWQoMi4wKTtcbiAgdmFyIF9oYWxmRGlhZ29uYWwgPSBNYXRoLnNxcnQoX3NxdWFyZVNpemUgKiBfc3F1YXJlU2l6ZSArIF9zcXVhcmVTaXplICogX3NxdWFyZVNpemUpICogMC41O1xuICB2YXIgX29yaWdpbiA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBmdW5jdGlvbiBkZWcyUmFkKGQpIHtcblxuICAgIHJldHVybiBkICogTWF0aC5QSSAvIDE4MC4wO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldERpc3RhbmNlKGEsIGIpIHtcblxuICAgIHZhciBkeCA9IGIueCAtIGEueDtcbiAgICB2YXIgZHkgPSBiLnkgLSBhLnk7XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgfTtcblxuICBmdW5jdGlvbiBTdHJva2UocG9pbnRzLCBuYW1lKSB7XG5cbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucHJvY2Vzc1N0cm9rZSgpO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUucHJvY2Vzc1N0cm9rZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnJlc2FtcGxlKCk7XG4gICAgdGhpcy5zZXRDZW50cm9pZCgpO1xuICAgIHRoaXMucG9pbnRzID0gdGhpcy5yb3RhdGVCeSgtdGhpcy5pbmRpY2F0aXZlQW5nbGUoKSk7XG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnNjYWxlVG9TcXVhcmUoKTtcbiAgICB0aGlzLnNldENlbnRyb2lkKCk7XG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnRyYW5zbGF0ZVRvT3JpZ2luKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnJlc2FtcGxlID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgbG9jYWxEaXN0YW5jZSwgcTtcbiAgICB2YXIgaW50ZXJ2YWwgPSB0aGlzLnN0cm9rZUxlbmd0aCgpIC8gKF9uYlNhbXBsZVBvaW50cyAtIDEpO1xuICAgIHZhciBkaXN0YW5jZSA9IDAuMDtcbiAgICB2YXIgbmV3UG9pbnRzID0gW3RoaXMucG9pbnRzWzBdXTtcblxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvY2FsRGlzdGFuY2UgPSBnZXREaXN0YW5jZSh0aGlzLnBvaW50c1tpIC0gMV0sIHRoaXMucG9pbnRzW2ldKTtcblxuICAgICAgaWYgKGRpc3RhbmNlICsgbG9jYWxEaXN0YW5jZSA+PSBpbnRlcnZhbCkge1xuICAgICAgICBxID0ge1xuICAgICAgICAgIHg6IHRoaXMucG9pbnRzW2kgLSAxXS54ICsgKChpbnRlcnZhbCAtIGRpc3RhbmNlKSAvIGxvY2FsRGlzdGFuY2UpICogKHRoaXMucG9pbnRzW2ldLnggLSB0aGlzLnBvaW50c1tpIC0gMV0ueCksXG4gICAgICAgICAgeTogdGhpcy5wb2ludHNbaSAtIDFdLnkgKyAoKGludGVydmFsIC0gZGlzdGFuY2UpIC8gbG9jYWxEaXN0YW5jZSkgKiAodGhpcy5wb2ludHNbaV0ueSAtIHRoaXMucG9pbnRzW2kgLSAxXS55KVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1BvaW50cy5wdXNoKHEpO1xuICAgICAgICB0aGlzLnBvaW50cy5zcGxpY2UoaSwgMCwgcSk7XG4gICAgICAgIGRpc3RhbmNlID0gMC4wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzdGFuY2UgKz0gbG9jYWxEaXN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3UG9pbnRzLmxlbmd0aCA9PT0gX25iU2FtcGxlUG9pbnRzIC0gMSkge1xuICAgICAgbmV3UG9pbnRzLnB1c2godGhpcy5wb2ludHNbdGhpcy5wb2ludHMubGVuZ3RoIC0gMV0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5yb3RhdGVCeSA9IGZ1bmN0aW9uKGFuZ2xlKSB7XG5cbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBuZXdQb2ludHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG5cbiAgICAgIG5ld1BvaW50cy5wdXNoKHtcbiAgICAgICAgeDogKHBvaW50LnggLSB0aGlzLmMueCkgKiBjb3MgLSAocG9pbnQueSAtIHRoaXMuYy55KSAqIHNpbiArIHRoaXMuYy54LFxuICAgICAgICB5OiAocG9pbnQueCAtIHRoaXMuYy54KSAqIHNpbiArIChwb2ludC55IC0gdGhpcy5jLnkpICogY29zICsgdGhpcy5jLnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zY2FsZVRvU3F1YXJlID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIG5ld1BvaW50cyA9IFtdXG4gICAgdmFyIGJveCA9IHtcbiAgICAgIG1pblg6ICtJbmZpbml0eSxcbiAgICAgIG1heFg6IC1JbmZpbml0eSxcbiAgICAgIG1pblk6ICtJbmZpbml0eSxcbiAgICAgIG1heFk6IC1JbmZpbml0eVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBib3gubWluWCA9IE1hdGgubWluKGJveC5taW5YLCBwb2ludC54KTtcbiAgICAgIGJveC5taW5ZID0gTWF0aC5taW4oYm94Lm1pblksIHBvaW50LnkpO1xuICAgICAgYm94Lm1heFggPSBNYXRoLm1heChib3gubWF4WCwgcG9pbnQueCk7XG4gICAgICBib3gubWF4WSA9IE1hdGgubWF4KGJveC5tYXhZLCBwb2ludC55KTtcbiAgICB9XG5cbiAgICBib3gud2lkdGggPSBib3gubWF4WCAtIGJveC5taW5YO1xuICAgIGJveC5oZWlnaHQgPSBib3gubWF4WSAtIGJveC5taW5ZO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBuZXdQb2ludHMucHVzaCh7XG4gICAgICAgIHg6IHBvaW50LnggKiAoX3NxdWFyZVNpemUgLyBib3gud2lkdGgpLFxuICAgICAgICB5OiBwb2ludC55ICogKF9zcXVhcmVTaXplIC8gYm94LmhlaWdodClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS50cmFuc2xhdGVUb09yaWdpbiA9IGZ1bmN0aW9uKHBvaW50cykge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBuZXdQb2ludHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG5cbiAgICAgIG5ld1BvaW50cy5wdXNoKHtcbiAgICAgICAgeDogcG9pbnQueCArIF9vcmlnaW4ueCAtIHRoaXMuYy54LFxuICAgICAgICB5OiBwb2ludC55ICsgX29yaWdpbi55IC0gdGhpcy5jLnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zZXRDZW50cm9pZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHRoaXMuYyA9IHtcbiAgICAgIHg6IDAuMCxcbiAgICAgIHk6IDAuMFxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICB0aGlzLmMueCArPSBwb2ludC54O1xuICAgICAgdGhpcy5jLnkgKz0gcG9pbnQueTtcbiAgICB9XG5cbiAgICB0aGlzLmMueCAvPSB0aGlzLnBvaW50cy5sZW5ndGg7XG4gICAgdGhpcy5jLnkgLz0gdGhpcy5wb2ludHMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5pbmRpY2F0aXZlQW5nbGUgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMuYy55IC0gdGhpcy5wb2ludHNbMF0ueSwgdGhpcy5jLnggLSB0aGlzLnBvaW50c1swXS54KTtcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnN0cm9rZUxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGQgPSAwLjA7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkICs9IGdldERpc3RhbmNlKHRoaXMucG9pbnRzW2kgLSAxXSwgdGhpcy5wb2ludHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBkO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuZGlzdGFuY2VBdEJlc3RBbmdsZSA9IGZ1bmN0aW9uKHBhdHRlcm4pIHtcblxuICAgIHZhciBhID0gLV9hbmdsZVJhbmdlO1xuICAgIHZhciBiID0gX2FuZ2xlUmFuZ2U7XG4gICAgdmFyIHgxID0gX3BoaSAqIGEgKyAoMS4wIC0gX3BoaSkgKiBiO1xuICAgIHZhciBmMSA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgxKTtcbiAgICB2YXIgeDIgPSAoMS4wIC0gX3BoaSkgKiBhICsgX3BoaSAqIGI7XG4gICAgdmFyIGYyID0gdGhpcy5kaXN0YW5jZUF0QW5nbGUocGF0dGVybiwgeDIpO1xuXG4gICAgd2hpbGUgKE1hdGguYWJzKGIgLSBhKSA+IF9hbmdsZVByZWNpc2lvbikge1xuXG4gICAgICBpZiAoZjEgPCBmMikge1xuICAgICAgICBiID0geDI7XG4gICAgICAgIHgyID0geDE7XG4gICAgICAgIGYyID0gZjE7XG4gICAgICAgIHgxID0gX3BoaSAqIGEgKyAoMS4wIC0gX3BoaSkgKiBiO1xuICAgICAgICBmMSA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGEgPSB4MTtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgZjEgPSBmMjtcbiAgICAgICAgeDIgPSAoMS4wIC0gX3BoaSkgKiBhICsgX3BoaSAqIGI7XG4gICAgICAgIGYyID0gdGhpcy5kaXN0YW5jZUF0QW5nbGUocGF0dGVybiwgeDIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBNYXRoLm1pbihmMSwgZjIpO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuZGlzdGFuY2VBdEFuZ2xlID0gZnVuY3Rpb24ocGF0dGVybiwgYW5nbGUpIHtcblxuICAgIHZhciBzdHJva2VQb2ludHMgPSB0aGlzLnJvdGF0ZUJ5KGFuZ2xlKTtcbiAgICB2YXIgcGF0dGVyblBvaW50cyA9IHBhdHRlcm4ucG9pbnRzO1xuICAgIHZhciBkID0gMC4wO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJva2VQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGQgKz0gZ2V0RGlzdGFuY2Uoc3Ryb2tlUG9pbnRzW2ldLCBwYXR0ZXJuUG9pbnRzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZCAvIHN0cm9rZVBvaW50cy5sZW5ndGg7XG4gIH07XG5cbiAgZnVuY3Rpb24gU2hhcGVEZXRlY3RvcihwYXR0ZXJucywgb3B0aW9ucykge1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy50aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZCB8fCAwO1xuICAgIF9uYlNhbXBsZVBvaW50cyA9IG9wdGlvbnMubmJTYW1wbGVQb2ludHMgfHwgNjQ7XG5cbiAgICB0aGlzLnBhdHRlcm5zID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmxlYXJuKHBhdHRlcm5zW2ldLm5hbWUsIHBhdHRlcm5zW2ldLnBvaW50cyk7XG4gICAgfVxuICB9XG5cbiAgU2hhcGVEZXRlY3Rvci5kZWZhdWx0U2hhcGVzID0gW1xuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogMCwgeTogNTAgfSwgeyB4OiAxMDAsIHk6IDUwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogNTAsIHk6IDAgfSwgeyB4OiA1MCwgeTogMTAwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogMCwgeTogMCB9LCB7IHg6IDEwMCwgeTogMTAwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogODksXCJ5XCI6IDE2NH0se1wieFwiOiA5MCxcInlcIjogMTYyfSx7XCJ4XCI6IDkyLFwieVwiOiAxNjJ9LHtcInhcIjogOTQsXCJ5XCI6IDE2NH0se1wieFwiOiA5NSxcInlcIjogMTY2fSx7XCJ4XCI6IDk2LFwieVwiOiAxNjl9LHtcInhcIjogOTcsXCJ5XCI6IDE3MX0se1wieFwiOiA5OSxcInlcIjogMTc1fSx7XCJ4XCI6IDEwMSxcInlcIjogMTc4fSx7XCJ4XCI6IDEwMyxcInlcIjogMTgyfSx7XCJ4XCI6IDEwNixcInlcIjogMTg5fSx7XCJ4XCI6IDEwOCxcInlcIjogMTk0fSx7XCJ4XCI6IDExMSxcInlcIjogMTk5fSx7XCJ4XCI6IDExNCxcInlcIjogMjA0fSx7XCJ4XCI6IDExNyxcInlcIjogMjA5fSx7XCJ4XCI6IDExOSxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMixcInlcIjogMjE4fSx7XCJ4XCI6IDEyNCxcInlcIjogMjIyfSx7XCJ4XCI6IDEyNixcInlcIjogMjI1fSx7XCJ4XCI6IDEyOCxcInlcIjogMjI4fSx7XCJ4XCI6IDEzMCxcInlcIjogMjI5fSx7XCJ4XCI6IDEzMyxcInlcIjogMjMzfSx7XCJ4XCI6IDEzNCxcInlcIjogMjM2fSx7XCJ4XCI6IDEzNixcInlcIjogMjM5fSx7XCJ4XCI6IDEzOCxcInlcIjogMjQwfSx7XCJ4XCI6IDEzOSxcInlcIjogMjQyfSx7XCJ4XCI6IDE0MCxcInlcIjogMjQ0fSx7XCJ4XCI6IDE0MixcInlcIjogMjQyfSx7XCJ4XCI6IDE0MixcInlcIjogMjQwfSx7XCJ4XCI6IDE0MixcInlcIjogMjM3fSx7XCJ4XCI6IDE0MyxcInlcIjogMjM1fSx7XCJ4XCI6IDE0MyxcInlcIjogMjMzfSx7XCJ4XCI6IDE0NSxcInlcIjogMjI5fSx7XCJ4XCI6IDE0NixcInlcIjogMjI2fSx7XCJ4XCI6IDE0OCxcInlcIjogMjE3fSx7XCJ4XCI6IDE0OSxcInlcIjogMjA4fSx7XCJ4XCI6IDE0OSxcInlcIjogMjA1fSx7XCJ4XCI6IDE1MSxcInlcIjogMTk2fSx7XCJ4XCI6IDE1MSxcInlcIjogMTkzfSx7XCJ4XCI6IDE1MyxcInlcIjogMTgyfSx7XCJ4XCI6IDE1NSxcInlcIjogMTcyfSx7XCJ4XCI6IDE1NyxcInlcIjogMTY1fSx7XCJ4XCI6IDE1OSxcInlcIjogMTYwfSx7XCJ4XCI6IDE2MixcInlcIjogMTU1fSx7XCJ4XCI6IDE2NCxcInlcIjogMTUwfSx7XCJ4XCI6IDE2NSxcInlcIjogMTQ4fSx7XCJ4XCI6IDE2NixcInlcIjogMTQ2fV0sXG4gICAgICBuYW1lOiBcImxpbmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA5MSxcInlcIjogMTg1fSx7XCJ4XCI6IDkzLFwieVwiOiAxODV9LHtcInhcIjogOTUsXCJ5XCI6IDE4NX0se1wieFwiOiA5NyxcInlcIjogMTg1fSx7XCJ4XCI6IDEwMCxcInlcIjogMTg4fSx7XCJ4XCI6IDEwMixcInlcIjogMTg5fSx7XCJ4XCI6IDEwNCxcInlcIjogMTkwfSx7XCJ4XCI6IDEwNixcInlcIjogMTkzfSx7XCJ4XCI6IDEwOCxcInlcIjogMTk1fSx7XCJ4XCI6IDExMCxcInlcIjogMTk4fSx7XCJ4XCI6IDExMixcInlcIjogMjAxfSx7XCJ4XCI6IDExNCxcInlcIjogMjA0fSx7XCJ4XCI6IDExNSxcInlcIjogMjA3fSx7XCJ4XCI6IDExNyxcInlcIjogMjEwfSx7XCJ4XCI6IDExOCxcInlcIjogMjEyfSx7XCJ4XCI6IDEyMCxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMSxcInlcIjogMjE3fSx7XCJ4XCI6IDEyMixcInlcIjogMjE5fSx7XCJ4XCI6IDEyMyxcInlcIjogMjIyfSx7XCJ4XCI6IDEyNCxcInlcIjogMjI0fSx7XCJ4XCI6IDEyNixcInlcIjogMjI2fSx7XCJ4XCI6IDEyNyxcInlcIjogMjI5fSx7XCJ4XCI6IDEyOSxcInlcIjogMjMxfSx7XCJ4XCI6IDEzMCxcInlcIjogMjMzfSx7XCJ4XCI6IDEyOSxcInlcIjogMjMxfSx7XCJ4XCI6IDEyOSxcInlcIjogMjI4fSx7XCJ4XCI6IDEyOSxcInlcIjogMjI2fSx7XCJ4XCI6IDEyOSxcInlcIjogMjI0fSx7XCJ4XCI6IDEyOSxcInlcIjogMjIxfSx7XCJ4XCI6IDEyOSxcInlcIjogMjE4fSx7XCJ4XCI6IDEyOSxcInlcIjogMjEyfSx7XCJ4XCI6IDEyOSxcInlcIjogMjA4fSx7XCJ4XCI6IDEzMCxcInlcIjogMTk4fSx7XCJ4XCI6IDEzMixcInlcIjogMTg5fSx7XCJ4XCI6IDEzNCxcInlcIjogMTgyfSx7XCJ4XCI6IDEzNyxcInlcIjogMTczfSx7XCJ4XCI6IDE0MyxcInlcIjogMTY0fSx7XCJ4XCI6IDE0NyxcInlcIjogMTU3fSx7XCJ4XCI6IDE1MSxcInlcIjogMTUxfSx7XCJ4XCI6IDE1NSxcInlcIjogMTQ0fSx7XCJ4XCI6IDE2MSxcInlcIjogMTM3fSx7XCJ4XCI6IDE2NSxcInlcIjogMTMxfSx7XCJ4XCI6IDE3MSxcInlcIjogMTIyfSx7XCJ4XCI6IDE3NCxcInlcIjogMTE4fSx7XCJ4XCI6IDE3NixcInlcIjogMTE0fSx7XCJ4XCI6IDE3NyxcInlcIjogMTEyfSx7XCJ4XCI6IDE3NyxcInlcIjogMTE0fSx7XCJ4XCI6IDE3NSxcInlcIjogMTE2fSx7XCJ4XCI6IDE3MyxcInlcIjogMTE4fV0sXG4gICAgICBuYW1lOiBcImxpbmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjExMyxcInlcIjo2OH0se1wieFwiOjg2LFwieVwiOjc5fSx7XCJ4XCI6NjMsXCJ5XCI6MTMxfSx7XCJ4XCI6NzgsXCJ5XCI6MTQ3fSx7XCJ4XCI6MTU2LFwieVwiOjE0OX0se1wieFwiOjE5NSxcInlcIjoxMDB9LHtcInhcIjoxODksXCJ5XCI6Nzl9LHtcInhcIjoxMjUuNzM0OTcsXCJ5XCI6NjIuODExNjh9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo5OCxcInlcIjo2N30se1wieFwiOjc3LFwieVwiOjg1fSx7XCJ4XCI6NzcsXCJ5XCI6MTYyfSx7XCJ4XCI6MTc5LFwieVwiOjE1Nn0se1wieFwiOjE5NyxcInlcIjoxMjN9LHtcInhcIjoxNjcsXCJ5XCI6NjN9LHtcInhcIjoxNDEsXCJ5XCI6NjF9LHtcInhcIjoxMTAsXCJ5XCI6NTl9LHtcInhcIjoxMDYuNTExOTIsXCJ5XCI6NTkuNzA0MDd9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo2MCxcInlcIjo0N30se1wieFwiOjQzLFwieVwiOjk2fSx7XCJ4XCI6NTIsXCJ5XCI6MjA2fSx7XCJ4XCI6NjMsXCJ5XCI6MjQ2fSx7XCJ4XCI6MTE4LFwieVwiOjI5Nn0se1wieFwiOjE0NCxcInlcIjoyNDZ9LHtcInhcIjoxNDEsXCJ5XCI6MTQ3fSx7XCJ4XCI6MTMzLFwieVwiOjEyOX0se1wieFwiOjExMyxcInlcIjo4MH0se1wieFwiOjYwLjQyNzM4LFwieVwiOjQ1Ljc2ODEzfV0sXG4gICAgICBuYW1lOiBcImNpcmNsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDEyNyxcInlcIjogMTQxfSx7XCJ4XCI6IDEyNCxcInlcIjogMTQwfSx7XCJ4XCI6IDEyMCxcInlcIjogMTM5fSx7XCJ4XCI6IDExOCxcInlcIjogMTM5fSx7XCJ4XCI6IDExNixcInlcIjogMTM5fSx7XCJ4XCI6IDExMSxcInlcIjogMTQwfSx7XCJ4XCI6IDEwOSxcInlcIjogMTQxfSx7XCJ4XCI6IDEwNCxcInlcIjogMTQ0fSx7XCJ4XCI6IDEwMCxcInlcIjogMTQ3fSx7XCJ4XCI6IDk2LFwieVwiOiAxNTJ9LHtcInhcIjogOTMsXCJ5XCI6IDE1N30se1wieFwiOiA5MCxcInlcIjogMTYzfSx7XCJ4XCI6IDg3LFwieVwiOiAxNjl9LHtcInhcIjogODUsXCJ5XCI6IDE3NX0se1wieFwiOiA4MyxcInlcIjogMTgxfSx7XCJ4XCI6IDgyLFwieVwiOiAxOTB9LHtcInhcIjogODIsXCJ5XCI6IDE5NX0se1wieFwiOiA4MyxcInlcIjogMjAwfSx7XCJ4XCI6IDg0LFwieVwiOiAyMDV9LHtcInhcIjogODgsXCJ5XCI6IDIxM30se1wieFwiOiA5MSxcInlcIjogMjE2fSx7XCJ4XCI6IDk2LFwieVwiOiAyMTl9LHtcInhcIjogMTAzLFwieVwiOiAyMjJ9LHtcInhcIjogMTA4LFwieVwiOiAyMjR9LHtcInhcIjogMTExLFwieVwiOiAyMjR9LHtcInhcIjogMTIwLFwieVwiOiAyMjR9LHtcInhcIjogMTMzLFwieVwiOiAyMjN9LHtcInhcIjogMTQyLFwieVwiOiAyMjJ9LHtcInhcIjogMTUyLFwieVwiOiAyMTh9LHtcInhcIjogMTYwLFwieVwiOiAyMTR9LHtcInhcIjogMTY3LFwieVwiOiAyMTB9LHtcInhcIjogMTczLFwieVwiOiAyMDR9LHtcInhcIjogMTc4LFwieVwiOiAxOTh9LHtcInhcIjogMTc5LFwieVwiOiAxOTZ9LHtcInhcIjogMTgyLFwieVwiOiAxODh9LHtcInhcIjogMTgyLFwieVwiOiAxNzd9LHtcInhcIjogMTc4LFwieVwiOiAxNjd9LHtcInhcIjogMTcwLFwieVwiOiAxNTB9LHtcInhcIjogMTYzLFwieVwiOiAxMzh9LHtcInhcIjogMTUyLFwieVwiOiAxMzB9LHtcInhcIjogMTQzLFwieVwiOiAxMjl9LHtcInhcIjogMTQwLFwieVwiOiAxMzF9LHtcInhcIjogMTI5LFwieVwiOiAxMzZ9LHtcInhcIjogMTI2LFwieVwiOiAxMzl9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo1MTYsXCJ5XCI6Mjg0fSx7XCJ4XCI6NDk2LFwieVwiOjMxOX0se1wieFwiOjQ5NixcInlcIjozMjl9LHtcInhcIjo1MTMsXCJ5XCI6MzI5fSx7XCJ4XCI6NTUwLFwieVwiOjMyNH0se1wieFwiOjY5NixcInlcIjozMDV9LHtcInhcIjo3MzcsXCJ5XCI6Mjk4fSx7XCJ4XCI6NzQ2LFwieVwiOjI5Mn0se1wieFwiOjczNCxcInlcIjoyNzh9LHtcInhcIjo3MDksXCJ5XCI6MjUyfSx7XCJ4XCI6NjY0LFwieVwiOjE5M31dLFxuICAgICAgbmFtZTogXCJ0cmlhbmdsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6MTc5LFwieVwiOjE1OX0se1wieFwiOjE1MixcInlcIjoyOTB9LHtcInhcIjoxNDMsXCJ5XCI6MzM2fSx7XCJ4XCI6MTQyLFwieVwiOjM1NX0se1wieFwiOjE2MCxcInlcIjozNDh9LHtcInhcIjoyMDgsXCJ5XCI6MzM3fSx7XCJ4XCI6MjQxLFwieVwiOjMzMH0se1wieFwiOjI1NixcInlcIjozMjh9LHtcInhcIjoyNTQsXCJ5XCI6MzE1fSx7XCJ4XCI6MjM4LFwieVwiOjI3N30se1wieFwiOjIxMCxcInlcIjoyMDB9LHtcInhcIjoxODIuOTQzNTYsXCJ5XCI6MTEwLjQ1NjU2fV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjoxMDUsXCJ5XCI6MzM1fSx7XCJ4XCI6MTE1LFwieVwiOjM2Mn0se1wieFwiOjEyOCxcInlcIjozMzh9LHtcInhcIjoxNjMsXCJ5XCI6MjcxfSx7XCJ4XCI6MjQxLFwieVwiOjEzNX0se1wieFwiOjI2MSxcInlcIjoxMDR9LHtcInhcIjoyNjcsXCJ5XCI6OTh9LHtcInhcIjoyNjEsXCJ5XCI6MTAyfSx7XCJ4XCI6MjM2LFwieVwiOjExOX0se1wieFwiOjE1MSxcInlcIjoxOTV9LHtcInhcIjoxMDgsXCJ5XCI6MjM1fSx7XCJ4XCI6ODMsXCJ5XCI6MjY3fSx7XCJ4XCI6NzkuOTI2MTYsXCJ5XCI6MjcwLjkzNDUxfV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogMTM3LFwieVwiOiAxMzl9LHtcInhcIjogMTM1LFwieVwiOiAxNDF9LHtcInhcIjogMTMzLFwieVwiOiAxNDR9LHtcInhcIjogMTMyLFwieVwiOiAxNDZ9LHtcInhcIjogMTMwLFwieVwiOiAxNDl9LHtcInhcIjogMTI4LFwieVwiOiAxNTF9LHtcInhcIjogMTI2LFwieVwiOiAxNTV9LHtcInhcIjogMTIzLFwieVwiOiAxNjB9LHtcInhcIjogMTIwLFwieVwiOiAxNjZ9LHtcInhcIjogMTE2LFwieVwiOiAxNzF9LHtcInhcIjogMTEyLFwieVwiOiAxNzd9LHtcInhcIjogMTA3LFwieVwiOiAxODN9LHtcInhcIjogMTAyLFwieVwiOiAxODh9LHtcInhcIjogMTAwLFwieVwiOiAxOTF9LHtcInhcIjogOTUsXCJ5XCI6IDE5NX0se1wieFwiOiA5MCxcInlcIjogMTk5fSx7XCJ4XCI6IDg2LFwieVwiOiAyMDN9LHtcInhcIjogODIsXCJ5XCI6IDIwNn0se1wieFwiOiA4MCxcInlcIjogMjA5fSx7XCJ4XCI6IDc1LFwieVwiOiAyMTN9LHtcInhcIjogNzMsXCJ5XCI6IDIxM30se1wieFwiOiA3MCxcInlcIjogMjE2fSx7XCJ4XCI6IDY3LFwieVwiOiAyMTl9LHtcInhcIjogNjQsXCJ5XCI6IDIyMX0se1wieFwiOiA2MSxcInlcIjogMjIzfSx7XCJ4XCI6IDYwLFwieVwiOiAyMjV9LHtcInhcIjogNjIsXCJ5XCI6IDIyNn0se1wieFwiOiA2NSxcInlcIjogMjI1fSx7XCJ4XCI6IDY3LFwieVwiOiAyMjZ9LHtcInhcIjogNzQsXCJ5XCI6IDIyNn0se1wieFwiOiA3NyxcInlcIjogMjI3fSx7XCJ4XCI6IDg1LFwieVwiOiAyMjl9LHtcInhcIjogOTEsXCJ5XCI6IDIzMH0se1wieFwiOiA5OSxcInlcIjogMjMxfSx7XCJ4XCI6IDEwOCxcInlcIjogMjMyfSx7XCJ4XCI6IDExNixcInlcIjogMjMzfSx7XCJ4XCI6IDEyNSxcInlcIjogMjMzfSx7XCJ4XCI6IDEzNCxcInlcIjogMjM0fSx7XCJ4XCI6IDE0NSxcInlcIjogMjMzfSx7XCJ4XCI6IDE1MyxcInlcIjogMjMyfSx7XCJ4XCI6IDE2MCxcInlcIjogMjMzfSx7XCJ4XCI6IDE3MCxcInlcIjogMjM0fSx7XCJ4XCI6IDE3NyxcInlcIjogMjM1fSx7XCJ4XCI6IDE3OSxcInlcIjogMjM2fSx7XCJ4XCI6IDE4NixcInlcIjogMjM3fSx7XCJ4XCI6IDE5MyxcInlcIjogMjM4fSx7XCJ4XCI6IDE5OCxcInlcIjogMjM5fSx7XCJ4XCI6IDIwMCxcInlcIjogMjM3fSx7XCJ4XCI6IDIwMixcInlcIjogMjM5fSx7XCJ4XCI6IDIwNCxcInlcIjogMjM4fSx7XCJ4XCI6IDIwNixcInlcIjogMjM0fSx7XCJ4XCI6IDIwNSxcInlcIjogMjMwfSx7XCJ4XCI6IDIwMixcInlcIjogMjIyfSx7XCJ4XCI6IDE5NyxcInlcIjogMjE2fSx7XCJ4XCI6IDE5MixcInlcIjogMjA3fSx7XCJ4XCI6IDE4NixcInlcIjogMTk4fSx7XCJ4XCI6IDE3OSxcInlcIjogMTg5fSx7XCJ4XCI6IDE3NCxcInlcIjogMTgzfSx7XCJ4XCI6IDE3MCxcInlcIjogMTc4fSx7XCJ4XCI6IDE2NCxcInlcIjogMTcxfSx7XCJ4XCI6IDE2MSxcInlcIjogMTY4fSx7XCJ4XCI6IDE1NCxcInlcIjogMTYwfSx7XCJ4XCI6IDE0OCxcInlcIjogMTU1fSx7XCJ4XCI6IDE0MyxcInlcIjogMTUwfSx7XCJ4XCI6IDEzOCxcInlcIjogMTQ4fSx7XCJ4XCI6IDEzNixcInlcIjogMTQ4fV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3t4OiAwLCB5OiAwfSwge3g6IDAsIHk6IDUwfSwge3g6IDUwLCB5OiA1MH0sIHt4OiA1MCwgeTogMH1dLFxuICAgICAgbmFtZTogXCJzcXVhcmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe3g6IDAsIHk6IDB9LCB7eDogMCwgeTogMTAwfSwge3g6IDUwLCB5OiAxMDB9LCB7eDogNTAsIHk6IDB9XSxcbiAgICAgIG5hbWU6IFwic3F1YXJlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogNzgsXCJ5XCI6IDE0OX0se1wieFwiOiA3OCxcInlcIjogMTUzfSx7XCJ4XCI6IDc4LFwieVwiOiAxNTd9LHtcInhcIjogNzgsXCJ5XCI6IDE2MH0se1wieFwiOiA3OSxcInlcIjogMTYyfSx7XCJ4XCI6IDc5LFwieVwiOiAxNjR9LHtcInhcIjogNzksXCJ5XCI6IDE2N30se1wieFwiOiA3OSxcInlcIjogMTY5fSx7XCJ4XCI6IDc5LFwieVwiOiAxNzN9LHtcInhcIjogNzksXCJ5XCI6IDE3OH0se1wieFwiOiA3OSxcInlcIjogMTgzfSx7XCJ4XCI6IDgwLFwieVwiOiAxODl9LHtcInhcIjogODAsXCJ5XCI6IDE5M30se1wieFwiOiA4MCxcInlcIjogMTk4fSx7XCJ4XCI6IDgwLFwieVwiOiAyMDJ9LHtcInhcIjogODEsXCJ5XCI6IDIwOH0se1wieFwiOiA4MSxcInlcIjogMjEwfSx7XCJ4XCI6IDgxLFwieVwiOiAyMTZ9LHtcInhcIjogODIsXCJ5XCI6IDIyMn0se1wieFwiOiA4MixcInlcIjogMjI0fSx7XCJ4XCI6IDgyLFwieVwiOiAyMjd9LHtcInhcIjogODMsXCJ5XCI6IDIyOX0se1wieFwiOiA4MyxcInlcIjogMjMxfSx7XCJ4XCI6IDg1LFwieVwiOiAyMzB9LHtcInhcIjogODgsXCJ5XCI6IDIzMn0se1wieFwiOiA5MCxcInlcIjogMjMzfSx7XCJ4XCI6IDkyLFwieVwiOiAyMzJ9LHtcInhcIjogOTQsXCJ5XCI6IDIzM30se1wieFwiOiA5OSxcInlcIjogMjMyfSx7XCJ4XCI6IDEwMixcInlcIjogMjMzfSx7XCJ4XCI6IDEwNixcInlcIjogMjMzfSx7XCJ4XCI6IDEwOSxcInlcIjogMjM0fSx7XCJ4XCI6IDExNyxcInlcIjogMjM1fSx7XCJ4XCI6IDEyMyxcInlcIjogMjM2fSx7XCJ4XCI6IDEyNixcInlcIjogMjM2fSx7XCJ4XCI6IDEzNSxcInlcIjogMjM3fSx7XCJ4XCI6IDE0MixcInlcIjogMjM4fSx7XCJ4XCI6IDE0NSxcInlcIjogMjM4fSx7XCJ4XCI6IDE1MixcInlcIjogMjM4fSx7XCJ4XCI6IDE1NCxcInlcIjogMjM5fSx7XCJ4XCI6IDE2NSxcInlcIjogMjM4fSx7XCJ4XCI6IDE3NCxcInlcIjogMjM3fSx7XCJ4XCI6IDE3OSxcInlcIjogMjM2fSx7XCJ4XCI6IDE4NixcInlcIjogMjM1fSx7XCJ4XCI6IDE5MSxcInlcIjogMjM1fSx7XCJ4XCI6IDE5NSxcInlcIjogMjMzfSx7XCJ4XCI6IDE5NyxcInlcIjogMjMzfSx7XCJ4XCI6IDIwMCxcInlcIjogMjMzfSx7XCJ4XCI6IDIwMSxcInlcIjogMjM1fSx7XCJ4XCI6IDIwMSxcInlcIjogMjMzfSx7XCJ4XCI6IDE5OSxcInlcIjogMjMxfSx7XCJ4XCI6IDE5OCxcInlcIjogMjI2fSx7XCJ4XCI6IDE5OCxcInlcIjogMjIwfSx7XCJ4XCI6IDE5NixcInlcIjogMjA3fSx7XCJ4XCI6IDE5NSxcInlcIjogMTk1fSx7XCJ4XCI6IDE5NSxcInlcIjogMTgxfSx7XCJ4XCI6IDE5NSxcInlcIjogMTczfSx7XCJ4XCI6IDE5NSxcInlcIjogMTYzfSx7XCJ4XCI6IDE5NCxcInlcIjogMTU1fSx7XCJ4XCI6IDE5MixcInlcIjogMTQ1fSx7XCJ4XCI6IDE5MixcInlcIjogMTQzfSx7XCJ4XCI6IDE5MixcInlcIjogMTM4fSx7XCJ4XCI6IDE5MSxcInlcIjogMTM1fSx7XCJ4XCI6IDE5MSxcInlcIjogMTMzfSx7XCJ4XCI6IDE5MSxcInlcIjogMTMwfSx7XCJ4XCI6IDE5MCxcInlcIjogMTI4fSx7XCJ4XCI6IDE4OCxcInlcIjogMTI5fSx7XCJ4XCI6IDE4NixcInlcIjogMTI5fSx7XCJ4XCI6IDE4MSxcInlcIjogMTMyfSx7XCJ4XCI6IDE3MyxcInlcIjogMTMxfSx7XCJ4XCI6IDE2MixcInlcIjogMTMxfSx7XCJ4XCI6IDE1MSxcInlcIjogMTMyfSx7XCJ4XCI6IDE0OSxcInlcIjogMTMyfSx7XCJ4XCI6IDEzOCxcInlcIjogMTMyfSx7XCJ4XCI6IDEzNixcInlcIjogMTMyfSx7XCJ4XCI6IDEyMixcInlcIjogMTMxfSx7XCJ4XCI6IDEyMCxcInlcIjogMTMxfSx7XCJ4XCI6IDEwOSxcInlcIjogMTMwfSx7XCJ4XCI6IDEwNyxcInlcIjogMTMwfSx7XCJ4XCI6IDkwLFwieVwiOiAxMzJ9LHtcInhcIjogODEsXCJ5XCI6IDEzM30se1wieFwiOiA3NixcInlcIjogMTMzfV0sXG4gICAgICBuYW1lOiBcInNxdWFyZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6NjcsXCJ5XCI6MTcyfSx7XCJ4XCI6ODAsXCJ5XCI6ODV9LHtcInhcIjo4MyxcInlcIjo1OH0se1wieFwiOjgzLFwieVwiOjU0fSx7XCJ4XCI6MTM2LFwieVwiOjExMH0se1wieFwiOjE1NyxcInlcIjoxMzZ9LHtcInhcIjoxNjIsXCJ5XCI6MTQwfSx7XCJ4XCI6MTY2LFwieVwiOjE0M30se1wieFwiOjgwLFwieVwiOjEyNH0se1wieFwiOjQ1LFwieVwiOjExNn0se1wieFwiOjM3LFwieVwiOjExNH0se1wieFwiOjMxLFwieVwiOjExM30se1wieFwiOjUyLFwieVwiOjEwNn0se1wieFwiOjEwMSxcInlcIjo4Nn0se1wieFwiOjEzMSxcInlcIjo3NX0se1wieFwiOjE1NyxcInlcIjo2M30se1wieFwiOjE2MyxcInlcIjo2Mn0se1wieFwiOjE1OCxcInlcIjo2NH0se1wieFwiOjE1MyxcInlcIjo3M30se1wieFwiOjEyOCxcInlcIjoxMDN9LHtcInhcIjo3MSxcInlcIjoxNzB9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjMwLFwieVwiOjY5fSx7XCJ4XCI6MTE2LFwieVwiOjExOH0se1wieFwiOjkwLFwieVwiOjE2NH0se1wieFwiOjc1LFwieVwiOjExN30se1wieFwiOjE1NyxcInlcIjo4M30se1wieFwiOjE4MixcInlcIjoxNDB9LHtcInhcIjoxNTUsXCJ5XCI6MTYzfSx7XCJ4XCI6MTQ0LFwieVwiOjExOX0se1wieFwiOjIyMSxcInlcIjo1NH1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6ODcsXCJ5XCI6NzZ9LHtcInhcIjo2MixcInlcIjo3M30se1wieFwiOjEwMCxcInlcIjo5OH0se1wieFwiOjEwNyxcInlcIjo1N30se1wieFwiOjYxLFwieVwiOjM4fSx7XCJ4XCI6NzMsXCJ5XCI6MTM3fV0sXG4gICAgICBuYW1lOiBcIm90aGVyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogMTIzLFwieVwiOiAxMjl9LHtcInhcIjogMTIzLFwieVwiOiAxMzF9LHtcInhcIjogMTI0LFwieVwiOiAxMzN9LHtcInhcIjogMTI1LFwieVwiOiAxMzZ9LHtcInhcIjogMTI3LFwieVwiOiAxNDB9LHtcInhcIjogMTI5LFwieVwiOiAxNDJ9LHtcInhcIjogMTMzLFwieVwiOiAxNDh9LHtcInhcIjogMTM3LFwieVwiOiAxNTR9LHtcInhcIjogMTQzLFwieVwiOiAxNTh9LHtcInhcIjogMTQ1LFwieVwiOiAxNjF9LHtcInhcIjogMTQ4LFwieVwiOiAxNjR9LHtcInhcIjogMTUzLFwieVwiOiAxNzB9LHtcInhcIjogMTU4LFwieVwiOiAxNzZ9LHtcInhcIjogMTYwLFwieVwiOiAxNzh9LHtcInhcIjogMTY0LFwieVwiOiAxODN9LHtcInhcIjogMTY4LFwieVwiOiAxODh9LHtcInhcIjogMTcxLFwieVwiOiAxOTF9LHtcInhcIjogMTc1LFwieVwiOiAxOTZ9LHtcInhcIjogMTc4LFwieVwiOiAyMDB9LHtcInhcIjogMTgwLFwieVwiOiAyMDJ9LHtcInhcIjogMTgxLFwieVwiOiAyMDV9LHtcInhcIjogMTg0LFwieVwiOiAyMDh9LHtcInhcIjogMTg2LFwieVwiOiAyMTB9LHtcInhcIjogMTg3LFwieVwiOiAyMTN9LHtcInhcIjogMTg4LFwieVwiOiAyMTV9LHtcInhcIjogMTg2LFwieVwiOiAyMTJ9LHtcInhcIjogMTgzLFwieVwiOiAyMTF9LHtcInhcIjogMTc3LFwieVwiOiAyMDh9LHtcInhcIjogMTY5LFwieVwiOiAyMDZ9LHtcInhcIjogMTYyLFwieVwiOiAyMDV9LHtcInhcIjogMTU0LFwieVwiOiAyMDd9LHtcInhcIjogMTQ1LFwieVwiOiAyMDl9LHtcInhcIjogMTM3LFwieVwiOiAyMTB9LHtcInhcIjogMTI5LFwieVwiOiAyMTR9LHtcInhcIjogMTIyLFwieVwiOiAyMTd9LHtcInhcIjogMTE4LFwieVwiOiAyMTh9LHtcInhcIjogMTExLFwieVwiOiAyMjF9LHtcInhcIjogMTA5LFwieVwiOiAyMjJ9LHtcInhcIjogMTEwLFwieVwiOiAyMTl9LHtcInhcIjogMTEyLFwieVwiOiAyMTd9LHtcInhcIjogMTE4LFwieVwiOiAyMDl9LHtcInhcIjogMTIwLFwieVwiOiAyMDd9LHtcInhcIjogMTI4LFwieVwiOiAxOTZ9LHtcInhcIjogMTM1LFwieVwiOiAxODd9LHtcInhcIjogMTM4LFwieVwiOiAxODN9LHtcInhcIjogMTQ4LFwieVwiOiAxNjd9LHtcInhcIjogMTU3LFwieVwiOiAxNTN9LHtcInhcIjogMTYzLFwieVwiOiAxNDV9LHtcInhcIjogMTY1LFwieVwiOiAxNDJ9LHtcInhcIjogMTcyLFwieVwiOiAxMzN9LHtcInhcIjogMTc3LFwieVwiOiAxMjd9LHtcInhcIjogMTc5LFwieVwiOiAxMjd9LHtcInhcIjogMTgwLFwieVwiOiAxMjV9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA4MSxcInlcIjogMjE5fSx7XCJ4XCI6IDg0LFwieVwiOiAyMTh9LHtcInhcIjogODYsXCJ5XCI6IDIyMH0se1wieFwiOiA4OCxcInlcIjogMjIwfSx7XCJ4XCI6IDkwLFwieVwiOiAyMjB9LHtcInhcIjogOTIsXCJ5XCI6IDIxOX0se1wieFwiOiA5NSxcInlcIjogMjIwfSx7XCJ4XCI6IDk3LFwieVwiOiAyMTl9LHtcInhcIjogOTksXCJ5XCI6IDIyMH0se1wieFwiOiAxMDIsXCJ5XCI6IDIxOH0se1wieFwiOiAxMDUsXCJ5XCI6IDIxN30se1wieFwiOiAxMDcsXCJ5XCI6IDIxNn0se1wieFwiOiAxMTAsXCJ5XCI6IDIxNn0se1wieFwiOiAxMTMsXCJ5XCI6IDIxNH0se1wieFwiOiAxMTYsXCJ5XCI6IDIxMn0se1wieFwiOiAxMTgsXCJ5XCI6IDIxMH0se1wieFwiOiAxMjEsXCJ5XCI6IDIwOH0se1wieFwiOiAxMjQsXCJ5XCI6IDIwNX0se1wieFwiOiAxMjYsXCJ5XCI6IDIwMn0se1wieFwiOiAxMjksXCJ5XCI6IDE5OX0se1wieFwiOiAxMzIsXCJ5XCI6IDE5Nn0se1wieFwiOiAxMzYsXCJ5XCI6IDE5MX0se1wieFwiOiAxMzksXCJ5XCI6IDE4N30se1wieFwiOiAxNDIsXCJ5XCI6IDE4Mn0se1wieFwiOiAxNDQsXCJ5XCI6IDE3OX0se1wieFwiOiAxNDYsXCJ5XCI6IDE3NH0se1wieFwiOiAxNDgsXCJ5XCI6IDE3MH0se1wieFwiOiAxNDksXCJ5XCI6IDE2OH0se1wieFwiOiAxNTEsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNTIsXCJ5XCI6IDE2MH0se1wieFwiOiAxNTIsXCJ5XCI6IDE1N30se1wieFwiOiAxNTIsXCJ5XCI6IDE1NX0se1wieFwiOiAxNTIsXCJ5XCI6IDE1MX0se1wieFwiOiAxNTIsXCJ5XCI6IDE0OX0se1wieFwiOiAxNTIsXCJ5XCI6IDE0Nn0se1wieFwiOiAxNDksXCJ5XCI6IDE0Mn0se1wieFwiOiAxNDgsXCJ5XCI6IDEzOX0se1wieFwiOiAxNDUsXCJ5XCI6IDEzN30se1wieFwiOiAxNDEsXCJ5XCI6IDEzNX0se1wieFwiOiAxMzksXCJ5XCI6IDEzNX0se1wieFwiOiAxMzQsXCJ5XCI6IDEzNn0se1wieFwiOiAxMzAsXCJ5XCI6IDE0MH0se1wieFwiOiAxMjgsXCJ5XCI6IDE0Mn0se1wieFwiOiAxMjYsXCJ5XCI6IDE0NX0se1wieFwiOiAxMjIsXCJ5XCI6IDE1MH0se1wieFwiOiAxMTksXCJ5XCI6IDE1OH0se1wieFwiOiAxMTcsXCJ5XCI6IDE2M30se1wieFwiOiAxMTUsXCJ5XCI6IDE3MH0se1wieFwiOiAxMTQsXCJ5XCI6IDE3NX0se1wieFwiOiAxMTcsXCJ5XCI6IDE4NH0se1wieFwiOiAxMjAsXCJ5XCI6IDE5MH0se1wieFwiOiAxMjUsXCJ5XCI6IDE5OX0se1wieFwiOiAxMjksXCJ5XCI6IDIwM30se1wieFwiOiAxMzMsXCJ5XCI6IDIwOH0se1wieFwiOiAxMzgsXCJ5XCI6IDIxM30se1wieFwiOiAxNDUsXCJ5XCI6IDIxNX0se1wieFwiOiAxNTUsXCJ5XCI6IDIxOH0se1wieFwiOiAxNjQsXCJ5XCI6IDIxOX0se1wieFwiOiAxNjYsXCJ5XCI6IDIxOX0se1wieFwiOiAxNzcsXCJ5XCI6IDIxOX0se1wieFwiOiAxODIsXCJ5XCI6IDIxOH0se1wieFwiOiAxOTIsXCJ5XCI6IDIxNn0se1wieFwiOiAxOTYsXCJ5XCI6IDIxM30se1wieFwiOiAxOTksXCJ5XCI6IDIxMn0se1wieFwiOiAyMDEsXCJ5XCI6IDIxMX1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDc1LFwieVwiOiAyNTB9LHtcInhcIjogNzUsXCJ5XCI6IDI0N30se1wieFwiOiA3NyxcInlcIjogMjQ0fSx7XCJ4XCI6IDc4LFwieVwiOiAyNDJ9LHtcInhcIjogNzksXCJ5XCI6IDIzOX0se1wieFwiOiA4MCxcInlcIjogMjM3fSx7XCJ4XCI6IDgyLFwieVwiOiAyMzR9LHtcInhcIjogODIsXCJ5XCI6IDIzMn0se1wieFwiOiA4NCxcInlcIjogMjI5fSx7XCJ4XCI6IDg1LFwieVwiOiAyMjV9LHtcInhcIjogODcsXCJ5XCI6IDIyMn0se1wieFwiOiA4OCxcInlcIjogMjE5fSx7XCJ4XCI6IDg5LFwieVwiOiAyMTZ9LHtcInhcIjogOTEsXCJ5XCI6IDIxMn0se1wieFwiOiA5MixcInlcIjogMjA4fSx7XCJ4XCI6IDk0LFwieVwiOiAyMDR9LHtcInhcIjogOTUsXCJ5XCI6IDIwMX0se1wieFwiOiA5NixcInlcIjogMTk2fSx7XCJ4XCI6IDk3LFwieVwiOiAxOTR9LHtcInhcIjogOTgsXCJ5XCI6IDE5MX0se1wieFwiOiAxMDAsXCJ5XCI6IDE4NX0se1wieFwiOiAxMDIsXCJ5XCI6IDE3OH0se1wieFwiOiAxMDQsXCJ5XCI6IDE3M30se1wieFwiOiAxMDQsXCJ5XCI6IDE3MX0se1wieFwiOiAxMDUsXCJ5XCI6IDE2NH0se1wieFwiOiAxMDYsXCJ5XCI6IDE1OH0se1wieFwiOiAxMDcsXCJ5XCI6IDE1Nn0se1wieFwiOiAxMDcsXCJ5XCI6IDE1Mn0se1wieFwiOiAxMDgsXCJ5XCI6IDE0NX0se1wieFwiOiAxMDksXCJ5XCI6IDE0MX0se1wieFwiOiAxMTAsXCJ5XCI6IDEzOX0se1wieFwiOiAxMTIsXCJ5XCI6IDEzM30se1wieFwiOiAxMTMsXCJ5XCI6IDEzMX0se1wieFwiOiAxMTYsXCJ5XCI6IDEyN30se1wieFwiOiAxMTcsXCJ5XCI6IDEyNX0se1wieFwiOiAxMTksXCJ5XCI6IDEyMn0se1wieFwiOiAxMjEsXCJ5XCI6IDEyMX0se1wieFwiOiAxMjMsXCJ5XCI6IDEyMH0se1wieFwiOiAxMjUsXCJ5XCI6IDEyMn0se1wieFwiOiAxMjUsXCJ5XCI6IDEyNX0se1wieFwiOiAxMjcsXCJ5XCI6IDEzMH0se1wieFwiOiAxMjgsXCJ5XCI6IDEzM30se1wieFwiOiAxMzEsXCJ5XCI6IDE0M30se1wieFwiOiAxMzYsXCJ5XCI6IDE1M30se1wieFwiOiAxNDAsXCJ5XCI6IDE2M30se1wieFwiOiAxNDQsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNDUsXCJ5XCI6IDE3NX0se1wieFwiOiAxNTEsXCJ5XCI6IDE4OX0se1wieFwiOiAxNTYsXCJ5XCI6IDIwMX0se1wieFwiOiAxNjEsXCJ5XCI6IDIxM30se1wieFwiOiAxNjYsXCJ5XCI6IDIyNX0se1wieFwiOiAxNjksXCJ5XCI6IDIzM30se1wieFwiOiAxNzEsXCJ5XCI6IDIzNn0se1wieFwiOiAxNzQsXCJ5XCI6IDI0M30se1wieFwiOiAxNzcsXCJ5XCI6IDI0N30se1wieFwiOiAxNzgsXCJ5XCI6IDI0OX0se1wieFwiOiAxNzksXCJ5XCI6IDI1MX0se1wieFwiOiAxODAsXCJ5XCI6IDI1M30se1wieFwiOiAxODAsXCJ5XCI6IDI1NX0se1wieFwiOiAxNzksXCJ5XCI6IDI1N30se1wieFwiOiAxNzcsXCJ5XCI6IDI1N30se1wieFwiOiAxNzQsXCJ5XCI6IDI1NX0se1wieFwiOiAxNjksXCJ5XCI6IDI1MH0se1wieFwiOiAxNjQsXCJ5XCI6IDI0N30se1wieFwiOiAxNjAsXCJ5XCI6IDI0NX0se1wieFwiOiAxNDksXCJ5XCI6IDIzOH0se1wieFwiOiAxMzgsXCJ5XCI6IDIzMH0se1wieFwiOiAxMjcsXCJ5XCI6IDIyMX0se1wieFwiOiAxMjQsXCJ5XCI6IDIyMH0se1wieFwiOiAxMTIsXCJ5XCI6IDIxMn0se1wieFwiOiAxMTAsXCJ5XCI6IDIxMH0se1wieFwiOiA5NixcInlcIjogMjAxfSx7XCJ4XCI6IDg0LFwieVwiOiAxOTV9LHtcInhcIjogNzQsXCJ5XCI6IDE5MH0se1wieFwiOiA2NCxcInlcIjogMTgyfSx7XCJ4XCI6IDU1LFwieVwiOiAxNzV9LHtcInhcIjogNTEsXCJ5XCI6IDE3Mn0se1wieFwiOiA0OSxcInlcIjogMTcwfSx7XCJ4XCI6IDUxLFwieVwiOiAxNjl9LHtcInhcIjogNTYsXCJ5XCI6IDE2OX0se1wieFwiOiA2NixcInlcIjogMTY5fSx7XCJ4XCI6IDc4LFwieVwiOiAxNjh9LHtcInhcIjogOTIsXCJ5XCI6IDE2Nn0se1wieFwiOiAxMDcsXCJ5XCI6IDE2NH0se1wieFwiOiAxMjMsXCJ5XCI6IDE2MX0se1wieFwiOiAxNDAsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNTYsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNzEsXCJ5XCI6IDE2MH0se1wieFwiOiAxNzMsXCJ5XCI6IDE2MH0se1wieFwiOiAxODYsXCJ5XCI6IDE2MH0se1wieFwiOiAxOTUsXCJ5XCI6IDE2MH0se1wieFwiOiAxOTgsXCJ5XCI6IDE2MX0se1wieFwiOiAyMDMsXCJ5XCI6IDE2M30se1wieFwiOiAyMDgsXCJ5XCI6IDE2M30se1wieFwiOiAyMDYsXCJ5XCI6IDE2NH0se1wieFwiOiAyMDAsXCJ5XCI6IDE2N30se1wieFwiOiAxODcsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNzQsXCJ5XCI6IDE3OX0se1wieFwiOiAxNzIsXCJ5XCI6IDE4MX0se1wieFwiOiAxNTMsXCJ5XCI6IDE5Mn0se1wieFwiOiAxMzcsXCJ5XCI6IDIwMX0se1wieFwiOiAxMjMsXCJ5XCI6IDIxMX0se1wieFwiOiAxMTIsXCJ5XCI6IDIyMH0se1wieFwiOiA5OSxcInlcIjogMjI5fSx7XCJ4XCI6IDkwLFwieVwiOiAyMzd9LHtcInhcIjogODAsXCJ5XCI6IDI0NH0se1wieFwiOiA3MyxcInlcIjogMjUwfSx7XCJ4XCI6IDY5LFwieVwiOiAyNTR9LHtcInhcIjogNjksXCJ5XCI6IDI1Mn1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgXTtcblxuICBTaGFwZURldGVjdG9yLnByb3RvdHlwZS5zcG90ID0gZnVuY3Rpb24ocG9pbnRzLCBwYXR0ZXJuTmFtZSkge1xuXG4gICAgaWYgKHBhdHRlcm5OYW1lID09IG51bGwpIHtcbiAgICAgIHBhdHRlcm5OYW1lID0gJyc7XG4gICAgfVxuXG4gICAgdmFyIGRpc3RhbmNlLCBwYXR0ZXJuLCBzY29yZTtcbiAgICB2YXIgc3Ryb2tlID0gbmV3IFN0cm9rZShwb2ludHMpO1xuICAgIHZhciBiZXN0RGlzdGFuY2UgPSArSW5maW5pdHk7XG4gICAgdmFyIGJlc3RQYXR0ZXJuID0gbnVsbDtcbiAgICB2YXIgYmVzdFNjb3JlID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXR0ZXJucy5sZW5ndGg7IGkrKykge1xuICAgICAgcGF0dGVybiA9IHRoaXMucGF0dGVybnNbaV07XG5cbiAgICAgIGlmIChwYXR0ZXJuLm5hbWUuaW5kZXhPZihwYXR0ZXJuTmFtZSkgPiAtMSkge1xuICAgICAgICBkaXN0YW5jZSA9IHN0cm9rZS5kaXN0YW5jZUF0QmVzdEFuZ2xlKHBhdHRlcm4pO1xuICAgICAgICBzY29yZSA9IDEuMCAtIGRpc3RhbmNlIC8gX2hhbGZEaWFnb25hbDtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBiZXN0RGlzdGFuY2UgJiYgc2NvcmUgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAgIGJlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgIGJlc3RQYXR0ZXJuID0gcGF0dGVybi5uYW1lO1xuICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdHRlcm46IGJlc3RQYXR0ZXJuLFxuICAgICAgc2NvcmU6IGJlc3RTY29yZVxuICAgIH07XG4gIH07XG5cbiAgU2hhcGVEZXRlY3Rvci5wcm90b3R5cGUubGVhcm4gPSBmdW5jdGlvbihuYW1lLCBwb2ludHMpIHtcblxuICAgIHJldHVybiB0aGlzLnBhdHRlcm5zLnB1c2gobmV3IFN0cm9rZShwb2ludHMsIG5hbWUpKTtcbiAgfTtcblxuICByZXR1cm4gU2hhcGVEZXRlY3Rvcjtcbn0pKTtcbiIsImNvbnN0IHRvdWNoID0gcmVxdWlyZSgnLi90b3VjaCcpO1xuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHZpZGVvID0gcmVxdWlyZSgnLi92aWRlbycpO1xuY29uc3QgdGltaW5nID0gcmVxdWlyZSgnLi90aW1pbmcnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRXaW5kb3coKSB7XG4gIHdpbmRvdy5rYW4gPSB7XG4gICAgY3VycmVudENvbG9yOiAnIzJCNUUyRScsXG4gICAgY29tcG9zaXRpb246IFtdLFxuICAgIGNvbXBvc2l0aW9uSW50ZXJ2YWw6IG51bGwsXG4gICAgY29tcG9zaXRpb25UaW1lb3V0OiBudWxsLFxuICAgIHNvdW5kVGltZW91dHM6IFtdLFxuICAgIGxhc3RFdmVudDogbnVsbCxcbiAgICBpbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgbW92ZXM6IFtdLFxuICAgIHBsYXlpbmc6IGZhbHNlLFxuICAgIHBpbmNoaW5nOiBmYWxzZSxcbiAgICBwaW5jaGVkR3JvdXA6IG51bGwsXG4gICAgcGluY2hlZFR1dDogbnVsbCxcbiAgICBwYXRoRGF0YToge30sXG4gICAgc2hhcGVQYXRoOiBudWxsLFxuICAgIHByZXZBbmdsZTogbnVsbCxcbiAgICBzaWRlczogW10sXG4gICAgc2lkZTogW10sXG4gICAgY29ybmVyczogW10sXG4gICAgbGFzdFNjYWxlOiAxLFxuICAgIGxhc3RSb3RhdGlvbjogMCxcbiAgICBvcmlnaW5hbFBvc2l0aW9uOiBudWxsLFxuICAgIHR1dG9yaWFsQ29tcGxldGlvbjoge1xuICAgICAgXCJmaWxsXCI6IGZhbHNlLFxuICAgICAgXCJwaW5jaFwiOiBmYWxzZSxcbiAgICAgIFwic3dpcGVcIjogZmFsc2VcbiAgICB9LFxuICAgIGluYWN0aXZpdHlUaW1lb3V0OiBudWxsLFxuICAgIHBsYXlQcm9tcHRUaW1lb3V0OiBudWxsLFxuICAgIHVzZXJIYXNEcmF3bkZpcnN0U2hhcGU6IGZhbHNlLFxuICAgIGZpcnN0VGltZVBsYXlpbmc6IHRydWUsXG4gICAgc2hhcGVzU2luY2VUdXQ6IDAsXG4gICAgcmVmcmVzaENoZWNrSW50ZXJ2YWw6IG51bGwsXG4gICAgc2hhOiBudWxsLFxuICAgIHNjaGVkdWxlZE92ZXJsYXk6IG51bGwsXG4gICAgY29udGludWVDb3VudGRvd25JbnRlcnZhbDogbnVsbCxcbiAgICBzaGFwZVNvdW5kczogbnVsbCxcbiAgfTtcbn1cblxuJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICByZXNldFdpbmRvdygpO1xuICAgIHV0aWwuc2V0U2hhKCk7XG4gICAgdWkuaW5pdCgpO1xuICAgIG92ZXJsYXlzLmluaXQoKTtcbiAgICB0aW1pbmcuaW5pdCgpO1xuICAgIHNvdW5kLmluaXQoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBzb3VuZC5pbml0KCkgaXMgYXN5bmMgYmVjYXVzZSBpdCBsb2FkcyBpbiB0aGUgc291bmQgZmlsZXNcbiAgICAgICAgdG91Y2guaW5pdCgpO1xuICAgICAgfSlcbiAgICAgIC5mYWlsKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGluaXR0aW5nIHNoYXBlIHNvdW5kczonLCBlKTtcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBydW4oKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIHdhaXQgNSBzZWNvbmRzIHRoZW4gcmVsb2FkXG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9LCA1ICogMTAwMCk7XG4gIH1cbn0pO1xuIiwiY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuY29uc3QgdG91Y2ggPSByZXF1aXJlKCcuL3RvdWNoJyk7XG5jb25zdCB2aWRlbyA9IHJlcXVpcmUoJy4vdmlkZW8nKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCB0dXRvcmlhbCA9IHJlcXVpcmUoJy4vdHV0b3JpYWwnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuY29uc3QgaGFtbWVyQ2FudmFzID0gdG91Y2guaGFtbWVyQ2FudmFzO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbmNvbnN0IHRhcEV2ZW50ID0gJ2NsaWNrIHRhcCB0b3VjaCc7XG5cbmNvbnN0ICRjYXJkc1dyYXAgPSAkYm9keS5maW5kKCcub3ZlcmxheS50aXBzIC5jYXJkLXdyYXAnKTtcbmNvbnN0ICRjYXJkSXRlbXMgPSAkY2FyZHNXcmFwLmZpbmQoJ2FydGljbGUnKTtcbmNvbnN0IGNhcmRzQ291bnQgPSAkY2FyZEl0ZW1zLmxlbmd0aDtcbmNvbnN0ICRmb290ZXIgPSAkYm9keS5maW5kKCcub3ZlcmxheS50aXBzIC5mb290ZXInKTtcblxuY29uc3QgJHNoYXJlUGhvbmUgPSAkYm9keS5maW5kKCcjcGhvbmUnKTtcbmNvbnN0ICRzaGFyZUtleXBhZCA9ICRib2R5LmZpbmQoJy5rZXlwYWQnKTtcblxuY29uc3QgYWxsT3ZlcmxheXMgPSBbJ2ludHJvJywgJ3BsYXktcHJvbXB0JywgJ3NoYXJlLXByb21wdCcsICdjb250aW51ZScsICd0aXBzJywgJ3NoYXJlJ107XG5jb25zdCBvdmVybGF5T3BlbkNsYXNzZXMgPSBhbGxPdmVybGF5cy5tYXAoKG92ZXJsYXkpID0+IGAke292ZXJsYXl9LWFjdGl2ZWApLmpvaW4oJyAnKTtcblxuY29uc3Qgb3ZlcmxheUFjdGl2ZUNsYXNzID0gJ292ZXJsYXktYWN0aXZlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5PdmVybGF5KG92ZXJsYXlOYW1lKSB7XG4gIGNvbnNvbGUubG9nKCdhdHRlbXB0aW5nIHRvIG9wZW4gb3ZlcmxheScsIG92ZXJsYXlOYW1lKTtcbiAgaWYgKHdpbmRvdy5rYW4ub3ZlcmxheXMgPT09IGZhbHNlKSByZXR1cm47XG4gIGlmIChhbGxPdmVybGF5cy5pbmNsdWRlcyhvdmVybGF5TmFtZSkpIHtcbiAgICBpZiAod2luZG93Lmthbi5waW5jaGluZyA9PT0gdHJ1ZSB8fCB3aW5kb3cua2FuLnBhbm5pbmcgPT09IHRydWUpIHtcbiAgICAgIGlmIChvdmVybGF5TmFtZSA9PT0gJ2NvbnRpbnVlJykge1xuICAgICAgICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2NoZWR1bGluZyBvdmVybGF5Jywgb3ZlcmxheU5hbWUpO1xuICAgICAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBvdmVybGF5TmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2xvc2VBbmRSZXNldE92ZXJsYXlzKCk7XG4gICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gICAgJGJvZHkuYWRkQ2xhc3Mob3ZlcmxheUFjdGl2ZUNsYXNzKTtcbiAgICAkYm9keS5maW5kKCcub3ZlcmxheTpub3QoLnRpcHMpJykub24odGFwRXZlbnQsICgpID0+IHtcbiAgICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIH0pO1xuXG4gICAgc3dpdGNoIChvdmVybGF5TmFtZSkge1xuICAgICAgY2FzZSAnaW50cm8nOlxuICAgICAgICBvcGVuSW50cm9PdmVybGF5KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheS1wcm9tcHQnOlxuICAgICAgICBpZiAodXRpbC5hbnlTaGFwZXNPbkNhbnZhcygpKSB7XG4gICAgICAgICAgb3BlblBsYXlQcm9tcHRPdmVybGF5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgb3Blbk92ZXJsYXkoJ3BsYXktcHJvbXB0Jyk7XG4gICAgICAgICAgfSwgdGltaW5nLnBsYXlQcm9tcHREZWxheSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2hhcmUtcHJvbXB0JzpcbiAgICAgICAgb3BlblNoYXJlUHJvbXB0T3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvbnRpbnVlJzpcbiAgICAgICAgb3BlbkNvbnRpbnVlT3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpcHMnOlxuICAgICAgICBvcGVuVGlwc092ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzaGFyZSc6XG4gICAgICAgIG9wZW5TaGFyZU92ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCd1bmFibGUgdG8gb3BlbiB1bmtub3duIG92ZXJsYXknLCBvdmVybGF5TmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlbkludHJvT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ2ludHJvLWFjdGl2ZScpO1xufVxuXG5mdW5jdGlvbiBvcGVuUGxheVByb21wdE92ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdwbGF5LXByb21wdC1hY3RpdmUnKTtcbn1cblxuZnVuY3Rpb24gb3BlblNoYXJlUHJvbXB0T3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3NoYXJlLXByb21wdC1hY3RpdmUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29udGludWVDb3VudGRvd24oKSB7XG4gICQoJy5vdmVybGF5LmNvbnRpbnVlIC5jb3VudGRvd24tbnVtJykuaHRtbChwYXJzZUludCh0aW1pbmcuY29udGludWVJbmFjdGl2aXR5RGVsYXkgLyAxMDAwKSk7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcbn1cblxuZnVuY3Rpb24gb3BlbkNvbnRpbnVlT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ2NvbnRpbnVlLWFjdGl2ZScpO1xuXG4gIHJlc2V0Q29udGludWVDb3VudGRvd24oKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCk7XG5cbiAgd2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGxldCAkY291bnRkb3duTnVtV3JhcCA9ICQoJy5vdmVybGF5LmNvbnRpbnVlIC5jb3VudGRvd24tbnVtJyk7XG4gICAgbGV0IGNvdW50ID0gcGFyc2VJbnQoJGNvdW50ZG93bk51bVdyYXAuaHRtbCgpKTtcbiAgICBpZiAoY291bnQgPiAxKSB7XG4gICAgICAkY291bnRkb3duTnVtV3JhcC5odG1sKGNvdW50IC0gMSk7XG4gICAgfVxuICB9LCAxMDAwKTtcblxuICB3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdmlkZW8uZW50ZXJUdXRvcmlhbE1vZGUoKTtcbiAgfSwgdGltaW5nLmNvbnRpbnVlSW5hY3Rpdml0eURlbGF5KTtcbn1cblxuZnVuY3Rpb24gb3BlblRpcHNPdmVybGF5KCkge1xuICAkYm9keS5hZGRDbGFzcygndGlwcy1hY3RpdmUnKTtcbiAgYWN0aXZhdGVUaXBzQ2FyZHMoKTtcbn1cblxuZnVuY3Rpb24gb3BlblNoYXJlT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3NoYXJlLWFjdGl2ZScpO1xufVxuXG5cbi8vIGNhcmQgc2xpZGVyIG5hdmlnYXRpb25cbmV4cG9ydCBmdW5jdGlvbiBjYXJkTmF2TmV4dCgpIHtcbiAgbGV0ICRvbGQgPSAkYm9keS5maW5kKCcuY2FyZC13cmFwIC5jdXJyZW50Jyk7XG4gIGxldCAkbmV3ID0gKCRvbGQubmV4dCgpLmxlbmd0aCkgPyAkb2xkLm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKTtcbiAgbGV0ICRuZXh0ID0gKCRuZXcubmV4dCgpLmxlbmd0aCkgPyAkbmV3Lm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKTtcbiAgbGV0ICR0aGlyZCA9ICgkbmV4dC5uZXh0KCkubGVuZ3RoKSA/ICRuZXh0Lm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKS5uZXh0KCk7XG4gIGxldCBzbGlkZSA9ICRuZXcuaW5kZXgoKTtcbiAgJG9sZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdyZW1vdmUnKTtcbiAgJG5ldy5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICRuZXh0LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ25leHQnKTtcbiAgJHRoaXJkLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ3RoaXJkJyk7XG4gIHVwZGF0ZUNhcmRDb3VudGVyKHNsaWRlICsgMSwgY2FyZHNDb3VudCk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICRvbGQucmVtb3ZlQ2xhc3MoKTtcbiAgfSwgNjAwKTtcbn1cblxuLy8gdGlwcyBjYXJkIGludGVyYWN0aW9uc1xuZnVuY3Rpb24gY2FyZEludGVyYWN0aW9ucygpIHtcbiAgbGV0IHRpbWVPZkxhc3RJbnRlcmFjdGlvbiA9IDA7XG5cbiAgJGJvZHkuZmluZCgnLm92ZXJsYXknKS5vbih0YXBFdmVudCwgZSA9PiB7XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aW1lT2ZMYXN0SW50ZXJhY3Rpb24gPiAoY3VycmVudFRpbWUgLSAyNTApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRpbWVPZkxhc3RJbnRlcmFjdGlvbiA9IGN1cnJlbnRUaW1lO1xuXG4gICAgaWYgKCAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2FyZC13cmFwJykubGVuZ3RoID09IDEgKSB7XG4gICAgICAvLyBkaXJlY3RseSBvbiBhIGNhcmQsIG5hdmlnYXRlIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgY2FyZE5hdk5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3V0c2lkZSBlbGVtZW50cywgY2xvc2UgZXZlcnl0aGluZyBhbmQgcmVzZXRcbiAgICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlc2V0VGlwcygpIHtcbiAgJGNhcmRJdGVtcy5yZW1vdmVDbGFzcygpO1xuICAkc2hhcmVQaG9uZS5odG1sKCcnKTtcbn1cblxuLy8gY2xvc2UgYW5kIHJlc2V0IHRpcHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZUFuZFJlc2V0T3ZlcmxheXMoKSB7XG4gICRib2R5LnJlbW92ZUNsYXNzKCdvdmVybGF5LWFjdGl2ZScpO1xuICAkYm9keS5yZW1vdmVDbGFzcyhvdmVybGF5T3BlbkNsYXNzZXMpO1xuICByZXNldFRpcHMoKTtcbn1cblxuLy8gZGVhbCBhIGZyZXNoIHN0YWNrIG9mIGNhcmRzXG5mdW5jdGlvbiBhY3RpdmF0ZVRpcHNDYXJkcygpIHtcbiAgbGV0ICRuZXcgPSAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkbmV4dCA9ICgkbmV3Lm5leHQoKS5sZW5ndGgpID8gJG5ldy5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkdGhpcmQgPSAoJG5leHQubmV4dCgpLmxlbmd0aCkgPyAkbmV4dC5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCkubmV4dCgpO1xuICAkY2FyZEl0ZW1zLnJlbW92ZUNsYXNzKCk7XG4gICRuZXcucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnY3VycmVudCcpO1xuICAkbmV4dC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCduZXh0Jyk7XG4gICR0aGlyZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCd0aGlyZCcpO1xuICB1cGRhdGVDYXJkQ291bnRlcigxLCBjYXJkc0NvdW50KTtcbn1cblxuLy8gY291bnRpbmcgY2FyZHNcbmZ1bmN0aW9uIHVwZGF0ZUNhcmRDb3VudGVyKGN1cnJlbnQsIHRvdGFsKSB7XG4gICRmb290ZXIuZmluZCgnLmN1cnJlbnQnKS5odG1sKGN1cnJlbnQpO1xuICAkZm9vdGVyLmZpbmQoJy5uZXh0JykuaHRtbCh0b3RhbCk7XG59XG5cbi8vIHBob25lIGlucHV0c1xuZnVuY3Rpb24gcGhvbmVOdW1iZXJJbnB1dHMoKSB7XG4gIC8vIG1hc2sgdGhlIG91dHB1dFxuICAkc2hhcmVQaG9uZS5tYXNrKCcwMDAtMDAwLTAwMDAnKTtcbiAgLy8gZ2V0IGludGVyYWN0aW9ucyBmcm9tIHRoZSBrZXlwYWRcbiAgJHNoYXJlS2V5cGFkLmZpbmQoJy5udW0nKS5vbih0YXBFdmVudCwgZSA9PiB7XG4gICAgbGV0IHBob25lTnVtYmVyID0gJHNoYXJlUGhvbmUuaHRtbCgpLnRvU3RyaW5nKCkgKyAkKGUudGFyZ2V0KS5odG1sKCkudG9TdHJpbmcoKTtcbiAgICBwaG9uZU51bWJlciA9ICRzaGFyZVBob25lLm1hc2tlZChwaG9uZU51bWJlcik7XG4gICAgJHNoYXJlUGhvbmUuaHRtbChwaG9uZU51bWJlcik7XG4gIH0pO1xuICAvLyBjbGVhciB0aGUgZGlzcGxheVxuICAkc2hhcmVLZXlwYWQuZmluZCgnLmNsZWFyJykub24odGFwRXZlbnQsIGUgPT4ge1xuICAgICRzaGFyZVBob25lLmh0bWwoJycpO1xuICB9KTtcbiAgLy8gRklYTUU6IHNlbmQgc21zXG4gIC8vICRzaGFyZUtleXBhZC5maW5kKCcuc2VuZCcpLm9uKHRhcEV2ZW50LCBlID0+IHt9KTtcbn1cblxuLy8gXCJyYW5kb21seVwiIHBsYWNlIGZpZGRseSBiaXRzIG9uIHRoZSBjYXJkc1xuZnVuY3Rpb24gcmFuZG9tQ2FyZEdyYXBoaWNzKCkge1xuICAkYm9keS5maW5kKCcuY2FyZC13cmFwIGFydGljbGUnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICQoZWwpLmF0dHIoJ2RhdGEtYmcnLCBpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRUaXBzKCkge1xuICBjYXJkSW50ZXJhY3Rpb25zKCk7XG59XG5cbmZ1bmN0aW9uIGluaXRTaGFyZSgpIHtcbiAgcGhvbmVOdW1iZXJJbnB1dHMoKTtcbiAgcmFuZG9tQ2FyZEdyYXBoaWNzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBpbml0VGlwcygpO1xuICBpbml0U2hhcmUoKTtcbn1cbiIsImNvbnN0IFNoYXBlRGV0ZWN0b3IgPSByZXF1aXJlKCcuL2xpYi9zaGFwZS1kZXRlY3RvcicpO1xuXG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcblxuZXhwb3J0IGNvbnN0IGNvcm5lclRocmVzaG9sZERlZyA9IDMwO1xuZXhwb3J0IGNvbnN0IHRocmVzaG9sZERpc3RNdWx0aXBsaWVyID0gMC4xO1xuXG5leHBvcnQgY29uc3QgZGV0ZWN0b3IgPSBuZXcgU2hhcGVEZXRlY3RvcihTaGFwZURldGVjdG9yLmRlZmF1bHRTaGFwZXMpO1xuXG5leHBvcnQgY29uc3Qgc2hhcGVOYW1lcyA9IFtcImxpbmVcIiwgXCJjaXJjbGVcIiwgXCJzcXVhcmVcIiwgXCJ0cmlhbmdsZVwiLCBcIm90aGVyXCJdO1xuXG5mdW5jdGlvbiBjbGVhclBvcHMoKSB7XG4gIGNvbnN0IHBvcHMgPSB1dGlsLmdldEFsbFBvcHMoKTtcbiAgcG9wcy5mb3JFYWNoKChwb3ApID0+IHBvcC5yZW1vdmUoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95R3JvdXBQb3BzKGdyb3VwKSB7XG4gIGNvbnNvbGUubG9nKCdkZXN0cm95aW5nIHBvcHMnKTtcbiAgY29uc3QgZ3JvdXBQb3BzQmVmb3JlID0gdXRpbC5nZXRHcm91cFBvcHMoZ3JvdXApO1xuICBjb25zb2xlLmxvZygncG9wcyB0byBiZSBkZXN0cm95ZWQnLCBncm91cFBvcHNCZWZvcmUpO1xuICBpZiAoZ3JvdXBQb3BzQmVmb3JlLmxlbmd0aCA+IDApIHtcbiAgICBncm91cFBvcHNCZWZvcmUuZm9yRWFjaCgocG9wKSA9PiBwb3AucmVtb3ZlKCkpO1xuICB9XG4gIGNvbnN0IGdyb3VwUG9wc0FmdGVyID0gdXRpbC5nZXRHcm91cFBvcHMoZ3JvdXApO1xuICBjb25zb2xlLmxvZygnZ3JvdXAgcG9wcyBhZnRlcicsIGdyb3VwUG9wc0FmdGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxJbkdyb3VwUG9wc0J5SWQoZ3JvdXBJZCkge1xuICBjb25zdCBncm91cCA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbSh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLmlkID09PSBncm91cElkXG4gIH0pO1xuXG4gIGlmICghIWdyb3VwICYmIGdyb3VwLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBncm91cC5jaGlsZHJlbi5mb3JFYWNoKChncm91cENoaWxkKSA9PiB7XG4gICAgICBpZiAoZ3JvdXBDaGlsZC5uYW1lID09PSAnbG9vcCcpIHtcbiAgICAgICAgdG9nZ2xlRmlsbChncm91cENoaWxkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRmlsbChpdGVtKSB7XG4gIGNvbnN0IHRyYW5zcGFyZW50ID0gY29sb3IudHJhbnNwYXJlbnQ7XG4gIC8vIGNvbnNvbGUubG9nKCdoaXQnKTtcbiAgbGV0IHBhcmVudCA9IGl0ZW0ucGFyZW50O1xuXG4gIC8vIGNvbnNvbGUubG9nKCdoaXQgaXRlbScsIGl0ZW0pO1xuICAvLyBjb25zb2xlLmxvZygnaGl0IHBhcmVudCcsIHBhcmVudCk7XG5cbiAgaWYgKGl0ZW0uZGF0YS5pbnRlcmlvcikge1xuICAgIC8vIGNvbnNvbGUubG9nKCdpbnRlcmlvcicpO1xuICAgIGl0ZW0uZGF0YS50cmFuc3BhcmVudCA9ICFpdGVtLmRhdGEudHJhbnNwYXJlbnQ7XG5cbiAgICBpZiAoaXRlbS5kYXRhLnRyYW5zcGFyZW50KSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygndHJhbnNwYXJlbnQnKTtcbiAgICAgIGl0ZW0uZmlsbENvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgICBpdGVtLnN0cm9rZUNvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdub3QgdHJhbnNwYXJlbnQnKTtcbiAgICAgIGl0ZW0uZmlsbENvbG9yID0gcGFyZW50LmRhdGEuY29sb3I7XG4gICAgICBpdGVtLnN0cm9rZUNvbG9yID0gcGFyZW50LmRhdGEuY29sb3I7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5tb3Zlcy5wdXNoKHtcbiAgICAgIHR5cGU6ICdmaWxsQ2hhbmdlJyxcbiAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgZmlsbDogcGFyZW50LmRhdGEuY29sb3IsXG4gICAgICB0cmFuc3BhcmVudDogaXRlbS5kYXRhLnRyYW5zcGFyZW50XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ25vdCBpbnRlcmlvcicpO1xuICAgIC8vIGNoZWNrIGlmIGl0ZW0gaXMgYSBwb3AsIGJlY2F1c2UgdGhlbiB3ZSdsbCBmaWxsIHRoZSBwb3AncyBwYXJlbnRcbiAgICBpZiAoISFpdGVtLmRhdGEgJiYgaXRlbS5kYXRhLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCEhaXRlbS5wYXJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICAgICAgICBmaWxsSW5Hcm91cFBvcHNCeUlkKGl0ZW0ucGFyZW50LmlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW5VcEdyb3VwKGdyb3VwKSB7XG4gIGNvbnNvbGUubG9nKCdjbGVhbmluZyB1cCBncm91cCcpO1xuICBjb25zdCBhY2NlcHRhYmxlTmFtZXMgPSBbJ21hc2snLCAnb3V0ZXInLCAnc2hhcGVQYXRoJywgJ2xvb3AnLCAncG9wJ107XG5cbiAgZ3JvdXAuY2hpbGRyZW4uZm9yRWFjaCgoZ3JvdXBDaGlsZCkgPT4ge1xuICAgIGlmIChncm91cENoaWxkLm5hbWUgPT09IG51bGwgfHwgIWFjY2VwdGFibGVOYW1lcy5pbmNsdWRlcyhncm91cENoaWxkLm5hbWUpIHx8ICFncm91cENoaWxkLmxlbmd0aCA+IDApIHtcbiAgICAgIGdyb3VwQ2hpbGQucmVtb3ZlKCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZ3JvdXA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQb3BzKCkge1xuICBjb25zdCBmcmVzaEdyb3VwcyA9IHV0aWwuZ2V0RnJlc2hHcm91cHMoKTtcbiAgY29uc3QgcG9wQ2FuZGlkYXRlcyA9IHV0aWwuZ2V0UG9wQ2FuZGlkYXRlcygpO1xuICBjb25zdCBhbGxQb3BzID0gdXRpbC5nZXRBbGxQb3BzKCk7XG4gIHBvcENhbmRpZGF0ZXMucmV2ZXJzZSgpO1xuICBjb25zb2xlLmxvZygnZnJlc2hHcm91cHMnLCBmcmVzaEdyb3Vwcyk7XG4gIGNvbnNvbGUubG9nKCdwb3BDYW5kaWRhdGVzJywgcG9wQ2FuZGlkYXRlcyk7XG4gIC8vIGNsZWFyUG9wcygpO1xuXG4gIGZyZXNoR3JvdXBzLmZvckVhY2goKGZyZXNoR3JvdXAsIGkpID0+IHtcbiAgICAvLyBpZiAoaSA+PSA0KSByZXR1cm47XG4gICAgY29uc29sZS5sb2coJ2ZyZXNoR3JvdXAnLCBmcmVzaEdyb3VwKTtcblxuICAgIGNvbnN0IGZyZXNoT3V0ZXIgPSBmcmVzaEdyb3VwLl9uYW1lZENoaWxkcmVuLm1hc2tbMF07XG4gICAgZnJlc2hPdXRlci5icmluZ1RvRnJvbnQoKTtcbiAgICAvLyBmcmVzaE91dGVyLnZpc2libGUgPSB0cnVlO1xuICAgIC8vIGZyZXNoT3V0ZXIuZmlsbENvbG9yID0gJ2JsYWNrJztcbiAgICAvLyBmcmVzaE91dGVyLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAvLyBjb25zb2xlLmxvZygnZnJlc2hPdXRlcicsIGZyZXNoT3V0ZXIpO1xuICAgIC8vIGZyZXNoT3V0ZXIuc2VsZWN0ZWQgPSB0cnVlO1xuICAgIHBvcENhbmRpZGF0ZXMuZm9yRWFjaCgob3RoZXJHcm91cCwgaikgPT4ge1xuICAgICAgY29uc3Qgb3RoZXJHcm91cE91dGVyID0gb3RoZXJHcm91cC5fbmFtZWRDaGlsZHJlbi5tYXNrWzBdO1xuICAgICAgaWYgKGZyZXNoR3JvdXAuaWQgIT09IG90aGVyR3JvdXAuaWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ290aGVyR3JvdXAnLCBvdGhlckdyb3VwKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ290aGVyR3JvdXBPdXRlcicsIG90aGVyR3JvdXBPdXRlcik7XG4gICAgICAgIC8vIG90aGVyR3JvdXBPdXRlci5maWxsQ29sb3IgPSAnd2hpdGUnO1xuICAgICAgICBvdGhlckdyb3VwT3V0ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgICAgIGxldCB0aGlzUG9wID0gZnJlc2hPdXRlci5pbnRlcnNlY3Qob3RoZXJHcm91cE91dGVyKTtcbiAgICAgICAgaWYgKCEhdGhpc1BvcCAmJiB0aGlzUG9wLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBjb25zdCBwb3BDb2xvciA9IGNvbG9yLmdldEluZGV4ZWRQb3BDb2xvcihpICsgaik7XG4gICAgICAgICAgY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRSYW5kb21Qb3AoKTtcbiAgICAgICAgICB0aGlzUG9wLmZpbGxDb2xvciA9IHBvcENvbG9yO1xuICAgICAgICAgIHRoaXNQb3Auc3Ryb2tlQ29sb3IgPSBwb3BDb2xvcjtcbiAgICAgICAgICB0aGlzUG9wLmRhdGEucG9wID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzUG9wLm5hbWUgPSAncG9wJztcbiAgICAgICAgICB0aGlzUG9wLmRhdGEucG9wR3JvdXAgPSBmcmVzaEdyb3VwLmlkO1xuICAgICAgICAgIHRoaXNQb3AuZGF0YS5pbnRlcnNlY3RpbmdHcm91cCA9IG90aGVyR3JvdXAuaWQ7XG4gICAgICAgICAgdGhpc1BvcC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzUG9wLmNsb3NlZCA9IHRydWU7XG4gICAgICAgICAgdGhpc1BvcC5icmluZ1RvRnJvbnQoKTtcbiAgICAgICAgICBmcmVzaEdyb3VwLmFkZENoaWxkKHRoaXNQb3ApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdubyBwb3AnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFuVXBHcm91cChmcmVzaEdyb3VwKTtcblxuICAgICAgICAvLyBmaWd1cmUgb3V0IGlmIHRoaXMgcG9wIGludGVyc2VjdHMgYW55IG90aGVyIHBvcHNcbiAgICAgICAgLy8gYWxsUG9wcy5mb3JFYWNoKChvdGhlclBvcCwgaykgPT4ge1xuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdjaGVja2luZyBvdGhlciBwb3AnLCBvdGhlclBvcCk7XG4gICAgICAgIC8vICAgaWYgKHRoaXNQb3AuaWQgIT09IG90aGVyUG9wLmlkICYmIHRoaXNQb3AuaW50ZXJzZWN0cyhvdGhlclBvcCkpIHtcbiAgICAgICAgLy8gICAgIGxldCBwb3BJbnRlcnNlY3Rpb24gPSB0aGlzUG9wLmdldEludGVyc2VjdGlvbnMob3RoZXJQb3ApO1xuICAgICAgICAvLyAgICAgaWYgKCEhcG9wSW50ZXJzZWN0aW9uICYmIHBvcEludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbiA9IG5ldyBQYXRoKFtwb3BJbnRlcnNlY3Rpb25dKVxuICAgICAgICAvLyAgICAgICBjb25zb2xlLmxvZygncG9wSW50ZXJzZWN0aW9uJywgcG9wSW50ZXJzZWN0aW9uKTtcbiAgICAgICAgLy8gICAgICAgLy8gY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRJbmRleGVkUG9wQ29sb3IoaSArIGogKyBrKTtcbiAgICAgICAgLy8gICAgICAgY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRSYW5kb21Qb3AoKTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmRhdGEucG9wID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmZpbGxDb2xvciA9IHBvcENvbG9yXG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5zdHJva2VDb2xvciA9IHBvcENvbG9yO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24udmlzaWJsZSA9IHRydWU7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24uYnJpbmdUb0Zyb250KCk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9KTtcblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnJlc2hHcm91cC5kYXRhLmZyZXNoID0gZmFsc2U7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0bGluZUdyb3VwKHRydWVkU2hhcGUpIHtcbiAgLy8gY29uc29sZS5sb2coJ3RydWVkU2hhcGUnLCB0cnVlZFNoYXBlKTtcbiAgbGV0IG91dGVyUGF0aCA9IG5ldyBQYXRoKCk7XG4gIG91dGVyUGF0aC5uYW1lID0gJ291dGVyJztcblxuICBsZXQgbWlkZGxlUGF0aCA9IG5ldyBQYXRoKCk7XG4gIG1pZGRsZVBhdGgubmFtZSA9ICdtaWRkbGUnO1xuICBsZXQgc2l6ZXMgPSBbXTtcbiAgbGV0IGFuZ2xlO1xuXG4gIGxldCBmaXJzdFRvcCA9IG51bGwsIGZpcnN0Qm90dG9tID0gbnVsbDtcbiAgbGV0IGxhc3RUb3AgPSBudWxsLCBsYXN0Qm90dG9tID0gbnVsbDtcblxuICBpZiAoISh0cnVlZFNoYXBlLmxlbmd0aCA+IDApKSByZXR1cm4gbmV3IEdyb3VwKG91dGVyUGF0aCwgbWlkZGxlUGF0aCk7XG5cbiAgLy8gb3V0ZXJQYXRoLmFkZCh0cnVlZFNoYXBlLmZpcnN0U2VnbWVudC5wb2ludCk7XG4gIG1pZGRsZVBhdGguYWRkKHRydWVkU2hhcGUuZmlyc3RTZWdtZW50LnBvaW50KTtcblxuICBmb3IgKGxldCBpID0gMTA7IGkgPCB0cnVlZFNoYXBlLmxlbmd0aCAtIDEwOyBpICs9IDIwKSB7XG4gICAgd2hpbGUgKHNpemVzLmxlbmd0aCA+IDEwKSB7XG4gICAgICBzaXplcy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpemUgPSBNYXRoLnJhbmRvbSgpICogODsgLy8gVGhpcyBpcyBqdXN0IHJhbmRvbSB2YXJpYW5jZVxuICAgIHNpemVzLnB1c2goc2l6ZSk7XG5cbiAgICBsZXQgY3VtU2l6ZSA9IDA7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplcy5sZW5ndGg7IGorKykge1xuICAgICAgY3VtU2l6ZSArPSBzaXplc1tqXTtcbiAgICB9XG4gICAgY29uc3QgYXZnU2l6ZSA9IE1hdGgubWF4KDUsICgoY3VtU2l6ZSAvIHNpemVzLmxlbmd0aCkgKyBzaXplKSAvIDIpO1xuXG4gICAgY29uc3QgcHJldlBvaW50ID0gdHJ1ZWRTaGFwZS5nZXRQb2ludEF0KGkgLSAxMCk7XG4gICAgY29uc3QgbmV4dFBvaW50ID0gdHJ1ZWRTaGFwZS5nZXRQb2ludEF0KGkgKyAxMCk7XG4gICAgY29uc3QgcG9pbnQgPSBuZXcgUG9pbnQoKHByZXZQb2ludC54ICsgbmV4dFBvaW50LngpIC8gMiwgKHByZXZQb2ludC55ICsgbmV4dFBvaW50LnkpIC8gMik7XG5cbiAgICBhbmdsZSA9IE1hdGguYXRhbjIobmV4dFBvaW50LnkgLSBwcmV2UG9pbnQueSwgbmV4dFBvaW50LnggLSBwcmV2UG9pbnQueCk7XG5cbiAgICBjb25zdCB0b3BYID0gcG9pbnQueCArIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgY29uc3QgdG9wWSA9IHBvaW50LnkgKyBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkvMikgKiBhdmdTaXplO1xuICAgIGNvbnN0IHRvcCA9IG5ldyBQb2ludCh0b3BYLCB0b3BZKTtcblxuICAgIGNvbnN0IGJvdHRvbVggPSBwb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICBjb25zdCBib3R0b21ZID0gcG9pbnQueSArIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgY29uc3QgYm90dG9tID0gbmV3IFBvaW50KGJvdHRvbVgsIGJvdHRvbVkpO1xuXG4gICAgb3V0ZXJQYXRoLmFkZCh0b3ApO1xuICAgIG91dGVyUGF0aC5pbnNlcnQoMCwgYm90dG9tKTtcbiAgICBtaWRkbGVQYXRoLmFkZChwb2ludCk7XG5cbiAgICBpZiAoaSA9PSAxMCkge1xuICAgICAgZmlyc3RUb3AgPSB0b3A7XG4gICAgICBmaXJzdEJvdHRvbSA9IGJvdHRvbTtcbiAgICAgIC8vIG5ldyBQYXRoLkxpbmUoe1xuICAgICAgLy8gICBmcm9tOiBib3R0b20sXG4gICAgICAvLyAgIHRvOiB0b3AsXG4gICAgICAvLyAgIHN0cm9rZVdpZHRoOiA1LFxuICAgICAgLy8gICBzdHJva2VDb2xvcjogJ3JlZCdcbiAgICAgIC8vIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0VG9wID0gdG9wO1xuICAgICAgbGFzdEJvdHRvbSA9IGJvdHRvbTtcbiAgICAgIC8vIG5ldyBQYXRoLkxpbmUoe1xuICAgICAgLy8gICBmcm9tOiBib3R0b20sXG4gICAgICAvLyAgIHRvOiB0b3AsXG4gICAgICAvLyAgIHN0cm9rZVdpZHRoOiA1LFxuICAgICAgLy8gICBzdHJva2VDb2xvcjogbmV3IENvbG9yKDAsIGkgLyB0cnVlZFNoYXBlLmxlbmd0aClcbiAgICAgIC8vIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIG5ldyBQYXRoLkxpbmUoe1xuICAvLyAgIGZyb206IGxhc3RCb3R0b20sXG4gIC8vICAgdG86IGxhc3RUb3AsXG4gIC8vICAgc3Ryb2tlV2lkdGg6IDUsXG4gIC8vICAgc3Ryb2tlQ29sb3I6ICdibHVlJ1xuICAvLyB9KTtcblxuICBpZiAodHJ1ZWRTaGFwZS5jbG9zZWQgPT09IHRydWUpIHtcbiAgICBjb25zdCBjZW50ZXJUb3AgPSBuZXcgUG9pbnQoKGZpcnN0VG9wLnggKyBsYXN0VG9wLngpIC8gMiwgKGZpcnN0VG9wLnkgKyBsYXN0VG9wLnkpIC8gMik7XG4gICAgY29uc3QgY2VudGVyQm90dG9tID0gbmV3IFBvaW50KChmaXJzdEJvdHRvbS54ICsgbGFzdEJvdHRvbS54KSAvIDIsIChmaXJzdEJvdHRvbS55ICsgbGFzdEJvdHRvbS55KSAvIDIpO1xuICAgIGNvbnN0IGNlbnRlciA9IG5ldyBQb2ludCgoY2VudGVyVG9wLnggKyBjZW50ZXJCb3R0b20ueCkgLyAyLCAoY2VudGVyVG9wLnkgKyBjZW50ZXJCb3R0b20ueSkgLyAyKTtcblxuICAgIG91dGVyUGF0aC5hZGQoY2VudGVyVG9wKTtcbiAgICBvdXRlclBhdGguaW5zZXJ0KDAsIGNlbnRlckJvdHRvbSk7XG4gICAgbWlkZGxlUGF0aC5hZGQoY2VudGVyKTtcbiAgICAvLyBuZXcgUGF0aC5MaW5lKHtcbiAgICAvLyAgIGZyb206IGNlbnRlckJvdHRvbSxcbiAgICAvLyAgIHRvOiBjZW50ZXJUb3AsXG4gICAgLy8gICBzdHJva2VXaWR0aDogNSxcbiAgICAvLyAgIHN0cm9rZUNvbG9yOiAneWVsbG93J1xuICAgIC8vIH0pO1xuICAgIG91dGVyUGF0aC5hZGQoZmlyc3RUb3ApO1xuICAgIG91dGVyUGF0aC5pbnNlcnQoMCwgZmlyc3RCb3R0b20pO1xuICAgIG1pZGRsZVBhdGguY2xvc2VkID0gdHJ1ZTtcbiAgICAvLyBtaWRkbGVQYXRoLmFkZChwb2ludCk7XG4gICAgLy8gY29uc29sZS5sb2coJ2Nsb3NlZCcpO1xuICB9XG4gIC8vICBlbHNlIHtcbiAgLy8gICBjb25zdCBsYXN0Q2VudGVyID0gKChsYXN0VG9wLnggKyBsYXN0Qm90dG9tLngpIC8gMiwgKGxhc3RUb3AueSArIGxhc3RCb3R0b20ueSkgLyAyKTtcbiAgLy8gICBjb25zdCBsYXN0UG9pbnQgPSB0cnVlZFNoYXBlLmxhc3RTZWdtZW50LnBvaW50O1xuICAvLyAgIGNvbnN0IGFkanVzdGVkTGFzdFBvaW50ID0gbmV3IFBvaW50KChsYXN0Q2VudGVyLnggKyBsYXN0UG9pbnQueCkgLyAyLCAobGFzdENlbnRlci55ICsgbGFzdFBvaW50LnkpIC8gMik7XG4gIC8vICAgLy8gb3V0ZXJQYXRoLmFkZChhZGp1c3RlZExhc3RQb2ludCk7XG4gIC8vICAgLy8gb3V0ZXJQYXRoLmxhc3RTZWdtZW50LnNtb290aCgpO1xuICAvLyB9XG5cbiAgLy8gb3V0ZXJQYXRoLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAvLyBuZXcgUGF0aC5DaXJjbGUoe1xuICAvLyAgIGNlbnRlcjogb3V0ZXJQYXRoLmZpcnN0U2VnbWVudC5wb2ludCxcbiAgLy8gICByYWRpdXM6IDMsXG4gIC8vICAgZmlsbENvbG9yOiAncmVkJ1xuICAvLyB9KTtcbiAgLy8gbmV3IFBhdGguQ2lyY2xlKHtcbiAgLy8gICBjZW50ZXI6IG91dGVyUGF0aC5maXJzdFNlZ21lbnQubmV4dC5wb2ludCxcbiAgLy8gICByYWRpdXM6IDMsXG4gIC8vICAgZmlsbENvbG9yOiAncmVkJ1xuICAvLyB9KTtcbiAgLy9cbiAgLy8gbmV3IFBhdGguQ2lyY2xlKHtcbiAgLy8gICBjZW50ZXI6IG91dGVyUGF0aC5sYXN0U2VnbWVudC5wb2ludCxcbiAgLy8gICByYWRpdXM6IDMsXG4gIC8vICAgZmlsbENvbG9yOiAnYmx1ZSdcbiAgLy8gfSk7XG4gIC8vIG5ldyBQYXRoLkNpcmNsZSh7XG4gIC8vICAgY2VudGVyOiBvdXRlclBhdGgubGFzdFNlZ21lbnQucHJldmlvdXMucG9pbnQsXG4gIC8vICAgcmFkaXVzOiAzLFxuICAvLyAgIGZpbGxDb2xvcjogJ2JsdWUnXG4gIC8vIH0pO1xuXG4gIG91dGVyUGF0aC5zbW9vdGgoKTtcbiAgbWlkZGxlUGF0aC5zbW9vdGgoKTtcbiAgb3V0ZXJQYXRoLm5hbWUgPSAnb3V0ZXInO1xuICBtaWRkbGVQYXRoLm5hbWUgPSAnbWlkZGxlJztcbiAgY29uc3QgcmV0dXJuR3JvdXAgPSBuZXcgR3JvdXAob3V0ZXJQYXRoLCBtaWRkbGVQYXRoKTtcbiAgcmV0dXJuIHJldHVybkdyb3VwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJ1ZWRTaGFwZShwYXRoKSB7XG4gIGxldCBwYXRoQ2xvbmUgPSBwYXRoLmNsb25lKCk7XG4gIHBhdGhDbG9uZS52aXNpYmxlID0gZmFsc2U7XG4gIC8vIGNvbnNvbGUubG9nKCdwYXRoQ2xvbmUnLCBwYXRoQ2xvbmUpO1xuICBsZXQgY29tcGxldGVkUGF0aCA9IGdldENvbXBsZXRlZFBhdGgocGF0aENsb25lKTtcbiAgLy8gY29tcGxldGVkUGF0aC5yZWR1Y2UoKTtcblxuICAvLyB0cnVlIHRoZSBwYXRoIVxuICBsZXQgdHJ1ZWRQYXRoID0gY29tcGxldGVkUGF0aDtcbiAgLy8gY29uc29sZS5sb2coJ3RydWVkUGF0aCcsIHRydWVkUGF0aCk7XG5cbiAgdHJ1ZWRQYXRoLnN0cm9rZVdpZHRoID0gcGF0aENsb25lLnN0cm9rZVdpZHRoO1xuXG4gIHBhdGhDbG9uZS5yZW1vdmUoKTtcbiAgcmV0dXJuIHRydWVkUGF0aDtcbn1cblxuLy8gZXh0ZW5kIG9yIHRyaW0gcGF0aCBpZiB0aGUgZW5kcyBhcmUgY2xvc2VcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wbGV0ZWRQYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgcGF0aENsb25lLnJlZHVjZSgpO1xuICBwYXRoQ2xvbmUuc2ltcGxpZnkoKTtcblxuICBsZXQgaW50ZXJzZWN0aW9ucyA9IHBhdGhDbG9uZS5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIC8vIHRyaW0gcGF0aCBpZiBlbmRzIGFyZSBjbG9zZVxuICAgIGxldCB0cmltbWVkUGF0aCA9IGdldFRyaW1tZWRQYXRoKHBhdGhDbG9uZSk7XG5cbiAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gdHJpbW1lZFBhdGg7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXh0ZW5kIHBhdGggdG8gc2VlIGlmIGFuIGludGVyc2VjdGlvbiBpcyBuZWFyXG4gICAgbGV0IGV4dGVuZGVkUGF0aCA9IGdldEV4dGVuZGVkUGF0aChwYXRoQ2xvbmUpO1xuICAgIGxldCBpbnRlcnNlY3Rpb25zID0gZXh0ZW5kZWRQYXRoLmdldEludGVyc2VjdGlvbnMoKTtcblxuICAgIC8vIHBhdGhDbG9uZS5yZW1vdmUoKTtcblxuICAgIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIHRyaW0gZXh0cmEgZXh0ZW5kZWQgcGF0aFxuICAgICAgbGV0IHRyaW1tZWRQYXRoID0gZ2V0VHJpbW1lZFBhdGgoZXh0ZW5kZWRQYXRoKTtcbiAgICAgIGV4dGVuZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXh0ZW5kZWQgcGF0aCBkb2VzIG5vdCBpbnRlcnNlY3QsIHJldHVybiB0aGUgb3JpZ2luYWwgcGF0aFxuICAgICAgZXh0ZW5kZWRQYXRoLnJlcGxhY2VXaXRoKGdldEJydXRlRXh0ZW5kZWRQYXRoKHBhdGhDbG9uZSkpO1xuICAgICAgaWYgKGV4dGVuZGVkUGF0aCAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW9ucyA9IGV4dGVuZGVkUGF0aC5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgICAgICAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCB0cmltbWVkUGF0aCA9IGdldFRyaW1tZWRQYXRoKGV4dGVuZGVkUGF0aCk7XG4gICAgICAgICAgZXh0ZW5kZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIWV4dGVuZGVkUGF0aCAmJiBleHRlbmRlZFBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGV4dGVuZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXRoQ2xvbmUudmlzaWJsZSA9IHRydWU7XG4gICAgICByZXR1cm4gcGF0aENsb25lO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcGVQcmVkaWN0aW9uKHBhdGgpIHtcbiAgbGV0IHByZWRpY3Rpb24gPSB7fTtcblxuICBsZXQgc2hhcGVKU09OID0gcGF0aC5leHBvcnRKU09OKCk7XG4gIGxldCBzaGFwZURhdGEgPSBwcm9jZXNzU2hhcGVEYXRhKHNoYXBlSlNPTik7XG4gIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHNoYXBlRGF0YSkpO1xuICBsZXQgc2hhcGVQcmVkaWN0aW9uID0gZGV0ZWN0b3Iuc3BvdChzaGFwZURhdGEpO1xuXG4gIGlmIChzaGFwZVByZWRpY3Rpb24uc2NvcmUgPT09IDApIHtcbiAgICAvLyBhbGdvcml0aG0gZG9lc24ndCBsaWtlIHZlcnRpY2FsIGxpbmVzIGZvciBzb21lIHJlYXNvblxuICAgIC8vIGlmIHRoZSBjZXJ0YWludHkgaXMgMCBpdCdzIHByb2JhYmx5IGEgbGluZVxuICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IFwibGluZVwiO1xuICAgIHByZWRpY3Rpb24uc2NvcmUgPSAwLjk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNoYXBlUHJlZGljdGlvbi5zY29yZSA+IDAuNSkge1xuICAgICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gc2hhcGVQcmVkaWN0aW9uLnBhdHRlcm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcHJlZGljdGlvbi5zY29yZSA9IHNoYXBlUHJlZGljdGlvbi5zY29yZTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdzaGFwZSBwcmVkaWN0aW9uJywgcHJlZGljdGlvbik7XG5cbiAgcmV0dXJuIHByZWRpY3Rpb247XG59XG5cbi8vIGZsb29ycyB0aGUgY29vcmRpbmF0ZXMgb2YgYSBwb2ludFxuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVnZXJQb2ludChwb2ludCkge1xuICByZXR1cm4gbmV3IFBvaW50KE1hdGguZmxvb3IocG9pbnQueCksIE1hdGguZmxvb3IocG9pbnQueSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UG9pbnQocG9pbnQpIHtcbiAgcmV0dXJuIGAke01hdGguZmxvb3IocG9pbnQueCl9LCR7TWF0aC5mbG9vcihwb2ludC55KX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQb2ludChwb2ludFN0cikge1xuICBsZXQgc3BsaXQgPSBwb2ludFN0ci5zcGxpdCgnLCcpLm1hcCgobnVtKSA9PiBNYXRoLmZsb29yKG51bSkpO1xuXG4gIGlmIChzcGxpdC5sZW5ndGggPj0gMikge1xuICAgIHJldHVybiBuZXcgUG9pbnQoc3BsaXRbMF0sIHNwbGl0WzFdKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvc2VzdFBvaW50RnJvbVBhdGhEYXRhKHBvaW50LCBwYXRoRGF0YSkge1xuICBsZXQgbGVhc3REaXN0YW5jZSwgY2xvc2VzdFBvaW50O1xuXG4gIEJhc2UuZWFjaChwYXRoRGF0YSwgKGRhdHVtLCBpKSA9PiB7XG4gICAgbGV0IGRpc3RhbmNlID0gcG9pbnQuZ2V0RGlzdGFuY2UoZGF0dW0ucG9pbnQpO1xuICAgIGlmICghbGVhc3REaXN0YW5jZSB8fCBkaXN0YW5jZSA8IGxlYXN0RGlzdGFuY2UpIHtcbiAgICAgIGxlYXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgIGNsb3Nlc3RQb2ludCA9IGRhdHVtLnBvaW50O1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNsb3Nlc3RQb2ludCB8fCBwb2ludDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NTaGFwZURhdGEoanNvbikge1xuICBsZXQgcmV0dXJuU2hhcGUgPSBbXTtcbiAgbGV0IGpzb25PYmogPSBKU09OLnBhcnNlKGpzb24pWzFdOyAvLyB6ZXJvIGluZGV4IGlzIHN0cmluZ2lmaWVkIHR5cGUgKGUuZy4gXCJQYXRoXCIpXG5cbiAgaWYgKCdzZWdtZW50cycgaW4ganNvbk9iaikge1xuICAgIGxldCBzZWdtZW50cyA9IGpzb25PYmouc2VnbWVudHM7XG4gICAgQmFzZS5lYWNoKHNlZ21lbnRzLCAoc2VnbWVudCwgaSkgPT4ge1xuICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGxldCBwb3NpdGlvbkluZm8gPSBzZWdtZW50WzBdOyAvLyBpbmRleGVzIDEgYW5kIDIgYXJlIHN1cGVyZmx1b3VzIG1hdHJpeCBkZXRhaWxzXG4gICAgICAgIHJldHVyblNoYXBlLnB1c2goe1xuICAgICAgICAgIHg6IHBvc2l0aW9uSW5mb1swXSxcbiAgICAgICAgICB5OiBwb3NpdGlvbkluZm9bMV1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVyblNoYXBlLnB1c2goe1xuICAgICAgICAgIHg6IHNlZ21lbnRbMF0sXG4gICAgICAgICAgeTogc2VnbWVudFsxXVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJldHVyblNoYXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEludGVyaW9yQ3VydmVzKHBhdGgpIHtcbiAgY29uc3QgdHJhbnNwYXJlbnQgPSBjb2xvci50cmFuc3BhcmVudDtcblxuICBsZXQgaW50ZXJpb3JDdXJ2ZXMgPSBbXTtcblxuICBsZXQgcGF0aENsb25lID0gcGF0aC5jbG9uZSgpO1xuICBsZXQgaW50ZXJzZWN0aW9ucyA9IHBhdGhDbG9uZS5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIGxldCBkaXZpZGVkUGF0aCA9IHBhdGhDbG9uZS5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gICAgLy8gY29uc29sZS5sb2coZGl2aWRlZFBhdGgpO1xuXG4gICAgaWYgKGRpdmlkZWRQYXRoLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcpIHtcbiAgICAgIEJhc2UuZWFjaChkaXZpZGVkUGF0aC5jaGlsZHJlbiwgKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmIChjaGlsZC5sZW5ndGggPiAwICYmIGNoaWxkLmNsb3NlZCkge1xuICAgICAgICAgIGxldCBlbmNsb3NlZExvb3AgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICAgIGlmIChwYXRoQ2xvbmUuY2xvc2VkKSB7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZmlsbENvbG9yID0gcGF0aENsb25lLnN0cm9rZUNvbG9yO1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEuaW50ZXJpb3IgPSB0cnVlO1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS5pbnRlcmlvciA9IHRydWU7XG4gICAgICAgICAgZW5jbG9zZWRMb29wLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIGVuY2xvc2VkTG9vcC5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIGludGVyaW9yQ3VydmVzLnB1c2goZW5jbG9zZWRMb29wKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhdGhDbG9uZS5jbG9zZWQpIHtcbiAgICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IHBhdGhDbG9uZS5jbG9uZSgpO1xuICAgICAgICBlbmNsb3NlZExvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIGVuY2xvc2VkTG9vcC5maWxsQ29sb3IgPSBwYXRoQ2xvbmUuc3Ryb2tlQ29sb3I7XG4gICAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgaW50ZXJpb3JDdXJ2ZXMucHVzaChlbmNsb3NlZExvb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocGF0aENsb25lLmNsb3NlZCkge1xuICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IHBhdGhDbG9uZS5jbG9uZSgpO1xuICAgICAgZW5jbG9zZWRMb29wLnZpc2libGUgPSB0cnVlO1xuICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHBhdGhDbG9uZS5zdHJva2VDb2xvcjtcbiAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLnRyYW5zcGFyZW50ID0gZmFsc2U7XG4gICAgICBpbnRlcmlvckN1cnZlcy5wdXNoKGVuY2xvc2VkTG9vcCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGludGVyaW9yQ3VydmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5kZWRQYXRoKHBhdGgsIGJydXRlRm9yY2UgPSBmYWxzZSkge1xuICBsZXQgZXh0ZW5kZWRQYXRoID0gcGF0aC5jbG9uZSgpO1xuICBleHRlbmRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuXG4gIGNvbnN0IHRocmVzaG9sZERpc3QgPSB0aHJlc2hvbGREaXN0TXVsdGlwbGllciAqIGV4dGVuZGVkUGF0aC5sZW5ndGg7XG5cbiAgY29uc3QgZmlyc3RTZWdtZW50ID0gZXh0ZW5kZWRQYXRoLmZpcnN0U2VnbWVudDtcbiAgY29uc3QgbmV4dFNlZ21lbnQgPSBmaXJzdFNlZ21lbnQubmV4dDtcbiAgY29uc3Qgc3RhcnRBbmdsZSA9IE1hdGguYXRhbjIobmV4dFNlZ21lbnQucG9pbnQueSAtIGZpcnN0U2VnbWVudC5wb2ludC55LCBuZXh0U2VnbWVudC5wb2ludC54IC0gZmlyc3RTZWdtZW50LnBvaW50LngpOyAvLyByYWRcbiAgY29uc3QgaW52ZXJzZVN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlICsgTWF0aC5QSTtcbiAgY29uc3QgZXh0ZW5kZWRTdGFydFBvaW50ID0gbmV3IFBvaW50KGZpcnN0U2VnbWVudC5wb2ludC54ICsgKE1hdGguY29zKGludmVyc2VTdGFydEFuZ2xlKSAqIHRocmVzaG9sZERpc3QgLyAyKSwgZmlyc3RTZWdtZW50LnBvaW50LnkgKyAoTWF0aC5zaW4oaW52ZXJzZVN0YXJ0QW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpKTtcbiAgZXh0ZW5kZWRQYXRoLmluc2VydCgwLCBleHRlbmRlZFN0YXJ0UG9pbnQpO1xuXG4gIGNvbnN0IGxhc3RTZWdtZW50ID0gZXh0ZW5kZWRQYXRoLmxhc3RTZWdtZW50O1xuICBjb25zdCBwZW5TZWdtZW50ID0gbGFzdFNlZ21lbnQucHJldmlvdXM7IC8vIHBlbnVsdGltYXRlXG4gIGNvbnN0IGVuZEFuZ2xlID0gTWF0aC5hdGFuMihsYXN0U2VnbWVudC5wb2ludC55IC0gcGVuU2VnbWVudC5wb2ludC55LCBsYXN0U2VnbWVudC5wb2ludC54IC0gcGVuU2VnbWVudC5wb2ludC54KTsgLy8gcmFkXG4gIGNvbnN0IGV4dGVuZGVkRW5kUG9pbnQgPSBuZXcgUG9pbnQobGFzdFNlZ21lbnQucG9pbnQueCArIChNYXRoLmNvcyhlbmRBbmdsZSkgKiB0aHJlc2hvbGREaXN0IC8gMiksIGxhc3RTZWdtZW50LnBvaW50LnkgKyAoTWF0aC5zaW4oZW5kQW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpKTtcbiAgZXh0ZW5kZWRQYXRoLmFkZChleHRlbmRlZEVuZFBvaW50KTtcblxuICAvLyBleHRlbmRlZFBhdGgudmlzaWJsZSA9IHRydWU7XG5cbiAgcmV0dXJuIGV4dGVuZGVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJydXRlRXh0ZW5kZWRQYXRoKHBhdGgpIHtcbiAgbGV0IGV4dGVuZGVkUGF0aCA9IHBhdGguY2xvbmUoKTtcbiAgZXh0ZW5kZWRQYXRoLnZpc2libGUgPSBmYWxzZTtcblxuICBjb25zdCB0aHJlc2hvbGREaXN0ID0gdGhyZXNob2xkRGlzdE11bHRpcGxpZXIgKiBleHRlbmRlZFBhdGgubGVuZ3RoO1xuICBjb25zdCBmaXJzdFBvaW50ID0gZXh0ZW5kZWRQYXRoLmZpcnN0U2VnbWVudC5wb2ludDtcbiAgY29uc3QgbGFzdFBvaW50ID0gZXh0ZW5kZWRQYXRoLmxhc3RTZWdtZW50LnBvaW50O1xuXG4gIGlmIChmaXJzdFBvaW50LmdldERpc3RhbmNlKGxhc3RQb2ludCkgPCB0aHJlc2hvbGREaXN0KSB7XG4gICAgZXh0ZW5kZWRQYXRoLmluc2VydCgwLCBsYXN0UG9pbnQpO1xuICAgIGV4dGVuZGVkUGF0aC5hZGQoZmlyc3RQb2ludCk7XG4gICAgZXh0ZW5kZWRQYXRoLmNsb3NlZCA9IHRydWU7XG4gICAgZXh0ZW5kZWRQYXRoLnVuaXRlKCk7XG4gICAgbGV0IGNyb3NzaW5ncyA9IGV4dGVuZGVkUGF0aC5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gICAgaWYgKCEhY3Jvc3NpbmdzICYmICEhY3Jvc3NpbmdzLmNoaWxkcmVuICYmIGNyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgbWF4QXJlYSA9IDAsIG1heENoaWxkID0gbnVsbDtcbiAgICAgIGNyb3NzaW5ncy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQuYXJlYSA+IG1heEFyZWEpIHtcbiAgICAgICAgICBtYXhDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIG1heEFyZWEgPSBjaGlsZC5hcmVhO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZXh0ZW5kZWRQYXRoID0gbWF4Q2hpbGQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4dGVuZGVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyaW1tZWRQYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcblxuICBsZXQgZmlyc3RQb2ludCA9IHBhdGhDbG9uZS5maXJzdFNlZ21lbnQucG9pbnQ7XG4gIGxldCBsYXN0UG9pbnQgPSBwYXRoQ2xvbmUubGFzdFNlZ21lbnQucG9pbnQ7XG4gIGxldCB0aHJlc2hvbGREaXN0ID0gdGhyZXNob2xkRGlzdE11bHRpcGxpZXIgKiBwYXRoQ2xvbmUubGVuZ3RoO1xuXG4gIGxldCBpbnRlcnNlY3Rpb25zID0gcGF0aENsb25lLmdldEludGVyc2VjdGlvbnMoKTtcbiAgaW50ZXJzZWN0aW9ucy5mb3JFYWNoKChpbnRlcnNlY3Rpb24sIGkpID0+IHtcbiAgICBpZiAoaW50ZXJzZWN0aW9uLm9mZnNldCA9PT0gMCkge1xuICAgICAgaW50ZXJzZWN0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zb2xlLmxvZygnaW50ZXJzZWN0aW9ucycsIGludGVyc2VjdGlvbnMpO1xuXG4gIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCA9PSAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb25zW2ldLnBvaW50O1xuXG4gICAgICAvLyBpZiB0aGUgYXZlcmFnZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnRzIGFuZCB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGlzIHdpdGhpbiB0aGUgdGhyZXNob2xkLCB0cmltXG4gICAgICBpZiAoZmlyc3RQb2ludC5nZXREaXN0YW5jZShpbnRlcnNlY3Rpb25Qb2ludCkgKyBsYXN0UG9pbnQuZ2V0RGlzdGFuY2UoaW50ZXJzZWN0aW9uUG9pbnQpIDwgMiAqIHRocmVzaG9sZERpc3QpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1taW5nIHBhdGgnKTtcbiAgICAgICAgbGV0IGRpdmlkZWRQYXRoID0gcGF0aENsb25lLmNsb25lKCk7IC8vIHJlc29sdmUgY3Jvc3NpbmdzIHNlZW1zIHRvIG1vZGlmeSB0aGUgcGF0aCBpdCB3YXMgcGFzc2VkLCBzbyBtYWtlIGFuIGV4dHJhIGNsb25lIHRvIGJlIHNhZmVcbiAgICAgICAgZGl2aWRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBsZXQgcGF0aENyb3NzaW5ncyA9IGRpdmlkZWRQYXRoLnJlc29sdmVDcm9zc2luZ3MoKTtcblxuICAgICAgICBpZiAocGF0aENyb3NzaW5ncy5jbGFzc05hbWUgPT09ICdDb21wb3VuZFBhdGgnICYmIHBhdGhDcm9zc2luZ3MuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGF0aENyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gcGF0aENyb3NzaW5ncy5jaGlsZHJlbltqXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgLy8gY2hpbGQuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBkaXZpZGVkUGF0aCA9IGRpdmlkZWRQYXRoLnN1YnRyYWN0KGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXZpZGVkUGF0aC5zZWxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgbGV0IHRyaW1tZWRQYXRoID0gcGF0aENsb25lLnN1YnRyYWN0KGRpdmlkZWRQYXRoKTtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHBhdGhDbG9uZTtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXRoLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcgJiYgdHJpbW1lZFBhdGguY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBjbG9zZWRDaGlsZHJlbiA9IFtdO1xuICAgICAgICAgIHRyaW1tZWRQYXRoLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGQubGVuZ3RoID4gMCAmJiBjaGlsZC5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgbGV0IGNoaWxkQ2xvbmUgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICAgICAgICBjaGlsZENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgY2xvc2VkQ2hpbGRyZW4ucHVzaChjaGlsZENsb25lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChjbG9zZWRDaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoY2xvc2VkQ2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAvLyBmb3Igc29tZSByZWFzb24gdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgY2xvc2VkIGNoaWxkcmVuLCBtZXJnZSB0aGVtXG4gICAgICAgICAgICAgIGxldCBhY2N1bXVsYXRvciA9IGNsb3NlZENoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgY2xvc2VkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yLnVuaXRlKGNsb3NlZENoaWxkcmVuW2pdKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChhY2N1bXVsYXRvci5sZW5ndGggPiAwICYmIGFjY3VtdWxhdG9yLmNsYXNzTmFtZSA9PT0gJ1BhdGgnKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1tZWQgYWNjdW11bGF0b3InLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1BhdGggPSBuZXcgUGF0aCgpO1xuICAgICAgICAgICAgICAgIG5ld1BhdGguY29weUNvbnRlbnQoYWNjdW11bGF0b3IpO1xuICAgICAgICAgICAgICAgIG5ld1BhdGguY29weUF0dHJpYnV0ZXMocGF0aENsb25lKTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZGl2aWRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdHJpbW1lZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1BhdGg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGF0aENsb25lLnJlbW92ZSgpO1xuICAgICAgICAgICAgZGl2aWRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICB0cmltbWVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmltbWVkIGNsb3NlZENoaWxkcmVuWzBdJywgY2xvc2VkQ2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZENoaWxkcmVuWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmltbWVkIHBhdGggcmV0dXJuJywgdHJpbW1lZFBhdGgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygncGF0aCBjbG9uZScsIHBhdGhDbG9uZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXZpZGVkUGF0aCcsIGRpdmlkZWRQYXRoKTtcbiAgICAgICAgcGF0aENsb25lLnJlbW92ZSgpO1xuICAgICAgICBkaXZpZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRyaW1tZWRQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vIGNsb3NlIGludGVyc2VjdGlvbiB3ZXJlIGZvdW5kIHNvIG5vdGhpbmcgY2FuIGJlIHRyaW1tZWRcbiAgICByZXR1cm4gcGF0aENsb25lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXRoO1xuICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGhpdFRlc3RHcm91cEJvdW5kcyhwb2ludCkge1xuICBsZXQgZ3JvdXBzID0gdXRpbC5nZXRBbGxHcm91cHMoKTtcbiAgcmV0dXJuIGhpdFRlc3RCb3VuZHMocG9pbnQsIGdyb3Vwcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaXRUZXN0Qm91bmRzKHBvaW50LCBjaGlsZHJlbikge1xuICBpZiAoIXBvaW50KSByZXR1cm4gbnVsbDtcblxuICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICBsZXQgYm91bmRzID0gY2hpbGQuc3Ryb2tlQm91bmRzO1xuICAgIGlmIChwb2ludC5pc0luc2lkZShjaGlsZC5zdHJva2VCb3VuZHMpKSB7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCJyZXF1aXJlKCdob3dsZXInKTtcblxuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBzaGFwZSA9IHJlcXVpcmUoJy4vc2hhcGUnKTtcbmNvbnN0IGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xuY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB0dXRvcmlhbCA9IHJlcXVpcmUoJy4vdHV0b3JpYWwnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbmNvbnN0IG1lYXN1cmVzID0gNDtcbmNvbnN0IGJwbSA9IDEyMDtcbmNvbnN0IGJlYXRMZW5ndGggPSAoNjAgLyBicG0pICogMTAwMDsgLy8gbXNcbmNvbnN0IG1lYXN1cmVMZW5ndGggPSBiZWF0TGVuZ3RoICogNDtcbmV4cG9ydCBjb25zdCBjb21wb3NpdGlvbkxlbmd0aCA9IG1lYXN1cmVMZW5ndGggKiBtZWFzdXJlcztcblxuZXhwb3J0IGNvbnN0IHBsYXlpbmdDbGFzcyA9ICdwbGF5aW5nJztcbmV4cG9ydCBjb25zdCBwbGF5RW5hYmxlZENsYXNzID0gJ3BsYXktZW5hYmxlZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICByZXR1cm4gYXN5bmNJbml0U2hhcGVTb3VuZHMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlaW5pdFNoYXBlU291bmRzKCkge1xuICByZXR1cm4gYXN5bmNJbml0U2hhcGVTb3VuZHMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNoYXBlU291bmRPYmoocGF0aCkge1xuICBjb25zdCB2aWV3V2lkdGggPSBwYXBlci52aWV3LnZpZXdTaXplLndpZHRoO1xuICBjb25zdCB2aWV3SGVpZ2h0ID0gcGFwZXIudmlldy52aWV3U2l6ZS5oZWlnaHQ7XG4gIGNvbnN0IHNoYXBlU291bmRzID0gd2luZG93Lmthbi5zaGFwZVNvdW5kcyB8fCBpbml0U2hhcGVTb3VuZHMoKTtcbiAgLy8gYWxlcnQoSlNPTi5zdHJpbmdpZnkod2luZG93Lmthbi5zaGFwZVNvdW5kcykpO1xuICAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh3aW5kb3cua2FuLnNoYXBlU291bmRzKSk7XG5cbiAgbGV0IHNoYXBlUHJlZGljdGlvbiA9IHNoYXBlLmdldFNoYXBlUHJlZGljdGlvbihwYXRoKTtcbiAgbGV0IGNvbG9yTmFtZSA9IGNvbG9yLmdldFBhdGhDb2xvck5hbWUocGF0aCk7XG4gIGlmIChjb2xvck5hbWUgPT09IG51bGwpIGNvbG9yTmFtZSA9ICdibGFjayc7IC8vIGp1c3QgaW4gY2FzZVxuXG4gIGNvbnN0IHF1YW50aXplZFNvdW5kU3RhcnRUaW1lID0gcXVhbnRpemVMZW5ndGgocGF0aC5ib3VuZHMueCAvIHZpZXdXaWR0aCAqIGNvbXBvc2l0aW9uTGVuZ3RoKTsgLy8gbXNcbiAgY29uc3QgcXVhbnRpemVkU291bmREdXJhdGlvbiA9IHF1YW50aXplTGVuZ3RoKHBhdGguYm91bmRzLndpZHRoIC8gdmlld1dpZHRoICogY29tcG9zaXRpb25MZW5ndGgpOyAvLyBtc1xuXG4gIGxldCBzb3VuZE9iaiA9IHt9O1xuICBzb3VuZE9iai5zb3VuZCA9IHNoYXBlU291bmRzW3NoYXBlUHJlZGljdGlvbi5wYXR0ZXJuXTtcbiAgc291bmRPYmouc3RhcnRUaW1lID0gcXVhbnRpemVkU291bmRTdGFydFRpbWU7XG4gIHNvdW5kT2JqLmR1cmF0aW9uID0gcXVhbnRpemVkU291bmREdXJhdGlvbjtcbiAgc291bmRPYmoucGF0aElkID0gcGF0aC5pZDtcbiAgc291bmRPYmouc3ByaXRlTmFtZSA9IGNvbG9yTmFtZTtcblxuICBpZiAoISFwYXRoLnBhcmVudCAmJiBwYXRoLnBhcmVudC5jbGFzc05hbWUgPT09ICdHcm91cCcpIHtcbiAgICBzb3VuZE9iai5ncm91cElkID0gcGF0aC5wYXJlbnQuaWQ7XG4gIH1cblxuICByZXR1cm4gc291bmRPYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydFBsYXlpbmcoKSB7XG4gIGNvbnNvbGUubG9nKCdmaXJzdCB0aW1lJywgd2luZG93Lmthbi5maXJzdFRpbWVQbGF5aW5nKTtcbiAgaWYgKCRib2R5Lmhhc0NsYXNzKHBsYXlFbmFibGVkQ2xhc3MpKSB7XG4gICAgJGJvZHkuYWRkQ2xhc3MocGxheWluZ0NsYXNzKTtcblxuICAgIEhvd2xlci5tdXRlKGZhbHNlKTtcblxuICAgIHdpbmRvdy5rYW4ucGxheWluZyA9IHRydWU7XG5cbiAgICBpZiAod2luZG93Lmthbi5maXJzdFRpbWVQbGF5aW5nID09PSB0cnVlKSB7XG4gICAgICB3aW5kb3cua2FuLmZpcnN0VGltZVBsYXlpbmcgPSBmYWxzZTtcbiAgICAgIHN0YXJ0Q29tcG9zaXRpb24od2luZG93Lmthbi5jb21wb3NpdGlvbiwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGFydENvbXBvc2l0aW9uKHdpbmRvdy5rYW4uY29tcG9zaXRpb24sIHRydWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cua2FuLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAkYm9keS5yZW1vdmVDbGFzcyhwbGF5aW5nQ2xhc3MpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wUGxheWluZyhtdXRlID0gZmFsc2UpIHtcbiAgaWYgKCEhbXV0ZSkge1xuICAgIEhvd2xlci5tdXRlKHRydWUpO1xuICB9XG5cbiAgd2luZG93Lmthbi5wbGF5aW5nID0gZmFsc2U7XG4gICRib2R5LnJlbW92ZUNsYXNzKHBsYXlpbmdDbGFzcyk7XG5cbiAgc3RvcENvbXBvc2l0aW9uKCk7XG59XG5cbmZ1bmN0aW9uIGFzeW5jR2V0U2hhcGVTb3VuZEZyb21TaGFwZU5hbWUoc2hhcGVOYW1lKSB7XG4gIGNvbnN0IHNoYXBlU291bmRKU09OUGF0aCA9IGAuL2F1ZGlvL3NoYXBlcy8ke3NoYXBlTmFtZX0vJHtzaGFwZU5hbWV9Lmpzb25gO1xuICByZXR1cm4gJC5nZXRKU09OKHNoYXBlU291bmRKU09OUGF0aCkudGhlbigocmVzcCkgPT4ge1xuICAgIGNvbnN0IHNoYXBlU291bmREYXRhID0gZm9ybWF0U2hhcGVTb3VuZERhdGEoc2hhcGVOYW1lLCByZXNwKTtcbiAgICBjb25zdCBzb3VuZCA9IG5ldyBIb3dsKHNoYXBlU291bmREYXRhKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2hhcGVOYW1lOiBzaGFwZU5hbWUsXG4gICAgICBzb3VuZDogc291bmRcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXN5bmNJbml0U2hhcGVTb3VuZHMoKSB7XG4gIGxldCByZXR1cm5Tb3VuZHMgPSB7fTtcbiAgY29uc3QgZXh0ZW5zaW9ucyA9IFsnb2dnJywgJ200YScsICdtcDMnLCAnYWMzJ107XG5cbiAgY29uc3Qgc2hhcGVOYW1lcyA9IHNoYXBlLnNoYXBlTmFtZXM7XG4gIGxldCBwcm9taXNlcyA9IFtdO1xuICBCYXNlLmVhY2goc2hhcGVOYW1lcywgKHNoYXBlTmFtZSkgPT4ge1xuICAgIHByb21pc2VzLnB1c2goYXN5bmNHZXRTaGFwZVNvdW5kRnJvbVNoYXBlTmFtZShzaGFwZU5hbWUpKTtcbiAgfSk7XG5cbiAgcmV0dXJuICQud2hlbi5hcHBseSgkLCBwcm9taXNlcykuZG9uZShmdW5jdGlvbigpIHtcbiAgICBsZXQgcmV0dXJuU291bmRzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgICByZXR1cm5Tb3VuZHNbYXJnLnNoYXBlTmFtZV0gPSBhcmcuc291bmQ7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5zaGFwZVNvdW5kcyA9IHJldHVyblNvdW5kcztcbiAgICByZXR1cm4gcmV0dXJuU291bmRzO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNoYXBlU291bmREYXRhKHNoYXBlTmFtZSwgZGF0YSkge1xuICBsZXQgcmV0dXJuRGF0YSA9IHt9O1xuXG4gIHJldHVybkRhdGEuc3JjID0gZGF0YS51cmxzLm1hcCgodXJsKSA9PiBgLi9hdWRpby9zaGFwZXMvJHtzaGFwZU5hbWV9LyR7dXJsfWApO1xuICByZXR1cm5EYXRhLnNwcml0ZSA9IGRhdGEuc3ByaXRlO1xuICByZXR1cm5EYXRhLmh0bWw1ID0gdHJ1ZTtcbiAgcmV0dXJuRGF0YS5sb29wID0gZmFsc2U7XG5cbiAgcmV0dXJuIHJldHVybkRhdGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUxlbmd0aChkdXJhdGlvbikge1xuICBjb25zdCBzbWFsbGVzdER1cmF0aW9uID0gKDYwIC8gYnBtKTtcbiAgY29uc3QgcmV0dXJuRHVyYXRpb24gPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gc21hbGxlc3REdXJhdGlvbikgKiBzbWFsbGVzdER1cmF0aW9uO1xuXG4gIGlmIChyZXR1cm5EdXJhdGlvbiA+IDApIHtcbiAgICByZXR1cm4gcmV0dXJuRHVyYXRpb247XG4gIH0gZWxzZSB7XG4gICAgLy8gYWx3YXlzIHJldHVybiBzb21ldGhpbmcgZ3JlYXRlciB0aGFuIHplcm9cbiAgICByZXR1cm4gc21hbGxlc3REdXJhdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVQb3NpdGlvbihwb3NpdGlvbiwgdmlld1dpZHRoKSB7XG4gIGNvbnN0IHNtYWxsZXN0SW50ZXJ2YWwgPSB2aWV3V2lkdGggLyAoNCAqIG1lYXN1cmVzKTtcbiAgcmV0dXJuIHJldHVyblBvc2l0aW9uID0gTWF0aC5mbG9vcihwb3NpdGlvbiAvIHNtYWxsZXN0SW50ZXJ2YWwpICogc21hbGxlc3RJbnRlcnZhbDtcbn1cblxuZnVuY3Rpb24gYW5pbWF0ZVNoYXBlUGxheShzaGFwZSkge1xuICBjb25zdCBpdGVtID0gcGFwZXIucHJvamVjdC5nZXRJdGVtKHtcbiAgICBjbGFzc05hbWU6ICdQYXRoJyxcbiAgICBtYXRjaDogZnVuY3Rpb24oZWwpIHtcbiAgICAgIHJldHVybiAoZWwuaWQgPT09IHNoYXBlLnBhdGhJZCk7XG4gICAgfVxuICB9KTtcbiAgaWYgKCEhaXRlbSkge1xuICAgIGxldCBncm91cCA9IGl0ZW0ucGFyZW50O1xuICAgIGdyb3VwLmRhdGEuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gbWVhc3VyZUxlbmd0aCAvIDI7XG4gICAgZ3JvdXAuYW5pbWF0ZShbXG4gICAgICB7XG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICByb3RhdGU6IC01LFxuICAgICAgICB9LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGR1cmF0aW9uOiB0b3RhbER1cmF0aW9uIC8gNCxcbiAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluT3V0XCIsXG4gICAgICAgICAgLy8gY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vICAgY29uc29sZS5sb2coJ2FuaW1hdGlvbiBzdGVwIDEnKVxuICAgICAgICAgIC8vIH0sXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzY2FsZTogMS4xNSxcbiAgICAgICAgICByb3RhdGU6IDUsXG4gICAgICAgIH0sXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgZHVyYXRpb246IHRvdGFsRHVyYXRpb24gLyAyLFxuICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5PdXRcIixcbiAgICAgICAgICAvLyBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnYW5pbWF0aW9uIHN0ZXAgMicpXG4gICAgICAgICAgLy8gfSxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgfSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBkdXJhdGlvbjogdG90YWxEdXJhdGlvbiAvIDQsXG4gICAgICAgICAgZWFzaW5nOiBcImVhc2VJbk91dFwiLFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhbmltYXRpb24gc3RlcCAzJylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVNoYXBlRnJvbUNvbXBvc2l0aW9uKHNoYXBlR3JvdXApIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHNvdW5kID0gd2luZG93Lmthbi5jb21wb3NpdGlvbltpXTtcblxuICAgIGlmICgnZ3JvdXBJZCcgaW4gc291bmQpIHtcbiAgICAgIGlmIChzb3VuZC5ncm91cElkID09PSBzaGFwZUdyb3VwLmlkKSB7XG4gICAgICAgIHdpbmRvdy5rYW4uY29tcG9zaXRpb24uc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgncGF0aElkJyBpbiBzb3VuZCkge1xuICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtcyh7XG4gICAgICAgIG1hdGNoOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5pZCA9PT0gc291bmQucGF0aElkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGl0ZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoISFpdGVtLnBhcmVudCAmJiBpdGVtLnBhcmVudC5jbGFzc05hbWUgPT09ICdHcm91cCcgJiYgaXRlbS5wYXJlbnQuaWQgPT09IHNoYXBlR3JvdXAuaWQpIHtcbiAgICAgICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU291bmRUaW1lb3V0cygpIHtcbiAgaWYgKHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5sZW5ndGggPiAwKSB7XG4gICAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLmZvckVhY2goKHNvdW5kVGltZW91dCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHNvdW5kVGltZW91dCk7XG4gICAgfSk7XG4gIH1cblxuICB3aW5kb3cua2FuLnNvdW5kVGltZW91dHMgPSBbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0Q29tcG9zaXRpb24oY29tcG9zaXRpb24sIGxvb3AgPSBmYWxzZSkge1xuICBzdG9wQ29tcG9zaXRpb24oKTtcbiAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG5cbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQpO1xuXG4gIGxldCBpdGVyYXRpb25zID0gMDtcbiAgcGxheUNvbXBvc2l0aW9uRmlyc3RUaW1lKCk7XG5cbiAgZnVuY3Rpb24gcGxheUNvbXBvc2l0aW9uRmlyc3RUaW1lKCkge1xuICAgIGNsZWFyU291bmRUaW1lb3V0cygpO1xuICAgIGNvbnNvbGUubG9nKCdwbGF5aW5nIGNvbXBvc2l0aW9uIGZpcnN0IHRpbWUnKTtcbiAgICBsZXQgdHJpbW1lZENvbXBvc2l0aW9uT2JqID0gZ2V0VHJpbW1lZENvbXBvc2l0aW9uT2JqKGNvbXBvc2l0aW9uKTtcblxuICAgIEJhc2UuZWFjaCh0cmltbWVkQ29tcG9zaXRpb25PYmouY29tcG9zaXRpb24sIChzaGFwZSwgaSkgPT4ge1xuICAgICAgbGV0IHNvdW5kVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXdpbmRvdy5rYW4ucGxheWluZykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdub3QgcGxheWluZywgcmV0dXJuaW5nJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYXBlLnNwcml0ZU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnJWNzaGFwZSBpcyBudWxsJywgJ2NvbG9yOnJlZCcsIHNoYXBlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygncGxheWluZzogJywgc2hhcGUuc291bmQsIHNoYXBlLnNwcml0ZU5hbWUsIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICAgIHNoYXBlLnNvdW5kLnBsYXkoc2hhcGUuc3ByaXRlTmFtZSk7XG4gICAgICAgIGFuaW1hdGVTaGFwZVBsYXkoc2hhcGUpO1xuICAgICAgfSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5wdXNoKHNvdW5kVGltZW91dCk7XG4gICAgfSk7XG5cbiAgICBpdGVyYXRpb25zKys7XG4gICAgd2luZG93Lmthbi5jb21wb3NpdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlcGVhdENvbXBvc2l0aW9uLCBjb21wb3NpdGlvbkxlbmd0aCAtIHRyaW1tZWRDb21wb3NpdGlvbk9iai5zdGFydFRpbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheUNvbXBvc2l0aW9uT25jZSgpIHtcbiAgICBjbGVhclNvdW5kVGltZW91dHMoKTtcbiAgICBjb25zb2xlLmxvZygncmVwZWF0Jyk7XG4gICAgQmFzZS5lYWNoKGNvbXBvc2l0aW9uLCAoc2hhcGUsIGkpID0+IHtcbiAgICAgIGxldCBzb3VuZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF3aW5kb3cua2FuLnBsYXlpbmcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnbm90IHBsYXlpbmcsIHJldHVyaW5nJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3BsYXlpbmc6ICcsIHNoYXBlLnNvdW5kLCBzaGFwZS5zcHJpdGVOYW1lLCBzaGFwZS5zdGFydFRpbWUpO1xuICAgICAgICBzaGFwZS5zb3VuZC5wbGF5KHNoYXBlLnNwcml0ZU5hbWUpO1xuICAgICAgICBhbmltYXRlU2hhcGVQbGF5KHNoYXBlKTtcbiAgICAgIH0sIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICB3aW5kb3cua2FuLnNvdW5kVGltZW91dHMucHVzaChzb3VuZFRpbWVvdXQpO1xuICAgIH0pO1xuICAgIGl0ZXJhdGlvbnMrKztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGVhdENvbXBvc2l0aW9uKCkge1xuICAgIGlmIChsb29wID09PSB0cnVlKSB7XG4gICAgICBwbGF5Q29tcG9zaXRpb25PbmNlKCk7XG4gICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwbGF5Q29tcG9zaXRpb25PbmNlLCBjb21wb3NpdGlvbkxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVyYXRpb25zIDwgMikge1xuICAgICAgICBwbGF5Q29tcG9zaXRpb25PbmNlKCk7XG4gICAgICAgIHNldFRpbWVvdXQocmVwZWF0Q29tcG9zaXRpb24sIGNvbXBvc2l0aW9uTGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3BQbGF5aW5nKCk7XG4gICAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdzaGFyZS1wcm9tcHQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3BDb21wb3NpdGlvbigpIHtcbiAgY2xlYXJJbnRlcnZhbCh3aW5kb3cua2FuLmNvbXBvc2l0aW9uSW50ZXJ2YWwpO1xuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5jb21wb3NpdGlvblRpbWVvdXQpO1xuICBjbGVhclNvdW5kVGltZW91dHMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyaW1tZWRDb21wb3NpdGlvbk9iaihjb21wb3NpdGlvbikge1xuICBsZXQgZmlyc3RUaW1lID0gMDtcbiAgbGV0IHRyaW1tZWRDb21wb3NpdGlvbiA9IFtdO1xuICBsZXQgc3RhcnRUaW1lID0gZ2V0Q29tcG9zaXRpb25TdGFydFRpbWUoY29tcG9zaXRpb24pO1xuXG4gIGNvbXBvc2l0aW9uLmZvckVhY2goKHNvdW5kKSA9PiB7XG4gICAgbGV0IG1vZGlmaWVkU291bmQgPSB1dGlsLnNoYWxsb3dDb3B5KHNvdW5kKTtcbiAgICBtb2RpZmllZFNvdW5kLnN0YXJ0VGltZSA9IHNvdW5kLnN0YXJ0VGltZSAtIHN0YXJ0VGltZTtcbiAgICBpZiAobW9kaWZpZWRTb3VuZC5zdGFydFRpbWUgPCAwKSBtb2RpZmllZFNvdW5kLnN0YXJ0VGltZSA9IDA7IC8vIHRoaXMgc2hvdWxkbid0IGhhcHBlblxuICAgIHRyaW1tZWRDb21wb3NpdGlvbi5wdXNoKG1vZGlmaWVkU291bmQpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNvbXBvc2l0aW9uOiB0cmltbWVkQ29tcG9zaXRpb24sXG4gICAgc3RhcnRUaW1lOiBzdGFydFRpbWVcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDb21wb3NpdGlvblN0YXJ0VGltZShjb21wb3NpdGlvbikge1xuICBsZXQgc3RhcnRUaW1lID0gY29tcG9zaXRpb25MZW5ndGg7XG5cbiAgY29tcG9zaXRpb24uZm9yRWFjaCgoc291bmQpID0+IHtcbiAgICAvLyBjb25zb2xlLmxvZyhzb3VuZCk7XG4gICAgLy8gY29uc29sZS5sb2coc291bmQuc3RhcnRUaW1lKVxuICAgIGlmICgnc3RhcnRUaW1lJyBpbiBzb3VuZCAmJiBzb3VuZC5zdGFydFRpbWUgPCBzdGFydFRpbWUpIHtcbiAgICAgIHN0YXJ0VGltZSA9IHNvdW5kLnN0YXJ0VGltZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGNvbnNvbGUubG9nKCdzdGFydCB0aW1lJywgc3RhcnRUaW1lKTtcblxuICBpZiAoc3RhcnRUaW1lICE9PSBjb21wb3NpdGlvbkxlbmd0aCkge1xuICAgIHJldHVybiBzdGFydFRpbWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cbiIsImNvbnN0IG92ZXJsYXlzID0gcmVxdWlyZSgnLi9vdmVybGF5cycpO1xuY29uc3QgdmlkZW8gPSByZXF1aXJlKCcuL3ZpZGVvJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuXG5leHBvcnQgY29uc3QgZHJhd0luYWN0aXZpdHlEZWxheSA9IDQwICogMTAwMDsgLy8gbXNcbmV4cG9ydCBjb25zdCBjb250aW51ZUluYWN0aXZpdHlEZWxheSA9IDMwICogMTAwMDsgLy8gbXNcbmV4cG9ydCBjb25zdCBwbGF5UHJvbXB0RGVsYXkgPSA2MCAqIDEwMDA7IC8vIG1zO1xuZXhwb3J0IGNvbnN0IGlucHV0RGVsYXkgPSAxMDA7IC8vIG1zXG5leHBvcnQgY29uc3QgcmVmcmVzaENoZWNrRGVsYXkgPSA2MCAqIDEwMDA7IC8vIG1zXG5leHBvcnQgY29uc3Qgb3ZlcmxheURlbGF5ID0gMTAwMDsgLy8gbXNcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaC5sZW5ndGggPiAwICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoID09ICcjZGV2Jykge1xuICAgIHdpbmRvdy5rYW4ub3ZlcmxheXMgPSBmYWxzZTtcbiAgICB2aWRlby5wYXVzZVZpZGVvKCk7XG4gICAgdmlkZW8uZXhpdFR1dG9yaWFsTW9kZSgpO1xuICB9IGVsc2Uge1xuICAgIHZpZGVvLmVudGVyVHV0b3JpYWxNb2RlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnRJbmFjdGl2aXR5VGltZW91dCgpIHtcbiAgY29uc29sZS5sb2coYHByZXZlbnQgdGltZW91dDogJHt1dGlsLmdldFRpbWUoKX1gKTtcbiAgLy8gb3ZlcmxheXMuY2xvc2VBbmRSZXNldE92ZXJsYXlzKCk7XG5cbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4uY29udGludWVDb3VudGRvd25JbnRlcnZhbCk7XG5cbiAgd2luZG93Lmthbi5pbmFjdGl2aXR5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdjb250aW51ZScpO1xuICB9LCBkcmF3SW5hY3Rpdml0eURlbGF5KTtcbn1cbiIsInJlcXVpcmUoJ2hhbW1lcmpzJyk7XG5cbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcbmNvbnN0IGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCB0dXRvcmlhbCA9IHJlcXVpcmUoJy4vdHV0b3JpYWwnKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHVpID0gcmVxdWlyZSgnLi91aScpO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcblxuY29uc3QgaGl0T3B0aW9ucyA9IHtcbiAgc2VnbWVudHM6IGZhbHNlLFxuICBzdHJva2U6IHRydWUsXG4gIGZpbGw6IHRydWUsXG4gIHRvbGVyYW5jZTogNVxufTtcblxuY29uc3QgbWluU2hhcGVTaXplID0gMTAwO1xuY29uc3QgbWF4U2hhcGVMZW5ndGggPSA1MDAwO1xuY29uc3QgbWF4U2NhbGVGYWN0b3IgPSAwLjg7XG5cbmxldCBvdXRlclBhdGg7XG5sZXQgc2l6ZXMgPSBbXTtcbmxldCBzaXplO1xubGV0IGN1bVNpemU7XG5sZXQgcHJldlBvaW50O1xuXG5leHBvcnQgbGV0IGhhbW1lclRpcHM7XG5leHBvcnQgbGV0IGhhbW1lckNhbnZhcztcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGhhbW1lclRpcHMgPSBuZXcgSGFtbWVyLk1hbmFnZXIodWkudGlwc092ZXJsYXkpO1xuICBoYW1tZXJUaXBzLmFkZChuZXcgSGFtbWVyLlN3aXBlKHsgZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX0FMTCB9KSk7XG4gIGhhbW1lclRpcHMub24oJ3N3aXBlJywgb3ZlcmxheXMuY2FyZE5hdk5leHQpO1xuXG4gIGhhbW1lckNhbnZhcyA9IG5ldyBIYW1tZXIuTWFuYWdlcih1aS5jYW52YXMpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuVGFwKHsgZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyLCBpbnRlcnZhbDogNDAwLCB0aW1lOiAxNTAsIHBvc1RocmVzaG9sZDogNTAgfSkpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuVGFwKHsgZXZlbnQ6ICdzaW5nbGV0YXAnIH0pKTtcbiAgaGFtbWVyQ2FudmFzLmFkZChuZXcgSGFtbWVyLlBhbih7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9BTEwgfSkpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuUGluY2goKSk7XG5cbiAgaGFtbWVyQ2FudmFzLmdldCgnZG91YmxldGFwJykucmVjb2duaXplV2l0aCgnc2luZ2xldGFwJyk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3NpbmdsZXRhcCcpLnJlcXVpcmVGYWlsdXJlKCdkb3VibGV0YXAnKTtcbiAgaGFtbWVyQ2FudmFzLmdldCgncGFuJykucmVxdWlyZUZhaWx1cmUoJ3BpbmNoJyk7XG4gIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoJykucmVxdWlyZUZhaWx1cmUoJ3BhbicpO1xuXG4gIC8vIGhhbW1lckNhbnZhcy5vbignc2luZ2xldGFwJywgc2luZ2xlVGFwKTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdkb3VibGV0YXAnLCBkb3VibGVUYXApO1xuXG4gIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gIGhhbW1lckNhbnZhcy5vbigncGFubW92ZScsIHBhbk1vdmUpO1xuICBoYW1tZXJDYW52YXMub24oJ3BhbmVuZCcsIHBhbkVuZCk7XG4gIC8vIGhhbW1lckNhbnZhcy5vbigncGFuY2FuY2VsJywgcGFuQ2FuY2VsKTtcblxuICBoYW1tZXJDYW52YXMub24oJ3BpbmNoc3RhcnQnLCBwaW5jaFN0YXJ0KTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdwaW5jaG1vdmUnLCBwaW5jaE1vdmUpO1xuICBoYW1tZXJDYW52YXMub24oJ3BpbmNoZW5kJywgcGluY2hFbmQpO1xuICAvLyBoYW1tZXJDYW52YXMub24oJ3BpbmNoY2FuY2VsJywgcGluY2hDYW5jZWwpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpIHtcbiAgZW5hYmxlUGFuRXZlbnRzKCk7XG4gIGVuYWJsZVBpbmNoRXZlbnRzKCk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVRhcEV2ZW50cyhlbmFibGUgPSB0cnVlKSB7XG4gIGVuYWJsZSA9IGVuYWJsZSA9PT0gdHJ1ZTtcbiAgaGFtbWVyQ2FudmFzLmdldCgnc2luZ2xldGFwJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICBoYW1tZXJDYW52YXMuZ2V0KCdkb3VibGV0YXAnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVUYXBFdmVudHMoKSB7XG4gIGVuYWJsZVRhcEV2ZW50cyhmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVBhbkV2ZW50cyhlbmFibGUgPSB0cnVlKSB7XG4gIGVuYWJsZSA9IGVuYWJsZSA9PT0gdHJ1ZTtcblxuICBoYW1tZXJDYW52YXMuZ2V0KCdwYW4nKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbnN0YXJ0Jykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwYW5tb3ZlJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwYW5lbmQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVQYW5FdmVudHMoKSB7XG4gIGVuYWJsZVBhbkV2ZW50cyhmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVBpbmNoRXZlbnRzKGVuYWJsZSA9IHRydWUpIHtcbiAgZW5hYmxlID0gZW5hYmxlID09PSB0cnVlO1xuXG4gIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwaW5jaHN0YXJ0Jykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwaW5jaG1vdmUnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoZW5kJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlUGluY2hFdmVudHMoKSB7XG4gIGVuYWJsZVBpbmNoRXZlbnRzKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gc2luZ2xlVGFwKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIC8vIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkgcmV0dXJuO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgLy8gJChldmVudC50YXJnZXQpLmNsaWNrKCk7XG5cbiAgLy8gc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy8gaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgLy8gdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIC8vXG4gIC8vIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIC8vXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXIsXG4gICAgICBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSksXG4gICAgICBoaXRSZXN1bHQgPSBwYXBlci5wcm9qZWN0LmhpdFRlc3QocG9pbnQsIGhpdE9wdGlvbnMpO1xuXG4gIGlmIChoaXRSZXN1bHQpIHtcbiAgICBsZXQgaXRlbSA9IGhpdFJlc3VsdC5pdGVtO1xuICAgIC8vIGl0ZW0uc2VsZWN0ZWQgPSAhaXRlbS5zZWxlY3RlZDtcbiAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkb3VibGVUYXAoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gY29uc29sZS5sb2coJ2RvdWJsZXRhcCcpO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXIsXG4gICAgICBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSksXG4gICAgICBoaXRSZXN1bHQgPSBwYXBlci5wcm9qZWN0LmhpdFRlc3QocG9pbnQsIGhpdE9wdGlvbnMpO1xuXG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkgcmV0dXJuO1xuXG5cbiAgaWYgKGhpdFJlc3VsdCkge1xuICAgIHNoYXBlLnRvZ2dsZUZpbGwoaGl0UmVzdWx0Lml0ZW0pO1xuICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKCdmaWxsJyk7XG5cbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cua2FuLnBpbmNoZWRHcm91cCA9IG51bGw7XG4gICAgY29uc29sZS5sb2coJ2hpdCBubyBpdGVtJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFuU3RhcnQoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xuICAvLyBjb25zb2xlLmxvZygncGFuc3RhcnQnKTtcbiAgLy8gcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5yZW1vdmVDaGlsZHJlbigpOyAvLyBSRU1PVkVcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICBpZiAoIWV2ZW50VGFyZ2V0SXNPbkNhbnZhcyhldmVudCkpIHtcbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgLy8gY2hlY2sgaWYgdGlwcyBtb2RhbCBpcyB1cFxuICAgIGlmICgkYm9keS5oYXNDbGFzcygnb3ZlcmxheS1hY3RpdmUgdGlwcy1hY3RpdmUnKSkge1xuICAgICAgLy8gaWYgc28sIGdvIHRvIG5leHQgdGlwIGNhcmRcbiAgICAgIG92ZXJsYXlzLmNhcmROYXZOZXh0KCk7XG4gICAgfVxuICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHdpbmRvdy5rYW4ucGFubmluZyA9IHRydWU7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGhhbW1lckNhbnZhcy5vZmYoJ3BhbnN0YXJ0Jyk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbicpLnNldCh7ZW5hYmxlOiBmYWxzZX0pO1xuICBkaXNhYmxlUGluY2hFdmVudHMoKTtcbiAgZGlzYWJsZVRhcEV2ZW50cygpO1xuXG4gIC8vIGlnbm9yZSBvdGhlciB0b3VjaCBpbnB1dHNcbiAgLy8gaWYgKHdpbmRvdy5rYW4ucGluY2hpbmcpIHJldHVybjtcbiAgLy8gaWYgKCEoZXZlbnQuY2hhbmdlZFBvaW50ZXJzICYmIGV2ZW50LmNoYW5nZWRQb2ludGVycy5sZW5ndGggPiAwKSkgcmV0dXJuO1xuICAvLyBpZiAoZXZlbnQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCA+IDEpIHtcbiAgLy8gICBjb25zb2xlLmxvZygnZXZlbnQuY2hhbmdlZFBvaW50ZXJzID4gMScpO1xuICAvLyB9XG5cbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcblxuICB3aW5kb3cua2FuLnByZXZBbmdsZSA9IE1hdGguYXRhbjIoZXZlbnQudmVsb2NpdHlZLCBldmVudC52ZWxvY2l0eVgpO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXI7XG4gIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KTtcblxuICBvdXRlclBhdGggPSBuZXcgUGF0aCgpO1xuICBvdXRlclBhdGguZmlsbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIC8vIG91dGVyUGF0aC5maWxsQ29sb3IgPSBuZXcgQ29sb3IoMCwgMC41KTtcblxuICBzaXplcyA9IFtdO1xuXG4gIGxldCBzaGFwZVBhdGggPSBuZXcgUGF0aCh7XG4gICAgc3Ryb2tlQ29sb3I6IHdpbmRvdy5rYW4uY3VycmVudENvbG9yLFxuICAgIG5hbWU6ICdzaGFwZVBhdGgnLFxuICAgIHN0cm9rZVdpZHRoOiA1LFxuICAgIHZpc2libGU6IGZhbHNlLFxuICAgIHN0cm9rZUNhcDogJ3JvdW5kJ1xuICB9KTtcblxuICBzaGFwZVBhdGguYWRkKHBvaW50KTtcblxuICAvLyB3aW5kb3cua2FuLmNvcm5lcnMgPSBbcG9pbnRdO1xuXG4gIC8vIHdpbmRvdy5rYW4uc2lkZXMgPSBbXTtcbiAgLy8gd2luZG93Lmthbi5zaWRlID0gW3BvaW50XTtcblxuICB3aW5kb3cua2FuLnBhdGhEYXRhW3NoYXBlLnN0cmluZ2lmeVBvaW50KHBvaW50KV0gPSB7XG4gICAgcG9pbnQ6IHBvaW50LFxuICAgIGZpcnN0OiB0cnVlXG4gIH07XG5cbiAgd2luZG93Lmthbi5zaGFwZVBhdGggPSBzaGFwZVBhdGg7XG59XG5cbmZ1bmN0aW9uIHBhbk1vdmUoZXZlbnQpIHtcbiAgY29uc29sZS5sb2coJ3Bhbm1vdmUnKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSB7XG4gICAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cua2FuLnBhbm5pbmcgIT09IHRydWUpIHJldHVybjtcblxuICBjb25zdCB0aHJlc2hvbGRBbmdsZVJhZCA9IHV0aWwucmFkKHNoYXBlLmNvcm5lclRocmVzaG9sZERlZyk7XG5cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcjtcbiAgbGV0IHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KTtcblxuICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKGV2ZW50LnZlbG9jaXR5WSwgZXZlbnQudmVsb2NpdHlYKTtcbiAgbGV0IHByZXZBbmdsZSA9IHdpbmRvdy5rYW4ucHJldkFuZ2xlO1xuICBsZXQgYW5nbGVEZWx0YSA9IHV0aWwuYW5nbGVEZWx0YShhbmdsZSwgcHJldkFuZ2xlKTtcbiAgd2luZG93Lmthbi5wcmV2QW5nbGUgPSBhbmdsZTtcblxuICAvLyBsZXQgc2lkZSA9IHdpbmRvdy5rYW4uc2lkZTtcbiAgLy8gbGV0IHNpZGVzID0gd2luZG93Lmthbi5zaWRlcztcblxuICAvLyBpZiAoYW5nbGVEZWx0YSA+IHRocmVzaG9sZEFuZ2xlUmFkKSB7XG4gIC8vICAgaWYgKHNpZGUubGVuZ3RoID4gMCkge1xuICAvLyAgICAgLy8gY29uc29sZS5sb2coJ2Nvcm5lcicpO1xuICAvLyAgICAgbGV0IGNvcm5lclBvaW50ID0gcG9pbnQ7XG4gIC8vICAgICAvLyBuZXcgUGF0aC5DaXJjbGUoe1xuICAvLyAgICAgLy8gICBjZW50ZXI6IGNvcm5lclBvaW50LFxuICAvLyAgICAgLy8gICByYWRpdXM6IDE1LFxuICAvLyAgICAgLy8gICBzdHJva2VDb2xvcjogJ2JsYWNrJ1xuICAvLyAgICAgLy8gfSk7XG4gIC8vICAgICAvLyB3aW5kb3cua2FuLmNvcm5lcnMucHVzaChjb3JuZXJQb2ludCk7XG4gIC8vICAgICBzaWRlcy5wdXNoKHNpZGUpO1xuICAvLyAgICAgc2lkZSA9IFtdO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8vIHNpZGUucHVzaChwb2ludCk7XG5cbiAgd2hpbGUgKHNpemVzLmxlbmd0aCA+IDEwKSB7XG4gICAgc2l6ZXMuc2hpZnQoKTtcbiAgfVxuICBpZiAoc2l6ZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGRpc3QgPSBwcmV2UG9pbnQuZ2V0RGlzdGFuY2UocG9pbnQpO1xuXG4gICAgLy8gVGhlc2UgYXJlIGJhc2VkIG9uIGFjY2VsZXJhdGlvblxuICAgIC8vIHNpemUgPSAzMCAtIE1hdGgubWluKGRpc3QgKiAwLjMsIDMwKTtcbiAgICAvLyBzaXplID0gZGlzdCAqIDMgKyA1O1xuICAgIHNpemUgPSBNYXRoLnJhbmRvbSgpICogMTA7IC8vIFRoaXMgaXMganVzdCByYW5kb20gdmFyaWFuY2VcblxuICAgIGN1bVNpemUgPSAwO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGN1bVNpemUgKz0gc2l6ZXNbal07XG4gICAgfVxuICAgIC8vIGNvbnN0IGF2Z1NpemUgPSAoKGN1bVNpemUgLyBzaXplcy5sZW5ndGgpICsgc2l6ZSkgLyAyO1xuICAgIGNvbnN0IGF2Z1NpemUgPSBNYXRoLm1heCg1LCAoKGN1bVNpemUgLyBzaXplcy5sZW5ndGgpICsgc2l6ZSkgLyAyKTtcblxuICAgIGNvbnN0IGhhbGZQb2ludFggPSAocG9pbnQueCArIHByZXZQb2ludC54KSAvIDI7XG4gICAgY29uc3QgaGFsZlBvaW50WSA9IChwb2ludC55ICsgcHJldlBvaW50LnkpIC8gMjtcbiAgICBjb25zdCBoYWxmUG9pbnQgPSBuZXcgUG9pbnQoaGFsZlBvaW50WCwgaGFsZlBvaW50WSk7XG5cbiAgICBjb25zdCB0b3BYID0gaGFsZlBvaW50LnggKyBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkvMikgKiBhdmdTaXplO1xuICAgIGNvbnN0IHRvcFkgPSBoYWxmUG9pbnQueSArIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgY29uc3QgdG9wID0gbmV3IFBvaW50KHRvcFgsIHRvcFkpO1xuXG4gICAgY29uc3QgYm90dG9tWCA9IGhhbGZQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICBjb25zdCBib3R0b21ZID0gaGFsZlBvaW50LnkgKyBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkvMikgKiBhdmdTaXplO1xuICAgIGNvbnN0IGJvdHRvbSA9IG5ldyBQb2ludChib3R0b21YLCBib3R0b21ZKTtcblxuICAgIG91dGVyUGF0aC5hZGQodG9wKTtcbiAgICBvdXRlclBhdGguaW5zZXJ0KDAsIGJvdHRvbSk7XG4gICAgb3V0ZXJQYXRoLnNtb290aCgpO1xuICB9IGVsc2Uge1xuICAgIHNpemUgPSA1O1xuICB9XG5cbiAgc2l6ZXMucHVzaChzaXplKTtcbiAgcHJldlBvaW50ID0gcG9pbnQ7XG5cbiAgd2luZG93Lmthbi5wYXRoRGF0YVtzaGFwZS5zdHJpbmdpZnlQb2ludChwb2ludCldID0ge1xuICAgIHBvaW50OiBwb2ludCxcbiAgICBzcGVlZDogTWF0aC5hYnMoZXZlbnQub3ZlcmFsbFZlbG9jaXR5KSxcbiAgICBhbmdsZTogYW5nbGVcbiAgfTtcblxuICB3aW5kb3cua2FuLnNoYXBlUGF0aC5hZGQocG9pbnQpO1xuICAvLyB3aW5kb3cua2FuLnNpZGVzID0gc2lkZXM7XG4gIC8vIHdpbmRvdy5rYW4uc2lkZSA9IHNpZGU7XG5cbiAgcGFwZXIudmlldy5kcmF3KCk7XG59XG5cbmZ1bmN0aW9uIHBhbkVuZChldmVudCkge1xuICBjb25zb2xlLmxvZygncGFuZW5kJyk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkge1xuICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAod2luZG93Lmthbi5wYW5uaW5nICE9PSB0cnVlKSByZXR1cm47XG5cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcjtcbiAgY29uc3QgcG9pbnQgPSBuZXcgUG9pbnQocG9pbnRlci54LCBwb2ludGVyLnkpO1xuXG4gIGNvbnN0IHRyYW5zcGFyZW50ID0gY29sb3IudHJhbnNwYXJlbnQ7XG4gIGNvbnN0IGNvbG9yTmFtZSA9IGNvbG9yLmdldENvbG9yTmFtZSh3aW5kb3cua2FuLmN1cnJlbnRDb2xvcik7XG5cbiAgbGV0IHNoYXBlUGF0aCA9IHdpbmRvdy5rYW4uc2hhcGVQYXRoO1xuICAvLyBsZXQgc2lkZSA9IHdpbmRvdy5rYW4uc2lkZTtcbiAgLy8gbGV0IHNpZGVzID0gd2luZG93Lmthbi5zaWRlcztcbiAgLy8gbGV0IGNvcm5lcnMgPSB3aW5kb3cua2FuLmNvcm5lcnM7XG5cbiAgc2hhcGVQYXRoLmFkZChwb2ludCk7XG4gIG91dGVyUGF0aC52aXNpYmxlID0gZmFsc2U7XG5cbiAgaWYgKHNoYXBlUGF0aC5sZW5ndGggPCBtaW5TaGFwZVNpemUgfHwgc2hhcGVQYXRoLmxlbmd0aCA+IG1heFNoYXBlTGVuZ3RoKSB7XG4gICAgY29uc29sZS5sb2coJ3BhdGggaXMgdG9vIHNob3J0IG9yIHRvbyBsb25nJyk7XG4gICAgc2hhcGVQYXRoLnJlbW92ZSgpO1xuICAgIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuXG4gIHdpbmRvdy5rYW4ucGF0aERhdGFbc2hhcGUuc3RyaW5naWZ5UG9pbnQocG9pbnQpXSA9IHtcbiAgICBwb2ludDogcG9pbnQsXG4gICAgbGFzdDogdHJ1ZVxuICB9O1xuXG4gIC8vIHNpZGUucHVzaChwb2ludCk7XG4gIC8vIHNpZGVzLnB1c2goc2lkZSk7XG4gIC8vIGNvcm5lcnMucHVzaChwb2ludCk7XG5cbiAgbGV0IGdyb3VwID0gbmV3IEdyb3VwKCk7XG5cbiAgbGV0IHRydWVkU2hhcGUgPSBzaGFwZS5nZXRUcnVlZFNoYXBlKHNoYXBlUGF0aCk7XG5cbiAgLy8gZ3JvdXAuZGF0YS5jb2xvciA9IHRydWVkU2hhcGUuc3Ryb2tlQ29sb3I7XG4gIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50R3JhZGllbnQ6JywgY29uZmlnLnBhbGV0dGUuZ3JhZGllbnRzW3dpbmRvdy5rYW4uY3VycmVudENvbG9yXSk7XG5cbiAgY29uc3Qgc2hhcGVTaXplID0gdHJ1ZWRTaGFwZS5zdHJva2VCb3VuZHM7XG4gIGNvbnN0IGNlbnRlclBvaW50ID0gbmV3IFBvaW50KHNoYXBlU2l6ZS53aWR0aCAvIDIsIHNoYXBlU2l6ZS5oZWlnaHQgLyAyKTtcbiAgY29uc3QgYW5nbGUgPSB1dGlsLnJhZChNYXRoLnJhbmRvbSgpICogMzYwKTtcbiAgY29uc3QgZ3JhZGllbnRTaXplID0gKHNoYXBlU2l6ZS53aWR0aCArIHNoYXBlU2l6ZS5oZWlnaHQpIC8gNDtcbiAgY29uc3Qgb3JpZ2luWCA9IGNlbnRlclBvaW50LnggKyBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkvMikgKiBncmFkaWVudFNpemU7XG4gIGNvbnN0IG9yaWdpblkgPSBjZW50ZXJQb2ludC55ICsgTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuICBjb25zdCBkZXN0aW5hdGlvblggPSBjZW50ZXJQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuICBjb25zdCBkZXN0aW5hdGlvblkgPSBjZW50ZXJQb2ludC55ICsgTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuXG4gIGNvbnN0IG9yaWdpbiA9IG5ldyBQb2ludChvcmlnaW5YICsgc2hhcGVTaXplLngsIG9yaWdpblkgKyBzaGFwZVNpemUueSk7XG4gIGNvbnN0IGRlc3RpbmF0aW9uID0gbmV3IFBvaW50KGRlc3RpbmF0aW9uWCArIHNoYXBlU2l6ZS54LCBkZXN0aW5hdGlvblkgKyBzaGFwZVNpemUueSk7XG4gIC8vIGdyb3VwLmFkZENoaWxkKG5ldyBQYXRoLkNpcmNsZSh7XG4gIC8vICAgY2VudGVyOiBvcmlnaW4sXG4gIC8vICAgcmFkaXVzOiA1LFxuICAvLyAgIGZpbGxDb2xvcjogJ3JlZCcsXG4gIC8vIH0pKTtcbiAgLy8gZ3JvdXAuYWRkQ2hpbGQobmV3IFBhdGguQ2lyY2xlKHtcbiAgLy8gICBjZW50ZXI6IGRlc3RpbmF0aW9uLFxuICAvLyAgIHJhZGl1czogNSxcbiAgLy8gICBmaWxsQ29sb3I6ICdncmVlbicsXG4gIC8vIH0pKTtcbiAgZ3JvdXAuZGF0YS5vcmlnaW5hbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIGdyb3VwLmRhdGEuY29sb3IgPSB7XG4gICAgZ3JhZGllbnQ6IHtcbiAgICAgIHN0b3BzOiBjb25maWcucGFsZXR0ZS5ncmFkaWVudHNbd2luZG93Lmthbi5jdXJyZW50Q29sb3JdLFxuICAgIH0sXG4gICAgb3JpZ2luOiBvcmlnaW4sXG4gICAgZGVzdGluYXRpb246IGRlc3RpbmF0aW9uLFxuICB9O1xuICBncm91cC5kYXRhLnNjYWxlID0gMTsgLy8gaW5pdCB2YXJpYWJsZSB0byB0cmFjayBzY2FsZSBjaGFuZ2VzXG4gIGdyb3VwLmRhdGEucm90YXRpb24gPSAwOyAvLyBpbml0IHZhcmlhYmxlIHRvIHRyYWNrIHJvdGF0aW9uIGNoYW5nZXNcbiAgZ3JvdXAuZGF0YS5mcmVzaCA9IHRydWU7XG5cbiAgc2hhcGVQYXRoLnJlbW92ZSgpO1xuICB0cnVlZFNoYXBlLnZpc2libGUgPSBmYWxzZTtcbiAgdHJ1ZWRTaGFwZS5zdHJva2VDb2xvciA9IG5ldyBDb2xvcigwLCAwKTtcbiAgd2luZG93Lmthbi5zaGFwZVBhdGggPSB0cnVlZFNoYXBlO1xuICB0cnVlZFNoYXBlLm5hbWUgPSAnc2hhcGVQYXRoJztcblxuICBpZiAoISh0cnVlZFNoYXBlLmxlbmd0aCA+IDApKSB7XG4gICAgdHJ1ZWRTaGFwZS5yZW1vdmUoKTtcbiAgICBncm91cC5yZW1vdmUoKTtcbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBncm91cC5hZGRDaGlsZCh0cnVlZFNoYXBlKTtcblxuICBsZXQgc2hhcGVTb3VuZE9iaiA9IHNvdW5kLmdldFNoYXBlU291bmRPYmoodHJ1ZWRTaGFwZSk7XG4gIHdpbmRvdy5rYW4uY29tcG9zaXRpb24ucHVzaChzaGFwZVNvdW5kT2JqKTtcblxuICB0cnVlZFNoYXBlLnZpc2libGUgPSBmYWxzZTtcbiAgY29uc3Qgb3V0bGluZUdyb3VwID0gc2hhcGUuZ2V0T3V0bGluZUdyb3VwKHRydWVkU2hhcGUpO1xuICBjb25zdCBvdXRsaW5lID0gb3V0bGluZUdyb3VwLl9uYW1lZENoaWxkcmVuLm91dGVyWzBdLmNsb25lKCk7XG4gIG91dGxpbmUubmFtZSA9ICdvdXRlcic7XG4gIG91dGxpbmUuZmlsbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIG91dGxpbmUuZmlsbENvbG9yID0gZ3JvdXAuZGF0YS5jb2xvcjtcblxuICBjb25zdCBvdXRsaW5lQ2VudGVyID0gb3V0bGluZUdyb3VwLl9uYW1lZENoaWxkcmVuLm1pZGRsZVswXS5jbG9uZSgpO1xuICBvdXRsaW5lQ2VudGVyLnN0cm9rZUNvbG9yID0gZ3JvdXAuZGF0YS5jb2xvcjtcbiAgb3V0bGluZUNlbnRlci52aXNpYmxlID0gZmFsc2U7XG4gIGdyb3VwLmFkZENoaWxkKG91dGxpbmUpO1xuICBvdXRsaW5lLnNlbmRUb0JhY2soKTtcblxuICBvdXRsaW5lR3JvdXAucmVtb3ZlKCk7XG5cbiAgbGV0IHNoYXBlTWFzayA9IG91dGxpbmUuY2xvbmUoKTtcbiAgc2hhcGVNYXNrLmZpbGxDb2xvciA9IG91dGxpbmUuZmlsbENvbG9yO1xuICBzaGFwZU1hc2suc3Ryb2tlQ29sb3IgPSBvdXRsaW5lLnN0cm9rZUNvbG9yO1xuICBzaGFwZU1hc2suY2xvc2VkID0gdHJ1ZTtcblxuICBsZXQgZW5jbG9zZWRMb29wcyA9IHNoYXBlLmZpbmRJbnRlcmlvckN1cnZlcyhvdXRsaW5lQ2VudGVyKTtcbiAgaWYgKGVuY2xvc2VkTG9vcHMubGVuZ3RoID4gMCB8fCB0cnVlZFNoYXBlLmNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgIGdyb3VwLmRhdGEubGluZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGdyb3VwLmRhdGEubGluZSA9IHRydWU7XG4gIH1cblxuICBlbmNsb3NlZExvb3BzLmZvckVhY2goKGxvb3ApID0+IHtcbiAgICBzaGFwZU1hc2sudW5pdGUobG9vcCk7XG4gICAgc2hhcGVNYXNrLnNlbmRUb0JhY2soKTtcbiAgICBsb29wLm5hbWUgPSAnbG9vcCc7XG4gICAgbG9vcC5kYXRhLmxvb3AgPSB0cnVlO1xuICAgIGxvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgZ3JvdXAuYWRkQ2hpbGQobG9vcCk7XG4gIH0pO1xuXG5cbiAgc2hhcGVNYXNrLnVuaXRlKCk7XG4gIGxldCBjcm9zc2luZ3MgPSBzaGFwZU1hc2sucmVzb2x2ZUNyb3NzaW5ncygpO1xuICBpZiAoISFjcm9zc2luZ3MgJiYgISFjcm9zc2luZ3MuY2hpbGRyZW4gJiYgY3Jvc3NpbmdzLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBsZXQgbWF4QXJlYSA9IDAsIG1heENoaWxkID0gbnVsbDtcbiAgICBjcm9zc2luZ3MuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZC5hcmVhID4gbWF4QXJlYSkge1xuICAgICAgICBtYXhDaGlsZCA9IGNoaWxkO1xuICAgICAgICBtYXhBcmVhID0gY2hpbGQuYXJlYTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHNoYXBlTWFzayA9IG1heENoaWxkO1xuICB9XG5cbiAgb3V0bGluZUNlbnRlci5yZW1vdmUoKTtcbiAgc2hhcGVNYXNrLnZpc2libGUgPSBmYWxzZTtcbiAgc2hhcGVNYXNrLm5hbWUgPSAnbWFzayc7XG4gIHNoYXBlTWFzay5kYXRhLm1hc2sgPSB0cnVlO1xuICBncm91cC5hZGRDaGlsZChzaGFwZU1hc2spO1xuICBzaGFwZU1hc2suc2VuZFRvQmFjaygpO1xuXG4gIHNoYXBlLmNsZWFuVXBHcm91cChncm91cCk7XG5cbiAgd2luZG93Lmthbi5tb3Zlcy5wdXNoKHtcbiAgICB0eXBlOiAnbmV3R3JvdXAnLFxuICAgIGlkOiBncm91cC5pZFxuICB9KTtcblxuXG4gIHVpLnVuZGl0aGVyQnV0dG9uc0J5TmFtZShbJ25ldycsICd1bmRvJ10pO1xuXG4gIGlmICh3aW5kb3cua2FuLnVzZXJIYXNEcmF3bkZpcnN0U2hhcGUgIT09IHRydWUpIHtcbiAgICAvLyBmaXJzdCBzaGFwZSFcbiAgICAvLyBzZXQgcGxheSBwcm9tcHQgdGltZW91dFxuICAgIHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdwbGF5LXByb21wdCcpO1xuICAgIH0sIHRpbWluZy5wbGF5UHJvbXB0RGVsYXkpO1xuXG4gICAgd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBncm91cHMgPSB1dGlsLmdldEFsbEdyb3VwcygpO1xuICAgIGlmIChncm91cHMubGVuZ3RoID49IDMpIHtcbiAgICAgICRib2R5LmFkZENsYXNzKHNvdW5kLnBsYXlFbmFibGVkQ2xhc3MpO1xuICAgICAgdWkudW5kaXRoZXJCdXR0b25zQnlOYW1lKFsncGxheS1zdG9wJywgJ3NoYXJlJ10pO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhncm91cHMubGVuZ3RoLCAkYm9keS5oYXNDbGFzcyhzb3VuZC5wbGF5RW5hYmxlZENsYXNzKSk7XG4gIH1cblxuICBpZiAoY29uZmlnLnJ1bkFuaW1hdGlvbnMpIHtcbiAgICBjb25zdCBzY2FsZUZhY3RvciA9IDAuOTtcbiAgICBncm91cC5hbmltYXRlKFxuICAgICAgW3tcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNjYWxlOiBzY2FsZUZhY3RvclxuICAgICAgICB9LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgICAgICAgZWFzaW5nOiBcImVhc2VPdXRcIixcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNjYWxlOiAxIC8gc2NhbGVGYWN0b3JcbiAgICAgICAgfSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBkdXJhdGlvbjogMTAwLFxuICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5cIixcbiAgICAgICAgfVxuICAgICAgfV1cbiAgICApO1xuICB9XG5cbiAgaWYgKCF0dXRvcmlhbC5hbGxUdXRzQ29tcGxldGVkKCkpIHtcbiAgICBjb25zdCB0dXRvcmlhbENvbXBsZXRpb24gPSB3aW5kb3cua2FuLnR1dG9yaWFsQ29tcGxldGlvbjtcbiAgICBsZXQgdHV0TmFtZSA9IG51bGw7XG5cbiAgICBpZiAoIXR1dG9yaWFsQ29tcGxldGlvblsnZmlsbCddICYmIHRydWVkU2hhcGUuY2xvc2VkKSB7XG4gICAgICB0dXROYW1lID0gJ2ZpbGwnO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZ3JvdXBzID0gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgICAgIG1hdGNoOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5jbGFzc05hbWUgPT09ICdHcm91cCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIXR1dG9yaWFsQ29tcGxldGlvblsncGluY2gnXSAmJiBncm91cHMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgdHV0TmFtZSA9ICdwaW5jaCc7XG4gICAgICB9IGVsc2UgaWYgKCF0dXRvcmlhbENvbXBsZXRpb25bJ3N3aXBlJ10gJiYgZ3JvdXBzLmxlbmd0aCA+PSA1KSB7XG4gICAgICAgIHR1dE5hbWUgPSAnc3dpcGUnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0dXROYW1lICE9PSBudWxsKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgJHt0dXROYW1lfSB0dXRvcmlhbGApO1xuICAgICAgdHV0b3JpYWwuYWRkQ29udGV4dHVhbFR1dCh0dXROYW1lKTtcbiAgICAgIHdpbmRvdy5rYW4udHV0b3JpYWxDb21wbGV0aW9uW3R1dE5hbWVdID0gdHJ1ZTtcbiAgICAgIGdyb3VwLmRhdGEudHV0ID0gdHV0TmFtZTtcbiAgICB9XG4gIH1cblxuICAvLyB3aW5kb3cua2FuLnNpZGUgPSBzaWRlO1xuICAvLyB3aW5kb3cua2FuLnNpZGVzID0gc2lkZXM7XG4gIC8vIHdpbmRvdy5rYW4uY29ybmVycyA9IGNvcm5lcnM7XG4gIGlmICh3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgIT09IG51bGwpIHtcbiAgICBsZXQgc2NoZWR1bGVkT3ZlcmxheSA9IHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheTtcbiAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBudWxsO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoc2NoZWR1bGVkT3ZlcmxheSk7XG4gICAgfSwgdGltaW5nLm92ZXJsYXlEZWxheSk7XG4gIH1cblxuICBjb25zb2xlLmxvZygncGFuIGRvbmUnKTtcbiAgaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogZmFsc2UgfSk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gICAgY29uc29sZS5sb2coJ3RvdWNoIGVuYWJsZWQnKTtcbiAgICBoYW1tZXJDYW52YXMub24oJ3BhbnN0YXJ0JywgcGFuU3RhcnQpO1xuICAgIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCk7XG4gICAgZW5hYmxlVGFwRXZlbnRzKCk7XG5cbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgfSwgdGltaW5nLmlucHV0RGVsYXkpO1xuXG4gIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgc2hhcGUudXBkYXRlUG9wcygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhbkNhbmNlbChldmVudCkge1xuICBjb25zb2xlLmxvZygncGFuY2FuY2VsJyk7XG4gIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCk7XG4gIGVuYWJsZVRhcEV2ZW50cygpO1xuICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcGluY2hTdGFydChldmVudCkge1xuICBjb25zb2xlLmxvZygncGluY2hzdGFydCcpO1xuICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuICB3aW5kb3cua2FuLmludGVyYWN0aW5nID0gdHJ1ZTtcbiAgd2luZG93Lmthbi5waW5jaGluZyA9IHRydWU7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgncGluY2hzdGFydCcpLnNldCh7ZW5hYmxlOiBmYWxzZX0pO1xuICBoYW1tZXJDYW52YXMub2ZmKCdwaW5jaHN0YXJ0Jyk7XG4gIGRpc2FibGVQYW5FdmVudHMoKTtcbiAgZGlzYWJsZVRhcEV2ZW50cygpO1xuXG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkgcmV0dXJuO1xuXG4gIGNvbnNvbGUubG9nKCdwaW5jaFN0YXJ0JywgZXZlbnQuY2VudGVyKTtcbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcblxuICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyLFxuICAgICAgcG9pbnQgPSBuZXcgUG9pbnQocG9pbnRlci54LCBwb2ludGVyLnkpLFxuICAgICAgaGl0UmVzdWx0ID0gc2hhcGUuaGl0VGVzdEdyb3VwQm91bmRzKHBvaW50KTtcblxuICBpZiAoaGl0UmVzdWx0KSB7XG4gICAgd2luZG93Lmthbi5waW5jaGluZyA9IHRydWU7XG4gICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBoaXRSZXN1bHQ7XG4gICAgd2luZG93Lmthbi5sYXN0U2NhbGUgPSAxO1xuICAgIHdpbmRvdy5rYW4ubGFzdFJvdGF0aW9uID0gZXZlbnQucm90YXRpb247XG5cbiAgICB3aW5kb3cua2FuLm9yaWdpbmFsUG9zaXRpb24gPSBoaXRSZXN1bHQucG9zaXRpb247XG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFJvdGF0aW9uID0gaGl0UmVzdWx0LmRhdGEucm90YXRpb247XG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFNjYWxlID0gaGl0UmVzdWx0LmRhdGEuc2NhbGU7XG4gICAgaGl0UmVzdWx0LmRhdGEudGhyb3duID0gZmFsc2U7XG5cbiAgICBpZiAoY29uZmlnLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgc2hhcGUuZGVzdHJveUdyb3VwUG9wcyhoaXRSZXN1bHQpO1xuICAgIH1cblxuICAgIGhpdFJlc3VsdC5icmluZ1RvRnJvbnQoKTtcblxuICAgIGlmIChoaXRSZXN1bHQuZGF0YS50dXQgJiYgaGl0UmVzdWx0LmRhdGEudHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke2hpdFJlc3VsdC5kYXRhLnR1dH0nXWApO1xuICAgICAgaWYgKCR0dXQpIHtcbiAgICAgICAgd2luZG93Lmthbi5waW5jaGVkVHV0ID0gJHR1dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgLy8gICBoaXRSZXN1bHQuYW5pbWF0ZSh7XG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICBzY2FsZTogMS4yNVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBzZXR0aW5nczoge1xuICAgIC8vICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgLy8gICAgICAgZWFzaW5nOiBcImVhc2VPdXRcIixcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG4gICAgLy8gfVxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgICB3aW5kb3cua2FuLnBpbmNoZWRUdXQgPSBudWxsO1xuICAgIGNvbnNvbGUubG9nKCdoaXQgbm8gaXRlbScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBpbmNoTW92ZShldmVudCkge1xuICBjb25zb2xlLmxvZygncGluY2hNb3ZlJyk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG4gIGxldCAkcGluY2hlZFR1dCA9IHdpbmRvdy5rYW4ucGluY2hlZFR1dDtcblxuICBpZiAoISFwaW5jaGVkR3JvdXApIHtcbiAgICBsZXQgY3VycmVudFNjYWxlID0gZXZlbnQuc2NhbGU7XG4gICAgbGV0IHNjYWxlRGVsdGE7XG5cbiAgICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dEJ5TmFtZSgncGluY2gnKTtcblxuICAgIGlmIChwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIDwgbWluU2hhcGVTaXplIHx8IHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0IDwgbWluU2hhcGVTaXplKSB7XG4gICAgICAvLyBvbmx5IGFsbG93IGEgc2hhcGUgdG8gc2NhbGUgZG93biBpZiBpdCBpcyBsYXJnZXIgdGhhbiB0aGUgbWluaW11bSBzaXplXG4gICAgICBzY2FsZURlbHRhID0gMS4xO1xuICAgIH0gZWxzZSBpZiAocGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCA+PSBwYXBlci52aWV3LnZpZXdTaXplLndpZHRoIHx8XG4gICAgICAgIHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0ID49IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0KSB7XG4gICAgICAvLyBvbmx5IGFsbG93IHNoYXBlIHRvIHNjYWxlIHVwIGlmIGl0IGZpdHMgaW4gdGhlIHZpZXdwb3J0XG4gICAgICBzY2FsZURlbHRhID0gMC45O1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZURlbHRhID0gY3VycmVudFNjYWxlIC8gd2luZG93Lmthbi5sYXN0U2NhbGU7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5sYXN0U2NhbGUgPSBjdXJyZW50U2NhbGU7XG5cbiAgICBsZXQgY3VycmVudFJvdGF0aW9uID0gZXZlbnQucm90YXRpb247XG4gICAgbGV0IHJvdGF0aW9uRGVsdGEgPSBjdXJyZW50Um90YXRpb24gLSB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbjtcbiAgICB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbiA9IGN1cnJlbnRSb3RhdGlvbjtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBzY2FsaW5nIGJ5ICR7c2NhbGVEZWx0YX1gKTtcbiAgICAvLyBjb25zb2xlLmxvZyhgcm90YXRpbmcgYnkgJHtyb3RhdGlvbkRlbHRhfWApO1xuXG4gICAgY29uc3QgY2VudGVyUG9pbnQgPSBldmVudC5jZW50ZXI7XG4gICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uID0gY2VudGVyUG9pbnQ7XG4gICAgaWYgKCEhJHBpbmNoZWRUdXQpIHtcbiAgICAgIHR1dG9yaWFsLm1vdmVDb250ZXh0dWFsVHV0KCRwaW5jaGVkVHV0LCBjZW50ZXJQb2ludCk7XG4gICAgfVxuXG4gICAgaWYgKHNjYWxlRGVsdGEgIT09IDEpIHtcbiAgICAgIHBpbmNoZWRHcm91cC5zY2FsZShzY2FsZURlbHRhKTtcblxuICAgICAgLy8gY2hlY2sgaWYgc2NhbGluZyB3ZW50IGF3cnksIGNhbm5vdCBiZSB0b28gYmlnIG9yIHRvbyBzbWFsbFxuICAgICAgLy8gaHlwb3RlbnVzZSBtdXN0IGZpdCB3aXRoaW4gdmlldyBib3VuZHNcbiAgICAgIGNvbnN0IGh5cG90ID0gdXRpbC5oeXBvdChwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoLCBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCk7XG4gICAgICBjb25zdCB2aWV3SHlwb3QgPSB1dGlsLmh5cG90KHBhcGVyLnZpZXcudmlld1NpemUud2lkdGgsIHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0KVxuICAgICAgaWYgKGh5cG90ID49IHZpZXdIeXBvdCkge1xuICAgICAgICAvLyBzaGFwZSBpcyB0b28gYmlnLCBicmluZyBpdCBiYWNrIGRvd24gdG8gc2l6ZVxuICAgICAgICBzY2FsZURlbHRhID0gdmlld0h5cG90ICogbWF4U2NhbGVGYWN0b3IgLyBoeXBvdDtcbiAgICAgICAgcGluY2hlZEdyb3VwLnNjYWxlKHNjYWxlRGVsdGEpO1xuICAgICAgfSBlbHNlIGlmIChoeXBvdCA8PSBtaW5TaGFwZVNpemUpIHtcbiAgICAgICAgc2NhbGVEZWx0YSA9IG1pblNoYXBlU2l6ZSAvIGh5cG90O1xuICAgICAgICBwaW5jaGVkR3JvdXAuc2NhbGUoc2NhbGVEZWx0YSk7XG4gICAgICB9XG4gICAgfVxuICAgIHBpbmNoZWRHcm91cC5yb3RhdGUocm90YXRpb25EZWx0YSk7XG5cbiAgICBwaW5jaGVkR3JvdXAuZGF0YS5zY2FsZSAqPSBzY2FsZURlbHRhO1xuICAgIHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uICs9IHJvdGF0aW9uRGVsdGE7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGluY2hFbmQoZXZlbnQpIHtcbiAgY29uc29sZS5sb2coJ3BpbmNoZW5kJyk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgd2luZG93Lmthbi5sYXN0RXZlbnQgPSBldmVudDtcbiAgbGV0IHBpbmNoZWRHcm91cCA9IHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwO1xuICBsZXQgJHBpbmNoZWRUdXQgPSB3aW5kb3cua2FuLnBpbmNoZWRUdXQ7XG4gIGxldCBvcmlnaW5hbFBvc2l0aW9uID0gd2luZG93Lmthbi5vcmlnaW5hbFBvc2l0aW9uO1xuICBsZXQgb3JpZ2luYWxSb3RhdGlvbiA9IHdpbmRvdy5rYW4ub3JpZ2luYWxSb3RhdGlvbjtcbiAgbGV0IG9yaWdpbmFsU2NhbGUgPSB3aW5kb3cua2FuLm9yaWdpbmFsU2NhbGU7XG5cbiAgaWYgKCEhcGluY2hlZEdyb3VwKSB7XG4gICAgcGluY2hlZEdyb3VwLmRhdGEuZnJlc2ggPSB0cnVlO1xuICAgIGxldCBtb3ZlID0ge1xuICAgICAgaWQ6IHBpbmNoZWRHcm91cC5pZCxcbiAgICAgIHR5cGU6ICd0cmFuc2Zvcm0nXG4gICAgfTtcbiAgICBpZiAocGluY2hlZEdyb3VwLnBvc2l0aW9uICE9IG9yaWdpbmFsUG9zaXRpb24pIHtcbiAgICAgIG1vdmUucG9zaXRpb24gPSBvcmlnaW5hbFBvc2l0aW9uO1xuICAgIH1cblxuICAgIGlmIChwaW5jaGVkR3JvdXAuZGF0YS5yb3RhdGlvbiAhPSBvcmlnaW5hbFJvdGF0aW9uKSB7XG4gICAgICBtb3ZlLnJvdGF0aW9uID0gb3JpZ2luYWxSb3RhdGlvbiAtIHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uO1xuICAgIH1cblxuICAgIGlmIChwaW5jaGVkR3JvdXAuZGF0YS5zY2FsZSAhPSBvcmlnaW5hbFNjYWxlKSB7XG4gICAgICBtb3ZlLnNjYWxlID0gb3JpZ2luYWxTY2FsZSAvIHBpbmNoZWRHcm91cC5kYXRhLnNjYWxlO1xuICAgIH1cblxuICAgIGlmIChwaW5jaGVkR3JvdXAuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBwaW5jaGVkR3JvdXAuX25hbWVkQ2hpbGRyZW4uc2hhcGVQYXRoICYmIHBpbmNoZWRHcm91cC5fbmFtZWRDaGlsZHJlbi5zaGFwZVBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgLy8gdXBkYXRlIHNoYXBlUGF0aCBzb3VuZCBvYmplY3QgaWYgcG9zc2libGVcbiAgICAgIHNvdW5kLnJlbW92ZVNoYXBlRnJvbUNvbXBvc2l0aW9uKHBpbmNoZWRHcm91cCk7IC8vIHNvdW5kIGlzIG5vdyB3cm9uZ1xuXG4gICAgICBsZXQgc2hhcGVQYXRoID0gcGluY2hlZEdyb3VwLl9uYW1lZENoaWxkcmVuLnNoYXBlUGF0aFswXTtcbiAgICAgIGxldCBzaGFwZVNvdW5kT2JqID0gc291bmQuZ2V0U2hhcGVTb3VuZE9iaihzaGFwZVBhdGgpO1xuICAgICAgd2luZG93Lmthbi5jb21wb3NpdGlvbi5wdXNoKHNoYXBlU291bmRPYmopO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4ubW92ZXMucHVzaChtb3ZlKTtcblxuICAgIGlmIChNYXRoLmFicyhldmVudC52ZWxvY2l0eSkgPiAxKSB7XG4gICAgICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dEJ5TmFtZSgnc3dpcGUnKTtcblxuICAgICAgLy8gaGlkZSBhbnkgY29ubmVjdGVkIHR1dHNcbiAgICAgIGlmICghISRwaW5jaGVkVHV0KSB7XG4gICAgICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0KCRwaW5jaGVkVHV0KTtcbiAgICAgIH1cbiAgICAgIC8vIGRpc3Bvc2Ugb2YgZ3JvdXAgb2Zmc2NyZWVuXG4gICAgICBpZiAoY29uZmlnLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgICBzaGFwZS5kZXN0cm95R3JvdXBQb3BzKHBpbmNoZWRHcm91cCk7XG4gICAgICAgIHBpbmNoZWRHcm91cC5kYXRhLmZyZXNoID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHBpbmNoZWRHcm91cC5kYXRhLnRocm93biA9IHRydWU7XG4gICAgICB0aHJvd1BpbmNoZWRHcm91cCgpO1xuICAgIH1cblxuICAgIC8vIGlmIChjb25maWcucnVuQW5pbWF0aW9ucykge1xuICAgIC8vICAgcGluY2hlZEdyb3VwLmFuaW1hdGUoe1xuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgc2NhbGU6IDAuOFxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBzZXR0aW5nczoge1xuICAgIC8vICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgLy8gICAgICAgZWFzaW5nOiBcImVhc2VPdXRcIixcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG4gICAgLy8gfVxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgfVxuXG4gIC8vIGlmIGFuIG92ZXJsYXkgd2FzIGludGVycnVwdGVkLCBvcGVuIGl0IHVwIG5vd1xuICBpZiAod2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5ICE9PSBudWxsKSB7XG4gICAgbGV0IHNjaGVkdWxlZE92ZXJsYXkgPSB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXk7XG4gICAgd2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5ID0gbnVsbDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KHNjaGVkdWxlZE92ZXJsYXkpO1xuICAgIH0sIHRpbWluZy5vdmVybGF5RGVsYXkpO1xuICB9XG5cbiAgd2luZG93Lmthbi5waW5jaGluZyA9IGZhbHNlO1xuXG4gIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgc2hhcGUudXBkYXRlUG9wcygpO1xuICB9XG5cbiAgY29uc29sZS5sb2coJ3BpbmNoIGRvbmUnKTtcbiAgLy8gaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogZmFsc2UgfSk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCd0b3VjaCBlbmFibGVkJyk7XG4gICAgaGFtbWVyQ2FudmFzLm9uKCdwaW5jaHN0YXJ0JywgcGluY2hTdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcbiAgICAvLyBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiB0cnVlIH0pO1xuICAgIC8vIGhhbW1lckNhbnZhcy5vbigncGluY2hzdGFydCcsIHBpbmNoU3RhcnQpO1xuICAgIC8vIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCk7XG4gICAgLy8gZW5hYmxlVGFwRXZlbnRzKCk7XG4gICAgLy8gd2luZG93Lmthbi5waW5jaGluZyA9IGZhbHNlO1xuICAgIC8vIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgfSwgdGltaW5nLmlucHV0RGVsYXkpO1xufVxuXG5mdW5jdGlvbiBwaW5jaENhbmNlbChldmVudCkge1xuICAvLyBjb25zb2xlLmxvZyhldmVudCk7XG4gIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBjb25zb2xlLmxvZygncGluY2hjYW5jZWwnKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiB0cnVlIH0pO1xuICBoYW1tZXJDYW52YXMub24oJ3BpbmNoc3RhcnQnLCBwaW5jaFN0YXJ0KTtcbiAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgZW5hYmxlVGFwRXZlbnRzKCk7XG5cbiAgd2luZG93Lmthbi5waW5jaGluZyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0aHJvd1BpbmNoZWRHcm91cCgpIHtcblxuICBjb25zdCB2ZWxvY2l0eU11bHRpcGxpZXIgPSAyNTtcbiAgY29uc3QgbGFzdEV2ZW50ID0gd2luZG93Lmthbi5sYXN0RXZlbnQ7XG4gIGNvbnN0IHZpZXdXaWR0aCA9IHBhcGVyLnZpZXcudmlld1NpemUud2lkdGg7XG4gIGNvbnN0IHZpZXdIZWlnaHQgPSBwYXBlci52aWV3LnZpZXdTaXplLmhlaWdodDtcbiAgbGV0IHBpbmNoZWRHcm91cCA9IHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwO1xuXG4gIGlmIChwaW5jaGVkR3JvdXAgPT09IG51bGwgfHwgKHBpbmNoZWRHcm91cC5kYXRhICYmIHBpbmNoZWRHcm91cC5kYXRhLnRocm93biA9PT0gZmFsc2UpKSByZXR1cm47XG4gIGlmIChwaW5jaGVkR3JvdXAucG9zaXRpb24ueCA8PSAwIC0gcGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCB8fFxuICAgICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uLnggPj0gdmlld1dpZHRoICsgcGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCB8fFxuICAgICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uLnkgPD0gMCAtIHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0IHx8XG4gICAgICBwaW5jaGVkR3JvdXAucG9zaXRpb24ueSA+PSB2aWV3SGVpZ2h0ICsgcGluY2hlZEdyb3VwLmJvdW5kcy5oZWlnaHQpIHtcbiAgICAgICAgcGluY2hlZEdyb3VwLmRhdGEub2ZmU2NyZWVuID0gdHJ1ZTtcbiAgICAgICAgcGluY2hlZEdyb3VwLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgc291bmQucmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24ocGluY2hlZEdyb3VwKTtcbiAgICAgICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBudWxsO1xuICAgIHJldHVybjtcbiAgfVxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhyb3dQaW5jaGVkR3JvdXApO1xuICBjb25zdCBuZXdYID0gcGluY2hlZEdyb3VwLnBvc2l0aW9uLnggKyBsYXN0RXZlbnQudmVsb2NpdHlYICogdmVsb2NpdHlNdWx0aXBsaWVyO1xuICBjb25zdCBuZXdZID0gcGluY2hlZEdyb3VwLnBvc2l0aW9uLnkgKyBsYXN0RXZlbnQudmVsb2NpdHlZICogdmVsb2NpdHlNdWx0aXBsaWVyO1xuICBjb25zdCBuZXdQb3MgPSBuZXcgUG9pbnQobmV3WCwgbmV3WSk7XG4gIHBpbmNoZWRHcm91cC5wb3NpdGlvbiA9IG5ld1Bvcztcbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSB7XG4gIGlmICghZXZlbnQpIHJldHVybiBmYWxzZTtcbiAgaWYgKGV2ZW50LnRhcmdldCAhPSB1aS5jYW52YXMpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG5cbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IGNvbnRleHR1YWxUdXRzID0gY29uZmlnLmNvbnRleHR1YWxUdXRzO1xuY29uc3QgdHV0QXJyb3dIZWlnaHQgPSAxNjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1dEJ5TmFtZSh0dXROYW1lKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dHVhbFR1dHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgdHV0T2JqID0gY29udGV4dHVhbFR1dHNbaV07XG5cbiAgICBpZiAodHV0T2JqLnR5cGUgPT09IHR1dE5hbWUpIHtcbiAgICAgIHJldHVybiB0dXRPYmouY29weTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFsbFR1dHNDb21wbGV0ZWQoKSB7XG4gIGNvbnN0IHR1dG9yaWFsQ29tcGxldGlvbk9iaiA9IHdpbmRvdy5rYW4udHV0b3JpYWxDb21wbGV0aW9uO1xuICBsZXQgY29tcGxldGlvbiA9IHRydWU7XG5cbiAgT2JqZWN0LmtleXModHV0b3JpYWxDb21wbGV0aW9uT2JqKS5mb3JFYWNoKChrZXksIHZhbCkgPT4ge1xuICAgIGNvbXBsZXRpb24gPSBjb21wbGV0aW9uICYmIHR1dG9yaWFsQ29tcGxldGlvbk9ialtrZXldO1xuICB9KTtcblxuICByZXR1cm4gY29tcGxldGlvbiA9PT0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbnRleHR1YWxUdXQodHV0TmFtZSkge1xuICBpZiAoISF3aW5kb3cua2FuLnNoYXBlUGF0aCAmJiB3aW5kb3cua2FuLnNoYXBlUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gICAgd2luZG93Lmthbi5zaGFwZXNTaW5jZVR1dCA9IDA7XG5cbiAgICBsZXQgc2hhcGVQYXRoID0gd2luZG93Lmthbi5zaGFwZVBhdGg7XG4gICAgbGV0IHNoYXBlQ2VudGVyID0gc2hhcGVQYXRoLmJvdW5kcy5jZW50ZXI7XG5cbiAgICBsZXQgdHV0Q29weSA9IGdldFR1dEJ5TmFtZSh0dXROYW1lKTtcblxuICAgIGlmICh0dXRDb3B5ICE9PSBudWxsKSB7XG4gICAgICBjb25zdCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke3R1dE5hbWV9J11gKTtcbiAgICAgIGlmICgkdHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdHV0UG9zID0gZ2V0VHV0UG9zaXRpb25Gcm9tQ2VudGVyKCR0dXQsIHNoYXBlQ2VudGVyKTtcbiAgICAgICAgJHR1dC5jc3Moe3RvcDogYCR7dHV0UG9zLnl9cHhgLCBsZWZ0OiBgJHt0dXRQb3MueH1weGAsIHZpc2liaWxpdHk6ICd2aXNpYmxlJ30pO1xuICAgICAgICAkdHV0LmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUNvbnRleHR1YWxUdXQoJHR1dCkge1xuICAkdHV0LmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKHR1dE5hbWUpIHtcbiAgY29uc3QgJHR1dCA9ICQoYC50dXRbZGF0YS10dXQtdHlwZT0nJHt0dXROYW1lfSddYCk7XG4gIGhpZGVDb250ZXh0dWFsVHV0KCR0dXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUNvbnRleHR1YWxUdXRzKCkge1xuICBjb25zdCAkdHV0cyA9ICQoJy5jb250ZXh0dWFsLXR1dHMgLnR1dCcpO1xuICAkdHV0cy5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldENvbnRleHR1YWxUdXRzKCkge1xuICBoaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgd2luZG93Lmthbi50dXRvcmlhbENvbXBsZXRpb24gPSB7XG4gICAgXCJmaWxsXCI6IGZhbHNlLFxuICAgIFwicGluY2hcIjogZmFsc2UsXG4gICAgXCJzd2lwZVwiOiBmYWxzZVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW92ZUNvbnRleHR1YWxUdXQoJHR1dCwgY2VudGVyUG9pbnQpIHtcbiAgbGV0IHR1dFBvcyA9IGdldFR1dFBvc2l0aW9uRnJvbUNlbnRlcigkdHV0LCBjZW50ZXJQb2ludCk7XG4gICR0dXQuY3NzKHt0b3A6IGAke3R1dFBvcy55fXB4YCwgbGVmdDogYCR7dHV0UG9zLnh9cHhgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXRQb3NpdGlvbkZyb21DZW50ZXIoJHR1dCwgY2VudGVyUG9pbnQpIHtcbiAgY29uc3QgdHV0V2lkdGggPSAkdHV0Lm91dGVyV2lkdGgoKTtcbiAgY29uc3QgdHV0SGVpZ2h0ID0gJHR1dC5vdXRlckhlaWdodCgpO1xuICBjb25zdCBsZWZ0UG9zID0gY2VudGVyUG9pbnQueCAtICh0dXRXaWR0aCAvIDIpO1xuICBjb25zdCB0b3BQb3MgPSBjZW50ZXJQb2ludC55IC0gdHV0SGVpZ2h0IC0gdHV0QXJyb3dIZWlnaHQ7XG4gIHJldHVybiBuZXcgUG9pbnQobGVmdFBvcywgdG9wUG9zKTtcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuY29uc3QgdGFwRXZlbnQgPSAnY2xpY2sgdGFwIHRvdWNoJztcblxuY29uc3QgcGxheWluZ0NsYXNzID0gc291bmQucGxheWluZ0NsYXNzO1xuY29uc3QgcGxheUVuYWJsZWRDbGFzcyA9IHNvdW5kLnBsYXlFbmFibGVkQ2xhc3M7XG5cbmNvbnN0ICRuZXdCdXR0b24gPSAkKCcuY29udHJvbHMgLm5ldycpO1xuY29uc3QgJHVuZG9CdXR0b24gPSAkKCcuY29udHJvbHMgLnVuZG8nKTtcbmNvbnN0ICRwbGF5QnV0dG9uID0gJCgnLmNvbnRyb2xzIC5wbGF5LXN0b3AnKTtcbmNvbnN0ICRzaGFyZUJ1dHRvbiA9ICQoJy5jb250cm9scyAuc2hhcmUnKTtcbmNvbnN0ICR0aXBzQnV0dG9uID0gJCgnLmNvbnRyb2xzIC50aXBzJyk7XG5cbmV4cG9ydCBjb25zdCBjYW52YXMgPSAkKCcjY2FudmFzJylbMF07XG5leHBvcnQgY29uc3QgdGlwc092ZXJsYXkgPSAkKCcub3ZlcmxheS50aXBzJylbMF07XG5cbmNvbnN0IGRpdGhlcmVkQ2xhc3MgPSAnZGl0aGVyZWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaW5pdExvZ29SZWZyZXNoKCk7XG4gIGluaXRDb2xvclBhbGV0dGUoKTtcbiAgaW5pdE5ld0J1dHRvbigpO1xuICBpbml0VW5kb0J1dHRvbigpO1xuICBpbml0UGxheUJ1dHRvbigpO1xuICBpbml0VGlwc0J1dHRvbigpO1xuICBpbml0U2hhcmVCdXR0b24oKTtcbiAgaW5pdENvbnRleHR1YWxUdXRzKCk7XG4gIHJlc2V0Q2FudmFzKCk7XG59XG5cbmZ1bmN0aW9uIHVuZGl0aGVyQWxsQnV0dG9ucygpIHtcbiAgJChgLmNvbnRyb2xzIC4ke2RpdGhlcmVkQ2xhc3N9YCkucmVtb3ZlQ2xhc3MoZGl0aGVyZWRDbGFzcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB1bmRpdGhlciA9IGZhbHNlKSB7XG4gIGlmIChidXR0b25OYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKCQuaXNBcnJheShidXR0b25OYW1lcykpIHtcbiAgICAgIGJ1dHRvbk5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRpdGhlckJ1dHRvbkJ5TmFtZShuYW1lLCB1bmRpdGhlcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZXMsIHVuZGl0aGVyKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcykge1xuICBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdGhlckJ1dHRvbkJ5TmFtZShidXR0b25OYW1lLCB1bmRpdGhlciA9IGZhbHNlKSB7XG4gIGxldCAkYnV0dG9uID0gJChgLmNvbnRyb2xzIC4ke2J1dHRvbk5hbWV9YCk7XG4gIC8vIGNvbnNvbGUubG9nKCRidXR0b24pO1xuICBpZiAoJGJ1dHRvbi5sZW5ndGggPiAwKSB7XG4gICAgaWYgKHVuZGl0aGVyICE9PSB0cnVlKSB7XG4gICAgICAkYnV0dG9uLmFkZENsYXNzKGRpdGhlcmVkQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkYnV0dG9uLnJlbW92ZUNsYXNzKGRpdGhlcmVkQ2xhc3MpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5kaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSkge1xuICBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcykge1xuICBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gbmV3UHJlc3NlZCgpIHtcbiAgY29uc29sZS5sb2coJ25ldyBwcmVzc2VkJyk7XG4gIHdpbmRvdy5rYW4uY29tcG9zaXRpb24gPSBbXTtcbiAgcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5yZW1vdmVDaGlsZHJlbigpO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgZGl0aGVyQnV0dG9uc0J5TmFtZShbJ3VuZG8nLCAnbmV3JywgJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy8gd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gZmFsc2U7XG4gIC8vIHR1dG9yaWFsLnJlc2V0Q29udGV4dHVhbFR1dHMoKTtcbn1cblxuZnVuY3Rpb24gdW5kb1ByZXNzZWQoKSB7XG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGNvbnN0IHRyYW5zcGFyZW50ID0gbmV3IENvbG9yKDAsIDApO1xuICBjb25zb2xlLmxvZygndW5kbyBwcmVzc2VkJyk7XG4gIGlmICghKHdpbmRvdy5rYW4ubW92ZXMubGVuZ3RoID4gMCkpIHtcbiAgICBjb25zb2xlLmxvZygnbm8gbW92ZXMgeWV0Jyk7XG4gICAgd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGxhc3RNb3ZlID0gd2luZG93Lmthbi5tb3Zlcy5wb3AoKTtcbiAgbGV0IGl0ZW0gPSBwcm9qZWN0LmdldEl0ZW0oe1xuICAgIGlkOiBsYXN0TW92ZS5pZFxuICB9KTtcblxuICBpZiAoaXRlbSkge1xuICAgIGl0ZW0udmlzaWJsZSA9IHRydWU7IC8vIG1ha2Ugc3VyZVxuICAgIHN3aXRjaChsYXN0TW92ZS50eXBlKSB7XG4gICAgICBjYXNlICduZXdHcm91cCc6XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmluZyBncm91cCcpO1xuICAgICAgICBzb3VuZC5yZW1vdmVTaGFwZUZyb21Db21wb3NpdGlvbihpdGVtKTtcbiAgICAgICAgaXRlbS5yZW1vdmUoKTtcblxuICAgICAgICBjb25zdCBudW1Hcm91cHMgPSB1dGlsLmdldE51bUdyb3VwcygpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbnVtR3JvdXBzJywgbnVtR3JvdXBzKTtcblxuICAgICAgICBpZiAobnVtR3JvdXBzIDw9IDApIHtcbiAgICAgICAgICBkaXRoZXJCdXR0b25zQnlOYW1lKFsndW5kbycsICduZXcnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobnVtR3JvdXBzIDwgMykge1xuICAgICAgICAgIGRpdGhlckJ1dHRvbnNCeU5hbWUoWydwbGF5LXN0b3AnLCAnc2hhcmUnXSk7XG4gICAgICAgICAgJGJvZHkucmVtb3ZlQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5kaXRoZXJCdXR0b25zQnlOYW1lKFsncGxheS1zdG9wJywgJ3NoYXJlJ10pO1xuICAgICAgICAgICRib2R5LmFkZENsYXNzKHNvdW5kLnBsYXlFbmFibGVkQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZmlsbENoYW5nZSc6XG4gICAgICAgIGlmIChsYXN0TW92ZS50cmFuc3BhcmVudCkge1xuICAgICAgICAgIGl0ZW0uZmlsbENvbG9yID0gbGFzdE1vdmUuZmlsbDtcbiAgICAgICAgICBpdGVtLnN0cm9rZUNvbG9yID0gbGFzdE1vdmUuZmlsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtLmZpbGxDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgICAgIGl0ZW0uc3Ryb2tlQ29sb3IgPSB0cmFuc3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgY2FzZSAndHJhbnNmb3JtJzpcbiAgICAgICAgaXRlbS5kYXRhLmZyZXNoID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhbGFzdE1vdmUucG9zaXRpb24pIHtcbiAgICAgICAgICBpdGVtLnBvc2l0aW9uID0gbGFzdE1vdmUucG9zaXRpb25cbiAgICAgICAgICBpZiAoaXRlbS5kYXRhICYmIGl0ZW0uZGF0YS50dXQgJiYgaXRlbS5kYXRhLnR1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpdGVtIGhhcyBjb25uZWN0ZWQgY29udGV4dHVhbCB0dXQsIG1vdmUgaXQgdG8gdGhlIHJpZ2h0IHBsYWNlXG4gICAgICAgICAgICBjb25zdCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke3R1dE5hbWV9J11gKTtcbiAgICAgICAgICAgIHR1dG9yaWFsLm1vdmVDb250ZXh0dWFsVHV0KCR0dXQsIGxhc3RNb3ZlLnBvc2l0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhbGFzdE1vdmUucm90YXRpb24pIHtcbiAgICAgICAgICBpdGVtLnJvdGF0aW9uID0gbGFzdE1vdmUucm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhbGFzdE1vdmUuc2NhbGUpIHtcbiAgICAgICAgICBpdGVtLnNjYWxlKGxhc3RNb3ZlLnNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHNoYXBlLnVwZGF0ZVBvcHMoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd1bmtub3duIGNhc2UnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2NvdWxkIG5vdCBmaW5kIG1hdGNoaW5nIGl0ZW0nKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwbGF5UHJlc3NlZCgpIHtcbiAgY29uc29sZS5sb2coJ3BsYXkgcHJlc3NlZCcpO1xuICAvLyBzb3VuZC5zdG9wQ29tcG9zaXRpb24oKTtcbiAgLy8gb3ZlcmxheXMuY2xvc2VBbmRSZXNldE92ZXJsYXlzKCk7XG4gIC8vIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuICBsZXQgcGxheWluZyA9IHdpbmRvdy5rYW4ucGxheWluZztcbiAgLy8gY29uc29sZS5sb2cocGxheWluZywgdXRpbC5nZXROdW1Hcm91cHMoKSA+IDIsICFwbGF5aW5nICYmIHV0aWwuZ2V0TnVtR3JvdXBzKCkgPiAyLCAkYm9keSk7XG5cbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQpO1xuICBpZiAoIXBsYXlpbmcgJiYgdXRpbC5nZXROdW1Hcm91cHMoKSA+IDIpIHtcbiAgICBjb25zb2xlLmxvZygnc3RhcnRpbmcgcGxheWluZycpO1xuICAgIHNvdW5kLnN0YXJ0UGxheWluZygpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdzdG9wcGluZyBwbGF5aW5nJyk7XG4gICAgc291bmQuc3RvcFBsYXlpbmcodHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGlwc1ByZXNzZWQoKSB7XG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIG92ZXJsYXlzLm9wZW5PdmVybGF5KCd0aXBzJyk7XG4gIGNvbnNvbGUubG9nKCd0aXBzIHByZXNzZWQnKTtcbn1cblxuZnVuY3Rpb24gc2hhcmVQcmVzc2VkKCkge1xuICBjb25zb2xlLmxvZygnc2hhcmUgcHJlc3NlZCcpO1xuICBzb3VuZC5zdG9wUGxheWluZygpO1xuICBpZiAoJGJvZHkuaGFzQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcykpIHtcbiAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnc2hhcmUnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0TG9nb1JlZnJlc2goKSB7XG4gICQoJy5tYWluLWxvZ28nKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0Q29sb3JQYWxldHRlKCkge1xuICBjb25zdCAkcGFsZXR0ZVdyYXAgPSAkKCd1bC5wYWxldHRlLWNvbG9ycycpO1xuICBjb25zdCAkcGFsZXR0ZUNvbG9ycyA9ICRwYWxldHRlV3JhcC5maW5kKCdsaScpO1xuICBjb25zdCBwYWxldHRlQ29sb3JTaXplID0gMjA7XG4gIGNvbnN0IHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSA9IDMwO1xuICBjb25zdCBwYWxldHRlU2VsZWN0ZWRDbGFzcyA9ICdwYWxldHRlLXNlbGVjdGVkJztcblxuICAvLyBob29rIHVwIGNsaWNrXG4gICRwYWxldHRlQ29sb3JzLm9uKCdjbGljayB0YXAgdG91Y2gnLCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIGxldCAkc3ZnID0gJCh0aGlzKS5maW5kKCdzdmcucGFsZXR0ZS1jb2xvcicpO1xuXG4gICAgICBpZiAoISRzdmcuaGFzQ2xhc3MocGFsZXR0ZVNlbGVjdGVkQ2xhc3MpKSB7XG4gICAgICAgICQoJy4nICsgcGFsZXR0ZVNlbGVjdGVkQ2xhc3MpXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKHBhbGV0dGVTZWxlY3RlZENsYXNzKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHBhbGV0dGVDb2xvclNpemUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhbGV0dGVDb2xvclNpemUpXG4gICAgICAgICAgLmZpbmQoJ3JlY3QnKVxuICAgICAgICAgIC5hdHRyKCdyeCcsIDApXG4gICAgICAgICAgLmF0dHIoJ3J5JywgMCk7XG5cbiAgICAgICAgJHN2Zy5hZGRDbGFzcyhwYWxldHRlU2VsZWN0ZWRDbGFzcylcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSlcbiAgICAgICAgICAuZmluZCgncmVjdCcpXG4gICAgICAgICAgLmF0dHIoJ3J4JywgcGFsZXR0ZVNlbGVjdGVkQ29sb3JTaXplIC8gMilcbiAgICAgICAgICAuYXR0cigncnknLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUgLyAyKVxuXG4gICAgICAgIHdpbmRvdy5rYW4uY3VycmVudENvbG9yID0gJHN2Zy5maW5kKCdyZWN0JykuYXR0cignZmlsbCcpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnJWNjb2xvcicsICdjb2xvcjpyZWQnLCBjb2xvci5nZXRDb2xvck5hbWUod2luZG93Lmthbi5jdXJyZW50Q29sb3IpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdE5ld0J1dHRvbigpIHtcbiAgJCgnLm1haW4tY29udHJvbHMgLm5ldycpLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIG5ld1ByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0VW5kb0J1dHRvbigpIHtcbiAgJCgnLm1haW4tY29udHJvbHMgLnVuZG8nKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkYm9keS5oYXNDbGFzcyhwbGF5aW5nQ2xhc3MpKSB7XG4gICAgICB1bmRvUHJlc3NlZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRQbGF5QnV0dG9uKCkge1xuICAkKCcubWFpbi1jb250cm9scyAucGxheS1zdG9wIC5wbGF5Jykub24odGFwRXZlbnQsIHNvdW5kLnN0YXJ0UGxheWluZyk7XG4gICQoJy5tYWluLWNvbnRyb2xzIC5wbGF5LXN0b3AgLnN0b3AnKS5vbih0YXBFdmVudCwgc291bmQuc3RvcFBsYXlpbmcpO1xufVxuXG5mdW5jdGlvbiBpbml0VGlwc0J1dHRvbigpIHtcbiAgJCgnLmNvbnRyb2xzIC50aXBzJykub24odGFwRXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgIGlmICghJGJvZHkuaGFzQ2xhc3MocGxheWluZ0NsYXNzKSkge1xuICAgICAgdGlwc1ByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0U2hhcmVCdXR0b24oKSB7XG4gICQoJy5jb250cm9scyAuc2hhcmUnKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkYm9keS5oYXNDbGFzcyhwbGF5aW5nQ2xhc3MpKSB7XG4gICAgICBzaGFyZVByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0Q29udGV4dHVhbFR1dHMoKSB7XG4gIGNvbnN0ICR0dXRzID0gJCgnLmNvbnRleHR1YWwtdHV0cyAudHV0Jyk7XG4gICR0dXRzLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldENhbnZhcygpIHtcbiAgcGFwZXIucHJvamVjdC5jbGVhcigpO1xuXG4gIC8vIGFkZCByYW5kb20gYmFja2dyb3VuZFxuICBwYXBlci5wcm9qZWN0LmFjdGl2ZUxheWVyLm5hbWUgPSAnYmFja2dyb3VuZCc7XG4gIGNvbnN0IG51bUNhbnZhc3NlcyA9IDEwO1xuICBjb25zdCByYW5kb21DYW52YXNJbmRleCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChudW1DYW52YXNzZXMgLSAxKSkgKyAxOyAvLyBbMSwgbnVtQ2FudmFzc2VzXVxuICBjb25zdCBjYW52YXNCZyA9IG5ldyBSYXN0ZXIoYGNhbnZhcy0ke3JhbmRvbUNhbnZhc0luZGV4fWApO1xuICBjYW52YXNCZy5uYW1lID0gJ2NhbnZhc0JnJztcbiAgY2FudmFzQmcucG9zaXRpb24gPSBwYXBlci52aWV3LmNlbnRlcjtcblxuICAvLyBhZGQgY2FudmFzIGxheWVyXG4gIGNvbnN0IHNjYWxlRmFjdG9ySG9yaXpvbnRhbCA9IHBhcGVyLnZpZXcudmlld1NpemUud2lkdGggLyBjYW52YXNCZy5zaXplLndpZHRoO1xuICBjb25zdCBzY2FsZUZhY3RvclZlcnRpY2FsID0gcGFwZXIudmlldy52aWV3U2l6ZS5oZWlnaHQgLyBjYW52YXNCZy5zaXplLmhlaWdodDtcbiAgY2FudmFzQmcuc2NhbGUoTWF0aC5tYXgoc2NhbGVGYWN0b3JIb3Jpem9udGFsLCBzY2FsZUZhY3RvclZlcnRpY2FsKSk7XG4gIGxldCBsYXllciA9IG5ldyBMYXllcigpOyAvLyBpbml0IG5ldyBsYXllciB0aGF0IGFsbCBvdGhlciBzaGFwZXMgd2lsbCBiZSBkcmF3biB1cG9uXG4gIHBhcGVyLnByb2plY3QuYWN0aXZlTGF5ZXIubmFtZSA9ICdjYW52YXMnO1xufVxuIiwiY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuLy8gQ29udmVydHMgZnJvbSBkZWdyZWVzIHRvIHJhZGlhbnMuXG5leHBvcnQgZnVuY3Rpb24gcmFkKGRlZ3JlZXMpIHtcbiAgcmV0dXJuIGRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwO1xufTtcblxuLy8gQ29udmVydHMgZnJvbSByYWRpYW5zIHRvIGRlZ3JlZXMuXG5leHBvcnQgZnVuY3Rpb24gZGVnKHJhZGlhbnMpIHtcbiAgcmV0dXJuIHJhZGlhbnMgKiAxODAgLyBNYXRoLlBJO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGh5cG90KGEsIGIpIHtcbiAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLCAyKSArIE1hdGgucG93KGIsIDIpKTsgLy8gcHl0aGFnb3JlYW4hXG59XG5cbi8vIHJldHVybnMgYWJzb2x1dGUgdmFsdWUgb2YgdGhlIGRlbHRhIG9mIHR3byBhbmdsZXMgaW4gcmFkaWFuc1xuZXhwb3J0IGZ1bmN0aW9uIGFuZ2xlRGVsdGEoeCwgeSkge1xuICByZXR1cm4gTWF0aC5hYnMoTWF0aC5hdGFuMihNYXRoLnNpbih5IC0geCksIE1hdGguY29zKHkgLSB4KSkpOztcbn1cblxuLy8gZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG5leHBvcnQgZnVuY3Rpb24gZGVsdGEocDEsIHAyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3cocDEueCAtIHAyLngsIDIpICsgTWF0aC5wb3cocDEueSAtIHAyLnksIDIpKTsgLy8gcHl0aGFnb3JlYW4hXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbEdyb3VwcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJ1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFueVNoYXBlc09uQ2FudmFzKCkge1xuICBjb25zdCBncm91cHMgPSBnZXRBbGxHcm91cHMoKTtcbiAgcmV0dXJuIGdyb3Vwcy5sZW5ndGggPiAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtR3JvdXBzKCkge1xuICBjb25zdCBncm91cHMgPSBnZXRBbGxHcm91cHMoKTtcbiAgLy8gY29uc29sZS5sb2coJ251bWdyb3VwcycsIGdyb3Vwcy5sZW5ndGgpO1xuICByZXR1cm4gZ3JvdXBzLmxlbmd0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyZXNoR3JvdXBzKCkge1xuICByZXR1cm4gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5saW5lID09PSBmYWxzZSAmJiBlbC5kYXRhLmZyZXNoID09PSB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsUG9wcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5wb3AgPT09IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckdyb3VwUG9wcyhncm91cCkge1xuICBjb25zdCBwb3BzID0gZ2V0R3JvdXBQb3BzKGdyb3VwKTtcbiAgcG9wcy5mb3JFYWNoKChwb3ApID0+IHBvcC5yZW1vdmUoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcm91cFBvcHMoZ3JvdXApIHtcbiAgY29uc29sZS5sb2coJ2dyb3VwIHBvcCBncm91cCcsIGdyb3VwLmlkLCBncm91cCk7XG4gIGxldCByZXR1cm5Qb3BzID0gW107XG5cbiAgaWYgKGdyb3VwLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBncm91cFBvcHMgPSBncm91cC5nZXRJdGVtcyh7XG4gICAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEucG9wID09PSB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuUG9wcyA9IHJldHVyblBvcHMuY29uY2F0KGdyb3VwUG9wcyk7XG4gIH1cblxuICBjb25zdCBpbnRlcnNlY3RpbmdQb3BzID0gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgbWF0Y2g6IChlbCkgPT4gZWwuZGF0YSAmJiBlbC5kYXRhLnBvcCA9PT0gdHJ1ZSAmJiBlbC5kYXRhLmludGVyc2VjdGluZ0dyb3VwID09PSBncm91cC5pZFxuICB9KTtcblxuICBpZiAoaW50ZXJzZWN0aW5nUG9wcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuUG9wcyA9IHJldHVyblBvcHMuY29uY2F0KGludGVyc2VjdGluZ1BvcHMpO1xuICB9XG5cbiAgcmV0dXJuIHJldHVyblBvcHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb3BDYW5kaWRhdGVzKCkge1xuICByZXR1cm4gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5saW5lID09PSBmYWxzZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNoYSgpIHtcbiAgJC5nZXQoJy9oYXNoJylcbiAgICAuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjdXJyZW50IGhhc2g6JywgcmVzKTtcbiAgICAgIHdpbmRvdy5rYW4uaGFzaCA9IHJlcztcbiAgICB9KVxuICAgIC5mYWlsKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGdldHRpbmcgaGFzaDonLCBlKTtcbiAgICB9KTtcbn1cblxuLy8gaHR0cDovL2Jsb2cuc291bHNlcnYubmV0L3VuZGVyc3RhbmRpbmctb2JqZWN0LWNsb25pbmctaW4tamF2YXNjcmlwdC1wYXJ0LWkvXG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0NvcHkoIG9yaWdpbmFsICkge1xuICAgIC8vIEZpcnN0IGNyZWF0ZSBhbiBlbXB0eSBvYmplY3Qgd2l0aFxuICAgIC8vIHNhbWUgcHJvdG90eXBlIG9mIG91ciBvcmlnaW5hbCBzb3VyY2VcbiAgICB2YXIgY2xvbmUgPSBPYmplY3QuY3JlYXRlKCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoIG9yaWdpbmFsICkgKSA7XG5cbiAgICB2YXIgaSwga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKCBvcmlnaW5hbCApIDtcblxuICAgIGZvciAoIGkgPSAwIDsgaSA8IGtleXMubGVuZ3RoIDsgaSArKyApIHtcbiAgICAgIC8vIGNvcHkgZWFjaCBwcm9wZXJ0eSBpbnRvIHRoZSBjbG9uZVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KCBjbG9uZSAsIGtleXNbIGkgXSAsXG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoIG9yaWdpbmFsICwga2V5c1sgaSBdIClcbiAgICAgICkgO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSA7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBtYWluID0gcmVxdWlyZSgnLi9tYWluJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCB1aSA9IHJlcXVpcmUoJy4vdWknKTtcbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbmNvbnN0IHRhcEV2ZW50ID0gJ2NsaWNrIHRhcCB0b3VjaCc7XG5cbmV4cG9ydCBjb25zdCB2aWRlb1BsYXlpbmdDbGFzcyA9ICd2aWRlby1wbGF5aW5nJztcblxuY29uc3QgJHZpZGVvV3JhcHBlciA9ICRib2R5LmZpbmQoJyN2aWRlby13cmFwJyk7XG5jb25zdCAkdmlkZW8gPSAkdmlkZW9XcmFwcGVyLmZpbmQoJ3ZpZGVvJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnRlclR1dG9yaWFsTW9kZSgpIHtcbiAgY29uc29sZS5sb2coJ2VudGVyaW5nIHR1dG9yaWFsIG1vZGUnKTtcbiAgcGxheVZpZGVvKCk7XG4gICRib2R5LmFkZENsYXNzKHZpZGVvUGxheWluZ0NsYXNzKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4uY29udGludWVDb3VudGRvd25JbnRlcnZhbCk7XG4gICRib2R5Lm9mZih0YXBFdmVudCwgdGltaW5nLnByZXZlbnRJbmFjdGl2aXR5VGltZW91dCk7XG4gICRib2R5Lm9uKHRhcEV2ZW50LCBleGl0VHV0b3JpYWxNb2RlKTtcbiAgbWFpbi5yZXNldFdpbmRvdygpO1xuICB1aS5yZXNldENhbnZhcygpO1xuICB3aW5kb3cua2FuLnJlZnJlc2hDaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICQuZ2V0KCcvaGFzaCcpXG4gICAgICAuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgaWYgKHJlcyAhPT0gd2luZG93Lmthbi5oYXNoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2RpZmZlcmVudCBoYXNoLCByZWxvYWRpbmcnKTtcbiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5mYWlsKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignZXJyb3IgZ2V0dGluZyBoYXNoOicsIGUpO1xuICAgICAgfSk7XG4gIH0sIHRpbWluZy5yZWZyZXNoQ2hlY2tEZWxheSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGl0VHV0b3JpYWxNb2RlKCkge1xuICBjb25zb2xlLmxvZygnZXhpdGluZyB0dXRvcmlhbCBtb2RlJyk7XG4gIHNvdW5kLnJlaW5pdFNoYXBlU291bmRzKClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4ucmVmcmVzaENoZWNrSW50ZXJ2YWwpO1xuICAgICAgSG93bGVyLm11dGUoZmFsc2UpO1xuICAgICAgcGF1c2VWaWRlbygpO1xuICAgICAgJGJvZHkub2ZmKHRhcEV2ZW50LCBleGl0VHV0b3JpYWxNb2RlKTtcbiAgICAgICRib2R5Lm9uKHRhcEV2ZW50LCB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKHZpZGVvUGxheWluZ0NsYXNzKTtcbiAgICAgIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0KTtcbiAgICAgIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcblxuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ2ludHJvJyk7XG5cbiAgICAgIHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ2NvbnRpbnVlJyk7XG4gICAgICB9LCB0aW1pbmcuY29udGludWVJbmFjdGl2aXR5RGVsYXkpO1xuICAgIH0pXG4gIC5mYWlsKChlKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignZXJyb3IgaW5pdHRpbmcgc2hhcGUgc291bmRzOicsIGUpO1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7XG4gICR2aWRlby5nZXQoMCkucGF1c2UoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlWaWRlbygpIHtcbiAgJHZpZGVvLmdldCgwKS5wbGF5KCk7XG59XG4iXX0=\n"]}
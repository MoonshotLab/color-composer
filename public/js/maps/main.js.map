{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","runAnimations","pop","canvasId","maxShapes","palette","colors","colorNames","#20171C","#1E2A43","#28377D","#352747","#CA2E26","#9A2A1F","#DA6C26","#453121","#916A47","#DAAD27","#7F7D31","#2B5E2E","gradients","pops","colorSize","selectedColorSize","contextualTuts","type","copy","2","process","global","define","amd","window","self","Promise","_dereq_","any","promises","ret","SomePromiseArray","promise","setHowMany","setUnwrap","init","_SomePromiseArray","prototype","this","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","fn","receiver","arg","push","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","write","stack","exit","throwLater","arguments","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","shift","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","undefined","_setOnCancel","obj","_boundTo","_isBound","value","resolve","4","noConflict","bluebird","old","./promise","5","cr","Object","create","callerCache","getterCache","ensureMethod","methodName","message","classString","toString","TypeError","caller","apply","namedGetter","indexedGetter","index","Math","max","getGetter","canEvaluate","isIdentifier","args","slice","get","propertyName","getter","isIndex","maybeGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancel","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","cb","boundTo","predicateLoop","item","matchesPredicate","isObject","keys","getKeys","j","key","./es5","8","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","name","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","error","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","join","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","split","cleanStack","line","nodeFramePattern","test","lineMatches","match","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","config","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","charAt","stackFramesAsArray","replace","title","isSoft","console","formatStack","String","printWarning","log","fireRejectionEvent","localHandler","reason","localEventFired","formatNonError","str","ruselessToString","newStr","JSON","stringify","snip","maxChars","substr","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","result","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","env","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","toLowerCase","detail","cancelable","Event","document","createEvent","initCustomEvent","fireGlobalEvent","emit","method","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","inherits","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","err","indexOf","hasStackAfterThrow","isTTY","color","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","reduce","all","each","mapSeries","12","subError","nameProperty","defaultMessage","SubError","constructor","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","Array","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","set","has","hasOwnProperty","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","14","PromiseMap","map","filter","options","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","then","lastly","tap","tapCatch","handlerOrPredicate","len","catchInstances","./catch_filter","16","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","callback","totalResolved","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","wrapped","maybeWrapAsError","21","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","p","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","version","toFastProperties","b","c","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","Map","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","defaultSuffix","noCopyProps","copyDescriptors","isClass","25","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","extractEntry","size","forEach","entriesToMap","keyOffset","26","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","27","race","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","navigator","standalone","cordova","div","createElement","attributes","toggleScheduled","div2","o2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","ms","afterTimeout","timeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","Disposer","data","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","prefix","isError","ignore","from","to","hasEnvVariables","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","_process","exportName","setTimeoutContext","bindFn","invokeArrayArg","deprecate","deprecationMessage","inherit","properties","childP","baseP","_super","assign","boolOrFn","TYPE_FUNCTION","ifUndefined","val1","val2","addEventListeners","types","splitStr","addEventListener","removeEventListeners","removeEventListener","hasParent","parentNode","inStr","find","trim","inArray","findByKey","toArray","uniqueArray","sort","results","prefixed","property","camelProp","toUpperCase","VENDOR_PREFIXES","uniqueId","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","Input","manager","inputTarget","domHandler","ev","enable","createInputInstance","Type","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","SUPPORT_ONLY_TOUCH","TouchInput","SUPPORT_TOUCH","TouchMouseInput","MouseInput","inputHandler","eventType","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","INPUT_START","isFinal","INPUT_END","INPUT_CANCEL","session","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","now","deltaTime","angle","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","y","abs","scale","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offset","offsetDelta","prevDelta","velocity","velocityX","velocityY","direction","lastInterval","COMPUTE_INTERVAL","clientX","round","clientY","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","p1","p2","PROPS_XY","sqrt","atan2","PI","start","end","PROPS_CLIENT_XY","evEl","MOUSE_ELEMENT_EVENTS","evWin","MOUSE_WINDOW_EVENTS","pressed","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","SingleTouchInput","evTarget","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","started","normalizeSingleTouches","touches","changed","changedTouches","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","INPUT_MOVE","identifier","targetTouches","changedTargetTouches","touch","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","DEDUP_TIMEOUT","isSyntheticEvent","dx","dy","DEDUP_DISTANCE","TouchAction","cleanTouchActions","actions","TOUCH_ACTION_NONE","hasPanX","TOUCH_ACTION_PAN_X","hasPanY","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_AUTO","getTouchActionProps","NATIVE_TOUCH_ACTION","touchMap","cssSupports","CSS","supports","Recognizer","defaults","id","state","STATE_POSSIBLE","simultaneous","requireFail","stateStr","STATE_CANCELLED","STATE_ENDED","STATE_CHANGED","STATE_BEGAN","directionStr","getRecognizerByNameIfManager","otherRecognizer","recognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","recognizers","preset","Manager","handlers","oldCssProps","touchAction","toggleCssProps","add","recognizeWith","requireFailure","style","cssProps","triggerDomEvent","gestureEvent","initEvent","gesture","TEST_ELEMENT","Date","output","source","nextKey","extend","dest","merge","MOBILE_REGEX","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","TOUCH_INPUT_MAP","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_MAP","compute","update","getTouchAction","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_RECOGNIZED","STATE_FAILED","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","reset","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","stop","force","stopped","curRecognizer","existing","remove","on","events","off","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","HowlerGlobal","Howler","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","mobileAutoEnable","_setup","volume","vol","parseFloat","setupAudioContext","gain","_webAudio","ids","_getSoundIds","sound","_soundById","_node","mute","muted","unload","close","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","checkOpera","isOldOpera","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_enableMobileAudio","isMobile","maxTouchPoints","msMaxTouchPoints","_mobileEnabled","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","createBufferSource","buffer","connect","destination","noteOn","onended","suspend","_sounds","_paused","_suspendTimer","_resumeAfterSuspend","_autoResume","resume","_emit","Howl","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_state","_endTimers","_onend","onend","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onresume","action","play","load","url","exec","location","protocol","Sound","loadBuffer","num","_ended","_id","_inactiveSound","seek","_seek","duration","_start","_stop","playWebAudio","_refreshBuffer","setValueAtTime","currentTime","_playStart","bufferSource","noteGrainOn","Infinity","isRunning","once","_clearTimer","playHtml5","playbackRate","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","fade","diff","dir","steps","stepLen","ceil","linearRampToValueAtTime","_interval","setInterval","soundId","min","clearInterval","cancelScheduledValues","loopStart","loopEnd","realTime","playing","rateSeek","sounds","_errorFn","_loadFn","remCache","cache","_loadQueue","task","_drain","cnt","_panner","howl","random","createGain","createGainNode","paused","_errorListener","_loadListener","__default","loadSound","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","responseType","status","response","onerror","safeXhrSend","send","arraybuffer","AudioContext","webkitAudioContext","iOS","platform","appVersion","safari","_pos","_orientation","stereo","pan","pos","z","setPosition","orientation","xUp","yUp","zUp","or","setOrientation","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_panningModel","_refDistance","_rolloffFactor","pa","panner","createPanner","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","noop","browser","argv","addListener","removeListener","removeAllListeners","binding","cwd","chdir","umask","RecordRTC","mediaStream","startRecording","disableLogs","mediaRecorder","clearRecordedData","record","recordingDuration","handleRecordingDuration","initRecorder","initCallback","Recorder","GetRecorderType","stopRecording","__blob","recordRTC","blob","URL","createObjectURL","bytesToSize","autoWriteToDisk","getDataURL","dataURL","parameter","DiskStorage","Store","WARNING","pauseRecording","resumeRecording","readFile","_blob","postMessage","FileReaderSync","readAsDataURL","_mediaRecorder","processInWebWorker","_function","Blob","worker","Worker","revokeObjectURL","mozGetUserMedia","reader","FileReader","webWorker","onmessage","onRecordingStopped","RecordRTCConfiguration","returnObject","setRecordingDuration","milliseconds","getBlob","toURL","save","invokeSaveAsDialog","getFromDisk","setAdvertisementArray","arrayOfWebPImages","advertisement","image","bufferSize","view","recorderType","WhammyRecorder","CanvasRecorder","GifRecorder","StereoAudioRecorder","MediaStreamRecorder","getAudioTracks","getVideoTracks","MediaRecorder","mimeType","bitsPerSecond","recorder","isChrome","isEdge","isOpera","isMediaRecorderCompatible","isTypeSupported","MultiStreamRecorder","MRecordRTC","addStream","_mediaStream","mediaType","audio","video","gif","audioRecorder","numberOfAudioChannels","newStream","videoTrack","MediaStream","addTrack","videoRecorder","canvas","frameInterval","gifRecorder","frameRate","quality","blobURL","callback00","webkitURL","_audioDataURL","_videoDataURL","writeToDisk","bytes","k","sizes","floor","pow","toPrecision","file","fileExtension","splitted","fileFullName","msSaveOrOpenBlob","msSaveBlob","hyperlink","href","download","onclick","body","documentElement","removeChild","appendChild","evt","MouseEvent","bubbles","opera","isFirefox","InstallTrigger","verOffset","ix","nAgt","fullVersion","majorVersion","substring","isMediaStreamActive","active","ended","stream","recorderHints","canRecordMimeType","ignoreMutedMedia","ondataavailable","dontFireOnDataAvailableEvent","recordingCallback","getNativeBlob","onAudioProcessStarted","looper","mergeLeftRightBuffers","mergeAudioBuffers","mergeBuffers","channelBuffer","rLength","Float64Array","lng","interleave","leftChannel","rightChannel","inputIndex","writeUTFBytes","string","setUint8","leftBuffers","rightBuffers","internalInterleavedLength","interleaved","interleavedLength","resultingBufferLength","ArrayBuffer","DataView","setUint32","setUint16","setInt16","workerURL","onAudioProcessDataAvailable","isPaused","jsAudioNode","recording","audioInput","isAudioProcessStarted","left","inputBuffer","getChannelData","leftchannel","Float32Array","right","rightchannel","recordingLength","byteLength","Storage","AudioContextConstructor","createMediaStreamSource","legalBufferValues","createJavaScriptNode","createScriptProcessor","onaudioprocess","htmlElement","cloneCanvas","newCanvas","getContext","width","height","drawImage","drawCanvasFrame","isPausedRecording","lastTime","getTime","nodeName","whammy","frames","isRecording","html2canvas","grabMouse","showMousePointer","onrendered","toDataURL","isCanvasSupportsStreamCapturing","_isChrome","webkitRTCPeerConnection","webkitGetUserMedia","chromeVersion","matchArray","globalCanvas","mediaStreamRecorder","HTMLCanvasElement","CanvasRenderingContext2D","canvasMediaStream","captureStream","mozCaptureStream","webkitCaptureStream","mdStream","getWebPImages","framesLength","frame","idx","framesRemaining","onEncodingCallback","webp","that","compile","Whammy","Video","drawFrames","isStopDrawing","asyncLoop","functionToLoop","dropBlackFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","localCanvas","context2d","resultFrames","checkUntilNotBlack","endCheckFrame","sampleColor","g","maxColorDifference","pixTolerance","frameTolerance","doNotCheckNext","matchPixCount","endPixCheck","maxPixCount","finishImage","Image","imageData","getImageData","pix","currentColor","colorDifference","HTMLVideoElement","cloneNode","srcObject","onloadedmetadata","_this","GIFEncoder","isHTMLObject","drawVideoFrame","lastAnimationFrame","requestAnimationFrame","lastFrameTime","onGifPreview","gifEncoder","addFrame","offsetWidth","offsetHeight","setRepeat","setDelay","setQuality","startTime","cancelAnimationFrame","endTime","bin","arrayOfMediaStreams","getMixedAudioStream","audioContext","audioSources","audioTracksLength","audioiDestination","createMediaStreamDestination","audioSource","getMixedVideoStream","getVideo","videos","capturedStream","drawVideosToCanvas","isStoppedRecording","videosLength","mixedVideoStream","mixedAudioStream","track","previewStream","clearRect","Fetch","_type","audioDataURL","videoDataURL","gifDataURL","audioBlob","videoBlob","gifBlob","browserFakeUserAgent","getUserMedia","hash","screen","webkitRequestAnimationFrame","mozRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","mozAudioContext","webkitMediaStream","getTracks","tracks","kind","WhammyVideo","whammyInWebWorker","ArrayToWebM","checkFrames","clusterMaxDuration","EBML","doubleToString","frameNumber","clusterTimecode","clusterFrames","clusterDuration","clusterCounter","cluster","getClusterData","generateEBML","block","makeSimpleBlock","discardable","invisible","keyframe","lacing","trackNum","timecode","numToBuffer","parts","reverse","strToBuffer","bitsToBuffer","bits","pad","json","ebml","zeroes","sizeToString","padded","out","fromCharCode","parseWebP","riff","VP8","RIFF","WEBP","frameStart","tmp","getStrLength","unpadded","parseRIFF","chunks","createObjectStore","dataBase","dataStoreName","putInDB","getFromStore","portionName","transaction","objectStore","onsuccess","db","put","indexedDB","dbVersion","dbName","request","onError","setVersion","onupgradeneeded","getPathColorName","path","hexColor","originalColor","getColorName","getRandomPop","getIndexedPopColor","transparent","Color","./../../config","root","factory","ShapeDetector","deg2Rad","Stroke","points","processStroke","patterns","_nbSamplePoints","nbSamplePoints","learn","_squareSize","_phi","_angleRange","_anglePrecision","_halfDiagonal","_origin","resample","setCentroid","rotateBy","indicativeAngle","scaleToSquare","translateToOrigin","localDistance","q","strokeLength","newPoints","point","cos","sin","box","minX","maxX","minY","maxY","distanceAtBestAngle","pattern","x1","f1","distanceAtAngle","x2","f2","strokePoints","patternPoints","defaultShapes","spot","patternName","score","stroke","bestDistance","bestPattern","bestScore","resetWindow","kan","composition","compositionInterval","compositionTimeout","soundTimeouts","lastEvent","interaction","moves","pinching","pinchedGroup","pinchedTut","pathData","shapePath","prevAngle","sides","side","corners","lastScale","lastRotation","originalPosition","tutorialCompletion","fill","pinch","swipe","inactivityTimeout","playPromptTimeout","userHasDrawnFirstShape","firstTimePlaying","shapesSinceTut","refreshCheckInterval","sha","scheduledOverlay","continueCountdownInterval","shapeSounds","ui","overlays","timing","$","setSha","reload","./overlays","./sound","./timing","./touch","./ui","./video","openOverlay","overlayName","allOverlays","includes","panning","preventInactivityTimeout","closeAndResetOverlays","tutorial","hideContextualTuts","$body","addClass","overlayActiveClass","tapEvent","openIntroOverlay","anyShapesOnCanvas","openPlayPromptOverlay","playPromptDelay","openSharePromptOverlay","openContinueOverlay","openTipsOverlay","openShareOverlay","resetContinueCountdown","html","continueInactivityDelay","$countdownNumWrap","enterTutorialMode","activateTipsCards","cardNavNext","$old","$new","$cardItems","first","$next","$third","slide","removeClass","updateCardCounter","cardsCount","cardInteractions","timeOfLastInteraction","closest","resetTips","$sharePhone","overlayOpenClasses","total","$footer","phoneNumberInputs","mask","$shareKeypad","phoneNumber","masked","randomCardGraphics","el","attr","initTips","initShare","hammerCanvas","$cardsWrap","overlay","./tutorial","destroyGroupPops","group","groupPopsBefore","getGroupPops","fillInGroupPopsById","groupId","paper","project","getItem","className","children","groupChild","toggleFill","interior","fillColor","strokeColor","cleanUpGroup","acceptableNames","updatePops","freshGroups","getFreshGroups","popCandidates","getPopCandidates","getAllPops","freshGroup","freshOuter","_namedChildren","bringToFront","otherGroup","otherGroupOuter","thisPop","intersect","popColor","popGroup","intersectingGroup","visible","closed","addChild","fresh","getOutlineGroup","truedShape","outerPath","Path","middlePath","lastAngle","firstTop","firstBottom","lastTop","lastBottom","Group","firstSegment","cumSize","avgSize","getPointAt","normal","getNormalAt","top","Point","bottom","insert","centerTop","centerBottom","flatten","simplify","selected","returnGroup","getTruedShape","pathClone","clone","completedPath","getCompletedPath","truedPath","strokeWidth","intersections","getIntersections","trimmedPath","getTrimmedPath","extendedPath","getExtendedPath","_intersections","_trimmedPath","replaceWith","getBruteExtendedPath","_intersections2","_trimmedPath2","getShapePrediction","prediction","shapeJSON","exportJSON","shapeData","processShapeData","shapePrediction","detector","closedShapes","randomPick","intersects","getIntegerPoint","stringifyPoint","parsePoint","pointStr","getClosestPointFromPathData","leastDistance","closestPoint","Base","datum","returnShape","jsonObj","parse","segments","segment","positionInfo","findInteriorCurves","interiorCurves","dividedPath","resolveCrossings","enclosedLoop","_enclosedLoop","thresholdDist","thresholdDistMultiplier","nextSegment","startAngle","inverseStartAngle","extendedStartPoint","lastSegment","penSegment","previous","endAngle","extendedEndPoint","firstPoint","lastPoint","unite","crossings","maxArea","maxChild","area","intersection","intersectionPoint","pathCrossings","subtract","_ret2","closedChildren","childClone","accumulator","_j","newPath","copyContent","copyAttributes","_typeof","hitTestGroupBounds","groups","getVisibleGroups","hitTestBounds","strokeBounds","isInside","cornerThresholdDeg","shapeNames","./color","./lib/shape-detector","rec","workerPath","canvasRecorder","asyncPlayCompositionOnce","exportWAV","drawCanvas","getElementById","recordrtc","asyncInitShapeSounds","reinitShapeSounds","getShapeSoundObj","viewWidth","viewSize","initShapeSounds","shape","colorName","quantizedSoundStartTime","quantizeLength","bounds","compositionLength","quantizedSoundDuration","soundObj","pathId","spriteName","startPlaying","hasClass","playEnabledClass","playingClass","startComposition","stopPlaying","stopComposition","asyncGetShapeSoundFromShapeName","shapeName","shapeSoundJSONPath","getJSON","resp","shapeSoundData","formatShapeSoundData","when","returnSounds","returnData","urls","smallestDuration","bpm","returnDuration","quantizePosition","position","smallestInterval","measures","returnPosition","asyncPlayShape","asyncPlayShapeSound","asyncPlayShapeAnimation","res","catch","animating","totalDuration","measureLength","animate","rotate","settings","easing","complete","removeShapeFromComposition","shapeGroup","getItems","clearSoundTimeouts","soundTimeout","playCompositionFirstTime","trimmedCompositionObj","getTrimmedCompositionObj","iterations","repeatComposition","playCompositionOnce","asyncPlayCompositionMultipleTimes","repeats","promisedRepeats","shapePromises","asyncPlayShapeWithDelay","playTime","trimmedComposition","getCompositionStartTime","modifiedSound","shallowCopy","beatLength","./shape","howler","pauseVideo","exitTutorialMode","drawInactivityDelay","inputDelay","refreshCheckDelay","overlayDelay","hammerTips","tipsOverlay","doubleTap","panStart","panMove","panEnd","pinchStart","pinchMove","pinchEnd","enablePanAndPinchEvents","enablePanEvents","enablePinchEvents","enableTapEvents","disableTapEvents","disablePanEvents","disablePinchEvents","pointer","hitResult","hitTest","hitOptions","eventTargetIsOnCanvas","hideContextualTutByName","stopPropagation","strokeCap","maxShapeLength","angleDelta","prevPoint","halfPointX","halfPointY","halfPoint","topX","topY","bottomX","bottomY","smooth","speed","tooLong","draw","move","minShapeSize","visibleGroups","firstGroup","removedGroup","shapeSize","centerPoint","rad","gradientSize","originX","originY","destinationX","destinationY","origin","gradient","stops","shapeSoundObj","outlineGroup","outline","outer","outlineCenter","middle","sendToBack","shapeMask","enclosedLoops","unditherButtonsByName","scaleFactor","allTutsCompleted","tutName","addContextualTut","tut","interacting","originalRotation","originalScale","thrown","$tut","$pinchedTut","currentScale","scaleDelta","currentRotation","rotationDelta","moveContextualTut","hypot","viewHypot","maxScaleFactor","hideContextualTut","throwPinchedGroup","velocityMultiplier","viewHeight","offScreen","newX","newY","newPos","tolerance","hammerjs","getTutByName","tutObj","tutorialCompletionObj","completion","shapeCenter","tutCopy","tutPos","getTutPositionFromCenter","css","visibility","$tuts","resetContextualTuts","tutWidth","outerWidth","tutHeight","outerHeight","leftPos","topPos","tutArrowHeight","initLogoRefresh","initColorPalette","initNewButton","initUndoButton","initPlayButton","initTipsButton","initShareButton","initContextualTuts","resetCanvas","ditherButtonsByName","buttonNames","undither","ditherButtonByName","buttonName","$button","ditheredClass","unditherButtonByName","newPressed","activeLayer","removeChildren","undoPressed","lastMove","clearGroupPops","numGroups","getNumGroups","tipsPressed","sharePressed","share","$paletteWrap","$paletteColors","paletteColorSize","paletteSelectedColorSize","paletteSelectedClass","$svg","clear","numCanvasses","randomCanvasIndex","canvasBg","Raster","scaleFactorHorizontal","scaleFactorVertical","Layer","./share","degrees","deg","radians","delta","toLocaleTimeString","getNumVisibleGroups","getAllGroups","returnPops","groupPops","intersectingPops","original","playVideo","videoPlayingClass","main","$video","$videoWrapper","./main"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvd,YAEAA,GAAQK,eAAgB,EACxBL,EAAQM,KAAM,EACdN,EAAQO,SAAW,SACnBP,EAAQQ,UAAY,GAEpBR,EAAQS,SACNC,QAAS,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAClIC,YACEC,UAAW,QACXC,UAAW,OACXC,UAAW,OACXC,UAAW,OACXC,UAAW,MACXC,UAAW,MACXC,UAAW,SACXC,UAAW,QACXC,UAAW,QACXC,UAAW,SACXC,UAAW,QACXC,UAAW,SAEbC,WACEZ,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,WACvBC,WAAY,UAAW,YAEzBE,MAAO,UAAW,UAAW,UAAW,UAAW,WACnDC,UAAW,GACXC,kBAAmB,IAGrB3B,EAAQ4B,iBACNC,KAAM,OACNC,KAAM,iIAEND,KAAM,QACNC,KAAM,+HAEND,KAAM,QACNC,KAAM,+JAGFC,GAAG,SAASrC,EAAQU,EAAOJ,IACjC,SAAWgC,EAAQC,IA6BlB,SAAS/C,GAAG,GAAG,gBAAiBc,IAAS,mBAAoBI,GAAOA,EAAOJ,QAAQd,QAAS,IAAG,kBAAmBgD,SAAQA,OAAOC,IAAID,UAAUhD,OAAO,CAAC,GAAIU,EAAE,oBAAoBwC,QAAOxC,EAAEwC,OAAO,mBAAoBH,GAAOrC,EAAEqC,EAAO,mBAAoBI,QAAOzC,EAAEyC,MAAMzC,EAAE0C,QAAQpD,MAAM,WAAW,GAAIgD,GAAO9B,EAAOJ,CAAQ,OAAO,SAAUd,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAAT8C,UAAqBA,OAAQ,KAAI/C,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAAT4C,UAAqBA,QAAgBhD,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAASoC,EAAQnC,EAAOJ,GAC5xB,YACAI,GAAOJ,QAAU,SAASsC,GAE1B,QAASE,GAAIC,GACT,GAAIC,GAAM,GAAIC,GAAiBF,GAC3BG,EAAUF,EAAIE,SAIlB,OAHAF,GAAIG,WAAW,GACfH,EAAII,YACJJ,EAAIK,OACGH,EAPX,GAAID,GAAmBL,EAAQU,iBAU/BV,GAAQE,IAAM,SAAUC,GACpB,MAAOD,GAAIC,IAGfH,EAAQW,UAAUT,IAAM,WACpB,MAAOA,GAAIU,aAKTnB,GAAG,SAASQ,EAAQnC,EAAOJ,GACjC,YAOA,SAASmD,KACLD,KAAKE,kBAAmB,EACxBF,KAAKG,aAAc,EACnBH,KAAKI,WAAa,GAAIC,GAAM,IAC5BL,KAAKM,aAAe,GAAID,GAAM,IAC9BL,KAAKO,oBAAqB,EAC1BP,KAAKQ,oBAAqB,CAC1B,IAAIrB,GAAOa,IACXA,MAAKS,YAAc,WACftB,EAAKuB,gBAETV,KAAKW,UAAYC,EAyDrB,QAASC,GAAiBC,EAAIC,EAAUC,GACpChB,KAAKI,WAAWa,KAAKH,EAAIC,EAAUC,GACnChB,KAAKkB,aAGT,QAASC,GAAYL,EAAIC,EAAUC,GAC/BhB,KAAKM,aAAaW,KAAKH,EAAIC,EAAUC,GACrChB,KAAKkB,aAGT,QAASE,GAAoB1B,GACzBM,KAAKM,aAAae,SAAS3B,GAC3BM,KAAKkB,aAtFT,GAAII,EACJ,KAAK,KAAM,IAAI3E,OAAW,MAAOX,GAAIsF,EAAiBtF,EACtD,GAAI4E,GAAWvB,EAAQ,cACnBgB,EAAQhB,EAAQ,WAChBkC,EAAOlC,EAAQ,SAgBnBY,GAAMF,UAAUyB,aAAe,SAASV,GACpC,GAAIW,GAAOzB,KAAKW,SAGhB,OAFAX,MAAKW,UAAYG,EACjBd,KAAKE,kBAAmB,EACjBuB,GAGXxB,EAAMF,UAAU2B,mBAAqB,WACjC,MAAO1B,MAAKE,kBAGhBD,EAAMF,UAAU4B,iBAAmB,WAC/B3B,KAAKQ,oBAAqB,GAG9BP,EAAMF,UAAU6B,6BAA+B,WACvCL,EAAKM,cACL7B,KAAKQ,oBAAqB,IAIlCP,EAAMF,UAAU+B,gBAAkB,WAC9B,MAAO9B,MAAKG,aAAeH,KAAKO,oBAIpCN,EAAMF,UAAUgC,WAAa,SAAS/F,EAAGgG,GACjCA,GACAlD,EAAQmD,OAAOC,MAAM,UAAYlG,YAAaW,OAAQX,EAAEmG,MAAQnG,GAC5D,MACJ8C,EAAQsD,KAAK,IAEbpC,KAAKqC,WAAWrG,IAIxBiE,EAAMF,UAAUsC,WAAa,SAASvB,EAAIE,GAKtC,GAJyB,IAArBsB,UAAUtF,SACVgE,EAAMF,EACNA,EAAK,WAAc,KAAME,KAEH,mBAAfuB,YACPA,WAAW,WACPzB,EAAGE,IACJ,OACA,KACHhB,KAAKW,UAAU,WACXG,EAAGE,KAET,MAAOhF,GACL,KAAM,IAAIW,OAAM,oEAmBnB4E,EAAKM,aAKN5B,EAAMF,UAAUyC,YAAc,SAAU1B,EAAIC,EAAUC,GAC9ChB,KAAKQ,mBACLK,EAAiB9D,KAAKiD,KAAMc,EAAIC,EAAUC,GAE1ChB,KAAKW,UAAU,WACX4B,WAAW,WACPzB,EAAG/D,KAAKgE,EAAUC,IACnB,QAKff,EAAMF,UAAU0C,OAAS,SAAU3B,EAAIC,EAAUC,GACzChB,KAAKQ,mBACLW,EAAYpE,KAAKiD,KAAMc,EAAIC,EAAUC,GAErChB,KAAKW,UAAU,WACXG,EAAG/D,KAAKgE,EAAUC,MAK9Bf,EAAMF,UAAU2C,eAAiB,SAAShD,GAClCM,KAAKQ,mBACLY,EAAoBrE,KAAKiD,KAAMN,GAE/BM,KAAKW,UAAU,WACXjB,EAAQiD,uBA/BpB1C,EAAMF,UAAUyC,YAAc3B,EAC9BZ,EAAMF,UAAU0C,OAAStB,EACzBlB,EAAMF,UAAU2C,eAAiBtB,GAmCrCnB,EAAMF,UAAU6C,YAAc,SAASC,GACnC,KAAOA,EAAM7F,SAAW,GAAG,CACvB,GAAI8D,GAAK+B,EAAMC,OACf,IAAkB,kBAAPhC,GAAX,CAIA,GAAIC,GAAW8B,EAAMC,QACjB9B,EAAM6B,EAAMC,OAChBhC,GAAG/D,KAAKgE,EAAUC,OALdF,GAAG6B,oBASf1C,EAAMF,UAAUW,aAAe,WAC3BV,KAAK4C,YAAY5C,KAAKM,cACtBN,KAAK+C,SACL/C,KAAKO,oBAAqB,EAC1BP,KAAK4C,YAAY5C,KAAKI,aAG1BH,EAAMF,UAAUmB,WAAa,WACpBlB,KAAKG,cACNH,KAAKG,aAAc,EACnBH,KAAKW,UAAUX,KAAKS,eAI5BR,EAAMF,UAAUgD,OAAS,WACrB/C,KAAKG,aAAc,GAGvBjD,EAAOJ,QAAUmD,EACjB/C,EAAOJ,QAAQwE,eAAiBA,IAE7B0B,UAAU,GAAGC,aAAa,GAAGC,SAAS,KAAKC,GAAG,SAAS9D,EAAQnC,EAAOJ,GACzE,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,EAAUC,EAAqBC,GAClE,GAAIC,IAAa,EACbC,EAAa,SAASC,EAAGzH,GACzBgE,KAAK0D,QAAQ1H,IAGb2H,EAAiB,SAAS3H,EAAG4H,GAC7BA,EAAQC,wBAAyB,EACjCD,EAAQE,eAAeC,MAAMP,EAAYA,EAAY,KAAMxD,KAAMhE,IAGjEgI,EAAkB,SAASC,EAASL,GACC,KAAd,SAAjB5D,KAAKkE,YACPlE,KAAKmE,iBAAiBP,EAAQQ,SAIlCC,EAAkB,SAASrI,EAAG4H,GACzBA,EAAQC,wBAAwB7D,KAAK0D,QAAQ1H,GAGtDoD,GAAQW,UAAUuE,KAAO,SAAUL,GAC1BV,IACDA,GAAa,EACbnE,EAAQW,UAAUwE,eAAiBjB,EAAMkB,wBACzCpF,EAAQW,UAAU0E,YAAcnB,EAAMoB,qBAE1C,IAAIC,GAAetB,EAAoBY,GACnCzE,EAAM,GAAIJ,GAAQgE,EACtB5D,GAAI+E,eAAevE,KAAM,EACzB,IAAIoE,GAASpE,KAAK4E,SAElB,IADApF,EAAIqF,YAAYF,GACZA,YAAwBvF,GAAS,CACjC,GAAIwE,IACAC,wBAAwB,EACxBnE,QAASF,EACT4E,OAAQA,EACRN,eAAgBa,EAEpBP,GAAOL,MAAMX,EAAUO,EAAgBmB,OAAWtF,EAAKoE,GACvDe,EAAaZ,MACTC,EAAiBK,EAAiBS,OAAWtF,EAAKoE,GACtDpE,EAAIuF,aAAaJ,OAEjBnF,GAAI2E,iBAAiBC,EAEzB,OAAO5E,IAGXJ,EAAQW,UAAU8E,YAAc,SAAUG,GAC1BF,SAARE,GACAhF,KAAKkE,UAA6B,QAAjBlE,KAAKkE,UACtBlE,KAAKiF,SAAWD,GAEhBhF,KAAKkE,UAAYlE,KAAKkE,WAAY,SAI1C9E,EAAQW,UAAUmF,SAAW,WACzB,MAAsC,YAAb,QAAjBlF,KAAKkE,YAGjB9E,EAAQkF,KAAO,SAAUL,EAASkB,GAC9B,MAAO/F,GAAQgG,QAAQD,GAAOb,KAAKL,UAIjCoB,GAAG,SAAShG,EAAQnC,EAAOJ,GACjC,YAGA,SAASwI,KACL,IAAUlG,UAAYmG,IAAUnG,QAAUoG,GAC1C,MAAOxJ,IACP,MAAOuJ,GALX,GAAIC,EACmB,oBAAZpG,WAAyBoG,EAAMpG,QAM1C,IAAImG,GAAWlG,EAAQ,cACvBkG,GAASD,WAAaA,EACtBpI,EAAOJ,QAAUyI,IAEdE,YAAY,KAAKC,GAAG,SAASrG,EAAQnC,EAAOJ,GAC/C,YACA,IAAI6I,GAAKC,OAAOC,MAChB,IAAIF,EAAI,CACJ,GAAIG,GAAcH,EAAG,MACjBI,EAAcJ,EAAG,KACrBG,GAAY,SAAWC,EAAY,SAAW,EAGlD7I,EAAOJ,QAAU,SAASsC,GA4D1B,QAAS4G,GAAahB,EAAKiB,GACvB,GAAInF,EAEJ,IADW,MAAPkE,IAAalE,EAAKkE,EAAIiB,IACR,kBAAPnF,GAAmB,CAC1B,GAAIoF,GAAU,UAAY3E,EAAK4E,YAAYnB,GAAO,mBAC9CzD,EAAK6E,SAASH,GAAc,GAChC,MAAM,IAAI7G,GAAQiH,UAAUH,GAEhC,MAAOpF,GAGX,QAASwF,GAAOtB,GACZ,GAAIiB,GAAajG,KAAK5C,MAClB0D,EAAKkF,EAAahB,EAAKiB,EAC3B,OAAOnF,GAAGyF,MAAMvB,EAAKhF,MAiBzB,QAASwG,GAAYxB,GACjB,MAAOA,GAAIhF,MAEf,QAASyG,GAAczB,GACnB,GAAI0B,IAAS1G,IAEb,OADI0G,GAAQ,IAAGA,EAAQC,KAAKC,IAAI,EAAGF,EAAQ1B,EAAIhI,SACxCgI,EAAI0B,GAhGf,GAKIG,GALAtF,EAAOlC,EAAQ,UACfyH,EAAcvF,EAAKuF,WACJvF,GAAKwF,YAyExB3H,GAAQW,UAAUhD,KAAO,SAAUkJ,GAC/B,GAAIe,MAAUC,MAAMlK,KAAKuF,UAAW,EAWpC,OADA0E,GAAK/F,KAAKgF,GACHjG,KAAK+D,MAAMuC,EAAQxB,OAAWA,OAAWkC,EAAMlC,SAW1D1F,EAAQW,UAAUmH,IAAM,SAAUC,GAC9B,GACIC,GADAC,EAAmC,gBAAjBF,EAEtB,IAAKE,EAQDD,EAASX,MAPT,IAAIK,EAAa,CACb,GAAIQ,GAAcT,EAAUM,EAC5BC,GAAyB,OAAhBE,EAAuBA,EAAcd,MAE9CY,GAASZ,CAKjB,OAAOxG,MAAK+D,MAAMqD,EAAQtC,OAAWA,OAAWqC,EAAcrC,YAI/D5B,SAAS,KAAKqE,GAAG,SAASlI,EAAQnC,EAAOJ,GAC5C,YACAI,GAAOJ,QAAU,SAASsC,EAASoI,EAAcC,EAAcnE,GAC/D,GAAI/B,GAAOlC,EAAQ,UACfqI,EAAWnG,EAAKmG,SAChBC,EAAWpG,EAAKoG,SAChBC,EAAQxI,EAAQyI,MAEpBzI,GAAQW,UAAiB,MAAIX,EAAQW,UAAU+H,OAAS,WACpD,IAAKxE,EAAMyE,eAAgB,MAAO/H,MAAKgI,MAAM,2BAI7C,KAFA,GAAItI,GAAUM,KACViI,EAAQvI,EACLA,EAAQwI,kBAAkB,CAC7B,IAAKxI,EAAQyI,UAAUF,GAAQ,CACvBA,EAAMG,eACNH,EAAMI,YAAYP,SAElBG,EAAMK,iBAEV,OAGJ,GAAIC,GAAS7I,EAAQ8I,mBACrB,IAAc,MAAVD,IAAmBA,EAAOL,iBAAkB,CACxCxI,EAAQ0I,eACR1I,EAAQ2I,YAAYP,SAEpBpI,EAAQ4I,iBAEZ,OAEI5I,EAAQ0I,gBAAgB1I,EAAQ2I,YAAYP,SAChDpI,EAAQ+I,sBACRR,EAAQvI,EACRA,EAAU6I,IAKtBnJ,EAAQW,UAAU2I,oBAAsB,WACpC1I,KAAK2I,8BAGTvJ,EAAQW,UAAU6I,6BAA+B,WAC7C,MAA2C9D,UAApC9E,KAAK2I,4BACL3I,KAAK2I,4BAA8B,GAG9CvJ,EAAQW,UAAUoI,UAAY,SAASU,GACnC,MAAIA,KAAc7I,MACdA,KAAK2I,2BAA6B,EAClC3I,KAAK8I,mBACE,IAEP9I,KAAK0I,wBACD1I,KAAK4I,iCACL5I,KAAK8I,mBACE,KAMnB1J,EAAQW,UAAUuI,gBAAkB,WAC5BtI,KAAK4I,gCACL5I,KAAK+I,WAIb3J,EAAQW,UAAUgJ,QAAU,WACnB/I,KAAKkI,mBACVlI,KAAKgJ,gBACLpB,EAAMnF,OAAOzC,KAAKiJ,gBAAiBjJ,KAAM8E,UAG7C1F,EAAQW,UAAUkJ,gBAAkB,WAC5BjJ,KAAKkJ,UAAY,GAAGlJ,KAAK2C,mBAGjCvD,EAAQW,UAAUoJ,eAAiB,WAC/BnJ,KAAKoJ,eAAiBtE,QAG1B1F,EAAQW,UAAUmI,eAAiB,WAC/B,MAAOlI,MAAKqJ,cAAgBrJ,KAAKsJ,gBAGrClK,EAAQW,UAAUwJ,cAAgB,WAC9B,MAAOvJ,MAAKqJ,cAAgBrJ,KAAKwJ,eAGrCpK,EAAQW,UAAU0J,kBAAoB,SAASC,EAAkBC,GAC7D,GAAIpI,EAAKqI,QAAQF,GACb,IAAK,GAAIjN,GAAI,EAAGA,EAAIiN,EAAiB1M,SAAUP,EAC3CuD,KAAKyJ,kBAAkBC,EAAiBjN,GAAIkN,OAE7C,IAAyB7E,SAArB4E,EACP,GAAgC,kBAArBA,IACP,IAAKC,EAAc,CACf,GAAI3N,GAAI0L,EAASgC,GAAkB3M,KAAKiD,KAAKyE,cACzCzI,KAAM2L,IACN3H,KAAK6J,kBAAkB7N,EAAEA,GACzB4L,EAAMvF,WAAWrG,EAAEA,SAI3B0N,GAAiBI,iBAAiB9J,OAK9CZ,EAAQW,UAAU+I,gBAAkB,WAChC,GAAIY,GAAmB1J,KAAK+J,WAC5B/J,MAAKmJ,iBACLvB,EAAMnF,OAAOzC,KAAKyJ,kBAAmBzJ,KAAM0J,IAG/CtK,EAAQW,UAAUiK,wBAA0B,WACpChK,KAAKkI,mBACLlI,KAAKyJ,kBAAkBzJ,KAAK+J,aAAa,GACzC/J,KAAKmJ,mBAIb/J,EAAQW,UAAU+J,iBAAmB,WACjC9J,KAAK8H,aAKN5E,SAAS,KAAK+G,GAAG,SAAS5K,EAAQnC,EAAOJ,GAC5C,YACAI,GAAOJ,QAAU,SAASoN,GAM1B,QAASC,GAAYC,EAAWC,EAAI3K,GAChC,MAAO,UAAS1D,GACZ,GAAIsO,GAAU5K,EAAQ+E,aACtB8F,GAAe,IAAK,GAAI9N,GAAI,EAAGA,EAAI2N,EAAUpN,SAAUP,EAAG,CACtD,GAAI+N,GAAOJ,EAAU3N,EAErB,IAAI+N,IAAS7N,OACA,MAAR6N,GAAgBA,EAAKzK,oBAAqBpD,QAC3C,GAAIX,YAAawO,GACb,MAAO9C,GAAS2C,GAAItN,KAAKuN,EAAStO,OAEnC,IAAoB,kBAATwO,GAAqB,CACnC,GAAIC,GAAmB/C,EAAS8C,GAAMzN,KAAKuN,EAAStO,EACpD,IAAIyO,IAAqB9C,EACrB,MAAO8C,EACJ,IAAIA,EACP,MAAO/C,GAAS2C,GAAItN,KAAKuN,EAAStO,OAEnC,IAAIuF,EAAKmJ,SAAS1O,GAAI,CAEzB,IAAK,GADD2O,GAAOC,EAAQJ,GACVK,EAAI,EAAGA,EAAIF,EAAK3N,SAAU6N,EAAG,CAClC,GAAIC,GAAMH,EAAKE,EACf,IAAIL,EAAKM,IAAQ9O,EAAE8O,GACf,QAASP,GAGjB,MAAO7C,GAAS2C,GAAItN,KAAKuN,EAAStO,IAG1C,MAAOkO,IAlCf,GAAI3I,GAAOlC,EAAQ,UACfuL,EAAUvL,EAAQ,SAASsL,KAC3BjD,EAAWnG,EAAKmG,SAChBC,EAAWpG,EAAKoG,QAmCpB,OAAOwC,MAGJY,QAAQ,GAAG7H,SAAS,KAAK8H,GAAG,SAAS3L,EAAQnC,EAAOJ,GACvD,YACAI,GAAOJ,QAAU,SAASsC,GAS1B,QAAS6L,KACLjL,KAAKkL,OAAS,GAAID,GAAQE,cAAcC,KAmB5C,QAASC,KACL,GAAIC,EAAiB,MAAO,IAAIL,GAGpC,QAASG,KACL,GAAIG,GAAYC,EAAaxO,OAAS,CACtC,IAAIuO,GAAa,EACb,MAAOC,GAAaD,GAnC5B,GAAID,IAAkB,EAClBE,IAgEJ,OA9DApM,GAAQW,UAAU0L,gBAAkB,aACpCrM,EAAQW,UAAU2L,aAAe,aACjCtM,EAAQW,UAAU4L,YAAc,WAAY,MAAO,OACnDvM,EAAQwM,aAAexM,EAAQW,UAAU6L,aAAe,aAKxDX,EAAQlL,UAAU2L,aAAe,WACT5G,SAAhB9E,KAAKkL,SACLlL,KAAKkL,OAAOO,gBAAkB,KAC9BD,EAAavK,KAAKjB,KAAKkL,UAI/BD,EAAQlL,UAAU4L,YAAc,WAC5B,GAAoB7G,SAAhB9E,KAAKkL,OAAsB,CAC3B,GAAIW,GAAQL,EAAapO,MACrBoC,EAAMqM,EAAMJ,eAEhB,OADAI,GAAMJ,gBAAkB,KACjBjM,EAEX,MAAO,OAcXyL,EAAQE,cAAgB,KACxBF,EAAQpF,OAASwF,EACjBJ,EAAQa,0BAA4B,aACpCb,EAAQc,wBAA0B,WAC9B,GAAIC,GAAsB5M,EAAQW,UAAU2L,aACxCO,EAAqB7M,EAAQW,UAAU4L,YACvCO,EAAsB9M,EAAQwM,aAC9BO,EAAsB/M,EAAQW,UAAU6L,aACxCQ,EAAyBhN,EAAQW,UAAU0L,eAC/CR,GAAQa,0BAA4B,WAChC1M,EAAQW,UAAU2L,aAAeM,EACjC5M,EAAQW,UAAU4L,YAAcM,EAChC7M,EAAQwM,aAAeM,EACvB9M,EAAQW,UAAU6L,aAAeO,EACjC/M,EAAQW,UAAU0L,gBAAkBW,EACpCd,GAAkB,GAEtBA,GAAkB,EAClBlM,EAAQW,UAAU2L,aAAeT,EAAQlL,UAAU2L,aACnDtM,EAAQW,UAAU4L,YAAcV,EAAQlL,UAAU4L,YAClDvM,EAAQwM,aAAexM,EAAQW,UAAU6L,aAAeR,EACxDhM,EAAQW,UAAU0L,gBAAkB,WAChC,GAAIY,GAAMrM,KAAK4L,cACXS,IAA8B,MAAvBA,EAAIZ,kBAAyBY,EAAIZ,gBAAkBzL,QAG/DiL,QAGDqB,GAAG,SAASjN,EAAQnC,EAAOJ,GACjC,YACAI,GAAOJ,QAAU,SAASsC,EAAS6L,GA0MnC,QAASsB,GAAoCC,EAAM9M,GAC/C,OAAQA,QAASA,GA0FrB,QAAS+M,KAAqB,OAAO,EAuBrC,QAASC,GAAoBC,EAAUvH,EAASwH,GAC5C,GAAIlN,GAAUM,IACd,KACI2M,EAASvH,EAASwH,EAAQ,SAASC,GAC/B,GAAwB,kBAAbA,GACP,KAAM,IAAIxG,WAAU,qCACA9E,EAAK6E,SAASyG,GAEtCnN,GAAQoN,4BAA4BD,KAE1C,MAAO7Q,GACL,MAAOA,IAIf,QAAS+Q,GAAuCF,GAC5C,IAAK7M,KAAKkI,iBAAkB,MAAOlI,KAEnC,IAAIgN,GAAmBhN,KAAK+J,WACHjF,UAArBkI,EACIzL,EAAKqI,QAAQoD,GACbA,EAAiB/L,KAAK4L,GAEtB7M,KAAK+E,cAAciI,EAAkBH,IAGzC7M,KAAK+E,aAAa8H,GAI1B,QAASI,KACL,MAAOjN,MAAKoJ,eAGhB,QAAS8D,GAAwBL,GAC7B7M,KAAKoJ,eAAiByD,EAG1B,QAASM,KACLnN,KAAKwI,oBAAsB1D,OAC3B9E,KAAKoJ,eAAiBtE,OAG1B,QAASsI,GAA0B7E,EAAQ8E,GACvC,GAAoB,KAAP,EAARA,GAAkB,CACnBrN,KAAKwI,oBAAsBD,CAC3B,IAAI+E,GAA4B/E,EAAOI,0BACL7D,UAA9BwI,IACAA,EAA4B,GAEhC/E,EAAOI,2BAA6B2E,EAA4B,EAEhD,KAAP,EAARD,IAAoB9E,EAAOrD,YAC5BlF,KAAK6E,YAAY0D,EAAOtD,UAIhC,QAASsI,GAAqBhF,EAAQ8E,GACd,KAAP,EAARA,IAAoB9E,EAAOrD,YAC5BlF,KAAK6E,YAAY0D,EAAOtD,UAKhC,QAASP,KACL,GAAIlF,GAAMQ,KAAKiF,QACf,OAAYH,UAARtF,GACIA,YAAeJ,GACXI,EAAIgO,cACGhO,EAAI2F,QAEX,OAIL3F,EAGX,QAASiO,KACLzN,KAAKkL,OAAS,GAAIC,GAAcnL,KAAK4L,gBAGzC,QAAS8B,GAAgCC,EAAOC,GAC5C,GAAIC,EAAeF,GAAQ,CACvB,GAAI9B,GAAQ7L,KAAKkL,MAIjB,IAHcpG,SAAV+G,GACI+B,IAAY/B,EAAQA,EAAMiC,SAEpBhJ,SAAV+G,EACAA,EAAMkC,iBAAiBJ,OACpB,KAAKA,EAAMK,iBAAkB,CAChC,GAAIC,GAASC,EAAqBP,EAClCpM,GAAK4M,kBAAkBR,EAAO,QAC1BM,EAAO/H,QAAU,KAAO+H,EAAO9L,MAAMiM,KAAK,OAC9C7M,EAAK4M,kBAAkBR,EAAO,oBAAoB,KAK9D,QAASU,GAAsBC,EAAaC,EAAgB/B,EAAM9M,EACnC6I,GAC3B,GAAoBzD,SAAhBwJ,GAAgD,OAAnBC,GAC7BC,EAAkB,CAClB,GAAe1J,SAAXyD,GAAwBA,EAAOkG,wBAAyB,MAC5D,IAAoC,KAAX,MAApB/O,EAAQwE,WAA0B,MAEnCsI,KAAMA,GAAc,IACxB,IAAIkC,GAAc,GACdC,EAAc,EAClB,IAAIJ,EAAerD,OAAQ,CAGvB,IAAK,GAFD0D,GAAaL,EAAerD,OAAO/I,MAAM0M,MAAM,MAC/C1M,EAAQ2M,EAAWF,GACdnS,EAAI0F,EAAMnF,OAAS,EAAGP,GAAK,IAAKA,EAAG,CACxC,GAAIsS,GAAO5M,EAAM1F,EACjB,KAAKuS,EAAiBC,KAAKF,GAAO,CAC9B,GAAIG,GAAcH,EAAKI,MAAMC,EACzBF,KACAR,EAAe,MAAQQ,EAAY,GAC/B,IAAMA,EAAY,GAAK,IAAMA,EAAY,GAAK,IAEtD,QAIR,GAAI/M,EAAMnF,OAAS,EAEf,IAAK,GADDqS,GAAgBlN,EAAM,GACjB1F,EAAI,EAAGA,EAAImS,EAAW5R,SAAUP,EAErC,GAAImS,EAAWnS,KAAO4S,EAAe,CAC7B5S,EAAI,IACJkS,EAAc,KAAOC,EAAWnS,EAAI,GAExC,QAMhB,GAAI6S,GAAM,8BAAgC9C,EACtC,WAAakC,EAAc,yDAE3BC,CACJjP,GAAQsI,MAAMsH,GAAK,EAAMf,IAIjC,QAASgB,GAAW/C,EAAMgD,GACtB,GAAItJ,GAAUsG,EACV,yDAEJ,OADIgD,KAAatJ,GAAW,QAAUsJ,EAAc,aAC7CC,EAAKvJ,GAGhB,QAASuJ,GAAKvJ,EAASwJ,EAAmBhQ,GACtC,GAAKiQ,GAAOC,SAAZ,CACA,GACIvD,GADAwD,EAAU,GAAIC,GAAQ5J,EAE1B,IAAIwJ,EACAhQ,EAAQmK,kBAAkBgG,OACvB,IAAIF,GAAOrE,kBAAoBe,EAAMjN,EAAQwM,gBAChDS,EAAI0B,iBAAiB8B,OAClB,CACH,GAAI5B,GAASC,EAAqB2B,EAClCA,GAAQ1N,MAAQ8L,EAAO/H,QAAU,KAAO+H,EAAO9L,MAAMiM,KAAK,MAGzD2B,GAAgB,UAAWF,IAC5BG,EAAkBH,EAAS,IAAI,IAIvC,QAASI,GAAiB/J,EAASgK,GAC/B,IAAK,GAAIzT,GAAI,EAAGA,EAAIyT,EAAOlT,OAAS,IAAKP,EACrCyT,EAAOzT,GAAGwE,KAAK,wBACfiP,EAAOzT,GAAKyT,EAAOzT,GAAG2R,KAAK,KAK/B,OAHI3R,GAAIyT,EAAOlT,SACXkT,EAAOzT,GAAKyT,EAAOzT,GAAG2R,KAAK,OAExBlI,EAAU,KAAOgK,EAAO9B,KAAK,MAGxC,QAAS+B,GAA4BD,GACjC,IAAK,GAAIzT,GAAI,EAAGA,EAAIyT,EAAOlT,SAAUP,GACR,IAArByT,EAAOzT,GAAGO,QACRP,EAAI,EAAIyT,EAAOlT,QAAWkT,EAAOzT,GAAG,KAAOyT,EAAOzT,EAAE,GAAG,MACzDyT,EAAOE,OAAO3T,EAAG,GACjBA,KAKZ,QAAS4T,GAAkBH,GAEvB,IAAK,GADDI,GAAUJ,EAAO,GACZzT,EAAI,EAAGA,EAAIyT,EAAOlT,SAAUP,EAAG,CAMpC,IAAK,GALDgF,GAAOyO,EAAOzT,GACd8T,EAAmBD,EAAQtT,OAAS,EACpCwT,EAAkBF,EAAQC,GAC1BE,GAAsB,EAEjB5F,EAAIpJ,EAAKzE,OAAS,EAAG6N,GAAK,IAAKA,EACpC,GAAIpJ,EAAKoJ,KAAO2F,EAAiB,CAC7BC,EAAsB5F,CACtB,OAIR,IAAK,GAAIA,GAAI4F,EAAqB5F,GAAK,IAAKA,EAAG,CAC3C,GAAIkE,GAAOtN,EAAKoJ,EAChB,IAAIyF,EAAQC,KAAsBxB,EAI9B,KAHAuB,GAAQlT,MACRmT,IAKRD,EAAU7O,GAIlB,QAASqN,GAAW3M,GAEhB,IAAK,GADD3C,MACK/C,EAAI,EAAGA,EAAI0F,EAAMnF,SAAUP,EAAG,CACnC,GAAIsS,GAAO5M,EAAM1F,GACbiU,EAAc,yBAA2B3B,GACzC4B,EAAkB1B,KAAKF,GACvB6B,EAAkBF,GAAeG,GAAa9B,EAC9C2B,KAAgBE,IACZE,GAAwC,MAAnB/B,EAAKgC,OAAO,KACjChC,EAAO,OAASA,GAEpBvP,EAAIyB,KAAK8N,IAGjB,MAAOvP,GAGX,QAASwR,GAAmBrD,GAExB,IAAK,GADDxL,GAAQwL,EAAMxL,MAAM8O,QAAQ,QAAS,IAAIpC,MAAM,MAC1CpS,EAAI,EAAGA,EAAI0F,EAAMnF,SAAUP,EAAG,CACnC,GAAIsS,GAAO5M,EAAM1F,EACjB,IAAI,yBAA2BsS,GAAQ4B,EAAkB1B,KAAKF,GAC1D,MAMR,MAHItS,GAAI,GAAmB,eAAdkR,EAAMnB,OACfrK,EAAQA,EAAM8E,MAAMxK,IAEjB0F,EAGX,QAAS+L,GAAqBP,GAC1B,GAAIxL,GAAQwL,EAAMxL,MACd+D,EAAUyH,EAAMvH,UAGpB,OAFAjE,GAAyB,gBAAVA,IAAsBA,EAAMnF,OAAS,EACtCgU,EAAmBrD,IAAU,yBAEvCzH,QAASA,EACT/D,MAAqB,eAAdwL,EAAMnB,KAAwBrK,EAAQ2M,EAAW3M,IAIhE,QAAS6N,GAAkBrC,EAAOuD,EAAOC,GACrC,GAAuB,mBAAZC,SAAyB,CAChC,GAAIlL,EACJ,IAAI3E,EAAKmJ,SAASiD,GAAQ,CACtB,GAAIxL,GAAQwL,EAAMxL,KAClB+D,GAAUgL,EAAQG,EAAYlP,EAAOwL,OAErCzH,GAAUgL,EAAQI,OAAO3D,EAED,mBAAjB4D,GACPA,EAAarL,EAASiL,GACQ,kBAAhBC,SAAQI,KACC,gBAAhBJ,SAAQI,KACfJ,QAAQI,IAAItL,IAKxB,QAASuL,GAAmBjF,EAAMkF,EAAcC,EAAQjS,GACpD,GAAIkS,IAAkB,CACtB,KACgC,kBAAjBF,KACPE,GAAkB,EACL,qBAATpF,EACAkF,EAAahS,GAEbgS,EAAaC,EAAQjS,IAG/B,MAAO1D,GACL4L,EAAMvF,WAAWrG,GAGR,uBAATwQ,EACKuD,GAAgBvD,EAAMmF,EAAQjS,IAAakS,GAC5C5B,EAAkB2B,EAAQ,wBAG9B5B,GAAgBvD,EAAM9M,GAI9B,QAASmS,GAAe7M,GACpB,GAAI8M,EACJ,IAAmB,kBAAR9M,GACP8M,EAAM,cACD9M,EAAIwH,MAAQ,aACb,QACD,CACHsF,EAAM9M,GAA+B,kBAAjBA,GAAIoB,SAClBpB,EAAIoB,WAAa7E,EAAK6E,SAASpB,EACrC,IAAI+M,GAAmB,2BACvB,IAAIA,EAAiB9C,KAAK6C,GACtB,IACI,GAAIE,GAASC,KAAKC,UAAUlN,EAC5B8M,GAAME,EAEV,MAAMhW,IAIS,IAAf8V,EAAI9U,SACJ8U,EAAM,iBAGd,MAAQ,KAAOK,EAAKL,GAAO,qBAG/B,QAASK,GAAKL,GACV,GAAIM,GAAW,EACf,OAAIN,GAAI9U,OAASoV,EACNN,EAEJA,EAAIO,OAAO,EAAGD,EAAW,GAAK,MAGzC,QAASE,KACL,MAAoC,kBAAtBC,IAKlB,QAASC,GAAczD,GACnB,GAAI0D,GAAU1D,EAAKI,MAAMuD,GACzB,IAAID,EACA,OACIE,SAAUF,EAAQ,GAClB1D,KAAM6D,SAASH,EAAQ,GAAI,KAKvC,QAASI,GAAUvR,EAAgBwR,GAC/B,GAAKR,IAAL,CAOA,IAAK,GAFDS,GACAC,EALAC,EAAkB3R,EAAea,MAAM0M,MAAM,MAC7CqE,EAAiBJ,EAAc3Q,MAAM0M,MAAM,MAC3CsE,GAAa,EACb5H,GAAY,EAGP9O,EAAI,EAAGA,EAAIwW,EAAgBjW,SAAUP,EAAG,CAC7C,GAAI2W,GAASZ,EAAcS,EAAgBxW,GAC3C,IAAI2W,EAAQ,CACRL,EAAgBK,EAAOT,SACvBQ,EAAaC,EAAOrE,IACpB,QAGR,IAAK,GAAItS,GAAI,EAAGA,EAAIyW,EAAelW,SAAUP,EAAG,CAC5C,GAAI2W,GAASZ,EAAcU,EAAezW,GAC1C,IAAI2W,EAAQ,CACRJ,EAAeI,EAAOT,SACtBpH,EAAY6H,EAAOrE,IACnB,QAGJoE,EAAa,GAAK5H,EAAY,IAAMwH,IAAkBC,GACtDD,IAAkBC,GAAgBG,GAAc5H,IAIpDsF,GAAe,SAAS9B,GACpB,GAAIsE,EAAqBpE,KAAKF,GAAO,OAAO,CAC5C,IAAIuE,GAAOd,EAAczD,EACzB,UAAIuE,GACIA,EAAKX,WAAaI,GACjBI,GAAcG,EAAKvE,MAAQuE,EAAKvE,MAAQxD,MAQzD,QAASJ,GAAc5C,GACnBvI,KAAK8N,QAAUvF,EACfvI,KAAKuT,iBAAmB,CACxB,IAAIvW,GAASgD,KAAKkJ,QAAU,GAAgBpE,SAAXyD,EAAuB,EAAIA,EAAOW,QACnEqJ,IAAkBvS,KAAMmL,GACpBnO,EAAS,IAAIgD,KAAKwT,UA5sB1B,GAKIC,GACAC,EAQAnC,EAdAoC,EAAYvU,EAAQwU,WACpBhM,EAAQxI,EAAQyI,OAChBiI,EAAUzQ,EAAQ,YAAYyQ,QAC9BvO,EAAOlC,EAAQ,UACfwO,EAAiBtM,EAAKsM,eAGtBwF,EACA,2DACArE,EAAmB,6BACnBI,EAAmB,kCACnBuB,EAAoB,KACpBU,EAAc,KACdP,GAAoB,EAEpB+C,IAA6C,GAA9BtS,EAAKuS,IAAI,mBAKxBlE,IAA+C,GAAjCrO,EAAKuS,IAAI,uBACtBD,IAAatS,EAAKuS,IAAI,sBAEvBxI,IAA+D,GAA1C/J,EAAKuS,IAAI,gCAC7BD,IAAatS,EAAKuS,IAAI,+BAEvBtF,EAA8D,GAA3CjN,EAAKuS,IAAI,iCAC3BlE,KAAcrO,EAAKuS,IAAI,+BAE5B1U,GAAQW,UAAUgU,4BAA8B,WAC5C,GAAI3P,GAASpE,KAAK4E,SAClBR,GAAOF,UAAcE,EAAOF,WAAY,QACtB,QAGtB9E,EAAQW,UAAUiU,gCAAkC,WACd,KAAZ,OAAjBhU,KAAKkE,aACVlE,KAAKiU,2BACLrM,EAAMpF,YAAYxC,KAAKkU,0BAA2BlU,KAAM8E,UAG5D1F,EAAQW,UAAUoU,mCAAqC,WACnD1C,EAAmB,mBACWgC,EAA2B3O,OAAW9E,OAGxEZ,EAAQW,UAAUqU,yBAA2B,WACzCpU,KAAKkE,UAA6B,UAAjBlE,KAAKkE,WAG1B9E,EAAQW,UAAU0O,sBAAwB,WACtC,MAAwC,MAAf,UAAjBzO,KAAKkE,YAGjB9E,EAAQW,UAAUmU,0BAA4B,WAC1C,GAAIlU,KAAKqU,wBAAyB,CAC9B,GAAI1C,GAAS3R,KAAKsU,eAClBtU,MAAKuU,mCACL9C,EAAmB,qBACWiC,EAA4B/B,EAAQ3R,QAI1EZ,EAAQW,UAAUwU,iCAAmC,WACjDvU,KAAKkE,UAA6B,OAAjBlE,KAAKkE,WAG1B9E,EAAQW,UAAUyU,mCAAqC,WACnDxU,KAAKkE,UAAYlE,KAAKkE,WAAY,QAGtC9E,EAAQW,UAAU0U,8BAAgC,WAC9C,OAAyB,OAAjBzU,KAAKkE,WAAsB,GAGvC9E,EAAQW,UAAUkU,yBAA2B,WACzCjU,KAAKkE,UAA6B,QAAjBlE,KAAKkE,WAG1B9E,EAAQW,UAAU2U,2BAA6B,WAC3C1U,KAAKkE,UAAYlE,KAAKkE,WAAY,QAC9BlE,KAAKyU,kCACLzU,KAAKwU,qCACLxU,KAAKmU,uCAIb/U,EAAQW,UAAUsU,sBAAwB,WACtC,OAAyB,QAAjBrU,KAAKkE,WAAuB,GAGxC9E,EAAQW,UAAUiI,MAAQ,SAAS9B,EAASwJ,EAAmBhQ,GAC3D,MAAO+P,GAAKvJ,EAASwJ,EAAmBhQ,GAAWM,OAGvDZ,EAAQuV,6BAA+B,SAAU7T,GAC7C,GAAI8T,GAASjB,GACbD,GACkB,kBAAP5S,GAAgC,OAAX8T,EACQ9T,EAAKS,EAAKsT,WAAWD,EAAQ9T,GACtCgE,QAGnC1F,EAAQ0V,4BAA8B,SAAUhU,GAC5C,GAAI8T,GAASjB,GACbF,GACkB,kBAAP3S,GAAgC,OAAX8T,EACQ9T,EAAKS,EAAKsT,WAAWD,EAAQ9T,GACtCgE,OAGnC,IAAIiQ,GAAyB,YAC7B3V,GAAQkM,gBAAkB,WACtB,GAAI1D,EAAM9F,oBAAsB6N,GAAOrE,gBACnC,KAAM,IAAI3O,OAAM,qGAEpB,KAAKgT,GAAOrE,iBAAmBgH,IAA8B,CACzD,GAAI0C,GAA4B5V,EAAQW,UAAUkV,mBAC9CC,EAA2B9V,EAAQW,UAAU8J,iBACjD8F,IAAOrE,iBAAkB,EACzByJ,EAAyB,WACrB,GAAInN,EAAM9F,oBAAsB6N,GAAOrE,gBACnC,KAAM,IAAI3O,OAAM,qGAEpByC,GAAQW,UAAUkV,mBAAqBD,EACvC5V,EAAQW,UAAU8J,kBAAoBqL,EACtCjK,EAAQa,4BACRlE,EAAMjG,mBACNgO,GAAOrE,iBAAkB,GAE7BlM,EAAQW,UAAUkV,mBAAqBxH,EACvCrO,EAAQW,UAAU8J,kBAAoB6D,EACtCzC,EAAQc,0BACRnE,EAAMhG,iCAIdxC,EAAQ+V,mBAAqB,WACzB,MAAOxF,IAAOrE,iBAAmBgH,IAGrC,IAAI8C,GAAe,WACf,IACI,GAA2B,kBAAhBC,aAA4B,CACnC,GAAIC,GAAQ,GAAID,aAAY,cAE5B,OADA9T,GAAKxC,OAAOwW,cAAcD,GACnB,SAAS9I,EAAM8I,GAClB,GAAIE,GAAW,GAAIH,aAAY7I,EAAKiJ,eAChCC,OAAQJ,EACRK,YAAY,GAEhB,QAAQpU,EAAKxC,OAAOwW,cAAcC,IAEnC,GAAqB,kBAAVI,OAAsB,CACpC,GAAIN,GAAQ,GAAIM,OAAM,cAEtB,OADArU,GAAKxC,OAAOwW,cAAcD,GACnB,SAAS9I,EAAM8I,GAClB,GAAIE,GAAW,GAAII,OAAMpJ,EAAKiJ,eAC1BE,YAAY,GAGhB,OADAH,GAASE,OAASJ,GACV/T,EAAKxC,OAAOwW,cAAcC,IAGtC,GAAIF,GAAQO,SAASC,YAAY,cAGjC,OAFAR,GAAMS,gBAAgB,mBAAmB,GAAO,MAChDxU,EAAKxC,OAAOwW,cAAcD,GACnB,SAAS9I,EAAM8I,GAClB,GAAIE,GAAWK,SAASC,YAAY,cAGpC,OAFAN,GAASO,gBAAgBvJ,EAAKiJ,eAAe,GAAO,EAChDH,IACI/T,EAAKxC,OAAOwW,cAAcC,IAG5C,MAAOxZ,IACT,MAAO,YACH,OAAO,MAIXga,EAAkB,WAClB,MAAIzU,GAAKS,OACE,WACH,MAAOlD,GAAQmX,KAAK1P,MAAMzH,EAASwD,YAGlCf,EAAKxC,OAKH,SAASyN,GACZ,GAAIvG,GAAa,KAAOuG,EAAKiJ,cACzBS,EAAS3U,EAAKxC,OAAOkH,EACzB,SAAKiQ,IACLA,EAAO3P,MAAMhF,EAAKxC,UAAWkI,MAAMlK,KAAKuF,UAAW,KAC5C,IATA,WACH,OAAO,MAiBnB6T,IACA5H,eAAgBhC,EAChB6J,iBAAkB7J,EAClB8J,gBAAiB9J,EACjB+J,gBAAiB/J,EACjBgK,iBAAkBhK,EAClBiK,eAAgB,SAAShK,EAAM9M,EAASuI,GACpC,OAAQvI,QAASA,EAASuI,MAAOA,IAErC4H,QAAS,SAASrD,EAAMqD,GACpB,OAAQA,QAASA,IAErB4G,mBAAoB,SAAUjK,EAAMmF,EAAQjS,GACxC,OAAQiS,OAAQA,EAAQjS,QAASA,IAErCgX,iBAAkBnK,GAGlBwD,GAAkB,SAAUvD,GAC5B,GAAImK,IAAmB,CACvB,KACIA,EAAmBX,EAAgBzP,MAAM,KAAMjE,WACjD,MAAOtG,GACL4L,EAAMvF,WAAWrG,GACjB2a,GAAmB,EAGvB,GAAIC,IAAgB,CACpB,KACIA,EAAgBxB,EAAa5I,EACjB2J,GAAuB3J,GAAMjG,MAAM,KAAMjE,YACvD,MAAOtG,GACL4L,EAAMvF,WAAWrG,GACjB4a,GAAgB,EAGpB,MAAOA,IAAiBD,EAG5BvX,GAAQuQ,OAAS,SAASkH,GAStB,GARAA,EAAOjR,OAAOiR,GACV,mBAAqBA,KACjBA,EAAKvL,gBACLlM,EAAQkM,mBACAuL,EAAKvL,iBAAmBlM,EAAQ+V,sBACxCJ,KAGJ,YAAc8B,GAAM,CACpB,GAAIC,GAAiBD,EAAKjH,QAC1BD,IAAOC,WAAakH,EACpBtI,EAAmBmB,GAAOC,SAEtBrO,EAAKmJ,SAASoM,IACV,oBAAsBA,KACtBtI,IAAqBsI,EAAetI,kBAIhD,GAAI,gBAAkBqI,IAAQA,EAAK9O,eAAiB4H,GAAO5H,aAAc,CACrE,GAAIH,EAAM9F,kBACN,KAAM,IAAInF,OACN,uDAERyC,GAAQW,UAAUgX,uBACd5J,EACJ/N,EAAQW,UAAUwE,eAAiB6I,EACnChO,EAAQW,UAAUgK,UAAYkD,EAC9B7N,EAAQW,UAAUgF,aAAemI,EACjC9N,EAAQW,UAAU+M,4BACdC,EACJ3N,EAAQW,UAAUiX,SAAWtK,EAC7BlI,GAAwB4I,EACxBuC,GAAO5H,cAAe,EAW1B,MATI,cAAgB8O,KACZA,EAAKI,aAAetH,GAAOsH,YAC3BtH,GAAOsH,YAAa,EACpB7X,EAAQW,UAAUmX,WAAanH,KACvB8G,EAAKI,YAActH,GAAOsH,aAClCtH,GAAOsH,YAAa,EACpB7X,EAAQW,UAAUmX,WAAazK,IAGhCrN,GAKXA,EAAQW,UAAUmX,WAAazK,EAC/BrN,EAAQW,UAAUiX,SAAW,SAASrK,EAAUvH,EAASwH,GACrD,IACID,EAASvH,EAASwH,GACpB,MAAO5Q,GACL,MAAOA,KAGfoD,EAAQW,UAAUgK,UAAY,aAC9B3K,EAAQW,UAAUgF,aAAe,SAAUoS,KAC3C/X,EAAQW,UAAU+M,4BAA8B,SAASD,KAGzDzN,EAAQW,UAAUkV,mBAAqB,aACvC7V,EAAQW,UAAU8J,kBAAoB,aACtCzK,EAAQW,UAAUgX,uBAAyB,aAC3C3X,EAAQW,UAAUwE,eAAiB,SAAUgE,EAAQ8E,IAmErD,IAAI7I,IAAwB+I,EAwRxBsD,GAAe,WAAa,OAAO,GACnC6B,GAAqB,uCA4DzBnR,GAAK6V,SAASjM,EAAexO,OAC7BsO,EAAQE,cAAgBA,EAExBA,EAAcpL,UAAUyT,QAAU,WAC9B,GAAIxW,GAASgD,KAAKkJ,OAClB,MAAIlM,EAAS,GAAb,CAIA,IAAK,GAHDqa,MACAC,KAEK7a,EAAI,EAAG8a,EAAOvX,KAAe8E,SAATyS,IAAsB9a,EAC/C4a,EAAMpW,KAAKsW,GACXA,EAAOA,EAAKzJ,OAEhB9Q,GAASgD,KAAKkJ,QAAUzM,CACxB,KAAK,GAAIA,GAAIO,EAAS,EAAGP,GAAK,IAAKA,EAAG,CAClC,GAAI0F,GAAQkV,EAAM5a,GAAG0F,KACO2C,UAAxBwS,EAAanV,KACbmV,EAAanV,GAAS1F,GAG9B,IAAK,GAAIA,GAAI,EAAGA,EAAIO,IAAUP,EAAG,CAC7B,GAAI+a,GAAeH,EAAM5a,GAAG0F,MACxBuE,EAAQ4Q,EAAaE,EACzB,IAAc1S,SAAV4B,GAAuBA,IAAUjK,EAAG,CAChCiK,EAAQ,IACR2Q,EAAM3Q,EAAQ,GAAGoH,QAAUhJ,OAC3BuS,EAAM3Q,EAAQ,GAAGwC,QAAU,GAE/BmO,EAAM5a,GAAGqR,QAAUhJ,OACnBuS,EAAM5a,GAAGyM,QAAU,CACnB,IAAIuO,GAAgBhb,EAAI,EAAI4a,EAAM5a,EAAI,GAAKuD,IAEvC0G,GAAQ1J,EAAS,GACjBya,EAAc3J,QAAUuJ,EAAM3Q,EAAQ,GACtC+Q,EAAc3J,QAAQ0F,UACtBiE,EAAcvO,QACVuO,EAAc3J,QAAQ5E,QAAU,IAEpCuO,EAAc3J,QAAUhJ,OACxB2S,EAAcvO,QAAU,EAG5B,KAAK,GADDwO,GAAqBD,EAAcvO,QAAU,EACxC2B,EAAIpO,EAAI,EAAGoO,GAAK,IAAKA,EAC1BwM,EAAMxM,GAAG3B,QAAUwO,EACnBA,GAEJ,YAKZvM,EAAcpL,UAAUgO,iBAAmB,SAASJ,GAChD,IAAIA,EAAMK,iBAAV,CACAhO,KAAKwT,SAML,KALA,GAAIvF,GAASC,EAAqBP,GAC9BzH,EAAU+H,EAAO/H,QACjBgK,GAAUjC,EAAO9L,OAEjB0J,EAAQ7L,KACK8E,SAAV+G,GACHqE,EAAOjP,KAAK6N,EAAWjD,EAAM1J,MAAM0M,MAAM,QACzChD,EAAQA,EAAMiC,OAElBuC,GAAkBH,GAClBC,EAA4BD,GAC5B3O,EAAK4M,kBAAkBR,EAAO,QAASsC,EAAiB/J,EAASgK,IACjE3O,EAAK4M,kBAAkBR,EAAO,oBAAoB,IAGtD,IAAI4E,IAAoB,WACpB,GAAIoF,GAAsB,YACtBC,EAAmB,SAASzV,EAAOwL,GACnC,MAAqB,gBAAVxL,GAA2BA,EAEnB2C,SAAf6I,EAAMnB,MACY1H,SAAlB6I,EAAMzH,QACCyH,EAAMvH,WAEVyL,EAAelE,GAG1B,IAAqC,gBAA1BhR,OAAMkb,iBACsB,kBAA5Blb,OAAM4V,kBAAkC,CAC/C5V,MAAMkb,iBAAmB,EACzBlH,EAAoBgH,EACpBtG,EAAcuG,CACd,IAAIrF,GAAoB5V,MAAM4V,iBAK9B,OAHA1B,IAAe,SAAS9B,GACpB,MAAOsE,GAAqBpE,KAAKF,IAE9B,SAAShO,EAAU+W,GACtBnb,MAAMkb,iBAAmB,EACzBtF,EAAkBxR,EAAU+W,GAC5Bnb,MAAMkb,iBAAmB,GAGjC,GAAIE,GAAM,GAAIpb,MAEd,IAAyB,gBAAdob,GAAI5V,OACX4V,EAAI5V,MAAM0M,MAAM,MAAM,GAAGmJ,QAAQ,oBAAsB,EAIvD,MAHArH,GAAoB,IACpBU,EAAcuG,EACd9G,GAAoB,EACb,SAA2BzU,GAC9BA,EAAE8F,OAAQ,GAAIxF,QAAQwF,MAI9B,IAAI8V,EACJ,KAAM,KAAM,IAAItb,OAChB,MAAMX,GACFic,EAAsB,SAAWjc,GAErC,MAAM,SAAW+b,KAAQE,GACY,gBAA1Btb,OAAMkb,iBAWjBxG,EAAc,SAASlP,EAAOwL,GAC1B,MAAqB,gBAAVxL,GAA2BA,EAEhB,gBAAVwL,IACS,kBAAVA,IACQ7I,SAAf6I,EAAMnB,MACY1H,SAAlB6I,EAAMzH,QAGH2L,EAAelE,GAFXA,EAAMvH,YAKd,OAtBHuK,EAAoBgH,EACpBtG,EAAcuG,EACP,SAA2Bvb,GAC9BM,MAAMkb,iBAAmB,CACzB,KAAM,KAAM,IAAIlb,OAChB,MAAMX,GAAKK,EAAE8F,MAAQnG,EAAEmG,MACvBxF,MAAMkb,iBAAmB,QAoBd,oBAAZzG,UAAmD,mBAAjBA,SAAQ3B,OACjD8B,EAAe,SAAUrL,GACrBkL,QAAQ3B,KAAKvJ,IAEb3E,EAAKS,QAAUlD,EAAQmD,OAAOiW,MAC9B3G,EAAe,SAASrL,EAASiL,GAC7B,GAAIgH,GAAQhH,EAAS,QAAe,OACpCC,SAAQ3B,KAAK0I,EAAQjS,EAAU,WAE3B3E,EAAKS,QAAyC,iBAAvB,GAAIrF,QAAa,QAChD4U,EAAe,SAASrL,EAASiL,GAC7BC,QAAQ3B,KAAK,KAAOvJ,EACRiL,EAAS,oBAAsB,gBAKvD,IAAIxB,KACAC,SAAUA,EACVtE,iBAAiB,EACjBvD,cAAc,EACdkP,YAAY,EAKhB,OAFI3L,IAAiBlM,EAAQkM,mBAGzBA,gBAAiB,WACb,MAAOqE,IAAOrE,iBAElBsE,SAAU,WACN,MAAOD,IAAOC,UAElB7H,aAAc,WACV,MAAO4H,IAAO5H,cAElBkP,WAAY,WACR,MAAOtH,IAAOsH,YAElBzS,sBAAuB,WACnB,MAAOA,KAEXE,mBAAoB,WAChB,MAAOA,IAEX2J,sBAAuBA,EACvBwE,UAAWA,EACXpD,KAAMA,EACNF,WAAYA,EACZpE,cAAeA,EACfiK,aAAcA,EACdY,gBAAiBA,MAIlBoC,WAAW,GAAGlV,SAAS,KAAKmV,IAAI,SAAShZ,EAAQnC,EAAOJ,GAC3D,YACAI,GAAOJ,QAAU,SAASsC,GAC1B,QAASkZ,KACL,MAAOtY,MAAKmF,MAEhB,QAASoT,KACL,KAAMvY,MAAK2R,OAGfvS,EAAQW,UAAkB,OAC1BX,EAAQW,UAAUyY,WAAa,SAAUrT,GAErC,MADIA,aAAiB/F,IAAS+F,EAAM4O,8BAC7B/T,KAAK+D,MACRuU,EAAUxT,OAAWA,QAAYK,MAAOA,GAAQL,SAGxD1F,EAAQW,UAAiB,MACzBX,EAAQW,UAAU0Y,UAAY,SAAU9G,GACpC,MAAO3R,MAAK+D,MACRwU,EAASzT,OAAWA,QAAY6M,OAAQA,GAAS7M,SAGzD1F,EAAQW,UAAU2Y,WAAa,SAAU/G,GACrC,GAAIrP,UAAUtF,QAAU,EACpB,MAAOgD,MAAK+D,MACRe,OAAWyT,EAASzT,QAAY6M,OAAQA,GAAS7M,OAErD,IAAI6T,GAAUrW,UAAU,GACpB6U,EAAU,WAAY,KAAMwB,GAChC,OAAO3Y,MAAK4Y,OAAOjH,EAAQwF,IAInC/X,EAAQW,UAAU8Y,YAAc,SAAU1T,GACtC,GAAI7C,UAAUtF,QAAU,EAEpB,MADImI,aAAiB/F,IAAS+F,EAAM4O,8BAC7B/T,KAAK+D,MACRe,OAAWwT,EAAUxT,QAAYK,MAAOA,GAAQL,OAEpD,IAAIgU,GAASxW,UAAU,EACnBwW,aAAkB1Z,IAAS0Z,EAAO/E,6BACtC,IAAIoD,GAAU,WAAY,MAAO2B,GACjC,OAAO9Y,MAAK4Y,OAAOzT,EAAOgS,UAK5B4B,IAAI,SAAS1Z,EAAQnC,EAAOJ,GAClC,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,GAInC,QAAS4V,KACL,MAAOC,GAAWjZ,MAGtB,QAASkZ,GAAiB3Z,EAAUuB,GAChC,MAAOqY,GAAc5Z,EAAUuB,EAAIsC,EAAUA,GARjD,GAAI+V,GAAgB/Z,EAAQga,OACxBH,EAAa7Z,EAAQia,GAUzBja,GAAQW,UAAUuZ,KAAO,SAAUxY,GAC/B,MAAOqY,GAAcnZ,KAAMc,EAAIsC,EAAU,GAC9BW,MAAMiV,EAAgBlU,OAAWA,OAAW9E,KAAM8E,SAGjE1F,EAAQW,UAAUwZ,UAAY,SAAUzY,GACpC,MAAOqY,GAAcnZ,KAAMc,EAAIsC,EAAUA,IAG7ChE,EAAQka,KAAO,SAAU/Z,EAAUuB,GAC/B,MAAOqY,GAAc5Z,EAAUuB,EAAIsC,EAAU,GAClCW,MAAMiV,EAAgBlU,OAAWA,OAAWvF,EAAUuF,SAGrE1F,EAAQma,UAAYL,QAIdM,IAAI,SAASna,EAAQnC,EAAOJ,GAClC,YAOA,SAAS2c,GAASC,EAAcC,GAC5B,QAASC,GAAS1T,GACd,MAAMlG,gBAAgB4Z,IACtBzL,EAAkBnO,KAAM,UACD,gBAAZkG,GAAuBA,EAAUyT,GAC5CxL,EAAkBnO,KAAM,OAAQ0Z,QAC5B/c,MAAM4V,kBACN5V,MAAM4V,kBAAkBvS,KAAMA,KAAK6Z,aAEnCld,MAAMI,KAAKiD,QAPyB,GAAI4Z,GAAS1T,GAWzD,MADAkR,GAASwC,EAAUjd,OACZid,EAmDX,QAASE,GAAiB5T,GACtB,MAAMlG,gBAAgB8Z,IAEtB3L,EAAkBnO,KAAM,OAAQ,oBAChCmO,EAAkBnO,KAAM,UAAWkG,GACnClG,KAAK+Z,MAAQ7T,EACblG,KAAoB,eAAI,OAEpBkG,YAAmBvJ,QACnBwR,EAAkBnO,KAAM,UAAWkG,EAAQA,SAC3CiI,EAAkBnO,KAAM,QAASkG,EAAQ/D,QAClCxF,MAAM4V,mBACb5V,MAAM4V,kBAAkBvS,KAAMA,KAAK6Z,eAV5B,GAAIC,GAAiB5T,GAxEpC,GAsBI8T,GAAYC,EAtBZC,EAAM7a,EAAQ,SACd8a,EAAeD,EAAIE,OACnB7Y,EAAOlC,EAAQ,UACf+X,EAAW7V,EAAK6V,SAChBjJ,EAAoB5M,EAAK4M,kBAmBzB2B,EAAU2J,EAAS,UAAW,WAC9BY,EAAoBZ,EAAS,oBAAqB,sBAClDa,EAAeb,EAAS,eAAgB,iBACxCc,EAAiBd,EAAS,iBAAkB,kBAChD,KACIO,EAAa3T,UACb4T,EAAcO,WAChB,MAAMxe,GACJge,EAAaP,EAAS,YAAa,cACnCQ,EAAcR,EAAS,aAAc,eAMzC,IAAK,GAHDgB,GAAU,sHACuD5L,MAAM,KAElEpS,EAAI,EAAGA,EAAIge,EAAQzd,SAAUP,EACS,kBAAhCie,OAAM3a,UAAU0a,EAAQhe,MAC/B8d,EAAexa,UAAU0a,EAAQhe,IAAMie,MAAM3a,UAAU0a,EAAQhe,IAIvEyd,GAAIS,eAAeJ,EAAexa,UAAW,UACzCoF,MAAO,EACPyV,cAAc,EACdC,UAAU,EACVC,YAAY,IAEhBP,EAAexa,UAAyB,eAAI,CAC5C,IAAIgb,GAAQ,CACZR,GAAexa,UAAUqG,SAAW,WAChC,GAAI4U,GAASN,MAAc,EAARK,EAAY,GAAG3M,KAAK,KACnC5O,EAAM,KAAOwb,EAAS,sBAC1BD,KACAC,EAASN,MAAc,EAARK,EAAY,GAAG3M,KAAK,IACnC,KAAK,GAAI3R,GAAI,EAAGA,EAAIuD,KAAKhD,SAAUP,EAAG,CAGlC,IAAK,GAFDqV,GAAM9R,KAAKvD,KAAOuD,KAAO,4BAA8BA,KAAKvD,GAAK,GACjEwe,EAAQnJ,EAAIjD,MAAM,MACbhE,EAAI,EAAGA,EAAIoQ,EAAMje,SAAU6N,EAChCoQ,EAAMpQ,GAAKmQ,EAASC,EAAMpQ,EAE9BiH,GAAMmJ,EAAM7M,KAAK,MACjB5O,GAAOsS,EAAM,KAGjB,MADAiJ,KACOvb,GAmBX4X,EAAS0C,EAAkBnd,MAE3B,IAAIue,GAAave,MAA8B,sBAC1Cue,KACDA,EAAaf,GACTE,kBAAmBA,EACnBC,aAAcA,EACdR,iBAAkBA,EAClBqB,eAAgBrB,EAChBS,eAAgBA,IAEpBL,EAAIS,eAAehe,MAAO,0BACtBwI,MAAO+V,EACPL,UAAU,EACVC,YAAY,EACZF,cAAc,KAItB1d,EAAOJ,SACHH,MAAOA,MACP0J,UAAW2T,EACXQ,WAAYP,EACZI,kBAAmBa,EAAWb,kBAC9BP,iBAAkBoB,EAAWpB,iBAC7BQ,aAAcY,EAAWZ,aACzBC,eAAgBW,EAAWX,eAC3BzK,QAASA,KAGV/E,QAAQ,GAAG7H,SAAS,KAAKkY,IAAI,SAAS/b,EAAQnC,EAAOJ,GACxD,GAAIue,GAAQ,WACR,YACA,OAAgBvW,UAAT9E,OAGX,IAAIqb,EACAne,EAAOJ,SACHsd,OAAQxU,OAAOwU,OACfO,eAAgB/U,OAAO+U,eACvBW,cAAe1V,OAAO2V,yBACtB5Q,KAAM/E,OAAO+E,KACb6Q,MAAO5V,OAAO6V,oBACdC,eAAgB9V,OAAO8V,eACvB9R,QAAS8Q,MAAM9Q,QACfyR,MAAOA,EACPM,mBAAoB,SAAS3W,EAAK4W,GAC9B,GAAIC,GAAajW,OAAO2V,yBAAyBvW,EAAK4W,EACtD,SAAWC,IAAcA,EAAWhB,WAAYgB,EAAWC,WAGhE,CACH,GAAIC,MAASC,eACTlK,KAAS1L,SACT6V,KAAWpC,YAAY9Z,UAEvBmc,EAAa,SAAU7f,GACvB,GAAImD,KACJ,KAAK,GAAIsL,KAAOzO,GACR0f,EAAIhf,KAAKV,EAAGyO,IACZtL,EAAIyB,KAAK6J,EAGjB,OAAOtL,IAGP2c,EAAsB,SAAS9f,EAAGyO,GAClC,OAAQ3F,MAAO9I,EAAEyO,KAGjBsR,EAAuB,SAAU/f,EAAGyO,EAAKuR,GAEzC,MADAhgB,GAAEyO,GAAOuR,EAAKlX,MACP9I,GAGPigB,EAAe,SAAUtX,GACzB,MAAOA,IAGPuX,EAAuB,SAAUvX,GACjC,IACI,MAAOY,QAAOZ,GAAK6U,YAAY9Z,UAEnC,MAAO/D,GACH,MAAOigB,KAIXO,EAAe,SAAUxX,GACzB,IACI,MAAyB,mBAAlB8M,EAAI/U,KAAKiI,GAEpB,MAAMhJ,GACF,OAAO,GAIfkB,GAAOJ,SACH8M,QAAS4S,EACT7R,KAAMuR,EACNV,MAAOU,EACPvB,eAAgByB,EAChBd,cAAea,EACf/B,OAAQkC,EACRZ,eAAgBa,EAChBlB,MAAOA,EACPM,mBAAoB,WAChB,OAAO,UAKbc,IAAI,SAASpd,EAAQnC,EAAOJ,GAClC,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,GACnC,GAAIsZ,GAAatd,EAAQud,GAEzBvd,GAAQW,UAAU6c,OAAS,SAAU9b,EAAI+b,GACrC,MAAOH,GAAW1c,KAAMc,EAAI+b,EAASzZ,IAGzChE,EAAQwd,OAAS,SAAUrd,EAAUuB,EAAI+b,GACrC,MAAOH,GAAWnd,EAAUuB,EAAI+b,EAASzZ,UAIvC0Z,IAAI,SAASzd,EAAQnC,EAAOJ,GAClC,YACAI,GAAOJ,QAAU,SAASsC,EAASiE,EAAqB6G,GAMxD,QAAS6S,GAA0Brd,EAASf,EAAMwY,GAC9CnX,KAAKN,QAAUA,EACfM,KAAKrB,KAAOA,EACZqB,KAAKmX,QAAUA,EACfnX,KAAKgd,QAAS,EACdhd,KAAKid,cAAgB,KAOzB,QAASC,GAA6BC,GAClCnd,KAAKmd,eAAiBA,EAO1B,QAASC,GAAY/Q,EAAKsF,GACtB,MAAyB,OAArBtF,EAAI4Q,gBACA3a,UAAUtF,OAAS,EACnBqP,EAAI4Q,cAAcvZ,QAAQiO,GAE1BtF,EAAI4Q,cAAclU,UAEtBsD,EAAI4Q,cAAgB,MACb,GAKf,QAASI,KACL,MAAOF,GAAepgB,KAAKiD,KAAMA,KAAKN,QAAQkF,UAAU0P,iBAE5D,QAASgJ,GAAK3L,GACV,IAAIyL,EAAYpd,KAAM2R,GAEtB,MADAhK,GAAS3L,EAAI2V,EACNhK,EAEX,QAASwV,GAAeI,GACpB,GAAI7d,GAAUM,KAAKN,QACfyX,EAAUnX,KAAKmX,OAEnB,KAAKnX,KAAKgd,OAAQ,CACdhd,KAAKgd,QAAS,CACd,IAAIxd,GAAMQ,KAAKwd,mBACTrG,EAAQpa,KAAK2C,EAAQ+E,eACrB0S,EAAQpa,KAAK2C,EAAQ+E,cAAe8Y,EAC1C,IAAI/d,IAAQ0K,EACR,MAAO1K,EACJ,IAAYsF,SAARtF,EAAmB,CAC1BE,EAAQ0U,0BACR,IAAIzP,GAAetB,EAAoB7D,EAAKE,EAC5C,IAAIiF,YAAwBvF,GAAS,CACjC,GAA0B,MAAtBY,KAAKid,cAAuB,CAC5B,GAAItY,EAAa2E,eAAgB,CAC7B,GAAIqI,GACA,GAAI0I,GAAkB,6BAG1B,OAFA3a,GAAQmK,kBAAkB8H,GAC1BhK,EAAS3L,EAAI2V,EACNhK,EACAhD,EAAa0E,aACpB1E,EAAamI,4BACT,GAAIoQ,GAA6Bld,OAG7C,MAAO2E,GAAaZ,MAChBsZ,EAASC,EAAMxY,OAAW9E,KAAM8E,UAKhD,MAAIpF,GAAQ+d,cACRL,EAAYpd,MACZ2H,EAAS3L,EAAIuhB,EACN5V,IAEPyV,EAAYpd,MACLud,GArFf,GAAIhc,GAAOlC,EAAQ,UACfgb,EAAoBjb,EAAQib,kBAC5B1S,EAAWpG,EAAKoG,SAChBwC,EAAc9K,EAAQ,kBAAkB6K,EA2I5C,OAjIA6S,GAA0Bhd,UAAUyd,iBAAmB,WACnD,MAAqB,KAAdxd,KAAKrB,MAOhBue,EAA6Bnd,UAAU+J,iBAAmB,WACtDsT,EAAYpd,KAAKmd,iBAmErB/d,EAAQW,UAAU2d,aAAe,SAASvG,EAASxY,EAAMgf,EAASL,GAC9D,MAAuB,kBAAZnG,GAA+BnX,KAAK4d,OACxC5d,KAAK+D,MAAM4Z,EACAL,EACAxY,OACA,GAAIiY,GAA0B/c,KAAMrB,EAAMwY,GAC1CrS,SAGtB1F,EAAQW,UAAU8d,OAClBze,EAAQW,UAAmB,QAAI,SAAUoX,GACrC,MAAOnX,MAAK0d,aAAavG,EACA,EACAgG,EACAA,IAI7B/d,EAAQW,UAAU+d,IAAM,SAAU3G,GAC9B,MAAOnX,MAAK0d,aAAavG,EAAS,EAAGgG,IAGzC/d,EAAQW,UAAUge,SAAW,SAAUC,GACnC,GAAIC,GAAM3b,UAAUtF,MACpB,IAAW,IAARihB,EACC,MAAOje,MAAK0d,aAAaM,EACA,EACAlZ,OACAqY,EAExB,IACU1gB,GADNyhB,EAAiB,GAAIxD,OAAMuD,EAAM,GAClCpT,EAAI,CACR,KAAKpO,EAAI,EAAGA,EAAIwhB,EAAM,IAAKxhB,EAAG,CAC1B,GAAI+N,GAAOlI,UAAU7F,EACrB,KAAI8E,EAAKmJ,SAASF,GAGd,MAAOpL,GAAQwN,OAAO,GAAIvG,WACtB,6DACmC9E,EAAK4E,YAAYqE,IAJxD0T,GAAerT,KAAOL,EAQ9B0T,EAAelhB,OAAS6N,CACxB,IAAIsM,GAAU7U,UAAU7F,EACxB,OAAOuD,MAAK0d,aAAavT,EAAY+T,EAAgB/G,EAASnX,MACrC,EACA8E,OACAqY,IAK1BJ,KAGJoB,iBAAiB,EAAEjb,SAAS,KAAKkb,IAAI,SAAS/e,EAAQnC,EAAOJ,GAChE,YACAI,GAAOJ,QAAU,SAASsC,EACAqI,EACArE,EACAC,EACAgb,EACA/a,GAQ1B,QAASgb,GAAwBnZ,EAAOoZ,EAAeC,GACnD,IAAK,GAAI/hB,GAAI,EAAGA,EAAI8hB,EAAcvhB,SAAUP,EAAG,CAC3C+hB,EAAY9S,cACZ,IAAI0H,GAAS1L,EAAS6W,EAAc9hB,IAAI0I,EAExC,IADAqZ,EAAY7S,cACRyH,IAAWzL,EAAU,CACrB6W,EAAY9S,cACZ,IAAIlM,GAAMJ,EAAQwN,OAAOjF,EAAS3L,EAElC,OADAwiB,GAAY7S,cACLnM,EAEX,GAAImF,GAAetB,EAAoB+P,EAAQoL,EAC/C,IAAI7Z,YAAwBvF,GAAS,MAAOuF,GAEhD,MAAO,MAGX,QAAS8Z,GAAaC,EAAmB3d,EAAU4d,EAAcxc,GAC7D,GAAImB,EAAMyE,eAAgB,CACtB,GAAI6W,GAAW,GAAIxf,GAAQgE,GACvByb,EAAkB7e,KAAK6e,gBAAkB,GAAIzf,GAAQgE,EACzDpD,MAAK8e,SAAWF,EAASf,OAAO,WAC5B,MAAOgB,KAEXD,EAAS3J,qBACT2J,EAAS7Z,aAAa/E,UACnB,CACH,GAAIN,GAAUM,KAAK8e,SAAW,GAAI1f,GAAQgE,EAC1C1D,GAAQuV,qBAEZjV,KAAK+e,OAAS5c,EACdnC,KAAKgf,mBAAqBN,EAC1B1e,KAAKif,UAAYle,EACjBf,KAAKkf,WAAapa,OAClB9E,KAAKmf,eAAyC,kBAAjBR,IACtBA,GAAcS,OAAOb,GACtBA,EACNve,KAAKqf,gBAAkB,KACvBrf,KAAKsf,oBAAqB,EA7C9B,GAAIC,GAASlgB,EAAQ,YACjBgH,EAAYkZ,EAAOlZ,UACnB9E,EAAOlC,EAAQ,UACfsI,EAAWpG,EAAKoG,SAChBD,EAAWnG,EAAKmG,SAChB6W,IA0CJhd,GAAK6V,SAASqH,EAAcJ,GAE5BI,EAAa1e,UAAUyf,YAAc,WACjC,MAAyB,QAAlBxf,KAAK8e,UAGhBL,EAAa1e,UAAU0f,SAAW,WAC9Bzf,KAAK8e,SAAW9e,KAAKkf,WAAa,KAC9B5b,EAAMyE,gBAA2C,OAAzB/H,KAAK6e,kBAC7B7e,KAAK6e,gBAAgBa,WACrB1f,KAAK6e,gBAAkB,OAI/BJ,EAAa1e,UAAU4f,kBAAoB,WACvC,IAAI3f,KAAKwf,cAAT,CACA,GAEIpM,GAFAwM,EAAwD,mBAA9B5f,MAAKkf,WAAmB,MAGtD,IAAKU,EAUD5f,KAAK8e,SAASpT,eACd0H,EAAS1L,EAAS1H,KAAKkf,WAAmB,QAAGniB,KAAKiD,KAAKkf,WACLpa,QAClD9E,KAAK8e,SAASnT,kBAbK,CACnB,GAAIgG,GAAS,GAAIvS,GAAQib,kBACrB,+BACJjb,GAAQygB,UAAUC,eAAiBnO;AACnC3R,KAAK8e,SAASjV,kBAAkB8H,GAChC3R,KAAK8e,SAASpT,eACd0H,EAAS1L,EAAS1H,KAAKkf,WAAkB,OAAGniB,KAAKiD,KAAKkf,WACLvN,GACjD3R,KAAK8e,SAASnT,cAOlB3L,KAAKsf,oBAAqB,EAC1Btf,KAAKqf,gBAAkB,KACvBrf,KAAK+f,UAAU3M,KAGnBqL,EAAa1e,UAAUigB,kBAAoB,SAAS7a,GAChDnF,KAAKqf,gBAAkB,KACvBrf,KAAK8e,SAASpT,cACd,IAAI0H,GAAS1L,EAAS1H,KAAKkf,WAAWe,MAAMljB,KAAKiD,KAAKkf,WAAY/Z,EAClEnF,MAAK8e,SAASnT,cACd3L,KAAK+f,UAAU3M,IAGnBqL,EAAa1e,UAAUmgB,iBAAmB,SAASvO,GAC/C3R,KAAKqf,gBAAkB,KACvBrf,KAAK8e,SAASjV,kBAAkB8H,GAChC3R,KAAK8e,SAASpT,cACd,IAAI0H,GAAS1L,EAAS1H,KAAKkf,WAAkB,OACxCniB,KAAKiD,KAAKkf,WAAYvN,EAC3B3R,MAAK8e,SAASnT,cACd3L,KAAK+f,UAAU3M,IAGnBqL,EAAa1e,UAAU+J,iBAAmB,WACtC,GAAI9J,KAAKqf,0BAA2BjgB,GAAS,CACzC,GAAIM,GAAUM,KAAKqf,eACnBrf,MAAKqf,gBAAkB,KACvB3f,EAAQoI,WAIhB2W,EAAa1e,UAAUL,QAAU,WAC7B,MAAOM,MAAK8e,UAGhBL,EAAa1e,UAAUogB,KAAO,WAC1BngB,KAAKkf,WAAalf,KAAKgf,mBAAmBjiB,KAAKiD,KAAKif,WACpDjf,KAAKif,UACDjf,KAAKgf,mBAAqBla,OAC9B9E,KAAKggB,kBAAkBlb,SAG3B2Z,EAAa1e,UAAUggB,UAAY,SAAU3M,GACzC,GAAI1T,GAAUM,KAAK8e,QACnB,IAAI1L,IAAWzL,EAEX,MADA3H,MAAKyf,WACDzf,KAAKsf,mBACE5f,EAAQoI,SAERpI,EAAQ0gB,gBAAgBhN,EAAOpX,GAAG,EAIjD,IAAImJ,GAAQiO,EAAOjO,KACnB,IAAIiO,EAAOiN,QAAS,EAEhB,MADArgB,MAAKyf,WACDzf,KAAKsf,mBACE5f,EAAQoI,SAERpI,EAAQyE,iBAAiBgB,EAGpC,IAAIR,GAAetB,EAAoB8B,EAAOnF,KAAK8e,SACnD,MAAMna,YAAwBvF,MAC1BuF,EACI2Z,EAAwB3Z,EACA3E,KAAKmf,eACLnf,KAAK8e,UACZ,OAAjBna,GAQA,WAPA3E,MAAKkgB,iBACD,GAAI7Z,GACA,oGAAoH4K,QAAQ,KAAMK,OAAOnM,IACzI,oBACAnF,KAAK+e,OAAOlQ,MAAM,MAAM5H,MAAM,GAAG,GAAImH,KAAK,OAM1DzJ,GAAeA,EAAaC,SAC5B,IAAI0b,GAAW3b,EAAaT,SAEG,MAAd,SAAXoc,IACFtgB,KAAKqf,gBAAkB1a,EACvBA,EAAa4b,OAAOvgB,KAAM,OACQ,KAAd,SAAXsgB,GACTlhB,EAAQyI,OAAOpF,OACXzC,KAAKggB,kBAAmBhgB,KAAM2E,EAAamU,UAEb,KAAd,SAAXwH,GACTlhB,EAAQyI,OAAOpF,OACXzC,KAAKkgB,iBAAkBlgB,KAAM2E,EAAagU,WAG9C3Y,KAAK2f,qBAKjBvgB,EAAQygB,UAAY,SAAUnB,EAAmB7B,GAC7C,GAAiC,kBAAtB6B,GACP,KAAM,IAAIrY,GAAU,yEAExB,IAAIsY,GAAe/Y,OAAOiX,GAAS8B,aAC/B6B,EAAgB/B,EAChBtc,GAAQ,GAAIxF,QAAQwF,KACxB,OAAO,YACH,GAAIse,GAAY/B,EAAkBnY,MAAMvG,KAAMsC,WAC1Coe,EAAQ,GAAIF,GAAc1b,OAAWA,OAAW6Z,EACtBxc,GAC1B3C,EAAMkhB,EAAMhhB,SAGhB,OAFAghB,GAAMxB,WAAauB,EACnBC,EAAMV,kBAAkBlb,QACjBtF,IAIfJ,EAAQygB,UAAUc,gBAAkB,SAAS7f,GACzC,GAAkB,kBAAPA,GACP,KAAM,IAAIuF,GAAU,gCAAkC9E,EAAK4E,YAAYrF,GAE3Eyd,GAActd,KAAKH,IAGvB1B,EAAQshB,MAAQ,SAAUhC,GAEtB,GADApb,EAAMiM,WAAW,kBAAmB,uBACH,kBAAtBmP,GACP,MAAOjX,GAAa,yEAExB,IAAIiZ,GAAQ,GAAIjC,GAAaC,EAAmB1e,MAC5CR,EAAMkhB,EAAMhhB,SAEhB,OADAghB,GAAMP,KAAK/gB,EAAQshB,OACZlhB,MAIR4Y,WAAW,GAAGlV,SAAS,KAAK0d,IAAI,SAASvhB,EAAQnC,EAAOJ,GAC3D,YACAI,GAAOJ,QACP,SAASsC,EAASoI,EAAcnE,EAAqBD,EAAUwE,EACtD+L,GACT,GAAIpS,GAAOlC,EAAQ,SACDkC,GAAKuF,YACRvF,EAAKmG,SACLnG,EAAKoG,QAuGpBvI,GAAQgP,KAAO,WACX,GACItN,GADA+f,EAAOve,UAAUtF,OAAS,CAE9B,IAAI6jB,EAAO,GAAgC,kBAApBve,WAAUue,GAAsB,CACnD/f,EAAKwB,UAAUue,EAGP,IAAIrhB,GA4ChB,GAAIwH,MAAUC,MAAMlK,KAAKuF,UACrBxB,IAAIkG,EAAK5J,KACb,IAAIoC,GAAM,GAAIgI,GAAaR,GAAMtH,SACjC,OAAcoF,UAAPhE,EAAmBtB,EAAIshB,OAAOhgB,GAAMtB,MAK5C0D,SAAS,KAAK6d,IAAI,SAAS1hB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QAAU,SAASsC,EACAoI,EACAC,EACApE,EACAD,EACAE,GAO1B,QAAS0d,GAAoBzhB,EAAUuB,EAAImgB,EAAOC,GAC9ClhB,KAAKmhB,aAAa5hB,GAClBS,KAAK8e,SAAS7J,oBACd,IAAIL,GAASjB,GACb3T,MAAKohB,UAAuB,OAAXxM,EAAkB9T,EAAKS,EAAKsT,WAAWD,EAAQ9T,GAChEd,KAAKqhB,iBAAmBH,IAAY9d,EAC9B,GAAIsX,OAAM1a,KAAKhD,UACf,KACNgD,KAAKshB,OAASL,EACdjhB,KAAKuhB,UAAY,EACjBvhB,KAAKwhB,UACL5Z,EAAMnF,OAAOzC,KAAKyhB,WAAYzhB,KAAM8E,QA6GxC,QAAS6X,GAAIpd,EAAUuB,EAAI+b,EAASqE,GAChC,GAAkB,kBAAPpgB,GACP,MAAO2G,GAAa,gCAAkClG,EAAK4E,YAAYrF,GAG3E,IAAImgB,GAAQ,CACZ,IAAgBnc,SAAZ+X,EAAuB,CACvB,GAAuB,gBAAZA,IAAoC,OAAZA,EAQ/B,MAAOzd,GAAQwN,OAAO,GAAIvG,WACV,gDACC9E,EAAK4E,YAAY0W,IATlC,IAAmC,gBAAxBA,GAAQ6E,YACf,MAAOtiB,GAAQwN,OACX,GAAIvG,WAAU,4CACE9E,EAAK4E,YAAY0W,EAAQ6E,cAEjDT,GAAQpE,EAAQ6E,YASxB,MAFAT,GAAyB,gBAAVA,IACXU,SAASV,IAAUA,GAAS,EAAIA,EAAQ,EACrC,GAAID,GAAoBzhB,EAAUuB,EAAImgB,EAAOC,GAASxhB,UApJjE,GAAIiU,GAAYvU,EAAQwU,WACpBrS,EAAOlC,EAAQ,UACfqI,EAAWnG,EAAKmG,SAChBC,EAAWpG,EAAKoG,SAChBC,EAAQxI,EAAQyI,MAepBtG,GAAK6V,SAAS4J,EAAqBxZ,GAEnCwZ,EAAoBjhB,UAAU0hB,WAAa,WACvCzhB,KAAK4hB,OAAO9c,QAAW,IAG3Bkc,EAAoBjhB,UAAU8hB,MAAQ,aAEtCb,EAAoBjhB,UAAUigB,kBAAoB,SAAU7a,EAAOuB,GAC/D,GAAIob,GAAS9hB,KAAK+hB,QACd/kB,EAASgD,KAAKhD,SACdglB,EAAkBhiB,KAAKqhB,iBACvBJ,EAAQjhB,KAAKshB,MAEjB,IAAI5a,EAAQ,GAGR,GAFAA,EAASA,GAAQ,EAAM,EACvBob,EAAOpb,GAASvB,EACZ8b,GAAS,IACTjhB,KAAKuhB,YACLvhB,KAAK4C,cACD5C,KAAKwf,eAAe,OAAO,MAEhC,CACH,GAAIyB,GAAS,GAAKjhB,KAAKuhB,WAAaN,EAGhC,MAFAa,GAAOpb,GAASvB,EAChBnF,KAAKwhB,OAAOvgB,KAAKyF,IACV,CAEa,QAApBsb,IAA0BA,EAAgBtb,GAASvB,EAEvD,IAAIzF,GAAUM,KAAK8e,SACfmD,EAAWjiB,KAAKohB,UAChBrgB,EAAWrB,EAAQ+E,aACvB/E,GAAQgM,cACR,IAAIlM,GAAMkI,EAASua,GAAUllB,KAAKgE,EAAUoE,EAAOuB,EAAO1J,GACtDuR,EAAiB7O,EAAQiM,aAO7B,IANArI,EAAM+K,sBACF7O,EACA+O,EACoB,OAApByT,EAA2B,iBAAmB,cAC9CtiB,GAEAF,IAAQmI,EAER,MADA3H,MAAK0D,QAAQlE,EAAIxD,IACV,CAGX,IAAI2I,GAAetB,EAAoB7D,EAAKQ,KAAK8e,SACjD,IAAIna,YAAwBvF,GAAS,CACjCuF,EAAeA,EAAaC,SAC5B,IAAI0b,GAAW3b,EAAaT,SAE5B,IAA+B,KAAd,SAAXoc,GAIF,MAHIW,IAAS,GAAGjhB,KAAKuhB,YACrBO,EAAOpb,GAAS/B,EAChBA,EAAa4b,OAAOvgB,MAAO0G,EAAQ,IAAK,IACjC,CACJ,IAA+B,KAAd,SAAX4Z,GAEN,MAA+B,MAAd,SAAXA,IACTtgB,KAAK0D,QAAQiB,EAAagU,YACnB,IAEP3Y,KAAK+I,WACE,EANPvJ,GAAMmF,EAAamU,SAS3BgJ,EAAOpb,GAASlH,EAEpB,GAAI0iB,KAAkBliB,KAAKmiB,cAC3B,OAAID,IAAiBllB,IACO,OAApBglB,EACAhiB,KAAKkhB,QAAQY,EAAQE,GAErBhiB,KAAKoiB,SAASN,IAEX,IAKfd,EAAoBjhB,UAAU6C,YAAc,WAIxC,IAHA,GAAIC,GAAQ7C,KAAKwhB,OACbP,EAAQjhB,KAAKshB,OACbQ,EAAS9hB,KAAK+hB,QACXlf,EAAM7F,OAAS,GAAKgD,KAAKuhB,UAAYN,GAAO,CAC/C,GAAIjhB,KAAKwf,cAAe,MACxB,IAAI9Y,GAAQ7D,EAAMzF,KAClB4C,MAAKggB,kBAAkB8B,EAAOpb,GAAQA,KAI9Csa,EAAoBjhB,UAAUmhB,QAAU,SAAUmB,EAAUP,GAIxD,IAAK,GAHD7D,GAAM6D,EAAO9kB,OACbwC,EAAM,GAAIkb,OAAMuD,GAChBpT,EAAI,EACCpO,EAAI,EAAGA,EAAIwhB,IAAOxhB,EACnB4lB,EAAS5lB,KAAI+C,EAAIqL,KAAOiX,EAAOrlB,GAEvC+C,GAAIxC,OAAS6N,EACb7K,KAAKoiB,SAAS5iB,IAGlBwhB,EAAoBjhB,UAAUiiB,gBAAkB,WAC5C,MAAOhiB,MAAKqhB,kBA4BhBjiB,EAAQW,UAAU4c,IAAM,SAAU7b,EAAI+b,GAClC,MAAOF,GAAI3c,KAAMc,EAAI+b,EAAS,OAGlCzd,EAAQud,IAAM,SAAUpd,EAAUuB,EAAI+b,EAASqE,GAC3C,MAAOvE,GAAIpd,EAAUuB,EAAI+b,EAASqE,OAMnChe,SAAS,KAAKof,IAAI,SAASjjB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QACP,SAASsC,EAASgE,EAAUC,EAAqBoE,EAAcnE,GAC/D,GAAI/B,GAAOlC,EAAQ,UACfqI,EAAWnG,EAAKmG,QAEpBtI,GAAQ8W,OAAS,SAAUpV,GACvB,GAAkB,kBAAPA,GACP,KAAM,IAAI1B,GAAQiH,UAAU,gCAAkC9E,EAAK4E,YAAYrF,GAEnF,OAAO,YACH,GAAItB,GAAM,GAAIJ,GAAQgE,EACtB5D,GAAIyV,qBACJzV,EAAIkM,cACJ,IAAIvG,GAAQuC,EAAS5G,GAAIyF,MAAMvG,KAAMsC,WACjCiM,EAAiB/O,EAAImM,aAIzB,OAHArI,GAAM+K,sBACFlJ,EAAOoJ,EAAgB,iBAAkB/O,GAC7CA,EAAI+iB,sBAAsBpd,GACnB3F,IAIfJ,EAAQojB,QAAUpjB,EAAa,IAAI,SAAU0B,GACzC,GAAkB,kBAAPA,GACP,MAAO2G,GAAa,gCAAkClG,EAAK4E,YAAYrF,GAE3E,IAAItB,GAAM,GAAIJ,GAAQgE,EACtB5D,GAAIyV,qBACJzV,EAAIkM,cACJ,IAAIvG,EACJ,IAAI7C,UAAUtF,OAAS,EAAG,CACtBsG,EAAMiM,WAAW,gDACjB,IAAIvO,GAAMsB,UAAU,GAChB+J,EAAM/J,UAAU,EACpB6C,GAAQ5D,EAAKqI,QAAQ5I,GAAO0G,EAAS5G,GAAIyF,MAAM8F,EAAKrL,GACxB0G,EAAS5G,GAAI/D,KAAKsP,EAAKrL,OAEnDmE,GAAQuC,EAAS5G,IAErB,IAAIyN,GAAiB/O,EAAImM,aAIzB,OAHArI,GAAM+K,sBACFlJ,EAAOoJ,EAAgB,cAAe/O,GAC1CA,EAAI+iB,sBAAsBpd,GACnB3F,GAGXJ,EAAQW,UAAUwiB,sBAAwB,SAAUpd,GAC5CA,IAAU5D,EAAKoG,SACf3H,KAAKogB,gBAAgBjb,EAAMnJ,GAAG,GAE9BgE,KAAKmE,iBAAiBgB,GAAO,OAKlCjC,SAAS,KAAKuf,IAAI,SAASpjB,EAAQnC,EAAOJ,GAC7C,YAOA,SAAS4lB,GAAe1d,GACpB,MAAOA,aAAerI,QAClBud,EAAIwB,eAAe1W,KAASrI,MAAMoD,UAI1C,QAAS4iB,GAAuB3d,GAC5B,GAAIxF,EACJ,IAAIkjB,EAAe1d,GAAM,CACrBxF,EAAM,GAAIsa,GAAiB9U,GAC3BxF,EAAIgN,KAAOxH,EAAIwH,KACfhN,EAAI0G,QAAUlB,EAAIkB,QAClB1G,EAAI2C,MAAQ6C,EAAI7C,KAEhB,KAAK,GADDwI,GAAOuP,EAAIvP,KAAK3F,GACXvI,EAAI,EAAGA,EAAIkO,EAAK3N,SAAUP,EAAG,CAClC,GAAIqO,GAAMH,EAAKlO,EACVmmB,GAAU3T,KAAKnE,KAChBtL,EAAIsL,GAAO9F,EAAI8F,IAGvB,MAAOtL,GAGX,MADA+B,GAAKshB,+BAA+B7d,GAC7BA,EAGX,QAAS8d,GAAmBpjB,EAASqjB,GACjC,MAAO,UAAShL,EAAK5S,GACjB,GAAgB,OAAZzF,EAAJ,CACA,GAAIqY,EAAK,CACL,GAAIiL,GAAUL,EAAuBM,EAAiBlL,GACtDrY,GAAQmK,kBAAkBmZ,GAC1BtjB,EAAQgE,QAAQsf,OACb,IAAKD,EAEL,CACH,GAAI/b,MAAUC,MAAMlK,KAAKuF,UAAW,EACpC5C,GAAQggB,SAAS1Y,OAHjBtH,GAAQggB,SAASva,EAKrBzF,GAAU,OA7ClB,GAAI6B,GAAOlC,EAAQ,UACf4jB,EAAmB1hB,EAAK0hB,iBACxB1D,EAASlgB,EAAQ,YACjBya,EAAmByF,EAAOzF,iBAC1BI,EAAM7a,EAAQ,SAOdujB,EAAY,gCAsChB1lB,GAAOJ,QAAUgmB,IAEd1K,WAAW,GAAGrN,QAAQ,GAAG7H,SAAS,KAAKggB,IAAI,SAAS7jB,EAAQnC,EAAOJ,GACtE,YACAI,GAAOJ,QAAU,SAASsC,GAM1B,QAAS+jB,GAAcC,EAAKC,GACxB,GAAI3jB,GAAUM,IACd,KAAKuB,EAAKqI,QAAQwZ,GAAM,MAAOE,GAAevmB,KAAK2C,EAAS0jB,EAAKC,EACjE,IAAI7jB,GACAkI,EAAS2b,GAAU9c,MAAM7G,EAAQ+E,eAAgB,MAAM2a,OAAOgE,GAC9D5jB,KAAQmI,GACRC,EAAMvF,WAAW7C,EAAIxD,GAI7B,QAASsnB,GAAeF,EAAKC,GACzB,GAAI3jB,GAAUM,KACVe,EAAWrB,EAAQ+E,cACnBjF,EAAcsF,SAARse,EACJ1b,EAAS2b,GAAUtmB,KAAKgE,EAAU,MAClC2G,EAAS2b,GAAUtmB,KAAKgE,EAAU,KAAMqiB,EAC1C5jB,KAAQmI,GACRC,EAAMvF,WAAW7C,EAAIxD,GAG7B,QAASunB,GAAa5R,EAAQ0R,GAC1B,GAAI3jB,GAAUM,IACd,KAAK2R,EAAQ,CACT,GAAI6R,GAAY,GAAI7mB,OAAMgV,EAAS,GACnC6R,GAAUzJ,MAAQpI,EAClBA,EAAS6R,EAEb,GAAIhkB,GAAMkI,EAAS2b,GAAUtmB,KAAK2C,EAAQ+E,cAAekN,EACrDnS,KAAQmI,GACRC,EAAMvF,WAAW7C,EAAIxD,GAlC7B,GAAIuF,GAAOlC,EAAQ,UACfuI,EAAQxI,EAAQyI,OAChBH,EAAWnG,EAAKmG,SAChBC,EAAWpG,EAAKoG,QAmCpBvI,GAAQW,UAAU0jB,WAAarkB,EAAQW,UAAU2jB,QAAU,SAAUL,EACAxG,GACjE,GAAuB,kBAAZwG,GAAwB,CAC/B,GAAIM,GAAUL,CACExe,UAAZ+X,GAAyBjX,OAAOiX,GAASiE,SACzC6C,EAAUR,GAEdnjB,KAAK+D,MACD4f,EACAJ,EACAze,OACA9E,KACAqjB,GAGR,MAAOrjB,UAIRkD,SAAS,KAAK0gB,IAAI,SAASvkB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QAAU,WAUjB,QAASuhB,MAgDT,QAASwF,GAAM1kB,EAAMwN,GACjB,GAAY,MAARxN,GAAgBA,EAAK0a,cAAgBza,EACrC,KAAM,IAAIiH,GAAU,uFAExB,IAAwB,kBAAbsG,GACP,KAAM,IAAItG,GAAU,gCAAkC9E,EAAK4E,YAAYwG,IAK/E,QAASvN,GAAQuN,GACTA,IAAavJ,GACbygB,EAAM7jB,KAAM2M,GAEhB3M,KAAKkE,UAAY,EACjBlE,KAAK8jB,qBAAuBhf,OAC5B9E,KAAK+jB,mBAAqBjf,OAC1B9E,KAAKgkB,UAAYlf,OACjB9E,KAAKikB,WAAanf,OAClB9E,KAAKkkB,qBAAqBvX,GAC1B3M,KAAKyL,kBACLzL,KAAKkX,WAAW,iBAAkBlX,MAqnBtC,QAASmkB,GAAaC,GAAIpkB,KAAKN,QAAQyE,iBAAiBigB,GACxD,QAASC,GAAYD,GAAIpkB,KAAKN,QAAQ0gB,gBAAgBgE,GAAG,GA4CrD,QAASE,GAAUnf,GACf,GAAIof,GAAI,GAAInlB,GAAQgE,EACpBmhB,GAAET,qBAAuB3e,EACzBof,EAAER,mBAAqB5e,EACvBof,EAAEP,UAAY7e,EACdof,EAAEN,WAAa9e,EArvBvB,GAaIwO,GAbA6Q,EAA0B,WAC1B,MAAO,IAAIne,GAAU,wEAErBoe,EAAiB,WACjB,MAAO,IAAIrlB,GAAQslB,kBAAkB1kB,KAAK4E,YAE1C6C,EAAe,SAAS6H,GACxB,MAAOlQ,GAAQwN,OAAO,GAAIvG,GAAUiJ,KAGpCqV,KACApjB,EAAOlC,EAAQ,SAIfsU,GADApS,EAAKS,OACO,WACR,GAAIxC,GAAMV,EAAQ8V,MAElB,OADY9P,UAARtF,IAAmBA,EAAM,MACtBA,GAGC,WACR,MAAO,OAGf+B,EAAK4M,kBAAkB/O,EAAS,aAAcuU,EAE9C,IAAIuG,GAAM7a,EAAQ,SACdY,EAAQZ,EAAQ,WAChBuI,EAAQ,GAAI3H,EAChBia,GAAIS,eAAevb,EAAS,UAAW+F,MAAOyC,GAC9C,IAAI2X,GAASlgB,EAAQ,YACjBgH,EAAYjH,EAAQiH,UAAYkZ,EAAOlZ,SAC3CjH,GAAQob,WAAa+E,EAAO/E,UAC5B,IAAIH,GAAoBjb,EAAQib,kBAAoBkF,EAAOlF,iBAC3Djb,GAAQkb,aAAeiF,EAAOjF,aAC9Blb,EAAQ0a,iBAAmByF,EAAOzF,iBAClC1a,EAAQ+b,eAAiBoE,EAAOzF,iBAChC1a,EAAQmb,eAAiBgF,EAAOhF,cAChC,IAAInX,GAAW,aACXwhB,KACA1a,KACA7G,EAAsBhE,EAAQ,eAAeD,EAASgE,GACtDoE,EACAnI,EAAQ,mBAAmBD,EAASgE,EACTC,EAAqBoE,EAAc4W,GAC9DpT,EAAU5L,EAAQ,aAAaD,GAE/BiM,EAAgBJ,EAAQpF,OACxBvC,EAAQjE,EAAQ,mBAAmBD,EAAS6L,GAE5C8R,GADgBzZ,EAAM6H,cAEtB9L,EAAQ,aAAaD,EAASiE,EAAqB6G,IACnDC,EAAc9K,EAAQ,kBAAkB6K,GACxC4Y,EAAqBzjB,EAAQ,cAC7BsI,EAAWpG,EAAKoG,SAChBD,EAAWnG,EAAKmG,QA0sBhB,OAjrBJtI,GAAQW,UAAUqG,SAAW,WACzB,MAAO,oBAGXhH,EAAQW,UAAU6Y,OAASxZ,EAAQW,UAAiB,MAAI,SAAUe,GAC9D,GAAImd,GAAM3b,UAAUtF,MACpB,IAAIihB,EAAM,EAAG,CACT,GACWxhB,GADPyhB,EAAiB,GAAIxD,OAAMuD,EAAM,GACjCpT,EAAI,CACR,KAAKpO,EAAI,EAAGA,EAAIwhB,EAAM,IAAKxhB,EAAG,CAC1B,GAAI+N,GAAOlI,UAAU7F,EACrB,KAAI8E,EAAKmJ,SAASF,GAGd,MAAO/C,GAAa,0DACiBlG,EAAK4E,YAAYqE,GAHtD0T,GAAerT,KAAOL,EAQ9B,MAFA0T,GAAelhB,OAAS6N,EACxB/J,EAAKwB,UAAU7F,GACRuD,KAAK4d,KAAK9Y,OAAWqF,EAAY+T,EAAgBpd,EAAId,OAEhE,MAAOA,MAAK4d,KAAK9Y,OAAWhE,IAGhC1B,EAAQW,UAAU8kB,QAAU,WACxB,MAAO7kB,MAAK+D,MAAM0gB,EACdA,EAAgB3f,OAAW9E,KAAM8E,SAGzC1F,EAAQW,UAAU6d,KAAO,SAAUkH,EAAYC,GAC3C,GAAIzhB,EAAMsM,YAActN,UAAUtF,OAAS,GACjB,kBAAf8nB,IACc,kBAAdC,GAA0B,CACjC,GAAIzV,GAAM,kDACF/N,EAAK4E,YAAY2e,EACrBxiB,WAAUtF,OAAS,IACnBsS,GAAO,KAAO/N,EAAK4E,YAAY4e,IAEnC/kB,KAAKgI,MAAMsH,GAEf,MAAOtP,MAAK+D,MAAM+gB,EAAYC,EAAWjgB,OAAWA,OAAWA,SAGnE1F,EAAQW,UAAUsgB,KAAO,SAAUyE,EAAYC,GAC3C,GAAIrlB,GACAM,KAAK+D,MAAM+gB,EAAYC,EAAWjgB,OAAWA,OAAWA,OAC5DpF,GAAQslB,eAGZ5lB,EAAQW,UAAU+gB,OAAS,SAAUhgB,GACjC,MAAkB,kBAAPA,GACA2G,EAAa,gCAAkClG,EAAK4E,YAAYrF,IAEpEd,KAAKqZ,MAAMtV,MAAMjD,EAAIgE,OAAWA,OAAW8f,EAAO9f,SAG7D1F,EAAQW,UAAUklB,OAAS,WACvB,GAAIzlB,IACAgO,aAAa,EACbiQ,YAAY,EACZyH,iBAAkBpgB,OAClBqgB,gBAAiBrgB,OASrB,OAPI9E,MAAKwN,eACLhO,EAAI0lB,iBAAmBllB,KAAKmF,QAC5B3F,EAAIgO,aAAc,GACXxN,KAAKyd,eACZje,EAAI2lB,gBAAkBnlB,KAAK2R,SAC3BnS,EAAIie,YAAa,GAEdje,GAGXJ,EAAQW,UAAUsZ,IAAM,WAIpB,MAHI/W,WAAUtF,OAAS,GACnBgD,KAAKgI,MAAM,wDAER,GAAIR,GAAaxH,MAAMN,WAGlCN,EAAQW,UAAU4N,MAAQ,SAAU7M,GAChC,MAAOd,MAAK4Y,OAAOrX,EAAK6jB,wBAAyBtkB,IAGrD1B,EAAQimB,kBAAoBnoB,EAAOJ,QAEnCsC,EAAQkmB,GAAK,SAAUlC,GACnB,MAAOA,aAAehkB,IAG1BA,EAAQmmB,SAAWnmB,EAAQomB,aAAe,SAAS1kB,GAC/C,GAAItB,GAAM,GAAIJ,GAAQgE,EACtB5D,GAAIyV,oBACJ,IAAI8N,GAAYzgB,UAAUtF,OAAS,KAAM4I,OAAOtD,UAAU,IAAIygB,UAE1D3P,EAAS1L,EAAS5G,GAAIgiB,EAAmBtjB,EAAKujB,GAKlD,OAJI3P,KAAWzL,GACXnI,EAAI4gB,gBAAgBhN,EAAOpX,GAAG,GAE7BwD,EAAIimB,iBAAiBjmB,EAAIkmB,sBACvBlmB,GAGXJ,EAAQia,IAAM,SAAU9Z,GACpB,MAAO,IAAIiI,GAAajI,GAAUG,WAGtCN,EAAQumB,KAAO,SAAU3gB,GACrB,GAAIxF,GAAM6D,EAAoB2B,EAO9B,OANMxF,aAAeJ,KACjBI,EAAM,GAAIJ,GAAQgE,GAClB5D,EAAIyV,qBACJzV,EAAIomB,gBACJpmB,EAAIukB,mBAAqB/e,GAEtBxF,GAGXJ,EAAQgG,QAAUhG,EAAQymB,UAAYzmB,EAAQumB,KAE9CvmB,EAAQwN,OAASxN,EAAQ0mB,SAAW,SAAUnU,GAC1C,GAAInS,GAAM,GAAIJ,GAAQgE,EAGtB,OAFA5D,GAAIyV,qBACJzV,EAAI4gB,gBAAgBzO,GAAQ,GACrBnS,GAGXJ,EAAQoC,aAAe,SAASV,GAC5B,GAAkB,kBAAPA,GACP,KAAM,IAAIuF,GAAU,gCAAkC9E,EAAK4E,YAAYrF,GAE3E,OAAO8G,GAAMpG,aAAaV,IAG9B1B,EAAQW,UAAUgE,MAAQ,SACtB+gB,EACAC,EACAthB,EAAM1C,EACNglB,GAEA,GAAIC,GAAoClhB,SAAjBihB,EACnBrmB,EAAUsmB,EAAmBD,EAAe,GAAI3mB,GAAQgE,GACxDgB,EAASpE,KAAK4E,UACd0b,EAAWlc,EAAOF,SAEjB8hB,KACDtmB,EAAQ6E,eAAevE,KAAM,GAC7BN,EAAQuV,qBACSnQ,SAAb/D,GACgC,KAAb,QAAjBf,KAAKkE,aAEHnD,EAD4B,KAAd,SAAXuf,GACQtgB,KAAKyE,cAELL,IAAWpE,KAAO8E,OAAY9E,KAAKiF,UAGtDjF,KAAKkX,WAAW,iBAAkBlX,KAAMN,GAG5C,IAAIkV,GAASjB,GACb,IAAgC,KAAd,SAAX2M,GAA6B,CAChC,GAAInJ,GAAShS,EAAO8gB,EAAU7hB,EAAO8hB,iBACN,MAAd,SAAX5F,IACFnb,EAAQf,EAAO2f,mBACf5M,EAAU2N,GACwB,KAAd,SAAXxE,IACTnb,EAAQf,EAAO0f,qBACf3M,EAAU4N,EACV3gB,EAAOsQ,+BAEPuR,EAAU7hB,EAAO+hB,uCACjBhhB,EAAQ,GAAIkV,GAAkB,8BAC9BjW,EAAOyF,kBAAkB1E,GACzBgS,EAAU4N,GAGdnd,EAAMnF,OAAOwjB,EAAS7hB,GAClB+S,QAAoB,OAAXvC,EAAkBuC,EACD,kBAAZA,IACN5V,EAAKsT,WAAWD,EAAQuC,GAChCzX,QAASA,EACTqB,SAAUA,EACVoE,MAAOA,QAGXf,GAAOgiB,cAActB,EAAYC,EAAWrlB,EAASqB,EAAU6T,EAGnE,OAAOlV,IAGXN,EAAQW,UAAUmJ,QAAU,WACxB,MAAwB,OAAjBlJ,KAAKkE,WAGhB9E,EAAQW,UAAU0lB,cAAgB,WAC9B,MAAwC,MAAf,UAAjBzlB,KAAKkE,YAGjB9E,EAAQW,UAAUqI,aAAe,WAC7B,MAAuC,aAAd,SAAjBpI,KAAKkE,YAGjB9E,EAAQW,UAAUsmB,WAAa,SAAUpI,GACrCje,KAAKkE,UAAalE,KAAKkE,WAAY,MACxB,MAAN+Z,GAGT7e,EAAQW,UAAU6lB,cAAgB,WAC9B5lB,KAAKkE,UAA6B,SAAjBlE,KAAKkE,UACtBlE,KAAKkX,WAAW,mBAAoBlX,OAGxCZ,EAAQW,UAAUumB,aAAe,WAC7BtmB,KAAKkE,UAA6B,SAAjBlE,KAAKkE,UACtBlE,KAAKkX,WAAW,kBAAmBlX,OAGvCZ,EAAQW,UAAUwmB,cAAgB,WAC9BvmB,KAAKkE,UAA6B,SAAjBlE,KAAKkE,UACtBlE,KAAKkX,WAAW,kBAAmBlX,OAGvCZ,EAAQW,UAAUilB,YAAc,WAC5BhlB,KAAKkE,UAA6B,QAAjBlE,KAAKkE,WAG1B9E,EAAQW,UAAUymB,SAAW,WACzB,OAAyB,QAAjBxmB,KAAKkE,WAAuB,GAGxC9E,EAAQW,UAAU0mB,gBAAkB,WAChCzmB,KAAKkE,UAAYlE,KAAKkE,WAAY,OAGtC9E,EAAQW,UAAUiJ,cAAgB,WAC9BhJ,KAAKkE,UAA6B,MAAjBlE,KAAKkE,UACtBlE,KAAKkX,WAAW,mBAAoBlX,OAGxCZ,EAAQW,UAAU0I,oBAAsB,WACpCzI,KAAKkE,UAA6B,QAAjBlE,KAAKkE,WAG1B9E,EAAQW,UAAU2lB,oBAAsB,WAChC9d,EAAMlG,uBACV1B,KAAKkE,UAA6B,UAAjBlE,KAAKkE,YAG1B9E,EAAQW,UAAU2mB,YAAc,SAAUhgB,GACtC,GAAIlH,GAAgB,IAAVkH,EAAc1G,KAAKikB,WAAajkB,KAC1B,EAAR0G,EAAY,EAAI,EACxB,IAAIlH,IAAQmlB,EAEL,MAAY7f,UAARtF,GAAqBQ,KAAKkF,WAC1BlF,KAAKyE,cAETjF,GAGXJ,EAAQW,UAAU4mB,WAAa,SAAUjgB,GACrC,MAAO1G,MACS,EAAR0G,EAAY,EAAI,IAG5BtH,EAAQW,UAAU6mB,sBAAwB,SAAUlgB,GAChD,MAAO1G,MACS,EAAR0G,EAAY,EAAI,IAG5BtH,EAAQW,UAAU8mB,oBAAsB,SAAUngB,GAC9C,MAAO1G,MACS,EAAR0G,EAAY,EAAI,IAG5BtH,EAAQW,UAAU0E,YAAc,aAEhCrF,EAAQW,UAAU+mB,kBAAoB,SAAUC,GAC5C,GACIC,IADWD,EAAS7iB,UACV6iB,EAASjD,sBACnBlX,EAASma,EAAShD,mBAClBrkB,EAAUqnB,EAAS/C,UACnBjjB,EAAWgmB,EAASL,YAAY,EACnB5hB,UAAb/D,IAAwBA,EAAW4jB,GACvC3kB,KAAKomB,cAAcY,EAASpa,EAAQlN,EAASqB,EAAU,OAG3D3B,EAAQW,UAAUknB,mBAAqB,SAAUF,EAAUrgB,GACvD,GAAIsgB,GAAUD,EAASH,sBAAsBlgB,GACzCkG,EAASma,EAASF,oBAAoBngB,GACtChH,EAAUqnB,EAASJ,WAAWjgB,GAC9B3F,EAAWgmB,EAASL,YAAYhgB,EACnB5B,UAAb/D,IAAwBA,EAAW4jB,GACvC3kB,KAAKomB,cAAcY,EAASpa,EAAQlN,EAASqB,EAAU,OAG3D3B,EAAQW,UAAUqmB,cAAgB,SAC9BY,EACApa,EACAlN,EACAqB,EACA6T,GAEA,GAAIlO,GAAQ1G,KAAKkJ,SAOjB,IALIxC,GAAS,QACTA,EAAQ,EACR1G,KAAKqmB,WAAW,IAGN,IAAV3f,EACA1G,KAAKgkB,UAAYtkB,EACjBM,KAAKikB,WAAaljB,EACK,kBAAZimB,KACPhnB,KAAK8jB,qBACU,OAAXlP,EAAkBoS,EAAUzlB,EAAKsT,WAAWD,EAAQoS,IAEtC,kBAAXpa,KACP5M,KAAK+jB,mBACU,OAAXnP,EAAkBhI,EAASrL,EAAKsT,WAAWD,EAAQhI,QAExD,CACH,GAAIsa,GAAe,EAARxgB,EAAY,CACvB1G,MAAKknB,EAAO,GAAKxnB,EACjBM,KAAKknB,EAAO,GAAKnmB,EACM,kBAAZimB,KACPhnB,KAAKknB,EAAO,GACG,OAAXtS,EAAkBoS,EAAUzlB,EAAKsT,WAAWD,EAAQoS,IAEtC,kBAAXpa,KACP5M,KAAKknB,EAAO,GACG,OAAXtS,EAAkBhI,EAASrL,EAAKsT,WAAWD,EAAQhI,IAI/D,MADA5M,MAAKqmB,WAAW3f,EAAQ,GACjBA,GAGXtH,EAAQW,UAAUwgB,OAAS,SAAU4G,EAAWnmB,GAC5ChB,KAAKomB,cAActhB,OAAWA,OAAW9D,EAAKmmB,EAAW,OAG7D/nB,EAAQW,UAAUoE,iBAAmB,SAASgB,EAAOiiB,GACjD,GAAsC,KAAf,UAAjBpnB,KAAKkE,WAAX,CACA,GAAIiB,IAAUnF,KACV,MAAOA,MAAKogB,gBAAgBoE,KAA2B,EAC3D,IAAI7f,GAAetB,EAAoB8B,EAAOnF,KAC9C,MAAM2E,YAAwBvF,IAAU,MAAOY,MAAK0f,SAASva,EAEzDiiB,IAAYpnB,KAAKuE,eAAeI,EAAc,EAElD,IAAIjF,GAAUiF,EAAaC,SAE3B,IAAIlF,IAAYM,KAEZ,WADAA,MAAK0D,QAAQ8gB,IAIjB,IAAIlE,GAAW5gB,EAAQwE,SACvB,IAA+B,KAAd,SAAXoc,GAA6B,CAC/B,GAAIrC,GAAMje,KAAKkJ,SACX+U,GAAM,GAAGve,EAAQonB,kBAAkB9mB,KACvC,KAAK,GAAIvD,GAAI,EAAGA,EAAIwhB,IAAOxhB,EACvBiD,EAAQunB,mBAAmBjnB,KAAMvD,EAErCuD,MAAKumB,gBACLvmB,KAAKqmB,WAAW,GAChBrmB,KAAKqnB,aAAa3nB,OACf,IAA+B,KAAd,SAAX4gB,GACTtgB,KAAK0f,SAAShgB,EAAQoZ,cACnB,IAA+B,KAAd,SAAXwH,GACTtgB,KAAK0D,QAAQhE,EAAQiZ,eAClB,CACH,GAAIhH,GAAS,GAAI0I,GAAkB,6BACnC3a,GAAQmK,kBAAkB8H,GAC1B3R,KAAK0D,QAAQiO,MAIrBvS,EAAQW,UAAUqgB,gBAClB,SAASzO,EAAQ2V,EAAaC,GAC1B,GAAI1b,GAAQtK,EAAKimB,kBAAkB7V,GAC/B8V,EAAW5b,IAAU8F,CACzB,KAAK8V,IAAaF,GAA0BjkB,EAAMsM,WAAY,CAC1D,GAAI1J,GAAU,4CACV3E,EAAK4E,YAAYwL,EACrB3R,MAAKgI,MAAM9B,GAAS,GAExBlG,KAAK6J,kBAAkBgC,IAAOyb,GAAcG,GAC5CznB,KAAK0D,QAAQiO,IAGjBvS,EAAQW,UAAUmkB,qBAAuB,SAAUvX,GAC/C,GAAIA,IAAavJ,EAAjB,CACA,GAAI1D,GAAUM,IACdA,MAAKiV,qBACLjV,KAAK0L,cACL,IAAI4b,IAAc,EACdnrB,EAAI6D,KAAKgX,SAASrK,EAAU,SAASxH,GACrCzF,EAAQyE,iBAAiBgB,IAC1B,SAAUwM,GACTjS,EAAQ0gB,gBAAgBzO,EAAQ2V,IAEpCA,IAAc,EACdtnB,KAAK2L,cAEK7G,SAAN3I,GACAuD,EAAQ0gB,gBAAgBjkB,GAAG,KAInCiD,EAAQW,UAAU2nB,0BAA4B,SAC1CvQ,EAASpW,EAAUoE,EAAOzF,GAE1B,GAAI4gB,GAAW5gB,EAAQwE,SACvB,IAA4B,KAAX,MAAXoc,GAAN,CACA5gB,EAAQgM,cACR,IAAIic,EACA5mB,KAAa6jB,EACRzf,GAAiC,gBAAjBA,GAAMnI,OAKvB2qB,EAAIjgB,EAASyP,GAAS5Q,MAAMvG,KAAKyE,cAAeU,IAJhDwiB,EAAIhgB,EACJggB,EAAE3rB,EAAI,GAAIqK,GAAU,iCACI9E,EAAK4E,YAAYhB,KAK7CwiB,EAAIjgB,EAASyP,GAASpa,KAAKgE,EAAUoE,EAEzC,IAAIoJ,GAAiB7O,EAAQiM,aAC7B2U,GAAW5gB,EAAQwE,UACS,KAAX,MAAXoc,KAEFqH,IAAMzd,EACNxK,EAAQgE,QAAQyB,GACTwiB,IAAMhgB,EACbjI,EAAQ0gB,gBAAgBuH,EAAE3rB,GAAG,IAE7BsH,EAAM+K,sBAAsBsZ,EAAGpZ,EAAgB,GAAK7O,EAASM,MAC7DN,EAAQyE,iBAAiBwjB,OAIjCvoB,EAAQW,UAAU6E,QAAU,WAExB,IADA,GAAIpF,GAAMQ,KACHR,EAAI4I,gBAAgB5I,EAAMA,EAAI6I,WACrC,OAAO7I,IAGXJ,EAAQW,UAAUsI,UAAY,WAC1B,MAAOrI,MAAK+jB,oBAGhB3kB,EAAQW,UAAUsnB,aAAe,SAAS3nB,GACtCM,KAAK+jB,mBAAqBrkB,GAG9BN,EAAQW,UAAU6nB,eAAiB,SAASloB,EAASyX,EAASpW,EAAUoE,GACpE,GAAI0iB,GAAYnoB,YAAmBN,GAC/BkhB,EAAWtgB,KAAKkE,UAChB4jB,EAA8C,KAAf,UAAXxH,EACI,MAAX,MAAXA,IACEuH,GAAWnoB,EAAQsK,0BAEnBjJ,YAAoBgc,IACpBhc,EAASyc,oBACTzc,EAASkc,cAAgBvd,EACrBgI,EAASyP,GAASpa,KAAKgE,EAAUoE,KAAWwC,GAC5CjI,EAAQgE,QAAQiE,EAAS3L,IAEtBmb,IAAYsN,EACnB/kB,EAAQggB,SAAS+E,EAAe1nB,KAAKgE,IAC9BA,YAAoBsd,GAC3Btd,EAAS4e,kBAAkBjgB,GACpBmoB,GAAanoB,YAAmB8H,GACvC9H,EAAQqJ,UAERhI,EAAS+G,UAEa,kBAAZqP,GACT0Q,GAGGC,GAAiBpoB,EAAQgmB,sBAC7B1lB,KAAK0nB,0BAA0BvQ,EAASpW,EAAUoE,EAAOzF,IAHzDyX,EAAQpa,KAAKgE,EAAUoE,EAAOzF,GAK3BqB,YAAoBsd,GACtBtd,EAASye,gBACqB,KAAd,SAAXc,GACFvf,EAASif,kBAAkB7a,EAAOzF,GAElCqB,EAASmf,iBAAiB/a,EAAOzF,IAGlCmoB,IACHC,GAAiBpoB,EAAQgmB,sBACE,KAAd,SAAXpF,GACF5gB,EAAQggB,SAASva,GAEjBzF,EAAQgE,QAAQyB,KAK5B/F,EAAQW,UAAUomB,uCAAyC,SAAS9Z,GAChE,GAAI8K,GAAU9K,EAAI8K,QACdzX,EAAU2M,EAAI3M,QACdqB,EAAWsL,EAAItL,SACfoE,EAAQkH,EAAIlH,KACO,mBAAZgS,GACDzX,YAAmBN,GAGrBY,KAAK0nB,0BAA0BvQ,EAASpW,EAAUoE,EAAOzF,GAFzDyX,EAAQpa,KAAKgE,EAAUoE,EAAOzF,GAI3BA,YAAmBN,IAC1BM,EAAQgE,QAAQyB,IAIxB/F,EAAQW,UAAUmmB,kBAAoB,SAAS7Z,GAC3CrM,KAAK4nB,eAAevb,EAAI3M,QAAS2M,EAAI8K,QAAS9K,EAAItL,SAAUsL,EAAIlH,QAGpE/F,EAAQW,UAAUgoB,gBAAkB,SAAS5Q,EAAShS,EAAOmb,GACzD,GAAI5gB,GAAUM,KAAKgkB,UACfjjB,EAAWf,KAAK0mB,YAAY,EAChC1mB,MAAKgkB,UAAYlf,OACjB9E,KAAKikB,WAAanf,OAClB9E,KAAK4nB,eAAeloB,EAASyX,EAASpW,EAAUoE,IAGpD/F,EAAQW,UAAUioB,0BAA4B,SAASthB,GACnD,GAAIwgB,GAAe,EAARxgB,EAAY,CACvB1G,MAAKknB,EAAO,GACZlnB,KAAKknB,EAAO,GACZlnB,KAAKknB,EAAO,GACZlnB,KAAKknB,EAAO,GAAKpiB,QAGrB1F,EAAQW,UAAU2f,SAAW,SAAUva,GACnC,GAAImb,GAAWtgB,KAAKkE,SACpB,OAAiB,UAAXoc,KAA0B,IAAhC,CACA,GAAInb,IAAUnF,KAAM,CAChB,GAAI+X,GAAMyM,GAEV,OADAxkB,MAAK6J,kBAAkBkO,GAChB/X,KAAK0D,QAAQqU,GAExB/X,KAAK4lB,gBACL5lB,KAAK+jB,mBAAqB5e,GAEV,MAAXmb,GAAoB,IACW,KAAf,UAAXA,GACFtgB,KAAK2C,kBAELiF,EAAMlF,eAAe1C,SAKjCZ,EAAQW,UAAU2D,QAAU,SAAUiO,GAClC,GAAI2O,GAAWtgB,KAAKkE,SACpB,OAAiB,UAAXoc,KAA0B,IAIhC,MAHAtgB,MAAKsmB,eACLtmB,KAAK8jB,qBAAuBnS,EAExB3R,KAAKwmB,WACE5e,EAAM7F,WAAW4P,EAAQpQ,EAAKS,cAGzB,MAAXse,GAAoB,EACrB1Y,EAAMlF,eAAe1C,MAErBA,KAAKgU,oCAIb5U,EAAQW,UAAUkoB,iBAAmB,SAAUhK,EAAK9Y,GAChD,IAAK,GAAI1I,GAAI,EAAGA,EAAIwhB,EAAKxhB,IAAK,CAC1B,GAAI0a,GAAUnX,KAAK4mB,sBAAsBnqB,GACrCiD,EAAUM,KAAK2mB,WAAWlqB,GAC1BsE,EAAWf,KAAK0mB,YAAYjqB,EAChCuD,MAAKgoB,0BAA0BvrB,GAC/BuD,KAAK4nB,eAAeloB,EAASyX,EAASpW,EAAUoE,KAIxD/F,EAAQW,UAAUmoB,gBAAkB,SAAUjK,EAAKtM,GAC/C,IAAK,GAAIlV,GAAI,EAAGA,EAAIwhB,EAAKxhB,IAAK,CAC1B,GAAI0a,GAAUnX,KAAK6mB,oBAAoBpqB,GACnCiD,EAAUM,KAAK2mB,WAAWlqB,GAC1BsE,EAAWf,KAAK0mB,YAAYjqB,EAChCuD,MAAKgoB,0BAA0BvrB,GAC/BuD,KAAK4nB,eAAeloB,EAASyX,EAASpW,EAAU4Q,KAIxDvS,EAAQW,UAAU4C,gBAAkB,WAChC,GAAI2d,GAAWtgB,KAAKkE,UAChB+Z,EAAkB,MAAXqC,CAEX,IAAIrC,EAAM,EAAG,CACT,GAA+B,KAAd,SAAXqC,GAA6B,CAC/B,GAAI3O,GAAS3R,KAAK8jB,oBAClB9jB,MAAK+nB,gBAAgB/nB,KAAK+jB,mBAAoBpS,EAAQ2O,GACtDtgB,KAAKkoB,gBAAgBjK,EAAKtM,OACvB,CACH,GAAIxM,GAAQnF,KAAK+jB,kBACjB/jB,MAAK+nB,gBAAgB/nB,KAAK8jB,qBAAsB3e,EAAOmb,GACvDtgB,KAAKioB,iBAAiBhK,EAAK9Y,GAE/BnF,KAAKqmB,WAAW,GAEpBrmB,KAAK+W,0BAGT3X,EAAQW,UAAUuU,cAAgB,WAC9B,GAAIgM,GAAWtgB,KAAKkE,SACpB,OAA+B,MAAd,SAAXoc,GACKtgB,KAAK+jB,mBACsB,KAAd,SAAXzD,GACFtgB,KAAK8jB,qBADT,QAQX1kB,EAAQ+oB,MAAQ/oB,EAAQgpB,QAAU,WAC9B9kB,EAAMiM,WAAW,gBAAiB,cAClC,IAAI7P,GAAU,GAAIN,GAAQgE,EAC1B,QACI1D,QAASA,EACT0F,QAAS+e,EACTvX,OAAQyX,IAIhB9iB,EAAK4M,kBAAkB/O,EACA,2BACAolB,GAEvBnlB,EAAQ,YAAYD,EAASgE,EAAUC,EAAqBoE,EACxDnE,GACJjE,EAAQ,UAAUD,EAASgE,EAAUC,EAAqBC,GAC1DjE,EAAQ,YAAYD,EAASoI,EAAcC,EAAcnE,GACzDjE,EAAQ,oBAAoBD,GAC5BC,EAAQ,4BAA4BD,GACpCC,EAAQ,UACJD,EAASoI,EAAcnE,EAAqBD,EAAUwE,EAAO+L,GACjEvU,EAAQA,QAAUA,EAClBA,EAAQipB,QAAU,QAClBhpB,EAAQ,YAAYD,EAASoI,EAAcC,EAAcpE,EAAqBD,EAAUE,GACxFjE,EAAQ,iBAAiBD,GACzBC,EAAQ,cAAcD,EAASqI,EAAcpE,EAAqBgI,EAAejI,EAAUE,GAC3FjE,EAAQ,eAAeD,EAASgE,EAAUE,GAC1CjE,EAAQ,mBAAmBD,EAASqI,EAAcrE,EAAUC,EAAqBgb,EAAW/a,GAC5FjE,EAAQ,gBAAgBD,GACxBC,EAAQ,kBAAkBD,EAASgE,GACnC/D,EAAQ,cAAcD,EAASoI,EAAcnE,EAAqBoE,GAClEpI,EAAQ,aAAaD,EAASgE,EAAUC,EAAqBoE,GAC7DpI,EAAQ,eAAeD,EAASoI,EAAcC,EAAcpE,EAAqBD,EAAUE,GAC3FjE,EAAQ,eAAeD,EAASoI,EAAclE,GAC9CjE,EAAQ,aAAaD,EAASoI,EAAcC,GAC5CpI,EAAQ,eAAeD,EAASgE,GAChC/D,EAAQ,aAAaD,EAASgE,GAC9B/D,EAAQ,YAAYD,GAEhBmC,EAAK+mB,iBAAiBlpB,GACtBmC,EAAK+mB,iBAAiBlpB,EAAQW,WAU9BukB,GAAW/nB,EAAG,IACd+nB,GAAWiE,EAAG,IACdjE,GAAWkE,EAAG,IACdlE,EAAU,GACVA,EAAU,cACVA,EAAUxf,QACVwf,GAAU,GACVA,EAAU,GAAIllB,GAAQgE,IACtBE,EAAMuP,UAAU5S,EAAMqB,eAAgBC,EAAKuR,eACpC1T,KAIRqpB,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,gBAAgB,EAAEC,WAAW,EAAE1K,iBAAiB,EAAE2K,YAAY,EAAEC,kBAAkB,EAAEC,mBAAmB,GAAGC,YAAY,GAAG7Q,WAAW,GAAGrN,QAAQ,GAAGme,cAAc,GAAGC,YAAY,GAAGC,kBAAkB,GAAGC,SAAS,GAAGC,WAAW,GAAGC,WAAW,GAAGC,aAAa,GAAGC,eAAe,GAAGC,kBAAkB,GAAGC,iBAAiB,GAAGC,aAAa,GAAGC,YAAY,GAAGC,cAAc,GAAGC,cAAc,GAAGC,YAAY,GAAGC,2BAA2B,GAAGC,cAAc,GAAGC,cAAc,GAAGC,aAAa,GAAGlnB,SAAS,KAAKmnB,IAAI,SAAShrB,EAAQnC,EAAOJ,GAC3iB,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,EAAUC,EACzCoE,EAAc4W,GAIlB,QAASiM,GAAkBlH,GACvB,OAAOA,GACP,KAAK,EAAI,QACT,MAAK,EAAI,QACT,MAAK,EAAI,MAAO,IAAImH,MAIxB,QAAS/iB,GAAasa,GAClB,GAAIpiB,GAAUM,KAAK8e,SAAW,GAAI1f,GAAQgE,EACtC0e,aAAkB1iB,IAClBM,EAAQ6E,eAAeud,EAAQ,GAEnCpiB,EAAQqF,aAAa/E,MACrBA,KAAK+hB,QAAUD,EACf9hB,KAAKkJ,QAAU,EACflJ,KAAKmiB,eAAiB,EACtBniB,KAAK6hB,MAAM/c,QAAW,GApB1B,GAAIvD,GAAOlC,EAAQ,SACLkC,GAAKqI,OAmLnB,OA9JArI,GAAK6V,SAAS5P,EAAc6W,GAE5B7W,EAAazH,UAAU/C,OAAS,WAC5B,MAAOgD,MAAKkJ,SAGhB1B,EAAazH,UAAUL,QAAU,WAC7B,MAAOM,MAAK8e,UAGhBtX,EAAazH,UAAU8hB,MAAQ,QAAShiB,GAAK4D,EAAG+mB,GAC5C,GAAI1I,GAASze,EAAoBrD,KAAK+hB,QAAS/hB,KAAK8e,SACpD,IAAIgD,YAAkB1iB,GAAS,CAC3B0iB,EAASA,EAAOld,SAChB,IAAI0b,GAAWwB,EAAO5d,SAItB,IAFAlE,KAAK+hB,QAAUD,EAEgB,KAAd,SAAXxB,GAEF,MADAtgB,MAAK8e,SAAS4G,sBACP5D,EAAO/d,MACVlE,EACAG,KAAK0D,QACLoB,OACA9E,KACAwqB,EAED,IAA+B,KAAd,SAAXlK,GAEN,MAA+B,MAAd,SAAXA,GACFtgB,KAAK0D,QAAQoe,EAAOnJ,WAEpB3Y,KAAK+I,SAJZ+Y,GAASA,EAAOhJ,SAQxB,GADAgJ,EAASvgB,EAAKkpB,QAAQ3I,GACP,OAAXA,EAAiB,CACjB,GAAI/J,GAAMtQ,EACN,oDAAsDlG,EAAK4E,YAAY2b,IAASnQ,QAEpF,YADA3R,MAAK8e,SAASsB,gBAAgBrI,GAAK,GAIvC,MAAsB,KAAlB+J,EAAO9kB,YACHwtB,KAAwB,EACxBxqB,KAAK0qB,qBAGL1qB,KAAKoiB,SAASkI,EAAkBE,SAIxCxqB,MAAK2qB,SAAS7I,IAGlBta,EAAazH,UAAU4qB,SAAW,SAAS7I,GACvC,GAAI7D,GAAMje,KAAK4qB,gBAAgB9I,EAAO9kB,OACtCgD,MAAKkJ,QAAU+U,EACfje,KAAK+hB,QAAU/hB,KAAK6qB,mBAAqB,GAAInQ,OAAMuD,GAAOje,KAAK+hB,OAI/D,KAAK,GAHD3O,GAASpT,KAAK8e,SACdgM,GAAa,EACbxK,EAAW,KACN7jB,EAAI,EAAGA,EAAIwhB,IAAOxhB,EAAG,CAC1B,GAAIkI,GAAetB,EAAoBye,EAAOrlB,GAAI2W,EAE9CzO,aAAwBvF,IACxBuF,EAAeA,EAAaC,UAC5B0b,EAAW3b,EAAaT,WAExBoc,EAAW,KAGXwK,EACiB,OAAbxK,GACA3b,EAAaoP,8BAEG,OAAbuM,EACwB,KAAd,SAAXA,IACF3b,EAAa4b,OAAOvgB,KAAMvD,GAC1BuD,KAAK+hB,QAAQtlB,GAAKkI,GAElBmmB,EADkC,KAAd,SAAXxK,GACItgB,KAAKggB,kBAAkBrb,EAAamU,SAAUrc,GACzB,KAAd,SAAX6jB,GACItgB,KAAKkgB,iBAAiBvb,EAAagU,UAAWlc,GAE9CuD,KAAK2f,kBAAkBljB,GAGxCquB,EAAa9qB,KAAKggB,kBAAkBrb,EAAclI,GAGrDquB,GAAY1X,EAAOsS,uBAG5Ble,EAAazH,UAAUyf,YAAc,WACjC,MAAwB,QAAjBxf,KAAK+hB,SAGhBva,EAAazH,UAAUqiB,SAAW,SAAUjd,GACxCnF,KAAK+hB,QAAU,KACf/hB,KAAK8e,SAASY,SAASva,IAG3BqC,EAAazH,UAAUgJ,QAAU,YACzB/I,KAAKwf,eAAkBxf,KAAK8e,SAAS5W,mBACzClI,KAAK+hB,QAAU,KACf/hB,KAAK8e,SAAS/V,YAGlBvB,EAAazH,UAAU2D,QAAU,SAAUiO,GACvC3R,KAAK+hB,QAAU,KACf/hB,KAAK8e,SAASsB,gBAAgBzO,GAAQ,IAG1CnK,EAAazH,UAAUigB,kBAAoB,SAAU7a,EAAOuB,GACxD1G,KAAK+hB,QAAQrb,GAASvB,CACtB,IAAI+c,KAAkBliB,KAAKmiB,cAC3B,OAAID,IAAiBliB,KAAKkJ,UACtBlJ,KAAKoiB,SAASpiB,KAAK+hB,UACZ,IAKfva,EAAazH,UAAU4f,kBAAoB,WAEvC,MADA3f,MAAK+I,WACE,GAGXvB,EAAazH,UAAUmgB,iBAAmB,SAAUvO,GAGhD,MAFA3R,MAAKmiB,iBACLniB,KAAK0D,QAAQiO,IACN,GAGXnK,EAAazH,UAAU+J,iBAAmB,WACtC,IAAI9J,KAAKwf,cAAT,CACA,GAAIsC,GAAS9hB,KAAK+hB,OAElB,IADA/hB,KAAK+I,UACD+Y,YAAkB1iB,GAClB0iB,EAAOha,aAEP,KAAK,GAAIrL,GAAI,EAAGA,EAAIqlB,EAAO9kB,SAAUP,EAC7BqlB,EAAOrlB,YAAc2C,IACrB0iB,EAAOrlB,GAAGqL,WAM1BN,EAAazH,UAAU8qB,iBAAmB,WACtC,OAAO,GAGXrjB,EAAazH,UAAU6qB,gBAAkB,SAAU3M,GAC/C,MAAOA,IAGJzW,KAGJtE,SAAS,KAAK6nB,IAAI,SAAS1rB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,GA2BnC,QAAS4nB,GAAYlgB,GACjB,OAAQmgB,EAAmBhc,KAAKnE,GAGpC,QAASogB,GAAcpqB,GACnB,IACI,MAAOA,GAAGqqB,qBAAsB,EAEpC,MAAOnvB,GACH,OAAO,GAIf,QAASovB,GAAepmB,EAAK8F,EAAKugB,GAC9B,GAAIjI,GAAM7hB,EAAK+pB,yBAAyBtmB,EAAK8F,EAAMugB,EACXE,EACxC,SAAOnI,GAAM8H,EAAc9H,GAE/B,QAASoI,GAAWhsB,EAAK6rB,EAAQI,GAC7B,IAAK,GAAIhvB,GAAI,EAAGA,EAAI+C,EAAIxC,OAAQP,GAAK,EAAG,CACpC,GAAIqO,GAAMtL,EAAI/C,EACd,IAAIgvB,EAAaxc,KAAKnE,GAElB,IAAK,GADD4gB,GAAwB5gB,EAAImG,QAAQwa,EAAc,IAC7C5gB,EAAI,EAAGA,EAAIrL,EAAIxC,OAAQ6N,GAAK,EACjC,GAAIrL,EAAIqL,KAAO6gB,EACX,KAAM,IAAIrlB,GAAU,qGACf4K,QAAQ,KAAMoa,KAOvC,QAASM,GAAqB3mB,EAAKqmB,EAAQI,EAAc7O,GAGrD,IAAK,GAFDjS,GAAOpJ,EAAKqqB,kBAAkB5mB,GAC9BxF,KACK/C,EAAI,EAAGA,EAAIkO,EAAK3N,SAAUP,EAAG,CAClC,GAAIqO,GAAMH,EAAKlO,GACX0I,EAAQH,EAAI8F,GACZ+gB,EAAsBjP,IAAWkP,GACxBA,EAAchhB,EAAK3F,EAAOH,EAClB,mBAAVG,IACN+lB,EAAc/lB,IACdimB,EAAepmB,EAAK8F,EAAKugB,KAC1BzO,EAAO9R,EAAK3F,EAAOH,EAAK6mB,IACxBrsB,EAAIyB,KAAK6J,EAAK3F,GAItB,MADAqmB,GAAWhsB,EAAK6rB,EAAQI,GACjBjsB,EAkIX,QAASusB,GAA2B9J,EAAUlhB,EAAU0C,EAAG3C,EAAIkrB,EAAIjJ,GAM/D,QAASkJ,KACL,GAAIhN,GAAYle,CACZA,KAAamrB,IAAMjN,EAAYjf,KACnC,IAAIN,GAAU,GAAIN,GAAQgE,EAC1B1D,GAAQuV,oBACR,IAAI5K,GAAuB,gBAAX6L,IAAuBlW,OAASmsB,EAC1CnsB,KAAKkW,GAAU+L,EACjBnhB,EAAKgiB,EAAmBpjB,EAASqjB,EACrC,KACI1Y,EAAG9D,MAAM0Y,EAAWmN,EAAa9pB,UAAWxB,IAC9C,MAAM9E,GACJ0D,EAAQ0gB,gBAAgB6C,EAAiBjnB,IAAI,GAAM,GAGvD,MADK0D,GAAQ+lB,iBAAiB/lB,EAAQgmB,sBAC/BhmB,EAnBX,GAAIysB,GAAc,WAAa,MAAOnsB,SAClCkW,EAAS+L,CAqBb,OApBsB,gBAAX/L,KACP+L,EAAWnhB,GAkBfS,EAAK4M,kBAAkB8d,EAAa,qBAAqB,GAClDA,EAOX,QAASI,GAAarnB,EAAKqmB,EAAQzO,EAAQ0P,EAAavJ,GAKpD,IAAK,GAJD0I,GAAe,GAAIc,QAAOC,EAAiBnB,GAAU,KACrD5Q,EACAkR,EAAqB3mB,EAAKqmB,EAAQI,EAAc7O,GAE3CngB,EAAI,EAAGwhB,EAAMxD,EAAQzd,OAAQP,EAAIwhB,EAAKxhB,GAAI,EAAG,CAClD,GAAIqO,GAAM2P,EAAQhe,GACdqE,EAAK2Z,EAAQhe,EAAE,GACfgwB,EAAiB3hB,EAAMugB,CAC3B,IAAIiB,IAAgBI,EAChB1nB,EAAIynB,GACAC,EAAoB5hB,EAAKohB,EAAMphB,EAAKhK,EAAIuqB,EAAQtI,OACjD,CACH,GAAIkJ,GAAcK,EAAYxrB,EAAI,WAC9B,MAAO4rB,GAAoB5hB,EAAKohB,EAAMphB,EACXhK,EAAIuqB,EAAQtI,IAE3CxhB,GAAK4M,kBAAkB8d,EAAa,qBAAqB,GACzDjnB,EAAIynB,GAAkBR,GAI9B,MADA1qB,GAAK+mB,iBAAiBtjB,GACfA,EAGX,QAAS2nB,GAAU1K,EAAUlhB,EAAUgiB,GACnC,MAAO2J,GAAoBzK,EAAUlhB,EAAU+D,OACnBmd,EAAU,KAAMc,GAtQhD,GAkFI6J,GAlFAV,KACA3qB,EAAOlC,EAAQ,UACfyjB,EAAqBzjB,EAAQ,cAC7B+sB,EAAe7qB,EAAK6qB,aACpBnJ,EAAmB1hB,EAAK0hB,iBACxBnc,EAAcvF,EAAKuF,YACnBT,EAAYhH,EAAQ,YAAYgH,UAChCwmB,EAAgB,QAChBtB,GAAsBJ,mBAAmB,GACzC2B,GACA,QAAY,SACZ,OACA,YACA,SACA,SACA,YACA,qBAEA7B,EAAqB,GAAIsB,QAAO,OAASO,EAAY1e,KAAK,KAAO,MAEjE0d,EAAgB,SAAStf,GACzB,MAAOjL,GAAKwF,aAAayF,IACF,MAAnBA,EAAKuE,OAAO,IACH,gBAATvE,GAuDJggB,EAAmB,SAAS1a,GAC5B,MAAOA,GAAIb,QAAQ,QAAS,QAwJ5Byb,EAAsB5lB,EACpB8lB,EACAb,CAgCN3sB,GAAQutB,UAAY,SAAU7rB,EAAI+b,GAC9B,GAAkB,kBAAP/b,GACP,KAAM,IAAIuF,GAAU,gCAAkC9E,EAAK4E,YAAYrF,GAE3E,IAAIoqB,EAAcpqB,GACd,MAAOA,EAEX+b,GAAUjX,OAAOiX,EACjB,IAAI9b,GAA+B+D,SAApB+X,EAAQjZ,QAAwBsoB,EAAOrP,EAAQjZ,QAC1Dmf,IAAclG,EAAQkG,UACtBvjB,EAAMmtB,EAAU7rB,EAAIC,EAAUgiB,EAElC,OADAxhB,GAAKwrB,gBAAgBjsB,EAAItB,EAAKwrB,GACvBxrB,GAGXJ,EAAQitB,aAAe,SAAUjoB,EAAQyY,GACrC,GAAsB,kBAAXzY,IAA2C,gBAAXA,GACvC,KAAM,IAAIiC,GAAU,+FAExBwW,GAAUjX,OAAOiX,EACjB,IAAIkG,KAAclG,EAAQkG,UACtBsI,EAASxO,EAAQwO,MACC,iBAAXA,KAAqBA,EAASwB,EACzC,IAAIjQ,GAASC,EAAQD,MACC,mBAAXA,KAAuBA,EAASkP,EAC3C,IAAIQ,GAAczP,EAAQyP,WAG1B,IAF2B,kBAAhBA,KAA4BA,EAAcI,IAEhDnrB,EAAKwF,aAAaskB,GACnB,KAAM,IAAI7Q,YAAW,sEAIzB,KAAK,GADD7P,GAAOpJ,EAAKqqB,kBAAkBxnB,GACzB3H,EAAI,EAAGA,EAAIkO,EAAK3N,SAAUP,EAAG,CAClC,GAAI0I,GAAQf,EAAOuG,EAAKlO,GACR,iBAAZkO,EAAKlO,IACL8E,EAAKyrB,QAAQ7nB,KACbknB,EAAalnB,EAAMpF,UAAWsrB,EAAQzO,EAAQ0P,EAC1CvJ,GACJsJ,EAAalnB,EAAOkmB,EAAQzO,EAAQ0P,EAAavJ,IAIzD,MAAOsJ,GAAajoB,EAAQinB,EAAQzO,EAAQ0P,EAAavJ,OAK1D3K,WAAW,GAAGoR,aAAa,GAAGtmB,SAAS,KAAK+pB,IAAI,SAAS5tB,EAAQnC,EAAOJ,GAC3E,YACAI,GAAOJ,QAAU,SACbsC,EAASoI,EAAcnE,EAAqBoE,GAqChD,QAASylB,GAAuBloB,GAC5B,GACImoB,GADAC,GAAQ,CAEZ,IAAetoB,SAAXuoB,GAAwBroB,YAAeqoB,GACvCF,EAAUG,EAAatoB,GACvBooB,GAAQ,MACL,CACH,GAAIziB,GAAOuP,EAAIvP,KAAK3F,GAChBiZ,EAAMtT,EAAK3N,MACfmwB,GAAU,GAAIzS,OAAY,EAANuD,EACpB,KAAK,GAAIxhB,GAAI,EAAGA,EAAIwhB,IAAOxhB,EAAG,CAC1B,GAAIqO,GAAMH,EAAKlO,EACf0wB,GAAQ1wB,GAAKuI,EAAI8F,GACjBqiB,EAAQ1wB,EAAIwhB,GAAOnT,GAG3B9K,KAAKmhB,aAAagM,GAClBntB,KAAKutB,OAASH,EACdptB,KAAK4hB,OAAO9c,OAAWsoB,GAAQ,GAAK,GAkCxC,QAASI,GAAMjuB,GACX,GAAIC,GACAiuB,EAAYpqB,EAAoB9D,EAEpC,OAAKmL,GAAS+iB,IAGVjuB,EADOiuB,YAAqBruB,GACtBquB,EAAU1pB,MACZ3E,EAAQouB,MAAO1oB,OAAWA,OAAWA,OAAWA,QAE9C,GAAIooB,GAAuBO,GAAW/tB,UAG5C+tB,YAAqBruB,IACrBI,EAAI+E,eAAekpB,EAAW,GAE3BjuB,GAXIiI,EAAa,6EA7F5B,GAGI4lB,GAHA9rB,EAAOlC,EAAQ,UACfqL,EAAWnJ,EAAKmJ,SAChBwP,EAAM7a,EAAQ,QAEC,mBAARkrB,OAAoB8C,EAAS9C,IAExC,IAAI+C,GAAe,WAIf,QAASI,GAAavoB,EAAO2F,GACzB9K,KAAK0G,GAASvB,EACdnF,KAAK0G,EAAQinB,GAAQ7iB,EACrBpE,IANJ,GAAIA,GAAQ,EACRinB,EAAO,CAQX,OAAO,UAAsBhR,GACzBgR,EAAOhR,EAAIgR,KACXjnB,EAAQ,CACR,IAAIlH,GAAM,GAAIkb,OAAiB,EAAXiC,EAAIgR,KAExB,OADAhR,GAAIiR,QAAQF,EAAcluB,GACnBA,MAIXquB,EAAe,SAASV,GAGxB,IAAK,GAFD3tB,GAAM,GAAI6tB,GACVrwB,EAASmwB,EAAQnwB,OAAS,EAAI,EACzBP,EAAI,EAAGA,EAAIO,IAAUP,EAAG,CAC7B,GAAIqO,GAAMqiB,EAAQnwB,EAASP,GACvB0I,EAAQgoB,EAAQ1wB,EACpB+C,GAAIsc,IAAIhR,EAAK3F,GAEjB,MAAO3F,GAuBX+B,GAAK6V,SAAS8V,EAAwB1lB,GAEtC0lB,EAAuBntB,UAAU8hB,MAAQ,aAEzCqL,EAAuBntB,UAAUigB,kBAAoB,SAAU7a,EAAOuB,GAClE1G,KAAK+hB,QAAQrb,GAASvB,CACtB,IAAI+c,KAAkBliB,KAAKmiB,cAC3B,IAAID,GAAiBliB,KAAKkJ,QAAS,CAC/B,GAAIka,EACJ,IAAIpjB,KAAKutB,OACLnK,EAAMyK,EAAa7tB,KAAK+hB,aACrB,CACHqB,IAEA,KAAK,GADD0K,GAAY9tB,KAAKhD,SACZP,EAAI,EAAGwhB,EAAMje,KAAKhD,SAAUP,EAAIwhB,IAAOxhB,EAC5C2mB,EAAIpjB,KAAK+hB,QAAQtlB,EAAIqxB,IAAc9tB,KAAK+hB,QAAQtlB,GAIxD,MADAuD,MAAKoiB,SAASgB,IACP,EAEX,OAAO,GAGX8J,EAAuBntB,UAAU8qB,iBAAmB,WAChD,OAAO,GAGXqC,EAAuBntB,UAAU6qB,gBAAkB,SAAU3M,GACzD,MAAOA,IAAO,GAsBlB7e,EAAQW,UAAUytB,MAAQ,WACtB,MAAOA,GAAMxtB,OAGjBZ,EAAQouB,MAAQ,SAAUjuB,GACtB,MAAOiuB,GAAMjuB,OAIdwL,QAAQ,GAAG7H,SAAS,KAAK6qB,IAAI,SAAS1uB,EAAQnC,EAAOJ,GACxD,YACA,SAASkxB,GAAUC,EAAKC,EAAUC,EAAKC,EAAUnQ,GAC7C,IAAK,GAAIpT,GAAI,EAAGA,EAAIoT,IAAOpT,EACvBsjB,EAAItjB,EAAIujB,GAAYH,EAAIpjB,EAAIqjB,GAC5BD,EAAIpjB,EAAIqjB,GAAY,OAI5B,QAAS7tB,GAAMguB,GACXruB,KAAKsuB,UAAYD,EACjBruB,KAAKkJ,QAAU,EACflJ,KAAKuuB,OAAS,EAGlBluB,EAAMN,UAAUyuB,oBAAsB,SAAUb,GAC5C,MAAO3tB,MAAKsuB,UAAYX,GAG5BttB,EAAMN,UAAUsB,SAAW,SAAUL,GACjC,GAAIhE,GAASgD,KAAKhD,QAClBgD,MAAKyuB,eAAezxB,EAAS,EAC7B,IAAIP,GAAKuD,KAAKuuB,OAASvxB,EAAWgD,KAAKsuB,UAAY,CACnDtuB,MAAKvD,GAAKuE,EACVhB,KAAKkJ,QAAUlM,EAAS,GAG5BqD,EAAMN,UAAUkB,KAAO,SAAUH,EAAIC,EAAUC,GAC3C,GAAIhE,GAASgD,KAAKhD,SAAW,CAC7B,IAAIgD,KAAKwuB,oBAAoBxxB,GAIzB,MAHAgD,MAAKqB,SAASP,GACdd,KAAKqB,SAASN,OACdf,MAAKqB,SAASL,EAGlB,IAAI6J,GAAI7K,KAAKuuB,OAASvxB,EAAS,CAC/BgD,MAAKyuB,eAAezxB,EACpB,IAAI0xB,GAAW1uB,KAAKsuB,UAAY,CAChCtuB,MAAM6K,EAAI,EAAK6jB,GAAY5tB,EAC3Bd,KAAM6K,EAAI,EAAK6jB,GAAY3tB,EAC3Bf,KAAM6K,EAAI,EAAK6jB,GAAY1tB,EAC3BhB,KAAKkJ,QAAUlM,GAGnBqD,EAAMN,UAAU+C,MAAQ,WACpB,GAAI6rB,GAAQ3uB,KAAKuuB,OACb/uB,EAAMQ,KAAK2uB,EAKf,OAHA3uB,MAAK2uB,GAAS7pB,OACd9E,KAAKuuB,OAAUI,EAAQ,EAAM3uB,KAAKsuB,UAAY,EAC9CtuB,KAAKkJ,UACE1J,GAGXa,EAAMN,UAAU/C,OAAS,WACrB,MAAOgD,MAAKkJ,SAGhB7I,EAAMN,UAAU0uB,eAAiB,SAAUd,GACnC3tB,KAAKsuB,UAAYX,GACjB3tB,KAAK4uB,UAAU5uB,KAAKsuB,WAAa,IAIzCjuB,EAAMN,UAAU6uB,UAAY,SAAUP,GAClC,GAAIQ,GAAc7uB,KAAKsuB,SACvBtuB,MAAKsuB,UAAYD,CACjB,IAAIM,GAAQ3uB,KAAKuuB,OACbvxB,EAASgD,KAAKkJ,QACd4lB,EAAkBH,EAAQ3xB,EAAW6xB,EAAc,CACvDb,GAAUhuB,KAAM,EAAGA,KAAM6uB,EAAaC,IAG1C5xB,EAAOJ,QAAUuD,OAEX0uB,IAAI,SAAS1vB,EAAQnC,EAAOJ,GAClC,YACAI,GAAOJ,QAAU,SACbsC,EAASgE,EAAUC,EAAqBoE,GAS5C,QAASunB,GAAKzvB,EAAUgJ,GACpB,GAAI5D,GAAetB,EAAoB9D,EAEvC,IAAIoF,YAAwBvF,GACxB,MAAO6vB,GAAUtqB,EAGjB,IADApF,EAAWgC,EAAKkpB,QAAQlrB,GACP,OAAbA,EACA,MAAOkI,GAAa,oDAAsDlG,EAAK4E,YAAY5G,GAGnG,IAAIC,GAAM,GAAIJ,GAAQgE,EACP0B,UAAXyD,GACA/I,EAAI+E,eAAegE,EAAQ,EAI/B,KAAK,GAFDye,GAAUxnB,EAAIkgB,SACd9S,EAASpN,EAAIkE,QACRjH,EAAI,EAAGwhB,EAAM1e,EAASvC,OAAQP,EAAIwhB,IAAOxhB,EAAG,CACjD,GAAI2mB,GAAM7jB,EAAS9C,IAEPqI,SAARse,GAAuB3mB,IAAK8C,KAIhCH,EAAQumB,KAAKvC,GAAKrf,MAAMijB,EAASpa,EAAQ9H,OAAWtF,EAAK,MAE7D,MAAOA,GAlCX,GAAI+B,GAAOlC,EAAQ,UAEf4vB,EAAY,SAAUvvB,GACtB,MAAOA,GAAQke,KAAK,SAASsR,GACzB,MAAOF,GAAKE,EAAOxvB,KAiC3BN,GAAQ4vB,KAAO,SAAUzvB,GACrB,MAAOyvB,GAAKzvB,EAAUuF,SAG1B1F,EAAQW,UAAUivB,KAAO,WACrB,MAAOA,GAAKhvB,KAAM8E,YAKnB5B,SAAS,KAAKisB,IAAI,SAAS9vB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QAAU,SAASsC,EACAoI,EACAC,EACApE,EACAD,EACAE,GAK1B,QAAS8rB,GAAsB7vB,EAAUuB,EAAIuuB,EAAcC,GACvDtvB,KAAKmhB,aAAa5hB,EAClB,IAAIqV,GAASjB,GACb3T,MAAKuvB,IAAiB,OAAX3a,EAAkB9T,EAAKS,EAAKsT,WAAWD,EAAQ9T,GACrCgE,SAAjBuqB,IACAA,EAAejwB,EAAQgG,QAAQiqB,GAC/BA,EAAaviB,4BAA4B9M,OAE7CA,KAAKwvB,cAAgBH,EACrBrvB,KAAKyvB,oBAAsB,KACxBH,IAAUlsB,EACTpD,KAAK0vB,YAAchV,MAAM1a,KAAKkJ,SACb,IAAVomB,EACPtvB,KAAK0vB,YAAc,KAEnB1vB,KAAK0vB,YAAc5qB,OAEvB9E,KAAK8e,SAAS7J,qBACdjV,KAAK4hB,OAAO9c,QAAW,GA0F3B,QAAS6qB,GAAUC,EAAeV,GAC1BlvB,KAAKwN,cACL0hB,EAAM9M,SAASwN,GAEfV,EAAMxrB,QAAQksB,GAItB,QAASxW,GAAO7Z,EAAUuB,EAAIuuB,EAAcC,GACxC,GAAkB,kBAAPxuB,GACP,MAAO2G,GAAa,gCAAkClG,EAAK4E,YAAYrF,GAE3E,IAAIouB,GAAQ,GAAIE,GAAsB7vB,EAAUuB,EAAIuuB,EAAcC,EAClE,OAAOJ,GAAMxvB,UAGjB,QAASmwB,GAASC,GACd9vB,KAAK8vB,MAAQA,EACb9vB,KAAKkvB,MAAMa,UAAUD,EACrB,IAAI3qB,GAAQ9B,EAAoBrD,KAAKmF,MAAOnF,KAAKkvB,MAAMpQ,SACvD,OAAI3Z,aAAiB/F,IACjBY,KAAKkvB,MAAMO,oBAAsBtqB,EAC1BA,EAAMpB,MAAMisB,EAAUlrB,OAAWA,OAAW9E,KAAM8E,SAElDkrB,EAASjzB,KAAKiD,KAAMmF,GAInC,QAAS6qB,GAAS7qB,GACd,GAAI+pB,GAAQlvB,KAAKkvB,MACbxvB,EAAUwvB,EAAMpQ,SAChBhe,EAAK4G,EAASwnB,EAAMK,IACxB7vB,GAAQgM,cACR,IAAIlM,EAEAA,GADsBsF,SAAtBoqB,EAAMQ,YACA5uB,EAAG/D,KAAK2C,EAAQ+E,cAAeU,EAAOnF,KAAK0G,MAAO1G,KAAKhD,QAEvD8D,EAAG/D,KAAK2C,EAAQ+E,cACAzE,KAAK8vB,MAAO3qB,EAAOnF,KAAK0G,MAAO1G,KAAKhD,QAE1DwC,YAAeJ,KACf8vB,EAAMO,oBAAsBjwB,EAEhC,IAAI+O,GAAiB7O,EAAQiM,aAO7B,OANArI,GAAM+K,sBACF7O,EACA+O,EACsBzJ,SAAtBoqB,EAAMQ,YAA4B,eAAiB,iBACnDhwB,GAEGF,EAlKX,GAAImU,GAAYvU,EAAQwU,WACpBrS,EAAOlC,EAAQ,UACfqI,EAAWnG,EAAKmG,QAsBpBnG,GAAK6V,SAASgY,EAAuB5nB,GAErC4nB,EAAsBrvB,UAAUgwB,UAAY,SAASD,GACxBhrB,SAArB9E,KAAK0vB,aACgB,OAArB1vB,KAAK0vB,aACLI,IAAU1sB,GACVpD,KAAK0vB,YAAYzuB,KAAK6uB,IAI9BV,EAAsBrvB,UAAUkwB,cAAgB,SAAS9qB,GAIrD,MAHyB,QAArBnF,KAAK0vB,aACL1vB,KAAK0vB,YAAYzuB,KAAKkE,GAEnBnF,KAAK0vB,aAGhBN,EAAsBrvB,UAAU8hB,MAAQ,aAExCuN,EAAsBrvB,UAAU2qB,mBAAqB,WACjD1qB,KAAKoiB,SAA8Btd,SAArB9E,KAAK0vB,YAA4B1vB,KAAK0vB,YACL1vB,KAAKwvB,gBAGxDJ,EAAsBrvB,UAAU8qB,iBAAmB,WAC/C,OAAO,GAGXuE,EAAsBrvB,UAAUqiB,SAAW,SAASjd,GAChDnF,KAAK8e,SAAS3a,iBAAiBgB,GAC/BnF,KAAK+hB,QAAU,MAGnBqN,EAAsBrvB,UAAU+J,iBAAmB,SAASomB,GACxD,MAAIA,KAAWlwB,KAAKwvB,cAAsBxvB,KAAK+I,eAC3C/I,KAAKwf,gBACTxf,KAAKmwB,oBACDnwB,KAAKyvB,8BAA+BrwB,IACpCY,KAAKyvB,oBAAoB3nB,SAEzB9H,KAAKwvB,wBAAyBpwB,IAC9BY,KAAKwvB,cAAc1nB,YAI3BsnB,EAAsBrvB,UAAU4qB,SAAW,SAAU7I,GACjD9hB,KAAK+hB,QAAUD,CACf,IAAI3c,GACA1I,EACAO,EAAS8kB,EAAO9kB,MAWpB,IAV2B8H,SAAvB9E,KAAKwvB,eACLrqB,EAAQnF,KAAKwvB,cACb/yB,EAAI,IAEJ0I,EAAQ/F,EAAQgG,QAAQ0c,EAAO,IAC/BrlB,EAAI,GAGRuD,KAAKyvB,oBAAsBtqB,GAEtBA,EAAMsY,aACP,KAAOhhB,EAAIO,IAAUP,EAAG,CACpB,GAAI4P,IACAyjB,MAAO,KACP3qB,MAAO2c,EAAOrlB,GACdiK,MAAOjK,EACPO,OAAQA,EACRkyB,MAAOlvB,KAEXmF,GAAQA,EAAMpB,MAAM8rB,EAAU/qB,OAAWA,OAAWuH,EAAKvH,QAIxCA,SAArB9E,KAAK0vB,cACLvqB,EAAQA,EACHpB,MAAM/D,KAAKiwB,cAAenrB,OAAWA,OAAW9E,KAAM8E,SAE/DK,EAAMpB,MAAM4rB,EAAWA,EAAW7qB,OAAWK,EAAOnF,OAGxDZ,EAAQW,UAAUqZ,OAAS,SAAUtY,EAAIuuB,GACrC,MAAOjW,GAAOpZ,KAAMc,EAAIuuB,EAAc,OAG1CjwB,EAAQga,OAAS,SAAU7Z,EAAUuB,EAAIuuB,EAAcC,GACnD,MAAOlW,GAAO7Z,EAAUuB,EAAIuuB,EAAcC,OAyD3CpsB,SAAS,KAAKktB,IAAI,SAAS/wB,EAAQnC,EAAOJ,GAC7C,YACA,IACI8D,GADAW,EAAOlC,EAAQ,UAEfgxB,EAAmB;AACnB,KAAM,IAAI1zB,OAAM,mEAEhB2zB,EAAgB/uB,EAAKgvB,kBACzB,IAAIhvB,EAAKS,QAAsC,mBAArBwuB,kBAAkC,CACxD,GAAIC,GAAqB1xB,EAAO2xB,aAC5BC,EAAkB7xB,EAAQ8xB,QAC9BhwB,GAAWW,EAAKsvB,aACF,SAAS/vB,GAAM2vB,EAAmB1zB,KAAKgC,EAAQ+B,IAC/C,SAASA,GAAM6vB,EAAgB5zB,KAAK+B,EAASgC,QACxD,IAA6B,kBAAlBwvB,IAC0B,kBAA1BA,GAAclrB,QAAwB,CACpD,GAAI0rB,GAAgBR,EAAclrB,SAClCxE,GAAW,SAASE,GAChBgwB,EAAclT,KAAK9c,QAiCvBF,GA/BoC,mBAArB4vB,mBACW,mBAAXtxB,SACPA,OAAO6xB,YACN7xB,OAAO6xB,UAAUC,YAAc9xB,OAAO+xB,SA2BhB,mBAAjBP,cACH,SAAU5vB,GACjB4vB,aAAa5vB,IAEY,mBAAfyB,YACH,SAAUzB,GACjByB,WAAWzB,EAAI,IAGRuvB,EAnCA,WACP,GAAIa,GAAMrb,SAASsb,cAAc,OAC7Bta,GAAQua,YAAY,GACpBC,GAAkB,EAClBC,EAAOzb,SAASsb,cAAc,OAC9BI,EAAK,GAAIf,kBAAiB,WAC1BU,EAAIM,UAAUC,OAAO,OACrBJ,GAAkB,GAEtBE,GAAGG,QAAQJ,EAAMza,EAEjB,IAAI8a,GAAiB,WACbN,IACJA,GAAkB,EAClBC,EAAKE,UAAUC,OAAO,QAG1B,OAAO,UAAkB3wB,GACrB,GAAIzE,GAAI,GAAIm0B,kBAAiB,WACzBn0B,EAAEu1B,aACF9wB,KAEJzE,GAAEq1B,QAAQR,EAAKra,GACf8a,OAcZz0B,GAAOJ,QAAU8D,IAEdsC,SAAS,KAAK2uB,IAAI,SAASxyB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QACH,SAASsC,EAASoI,EAAclE,GAIpC,QAASwuB,GAAoBhQ,GACzB9hB,KAAKmhB,aAAaW,GAJtB,GAAI4C,GAAoBtlB,EAAQslB,kBAC5BnjB,EAAOlC,EAAQ,SAKnBkC,GAAK6V,SAAS0a,EAAqBtqB,GAEnCsqB,EAAoB/xB,UAAUgyB,iBAAmB,SAAUrrB,EAAOsrB,GAC9DhyB,KAAK+hB,QAAQrb,GAASsrB,CACtB,IAAI9P,KAAkBliB,KAAKmiB,cAC3B,OAAID,IAAiBliB,KAAKkJ,UACtBlJ,KAAKoiB,SAASpiB,KAAK+hB,UACZ,IAKf+P,EAAoB/xB,UAAUigB,kBAAoB,SAAU7a,EAAOuB,GAC/D,GAAIlH,GAAM,GAAIklB,EAGd,OAFAllB,GAAI0E,UAAY,SAChB1E,EAAIyyB,mBAAqB9sB,EAClBnF,KAAK+xB,iBAAiBrrB,EAAOlH,IAExCsyB,EAAoB/xB,UAAUmgB,iBAAmB,SAAUvO,EAAQjL,GAC/D,GAAIlH,GAAM,GAAIklB,EAGd,OAFAllB,GAAI0E,UAAY,SAChB1E,EAAIyyB,mBAAqBtgB,EAClB3R,KAAK+xB,iBAAiBrrB,EAAOlH,IAGxCJ,EAAQ8yB,OAAS,SAAU3yB,GAEvB,MADA+D,GAAMiM,WAAW,YAAa,cACvB,GAAIuiB,GAAoBvyB,GAAUG,WAG7CN,EAAQW,UAAUmyB,OAAS,WACvB,MAAO9yB,GAAQ8yB,OAAOlyB,UAIvBkD,SAAS,KAAKivB,IAAI,SAAS9yB,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QACP,SAASsC,EAASoI,EAAcC,GAQhC,QAAShI,GAAiBqiB,GACtB9hB,KAAKmhB,aAAaW,GAClB9hB,KAAKoyB,SAAW,EAChBpyB,KAAKqyB,SAAU,EACfryB,KAAKsyB,cAAe,EAiHxB,QAASC,GAAKhzB,EAAUizB,GACpB,IAAe,EAAVA,KAAiBA,GAAWA,EAAU,EACvC,MAAO/qB,GAAa,iEAExB,IAAIjI,GAAM,GAAIC,GAAiBF,GAC3BG,EAAUF,EAAIE,SAGlB,OAFAF,GAAIG,WAAW6yB,GACfhzB,EAAIK,OACGH,EApIX,GAAI6B,GAAOlC,EAAQ,UACfmb,EAAanb,EAAQ,YAAYmb,WACjCD,EAAiBlb,EAAQ,YAAYkb,eACrC3Q,EAAUrI,EAAKqI,QACf6oB,IASJlxB,GAAK6V,SAAS3X,EAAkB+H,GAEhC/H,EAAiBM,UAAU8hB,MAAQ,WAC/B,GAAK7hB,KAAKsyB,aAAV,CAGA,GAAsB,IAAlBtyB,KAAKoyB,SAEL,WADApyB,MAAKoiB,YAGTpiB,MAAK4hB,OAAO9c,QAAW,EACvB,IAAI4tB,GAAkB9oB,EAAQ5J,KAAK+hB,UAC9B/hB,KAAKwf,eACNkT,GACA1yB,KAAKoyB,SAAWpyB,KAAK2yB,uBACrB3yB,KAAK0D,QAAQ1D,KAAK4yB,eAAe5yB,KAAKhD,aAI9CyC,EAAiBM,UAAUF,KAAO,WAC9BG,KAAKsyB,cAAe,EACpBtyB,KAAK6hB,SAGTpiB,EAAiBM,UAAUH,UAAY,WACnCI,KAAKqyB,SAAU,GAGnB5yB,EAAiBM,UAAUyyB,QAAU,WACjC,MAAOxyB,MAAKoyB,UAGhB3yB,EAAiBM,UAAUJ,WAAa,SAAUkzB,GAC9C7yB,KAAKoyB,SAAWS,GAGpBpzB,EAAiBM,UAAUigB,kBAAoB,SAAU7a,GAErD,MADAnF,MAAK8yB,cAAc3tB,GACfnF,KAAK+yB,eAAiB/yB,KAAKwyB,YAC3BxyB,KAAK+hB,QAAQ/kB,OAASgD,KAAKwyB,UACJ,IAAnBxyB,KAAKwyB,WAAmBxyB,KAAKqyB,QAC7BryB,KAAKoiB,SAASpiB,KAAK+hB,QAAQ,IAE3B/hB,KAAKoiB,SAASpiB,KAAK+hB,UAEhB,IAKftiB,EAAiBM,UAAUmgB,iBAAmB,SAAUvO,GAEpD,MADA3R,MAAKgzB,aAAarhB,GACX3R,KAAKizB,iBAGhBxzB,EAAiBM,UAAU4f,kBAAoB,WAC3C,MAAI3f,MAAK+hB,kBAAmB3iB,IAA2B,MAAhBY,KAAK+hB,QACjC/hB,KAAK+I,WAEhB/I,KAAKgzB,aAAaP,GACXzyB,KAAKizB,kBAGhBxzB,EAAiBM,UAAUkzB,cAAgB,WACvC,GAAIjzB,KAAKwyB,UAAYxyB,KAAK2yB,sBAAuB,CAE7C,IAAK,GADD32B,GAAI,GAAIue,GACH9d,EAAIuD,KAAKhD,SAAUP,EAAIuD,KAAK+hB,QAAQ/kB,SAAUP,EAC/CuD,KAAK+hB,QAAQtlB,KAAOg2B,GACpBz2B,EAAEiF,KAAKjB,KAAK+hB,QAAQtlB,GAQ5B,OALIT,GAAEgB,OAAS,EACXgD,KAAK0D,QAAQ1H,GAEbgE,KAAK+I,WAEF,EAEX,OAAO,GAGXtJ,EAAiBM,UAAUgzB,WAAa,WACpC,MAAO/yB,MAAKmiB,gBAGhB1iB,EAAiBM,UAAUmzB,UAAY,WACnC,MAAOlzB,MAAK+hB,QAAQ/kB,OAASgD,KAAKhD,UAGtCyC,EAAiBM,UAAUizB,aAAe,SAAUrhB,GAChD3R,KAAK+hB,QAAQ9gB,KAAK0Q,IAGtBlS,EAAiBM,UAAU+yB,cAAgB,SAAU3tB,GACjDnF,KAAK+hB,QAAQ/hB,KAAKmiB,kBAAoBhd,GAG1C1F,EAAiBM,UAAU4yB,oBAAsB,WAC7C,MAAO3yB,MAAKhD,SAAWgD,KAAKkzB,aAGhCzzB,EAAiBM,UAAU6yB,eAAiB,SAAUC,GAClD,GAAI3sB,GAAU,qCACNlG,KAAKoyB,SAAW,4BAA8BS,EAAQ,QAC9D,OAAO,IAAIrY,GAAWtU,IAG1BzG,EAAiBM,UAAU2qB,mBAAqB,WAC5C1qB,KAAK0D,QAAQ1D,KAAK4yB,eAAe,KAcrCxzB,EAAQmzB,KAAO,SAAUhzB,EAAUizB,GAC/B,MAAOD,GAAKhzB,EAAUizB,IAG1BpzB,EAAQW,UAAUwyB,KAAO,SAAUC,GAC/B,MAAOD,GAAKvyB,KAAMwyB,IAGtBpzB,EAAQU,kBAAoBL,KAGzB2Y,WAAW,GAAGlV,SAAS,KAAKiwB,IAAI,SAAS9zB,EAAQnC,EAAOJ,GAC3D,YACAI,GAAOJ,QAAU,SAASsC,GAC1B,QAASslB,GAAkBhlB,GACPoF,SAAZpF,GACAA,EAAUA,EAAQkF,UAClB5E,KAAKkE,UAAYxE,EAAQwE,UACzBlE,KAAKiyB,mBAAqBvyB,EAAQ+lB,gBAC5B/lB,EAAQ4U,gBAAkBxP,SAGhC9E,KAAKkE,UAAY,EACjBlE,KAAKiyB,mBAAqBntB,QAIlC4f,EAAkB3kB,UAAUuU,cAAgB,WACxC,MAAOtU,MAAKiyB,mBAGhB,IAAI9sB,GAAQuf,EAAkB3kB,UAAUoF,MAAQ,WAC5C,IAAKnF,KAAKwN,cACN,KAAM,IAAInH,WAAU,4FAExB,OAAOrG,MAAKsU,iBAGZ3C,EAAS+S,EAAkB3kB,UAAU4N,MACzC+W,EAAkB3kB,UAAU4R,OAAS,WACjC,IAAK3R,KAAKyd,aACN,KAAM,IAAIpX,WAAU,0FAExB,OAAOrG,MAAKsU,iBAGZ9G,EAAckX,EAAkB3kB,UAAUyN,YAAc,WACxD,MAAuC,MAAd,SAAjBxN,KAAKkE,YAGbuZ,EAAaiH,EAAkB3kB,UAAU0d,WAAa,WACtD,MAAuC,MAAd,SAAjBzd,KAAKkE,YAGbmF,EAAYqb,EAAkB3kB,UAAUsJ,UAAY,WACpD,MAAuC,MAAd,SAAjBrJ,KAAKkE,YAGb4mB,EAAapG,EAAkB3kB,UAAU+qB,WAAa,WACtD,MAAuC,MAAd,SAAjB9qB,KAAKkE,WAGjBwgB,GAAkB3kB,UAAUyJ,YAAc,WACtC,MAAsC,MAAb,QAAjBxJ,KAAKkE,YAGjB9E,EAAQW,UAAUqzB,cAAgB,WAC9B,MAAoC,UAAX,MAAjBpzB,KAAKkE,YAGjB9E,EAAQW,UAAUuJ,aAAe,WAC7B,MAAOtJ,MAAK4E,UAAUwuB,iBAG1Bh0B,EAAQW,UAAUyJ,YAAc,WAC5B,MAAgD,MAAb,QAA3BxJ,KAAK4E,UAAUV,YAG3B9E,EAAQW,UAAUsJ,UAAY,WAC1B,MAAOA,GAAUtM,KAAKiD,KAAK4E,YAG/BxF,EAAQW,UAAU0d,WAAa,WAC3B,MAAOA,GAAW1gB,KAAKiD,KAAK4E,YAGhCxF,EAAQW,UAAUyN,YAAc,WAC5B,MAAOA,GAAYzQ,KAAKiD,KAAK4E,YAGjCxF,EAAQW,UAAU+qB,WAAa,WAC3B,MAAOA,GAAW/tB,KAAKiD,KAAK4E,YAGhCxF,EAAQW,UAAUoF,MAAQ,WACtB,MAAOA,GAAMpI,KAAKiD,KAAK4E,YAG3BxF,EAAQW,UAAU4R,OAAS,WACvB,GAAIvN,GAASpE,KAAK4E,SAElB,OADAR,GAAOsQ,6BACA/C,EAAO5U,KAAKqH,IAGvBhF,EAAQW,UAAU+Y,OAAS,WACvB,MAAO9Y,MAAKsU,iBAGhBlV,EAAQW,UAAU4Y,QAAU,WAExB,MADA3Y,MAAK0U,6BACE1U,KAAKsU,iBAGhBlV,EAAQslB,kBAAoBA,QAGtB2O,IAAI,SAASh0B,EAAQnC,EAAOJ,GAClC,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,GAKnC,QAASC,GAAoB2B,EAAKpB,GAC9B,GAAI8G,EAAS1F,GAAM,CACf,GAAIA,YAAe5F,GAAS,MAAO4F,EACnC,IAAI4Y,GAAO0V,EAAQtuB,EACnB,IAAI4Y,IAASjW,EAAU,CACf/D,GAASA,EAAQ8H,cACrB,IAAIlM,GAAMJ,EAAQwN,OAAOgR,EAAK5hB,EAE9B,OADI4H,IAASA,EAAQ+H,cACdnM,EACJ,GAAoB,kBAAToe,GAAqB,CACnC,GAAI2V,EAAqBvuB,GAAM,CAC3B,GAAIxF,GAAM,GAAIJ,GAAQgE,EAQtB,OAPA4B,GAAIjB,MACAvE,EAAIkgB,SACJlgB,EAAIkE,QACJoB,OACAtF,EACA,MAEGA,EAEX,MAAOg0B,GAAWxuB,EAAK4Y,EAAMha,IAGrC,MAAOoB,GAGX,QAASyuB,GAAUzuB,GACf,MAAOA,GAAI4Y,KAGf,QAAS0V,GAAQtuB,GACb,IACI,MAAOyuB,GAAUzuB,GACnB,MAAOhJ,GAEL,MADA2L,GAAS3L,EAAIA,EACN2L,GAKf,QAAS4rB,GAAqBvuB,GAC1B,IACI,MAAO0uB,GAAQ32B,KAAKiI,EAAK,aAC3B,MAAOhJ,GACL,OAAO,GAIf,QAASw3B,GAAW7L,EAAG/J,EAAMha,GAezB,QAASwB,GAAQD,GACRzF,IACLA,EAAQyE,iBAAiBgB,GACzBzF,EAAU,MAGd,QAASkN,GAAO+E,GACPjS,IACLA,EAAQ0gB,gBAAgBzO,EAAQ2V,GAAa,GAC7C5nB,EAAU,MAvBd,GAAIA,GAAU,GAAIN,GAAQgE,GACtB5D,EAAME,CACNkE,IAASA,EAAQ8H,eACrBhM,EAAQuV,qBACJrR,GAASA,EAAQ+H,aACrB,IAAI2b,IAAc,EACdlU,EAAS7R,EAAKmG,SAASkW,GAAM7gB,KAAK4qB,EAAGviB,EAASwH,EAmBlD,OAlBA0a,IAAc,EAEV5nB,GAAW0T,IAAWzL,IACtBjI,EAAQ0gB,gBAAgBhN,EAAOpX,GAAG,GAAM,GACxC0D,EAAU,MAcPF,EA/EX,GAAI+B,GAAOlC,EAAQ,UACfsI,EAAWpG,EAAKoG,SAChB+C,EAAWnJ,EAAKmJ,SA0ChBgpB,KAAa1X,cAsCjB,OAAO3Y,MAGJH,SAAS,KAAKywB,IAAI,SAASt0B,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QAAU,SAASsC,EAASgE,EAAUE,GAI7C,QAASswB,GAAcC,GACnB7zB,KAAK6zB,OAASA,EAqDlB,QAASC,GAAa3uB,GAElB,MADA4uB,cAAa/zB,KAAK6zB,QACX1uB,EAGX,QAAS6uB,GAAariB,GAElB,KADAoiB,cAAa/zB,KAAK6zB,QACZliB,EAhEV,GAAIpQ,GAAOlC,EAAQ,UACfib,EAAelb,EAAQkb,YAM3BsZ,GAAc7zB,UAAU+J,iBAAmB,WACvCiqB,aAAa/zB,KAAK6zB,QAGtB,IAAII,GAAa,SAAS9uB,GAAS,MAAO+uB,IAAOl0B,MAAMwY,WAAWrT,IAC9D+uB,EAAQ90B,EAAQ80B,MAAQ,SAAUC,EAAIhvB,GACtC,GAAI3F,GACAq0B,CAgBJ,OAfc/uB,UAAVK,GACA3F,EAAMJ,EAAQgG,QAAQD,GACbpB,MAAMkwB,EAAY,KAAM,KAAME,EAAIrvB,QACvCxB,EAAMyE,gBAAkB5C,YAAiB/F,IACzCI,EAAIuF,aAAaI,KAGrB3F,EAAM,GAAIJ,GAAQgE,GAClBywB,EAAStxB,WAAW,WAAa/C,EAAIkgB,aAAgByU,GACjD7wB,EAAMyE,gBACNvI,EAAIuF,aAAa,GAAI6uB,GAAcC,IAEvCr0B,EAAIyV,sBAERzV,EAAIkmB,sBACGlmB,EAGXJ,GAAQW,UAAUm0B,MAAQ,SAAUC,GAChC,MAAOD,GAAMC,EAAIn0B,MAGrB,IAAIo0B,GAAe,SAAU10B,EAASwG,EAASqC,GAC3C,GAAIwP,EAGIA,GAFe,gBAAZ7R,GACHA,YAAmBvJ,OACbuJ,EAEA,GAAIoU,GAAa,uBAGrB,GAAIA,GAAapU,GAE3B3E,EAAKshB,+BAA+B9K,GACpCrY,EAAQmK,kBAAkBkO,GAC1BrY,EAAQgE,QAAQqU,GAEF,MAAVxP,GACAA,EAAOT,SAcf1I,GAAQW,UAAUs0B,QAAU,SAAUF,EAAIjuB,GACtCiuB,GAAMA,CACN,IAAI30B,GAAK+I,EAEL+rB,EAAgB,GAAIV,GAAcrxB,WAAW,WACzC/C,EAAI6J,aACJ+qB,EAAa50B,EAAK0G,EAASqC,IAEhC4rB,GAYH,OAVI7wB,GAAMyE,gBACNQ,EAASvI,KAAK4d,OACdpe,EAAM+I,EAAOxE,MAAM+vB,EAAcE,EACblvB,OAAWwvB,EAAexvB,QAC9CtF,EAAIuF,aAAauvB,IAEjB90B,EAAMQ,KAAK+D,MAAM+vB,EAAcE,EACXlvB,OAAWwvB,EAAexvB,QAG3CtF,MAKR0D,SAAS,KAAKqxB,IAAI,SAASl1B,EAAQnC,EAAOJ,GAC7C,YACAI,GAAOJ,QAAU,SAAUsC,EAASqI,EAAcpE,EAC9CgI,EAAejI,EAAUE,GAQzB,QAASiV,GAAQvc,GACbuG,WAAW,WAAW,KAAMvG,IAAK,GAGrC,QAASw4B,GAAyBC,GAC9B,GAAI9vB,GAAetB,EAAoBoxB,EAOvC,OANI9vB,KAAiB8vB,GACiB,kBAA3BA,GAASC,eACiB,kBAA1BD,GAASE,cAChBF,EAASC,iBACT/vB,EAAaiwB,eAAeH,EAASE,gBAElChwB,EAEX,QAASkwB,GAAQC,EAAW9C,GAIxB,QAAS+C,KACL,GAAIt4B,GAAKwhB,EAAK,MAAOze,GAAIkgB,UACzB,IAAI/a,GAAe6vB,EAAyBM,EAAUr4B,KACtD,IAAIkI,YAAwBvF,IACxBuF,EAAa+vB,gBAAiB,CAC9B,IACI/vB,EAAetB,EACXsB,EAAagwB,eAAeK,WAAWhD,GACvC8C,EAAUp1B,SAChB,MAAO1D,GACL,MAAOuc,GAAQvc,GAEnB,GAAI2I,YAAwBvF,GACxB,MAAOuF,GAAaZ,MAAMgxB,EAAUxc,EACV,KAAM,KAAM,MAG9Cwc,IApBJ,GAAIt4B,GAAI,EACJwhB,EAAM6W,EAAU93B,OAChBwC,EAAM,GAAIJ,GAAQgE,EAqBtB,OADA2xB,KACOv1B,EAGX,QAASy1B,GAASC,EAAMx1B,EAASkE,GAC7B5D,KAAKm1B,MAAQD,EACbl1B,KAAK8e,SAAWpf,EAChBM,KAAKo1B,SAAWxxB,EAoCpB,QAASyxB,GAAiBv0B,EAAIpB,EAASkE,GACnC5D,KAAKmhB,aAAargB,EAAIpB,EAASkE,GASnC,QAAS0xB,GAAoBnwB,GACzB,MAAI8vB,GAASM,WAAWpwB,IACpBnF,KAAK80B,UAAU90B,KAAK0G,OAAOkuB,eAAezvB,GACnCA,EAAMzF,WAEVyF,EAGX,QAASqwB,GAAax4B,GAClBgD,KAAKhD,OAASA,EACdgD,KAAKN,QAAU,KACfM,KAAKhD,EAAO,GAAK,KA5GrB,GAAIuE,GAAOlC,EAAQ,UACfgH,EAAYhH,EAAQ,YAAYgH,UAChC+Q,EAAW/X,EAAQ,UAAU+X,SAC7BzP,EAAWpG,EAAKoG,SAChBD,EAAWnG,EAAKmG,SAChB+tB,IAiDJR,GAASl1B,UAAUm1B,KAAO,WACtB,MAAOl1B,MAAKm1B,OAGhBF,EAASl1B,UAAUL,QAAU,WACzB,MAAOM,MAAK8e,UAGhBmW,EAASl1B,UAAU21B,SAAW,WAC1B,MAAI11B,MAAKN,UAAU8N,cACRxN,KAAKN,UAAUyF,QAEnBswB,GAGXR,EAASl1B,UAAUi1B,WAAa,SAAShD,GACrC,GAAI0D,GAAW11B,KAAK01B,WAChB9xB,EAAU5D,KAAKo1B,QACHtwB,UAAZlB,GAAuBA,EAAQ8H,cACnC,IAAIlM,GAAMk2B,IAAaD,EACjBz1B,KAAK21B,UAAUD,EAAU1D,GAAc,IAI7C,OAHgBltB,UAAZlB,GAAuBA,EAAQ+H,cACnC3L,KAAK8e,SAAS8W,mBACd51B,KAAKm1B,MAAQ,KACN31B,GAGXy1B,EAASM,WAAa,SAAUM,GAC5B,MAAa,OAALA,GACsB,kBAAfA,GAAEH,UACe,kBAAjBG,GAAEb,YAMrB5d,EAASie,EAAkBJ,GAE3BI,EAAiBt1B,UAAU41B,UAAY,SAAUD,EAAU1D,GACvD,GAAIlxB,GAAKd,KAAKk1B,MACd,OAAOp0B,GAAG/D,KAAK24B,EAAUA,EAAU1D,IAiBvCwD,EAAaz1B,UAAU+J,iBAAmB,WAEtC,IAAK,GADDmU,GAAMje,KAAKhD,OACNP,EAAI,EAAGA,EAAIwhB,IAAOxhB,EAAG,CAC1B,GAAI+N,GAAOxK,KAAKvD,EACZ+N,aAAgBpL,IAChBoL,EAAK1C,WAKjB1I,EAAQ02B,MAAQ,WACZ,GAAI7X,GAAM3b,UAAUtF,MACpB,IAAIihB,EAAM,EAAG,MAAOxW,GACJ,sDAChB,IAAI3G,GAAKwB,UAAU2b,EAAM,EACzB,IAAkB,kBAAPnd,GACP,MAAO2G,GAAa,gCAAkClG,EAAK4E,YAAYrF,GAE3E,IAAIi1B,GACAC,GAAa,CACL,KAAR/X,GAAavD,MAAM9Q,QAAQtH,UAAU,KACrCyzB,EAAQzzB,UAAU,GAClB2b,EAAM8X,EAAM/4B,OACZg5B,GAAa,IAEbD,EAAQzzB,UACR2b,IAGJ,KAAK,GADD6W,GAAY,GAAIU,GAAavX,GACxBxhB,EAAI,EAAGA,EAAIwhB,IAAOxhB,EAAG,CAC1B,GAAIi5B,GAAWK,EAAMt5B,EACrB,IAAIw4B,EAASM,WAAWG,GAAW,CAC/B,GAAIO,GAAWP,CACfA,GAAWA,EAASh2B,UACpBg2B,EAASd,eAAeqB,OACrB,CACH,GAAItxB,GAAetB,EAAoBqyB,EACnC/wB,aAAwBvF,KACxBs2B,EACI/wB,EAAaZ,MAAMuxB,EAAqB,KAAM,MAC1CR,UAAWA,EACXpuB,MAAOjK,GACZqI,SAGXgwB,EAAUr4B,GAAKi5B,EAInB,IAAK,GADDQ,GAAqB,GAAIxb,OAAMoa,EAAU93B,QACpCP,EAAI,EAAGA,EAAIy5B,EAAmBl5B,SAAUP,EAC7Cy5B,EAAmBz5B,GAAK2C,EAAQgG,QAAQ0vB,EAAUr4B,IAAIooB,SAG1D,IAAIsR,GAAgB/2B,EAAQia,IAAI6c,GAC3BtY,KAAK,SAASwY,GACX,IAAK,GAAI35B,GAAI,EAAGA,EAAI25B,EAAYp5B,SAAUP,EAAG,CACzC,GAAIu1B,GAAaoE,EAAY35B,EAC7B,IAAIu1B,EAAWvU,aAEX,MADA9V,GAAS3L,EAAIg2B,EAAWrkB,QACjBhG,CACJ,KAAKqqB,EAAWxkB,cAEnB,WADA2oB,GAAcruB,QAGlBsuB,GAAY35B,GAAKu1B,EAAW7sB,QAEhCzF,EAAQgM,eAER5K,EAAK4G,EAAS5G,EACd,IAAItB,GAAMw2B,EACJl1B,EAAGyF,MAAMzB,OAAWsxB,GAAet1B,EAAGs1B,GACxC7nB,EAAiB7O,EAAQiM,aAG7B,OAFArI,GAAM+K,sBACF7O,EAAK+O,EAAgB,gBAAiB7O,GACnCF,IAGXE,EAAUy2B,EAActY,OAAO,WAC/B,GAAImU,GAAa,GAAI5yB,GAAQslB,kBAAkByR,EAC/C,OAAOtB,GAAQC,EAAW9C,IAI9B,OAFA8C,GAAUp1B,QAAUA,EACpBA,EAAQqF,aAAa+vB,GACdp1B,GAGXN,EAAQW,UAAU60B,eAAiB,SAAUqB,GACzCj2B,KAAKkE,UAA6B,OAAjBlE,KAAKkE,UACtBlE,KAAKq2B,UAAYJ,GAGrB72B,EAAQW,UAAU20B,cAAgB,WAC9B,OAAyB,OAAjB10B,KAAKkE,WAAsB,GAGvC9E,EAAQW,UAAU40B,aAAe,WAC7B,MAAO30B,MAAKq2B,WAGhBj3B,EAAQW,UAAU61B,iBAAmB,WACjC51B,KAAKkE,UAAYlE,KAAKkE,WAAY,OAClClE,KAAKq2B,UAAYvxB,QAGrB1F,EAAQW,UAAUk2B,SAAW,SAAUn1B,GACnC,GAAkB,kBAAPA,GACP,MAAO,IAAIu0B,GAAiBv0B,EAAId,KAAMqL,IAE1C,MAAM,IAAIhF,OAKf+R,WAAW,GAAGlV,SAAS,KAAKozB,IAAI,SAASj3B,EAAQnC,EAAOJ,GAC3D,YAWA,SAASy5B,KACL,IACI,GAAInyB,GAASoyB,CAEb,OADAA,GAAiB,KACVpyB,EAAOmC,MAAMvG,KAAMsC,WAC5B,MAAOtG,GAEL,MADA2L,GAAS3L,EAAIA,EACN2L,GAGf,QAASD,GAAS5G,GAEd,MADA01B,GAAiB11B,EACVy1B,EAuBX,QAASE,GAAYrT,GACjB,MAAc,OAAPA,GAAeA,KAAQ,GAAQA,KAAQ,GAC3B,gBAARA,IAAmC,gBAARA,GAI1C,QAAS1Y,GAASvF,GACd,MAAwB,kBAAVA,IACU,gBAAVA,IAAgC,OAAVA,EAGxC,QAAS8d,GAAiByT,GACtB,MAAKD,GAAYC,GAEV,GAAI/5B,OAAMg6B,EAAaD,IAFOA,EAKzC,QAAStK,GAAahoB,EAAQwyB,GAC1B,GAEIn6B,GAFAwhB,EAAM7Z,EAAOpH,OACbwC,EAAM,GAAIkb,OAAMuD,EAAM,EAE1B,KAAKxhB,EAAI,EAAGA,EAAIwhB,IAAOxhB,EACnB+C,EAAI/C,GAAK2H,EAAO3H,EAGpB,OADA+C,GAAI/C,GAAKm6B,EACFp3B,EAGX,QAAS8rB,GAAyBtmB,EAAK8F,EAAK+rB,GACxC,IAAI3c,EAAImB,MASJ,SAAUW,eAAejf,KAAKiI,EAAK8F,GAAO9F,EAAI8F,GAAOhG,MARrD,IAAIuX,GAAOzW,OAAO2V,yBAAyBvW,EAAK8F,EAEhD,OAAY,OAARuR,EACmB,MAAZA,EAAKnV,KAA2B,MAAZmV,EAAKP,IACtBO,EAAKlX,MACL0xB,EAHd,OAUR,QAAS1oB,GAAkBnJ,EAAKwH,EAAMrH,GAClC,GAAIsxB,EAAYzxB,GAAM,MAAOA,EAC7B,IAAI6W,IACA1W,MAAOA,EACPyV,cAAc,EACdE,YAAY,EACZD,UAAU,EAGd,OADAX,GAAIS,eAAe3V,EAAKwH,EAAMqP,GACvB7W,EAGX,QAASuT,GAAQpc,GACb,KAAMA,GAsEV,QAAS6wB,GAAQlsB,GACb,IACI,GAAkB,kBAAPA,GAAmB,CAC1B,GAAI6J,GAAOuP,EAAIsB,MAAM1a,EAAGf,WAEpB+2B,EAAa5c,EAAImB,OAAS1Q,EAAK3N,OAAS,EACxC+5B,EAAiCpsB,EAAK3N,OAAS,KAC7B,IAAhB2N,EAAK3N,QAA4B,gBAAZ2N,EAAK,IAC5BqsB,EACAC,EAAsBhoB,KAAKnO,EAAK,KAAOoZ,EAAIsB,MAAM1a,GAAI9D,OAAS,CAElE,IAAI85B,GAAcC,GACdC,EACA,OAAO,EAGf,OAAO,EACT,MAAOh7B,GACL,OAAO,GAIf,QAASssB,GAAiBtjB,GAEtB,QAASkyB,MACTA,EAAgBn3B,UAAYiF,CAE5B,KADA,GAAInI,GAAI,EACDA,KAAK,GAAIq6B,EAChB,OAAOlyB,GAKX,QAAS+B,GAAa+K,GAClB,MAAOqlB,GAAOloB,KAAK6C,GAGvB,QAASslB,GAAYvE,EAAOwE,EAAQhM,GAEhC,IAAI,GADA7rB,GAAM,GAAIkb,OAAMmY,GACZp2B,EAAI,EAAGA,EAAIo2B,IAASp2B,EACxB+C,EAAI/C,GAAK46B,EAAS56B,EAAI4uB,CAE1B,OAAO7rB,GAGX,QAASm3B,GAAa3xB,GAClB,IACI,MAAOA,GAAM,GACf,MAAOhJ,GACL,MAAO,8BAIf,QAASs7B,GAAQtyB,GACb,MAAe,QAARA,GACe,gBAARA,IACgB,gBAAhBA,GAAIkB,SACS,gBAAblB,GAAIwH,KAGtB,QAASqW,GAA+B7mB,GACpC,IACImS,EAAkBnS,EAAG,iBAAiB,GAE1C,MAAMu7B,KAGV,QAASnS,GAAwBppB,GAC7B,MAAS,OAALA,IACKA,YAAaW,OAA8B,uBAAEmd,kBAClD9d,EAAiB,iBAAM,GAG/B,QAAS6R,GAAe7I,GACpB,MAAOsyB,GAAQtyB,IAAQkV,EAAIyB,mBAAmB3W,EAAK,SAkBvD,QAASmB,GAAYnB,GACjB,SAAUoB,SAASrJ,KAAKiI,GAG5B,QAAS+nB,GAAgByK,EAAMC,EAAI7a,GAE/B,IAAK,GADDjS,GAAOuP,EAAIsB,MAAMgc,GACZ/6B,EAAI,EAAGA,EAAIkO,EAAK3N,SAAUP,EAAG,CAClC,GAAIqO,GAAMH,EAAKlO,EACf,IAAImgB,EAAO9R,GACP,IACIoP,EAAIS,eAAe8c,EAAI3sB,EAAKoP,EAAIoB,cAAckc,EAAM1sB,IACtD,MAAOysB,MAyCrB,QAASzjB,GAAIhJ,GACT,MAAO4sB,GAAkB54B,EAAQgV,IAAIhJ,GAAOhG,OAGhD,QAASyrB,KACL,GAAuB,kBAAZnxB,SACP,IACI,GAAIM,GAAU,GAAIN,SAAQ,aAC1B,IAAkC,wBAA3BgH,SAASrJ,KAAK2C,GACjB,MAAON,SAEb,MAAOpD,KAIjB,QAAS6Y,GAAW1V,EAAMkL,GACtB,MAAOlL,GAAKmF,KAAK+F,GA1UrB,GAAI6P,GAAM7a,EAAQ,SACdyH,EAAkC,mBAAbiqB,WAErBppB,GAAY3L,MACZw6B,EACAmB,EAA+B,mBAATx4B,MAAuBA,KAC3B,mBAAXD,QAAyBA,OACd,mBAAXH,GAAyBA,EACvB+F,SAAT9E,KAAqBA,KAAO,KAiB5BoX,EAAW,SAASwgB,EAAOC,GAG3B,QAASC,KACL93B,KAAK6Z,YAAc+d,EACnB53B,KAAKmhB,aAAe0W,CACpB,KAAK,GAAI1wB,KAAgB0wB,GAAO93B,UACxB2zB,EAAQ32B,KAAK86B,EAAO93B,UAAWoH,IACgB,MAA/CA,EAAa4J,OAAO5J,EAAanK,OAAO,KAExCgD,KAAKmH,EAAe,KAAO0wB,EAAO93B,UAAUoH,IATxD,GAAIusB,MAAa1X,cAejB,OAFA8b,GAAE/3B,UAAY83B,EAAO93B,UACrB63B,EAAM73B,UAAY,GAAI+3B,GACfF,EAAM73B,WA8Db6rB,EAAoB,WACpB,GAAImM,IACArd,MAAM3a,UACN6F,OAAO7F,UACPi4B,SAASj4B,WAGTk4B,EAAkB,SAAS7U,GAC3B,IAAK,GAAI3mB,GAAI,EAAGA,EAAIs7B,EAAmB/6B,SAAUP,EAC7C,GAAIs7B,EAAmBt7B,KAAO2mB,EAC1B,OAAO,CAGf,QAAO,EAGX,IAAIlJ,EAAImB,MAAO,CACX,GAAIzQ,GAAUhF,OAAO6V,mBACrB,OAAO,UAASzW,GAGZ,IAFA,GAAIxF,MACA04B,EAActyB,OAAOC,OAAO,MAClB,MAAPb,IAAgBizB,EAAgBjzB,IAAM,CACzC,GAAI2F,EACJ,KACIA,EAAOC,EAAQ5F,GACjB,MAAOhJ,GACL,MAAOwD,GAEX,IAAK,GAAI/C,GAAI,EAAGA,EAAIkO,EAAK3N,SAAUP,EAAG,CAClC,GAAIqO,GAAMH,EAAKlO,EACf,KAAIy7B,EAAYptB,GAAhB,CACAotB,EAAYptB,IAAO,CACnB,IAAIuR,GAAOzW,OAAO2V,yBAAyBvW,EAAK8F,EACpC,OAARuR,GAA4B,MAAZA,EAAKnV,KAA2B,MAAZmV,EAAKP,KACzCtc,EAAIyB,KAAK6J,IAGjB9F,EAAMkV,EAAIwB,eAAe1W,GAE7B,MAAOxF,IAGX,GAAIk0B,MAAa1X,cACjB,OAAO,UAAShX,GACZ,GAAIizB,EAAgBjzB,GAAM,QAC1B,IAAIxF,KAGJ24B,GAAa,IAAK,GAAIrtB,KAAO9F,GACzB,GAAI0uB,EAAQ32B,KAAKiI,EAAK8F,GAClBtL,EAAIyB,KAAK6J,OACN,CACH,IAAK,GAAIrO,GAAI,EAAGA,EAAIs7B,EAAmB/6B,SAAUP,EAC7C,GAAIi3B,EAAQ32B,KAAKg7B,EAAmBt7B,GAAIqO,GACpC,QAASqtB,EAGjB34B,GAAIyB,KAAK6J,GAGjB,MAAOtL,OAMfy3B,EAAwB,sBAiCxBE,EAAS,wBA6CT3P,EAAoB,WACpB,MAAM,SAAW,IAAI7qB,OAOV,SAASwI,GACZ,MAAI0I,GAAe1I,GAAeA,EAC3B,GAAIxI,OAAMg6B,EAAaxxB,KAR3B,SAASA,GACZ,GAAI0I,EAAe1I,GAAQ,MAAOA,EAClC,KAAK,KAAM,IAAIxI,OAAMg6B,EAAaxxB,IAClC,MAAM4S,GAAM,MAAOA,QA0B3B0S,EAAU,SAASrG,GACnB,MAAIlK,GAAItQ,QAAQwa,GACLA,EAEJ,KAGX,IAAsB,mBAAXgU,SAA0BA,OAAOrD,SAAU,CAClD,GAAIsD,GAAkC,kBAAf3d,OAAM8c,KAAsB,SAASpT,GACxD,MAAO1J,OAAM8c,KAAKpT,IAClB,SAASA,GAIT,IAHA,GAEIkU,GAFA94B,KACA+4B,EAAKnU,EAAEgU,OAAOrD,cAERuD,EAAWC,EAAGtY,QAAY,MAChCzgB,EAAIyB,KAAKq3B,EAASnzB,MAEtB,OAAO3F,GAGXirB,GAAU,SAASrG,GACf,MAAIlK,GAAItQ,QAAQwa,GACLA,EACK,MAALA,GAA2C,kBAAvBA,GAAEgU,OAAOrD,UAC7BsD,EAAUjU,GAEd,MAIf,GAAIpiB,GAA4B,mBAAZlD,IAC2B,qBAAvCqH,EAAYrH,GAAS2W,cAEzBiiB,EAAqC,mBAAZ54B,IACF,mBAAhBA,GAAQgV,IAqBftU,GACAwtB,QAASA,EACTjmB,aAAcA,EACd6kB,kBAAmBA,EACnBN,yBAA0BA,EAC1B/S,QAASA,EACT3O,QAASsQ,EAAItQ,QACb6gB,QAASA,EACTtc,kBAAmBA,EACnBsoB,YAAaA,EACb/rB,SAAUA,EACV4sB,QAASA,EACTxwB,YAAaA,EACba,SAAUA,EACVD,SAAUA,EACV0P,SAAUA,EACVgV,aAAcA,EACdnJ,iBAAkBA,EAClBqF,iBAAkBA,EAClB8O,YAAaA,EACbhxB,SAAUuwB,EACV9oB,eAAgBA,EAChB2Z,kBAAmBA,EACnBpC,wBAAyBA,EACzBvC,+BAAgCA,EAChC1c,YAAaA,EACb4mB,gBAAiBA,EACjBlrB,YAA+B,mBAAX22B,SAA0BA,QACL,kBAArBA,QAAOC,UAC3Bz2B,OAAQA,EACR01B,gBAAiBA,EACjB5jB,IAAKA,EACL/U,OAAQ44B,EACRpH,iBAAkBA,EAClB1b,WAAYA,EAEhBrV,GAAIqxB,aAAerxB,EAAIwC,QAAU,WAC7B,GAAIqmB,GAAUvpB,EAAQ45B,SAASnhB,KAAK1I,MAAM,KAAK8N,IAAIgc,OACnD,OAAuB,KAAftQ,EAAQ,IAAYA,EAAQ,GAAK,IAAQA,EAAQ,GAAK,KAG9D7oB,EAAIwC,QAAQxC,EAAI8oB,iBAAiBxpB,EAErC,KAAK,KAAM,IAAInC,OAAW,MAAOX,GAAIwD,EAAIsT,cAAgB9W,EACzDkB,EAAOJ,QAAU0C,IAEduL,QAAQ,UAAU,IAAI,KACqB,mBAAX7L,SAAqC,OAAXA,OAAiDA,OAAO05B,EAAI15B,OAAOE,QAAwF,mBAATD,OAAiC,OAATA,OAA6CA,KAAKy5B,EAAIz5B,KAAKC,WAC/RrC,KAAKiD,KAAKxD,EAAQ,YAA8B,mBAAXuC,QAAyBA,OAAyB,mBAATI,MAAuBA,KAAyB,mBAAXD,QAAyBA,aAE5I25B,SAAW,IAAI11B,GAAG,SAAS3G,EAAQU,EAAOJ,IAM7C,SAAUoC,EAAQ2W,EAAUijB,EAAYh0B,GACtC,YAkBF,SAASi0B,GAAkBj4B,EAAIuzB,EAASzwB,GACpC,MAAOrB,YAAWy2B,EAAOl4B,EAAI8C,GAAUywB,GAY3C,QAAS4E,GAAej4B,EAAKF,EAAI8C,GAC7B,QAAI8W,MAAM9Q,QAAQ5I,KACdsY,EAAKtY,EAAK4C,EAAQ9C,GAAK8C,IAChB,GAWf,QAAS0V,GAAKtU,EAAK+vB,EAAUnxB,GACzB,GAAInH,EAEJ,IAAKuI,EAIL,GAAIA,EAAI4oB,QACJ5oB,EAAI4oB,QAAQmH,EAAUnxB,OACnB,IAAIoB,EAAIhI,SAAW8H,EAEtB,IADArI,EAAI,EACGA,EAAIuI,EAAIhI,QACX+3B,EAASh4B,KAAK6G,EAASoB,EAAIvI,GAAIA,EAAGuI,GAClCvI,QAGJ,KAAKA,IAAKuI,GACNA,EAAIgX,eAAevf,IAAMs4B,EAASh4B,KAAK6G,EAASoB,EAAIvI,GAAIA,EAAGuI,GAYvE,QAASk0B,GAAUhjB,EAAQ1J,EAAMtG,GAC7B,GAAIizB,GAAqB,sBAAwB3sB,EAAO,KAAOtG,EAAU,QACzE,OAAO,YACH,GAAIlK,GAAI,GAAIW,OAAM,mBACdwF,EAAQnG,GAAKA,EAAEmG,MAAQnG,EAAEmG,MAAM8O,QAAQ,kBAAmB,IACzDA,QAAQ,cAAe,IACvBA,QAAQ,6BAA8B,kBAAoB,sBAE3DO,EAAMtS,EAAOkS,UAAYlS,EAAOkS,QAAQ3B,MAAQvQ,EAAOkS,QAAQI,IAInE,OAHIA,IACAA,EAAIzU,KAAKmC,EAAOkS,QAAS+nB,EAAoBh3B,GAE1C+T,EAAO3P,MAAMvG,KAAMsC,YAwElC,QAAS82B,GAAQnxB,EAAOif,EAAMmS,GAC1B,GACIC,GADAC,EAAQrS,EAAKnnB,SAGjBu5B,GAASrxB,EAAMlI,UAAY6F,OAAOC,OAAO0zB,GACzCD,EAAOzf,YAAc5R,EACrBqxB,EAAOE,OAASD,EAEZF,GACAI,GAAOH,EAAQD,GAUvB,QAASL,GAAOl4B,EAAI8C,GAChB,MAAO,YACH,MAAO9C,GAAGyF,MAAM3C,EAAStB,YAWjC,QAASo3B,GAAStW,EAAKpc,GACnB,aAAWoc,IAAOuW,GACPvW,EAAI7c,MAAMS,EAAOA,EAAK,IAAMlC,EAAYA,EAAWkC,GAEvDoc,EASX,QAASwW,GAAYC,EAAMC,GACvB,MAAQD,KAAS/0B,EAAag1B,EAAOD,EASzC,QAASE,GAAkB31B,EAAQ41B,EAAO7iB,GACtCmC,EAAK2gB,EAASD,GAAQ,SAASr7B,GAC3ByF,EAAO81B,iBAAiBv7B,EAAMwY,GAAS,KAU/C,QAASgjB,GAAqB/1B,EAAQ41B,EAAO7iB,GACzCmC,EAAK2gB,EAASD,GAAQ,SAASr7B,GAC3ByF,EAAOg2B,oBAAoBz7B,EAAMwY,GAAS,KAWlD,QAASkjB,GAAU9iB,EAAMhP,GACrB,KAAOgP,GAAM,CACT,GAAIA,GAAQhP,EACR,OAAO,CAEXgP,GAAOA,EAAK+iB,WAEhB,OAAO,EASX,QAASC,GAAMzoB,EAAK0oB,GAChB,MAAO1oB,GAAIkG,QAAQwiB,IAAQ,EAQ/B,QAASP,GAASnoB,GACd,MAAOA,GAAI2oB,OAAO5rB,MAAM,QAU5B,QAAS6rB,GAAQzM,EAAKuM,EAAMG,GACxB,GAAI1M,EAAIjW,UAAY2iB,EAChB,MAAO1M,GAAIjW,QAAQwiB,EAGnB,KADA,GAAI/9B,GAAI,EACDA,EAAIwxB,EAAIjxB,QAAQ,CACnB,GAAK29B,GAAa1M,EAAIxxB,GAAGk+B,IAAcH,IAAWG,GAAa1M,EAAIxxB,KAAO+9B,EACtE,MAAO/9B,EAEXA,KAEJ,OAAO,EASf,QAASm+B,GAAQ51B,GACb,MAAO0V,OAAM3a,UAAUkH,MAAMlK,KAAKiI,EAAK,GAU3C,QAAS61B,GAAY5M,EAAKnjB,EAAKgwB,GAK3B,IAJA,GAAIC,MACAjZ,KACArlB,EAAI,EAEDA,EAAIwxB,EAAIjxB,QAAQ,CACnB,GAAIomB,GAAMtY,EAAMmjB,EAAIxxB,GAAGqO,GAAOmjB,EAAIxxB,EAC9Bi+B,GAAQ5Y,EAAQsB,GAAO,GACvB2X,EAAQ95B,KAAKgtB,EAAIxxB,IAErBqlB,EAAOrlB,GAAK2mB,EACZ3mB,IAaJ,MAVIq+B,KAIIC,EAHCjwB,EAGSiwB,EAAQD,KAAK,SAAyBv+B,EAAGgsB,GAC/C,MAAOhsB,GAAEuO,GAAOyd,EAAEzd,KAHZiwB,EAAQD,QAQnBC,EASX,QAASC,GAASh2B,EAAKi2B,GAKnB,IAJA,GAAI5D,GAAQzb,EACRsf,EAAYD,EAAS,GAAGE,cAAgBF,EAASh0B,MAAM,GAEvDxK,EAAI,EACDA,EAAI2+B,GAAgBp+B,QAAQ,CAI/B,GAHAq6B,EAAS+D,GAAgB3+B,GACzBmf,EAAO,EAAWyb,EAAS6D,EAAYD,EAEnCrf,IAAQ5W,GACR,MAAO4W,EAEXnf,KAEJ,MAAOqI,GAQX,QAASu2B,KACL,MAAOC,MAQX,QAASC,GAAoBC,GACzB,GAAIC,GAAMD,EAAQE,eAAiBF,CACnC,OAAQC,GAAIE,aAAeF,EAAIG,cAAgB18B,EAyCnD,QAAS28B,GAAMC,EAAS7Z,GACpB,GAAI9iB,GAAOa,IACXA,MAAK87B,QAAUA,EACf97B,KAAKiiB,SAAWA,EAChBjiB,KAAKw7B,QAAUM,EAAQN,QACvBx7B,KAAKoE,OAAS03B,EAAQjf,QAAQkf,YAI9B/7B,KAAKg8B,WAAa,SAASC,GACnBvC,EAASoC,EAAQjf,QAAQqf,QAASJ,KAClC38B,EAAKgY,QAAQ8kB,IAIrBj8B,KAAKH,OAoCT,QAASs8B,GAAoBL,GACzB,GAAIM,GACAC,EAAaP,EAAQjf,QAAQwf,UAajC,OAAO,KAVHD,EADAC,EACOA,EACAC,GACAC,EACAC,GACAC,EACCC,GAGDC,EAFAC,GAIOd,EAASe,GAS/B,QAASA,GAAaf,EAASgB,EAAW/G,GACtC,GAAIgH,GAAchH,EAAMiH,SAAShgC,OAC7BigC,EAAqBlH,EAAMmH,gBAAgBlgC,OAC3CmgC,EAAWL,EAAYM,IAAgBL,EAAcE,IAAuB,EAC5EI,EAAWP,GAAaQ,GAAYC,KAAkBR,EAAcE,IAAuB,CAE/FlH,GAAMoH,UAAYA,EAClBpH,EAAMsH,UAAYA,EAEdF,IACArB,EAAQ0B,YAKZzH,EAAM+G,UAAYA,EAGlBW,EAAiB3B,EAAS/F,GAG1B+F,EAAQ7lB,KAAK,eAAgB8f,GAE7B+F,EAAQ4B,UAAU3H,GAClB+F,EAAQ0B,QAAQG,UAAY5H,EAQhC,QAAS0H,GAAiB3B,EAAS/F,GAC/B,GAAIyH,GAAU1B,EAAQ0B,QAClBR,EAAWjH,EAAMiH,SACjBY,EAAiBZ,EAAShgC,MAGzBwgC,GAAQK,aACTL,EAAQK,WAAaC,EAAqB/H,IAI1C6H,EAAiB,IAAMJ,EAAQO,cAC/BP,EAAQO,cAAgBD,EAAqB/H,GACnB,IAAnB6H,IACPJ,EAAQO,eAAgB,EAG5B,IAAIF,GAAaL,EAAQK,WACrBE,EAAgBP,EAAQO,cACxBC,EAAeD,EAAgBA,EAAcE,OAASJ,EAAWI,OAEjEA,EAASlI,EAAMkI,OAASC,EAAUlB,EACtCjH,GAAMoI,UAAYC,KAClBrI,EAAMsI,UAAYtI,EAAMoI,UAAYN,EAAWM,UAE/CpI,EAAMuI,MAAQC,EAASP,EAAcC,GACrClI,EAAMyI,SAAWC,EAAYT,EAAcC,GAE3CS,EAAelB,EAASzH,GACxBA,EAAM4I,gBAAkBC,EAAa7I,EAAM8I,OAAQ9I,EAAM+I,OAEzD,IAAIC,GAAkBC,EAAYjJ,EAAMsI,UAAWtI,EAAM8I,OAAQ9I,EAAM+I,OACvE/I,GAAMkJ,iBAAmBF,EAAgBpX,EACzCoO,EAAMmJ,iBAAmBH,EAAgBI,EACzCpJ,EAAMgJ,gBAAmBK,GAAIL,EAAgBpX,GAAKyX,GAAIL,EAAgBI,GAAMJ,EAAgBpX,EAAIoX,EAAgBI,EAEhHpJ,EAAMsJ,MAAQtB,EAAgBuB,EAASvB,EAAcf,SAAUA,GAAY,EAC3EjH,EAAMwJ,SAAWxB,EAAgByB,EAAYzB,EAAcf,SAAUA,GAAY,EAEjFjH,EAAM0J,YAAejC,EAAQG,UAAsC5H,EAAMiH,SAAShgC,OAC9EwgC,EAAQG,UAAU8B,YAAe1J,EAAMiH,SAAShgC,OAASwgC,EAAQG,UAAU8B,YADtC1J,EAAMiH,SAAShgC,OAGxD0iC,EAAyBlC,EAASzH,EAGlC,IAAI3xB,GAAS03B,EAAQN,OACjBnB,GAAUtE,EAAM4J,SAASv7B,OAAQA,KACjCA,EAAS2xB,EAAM4J,SAASv7B,QAE5B2xB,EAAM3xB,OAASA,EAGnB,QAASs6B,GAAelB,EAASzH,GAC7B,GAAIkI,GAASlI,EAAMkI,OACf2B,EAASpC,EAAQqC,gBACjBC,EAAYtC,EAAQsC,cACpBnC,EAAYH,EAAQG,aAEpB5H,GAAM+G,YAAcM,IAAeO,EAAUb,YAAcQ,KAC3DwC,EAAYtC,EAAQsC,WAChBnY,EAAGgW,EAAUkB,QAAU,EACvBM,EAAGxB,EAAUmB,QAAU,GAG3Bc,EAASpC,EAAQqC,aACblY,EAAGsW,EAAOtW,EACVwX,EAAGlB,EAAOkB,IAIlBpJ,EAAM8I,OAASiB,EAAUnY,GAAKsW,EAAOtW,EAAIiY,EAAOjY,GAChDoO,EAAM+I,OAASgB,EAAUX,GAAKlB,EAAOkB,EAAIS,EAAOT,GAQpD,QAASO,GAAyBlC,EAASzH,GACvC,GAEIgK,GAAUC,EAAWC,EAAWC,EAFhCrf,EAAO2c,EAAQ2C,cAAgBpK,EAC/BsI,EAAYtI,EAAMoI,UAAYtd,EAAKsd,SAGvC,IAAIpI,EAAM+G,WAAaS,KAAiBc,EAAY+B,IAAoBvf,EAAKkf,WAAaj7B,GAAY,CAClG,GAAI+5B,GAAS9I,EAAM8I,OAAShe,EAAKge,OAC7BC,EAAS/I,EAAM+I,OAASje,EAAKie,OAE7B1a,EAAI4a,EAAYX,EAAWQ,EAAQC,EACvCkB,GAAY5b,EAAEuD,EACdsY,EAAY7b,EAAE+a,EACdY,EAAYX,GAAIhb,EAAEuD,GAAKyX,GAAIhb,EAAE+a,GAAM/a,EAAEuD,EAAIvD,EAAE+a,EAC3Ce,EAAYtB,EAAaC,EAAQC,GAEjCtB,EAAQ2C,aAAepK,MAGvBgK,GAAWlf,EAAKkf,SAChBC,EAAYnf,EAAKmf,UACjBC,EAAYpf,EAAKof,UACjBC,EAAYrf,EAAKqf,SAGrBnK,GAAMgK,SAAWA,EACjBhK,EAAMiK,UAAYA,EAClBjK,EAAMkK,UAAYA,EAClBlK,EAAMmK,UAAYA,EAQtB,QAASpC,GAAqB/H,GAK1B,IAFA,GAAIiH,MACAvgC,EAAI,EACDA,EAAIs5B,EAAMiH,SAAShgC,QACtBggC,EAASvgC,IACL4jC,QAASC,GAAMvK,EAAMiH,SAASvgC,GAAG4jC,SACjCE,QAASD,GAAMvK,EAAMiH,SAASvgC,GAAG8jC,UAErC9jC,GAGJ,QACI0hC,UAAWC,KACXpB,SAAUA,EACViB,OAAQC,EAAUlB,GAClB6B,OAAQ9I,EAAM8I,OACdC,OAAQ/I,EAAM+I,QAStB,QAASZ,GAAUlB,GACf,GAAIY,GAAiBZ,EAAShgC,MAG9B,IAAuB,IAAnB4gC,EACA,OACIjW,EAAG2Y,GAAMtD,EAAS,GAAGqD,SACrBlB,EAAGmB,GAAMtD,EAAS,GAAGuD,SAK7B,KADA,GAAI5Y,GAAI,EAAGwX,EAAI,EAAG1iC,EAAI,EACfA,EAAImhC,GACPjW,GAAKqV,EAASvgC,GAAG4jC,QACjBlB,GAAKnC,EAASvgC,GAAG8jC,QACjB9jC,GAGJ,QACIkrB,EAAG2Y,GAAM3Y,EAAIiW,GACbuB,EAAGmB,GAAMnB,EAAIvB,IAWrB,QAASoB,GAAYX,EAAW1W,EAAGwX,GAC/B,OACIxX,EAAGA,EAAI0W,GAAa,EACpBc,EAAGA,EAAId,GAAa,GAU5B,QAASO,GAAajX,EAAGwX,GACrB,MAAIxX,KAAMwX,EACCqB,GAGPpB,GAAIzX,IAAMyX,GAAID,GACPxX,EAAI,EAAI8Y,GAAiBC,GAE7BvB,EAAI,EAAIwB,GAAeC,GAUlC,QAASnC,GAAYoC,EAAIC,EAAItT,GACpBA,IACDA,EAAQuT,GAEZ,IAAIpZ,GAAImZ,EAAGtT,EAAM,IAAMqT,EAAGrT,EAAM,IAC5B2R,EAAI2B,EAAGtT,EAAM,IAAMqT,EAAGrT,EAAM,GAEhC,OAAO7mB,MAAKq6B,KAAMrZ,EAAIA,EAAMwX,EAAIA,GAUpC,QAASZ,GAASsC,EAAIC,EAAItT,GACjBA,IACDA,EAAQuT,GAEZ,IAAIpZ,GAAImZ,EAAGtT,EAAM,IAAMqT,EAAGrT,EAAM,IAC5B2R,EAAI2B,EAAGtT,EAAM,IAAMqT,EAAGrT,EAAM,GAChC,OAA0B,KAAnB7mB,KAAKs6B,MAAM9B,EAAGxX,GAAWhhB,KAAKu6B,GASzC,QAAS1B,GAAY2B,EAAOC,GACxB,MAAO7C,GAAS6C,EAAI,GAAIA,EAAI,GAAIC,IAAmB9C,EAAS4C,EAAM,GAAIA,EAAM,GAAIE,IAUpF,QAAS/B,GAAS6B,EAAOC,GACrB,MAAO3C,GAAY2C,EAAI,GAAIA,EAAI,GAAIC,IAAmB5C,EAAY0C,EAAM,GAAIA,EAAM,GAAIE,IAiB1F,QAASzE,KACL58B,KAAKshC,KAAOC,GACZvhC,KAAKwhC,MAAQC,GAEbzhC,KAAK0hC,SAAU,EAEf7F,EAAMt1B,MAAMvG,KAAMsC,WAoEtB,QAASi6B,KACLv8B,KAAKshC,KAAOK,GACZ3hC,KAAKwhC,MAAQI,GAEb/F,EAAMt1B,MAAMvG,KAAMsC,WAElBtC,KAAK6hC,MAAS7hC,KAAK87B,QAAQ0B,QAAQsE,iBAoEvC,QAASC,KACL/hC,KAAKgiC,SAAWC,GAChBjiC,KAAKwhC,MAAQU,GACbliC,KAAKmiC,SAAU,EAEftG,EAAMt1B,MAAMvG,KAAMsC,WAsCtB,QAAS8/B,GAAuBnG,EAAIt9B,GAChC,GAAI0a,GAAMuhB,EAAQqB,EAAGoG,SACjBC,EAAU1H,EAAQqB,EAAGsG,eAMzB,OAJI5jC,IAAQ2+B,GAAYC,MACpBlkB,EAAMwhB,EAAYxhB,EAAI+F,OAAOkjB,GAAU,cAAc,KAGjDjpB,EAAKipB,GAiBjB,QAAS7F,KACLz8B,KAAKgiC,SAAWQ,GAChBxiC,KAAKyiC,aAEL5G,EAAMt1B,MAAMvG,KAAMsC,WA0BtB,QAASogC,GAAWzG,EAAIt9B,GACpB,GAAIgkC,GAAa/H,EAAQqB,EAAGoG,SACxBI,EAAYziC,KAAKyiC,SAGrB,IAAI9jC,GAAQy+B,GAAcwF,KAAqC,IAAtBD,EAAW3lC,OAEhD,MADAylC,GAAUE,EAAW,GAAGE,aAAc,GAC9BF,EAAYA,EAGxB,IAAIlmC,GACAqmC,EACAP,EAAiB3H,EAAQqB,EAAGsG,gBAC5BQ,KACA3+B,EAASpE,KAAKoE,MAQlB,IALA0+B,EAAgBH,EAAW/lB,OAAO,SAASomB,GACvC,MAAO3I,GAAU2I,EAAM5+B,OAAQA,KAI/BzF,IAASy+B,GAET,IADA3gC,EAAI,EACGA,EAAIqmC,EAAc9lC,QACrBylC,EAAUK,EAAcrmC,GAAGomC,aAAc,EACzCpmC,GAMR,KADAA,EAAI,EACGA,EAAI8lC,EAAevlC,QAClBylC,EAAUF,EAAe9lC,GAAGomC,aAC5BE,EAAqB9hC,KAAKshC,EAAe9lC,IAIzCkC,GAAQ2+B,GAAYC,WACbkF,GAAUF,EAAe9lC,GAAGomC,YAEvCpmC,GAGJ,OAAKsmC,GAAqB/lC,QAMtB69B,EAAYiI,EAAc1jB,OAAO2jB,GAAuB,cAAc,GACtEA,GAPJ,OAwBJ,QAASpG,KACLd,EAAMt1B,MAAMvG,KAAMsC,UAElB,IAAI6U,GAAU6hB,EAAOh5B,KAAKmX,QAASnX,KACnCA,MAAKgjC,MAAQ,GAAIvG,GAAWz8B,KAAK87B,QAAS3kB,GAC1CnX,KAAKijC,MAAQ,GAAIrG,GAAW58B,KAAK87B,QAAS3kB,GAE1CnX,KAAKkjC,aAAe,KACpBljC,KAAKmjC,eAqCT,QAASC,GAActG,EAAWuG,GAC1BvG,EAAYM,IACZp9B,KAAKkjC,aAAeG,EAAUnG,gBAAgB,GAAG2F,WACjDS,EAAavmC,KAAKiD,KAAMqjC,IACjBvG,GAAaQ,GAAYC,KAChC+F,EAAavmC,KAAKiD,KAAMqjC,GAIhC,QAASC,GAAaD,GAClB,GAAIL,GAAQK,EAAUnG,gBAAgB,EAEtC,IAAI8F,EAAMH,aAAe7iC,KAAKkjC,aAAc,CACxC,GAAIK,IAAa5b,EAAGqb,EAAM3C,QAASlB,EAAG6D,EAAMzC,QAC5CvgC,MAAKmjC,YAAYliC,KAAKsiC,EACtB,IAAIC,GAAMxjC,KAAKmjC,YACXM,EAAkB,WAClB,GAAIhnC,GAAI+mC,EAAIxrB,QAAQurB,EAChB9mC,IAAI,GACJ+mC,EAAIpzB,OAAO3T,EAAG,GAGtB8F,YAAWkhC,EAAiBC,KAIpC,QAASC,GAAiBN,GAEtB,IAAK,GADD1b,GAAI0b,EAAU1D,SAASU,QAASlB,EAAIkE,EAAU1D,SAASY,QAClD9jC,EAAI,EAAGA,EAAIuD,KAAKmjC,YAAYnmC,OAAQP,IAAK,CAC9C,GAAIR,GAAI+D,KAAKmjC,YAAY1mC,GACrBmnC,EAAKj9B,KAAKy4B,IAAIzX,EAAI1rB,EAAE0rB,GAAIkc,EAAKl9B,KAAKy4B,IAAID,EAAIljC,EAAEkjC,EAChD,IAAIyE,GAAME,IAAkBD,GAAMC,GAC9B,OAAO,EAGf,OAAO,EAsBX,QAASC,GAAYjI,EAAS32B,GAC1BnF,KAAK87B,QAAUA,EACf97B,KAAK8b,IAAI3W,GAmGb,QAAS6+B,GAAkBC,GAEvB,GAAI1J,EAAM0J,EAASC,IACf,MAAOA,GAGX,IAAIC,GAAU5J,EAAM0J,EAASG,IACzBC,EAAU9J,EAAM0J,EAASK,GAM7B,OAAIH,IAAWE,EACJH,GAIPC,GAAWE,EACJF,EAAUC,GAAqBE,GAItC/J,EAAM0J,EAASM,IACRA,GAGJC,GAGX,QAASC,KACL,IAAKC,GACD,OAAO,CAEX,IAAIC,MACAC,EAAc1lC,EAAO2lC,KAAO3lC,EAAO2lC,IAAIC,QAO3C,QANC,OAAQ,eAAgB,QAAS,QAAS,cAAe,QAAQlX,QAAQ,SAASxK,GAI/EuhB,EAASvhB,IAAOwhB,GAAc1lC,EAAO2lC,IAAIC,SAAS,eAAgB1hB,KAE/DuhB,EA4CX,QAASI,GAAWloB,GAChB7c,KAAK6c,QAAU4c,MAAWz5B,KAAKglC,SAAUnoB,OAEzC7c,KAAKilC,GAAK5J,IAEVr7B,KAAK87B,QAAU,KAGf97B,KAAK6c,QAAQqf,OAAStC,EAAY55B,KAAK6c,QAAQqf,QAAQ,GAEvDl8B,KAAKklC,MAAQC,GAEbnlC,KAAKolC,gBACLplC,KAAKqlC,eAqOT,QAASC,GAASJ,GACd,MAAIA,GAAQK,GACD,SACAL,EAAQM,GACR,MACAN,EAAQO,GACR,OACAP,EAAQQ,GACR,QAEJ,GAQX,QAASC,GAAazF,GAClB,MAAIA,IAAaU,GACN,OACAV,GAAaS,GACb,KACAT,GAAaO,GACb,OACAP,GAAaQ,GACb,QAEJ,GASX,QAASkF,IAA6BC,EAAiBC,GACnD,GAAIhK,GAAUgK,EAAWhK,OACzB,OAAIA,GACOA,EAAQ50B,IAAI2+B,GAEhBA,EAQX,QAASE,MACLhB,EAAWx+B,MAAMvG,KAAMsC,WA6D3B,QAAS0jC,MACLD,GAAex/B,MAAMvG,KAAMsC,WAE3BtC,KAAKimC,GAAK,KACVjmC,KAAKkmC,GAAK,KA4Ed,QAASC,MACLJ,GAAex/B,MAAMvG,KAAMsC,WAsC/B,QAAS8jC,MACLrB,EAAWx+B,MAAMvG,KAAMsC,WAEvBtC,KAAKqmC,OAAS,KACdrmC,KAAKsmC,OAAS,KAmElB,QAASC,MACLR,GAAex/B,MAAMvG,KAAMsC,WA8B/B,QAASkkC,MACLT,GAAex/B,MAAMvG,KAAMsC,WA2D/B,QAASmkC,MACL1B,EAAWx+B,MAAMvG,KAAMsC,WAIvBtC,KAAK0mC,OAAQ,EACb1mC,KAAK2mC,SAAU,EAEf3mC,KAAKqmC,OAAS,KACdrmC,KAAKsmC,OAAS,KACdtmC,KAAK6yB,MAAQ,EAqGjB,QAAS+T,IAAOpL,EAAS3e,GAGrB,MAFAA,GAAUA,MACVA,EAAQgqB,YAAcjN,EAAY/c,EAAQgqB,YAAaD,GAAO5B,SAAS8B,QAChE,GAAIC,IAAQvL,EAAS3e,GAiIhC,QAASkqB,IAAQvL,EAAS3e,GACtB7c,KAAK6c,QAAU4c,MAAWmN,GAAO5B,SAAUnoB,OAE3C7c,KAAK6c,QAAQkf,YAAc/7B,KAAK6c,QAAQkf,aAAeP,EAEvDx7B,KAAKgnC,YACLhnC,KAAKw9B,WACLx9B,KAAK6mC,eACL7mC,KAAKinC,eAELjnC,KAAKw7B,QAAUA,EACfx7B,KAAK+1B,MAAQoG,EAAoBn8B,MACjCA,KAAKknC,YAAc,GAAInD,GAAY/jC,KAAMA,KAAK6c,QAAQqqB,aAEtDC,GAAennC,MAAM,GAErBsZ,EAAKtZ,KAAK6c,QAAQgqB,YAAa,SAASr8B,GACpC,GAAIs7B,GAAa9lC,KAAKonC,IAAI,GAAK58B,GAAK,GAAIA,EAAK,IAC7CA,GAAK,IAAMs7B,EAAWuB,cAAc78B,EAAK,IACzCA,EAAK,IAAMs7B,EAAWwB,eAAe98B,EAAK,KAC3CxK,MA4PP,QAASmnC,IAAerL,EAASsL,GAC7B,GAAI5L,GAAUM,EAAQN,OACtB,IAAKA,EAAQ+L,MAAb,CAGA,GAAI3rB,EACJtC,GAAKwiB,EAAQjf,QAAQ2qB,SAAU,SAASriC,EAAOqH,GAC3CoP,EAAOof,EAASQ,EAAQ+L,MAAO/6B,GAC3B46B,GACAtL,EAAQmL,YAAYrrB,GAAQ4f,EAAQ+L,MAAM3rB,GAC1C4f,EAAQ+L,MAAM3rB,GAAQzW,GAEtBq2B,EAAQ+L,MAAM3rB,GAAQkgB,EAAQmL,YAAYrrB,IAAS,KAGtDwrB,IACDtL,EAAQmL,iBAShB,QAASQ,IAAgBnyB,EAAO4f,GAC5B,GAAIwS,GAAe7xB,EAASC,YAAY,QACxC4xB,GAAaC,UAAUryB,GAAO,GAAM,GACpCoyB,EAAaE,QAAU1S,EACvBA,EAAK9wB,OAAOmR,cAAcmyB,GAngF9B,GA+FIjO,IA/FA2B,IAAmB,GAAI,SAAU,MAAO,KAAM,KAAM,KACpDyM,GAAehyB,EAASsb,cAAc,OAEtCwI,GAAgB,WAEhB2G,GAAQ35B,KAAK25B,MACblB,GAAMz4B,KAAKy4B,IACXhB,GAAM0J,KAAK1J,GA0FX3E,IADyB,kBAAlB7zB,QAAO6zB,OACL,SAAgBr1B,GACrB,GAAIA,IAAWU,GAAwB,OAAXV,EACxB,KAAM,IAAIiC,WAAU,6CAIxB,KAAK,GADD0hC,GAASniC,OAAOxB,GACXsC,EAAQ,EAAGA,EAAQpE,UAAUtF,OAAQ0J,IAAS,CACnD,GAAIshC,GAAS1lC,UAAUoE,EACvB,IAAIshC,IAAWljC,GAAwB,OAAXkjC,EACxB,IAAK,GAAIC,KAAWD,GACZA,EAAOhsB,eAAeisB,KACtBF,EAAOE,GAAWD,EAAOC,IAKzC,MAAOF,IAGFniC,OAAO6zB,MAWpB,IAAIyO,IAAShP,EAAU,SAAgBiP,EAAMla,EAAKma,GAG9C,IAFA,GAAIz9B,GAAO/E,OAAO+E,KAAKsjB,GACnBxxB,EAAI,EACDA,EAAIkO,EAAK3N,UACPorC,GAAUA,GAASD,EAAKx9B,EAAKlO,MAAQqI,KACtCqjC,EAAKx9B,EAAKlO,IAAMwxB,EAAItjB,EAAKlO,KAE7BA,GAEJ,OAAO0rC,IACR,SAAU,iBASTC,GAAQlP,EAAU,SAAeiP,EAAMla,GACvC,MAAOia,IAAOC,EAAMla,GAAK,IAC1B,QAAS,iBAiNRqN,GAAY,EAeZ+M,GAAe,wCAEf3L,GAAiB,gBAAkBx9B,GACnCo9B,GAAyBtB,EAAS97B,EAAQ,kBAAoB4F,EAC9D03B,GAAqBE,IAAiB2L,GAAap5B,KAAK8hB,UAAUuX,WAElEC,GAAmB,QACnBC,GAAiB,MACjBC,GAAmB,QACnBC,GAAoB,SAEpBtI,GAAmB,GAEnBhD,GAAc,EACdwF,GAAa,EACbtF,GAAY,EACZC,GAAe,EAEfiD,GAAiB,EACjBC,GAAiB,EACjBC,GAAkB,EAClBC,GAAe,EACfC,GAAiB,GAEjB+H,GAAuBlI,GAAiBC,GACxCkI,GAAqBjI,GAAeC,GACpCiI,GAAgBF,GAAuBC,GAEvC7H,IAAY,IAAK,KACjBM,IAAmB,UAAW,UA4BlCxF,GAAM97B,WAKFoX,QAAS,aAKTtX,KAAM,WACFG,KAAKshC,MAAQvH,EAAkB/5B,KAAKw7B,QAASx7B,KAAKshC,KAAMthC,KAAKg8B,YAC7Dh8B,KAAKgiC,UAAYjI,EAAkB/5B,KAAKoE,OAAQpE,KAAKgiC,SAAUhiC,KAAKg8B,YACpEh8B,KAAKwhC,OAASzH,EAAkBwB,EAAoBv7B,KAAKw7B,SAAUx7B,KAAKwhC,MAAOxhC,KAAKg8B,aAMxF8M,QAAS,WACL9oC,KAAKshC,MAAQnH,EAAqBn6B,KAAKw7B,QAASx7B,KAAKshC,KAAMthC,KAAKg8B,YAChEh8B,KAAKgiC,UAAY7H,EAAqBn6B,KAAKoE,OAAQpE,KAAKgiC,SAAUhiC,KAAKg8B,YACvEh8B,KAAKwhC,OAASrH,EAAqBoB,EAAoBv7B,KAAKw7B,SAAUx7B,KAAKwhC,MAAOxhC,KAAKg8B,aA4T/F,IAAI+M,KACAC,UAAW5L,GACX6L,UAAWrG,GACXsG,QAAS5L,IAGTiE,GAAuB,YACvBE,GAAsB,mBAgB1BrI,GAAQwD,EAAYf,GAKhB1kB,QAAS,SAAmB8kB,GACxB,GAAIa,GAAYiM,GAAgB9M,EAAGt9B,KAG/Bm+B,GAAYM,IAA6B,IAAdnB,EAAGkN,SAC9BnpC,KAAK0hC,SAAU,GAGf5E,EAAY8F,IAA2B,IAAb3G,EAAGmN,QAC7BtM,EAAYQ,IAIXt9B,KAAK0hC,UAIN5E,EAAYQ,KACZt9B,KAAK0hC,SAAU,GAGnB1hC,KAAKiiB,SAASjiB,KAAK87B,QAASgB,GACxBE,UAAWf,GACXiB,iBAAkBjB,GAClBoN,YAAaZ,GACb9I,SAAU1D,OAKtB,IAAIqN,KACAC,YAAanM,GACboM,YAAa5G,GACb6G,UAAWnM,GACXoM,cAAenM,GACfoM,WAAYpM,IAIZqM,IACA/qC,EAAG0pC,GACHplC,EAAGqlC,GACHnjC,EAAGojC,GACH/iC,EAAGgjC,IAGH/G,GAAyB,cACzBC,GAAwB,qCAGxB1iC,GAAO2qC,iBAAmB3qC,EAAO4qC,eACjCnI,GAAyB,gBACzBC,GAAwB,6CAiB5BxI,EAAQmD,EAAmBV,GAKvB1kB,QAAS,SAAmB8kB,GACxB,GAAI4F,GAAQ7hC,KAAK6hC,MACbkI,GAAgB,EAEhBC,EAAsB/N,EAAGt9B,KAAK8W,cAAcxE,QAAQ,KAAM,IAC1D6rB,EAAYwM,GAAkBU,GAC9BX,EAAcO,GAAuB3N,EAAGoN,cAAgBpN,EAAGoN,YAE3DY,EAAWZ,GAAed,GAG1B2B,EAAaxP,EAAQmH,EAAO5F,EAAGkO,UAAW,YAG1CrN,GAAYM,KAA8B,IAAdnB,EAAGkN,QAAgBc,GAC3CC,EAAa,IACbrI,EAAM5gC,KAAKg7B,GACXiO,EAAarI,EAAM7kC,OAAS,GAEzB8/B,GAAaQ,GAAYC,MAChCwM,GAAgB,GAIhBG,EAAa,IAKjBrI,EAAMqI,GAAcjO,EAEpBj8B,KAAKiiB,SAASjiB,KAAK87B,QAASgB,GACxBE,SAAU6E,EACV3E,iBAAkBjB,GAClBoN,YAAaA,EACb1J,SAAU1D,IAGV8N,GAEAlI,EAAMzxB,OAAO85B,EAAY,MAKrC,IAAIE,KACAC,WAAYjN,GACZkN,UAAW1H,GACX2H,SAAUjN,GACVkN,YAAajN,IAGb0E,GAA6B,aAC7BC,GAA6B,2CAejC9I,GAAQ2I,EAAkBlG,GACtB1kB,QAAS,SAAmB8kB,GACxB,GAAIt9B,GAAOyrC,GAAuBnO,EAAGt9B,KAOrC,IAJIA,IAASy+B,KACTp9B,KAAKmiC,SAAU,GAGdniC,KAAKmiC,QAAV,CAIA,GAAIE,GAAUD,EAAuBrlC,KAAKiD,KAAMi8B,EAAIt9B,EAGhDA,IAAQ2+B,GAAYC,KAAiB8E,EAAQ,GAAGrlC,OAASqlC,EAAQ,GAAGrlC,SAAW,IAC/EgD,KAAKmiC,SAAU,GAGnBniC,KAAKiiB,SAASjiB,KAAK87B,QAASn9B,GACxBq+B,SAAUqF,EAAQ,GAClBnF,gBAAiBmF,EAAQ,GACzBgH,YAAad,GACb5I,SAAU1D,OAsBtB,IAAIwO,KACAJ,WAAYjN,GACZkN,UAAW1H,GACX2H,SAAUjN,GACVkN,YAAajN,IAGbiF,GAAsB,2CAc1BpJ,GAAQqD,EAAYZ,GAChB1kB,QAAS,SAAoB8kB,GACzB,GAAIt9B,GAAO8rC,GAAgBxO,EAAGt9B,MAC1B0jC,EAAUK,EAAW3lC,KAAKiD,KAAMi8B,EAAIt9B,EACnC0jC,IAILriC,KAAKiiB,SAASjiB,KAAK87B,QAASn9B,GACxBq+B,SAAUqF,EAAQ,GAClBnF,gBAAiBmF,EAAQ,GACzBgH,YAAad,GACb5I,SAAU1D,MA4EtB,IAAIyH,IAAgB,KAChBI,GAAiB,EAarB1K,GAAQuD,EAAiBd,GAOrB1kB,QAAS,SAAoB2kB,EAAS4O,EAAYC,GAC9C,GAAIV,GAAWU,EAAUtB,aAAed,GACpCqC,EAAWD,EAAUtB,aAAeZ,EAExC,MAAImC,GAAWD,EAAUE,oBAAsBF,EAAUE,mBAAmBC,kBAA5E,CAKA,GAAIb,EACA7G,EAAcrmC,KAAKiD,KAAM0qC,EAAYC,OAClC,IAAIC,GAAWjH,EAAiB5mC,KAAKiD,KAAM2qC,GAC9C,MAGJ3qC,MAAKiiB,SAAS6Z,EAAS4O,EAAYC,KAMvC7B,QAAS,WACL9oC,KAAKgjC,MAAM8F,UACX9oC,KAAKijC,MAAM6F,YA0CnB,IAAIiC,IAAwB/P,EAAS6M,GAAaN,MAAO,eACrD7C,GAAsBqG,KAA0BjmC,EAGhDkmC,GAAuB,UACvBxG,GAAoB,OACpBD,GAA4B,eAC5BL,GAAoB,OACpBE,GAAqB,QACrBE,GAAqB,QACrB2G,GAAmBxG,GAcvBV,GAAYhkC,WAKR+b,IAAK,SAAS3W,GAENA,GAAS6lC,KACT7lC,EAAQnF,KAAKkrC,WAGbxG,IAAuB1kC,KAAK87B,QAAQN,QAAQ+L,OAAS0D,GAAiB9lC,KACtEnF,KAAK87B,QAAQN,QAAQ+L,MAAMwD,IAAyB5lC,GAExDnF,KAAKikC,QAAU9+B,EAAMsQ,cAAcglB,QAMvC0Q,OAAQ,WACJnrC,KAAK8b,IAAI9b,KAAK87B,QAAQjf,QAAQqqB,cAOlCgE,QAAS,WACL,GAAIjH,KAMJ,OALA3qB,GAAKtZ,KAAK87B,QAAQ+K,YAAa,SAASf,GAChCpM,EAASoM,EAAWjpB,QAAQqf,QAAS4J,MACrC7B,EAAUA,EAAQ7kB,OAAO0mB,EAAWsF,qBAGrCpH,EAAkBC,EAAQ71B,KAAK,OAO1Ci9B,gBAAiB,SAAStV,GACtB,GAAI4J,GAAW5J,EAAM4J,SACjBO,EAAYnK,EAAM4I,eAGtB,IAAI3+B,KAAK87B,QAAQ0B,QAAQ8N,UAErB,WADA3L,GAAS4L,gBAIb,IAAItH,GAAUjkC,KAAKikC,QACfuH,EAAUjR,EAAM0J,EAASC,MAAuB+G,GAAiB/G,IACjEG,EAAU9J,EAAM0J,EAASK,MAAwB2G,GAAiB3G,IAClEH,EAAU5J,EAAM0J,EAASG,MAAwB6G,GAAiB7G,GAEtE,IAAIoH,EAAS,CAGT,GAAIC,GAAyC,IAA1B1V,EAAMiH,SAAShgC,OAC9B0uC,EAAgB3V,EAAMyI,SAAW,EACjCmN,EAAiB5V,EAAMsI,UAAY,GAEvC,IAAIoN,GAAgBC,GAAiBC,EACjC,OAIR,MAAIxH,IAAWE,EAAf,OAKImH,GACCnH,GAAWnE,EAAYyI,IACvBxE,GAAWjE,EAAY0I,GACjB5oC,KAAK4rC,WAAWjM,GAH3B,QAWJiM,WAAY,SAASjM,GACjB3/B,KAAK87B,QAAQ0B,QAAQ8N,WAAY,EACjC3L,EAAS4L,kBAiFjB,IAAIpG,IAAiB,EACjBO,GAAc,EACdD,GAAgB,EAChBD,GAAc,EACdqG,GAAmBrG,GACnBD,GAAkB,GAClBuG,GAAe,EAwBnB/G,GAAWhlC,WAKPilC,YAOAlpB,IAAK,SAASe,GAKV,MAJA4c,IAAOz5B,KAAK6c,QAASA,GAGrB7c,KAAK87B,SAAW97B,KAAK87B,QAAQoL,YAAYiE,SAClCnrC,MAQXqnC,cAAe,SAASxB,GACpB,GAAI5M,EAAe4M,EAAiB,gBAAiB7lC,MACjD,MAAOA,KAGX,IAAIolC,GAAeplC,KAAKolC,YAMxB,OALAS,GAAkBD,GAA6BC,EAAiB7lC,MAC3DolC,EAAaS,EAAgBZ,MAC9BG,EAAaS,EAAgBZ,IAAMY,EACnCA,EAAgBwB,cAAcrnC,OAE3BA,MAQX+rC,kBAAmB,SAASlG,GACxB,MAAI5M,GAAe4M,EAAiB,oBAAqB7lC,MAC9CA,MAGX6lC,EAAkBD,GAA6BC,EAAiB7lC,YACzDA,MAAKolC,aAAaS,EAAgBZ,IAClCjlC,OAQXsnC,eAAgB,SAASzB,GACrB,GAAI5M,EAAe4M,EAAiB,iBAAkB7lC,MAClD,MAAOA,KAGX,IAAIqlC,GAAcrlC,KAAKqlC,WAMvB,OALAQ,GAAkBD,GAA6BC,EAAiB7lC,MAC5D06B,EAAQ2K,EAAaQ,MAAqB,IAC1CR,EAAYpkC,KAAK4kC,GACjBA,EAAgByB,eAAetnC,OAE5BA,MAQXgsC,mBAAoB,SAASnG,GACzB,GAAI5M,EAAe4M,EAAiB,qBAAsB7lC,MACtD,MAAOA,KAGX6lC,GAAkBD,GAA6BC,EAAiB7lC,KAChE,IAAI0G,GAAQg0B,EAAQ16B,KAAKqlC,YAAaQ,EAItC,OAHIn/B,IAAQ,GACR1G,KAAKqlC,YAAYj1B,OAAO1J,EAAO,GAE5B1G,MAOXisC,mBAAoB,WAChB,MAAOjsC,MAAKqlC,YAAYroC,OAAS,GAQrCkvC,iBAAkB,SAASrG,GACvB,QAAS7lC,KAAKolC,aAAaS,EAAgBZ,KAQ/ChvB,KAAM,SAAS8f,GAIX,QAAS9f,GAAKX,GACVnW,EAAK28B,QAAQ7lB,KAAKX,EAAOygB,GAJ7B,GAAI52B,GAAOa,KACPklC,EAAQllC,KAAKklC,KAObA,GAAQM,IACRvvB,EAAK9W,EAAK0d,QAAQvH,MAAQgwB,EAASJ,IAGvCjvB,EAAK9W,EAAK0d,QAAQvH,OAEdygB,EAAMoW,iBACNl2B,EAAK8f,EAAMoW,iBAIXjH,GAASM,IACTvvB,EAAK9W,EAAK0d,QAAQvH,MAAQgwB,EAASJ,KAU3CkH,QAAS,SAASrW,GACd,MAAI/1B,MAAKqsC,UACErsC,KAAKiW,KAAK8f,QAGrB/1B,KAAKklC,MAAQ4G,KAOjBO,QAAS,WAEL,IADA,GAAI5vC,GAAI,EACDA,EAAIuD,KAAKqlC,YAAYroC,QAAQ,CAChC,KAAMgD,KAAKqlC,YAAY5oC,GAAGyoC,OAAS4G,GAAe3G,KAC9C,OAAO,CAEX1oC,KAEJ,OAAO,GAOXihC,UAAW,SAASiN,GAGhB,GAAI2B,GAAiB7S,MAAWkR,EAGhC,OAAKjR,GAAS15B,KAAK6c,QAAQqf,QAASl8B,KAAMssC,KAOtCtsC,KAAKklC,OAAS2G,GAAmBtG,GAAkBuG,MACnD9rC,KAAKklC,MAAQC,IAGjBnlC,KAAKklC,MAAQllC,KAAKlB,QAAQwtC,QAItBtsC,KAAKklC,OAASQ,GAAcD,GAAgBD,GAAcD,KAC1DvlC,KAAKosC,QAAQE,MAfbtsC,KAAKusC,aACLvsC,KAAKklC,MAAQ4G,MAyBrBhtC,QAAS,SAAS6rC,KAOlBS,eAAgB,aAOhBmB,MAAO,cA8DXnT,EAAQ2M,GAAgBhB,GAKpBC,UAKIhI,SAAU,GASdwP,SAAU,SAASzW,GACf,GAAI0W,GAAiBzsC,KAAK6c,QAAQmgB,QAClC,OAA0B,KAAnByP,GAAwB1W,EAAMiH,SAAShgC,SAAWyvC,GAS7D3tC,QAAS,SAASi3B,GACd,GAAImP,GAAQllC,KAAKklC,MACbpI,EAAY/G,EAAM+G,UAElB4P,EAAexH,GAASQ,GAAcD,IACtCkH,EAAU3sC,KAAKwsC,SAASzW,EAG5B,OAAI2W,KAAiB5P,EAAYS,KAAiBoP,GACvCzH,EAAQK,GACRmH,GAAgBC,EACnB7P,EAAYQ,GACL4H,EAAQM,GACNN,EAAQQ,GAGdR,EAAQO,GAFJC,GAIRoG,MAiBf1S,EAAQ4M,GAAeD,IAKnBf,UACI1vB,MAAO,MACPs3B,UAAW,GACX5P,SAAU,EACVkD,UAAW2I,IAGfuC,eAAgB,WACZ,GAAIlL,GAAYlgC,KAAK6c,QAAQqjB,UACzB+D,IAOJ,OANI/D,GAAYyI,IACZ1E,EAAQhjC,KAAKqjC,IAEbpE,EAAY0I,IACZ3E,EAAQhjC,KAAKmjC,IAEVH,GAGX4I,cAAe,SAAS9W,GACpB,GAAIlZ,GAAU7c,KAAK6c,QACfiwB,GAAW,EACXtO,EAAWzI,EAAMyI,SACjB0B,EAAYnK,EAAMmK,UAClBvY,EAAIoO,EAAM8I,OACVM,EAAIpJ,EAAM+I,MAed,OAZMoB,GAAYrjB,EAAQqjB,YAClBrjB,EAAQqjB,UAAYyI,IACpBzI,EAAmB,IAANvY,EAAW6Y,GAAkB7Y,EAAI,EAAK8Y,GAAiBC,GACpEoM,EAAWnlB,GAAK3nB,KAAKimC,GACrBzH,EAAW73B,KAAKy4B,IAAIrJ,EAAM8I,UAE1BqB,EAAmB,IAANf,EAAWqB,GAAkBrB,EAAI,EAAKwB,GAAeC,GAClEkM,EAAW3N,GAAKn/B,KAAKkmC,GACrB1H,EAAW73B,KAAKy4B,IAAIrJ,EAAM+I,UAGlC/I,EAAMmK,UAAYA,EACX4M,GAAYtO,EAAW3hB,EAAQ+vB,WAAa1M,EAAYrjB,EAAQqjB,WAG3EsM,SAAU,SAASzW,GACf,MAAOgQ,IAAehmC,UAAUysC,SAASzvC,KAAKiD,KAAM+1B,KAC/C/1B,KAAKklC,MAAQQ,MAAkB1lC,KAAKklC,MAAQQ,KAAgB1lC,KAAK6sC,cAAc9W,KAGxF9f,KAAM,SAAS8f,GAEX/1B,KAAKimC,GAAKlQ,EAAM8I,OAChB7+B,KAAKkmC,GAAKnQ,EAAM+I,MAEhB,IAAIoB,GAAYyF,EAAa5P,EAAMmK,UAE/BA,KACAnK,EAAMoW,gBAAkBnsC,KAAK6c,QAAQvH,MAAQ4qB,GAEjDlgC,KAAKw5B,OAAOvjB,KAAKlZ,KAAKiD,KAAM+1B,MAcpCqD,EAAQ+M,GAAiBJ,IAKrBf,UACI1vB,MAAO,QACPs3B,UAAW,EACX5P,SAAU,GAGdoO,eAAgB,WACZ,OAAQlH,KAGZsI,SAAU,SAASzW,GACf,MAAO/1B,MAAKw5B,OAAOgT,SAASzvC,KAAKiD,KAAM+1B,KAClCpvB,KAAKy4B,IAAIrJ,EAAMsJ,MAAQ,GAAKr/B,KAAK6c,QAAQ+vB,WAAa5sC,KAAKklC,MAAQQ,KAG5EzvB,KAAM,SAAS8f,GACX,GAAoB,IAAhBA,EAAMsJ,MAAa,CACnB,GAAI0N,GAAQhX,EAAMsJ,MAAQ,EAAI,KAAO,KACrCtJ,GAAMoW,gBAAkBnsC,KAAK6c,QAAQvH,MAAQy3B,EAEjD/sC,KAAKw5B,OAAOvjB,KAAKlZ,KAAKiD,KAAM+1B,MAiBpCqD,EAAQgN,GAAiBrB,GAKrBC,UACI1vB,MAAO,QACP0nB,SAAU,EACVgQ,KAAM,IACNJ,UAAW,GAGfxB,eAAgB,WACZ,OAAQ5G,KAGZ1lC,QAAS,SAASi3B,GACd,GAAIlZ,GAAU7c,KAAK6c,QACfowB,EAAgBlX,EAAMiH,SAAShgC,SAAW6f,EAAQmgB,SAClDkQ,EAAgBnX,EAAMyI,SAAW3hB,EAAQ+vB,UACzCO,EAAYpX,EAAMsI,UAAYxhB,EAAQmwB,IAM1C,IAJAhtC,KAAKsmC,OAASvQ,GAITmX,IAAkBD,GAAkBlX,EAAM+G,WAAaQ,GAAYC,MAAkB4P,EACtFntC,KAAKusC,YACF,IAAIxW,EAAM+G,UAAYM,GACzBp9B,KAAKusC,QACLvsC,KAAKqmC,OAAStN,EAAkB,WAC5B/4B,KAAKklC,MAAQ2G,GACb7rC,KAAKosC,WACNvvB,EAAQmwB,KAAMhtC,UACd,IAAI+1B,EAAM+G,UAAYQ,GACzB,MAAOuO,GAEX,OAAOC,KAGXS,MAAO,WACHxY,aAAa/zB,KAAKqmC,SAGtBpwB,KAAM,SAAS8f,GACP/1B,KAAKklC,QAAU2G,KAIf9V,GAAUA,EAAM+G,UAAYQ,GAC5Bt9B,KAAK87B,QAAQ7lB,KAAKjW,KAAK6c,QAAQvH,MAAQ,KAAMygB,IAE7C/1B,KAAKsmC,OAAOnI,UAAYC,KACxBp+B,KAAK87B,QAAQ7lB,KAAKjW,KAAK6c,QAAQvH,MAAOtV,KAAKsmC,aAevDlN,EAAQmN,GAAkBR,IAKtBf,UACI1vB,MAAO,SACPs3B,UAAW,EACX5P,SAAU,GAGdoO,eAAgB,WACZ,OAAQlH,KAGZsI,SAAU,SAASzW,GACf,MAAO/1B,MAAKw5B,OAAOgT,SAASzvC,KAAKiD,KAAM+1B,KAClCpvB,KAAKy4B,IAAIrJ,EAAMwJ,UAAYv/B,KAAK6c,QAAQ+vB,WAAa5sC,KAAKklC,MAAQQ;IAc/EtM,EAAQoN,GAAiBT,IAKrBf,UACI1vB,MAAO,QACPs3B,UAAW,GACX7M,SAAU,GACVG,UAAWyI,GAAuBC,GAClC5L,SAAU,GAGdoO,eAAgB,WACZ,MAAOpF,IAAcjmC,UAAUqrC,eAAeruC,KAAKiD,OAGvDwsC,SAAU,SAASzW,GACf,GACIgK,GADAG,EAAYlgC,KAAK6c,QAAQqjB,SAW7B,OARIA,IAAayI,GAAuBC,IACpC7I,EAAWhK,EAAMgJ,gBACVmB,EAAYyI,GACnB5I,EAAWhK,EAAMkJ,iBACViB,EAAY0I,KACnB7I,EAAWhK,EAAMmJ,kBAGdl/B,KAAKw5B,OAAOgT,SAASzvC,KAAKiD,KAAM+1B,IACnCmK,EAAYnK,EAAM4I,iBAClB5I,EAAMyI,SAAWx+B,KAAK6c,QAAQ+vB,WAC9B7W,EAAM0J,aAAez/B,KAAK6c,QAAQmgB,UAClCoC,GAAIW,GAAY//B,KAAK6c,QAAQkjB,UAAYhK,EAAM+G,UAAYQ,IAGnErnB,KAAM,SAAS8f,GACX,GAAImK,GAAYyF,EAAa5P,EAAM4I,gBAC/BuB,IACAlgC,KAAK87B,QAAQ7lB,KAAKjW,KAAK6c,QAAQvH,MAAQ4qB,EAAWnK,GAGtD/1B,KAAK87B,QAAQ7lB,KAAKjW,KAAK6c,QAAQvH,MAAOygB,MA2B9CqD,EAAQqN,GAAe1B,GAKnBC,UACI1vB,MAAO,MACP0nB,SAAU,EACVoQ,KAAM,EACNC,SAAU,IACVL,KAAM,IACNJ,UAAW,EACXU,aAAc,IAGlBlC,eAAgB,WACZ,OAAQ7G,KAGZzlC,QAAS,SAASi3B,GACd,GAAIlZ,GAAU7c,KAAK6c,QAEfowB,EAAgBlX,EAAMiH,SAAShgC,SAAW6f,EAAQmgB,SAClDkQ,EAAgBnX,EAAMyI,SAAW3hB,EAAQ+vB,UACzCW,EAAiBxX,EAAMsI,UAAYxhB,EAAQmwB,IAI/C,IAFAhtC,KAAKusC,QAEAxW,EAAM+G,UAAYM,IAAgC,IAAfp9B,KAAK6yB,MACzC,MAAO7yB,MAAKwtC,aAKhB,IAAIN,GAAiBK,GAAkBN,EAAe,CAClD,GAAIlX,EAAM+G,WAAaQ,GACnB,MAAOt9B,MAAKwtC,aAGhB,IAAIC,IAAgBztC,KAAK0mC,OAAS3Q,EAAMoI,UAAYn+B,KAAK0mC,MAAQ7pB,EAAQwwB,SACrEK,GAAiB1tC,KAAK2mC,SAAWlI,EAAYz+B,KAAK2mC,QAAS5Q,EAAMkI,QAAUphB,EAAQywB,YAEvFttC,MAAK0mC,MAAQ3Q,EAAMoI,UACnBn+B,KAAK2mC,QAAU5Q,EAAMkI,OAEhByP,GAAkBD,EAGnBztC,KAAK6yB,OAAS,EAFd7yB,KAAK6yB,MAAQ,EAKjB7yB,KAAKsmC,OAASvQ,CAId,IAAI4X,GAAW3tC,KAAK6yB,MAAQhW,EAAQuwB,IACpC,IAAiB,IAAbO,EAGA,MAAK3tC,MAAKisC,sBAGNjsC,KAAKqmC,OAAStN,EAAkB,WAC5B/4B,KAAKklC,MAAQ2G,GACb7rC,KAAKosC,WACNvvB,EAAQwwB,SAAUrtC,MACd0lC,IANAmG,GAUnB,MAAOC,KAGX0B,YAAa,WAIT,MAHAxtC,MAAKqmC,OAAStN,EAAkB,WAC5B/4B,KAAKklC,MAAQ4G,IACd9rC,KAAK6c,QAAQwwB,SAAUrtC,MACnB8rC,IAGXS,MAAO,WACHxY,aAAa/zB,KAAKqmC,SAGtBpwB,KAAM,WACEjW,KAAKklC,OAAS2G,KACd7rC,KAAKsmC,OAAOqH,SAAW3tC,KAAK6yB,MAC5B7yB,KAAK87B,QAAQ7lB,KAAKjW,KAAK6c,QAAQvH,MAAOtV,KAAKsmC,YAoBvDM,GAAOgH,QAAU,QAMjBhH,GAAO5B,UAOH6I,WAAW,EAQX3G,YAAa8D,GAMb9O,QAAQ,EASRH,YAAa,KAObM,WAAY,KAOZyK,SAEKP,IAAmBrK,QAAQ,KAC3BiK,IAAkBjK,QAAQ,IAAS,YACnCsK,IAAkBtG,UAAWyI,MAC7B3C,IAAgB9F,UAAWyI,KAAwB,WACnDlC,KACAA,IAAgBnxB,MAAO,YAAa83B,KAAM,IAAK,SAC/ChH,KAQLoB,UAMIsG,WAAY,OAOZC,YAAa,OASbC,aAAc,OAOdC,eAAgB,OAOhBC,SAAU,OAQVC,kBAAmB,iBAI3B,IAAIC,IAAO,EACPC,GAAc,CA+BlBtH,IAAQhnC,WAMJ+b,IAAK,SAASe,GAaV,MAZA4c,IAAOz5B,KAAK6c,QAASA,GAGjBA,EAAQqqB,aACRlnC,KAAKknC,YAAYiE,SAEjBtuB,EAAQkf,cAER/7B,KAAK+1B,MAAM+S,UACX9oC,KAAK+1B,MAAM3xB,OAASyY,EAAQkf,YAC5B/7B,KAAK+1B,MAAMl2B,QAERG,MASXsuC,KAAM,SAASC,GACXvuC,KAAKw9B,QAAQgR,QAAUD,EAAQF,GAAcD,IASjD1Q,UAAW,SAASiN,GAChB,GAAInN,GAAUx9B,KAAKw9B,OACnB,KAAIA,EAAQgR,QAAZ,CAKAxuC,KAAKknC,YAAYmE,gBAAgBV,EAEjC,IAAI7E,GACAe,EAAc7mC,KAAK6mC,YAKnB4H,EAAgBjR,EAAQiR,gBAIvBA,GAAkBA,GAAiBA,EAAcvJ,MAAQ2G,MAC1D4C,EAAgBjR,EAAQiR,cAAgB,KAI5C,KADA,GAAIhyC,GAAI,EACDA,EAAIoqC,EAAY7pC,QACnB8oC,EAAae,EAAYpqC,GAQrB+gC,EAAQgR,UAAYH,IACfI,GAAiB3I,GAAc2I,IAChC3I,EAAWoG,iBAAiBuC,GAGhC3I,EAAWyG,QAFXzG,EAAWpI,UAAUiN,IAOpB8D,GAAiB3I,EAAWZ,OAASQ,GAAcD,GAAgBD,MACpEiJ,EAAgBjR,EAAQiR,cAAgB3I,GAE5CrpC,MASRyK,IAAK,SAAS4+B,GACV,GAAIA,YAAsBf,GACtB,MAAOe,EAIX,KAAK,GADDe,GAAc7mC,KAAK6mC,YACdpqC,EAAI,EAAGA,EAAIoqC,EAAY7pC,OAAQP,IACpC,GAAIoqC,EAAYpqC,GAAGogB,QAAQvH,OAASwwB,EAChC,MAAOe,GAAYpqC,EAG3B,OAAO,OASX2qC,IAAK,SAAStB,GACV,GAAI7M,EAAe6M,EAAY,MAAO9lC,MAClC,MAAOA,KAIX,IAAI0uC,GAAW1uC,KAAKkH,IAAI4+B,EAAWjpB,QAAQvH,MAS3C,OARIo5B,IACA1uC,KAAK2uC,OAAOD,GAGhB1uC,KAAK6mC,YAAY5lC,KAAK6kC,GACtBA,EAAWhK,QAAU97B,KAErBA,KAAKknC,YAAYiE,SACVrF,GAQX6I,OAAQ,SAAS7I,GACb,GAAI7M,EAAe6M,EAAY,SAAU9lC,MACrC,MAAOA,KAMX,IAHA8lC,EAAa9lC,KAAKkH,IAAI4+B,GAGN,CACZ,GAAIe,GAAc7mC,KAAK6mC,YACnBngC,EAAQg0B,EAAQmM,EAAaf,EAE7Bp/B,MAAU,IACVmgC,EAAYz2B,OAAO1J,EAAO,GAC1B1G,KAAKknC,YAAYiE,UAIzB,MAAOnrC,OASX4uC,GAAI,SAASC,EAAQ13B,GACjB,GAAI03B,IAAW/pC,GAGXqS,IAAYrS,EAAhB,CAIA,GAAIkiC,GAAWhnC,KAAKgnC,QAKpB,OAJA1tB,GAAK2gB,EAAS4U,GAAS,SAASv5B,GAC5B0xB,EAAS1xB,GAAS0xB,EAAS1xB,OAC3B0xB,EAAS1xB,GAAOrU,KAAKkW,KAElBnX,OASX8uC,IAAK,SAASD,EAAQ13B,GAClB,GAAI03B,IAAW/pC,EAAf,CAIA,GAAIkiC,GAAWhnC,KAAKgnC,QAQpB,OAPA1tB,GAAK2gB,EAAS4U,GAAS,SAASv5B,GACvB6B,EAGD6vB,EAAS1xB,IAAU0xB,EAAS1xB,GAAOlF,OAAOsqB,EAAQsM,EAAS1xB,GAAQ6B,GAAU,SAFtE6vB,GAAS1xB,KAKjBtV,OAQXiW,KAAM,SAASX,EAAO4f,GAEdl1B,KAAK6c,QAAQgxB,WACbpG,GAAgBnyB,EAAO4f,EAI3B,IAAI8R,GAAWhnC,KAAKgnC,SAAS1xB,IAAUtV,KAAKgnC,SAAS1xB,GAAOrO,OAC5D,IAAK+/B,GAAaA,EAAShqC,OAA3B,CAIAk4B,EAAKv2B,KAAO2W,EACZ4f,EAAKqW,eAAiB,WAClBrW,EAAKyK,SAAS4L,iBAIlB,KADA,GAAI9uC,GAAI,EACDA,EAAIuqC,EAAShqC,QAChBgqC,EAASvqC,GAAGy4B,GACZz4B,MAQRqsC,QAAS,WACL9oC,KAAKw7B,SAAW2L,GAAennC,MAAM,GAErCA,KAAKgnC,YACLhnC,KAAKw9B,WACLx9B,KAAK+1B,MAAM+S,UACX9oC,KAAKw7B,QAAU,OAyCvB/B,GAAOmN,IACHxJ,YAAaA,GACbwF,WAAYA,GACZtF,UAAWA,GACXC,aAAcA,GAEd4H,eAAgBA,GAChBO,YAAaA,GACbD,cAAeA,GACfD,YAAaA,GACbqG,iBAAkBA,GAClBtG,gBAAiBA,GACjBuG,aAAcA,GAEdtL,eAAgBA,GAChBC,eAAgBA,GAChBC,gBAAiBA,GACjBC,aAAcA,GACdC,eAAgBA,GAChB+H,qBAAsBA,GACtBC,mBAAoBA,GACpBC,cAAeA,GAEf9B,QAASA,GACTlL,MAAOA,EACPkI,YAAaA,EAEbtH,WAAYA,EACZG,WAAYA,EACZL,kBAAmBA,EACnBI,gBAAiBA,EACjBoF,iBAAkBA,EAElBgD,WAAYA,EACZgB,eAAgBA,GAChBgJ,IAAKtI,GACLuI,IAAKhJ,GACLiJ,MAAOzI,GACP0I,MAAO/I,GACPgJ,OAAQ5I,GACR6I,MAAOhJ,GAEPwI,GAAI7U,EACJ+U,IAAK3U,EACL7gB,KAAMA,EACN8uB,MAAOA,GACPF,OAAQA,GACRzO,OAAQA,GACRL,QAASA,EACTJ,OAAQA,EACRgC,SAAUA,GAKd,IAAIqU,IAAgC,mBAAXnwC,GAAyBA,EAA0B,mBAATC,MAAuBA,OAC1FkwC,IAAWzI,OAASA,GAEE,kBAAX5nC,SAAyBA,OAAOC,IACvCD,OAAO,WACH,MAAO4nC,MAEa,mBAAV1pC,IAAyBA,EAAOJ,QAC9CI,EAAOJ,QAAU8pC,GAEjB1nC,EAAO45B,GAAc8N,IAGtB1nC,OAAQ2W,SAAU,eAEfxQ,GAAG,SAAS7I,EAAQU,EAAOJ,IACjC,SAAWiC,IAWX,WAWE,GAAIuwC,GAAe,WACjBtvC,KAAKH,OAEPyvC,GAAavvC,WAKXF,KAAM,WACJ,GAAIV,GAAOa,MAAQuvC,CAuBnB,OApBApwC,GAAKqwC,WACLrwC,EAAKswC,UACLtwC,EAAKuwC,QAAS,EACdvwC,EAAKwwC,QAAU,EACfxwC,EAAKywC,cAAgB,iBACrBzwC,EAAK0wC,WAAgC,mBAAX3wC,SAA0BA,OAAO6xB,UAAa7xB,OAAO6xB,UAAY,KAG3F5xB,EAAK2wC,WAAa,KAClB3wC,EAAK4wC,SAAU,EACf5wC,EAAK6wC,eAAgB,EACrB7wC,EAAK8wC,aAAc,EACnB9wC,EAAKkN,IAAM,KAGXlN,EAAK+wC,kBAAmB,EAGxB/wC,EAAKgxC,SAEEhxC,GAQTixC,OAAQ,SAASC,GACf,GAAIlxC,GAAOa,MAAQuvC,CAQnB,IAPAc,EAAMC,WAAWD,GAGZlxC,EAAKkN,KACRkkC,IAGiB,mBAARF,IAAuBA,GAAO,GAAKA,GAAO,EAAG,CAItD,GAHAlxC,EAAKwwC,QAAUU,EAGXlxC,EAAKuwC,OACP,MAAOvwC,EAILA,GAAK6wC,gBACP7wC,EAAK2wC,WAAWU,KAAKrrC,MAAQkrC,EAI/B,KAAK,GAAI5zC,GAAE,EAAGA,EAAE0C,EAAKswC,OAAOzyC,OAAQP,IAClC,IAAK0C,EAAKswC,OAAOhzC,GAAGg0C,UAKlB,IAAK,GAHDC,GAAMvxC,EAAKswC,OAAOhzC,GAAGk0C,eAGhB9lC,EAAE,EAAGA,EAAE6lC,EAAI1zC,OAAQ6N,IAAK,CAC/B,GAAI+lC,GAAQzxC,EAAKswC,OAAOhzC,GAAGo0C,WAAWH,EAAI7lC,GAEtC+lC,IAASA,EAAME,QACjBF,EAAME,MAAMV,OAASQ,EAAMjB,QAAUU,GAM7C,MAAOlxC,GAGT,MAAOA,GAAKwwC,SAOdoB,KAAM,SAASC,GACb,GAAI7xC,GAAOa,MAAQuvC,CAGdpwC,GAAKkN,KACRkkC,IAGFpxC,EAAKuwC,OAASsB,EAGV7xC,EAAK6wC,gBACP7wC,EAAK2wC,WAAWU,KAAKrrC,MAAQ6rC,EAAQ,EAAI7xC,EAAKwwC,QAIhD,KAAK,GAAIlzC,GAAE,EAAGA,EAAE0C,EAAKswC,OAAOzyC,OAAQP,IAClC,IAAK0C,EAAKswC,OAAOhzC,GAAGg0C,UAKlB,IAAK,GAHDC,GAAMvxC,EAAKswC,OAAOhzC,GAAGk0C,eAGhB9lC,EAAE,EAAGA,EAAE6lC,EAAI1zC,OAAQ6N,IAAK,CAC/B,GAAI+lC,GAAQzxC,EAAKswC,OAAOhzC,GAAGo0C,WAAWH,EAAI7lC,GAEtC+lC,IAASA,EAAME,QACjBF,EAAME,MAAME,QAAQ,GAAiBJ,EAAMlB,QAMnD,MAAOvwC,IAOT8xC,OAAQ,WAGN,IAAK,GAFD9xC,GAAOa,MAAQuvC,EAEV9yC,EAAE0C,EAAKswC,OAAOzyC,OAAO,EAAGP,GAAG,EAAGA,IACrC0C,EAAKswC,OAAOhzC,GAAGw0C,QAUjB,OANI9xC,GAAK6wC,eAAiB7wC,EAAKkN,KAAiC,mBAAnBlN,GAAKkN,IAAI6kC,QACpD/xC,EAAKkN,IAAI6kC,QACT/xC,EAAKkN,IAAM,KACXkkC,KAGKpxC,GAQTgyC,OAAQ,SAASC,GACf,OAAQpxC,MAAQuvC,GAAQC,QAAQ4B,EAAIngC,QAAQ,MAAO,MAOrDk/B,OAAQ,WACN,GAAIhxC,GAAOa,MAAQuvC,CASnB,IANApwC,EAAK+lC,MAAQ/lC,EAAKkN,IAAMlN,EAAKkN,IAAI64B,OAAS,UAAY,UAGtD/lC,EAAKkyC,gBAGAlyC,EAAK6wC,cAER,GAAqB,mBAAVsB,OACT,IACE,GAAIriC,GAAO,GAAIqiC,MAGsB,oBAA1BriC,GAAKsiC,mBACdpyC,EAAKywC,cAAgB,WAEvB,MAAM5zC,GACNmD,EAAK4wC,SAAU,MAGjB5wC,GAAK4wC,SAAU,CAKnB,KACE,GAAI9gC,GAAO,GAAIqiC,MACXriC,GAAK+hC,QACP7xC,EAAK4wC,SAAU,GAEjB,MAAO/zC,IAOT,MAJKmD,GAAK4wC,SACR5wC,EAAKqyC,eAGAryC,GAOTqyC,aAAc,WACZ,GAAIryC,GAAOa,MAAQuvC,EACfkC,EAAY,IAGhB,KACEA,EAA8B,mBAAVH,OAAyB,GAAIA,OAAU,KAC3D,MAAOv5B,GACP,MAAO5Y,GAGT,IAAKsyC,GAA8C,kBAA1BA,GAAUC,YACjC,MAAOvyC,EAGT,IAAIwyC,GAAWF,EAAUC,YAAY,eAAezgC,QAAQ,OAAQ,IAGhE2gC,EAAazyC,EAAK0wC,YAAc1wC,EAAK0wC,WAAWvH,UAAUn5B,MAAM,kBAChE0iC,EAAcD,GAAch/B,SAASg/B,EAAW,GAAG/iC,MAAM,KAAK,GAAI,IAAM,EAmB5E,OAjBA1P,GAAKqwC,SACHsC,MAASD,IAAeF,IAAYF,EAAUC,YAAY,cAAczgC,QAAQ,OAAQ,KACxF8gC,OAAQJ,EACRK,OAAQP,EAAUC,YAAY,4BAA4BzgC,QAAQ,OAAQ,IAC1EghC,MAAOR,EAAUC,YAAY,8BAA8BzgC,QAAQ,OAAQ,IAC3EihC,MAAOT,EAAUC,YAAY,8BAA8BzgC,QAAQ,OAAQ,IAC3EkhC,MAAOV,EAAUC,YAAY,yBAAyBzgC,QAAQ,OAAQ,IACtEmhC,MAAOX,EAAUC,YAAY,cAAczgC,QAAQ,OAAQ,IAC3DohC,MAAOZ,EAAUC,YAAY,gBAAgBzgC,QAAQ,OAAQ,IAC7DqhC,OAAQb,EAAUC,YAAY,iBAAmBD,EAAUC,YAAY,eAAiBD,EAAUC,YAAY,eAAezgC,QAAQ,OAAQ,IAC7IshC,OAAQd,EAAUC,YAAY,iBAAmBD,EAAUC,YAAY,eAAiBD,EAAUC,YAAY,eAAezgC,QAAQ,OAAQ,IAC7IuhC,OAAQf,EAAUC,YAAY,+BAA+BzgC,QAAQ,OAAQ,IAC7EwhC,OAAQhB,EAAUC,YAAY,+BAA+BzgC,QAAQ,OAAQ,IAC7EyhC,QAASjB,EAAUC,YAAY,4BAA4BzgC,QAAQ,OAAQ,IAC3E0hC,QAASlB,EAAUC,YAAY,kBAAoBD,EAAUC,YAAY,gBAAgBzgC,QAAQ,OAAQ,KAGpG9R,GASTyzC,mBAAoB,WAClB,GAAIzzC,GAAOa,MAAQuvC,EAGfsD,EAAW,sDAAsD5jC,KAAK9P,EAAK0wC,YAAc1wC,EAAK0wC,WAAWvH,WACzG2B,KAAc,cAAgB/qC,SAAYC,EAAK0wC,YAAc1wC,EAAK0wC,WAAWiD,eAAiB,GAAO3zC,EAAK0wC,YAAc1wC,EAAK0wC,WAAWkD,iBAAmB,EAC/J,KAAI5zC,EAAK6zC,gBAAmB7zC,EAAKkN,MAASwmC,GAAa5I,GAAvD,CAIA9qC,EAAK6zC,gBAAiB,EAKjB7zC,EAAK8zC,iBAA2C,QAAxB9zC,EAAKkN,IAAI6mC,aACpC/zC,EAAK8zC,iBAAkB,EACvB9zC,EAAK8xC,UAKP9xC,EAAKg0C,eAAiBh0C,EAAKkN,IAAI+mC,aAAa,EAAG,EAAG,MAKlD,IAAIC,GAAS,WAEX,GAAIrL,GAAS7oC,EAAKkN,IAAIinC,oBACtBtL,GAAOuL,OAASp0C,EAAKg0C,eACrBnL,EAAOwL,QAAQr0C,EAAKkN,IAAIonC,aAGI,mBAAjBzL,GAAO7G,MAChB6G,EAAO0L,OAAO,GAEd1L,EAAO7G,MAAM,GAIf6G,EAAO2L,QAAU,WACf3L,EAAOpW,WAAW,GAGlBzyB,EAAK6zC,gBAAiB,EACtB7zC,EAAK+wC,kBAAmB,EAGxBr6B,SAASukB,oBAAoB,WAAYiZ,GAAQ,IAOrD,OAFAx9B,UAASqkB,iBAAiB,WAAYmZ,GAAQ,GAEvCl0C,IAQTkyC,aAAc,WACZ,GAAIlyC,GAAOa,IAEX,IAAKb,EAAK8wC,aAAgB9wC,EAAKkN,KAAmC,mBAArBlN,GAAKkN,IAAIunC,SAA4BrE,EAAOS,cAAzF,CAKA,IAAK,GAAIvzC,GAAE,EAAGA,EAAE0C,EAAKswC,OAAOzyC,OAAQP,IAClC,GAAI0C,EAAKswC,OAAOhzC,GAAGg0C,UACjB,IAAK,GAAI5lC,GAAE,EAAGA,EAAE1L,EAAKswC,OAAOhzC,GAAGo3C,QAAQ72C,OAAQ6N,IAC7C,IAAK1L,EAAKswC,OAAOhzC,GAAGo3C,QAAQhpC,GAAGipC,QAC7B,MAAO30C,EA4Bf,OAtBIA,GAAK40C,eACPhgB,aAAa50B,EAAK40C,eAIpB50C,EAAK40C,cAAgBxxC,WAAW,WACzBpD,EAAK8wC,cAIV9wC,EAAK40C,cAAgB,KACrB50C,EAAK+lC,MAAQ,aACb/lC,EAAKkN,IAAIunC,UAAUh2B,KAAK,WACtBze,EAAK+lC,MAAQ,YAET/lC,EAAK60C,4BACA70C,GAAK60C,oBACZ70C,EAAK80C,mBAGR,KAEI90C,IAOT80C,YAAa,WACX,GAAI90C,GAAOa,IAEX,IAAKb,EAAKkN,KAAkC,mBAApBlN,GAAKkN,IAAI6nC,QAA2B3E,EAAOS,cA0BnE,MAtBmB,YAAf7wC,EAAK+lC,OAAuB/lC,EAAK40C,eACnChgB,aAAa50B,EAAK40C,eAClB50C,EAAK40C,cAAgB,MACG,cAAf50C,EAAK+lC,OACd/lC,EAAK+lC,MAAQ,WACb/lC,EAAKkN,IAAI6nC,SAASt2B,KAAK,WACrBze,EAAK+lC,MAAQ,SAGb,KAAK,GAAIzoC,GAAE,EAAGA,EAAE0C,EAAKswC,OAAOzyC,OAAQP,IAClC0C,EAAKswC,OAAOhzC,GAAG03C,MAAM,YAIrBh1C,EAAK40C,gBACPhgB,aAAa50B,EAAK40C,eAClB50C,EAAK40C,cAAgB,OAEC,eAAf50C,EAAK+lC,QACd/lC,EAAK60C,qBAAsB,GAGtB70C,GAKX,IAAIowC,GAAS,GAAID,GASb8E,EAAO,SAAS/3C,GAClB,GAAI8C,GAAOa,IAGX,OAAK3D,GAAE4xB,KAAwB,IAAjB5xB,EAAE4xB,IAAIjxB,WAKpBmC,GAAKU,KAAKxD,OAJR+U,SAAQzD,MAAM,8DAMlBymC,GAAKr0C,WAMHF,KAAM,SAASxD,GACb,GAAI8C,GAAOa,IAmEX,OAhEKuvC,GAAOljC,KACVkkC,IAIFpxC,EAAKk1C,UAAYh4C,EAAEi4C,WAAY,EAC/Bn1C,EAAKo1C,QAA+B,gBAAbl4C,GAAEm4C,OAAuBn4C,EAAEm4C,QAAUn4C,EAAEm4C,QAC9Dr1C,EAAKs1C,OAASp4C,EAAEq4C,QAAS,EACzBv1C,EAAKuwC,OAASrzC,EAAE00C,OAAQ,EACxB5xC,EAAKw1C,MAAQt4C,EAAEu4C,OAAQ,EACvBz1C,EAAK01C,MAAQx4C,EAAEy4C,MAAQ,EACvB31C,EAAK41C,SAAiC,iBAAd14C,GAAE24C,SAAyB34C,EAAE24C,QACrD71C,EAAK81C,MAAQ54C,EAAE64C,MAAQ,EACvB/1C,EAAKg2C,QAAU94C,EAAE+4C,WACjBj2C,EAAKk2C,KAAyB,gBAAVh5C,GAAE4xB,IAAoB5xB,EAAE4xB,KAAO5xB,EAAE4xB,KACrD9uB,EAAKwwC,QAAuB7qC,SAAbzI,EAAE+zC,OAAuB/zC,EAAE+zC,OAAS,EAGnDjxC,EAAKm2C,UAAY,EACjBn2C,EAAKo2C,OAAS,WACdp2C,EAAK00C,WACL10C,EAAKq2C,cACLr2C,EAAKqiB,UAGLriB,EAAKs2C,OAASp5C,EAAEq5C,QAAU50C,GAAIzE,EAAEq5C,WAChCv2C,EAAKw2C,QAAUt5C,EAAEu5C,SAAW90C,GAAIzE,EAAEu5C,YAClCz2C,EAAK02C,QAAUx5C,EAAEy5C,SAAWh1C,GAAIzE,EAAEy5C,YAClC32C,EAAK42C,aAAe15C,EAAE25C,cAAgBl1C,GAAIzE,EAAE25C,iBAC5C72C,EAAK82C,SAAW55C,EAAE65C,UAAYp1C,GAAIzE,EAAE65C,aACpC/2C,EAAKg3C,QAAU95C,EAAE+5C,SAAWt1C,GAAIzE,EAAE+5C,YAClCj3C,EAAKk3C,QAAUh6C,EAAEi6C,SAAWx1C,GAAIzE,EAAEi6C,YAClCn3C,EAAKo3C,QAAUl6C,EAAEm6C,SAAW11C,GAAIzE,EAAEm6C,YAClCr3C,EAAKs3C,UAAYp6C,EAAEq6C,WAAa51C,GAAIzE,EAAEq6C,cACtCv3C,EAAKw3C,QAAUt6C,EAAEu6C,SAAW91C,GAAIzE,EAAEu6C,YAClCz3C,EAAK03C,QAAUx6C,EAAEy6C,SAAWh2C,GAAIzE,EAAEy6C,YAClC33C,EAAK43C,aAGL53C,EAAKsxC,UAAYlB,EAAOS,gBAAkB7wC,EAAKs1C,OAGrB,mBAAflF,GAAOljC,KAAuBkjC,EAAOljC,KAAOkjC,EAAOW,kBAC5DX,EAAOqD,qBAITrD,EAAOE,OAAOxuC,KAAK9B,GAGfA,EAAKk1C,WACPl1C,EAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAK83C,UAMP93C,EAAK41C,UACP51C,EAAK+3C,OAGA/3C,GAOT+3C,KAAM,WACJ,GAAI/3C,GAAOa,KACPm3C,EAAM,IAGV,IAAI5H,EAAOQ,QAET,WADA5wC,GAAKg1C,MAAM,YAAa,KAAM,oBAKP,iBAAdh1C,GAAKk2C,OACdl2C,EAAKk2C,MAAQl2C,EAAKk2C,MAIpB,KAAK,GAAI54C,GAAE,EAAGA,EAAE0C,EAAKk2C,KAAKr4C,OAAQP,IAAK,CACrC,GAAI20C,GAAKt/B,CAET,IAAI3S,EAAKo1C,SAAWp1C,EAAKo1C,QAAQ93C,GAE/B20C,EAAMjyC,EAAKo1C,QAAQ93C,OACd,CAGL,GADAqV,EAAM3S,EAAKk2C,KAAK54C,GACG,gBAARqV,GAAkB,CAC3B3S,EAAKg1C,MAAM,YAAa,KAAM,yDAC9B,UAIF/C,EAAM,0BAA0BgG,KAAKtlC,GAChCs/B,IACHA,EAAM,aAAagG,KAAKtlC,EAAIjD,MAAM,IAAK,GAAG,KAGxCuiC,IACFA,EAAMA,EAAI,GAAG37B,eAKjB,GAAI85B,EAAO4B,OAAOC,GAAM,CACtB+F,EAAMh4C,EAAKk2C,KAAK54C,EAChB,QAIJ,MAAK06C,IAKLh4C,EAAKk2C,KAAO8B,EACZh4C,EAAKo2C,OAAS,UAImB,WAA7Br2C,OAAOm4C,SAASC,UAA6C,UAApBH,EAAIlwC,MAAM,EAAG,KACxD9H,EAAKs1C,QAAS,EACdt1C,EAAKsxC,WAAY,GAInB,GAAI8G,GAAMp4C,GAGNA,EAAKsxC,WACP+G,EAAWr4C,GAGNA,OAtBLA,GAAKg1C,MAAM,YAAa,KAAM,iDA+BlC8C,KAAM,SAAS7B,EAAQx2B,GACrB,GAAIzf,GAAOa,KACPilC,EAAK,IAGT,IAAsB,gBAAXmQ,GACTnQ,EAAKmQ,EACLA,EAAS,SACJ,CAAA,GAAsB,gBAAXA,IAAuC,WAAhBj2C,EAAKo2C,SAAwBp2C,EAAKg2C,QAAQC,GAEjF,MAAO,KACF,IAAsB,mBAAXA,GAAwB,CAExCA,EAAS,WAKT,KAAK,GADDqC,GAAM,EACDh7C,EAAE,EAAGA,EAAE0C,EAAK00C,QAAQ72C,OAAQP,IAC/B0C,EAAK00C,QAAQp3C,GAAGq3C,UAAY30C,EAAK00C,QAAQp3C,GAAGi7C,SAC9CD,IACAxS,EAAK9lC,EAAK00C,QAAQp3C,GAAGk7C,IAIb,KAARF,EACFrC,EAAS,KAETnQ,EAAK,MAKT,GAAI2L,GAAQ3L,EAAK9lC,EAAK0xC,WAAW5L,GAAM9lC,EAAKy4C,gBAG5C,KAAKhH,EACH,MAAO,KAUT,IANI3L,IAAOmQ,IACTA,EAASxE,EAAMuE,SAAW,aAKR,WAAhBh2C,EAAKo2C,SAAwBp2C,EAAKg2C,QAAQC,GAQ5C,MAPAj2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAK83C,KAAK93C,EAAK0xC,WAAWD,EAAM+G,KAAO/G,EAAM+G,IAAM7yC,WAIhD8rC,EAAM+G,GAIf,IAAI1S,IAAO2L,EAAMkD,QAQf,MANKl1B,IACHrc,WAAW,WACTpD,EAAKg1C,MAAM,OAAQvD,EAAM+G,MACxB,GAGE/G,EAAM+G,GAIXx4C,GAAKsxC,WACPlB,EAAO0E,aAIT,IAAI4D,GAAOlxC,KAAKC,IAAI,EAAGgqC,EAAMkH,MAAQ,EAAIlH,EAAMkH,MAAQ34C,EAAKg2C,QAAQC,GAAQ,GAAK,KAC7E2C,EAAWpxC,KAAKC,IAAI,GAAKzH,EAAKg2C,QAAQC,GAAQ,GAAKj2C,EAAKg2C,QAAQC,GAAQ,IAAM,IAAQyC,GACtFxjB,EAAsB,IAAX0jB,EAAmBpxC,KAAKy4B,IAAIwR,EAAMqE,MAGjDrE,GAAMkD,SAAU,EAChBlD,EAAM8G,QAAS,EACf9G,EAAMuE,QAAUC,EAChBxE,EAAMkH,MAAQD,EACdjH,EAAMoH,OAAS74C,EAAKg2C,QAAQC,GAAQ,GAAK,IACzCxE,EAAMqH,OAAS94C,EAAKg2C,QAAQC,GAAQ,GAAKj2C,EAAKg2C,QAAQC,GAAQ,IAAM,IACpExE,EAAM+D,SAAW/D,EAAM+D,QAASx1C,EAAKg2C,QAAQC,GAAQ,GAGrD,IAAI79B,GAAOq5B,EAAME,KACjB,IAAI3xC,EAAKsxC,UAAW,CAElB,GAAIyH,GAAe,WACjB/4C,EAAKg5C,eAAevH,EAGpB,IAAIP,GAAOO,EAAMlB,QAAUvwC,EAAKuwC,OAAU,EAAIkB,EAAMjB,OACpDp4B,GAAKi5B,KAAK4H,eAAe/H,EAAKd,EAAOljC,IAAIgsC,aACzCzH,EAAM0H,WAAa/I,EAAOljC,IAAIgsC,YAGS,mBAA5B9gC,GAAKghC,aAAapX,MAC3ByP,EAAM+D,MAAQp9B,EAAKghC,aAAaC,YAAY,EAAGX,EAAM,OAAStgC,EAAKghC,aAAaC,YAAY,EAAGX,EAAME,GAErGnH,EAAM+D,MAAQp9B,EAAKghC,aAAapX,MAAM,EAAG0W,EAAM,OAAStgC,EAAKghC,aAAapX,MAAM,EAAG0W,EAAME,GAIvF1jB,IAAYokB,EAAAA,IACdt5C,EAAKq2C,WAAW5E,EAAM+G,KAAOp1C,WAAWpD,EAAKu4C,OAAOpzC,KAAKnF,EAAMyxC,GAAQvc,IAGpEzV,GACHrc,WAAW,WACTpD,EAAKg1C,MAAM,OAAQvD,EAAM+G,MACxB,IAIHe,EAA8B,YAAjBnJ,EAAOrK,KACJ,YAAhB/lC,EAAKo2C,QAAuBmD,EAC9BR,KAGA/4C,EAAKw5C,KAAKD,EAAY,OAAS,SAAUR,EAAcQ,EAAY9H,EAAM+G,IAAM,MAG/Ex4C,EAAKy5C,YAAYhI,EAAM+G,UAEpB,CAEL,GAAIkB,GAAY,WACdthC,EAAK8gC,YAAcR,EACnBtgC,EAAKy5B,MAAQJ,EAAMlB,QAAUvwC,EAAKuwC,QAAUH,EAAOG,QAAUn4B,EAAKy5B,MAClEz5B,EAAK64B,OAASQ,EAAMjB,QAAUJ,EAAOa,SACrC74B,EAAKuhC,aAAelI,EAAMqE,MAE1B1yC,WAAW,WACTgV,EAAK0/B,OAGD5iB,IAAYokB,EAAAA,IACdt5C,EAAKq2C,WAAW5E,EAAM+G,KAAOp1C,WAAWpD,EAAKu4C,OAAOpzC,KAAKnF,EAAMyxC,GAAQvc,IAGpEzV,GACHzf,EAAKg1C,MAAM,OAAQvD,EAAM+G,MAE1B,IAIDoB,EAAsC,WAAhB55C,EAAKo2C,SAAwBr2C,QAAUA,OAAO85C,SAAWzhC,EAAK0hC,YAAc1J,EAAOM,WAAWqJ,WACxH,IAAwB,IAApB3hC,EAAK0hC,YAAoBF,EAC3BF,QACK,CACL,GAAIM,GAAW,WAEbN,IAGAthC,EAAK6iB,oBAAoBmV,EAAOK,cAAeuJ,GAAU,GAE3D5hC,GAAK2iB,iBAAiBqV,EAAOK,cAAeuJ,GAAU,GAGtDh6C,EAAKy5C,YAAYhI,EAAM+G,MAI3B,MAAO/G,GAAM+G,KAQfyB,MAAO,SAASnU,GACd,GAAI9lC,GAAOa,IAGX,IAAoB,WAAhBb,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,QACP0hC,OAAQ,WACN73C,EAAKi6C,MAAMnU,MAIR9lC,CAMT,KAAK,GAFDuxC,GAAMvxC,EAAKwxC,aAAa1L,GAEnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B0C,EAAKy5C,YAAYlI,EAAIj0C,GAGrB,IAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAEhC,IAAIm0C,IAAUA,EAAMkD,UAElBlD,EAAMkH,MAAQ34C,EAAK04C,KAAKnH,EAAIj0C,IAC5Bm0C,EAAMyI,UAAY,EAClBzI,EAAMkD,SAAU,EAGhB30C,EAAKm6C,UAAU5I,EAAIj0C,IAEfm0C,EAAME,OACR,GAAI3xC,EAAKsxC,UAAW,CAElB,IAAKG,EAAME,MAAMyH,aACf,MAAOp5C,EAGoC,oBAAlCyxC,GAAME,MAAMyH,aAAajK,KAClCsC,EAAME,MAAMyH,aAAagB,QAAQ,GAEjC3I,EAAME,MAAMyH,aAAajK,KAAK,GAIhCnvC,EAAKq6C,aAAa5I,EAAME,WACd2I,OAAM7I,EAAME,MAAMiH,WAAanH,EAAME,MAAMiH,WAAaU,EAAAA,GAClE7H,EAAME,MAAMsI,OAMb92C,WAAU,IACbnD,EAAKg1C,MAAM,QAASvD,EAAQA,EAAM+G,IAAM,MAI5C,MAAOx4C,IASTmvC,KAAM,SAASrJ,EAAIrmB,GACjB,GAAIzf,GAAOa,IAGX,IAAoB,WAAhBb,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAKmvC,KAAKrJ,MAIP9lC,CAMT,KAAK,GAFDuxC,GAAMvxC,EAAKwxC,aAAa1L,GAEnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B0C,EAAKy5C,YAAYlI,EAAIj0C,GAGrB,IAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAEhC,IAAIm0C,IAEFA,EAAMkH,MAAQlH,EAAMoH,QAAU,EAC9BpH,EAAMyI,UAAY,EAClBzI,EAAMkD,SAAU,EAChBlD,EAAM8G,QAAS,EAGfv4C,EAAKm6C,UAAU5I,EAAIj0C,IAEfm0C,EAAME,OACR,GAAI3xC,EAAKsxC,UAAW,CAElB,IAAKG,EAAME,MAAMyH,aAKf,MAJK35B,IACHzf,EAAKg1C,MAAM,OAAQvD,EAAM+G,KAGpBx4C,CAGoC,oBAAlCyxC,GAAME,MAAMyH,aAAajK,KAClCsC,EAAME,MAAMyH,aAAagB,QAAQ,GAEjC3I,EAAME,MAAMyH,aAAajK,KAAK,GAIhCnvC,EAAKq6C,aAAa5I,EAAME,WACd2I,OAAM7I,EAAME,MAAMiH,WAAanH,EAAME,MAAMiH,WAAaU,EAAAA,IAClE7H,EAAME,MAAMuH,YAAczH,EAAMoH,QAAU,EAC1CpH,EAAME,MAAMsI,QAKdxI,KAAUhyB,GACZzf,EAAKg1C,MAAM,OAAQvD,EAAM+G,KAI7B,MAAOx4C,IAST4xC,KAAM,SAASC,EAAO/L,GACpB,GAAI9lC,GAAOa,IAGX,IAAoB,WAAhBb,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAK4xC,KAAKC,EAAO/L,MAId9lC,CAIT,IAAkB,mBAAP8lC,GAAoB,CAC7B,GAAqB,iBAAV+L,GAGT,MAAO7xC,GAAKuwC,MAFZvwC,GAAKuwC,OAASsB,EASlB,IAAK,GAFDN,GAAMvxC,EAAKwxC,aAAa1L,GAEnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B,GAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAE5Bm0C,KACFA,EAAMlB,OAASsB,EAEX7xC,EAAKsxC,WAAaG,EAAME,MAC1BF,EAAME,MAAMN,KAAK4H,eAAepH,EAAQ,EAAIJ,EAAMjB,QAASJ,EAAOljC,IAAIgsC,aAC7DzH,EAAME,QACfF,EAAME,MAAME,QAAQzB,EAAOG,QAAgBsB,GAG7C7xC,EAAKg1C,MAAM,OAAQvD,EAAM+G,MAI7B,MAAOx4C,IAWTixC,OAAQ,WACN,GAEIC,GAAKpL,EAFL9lC,EAAOa,KACPgH,EAAO1E,SAIX,IAAoB,IAAhB0E,EAAKhK,OAEP,MAAOmC,GAAKwwC,OACP,IAAoB,IAAhB3oC,EAAKhK,QAAgC,IAAhBgK,EAAKhK,QAAmC,mBAAZgK,GAAK,GAAoB,CAEnF,GAAI0pC,GAAMvxC,EAAKwxC,eACXjqC,EAAQgqC,EAAI14B,QAAQhR,EAAK,GACzBN,IAAS,EACXu+B,EAAKryB,SAAS5L,EAAK,GAAI,IAEvBqpC,EAAMC,WAAWtpC,EAAK,QAEfA,GAAKhK,QAAU,IACxBqzC,EAAMC,WAAWtpC,EAAK,IACtBi+B,EAAKryB,SAAS5L,EAAK,GAAI,IAIzB,IAAI4pC,EACJ,MAAmB,mBAARP,IAAuBA,GAAO,GAAKA,GAAO,GA2CnD,MADAO,GAAQ3L,EAAK9lC,EAAK0xC,WAAW5L,GAAM9lC,EAAK00C,QAAQ,GACzCjD,EAAQA,EAAMjB,QAAU,CAzC/B,IAAoB,WAAhBxwC,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,SACP0hC,OAAQ,WACN73C,EAAKixC,OAAO7pC,MAAMpH,EAAM6H,MAIrB7H,CAIS,oBAAP8lC,KACT9lC,EAAKwwC,QAAUU,GAIjBpL,EAAK9lC,EAAKwxC,aAAa1L,EACvB,KAAK,GAAIxoC,GAAE,EAAGA,EAAEwoC,EAAGjoC,OAAQP,IAEzBm0C,EAAQzxC,EAAK0xC,WAAW5L,EAAGxoC,IAEvBm0C,IACFA,EAAMjB,QAAUU,EAGXrpC,EAAK,IACR7H,EAAKm6C,UAAUrU,EAAGxoC,IAGhB0C,EAAKsxC,WAAaG,EAAME,QAAUF,EAAMlB,OAC1CkB,EAAME,MAAMN,KAAK4H,eAAe/H,EAAKd,EAAOljC,IAAIgsC,aACvCzH,EAAME,QAAUF,EAAMlB,SAC/BkB,EAAME,MAAMV,OAASC,EAAMd,EAAOa,UAGpCjxC,EAAKg1C,MAAM,SAAUvD,EAAM+G,KAQjC,OAAOx4C,IAWTu6C,KAAM,SAASliB,EAAMC,EAAIxZ,EAAKgnB,GAC5B,GAAI9lC,GAAOa,KACP25C,EAAOhzC,KAAKy4B,IAAI5H,EAAOC,GACvBmiB,EAAMpiB,EAAOC,EAAK,MAAQ,KAC1BoiB,EAAQF,EAAO,IACfG,EAAWD,EAAQ,EAAK57B,EAAM47B,EAAQ57B,CAS1C,IANI67B,EAAU,IACZD,EAAQlzC,KAAKozC,KAAKF,GAAS,EAAIC,IAC/BA,EAAU,GAIQ,WAAhB36C,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAKu6C,KAAKliB,EAAMC,EAAIxZ,EAAKgnB,MAItB9lC,CAITA,GAAKixC,OAAO5Y,EAAMyN,EAIlB,KAAK,GADDyL,GAAMvxC,EAAKwxC,aAAa1L,GACnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B,GAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAGhC,IAAIm0C,EAAO,CAOT,GALK3L,GACH9lC,EAAKm6C,UAAU5I,EAAIj0C,IAIjB0C,EAAKsxC,YAAcG,EAAMlB,OAAQ,CACnC,GAAI2I,GAAc9I,EAAOljC,IAAIgsC,YACzBjX,EAAMiX,EAAep6B,EAAM,GAC/B2yB,GAAMjB,QAAUnY,EAChBoZ,EAAME,MAAMN,KAAK4H,eAAe5gB,EAAM6gB,GACtCzH,EAAME,MAAMN,KAAKwJ,wBAAwBviB,EAAI2J,GAG/C,GAAIiP,GAAM7Y,CACVoZ,GAAMqJ,UAAYC,YAAY,SAASC,EAASvJ,GAE1CiJ,EAAQ,IACVxJ,GAAgB,OAARuJ,EAAe,KAAO,KAIhCvJ,EAAM1pC,KAAKC,IAAI,EAAGypC,GAClBA,EAAM1pC,KAAKyzC,IAAI,EAAG/J,GAGlBA,EAAM1pC,KAAK25B,MAAY,IAAN+P,GAAa,IAG1BlxC,EAAKsxC,WACW,mBAAPxL,KACT9lC,EAAKwwC,QAAUU,GAGjBO,EAAMjB,QAAUU,GAEhBlxC,EAAKixC,OAAOC,EAAK8J,GAAS,GAIxB9J,IAAQ5Y,IACV4iB,cAAczJ,EAAMqJ,WACpBrJ,EAAMqJ,UAAY,KAClB96C,EAAKixC,OAAOC,EAAK8J,GACjBh7C,EAAKg1C,MAAM,OAAQgG,KAErB71C,KAAKnF,EAAMuxC,EAAIj0C,GAAIm0C,GAAQkJ,IAIjC,MAAO36C,IASTm6C,UAAW,SAASrU,GAClB,GAAI9lC,GAAOa,KACP4wC,EAAQzxC,EAAK0xC,WAAW5L,EAY5B,OAVI2L,IAASA,EAAMqJ,YACb96C,EAAKsxC,WACPG,EAAME,MAAMN,KAAK8J,sBAAsB/K,EAAOljC,IAAIgsC,aAGpDgC,cAAczJ,EAAMqJ,WACpBrJ,EAAMqJ,UAAY,KAClB96C,EAAKg1C,MAAM,OAAQlP,IAGd9lC,GAWTy1C,KAAM,WACJ,GAEIA,GAAM3P,EAAI2L,EAFVzxC,EAAOa,KACPgH,EAAO1E,SAIX,IAAoB,IAAhB0E,EAAKhK,OAEP,MAAOmC,GAAKw1C,KACP,IAAoB,IAAhB3tC,EAAKhK,OAAc,CAC5B,GAAuB,iBAAZgK,GAAK,GAMd,MADA4pC,GAAQzxC,EAAK0xC,WAAWj+B,SAAS5L,EAAK,GAAI,OACnC4pC,GAAQA,EAAM+D,KALrBC,GAAO5tC,EAAK,GACZ7H,EAAKw1C,MAAQC,MAMU,KAAhB5tC,EAAKhK,SACd43C,EAAO5tC,EAAK,GACZi+B,EAAKryB,SAAS5L,EAAK,GAAI,IAKzB,KAAK,GADD0pC,GAAMvxC,EAAKwxC,aAAa1L,GACnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAC1Bm0C,EAAQzxC,EAAK0xC,WAAWH,EAAIj0C,IAExBm0C,IACFA,EAAM+D,MAAQC,EACVz1C,EAAKsxC,WAAaG,EAAME,OAASF,EAAME,MAAMyH,eAC/C3H,EAAME,MAAMyH,aAAa3D,KAAOA,EAC5BA,IACFhE,EAAME,MAAMyH,aAAagC,UAAY3J,EAAMoH,QAAU,EACrDpH,EAAME,MAAMyH,aAAaiC,QAAU5J,EAAMqH,QAMjD,OAAO94C,IAWT+1C,KAAM,WACJ,GAEIA,GAAMjQ,EAFN9lC,EAAOa,KACPgH,EAAO1E,SAIX,IAAoB,IAAhB0E,EAAKhK,OAEPioC,EAAK9lC,EAAK00C,QAAQ,GAAG8D,QAChB,IAAoB,IAAhB3wC,EAAKhK,OAAc,CAE5B,GAAI0zC,GAAMvxC,EAAKwxC,eACXjqC,EAAQgqC,EAAI14B,QAAQhR,EAAK,GACzBN,IAAS,EACXu+B,EAAKryB,SAAS5L,EAAK,GAAI,IAEvBkuC,EAAO5E,WAAWtpC,EAAK,QAEA,KAAhBA,EAAKhK,SACdk4C,EAAO5E,WAAWtpC,EAAK,IACvBi+B,EAAKryB,SAAS5L,EAAK,GAAI,IAIzB,IAAI4pC,EACJ,IAAoB,gBAATsE,GAsDT,MADAtE,GAAQzxC,EAAK0xC,WAAW5L,GACjB2L,EAAQA,EAAMqE,MAAQ91C,EAAK81C,KApDlC,IAAoB,WAAhB91C,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAK+1C,KAAK3uC,MAAMpH,EAAM6H,MAInB7H,CAIS,oBAAP8lC,KACT9lC,EAAK81C,MAAQC,GAIfjQ,EAAK9lC,EAAKwxC,aAAa1L,EACvB,KAAK,GAAIxoC,GAAE,EAAGA,EAAEwoC,EAAGjoC,OAAQP,IAIzB,GAFAm0C,EAAQzxC,EAAK0xC,WAAW5L,EAAGxoC,IAEhB,CAGTm0C,EAAMyI,UAAYl6C,EAAK04C,KAAK5S,EAAGxoC,IAC/Bm0C,EAAM0H,WAAan5C,EAAKsxC,UAAYlB,EAAOljC,IAAIgsC,YAAczH,EAAM0H,WACnE1H,EAAMqE,MAAQC,EAGV/1C,EAAKsxC,WAAaG,EAAME,OAASF,EAAME,MAAMyH,aAC/C3H,EAAME,MAAMyH,aAAaO,aAAa3zC,MAAQ+vC,EACrCtE,EAAME,QACfF,EAAME,MAAMgI,aAAe5D,EAI7B,IAAI2C,GAAO14C,EAAK04C,KAAK5S,EAAGxoC,IACpBs7C,GAAa54C,EAAKg2C,QAAQvE,EAAMuE,SAAS,GAAKh2C,EAAKg2C,QAAQvE,EAAMuE,SAAS,IAAM,IAAQ0C,EACxFxjB,EAAsB,IAAX0jB,EAAmBpxC,KAAKy4B,IAAIwR,EAAMqE,QAG7C91C,EAAKq2C,WAAWvQ,EAAGxoC,KAAQm0C,EAAMkD,UACnC30C,EAAKy5C,YAAY3T,EAAGxoC,IACpB0C,EAAKq2C,WAAWvQ,EAAGxoC,IAAM8F,WAAWpD,EAAKu4C,OAAOpzC,KAAKnF,EAAMyxC,GAAQvc,IAGrEl1B,EAAKg1C,MAAM,OAAQvD,EAAM+G,KAQ/B,MAAOx4C,IAWT04C,KAAM,WACJ,GAEIA,GAAM5S,EAFN9lC,EAAOa,KACPgH,EAAO1E,SAIX,IAAoB,IAAhB0E,EAAKhK,OAEPioC,EAAK9lC,EAAK00C,QAAQ,GAAG8D,QAChB,IAAoB,IAAhB3wC,EAAKhK,OAAc,CAE5B,GAAI0zC,GAAMvxC,EAAKwxC,eACXjqC,EAAQgqC,EAAI14B,QAAQhR,EAAK,GACzBN,IAAS,EACXu+B,EAAKryB,SAAS5L,EAAK,GAAI,KAEvBi+B,EAAK9lC,EAAK00C,QAAQ,GAAG8D,IACrBE,EAAOvH,WAAWtpC,EAAK,SAEA,KAAhBA,EAAKhK,SACd66C,EAAOvH,WAAWtpC,EAAK,IACvBi+B,EAAKryB,SAAS5L,EAAK,GAAI,IAIzB,IAAkB,mBAAPi+B,GACT,MAAO9lC,EAIT,IAAoB,WAAhBA,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,OACP0hC,OAAQ,WACN73C,EAAK04C,KAAKtxC,MAAMpH,EAAM6H,MAInB7H,CAIT,IAAIyxC,GAAQzxC,EAAK0xC,WAAW5L,EAE5B,IAAI2L,EAAO,CACT,KAAoB,gBAATiH,IAAqBA,GAAQ,GAuBjC,CACL,GAAI14C,EAAKsxC,UAAW,CAClB,GAAIgK,GAAWt7C,EAAKu7C,QAAQzV,GAAMsK,EAAOljC,IAAIgsC,YAAczH,EAAM0H,WAAa,EAC1EqC,EAAW/J,EAAMyI,UAAYzI,EAAMyI,UAAYzI,EAAMkH,MAAQ,CACjE,OAAOlH,GAAMkH,OAAS6C,EAAWF,EAAW9zC,KAAKy4B,IAAIwR,EAAMqE,QAE3D,MAAOrE,GAAME,MAAMuH,YA3BrB,GAAIqC,GAAUv7C,EAAKu7C,QAAQzV,EACvByV,IACFv7C,EAAKi6C,MAAMnU,GAAI,GAIjB2L,EAAMkH,MAAQD,EACdjH,EAAM8G,QAAS,EACfv4C,EAAKy5C,YAAY3T,GAGbyV,GACFv7C,EAAK83C,KAAKhS,GAAI,IAIX9lC,EAAKsxC,WAAaG,EAAME,QAC3BF,EAAME,MAAMuH,YAAcR,GAG5B14C,EAAKg1C,MAAM,OAAQlP,GAYvB,MAAO9lC,IAQTu7C,QAAS,SAASzV,GAChB,GAAI9lC,GAAOa,IAGX,IAAkB,gBAAPilC,GAAiB,CAC1B,GAAI2L,GAAQzxC,EAAK0xC,WAAW5L,EAC5B,SAAO2L,IAASA,EAAMkD,QAIxB,IAAK,GAAIr3C,GAAE,EAAGA,EAAE0C,EAAK00C,QAAQ72C,OAAQP,IACnC,IAAK0C,EAAK00C,QAAQp3C,GAAGq3C,QACnB,OAAO,CAIX,QAAO,GAQTiE,SAAU,SAAS9S,GACjB,GAAI9lC,GAAOa,KACP+3C,EAAW54C,EAAKm2C,UAGhB1E,EAAQzxC,EAAK0xC,WAAW5L,EAK5B,OAJI2L,KACFmH,EAAW54C,EAAKg2C,QAAQvE,EAAMuE,SAAS,GAAK,KAGvC4C,GAOT7S,MAAO,WACL,MAAOllC,MAAKu1C,QAOdtE,OAAQ,WAKN,IAAK,GAJD9xC,GAAOa,KAGP46C,EAASz7C,EAAK00C,QACTp3C,EAAE,EAAGA,EAAEm+C,EAAO59C,OAAQP,IAAK,CAE7Bm+C,EAAOn+C,GAAGq3C,UACb30C,EAAKmvC,KAAKsM,EAAOn+C,GAAGk7C,KACpBx4C,EAAKg1C,MAAM,MAAOyG,EAAOn+C,GAAGk7C,MAIzBx4C,EAAKsxC,YAERmK,EAAOn+C,GAAGq0C,MAAM7iB,IAAM,qFAGtB2sB,EAAOn+C,GAAGq0C,MAAM1W,oBAAoB,QAASwgB,EAAOn+C,GAAGo+C,UAAU,GACjED,EAAOn+C,GAAGq0C,MAAM1W,oBAAoBmV,EAAOK,cAAegL,EAAOn+C,GAAGq+C,SAAS,UAIxEF,GAAOn+C,GAAGq0C,MAGjB3xC,EAAKy5C,YAAYgC,EAAOn+C,GAAGk7C,IAG3B,IAAIjxC,GAAQ6oC,EAAOE,OAAOz3B,QAAQ7Y,EAC9BuH,IAAS,GACX6oC,EAAOE,OAAOr/B,OAAO1J,EAAO,GAKhC,GAAIq0C,IAAW,CACf,KAAKt+C,EAAE,EAAGA,EAAE8yC,EAAOE,OAAOzyC,OAAQP,IAChC,GAAI8yC,EAAOE,OAAOhzC,GAAG44C,OAASl2C,EAAKk2C,KAAM,CACvC0F,GAAW,CACX,OAgBJ,MAZIC,IAASD,SACJC,GAAM77C,EAAKk2C,MAIpB9F,EAAOQ,SAAU,EAGjB5wC,EAAKo2C,OAAS,WACdp2C,EAAK00C,WACL10C,EAAO,KAEA,MAWTyvC,GAAI,SAASt5B,EAAOxU,EAAImkC,EAAI0T,GAC1B,GAAIx5C,GAAOa,KACP6uC,EAAS1vC,EAAK,MAAQmW,EAM1B,OAJkB,kBAAPxU,IACT+tC,EAAO5tC,KAAK03C,GAAQ1T,GAAIA,EAAInkC,GAAIA,EAAI63C,KAAMA,IAAS1T,GAAIA,EAAInkC,GAAIA,IAG1D3B,GAUT2vC,IAAK,SAASx5B,EAAOxU,EAAImkC,GACvB,GAAI9lC,GAAOa,KACP6uC,EAAS1vC,EAAK,MAAQmW,GACtB7Y,EAAI,CAER,IAAIqE,GAEF,IAAKrE,EAAE,EAAGA,EAAEoyC,EAAO7xC,OAAQP,IACzB,GAAIqE,IAAO+tC,EAAOpyC,GAAGqE,IAAMmkC,IAAO4J,EAAOpyC,GAAGwoC,GAAI,CAC9C4J,EAAOz+B,OAAO3T,EAAG,EACjB,YAGC,IAAI6Y,EAETnW,EAAK,MAAQmW,UACR,CAEL,GAAI3K,GAAO/E,OAAO+E,KAAKxL,EACvB,KAAK1C,EAAE,EAAGA,EAAEkO,EAAK3N,OAAQP,IACS,IAA3BkO,EAAKlO,GAAGub,QAAQ,QAAiB0C,MAAM9Q,QAAQzK,EAAKwL,EAAKlO,OAC5D0C,EAAKwL,EAAKlO,QAKhB,MAAO0C,IAUTw5C,KAAM,SAASrjC,EAAOxU,EAAImkC,GACxB,GAAI9lC,GAAOa,IAKX,OAFAb,GAAKyvC,GAAGt5B,EAAOxU,EAAImkC,EAAI,GAEhB9lC,GAUTg1C,MAAO,SAAS7+B,EAAO2vB,EAAI31B,GAKzB,IAAK,GAJDnQ,GAAOa,KACP6uC,EAAS1vC,EAAK,MAAQmW,GAGjB7Y,EAAEoyC,EAAO7xC,OAAO,EAAGP,GAAG,EAAGA,IAC3BoyC,EAAOpyC,GAAGwoC,IAAM4J,EAAOpyC,GAAGwoC,KAAOA,GAAgB,SAAV3vB,IAC1C/S,WAAW,SAASzB,GAClBA,EAAG/D,KAAKiD,KAAMilC,EAAI31B,IAClBhL,KAAKnF,EAAM0vC,EAAOpyC,GAAGqE,IAAK,GAGxB+tC,EAAOpyC,GAAGk8C,MACZx5C,EAAK2vC,IAAIx5B,EAAOu5B,EAAOpyC,GAAGqE,GAAI+tC,EAAOpyC,GAAGwoC,IAK9C,OAAO9lC,IAST87C,WAAY,WACV,GAAI97C,GAAOa,IAEX,IAAIb,EAAKqiB,OAAOxkB,OAAS,EAAG,CAC1B,GAAIk+C,GAAO/7C,EAAKqiB,OAAO,EAGvBriB,GAAKw5C,KAAKuC,EAAK5lC,MAAO,WACpBnW,EAAKqiB,OAAO1e,QACZ3D,EAAK87C,eAGPC,EAAKlE,SAGP,MAAO73C,IAQTu4C,OAAQ,SAAS9G,GACf,GAAIzxC,GAAOa,KACPo1C,EAASxE,EAAMuE,QAGfP,KAAUhE,EAAM+D,QAASx1C,EAAKg2C,QAAQC,GAAQ,GAWlD,IARAj2C,EAAKg1C,MAAM,MAAOvD,EAAM+G,MAGnBx4C,EAAKsxC,WAAamE,GACrBz1C,EAAKmvC,KAAKsC,EAAM+G,KAAK,GAAMV,KAAKrG,EAAM+G,KAIpCx4C,EAAKsxC,WAAamE,EAAM,CAC1Bz1C,EAAKg1C,MAAM,OAAQvD,EAAM+G,KACzB/G,EAAMkH,MAAQlH,EAAMoH,QAAU,EAC9BpH,EAAMyI,UAAY,EAClBzI,EAAM0H,WAAa/I,EAAOljC,IAAIgsC,WAE9B,IAAIhkB,GAA0C,KAA9Buc,EAAMqH,MAAQrH,EAAMoH,QAAkBrxC,KAAKy4B,IAAIwR,EAAMqE,MACrE91C,GAAKq2C,WAAW5E,EAAM+G,KAAOp1C,WAAWpD,EAAKu4C,OAAOpzC,KAAKnF,EAAMyxC,GAAQvc,GAuBzE,MAnBIl1B,GAAKsxC,YAAcmE,IACrBhE,EAAMkD,SAAU,EAChBlD,EAAM8G,QAAS,EACf9G,EAAMkH,MAAQlH,EAAMoH,QAAU,EAC9BpH,EAAMyI,UAAY,EAClBl6C,EAAKy5C,YAAYhI,EAAM+G,KAGvBx4C,EAAKq6C,aAAa5I,EAAME,OAGxBvB,EAAO8B,gBAIJlyC,EAAKsxC,WAAcmE,GACtBz1C,EAAKmvC,KAAKsC,EAAM+G,KAGXx4C,GAQTy5C,YAAa,SAAS3T,GACpB,GAAI9lC,GAAOa,IAOX,OALIb,GAAKq2C,WAAWvQ,KAClBlR,aAAa50B,EAAKq2C,WAAWvQ,UACtB9lC,GAAKq2C,WAAWvQ,IAGlB9lC,GAQT0xC,WAAY,SAAS5L,GAInB,IAAK,GAHD9lC,GAAOa,KAGFvD,EAAE,EAAGA,EAAE0C,EAAK00C,QAAQ72C,OAAQP,IACnC,GAAIwoC,IAAO9lC,EAAK00C,QAAQp3C,GAAGk7C,IACzB,MAAOx4C,GAAK00C,QAAQp3C,EAIxB,OAAO,OAOTm7C,eAAgB,WACd,GAAIz4C,GAAOa,IAEXb,GAAKg8C,QAGL,KAAK,GAAI1+C,GAAE,EAAGA,EAAE0C,EAAK00C,QAAQ72C,OAAQP,IACnC,GAAI0C,EAAK00C,QAAQp3C,GAAGi7C,OAClB,MAAOv4C,GAAK00C,QAAQp3C,GAAG8vC,OAK3B,OAAO,IAAIgL,GAAMp4C,IAMnBg8C,OAAQ,WACN,GAAIh8C,GAAOa,KACPihB,EAAQ9hB,EAAK01C,MACbuG,EAAM,EACN3+C,EAAI,CAGR,MAAI0C,EAAK00C,QAAQ72C,OAASikB,GAA1B,CAKA,IAAKxkB,EAAE,EAAGA,EAAE0C,EAAK00C,QAAQ72C,OAAQP,IAC3B0C,EAAK00C,QAAQp3C,GAAGi7C,QAClB0D,GAKJ,KAAK3+C,EAAE0C,EAAK00C,QAAQ72C,OAAS,EAAGP,GAAG,EAAGA,IAAK,CACzC,GAAI2+C,GAAOn6B,EACT,MAGE9hB,GAAK00C,QAAQp3C,GAAGi7C,SAEdv4C,EAAKsxC,WAAatxC,EAAK00C,QAAQp3C,GAAGq0C,OACpC3xC,EAAK00C,QAAQp3C,GAAGq0C,MAAMlf,WAAW,GAInCzyB,EAAK00C,QAAQzjC,OAAO3T,EAAG,GACvB2+C,QAUNzK,aAAc,SAAS1L,GACrB,GAAI9lC,GAAOa,IAEX,IAAkB,mBAAPilC,GAAoB,CAE7B,IAAK,GADDyL,MACKj0C,EAAE,EAAGA,EAAE0C,EAAK00C,QAAQ72C,OAAQP,IACnCi0C,EAAIzvC,KAAK9B,EAAK00C,QAAQp3C,GAAGk7C,IAG3B,OAAOjH,GAEP,OAAQzL,IASZkT,eAAgB,SAASvH,GACvB,GAAIzxC,GAAOa,IAqBX,OAlBA4wC,GAAME,MAAMyH,aAAehJ,EAAOljC,IAAIinC,qBACtC1C,EAAME,MAAMyH,aAAahF,OAASyH,EAAM77C,EAAKk2C,MAGzCzE,EAAMyK,QACRzK,EAAME,MAAMyH,aAAa/E,QAAQ5C,EAAMyK,SAEvCzK,EAAME,MAAMyH,aAAa/E,QAAQ5C,EAAME,OAIzCF,EAAME,MAAMyH,aAAa3D,KAAOhE,EAAM+D,MAClC/D,EAAM+D,QACR/D,EAAME,MAAMyH,aAAagC,UAAY3J,EAAMoH,QAAU,EACrDpH,EAAME,MAAMyH,aAAaiC,QAAU5J,EAAMqH,OAE3CrH,EAAME,MAAMyH,aAAaO,aAAa3zC,MAAQyrC,EAAMqE,MAE7C91C,GAQTq6C,aAAc,SAASjiC,GACrB,GAAIpY,GAAOa,IAEX,IAAIb,EAAKg0C,eAAgB,CACvB57B,EAAKghC,aAAa5E,QAAU,KAC5Bp8B,EAAKghC,aAAa3mB,WAAW,EAC7B,KAAMra,EAAKghC,aAAahF,OAASp0C,EAAKg0C,eAAkB,MAAMn3C,KAIhE,MAFAub,GAAKghC,aAAe,KAEbp5C,GAWX,IAAIo4C,GAAQ,SAAS+D,GACnBt7C,KAAK8N,QAAUwtC,EACft7C,KAAKH,OAEP03C,GAAMx3C,WAKJF,KAAM,WACJ,GAAIV,GAAOa,KACPuI,EAASpJ,EAAK2O,OAsBlB,OAnBA3O,GAAKuwC,OAASnnC,EAAOmnC,OACrBvwC,EAAKw1C,MAAQpsC,EAAOosC,MACpBx1C,EAAKwwC,QAAUpnC,EAAOonC,QACtBxwC,EAAKuwC,OAASnnC,EAAOmnC,OACrBvwC,EAAK81C,MAAQ1sC,EAAO0sC,MACpB91C,EAAK24C,MAAQ,EACb34C,EAAK20C,SAAU,EACf30C,EAAKu4C,QAAS,EACdv4C,EAAKg2C,QAAU,YAGfh2C,EAAKw4C,IAAMhxC,KAAK25B,MAAMwH,KAAK1J,MAAQz3B,KAAK40C,UAGxChzC,EAAOsrC,QAAQ5yC,KAAK9B,GAGpBA,EAAK0G,SAEE1G,GAOT0G,OAAQ,WACN,GAAI1G,GAAOa,KACPuI,EAASpJ,EAAK2O,QACdsiC,EAAUb,EAAOG,QAAUvwC,EAAKuwC,QAAUvwC,EAAK2O,QAAQ4hC,OAAU,EAAIvwC,EAAKwwC,OA4B9E,OA1BIpnC,GAAOkoC,WAETtxC,EAAK2xC,MAA0C,mBAA1BvB,GAAOljC,IAAImvC,WAA8BjM,EAAOljC,IAAIovC,iBAAmBlM,EAAOljC,IAAImvC,aACvGr8C,EAAK2xC,MAAMN,KAAK4H,eAAehI,EAAQb,EAAOljC,IAAIgsC,aAClDl5C,EAAK2xC,MAAM4K,QAAS,EACpBv8C,EAAK2xC,MAAM0C,QAAQjE,EAAOO,cAE1B3wC,EAAK2xC,MAAQ,GAAIQ,OAGjBnyC,EAAK07C,SAAW17C,EAAKw8C,eAAer3C,KAAKnF,GACzCA,EAAK2xC,MAAM5W,iBAAiB,QAAS/6B,EAAK07C,UAAU,GAGpD17C,EAAK27C,QAAU37C,EAAKy8C,cAAct3C,KAAKnF,GACvCA,EAAK2xC,MAAM5W,iBAAiBqV,EAAOK,cAAezwC,EAAK27C,SAAS,GAGhE37C,EAAK2xC,MAAM7iB,IAAM1lB,EAAO8sC,KACxBl2C,EAAK2xC,MAAMkE,QAAU,OACrB71C,EAAK2xC,MAAMV,OAASA,EAASb,EAAOa,SAGpCjxC,EAAK2xC,MAAMoG,QAGN/3C,GAOTotC,MAAO,WACL,GAAIptC,GAAOa,KACPuI,EAASpJ,EAAK2O,OAiBlB,OAdA3O,GAAKuwC,OAASnnC,EAAOmnC,OACrBvwC,EAAKw1C,MAAQpsC,EAAOosC,MACpBx1C,EAAKwwC,QAAUpnC,EAAOonC,QACtBxwC,EAAKuwC,OAASnnC,EAAOmnC,OACrBvwC,EAAK81C,MAAQ1sC,EAAO0sC,MACpB91C,EAAK24C,MAAQ,EACb34C,EAAKk6C,UAAY,EACjBl6C,EAAK20C,SAAU,EACf30C,EAAKu4C,QAAS,EACdv4C,EAAKg2C,QAAU,YAGfh2C,EAAKw4C,IAAMhxC,KAAK25B,MAAMwH,KAAK1J,MAAQz3B,KAAK40C,UAEjCp8C,GAMTw8C,eAAgB,WACd,GAAIx8C,GAAOa,IAGXb,GAAK2O,QAAQqmC,MAAM,YAAah1C,EAAKw4C,IAAKx4C,EAAK2xC,MAAMnjC,MAAQxO,EAAK2xC,MAAMnjC,MAAM/Q,KAAO,GAGrFuC,EAAK2xC,MAAM1W,oBAAoB,QAASj7B,EAAKw8C,gBAAgB,IAM/DC,cAAe,WACb,GAAIz8C,GAAOa,KACPuI,EAASpJ,EAAK2O,OAGlBvF,GAAO+sC,UAAY3uC,KAAKozC,KAA2B,GAAtB56C,EAAK2xC,MAAMiH,UAAiB,GAGd,IAAvCnyC,OAAO+E,KAAKpC,EAAO4sC,SAASn4C,SAC9BuL,EAAO4sC,SAAW0G,WAAY,EAAsB,IAAnBtzC,EAAO+sC,aAGpB,WAAlB/sC,EAAOgtC,SACThtC,EAAOgtC,OAAS,SAChBhtC,EAAO4rC,MAAM,QACb5rC,EAAO0yC,cAIT97C,EAAK2xC,MAAM1W,oBAAoBmV,EAAOK,cAAezwC,EAAK27C,SAAS,IAOvE,IAAIE,MAMAxD,EAAa,SAASr4C,GACxB,GAAIg4C,GAAMh4C,EAAKk2C,IAGf,IAAI2F,EAAM7D,GAOR,MALAh4C,GAAKm2C,UAAY0F,EAAM7D,GAAKY,aAG5B+D,GAAU38C,EAKZ,IAAI,sBAAsB8P,KAAKkoC,GAAM,CAInC,IAAK,GAFDjiB,GAAO6mB,KAAK5E,EAAItoC,MAAM,KAAK,IAC3BmtC,EAAW,GAAIC,YAAW/mB,EAAKl4B,QAC1BP,EAAE,EAAGA,EAAEy4B,EAAKl4B,SAAUP,EAC7Bu/C,EAASv/C,GAAKy4B,EAAKgnB,WAAWz/C,EAGhC0/C,GAAgBH,EAASzI,OAAQp0C,OAC5B,CAEL,GAAIi9C,GAAM,GAAIC,eACdD,GAAIE,KAAK,MAAOnF,GAAK,GACrBiF,EAAIG,aAAe,cACnBH,EAAItG,OAAS,WAEX,GAAIl5C,IAAQw/C,EAAII,OAAS,IAAI,EAC7B,OAAa,MAAT5/C,GAAyB,MAATA,GAAyB,MAATA,MAClCuC,GAAKg1C,MAAM,YAAa,KAAM,0CAA4CiI,EAAII,OAAS,SAIzFL,GAAgBC,EAAIK,SAAUt9C,IAEhCi9C,EAAIM,QAAU,WAERv9C,EAAKsxC,YACPtxC,EAAKs1C,QAAS,EACdt1C,EAAKsxC,WAAY,EACjBtxC,EAAK00C,iBACEmH,GAAM7D,GACbh4C,EAAK+3C,SAGTyF,EAAYP,KAQZO,EAAc,SAASP,GACzB,IACEA,EAAIQ,OACJ,MAAO5gD,GACPogD,EAAIM,YASJP,EAAkB,SAASU,EAAa19C,GAE1CowC,EAAOljC,IAAI8vC,gBAAgBU,EAAa,SAAStJ,GAC3CA,GAAUp0C,EAAK00C,QAAQ72C,OAAS,IAClCg+C,EAAM77C,EAAKk2C,MAAQ9B,EACnBuI,EAAU38C,EAAMo0C,KAEjB,WACDp0C,EAAKg1C,MAAM,YAAa,KAAM,kCAS9B2H,EAAY,SAAS38C,EAAMo0C,GAEzBA,IAAWp0C,EAAKm2C,YAClBn2C,EAAKm2C,UAAY/B,EAAOwE,UAIe,IAArCnyC,OAAO+E,KAAKxL,EAAKg2C,SAASn4C,SAC5BmC,EAAKg2C,SAAW0G,WAAY,EAAoB,IAAjB18C,EAAKm2C,aAIlB,WAAhBn2C,EAAKo2C,SACPp2C,EAAKo2C,OAAS,SACdp2C,EAAKg1C,MAAM,QACXh1C,EAAK87C,eAOL1K,EAAoB,WAEtB,IAC8B,mBAAjBuM,cACTvN,EAAOljC,IAAM,GAAIywC,cACsB,mBAAvBC,oBAChBxN,EAAOljC,IAAM,GAAI0wC,oBAEjBxN,EAAOS,eAAgB,EAEzB,MAAMh0C,GACNuzC,EAAOS,eAAgB,EAKzB,GAAIgN,GAAO,iBAAiB/tC,KAAKsgC,EAAOM,YAAcN,EAAOM,WAAWoN,UACpEC,EAAa3N,EAAOM,YAAcN,EAAOM,WAAWqN,WAAW/tC,MAAM,0BACrEkZ,EAAU60B,EAAatqC,SAASsqC,EAAW,GAAI,IAAM,IACzD,IAAIF,GAAO30B,GAAWA,EAAU,EAAG,CACjC,GAAI80B,GAAS,SAASluC,KAAKsgC,EAAOM,YAAcN,EAAOM,WAAWvH,UAAU7yB,gBACxE85B,EAAOM,YAAcN,EAAOM,WAAW7e,aAAemsB,GAAU5N,EAAOM,aAAeN,EAAOM,WAAW7e,aAAemsB,KACzH5N,EAAOS,eAAgB,GAKvBT,EAAOS,gBACTT,EAAOO,WAA+C,mBAA1BP,GAAOljC,IAAImvC,WAA8BjM,EAAOljC,IAAIovC,iBAAmBlM,EAAOljC,IAAImvC,aAC9GjM,EAAOO,WAAWU,KAAKrrC,MAAQ,EAC/BoqC,EAAOO,WAAW0D,QAAQjE,EAAOljC,IAAIonC,cAIvClE,EAAOY,SAIa,mBAAXnxC,SAAyBA,OAAOC,KACzCD,UAAW,WACT,OACEuwC,OAAQA,EACR6E,KAAMA,KAMW,mBAAZt3C,KACTA,EAAQyyC,OAASA,EACjBzyC,EAAQs3C,KAAOA,GAIK,mBAAXl1C,SACTA,OAAOowC,aAAeA,EACtBpwC,OAAOqwC,OAASA,EAChBrwC,OAAOk1C,KAAOA,EACdl1C,OAAOq4C,MAAQA,GACY,mBAAXx4C,KAChBA,EAAOuwC,aAAeA,EACtBvwC,EAAOwwC,OAASA,EAChBxwC,EAAOq1C,KAAOA,EACdr1C,EAAOw4C,MAAQA,MAiBnB,WAEE,YAGAjI,cAAavvC,UAAUq9C,MAAQ,EAAG,EAAG,GACrC9N,aAAavvC,UAAUs9C,cAAgB,EAAG,GAAG,EAAI,EAAG,EAAG,GAWvD/N,aAAavvC,UAAUu9C,OAAS,SAASC,GACvC,GAAIp+C,GAAOa,IAGX,KAAKb,EAAKkN,MAAQlN,EAAKkN,IAAI8sC,SACzB,MAAOh6C,EAIT,KAAK,GAAI1C,GAAE0C,EAAKswC,OAAOzyC,OAAO,EAAGP,GAAG,EAAGA,IACrC0C,EAAKswC,OAAOhzC,GAAG6gD,OAAOC,EAGxB,OAAOp+C,IAWTmwC,aAAavvC,UAAUy9C,IAAM,SAAS71B,EAAGwX,EAAGse,GAC1C,GAAIt+C,GAAOa,IAGX,OAAKb,GAAKkN,KAAQlN,EAAKkN,IAAI8sC,UAK3Bha,EAAkB,gBAANA,GAAkBhgC,EAAKi+C,KAAK,GAAKje,EAC7Cse,EAAkB,gBAANA,GAAkBt+C,EAAKi+C,KAAK,GAAKK,EAE5B,gBAAN91B,GAIFxoB,EAAKi+C,MAHZj+C,EAAKi+C,MAAQz1B,EAAGwX,EAAGse,GACnBt+C,EAAKkN,IAAI8sC,SAASuE,YAAYv+C,EAAKi+C,KAAK,GAAIj+C,EAAKi+C,KAAK,GAAIj+C,EAAKi+C,KAAK,IAK/Dj+C,IAdEA,GA+BXmwC,aAAavvC,UAAU49C,YAAc,SAASh2B,EAAGwX,EAAGse,EAAGG,EAAKC,EAAKC,GAC/D,GAAI3+C,GAAOa,IAGX,KAAKb,EAAKkN,MAAQlN,EAAKkN,IAAI8sC,SACzB,MAAOh6C,EAIT,IAAI4+C,GAAK5+C,EAAKk+C,YAOd,OANAle,GAAkB,gBAANA,GAAkB4e,EAAG,GAAK5e,EACtCse,EAAkB,gBAANA,GAAkBM,EAAG,GAAKN,EACtCG,EAAsB,gBAARA,GAAoBG,EAAG,GAAKH,EAC1CC,EAAsB,gBAARA,GAAoBE,EAAG,GAAKF,EAC1CC,EAAsB,gBAARA,GAAoBC,EAAG,GAAKD,EAEzB,gBAANn2B,GAIFo2B,GAHP5+C,EAAKk+C,cAAgB11B,EAAGwX,EAAGse,EAAGG,EAAKC,EAAKC,GACxC3+C,EAAKkN,IAAI8sC,SAAS6E,eAAer2B,EAAGwX,EAAGse,EAAGG,EAAKC,EAAKC,GAK/C3+C,IAWTi1C,KAAKr0C,UAAUF,KAAO,SAAU25B,GAC9B,MAAO,UAASn9B,GACd,GAAI8C,GAAOa,IAuBX,OApBAb,GAAKk+C,aAAehhD,EAAEshD,cAAgB,EAAG,EAAG,GAC5Cx+C,EAAK8+C,QAAU5hD,EAAEihD,QAAU,KAC3Bn+C,EAAKi+C,KAAO/gD,EAAEmhD,KAAO,KACrBr+C,EAAK++C,aACHC,eAA4C,mBAArB9hD,GAAE8hD,eAAiC9hD,EAAE8hD,eAAiB,IAC7EC,eAA4C,mBAArB/hD,GAAE+hD,eAAiC/hD,EAAE+hD,eAAiB,IAC7EC,cAA0C,mBAApBhiD,GAAEgiD,cAAgChiD,EAAEgiD,cAAgB,EAC1EC,cAA0C,mBAApBjiD,GAAEiiD,cAAgCjiD,EAAEiiD,cAAgB,UAC1EC,YAAsC,mBAAlBliD,GAAEkiD,YAA8BliD,EAAEkiD,YAAc,IACpEC,aAAwC,mBAAnBniD,GAAEmiD,aAA+BniD,EAAEmiD,aAAe,OACvEC,YAAsC,mBAAlBpiD,GAAEoiD,YAA8BpiD,EAAEoiD,YAAc,EACpEC,cAA0C,mBAApBriD,GAAEqiD,cAAgCriD,EAAEqiD,cAAgB,GAI5Ev/C,EAAKw/C,UAAYtiD,EAAEuiD,WAAa99C,GAAIzE,EAAEuiD,cACtCz/C,EAAK0/C,OAASxiD,EAAEyiD,QAAUh+C,GAAIzE,EAAEyiD,WAChC3/C,EAAK4/C,eAAiB1iD,EAAE2iD,gBAAkBl+C,GAAIzE,EAAE2iD,mBAGzCxlB,EAAOz8B,KAAKiD,KAAM3D,KAE1B+3C,KAAKr0C,UAAUF,MAQlBu0C,KAAKr0C,UAAUu9C,OAAS,SAASC,EAAKtY,GACpC,GAAI9lC,GAAOa,IAGX,KAAKb,EAAKsxC,UACR,MAAOtxC,EAIT,IAAoB,WAAhBA,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,SACP0hC,OAAQ,WACN73C,EAAKm+C,OAAOC,EAAKtY,MAId9lC,CAIT,IAAI8/C,GAAuD,mBAAlC1P,QAAOljC,IAAI6yC,mBAAsC,UAAY,QAGtF,IAAkB,mBAAPja,GAAoB,CAE7B,GAAmB,gBAARsY,GAIT,MAAOp+C,GAAK8+C,OAHZ9+C,GAAK8+C,QAAUV,EACfp+C,EAAKi+C,MAAQG,EAAK,EAAG,GAQzB,IAAK,GADD7M,GAAMvxC,EAAKwxC,aAAa1L,GACnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B,GAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAEhC,IAAIm0C,EAAO,CACT,GAAmB,gBAAR2M,GAsBT,MAAO3M,GAAMqN,OArBbrN,GAAMqN,QAAUV,EAChB3M,EAAMwM,MAAQG,EAAK,EAAG,GAElB3M,EAAME,QAERF,EAAMsN,YAAYM,aAAe,aAG5B5N,EAAMyK,SAAYzK,EAAMyK,QAAQkC,KACnC4B,EAAYvO,EAAOqO,GAGF,YAAfA,EACFrO,EAAMyK,QAAQqC,YAAYH,EAAK,EAAG,GAElC3M,EAAMyK,QAAQkC,IAAIp4C,MAAQo4C,GAI9Bp+C,EAAKg1C,MAAM,SAAUvD,EAAM+G,MAOjC,MAAOx4C,IAcTi1C,KAAKr0C,UAAUy9C,IAAM,SAAS71B,EAAGwX,EAAGse,EAAGxY,GACrC,GAAI9lC,GAAOa,IAGX,KAAKb,EAAKsxC,UACR,MAAOtxC,EAIT,IAAoB,WAAhBA,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,MACP0hC,OAAQ,WACN73C,EAAKq+C,IAAI71B,EAAGwX,EAAGse,EAAGxY,MAIf9lC,CAQT,IAJAggC,EAAkB,gBAANA,GAAkB,EAAIA,EAClCse,EAAkB,gBAANA,IAAkB,GAAOA,EAGnB,mBAAPxY,GAAoB,CAE7B,GAAiB,gBAANtd,GAGT,MAAOxoB,GAAKi+C,IAFZj+C,GAAKi+C,MAAQz1B,EAAGwX,EAAGse,GAQvB,IAAK,GADD/M,GAAMvxC,EAAKwxC,aAAa1L,GACnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B,GAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAEhC,IAAIm0C,EAAO,CACT,GAAiB,gBAANjpB,GAcT,MAAOipB,GAAMwM,IAbbxM,GAAMwM,MAAQz1B,EAAGwX,EAAGse,GAEhB7M,EAAME,QAEHF,EAAMyK,UAAWzK,EAAMyK,QAAQkC,KAClC4B,EAAYvO,EAAO,WAGrBA,EAAMyK,QAAQqC,YAAY/1B,EAAGwX,EAAGse,IAGlCt+C,EAAKg1C,MAAM,MAAOvD,EAAM+G,MAO9B,MAAOx4C,IAaTi1C,KAAKr0C,UAAU49C,YAAc,SAASh2B,EAAGwX,EAAGse,EAAGxY,GAC7C,GAAI9lC,GAAOa,IAGX,KAAKb,EAAKsxC,UACR,MAAOtxC,EAIT,IAAoB,WAAhBA,EAAKo2C,OAQP,MAPAp2C,GAAKqiB,OAAOvgB,MACVqU,MAAO,cACP0hC,OAAQ,WACN73C,EAAKw+C,YAAYh2B,EAAGwX,EAAGse,EAAGxY,MAIvB9lC,CAQT,IAJAggC,EAAkB,gBAANA,GAAkBhgC,EAAKk+C,aAAa,GAAKle,EACrDse,EAAkB,gBAANA,GAAkBt+C,EAAKk+C,aAAa,GAAKI,EAGnC,mBAAPxY,GAAoB,CAE7B,GAAiB,gBAANtd,GAGT,MAAOxoB,GAAKk+C,YAFZl+C,GAAKk+C,cAAgB11B,EAAGwX,EAAGse,GAQ/B,IAAK,GADD/M,GAAMvxC,EAAKwxC,aAAa1L,GACnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAAK,CAE/B,GAAIm0C,GAAQzxC,EAAK0xC,WAAWH,EAAIj0C,GAEhC,IAAIm0C,EAAO,CACT,GAAiB,gBAANjpB,GAmBT,MAAOipB,GAAMyM,YAlBbzM,GAAMyM,cAAgB11B,EAAGwX,EAAGse,GAExB7M,EAAME,QAEHF,EAAMyK,UAEJzK,EAAMwM,OACTxM,EAAMwM,KAAOj+C,EAAKi+C,OAAS,EAAG,GAAG,KAGnC+B,EAAYvO,EAAO,YAGrBA,EAAMyK,QAAQ2C,eAAer2B,EAAGwX,EAAGse,IAGrCt+C,EAAKg1C,MAAM,cAAevD,EAAM+G,MAOtC,MAAOx4C,IA2BTi1C,KAAKr0C,UAAUq/C,WAAa,WAC1B,GAEI/iD,GAAG4oC,EAAI2L,EAFPzxC,EAAOa,KACPgH,EAAO1E,SAIX,KAAKnD,EAAKsxC,UACR,MAAOtxC,EAIT,IAAoB,IAAhB6H,EAAKhK,OAEP,MAAOmC,GAAK++C,WACP,IAAoB,IAAhBl3C,EAAKhK,OAAc,CAC5B,GAAuB,gBAAZgK,GAAK,GAmBd,MADA4pC,GAAQzxC,EAAK0xC,WAAWj+B,SAAS5L,EAAK,GAAI,KACnC4pC,EAAQA,EAAMsN,YAAc/+C,EAAK++C,WAlBxC7hD,GAAI2K,EAAK,GAGS,mBAAPi+B,KACT9lC,EAAK++C,aACHC,eAA4C,mBAArB9hD,GAAE8hD,eAAiC9hD,EAAE8hD,eAAiBh/C,EAAKkgD,gBAClFjB,eAA4C,mBAArB/hD,GAAE+hD,eAAiC/hD,EAAE+hD,eAAiBj/C,EAAKmgD,gBAClFjB,cAA0C,mBAApBhiD,GAAEgiD,cAAgChiD,EAAEgiD,cAAgBl/C,EAAKogD,eAC/EjB,cAA0C,mBAApBjiD,GAAEiiD,cAAgCjiD,EAAEiiD,cAAgBn/C,EAAKqgD,eAC/EjB,YAAsC,mBAAlBliD,GAAEkiD,YAA8BliD,EAAEkiD,YAAcp/C,EAAKsgD,aACzEjB,aAAwC,mBAAnBniD,GAAEmiD,aAA+BniD,EAAEmiD,aAAer/C,EAAKugD,cAC5EjB,YAAsC,mBAAlBpiD,GAAEoiD,YAA8BpiD,EAAEoiD,YAAct/C,EAAKwgD,aACzEjB,cAA0C,mBAApBriD,GAAEqiD,cAAgCriD,EAAEqiD,cAAgBv/C,EAAKygD,qBAQ5D,KAAhB54C,EAAKhK,SACdX,EAAI2K,EAAK,GACTi+B,EAAKryB,SAAS5L,EAAK,GAAI,IAKzB,KAAK,GADD0pC,GAAMvxC,EAAKwxC,aAAa1L,GACnBxoC,EAAE,EAAGA,EAAEi0C,EAAI1zC,OAAQP,IAG1B,GAFAm0C,EAAQzxC,EAAK0xC,WAAWH,EAAIj0C,IAEjB,CAET,GAAIojD,GAAKjP,EAAMsN,WACf2B,IACE1B,eAA4C,mBAArB9hD,GAAE8hD,eAAiC9hD,EAAE8hD,eAAiB0B,EAAG1B,eAChFC,eAA4C,mBAArB/hD,GAAE+hD,eAAiC/hD,EAAE+hD,eAAiByB,EAAGzB,eAChFC,cAA0C,mBAApBhiD,GAAEgiD,cAAgChiD,EAAEgiD,cAAgBwB,EAAGxB,cAC7EC,cAA0C,mBAApBjiD,GAAEiiD,cAAgCjiD,EAAEiiD,cAAgBuB,EAAGvB,cAC7EC,YAAsC,mBAAlBliD,GAAEkiD,YAA8BliD,EAAEkiD,YAAcsB,EAAGtB,YACvEC,aAAwC,mBAAnBniD,GAAEmiD,aAA+BniD,EAAEmiD,aAAeqB,EAAGrB,aAC1EC,YAAsC,mBAAlBpiD,GAAEoiD,YAA8BpiD,EAAEoiD,YAAcoB,EAAGpB,YACvEC,cAA0C,mBAApBriD,GAAEqiD,cAAgCriD,EAAEqiD,cAAgBmB,EAAGnB;CAI/E,IAAIoB,GAASlP,EAAMyK,OACfyE,IACFA,EAAO3B,eAAiB0B,EAAG1B,eAC3B2B,EAAO1B,eAAiByB,EAAGzB,eAC3B0B,EAAOzB,cAAgBwB,EAAGxB,cAC1ByB,EAAOxB,cAAgBuB,EAAGvB,cAC1BwB,EAAOvB,YAAcsB,EAAGtB,YACxBuB,EAAOtB,aAAeqB,EAAGrB,aACzBsB,EAAOrB,YAAcoB,EAAGpB,YACxBqB,EAAOpB,cAAgBmB,EAAGnB,gBAGrB9N,EAAMwM,OACTxM,EAAMwM,KAAOj+C,EAAKi+C,OAAS,EAAG,GAAG,KAInC+B,EAAYvO,EAAO,YAKzB,MAAOzxC,IAWTo4C,MAAMx3C,UAAUF,KAAO,SAAU25B,GAC/B,MAAO,YACL,GAAIr6B,GAAOa,KACPuI,EAASpJ,EAAK2O,OAGlB3O,GAAKk+C,aAAe90C,EAAO80C,aAC3Bl+C,EAAK8+C,QAAU11C,EAAO01C,QACtB9+C,EAAKi+C,KAAO70C,EAAO60C,KACnBj+C,EAAK++C,YAAc31C,EAAO21C,YAG1B1kB,EAAOz8B,KAAKiD,MAGRb,EAAK8+C,QACP11C,EAAO+0C,OAAOn+C,EAAK8+C,SACV9+C,EAAKi+C,MACd70C,EAAOi1C,IAAIr+C,EAAKi+C,KAAK,GAAIj+C,EAAKi+C,KAAK,GAAIj+C,EAAKi+C,KAAK,GAAIj+C,EAAKw4C,OAG7DJ,MAAMx3C,UAAUF,MAOnB03C,MAAMx3C,UAAUwsC,MAAQ,SAAU/S,GAChC,MAAO,YACL,GAAIr6B,GAAOa,KACPuI,EAASpJ,EAAK2O,OAQlB,OALA3O,GAAKk+C,aAAe90C,EAAO80C,aAC3Bl+C,EAAKi+C,KAAO70C,EAAO60C,KACnBj+C,EAAK++C,YAAc31C,EAAO21C,YAGnB1kB,EAAOz8B,KAAKiD,QAEpBu3C,MAAMx3C,UAAUwsC,MAUnB,IAAI4S,GAAc,SAASvO,EAAOjyC,GAChCA,EAAOA,GAAQ,UAGF,YAATA,GACFiyC,EAAMyK,QAAU9L,OAAOljC,IAAI0zC,eAC3BnP,EAAMyK,QAAQ8C,eAAiBvN,EAAMsN,YAAYC,eACjDvN,EAAMyK,QAAQ+C,eAAiBxN,EAAMsN,YAAYE,eACjDxN,EAAMyK,QAAQgD,cAAgBzN,EAAMsN,YAAYG,cAChDzN,EAAMyK,QAAQiD,cAAgB1N,EAAMsN,YAAYI,cAChD1N,EAAMyK,QAAQkD,YAAc3N,EAAMsN,YAAYK,YAC9C3N,EAAMyK,QAAQmD,aAAe5N,EAAMsN,YAAYM,aAC/C5N,EAAMyK,QAAQoD,YAAc7N,EAAMsN,YAAYO,YAC9C7N,EAAMyK,QAAQqD,cAAgB9N,EAAMsN,YAAYQ,cAChD9N,EAAMyK,QAAQqC,YAAY9M,EAAMwM,KAAK,GAAIxM,EAAMwM,KAAK,GAAIxM,EAAMwM,KAAK,IACnExM,EAAMyK,QAAQ2C,eAAepN,EAAMyM,aAAa,GAAIzM,EAAMyM,aAAa,GAAIzM,EAAMyM,aAAa,MAE9FzM,EAAMyK,QAAU9L,OAAOljC,IAAI6yC,qBAC3BtO,EAAMyK,QAAQkC,IAAIp4C,MAAQyrC,EAAMqN,SAGlCrN,EAAMyK,QAAQ7H,QAAQ5C,EAAME,OAGvBF,EAAMkD,SACTlD,EAAM9iC,QAAQsrC,MAAMxI,EAAM+G,KAAK,GAAMV,KAAKrG,EAAM+G,WAKnD56C,KAAKiD,KAAuB,mBAAXjB,QAAyBA,OAAyB,mBAATI,MAAuBA,KAAyB,mBAAXD,QAAyBA,gBAErHwG,GAAG,SAASlJ,EAAQU,EAAOJ,GAYjC,QAASkjD,KACL,KAAM,IAAIrjD,OAAM,mCAEpB,QAASsjD,KACL,KAAM,IAAItjD,OAAM,qCAsBpB,QAASujD,GAAWC,GAChB,GAAIC,IAAqB79C,WAErB,MAAOA,YAAW49C,EAAK,EAG3B,KAAKC,IAAqBJ,IAAqBI,IAAqB79C,WAEhE,MADA69C,GAAmB79C,WACZA,WAAW49C,EAAK,EAE3B,KAEI,MAAOC,GAAiBD,EAAK,GAC/B,MAAMnkD,GACJ,IAEI,MAAOokD,GAAiBrjD,KAAK,KAAMojD,EAAK,GAC1C,MAAMnkD,GAEJ,MAAOokD,GAAiBrjD,KAAKiD,KAAMmgD,EAAK,KAMpD,QAASE,GAAgBC,GACrB,GAAIC,IAAuBxsB,aAEvB,MAAOA,cAAausB,EAGxB,KAAKC,IAAuBN,IAAwBM,IAAuBxsB,aAEvE,MADAwsB,GAAqBxsB,aACdA,aAAausB,EAExB,KAEI,MAAOC,GAAmBD,GAC5B,MAAOtkD,GACL,IAEI,MAAOukD,GAAmBxjD,KAAK,KAAMujD,GACvC,MAAOtkD,GAGL,MAAOukD,GAAmBxjD,KAAKiD,KAAMsgD,KAYjD,QAASE,KACAC,GAAaC,IAGlBD,GAAW,EACPC,EAAa1jD,OACb6F,EAAQ69C,EAAathC,OAAOvc,GAE5B89C,GAAa,EAEb99C,EAAM7F,QACN4jD,KAIR,QAASA,KACL,IAAIH,EAAJ,CAGA,GAAIpsB,GAAU6rB,EAAWM,EACzBC,IAAW,CAGX,KADA,GAAIxiC,GAAMpb,EAAM7F,OACVihB,GAAK,CAGP,IAFAyiC,EAAe79C,EACfA,OACS89C,EAAa1iC,GACdyiC,GACAA,EAAaC,GAAYE,KAGjCF,IAAa,EACb1iC,EAAMpb,EAAM7F,OAEhB0jD,EAAe,KACfD,GAAW,EACXJ,EAAgBhsB,IAiBpB,QAASysB,GAAKX,EAAKjxB,GACflvB,KAAKmgD,IAAMA,EACXngD,KAAKkvB,MAAQA,EAYjB,QAAS6xB,MAhKT,GAOIX,GACAG,EARAzhD,EAAU5B,EAAOJ,YAgBpB,WACG,IAEQsjD,EADsB,kBAAf79C,YACYA,WAEAy9C,EAEzB,MAAOhkD,GACLokD,EAAmBJ,EAEvB,IAEQO,EADwB,kBAAjBxsB,cACcA,aAEAksB,EAE3B,MAAOjkD,GACLukD,EAAqBN,KAuD7B,IAEIS,GAFA79C,KACA49C,GAAW,EAEXE,GAAa,CAyCjB7hD,GAAQ8xB,SAAW,SAAUuvB,GACzB,GAAIn5C,GAAO,GAAI0T,OAAMpY,UAAUtF,OAAS,EACxC,IAAIsF,UAAUtF,OAAS,EACnB,IAAK,GAAIP,GAAI,EAAGA,EAAI6F,UAAUtF,OAAQP,IAClCuK,EAAKvK,EAAI,GAAK6F,UAAU7F,EAGhCoG,GAAM5B,KAAK,GAAI6/C,GAAKX,EAAKn5C,IACJ,IAAjBnE,EAAM7F,QAAiByjD,GACvBP,EAAWU,IASnBE,EAAK/gD,UAAU8gD,IAAM,WACjB7gD,KAAKmgD,IAAI55C,MAAM,KAAMvG,KAAKkvB,QAE9BpwB,EAAQoS,MAAQ,UAChBpS,EAAQkiD,SAAU,EAClBliD,EAAQgV,OACRhV,EAAQmiD,QACRniD,EAAQupB,QAAU,GAClBvpB,EAAQ45B,YAIR55B,EAAQ8vC,GAAKmS,EACbjiD,EAAQoiD,YAAcH,EACtBjiD,EAAQ65C,KAAOoI,EACfjiD,EAAQgwC,IAAMiS,EACdjiD,EAAQqiD,eAAiBJ,EACzBjiD,EAAQsiD,mBAAqBL,EAC7BjiD,EAAQmX,KAAO8qC,EAEfjiD,EAAQuiD,QAAU,SAAU70C,GACxB,KAAM,IAAI7P,OAAM,qCAGpBmC,EAAQwiD,IAAM,WAAc,MAAO,KACnCxiD,EAAQyiD,MAAQ,SAAU3H,GACtB,KAAM,IAAIj9C,OAAM,mCAEpBmC,EAAQ0iD,MAAQ,WAAa,MAAO,SAE9Bj6C,GAAG,SAAS/K,EAAQU,EAAOJ,IACjC,SAAWiC,GAaX,YAyBA,SAAS0iD,GAAUC,EAAa/xC,GAc5B,QAASgyC,KAKL,MAJKhyC,GAAOiyC,aACRxwC,QAAQ9N,MAAM,qBAAuBqM,EAAOhR,KAAO,YAGnDkjD,GACAA,EAAcC,oBACdD,EAAcE,SAEV5iD,EAAK6iD,mBACLC,IAEG9iD,IAGX+iD,EAAa,WACL/iD,EAAK6iD,mBACLC,MAID9iD,GAGX,QAAS+iD,GAAaC,GACdA,IACAxyC,EAAOwyC,aAAe,WAClBA,IACAA,EAAexyC,EAAOwyC,aAAe,MAI7C,IAAIC,GAAW,GAAIC,GAAgBX,EAAa/xC,EAEhDkyC,GAAgB,GAAIO,GAASV,EAAa/xC,GAC1CkyC,EAAcE,SAETpyC,EAAOiyC,aACRxwC,QAAQ9N,MAAM,4BAA6Bu+C,EAAchoC,YAAYrN,KAAM,mBAAoBmD,EAAOhR,MAI9G,QAAS2jD,GAAcrgC,GAmBnB,QAASb,GAAUmhC,GACf,IAAK,GAAI/3C,KAAQq3C,GACT1iD,IACAA,EAAKqL,GAAQq3C,EAAcr3C,IAG3Bg4C,IACAA,EAAUh4C,GAAQq3C,EAAcr3C,GAIxC,IAAIi4C,GAAOZ,EAAcY,IAEzB,KAAKA,EAAM,CACP,IAAIF,EAGA,KAAM,mBAFNV,GAAcY,KAAOA,EAAOF,EAMpC,GAAItgC,EAAU,CACV,GAAIk1B,GAAMuL,EAAIC,gBAAgBF,EAC9BxgC,GAASk1B,GAGTsL,IAAS9yC,EAAOiyC,aAChBxwC,QAAQ9N,MAAMm/C,EAAK9jD,KAAM,KAAMikD,EAAYH,EAAK90B,OAG/Che,EAAOkzC,iBAIZC,EAAW,SAASC,GAChB,GAAIC,KACJA,GAAUrzC,EAAOhR,KAAO,QAAUokD,EAClCE,EAAYC,MAAMF,KAvD1B,IAAKnB,EACD,MAAOzwC,SAAQ3B,KAAK0zC,EAIxB,IAAIX,GAAYxiD,IAEX2P,GAAOiyC,aACRxwC,QAAQ3B,KAAK,qBAAuBE,EAAOhR,KAAO,YAGlC,QAAhBgR,EAAOhR,KACPkjD,EAAcvT,KAAKltB,IAEnBygC,EAAcvT,OACdltB,KA6CR,QAASgiC,KACL,MAAKvB,IAILA,EAAczI,aAETzpC,EAAOiyC,aACRxwC,QAAQ9N,MAAM,uBANP8N,QAAQ3B,KAAK0zC,GAU5B,QAASE,KACL,MAAKxB,IAKLA,EAAc3N,cAETvkC,EAAOiyC,aACRxwC,QAAQ9N,MAAM,wBAPP8N,QAAQ3B,KAAK0zC,GAW5B,QAASG,GAASC,GACdC,aAAY,GAAIC,iBAAiBC,cAAcH,IAGnD,QAAST,GAAW7gC,EAAU0hC,GAkC1B,QAASC,GAAmBC,GACxB,GAAIpB,GAAOC,EAAIC,gBAAgB,GAAImB,OAAMD,EAAUz9C,WAC/C,mCAAqCy9C,EAAUr3C,KAAO,eAEtD7N,KAAM,4BAGNolD,EAAS,GAAIC,QAAOvB,EAExB,OADAC,GAAIuB,gBAAgBxB,GACbsB,EA1CX,IAAK9hC,EACD,KAAM,2CAGV,IAAIwgC,GAAOkB,EAAiBA,EAAelB,MAAQZ,OAAqBY,IAExE,KAAKA,EAQD,MAPK9yC,GAAOiyC,aACRxwC,QAAQ3B,KAAK,gDAGjBlN,YAAW,WACPugD,EAAW7gC,EAAU0hC,IACtB,IAIP,IAAsB,mBAAXK,SAA2BjzB,UAAUmzB,gBAQzC,CACH,GAAIC,GAAS,GAAIC,WACjBD,GAAOT,cAAcjB,GACrB0B,EAAOrO,OAAS,SAASxgC,GACrB2M,EAAS3M,EAAMlR,OAAOgP,aAZmC,CAC7D,GAAIixC,GAAYT,EAAmBN,EAEnCe,GAAUC,UAAY,SAAShvC,GAC3B2M,EAAS3M,EAAM4f,OAGnBmvB,EAAUb,YAAYf,IAsB9B,QAASR,KACL1/C,WAAW,WACP+/C,EAAcnjD,EAAKolD,qBACpBplD,EAAK6iD,mBAnMZ,IAAKN,EACD,KAAM,2BAGV/xC,GAASA,IACLhR,KAAM,SAGVgR,EAAS,GAAI60C,GAAuB9C,EAAa/xC,EAGjD,IA6LIkyC,GA7LA1iD,EAAOa,KA2LPmjD,EAAU,qDAAuDxzC,EAAOhR,KAAO,aAI/E8lD,GASA9C,eAAgBA,EAchBW,cAAeA,EAUfc,eAAgBA,EAUhBC,gBAAiBA,EAUjBnB,aAAcA,EAUdwC,qBAAsB,SAASC,EAAc1iC,GACzC,GAA4B,mBAAjB0iC,GACP,KAAM,2BAGV,IAA4B,gBAAjBA,GACP,KAAM,gCAMV,OAHAxlD,GAAK6iD,kBAAoB2C,EACzBxlD,EAAKolD,mBAAqBtiC,GAAY,cAGlCsiC,mBAAoB,SAAStiC,GACzB9iB,EAAKolD,mBAAqBtiC,KAatC6/B,kBAAmB,WACf,MAAKD,IAILA,EAAcC,yBAETnyC,EAAOiyC,aACRxwC,QAAQ9N,MAAM,gCANP8N,QAAQ3B,KAAK0zC,IAuB5ByB,QAAS,WACL,MAAK/C,GAIEA,EAAcY,KAHVrxC,QAAQ3B,KAAK0zC,IAmB5BL,WAAYA,EAYZ+B,MAAO,WACH,MAAKhD,GAIEa,EAAIC,gBAAgBd,EAAcY,MAH9BrxC,QAAQ3B,KAAK0zC,IAgB5B2B,KAAM,SAASnyC,GACX,MAAKkvC,OAILkD,GAAmBlD,EAAcY,KAAM9vC,GAH5BvB,QAAQ3B,KAAK0zC,IAgB5B6B,YAAa,SAAS/iC,GAClB,MAAK4/B,OAILJ,GAAUuD,YAAYr1C,EAAOhR,KAAMsjB,GAHxB7Q,QAAQ3B,KAAK0zC,IAqB5B8B,sBAAuB,SAASC,GAC5Bv1C,EAAOw1C,gBAGP,KAAK,GADDnoD,GAASkoD,EAAkBloD,OACtBP,EAAI,EAAGA,EAAIO,EAAQP,IACxBkT,EAAOw1C,cAAclkD,MACjB82C,SAAUt7C,EACV2oD,MAAOF,EAAkBzoD,MAkBrCgmD,KAAM,KAYN4C,WAAY,EAYZnS,WAAY,EAYZK,OAAQ,KAYR+R,KAAM,KAGV,KAAKtlD,KAED,MADAb,GAAOslD,EACAA,CAIX,KAAK,GAAI7oC,KAAQ6oC,GACbzkD,KAAK4b,GAAQ6oC,EAAa7oC,EAK9B,OAFAzc,GAAOa,KAEAykD,EAuIX,QAASD,GAAuB9C,EAAa/xC,GA6CzC,MA5CIA,GAAO41C,eAAiB51C,EAAOhR,OAC3BgR,EAAO41C,eAAiBC,GAAkB71C,EAAO41C,eAAiBE,EAClE91C,EAAOhR,KAAO,QACPgR,EAAO41C,eAAiBG,EAC/B/1C,EAAOhR,KAAO,MACPgR,EAAO41C,eAAiBI,EAC/Bh2C,EAAOhR,KAAO,QACPgR,EAAO41C,eAAiBK,IAC3BlE,EAAYmE,iBAAiB7oD,QAAU0kD,EAAYoE,iBAAiB9oD,OACpE2S,EAAOhR,KAAO,QACP+iD,EAAYmE,iBAAiB7oD,SAAW0kD,EAAYoE,iBAAiB9oD,OAC5E2S,EAAOhR,KAAO,SACN+iD,EAAYmE,iBAAiB7oD,QAAU0kD,EAAYoE,iBAAiB9oD,SAC5E2S,EAAOhR,KAAO,WAOS,mBAAxBinD,IAAgE,mBAAlBG,gBAAiC,eAAiBA,eAAchmD,YAChH4P,EAAOq2C,WACRr2C,EAAOq2C,SAAW,cAGjBr2C,EAAOhR,OACRgR,EAAOhR,KAAOgR,EAAOq2C,SAASn3C,MAAM,KAAK,KAGxCc,EAAOs2C,eAMXt2C,EAAOhR,OACJgR,EAAOq2C,WACPr2C,EAAOhR,KAAOgR,EAAOq2C,SAASn3C,MAAM,KAAK,IAExCc,EAAOhR,OACRgR,EAAOhR,KAAO,UAIfgR,EAqBX,QAAS0yC,GAAgBX,EAAa/xC,GAClC,GAAIu2C,EA0DJ,QAtDIC,GAAYC,GAAUC,KAGtBH,EAAWP,GAGc,mBAAlBI,gBAAiC,eAAiBA,eAAchmD,YAAcomD,IACrFD,EAAWN,GAIK,UAAhBj2C,EAAOhR,OAAqBwnD,GAAYE,KACxCH,EAAWV,GAIK,QAAhB71C,EAAOhR,OACPunD,EAAWR,GAIK,WAAhB/1C,EAAOhR,OACPunD,EAAWT,GAGXa,KAA+BJ,IAAaT,GAAkBS,IAAaR,GAAwC,mBAAlBK,gBAAiC,eAAiBA,eAAchmD,YAC5J2hD,EAAYoE,gBAAkBpE,EAAYoE,iBAAiB9oD,QAAY0kD,EAAYmE,gBAAkBnE,EAAYmE,iBAAiB7oD,UAE/G,UAAhB2S,EAAOhR,KACsC,kBAAlConD,eAAcQ,iBAAkCR,cAAcQ,gBAAgB,gBACrFL,EAAWN,GAK8B,kBAAlCG,eAAcQ,iBAAkCR,cAAcQ,gBAAgB,gBACrFL,EAAWN,IAMvBj2C,EAAO41C,eACPW,EAAWv2C,EAAO41C,cAGlB7D,YAAuBhnC,QAASgnC,EAAY1kD,SAC5CkpD,EAAWM,IAGV72C,EAAOiyC,aAAiBsE,GAAcA,EAAS15C,MAChD4E,QAAQ9N,MAAM,sBAAuB4iD,EAAS15C,MAAQ05C,EAASrsC,YAAYrN,MAGxE05C,EAiCX,QAASO,GAAW/E,GAUhB1hD,KAAK0mD,UAAY,SAASC,GAClBA,IACAjF,EAAciF,IAgBtB3mD,KAAK4mD,WACDC,OAAO,EACPC,OAAO,GAUX9mD,KAAK2hD,eAAiB,WAClB,GACI4D,GADAqB,EAAY5mD,KAAK4mD,UAEjBZ,EAAWhmD,KAAKgmD,WAChBa,MAAO,KACPC,MAAO,KACPC,IAAK,KAaT,IAV+B,kBAApBH,GAAUC,OAAwBP,KAA+B5E,EAAYmE,iBAAmBnE,EAAYmE,iBAAiB7oD,SAEpI4pD,EAAUC,OAAQ,GAGS,kBAApBD,GAAUE,OAAwBR,KAA+B5E,EAAYoE,iBAAmBpE,EAAYoE,iBAAiB9oD,SAEpI4pD,EAAUE,OAAQ,IAGjBF,EAAUC,QAAUD,EAAUE,MAC/B,KAAM,qDAwBV,IArBMF,EAAUC,QACZtB,EAAe,KACgB,kBAApBqB,GAAUC,QACjBtB,EAAeqB,EAAUC,OAG7B7mD,KAAKgnD,cAAgB,GAAIvF,GAAUC,GAC/B/iD,KAAM,QACN0mD,WAAYrlD,KAAKqlD,WACjBnS,WAAYlzC,KAAKkzC,WACjB+T,sBAAuBjnD,KAAKinD,uBAAyB,EACrDrF,YAAa5hD,KAAK4hD,YAClB2D,aAAcA,EACdS,SAAUA,EAASa,QAGlBD,EAAUE,OACX9mD,KAAKgnD,cAAcrF,kBAIrBiF,EAAUE,MAAO,CACnBvB,EAAe,KACgB,kBAApBqB,GAAUE,QACjBvB,EAAeqB,EAAUE,MAG7B,IAAII,GAAYxF,CAEhB,IAAI4E,KAAiCM,EAAUC,OAAoC,kBAApBD,GAAUC,MAAsB,CAC3F,GAAIM,GAAazF,EAAYoE,iBAAiB,EAExC/0B,WAAUmzB,iBACZgD,EAAY,GAAIE,GAChBF,EAAUG,SAASF,GAEf5B,GAAgBA,IAAiBC,IAEjCD,EAAeK,IAGnBsB,EAAY,GAAIE,IAAaD,IAIrCnnD,KAAKsnD,cAAgB,GAAI7F,GAAUyF,GAC/BvoD,KAAM,QACNmoD,MAAO9mD,KAAK8mD,MACZS,OAAQvnD,KAAKunD,OACbC,cAAexnD,KAAKwnD,eAAiB,GACrC5F,YAAa5hD,KAAK4hD,YAClB2D,aAAcA,EACdS,SAAUA,EAASc,QAGlBF,EAAUC,OACX7mD,KAAKsnD,cAAc3F,iBAI3B,GAAMiF,EAAUC,OAAWD,EAAUE,MAAO,CACxC,GAAI3nD,GAAOa,IACPsmD,MACAnnD,EAAK6nD,cAAgB,KACrB7nD,EAAKmoD,cAAc3F,kBAEnBxiD,EAAKmoD,cAAcpF,aAAa,WAC5B/iD,EAAK6nD,cAAc9E,aAAa,WAE5B/iD,EAAKmoD,cAAc3F,iBACnBxiD,EAAK6nD,cAAcrF,qBAM7BiF,EAAUG,MACZxB,EAAe,KACc,kBAAlBqB,GAAUG,MACjBxB,EAAeqB,EAAUG,KAE7B/mD,KAAKynD,YAAc,GAAIhG,GAAUC,GAC7B/iD,KAAM,MACN+oD,UAAW1nD,KAAK0nD,WAAa,IAC7BC,QAAS3nD,KAAK2nD,SAAW,GACzB/F,YAAa5hD,KAAK4hD,YAClB2D,aAAcA,EACdS,SAAUA,EAASe,MAEvB/mD,KAAKynD,YAAY9F,mBAgBzB3hD,KAAKsiD,cAAgB,SAASrgC,GAC1BA,EAAWA,GAAY,aAEnBjiB,KAAKgnD,eACLhnD,KAAKgnD,cAAc1E,cAAc,SAASsF,GACtC3lC,EAAS2lC,EAAS,WAItB5nD,KAAKsnD,eACLtnD,KAAKsnD,cAAchF,cAAc,SAASsF,GACtC3lC,EAAS2lC,EAAS,WAItB5nD,KAAKynD,aACLznD,KAAKynD,YAAYnF,cAAc,SAASsF,GACpC3lC,EAAS2lC,EAAS,UAY9B5nD,KAAKojD,eAAiB,WACdpjD,KAAKgnD,eACLhnD,KAAKgnD,cAAc5D,iBAGnBpjD,KAAKsnD,eACLtnD,KAAKsnD,cAAclE,iBAGnBpjD,KAAKynD,aACLznD,KAAKynD,YAAYrE,kBAWzBpjD,KAAKqjD,gBAAkB,WACfrjD,KAAKgnD,eACLhnD,KAAKgnD,cAAc3D,kBAGnBrjD,KAAKsnD,eACLtnD,KAAKsnD,cAAcjE,kBAGnBrjD,KAAKynD,aACLznD,KAAKynD,YAAYpE,mBAmBzBrjD,KAAK4kD,QAAU,SAAS3iC,GACpB,GAAI8lB,KAkBJ,OAhBI/nC,MAAKgnD,gBACLjf,EAAO8e,MAAQ7mD,KAAKgnD,cAAcpC,WAGlC5kD,KAAKsnD,gBACLvf,EAAO+e,MAAQ9mD,KAAKsnD,cAAc1C,WAGlC5kD,KAAKynD,cACL1f,EAAOgf,IAAM/mD,KAAKynD,YAAY7C,WAG9B3iC,GACAA,EAAS8lB,GAGNA,GAeX/nC,KAAK8iD,WAAa,SAAS7gC,GA0BvB,QAAS6gC,GAAWL,EAAMoF,GACtB,GAAsB,mBAAX7D,QAAwB,CAC/B,GAAIK,GAAYT,EAAmB,SAAkBL,GACjDC,aAAY,GAAIC,iBAAiBC,cAAcH,KAGnDc,GAAUC,UAAY,SAAShvC,GAC3BuyC,EAAWvyC,EAAM4f,OAGrBmvB,EAAUb,YAAYf,OACnB,CACH,GAAI0B,GAAS,GAAIC,WACjBD,GAAOT,cAAcjB,GACrB0B,EAAOrO,OAAS,SAASxgC,GACrBuyC,EAAWvyC,EAAMlR,OAAOgP,UAKpC,QAASwwC,GAAmBC,GACxB,GAOI1M,GAPAsL,EAAOC,EAAIC,gBAAgB,GAAImB,OAAMD,EAAUz9C,WAC/C,mCAAqCy9C,EAAUr3C,KAAO,eAEtD7N,KAAM,4BAGNolD,EAAS,GAAIC,QAAOvB,EAExB,IAAmB,mBAARC,GACPvL,EAAMuL,MACH,CAAA,GAAyB,mBAAdoF,WAGd,KAAM,qCAFN3Q,GAAM2Q,UAKV,MADA3Q,GAAI8M,gBAAgBxB,GACbsB,EA9DX/jD,KAAK4kD,QAAQ,SAASnC,GACdA,EAAKoE,OAASpE,EAAKqE,MACnBhE,EAAWL,EAAKoE,MAAO,SAASkB,GAC5BjF,EAAWL,EAAKqE,MAAO,SAASkB,GAC5B/lC,GACI4kC,MAAOkB,EACPjB,MAAOkB,QAIZvF,EAAKoE,MACZ/D,EAAWL,EAAKoE,MAAO,SAASkB,GAC5B9lC,GACI4kC,MAAOkB,MAGRtF,EAAKqE,OACZhE,EAAWL,EAAKqE,MAAO,SAASkB,GAC5B/lC,GACI6kC,MAAOkB,SAsD3BhoD,KAAKioD,YAAc,WACfxG,EAAUwG,aACNpB,MAAO7mD,KAAKgnD,cACZF,MAAO9mD,KAAKsnD,cACZP,IAAK/mD,KAAKynD,eAgBlBznD,KAAK8kD,KAAO,SAAS99C,GACjBA,EAAOA,IACH6/C,OAAO,EACPC,OAAO,EACPC,KAAK,GAGH//C,EAAK6/C,OAAS7mD,KAAKgnD,eACrBhnD,KAAKgnD,cAAclC,KAA2B,gBAAf99C,GAAK6/C,MAAqB7/C,EAAK6/C,MAAQ,IAGpE7/C,EAAK8/C,OAAS9mD,KAAKsnD,eACrBtnD,KAAKsnD,cAAcxC,KAA2B,gBAAf99C,GAAK8/C,MAAqB9/C,EAAK8/C,MAAQ,IAEpE9/C,EAAK+/C,KAAO/mD,KAAKynD,aACnBznD,KAAKynD,YAAY3C,KAAyB,gBAAb99C,GAAK+/C,IAAmB//C,EAAK+/C,IAAM,KAgQ5E,QAASnE,GAAYsF,GACjB,GAAIC,GAAI,IACJC,GAAS,QAAS,KAAM,KAAM,KAAM,KACxC,IAAc,IAAVF,EACA,MAAO,SAEX,IAAIzrD,GAAImW,SAASjM,KAAK0hD,MAAM1hD,KAAK6K,IAAI02C,GAASvhD,KAAK6K,IAAI22C,IAAK,GAC5D,QAAQD,EAAQvhD,KAAK2hD,IAAIH,EAAG1rD,IAAI8rD,YAAY,GAAK,IAAMH,EAAM3rD,GAUjE,QAASsoD,GAAmByD,EAAM71C,GAC9B,IAAK61C,EACD,KAAM,0BAGV,KAAKA,EAAK7pD,KACN,IACI6pD,EAAK7pD,KAAO,aACd,MAAO3C,IAGb,GAAIysD,IAAiBD,EAAK7pD,MAAQ,cAAckQ,MAAM,KAAK,EAE3D,IAAI8D,GAAYA,EAASqF,QAAQ,QAAS,EAAI,CAC1C,GAAI0wC,GAAW/1C,EAAS9D,MAAM,IAC9B8D,GAAW+1C,EAAS,GACpBD,EAAgBC,EAAS,GAG7B,GAAIC,IAAgBh2C,GAAahM,KAAK25B,MAAsB,WAAhB35B,KAAK40C,UAAyB,WAAc,IAAMkN,CAE9F,IAA0C,mBAA/B13B,WAAU63B,iBACjB,MAAO73B,WAAU63B,iBAAiBJ,EAAMG,EACrC,IAAoC,mBAAzB53B,WAAU83B,WACxB,MAAO93B,WAAU83B,WAAWL,EAAMG,EAGtC,IAAIG,GAAYjzC,SAASsb,cAAc,IACvC23B,GAAUC,KAAOrG,EAAIC,gBAAgB6F,GACrCM,EAAU1kD,OAAS,SACnB0kD,EAAUE,SAAWL,EAEf53B,UAAUmzB,kBACZ4E,EAAUG,QAAU,YACfpzC,SAASqzC,MAAQrzC,SAASszC,iBAAiBC,YAAYN,KAE3DjzC,SAASqzC,MAAQrzC,SAASszC,iBAAiBE,YAAYP,GAG5D,IAAIQ,GAAM,GAAIC,YAAW,SACrBjE,KAAMpmD,OACNsqD,SAAS,EACT7zC,YAAY,GAGhBmzC,GAAUvzC,cAAc+zC,GAEnBv4B,UAAUmzB,iBACXxB,EAAIuB,gBAAgB6E,EAAUC,MA6BtC,QAASzC,KACL,GAAID,KAAYnnD,OAAOuqD,OAAS14B,UAAUuX,UAAUtwB,QAAQ,UAAY,EACpEmuC,IAAajnD,OAAOs5B,SAAW6tB,EAC/BqD,EAA6C,mBAA1BxqD,QAAOyqD,cAE9B,IAAID,EACA,OAAO,CAGX,IAIgBE,GAAWC,EAHvBC,GADO/4B,UAAUmsB,WACVnsB,UAAUuX,WACjByhB,EAAc,GAAKzZ,WAAWvf,UAAUmsB,YACxC8M,EAAep3C,SAASme,UAAUmsB,WAAY,GAwBlD,QArBIiJ,GAAYE,KACZuD,EAAYE,EAAK9xC,QAAQ,UACzB+xC,EAAcD,EAAKG,UAAUL,EAAY,KAIxCC,EAAKE,EAAY/xC,QAAQ,SAAU,IACpC+xC,EAAcA,EAAYE,UAAU,EAAGJ,KAGtCA,EAAKE,EAAY/xC,QAAQ,SAAU,IACpC+xC,EAAcA,EAAYE,UAAU,EAAGJ,IAG3CG,EAAep3C,SAAS,GAAKm3C,EAAa,IAEtCtQ,MAAMuQ,KACND,EAAc,GAAKzZ,WAAWvf,UAAUmsB,YACxC8M,EAAep3C,SAASme,UAAUmsB,WAAY,KAG3C8M,GAAgB,GA6C3B,QAASpE,GAAoBlE,EAAa/xC,GA+QtC,QAASu6C,KACL,GAAI,UAAYxI,IACZ,IAAKA,EAAYyI,OACb,OAAO,MAER,IAAI,SAAWzI,IACdA,EAAY0I,MACZ,OAAO,CAGf,QAAO,EAxRX,GAAIjrD,GAAOa,IAOX,IALA2P,EAASA,IAELq2C,SAAU,cAGM,UAAhBr2C,EAAOhR,KAAkB,CACzB,GAAI+iD,EAAYoE,iBAAiB9oD,QAAU0kD,EAAYmE,iBAAiB7oD,OAAQ,CAC5E,GAAIqtD,EACEt5B,WAAUmzB,iBACZmG,EAAS,GAAIjD,GACbiD,EAAOhD,SAAS3F,EAAYmE,iBAAiB,KAG7CwE,EAAS,GAAIjD,GAAY1F,EAAYmE,kBAEzCnE,EAAc2I,EAGb16C,EAAOq2C,UAAYr2C,EAAOq2C,SAAS5/C,WAAWqP,cAAcuC,QAAQ,YAAa,IAClFrI,EAAOq2C,SAAWG,EAAW,aAAe,aAG5Cx2C,EAAOq2C,UAAyD,cAA7Cr2C,EAAOq2C,SAAS5/C,WAAWqP,eAAmCsb,UAAUmzB,kBAE3Fv0C,EAAOq2C,SAAW,aAW1BhmD,KAAK+hD,OAAS,WACV5iD,EAAKsjD,KAAO,IAEZ,IAAI6H,GAAgB36C,CAEfA,GAAOiyC,aACRxwC,QAAQI,IAAI,mDAAoD84C,GAGhEzI,IAEAA,EAAgB,MAGhBsE,IAAaG,MAEbgE,EAAgB,aAGyB,kBAAlCvE,eAAcQ,iBAAkC+D,EAActE,WAChED,cAAcQ,gBAAgB+D,EAActE,YACxCr2C,EAAOiyC,aACRxwC,QAAQ3B,KAAK,qDAAsD66C,EAActE,UAGrFsE,EAActE,SAA2B,UAAhBr2C,EAAOhR,KAAmB,aAAe,cAU1E,KACIkjD,EAAgB,GAAIkE,eAAcrE,EAAa4I,GACjD,MAAOtuD,GACL6lD,EAAgB,GAAIkE,eAAcrE,IAGjCqE,cAAcQ,iBAAmB,qBAAuB1E,IAAiBA,EAAc0I,kBAAkB56C,EAAOq2C,aAAc,IAC1Hr2C,EAAOiyC,aACRxwC,QAAQ3B,KAAK,qDAAsDE,EAAOq2C,WAMlFnE,EAAc2I,iBAAmB76C,EAAO66C,mBAAoB,EAG5D3I,EAAc4I,gBAAkB,SAASzuD,GACrC,IAAImD,EAAKurD,6BAAT,CAIA,IAAK1uD,EAAEk5B,OAASl5B,EAAEk5B,KAAKvH,MAAQ3xB,EAAEk5B,KAAKvH,KAAO,KAAOxuB,EAAKsjD,KASrD,YANItjD,EAAKwrD,oBACLxrD,EAAKwrD,kBAAkB,GAAI7G,UACvBnlD,KAAM2rD,EAActE,UAAY,gBAEpC7mD,EAAKwrD,kBAAoB,MAajCxrD,GAAKsjD,KAAO9yC,EAAOi7C,cAAgB5uD,EAAEk5B,KAAO,GAAI4uB,OAAM9nD,EAAEk5B,OACpDv2B,KAAM2rD,EAActE,UAAY,eAGhC7mD,EAAKwrD,oBACLxrD,EAAKwrD,kBAAkBxrD,EAAKsjD,MAC5BtjD,EAAKwrD,kBAAoB,QAIjC9I,EAAcnF,QAAU,SAAS/uC,GACxBgC,EAAOiyC,cACW,iBAAfj0C,EAAMnB,KACN4E,QAAQzD,MAAM,kGACQ,gBAAfA,EAAMnB,KACb4E,QAAQzD,MAAM,6IACQ,8BAAfA,EAAMnB,KACb4E,QAAQzD,MAAM,uQACQ,wBAAfA,EAAMnB,KACb4E,QAAQzD,MAAM,0JACQ,iBAAfA,EAAMnB,KACb4E,QAAQzD,MAAM,+EAAgFA,GAE9FyD,QAAQzD,MAAM,sBAAuBA,IAUjB,aAAxBk0C,EAAc3c,OAAgD,YAAxB2c,EAAc3c,OACpD2c,EAAcvT,QAStBuT,EAAc1gB,MAAM,MAMhBxxB,EAAOk7C,uBACPl7C,EAAOk7C,wBAGPl7C,EAAOwyC,cACPxyC,EAAOwyC,gBAcfniD,KAAKsuC,KAAO,SAASrsB,GACZ4/B,IAIL7hD,KAAK2qD,kBAAoB,SAASlI,GAC9BZ,EAAgB,KAEZ5/B,GACAA,EAASwgC,IAOW,cAAxBZ,EAAc3c,OAGd2c,EAAcvT,SAWtBtuC,KAAKo5C,MAAQ,WACJyI,GAIuB,cAAxBA,EAAc3c,OACd2c,EAAczI,SAWtBp5C,KAAKk0C,OAAS,WACV,GAAIl0C,KAAK0qD,6BAA8B,CACnC1qD,KAAK0qD,8BAA+B,CAEpC,IAAI9I,GAAcjyC,EAAOiyC,WAIzB,OAHAjyC,GAAOiyC,aAAc,EACrB5hD,KAAK+hD,cACLpyC,EAAOiyC,YAAcA,GAIpBC,GAIuB,WAAxBA,EAAc3c,OACd2c,EAAc3N,UAWtBl0C,KAAK8hD,kBAAoB,WAChBD,IAIL7hD,KAAKo5C,QAELp5C,KAAK0qD,8BAA+B,EACpC1qD,KAAKsuC,QAIT,IAAIuT,GAeA1iD,EAAOa,MAIX,QAAU8qD,KACN,GAAKjJ,EAIL,MAAIqI,QAA0B,GACrBv6C,EAAOiyC,aACRxwC,QAAQI,IAAI,kCAEhBrS,GAAKmvC,YAIT/rC,YAAWuoD,EAAQ,QAkC3B,QAASnF,GAAoBjE,EAAa/xC,GA+BtC,QAASu6C,KACL,GAAI,UAAYxI,IACZ,IAAKA,EAAYyI,OACb,OAAO,MAER,IAAI,SAAWzI,IACdA,EAAY0I,MACZ,OAAO,CAGf,QAAO,EA8BX,QAASW,GAAsBp7C,EAAQsS,GACnC,QAAS+oC,GAAkBr7C,EAAQtF,GAkB/B,QAAS4gD,GAAaC,EAAeC,GAKjC,IAAK,GAJD/3C,GAAS,GAAIg4C,cAAaD,GAC1BvrB,EAAS,EACTyrB,EAAMH,EAAcluD,OAEfP,EAAI,EAAGA,EAAI4uD,EAAK5uD,IAAK,CAC1B,GAAI82C,GAAS2X,EAAczuD,EAC3B2W,GAAO0I,IAAIy3B,EAAQ3T,GACnBA,GAAU2T,EAAOv2C,OAGrB,MAAOoW,GAGX,QAASk4C,GAAWC,EAAaC,GAO7B,IAAK,GANDxuD,GAASuuD,EAAYvuD,OAASwuD,EAAaxuD,OAE3CoW,EAAS,GAAIg4C,cAAapuD,GAE1ByuD,EAAa,EAER/kD,EAAQ,EAAGA,EAAQ1J,GACxBoW,EAAO1M,KAAW6kD,EAAYE,GAC9Br4C,EAAO1M,KAAW8kD,EAAaC,GAC/BA,GAEJ,OAAOr4C,GAGX,QAASs4C,GAAcpG,EAAM1lB,EAAQ+rB,GAEjC,IAAK,GADDN,GAAMM,EAAO3uD,OACRP,EAAI,EAAGA,EAAI4uD,EAAK5uD,IACrB6oD,EAAKsG,SAAShsB,EAASnjC,EAAGkvD,EAAOzP,WAAWz/C,IAjDpD,GAAIwqD,GAAwBt3C,EAAOs3C,sBAG/B4E,EAAcl8C,EAAOk8C,YAAY5kD,MAAM,GACvC6kD,EAAen8C,EAAOm8C,aAAa7kD,MAAM,GACzCisC,EAAavjC,EAAOujC,WACpB6Y,EAA4Bp8C,EAAOo8C,yBAET,KAA1B9E,IACA4E,EAAcZ,EAAaY,EAAaE,GACxCD,EAAeb,EAAaa,EAAcC,IAGhB,IAA1B9E,IACA4E,EAAcZ,EAAaY,EAAaE,GAwC5C,IAAIC,EAE0B,KAA1B/E,IACA+E,EAAcV,EAAWO,EAAaC,IAGZ,IAA1B7E,IACA+E,EAAcH,EAGlB,IAAII,GAAoBD,EAAYhvD,OAGhCkvD,EAAwB,GAAyB,EAApBD,EAE7B1Y,EAAS,GAAI4Y,aAAYD,GAEzB5G,EAAO,GAAI8G,UAAS7Y,EAGxBmY,GAAcpG,EAAM,EAAG,QAGvBA,EAAK+G,UAAU,EAAG,GAAyB,EAApBJ,GAAuB,GAG9CP,EAAcpG,EAAM,EAAG,QAIvBoG,EAAcpG,EAAM,GAAI,QAGxBA,EAAK+G,UAAU,GAAI,IAAI,GAGvB/G,EAAKgH,UAAU,GAAI,GAAG,GAGtBhH,EAAKgH,UAAU,GAAIrF,GAAuB,GAG1C3B,EAAK+G,UAAU,GAAInZ,GAAY,GAG/BoS,EAAK+G,UAAU,GAAiB,EAAbnZ,GAAgB,GAGnCoS,EAAKgH,UAAU,GAA4B,EAAxBrF,GAA2B,GAG9C3B,EAAKgH,UAAU,GAAI,IAAI,GAIvBZ,EAAcpG,EAAM,GAAI,QAGxBA,EAAK+G,UAAU,GAAwB,EAApBJ,GAAuB,EAM1C,KAAK,GAHDZ,GAAMY,EACNvlD,EAAQ,GACR0pC,EAAS,EACJ3zC,EAAI,EAAGA,EAAI4uD,EAAK5uD,IACrB6oD,EAAKiH,SAAS7lD,EAAOslD,EAAYvvD,IAAM,MAAS2zC,IAAS,GACzD1pC,GAAS,CAGb,OAAI2D,GACOA,GACHkpC,OAAQA,EACR+R,KAAMA,QAId9B,cACIjQ,OAAQA,EACR+R,KAAMA,IAId,IAAKa,EAKD,WAHA6E,GAAkBr7C,EAAQ,SAASulB,GAC/BjT,EAASiT,EAAKqe,OAAQre,EAAKowB,OAMnC,IAAIjB,GAAYT,EAAmBoH,EAEnC3G,GAAUC,UAAY,SAAShvC,GAC3B2M,EAAS3M,EAAM4f,KAAKqe,OAAQj+B,EAAM4f,KAAKowB,MAGvC5C,EAAIuB,gBAAgBI,EAAUmI,YAGlCnI,EAAUb,YAAY7zC,GAG1B,QAASi0C,GAAmBC,GACxB,GAAI2I,GAAY9J,EAAIC,gBAAgB,GAAImB,OAAMD,EAAUz9C,WACpD,oCAAsCy9C,EAAUr3C,KAAO,eAEvD7N,KAAM,4BAGNolD,EAAS,GAAIC,QAAOwI,EAExB,OADAzI,GAAOyI,UAAYA,EACZzI,EA8MX,QAAS0I,GAA4BzwD,GACjC,IAAI0wD,EAAJ,CAYA,GARIxC,OAA0B,IACrBv6C,EAAOiyC,aACRxwC,QAAQI,IAAI,8BAEhBm7C,EAAY/6B,aACZg7B,GAAY,IAGXA,EAED,WADAC,GAAWj7B,YAWVk7B,KACDA,GAAwB,EACpBn9C,EAAOk7C,uBACPl7C,EAAOk7C,wBAGPl7C,EAAOwyC,cACPxyC,EAAOwyC,eAIf,IAAI4K,GAAO/wD,EAAEgxD,YAAYC,eAAe,EAKxC,IAFAC,EAAYjsD,KAAK,GAAIksD,cAAaJ,IAEJ,IAA1B9F,EAA6B,CAC7B,GAAImG,GAAQpxD,EAAEgxD,YAAYC,eAAe,EACzCI,GAAapsD,KAAK,GAAIksD,cAAaC,IAGvCE,GAAmBjI,GA1evB,IAAK3D,EAAYmE,iBAAiB7oD,OAC9B,KAAM,kCAGV2S,GAASA,KAET,IAOIg9C,GAPAxtD,EAAOa,KAGPktD,KACAG,KACAT,GAAY,EACZU,EAAkB,EAGlBrG,EAAwB,CAGxBt3C,GAAO47C,eAAgB,IACvBtE,EAAwB,GAGS,IAAjCt3C,EAAOs3C,wBACPA,EAAwB,GAGvBt3C,EAAOiyC,aACRxwC,QAAQ9N,MAAM,4DAA6D2jD,GAuB/EjnD,KAAK+hD,OAAS,WACV,GAAImI,OAA0B,EAC1B,KAAM,yCAIVgD,GAAYlwD,OAASqwD,EAAarwD,OAAS,EAC3CswD,EAAkB,EAEdT,GACAA,EAAWrZ,QAAQmZ,GAMvBG,EAAwBJ,GAAW,EACnCE,GAAY,GAwLhB5sD,KAAKsuC,KAAO,SAASrsB,GAEjB2qC,GAAY,EAKZ7B,GACI7X,WAAYA,EACZ+T,sBAAuBA,EACvB8E,0BAA2BuB,EAC3BzB,YAAaqB,EACbpB,aAAwC,IAA1B7E,KAAmCoG,GAClD,SAAS9Z,EAAQ+R,GAShBnmD,EAAKsjD,KAAO,GAAIqB,OAAMwB,IAClB3mD,KAAM,cAWVQ,EAAKo0C,OAAS,GAAI4Y,aAAY7G,EAAK/R,OAAOga,YAU1CpuD,EAAKmmD,KAAOA,EAEZnmD,EAAK+zC,WAAaA,EAClB/zC,EAAKkmD,WAAaA,EAGlBlmD,EAAKnC,OAASswD,EAEVrrC,GACAA,IAGJ6qC,GAAwB,KAI3BU,EAAQC,0BACTD,EAAQC,wBAA0B,GAAID,GAAQ1Q,aAGlD,IAAIl5C,GAAU4pD,EAAQC,wBAGlBZ,EAAajpD,EAAQ8pD,wBAAwBhM,GAE7CiM,GAAqB,EAAG,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,OAmB1DtI,EAA0C,mBAAtB11C,GAAO01C,WAA6B,KAAO11C,EAAO01C,UAQ1E,IANIsI,EAAkB31C,QAAQqtC,MAAgB,IACrC11C,EAAOiyC,aACRxwC,QAAQ3B,KAAK,oCAAsCwC,KAAKC,UAAUy7C,EAAmB,KAAM,QAI/F/pD,EAAQgqD,qBACRjB,EAAc/oD,EAAQgqD,qBAAqBvI,EAAY4B,EAAuBA,OAC3E,CAAA,IAAIrjD,EAAQiqD,sBAGf,KAAM,8CAFNlB,GAAc/oD,EAAQiqD,sBAAsBxI,EAAY4B,EAAuBA,GAMnF4F,EAAWrZ,QAAQmZ,GAEdh9C,EAAO01C,aACRA,EAAasH,EAAYtH,WAoB7B,IAAInS,GAA0C,mBAAtBvjC,GAAOujC,WAA6BvjC,EAAOujC,WAAatvC,EAAQsvC,YAAc,OAElGA,EAAa,OAASA,EAAa,QAE9BvjC,EAAOiyC,aACRxwC,QAAQ3B,KAAK,qDAIhBE,EAAOiyC,cACRxwC,QAAQI,IAAI,cAAe0hC,GAC3B9hC,QAAQI,IAAI,cAAe6zC,GAG/B,IAAIqH,IAAW,CAQf1sD,MAAKo5C,MAAQ,WACTsT,GAAW,GAUf1sD,KAAKk0C,OAAS,WACV,GAAIgW,OAA0B,EAC1B,KAAM,yCAGV,OAAK0C,QAQLF,GAAW,IAPF/8C,EAAOiyC,aACRxwC,QAAQkC,KAAK,2CAEjBtT,MAAK+hD,WAcb/hD,KAAK8hD,kBAAoB,WACrB9hD,KAAKo5C,QAEL8T,EAAYlwD,OAASqwD,EAAarwD,OAAS,EAC3CswD,EAAkB,EAGtB,IAAIR,IAAwB,CAmD5BH,GAAYmB,eAAiBrB,EAG7BE,EAAYnZ,QAAQ5vC,EAAQ6vC,aA4BhC,QAASgS,GAAesI,EAAap+C,GA2NjC,QAASq+C,KAEL,GAAIC,GAAYp4C,SAASsb,cAAc,UACnCvtB,EAAUqqD,EAAUC,WAAW,KAUnC,OAPAD,GAAUE,MAAQJ,EAAYI,MAC9BF,EAAUG,OAASL,EAAYK,OAG/BxqD,EAAQyqD,UAAUN,EAAa,EAAG,GAG3BE,EAGX,QAASK,KACL,GAAIC,EAEA,MADAC,IAAW,GAAI1mB,OAAO2mB,UACflsD,WAAW+rD,EAAiB,IAGvC,IAA2C,WAAvCP,EAAYW,SAASj5C,cAA4B,CACjD,GAAIsiC,IAAW,GAAIjQ,OAAO2mB,UAAYD,CAYtC,OAVAA,IAAW,GAAI1mB,OAAO2mB,UAEtBE,EAAOC,OAAO3tD,MACVmkD,MAAO4I,IACPjW,SAAUA,SAGV8W,GACAtsD,WAAW+rD,EAAiB3+C,EAAO63C,gBAK3CsH,YAAYf,GACRgB,UAA8C,mBAA5Bp/C,GAAOq/C,kBAAoCr/C,EAAOq/C,iBACpEC,WAAY,SAAS1H,GACjB,GAAIxP,IAAW,GAAIjQ,OAAO2mB,UAAYD,CACtC,OAAKzW,IAKLyW,GAAW,GAAI1mB,OAAO2mB,UAEtBE,EAAOC,OAAO3tD,MACVmkD,MAAOmC,EAAO2H,UAAU,aAAc,GACtCnX,SAAUA,SAGV8W,GACAtsD,WAAW+rD,EAAiB3+C,EAAO63C,iBAZ5BjlD,WAAW+rD,EAAiB3+C,EAAO63C,kBArQ1D,GAA2B,mBAAhBsH,cAAsE,WAAvCf,EAAYW,SAASj5C,cAC3D,KAAM,8DAGV9F,GAASA,MACJA,EAAO63C,gBACR73C,EAAO63C,cAAgB,GAI3B,IAAI2H,IAAkC,GACrC,gBAAiB,mBAAoB,uBAAuBvhC,QAAQ,SAASpjB,GACtEA,IAAQqL,UAASsb,cAAc,YAC/Bg+B,GAAkC,IAI1C,IAAIC,MAAelwD,OAAOmwD,0BAA6BnwD,OAAOowD,qBAAyBpwD,OAAOs5B,QAE1F+2B,EAAgB,GAChBC,EAAaz+B,UAAUuX,UAAUn5B,MAAM,2BACvCigD,IAAaI,GAAcA,EAAW,KACtCD,EAAgB38C,SAAS48C,EAAW,GAAI,KAGxCJ,GAAaG,EAAgB,KAC7BJ,GAAkC,EAGtC,IAAIM,GAAcC,CAElB,IAAIP,EAKA,GAJKx/C,EAAOiyC,aACRxwC,QAAQ9N,MAAM,yEAGdyqD,YAAuB4B,mBACvBF,EAAe1B,MACZ,CAAA,KAAIA,YAAuB6B,2BAG9B,KAAM,mEAFNH,GAAe1B,EAAYxG,WAItBx2B,WAAUmzB,kBACdv0C,EAAOiyC,aACRxwC,QAAQzD,MAAM,iDAItB,IAAIkhD,EASJ7uD,MAAK+hD,OAAS,WAGV,GAFA8M,GAAc,EAEVM,EAAiC,CAEjC,GAAIU,EACA,kBAAmBJ,GACnBI,EAAoBJ,EAAaK,cAAc,IACxC,oBAAsBL,GAC7BI,EAAoBJ,EAAaM,iBAAiB,IAC3C,uBAAyBN,KAChCI,EAAoBJ,EAAaO,oBAAoB,IAGzD,KACI,GAAIC,GAAW,GAAI7I,EACnB6I,GAAS5I,SAASwI,EAAkB/J,iBAAiB,IACrD+J,EAAoBI,EACtB,MAAOj0D,IAET,IAAK6zD,EACD,KAAM,sCAKVH,GAAsB,GAAI9J,GAAoBiK,GAC1C7J,SAAU,eAEd0J,EAAoB3N,aAEpB4M,GAAOC,UACPJ,GAAW,GAAI1mB,OAAO2mB,UACtBH,GAGA3+C,GAAOwyC,cACPxyC,EAAOwyC,gBAIfniD,KAAKkwD,cAAgB,SAASjuC,GAC1B,GAA2C,WAAvC8rC,EAAYW,SAASj5C,cAErB,WADAwM,IAIJ,IAAIkuC,GAAexB,EAAOC,OAAO5xD,MACjC2xD,GAAOC,OAAOhhC,QAAQ,SAASwiC,EAAOC,GAClC,GAAIC,GAAkBH,EAAeE,CAChC1gD,GAAOiyC,aACRxwC,QAAQ9N,MAAMgtD,EAAkB,IAAMH,EAAe,qBAGrDxgD,EAAO4gD,oBACP5gD,EAAO4gD,mBAAmBD,EAAiBH,EAG/C,IAAIK,GAAOJ,EAAMhL,MAAM8J,UAAU,aAAc,EAC/CP,GAAOC,OAAOyB,GAAKjL,MAAQoL,IAG1B7gD,EAAOiyC,aACRxwC,QAAQ9N,MAAM,mBAGlB2e,KAaJjiB,KAAKsuC,KAAO,SAASrsB,GACjB4sC,GAAc,CAEd,IAAI4B,GAAOzwD,IAEX,OAAImvD,IAAmCO,MACnCA,GAAoBphB,KAAKrsB,OAI7BjiB,MAAKkwD,cAAc,WASfvB,EAAO+B,QAAQ,SAASjO,GACf9yC,EAAOiyC,aACRxwC,QAAQ9N,MAAM,uBAGlBmtD,EAAKhO,KAAOA,EAERgO,EAAKhO,KAAK70B,UACV6iC,EAAKhO,KAAO,GAAIqB,UACZnlD,KAAM,gBAIVsjB,GACAA,EAASwuC,EAAKhO,MAGlBkM,EAAOC,cAKnB,IAAIL,IAAoB,CASxBvuD,MAAKo5C,MAAQ,WACTmV,GAAoB,GAUxBvuD,KAAKk0C,OAAS,WACVqa,GAAoB,EAEfM,GACD7uD,KAAK+hD,UAWb/hD,KAAK8hD,kBAAoB,WACrB9hD,KAAKo5C,QACLuV,EAAOC,UAgEX,IAAIJ,IAAW,GAAI1mB,OAAO2mB,UAEtBE,EAAS,GAAIgC,GAAOC,MAAM,KA4BlC,QAASpL,GAAe9D,EAAa/xC,GA2FjC,QAASkhD,GAAWrJ,GAChBA,EAAyC,mBAAlBA,GAAgCA,EAAgB,EAEvE,IAAIzP,IAAW,GAAIjQ,OAAO2mB,UAAYD,CACtC,OAAKzW,GAIDwW,GACAC,GAAW,GAAI1mB,OAAO2mB,UACflsD,WAAWsuD,EAAY,OAIlCrC,GAAW,GAAI1mB,OAAO2mB,UAElB3H,EAAMpL,QAGNoL,EAAM7P,OAGVrzC,EAAQyqD,UAAUvH,EAAO,EAAG,EAAGS,EAAO4G,MAAO5G,EAAO6G,QACpDO,EAAOC,OAAO3tD,MACV82C,SAAUA,EACVqN,MAAOmC,EAAO2H,UAAU,qBAGvB4B,GACDvuD,WAAWsuD,EAAYrJ,EAAeA,KAxB/BjlD,WAAWsuD,EAAYrJ,EAAeA,GA4BrD,QAASuJ,GAAU10D,GACf,GAAII,IAAI,EACJO,EAASX,EAAEW,OAEX43C,EAAO,WAEP,MADAn4C,KACIA,IAAMO,MACNX,GAAE4lB,eAGN5lB,GAAE20D,eAAepc,EAAMn4C,GAE3Bm4C,KAaJ,QAASqc,GAAgBC,EAASC,EAAgBC,EAAeC,EAAiBpvC,GAC9E,GAAIqvC,GAAcz7C,SAASsb,cAAc,SACzCmgC,GAAYnD,MAAQ5G,EAAO4G,MAC3BmD,EAAYlD,OAAS7G,EAAO6G,MAC5B,IAAImD,GAAYD,EAAYpD,WAAW,MACnCsD,KAEAC,EAAqBN,KAAmB,EACxCO,EAAiBP,GAAkBA,EAAiB,GAAKA,GAAkBD,EAAQl0D,OACnFm0D,EAAiBD,EAAQl0D,OACzB20D,GACAx1D,EAAG,EACHy1D,EAAG,EACHrpC,EAAG,GAEHspC,EAAqBlrD,KAAKq6B,KAC1Br6B,KAAK2hD,IAAI,IAAK,GACd3hD,KAAK2hD,IAAI,IAAK,GACd3hD,KAAK2hD,IAAI,IAAK,IAEdwJ,EAAeV,GAAiBA,GAAiB,GAAKA,GAAiB,EAAIA,EAAgB,EAC3FW,EAAiBV,GAAmBA,GAAmB,GAAKA,GAAmB,EAAIA,EAAkB,EACrGW,GAAiB,CAErBjB,IACI/zD,OAAQ00D,EACRV,eAAgB,SAASpc,EAAMl4C,GAC3B,GAAIu1D,GAAeC,EAAaC,EAE5BC,EAAc,YACTJ,GAAkBG,EAAcF,GAAiBE,EAAcJ,IAI5DN,IACAO,GAAiB,GAErBR,EAAavwD,KAAKiwD,EAAQx0D,KAE9Bk4C,IAGJ,IAAKod,EA6BDI,QA7BiB,CACjB,GAAIhN,GAAQ,GAAIiN,MAChBjN,GAAMtP,OAAS,WACXyb,EAAUlD,UAAUjJ,EAAO,EAAG,EAAGmC,EAAO4G,MAAO5G,EAAO6G,OACtD,IAAIkE,GAAYf,EAAUgB,aAAa,EAAG,EAAGhL,EAAO4G,MAAO5G,EAAO6G,OAClE6D,GAAgB,EAChBC,EAAcI,EAAUp9B,KAAKl4B,OAC7Bm1D,EAAcG,EAAUp9B,KAAKl4B,OAAS,CAEtC,KAAK,GAAIw1D,GAAM,EAAGA,EAAMN,EAAaM,GAAO,EAAG,CAC3C,GAAIC,IACAt2D,EAAGm2D,EAAUp9B,KAAKs9B,GAClBZ,EAAGU,EAAUp9B,KAAKs9B,EAAM,GACxBjqC,EAAG+pC,EAAUp9B,KAAKs9B,EAAM,IAExBE,EAAkB/rD,KAAKq6B,KACvBr6B,KAAK2hD,IAAImK,EAAat2D,EAAIw1D,EAAYx1D,EAAG,GACzCwK,KAAK2hD,IAAImK,EAAab,EAAID,EAAYC,EAAG,GACzCjrD,KAAK2hD,IAAImK,EAAalqC,EAAIopC,EAAYppC,EAAG,GAGzCmqC,IAAmBb,EAAqBC,GACxCG,IAGRG,KAEJhN,EAAMn3B,IAAMijC,EAAQx0D,GAAG0oD,QAK/BnjC,SAAU,WACNuvC,EAAeA,EAAapyC,OAAO8xC,EAAQjqD,MAAMyqD,IAE7CF,EAAax0D,QAAU,GAGvBw0D,EAAavwD,KAAKiwD,EAAQA,EAAQl0D,OAAS,IAE/CilB,EAASuvC,MArOrB7hD,EAASA,MAEJA,EAAO63C,gBACR73C,EAAO63C,cAAgB,IAGtB73C,EAAOiyC,aACRxwC,QAAQI,IAAI,yBAA0B7B,EAAO63C,eAUjDxnD,KAAK+hD,OAAS,WACLpyC,EAAOw+C,QACRx+C,EAAOw+C,MAAQ,KAGdx+C,EAAOy+C,SACRz+C,EAAOy+C,OAAS,KAGfz+C,EAAOm3C,QACRn3C,EAAOm3C,OACHqH,MAAOx+C,EAAOw+C,MACdC,OAAQz+C,EAAOy+C,SAIlBz+C,EAAO43C,SACR53C,EAAO43C,QACH4G,MAAOx+C,EAAOw+C,MACdC,OAAQz+C,EAAOy+C,SAIvB7G,EAAO4G,MAAQx+C,EAAO43C,OAAO4G,OAAS,IACtC5G,EAAO6G,OAASz+C,EAAO43C,OAAO6G,QAAU,IAExCxqD,EAAU2jD,EAAO2G,WAAW,MAGxBv+C,EAAOm3C,OAASn3C,EAAOm3C,gBAAiB6L,mBACxC7L,EAAQn3C,EAAOm3C,MAAM8L,YAEjBjjD,EAAOwyC,cACPxyC,EAAOwyC,iBAGX2E,EAAQjxC,SAASsb,cAAc,SAEA,mBAApB21B,GAAM+L,UACb/L,EAAM+L,UAAYnR,EAElBoF,EAAM74B,IAAMy0B,EAAIC,gBAAgBjB,GAGpCoF,EAAMgM,iBAAmB,WACjBnjD,EAAOwyC,cACPxyC,EAAOwyC,gBAIf2E,EAAMqH,MAAQx+C,EAAOm3C,MAAMqH,MAC3BrH,EAAMsH,OAASz+C,EAAOm3C,MAAMsH,QAGhCtH,EAAM9V,OAAQ,EACd8V,EAAM7P,OAENuX,GAAW,GAAI1mB,OAAO2mB,UACtBE,EAAS,GAAIgC,GAAOC,MAEfjhD,EAAOiyC,cACRxwC,QAAQI,IAAI,qBAAsB+1C,EAAO4G,MAAO,IAAK5G,EAAO6G,QAC5Dh9C,QAAQI,IAAI,qBAAsBs1C,EAAMqH,OAAS5G,EAAO4G,MAAO,IAAKrH,EAAMsH,QAAU7G,EAAO6G,SAG/FyC,EAAWlhD,EAAO63C,eAwJtB,IAAIsJ,IAAgB,CAYpB9wD,MAAKsuC,KAAO,SAASrsB,GACjB6uC,GAAgB,CAEhB,IAAIiC,GAAQ/yD,IAEZuC,YAAW,WAIP0uD,EAAgBtC,EAAOC,QAAQ,EAAI,KAAM,KAAM,SAASA,GACpDD,EAAOC,OAASA,EAGZj/C,EAAOw1C,eAAiBx1C,EAAOw1C,cAAcnoD,SAC7C2xD,EAAOC,OAASj/C,EAAOw1C,cAAc/lC,OAAOuvC,EAAOC,SAWvDD,EAAO+B,QAAQ,SAASjO,GACpBsQ,EAAMtQ,KAAOA,EAETsQ,EAAMtQ,KAAK70B,UACXmlC,EAAMtQ,KAAO,GAAIqB,UACbnlD,KAAM,gBAIVsjB,GACAA,EAAS8wC,EAAMtQ,WAI5B,IAGP,IAAI8L,IAAoB,CASxBvuD,MAAKo5C,MAAQ,WACTmV,GAAoB,GAUxBvuD,KAAKk0C,OAAS,WACVqa,GAAoB,EAEhBuC,GACA9wD,KAAK+hD,UAWb/hD,KAAK8hD,kBAAoB,WACrB9hD,KAAKo5C,QACLuV,EAAOC,UAGX,IAGI9H,GACA0H,EACAG,EALApH,EAAS1xC,SAASsb,cAAc,UAChCvtB,EAAU2jD,EAAO2G,WAAW,MAqoBpC,QAASxI,GAAYhE,EAAa/xC,GAC9B,GAA0B,mBAAfqjD,YACP,KAAM,gEAGVrjD,GAASA,KAET,IAAIsjD,GAAevR,YAAuBkO,2BAA4BlO,YAAuBiO,kBAS7F3vD,MAAK+hD,OAAS,WA8DV,QAASmR,GAAelmB,GACpB,MAAIuhB,GACOhsD,WAAW,WACd2wD,EAAelmB,IAChB,MAGPmmB,EAAqBC,EAAsBF,GAEdpuD,eAAlBuuD,KACPA,EAAgBrmB,QAIhBA,EAAOqmB,EAAgB,MAItBJ,GAAgBnM,EAAMpL,QAGvBoL,EAAM7P,OAGLgc,GACDrvD,EAAQyqD,UAAUvH,EAAO,EAAG,EAAGS,EAAO4G,MAAO5G,EAAO6G,QAGpDz+C,EAAO2jD,cACP3jD,EAAO2jD,aAAa/L,EAAO2H,UAAU,cAGzCqE,EAAWC,SAAS5vD,GACpByvD,EAAgBrmB,KA9FfimB,IACItjD,EAAOw+C,QACRx+C,EAAOw+C,MAAQrH,EAAM2M,aAAe,KAGnCzzD,KAAKouD,SACNz+C,EAAOy+C,OAAStH,EAAM4M,cAAgB,KAGrC/jD,EAAOm3C,QACRn3C,EAAOm3C,OACHqH,MAAOx+C,EAAOw+C,MACdC,OAAQz+C,EAAOy+C,SAIlBz+C,EAAO43C,SACR53C,EAAO43C,QACH4G,MAAOx+C,EAAOw+C,MACdC,OAAQz+C,EAAOy+C,SAIvB7G,EAAO4G,MAAQx+C,EAAO43C,OAAO4G,OAAS,IACtC5G,EAAO6G,OAASz+C,EAAO43C,OAAO6G,QAAU,IAExCtH,EAAMqH,MAAQx+C,EAAOm3C,MAAMqH,OAAS,IACpCrH,EAAMsH,OAASz+C,EAAOm3C,MAAMsH,QAAU,KAI1CmF,EAAa,GAAIP,YAKjBO,EAAWI,UAAU,GAMrBJ,EAAWK,SAASjkD,EAAO+3C,WAAa,KASxC6L,EAAWM,WAAWlkD,EAAOg4C,SAAW,IAIxC4L,EAAWpyB,QAEX2yB,EAAYhsB,KAAK1J,KAwCjB+0B,GAAqBC,EAAsBF,GAEvCvjD,EAAOwyC,cACPxyC,EAAOwyC,gBAcfniD,KAAKsuC,KAAO,WACJ6kB,GACAY,EAAqBZ,GAGzBa,EAAUlsB,KAAK1J,MAUfp+B,KAAKyiD,KAAO,GAAIqB,OAAM,GAAI7H,YAAWsX,EAAWlJ,SAAS4J,OACrDt1D,KAAM,cAIV40D,EAAWlJ,SAAS4J,OAGxB,IAAI1F,IAAoB,CASxBvuD,MAAKo5C,MAAQ,WACTmV,GAAoB,GAUxBvuD,KAAKk0C,OAAS,WACVqa,GAAoB,GAUxBvuD,KAAK8hD,kBAAoB,WAChByR,IAILvzD,KAAKo5C,QAELma,EAAWlJ,SAAS4J,QAGxB,IAAI1M,GAAS1xC,SAASsb,cAAc,UAChCvtB,EAAU2jD,EAAO2G,WAAW,KAYhC,IAVI+E,IACIvR,YAAuBkO,2BACvBhsD,EAAU89C,EACV6F,EAAS3jD,EAAQ2jD,QACV7F,YAAuBiO,qBAC9B/rD,EAAU89C,EAAYwM,WAAW,MACjC3G,EAAS7F,KAIZuR,EAAc,CACf,GAAInM,GAAQjxC,SAASsb,cAAc,QACnC21B,GAAM9V,OAAQ,EACd8V,EAAMxS,UAAW,EAEc,mBAApBwS,GAAM+L,UACb/L,EAAM+L,UAAYnR,EAElBoF,EAAM74B,IAAMy0B,EAAIC,gBAAgBjB,GAGpCoF,EAAM7P,OAGV,GACI6c,GAAWE,EAASX,EAEpBE,EAHAJ,EAAqB,KAyC7B,QAAS3M,GAAoB0N,EAAqBr3C,GAmF9C,QAASs3C,KAEL,GAAIC,GAAe,GAAItX,GACnBuX,KAEAC,EAAoB,CAWxB,IAVAJ,EAAoBtmC,QAAQ,SAASy8B,GAC5BA,EAAOxE,iBAAiB7oD,SAI7Bs3D,IAEAD,EAAapzD,KAAKmzD,EAAa1G,wBAAwBrD,OAGtDiK,EAAL,CAIA,GAAIC,GAAoBH,EAAaI,8BAIrC,OAHAH,GAAazmC,QAAQ,SAAS6mC,GAC1BA,EAAYjhB,QAAQ+gB,KAEjBA,EAAkBlK,QAM7B,QAASqK,KAELR,EAAoBtmC,QAAQ,SAASy8B,GACjC,GAAKA,EAAOvE,iBAAiB9oD,OAA7B,CAIA,GAAI8pD,GAAQ6N,EAAStK,EACrBvD,GAAMqH,MAAQtxC,EAAQiqC,MAAMqH,MAC5BrH,EAAMsH,OAASvxC,EAAQiqC,MAAMsH,OAC7BwG,EAAO3zD,KAAK6lD,KAGhB,IAAI+N,EAUJ,OARI,iBAAmBtN,GACnBsN,EAAiBtN,EAAOuI,gBACjB,oBAAsBvI,GAC7BsN,EAAiBtN,EAAOwI,mBAChBlzC,EAAQ+kC,aAChBxwC,QAAQzD,MAAM,mGAGXknD,EAGX,QAASF,GAAStK,GACd,GAAIvD,GAAQjxC,SAASsb,cAAc,QAGnC,OAFA21B,GAAM74B,IAAMy0B,EAAIC,gBAAgB0H,GAChCvD,EAAM7P,OACC6P,EAKX,QAASgO,KACL,IAAIC,EAAJ,CAIA,GAAIC,GAAeJ,EAAO53D,MAC1B43D,GAAOhnC,QAAQ,SAASk5B,EAAOuJ,GAC3B,GAAqB,IAAjB2E,EAEA,WADApxD,GAAQyqD,UAAUvH,EAAO,EAAG,EAAGA,EAAMqH,MAAOrH,EAAMsH,OAItD,IAAqB,IAAjB4G,EAAoB,CACpB,GAAIrtC,GAAI,EACJwX,EAAI,CAOR,OALY,KAARkxB,IACA1oC,EAAIm/B,EAAMqH,WAGdvqD,GAAQyqD,UAAUvH,EAAOn/B,EAAGwX,EAAG2nB,EAAMqH,MAAOrH,EAAMsH,QAItD,GAAqB,IAAjB4G,EAAoB,CACpB,GAAIrtC,GAAI,EACJwX,EAAI,CAWR,OATY,KAARkxB,IACA1oC,EAAIm/B,EAAMqH,OAGF,IAARkC,IACAlxB,EAAI2nB,EAAMsH,YAGdxqD,GAAQyqD,UAAUvH,EAAOn/B,EAAGwX,EAAG2nB,EAAMqH,MAAOrH,EAAMsH,QAItD,GAAqB,IAAjB4G,EAAoB,CACpB,GAAIrtC,GAAI,EACJwX,EAAI,CAgBR,OAdY,KAARkxB,IACA1oC,EAAIm/B,EAAMqH,OAGF,IAARkC,IACAlxB,EAAI2nB,EAAMsH,QAGF,IAARiC,IACA1oC,EAAIm/B,EAAMqH,MACVhvB,EAAI2nB,EAAMsH,YAGdxqD,GAAQyqD,UAAUvH,EAAOn/B,EAAGwX,EAAG2nB,EAAMqH,MAAOrH,EAAMsH,WAK1D7rD,WAAWuyD,EAAoBj4C,EAAQ2qC,gBA/M3C3qC,EAAUA,IACNmpC,SAAU,aACVc,OACIqH,MAAO,IACPC,OAAQ,MAIXvxC,EAAQ2qC,gBACT3qC,EAAQ2qC,cAAgB,IAGvB3qC,EAAQiqC,QACTjqC,EAAQiqC,UAGPjqC,EAAQiqC,MAAMqH,QACftxC,EAAQiqC,MAAMqH,MAAQ,KAGrBtxC,EAAQiqC,MAAMsH,SACfvxC,EAAQiqC,MAAMsH,OAAS,KAU3BpuD,KAAK+hD,OAAS,WACVgT,GAAqB,CACrB,IAAIE,GAAmBP,IAEnBQ,EAAmBf,GACnBe,IACAA,EAAiBrP,iBAAiBj4B,QAAQ,SAASunC,GAC/CF,EAAiB5N,SAAS8N,KAI9Bt4C,EAAQu4C,eAAkD,kBAA1Bv4C,GAAQu4C,eACxCv4C,EAAQu4C,cAAcH,GAG1BpT,EAAgB,GAAI+D,GAAoBqP,GACpCjP,SAAU,eAGduB,EAAO4G,MAAQyG,EAAO53D,OAAS,EAAsB,EAAlB43D,EAAO,GAAGzG,MAAYyG,EAAO,GAAGzG,MACnE5G,EAAO6G,OAASwG,EAAO53D,OAAS,EAAuB,EAAnB43D,EAAO,GAAGxG,OAAawG,EAAO,GAAGxG,OAErE0G,IAEAjT,EAAcE,UAalB/hD,KAAKsuC,KAAO,SAASrsB,GACjB8yC,GAAqB,EAEhBlT,GAILA,EAAcvT,KAAK,SAASmU,GACxBxgC,EAASwgC,KA+BjB,IACIZ,GADA+S,KAoCAG,GAAqB,EAmErBxN,EAAS1xC,SAASsb,cAAc,UAChCvtB,EAAU2jD,EAAO2G,WAAW,KAEhC3G,GAAOhgB,MAAQ,2EAEf1xB,SAASqzC,KAAKG,YAAY9B,GAS1BvnD,KAAKo5C,MAAQ,WACLyI,GACAA,EAAczI,SAWtBp5C,KAAKk0C,OAAS,WACN2N,GACAA,EAAc3N,UAWtBl0C,KAAK8hD,kBAAoB,WACrB8S,KACAhxD,EAAQyxD,UAAU,EAAG,EAAG9N,EAAO4G,MAAO5G,EAAO6G,QAC7C2G,GAAqB,EACrBlT,EAAgB,KAEZA,GACAA,EAAcC,qBAvrH1BL,EAAUuD,YAAc,SAASrmD,EAAMsjB,GACnC,IAAKA,EACD,KAAM,wBAGV7Q,SAAQI,IAAI,qBAAgC,QAAT7S,EAAiB,QAAUA,EAAO,UAAY,eACjFskD,EAAYqS,MAAM,SAASvS,EAASwS,GACnB,QAAT52D,GAAkB42D,IAAU52D,EAAO,QAAUsjB,GAC7CA,EAAS8gC,GAGA,QAATpkD,GAAkBsjB,GAClBA,EAAS8gC,EAASwS,EAAMtkD,QAAQ,OAAQ,QAiBpDwwC,EAAUwG,YAAc,SAASprC,GAC7BzL,QAAQI,IAAI,qCACZqL,EAAUA,MACNA,EAAQgqC,OAAShqC,EAAQiqC,OAASjqC,EAAQkqC,IAC1ClqC,EAAQgqC,MAAM/D,WAAW,SAAS0S,GAC9B34C,EAAQiqC,MAAMhE,WAAW,SAAS2S,GAC9B54C,EAAQkqC,IAAIjE,WAAW,SAAS4S,GAC5BzS,EAAYC,OACRyS,UAAWH,EACXI,UAAWH,EACXI,QAASH,UAKlB74C,EAAQgqC,OAAShqC,EAAQiqC,MAChCjqC,EAAQgqC,MAAM/D,WAAW,SAAS0S,GAC9B34C,EAAQiqC,MAAMhE,WAAW,SAAS2S,GAC9BxS,EAAYC,OACRyS,UAAWH,EACXI,UAAWH,QAIhB54C,EAAQgqC,OAAShqC,EAAQkqC,IAChClqC,EAAQgqC,MAAM/D,WAAW,SAAS0S,GAC9B34C,EAAQkqC,IAAIjE,WAAW,SAAS4S,GAC5BzS,EAAYC,OACRyS,UAAWH,EACXK,QAASH,QAId74C,EAAQiqC,OAASjqC,EAAQkqC,IAChClqC,EAAQiqC,MAAMhE,WAAW,SAAS2S,GAC9B54C,EAAQkqC,IAAIjE,WAAW,SAAS4S,GAC5BzS,EAAYC,OACR0S,UAAWH,EACXI,QAASH,QAId74C,EAAQgqC,MACfhqC,EAAQgqC,MAAM/D,WAAW,SAAS0S,GAC9BvS,EAAYC,OACRyS,UAAWH,MAGZ34C,EAAQiqC,MACfjqC,EAAQiqC,MAAMhE,WAAW,SAAS2S,GAC9BxS,EAAYC,OACR0S,UAAWH,MAGZ54C,EAAQkqC,KACflqC,EAAQkqC,IAAIjE,WAAW,SAAS4S,GAC5BzS,EAAYC,OACR2S,QAASH,OAMH,mBAAXx4D,KACPA,EAAOJ,QAAU2kD,GAGC,kBAAXziD,SAAyBA,OAAOC,KACvCD,OAAO,eAAiB,WACpB,MAAOyiD,KA2kBfgF,EAAWzB,YAAcvD,EAAUuD,YAcnCyB,EAAWwB,YAAcxG,EAAUwG,YAEV,mBAAdxG,KACPA,EAAUgF,WAAaA,EAG3B,IAAIqP,GAAuB,uFAE3B,SAAUrF,GACDA,GAIiB,mBAAXvxD,SAIW,mBAAXH,KAIXA,EAAOgyB,WACHuX,UAAWwtB,EACXC,aAAc,cAGbh3D,EAAOqS,UACRrS,EAAOqS,YAGyB,mBAAzBrS,GAAOqS,QAAQ9N,QACtBvE,EAAOqS,QAAQ9N,MAAQvE,EAAOqS,QAAQkC,KAAOvU,EAAOqS,QAAQzD,MAAQ5O,EAAOqS,QAAQI,IAAMzS,EAAOqS,QAAQI,KAAO,WAC3GJ,QAAQI,IAAIlP,aAII,mBAAbuT,YAEP46C,EAAK56C,YAELA,SAASsb,cAAgBtb,SAASi6C,cAAgBj6C,SAASk6C,iBAAmB,WAC1E,GAAI/qD,IACAkpD,WAAY,WACR,MAAOlpD,IAEXiyC,KAAM,aACNmC,MAAO,aACPiV,UAAW,aACXa,UAAW,WACP,MAAO,IAGf,OAAOlqD,IAGXyrD,EAAKkC,iBAAmB,cAGJ,mBAAbtb,YAEPoZ,EAAKpZ,UACDC,SAAU,QACVyR,KAAM,GACNiN,KAAM,KAIQ,mBAAXC,UAEPxF,EAAKwF,QACD9H,MAAO,EACPC,OAAQ,IAIG,mBAAR1L,KAEP+N,EAAK/N,KACDC,gBAAiB,WACb,MAAO,IAEXsB,gBAAiB,WACb,MAAO,MAMnBwM,EAAKvxD,OAASH,IACG,mBAAXA,GAAyBA,EAAS,KAQ5C,IAAIq0D,GAAwBl0D,OAAOk0D;AACE,mBAA1BA,KACoC,mBAAhC8C,+BAEP9C,EAAwB8C,6BAGY,mBAA7BC,4BAEP/C,EAAwB+C,0BAKhC,IAAIpC,GAAuB70D,OAAO60D,oBACE,oBAAzBA,KACmC,mBAA/BqC,8BAEPrC,EAAuBqC,4BAGY,mBAA5BC,2BAEPtC,EAAuBsC,yBAK/B,IAAIvZ,GAAe59C,OAAO49C,YAEE,oBAAjBA,KAC2B,mBAAvBC,sBAEPD,EAAeC,oBAGY,mBAApBuZ,mBAEPxZ,EAAewZ,iBAKvB,IAAI5T,GAAMxjD,OAAOwjD,GAEE,oBAARA,IAA4C,mBAAdoF,aAErCpF,EAAMoF,WAGe,mBAAd/2B,YAA+D,mBAA3BA,WAAUglC,eACT,mBAAjChlC,WAAUu+B,qBACjBv+B,UAAUglC,aAAehlC,UAAUu+B,oBAGE,mBAA9Bv+B,WAAUmzB,kBACjBnzB,UAAUglC,aAAehlC,UAAUmzB,iBAI3C,IAAIkC,KAASr1B,UAAUuX,UAAUtwB,QAAQ,WAAY,IAAS+Y,UAAU83B,aAAgB93B,UAAU63B,kBAC9FvC,IAAYnnD,OAAOuqD,OAAS14B,UAAUuX,UAAUtwB,QAAQ,WAAY,EACpEmuC,GAAYE,IAAYD,KAAYr1B,UAAUu+B,mBAE9ClI,EAAcloD,OAAOkoD,WAEE,oBAAhBA,IAA4D,mBAAtBmP,qBAC7CnP,EAAcmP,mBAIS,mBAAhBnP,KACD,kBAAoBA,GAAYrnD,YAClCqnD,EAAYrnD,UAAU+lD,eAAiB,WACnC,IAAK9lD,KAAKw2D,UACN,QAGJ,IAAIC,KAMJ,OALAz2D,MAAKw2D,UAAU5oC,QAAQ,SAASunC,GACxBA,EAAMuB,KAAKtwD,WAAW4R,QAAQ,YAAa,GAC3Cy+C,EAAOx1D,KAAKk0D,KAGbsB,GAGXrP,EAAYrnD,UAAU8lD,eAAiB,WACnC,IAAK7lD,KAAKw2D,UACN,QAGJ,IAAIC,KAMJ,OALAz2D,MAAKw2D,UAAU5oC,QAAQ,SAASunC,GACxBA,EAAMuB,KAAKtwD,WAAW4R,QAAQ,YAAa,GAC3Cy+C,EAAOx1D,KAAKk0D,KAGbsB,IAIT,QAAUrP,GAAYrnD,YACxBqnD,EAAYrnD,UAAUuuC,KAAO,WACzBtuC,KAAK6lD,iBAAiBj4B,QAAQ,SAASunC,GAC7BA,EAAM7mB,MACR6mB,EAAM7mB,SAIdtuC,KAAK8lD,iBAAiBl4B,QAAQ,SAASunC,GAC7BA,EAAM7mB,MACR6mB,EAAM7mB,WAiG1B,IAAIkf,KAEwB,oBAAjB1Q,GACP0Q,EAAQ1Q,aAAeA,EACc,mBAAvBC,sBACdyQ,EAAQ1Q,aAAeC,oBAGF,mBAAd0E,KACPA,EAAU+L,QAAUA,GAqYC,mBAAd/L,KACPA,EAAUmE,oBAAsBA,GAihBX,mBAAdnE,KACPA,EAAUkE,oBAAsBA,GAqTX,mBAAdlE,KACPA,EAAUgE,eAAiBA,GA0WN,mBAAdhE,KACPA,EAAU+D,eAAiBA,EAyB/B,IAAImL,GAAS,WAGT,QAASgG,GAAY5e,GACjB/3C,KAAK4uD,UACL5uD,KAAK+3C,SAAWA,GAAY,EAC5B/3C,KAAK2nD,QAAU,GA+BnB,QAAS/D,GAAmBC,GACxB,GAAIpB,GAAOC,EAAIC,gBAAgB,GAAImB,OAAMD,EAAUz9C,WAC/C,mCAAqCy9C,EAAUr3C,KAAO,eAEtD7N,KAAM,4BAGNolD,EAAS,GAAIC,QAAOvB,EAExB,OADAC,GAAIuB,gBAAgBxB,GACbsB,EAGX,QAAS6S,GAAkBhI,GACvB,QAASiI,GAAYjI,GACjB,GAAIt7C,GAAOwjD,EAAYlI,EACvB,KAAKt7C,EACD,QAwFJ,KArFA,GAAIyjD,GAAqB,IAErBC,IACA/xB,GAAM,UACN/P,OACIA,KAAQ,EACR+P,GAAM,QAEN/P,KAAQ,EACR+P,GAAM,QAEN/P,KAAQ,EACR+P,GAAM,QAEN/P,KAAQ,EACR+P,GAAM,QAEN/P,KAAQ,OACR+P,GAAM,QAEN/P,KAAQ,EACR+P,GAAM,QAEN/P,KAAQ,EACR+P,GAAM,UAGVA,GAAM,UACN/P,OACI+P,GAAM,UACN/P,OACIA,KAAQ,IACR+P,GAAM,UAEN/P,KAAQ,SACR+P,GAAM,QAEN/P,KAAQ,SACR+P,GAAM,QAEN/P,KAAQ+hC,EAAe3jD,EAAKykC,UAC5B9S,GAAM,UAGVA,GAAM,UACN/P,OACI+P,GAAM,IACN/P,OACIA,KAAQ,EACR+P,GAAM,MAEN/P,KAAQ,EACR+P,GAAM,QAEN/P,KAAQ,EACR+P,GAAM,MAEN/P,KAAQ,MACR+P,GAAM,UAEN/P,KAAQ,QACR+P,GAAM,MAEN/P,KAAQ,MACR+P,GAAM,UAEN/P,KAAQ,EACR+P,GAAM,MAENA,GAAM,IACN/P,OACIA,KAAQ5hB,EAAK66C,MACblpB,GAAM,MAEN/P,KAAQ5hB,EAAK86C,OACbnpB,GAAM,cAQtBiyB,EAAc,EACdC,EAAkB,EACfD,EAActI,EAAO5xD,QAAQ,CAEhC,GAAIo6D,MACAC,EAAkB,CACtB,GACID,GAAcn2D,KAAK2tD,EAAOsI,IAC1BG,GAAmBzI,EAAOsI,GAAanf,SACvCmf,UACKA,EAActI,EAAO5xD,QAAUq6D,EAAkBN,EAE1D,IAAIO,GAAiB,EACjBC,GACAtyB,GAAM,UACN/P,KAAQsiC,EAAeL,EAAiBG,EAAgBF,GAE5DJ,GAAK,GAAG9hC,KAAKj0B,KAAKs2D,GAClBJ,GAAmBE,EAGvB,MAAOI,GAAaT,GAGxB,QAASQ,GAAeL,EAAiBG,EAAgBF,GACrD,QACIliC,KAAQiiC,EACRlyB,GAAM,MACP7lB,OAAOg4C,EAAcz6C,IAAI,SAAS6zC,GACjC,GAAIkH,GAAQC,GACRC,YAAa,EACbxH,MAAOI,EAAKt7B,KAAKjuB,MAAM,GACvB4wD,UAAW,EACXC,SAAU,EACVC,OAAQ,EACRC,SAAU,EACVC,SAAUtxD,KAAK25B,MAAMg3B,IAGzB,OADAA,IAAkB9G,EAAKzY,UAEnB7iB,KAAMwiC,EACNzyB,GAAI,QAOhB,QAAS6xB,GAAYlI,GACjB,IAAKA,EAAO,GAIR,WAHApL,cACI71C,MAAO,oFASf,KAAK,GAJDwgD,GAAQS,EAAO,GAAGT,MAClBC,EAASQ,EAAO,GAAGR,OACnBrW,EAAW6W,EAAO,GAAG7W,SAEhBt7C,EAAI,EAAGA,EAAImyD,EAAO5xD,OAAQP,IAC/Bs7C,GAAY6W,EAAOnyD,GAAGs7C,QAE1B,QACIA,SAAUA,EACVoW,MAAOA,EACPC,OAAQA,GAIhB,QAAS8J,GAAYzgB,GAEjB,IADA,GAAI0gB,MACG1gB,EAAM,GACT0gB,EAAMl3D,KAAW,IAANw2C,GACXA,IAAa,CAEjB,OAAO,IAAIwE,YAAWkc,EAAMC,WAGhC,QAASC,GAAYvmD,GACjB,MAAO,IAAImqC,YAAWnqC,EAAIjD,MAAM,IAAI8N,IAAI,SAAS3gB,GAC7C,MAAOA,GAAEkgD,WAAW,MAI5B,QAASoc,GAAaC,GAClB,GAAIrjC,MACAsjC,EAAOD,EAAKv7D,OAAS,EAAK,GAAK0d,OAAM,EAAS69C,EAAKv7D,OAAS,GAAKoR,KAAK,KAAO,EACjFmqD,GAAOC,EAAMD,CACb,KAAK,GAAI97D,GAAI,EAAGA,EAAI87D,EAAKv7D,OAAQP,GAAK,EAClCy4B,EAAKj0B,KAAK2R,SAAS2lD,EAAKlmD,OAAO5V,EAAG,GAAI,GAE1C,OAAO,IAAIw/C,YAAW/mB,GAG1B,QAASuiC,GAAagB,GAElB,IAAK,GADDC,MACKj8D,EAAI,EAAGA,EAAIg8D,EAAKz7D,OAAQP,IAAK,CAClC,GAAIy4B,GAAOujC,EAAKh8D,GAAGy4B,IAEC,iBAATA,KACPA,EAAOuiC,EAAaviC,IAGJ,gBAATA,KACPA,EAAOojC,EAAapjC,EAAK9uB,SAAS,KAGlB,gBAAT8uB,KACPA,EAAOmjC,EAAYnjC,GAGvB,IAAIjX,GAAMiX,EAAKvH,MAAQuH,EAAKq4B,YAAcr4B,EAAKl4B,OAC3C27D,EAAShyD,KAAKozC,KAAKpzC,KAAKozC,KAAKpzC,KAAK6K,IAAIyM,GAAOtX,KAAK6K,IAAI,IAAM,GAC5DonD,EAAe36C,EAAI7X,SAAS,GAC5ByyD,EAAS,GAAKn+C,OAAgB,EAATi+C,EAAa,EAAI,EAAKC,EAAa57D,QAASoR,KAAK,KAAOwqD,EAC7EjrC,EAAO,GAAKjT,OAAMi+C,GAASvqD,KAAK,KAAO,IAAMyqD,CAEjDH,GAAKz3D,KAAKi3D,EAAYO,EAAKh8D,GAAGwoC,KAC9ByzB,EAAKz3D,KAAKq3D,EAAa3qC,IACvB+qC,EAAKz3D,KAAKi0B,GAGd,MAAO,IAAI4uB,MAAK4U,GACZ/5D,KAAM,eAcd,QAASg5D,GAAgBziC,GACrB,GAAI7nB,GAAQ,CAkBZ,IAhBI6nB,EAAK4iC,WACLzqD,GAAS,KAGT6nB,EAAK2iC,YACLxqD,GAAS,GAGT6nB,EAAK6iC,SACL1qD,GAAU6nB,EAAK6iC,QAAU,GAGzB7iC,EAAK0iC,cACLvqD,GAAS,GAGT6nB,EAAK8iC,SAAW,IAChB,KAAM,iCAGV,IAAIc,IAAuB,IAAhB5jC,EAAK8iC,SAAiB9iC,EAAK+iC,UAAY,EAAmB,IAAhB/iC,EAAK+iC,SAAiB5qD,GAAOsP,IAAI,SAAS3gB,GAC3F,MAAOsV,QAAOynD,aAAa/8D,KAC5BoS,KAAK,IAAM8mB,EAAKk7B,KAEnB,OAAO0I,GAGX,QAASE,GAAUC,GAIf,IAAK,GAHDC,GAAMD,EAAKE,KAAK,GAAGC,KAAK,GAExBC,EAAaH,EAAIlhD,QAAQ,OACpBvb,EAAI,EAAG+rB,KAAQ/rB,EAAI,EAAGA,IAC3B+rB,EAAE/rB,GAAKy8D,EAAIhd,WAAWmd,EAAa,EAAI58D,EAG3C,IAAI0xD,GAAOC,EAAQkL,CAOnB,OAJAA,GAAO9wC,EAAE,IAAM,EAAKA,EAAE,GACtB2lC,EAAc,MAANmL,EACRA,EAAO9wC,EAAE,IAAM,EAAKA,EAAE,GACtB4lC,EAAe,MAANkL,GAELnL,MAAOA,EACPC,OAAQA,EACRl5B,KAAMgkC,EACND,KAAMA,GAId,QAASM,GAAa5N,EAAQ/rB,GAC1B,MAAOhtB,UAAS+4C,EAAOt5C,OAAOutB,EAAS,EAAG,GAAG/wB,MAAM,IAAI8N,IAAI,SAASlgB,GAChE,GAAI+8D,GAAW/8D,EAAEy/C,WAAW,GAAG91C,SAAS,EACxC,OAAO,IAAKsU,OAAM,EAAI8+C,EAASx8D,OAAS,GAAIoR,KAAK,KAAOorD,IACzDprD,KAAK,IAAK,GAGjB,QAASqrD,GAAU9N,GAIf,IAHA,GAAI/rB,GAAS,EACT85B,KAEG95B,EAAS+rB,EAAO3uD,QAAQ,CAC3B,GAAIioC,GAAK0mB,EAAOt5C,OAAOutB,EAAQ,GAC3B3hB,EAAMs7C,EAAa5N,EAAQ/rB,GAC3B1K,EAAOy2B,EAAOt5C,OAAOutB,EAAS,EAAI,EAAG3hB,EACzC2hB,IAAU,EAAQ3hB,EAClBy7C,EAAOz0B,GAAMy0B,EAAOz0B,OAET,SAAPA,GAAwB,SAAPA,EACjBy0B,EAAOz0B,GAAIhkC,KAAKw4D,EAAUvkC,IAE1BwkC,EAAOz0B,GAAIhkC,KAAKi0B,GAGxB,MAAOwkC,GAGX,QAASzC,GAAexf,GACpB,SAAUxwC,MAAMlK,KACZ,GAAIk/C,YAAW,GAAKmP,eAAc3T,IAAOlE,QAAS,GAAG52B,IAAI,SAAS3gB,GAClE,MAAOsV,QAAOynD,aAAa/8D,KAC5Bo8D,UAAUhqD,KAAK,IAGtB,GAAIqkC,GAAO,GAAIokB,GAAYjI,EAAOjyC,IAAI,SAASyzC,GAC3C,GAAII,GAAOwI,EAAUS,EAAU1d,KAAKqU,EAAMhL,MAAMn+C,MAAM,MAEtD,OADAupD,GAAKzY,SAAWqY,EAAMrY,SACfyY,IAGXhN,aAAY/Q,GA4BhB,MA3XAkkB,GAAY52D,UAAUqnC,IAAM,SAASgpB,EAAOrY,GASxC,GARI,UAAYqY,KACZA,EAAQA,EAAM7I,QAGd,aAAe6I,KACfA,EAAQA,EAAMlB,UAAU,aAAclvD,KAAK2nD,WAG1C,8BAAgC14C,KAAKmhD,GACtC,KAAM,iFAEVpwD,MAAK4uD,OAAO3tD,MACRmkD,MAAOgL,EACPrY,SAAUA,GAAY/3C,KAAK+3C,YA+VnC4e,EAAY52D,UAAU2wD,QAAU,SAASzuC,GACrC,GAAIoiC,GAAYT,EAAmBgT,EAEnCvS,GAAUC,UAAY,SAAShvC,GAC3B,MAAIA,GAAM4f,KAAKvnB,UACXyD,SAAQzD,MAAM2H,EAAM4f,KAAKvnB,WAG7BsU,GAAS3M,EAAM4f,OAGnBmvB,EAAUb,YAAYxjD,KAAK4uD,UAa3BgC,MAAO+F,KAIU,oBAAdlV,KACPA,EAAUkP,OAASA,EAiCvB,IAAI1N,IASApjD,KAAM,WAaF,QAAS85D,GAAkBC,GACvBA,EAASD,kBAAkBx6D,EAAK06D,eAGpC,QAASC,KAeL,QAASC,GAAaC,GAClBC,EAAYC,YAAY/6D,EAAK06D,eAAe3yD,IAAI8yD,GAAaG,UAAY,SAAS7kD,GAC1EnW,EAAK8iB,UACL9iB,EAAK8iB,SAAS3M,EAAMlR,OAAOgP,OAAQ4mD,IAjB/C,GAAIC,GAAcG,EAAGH,aAAa96D,EAAK06D,eAAgB,YAEnD16D,GAAKy2D,WACLqE,EAAYC,YAAY/6D,EAAK06D,eAAeQ,IAAIl7D,EAAKy2D,UAAW,aAGhEz2D,EAAK02D,SACLoE,EAAYC,YAAY/6D,EAAK06D,eAAeQ,IAAIl7D,EAAK02D,QAAS,WAG9D12D,EAAKw2D,WACLsE,EAAYC,YAAY/6D,EAAK06D,eAAeQ,IAAIl7D,EAAKw2D,UAAW,aAWpEoE,EAAa,aACbA,EAAa,aACbA,EAAa,WAzCjB,GAAI56D,GAAOa,IAEX,IAAyB,mBAAds6D,YAAuD,mBAAnBA,WAAUhe,KAErD,WADAlrC,SAAQzD,MAAM,mDAIlB,IAEIysD,GAFAG,EAAY,EACZC,EAASx6D,KAAKw6D,QAAUnjB,SAAS0R,KAAK93C,QAAQ,qBAAsB,IAEpEwpD,EAAUH,UAAUhe,KAAKke,EAAQD,EAkCrCE,GAAQ/d,QAAUv9C,EAAKu7D,QAEvBD,EAAQN,UAAY,WAIhB,GAHAC,EAAKK,EAAQrnD,OACbgnD,EAAG1d,QAAUv9C,EAAKu7D,QAEdN,EAAGO,WACH,GAAIP,EAAG/xC,UAAYkyC,EAAW,CAC1B,GAAII,GAAaP,EAAGO,WAAWJ,EAC/BI,GAAWR,UAAY,WACnBR,EAAkBS,GAClBN,SAGJA,SAGJA,MAGRW,EAAQG,gBAAkB,SAAStlD,GAC/BqkD,EAAkBrkD,EAAMlR,OAAOgP,UAevCkiD,MAAO,SAASrzC,GAIZ,MAHAjiB,MAAKiiB,SAAWA,EAChBjiB,KAAKH,OAEEG,MAcXkjD,MAAO,SAASvzC,GAOZ,MANA3P,MAAK21D,UAAYhmD,EAAOgmD,UACxB31D,KAAK41D,UAAYjmD,EAAOimD,UACxB51D,KAAK61D,QAAUlmD,EAAOkmD,QAEtB71D,KAAKH,OAEEG,MAYX06D,QAAS,SAAS/sD,GACdyD,QAAQzD,MAAMsE,KAAKC,UAAUvE,EAAO,KAAM,QAU9CksD,cAAe,YACfW,OAAQ,KAGa,oBAAd/Y,KACPA,EAAUwB,YAAcA,GA2PH,mBAAdxB,KACPA,EAAUiE,YAAcA,GA2SH,mBAAdjE,KACPA,EAAU+E,oBAAsBA,KAGjCzpD,KAAKiD,KAAuB,mBAAXjB,QAAyBA,OAAyB,mBAATI,MAAuBA,KAAyB,mBAAXD,QAAyBA,gBAErH+K,GAAG,SAASzN,EAAQU,EAAOJ,GACjC,YAaA,SAAS+9D,GAAiBC,GACxB,GAAIC,GAAWD,EAAKvyD,OAAO2sB,KAAK8lC,aAEhC,OAAOC,GAAaF,GAGtB,QAASE,GAAa9iD,GACpB,MAAIA,IACFA,EAAQA,EAAMgjB,cACVhjB,IAASxI,GAAOpS,QAAQE,WACnBkS,EAAOpS,QAAQE,WAAW0a,GAE1B,MAGF,KAIX,QAAS+iD,KACP,GAAI38D,GAAOoR,EAAOpS,QAAQgB,IAC1B,OAAOA,GAAKoI,KAAK0hD,MAAM1hD,KAAK40C,SAAWh9C,EAAKvB,SAG9C,QAASm+D,GAAmBz0D,GAC1B,GAAInI,GAAOoR,EAAOpS,QAAQgB,IAC1B,OAAOA,GAAKmI,EAAQnI,EAAKvB,QArC3B4I,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQ+9D,iBAAmBA,EAC3B/9D,EAAQm+D,aAAeA,EACvBn+D,EAAQo+D,aAAeA,EACvBp+D,EAAQq+D,mBAAqBA,CAC7B,IAAIxrD,GAASnT,EAAQ,iBAEHM,GAAQs+D,YAAc,GAAIC,OAAM,EAAG,KA+BlDC,iBAAiB,IAAItwD,GAAG,SAASxO,EAAQU,EAAOJ,GACnD,cAEA,SAAWy+D,EAAMC,GAEO,kBAAXx8D,SAAyBA,OAAOC,IACzCD,UAAWw8D,GACgB,mBAAXt+D,IAA0BA,EAAOJ,QACjDI,EAAOJ,QAAU0+D,IAEjBD,EAAKE,cAAgBD,KAEtB12D,OAAW,WAaZ,QAAS42D,GAAQ7lC,GAEf,MAAOA,GAAIlvB,KAAKu6B,GAAK,IAGvB,QAASzC,GAAYliC,EAAGgsB,GAEtB,GAAIqb,GAAKrb,EAAEZ,EAAIprB,EAAEorB,EACbkc,EAAKtb,EAAE4W,EAAI5iC,EAAE4iC,CAEjB,OAAOx4B,MAAKq6B,KAAK4C,EAAKA,EAAKC,EAAKA,GAGlC,QAAS83B,GAAOC,EAAQpvD,GAEtBxM,KAAK47D,OAASA,EACd57D,KAAKwM,KAAOA,EACZxM,KAAK67D,gBAoMP,QAASJ,GAAcK,EAAUj/C,GAE/BA,EAAUA,MACV7c,KAAK4sC,UAAY/vB,EAAQ+vB,WAAa,EACtCmvB,EAAkBl/C,EAAQm/C,gBAAkB,GAE5Ch8D,KAAK87D,WAEL,KAAK,GAAIr/D,GAAI,EAAGA,EAAIq/D,EAAS9+D,OAAQP,IACnCuD,KAAKi8D,MAAMH,EAASr/D,GAAG+P,KAAMsvD,EAASr/D,GAAGm/D,QAzO7C,GAAIG,GACAG,EAAc,IACdC,EAAO,KAAO,EAAOx1D,KAAKq6B,KAAK,IAC/Bo7B,EAAcV,EAAQ,IACtBW,EAAkBX,EAAQ,GAC1BY,EAAmF,GAAnE31D,KAAKq6B,KAAKk7B,EAAcA,EAAcA,EAAcA,GACpEK,GACF50C,EAAG,EACHwX,EAAG,EA+UL,OAxTAw8B,GAAO57D,UAAU87D,cAAgB,WAS/B,MAPA77D,MAAK47D,OAAS57D,KAAKw8D,WACnBx8D,KAAKy8D,cACLz8D,KAAK47D,OAAS57D,KAAK08D,UAAU18D,KAAK28D,mBAClC38D,KAAK47D,OAAS57D,KAAK48D,gBACnB58D,KAAKy8D,cACLz8D,KAAK47D,OAAS57D,KAAK68D,oBAEZ78D,MAGT27D,EAAO57D,UAAUy8D,SAAW,WAO1B,IAAK,GALDM,GAAeC,EACf1vB,EAAWrtC,KAAKg9D,gBAAkBjB,EAAkB,GACpDv9B,EAAW,EACXy+B,GAAaj9D,KAAK47D,OAAO,IAEpBn/D,EAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IACtCqgE,EAAgBr+B,EAAYz+B,KAAK47D,OAAOn/D,EAAI,GAAIuD,KAAK47D,OAAOn/D,IAExD+hC,EAAWs+B,GAAiBzvB,GAC9B0vB,GACEp1C,EAAG3nB,KAAK47D,OAAOn/D,EAAI,GAAGkrB,GAAK0lB,EAAW7O,GAAYs+B,GAAiB98D,KAAK47D,OAAOn/D,GAAGkrB,EAAI3nB,KAAK47D,OAAOn/D,EAAI,GAAGkrB,GACzGwX,EAAGn/B,KAAK47D,OAAOn/D,EAAI,GAAG0iC,GAAKkO,EAAW7O,GAAYs+B,GAAiB98D,KAAK47D,OAAOn/D,GAAG0iC,EAAIn/B,KAAK47D,OAAOn/D,EAAI,GAAG0iC,IAG3G89B,EAAUh8D,KAAK87D,GACf/8D,KAAK47D,OAAOxrD,OAAO3T,EAAG,EAAGsgE,GACzBv+B,EAAW,GAEXA,GAAYs+B,CAQhB,OAJIG,GAAUjgE,SAAW++D,EAAkB,GACzCkB,EAAUh8D,KAAKjB,KAAK47D,OAAO57D,KAAK47D,OAAO5+D,OAAS,IAG3CigE,GAGTtB,EAAO57D,UAAU28D,SAAW,SAAUp+B,GAOpC,IAAK,GALD4+B,GACAC,EAAMx2D,KAAKw2D,IAAI7+B,GACf8+B,EAAMz2D,KAAKy2D,IAAI9+B,GACf2+B,KAEKxgE,EAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IACtCygE,EAAQl9D,KAAK47D,OAAOn/D,GAEpBwgE,EAAUh8D,MACR0mB,GAAIu1C,EAAMv1C,EAAI3nB,KAAKwoB,EAAEb,GAAKw1C,GAAOD,EAAM/9B,EAAIn/B,KAAKwoB,EAAE2W,GAAKi+B,EAAMp9D,KAAKwoB,EAAEb,EACpEwX,GAAI+9B,EAAMv1C,EAAI3nB,KAAKwoB,EAAEb,GAAKy1C,GAAOF,EAAM/9B,EAAIn/B,KAAKwoB,EAAE2W,GAAKg+B,EAAMn9D,KAAKwoB,EAAE2W,GAIxE,OAAO89B,IAGTtB,EAAO57D,UAAU68D,cAAgB,WAW/B,IAAK,GATDM,GACAD,KACAI,GACFC,OAAO7kB,EAAAA,GACP8kB,OAAO9kB,EAAAA,GACP+kB,OAAO/kB,EAAAA,GACPglB,OAAOhlB,EAAAA,IAGAh8C,EAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IACtCygE,EAAQl9D,KAAK47D,OAAOn/D,GAEpB4gE,EAAIC,KAAO32D,KAAKyzC,IAAIijB,EAAIC,KAAMJ,EAAMv1C,GACpC01C,EAAIG,KAAO72D,KAAKyzC,IAAIijB,EAAIG,KAAMN,EAAM/9B,GACpCk+B,EAAIE,KAAO52D,KAAKC,IAAIy2D,EAAIE,KAAML,EAAMv1C,GACpC01C,EAAII,KAAO92D,KAAKC,IAAIy2D,EAAII,KAAMP,EAAM/9B,EAMtC,KAHAk+B,EAAIlP,MAAQkP,EAAIE,KAAOF,EAAIC,KAC3BD,EAAIjP,OAASiP,EAAII,KAAOJ,EAAIG,KAEvB/gE,EAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IAClCygE,EAAQl9D,KAAK47D,OAAOn/D,GAEpBwgE,EAAUh8D,MACR0mB,EAAGu1C,EAAMv1C,GAAKu0C,EAAcmB,EAAIlP,OAChChvB,EAAG+9B,EAAM/9B,GAAK+8B,EAAcmB,EAAIjP,SAIpC,OAAO6O,IAGTtB,EAAO57D,UAAU88D,kBAAoB,SAAUjB,GAK7C,IAAK,GAHDsB,GACAD,KAEKxgE,EAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IACtCygE,EAAQl9D,KAAK47D,OAAOn/D,GAEpBwgE,EAAUh8D,MACR0mB,EAAGu1C,EAAMv1C,EAAI40C,EAAQ50C,EAAI3nB,KAAKwoB,EAAEb,EAChCwX,EAAG+9B,EAAM/9B,EAAIo9B,EAAQp9B,EAAIn/B,KAAKwoB,EAAE2W,GAIpC,OAAO89B,IAGTtB,EAAO57D,UAAU08D,YAAc,WAE7B,GAAIS,EACJl9D,MAAKwoB,GACHb,EAAG,EACHwX,EAAG,EAGL,KAAK,GAAI1iC,GAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IACtCygE,EAAQl9D,KAAK47D,OAAOn/D,GAEpBuD,KAAKwoB,EAAEb,GAAKu1C,EAAMv1C,EAClB3nB,KAAKwoB,EAAE2W,GAAK+9B,EAAM/9B,CAMpB,OAHAn/B,MAAKwoB,EAAEb,GAAK3nB,KAAK47D,OAAO5+D,OACxBgD,KAAKwoB,EAAE2W,GAAKn/B,KAAK47D,OAAO5+D,OAEjBgD,MAGT27D,EAAO57D,UAAU48D,gBAAkB,WAEjC,MAAOh2D,MAAKs6B,MAAMjhC,KAAKwoB,EAAE2W,EAAIn/B,KAAK47D,OAAO,GAAGz8B,EAAGn/B,KAAKwoB,EAAEb,EAAI3nB,KAAK47D,OAAO,GAAGj0C,IAG3Eg0C,EAAO57D,UAAUi9D,aAAe,WAI9B,IAAK,GAFDnnC,GAAI,EAECp5B,EAAI,EAAGA,EAAIuD,KAAK47D,OAAO5+D,OAAQP,IACtCo5B,GAAK4I,EAAYz+B,KAAK47D,OAAOn/D,EAAI,GAAIuD,KAAK47D,OAAOn/D,GAGnD,OAAOo5B,IAGT8lC,EAAO57D,UAAU29D,oBAAsB,SAAUC,GAS/C,IAPA,GAAIphE,IAAK6/D,EACL7zC,EAAI6zC,EACJwB,EAAKzB,EAAO5/D,GAAK,EAAM4/D,GAAQ5zC,EAC/Bs1C,EAAK79D,KAAK89D,gBAAgBH,EAASC,GACnCG,GAAM,EAAM5B,GAAQ5/D,EAAI4/D,EAAO5zC,EAC/By1C,EAAKh+D,KAAK89D,gBAAgBH,EAASI,GAEhCp3D,KAAKy4B,IAAI7W,EAAIhsB,GAAK8/D,GAEnBwB,EAAKG,GACPz1C,EAAIw1C,EACJA,EAAKH,EACLI,EAAKH,EACLD,EAAKzB,EAAO5/D,GAAK,EAAM4/D,GAAQ5zC,EAC/Bs1C,EAAK79D,KAAK89D,gBAAgBH,EAASC,KAEnCrhE,EAAIqhE,EACJA,EAAKG,EACLF,EAAKG,EACLD,GAAM,EAAM5B,GAAQ5/D,EAAI4/D,EAAO5zC,EAC/By1C,EAAKh+D,KAAK89D,gBAAgBH,EAASI,GAIvC,OAAOp3D,MAAKyzC,IAAIyjB,EAAIG,IAGtBrC,EAAO57D,UAAU+9D,gBAAkB,SAAUH,EAASr/B,GAMpD,IAAK,GAJD2/B,GAAej+D,KAAK08D,SAASp+B,GAC7B4/B,EAAgBP,EAAQ/B,OACxB/lC,EAAI,EAECp5B,EAAI,EAAGA,EAAIwhE,EAAajhE,OAAQP,IACvCo5B,GAAK4I,EAAYw/B,EAAaxhE,GAAIyhE,EAAczhE,GAGlD,OAAOo5B,GAAIooC,EAAajhE,QAgB1By+D,EAAc0C,gBACZvC,SAAWj0C,EAAG,EAAGwX,EAAG,KAAQxX,EAAG,IAAKwX,EAAG,KACvC3yB,KAAM,SAENovD,SAAWj0C,EAAG,GAAIwX,EAAG,IAAOxX,EAAG,GAAIwX,EAAG,MACtC3yB,KAAM,SAENovD,SAAWj0C,EAAG,EAAGwX,EAAG,IAAOxX,EAAG,IAAKwX,EAAG,MACtC3yB,KAAM,SAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAClmC3yB,KAAM,SAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,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SxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MACl5D3yB,KAAM,WAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MACve3yB,KAAM,UAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,KACrN3yB,KAAM,UAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,IAAKwX,EAAK,KAAQxX,EAAK,GAAIwX,EAAK,KAAQxX,EAAK,GAAIwX,EAAK,MACzI3yB,KAAM,UAENovD,SAAWj0C,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAC1vC3yB,KAAM,UAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MACjhD3yB,KAAM,UAENovD,SAAWj0C,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,IAAKwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MAASxX,EAAK,GAAIwX,EAAK,MACphF3yB,KAAM,UAGRivD,EAAc17D,UAAUq+D,KAAO,SAAUxC,EAAQyC,GAE5B,MAAfA,IACFA,EAAc,GAShB,KAAK,GAND7/B,GAAUm/B,EAASW,EACnBC,EAAS,GAAI5C,GAAOC,GACpB4C,IAAgB/lB,EAAAA,GAChBgmB,EAAc,KACdC,EAAY,EAEPjiE,EAAI,EAAGA,EAAIuD,KAAK87D,SAAS9+D,OAAQP,IACxCkhE,EAAU39D,KAAK87D,SAASr/D,GAEpBkhE,EAAQnxD,KAAKwL,QAAQqmD,IAAe,IACtC7/B,EAAW+/B,EAAOb,oBAAoBC,GACtCW,EAAQ,EAAM9/B,EAAW89B,EAErB99B,EAAWggC,GAAgBF,EAAQt+D,KAAK4sC,YAC1C4xB,EAAehgC,EACfigC,EAAcd,EAAQnxD,KACtBkyD,EAAYJ,GAKlB,QACEX,QAASc,EACTH,MAAOI,IAIXjD,EAAc17D,UAAUk8D,MAAQ,SAAUzvD,EAAMovD,GAE9C,MAAO57D,MAAK87D,SAAS76D,KAAK,GAAI06D,GAAOC,EAAQpvD,KAGxCivD,SAGHnvD,GAAG,SAAS9P,EAAQU,EAAOJ,GACjC,YAcA,SAAS6hE,KACPz/D,OAAO0/D,KACLnM,aAAc,UACdoM,eACAC,oBAAqB,KACrBC,mBAAoB,KACpBC,iBACAC,UAAW,KACXC,aAAa,EACbC,SACAzkB,SAAS,EACT0kB,UAAU,EACVC,aAAc,KACdC,WAAY,KACZC,YACAC,UAAW,KACXC,UAAW,KACXC,SACAC,QACAC,WACAC,UAAW,EACXC,aAAc,EACdC,iBAAkB,KAClBC,oBACEC,MAAQ,EACRC,OAAS,EACTC,OAAS,GAEXC,kBAAmB,KACnBC,kBAAmB,KACnBC,wBAAwB,EACxBC,kBAAkB,EAClBC,eAAgB,EAChBC,qBAAsB,KACtBC,IAAK,KACLC,iBAAkB,KAClBC,0BAA2B,KAC3BC,YAAa,MAjDjBj7D,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQ6hE,YAAcA,CACtB,IAAI37B,GAAQxmC,EAAQ,WAChBskE,EAAKtkE,EAAQ,QACbukE,EAAWvkE,EAAQ,cAEnBwkE,GADQxkE,EAAQ,WACPA,EAAQ,aACjB+E,EAAO/E,EAAQ,UACfo0C,EAAQp0C,EAAQ,UA2CpBykE,GAAE/hE,QAAQ0vC,GAAG,OAAQ,WACnB,QAASiS,KACP8d,IACAp9D,EAAK2/D,SACLJ,EAAGjhE,OACHkhE,EAASlhE,OACTmhE,EAAOnhE,OACP+wC,EAAM/wC,OAAO+d,KAAK,WAEhBolB,EAAMnjC,SACLyd,KAAK,SAAUthB,GAChBoV,QAAQzD,MAAM,+BAAgC3R,GAC9Cq7C,SAAS8pB,WAIb,IACEtgB,IACA,MAAO7kD,GACPoV,QAAQzD,MAAM3R,GACduG,WAAW,WAET80C,SAAS8pB,UACR,UAIJC,aAAa,GAAGC,UAAU,GAAGC,WAAW,GAAGC,UAAU,GAAGC,OAAO,GAAGt+D,SAAS,GAAGu+D,UAAU,KAAKppD,IAAI,SAAS7b,EAAQU,EAAOJ,GAC5H,YAsCA,SAAS4kE,GAAYC,GAEnB,GAAIziE,OAAO0/D,IAAImC,YAAa,GACxBa,EAAYC,SAASF,GAAc,CACrC,GAAIziE,OAAO0/D,IAAIQ,YAAa,GAAQlgE,OAAO0/D,IAAIkD,WAAY,EAOzD,YANoB,aAAhBH,EACFX,EAAOe,2BAGP7iE,OAAO0/D,IAAI+B,iBAAmBgB,EAWlC,QAPAK,IACAC,EAASC,qBACTC,EAAMC,SAASC,GACfF,EAAM3nC,KAAK,uBAAuBoU,GAAG0zB,EAAU,WAC7CN,MAGML,GACN,IAAK,QACHY,GACA,MACF,KAAK,cACChhE,EAAKihE,oBACPC,IAEAvjE,OAAO0/D,IAAIyB,kBAAoB99D,WAAW,WACxCm/D,EAAY,gBACXV,EAAO0B,gBAAkB,EAE9B,MACF,KAAK,eACHC,GACA,MACF,KAAK,WACHC,GACA,MACF,KAAK,OACHC,GACA,MACF,KAAK,QACHC,MAQR,QAASP,KACPJ,EAAMC,SAAS,gBAGjB,QAASK,KACPN,EAAMC,SAAS,sBAGjB,QAASO,KACPR,EAAMC,SAAS,uBAGjB,QAASW,KACP9B,EAAE,oCAAoC+B,KAAKpwD,SAASouD,EAAOiC,wBAA0B,MACrF5oB,cAAcn7C,OAAO0/D,IAAIgC,2BAG3B,QAASgC,KACPT,EAAMC,SAAS,mBAEfW,IACAhvC,aAAa70B,OAAO0/D,IAAIwB,mBACxBrsC,aAAa70B,OAAO0/D,IAAIyB,mBAExBnhE,OAAO0/D,IAAIgC,0BAA4B1mB,YAAY,WACjD,GAAIgpB,GAAoBjC,EAAE,oCACtBpuC,EAAQjgB,SAASswD,EAAkBF,OACnCnwC,GAAQ,GACVqwC,EAAkBF,KAAKnwC,EAAQ,IAEhC,KAEH3zB,OAAO0/D,IAAIwB,kBAAoB79D,WAAW,WACxCukD,EAAMqc,qBACLnC,EAAOiC,yBAGZ,QAASJ,KACPV,EAAMC,SAAS,eACfgB,IAGF,QAASN,KACPX,EAAMC,SAAS,gBAIjB,QAASiB,KACP,GAAIC,GAAOnB,EAAM3nC,KAAK,uBAClB+oC,EAAOD,EAAKrjD,OAAOjjB,OAASsmE,EAAKrjD,OAASujD,EAAWC,QACrDC,EAAQH,EAAKtjD,OAAOjjB,OAASumE,EAAKtjD,OAASujD,EAAWC,QACtDE,EAASD,EAAMzjD,OAAOjjB,OAAS0mE,EAAMzjD,OAASujD,EAAWC,QAAQxjD,OACjE2jD,EAAQL,EAAK78D,OACjB48D,GAAKO,cAAczB,SAAS,UAC5BmB,EAAKM,cAAczB,SAAS,WAC5BsB,EAAMG,cAAczB,SAAS,QAC7BuB,EAAOE,cAAczB,SAAS,SAC9B0B,EAAkBF,EAAQ,EAAGG,GAC7BxhE,WAAW,WACT+gE,EAAKO,eACJ,KAIL,QAASG,KACP,GAAIC,GAAwB,CAE5B9B,GAAM3nC,KAAK,YAAYoU,GAAG0zB,EAAU,SAAUtmE,GAC5C,GAAIq8C,GAAcvQ,KAAK1J,KACnB6lC,GAAwB5rB,EAAc,MAG1C4rB,EAAwB5rB,EAEwB,GAA5C4oB,EAAEjlE,EAAEoI,QAAQ8/D,QAAQ,cAAclnE,OAEpCqmE,IAGArB,OAKN,QAASmC,KACPX,EAAWK,cACXO,EAAYpB,KAAK,IAInB,QAAShB,KACPG,EAAM0B,YAAY,kBAClB1B,EAAM0B,YAAYQ,GAClBF,IAIF,QAASf,KACP,GAAIG,GAAOC,EAAWC,QAClBC,EAAQH,EAAKtjD,OAAOjjB,OAASumE,EAAKtjD,OAASujD,EAAWC,QACtDE,EAASD,EAAMzjD,OAAOjjB,OAAS0mE,EAAMzjD,OAASujD,EAAWC,QAAQxjD,MACrEujD,GAAWK,cACXN,EAAKM,cAAczB,SAAS,WAC5BsB,EAAMG,cAAczB,SAAS,QAC7BuB,EAAOE,cAAczB,SAAS,SAC9B0B,EAAkB,EAAGC,GAIvB,QAASD,GAAkBxzD,EAASg0D,GAClCC,EAAQ/pC,KAAK,YAAYwoC,KAAK1yD,GAC9Bi0D,EAAQ/pC,KAAK,SAASwoC,KAAKsB,GAI7B,QAASE,KAEPJ,EAAYK,KAAK,gBAEjBC,EAAalqC,KAAK,QAAQoU,GAAG0zB,EAAU,SAAUtmE,GAC/C,GAAI2oE,GAAcP,EAAYpB,OAAO58D,WAAa66D,EAAEjlE,EAAEoI,QAAQ4+D,OAAO58D,UACrEu+D,GAAcP,EAAYQ,OAAOD,GACjCP,EAAYpB,KAAK2B,KAGnBD,EAAalqC,KAAK,UAAUoU,GAAG0zB,EAAU,SAAUtmE,GACjDooE,EAAYpB,KAAK,MAOrB,QAAS6B,KACP1C,EAAM3nC,KAAK,sBAAsBlhB,KAAK,SAAU7c,EAAGqoE,GACjD7D,EAAE6D,GAAIC,KAAK,UAAWtoE,KAI1B,QAASuoE,KACPhB,IAGF,QAASiB,KACPT,IACAK,IAGF,QAAShlE,KACPmlE,IACAC,IA7OFr/D,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQ4kE,YAAcA,EACtB5kE,EAAQimE,uBAAyBA,EACjCjmE,EAAQumE,YAAcA,EACtBvmE,EAAQklE,sBAAwBA,EAChCllE,EAAQ+C,KAAOA,CACf,IAEImjC,IAFSxmC,EAAQ,kBAETA,EAAQ,YAChBsqD,EAAQtqD,EAAQ,WAChBwkE,EAASxkE,EAAQ,YACjBylE,EAAWzlE,EAAQ,cACnB+E,EAAO/E,EAAQ,UAIf2lE,GAFen/B,EAAMkiC,aAEbjE,EAAE,SACVqB,EAAW,kBAEX6C,EAAahD,EAAM3nC,KAAK,4BACxBgpC,EAAa2B,EAAW3qC,KAAK,WAC7BupC,EAAaP,EAAWxmE,OACxBunE,EAAUpC,EAAM3nC,KAAK,yBAErB4pC,EAAcjC,EAAM3nC,KAAK,UACzBkqC,EAAevC,EAAM3nC,KAAK,WAE1BonC,GAAe,QAAS,cAAe,eAAgB,WAAY,OAAQ,SAC3EyC,EAAqBzC,EAAYjlD,IAAI,SAAUyoD,GACjD,MAAOA,GAAU,YAChBh3D,KAAK,KAEJi0D,EAAqB,mBA8MtB/G,iBAAiB,EAAEgG,WAAW,GAAGC,UAAU,GAAG8D,aAAa,GAAGniE,SAAS,GAAGu+D,UAAU,KAAK1oD,IAAI,SAASvc,EAAQU,EAAOJ,GACxH,YAiDA,SAASwoE,GAAiBC,GAExB,GAAIC,GAAkBjkE,EAAKkkE,aAAaF,EAEpCC,GAAgBxoE,OAAS,GAC3BwoE,EAAgB53C,QAAQ,SAAUxwB,GAChC,MAAOA,GAAIuxC,UAGMptC,GAAKkkE,aAAaF,GAIzC,QAASG,GAAoBC,GAC3B,GAAIJ,GAAQK,MAAMC,QAAQC,SACxBC,UAAW,QACX52D,MAAO,SAAe21D,GACpB,MAAOA,GAAG7/B,KAAO0gC,IAIfJ,IAASA,EAAMS,SAAShpE,OAAS,GACrCuoE,EAAMS,SAASp4C,QAAQ,SAAUq4C,GACP,SAApBA,EAAWz5D,MACb05D,EAAWD,KAMnB,QAASC,GAAW17D,GAClB,GAAI4wD,GAAcjjD,EAAMijD,YAEpB7yD,EAASiC,EAAKjC,MAKdiC,GAAK0qB,KAAKixC,UAEZ37D,EAAK0qB,KAAKkmC,aAAe5wD,EAAK0qB,KAAKkmC,YAE/B5wD,EAAK0qB,KAAKkmC,aAEZ5wD,EAAK47D,UAAYhL,EACjB5wD,EAAK67D,YAAcjL,IAGnB5wD,EAAK47D,UAAY79D,EAAO2sB,KAAK/c,MAC7B3N,EAAK67D,YAAc99D,EAAO2sB,KAAK/c,OAGjCjZ,OAAO0/D,IAAIO,MAAMl+D,MACftC,KAAM,aACNsmC,GAAIz6B,EAAKy6B,GACTg7B,KAAM13D,EAAO2sB,KAAK/c,MAClBijD,YAAa5wD,EAAK0qB,KAAKkmC,eAKnB5wD,EAAK0qB,MAAQ1qB,EAAK0qB,KAAK93B,OAAQ,GAC7BoN,EAAKjC,QACLoH,EAAOvS,OAAQ,GACjBsoE,EAAoBl7D,EAAKjC,OAAO08B,IAO1C,QAASqhC,GAAaf,GAEpB,GAAIgB,IAAmB,OAAQ,QAAS,YAAa,OAAQ,MAQ7D,OANAhB,GAAMS,SAASp4C,QAAQ,SAAUq4C,IACP,OAApBA,EAAWz5D,OAAkB+5D,EAAgB1E,SAASoE,EAAWz5D,QAAUy5D,EAAWjpE,OAAS,IACjGipE,EAAWt3B,WAIR42B,EAGT,QAASiB,KACP,GAAIC,GAAcllE,EAAKmlE,iBACnBC,EAAgBplE,EAAKqlE,kBACXrlE,GAAKslE,YACnBF,GAAcvO,UAKdqO,EAAY74C,QAAQ,SAAUk5C,EAAYrqE,GAIxC,GAAIsqE,GAAaD,EAAWE,eAAevC,KAAK,EAChDsC,GAAWE,eAMXN,EAAc/4C,QAAQ,SAAUs5C,EAAYr8D,GAC1C,GAAIs8D,GAAkBD,EAAWF,eAAevC,KAAK,EACrD,IAAIqC,EAAW7hC,KAAOiiC,EAAWjiC,GAAI,CAInCkiC,EAAgBF,cAChB,IAAIG,GAAUL,EAAWM,UAAUF,EACnC,IAAMC,GAAWA,EAAQpqE,OAAS,EAAG,CAEnC,GAAIsqE,GAAWnvD,EAAM+iD,cACrBkM,GAAQhB,UAAYkB,EACpBF,EAAQf,YAAciB,EACtBF,EAAQlyC,KAAK93B,KAAM,EACnBgqE,EAAQ56D,KAAO,MACf46D,EAAQlyC,KAAKqyC,SAAWT,EAAW7hC,GACnCmiC,EAAQlyC,KAAKsyC,kBAAoBN,EAAWjiC,GAC5CmiC,EAAQK,SAAU,EAClBL,EAAQM,QAAS,EACjBN,EAAQH,eACRH,EAAWa,SAASP,GAGtBd,EAAaQ,MAwBjBA,EAAW5xC,KAAK0yC,OAAQ,IAI5B,QAASC,GAAgBC,GAEvB,GAAIC,GAAY,GAAIC,KACpBD,GAAUv7D,KAAO,QACjBu7D,EAAUN,SAAU,CAEpB,IAAIQ,GAAa,GAAID,KACrBC,GAAWz7D,KAAO,QAClB,IAAI47C,MACA9pB,EAAQ,KACR4pC,EAAY,KAGZC,EAAW,KACXC,EAAc,KACdC,EAAU,KACVC,EAAa,IAEjB,MAAMR,EAAW9qE,OAAS,GAAI,MAAO,IAAIurE,OAAMR,EAAWE,EAE1DA,GAAW7gC,IAAI0gC,EAAWU,aAAatL,MAEvC,KAAK,GAAIzgE,GAAI,EAAGA,EAAIqrE,EAAW9qE,OAAQP,GAAK,GAAI,CAC9C,KAAO2rD,EAAMprD,OAAS,IACpBorD,EAAMtlD,OAGR,IAAI6qB,GAAuB,EAAhBhnB,KAAK40C,QAChB6M,GAAMnnD,KAAK0sB,EAGX,KAAK,GADD86C,GAAU,EACL59D,EAAI,EAAGA,EAAIu9C,EAAMprD,OAAQ6N,IAChC49D,GAAWrgB,EAAMv9C,EAEnB,IAAI69D,GAAU/hE,KAAKC,IAAI,GAAI6hE,EAAUrgB,EAAMprD,OAAS2wB,GAAQ,GAExDuvC,EAAQ4K,EAAWa,WAAWlsE,GAC9BmsE,EAASd,EAAWe,YAAYpsE,GAEhCqsE,EAAM,GAAIC,OAAM7L,EAAMv1C,EAAIihD,EAAOjhD,EAAI+gD,EAASxL,EAAM/9B,EAAIypC,EAAOzpC,EAAIupC,GACnEM,EAAS,GAAID,OAAM7L,EAAMv1C,EAAIihD,EAAOjhD,EAAI+gD,EAASxL,EAAM/9B,EAAIypC,EAAOzpC,EAAIupC,EAK1EX,GAAU3gC,IAAI0hC,GACdf,EAAUkB,OAAO,EAAGD,GACpBf,EAAW7gC,IAAI81B,GAEfgL,EAAY5pC,EAEH,IAAL7hC,GACF0rE,EAAWW,EACXV,EAAcY,IAEdX,EAAUS,EACVR,EAAaU,GAIjB,GAAIlB,EAAWJ,UAAW,EAAM,CAC9B,GAAIwB,GAAY,GAAIH,QAAOZ,EAASxgD,EAAI0gD,EAAQ1gD,GAAK,GAAIwgD,EAAShpC,EAAIkpC,EAAQlpC,GAAK,GAC/EgqC,EAAe,GAAIJ,QAAOX,EAAYzgD,EAAI2gD,EAAW3gD,GAAK,GAAIygD,EAAYjpC,EAAImpC,EAAWnpC,GAAK,GAC9FlB,EAAS,GAAI8qC,QAAOG,EAAUvhD,EAAIwhD,EAAaxhD,GAAK,GAAIuhD,EAAU/pC,EAAIgqC,EAAahqC,GAAK,EAE5F4oC,GAAU3gC,IAAI8hC,GACdnB,EAAUkB,OAAO,EAAGE,GACpBlB,EAAW7gC,IAAInJ,GAEf8pC,EAAU3gC,IAAI+gC,GACdJ,EAAUkB,OAAO,EAAGb,GACpBH,EAAWP,QAAS,EAGtBK,EAAUqB,QAAQ,IAClBnB,EAAWmB,QAAQ,IACnBrB,EAAUsB,WACVpB,EAAWoB,WAEXtB,EAAUuB,UAAW,EAErBvB,EAAUv7D,KAAO,QACjBy7D,EAAWz7D,KAAO,QAClB,IAAI+8D,GAAc,GAAIhB,OAAMR,EAAWE,EACvC,OAAOsB,GAGT,QAASC,GAAc1O,GACrB,GAAI2O,GAAY3O,EAAK4O,OACrBD,GAAUhC,SAAU,CAEpB,IAAIkC,GAAgBC,EAAiBH,GAIjCI,EAAYF,CAMhB,OAHAE,GAAUC,YAAcL,EAAUK,YAElCL,EAAU96B,SACHk7B,EAIT,QAASD,GAAiB9O,GACxB,GAAI2O,GAAY3O,EAAK4O,OACrBD,GAAUhC,SAAU,EACpBgC,EAAUrwD,SACVqwD,EAAUJ,UAEV,IAAIU,GAAgBN,EAAUO,kBAE9B,IAAID,EAAc/sE,OAAS,EAAG,CAE5B,GAAIitE,GAAcC,EAAeT,EAIjC,OAFAA,GAAU96B,SAEHs7B,EAGP,GAAIE,GAAeC,EAAgBX,GAC/BY,EAAiBF,EAAaH,kBAIlC,IAAIK,EAAertE,OAAS,EAAG,CAE7B,GAAIstE,GAAeJ,EAAeC,EAElC,OADAA,GAAax7B,SACN27B,EAIP,GADAH,EAAaI,YAAYC,EAAqBf,IACzB,OAAjBU,EAAuB,CACzB,GAAIM,GAAkBN,EAAaH,kBAEnC,IAAIS,EAAgBztE,OAAS,EAAG,CAC9B,GAAI0tE,GAAgBR,EAAeC,EAEnC,OADAA,GAAax7B,SACN+7B,EAGHP,GAAgBA,EAAantE,OAAS,GAC1CmtE,EAAax7B,SAKjB,MADA86B,GAAUhC,SAAU,EACbgC,EAKb,QAASkB,GAAmB7P,GAC1B,GAAI8P,MAEAC,EAAY/P,EAAKgQ,aACjBC,EAAYC,EAAiBH,GAE7BI,EAAkBC,EAAS9M,KAAK2M,EAgBpC,IAd8B,IAA1BE,EAAgB3M,OAGlBsM,EAAWjN,QAAU,OACrBiN,EAAWtM,MAAQ,KAEf2M,EAAgB3M,MAAQ,GAC1BsM,EAAWjN,QAAUsN,EAAgBtN,QAErCiN,EAAWjN,QAAU,QAEvBiN,EAAWtM,MAAQ2M,EAAgB3M,OAGjCxD,EAAK4M,UAAW,EAAM,CACxB,GAAIyD,IAAgB,WAAY,SAAU,SACtCA,GAAatJ,SAAS+I,EAAWjN,YAAa,IAEhDiN,EAAWjN,QAAUp8D,EAAK6pE,WAAWD,QAE9BrQ,GAAKuQ,WAAWvQ,MAAU,EACnC8P,EAAWjN,QAAU,QAMrBiN,EAAWjN,QAAU,MAKvB,OAAOiN,GAIT,QAASU,GAAgBpO,GACvB,MAAO,IAAI6L,OAAMpiE,KAAK0hD,MAAM6U,EAAMv1C,GAAIhhB,KAAK0hD,MAAM6U,EAAM/9B,IAGzD,QAASosC,GAAerO,GACtB,MAAOv2D,MAAK0hD,MAAM6U,EAAMv1C,GAAK,IAAMhhB,KAAK0hD,MAAM6U,EAAM/9B,GAGtD,QAASqsC,GAAWC,GAClB,GAAI58D,GAAQ48D,EAAS58D,MAAM,KAAK8N,IAAI,SAAU86B,GAC5C,MAAO9wC,MAAK0hD,MAAM5Q,IAGpB,OAAI5oC,GAAM7R,QAAU,EACX,GAAI+rE,OAAMl6D,EAAM,GAAIA,EAAM,IAG5B,KAGT,QAAS68D,GAA4BxO,EAAOqC,GAC1C,GAAIoM,GAAgB,OAChBC,EAAe,MAUnB,OARAC,MAAKvyD,KAAKimD,EAAU,SAAUuM,EAAOrvE,GACnC,GAAI+hC,GAAW0+B,EAAMz+B,YAAYqtC,EAAM5O,SAClCyO,GAAiBntC,EAAWmtC,KAC/BA,EAAgBntC,EAChBotC,EAAeE,EAAM5O,SAIlB0O,GAAgB1O,EAGzB,QAAS8N,GAAiBvS,GACxB,GAAIsT,MACAC,EAAU/5D,KAAKg6D,MAAMxT,GAAM,EAE/B,IAAI,YAAcuT,GAAS,CACzB,GAAIE,GAAWF,EAAQE,QACvBL,MAAKvyD,KAAK4yD,EAAU,SAAUC,EAAS1vE,GACrC,GAAuB,IAAnB0vE,EAAQnvE,OAAc,CACxB,GAAIovE,GAAeD,EAAQ,EAC3BJ,GAAY9qE,MACV0mB,EAAGykD,EAAa,GAChBjtC,EAAGitC,EAAa,SAGlBL,GAAY9qE,MACV0mB,EAAGwkD,EAAQ,GACXhtC,EAAGgtC,EAAQ,OAKnB,MAAOJ,GAGT,QAASM,GAAmBvR,GAC1B,GAAIM,GAAcjjD,EAAMijD,YAEpBkR,KAEA7C,EAAY3O,EAAK4O,QACjBK,EAAgBN,EAAUO,kBAE9B,IAAID,EAAc/sE,OAAS,EAAG,CAC5B,GAAIuvE,GAAc9C,EAAU+C,kBAG5B,IAA8B,iBAA1BD,EAAYxG,UACd8F,KAAKvyD,KAAKizD,EAAYvG,SAAU,SAAU/9D,EAAOxL,GAC/C,GAAIwL,EAAMjL,OAAS,GAAKiL,EAAMy/D,OAAQ,CACpC,GAAI+E,GAAexkE,EAAMyhE,OACrBD,GAAU/B,QACZ+E,EAAarG,UAAYqD,EAAUpD,YACnCoG,EAAav3C,KAAKixC,UAAW,EAC7BsG,EAAav3C,KAAKkmC,aAAc,IAEhCqR,EAAarG,UAAYhL,EACzBqR,EAAav3C,KAAKkmC,aAAc,GAElCqR,EAAav3C,KAAKixC,UAAW,EAC7BsG,EAAahF,SAAU,EACvBgF,EAAa/E,QAAS,EACtB4E,EAAerrE,KAAKwrE,UAIxB,IAAIhD,EAAU/B,OAAQ,CACpB,GAAI+E,GAAehD,EAAUC,OAC7B+C,GAAahF,SAAU,EACvBgF,EAAarG,UAAYqD,EAAUpD,YACnCoG,EAAav3C,KAAKixC,UAAW,EAC7BsG,EAAav3C,KAAKkmC,aAAc,EAChCkR,EAAerrE,KAAKwrE,QAIxB,IAAIhD,EAAU/B,OAAQ,CACpB,GAAIgF,GAAgBjD,EAAUC,OAC9BgD,GAAcjF,SAAU,EACxBiF,EAActG,UAAYqD,EAAUpD,YACpCqG,EAAcx3C,KAAKixC,UAAW,EAC9BuG,EAAcx3C,KAAKkmC,aAAc,EACjCkR,EAAerrE,KAAKyrE,GAIxB,MAAOJ,GAGT,QAASlC,GAAgBtP,GACvB,GAEIqP,IAFa7nE,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,IAAmBA,UAAU,GAE7Dw4D,EAAK4O,QACxBS,GAAa1C,SAAU,CAEvB,IAAIkF,GAAgBC,EAA0BzC,EAAantE,OAEvDwrE,EAAe2B,EAAa3B,aAC5BqE,EAAcrE,EAAavoD,KAC3B6sD,EAAanmE,KAAKs6B,MAAM4rC,EAAY3P,MAAM/9B,EAAIqpC,EAAatL,MAAM/9B,EAAG0tC,EAAY3P,MAAMv1C,EAAI6gD,EAAatL,MAAMv1C,GAC7GolD,EAAoBD,EAAanmE,KAAKu6B,GACtC8rC,EAAqB,GAAIjE,OAAMP,EAAatL,MAAMv1C,EAAIhhB,KAAKw2D,IAAI4P,GAAqBJ,EAAgB,EAAGnE,EAAatL,MAAM/9B,EAAIx4B,KAAKy2D,IAAI2P,GAAqBJ,EAAgB,EAChLxC,GAAalB,OAAO,EAAG+D,EAEvB,IAAIC,GAAc9C,EAAa8C,YAC3BC,EAAaD,EAAYE,SACzBC,EAAWzmE,KAAKs6B,MAAMgsC,EAAY/P,MAAM/9B,EAAI+tC,EAAWhQ,MAAM/9B,EAAG8tC,EAAY/P,MAAMv1C,EAAIulD,EAAWhQ,MAAMv1C,GACvG0lD,EAAmB,GAAItE,OAAMkE,EAAY/P,MAAMv1C,EAAIhhB,KAAKw2D,IAAIiQ,GAAYT,EAAgB,EAAGM,EAAY/P,MAAM/9B,EAAIx4B,KAAKy2D,IAAIgQ,GAAYT,EAAgB,EAK1J,OAJAxC,GAAa/iC,IAAIimC,GAIVlD,EAGT,QAASK,GAAqB1P,GAC5B,GAAIqP,GAAerP,EAAK4O,OACxBS,GAAa1C,SAAU,CAEvB,IAAIkF,GAAgBC,EAA0BzC,EAAantE,OACvDswE,EAAanD,EAAa3B,aAAatL,MACvCqQ,EAAYpD,EAAa8C,YAAY/P,KAEzC,IAAIoQ,EAAW7uC,YAAY8uC,GAAaZ,EAAe,CACrDxC,EAAalB,OAAO,EAAGsE,GACvBpD,EAAa/iC,IAAIkmC,GACjBnD,EAAazC,QAAS,EACtByC,EAAaqD,OACb,IAAIC,GAAYtD,EAAaqC,kBACvBiB,IAAeA,EAAUzH,UAAYyH,EAAUzH,SAAShpE,OAAS,IACrE,WACE,GAAI0wE,GAAU,EACVC,EAAW,IACfF,GAAUzH,SAASp4C,QAAQ,SAAU3lB,GAC/BA,EAAM2lE,KAAOF,IACfC,EAAW1lE,EACXylE,EAAUzlE,EAAM2lE,QAIpBzD,EAAewD,KAKrB,MAAOxD,GAGT,QAASD,GAAepP,GACtB,GAAI2O,GAAY3O,EAAK4O,OACrBD,GAAUhC,SAAU,CAEpB,IAAI6F,GAAa7D,EAAUjB,aAAatL,MACpCqQ,EAAY9D,EAAUwD,YAAY/P,MAClCyP,EAAgBC,EAA0BnD,EAAUzsE,OAEpD+sE,EAAgBN,EAAUO,kBAS9B,IARAD,EAAcn8C,QAAQ,SAAUigD,EAAcpxE,GAChB,IAAxBoxE,EAAajuC,QACfmqC,EAAc35D,OAAO3T,EAAG,KAMA,GAAxBstE,EAAc/sE,OAAa,CAC7B,IAAK,GAAIP,GAAI,EAAGA,EAAIstE,EAAc/sE,OAAQP,IAAK,CAC7C,GAAIqxE,GAAoB/D,EAActtE,GAAGygE,KAGzC,IAAIoQ,EAAW7uC,YAAYqvC,GAAqBP,EAAU9uC,YAAYqvC,GAAqB,EAAInB,EAAe,CAE5G,GAAIJ,GAAc9C,EAAUC,OAC5B6C,GAAY9E,SAAU,CACtB,IAAIsG,GAAgBxB,EAAYC,kBAEhC,IAAgC,iBAA5BuB,EAAchI,WAAgCgI,EAAc/H,SAAShpE,OAAS,EAChF,IAAK,GAAI6N,GAAI,EAAGA,EAAIkjE,EAAc/H,SAAShpE,OAAQ6N,IAAK,CACtD,GAAI5C,GAAQ8lE,EAAc/H,SAASn7D,EAC/B5C,GAAMy/D,SAER6E,EAAcA,EAAYyB,SAAS/lE,IAOzC,GAAIgiE,GAAcR,EAAUuE,SAASzB,EACrC,IAA2B,IAAvBtC,EAAYjtE,OAAc,MAAOysE,EACrC,IAA8B,iBAA1BQ,EAAYlE,WAAgCkE,EAAYjE,SAAShpE,OAAS,EAAG,CAC/E,GAAIixE,GAAQ,WACV,GAAIC,KASJ,IARAjE,EAAYjE,SAASp4C,QAAQ,SAAU3lB,EAAOxL,GAC5C,GAAIwL,EAAMjL,OAAS,GAAKiL,EAAMy/D,OAAQ,CACpC,GAAIyG,GAAalmE,EAAMyhE,OACvByE,GAAW1G,SAAU,EACrByG,EAAejtE,KAAKktE,MAIpBD,EAAelxE,OAAS,EAAG,CAC7B,GAAIkxE,EAAelxE,OAAS,EAAG,CAI7B,IAAK,GAFDoxE,GAAcF,EAAe,GAExBG,EAAK,EAAGA,EAAKH,EAAelxE,OAAQqxE,IAC3CD,EAAcA,EAAYZ,MAAMU,EAAeG,GAGjD,IAAID,EAAYpxE,OAAS,GAA+B,SAA1BoxE,EAAYrI,UAAsB,CAE9D,GAAIuI,GAAU,GAAItG,KAOlB,OANAsG,GAAQC,YAAYH,GACpBE,EAAQE,eAAe/E,GACvB2E,EAAYz/B,SACZ86B,EAAU96B,SACV49B,EAAY59B,SACZs7B,EAAYt7B,UAEVvqB,EAAGkqD,IAST,MAJA7E,GAAU96B,SACV49B,EAAY59B,SACZs7B,EAAYt7B,UAGVvqB,EAAG8pD,EAAe,OAKxB,IAAsE,YAAhD,mBAAVD,GAAwB,YAAcQ,EAAQR,IAAsB,MAAOA,GAAM7pD,EAQ/F,MAFAqlD,GAAU96B,SACV49B,EAAY59B,SACLs7B,GAKX,MAAOR,GAEP,MAAO3O,GAIX,QAAS4T,GAAmBxR,GAC1B,GAAIyR,GAASptE,EAAKqtE,kBAClB,OAAOC,GAAc3R,EAAOyR,GAG9B,QAASE,GAAc3R,EAAO8I,GAC5B,IAAK9I,EAAO,MAAO,KAEnB,KAAK,GAAIzgE,GAAIupE,EAAShpE,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC7C,GAAIwL,GAAQ+9D,EAASvpE,EACRwL,GAAM6mE,YACnB,IAAI5R,EAAM6R,SAAS9mE,EAAM6mE,cACvB,MAAO7mE,GAIX,MAAO,MAvrBTrC,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,GAGT,IAAIspE,GAA4B,kBAAXr2C,SAAoD,gBAApBA,QAAOrD,SAAwB,SAAU/vB,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXozB,SAAyBpzB,EAAI6U,cAAgBue,QAAUpzB,IAAQozB,OAAOr4B,UAAY,eAAkBiF,GAEtQlI,GAAQwoE,iBAAmBA,EAC3BxoE,EAAQ4oE,oBAAsBA,EAC9B5oE,EAAQopE,WAAaA,EACrBppE,EAAQwpE,aAAeA,EACvBxpE,EAAQ0pE,WAAaA,EACrB1pE,EAAQ+qE,gBAAkBA,EAC1B/qE,EAAQ0sE,cAAgBA,EACxB1sE,EAAQ8sE,iBAAmBA,EAC3B9sE,EAAQ6tE,mBAAqBA,EAC7B7tE,EAAQwuE,gBAAkBA,EAC1BxuE,EAAQyuE,eAAiBA,EACzBzuE,EAAQ0uE,WAAaA,EACrB1uE,EAAQ4uE,4BAA8BA,EACtC5uE,EAAQkuE,iBAAmBA,EAC3BluE,EAAQuvE,mBAAqBA;AAC7BvvE,EAAQstE,gBAAkBA,EAC1BttE,EAAQ0tE,qBAAuBA,EAC/B1tE,EAAQotE,eAAiBA,EACzBptE,EAAQ4xE,mBAAqBA,EAC7B5xE,EAAQ+xE,cAAgBA,CACxB,IAAIpT,GAAgBj/D,EAAQ,wBAExBmT,EAASnT,EAAQ,kBAEjB+E,EAAO/E,EAAQ,UACf2b,EAAQ3b,EAAQ,WAGhBowE,GADqB9vE,EAAQkyE,mBAAqB,GACxBlyE,EAAQ8vE,wBAA0B,IAE5D1B,EAAWpuE,EAAQouE,SAAW,GAAIzP,GAAcA,EAAc0C,cAEjDrhE,GAAQmyE,YAAc,OAAQ,SAAU,SAAU,WAAY,WAopB5E3T,iBAAiB,EAAE4T,UAAU,EAAEC,uBAAuB,EAAEjsE,SAAS,KAAKsW,IAAI,SAAShd,EAAQU,EAAOJ,GACrG,YAkBA,SAASilD,KACP,GAAIqtB,GAAM,GAAIhtB,UAAS7S,OAAOO,YAC5Bu/B,WAAY,6BAGdC,GAAe3tB,iBACfytB,EAAIrtB,SAEJnR,EAAM2+B,2BAA2B3xD,KAAK,WACpCwxD,EAAI9gC,OACJ8gC,EAAII,UAAU,SAAU/sB,GACtBuG,SAASvG,EAAM,cAEjB6sB,EAAehtB,cAAc,WAC3B,GAAIG,GAAO6sB,EAAe1qB,SAC1BoE,UAASvG,EAAM,iBAEhB90C,MAAM,SAAU3R,GACjBozE,EAAI9gC,OACJ8gC,EAAII,UAAU,SAAU/sB,GACtBuG,SAASvG,EAAM,cAEjB6sB,EAAehtB,cAAc,WAC3B,GAAIG,GAAO6sB,EAAe1qB,SAC1BoE,UAASvG,EAAM,iBAxCrB78C,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQilD,OAASA,CACjB,IAAIpyC,GAASnT,EAAQ,kBAEjBilD,EAAYjlD,EAAQ,aAGpBo0C,GADKp0C,EAAQ,QACLA,EAAQ,YAEhBizE,EAAa55D,SAAS65D,eAAe//D,EAAOtS,UAC5CiyE,EAAiB7tB,EAAUguB,GAC7B9wE,KAAM,aAgCL28D,iBAAiB,EAAE+F,UAAU,GAAGG,OAAO,GAAGmO,UAAY,IAAIv0D,IAAI,SAAS5e,EAAQU,EAAOJ,GACzF,YA6CA,SAAS+C,KACP,MAAO+vE,KAGT,QAASC,KACP,MAAOD,KAGT,QAASE,GAAiBhV,GACxB,GAAIiV,GAAYnK,MAAMtgB,KAAK0qB,SAAS7hB,MAEhC0S,GADa+E,MAAMtgB,KAAK0qB,SAAS5hB,OACnBlvD,OAAO0/D,IAAIiC,aAAeoP,mBAIxChF,EAAkBiF,EAAMvF,mBAAmB7P,GAC3CqV,EAAYh4D,EAAM0iD,iBAAiBC,EACrB,QAAdqV,IAAoBA,EAAY,QAEpC,IAAIC,GAA0BC,EAAevV,EAAKwV,OAAO3oD,EAAIooD,EAAYQ,GACrEC,EAAyBH,EAAevV,EAAKwV,OAAOniB,MAAQ4hB,EAAYQ,GAExEE,IAmBJ,OAlBAA,GAAS7/B,MAAQiwB,EAAYoK,EAAgBtN,SAC7C8S,EAAS3c,UAAYsc,EACrBK,EAAS14B,SAAWy4B,EACpBC,EAASC,OAAS5V,EAAK71B,GACvBwrC,EAASE,WAAaR,EACtBM,EAAS9K,QAAU7K,EAAKvyD,OAAO08B,GAC/BwrC,EAASx5B,KAAO,WACd,MAAO,IAAI73C,GAAQ,SAAUgG,EAASwH,GACpC6jE,EAAS7/B,MAAMqG,KAAKw5B,EAASE,YAC7BF,EAAS7/B,MAAMhC,GAAG,MAAO,WACvBxpC,EAAQ,SAAWqrE,EAAS9K,QAAU,yBAExC8K,EAAS7/B,MAAMhC,GAAG,YAAa,WAC7BhiC,EAAO,SAAW6jE,EAAS9K,QAAU,8BAKpC8K,EAGT,QAASG,KAEHzO,EAAM0O,SAASC,IACjB3O,EAAMC,SAAS2O,GAEfxhC,OAAOwB,MAAK,GAEZ7xC,OAAO0/D,IAAIlkB,SAAU,EAEjBx7C,OAAO0/D,IAAI2B,oBAAqB,GAClCrhE,OAAO0/D,IAAI2B,kBAAmB,EAC9ByQ,EAAiB9xE,OAAO0/D,IAAIC,aAAa,IAEzCmS,EAAiB9xE,OAAO0/D,IAAIC,aAAa,KAG3C3/D,OAAO0/D,IAAIlkB,SAAU,EACrBynB,EAAM0B,YAAYkN,IAItB,QAASE,KACP,GAAIlgC,GAAOzuC,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,IAAmBA,UAAU,EAEpEyuC,IACJxB,OAAOwB,MAAK,GAGd7xC,OAAO0/D,IAAIlkB,SAAU,EACrBynB,EAAM0B,YAAYkN,GAElBG,IAGF,QAASC,GAAgCC,GACvC,GAAIC,GAAqB,kBAAoBD,EAAY,IAAMA,EAAY,OAC3E,OAAOnQ,GAAEqQ,QAAQD,GAAoBzzD,KAAK,SAAU2zD,GAClD,GAAIC,GAAiBC,EAAqBL,EAAWG,GACjD3gC,EAAQ,GAAIwD,MAAKo9B,EACrB,QACEJ,UAAWA,EACXxgC,MAAOA,KAKb,QAASg/B,KACP,GAGIX,GAAaiB,EAAMjB,WACnB1vE,IAKJ,OAJAssE,MAAKvyD,KAAK21D,EAAY,SAAUmC,GAC9B7xE,EAAS0B,KAAKkwE,EAAgCC,MAGzCnQ,EAAEyQ,KAAKnrE,MAAM06D,EAAG1hE,GAAU8gB,KAAK,WAEpC,IAAK,GADDsxD,MACKl1E,EAAI,EAAGA,EAAI6F,UAAUtF,OAAQP,IAAK,CACzC,GAAIuE,GAAMsB,UAAU7F,EACpBk1E,GAAa3wE,EAAIowE,WAAapwE,EAAI4vC,MAIpC,MADA1xC,QAAO0/D,IAAIiC,YAAc8Q,EAClBA,IAIX,QAASF,GAAqBL,EAAWl8C,GACvC,GAAI08C,KASJ,OAPAA,GAAW3jD,IAAMiH,EAAK28C,KAAKl1D,IAAI,SAAUw6B,GACvC,MAAO,kBAAoBi6B,EAAY,IAAMj6B,IAE/Cy6B,EAAWx8B,OAASlgB,EAAKkgB,OACzBw8B,EAAWl9B,OAAQ,EACnBk9B,EAAWh9B,MAAO,EAEXg9B,EAGT,QAASvB,GAAet4B,GACtB,GAAI+5B,GAAmB,GAAKC,EACxBC,EAAiBrrE,KAAK0hD,MAAMtQ,EAAW+5B,GAAoBA,CAE/D,OAAIE,GAAiB,EACZA,EAGAF,EAIX,QAASG,GAAiBC,EAAUnC,GAClC,GAAIoC,GAAmBpC,GAAa,EAAIqC,EACxC,OAAOC,gBAAiB1rE,KAAK0hD,MAAM6pB,EAAWC,GAAoBA,EAGpE,QAASG,GAAepC,GACtB,MAAO,IAAI9wE,GAAQ,SAAUgG,EAASwH,GACpCxN,EAAQia,KAAKk5D,EAAoBrC,GAAQsC,EAAwBtC,KAAStyD,KAAK,WAC7ExY,EAAQ,SAAW8qE,EAAMvK,QAAU,yBAClCh4D,MAAM,SAAU3R,GACjB4Q,EAAO,SAAWsjE,EAAMvK,QAAU,2BAA6B3pE,OAKrE,QAASu2E,GAAoBrC,GAC3B,MAAO,IAAI9wE,GAAQ,SAAUgG,EAASwH,GACpC,IAEEsjE,EAAMj5B,OAAOr5B,KAAK,SAAU60D,GAC1BrtE,EAAQqtE,KACPC,MAAM,SAAU12E,GACjB4Q,EAAO5Q,KAET,MAAOA,GACP4Q,EAAO,8BAAgC5Q,MAK7C,QAASw2E,GAAwBtC,GAC/B,MAAO,IAAI9wE,GAAQ,SAAUgG,EAASwH,GACpC,GAAIpC,GAAOo7D,MAAMC,QAAQC,SACvBC,UAAW,OACX52D,MAAO,SAAe21D,GACpB,MAAOA,GAAG7/B,KAAOirC,EAAMQ,SAGrBlmE,IACJ,WACE,GAAI+6D,GAAQ/6D,EAAKjC,MACjBg9D,GAAMrwC,KAAKy9C,WAAY,CACvB,IAAIC,GAAgBC,EAAgB,CACpCtN,GAAMuN,UACJz5C,YACEgG,MAAO,EACP0zC,QAAQ,GAEVC,UACEj7B,SAAU66B,EAAgB,EAC1BK,OAAQ,eAGV55C,YACEgG,MAAO,KACP0zC,OAAQ,GAEVC,UACEj7B,SAAU66B,EAAgB,EAC1BK,OAAQ,eAGV55C,YACEgG,MAAO,EACP0zC,OAAQ,GAEVC,UACEj7B,SAAU66B,EAAgB,EAC1BK,OAAQ,YACRC,SAAU,WACRlzE,KAAKk1B,KAAKy9C,WAAY,EACtBvtE,EAAQ,SAAWmgE,EAAMtgC,GAAK,2BAOtCr4B,EAAO,2CAKb,QAASumE,GAA2BC,GA4BlC,IAAK,GA3BDz+B,IAAQ,SAAel4C,GACzB,GAAIm0C,GAAQ1xC,OAAO0/D,IAAIC,YAAYpiE,EAEnC,IAAI,WAAam0C,IACf,GAAIA,EAAM+0B,UAAYyN,EAAWnuC,GAE/B,MADA/lC,QAAO0/D,IAAIC,YAAYzuD,OAAO3T,EAAG,IAE/B2nB,EAAG,YAGF,IAAI,UAAYwsB,GAAO,CAC5B,GAAIpmC,GAAO6oE,UACTlkE,MAAO,SAAe21D,GACpB,MAAOA,GAAG7/B,KAAO2L,EAAM8/B,SAG3B,IAAIlmE,EAAKxN,OAAS,GACVwN,EAAKjC,QAAoC,UAA1BiC,EAAKjC,OAAOw9D,WAAyBv7D,EAAKjC,OAAO08B,KAAOmuC,EAAWnuC,GAEtF,MADA/lC,QAAO0/D,IAAIC,YAAYzuD,OAAO3T,EAAG,IAE/B2nB,EAAG,WAOJ3nB,EAAI,EAAGA,EAAIyC,OAAO0/D,IAAIC,YAAY7hE,OAAQP,IAAK,CACtD,GAAIwxE,GAAQt5B,EAAMl4C,EAElB,IAAsE,YAAhD,mBAAVwxE,GAAwB,YAAcQ,EAAQR,IAAsB,MAAOA,GAAM7pD,GAIjG,QAASkvD,KACHp0E,OAAO0/D,IAAII,cAAchiE,OAAS,GACpCkC,OAAO0/D,IAAII,cAAcpxC,QAAQ,SAAU2lD,GACzCx/C,aAAaw/C,KAIjBr0E,OAAO0/D,IAAII,iBAGb,QAASgS,GAAiBnS,GAWxB,QAAS2U,KACPF,GAEA,IAAIG,GAAwBC,EAAyB7U,EAErDgN,MAAKvyD,KAAKm6D,EAAsB5U,YAAa,SAAUqR,EAAOzzE,GAC5D,GAAI82E,GAAehxE,WAAW,WACvBrD,OAAO0/D,IAAIlkB,SAKS,OAArBw1B,EAAMS,YAKV2B,EAAepC,GAAOtyD,KAAK,SAAU60D,GACnCrhE,QAAQI,IAAIihE,KACX9kE,MAAM,SAAU3R,GACjBoV,QAAQI,IAAI,sBAAuBxV,MAEpCk0E,EAAMpc,UACT50D,QAAO0/D,IAAII,cAAc/9D,KAAKsyE,KAGhCI,IACAz0E,OAAO0/D,IAAIG,mBAAqBx8D,WAAWqxE,EAAmBrD,EAAoBkD,EAAsB3f,WAG1G,QAAS+f,KACPP,IAEAzH,KAAKvyD,KAAKulD,EAAa,SAAUqR,EAAOzzE,GACtC,GAAI82E,GAAehxE,WAAW,WACvBrD,OAAO0/D,IAAIlkB,SAMhB43B,EAAepC,GAAOtyD,KAAK,SAAU60D,GACnCrhE,QAAQI,IAAIihE,KACX9kE,MAAM,SAAU3R,GACjBoV,QAAQI,IAAI,sBAAuBxV,MAEpCk0E,EAAMpc,UACT50D,QAAO0/D,IAAII,cAAc/9D,KAAKsyE,KAEhCI,IAGF,QAASC,KACHh/B,KAAS,GACXi/B,IACA30E,OAAO0/D,IAAIE,oBAAsB5kB,YAAY25B,EAAqBtD,IAE9DoD,EAAa,GACfE,IACAtxE,WAAWqxE,EAAmBrD,KAE9BU,IACAlQ,EAASW,YAAY,iBAxE3B,GAAI9sB,GAAOtyC,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,IAAmBA,UAAU,EAE1E4uE,KACAjP,EAASC,qBAETnuC,aAAa70B,OAAO0/D,IAAIyB,kBAExB,IAAIsT,GAAa,CACjBH,KAsEF,QAASM,KACP,GAAIC,GAAUzxE,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,GAAmBA,UAAU,GAAK,CAElF,OAAO,IAAIlD,GAAQ,SAAUgG,EAASwH,GAGpC,IAAK,GAFDonE,MAEKv3E,EAAI,EAAGA,EAAIs3E,EAASt3E,IAC3Bu3E,EAAgB/yE,KAAKsuE,IAGvBnwE,GAAQka,KAAK06D,EAAiB,WAC5B5iE,QAAQI,IAAI,YACXoM,KAAK,WACNxY,EAAQ,kBACPuI,MAAM,SAAU3R,GACjB4Q,EAAO5Q,OAKb,QAASuzE,KACP,MAAO,IAAInwE,GAAQ,SAAUgG,EAASwH,GACpC,GAAIiyD,GAAc3/D,OAAO0/D,IAAIC,YACzB/K,GAAY,GAAIhsB,OAAO2mB,SAC3B6kB,IAEA,IAAIW,KAEJpI,MAAKvyD,KAAKulD,EAAa,SAAUqR,EAAOzzE,GACtCw3E,EAAchzE,KAAKizE,EAAwBhE,MAG7C9wE,EAAQia,IAAI46D,GAAer2D,KAAK,SAAU60D,GACxC,GAAIze,IAAU,GAAIlsB,OAAO2mB,UACrB0lB,EAAWngB,EAAUF,CAGzB,OAAIqgB,GAAW5D,EACNnxE,EAAQ80B,MAAMq8C,EAAoB4D,GAAUv2D,KAAK,WACtDxY,EAAQ,8CAGVA,GAAQ,0CAETuI,MAAM,SAAU3R,GACjB4Q,EAAO5Q,OAKb,QAASk4E,GAAwBhE,GAC/B,MAAO,IAAI9wE,GAAQ,SAAUgG,EAASwH,GACpC,GAAI2mE,GAAehxE,WAAW,WAE5B+vE,EAAepC,GAAOtyD,KAAK,SAAU60D,GACnCrtE,EAAQqtE,KACP9kE,MAAM,SAAU3R,GACjB4Q,EAAO,mCAAqC5Q,MAE7Ck0E,EAAMpc,UACT50D,QAAO0/D,IAAII,cAAc/9D,KAAKsyE,KAIlC,QAASrC,KACP72B,cAAcn7C,OAAO0/D,IAAIE,qBACzB/qC,aAAa70B,OAAO0/D,IAAIG,oBACxBuU,IAGF,QAASI,GAAyB7U,GAChC,GACIuV,MACAtgB,EAAYugB,EAAwBxV,EASxC,OAPAA,GAAYjxC,QAAQ,SAAUgjB,GAC5B,GAAI0jC,GAAgB/yE,EAAKgzE,YAAY3jC,EACrC0jC,GAAcxgB,UAAYljB,EAAMkjB,UAAYA,EACxCwgB,EAAcxgB,UAAY,IAAGwgB,EAAcxgB,UAAY,GAC3DsgB,EAAmBnzE,KAAKqzE,MAIxBzV,YAAauV,EACbtgB,UAAWA,GAIf,QAASugB,GAAwBxV,GAC/B,GAAI/K,GAAYyc,CAYhB,OAVA1R,GAAYjxC,QAAQ,SAAUgjB,GAGxB,aAAeA,IAASA,EAAMkjB,UAAYA,IAC5CA,EAAYljB,EAAMkjB,aAMlBA,IAAcyc,EACTzc,EAEA,EA3eXluD,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,GAGT,IAAIspE,GAA4B,kBAAXr2C,SAAoD,gBAApBA,QAAOrD,SAAwB,SAAU/vB,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXozB,SAAyBpzB,EAAI6U,cAAgBue,QAAUpzB,IAAQozB,OAAOr4B,UAAY,eAAkBiF,GAEtQlI,GAAQ+C,KAAOA,EACf/C,EAAQ+yE,kBAAoBA,EAC5B/yE,EAAQgzE,iBAAmBA,EAC3BhzE,EAAQ8zE,aAAeA,EACvB9zE,EAAQm0E,YAAcA,EACtBn0E,EAAQ8yE,qBAAuBA,EAC/B9yE,EAAQ20E,qBAAuBA,EAC/B30E,EAAQuzE,eAAiBA,EACzBvzE,EAAQm1E,iBAAmBA,EAC3Bn1E,EAAQq2E,2BAA6BA,EACrCr2E,EAAQw2E,mBAAqBA,EAC7Bx2E,EAAQk0E,iBAAmBA,EAC3Bl0E,EAAQg3E,kCAAoCA,EAC5Ch3E,EAAQyyE,yBAA2BA,EACnCzyE,EAAQo0E,gBAAkBA,EAC1Bp0E,EAAQ42E,yBAA2BA,EACnCl3E,EAAQ,SACR,IAAI4C,GAAU5C,EAAQ,YAGlB0zE,GADK1zE,EAAQ,QACLA,EAAQ,YAChB2b,EAAQ3b,EAAQ,WAChBukE,EAAWvkE,EAAQ,cACnBylE,EAAWzlE,EAAQ,cACnB+E,EAAO/E,EAAQ,UAEf2lE,EAAQlB,EAAE,QAEVmR,EAAW,EACXL,EAAM,IACNyC,EAAa,GAAKzC,EAAM,IACxBc,EAA6B,EAAb2B,EAChBjE,EAAoBzzE,EAAQyzE,kBAAoBsC,EAAgBT,EAEhErB,EAAej0E,EAAQi0E,aAAe,UACtCD,EAAmBh0E,EAAQg0E,iBAAmB,iBAsc/C5B,UAAU,EAAE9N,aAAa,GAAGqT,UAAU,GAAGpP,aAAa,GAAG7D,OAAO,GAAGt+D,SAAS,GAAGqC,SAAW,EAAEmvE,OAAS,IAAIj4D,IAAI,SAASjgB,EAAQU,EAAOJ,GACxI,YAoBA,SAAS+C,KACHX,OAAOm4C,SAAS2e,KAAKh5D,OAAS,GAA6B,QAAxBkC,OAAOm4C,SAAS2e,MACrD92D,OAAO0/D,IAAImC,UAAW,EACtBja,EAAM6tB,aACN7tB,EAAM8tB,oBAEN9tB,EAAMqc,oBAIV,QAASpB,KACP3wD,QAAQI,IAAI,oBAAsBjQ,EAAKktD,WAGvC16B,aAAa70B,OAAO0/D,IAAIwB,mBACxB/lB,cAAcn7C,OAAO0/D,IAAIgC,2BAEzB1hE,OAAO0/D,IAAIwB,kBAAoB79D,WAAW,WACxCw+D,EAASW,YAAY,aACpBmT,GArCLjvE,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQ+C,KAAOA,EACf/C,EAAQilE,yBAA2BA,CACnC,IAAIhB,GAAWvkE,EAAQ,cACnBsqD,EAAQtqD,EAAQ,WAChB+E,EAAO/E,EAAQ,UAIfq4E,GAFQ5T,EAAE,QAEYnkE,EAAQ+3E,oBAAsB,IAC1B/3E,GAAQmmE,wBAA0B,IAC1CnmE,EAAQ4lE,gBAAkB,IAC/B5lE,EAAQg4E,WAAa,IACdh4E,EAAQi4E,kBAAoB,IACjCj4E,EAAQk4E,aAAe,MAwBvC5T,aAAa,GAAGl+D,SAAS,GAAGu+D,UAAU,KAAK3kD,IAAI,SAAStgB,EAAQU,EAAOJ,GAC1E,YAwCA,SAAS+C,KACP/C,EAAQm4E,WAAaA,EAAa,GAAIruC,QAAOG,QAAQ+5B,EAAGoU,aACxDD,EAAW7tC,IAAI,GAAIR,QAAOqI,OAAQ/O,UAAW0G,OAAOiC,iBACpDosC,EAAWrmC,GAAG,QAASmyB,EAASsC,aAEhCvmE,EAAQooE,aAAeA,EAAe,GAAIt+B,QAAOG,QAAQ+5B,EAAG2O,YAC5DvK,EAAa99B,IAAI,GAAIR,QAAOmI,KAAMz5B,MAAO,YAAa83B,KAAM,EAAGC,SAAU,IAAKL,KAAM,IAAKM,aAAc,MACvG43B,EAAa99B,IAAI,GAAIR,QAAOmI,KAAMz5B,MAAO,eACzC4vD,EAAa99B,IAAI,GAAIR,QAAOoI,KAAM9O,UAAW0G,OAAOiC,iBACpDq8B,EAAa99B,IAAI,GAAIR,QAAOsI,OAE5Bg2B,EAAah+D,IAAI,aAAamgC,cAAc,aAE5C69B,EAAah+D,IAAI,OAAOogC,eAAe,SACvC49B,EAAah+D,IAAI,SAASogC,eAAe,OAGzC49B,EAAat2B,GAAG,YAAaumC,GAE7BjQ,EAAat2B,GAAG,WAAYwmC,GAC5BlQ,EAAat2B,GAAG,UAAWymC,GAC3BnQ,EAAat2B,GAAG,SAAU0mC,GAG1BpQ,EAAat2B,GAAG,aAAc2mC,GAC9BrQ,EAAat2B,GAAG,YAAa4mC,GAC7BtQ,EAAat2B,GAAG,WAAY6mC,GAI9B,QAASC,KACPC,IACAC,IAGF,QAASC,KACP,GAAI35C,KAAS55B,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,KAAmBA,UAAU,EAE5E45B,GAASA,KAAW,EACpBgpC,EAAah+D,IAAI,aAAa4U,KAAMogB,OAAQA,IAC5CgpC,EAAah+D,IAAI,aAAa4U,KAAMogB,OAAQA,IAG9C,QAAS45C,KACPD,GAAgB,GAGlB,QAASF,KACP,GAAIz5C,KAAS55B,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,KAAmBA,UAAU,EAE5E45B,GAASA,KAAW,EAEpBgpC,EAAah+D,IAAI,OAAO4U,KAAMogB,OAAQA,IAMxC,QAAS65C,KACPJ,GAAgB,GAGlB,QAASC,KACP,GAAI15C,KAAS55B,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,KAAmBA,UAAU,EAE5E45B,GAASA,KAAW,EAEpBgpC,EAAah+D,IAAI,SAAS4U,KAAMogB,OAAQA,IAM1C,QAAS85C,KACPJ,GAAkB,GA4BpB,QAAST,GAAU7/D,GACjBA,EAAMi2B,gBAGN,IAAI0qC,GAAU3gE,EAAM2oB,OAChBi/B,EAAQ,GAAI6L,OAAMkN,EAAQtuD,EAAGsuD,EAAQ92C,GACrC+2C,EAAYtQ,MAAMC,QAAQsQ,QAAQjZ,EAAOkZ,EAExCC,GAAsB/gE,KAEvB4gE,GACFhG,EAAMhK,WAAWgQ,EAAU1rE,MAC3By3D,EAASqU,wBAAwB,SAEjCp3E,OAAO0/D,IAAIS,aAAe,MAK9B,QAAS+V,GAAS9/D,GAOhB,GAFA0rD,EAAOe,4BAEFsU,EAAsB/gE,GAQzB,MAPApW,QAAO0/D,IAAIkD,SAAU,EAEjBK,EAAM0O,SAAS,+BAEjB9P,EAASsC,kBAEX/tD,GAAMqqB,SAAS42C,iBAIjBr3E,QAAO0/D,IAAIkD,SAAU,EACrBG,EAASC,qBAETgD,EAAap2B,IAAI,YAEjBknC,IACAF,IASAllC,EAAMqgC,cAEN/xE,OAAO0/D,IAAIa,UAAY94D,KAAKs6B,MAAM3rB,EAAM2qB,UAAW3qB,EAAM0qB,UAEzD,IAAIi2C,GAAU3gE,EAAM2oB,OAChBi/B,EAAQ,GAAI6L,OAAMkN,EAAQtuD,EAAGsuD,EAAQ92C,EAEzC4oC,GAAY,GAAIC,MAChBD,EAAU3B,UAAYlnE,OAAO0/D,IAAInM,aAGjCrK,IAEA,IAAIoX,GAAY,GAAIwI,OAClB3B,YAAannE,OAAO0/D,IAAInM,aACxBjmD,KAAM,YACNs9D,YAAa,EACbrC,SAAS,EACT+O,UAAW,SAGbhX,GAAUp4B,IAAI81B,GAEdh+D,OAAO0/D,IAAIW,SAAS2Q,EAAM3E,eAAerO,KACvCA,MAAOA,EACPuG,OAAO,GAGTvkE,OAAO0/D,IAAIY,UAAYA,EAGzB,QAAS6V,GAAQ//D,GAGf,IAAK+gE,EAAsB/gE,GAEzB,WADAA,GAAMqqB,SAAS42C,iBAGjB,IAAIr3E,OAAO0/D,IAAIkD,WAAY,EAA3B,CAGA,GAAI5iE,OAAO0/D,IAAIY,UAAUxiE,QAAUy5E,EAAgB,CACjD,GAAIR,GAAU3gE,EAAM2oB,OAChBi/B,EAAQ,GAAI6L,OAAMkN,EAAQtuD,EAAGsuD,EAAQ92C,GAErCb,EAAQ33B,KAAKs6B,MAAM3rB,EAAM2qB,UAAW3qB,EAAM0qB,WAC1Cy/B,EAAYvgE,OAAO0/D,IAAIa,SACVl+D,GAAKm1E,WAAWp4C,EAAOmhC,EAGxC,KAFAvgE,OAAO0/D,IAAIa,UAAYnhC,EAEhB8pB,EAAMprD,OAAS,IACpBorD,EAAMtlD,OAER,IAAIslD,EAAMprD,OAAS,EAAG,CACT25E,EAAUl4C,YAAYy+B,EAGjCvvC,GAAuB,GAAhBhnB,KAAK40C,SAEZktB,EAAU,CACV,KAAK,GAAI59D,GAAI,EAAGA,EAAIu9C,EAAMprD,OAAQ6N,IAChC49D,GAAWrgB,EAAMv9C,EAGnB,IAAI69D,GAAU/hE,KAAKC,IAAI,GAAI6hE,EAAUrgB,EAAMprD,OAAS2wB,GAAQ,GAExDipD,GAAc1Z,EAAMv1C,EAAIgvD,EAAUhvD,GAAK,EACvCkvD,GAAc3Z,EAAM/9B,EAAIw3C,EAAUx3C,GAAK,EACvC23C,EAAY,GAAI/N,OAAM6N,EAAYC,GAElCE,EAAOD,EAAUnvD,EAAIhhB,KAAKw2D,IAAI7+B,EAAQ33B,KAAKu6B,GAAK,GAAKwnC,EACrDsO,EAAOF,EAAU33C,EAAIx4B,KAAKy2D,IAAI9+B,EAAQ33B,KAAKu6B,GAAK,GAAKwnC,EACrDI,EAAM,GAAIC,OAAMgO,EAAMC,GAEtBC,EAAUH,EAAUnvD,EAAIhhB,KAAKw2D,IAAI7+B,EAAQ33B,KAAKu6B,GAAK,GAAKwnC,EACxDwO,EAAUJ,EAAU33C,EAAIx4B,KAAKy2D,IAAI9+B,EAAQ33B,KAAKu6B,GAAK,GAAKwnC,EACxDM,EAAS,GAAID,OAAMkO,EAASC,EAEhCnP,GAAU3gC,IAAI0hC,GACdf,EAAUkB,OAAO,EAAGD,GACpBjB,EAAUoP,aAEVxpD,GAAO,CAGTy6B,GAAMnnD,KAAK0sB,GACXgpD,EAAYzZ,EAEZh+D,OAAO0/D,IAAIW,SAAS2Q,EAAM3E,eAAerO,KACvCA,MAAOA,EACPka,MAAOzwE,KAAKy4B,IAAI9pB,EAAMypB,iBACtBT,MAAOA,GAGTp/B,OAAO0/D,IAAIY,UAAUp4B,IAAI81B,OAEzBh+D,QAAO0/D,IAAIY,UAAUtqC,KAAKmiD,SAAU,CAGtCzR,OAAMtgB,KAAKgyB,QAGb,QAAShC,GAAOhgE,GAGd,IAAK+gE,EAAsB/gE,GAEzB,WADAA,GAAMqqB,SAAS42C,iBAGjB,IAAIr3E,OAAO0/D,IAAIkD,WAAY,EAA3B,CAEA,GAAImU,GAAU3gE,EAAM2oB,OAChBi/B,EAAQ,GAAI6L,OAAMkN,EAAQtuD,EAAGsuD,EAAQ92C,GAKrCo4C,GAHcp/D,EAAMijD,YACRjjD,EAAM8iD,aAAa/7D,OAAO0/D,IAAInM,eAEjC9zD,KAAM,aAEf6gE,EAAYtgE,OAAO0/D,IAAIY,SAO3B,IALIA,EAAUxiE,QAAUy5E,GACtBjX,EAAUp4B,IAAI81B,GAEhB6K,EAAUN,SAAU,EAEhBjI,EAAUxiE,OAASw6E,GAAgBhY,EAAUtqC,MAAQsqC,EAAUtqC,KAAKmiD,WAAY,EAOlF,MALA7X,GAAU7wB,SACVu2B,EAAat2B,GAAG,WAAYwmC,GAC5BM,IACAG,SACA32E,OAAO0/D,IAAIkD,SAAU,EAIvB,IAAI2V,GAAgBl2E,EAAKqtE,kBACzB,IAAI6I,EAAcz6E,QAAU2S,EAAOrS,UAAW,CAG5C,GAAIo6E,GAAaD,EAAc,EAC/BvH,GAAM5K,iBAAiBoS,GACvB9mC,EAAMuiC,2BAA2BuE,GACjCH,EAAKI,aAAeD,EAEpBA,EAAWjQ,SAAU,EAGvBvoE,OAAO0/D,IAAIW,SAAS2Q,EAAM3E,eAAerO,KACvCA,MAAOA,EACPr8C,MAAM,EAGR,IAAI0kD,GAAQ,GAAIgD,OAEZT,EAAaoI,EAAM1G,cAAchK,GAKjCoY,EAAY9P,EAAWgH,aACvB+I,EAAc,GAAI9O,OAAM6O,EAAUzpB,MAAQ,EAAGypB,EAAUxpB,OAAS,GAChE9vB,EAAQ/8B,EAAKu2E,IAAoB,IAAhBnxE,KAAK40C,UACtBw8B,GAAgBH,EAAUzpB,MAAQypB,EAAUxpB,QAAU,EACtD4pB,EAAUH,EAAYlwD,EAAIhhB,KAAKw2D,IAAI7+B,EAAQ33B,KAAKu6B,GAAK,GAAK62C,EAC1DE,EAAUJ,EAAY14C,EAAIx4B,KAAKy2D,IAAI9+B,EAAQ33B,KAAKu6B,GAAK,GAAK62C,EAC1DG,EAAeL,EAAYlwD,EAAIhhB,KAAKw2D,IAAI7+B,EAAQ33B,KAAKu6B,GAAK,GAAK62C,EAC/DI,EAAeN,EAAY14C,EAAIx4B,KAAKy2D,IAAI9+B,EAAQ33B,KAAKu6B,GAAK,GAAK62C,EAE/DK,EAAS,GAAIrP,OAAMiP,EAAUJ,EAAUjwD,EAAGswD,EAAUL,EAAUz4C,GAC9DsU,EAAc,GAAIs1B,OAAMmP,EAAeN,EAAUjwD,EAAGwwD,EAAeP,EAAUz4C,EA6BjF,IAlBAomC,EAAMrwC,KAAK8lC,cAAgB97D,OAAO0/D,IAAInM,aACtC8S,EAAMrwC,KAAK/c,OACTkgE,UACEC,MAAO3oE,EAAOpS,QAAQe,UAAUY,OAAO0/D,IAAInM,eAE7C2lB,OAAQA,EACR3kC,YAAaA,GAEf8xB,EAAMrwC,KAAKmK,MAAQ,EACnBkmC,EAAMrwC,KAAKqK,SAAW,EACtBgmC,EAAMrwC,KAAK0yC,OAAQ,EAEnBpI,EAAU7wB,SACVm5B,EAAWL,SAAU,EACrBK,EAAWzB,YAAc,GAAIhL,OAAM,EAAG,GACtCn8D,OAAO0/D,IAAIY,UAAYsI,EACvBA,EAAWt7D,KAAO,cAEZs7D,EAAW9qE,OAAS,GAIxB,MAHA8qE,GAAWn5B,SACX42B,EAAM52B,cACNzvC,OAAO0/D,IAAIkD,SAAU,EAIvByD,GAAMoC,SAASG,EAEf,IAAIyQ,GAAgB3nC,EAAMk/B,iBAAiBhI,EAC3C5oE,QAAO0/D,IAAIC,YAAY59D,KAAKs3E,GAE5BzQ,EAAWL,SAAU,CACrB,IAAI+Q,GAAetI,EAAMrI,gBAAgBC,GACrC2Q,EAAUD,EAAaxR,eAAe0R,MAAM,GAAGhP,OACnD+O,GAAQjsE,KAAO,QACfisE,EAAQrS,UAAYlnE,OAAO0/D,IAAInM,aAC/BgmB,EAAQrS,UAAYb,EAAMrwC,KAAK/c,KAE/B,IAAIwgE,GAAgBH,EAAaxR,eAAe4R,OAAO,GAAGlP,OAC1DiP,GAActS,YAAcd,EAAMrwC,KAAK/c,MACvCwgE,EAAclR,SAAU,EACxBlC,EAAMoC,SAAS8Q,GACfA,EAAQI,aAERL,EAAa7pC,QAEb,IAAImqC,GAAYL,EAAQ/O,OACxBoP,GAAU1S,UAAYqS,EAAQrS,UAC9B0S,EAAUzS,YAAcoS,EAAQpS,YAChCyS,EAAUpR,QAAS,CAEnB,IAAIqR,GAAgB7I,EAAM7D,mBAAmBsM,EACzCI,GAAc/7E,OAAS,GAAK8qE,EAAWJ,UAAW,EACpDnC,EAAMrwC,KAAKnmB,MAAO,EAElBw2D,EAAMrwC,KAAKnmB,MAAO,EAGpBgqE,EAAcnrD,QAAQ,SAAUgnB,GAC9BkkC,EAAUtL,MAAM54B,GAChBkkC,EAAUD,aACVjkC,EAAKpoC,KAAO,OACZooC,EAAK1f,KAAK0f,MAAO,EACjBA,EAAK6yB,SAAU,EACflC,EAAMoC,SAAS/yB,KAGjBkkC,EAAUtL,OACV,IAAIC,GAAYqL,EAAUtM,kBAyC1B,IAxCMiB,GAAeA,EAAUzH,UAAYyH,EAAUzH,SAAShpE,OAAS,IACrE,WACE,GAAI0wE,GAAU,EACVC,EAAW,IACfF,GAAUzH,SAASp4C,QAAQ,SAAU3lB,GAC/BA,EAAM2lE,KAAOF,IACfC,EAAW1lE,EACXylE,EAAUzlE,EAAM2lE,QAIpBkL,EAAYnL,KAIhBgL,EAAchqC,SACdmqC,EAAUrR,SAAU,EACpBqR,EAAUtsE,KAAO,OACjBssE,EAAU5jD,KAAKuvC,MAAO,EACtBc,EAAMoC,SAASmR,GACfA,EAAUD,aAEV3I,EAAM5J,aAAaf,GAEnBgS,EAAKtyC,GAAKsgC,EAAMtgC,GAChB/lC,OAAO0/D,IAAIO,MAAMl+D,KAAKs2E,GAEtBzW,EAAGkY,uBAAuB,MAAO,OAAQ,YAAa,UACtD7W,EAAMC,SAASxxB,EAAMkgC,kBAEjB5xE,OAAO0/D,IAAI0B,0BAA2B,IAGxCphE,OAAO0/D,IAAIyB,kBAAoB99D,WAAW,WACxCw+D,EAASW,YAAY,gBACpBV,EAAO0B,iBAEVxjE,OAAO0/D,IAAI0B,wBAAyB,GAGlC3wD,EAAOxS,cAAe,CACxB,GAAI87E,GAAc,EAClB1T,GAAMuN,UACJz5C,YACEgG,MAAO45C,GAETjG,UACEj7B,SAAU,IACVk7B,OAAQ,aAGV55C,YACEgG,MAAO,EAAI45C,GAEbjG,UACEj7B,SAAU,IACVk7B,OAAQ,aAKd,IAAKhR,EAASiX,mBAAoB,CAChC,GAAIlZ,GAAqB9gE,OAAO0/D,IAAIoB,mBAChCmZ,EAAU,IAEd,KAAKnZ,EAAyB,MAAK8H,EAAWJ,OAC5CyR,EAAU,WACL,CACL,GAAIxK,GAAS/I,MAAMC,QAAQwN,UACzBlkE,MAAO,SAAe21D,GACpB,MAAwB,UAAjBA,EAAGiB,cAGT/F,EAA0B,OAAK2O,EAAO3xE,QAAU,EACnDm8E,EAAU,SACAnZ,EAA0B,OAAK2O,EAAO3xE,QAAU,IAC1Dm8E,EAAU,SAIE,OAAZA,IAEFlX,EAASmX,iBAAiBD,GAC1Bj6E,OAAO0/D,IAAIoB,mBAAmBmZ,IAAW,EACzC5T,EAAMrwC,KAAKmkD,IAAMF,GAIe,OAAhCj6E,OAAO0/D,IAAI+B,mBACb,WACE,GAAIA,GAAmBzhE,OAAO0/D,IAAI+B,gBAClCzhE,QAAO0/D,IAAI+B,iBAAmB,KAC9Bp+D,WAAW,WACTw+D,EAASW,YAAYf,IACpBK,EAAOgU,iBAIduD,EAActhC,OAGdiuB,EAAappD,KAAMogB,QAAQ,IAC3B35B,WAAW,WACT2iE,EAAappD,KAAMogB,QAAQ,IAC3B9qB,QAAQI,IAAI,iBACZ0zD,EAAat2B,GAAG,WAAYwmC,GAC5BM,IACAG,IAEA32E,OAAO0/D,IAAIkD,SAAU,GACpBd,EAAO8T,YAENnlE,EAAOvS,OAAQ,GACjB8yE,EAAM1J,cAgBV,QAAS+O,GAAWjgE,GAalB,GAXA0rD,EAAOe,2BACPE,EAASC,qBACThjE,OAAO0/D,IAAI0a,aAAc,EACzBp6E,OAAO0/D,IAAIQ,UAAW,EAItB8F,EAAap2B,IAAI,cACjBinC,IACAD,IAEKO,EAAsB/gE,GAA3B,CAEAs7B,EAAMqgC,aAEN,IAAIgF,GAAU3gE,EAAM2oB,OAChBi/B,EAAQ,GAAI6L,OAAMkN,EAAQtuD,EAAGsuD,EAAQ92C,GACrC+2C,EAAYhG,EAAMxB,mBAAmBxR,EAEzC,IAAIgZ,EAiBF,GAhBAh3E,OAAO0/D,IAAIQ,UAAW,EACtBlgE,OAAO0/D,IAAIS,aAAe6W,EAC1Bh3E,OAAO0/D,IAAIiB,UAAY,EACvB3gE,OAAO0/D,IAAIkB,aAAexqD,EAAMiqB,SAEhCrgC,OAAO0/D,IAAImB,iBAAmBmW,EAAUhE,SACxChzE,OAAO0/D,IAAI2a,iBAAmBrD,EAAUhhD,KAAKqK,SAC7CrgC,OAAO0/D,IAAI4a,cAAgBtD,EAAUhhD,KAAKmK,MAC1C62C,EAAUhhD,KAAKukD,QAAS,EAEpB9pE,EAAOvS,OAAQ,GACjB8yE,EAAM5K,iBAAiB4Q,GAGzBA,EAAUjP,eAENiP,EAAUhhD,KAAKmkD,KAAOnD,EAAUhhD,KAAKmkD,IAAIr8E,OAAS,EAAG,CACvD,GAAI08E,GAAOzY,EAAE,uBAA0BiV,EAAUhhD,KAAKmkD,IAAM,KACxDK,GACFx6E,OAAO0/D,IAAIU,WAAaoa,EAExBx6E,OAAO0/D,IAAIU,WAAa,SAG1BpgE,QAAO0/D,IAAIU,WAAa,SAe1BpgE,QAAO0/D,IAAIS,aAAe,KAC1BngE,OAAO0/D,IAAIU,WAAa,MAK5B,QAASkW,GAAUlgE,GAIjB,GAEI+pD,IAFYuG,MAAMtgB,KAAK0qB,SAAS7hB,MACnByX,MAAMtgB,KAAK0qB,SAAS5hB,OAClBlvD,OAAO0/D,IAAIS,cAC1Bsa,EAAcz6E,OAAO0/D,IAAIU,UAE7B,IAAMD,EAAc,CAClB,GAAIua,GAAetkE,EAAM+pB,MACrBw6C,EAAa,MAEjB5X,GAASqU,wBAAwB,SAI/BuD,EAFExa,EAAaiR,OAAOniB,MAAQqpB,GAAgBnY,EAAaiR,OAAOliB,OAASopB,EAE9D,IACJnY,EAAaiR,OAAOniB,OAASyX,MAAMtgB,KAAK0qB,SAAS7hB,OAASkR,EAAaiR,OAAOliB,QAAUwX,MAAMtgB,KAAK0qB,SAAS5hB,OAExG,GAEAwrB,EAAe16E,OAAO0/D,IAAIiB,UAGzC3gE,OAAO0/D,IAAIiB,UAAY+Z,CAEvB,IAAIE,GAAkBxkE,EAAMiqB,SACxBw6C,EAAgBD,EAAkB56E,OAAO0/D,IAAIkB,YACjD5gE,QAAO0/D,IAAIkB,aAAega,CAK1B,IAAIjC,GAAcviE,EAAM2oB,MAMxB,IALAohC,EAAa6S,SAAW2F,EAClB8B,GACJ1X,EAAS+X,kBAAkBL,EAAa9B,GAGvB,IAAfgC,EAAkB,CACpBxa,EAAahgC,MAAMw6C,EAInB,IAAII,GAAQ14E,EAAK04E,MAAM5a,EAAaiR,OAAOniB,MAAOkR,EAAaiR,OAAOliB,QAClE8rB,EAAY34E,EAAK04E,MAAMrU,MAAMtgB,KAAK0qB,SAAS7hB,MAAOyX,MAAMtgB,KAAK0qB,SAAS5hB,OACtE6rB,IAASC,GAEXL,EAAaK,EAAYC,EAAiBF,EAC1C5a,EAAahgC,MAAMw6C,IACVI,GAASzC,IAClBqC,EAAarC,EAAeyC,EAC5B5a,EAAahgC,MAAMw6C,IAGvBxa,EAAa0T,OAAOgH,GAEpB1a,EAAanqC,KAAKmK,OAASw6C,EAC3Bxa,EAAanqC,KAAKqK,UAAYw6C,GAIlC,QAAStE,GAASngE,GAGhBpW,OAAO0/D,IAAIK,UAAY3pD,CACvB,IAAI+pD,GAAengE,OAAO0/D,IAAIS,aAC1Bsa,EAAcz6E,OAAO0/D,IAAIU,WACzBS,EAAmB7gE,OAAO0/D,IAAImB,iBAC9BwZ,EAAmBr6E,OAAO0/D,IAAI2a,iBAC9BC,EAAgBt6E,OAAO0/D,IAAI4a,aAE/B,IAAMna,EAAc,CAClBA,EAAanqC,KAAK0yC,OAAQ,CAC1B,IAAI2P,IACFtyC,GAAIo6B,EAAap6B,GACjBtmC,KAAM,YAcR,IAZI0gE,EAAa6S,UAAYnS,IAC3BwX,EAAKrF,SAAWnS,GAGdV,EAAanqC,KAAKqK,UAAYg6C,IAChChC,EAAKh4C,SAAWg6C,EAAmBla,EAAanqC,KAAKqK,UAGnD8/B,EAAanqC,KAAKmK,OAASm6C,IAC7BjC,EAAKl4C,MAAQm6C,EAAgBna,EAAanqC,KAAKmK,OAG7CggC,EAAa2G,SAAShpE,OAAS,GAAKqiE,EAAa2H,eAAexH,WAAaH,EAAa2H,eAAexH,UAAUxiE,OAAS,EAAG,CAEjI4zC,EAAMuiC,2BAA2B9T,EAEjC,IAAIG,GAAYH,EAAa2H,eAAexH,UAAU,GAClD+Y,EAAgB3nC,EAAMk/B,iBAAiBtQ,EAC3CtgE,QAAO0/D,IAAIC,YAAY59D,KAAKs3E,GAG9Br5E,OAAO0/D,IAAIO,MAAMl+D,KAAKs2E,GAElB5wE,KAAKy4B,IAAI9pB,EAAMyqB,UAAY,IAC7BkiC,EAASqU,wBAAwB,SAG3BqD,GACJ1X,EAASmY,kBAAkBT,GAGzBhqE,EAAOvS,OAAQ,IACjB8yE,EAAM5K,iBAAiBjG,GACvBA,EAAanqC,KAAK0yC,OAAQ,GAG5BvI,EAAanqC,KAAKukD,QAAS,EAC3BY,SAeFn7E,QAAO0/D,IAAIS,aAAe,IAIQ,QAAhCngE,OAAO0/D,IAAI+B,mBACb,WACE,GAAIA,GAAmBzhE,OAAO0/D,IAAI+B,gBAClCzhE,QAAO0/D,IAAI+B,iBAAmB,KAC9Bp+D,WAAW,WACTw+D,EAASW,YAAYf,IACpBK,EAAOgU,iBAId91E,OAAO0/D,IAAIQ,UAAW,EAElBzvD,EAAOvS,OAAQ,GACjB8yE,EAAM1J,aAKRjkE,WAAW,WACT6O,QAAQI,IAAI,iBACZ0zD,EAAat2B,GAAG,aAAc2mC,GAC9BG,IACAG,KAOC7U,EAAO8T,YAiBZ,QAASuF,KAEP,GAAIC,GAAqB,GACrBrb,EAAY//D,OAAO0/D,IAAIK,UACvB8Q,EAAYnK,MAAMtgB,KAAK0qB,SAAS7hB,MAChCosB,EAAa3U,MAAMtgB,KAAK0qB,SAAS5hB,OACjCiR,EAAengE,OAAO0/D,IAAIS,YAE9B,MAAqB,OAAjBA,GAAyBA,EAAanqC,MAAQmqC,EAAanqC,KAAKukD,UAAW,GAA/E,CACA,GAAIpa,EAAa6S,SAASvqD,GAAK,EAAI03C,EAAaiR,OAAOniB,OAASkR,EAAa6S,SAASvqD,GAAKooD,EAAY1Q,EAAaiR,OAAOniB,OAASkR,EAAa6S,SAAS/yC,GAAK,EAAIkgC,EAAaiR,OAAOliB,QAAUiR,EAAa6S,SAAS/yC,GAAKo7C,EAAalb,EAAaiR,OAAOliB,OAK3P,MAJAiR,GAAanqC,KAAKslD,WAAY,EAC9Bnb,EAAaoI,SAAU,EACvB72B,EAAMuiC,2BAA2B9T,QACjCngE,OAAO0/D,IAAIS,aAAe,KAG5BjM,uBAAsBinB,EACtB,IAAII,GAAOpb,EAAa6S,SAASvqD,EAAIs3C,EAAUj/B,UAAYs6C,EACvDI,EAAOrb,EAAa6S,SAAS/yC,EAAI8/B,EAAUh/B,UAAYq6C,EACvDK,EAAS,GAAI5R,OAAM0R,EAAMC,EAC7Brb,GAAa6S,SAAWyI,GAG1B,QAAStE,GAAsB/gE,GAC7B,QAAKA,GACDA,EAAMlR,QAAU08D,EAAG2O,WA30BzB7pE,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQ+C,KAAOA,EACfrD,EAAQ,WAER,IAAImT,GAASnT,EAAQ,kBACjBo0C,EAAQp0C,EAAQ,WAChB2b,EAAQ3b,EAAQ,WAChB0zE,EAAQ1zE,EAAQ,WAChB+E,EAAO/E,EAAQ,UACfylE,EAAWzlE,EAAQ,cACnBwkE,EAASxkE,EAAQ,YACjBukE,EAAWvkE,EAAQ,cACnBskE,EAAKtkE,EAAQ,QAEb2lE,EAAQlB,EAAE,QAEVmV,GACFlK,UAAU,EACV3N,QAAQ,EACR0B,MAAM,EACN2a,UAAW,GAGTpD,EAAe,IACff,EAAiB,IACjB0D,EAAiB,GAEjBpS,EAAY,OACZ3f,KACAz6B,EAAO,OACP86C,EAAU,OACVkO,EAAY,OAEZ1B,EAAan4E,EAAQm4E,WAAa,OAClC/P,EAAepoE,EAAQooE,aAAe,SA2yBvC5J,iBAAiB,EAAE4T,UAAU,EAAE9N,aAAa,GAAGqT,UAAU,GAAGpT,UAAU,GAAGC,WAAW,GAAG+D,aAAa,GAAG7D,OAAO,GAAGt+D,SAAS,GAAG23E,SAAW,IAAIz8D,IAAI,SAAS5hB,EAAQU,EAAOJ,GAC3K,YAmBA,SAASg+E,GAAa3B,GACpB,IAAK,GAAI18E,GAAI,EAAGA,EAAIiC,EAAe1B,OAAQP,IAAK,CAC9C,GAAIs+E,GAASr8E,EAAejC,EAE5B,IAAIs+E,EAAOp8E,OAASw6E,EAClB,MAAO4B,GAAOn8E,KAIlB,MAAO,MAGT,QAASs6E,KACP,GAAI8B,GAAwB97E,OAAO0/D,IAAIoB,mBACnCib,GAAa,CAMjB,OAJAr1E,QAAO+E,KAAKqwE,GAAuBptD,QAAQ,SAAU9iB,EAAKsY,GACxD63D,EAAaA,GAAcD,EAAsBlwE,KAG5CmwE,KAAe,EAGxB,QAAS7B,GAAiBD,GACxB,GAAMj6E,OAAO0/D,IAAIY,WAAatgE,OAAO0/D,IAAIY,UAAUxiE,OAAS,EAAG,CAC7DklE,IACAhjE,OAAO0/D,IAAI4B,eAAiB,CAE5B,IAAIhB,GAAYtgE,OAAO0/D,IAAIY,UACvB0b,EAAc1b,EAAU8Q,OAAOryC,OAE/Bk9C,EAAUL,EAAa3B,EAE3B,IAAgB,OAAZgC,EAAkB,CACpB,GAAIzB,GAAOzY,EAAE,uBAA0BkY,EAAU,KACjD,IAAIO,EAAK18E,OAAS,EAAG,CACnB,GAAIo+E,GAASC,EAAyB3B,EAAMwB,EAC5CxB,GAAK4B,KAAMxS,IAAKsS,EAAOj8C,EAAI,KAAM4tB,KAAMquB,EAAOzzD,EAAI,KAAM4zD,WAAY,YACpE7B,EAAKtX,SAAS,wBAMtB,QAASgY,GAAkBV,GACzBA,EAAK4B,KAAMC,WAAY,WAGzB,QAASjF,GAAwB6C,GAC/B,GAAIO,GAAOzY,EAAE,uBAA0BkY,EAAU,KACjDiB,GAAkBV,GAGpB,QAASxX,KACP,GAAIsZ,GAAQva,EAAE,wBACdua,GAAMF,KAAMC,WAAY,WAG1B,QAASE,KACPvZ,IACAhjE,OAAO0/D,IAAIoB,oBACTC,MAAQ,EACRC,OAAS,EACTC,OAAS,GAIb,QAAS6Z,GAAkBN,EAAM7B,GAC/B,GAAIuD,GAASC,EAAyB3B,EAAM7B,EAC5C6B,GAAK4B,KAAMxS,IAAKsS,EAAOj8C,EAAI,KAAM4tB,KAAMquB,EAAOzzD,EAAI,OAGpD,QAAS0zD,GAAyB3B,EAAM7B,GACtC,GAAI6D,GAAWhC,EAAKiC,aAChBC,EAAYlC,EAAKmC,cACjBC,EAAUjE,EAAYlwD,EAAI+zD,EAAW,EACrCK,EAASlE,EAAY14C,EAAIy8C,EAAYI,CACzC,OAAO,IAAIjT,OAAM+S,EAASC,GA9F5Bn2E,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQg+E,aAAeA,EACvBh+E,EAAQo8E,iBAAmBA,EAC3Bp8E,EAAQs8E,iBAAmBA,EAC3Bt8E,EAAQs9E,kBAAoBA,EAC5Bt9E,EAAQw5E,wBAA0BA,EAClCx5E,EAAQolE,mBAAqBA,EAC7BplE,EAAQ2+E,oBAAsBA,EAC9B3+E,EAAQk9E,kBAAoBA,EAC5Bl9E,EAAQu+E,yBAA2BA,CACnC,IAAI1rE,GAASnT,EAAQ,kBAEjBkC,EAAiBiR,EAAOjR,eACxBs9E,EAAiB,KAkFlB1gB,iBAAiB,IAAI16C,IAAI,SAASpkB,EAAQU,EAAOJ,GACpD,YAsCA,SAAS+C,KACPo8E,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IAOF,QAASC,GAAoBC,GAC3B,GAAIC,GAAWt6E,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,IAAmBA,UAAU,EAE1Eq6E,GAAY3/E,OAAS,IACnBikE,EAAEr3D,QAAQ+yE,GACZA,EAAY/uD,QAAQ,SAAUphB,GAC5B,MAAOqwE,GAAmBrwE,EAAMowE,KAGlCC,EAAmBF,EAAaC,IAKtC,QAAS5D,GAAsB2D,GAC7BD,EAAoBC,GAAa,GAGnC,QAASE,GAAmBC,GAC1B,GAAIF,GAAWt6E,UAAUtF,OAAS,GAAsB8H,SAAjBxC,UAAU,IAAmBA,UAAU,GAE1Ey6E,EAAU9b,EAAE,cAAgB6b,EAE5BC,GAAQ//E,OAAS,IACf4/E,KAAa,EACfG,EAAQ3a,SAAS4a,GAEjBD,EAAQlZ,YAAYmZ,IAK1B,QAASC,GAAqBH,GAC5BD,EAAmBC,GAAY,GAGjC,QAAS9D,GAAsB2D,GAC7BD,EAAoBC,GAAa,GAGnC,QAASO,KAEPh+E,OAAO0/D,IAAIC,eACX+G,MAAMC,QAAQsX,YAAYC,iBAC1Bnb,EAASC,qBACTwa,GAAqB,OAAQ,MAAO,YAAa,UACjD9rC,EAAMqgC,cAKR,QAASoM,KACPzsC,EAAMqgC,cACNhP,EAASC,oBAET,IAAI9G,GAAc,GAAIC,OAAM,EAAG,EAE/B,MAAMn8D,OAAO0/D,IAAIO,MAAMniE,OAAS,GAG9B,YADAkC,OAAO0/D,IAAI0B,wBAAyB,EAItC,IAAIgd,GAAWp+E,OAAO0/D,IAAIO,MAAM/hE,MAC5BoN,EAAOq7D,QAAQC,SACjB7gC,GAAIq4C,EAASr4C,IAGf,IAAIz6B,EAEF,OADAA,EAAKi9D,SAAU,EACP6V,EAAS3+E,MACf,IAAK,WAEHiyC,EAAMuiC,2BAA2B3oE,GACjCjJ,EAAKg8E,eAAe/yE,GACpBA,EAAKmkC,SAED,gBAAkB2uC,KAEpBA,EAAS3F,aAAalQ,SAAU,EAChC6V,EAAS3F,aAAaziD,KAAK0yC,OAAQ,EACnCsI,EAAM1J,aAGR,IAAIgX,GAAYj8E,EAAKk8E,cAGjBD,IAAa,GACfd,GAAqB,OAAQ,MAAO,YAAa,UACjDva,EAAM0B,YAAYjzB,EAAMkgC,oBAExBkI,GAAuB,OAAQ,MAAO,YAAa,UACnD7W,EAAMC,SAASxxB,EAAMkgC,kBAGvB,MACF,KAAK,aACCwM,EAASliB,aACX5wD,EAAK47D,UAAYkX,EAASrd,KAC1Bz1D,EAAK67D,YAAciX,EAASrd,OAE5Bz1D,EAAK47D,UAAYhL,EACjB5wD,EAAK67D,YAAcjL,EAEvB,KAAK,YAEH,GADA5wD,EAAK0qB,KAAK0yC,OAAQ,EACZ0V,EAASpL,WACb1nE,EAAK0nE,SAAWoL,EAASpL,SACrB1nE,EAAK0qB,MAAQ1qB,EAAK0qB,KAAKmkD,KAAO7uE,EAAK0qB,KAAKmkD,IAAIr8E,OAAS,GAAG,CAE1D,GAAI08E,GAAOzY,EAAE,uBAA0BkY,QAAU,KACjDlX,GAAS+X,kBAAkBN,EAAM4D,EAASpL,UAGxCoL,EAAS/9C,WACb/0B,EAAK+0B,SAAW+9C,EAAS/9C,UAErB+9C,EAASj+C,OACb70B,EAAK60B,MAAMi+C,EAASj+C,OAElB1vB,EAAOvS,OAAQ,GACjB8yE,EAAM1J,cA6BhB,QAASkX,KACP9sC,EAAMqgC,cACNlQ,EAASW,YAAY,QAIvB,QAASic,KACPC,EAAM77B,SAQR,QAASk6B,KACPhb,EAAE,cAAcryB,GAAG0zB,EAAU,WAC3BjrB,SAAS8pB,WAIb,QAAS+a,KACP,GAAI2B,GAAe5c,EAAE,qBACjB6c,EAAiBD,EAAarjD,KAAK,MACnCujD,EAAmB,GACnBC,EAA2B,GAC3BC,EAAuB,kBAG3BH,GAAelvC,GAAG,kBAAmB,WACnC,IAAKuzB,EAAM0O,SAASE,GAAe,CACjC,GAAImN,GAAOjd,EAAEjhE,MAAMw6B,KAAK,oBAEnB0jD,GAAKrN,SAASoN,KACjBhd,EAAE,IAAMgd,GAAsBpa,YAAYoa,GAAsBlZ,KAAK,QAASgZ,GAAkBhZ,KAAK,SAAUgZ,GAAkBvjD,KAAK,QAAQuqC,KAAK,KAAM,GAAGA,KAAK,KAAM,GAEvKmZ,EAAK9b,SAAS6b,GAAsBlZ,KAAK,QAASiZ,GAA0BjZ,KAAK,SAAUiZ,GAA0BxjD,KAAK,QAAQuqC,KAAK,KAAMiZ,EAA2B,GAAGjZ,KAAK,KAAMiZ,EAA2B,GAEjN9+E,OAAO0/D,IAAInM,aAAeyrB,EAAK1jD,KAAK,QAAQuqC,KAAK,YAOzD,QAASoX,KACPlb,EAAE,uBAAuBryB,GAAG0zB,EAAU,WAC/BH,EAAM0O,SAASE,IAClBmM,MAKN,QAASd,KACPnb,EAAE,wBAAwBryB,GAAG0zB,EAAU,WAChCH,EAAM0O,SAASE,IAClBsM,MAKN,QAAShB,KACPpb,EAAE,mCAAmCryB,GAAG0zB,EAAU1xB,EAAMggC,cACxD3P,EAAE,mCAAmCryB,GAAG0zB,EAAU1xB,EAAMqgC,aAG1D,QAASqL,KACPrb,EAAE,mBAAmBryB,GAAG0zB,EAAU,WAC3BH,EAAM0O,SAASE,IAClB2M,MAKN,QAASnB,KACPtb,EAAE,oBAAoBryB,GAAG0zB,EAAUqb,GAGrC,QAASnB,KACP,GAAIhB,GAAQva,EAAE,wBACdua,GAAM5sC,GAAG0zB,EAAU,WACjBrB,EAAEjhE,MAAMs7E,KAAMC,WAAY,aAI9B,QAASkB,KACP7W,MAAMC,QAAQsY,QAGdvY,MAAMC,QAAQsX,YAAY3wE,KAAO,YACjC,IAAI4xE,GAAe,GACfC,EAAoB13E,KAAK25B,MAAM35B,KAAK40C,UAAY6iC,EAAe,IAAM,EACrEE,EAAW,GAAIC,QAAO,UAAYF,EACtCC,GAAS9xE,KAAO,WAChB8xE,EAASpM,SAAWtM,MAAMtgB,KAAKrnB,MAG/B,IAAIugD,GAAwB5Y,MAAMtgB,KAAK0qB,SAAS7hB,MAAQmwB,EAAS3wD,KAAKwgC,MAClEswB,EAAsB7Y,MAAMtgB,KAAK0qB,SAAS5hB,OAASkwB,EAAS3wD,KAAKygC,MACrEkwB,GAASj/C,MAAM14B,KAAKC,IAAI43E,EAAuBC,GACnC,IAAIC,MAChB9Y,OAAMC,QAAQsX,YAAY3wE,KAAO,SA/SnC5G,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQ+C,KAAOA,EACf/C,EAAQ4/E,oBAAsBA,EAC9B5/E,EAAQk8E,sBAAwBA,EAChCl8E,EAAQ+/E,mBAAqBA,EAC7B//E,EAAQmgF,qBAAuBA,EAC/BngF,EAAQ2/E,YAAcA,CACtB,IAAI9sE,GAASnT,EAAQ,kBAEjBo0C,EAAQp0C,EAAQ,WAChBylE,EAAWzlE,EAAQ,cACnBukE,EAAWvkE,EAAQ,cACnB+E,EAAO/E,EAAQ,UAEf0zE,GADQ1zE,EAAQ,WACRA,EAAQ,YAChBohF,EAAQphF,EAAQ,WAEhB2lE,EAAQlB,EAAE,QACVqB,EAAW,kBAEXyO,EAAengC,EAAMmgC,aAYrBiM,GAXmBpsC,EAAMkgC,iBAEZ7P,EAAE,kBACDA,EAAE,mBACFA,EAAE,wBACDA,EAAE,oBACHA,EAAE,mBAEHnkE,EAAQ2yE,WAAaxO,EAAE,WAAW,GACjCnkE,EAAQo4E,YAAcjU,EAAE,iBAAiB,GAEvC,cAgRjB3F,iBAAiB,EAAE4T,UAAU,EAAE9N,aAAa,GAAGqT,UAAU,GAAGkK,UAAU,GAAGtd,UAAU,GAAGgE,aAAa,GAAGniE,SAAS,KAAK6d,IAAI,SAASvkB,EAAQU,EAAOJ,GACnJ,YA2BA,SAASg7E,GAAI8G,GACX,MAAOA,GAAUj4E,KAAKu6B,GAAK,IAI7B,QAAS29C,GAAIC,GACX,MAAiB,KAAVA,EAAgBn4E,KAAKu6B,GAG9B,QAAS+4C,GAAM19E,EAAGgsB,GAChB,MAAO5hB,MAAKq6B,KAAKr6B,KAAK2hD,IAAI/rD,EAAG,GAAKoK,KAAK2hD,IAAI//B,EAAG,IAIhD,QAASmuD,GAAW/uD,EAAGwX,GACrB,MAAOx4B,MAAKy4B,IAAIz4B,KAAKs6B,MAAMt6B,KAAKy2D,IAAIj+B,EAAIxX,GAAIhhB,KAAKw2D,IAAIh+B,EAAIxX,KAI3D,QAASo3D,GAAMl+C,EAAIC,GACjB,MAAOn6B,MAAKq6B,KAAKr6B,KAAK2hD,IAAIznB,EAAGlZ,EAAImZ,EAAGnZ,EAAG,GAAKhhB,KAAK2hD,IAAIznB,EAAG1B,EAAI2B,EAAG3B,EAAG,IAGpE,QAASsvB,KACP,OAAO,GAAI3mB,OAAOk3C,qBAGpB,QAASC,KACP,GAAItQ,GAASC,GACb,OAAOD,GAAO3xE,OAGhB,QAAS4xE,KACP,MAAOhJ,OAAMC,QAAQwN,UACnBtN,UAAW,QACX52D,MAAO,SAAe21D,GACpB,MAAOA,GAAG2C,WAAY,KAK5B,QAASyX,KACP,MAAOtZ,OAAMC,QAAQwN,UACnBtN,UAAW,UAIf,QAASvD,KACP,GAAImM,GAASC,GACb,OAAOD,GAAO3xE,OAAS,EAGzB,QAASygF,KACP,GAAI9O,GAASC,GAEb,OAAOD,GAAO3xE,OAGhB,QAAS0pE,KACP,MAAOd,OAAMC,QAAQwN,UACnBtN,UAAW,QACX52D,MAAO,SAAe21D,GACpB,MAAOA,GAAG5vC,MAAQ4vC,EAAG5vC,KAAKnmB,QAAS,GAAS+1D,EAAG5vC,KAAK0yC,SAAU,KAKpE,QAASf,KACP,MAAOjB,OAAMC,QAAQwN,UACnBlkE,MAAO,SAAe21D,GACpB,MAAOA,GAAG5vC,MAAQ4vC,EAAG5vC,KAAK93B,OAAQ,KAKxC,QAASmgF,GAAehY,GACtB,GAAIhnE,GAAOknE,EAAaF,EACxBhnE,GAAKqvB,QAAQ,SAAUxwB,GACrB,MAAOA,GAAIuxC,WAIf,QAAS82B,GAAaF,GAEpB,GAAI4Z,KAEJ,IAAI5Z,EAAMS,SAAShpE,OAAS,EAAG,CAC7B,GAAIoiF,GAAY7Z,EAAM8N,UACpBlkE,MAAO,SAAe21D,GACpB,MAAOA,GAAG5vC,MAAQ4vC,EAAG5vC,KAAK93B,OAAQ,IAGtC+hF,GAAaA,EAAW//D,OAAOggE,GAGjC,GAAIC,GAAmBzZ,MAAMC,QAAQwN,UACnClkE,MAAO,SAAe21D,GACpB,MAAOA,GAAG5vC,MAAQ4vC,EAAG5vC,KAAK93B,OAAQ,GAAQ0nE,EAAG5vC,KAAKsyC,oBAAsBjC,EAAMtgC,KAQlF,OAJIo6C,GAAiBriF,OAAS,IAC5BmiF,EAAaA,EAAW//D,OAAOigE,IAG1BF,EAGT,QAASvY,KACP,MAAOhB,OAAMC,QAAQwN,UACnBtN,UAAW,QACX52D,MAAO,SAAe21D,GACpB,MAAOA,GAAG5vC,MAAQ4vC,EAAG5vC,KAAKnmB,QAAS,GAAS+1D,EAAG2C,WAAY,KAKjE,QAASvG,KACPD,EAAE/5D,IAAI,SAASmZ,KAAK,SAAUoyD,GAC5BrhE,QAAQI,IAAI,gBAAiBihE,GAC7BvzE,OAAO0/D,IAAI5I,KAAOyc,IACjBn1D,KAAK,SAAUthB,GAChBoV,QAAQzD,MAAM,sBAAuB3R,KAKzC,QAASu4E,GAAY+K,GAGnB,GAEI7iF,GAFAitE,EAAQ9jE,OAAOC,OAAOD,OAAO8V,eAAe4jE,IAG5C30E,EAAO/E,OAAO6V,oBAAoB6jE,EAEtC,KAAK7iF,EAAI,EAAGA,EAAIkO,EAAK3N,OAAQP,IAE3BmJ,OAAO+U,eAAe+uD,EAAO/+D,EAAKlO,GAAImJ,OAAO2V,yBAAyB+jE,EAAU30E,EAAKlO,IAGvF,OAAOitE,GAGT,QAAS0B,GAAWl8C,GAClB,MAAIA,GAAMlyB,OAAS,EACVkyB,EAAMvoB,KAAK0hD,MAAM1hD,KAAK40C,SAAWrsB,EAAMlyB,SAGzC,KA7KT4I,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQg7E,IAAMA,EACdh7E,EAAQ+hF,IAAMA,EACd/hF,EAAQm9E,MAAQA,EAChBn9E,EAAQ45E,WAAaA,EACrB55E,EAAQiiF,MAAQA,EAChBjiF,EAAQ2xD,QAAUA,EAClB3xD,EAAQmiF,oBAAsBA,EAC9BniF,EAAQ8xE,iBAAmBA,EAC3B9xE,EAAQoiF,aAAeA,EACvBpiF,EAAQ0lE,kBAAoBA,EAC5B1lE,EAAQ2gF,aAAeA,EACvB3gF,EAAQ4pE,eAAiBA,EACzB5pE,EAAQ+pE,WAAaA,EACrB/pE,EAAQygF,eAAiBA,EACzBzgF,EAAQ2oE,aAAeA,EACvB3oE,EAAQ8pE,iBAAmBA,EAC3B9pE,EAAQokE,OAASA,EACjBpkE,EAAQy3E,YAAcA,EACtBz3E,EAAQsuE,WAAaA,CACR5uE,GAAQ,oBA0JlB8+D,iBAAiB,IAAIh5C,IAAI,SAAS9lB,EAAQU,EAAOJ,GACpD,YAyBA,SAASqmE,KACP/xD,QAAQI,IAAI,0BACZ+tE,IACApd,EAAMC,SAASod,GACfzrD,aAAa70B,OAAO0/D,IAAIwB,mBACxB/lB,cAAcn7C,OAAO0/D,IAAIgC,2BACzBuB,EAAMrzB,IAAIwzB,EAAUtB,EAAOe,0BAC3BI,EAAMvzB,GAAG0zB,EAAUsS,GACnB6K,EAAK9gB,cACLmC,EAAG2b,cACHv9E,OAAO0/D,IAAI6B,qBAAuBvmB,YAAY,WAC5C+mB,EAAE/5D,IAAI,SAASmZ,KAAK,SAAUoyD,GACxBA,IAAQvzE,OAAO0/D,IAAI5I,OACrB5kD,QAAQI,IAAI,6BACZ6lC,SAAS8pB,YAEV7jD,KAAK,SAAUthB,GAChBoV,QAAQzD,MAAM,sBAAuB3R,MAEtCglE,EAAO+T,mBAGZ,QAASH,KACPxjE,QAAQI,IAAI,yBACZo/B,EAAMi/B,oBAAoBjyD,KAAK,WAC7By8B,cAAcn7C,OAAO0/D,IAAI6B,sBACzBlxB,OAAOwB,MAAK,GACZ4jC,IACAxS,EAAMrzB,IAAIwzB,EAAUsS,GACpBzS,EAAMvzB,GAAG0zB,EAAUtB,EAAOe,0BAC1BI,EAAM0B,YAAY2b,GAClBzrD,aAAa70B,OAAO0/D,IAAIwB,mBACxB/lB,cAAcn7C,OAAO0/D,IAAIgC,2BAEzBG,EAASW,YAAY,SAErBxiE,OAAO0/D,IAAIwB,kBAAoB79D,WAAW,WACxCw+D,EAASW,YAAY,aACpBV,EAAOiC,2BACT3lD,KAAK,SAAUthB,GAChBoV,QAAQzD,MAAM,+BAAgC3R,GAC9Cq7C,SAAS8pB,WAIb,QAASwT,KACP+K,EAAOx4E,IAAI,GAAGkyC,QAGhB,QAASmmC,KACPG,EAAOx4E,IAAI,GAAG+vC,OAzEhBrxC,OAAO+U,eAAe7d,EAAS,cAC7BqI,OAAO,IAETrI,EAAQqmE,kBAAoBA,EAC5BrmE,EAAQ83E,iBAAmBA,EAC3B93E,EAAQ63E,WAAaA,EACrB73E,EAAQyiF,UAAYA,CACpB,IAEIE,IAFSjjF,EAAQ,kBAEVA,EAAQ,WACfukE,EAAWvkE,EAAQ,cACnBwkE,EAASxkE,EAAQ,YACjBskE,EAAKtkE,EAAQ,QACbo0C,EAAQp0C,EAAQ,WAEhB2lE,EAAQlB,EAAE,QACVqB,EAAW,kBAEXkd,EAAoB1iF,EAAQ0iF,kBAAoB,gBAEhDG,EAAgBxd,EAAM3nC,KAAK,eAC3BklD,EAASC,EAAcnlD,KAAK,WAuD7B8gC,iBAAiB,EAAEskB,SAAS,EAAExe,aAAa,GAAGC,UAAU,GAAGC,WAAW,GAAGE,OAAO,UAAU","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nexports.runAnimations = false;\nexports.pop = true;\nexports.canvasId = 'canvas';\nexports.maxShapes = 20;\n\nexports.palette = {\n  colors: [\"#20171C\", \"#1E2A43\", \"#28377D\", \"#352747\", \"#CA2E26\", \"#9A2A1F\", \"#DA6C26\", \"#453121\", \"#916A47\", \"#DAAD27\", \"#7F7D31\", \"#2B5E2E\"],\n  colorNames: {\n    \"#20171C\": \"black\",\n    \"#1E2A43\": \"blue\",\n    \"#28377D\": \"blue\",\n    \"#352747\": \"blue\",\n    \"#CA2E26\": \"red\",\n    \"#9A2A1F\": \"red\",\n    \"#DA6C26\": \"orange\",\n    \"#453121\": \"brown\",\n    \"#916A47\": \"brown\",\n    \"#DAAD27\": \"orange\",\n    \"#7F7D31\": \"green\",\n    \"#2B5E2E\": \"green\"\n  },\n  gradients: {\n    '#20171C': ['#20171C', '#000000'],\n    '#1E2A43': ['#1E2A43', '#263166'],\n    '#28377D': ['#28377D', '#1E4695'],\n    '#352747': ['#352747', '#45005B'],\n    '#CA2E26': ['#CA2E26', '#9B352F'],\n    '#9A2A1F': ['#9A2A1F', '#CD3621'],\n    '#DA6C26': ['#DA6C26', '#BD4820'],\n    '#453121': ['#453121', '#281806'],\n    '#916A47': ['#916A47', '#623A22'],\n    '#DAAD27': ['#DAAD27', '#AF871D'],\n    '#7F7D31': ['#7F7D31', '#555827'],\n    '#2B5E2E': ['#2B5E2E', '#16451D']\n  },\n  pops: [\"#00ADEF\", \"#F285A5\", \"#7DC57F\", \"#F6EB16\", \"#F4EAE0\"],\n  colorSize: 20,\n  selectedColorSize: 30\n};\n\nexports.contextualTuts = [{\n  type: \"fill\",\n  copy: \"<strong>Double-tap</strong> a filled shape to <strong>UNFILL</strong> it. Repeat to <strong>FILL</strong> an unfilled shape.\"\n}, {\n  type: \"pinch\",\n  copy: \"<strong>Pinch</strong> shapes with <strong>TWO FINGERS</strong> to <strong>resize</strong> and <strong>move</strong> them.\"\n}, {\n  type: \"swipe\",\n  copy: \"To <strong>remove</strong> shapes, <strong>pinch</strong> with <strong>two fingers</strong> then <strong>swipe</strong> or hit <strong>undo</strong>.\"\n}];\n\n},{}],2:[function(require,module,exports){\n(function (process,global){\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.0\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.0\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":5}],3:[function(require,module,exports){\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n},{}],4:[function(require,module,exports){\n(function (global){\n/*!\n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  // 'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto iOS enabler.\n      self.mobileAutoEnable = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.value = vol;\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.value = muted ? 0 : self._volume;\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'running' : 'running';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Mobile browsers will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _enableMobileAudio: function() {\n      var self = this || Howler;\n\n      // Only run this on mobile devices if audio isn't already eanbled.\n      var isMobile = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(self._navigator && self._navigator.userAgent);\n      var isTouch = !!(('ontouchend' in window) || (self._navigator && self._navigator.maxTouchPoints > 0) || (self._navigator && self._navigator.msMaxTouchPoints > 0));\n      if (self._mobileEnabled || !self.ctx || (!isMobile && !isTouch)) {\n        return;\n      }\n\n      self._mobileEnabled = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function() {\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._mobileEnabled = true;\n          self.mobileAutoEnable = false;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchend', unlock, true);\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchend', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.state = 'resuming';\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio on iOS.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.mobileAutoEnable) {\n        Howler._enableMobileAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Check if this extension is available.\n        if (Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        var num = 0;\n        for (var i=0; i<self._sounds.length; i++) {\n          if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n            num++;\n            id = self._sounds[i]._id;\n          }\n        }\n\n        if (num === 1) {\n          sprite = null;\n        } else {\n          id = null;\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If we have no sprite and the sound hasn't loaded, we must wait\n      // for the sound to load to get our audio's duration.\n      if (self._state !== 'loaded' && !self._sprite[sprite]) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(self._soundById(sound._id) ? sound._id : undefined);\n          }\n        });\n\n        return sound._id;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          setTimeout(function() {\n            self._emit('play', sound._id);\n          }, 0);\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n      // Update the parameters of the sound\n      sound._paused = false;\n      sound._ended = false;\n      sound._sprite = sprite;\n      sound._seek = seek;\n      sound._start = self._sprite[sprite][0] / 1000;\n      sound._stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n            }, 0);\n          }\n        };\n\n        var isRunning = (Howler.state === 'running');\n        if (self._state === 'loaded' && isRunning) {\n          playWebAudio();\n        } else {\n          // Wait for the audio to load and then begin playback.\n          self.once(isRunning ? 'load' : 'resume', playWebAudio, isRunning ? sound._id : null);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          setTimeout(function() {\n            node.play();\n\n            // Setup the new end timer.\n            if (timeout !== Infinity) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            if (!internal) {\n              self._emit('play', sound._id);\n            }\n          }, 0);\n        };\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (self._state === 'loaded' && (window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS));\n        if (node.readyState === 4 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                if (!internal) {\n                  self._emit('stop', sound._id);\n                }\n\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n            }\n          }\n        }\n\n        if (sound && !internal) {\n          self._emit('stop', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n      var diff = Math.abs(from - to);\n      var dir = from > to ? 'out' : 'in';\n      var steps = diff / 0.01;\n      var stepLen = (steps > 0) ? len / steps : len;\n\n      // Since browsers clamp timeouts to 4ms, we need to clamp our steps to that too.\n      if (stepLen < 4) {\n        steps = Math.ceil(steps / (4 / stepLen));\n        stepLen = 4;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          var vol = from;\n          sound._interval = setInterval(function(soundId, sound) {\n            // Update the volume amount, but only if the volume should change.\n            if (steps > 0) {\n              vol += (dir === 'in' ? 0.01 : -0.01);\n            }\n\n            // Make sure the volume is in the right bounds.\n            vol = Math.max(0, vol);\n            vol = Math.min(1, vol);\n\n            // Round to within 2 decimal points.\n            vol = Math.round(vol * 100) / 100;\n\n            // Change the volume.\n            if (self._webAudio) {\n              if (typeof id === 'undefined') {\n                self._volume = vol;\n              }\n\n              sound._volume = vol;\n            } else {\n              self.volume(vol, soundId, true);\n            }\n\n            // When the fade is complete, stop it and fire event.\n            if (vol === to) {\n              clearInterval(sound._interval);\n              sound._interval = null;\n              self.volume(vol, soundId);\n              self._emit('fade', soundId);\n            }\n          }.bind(self, ids[i], sound), stepLen);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            sound._rateSeek = self.seek(id[i]);\n            sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.value = rate;\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Restart the playback if the sound was playing.\n          if (playing) {\n            self.play(id, true);\n          }\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node) {\n            sound._node.currentTime = seek;\n          }\n\n          self._emit('seek', id);\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n          self._emit('end', sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading.\n          sounds[i]._node.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=';\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n\n        // Remove the references in the global Howler object.\n        var index = Howler._howls.indexOf(self);\n        if (index >= 0) {\n          Howler._howls.splice(index, 1);\n        }\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      if (fn) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          if (fn === events[i].fn && id === events[i].id) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function() {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // don't move onto the next task until this one is done\n        self.once(task.event, function() {\n          self._queue.shift();\n          self._loadQueue();\n        });\n\n        task.action();\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        clearTimeout(self._endTimers[id]);\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop;\n      }\n      sound._node.bufferSource.playbackRate.value = sound._rate;\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n\n      if (self._scratchBuffer) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        try { node.bufferSource.buffer = self._scratchBuffer; } catch(e) {}\n      }\n      node.bufferSource = null;\n\n      return self;\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        self._node = new Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorListener, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Decode the buffer into an audio source.\n    Howler.ctx.decodeAudioData(arraybuffer, function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      }\n    }, function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    });\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.value = 1;\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n  \n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n      self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n      self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              sound._panner.setPosition(pan, 0, 0);\n            } else {\n              sound._panner.pan.value = pan;\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or\n   * all in the group. The most common usage is to set the 'x' position for\n   * left/right panning. Setting any value higher than 1.0 will begin to\n   * decrease the volume of the sound as it moves further away.\n   * @param  {Number} x  The x-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} y  The y-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} z  The z-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setPosition(x, y, z);\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setOrientation(x, y, z);\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) There will be no volume reduction inside this angle.\n   *     coneOuterAngle - (360 by default) The volume will be reduced to a constant value of\n   *                      `coneOuterGain` outside this angle.\n   *     coneOuterGain - (0 by default) The amount of volume reduction outside of `coneOuterAngle`.\n   *     distanceModel - ('inverse' by default) Determines algorithm to use to reduce volume as audio moves\n   *                      away from listener. Can be `linear`, `inverse` or `exponential`.\n   *     maxDistance - (10000 by default) Volume won't reduce between source/listener beyond this distance.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *     refDistance - (1 by default) A reference distance for reducing volume as the source\n   *                    moves away from the listener.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener.\n   * \n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : self._distanceModel,\n            maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : self._maxDistance,\n            panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : self._panningModel,\n            refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : self._refDistance,\n            rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : self._rolloffFactor\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.panningModel = pa.panningModel;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.value = sound._stereo;\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id);\n    }\n  };\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],5:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],6:[function(require,module,exports){\n(function (global){\n// Last time updated: 2017-02-13 9:58:18 AM UTC\n\n// ________________\n// RecordRTC v5.4.1\n\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\n\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\n'use strict';\n\n// ____________\n// RecordRTC.js\n\n/**\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a JavaScript-based media-recording library for modern web-browsers (supporting WebRTC getUserMedia API). It is optimized for different devices and browsers to bring all client-side (pluginfree) recording solutions in single place.\n * @summary JavaScript audio/video recording library runs top over WebRTC getUserMedia API.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTC\n * @class\n * @example\n * var recordRTC = RecordRTC(mediaStream, {\n *     type: 'video' // audio or video or gif or canvas\n * });\n *\n * // or, you can also use the \"new\" keyword\n * var recordRTC = new RecordRTC(mediaStream[, config]);\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n */\n\nfunction RecordRTC(mediaStream, config) {\n    if (!mediaStream) {\n        throw 'MediaStream is mandatory.';\n    }\n\n    config = config || {\n        type: 'video'\n    };\n\n    config = new RecordRTCConfiguration(mediaStream, config);\n\n    // a reference to user's recordRTC object\n    var self = this;\n\n    function startRecording() {\n        if (!config.disableLogs) {\n            console.debug('started recording ' + config.type + ' stream.');\n        }\n\n        if (mediaRecorder) {\n            mediaRecorder.clearRecordedData();\n            mediaRecorder.record();\n\n            if (self.recordingDuration) {\n                handleRecordingDuration();\n            }\n            return self;\n        }\n\n        initRecorder(function() {\n            if (self.recordingDuration) {\n                handleRecordingDuration();\n            }\n        });\n\n        return self;\n    }\n\n    function initRecorder(initCallback) {\n        if (initCallback) {\n            config.initCallback = function() {\n                initCallback();\n                initCallback = config.initCallback = null; // recordRTC.initRecorder should be call-backed once.\n            };\n        }\n\n        var Recorder = new GetRecorderType(mediaStream, config);\n\n        mediaRecorder = new Recorder(mediaStream, config);\n        mediaRecorder.record();\n\n        if (!config.disableLogs) {\n            console.debug('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\n        }\n    }\n\n    function stopRecording(callback) {\n        if (!mediaRecorder) {\n            return console.warn(WARNING);\n        }\n\n        /*jshint validthis:true */\n        var recordRTC = this;\n\n        if (!config.disableLogs) {\n            console.warn('Stopped recording ' + config.type + ' stream.');\n        }\n\n        if (config.type !== 'gif') {\n            mediaRecorder.stop(_callback);\n        } else {\n            mediaRecorder.stop();\n            _callback();\n        }\n\n        function _callback(__blob) {\n            for (var item in mediaRecorder) {\n                if (self) {\n                    self[item] = mediaRecorder[item];\n                }\n\n                if (recordRTC) {\n                    recordRTC[item] = mediaRecorder[item];\n                }\n            }\n\n            var blob = mediaRecorder.blob;\n\n            if (!blob) {\n                if (__blob) {\n                    mediaRecorder.blob = blob = __blob;\n                } else {\n                    throw 'Recording failed.';\n                }\n            }\n\n            if (callback) {\n                var url = URL.createObjectURL(blob);\n                callback(url);\n            }\n\n            if (blob && !config.disableLogs) {\n                console.debug(blob.type, '->', bytesToSize(blob.size));\n            }\n\n            if (!config.autoWriteToDisk) {\n                return;\n            }\n\n            getDataURL(function(dataURL) {\n                var parameter = {};\n                parameter[config.type + 'Blob'] = dataURL;\n                DiskStorage.Store(parameter);\n            });\n        }\n    }\n\n    function pauseRecording() {\n        if (!mediaRecorder) {\n            return console.warn(WARNING);\n        }\n\n        mediaRecorder.pause();\n\n        if (!config.disableLogs) {\n            console.debug('Paused recording.');\n        }\n    }\n\n    function resumeRecording() {\n        if (!mediaRecorder) {\n            return console.warn(WARNING);\n        }\n\n        // not all libs have this method yet\n        mediaRecorder.resume();\n\n        if (!config.disableLogs) {\n            console.debug('Resumed recording.');\n        }\n    }\n\n    function readFile(_blob) {\n        postMessage(new FileReaderSync().readAsDataURL(_blob));\n    }\n\n    function getDataURL(callback, _mediaRecorder) {\n        if (!callback) {\n            throw 'Pass a callback function over getDataURL.';\n        }\n\n        var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\n\n        if (!blob) {\n            if (!config.disableLogs) {\n                console.warn('Blob encoder did not finish its job yet.');\n            }\n\n            setTimeout(function() {\n                getDataURL(callback, _mediaRecorder);\n            }, 1000);\n            return;\n        }\n\n        if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\n            var webWorker = processInWebWorker(readFile);\n\n            webWorker.onmessage = function(event) {\n                callback(event.data);\n            };\n\n            webWorker.postMessage(blob);\n        } else {\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);\n            reader.onload = function(event) {\n                callback(event.target.result);\n            };\n        }\n\n        function processInWebWorker(_function) {\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\n                'this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n            ], {\n                type: 'application/javascript'\n            }));\n\n            var worker = new Worker(blob);\n            URL.revokeObjectURL(blob);\n            return worker;\n        }\n    }\n\n    function handleRecordingDuration() {\n        setTimeout(function() {\n            stopRecording(self.onRecordingStopped);\n        }, self.recordingDuration);\n    }\n\n    var WARNING = 'It seems that \"startRecording\" is not invoked for ' + config.type + ' recorder.';\n\n    var mediaRecorder;\n\n    var returnObject = {\n        /**\n         * This method starts recording. It doesn't take any arguments.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.startRecording();\n         */\n        startRecording: startRecording,\n\n        /**\n         * This method stops recording. It takes a single \"callback\" argument. It is suggested to get blob or URI in the callback to make sure all encoders finished their jobs.\n         * @param {function} callback - This callback function is invoked after completion of all encoding jobs.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function(videoURL) {\n         *     video.src = videoURL;\n         *     recordRTC.blob; recordRTC.buffer;\n         * });\n         */\n        stopRecording: stopRecording,\n\n        /**\n         * This method pauses the recording process.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.pauseRecording();\n         */\n        pauseRecording: pauseRecording,\n\n        /**\n         * This method resumes the recording process.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.resumeRecording();\n         */\n        resumeRecording: resumeRecording,\n\n        /**\n         * This method initializes the recording process.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.initRecorder();\n         */\n        initRecorder: initRecorder,\n\n        /**\n         * This method sets the recording duration.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.setRecordingDuration();\n         */\n        setRecordingDuration: function(milliseconds, callback) {\n            if (typeof milliseconds === 'undefined') {\n                throw 'milliseconds is required.';\n            }\n\n            if (typeof milliseconds !== 'number') {\n                throw 'milliseconds must be a number.';\n            }\n\n            self.recordingDuration = milliseconds;\n            self.onRecordingStopped = callback || function() {};\n\n            return {\n                onRecordingStopped: function(callback) {\n                    self.onRecordingStopped = callback;\n                }\n            };\n        },\n\n        /**\n         * This method can be used to clear/reset all the recorded data.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.clearRecordedData();\n         */\n        clearRecordedData: function() {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            mediaRecorder.clearRecordedData();\n\n            if (!config.disableLogs) {\n                console.debug('Cleared old recorded data.');\n            }\n        },\n\n        /**\n         * It is equivalent to <code class=\"str\">\"recordRTC.blob\"</code> property.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var blob = recordRTC.getBlob();\n         *\n         *     // equivalent to: recordRTC.blob property\n         *     var blob = recordRTC.blob;\n         * });\n         */\n        getBlob: function() {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            return mediaRecorder.blob;\n        },\n\n        /**\n         * This method returns the DataURL. It takes a single \"callback\" argument.\n         * @param {function} callback - DataURL is passed back over this callback.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     recordRTC.getDataURL(function(dataURL) {\n         *         video.src = dataURL;\n         *     });\n         * });\n         */\n        getDataURL: getDataURL,\n\n        /**\n         * This method returns the Virutal/Blob URL. It doesn't take any arguments.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     video.src = recordRTC.toURL();\n         * });\n         */\n        toURL: function() {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            return URL.createObjectURL(mediaRecorder.blob);\n        },\n\n        /**\n         * This method saves the blob/file to disk (by invoking save-as dialog). It takes a single (optional) argument i.e. FileName\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     recordRTC.save('file-name');\n         * });\n         */\n        save: function(fileName) {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            invokeSaveAsDialog(mediaRecorder.blob, fileName);\n        },\n\n        /**\n         * This method gets a blob from indexed-DB storage. It takes a single \"callback\" argument.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.getFromDisk(function(dataURL) {\n         *     video.src = dataURL;\n         * });\n         */\n        getFromDisk: function(callback) {\n            if (!mediaRecorder) {\n                return console.warn(WARNING);\n            }\n\n            RecordRTC.getFromDisk(config.type, callback);\n        },\n\n        /**\n         * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\n         * @type {Array.<Array>}\n         * @param {Array} arrayOfWebPImages - Array of webp images.\n         * @method\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * var arrayOfWebPImages = [];\n         * arrayOfWebPImages.push({\n         *     duration: index,\n         *     image: 'data:image/webp;base64,...'\n         * });\n         * recordRTC.setAdvertisementArray(arrayOfWebPImages);\n         */\n        setAdvertisementArray: function(arrayOfWebPImages) {\n            config.advertisement = [];\n\n            var length = arrayOfWebPImages.length;\n            for (var i = 0; i < length; i++) {\n                config.advertisement.push({\n                    duration: i,\n                    image: arrayOfWebPImages[i]\n                });\n            }\n        },\n\n        /**\n         * It is equivalent to <code class=\"str\">\"recordRTC.getBlob()\"</code> method.\n         * @property {Blob} blob - Recorded Blob can be accessed using this property.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var blob = recordRTC.blob;\n         *\n         *     // equivalent to: recordRTC.getBlob() method\n         *     var blob = recordRTC.getBlob();\n         * });\n         */\n        blob: null,\n\n        /**\n         * @todo Add descriptions.\n         * @property {number} bufferSize - Either audio device's default buffer-size, or your custom value.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var bufferSize = recordRTC.bufferSize;\n         * });\n         */\n        bufferSize: 0,\n\n        /**\n         * @todo Add descriptions.\n         * @property {number} sampleRate - Audio device's default sample rates.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var sampleRate = recordRTC.sampleRate;\n         * });\n         */\n        sampleRate: 0,\n\n        /**\n         * @todo Add descriptions.\n         * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var buffer = recordRTC.buffer;\n         * });\n         */\n        buffer: null,\n\n        /**\n         * @todo Add descriptions.\n         * @property {DataView} view - Audio DataView, supported only in Chrome.\n         * @memberof RecordRTC\n         * @instance\n         * @example\n         * recordRTC.stopRecording(function() {\n         *     var dataView = recordRTC.view;\n         * });\n         */\n        view: null\n    };\n\n    if (!this) {\n        self = returnObject;\n        return returnObject;\n    }\n\n    // if someone wants to use RecordRTC with the \"new\" keyword.\n    for (var prop in returnObject) {\n        this[prop] = returnObject[prop];\n    }\n\n    self = this;\n\n    return returnObject;\n}\n\n/**\n * This method can be used to get all recorded blobs from IndexedDB storage.\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\n * @param {function} callback - Callback function to get all stored blobs.\n * @method\n * @memberof RecordRTC\n * @example\n * RecordRTC.getFromDisk('all', function(dataURL, type){\n *     if(type === 'audio') { }\n *     if(type === 'video') { }\n *     if(type === 'gif')   { }\n * });\n */\nRecordRTC.getFromDisk = function(type, callback) {\n    if (!callback) {\n        throw 'callback is mandatory.';\n    }\n\n    console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\n    DiskStorage.Fetch(function(dataURL, _type) {\n        if (type !== 'all' && _type === type + 'Blob' && callback) {\n            callback(dataURL);\n        }\n\n        if (type === 'all' && callback) {\n            callback(dataURL, _type.replace('Blob', ''));\n        }\n    });\n};\n\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof RecordRTC\n * @example\n * RecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\nRecordRTC.writeToDisk = function(options) {\n    console.log('Writing recorded blob(s) to disk!');\n    options = options || {};\n    if (options.audio && options.video && options.gif) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.video.getDataURL(function(videoDataURL) {\n                options.gif.getDataURL(function(gifDataURL) {\n                    DiskStorage.Store({\n                        audioBlob: audioDataURL,\n                        videoBlob: videoDataURL,\n                        gifBlob: gifDataURL\n                    });\n                });\n            });\n        });\n    } else if (options.audio && options.video) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.video.getDataURL(function(videoDataURL) {\n                DiskStorage.Store({\n                    audioBlob: audioDataURL,\n                    videoBlob: videoDataURL\n                });\n            });\n        });\n    } else if (options.audio && options.gif) {\n        options.audio.getDataURL(function(audioDataURL) {\n            options.gif.getDataURL(function(gifDataURL) {\n                DiskStorage.Store({\n                    audioBlob: audioDataURL,\n                    gifBlob: gifDataURL\n                });\n            });\n        });\n    } else if (options.video && options.gif) {\n        options.video.getDataURL(function(videoDataURL) {\n            options.gif.getDataURL(function(gifDataURL) {\n                DiskStorage.Store({\n                    videoBlob: videoDataURL,\n                    gifBlob: gifDataURL\n                });\n            });\n        });\n    } else if (options.audio) {\n        options.audio.getDataURL(function(audioDataURL) {\n            DiskStorage.Store({\n                audioBlob: audioDataURL\n            });\n        });\n    } else if (options.video) {\n        options.video.getDataURL(function(videoDataURL) {\n            DiskStorage.Store({\n                videoBlob: videoDataURL\n            });\n        });\n    } else if (options.gif) {\n        options.gif.getDataURL(function(gifDataURL) {\n            DiskStorage.Store({\n                gifBlob: gifDataURL\n            });\n        });\n    }\n};\n\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\n    module.exports = RecordRTC;\n}\n\nif (typeof define === 'function' && define.amd) {\n    define('RecordRTC', [], function() {\n        return RecordRTC;\n    });\n}\n\n// __________________________\n// RecordRTC-Configuration.js\n\n/**\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef RecordRTCConfiguration\n * @class\n * @example\n * var options = RecordRTCConfiguration(mediaStream, options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\n */\n\nfunction RecordRTCConfiguration(mediaStream, config) {\n    if (config.recorderType && !config.type) {\n        if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder) {\n            config.type = 'video';\n        } else if (config.recorderType === GifRecorder) {\n            config.type = 'gif';\n        } else if (config.recorderType === StereoAudioRecorder) {\n            config.type = 'audio';\n        } else if (config.recorderType === MediaStreamRecorder) {\n            if (mediaStream.getAudioTracks().length && mediaStream.getVideoTracks().length) {\n                config.type = 'video';\n            } else if (mediaStream.getAudioTracks().length && !mediaStream.getVideoTracks().length) {\n                config.type = 'audio';\n            } else if (!mediaStream.getAudioTracks().length && mediaStream.getVideoTracks().length) {\n                config.type = 'audio';\n            } else {\n                // config.type = 'UnKnown';\n            }\n        }\n    }\n\n    if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n        if (!config.mimeType) {\n            config.mimeType = 'video/webm';\n        }\n\n        if (!config.type) {\n            config.type = config.mimeType.split('/')[0];\n        }\n\n        if (!config.bitsPerSecond) {\n            // config.bitsPerSecond = 128000;\n        }\n    }\n\n    // consider default type=audio\n    if (!config.type) {\n        if (config.mimeType) {\n            config.type = config.mimeType.split('/')[0];\n        }\n        if (!config.type) {\n            config.type = 'audio';\n        }\n    }\n\n    return config;\n}\n\n// __________________\n// GetRecorderType.js\n\n/**\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\n * @summary It returns best recorder-type available for your browser.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GetRecorderType\n * @class\n * @example\n * var RecorderType = GetRecorderType(options);\n * var recorder = new RecorderType(options);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\n */\n\nfunction GetRecorderType(mediaStream, config) {\n    var recorder;\n\n    // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\n    // todo: detect if it is Edge, then auto use: StereoAudioRecorder\n    if (isChrome || isEdge || isOpera) {\n        // Media Stream Recording API has not been implemented in chrome yet;\n        // That's why using WebAudio API to record stereo audio in WAV format\n        recorder = StereoAudioRecorder;\n    }\n\n    if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\n        recorder = MediaStreamRecorder;\n    }\n\n    // video recorder (in WebM format)\n    if (config.type === 'video' && (isChrome || isOpera)) {\n        recorder = WhammyRecorder;\n    }\n\n    // video recorder (in Gif format)\n    if (config.type === 'gif') {\n        recorder = GifRecorder;\n    }\n\n    // html2canvas recording!\n    if (config.type === 'canvas') {\n        recorder = CanvasRecorder;\n    }\n\n    if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n        if ((mediaStream.getVideoTracks && mediaStream.getVideoTracks().length) || (mediaStream.getAudioTracks && mediaStream.getAudioTracks().length)) {\n            // audio-only recording\n            if (config.type === 'audio') {\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\n                    recorder = MediaStreamRecorder;\n                }\n                // else recorder = StereoAudioRecorder;\n            } else {\n                // video or screen tracks\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\n                    recorder = MediaStreamRecorder;\n                }\n            }\n        }\n    }\n\n    if (config.recorderType) {\n        recorder = config.recorderType;\n    }\n\n    if (mediaStream instanceof Array && mediaStream.length) {\n        recorder = MultiStreamRecorder;\n    }\n\n    if (!config.disableLogs && !!recorder && !!recorder.name) {\n        console.debug('Using recorderType:', recorder.name || recorder.constructor.name);\n    }\n\n    return recorder;\n}\n\n// _____________\n// MRecordRTC.js\n\n/**\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MRecordRTC\n * @class\n * @example\n * var recorder = new MRecordRTC();\n * recorder.addStream(MediaStream);\n * recorder.mediaType = {\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\n *     video: true, // or WhammyRecorder or MediaStreamRecorder\n *     gif: true    // or GifRecorder\n * };\n * // mimeType is optional and should be set only in advance cases.\n * recorder.mimeType = {\n *     audio: 'audio/wav',\n *     video: 'video/webm',\n *     gif:   'image/gif'\n * };\n * recorder.startRecording();\n * @see For further information:\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n */\n\nfunction MRecordRTC(mediaStream) {\n\n    /**\n     * This method attaches MediaStream object to {@link MRecordRTC}.\n     * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.addStream(MediaStream);\n     */\n    this.addStream = function(_mediaStream) {\n        if (_mediaStream) {\n            mediaStream = _mediaStream;\n        }\n    };\n\n    /**\n     * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\n     * @property {object} mediaType - {audio: true, video: true, gif: true}\n     * @memberof MRecordRTC\n     * @example\n     * var recorder = new MRecordRTC();\n     * recorder.mediaType = {\n     *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\n     *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder\n     *     gif  : true  // TRUE or GifRecorder\n     * };\n     */\n    this.mediaType = {\n        audio: true,\n        video: true\n    };\n\n    /**\n     * This method starts recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.startRecording();\n     */\n    this.startRecording = function() {\n        var mediaType = this.mediaType;\n        var recorderType;\n        var mimeType = this.mimeType || {\n            audio: null,\n            video: null,\n            gif: null\n        };\n\n        if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && mediaStream.getAudioTracks && !mediaStream.getAudioTracks().length) {\n            // Firefox supports both audio/video in single blob\n            mediaType.audio = false;\n        }\n\n        if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && mediaStream.getVideoTracks && !mediaStream.getVideoTracks().length) {\n            // Firefox supports both audio/video in single blob\n            mediaType.video = false;\n        }\n\n        if (!mediaType.audio && !mediaType.video) {\n            throw 'MediaStream must have either audio or video tracks.';\n        }\n\n        if (!!mediaType.audio) {\n            recorderType = null;\n            if (typeof mediaType.audio === 'function') {\n                recorderType = mediaType.audio;\n            }\n\n            this.audioRecorder = new RecordRTC(mediaStream, {\n                type: 'audio',\n                bufferSize: this.bufferSize,\n                sampleRate: this.sampleRate,\n                numberOfAudioChannels: this.numberOfAudioChannels || 2,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.audio\n            });\n\n            if (!mediaType.video) {\n                this.audioRecorder.startRecording();\n            }\n        }\n\n        if (!!mediaType.video) {\n            recorderType = null;\n            if (typeof mediaType.video === 'function') {\n                recorderType = mediaType.video;\n            }\n\n            var newStream = mediaStream;\n\n            if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\n                var videoTrack = mediaStream.getVideoTracks()[0];\n\n                if (!!navigator.mozGetUserMedia) {\n                    newStream = new MediaStream();\n                    newStream.addTrack(videoTrack);\n\n                    if (recorderType && recorderType === WhammyRecorder) {\n                        // Firefox does NOT support webp-encoding yet\n                        recorderType = MediaStreamRecorder;\n                    }\n                } else {\n                    newStream = new MediaStream([videoTrack]);\n                }\n            }\n\n            this.videoRecorder = new RecordRTC(newStream, {\n                type: 'video',\n                video: this.video,\n                canvas: this.canvas,\n                frameInterval: this.frameInterval || 10,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.video\n            });\n\n            if (!mediaType.audio) {\n                this.videoRecorder.startRecording();\n            }\n        }\n\n        if (!!mediaType.audio && !!mediaType.video) {\n            var self = this;\n            if (isMediaRecorderCompatible()) {\n                self.audioRecorder = null;\n                self.videoRecorder.startRecording();\n            } else {\n                self.videoRecorder.initRecorder(function() {\n                    self.audioRecorder.initRecorder(function() {\n                        // Both recorders are ready to record things accurately\n                        self.videoRecorder.startRecording();\n                        self.audioRecorder.startRecording();\n                    });\n                });\n            }\n        }\n\n        if (!!mediaType.gif) {\n            recorderType = null;\n            if (typeof mediaType.gif === 'function') {\n                recorderType = mediaType.gif;\n            }\n            this.gifRecorder = new RecordRTC(mediaStream, {\n                type: 'gif',\n                frameRate: this.frameRate || 200,\n                quality: this.quality || 10,\n                disableLogs: this.disableLogs,\n                recorderType: recorderType,\n                mimeType: mimeType.gif\n            });\n            this.gifRecorder.startRecording();\n        }\n    };\n\n    /**\n     * This method stops recording.\n     * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.stopRecording(function(recording){\n     *     var audioBlob = recording.audio;\n     *     var videoBlob = recording.video;\n     *     var gifBlob   = recording.gif;\n     * });\n     */\n    this.stopRecording = function(callback) {\n        callback = callback || function() {};\n\n        if (this.audioRecorder) {\n            this.audioRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'audio');\n            });\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'video');\n            });\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.stopRecording(function(blobURL) {\n                callback(blobURL, 'gif');\n            });\n        }\n    };\n\n    /**\n     * This method pauses recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.pauseRecording();\n     */\n    this.pauseRecording = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.pauseRecording();\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.pauseRecording();\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.pauseRecording();\n        }\n    };\n\n    /**\n     * This method resumes recording.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.resumeRecording();\n     */\n    this.resumeRecording = function() {\n        if (this.audioRecorder) {\n            this.audioRecorder.resumeRecording();\n        }\n\n        if (this.videoRecorder) {\n            this.videoRecorder.resumeRecording();\n        }\n\n        if (this.gifRecorder) {\n            this.gifRecorder.resumeRecording();\n        }\n    };\n\n    /**\n     * This method can be used to manually get all recorded blobs.\n     * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.getBlob(function(recording){\n     *     var audioBlob = recording.audio;\n     *     var videoBlob = recording.video;\n     *     var gifBlob   = recording.gif;\n     * });\n     * // or\n     * var audioBlob = recorder.getBlob().audio;\n     * var videoBlob = recorder.getBlob().video;\n     */\n    this.getBlob = function(callback) {\n        var output = {};\n\n        if (this.audioRecorder) {\n            output.audio = this.audioRecorder.getBlob();\n        }\n\n        if (this.videoRecorder) {\n            output.video = this.videoRecorder.getBlob();\n        }\n\n        if (this.gifRecorder) {\n            output.gif = this.gifRecorder.getBlob();\n        }\n\n        if (callback) {\n            callback(output);\n        }\n\n        return output;\n    };\n\n    /**\n     * This method can be used to manually get all recorded blobs' DataURLs.\n     * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.getDataURL(function(recording){\n     *     var audioDataURL = recording.audio;\n     *     var videoDataURL = recording.video;\n     *     var gifDataURL   = recording.gif;\n     * });\n     */\n    this.getDataURL = function(callback) {\n        this.getBlob(function(blob) {\n            if (blob.audio && blob.video) {\n                getDataURL(blob.audio, function(_audioDataURL) {\n                    getDataURL(blob.video, function(_videoDataURL) {\n                        callback({\n                            audio: _audioDataURL,\n                            video: _videoDataURL\n                        });\n                    });\n                });\n            } else if (blob.audio) {\n                getDataURL(blob.audio, function(_audioDataURL) {\n                    callback({\n                        audio: _audioDataURL\n                    });\n                });\n            } else if (blob.video) {\n                getDataURL(blob.video, function(_videoDataURL) {\n                    callback({\n                        video: _videoDataURL\n                    });\n                });\n            }\n        });\n\n        function getDataURL(blob, callback00) {\n            if (typeof Worker !== 'undefined') {\n                var webWorker = processInWebWorker(function readFile(_blob) {\n                    postMessage(new FileReaderSync().readAsDataURL(_blob));\n                });\n\n                webWorker.onmessage = function(event) {\n                    callback00(event.data);\n                };\n\n                webWorker.postMessage(blob);\n            } else {\n                var reader = new FileReader();\n                reader.readAsDataURL(blob);\n                reader.onload = function(event) {\n                    callback00(event.target.result);\n                };\n            }\n        }\n\n        function processInWebWorker(_function) {\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\n                'this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n            ], {\n                type: 'application/javascript'\n            }));\n\n            var worker = new Worker(blob);\n            var url;\n            if (typeof URL !== 'undefined') {\n                url = URL;\n            } else if (typeof webkitURL !== 'undefined') {\n                url = webkitURL;\n            } else {\n                throw 'Neither URL nor webkitURL detected.';\n            }\n            url.revokeObjectURL(blob);\n            return worker;\n        }\n    };\n\n    /**\n     * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.writeToDisk();\n     */\n    this.writeToDisk = function() {\n        RecordRTC.writeToDisk({\n            audio: this.audioRecorder,\n            video: this.videoRecorder,\n            gif: this.gifRecorder\n        });\n    };\n\n    /**\n     * This method can be used to invoke a save-as dialog for all recorded blobs.\n     * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\n     * @method\n     * @memberof MRecordRTC\n     * @example\n     * recorder.save({\n     *     audio: 'audio-file-name',\n     *     video: 'video-file-name',\n     *     gif  : 'gif-file-name'\n     * });\n     */\n    this.save = function(args) {\n        args = args || {\n            audio: true,\n            video: true,\n            gif: true\n        };\n\n        if (!!args.audio && this.audioRecorder) {\n            this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\n        }\n\n        if (!!args.video && this.videoRecorder) {\n            this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\n        }\n        if (!!args.gif && this.gifRecorder) {\n            this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\n        }\n    };\n}\n\n/**\n * This method can be used to get all recorded blobs from IndexedDB storage.\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\n * @param {function} callback - Callback function to get all stored blobs.\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\n *     if(type === 'audio') { }\n *     if(type === 'video') { }\n *     if(type === 'gif')   { }\n * });\n */\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\n\n/**\n * This method can be used to store recorded blobs into IndexedDB storage.\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\n * @method\n * @memberof MRecordRTC\n * @example\n * MRecordRTC.writeToDisk({\n *     audio: audioBlob,\n *     video: videoBlob,\n *     gif  : gifBlob\n * });\n */\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MRecordRTC = MRecordRTC;\n}\n\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n(function(that) {\n    if (!that) {\n        return;\n    }\n\n    if (typeof window !== 'undefined') {\n        return;\n    }\n\n    if (typeof global === 'undefined') {\n        return;\n    }\n\n    global.navigator = {\n        userAgent: browserFakeUserAgent,\n        getUserMedia: function() {}\n    };\n\n    if (!global.console) {\n        global.console = {};\n    }\n\n    if (typeof global.console.debug === 'undefined') {\n        global.console.debug = global.console.info = global.console.error = global.console.log = global.console.log || function() {\n            console.log(arguments);\n        };\n    }\n\n    if (typeof document === 'undefined') {\n        /*global document:true */\n        that.document = {};\n\n        document.createElement = document.captureStream = document.mozCaptureStream = function() {\n            var obj = {\n                getContext: function() {\n                    return obj;\n                },\n                play: function() {},\n                pause: function() {},\n                drawImage: function() {},\n                toDataURL: function() {\n                    return '';\n                }\n            };\n            return obj;\n        };\n\n        that.HTMLVideoElement = function() {};\n    }\n\n    if (typeof location === 'undefined') {\n        /*global location:true */\n        that.location = {\n            protocol: 'file:',\n            href: '',\n            hash: ''\n        };\n    }\n\n    if (typeof screen === 'undefined') {\n        /*global screen:true */\n        that.screen = {\n            width: 0,\n            height: 0\n        };\n    }\n\n    if (typeof URL === 'undefined') {\n        /*global screen:true */\n        that.URL = {\n            createObjectURL: function() {\n                return '';\n            },\n            revokeObjectURL: function() {\n                return '';\n            }\n        };\n    }\n\n    /*global window:true */\n    that.window = global;\n})(typeof global !== 'undefined' ? global : null);\n\n// _____________________________\n// Cross-Browser-Declarations.js\n\n// animation-frame used in WebM recording\n\n/*jshint -W079 */\nvar requestAnimationFrame = window.requestAnimationFrame;\nif (typeof requestAnimationFrame === 'undefined') {\n    if (typeof webkitRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = webkitRequestAnimationFrame;\n    }\n\n    if (typeof mozRequestAnimationFrame !== 'undefined') {\n        /*global requestAnimationFrame:true */\n        requestAnimationFrame = mozRequestAnimationFrame;\n    }\n}\n\n/*jshint -W079 */\nvar cancelAnimationFrame = window.cancelAnimationFrame;\nif (typeof cancelAnimationFrame === 'undefined') {\n    if (typeof webkitCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = webkitCancelAnimationFrame;\n    }\n\n    if (typeof mozCancelAnimationFrame !== 'undefined') {\n        /*global cancelAnimationFrame:true */\n        cancelAnimationFrame = mozCancelAnimationFrame;\n    }\n}\n\n// WebAudio API representer\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n    if (typeof webkitAudioContext !== 'undefined') {\n        /*global AudioContext:true */\n        AudioContext = webkitAudioContext;\n    }\n\n    if (typeof mozAudioContext !== 'undefined') {\n        /*global AudioContext:true */\n        AudioContext = mozAudioContext;\n    }\n}\n\n/*jshint -W079 */\nvar URL = window.URL;\n\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n    /*global URL:true */\n    URL = webkitURL;\n}\n\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n        navigator.getUserMedia = navigator.webkitGetUserMedia;\n    }\n\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\n        navigator.getUserMedia = navigator.mozGetUserMedia;\n    }\n}\n\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\nvar isChrome = !isOpera && !isEdge && !!navigator.webkitGetUserMedia;\n\nvar MediaStream = window.MediaStream;\n\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n    MediaStream = webkitMediaStream;\n}\n\n/*global MediaStream:true */\nif (typeof MediaStream !== 'undefined') {\n    if (!('getVideoTracks' in MediaStream.prototype)) {\n        MediaStream.prototype.getVideoTracks = function() {\n            if (!this.getTracks) {\n                return [];\n            }\n\n            var tracks = [];\n            this.getTracks.forEach(function(track) {\n                if (track.kind.toString().indexOf('video') !== -1) {\n                    tracks.push(track);\n                }\n            });\n            return tracks;\n        };\n\n        MediaStream.prototype.getAudioTracks = function() {\n            if (!this.getTracks) {\n                return [];\n            }\n\n            var tracks = [];\n            this.getTracks.forEach(function(track) {\n                if (track.kind.toString().indexOf('audio') !== -1) {\n                    tracks.push(track);\n                }\n            });\n            return tracks;\n        };\n    }\n\n    if (!('stop' in MediaStream.prototype)) {\n        MediaStream.prototype.stop = function() {\n            this.getAudioTracks().forEach(function(track) {\n                if (!!track.stop) {\n                    track.stop();\n                }\n            });\n\n            this.getVideoTracks().forEach(function(track) {\n                if (!!track.stop) {\n                    track.stop();\n                }\n            });\n        };\n    }\n}\n\n// below function via: http://goo.gl/B3ae8c\n/**\n * @param {number} bytes - Pass bytes and get formafted string.\n * @returns {string} - formafted string\n * @example\n * bytesToSize(1024*1024*5) === '5 GB'\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction bytesToSize(bytes) {\n    var k = 1000;\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n        return '0 Bytes';\n    }\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n}\n\n/**\n * @param {Blob} file - File or Blob object. This parameter is required.\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\n * @example\n * invokeSaveAsDialog(blob or file, [optional] fileName);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\nfunction invokeSaveAsDialog(file, fileName) {\n    if (!file) {\n        throw 'Blob object is required.';\n    }\n\n    if (!file.type) {\n        try {\n            file.type = 'video/webm';\n        } catch (e) {}\n    }\n\n    var fileExtension = (file.type || 'video/webm').split('/')[1];\n\n    if (fileName && fileName.indexOf('.') !== -1) {\n        var splitted = fileName.split('.');\n        fileName = splitted[0];\n        fileExtension = splitted[1];\n    }\n\n    var fileFullName = (fileName || (Math.round(Math.random() * 9999999999) + 888888888)) + '.' + fileExtension;\n\n    if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n        return navigator.msSaveOrOpenBlob(file, fileFullName);\n    } else if (typeof navigator.msSaveBlob !== 'undefined') {\n        return navigator.msSaveBlob(file, fileFullName);\n    }\n\n    var hyperlink = document.createElement('a');\n    hyperlink.href = URL.createObjectURL(file);\n    hyperlink.target = '_blank';\n    hyperlink.download = fileFullName;\n\n    if (!!navigator.mozGetUserMedia) {\n        hyperlink.onclick = function() {\n            (document.body || document.documentElement).removeChild(hyperlink);\n        };\n        (document.body || document.documentElement).appendChild(hyperlink);\n    }\n\n    var evt = new MouseEvent('click', {\n        view: window,\n        bubbles: true,\n        cancelable: true\n    });\n\n    hyperlink.dispatchEvent(evt);\n\n    if (!navigator.mozGetUserMedia) {\n        URL.revokeObjectURL(hyperlink.href);\n    }\n}\n\n// __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// Storage.js\n\n/**\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * Storage.AudioContext === webkitAudioContext\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\nvar Storage = {};\n\nif (typeof AudioContext !== 'undefined') {\n    Storage.AudioContext = AudioContext;\n} else if (typeof webkitAudioContext !== 'undefined') {\n    Storage.AudioContext = webkitAudioContext;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.Storage = Storage;\n}\n\nfunction isMediaRecorderCompatible() {\n    var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n    var isChrome = !!window.chrome && !isOpera;\n    var isFirefox = typeof window.InstallTrigger !== 'undefined';\n\n    if (isFirefox) {\n        return true;\n    }\n\n    var nVer = navigator.appVersion;\n    var nAgt = navigator.userAgent;\n    var fullVersion = '' + parseFloat(navigator.appVersion);\n    var majorVersion = parseInt(navigator.appVersion, 10);\n    var nameOffset, verOffset, ix;\n\n    if (isChrome || isOpera) {\n        verOffset = nAgt.indexOf('Chrome');\n        fullVersion = nAgt.substring(verOffset + 7);\n    }\n\n    // trim the fullVersion string at semicolon/space if present\n    if ((ix = fullVersion.indexOf(';')) !== -1) {\n        fullVersion = fullVersion.substring(0, ix);\n    }\n\n    if ((ix = fullVersion.indexOf(' ')) !== -1) {\n        fullVersion = fullVersion.substring(0, ix);\n    }\n\n    majorVersion = parseInt('' + fullVersion, 10);\n\n    if (isNaN(majorVersion)) {\n        fullVersion = '' + parseFloat(navigator.appVersion);\n        majorVersion = parseInt(navigator.appVersion, 10);\n    }\n\n    return majorVersion >= 49;\n}\n\n// ______________________\n// MediaStreamRecorder.js\n\n/*\n * Implementation of https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/MediaRecorder.html\n * The MediaRecorder accepts a mediaStream as input source passed from UA. When recorder starts,\n * a MediaEncoder will be created and accept the mediaStream as input source.\n * Encoder will get the raw data by track data changes, encode it by selected MIME Type, then store the encoded in EncodedBufferCache object.\n * The encoded data will be extracted on every timeslice passed from Start function call or by RequestData function.\n * Thread model:\n * When the recorder starts, it creates a \"Media Encoder\" thread to read data from MediaEncoder object and store buffer in EncodedBufferCache object.\n * Also extract the encoded data and create blobs on every timeslice passed from start function or RequestData function called by UA.\n */\n\n/**\n * MediaStreamRecorder is an abstraction layer for \"MediaRecorder API\". It is used by {@link RecordRTC} to record MediaStream(s) in Firefox.\n * @summary Runs top over MediaRecorder API.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MediaStreamRecorder\n * @class\n * @example\n * var options = {\n *     mimeType: 'video/webm',\n *     audioBitsPerSecond : 256 * 8 * 1024,\n *     videoBitsPerSecond : 256 * 8 * 1024,\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\n *     getNativeBlob: true // by default: it is false\n * }\n * var recorder = new MediaStreamRecorder(MediaStream, options);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", onAudioProcessStarted: function}\n */\n\nfunction MediaStreamRecorder(mediaStream, config) {\n    var self = this;\n\n    config = config || {\n        // bitsPerSecond: 256 * 8 * 1024,\n        mimeType: 'video/webm'\n    };\n\n    if (config.type === 'audio') {\n        if (mediaStream.getVideoTracks().length && mediaStream.getAudioTracks().length) {\n            var stream;\n            if (!!navigator.mozGetUserMedia) {\n                stream = new MediaStream();\n                stream.addTrack(mediaStream.getAudioTracks()[0]);\n            } else {\n                // webkitMediaStream\n                stream = new MediaStream(mediaStream.getAudioTracks());\n            }\n            mediaStream = stream;\n        }\n\n        if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\n            config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\n        }\n\n        if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\n            // forcing better codecs on Firefox (via #166)\n            config.mimeType = 'audio/ogg';\n        }\n    }\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        self.blob = null;\n\n        var recorderHints = config;\n\n        if (!config.disableLogs) {\n            console.log('Passing following config over MediaRecorder API.', recorderHints);\n        }\n\n        if (mediaRecorder) {\n            // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\n            mediaRecorder = null;\n        }\n\n        if (isChrome && !isMediaRecorderCompatible()) {\n            // to support video-only recording on stable\n            recorderHints = 'video/vp8';\n        }\n\n        if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\n            if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\n                if (!config.disableLogs) {\n                    console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n                }\n\n                recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\n            }\n        }\n\n        // http://dxr.mozilla.org/mozilla-central/source/content/media/MediaRecorder.cpp\n        // https://wiki.mozilla.org/Gecko:MediaRecorder\n        // https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/MediaRecorder.html\n\n        // starting a recording session; which will initiate \"Reading Thread\"\n        // \"Reading Thread\" are used to prevent main-thread blocking scenarios\n        try {\n            mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\n        } catch (e) {\n            mediaRecorder = new MediaRecorder(mediaStream);\n        }\n\n        if (!MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(config.mimeType) === false) {\n            if (!config.disableLogs) {\n                console.warn('MediaRecorder API seems unable to record mimeType:', config.mimeType);\n            }\n        }\n\n        // i.e. stop recording when <video> is paused by the user; and auto restart recording \n        // when video is resumed. E.g. yourStream.getVideoTracks()[0].muted = true; // it will auto-stop recording.\n        mediaRecorder.ignoreMutedMedia = config.ignoreMutedMedia || false;\n\n        // Dispatching OnDataAvailable Handler\n        mediaRecorder.ondataavailable = function(e) {\n            if (self.dontFireOnDataAvailableEvent) {\n                return;\n            }\n\n            if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\n                // make sure that stopRecording always getting fired\n                // even if there is invalid data\n                if (self.recordingCallback) {\n                    self.recordingCallback(new Blob([], {\n                        type: recorderHints.mimeType || 'video/webm'\n                    }));\n                    self.recordingCallback = null;\n                }\n                return;\n            }\n\n            /**\n             * @property {Blob} blob - Recorded frames in video/webm blob.\n             * @memberof MediaStreamRecorder\n             * @example\n             * recorder.stop(function() {\n             *     var blob = recorder.blob;\n             * });\n             */\n            self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n                type: recorderHints.mimeType || 'video/webm'\n            });\n\n            if (self.recordingCallback) {\n                self.recordingCallback(self.blob);\n                self.recordingCallback = null;\n            }\n        };\n\n        mediaRecorder.onerror = function(error) {\n            if (!config.disableLogs) {\n                if (error.name === 'InvalidState') {\n                    console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.');\n                } else if (error.name === 'OutOfMemory') {\n                    console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.');\n                } else if (error.name === 'IllegalStreamModification') {\n                    console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.');\n                } else if (error.name === 'OtherRecordingError') {\n                    console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.');\n                } else if (error.name === 'GenericError') {\n                    console.error('The UA cannot provide the codec or recording option that has been requested.', error);\n                } else {\n                    console.error('MediaRecorder Error', error);\n                }\n            }\n\n            // When the stream is \"ended\" set recording to 'inactive' \n            // and stop gathering data. Callers should not rely on \n            // exactness of the timeSlice value, especially \n            // if the timeSlice value is small. Callers should \n            // consider timeSlice as a minimum value\n\n            if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\n                mediaRecorder.stop();\n            }\n        };\n\n        // void start(optional long mTimeSlice)\n        // The interval of passing encoded data from EncodedBufferCache to onDataAvailable\n        // handler. \"mTimeSlice < 0\" means Session object does not push encoded data to\n        // onDataAvailable, instead, it passive wait the client side pull encoded data\n        // by calling requestData API.\n        mediaRecorder.start(3.6e+6);\n\n        // Start recording. If timeSlice has been provided, mediaRecorder will\n        // raise a dataavailable event containing the Blob of collected data on every timeSlice milliseconds.\n        // If timeSlice isn't provided, UA should call the RequestData to obtain the Blob data, also set the mTimeSlice to zero.\n\n        if (config.onAudioProcessStarted) {\n            config.onAudioProcessStarted();\n        }\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        this.recordingCallback = function(blob) {\n            mediaRecorder = null;\n\n            if (callback) {\n                callback(blob);\n            }\n        };\n\n        // mediaRecorder.state === 'recording' means that media recorder is associated with \"session\"\n        // mediaRecorder.state === 'stopped' means that media recorder is detached from the \"session\" ... in this case; \"session\" will also be deleted.\n\n        if (mediaRecorder.state === 'recording') {\n            // \"stop\" method auto invokes \"requestData\"!\n            // mediaRecorder.requestData();\n            mediaRecorder.stop();\n        }\n    };\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (mediaRecorder.state === 'recording') {\n            mediaRecorder.pause();\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (this.dontFireOnDataAvailableEvent) {\n            this.dontFireOnDataAvailableEvent = false;\n\n            var disableLogs = config.disableLogs;\n            config.disableLogs = true;\n            this.record();\n            config.disableLogs = disableLogs;\n            return;\n        }\n\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (mediaRecorder.state === 'paused') {\n            mediaRecorder.resume();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof MediaStreamRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        this.pause();\n\n        this.dontFireOnDataAvailableEvent = true;\n        this.stop();\n    };\n\n    // Reference to \"MediaRecorder\" object\n    var mediaRecorder;\n\n    function isMediaStreamActive() {\n        if ('active' in mediaStream) {\n            if (!mediaStream.active) {\n                return false;\n            }\n        } else if ('ended' in mediaStream) { // old hack\n            if (mediaStream.ended) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var self = this;\n\n    // this method checks if media stream is stopped\n    // or any track is ended.\n    (function looper() {\n        if (!mediaRecorder) {\n            return;\n        }\n\n        if (isMediaStreamActive() === false) {\n            if (!config.disableLogs) {\n                console.log('MediaStream seems stopped.');\n            }\n            self.stop();\n            return;\n        }\n\n        setTimeout(looper, 1000); // check every second\n    })();\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\n}\n\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\n// https://github.com/mattdiamond/Recorderjs#license-mit\n// ______________________\n// StereoAudioRecorder.js\n\n/**\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\n * @summary JavaScript standalone object for stereo audio recording.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef StereoAudioRecorder\n * @class\n * @example\n * var recorder = new StereoAudioRecorder(MediaStream, {\n *     sampleRate: 44100,\n *     bufferSize: 4096\n * });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\n */\n\nfunction StereoAudioRecorder(mediaStream, config) {\n    if (!mediaStream.getAudioTracks().length) {\n        throw 'Your stream has no audio tracks.';\n    }\n\n    config = config || {};\n\n    var self = this;\n\n    // variables\n    var leftchannel = [];\n    var rightchannel = [];\n    var recording = false;\n    var recordingLength = 0;\n    var jsAudioNode;\n\n    var numberOfAudioChannels = 2;\n\n    // backward compatibility\n    if (config.leftChannel === true) {\n        numberOfAudioChannels = 1;\n    }\n\n    if (config.numberOfAudioChannels === 1) {\n        numberOfAudioChannels = 1;\n    }\n\n    if (!config.disableLogs) {\n        console.debug('StereoAudioRecorder is set to record number of channels: ', numberOfAudioChannels);\n    }\n\n    function isMediaStreamActive() {\n        if ('active' in mediaStream) {\n            if (!mediaStream.active) {\n                return false;\n            }\n        } else if ('ended' in mediaStream) { // old hack\n            if (mediaStream.ended) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (isMediaStreamActive() === false) {\n            throw 'Please make sure MediaStream is active.';\n        }\n\n        // reset the buffers for the new recording\n        leftchannel.length = rightchannel.length = 0;\n        recordingLength = 0;\n\n        if (audioInput) {\n            audioInput.connect(jsAudioNode);\n        }\n\n        // to prevent self audio to be connected with speakers\n        // jsAudioNode.connect(context.destination);\n\n        isAudioProcessStarted = isPaused = false;\n        recording = true;\n    };\n\n    function mergeLeftRightBuffers(config, callback) {\n        function mergeAudioBuffers(config, cb) {\n            var numberOfAudioChannels = config.numberOfAudioChannels;\n\n            // todo: \"slice(0)\" --- is it causes loop? Should be removed?\n            var leftBuffers = config.leftBuffers.slice(0);\n            var rightBuffers = config.rightBuffers.slice(0);\n            var sampleRate = config.sampleRate;\n            var internalInterleavedLength = config.internalInterleavedLength;\n\n            if (numberOfAudioChannels === 2) {\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n                rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\n            }\n\n            if (numberOfAudioChannels === 1) {\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n            }\n\n            function mergeBuffers(channelBuffer, rLength) {\n                var result = new Float64Array(rLength);\n                var offset = 0;\n                var lng = channelBuffer.length;\n\n                for (var i = 0; i < lng; i++) {\n                    var buffer = channelBuffer[i];\n                    result.set(buffer, offset);\n                    offset += buffer.length;\n                }\n\n                return result;\n            }\n\n            function interleave(leftChannel, rightChannel) {\n                var length = leftChannel.length + rightChannel.length;\n\n                var result = new Float64Array(length);\n\n                var inputIndex = 0;\n\n                for (var index = 0; index < length;) {\n                    result[index++] = leftChannel[inputIndex];\n                    result[index++] = rightChannel[inputIndex];\n                    inputIndex++;\n                }\n                return result;\n            }\n\n            function writeUTFBytes(view, offset, string) {\n                var lng = string.length;\n                for (var i = 0; i < lng; i++) {\n                    view.setUint8(offset + i, string.charCodeAt(i));\n                }\n            }\n\n            // interleave both channels together\n            var interleaved;\n\n            if (numberOfAudioChannels === 2) {\n                interleaved = interleave(leftBuffers, rightBuffers);\n            }\n\n            if (numberOfAudioChannels === 1) {\n                interleaved = leftBuffers;\n            }\n\n            var interleavedLength = interleaved.length;\n\n            // create wav file\n            var resultingBufferLength = 44 + interleavedLength * 2;\n\n            var buffer = new ArrayBuffer(resultingBufferLength);\n\n            var view = new DataView(buffer);\n\n            // RIFF chunk descriptor/identifier \n            writeUTFBytes(view, 0, 'RIFF');\n\n            // RIFF chunk length\n            view.setUint32(4, 44 + interleavedLength * 2, true);\n\n            // RIFF type \n            writeUTFBytes(view, 8, 'WAVE');\n\n            // format chunk identifier \n            // FMT sub-chunk\n            writeUTFBytes(view, 12, 'fmt ');\n\n            // format chunk length \n            view.setUint32(16, 16, true);\n\n            // sample format (raw)\n            view.setUint16(20, 1, true);\n\n            // stereo (2 channels)\n            view.setUint16(22, numberOfAudioChannels, true);\n\n            // sample rate \n            view.setUint32(24, sampleRate, true);\n\n            // byte rate (sample rate * block align)\n            view.setUint32(28, sampleRate * 2, true);\n\n            // block align (channel count * bytes per sample) \n            view.setUint16(32, numberOfAudioChannels * 2, true);\n\n            // bits per sample \n            view.setUint16(34, 16, true);\n\n            // data sub-chunk\n            // data chunk identifier \n            writeUTFBytes(view, 36, 'data');\n\n            // data chunk length \n            view.setUint32(40, interleavedLength * 2, true);\n\n            // write the PCM samples\n            var lng = interleavedLength;\n            var index = 44;\n            var volume = 1;\n            for (var i = 0; i < lng; i++) {\n                view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n                index += 2;\n            }\n\n            if (cb) {\n                return cb({\n                    buffer: buffer,\n                    view: view\n                });\n            }\n\n            postMessage({\n                buffer: buffer,\n                view: view\n            });\n        }\n\n        if (!isChrome) {\n            // its Microsoft Edge\n            mergeAudioBuffers(config, function(data) {\n                callback(data.buffer, data.view);\n            });\n            return;\n        }\n\n\n        var webWorker = processInWebWorker(mergeAudioBuffers);\n\n        webWorker.onmessage = function(event) {\n            callback(event.data.buffer, event.data.view);\n\n            // release memory\n            URL.revokeObjectURL(webWorker.workerURL);\n        };\n\n        webWorker.postMessage(config);\n    }\n\n    function processInWebWorker(_function) {\n        var workerURL = URL.createObjectURL(new Blob([_function.toString(),\n            ';this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n        ], {\n            type: 'application/javascript'\n        }));\n\n        var worker = new Worker(workerURL);\n        worker.workerURL = workerURL;\n        return worker;\n    }\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        // stop recording\n        recording = false;\n\n        // to make sure onaudioprocess stops firing\n        // audioInput.disconnect();\n\n        mergeLeftRightBuffers({\n            sampleRate: sampleRate,\n            numberOfAudioChannels: numberOfAudioChannels,\n            internalInterleavedLength: recordingLength,\n            leftBuffers: leftchannel,\n            rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel\n        }, function(buffer, view) {\n            /**\n             * @property {Blob} blob - The recorded blob object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var blob = recorder.blob;\n             * });\n             */\n            self.blob = new Blob([view], {\n                type: 'audio/wav'\n            });\n\n            /**\n             * @property {ArrayBuffer} buffer - The recorded buffer object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var buffer = recorder.buffer;\n             * });\n             */\n            self.buffer = new ArrayBuffer(view.buffer.byteLength);\n\n            /**\n             * @property {DataView} view - The recorded data-view object.\n             * @memberof StereoAudioRecorder\n             * @example\n             * recorder.stop(function(){\n             *     var view = recorder.view;\n             * });\n             */\n            self.view = view;\n\n            self.sampleRate = sampleRate;\n            self.bufferSize = bufferSize;\n\n            // recorded audio length\n            self.length = recordingLength;\n\n            if (callback) {\n                callback();\n            }\n\n            isAudioProcessStarted = false;\n        });\n    };\n\n    if (!Storage.AudioContextConstructor) {\n        Storage.AudioContextConstructor = new Storage.AudioContext();\n    }\n\n    var context = Storage.AudioContextConstructor;\n\n    // creates an audio node from the microphone incoming stream\n    var audioInput = context.createMediaStreamSource(mediaStream);\n\n    var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\n\n    /**\n     * From the spec: This value controls how frequently the audioprocess event is\n     * dispatched and how many sample-frames need to be processed each call.\n     * Lower values for buffer size will result in a lower (better) latency.\n     * Higher values will be necessary to avoid audio breakup and glitches\n     * The size of the buffer (in sample-frames) which needs to\n     * be processed each time onprocessaudio is called.\n     * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\n     * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder = new StereoAudioRecorder(mediaStream, {\n     *     bufferSize: 4096\n     * });\n     */\n\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\n    var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\n\n    if (legalBufferValues.indexOf(bufferSize) === -1) {\n        if (!config.disableLogs) {\n            console.warn('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\n        }\n    }\n\n    if (context.createJavaScriptNode) {\n        jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n    } else if (context.createScriptProcessor) {\n        jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n    } else {\n        throw 'WebAudio API has no support on this browser.';\n    }\n\n    // connect the stream to the gain node\n    audioInput.connect(jsAudioNode);\n\n    if (!config.bufferSize) {\n        bufferSize = jsAudioNode.bufferSize; // device buffer-size\n    }\n\n    /**\n     * The sample rate (in sample-frames per second) at which the\n     * AudioContext handles audio. It is assumed that all AudioNodes\n     * in the context run at this rate. In making this assumption,\n     * sample-rate converters or \"varispeed\" processors are not supported\n     * in real-time processing.\n     * The sampleRate parameter describes the sample-rate of the\n     * linear PCM audio data in the buffer in sample-frames per second.\n     * An implementation must support sample-rates in at least\n     * the range 22050 to 96000.\n     * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder = new StereoAudioRecorder(mediaStream, {\n     *     sampleRate: 44100\n     * });\n     */\n    var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\n\n    if (sampleRate < 22050 || sampleRate > 96000) {\n        // Ref: http://stackoverflow.com/a/26303918/552182\n        if (!config.disableLogs) {\n            console.warn('sample-rate must be under range 22050 and 96000.');\n        }\n    }\n\n    if (!config.disableLogs) {\n        console.log('sample-rate', sampleRate);\n        console.log('buffer-size', bufferSize);\n    }\n\n    var isPaused = false;\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPaused = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (isMediaStreamActive() === false) {\n            throw 'Please make sure MediaStream is active.';\n        }\n\n        if (!recording) {\n            if (!config.disableLogs) {\n                console.info('Seems recording has been restarted.');\n            }\n            this.record();\n            return;\n        }\n\n        isPaused = false;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof StereoAudioRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        this.pause();\n\n        leftchannel.length = rightchannel.length = 0;\n        recordingLength = 0;\n    };\n\n    var isAudioProcessStarted = false;\n\n    function onAudioProcessDataAvailable(e) {\n        if (isPaused) {\n            return;\n        }\n\n        if (isMediaStreamActive() === false) {\n            if (!config.disableLogs) {\n                console.log('MediaStream seems stopped.');\n            }\n            jsAudioNode.disconnect();\n            recording = false;\n        }\n\n        if (!recording) {\n            audioInput.disconnect();\n            return;\n        }\n\n        /**\n         * This method is called on \"onaudioprocess\" event's first invocation.\n         * @method {function} onAudioProcessStarted\n         * @memberof StereoAudioRecorder\n         * @example\n         * recorder.onAudioProcessStarted: function() { };\n         */\n        if (!isAudioProcessStarted) {\n            isAudioProcessStarted = true;\n            if (config.onAudioProcessStarted) {\n                config.onAudioProcessStarted();\n            }\n\n            if (config.initCallback) {\n                config.initCallback();\n            }\n        }\n\n        var left = e.inputBuffer.getChannelData(0);\n\n        // we clone the samples\n        leftchannel.push(new Float32Array(left));\n\n        if (numberOfAudioChannels === 2) {\n            var right = e.inputBuffer.getChannelData(1);\n            rightchannel.push(new Float32Array(right));\n        }\n\n        recordingLength += bufferSize;\n    }\n\n    jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\n\n    // to prevent self audio to be connected with speakers\n    jsAudioNode.connect(context.destination);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\n}\n\n// _________________\n// CanvasRecorder.js\n\n/**\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\n * @summary HTML2Canvas recording into video WebM.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef CanvasRecorder\n * @class\n * @example\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\n * @param {object} config - {disableLogs:true, initCallback: function}\n */\n\nfunction CanvasRecorder(htmlElement, config) {\n    if (typeof html2canvas === 'undefined' && htmlElement.nodeName.toLowerCase() !== 'canvas') {\n        throw 'Please link: https://cdn.webrtc-experiment.com/screenshot.js';\n    }\n\n    config = config || {};\n    if (!config.frameInterval) {\n        config.frameInterval = 10;\n    }\n\n    // via DetectRTC.js\n    var isCanvasSupportsStreamCapturing = false;\n    ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\n        if (item in document.createElement('canvas')) {\n            isCanvasSupportsStreamCapturing = true;\n        }\n    });\n\n    var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\n\n    var chromeVersion = 50;\n    var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n    if (_isChrome && matchArray && matchArray[2]) {\n        chromeVersion = parseInt(matchArray[2], 10);\n    }\n\n    if (_isChrome && chromeVersion < 52) {\n        isCanvasSupportsStreamCapturing = false;\n    }\n\n    var globalCanvas, mediaStreamRecorder;\n\n    if (isCanvasSupportsStreamCapturing) {\n        if (!config.disableLogs) {\n            console.debug('Your browser supports both MediRecorder API and canvas.captureStream!');\n        }\n\n        if (htmlElement instanceof HTMLCanvasElement) {\n            globalCanvas = htmlElement;\n        } else if (htmlElement instanceof CanvasRenderingContext2D) {\n            globalCanvas = htmlElement.canvas;\n        } else {\n            throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\n        }\n    } else if (!!navigator.mozGetUserMedia) {\n        if (!config.disableLogs) {\n            console.error('Canvas recording is NOT supported in Firefox.');\n        }\n    }\n\n    var isRecording;\n\n    /**\n     * This method records Canvas.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        isRecording = true;\n\n        if (isCanvasSupportsStreamCapturing) {\n            // CanvasCaptureMediaStream\n            var canvasMediaStream;\n            if ('captureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\n            } else if ('mozCaptureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.mozCaptureStream(25);\n            } else if ('webkitCaptureStream' in globalCanvas) {\n                canvasMediaStream = globalCanvas.webkitCaptureStream(25);\n            }\n\n            try {\n                var mdStream = new MediaStream();\n                mdStream.addTrack(canvasMediaStream.getVideoTracks()[0]);\n                canvasMediaStream = mdStream;\n            } catch (e) {}\n\n            if (!canvasMediaStream) {\n                throw 'captureStream API are NOT available.';\n            }\n\n            // Note: Jan 18, 2016 status is that, \n            // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\n            mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\n                mimeType: 'video/webm'\n            });\n            mediaStreamRecorder.record();\n        } else {\n            whammy.frames = [];\n            lastTime = new Date().getTime();\n            drawCanvasFrame();\n        }\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    this.getWebPImages = function(callback) {\n        if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\n            callback();\n            return;\n        }\n\n        var framesLength = whammy.frames.length;\n        whammy.frames.forEach(function(frame, idx) {\n            var framesRemaining = framesLength - idx;\n            if (!config.disableLogs) {\n                console.debug(framesRemaining + '/' + framesLength + ' frames remaining');\n            }\n\n            if (config.onEncodingCallback) {\n                config.onEncodingCallback(framesRemaining, framesLength);\n            }\n\n            var webp = frame.image.toDataURL('image/webp', 1);\n            whammy.frames[idx].image = webp;\n        });\n\n        if (!config.disableLogs) {\n            console.debug('Generating WebM');\n        }\n\n        callback();\n    };\n\n    /**\n     * This method stops recording Canvas.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isRecording = false;\n\n        var that = this;\n\n        if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\n            mediaStreamRecorder.stop(callback);\n            return;\n        }\n\n        this.getWebPImages(function() {\n            /**\n             * @property {Blob} blob - Recorded frames in video/webm blob.\n             * @memberof CanvasRecorder\n             * @example\n             * recorder.stop(function() {\n             *     var blob = recorder.blob;\n             * });\n             */\n            whammy.compile(function(blob) {\n                if (!config.disableLogs) {\n                    console.debug('Recording finished!');\n                }\n\n                that.blob = blob;\n\n                if (that.blob.forEach) {\n                    that.blob = new Blob([], {\n                        type: 'video/webm'\n                    });\n                }\n\n                if (callback) {\n                    callback(that.blob);\n                }\n\n                whammy.frames = [];\n            });\n        });\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n\n        if (!isRecording) {\n            this.record();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof CanvasRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        this.pause();\n        whammy.frames = [];\n    };\n\n    function cloneCanvas() {\n        //create a new canvas\n        var newCanvas = document.createElement('canvas');\n        var context = newCanvas.getContext('2d');\n\n        //set dimensions\n        newCanvas.width = htmlElement.width;\n        newCanvas.height = htmlElement.height;\n\n        //apply the old canvas to the new one\n        context.drawImage(htmlElement, 0, 0);\n\n        //return the new canvas\n        return newCanvas;\n    }\n\n    function drawCanvasFrame() {\n        if (isPausedRecording) {\n            lastTime = new Date().getTime();\n            return setTimeout(drawCanvasFrame, 500);\n        }\n\n        if (htmlElement.nodeName.toLowerCase() === 'canvas') {\n            var duration = new Date().getTime() - lastTime;\n            // via #206, by Jack i.e. @Seymourr\n            lastTime = new Date().getTime();\n\n            whammy.frames.push({\n                image: cloneCanvas(),\n                duration: duration\n            });\n\n            if (isRecording) {\n                setTimeout(drawCanvasFrame, config.frameInterval);\n            }\n            return;\n        }\n\n        html2canvas(htmlElement, {\n            grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\n            onrendered: function(canvas) {\n                var duration = new Date().getTime() - lastTime;\n                if (!duration) {\n                    return setTimeout(drawCanvasFrame, config.frameInterval);\n                }\n\n                // via #206, by Jack i.e. @Seymourr\n                lastTime = new Date().getTime();\n\n                whammy.frames.push({\n                    image: canvas.toDataURL('image/webp', 1),\n                    duration: duration\n                });\n\n                if (isRecording) {\n                    setTimeout(drawCanvasFrame, config.frameInterval);\n                }\n            }\n        });\n    }\n\n    var lastTime = new Date().getTime();\n\n    var whammy = new Whammy.Video(100);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.CanvasRecorder = CanvasRecorder;\n}\n\n// _________________\n// WhammyRecorder.js\n\n/**\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\n * @summary Video recording feature in Chrome.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef WhammyRecorder\n * @class\n * @example\n * var recorder = new WhammyRecorder(mediaStream);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\n */\n\nfunction WhammyRecorder(mediaStream, config) {\n\n    config = config || {};\n\n    if (!config.frameInterval) {\n        config.frameInterval = 10;\n    }\n\n    if (!config.disableLogs) {\n        console.log('Using frames-interval:', config.frameInterval);\n    }\n\n    /**\n     * This method records video.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (!config.width) {\n            config.width = 320;\n        }\n\n        if (!config.height) {\n            config.height = 240;\n        }\n\n        if (!config.video) {\n            config.video = {\n                width: config.width,\n                height: config.height\n            };\n        }\n\n        if (!config.canvas) {\n            config.canvas = {\n                width: config.width,\n                height: config.height\n            };\n        }\n\n        canvas.width = config.canvas.width || 320;\n        canvas.height = config.canvas.height || 240;\n\n        context = canvas.getContext('2d');\n\n        // setting defaults\n        if (config.video && config.video instanceof HTMLVideoElement) {\n            video = config.video.cloneNode();\n\n            if (config.initCallback) {\n                config.initCallback();\n            }\n        } else {\n            video = document.createElement('video');\n\n            if (typeof video.srcObject !== 'undefined') {\n                video.srcObject = mediaStream;\n            } else {\n                video.src = URL.createObjectURL(mediaStream);\n            }\n\n            video.onloadedmetadata = function() { // \"onloadedmetadata\" may NOT work in FF?\n                if (config.initCallback) {\n                    config.initCallback();\n                }\n            };\n\n            video.width = config.video.width;\n            video.height = config.video.height;\n        }\n\n        video.muted = true;\n        video.play();\n\n        lastTime = new Date().getTime();\n        whammy = new Whammy.Video();\n\n        if (!config.disableLogs) {\n            console.log('canvas resolutions', canvas.width, '*', canvas.height);\n            console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\n        }\n\n        drawFrames(config.frameInterval);\n    };\n\n    /**\n     * Draw and push frames to Whammy\n     * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\n     */\n    function drawFrames(frameInterval) {\n        frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\n\n        var duration = new Date().getTime() - lastTime;\n        if (!duration) {\n            return setTimeout(drawFrames, frameInterval, frameInterval);\n        }\n\n        if (isPausedRecording) {\n            lastTime = new Date().getTime();\n            return setTimeout(drawFrames, 100);\n        }\n\n        // via #206, by Jack i.e. @Seymourr\n        lastTime = new Date().getTime();\n\n        if (video.paused) {\n            // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n            // Tweak for Android Chrome\n            video.play();\n        }\n\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        whammy.frames.push({\n            duration: duration,\n            image: canvas.toDataURL('image/webp')\n        });\n\n        if (!isStopDrawing) {\n            setTimeout(drawFrames, frameInterval, frameInterval);\n        }\n    }\n\n    function asyncLoop(o) {\n        var i = -1,\n            length = o.length;\n\n        var loop = function() {\n            i++;\n            if (i === length) {\n                o.callback();\n                return;\n            }\n            o.functionToLoop(loop, i);\n        };\n        loop(); //init\n    }\n\n\n    /**\n     * remove black frames from the beginning to the specified frame\n     * @param {Array} _frames - array of frames to be checked\n     * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\n     * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\n     * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\n     * @returns {Array} - array of frames\n     */\n    // pull#293 by @volodalexey\n    function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\n        var localCanvas = document.createElement('canvas');\n        localCanvas.width = canvas.width;\n        localCanvas.height = canvas.height;\n        var context2d = localCanvas.getContext('2d');\n        var resultFrames = [];\n\n        var checkUntilNotBlack = _framesToCheck === -1;\n        var endCheckFrame = (_framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length) ?\n            _framesToCheck : _frames.length;\n        var sampleColor = {\n            r: 0,\n            g: 0,\n            b: 0\n        };\n        var maxColorDifference = Math.sqrt(\n            Math.pow(255, 2) +\n            Math.pow(255, 2) +\n            Math.pow(255, 2)\n        );\n        var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n        var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n        var doNotCheckNext = false;\n\n        asyncLoop({\n            length: endCheckFrame,\n            functionToLoop: function(loop, f) {\n                var matchPixCount, endPixCheck, maxPixCount;\n\n                var finishImage = function() {\n                    if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\n                        // console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\n                    } else {\n                        // console.log('frame is passed : ' + f);\n                        if (checkUntilNotBlack) {\n                            doNotCheckNext = true;\n                        }\n                        resultFrames.push(_frames[f]);\n                    }\n                    loop();\n                };\n\n                if (!doNotCheckNext) {\n                    var image = new Image();\n                    image.onload = function() {\n                        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n                        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n                        matchPixCount = 0;\n                        endPixCheck = imageData.data.length;\n                        maxPixCount = imageData.data.length / 4;\n\n                        for (var pix = 0; pix < endPixCheck; pix += 4) {\n                            var currentColor = {\n                                r: imageData.data[pix],\n                                g: imageData.data[pix + 1],\n                                b: imageData.data[pix + 2]\n                            };\n                            var colorDifference = Math.sqrt(\n                                Math.pow(currentColor.r - sampleColor.r, 2) +\n                                Math.pow(currentColor.g - sampleColor.g, 2) +\n                                Math.pow(currentColor.b - sampleColor.b, 2)\n                            );\n                            // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n                            if (colorDifference <= maxColorDifference * pixTolerance) {\n                                matchPixCount++;\n                            }\n                        }\n                        finishImage();\n                    };\n                    image.src = _frames[f].image;\n                } else {\n                    finishImage();\n                }\n            },\n            callback: function() {\n                resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\n\n                if (resultFrames.length <= 0) {\n                    // at least one last frame should be available for next manipulation\n                    // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\n                    resultFrames.push(_frames[_frames.length - 1]);\n                }\n                callback(resultFrames);\n            }\n        });\n    }\n\n    var isStopDrawing = false;\n\n    /**\n     * This method stops recording video.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isStopDrawing = true;\n\n        var _this = this;\n        // analyse of all frames takes some time!\n        setTimeout(function() {\n            // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\n            // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\n            // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\n            dropBlackFrames(whammy.frames, -1, null, null, function(frames) {\n                whammy.frames = frames;\n\n                // to display advertisement images!\n                if (config.advertisement && config.advertisement.length) {\n                    whammy.frames = config.advertisement.concat(whammy.frames);\n                }\n\n                /**\n                 * @property {Blob} blob - Recorded frames in video/webm blob.\n                 * @memberof WhammyRecorder\n                 * @example\n                 * recorder.stop(function() {\n                 *     var blob = recorder.blob;\n                 * });\n                 */\n                whammy.compile(function(blob) {\n                    _this.blob = blob;\n\n                    if (_this.blob.forEach) {\n                        _this.blob = new Blob([], {\n                            type: 'video/webm'\n                        });\n                    }\n\n                    if (callback) {\n                        callback(_this.blob);\n                    }\n                });\n            });\n        }, 10);\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n\n        if (isStopDrawing) {\n            this.record();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof WhammyRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        this.pause();\n        whammy.frames = [];\n    };\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    var video;\n    var lastTime;\n    var whammy;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.WhammyRecorder = WhammyRecorder;\n}\n\n// https://github.com/antimatter15/whammy/blob/master/LICENSE\n// _________\n// Whammy.js\n\n// todo: Firefox now supports webp for webm containers!\n// their MediaRecorder implementation works well!\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\n\n/**\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\n * @summary A real time javascript webm encoder based on a canvas hack.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef Whammy\n * @class\n * @example\n * var recorder = new Whammy().Video(15);\n * recorder.add(context || canvas || dataURL);\n * var output = recorder.compile();\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\nvar Whammy = (function() {\n    // a more abstract-ish API\n\n    function WhammyVideo(duration) {\n        this.frames = [];\n        this.duration = duration || 1;\n        this.quality = 0.8;\n    }\n\n    /**\n     * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * recorder.add(canvas || context || 'image/webp');\n     * @param {string} frame - Canvas || Context || image/webp\n     * @param {number} duration - Stick a duration (in milliseconds)\n     */\n    WhammyVideo.prototype.add = function(frame, duration) {\n        if ('canvas' in frame) { //CanvasRenderingContext2D\n            frame = frame.canvas;\n        }\n\n        if ('toDataURL' in frame) {\n            frame = frame.toDataURL('image/webp', this.quality);\n        }\n\n        if (!(/^data:image\\/webp;base64,/ig).test(frame)) {\n            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\n        }\n        this.frames.push({\n            image: frame,\n            duration: duration || this.duration\n        });\n    };\n\n    function processInWebWorker(_function) {\n        var blob = URL.createObjectURL(new Blob([_function.toString(),\n            'this.onmessage =  function (e) {' + _function.name + '(e.data);}'\n        ], {\n            type: 'application/javascript'\n        }));\n\n        var worker = new Worker(blob);\n        URL.revokeObjectURL(blob);\n        return worker;\n    }\n\n    function whammyInWebWorker(frames) {\n        function ArrayToWebM(frames) {\n            var info = checkFrames(frames);\n            if (!info) {\n                return [];\n            }\n\n            var clusterMaxDuration = 30000;\n\n            var EBML = [{\n                'id': 0x1a45dfa3, // EBML\n                'data': [{\n                    'data': 1,\n                    'id': 0x4286 // EBMLVersion\n                }, {\n                    'data': 1,\n                    'id': 0x42f7 // EBMLReadVersion\n                }, {\n                    'data': 4,\n                    'id': 0x42f2 // EBMLMaxIDLength\n                }, {\n                    'data': 8,\n                    'id': 0x42f3 // EBMLMaxSizeLength\n                }, {\n                    'data': 'webm',\n                    'id': 0x4282 // DocType\n                }, {\n                    'data': 2,\n                    'id': 0x4287 // DocTypeVersion\n                }, {\n                    'data': 2,\n                    'id': 0x4285 // DocTypeReadVersion\n                }]\n            }, {\n                'id': 0x18538067, // Segment\n                'data': [{\n                    'id': 0x1549a966, // Info\n                    'data': [{\n                        'data': 1e6, //do things in millisecs (num of nanosecs for duration scale)\n                        'id': 0x2ad7b1 // TimecodeScale\n                    }, {\n                        'data': 'whammy',\n                        'id': 0x4d80 // MuxingApp\n                    }, {\n                        'data': 'whammy',\n                        'id': 0x5741 // WritingApp\n                    }, {\n                        'data': doubleToString(info.duration),\n                        'id': 0x4489 // Duration\n                    }]\n                }, {\n                    'id': 0x1654ae6b, // Tracks\n                    'data': [{\n                        'id': 0xae, // TrackEntry\n                        'data': [{\n                            'data': 1,\n                            'id': 0xd7 // TrackNumber\n                        }, {\n                            'data': 1,\n                            'id': 0x73c5 // TrackUID\n                        }, {\n                            'data': 0,\n                            'id': 0x9c // FlagLacing\n                        }, {\n                            'data': 'und',\n                            'id': 0x22b59c // Language\n                        }, {\n                            'data': 'V_VP8',\n                            'id': 0x86 // CodecID\n                        }, {\n                            'data': 'VP8',\n                            'id': 0x258688 // CodecName\n                        }, {\n                            'data': 1,\n                            'id': 0x83 // TrackType\n                        }, {\n                            'id': 0xe0, // Video\n                            'data': [{\n                                'data': info.width,\n                                'id': 0xb0 // PixelWidth\n                            }, {\n                                'data': info.height,\n                                'id': 0xba // PixelHeight\n                            }]\n                        }]\n                    }]\n                }]\n            }];\n\n            //Generate clusters (max duration)\n            var frameNumber = 0;\n            var clusterTimecode = 0;\n            while (frameNumber < frames.length) {\n\n                var clusterFrames = [];\n                var clusterDuration = 0;\n                do {\n                    clusterFrames.push(frames[frameNumber]);\n                    clusterDuration += frames[frameNumber].duration;\n                    frameNumber++;\n                } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\n\n                var clusterCounter = 0;\n                var cluster = {\n                    'id': 0x1f43b675, // Cluster\n                    'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\n                }; //Add cluster to segment\n                EBML[1].data.push(cluster);\n                clusterTimecode += clusterDuration;\n            }\n\n            return generateEBML(EBML);\n        }\n\n        function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\n            return [{\n                'data': clusterTimecode,\n                'id': 0xe7 // Timecode\n            }].concat(clusterFrames.map(function(webp) {\n                var block = makeSimpleBlock({\n                    discardable: 0,\n                    frame: webp.data.slice(4),\n                    invisible: 0,\n                    keyframe: 1,\n                    lacing: 0,\n                    trackNum: 1,\n                    timecode: Math.round(clusterCounter)\n                });\n                clusterCounter += webp.duration;\n                return {\n                    data: block,\n                    id: 0xa3\n                };\n            }));\n        }\n\n        // sums the lengths of all the frames and gets the duration\n\n        function checkFrames(frames) {\n            if (!frames[0]) {\n                postMessage({\n                    error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\n                });\n                return;\n            }\n\n            var width = frames[0].width,\n                height = frames[0].height,\n                duration = frames[0].duration;\n\n            for (var i = 1; i < frames.length; i++) {\n                duration += frames[i].duration;\n            }\n            return {\n                duration: duration,\n                width: width,\n                height: height\n            };\n        }\n\n        function numToBuffer(num) {\n            var parts = [];\n            while (num > 0) {\n                parts.push(num & 0xff);\n                num = num >> 8;\n            }\n            return new Uint8Array(parts.reverse());\n        }\n\n        function strToBuffer(str) {\n            return new Uint8Array(str.split('').map(function(e) {\n                return e.charCodeAt(0);\n            }));\n        }\n\n        function bitsToBuffer(bits) {\n            var data = [];\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\n            bits = pad + bits;\n            for (var i = 0; i < bits.length; i += 8) {\n                data.push(parseInt(bits.substr(i, 8), 2));\n            }\n            return new Uint8Array(data);\n        }\n\n        function generateEBML(json) {\n            var ebml = [];\n            for (var i = 0; i < json.length; i++) {\n                var data = json[i].data;\n\n                if (typeof data === 'object') {\n                    data = generateEBML(data);\n                }\n\n                if (typeof data === 'number') {\n                    data = bitsToBuffer(data.toString(2));\n                }\n\n                if (typeof data === 'string') {\n                    data = strToBuffer(data);\n                }\n\n                var len = data.size || data.byteLength || data.length;\n                var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\n                var sizeToString = len.toString(2);\n                var padded = (new Array((zeroes * 7 + 7 + 1) - sizeToString.length)).join('0') + sizeToString;\n                var size = (new Array(zeroes)).join('0') + '1' + padded;\n\n                ebml.push(numToBuffer(json[i].id));\n                ebml.push(bitsToBuffer(size));\n                ebml.push(data);\n            }\n\n            return new Blob(ebml, {\n                type: 'video/webm'\n            });\n        }\n\n        function toBinStrOld(bits) {\n            var data = '';\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\n            bits = pad + bits;\n            for (var i = 0; i < bits.length; i += 8) {\n                data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\n            }\n            return data;\n        }\n\n        function makeSimpleBlock(data) {\n            var flags = 0;\n\n            if (data.keyframe) {\n                flags |= 128;\n            }\n\n            if (data.invisible) {\n                flags |= 8;\n            }\n\n            if (data.lacing) {\n                flags |= (data.lacing << 1);\n            }\n\n            if (data.discardable) {\n                flags |= 1;\n            }\n\n            if (data.trackNum > 127) {\n                throw 'TrackNumber > 127 not supported';\n            }\n\n            var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function(e) {\n                return String.fromCharCode(e);\n            }).join('') + data.frame;\n\n            return out;\n        }\n\n        function parseWebP(riff) {\n            var VP8 = riff.RIFF[0].WEBP[0];\n\n            var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\n            for (var i = 0, c = []; i < 4; i++) {\n                c[i] = VP8.charCodeAt(frameStart + 3 + i);\n            }\n\n            var width, height, tmp;\n\n            //the code below is literally copied verbatim from the bitstream spec\n            tmp = (c[1] << 8) | c[0];\n            width = tmp & 0x3FFF;\n            tmp = (c[3] << 8) | c[2];\n            height = tmp & 0x3FFF;\n            return {\n                width: width,\n                height: height,\n                data: VP8,\n                riff: riff\n            };\n        }\n\n        function getStrLength(string, offset) {\n            return parseInt(string.substr(offset + 4, 4).split('').map(function(i) {\n                var unpadded = i.charCodeAt(0).toString(2);\n                return (new Array(8 - unpadded.length + 1)).join('0') + unpadded;\n            }).join(''), 2);\n        }\n\n        function parseRIFF(string) {\n            var offset = 0;\n            var chunks = {};\n\n            while (offset < string.length) {\n                var id = string.substr(offset, 4);\n                var len = getStrLength(string, offset);\n                var data = string.substr(offset + 4 + 4, len);\n                offset += 4 + 4 + len;\n                chunks[id] = chunks[id] || [];\n\n                if (id === 'RIFF' || id === 'LIST') {\n                    chunks[id].push(parseRIFF(data));\n                } else {\n                    chunks[id].push(data);\n                }\n            }\n            return chunks;\n        }\n\n        function doubleToString(num) {\n            return [].slice.call(\n                new Uint8Array((new Float64Array([num])).buffer), 0).map(function(e) {\n                return String.fromCharCode(e);\n            }).reverse().join('');\n        }\n\n        var webm = new ArrayToWebM(frames.map(function(frame) {\n            var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\n            webp.duration = frame.duration;\n            return webp;\n        }));\n\n        postMessage(webm);\n    }\n\n    /**\n     * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * recorder.compile(function(blob) {\n     *    // blob.size - blob.type\n     * });\n     */\n    WhammyVideo.prototype.compile = function(callback) {\n        var webWorker = processInWebWorker(whammyInWebWorker);\n\n        webWorker.onmessage = function(event) {\n            if (event.data.error) {\n                console.error(event.data.error);\n                return;\n            }\n            callback(event.data);\n        };\n\n        webWorker.postMessage(this.frames);\n    };\n\n    return {\n        /**\n         * A more abstract-ish API.\n         * @method\n         * @memberof Whammy\n         * @example\n         * recorder = new Whammy().Video(0.8, 100);\n         * @param {?number} speed - 0.8\n         * @param {?number} quality - 100\n         */\n        Video: WhammyVideo\n    };\n})();\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.Whammy = Whammy;\n}\n\n// ______________ (indexed-db)\n// DiskStorage.js\n\n/**\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\n * @summary Writing blobs into IndexedDB.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @example\n * DiskStorage.Store({\n *     audioBlob: yourAudioBlob,\n *     videoBlob: yourVideoBlob,\n *     gifBlob  : yourGifBlob\n * });\n * DiskStorage.Fetch(function(dataURL, type) {\n *     if(type === 'audioBlob') { }\n *     if(type === 'videoBlob') { }\n *     if(type === 'gifBlob')   { }\n * });\n * // DiskStorage.dataStoreName = 'recordRTC';\n * // DiskStorage.onError = function(error) { };\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\n * @property {function} Store - This method stores blobs in IndexedDB.\n * @property {function} onError - This function is invoked for any known/unknown error.\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nvar DiskStorage = {\n    /**\n     * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.init();\n     */\n    init: function() {\n        var self = this;\n\n        if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\n            console.error('IndexedDB API are not available in this browser.');\n            return;\n        }\n\n        var dbVersion = 1;\n        var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\n            db;\n        var request = indexedDB.open(dbName, dbVersion);\n\n        function createObjectStore(dataBase) {\n            dataBase.createObjectStore(self.dataStoreName);\n        }\n\n        function putInDB() {\n            var transaction = db.transaction([self.dataStoreName], 'readwrite');\n\n            if (self.videoBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\n            }\n\n            if (self.gifBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\n            }\n\n            if (self.audioBlob) {\n                transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\n            }\n\n            function getFromStore(portionName) {\n                transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function(event) {\n                    if (self.callback) {\n                        self.callback(event.target.result, portionName);\n                    }\n                };\n            }\n\n            getFromStore('audioBlob');\n            getFromStore('videoBlob');\n            getFromStore('gifBlob');\n        }\n\n        request.onerror = self.onError;\n\n        request.onsuccess = function() {\n            db = request.result;\n            db.onerror = self.onError;\n\n            if (db.setVersion) {\n                if (db.version !== dbVersion) {\n                    var setVersion = db.setVersion(dbVersion);\n                    setVersion.onsuccess = function() {\n                        createObjectStore(db);\n                        putInDB();\n                    };\n                } else {\n                    putInDB();\n                }\n            } else {\n                putInDB();\n            }\n        };\n        request.onupgradeneeded = function(event) {\n            createObjectStore(event.target.result);\n        };\n    },\n    /**\n     * This method fetches stored blobs from IndexedDB.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.Fetch(function(dataURL, type) {\n     *     if(type === 'audioBlob') { }\n     *     if(type === 'videoBlob') { }\n     *     if(type === 'gifBlob')   { }\n     * });\n     */\n    Fetch: function(callback) {\n        this.callback = callback;\n        this.init();\n\n        return this;\n    },\n    /**\n     * This method stores blobs in IndexedDB.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.Store({\n     *     audioBlob: yourAudioBlob,\n     *     videoBlob: yourVideoBlob,\n     *     gifBlob  : yourGifBlob\n     * });\n     */\n    Store: function(config) {\n        this.audioBlob = config.audioBlob;\n        this.videoBlob = config.videoBlob;\n        this.gifBlob = config.gifBlob;\n\n        this.init();\n\n        return this;\n    },\n    /**\n     * This function is invoked for any known/unknown error.\n     * @method\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.onError = function(error){\n     *     alerot( JSON.stringify(error) );\n     * };\n     */\n    onError: function(error) {\n        console.error(JSON.stringify(error, null, '\\t'));\n    },\n\n    /**\n     * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\n     * @memberof DiskStorage\n     * @internal\n     * @example\n     * DiskStorage.dataStoreName = 'recordRTC';\n     */\n    dataStoreName: 'recordRTC',\n    dbName: null\n};\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.DiskStorage = DiskStorage;\n}\n\n// ______________\n// GifRecorder.js\n\n/**\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef GifRecorder\n * @class\n * @example\n * var recorder = new GifRecorder(mediaStream || canvas || context, { width: 1280, height: 720, frameRate: 200, quality: 10 });\n * recorder.record();\n * recorder.stop(function(blob) {\n *     img.src = URL.createObjectURL(blob);\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\n */\n\nfunction GifRecorder(mediaStream, config) {\n    if (typeof GIFEncoder === 'undefined') {\n        throw 'Please link: https://cdn.webrtc-experiment.com/gif-recorder.js';\n    }\n\n    config = config || {};\n\n    var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\n\n    /**\n     * This method records MediaStream.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        if (!isHTMLObject) {\n            if (!config.width) {\n                config.width = video.offsetWidth || 320;\n            }\n\n            if (!this.height) {\n                config.height = video.offsetHeight || 240;\n            }\n\n            if (!config.video) {\n                config.video = {\n                    width: config.width,\n                    height: config.height\n                };\n            }\n\n            if (!config.canvas) {\n                config.canvas = {\n                    width: config.width,\n                    height: config.height\n                };\n            }\n\n            canvas.width = config.canvas.width || 320;\n            canvas.height = config.canvas.height || 240;\n\n            video.width = config.video.width || 320;\n            video.height = config.video.height || 240;\n        }\n\n        // external library to record as GIF images\n        gifEncoder = new GIFEncoder();\n\n        // void setRepeat(int iter) \n        // Sets the number of times the set of GIF frames should be played. \n        // Default is 1; 0 means play indefinitely.\n        gifEncoder.setRepeat(0);\n\n        // void setFrameRate(Number fps) \n        // Sets frame rate in frames per second. \n        // Equivalent to setDelay(1000/fps).\n        // Using \"setDelay\" instead of \"setFrameRate\"\n        gifEncoder.setDelay(config.frameRate || 200);\n\n        // void setQuality(int quality) \n        // Sets quality of color quantization (conversion of images to the \n        // maximum 256 colors allowed by the GIF specification). \n        // Lower values (minimum = 1) produce better colors, \n        // but slow processing significantly. 10 is the default, \n        // and produces good color mapping at reasonable speeds. \n        // Values greater than 20 do not yield significant improvements in speed.\n        gifEncoder.setQuality(config.quality || 10);\n\n        // Boolean start() \n        // This writes the GIF Header and returns false if it fails.\n        gifEncoder.start();\n\n        startTime = Date.now();\n\n        var self = this;\n\n        function drawVideoFrame(time) {\n            if (isPausedRecording) {\n                return setTimeout(function() {\n                    drawVideoFrame(time);\n                }, 100);\n            }\n\n            lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n            if (typeof lastFrameTime === undefined) {\n                lastFrameTime = time;\n            }\n\n            // ~10 fps\n            if (time - lastFrameTime < 90) {\n                return;\n            }\n\n            if (!isHTMLObject && video.paused) {\n                // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n                // Tweak for Android Chrome\n                video.play();\n            }\n\n            if (!isHTMLObject) {\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\n            }\n\n            if (config.onGifPreview) {\n                config.onGifPreview(canvas.toDataURL('image/png'));\n            }\n\n            gifEncoder.addFrame(context);\n            lastFrameTime = time;\n        }\n\n        lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n        if (config.initCallback) {\n            config.initCallback();\n        }\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     img.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function() {\n        if (lastAnimationFrame) {\n            cancelAnimationFrame(lastAnimationFrame);\n        }\n\n        endTime = Date.now();\n\n        /**\n         * @property {Blob} blob - The recorded blob object.\n         * @memberof GifRecorder\n         * @example\n         * recorder.stop(function(){\n         *     var blob = recorder.blob;\n         * });\n         */\n        this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\n            type: 'image/gif'\n        });\n\n        // bug: find a way to clear old recorded blobs\n        gifEncoder.stream().bin = [];\n    };\n\n    var isPausedRecording = false;\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        isPausedRecording = true;\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        isPausedRecording = false;\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof GifRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        if (!gifEncoder) {\n            return;\n        }\n\n        this.pause();\n\n        gifEncoder.stream().bin = [];\n    };\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    if (isHTMLObject) {\n        if (mediaStream instanceof CanvasRenderingContext2D) {\n            context = mediaStream;\n            canvas = context.canvas;\n        } else if (mediaStream instanceof HTMLCanvasElement) {\n            context = mediaStream.getContext('2d');\n            canvas = mediaStream;\n        }\n    }\n\n    if (!isHTMLObject) {\n        var video = document.createElement('video');\n        video.muted = true;\n        video.autoplay = true;\n\n        if (typeof video.srcObject !== 'undefined') {\n            video.srcObject = mediaStream;\n        } else {\n            video.src = URL.createObjectURL(mediaStream);\n        }\n\n        video.play();\n    }\n\n    var lastAnimationFrame = null;\n    var startTime, endTime, lastFrameTime;\n\n    var gifEncoder;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.GifRecorder = GifRecorder;\n}\n\n// ______________________\n// MultiStreamRecorder.js\n\n/*\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\n */\n\n/**\n * MultiStreamRecorder can record multiple videos in single container.\n * @summary Multi-videos recorder.\n * @license {@link https://github.com/muaz-khan/RecordRTC#license|MIT}\n * @author {@link http://www.MuazKhan.com|Muaz Khan}\n * @typedef MultiStreamRecorder\n * @class\n * @example\n * var options = {\n *     mimeType: 'video/webm'\n * }\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\n * recorder.record();\n * recorder.stop(function(blob) {\n *     video.src = URL.createObjectURL(blob);\n *\n *     // or\n *     var blob = recorder.blob;\n * });\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\n * @param {object} config - {disableLogs:true, frameInterval: 10, mimeType: \"video/webm\"}\n */\n\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\n    var self = this;\n\n    options = options || {\n        mimeType: 'video/webm',\n        video: {\n            width: 320,\n            height: 240\n        }\n    };\n\n    if (!options.frameInterval) {\n        options.frameInterval = 10;\n    }\n\n    if (!options.video) {\n        options.video = {};\n    }\n\n    if (!options.video.width) {\n        options.video.width = 320;\n    }\n\n    if (!options.video.height) {\n        options.video.height = 240;\n    }\n\n    /**\n     * This method records all MediaStreams.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.record();\n     */\n    this.record = function() {\n        isStoppedRecording = false;\n        var mixedVideoStream = getMixedVideoStream();\n\n        var mixedAudioStream = getMixedAudioStream();\n        if (mixedAudioStream) {\n            mixedAudioStream.getAudioTracks().forEach(function(track) {\n                mixedVideoStream.addTrack(track);\n            });\n        }\n\n        if (options.previewStream && typeof options.previewStream === 'function') {\n            options.previewStream(mixedVideoStream);\n        }\n\n        mediaRecorder = new MediaStreamRecorder(mixedVideoStream, {\n            mimeType: 'video/webm'\n        });\n\n        canvas.width = videos.length > 1 ? videos[0].width * 2 : videos[0].width;\n        canvas.height = videos.length > 2 ? videos[0].height * 2 : videos[0].height;\n\n        drawVideosToCanvas();\n\n        mediaRecorder.record();\n    };\n\n    /**\n     * This method stops recording MediaStream.\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.stop(function(blob) {\n     *     video.src = URL.createObjectURL(blob);\n     * });\n     */\n    this.stop = function(callback) {\n        isStoppedRecording = true;\n\n        if (!mediaRecorder) {\n            return;\n        }\n\n        mediaRecorder.stop(function(blob) {\n            callback(blob);\n        });\n    };\n\n    function getMixedAudioStream() {\n        // via: @pehrsons\n        var audioContext = new AudioContext();\n        var audioSources = [];\n\n        var audioTracksLength = 0;\n        arrayOfMediaStreams.forEach(function(stream) {\n            if (!stream.getAudioTracks().length) {\n                return;\n            }\n\n            audioTracksLength++;\n\n            audioSources.push(audioContext.createMediaStreamSource(stream));\n        });\n\n        if (!audioTracksLength) {\n            return;\n        }\n\n        var audioiDestination = audioContext.createMediaStreamDestination();\n        audioSources.forEach(function(audioSource) {\n            audioSource.connect(audioiDestination);\n        });\n        return audioiDestination.stream;\n    }\n\n    var videos = [];\n    var mediaRecorder;\n\n    function getMixedVideoStream() {\n        // via: @adrian-ber\n        arrayOfMediaStreams.forEach(function(stream) {\n            if (!stream.getVideoTracks().length) {\n                return;\n            }\n\n            var video = getVideo(stream);\n            video.width = options.video.width;\n            video.height = options.video.height;\n            videos.push(video);\n        });\n\n        var capturedStream;\n\n        if ('captureStream' in canvas) {\n            capturedStream = canvas.captureStream();\n        } else if ('mozCaptureStream' in canvas) {\n            capturedStream = canvas.mozCaptureStream();\n        } else if (!options.disableLogs) {\n            console.error('captureStream API requires this flag: chrome://flags/#enable-experimental-web-platform-features');\n        }\n\n        return capturedStream;\n    }\n\n    function getVideo(stream) {\n        var video = document.createElement('video');\n        video.src = URL.createObjectURL(stream);\n        video.play();\n        return video;\n    }\n\n    var isStoppedRecording = false;\n\n    function drawVideosToCanvas() {\n        if (isStoppedRecording) {\n            return;\n        }\n\n        var videosLength = videos.length;\n        videos.forEach(function(video, idx) {\n            if (videosLength === 1) {\n                context.drawImage(video, 0, 0, video.width, video.height);\n                return;\n            }\n\n            if (videosLength === 2) {\n                var x = 0;\n                var y = 0;\n\n                if (idx === 1) {\n                    x = video.width;\n                }\n\n                context.drawImage(video, x, y, video.width, video.height);\n                return;\n            }\n\n            if (videosLength === 3) {\n                var x = 0;\n                var y = 0;\n\n                if (idx === 1) {\n                    x = video.width;\n                }\n\n                if (idx === 2) {\n                    y = video.height;\n                }\n\n                context.drawImage(video, x, y, video.width, video.height);\n                return;\n            }\n\n            if (videosLength === 4) {\n                var x = 0;\n                var y = 0;\n\n                if (idx === 1) {\n                    x = video.width;\n                }\n\n                if (idx === 2) {\n                    y = video.height;\n                }\n\n                if (idx === 3) {\n                    x = video.width;\n                    y = video.height;\n                }\n\n                context.drawImage(video, x, y, video.width, video.height);\n                return;\n            }\n        });\n\n        setTimeout(drawVideosToCanvas, options.frameInterval);\n    }\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    canvas.style = 'opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000;';\n\n    document.body.appendChild(canvas);\n\n    /**\n     * This method pauses the recording process.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.pause();\n     */\n    this.pause = function() {\n        if (mediaRecorder) {\n            mediaRecorder.pause();\n        }\n    };\n\n    /**\n     * This method resumes the recording process.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.resume();\n     */\n    this.resume = function() {\n        if (mediaRecorder) {\n            mediaRecorder.resume();\n        }\n    };\n\n    /**\n     * This method resets currently recorded data.\n     * @method\n     * @memberof MultiStreamRecorder\n     * @example\n     * recorder.clearRecordedData();\n     */\n    this.clearRecordedData = function() {\n        videos = [];\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        isStoppedRecording = false;\n        mediaRecorder = null;\n\n        if (mediaRecorder) {\n            mediaRecorder.clearRecordedData();\n        }\n    };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n    RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPathColorName = getPathColorName;\nexports.getColorName = getColorName;\nexports.getRandomPop = getRandomPop;\nexports.getIndexedPopColor = getIndexedPopColor;\nvar config = require('./../../config');\n\nvar transparent = exports.transparent = new Color(0, 0);\n\nfunction getPathColorName(path) {\n  var hexColor = path.parent.data.originalColor;\n  // let hexColor = path.strokeColor.toCSS(true); // This fails when it's a gradient\n  return getColorName(hexColor);\n}\n\nfunction getColorName(color) {\n  if (color) {\n    color = color.toUpperCase(); // make sure\n    if (color in config.palette.colorNames) {\n      return config.palette.colorNames[color];\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\nfunction getRandomPop() {\n  var pops = config.palette.pops;\n  return pops[Math.floor(Math.random() * pops.length)];\n}\n\nfunction getIndexedPopColor(index) {\n  var pops = config.palette.pops;\n  return pops[index % pops.length];\n}\n\n},{\"./../../config\":1}],8:[function(require,module,exports){\n\"use strict\";\n\n(function (root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.ShapeDetector = factory();\n  }\n})(undefined, function () {\n\n  var _nbSamplePoints;\n  var _squareSize = 250;\n  var _phi = 0.5 * (-1.0 + Math.sqrt(5.0));\n  var _angleRange = deg2Rad(45.0);\n  var _anglePrecision = deg2Rad(2.0);\n  var _halfDiagonal = Math.sqrt(_squareSize * _squareSize + _squareSize * _squareSize) * 0.5;\n  var _origin = {\n    x: 0,\n    y: 0\n  };\n\n  function deg2Rad(d) {\n\n    return d * Math.PI / 180.0;\n  };\n\n  function getDistance(a, b) {\n\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  function Stroke(points, name) {\n\n    this.points = points;\n    this.name = name;\n    this.processStroke();\n  };\n\n  Stroke.prototype.processStroke = function () {\n\n    this.points = this.resample();\n    this.setCentroid();\n    this.points = this.rotateBy(-this.indicativeAngle());\n    this.points = this.scaleToSquare();\n    this.setCentroid();\n    this.points = this.translateToOrigin();\n\n    return this;\n  };\n\n  Stroke.prototype.resample = function () {\n\n    var localDistance, q;\n    var interval = this.strokeLength() / (_nbSamplePoints - 1);\n    var distance = 0.0;\n    var newPoints = [this.points[0]];\n\n    for (var i = 1; i < this.points.length; i++) {\n      localDistance = getDistance(this.points[i - 1], this.points[i]);\n\n      if (distance + localDistance >= interval) {\n        q = {\n          x: this.points[i - 1].x + (interval - distance) / localDistance * (this.points[i].x - this.points[i - 1].x),\n          y: this.points[i - 1].y + (interval - distance) / localDistance * (this.points[i].y - this.points[i - 1].y)\n        };\n\n        newPoints.push(q);\n        this.points.splice(i, 0, q);\n        distance = 0.0;\n      } else {\n        distance += localDistance;\n      }\n    }\n\n    if (newPoints.length === _nbSamplePoints - 1) {\n      newPoints.push(this.points[this.points.length - 1]);\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.rotateBy = function (angle) {\n\n    var point;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: (point.x - this.c.x) * cos - (point.y - this.c.y) * sin + this.c.x,\n        y: (point.x - this.c.x) * sin + (point.y - this.c.y) * cos + this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.scaleToSquare = function () {\n\n    var point;\n    var newPoints = [];\n    var box = {\n      minX: +Infinity,\n      maxX: -Infinity,\n      minY: +Infinity,\n      maxY: -Infinity\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      box.minX = Math.min(box.minX, point.x);\n      box.minY = Math.min(box.minY, point.y);\n      box.maxX = Math.max(box.maxX, point.x);\n      box.maxY = Math.max(box.maxY, point.y);\n    }\n\n    box.width = box.maxX - box.minX;\n    box.height = box.maxY - box.minY;\n\n    for (i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x * (_squareSize / box.width),\n        y: point.y * (_squareSize / box.height)\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.translateToOrigin = function (points) {\n\n    var point;\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x + _origin.x - this.c.x,\n        y: point.y + _origin.y - this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.setCentroid = function () {\n\n    var point;\n    this.c = {\n      x: 0.0,\n      y: 0.0\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      this.c.x += point.x;\n      this.c.y += point.y;\n    }\n\n    this.c.x /= this.points.length;\n    this.c.y /= this.points.length;\n\n    return this;\n  };\n\n  Stroke.prototype.indicativeAngle = function () {\n\n    return Math.atan2(this.c.y - this.points[0].y, this.c.x - this.points[0].x);\n  };\n\n  Stroke.prototype.strokeLength = function () {\n\n    var d = 0.0;\n\n    for (var i = 1; i < this.points.length; i++) {\n      d += getDistance(this.points[i - 1], this.points[i]);\n    }\n\n    return d;\n  };\n\n  Stroke.prototype.distanceAtBestAngle = function (pattern) {\n\n    var a = -_angleRange;\n    var b = _angleRange;\n    var x1 = _phi * a + (1.0 - _phi) * b;\n    var f1 = this.distanceAtAngle(pattern, x1);\n    var x2 = (1.0 - _phi) * a + _phi * b;\n    var f2 = this.distanceAtAngle(pattern, x2);\n\n    while (Math.abs(b - a) > _anglePrecision) {\n\n      if (f1 < f2) {\n        b = x2;\n        x2 = x1;\n        f2 = f1;\n        x1 = _phi * a + (1.0 - _phi) * b;\n        f1 = this.distanceAtAngle(pattern, x1);\n      } else {\n        a = x1;\n        x1 = x2;\n        f1 = f2;\n        x2 = (1.0 - _phi) * a + _phi * b;\n        f2 = this.distanceAtAngle(pattern, x2);\n      }\n    }\n\n    return Math.min(f1, f2);\n  };\n\n  Stroke.prototype.distanceAtAngle = function (pattern, angle) {\n\n    var strokePoints = this.rotateBy(angle);\n    var patternPoints = pattern.points;\n    var d = 0.0;\n\n    for (var i = 0; i < strokePoints.length; i++) {\n      d += getDistance(strokePoints[i], patternPoints[i]);\n    }\n\n    return d / strokePoints.length;\n  };\n\n  function ShapeDetector(patterns, options) {\n\n    options = options || {};\n    this.threshold = options.threshold || 0;\n    _nbSamplePoints = options.nbSamplePoints || 64;\n\n    this.patterns = [];\n\n    for (var i = 0; i < patterns.length; i++) {\n      this.learn(patterns[i].name, patterns[i].points);\n    }\n  }\n\n  ShapeDetector.defaultShapes = [{\n    points: [{ x: 0, y: 50 }, { x: 100, y: 50 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 50, y: 0 }, { x: 50, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 100, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 89, \"y\": 164 }, { \"x\": 90, \"y\": 162 }, { \"x\": 92, \"y\": 162 }, { \"x\": 94, \"y\": 164 }, { \"x\": 95, \"y\": 166 }, { \"x\": 96, \"y\": 169 }, { \"x\": 97, \"y\": 171 }, { \"x\": 99, \"y\": 175 }, { \"x\": 101, \"y\": 178 }, { \"x\": 103, \"y\": 182 }, { \"x\": 106, \"y\": 189 }, { \"x\": 108, \"y\": 194 }, { \"x\": 111, \"y\": 199 }, { \"x\": 114, \"y\": 204 }, { \"x\": 117, \"y\": 209 }, { \"x\": 119, \"y\": 214 }, { \"x\": 122, \"y\": 218 }, { \"x\": 124, \"y\": 222 }, { \"x\": 126, \"y\": 225 }, { \"x\": 128, \"y\": 228 }, { \"x\": 130, \"y\": 229 }, { \"x\": 133, \"y\": 233 }, { \"x\": 134, \"y\": 236 }, { \"x\": 136, \"y\": 239 }, { \"x\": 138, \"y\": 240 }, { \"x\": 139, \"y\": 242 }, { \"x\": 140, \"y\": 244 }, { \"x\": 142, \"y\": 242 }, { \"x\": 142, \"y\": 240 }, { \"x\": 142, \"y\": 237 }, { \"x\": 143, \"y\": 235 }, { \"x\": 143, \"y\": 233 }, { \"x\": 145, \"y\": 229 }, { \"x\": 146, \"y\": 226 }, { \"x\": 148, \"y\": 217 }, { \"x\": 149, \"y\": 208 }, { \"x\": 149, \"y\": 205 }, { \"x\": 151, \"y\": 196 }, { \"x\": 151, \"y\": 193 }, { \"x\": 153, \"y\": 182 }, { \"x\": 155, \"y\": 172 }, { \"x\": 157, \"y\": 165 }, { \"x\": 159, \"y\": 160 }, { \"x\": 162, \"y\": 155 }, { \"x\": 164, \"y\": 150 }, { \"x\": 165, \"y\": 148 }, { \"x\": 166, \"y\": 146 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 91, \"y\": 185 }, { \"x\": 93, \"y\": 185 }, { \"x\": 95, \"y\": 185 }, { \"x\": 97, \"y\": 185 }, { \"x\": 100, \"y\": 188 }, { \"x\": 102, \"y\": 189 }, { \"x\": 104, \"y\": 190 }, { \"x\": 106, \"y\": 193 }, { \"x\": 108, \"y\": 195 }, { \"x\": 110, \"y\": 198 }, { \"x\": 112, \"y\": 201 }, { \"x\": 114, \"y\": 204 }, { \"x\": 115, \"y\": 207 }, { \"x\": 117, \"y\": 210 }, { \"x\": 118, \"y\": 212 }, { \"x\": 120, \"y\": 214 }, { \"x\": 121, \"y\": 217 }, { \"x\": 122, \"y\": 219 }, { \"x\": 123, \"y\": 222 }, { \"x\": 124, \"y\": 224 }, { \"x\": 126, \"y\": 226 }, { \"x\": 127, \"y\": 229 }, { \"x\": 129, \"y\": 231 }, { \"x\": 130, \"y\": 233 }, { \"x\": 129, \"y\": 231 }, { \"x\": 129, \"y\": 228 }, { \"x\": 129, \"y\": 226 }, { \"x\": 129, \"y\": 224 }, { \"x\": 129, \"y\": 221 }, { \"x\": 129, \"y\": 218 }, { \"x\": 129, \"y\": 212 }, { \"x\": 129, \"y\": 208 }, { \"x\": 130, \"y\": 198 }, { \"x\": 132, \"y\": 189 }, { \"x\": 134, \"y\": 182 }, { \"x\": 137, \"y\": 173 }, { \"x\": 143, \"y\": 164 }, { \"x\": 147, \"y\": 157 }, { \"x\": 151, \"y\": 151 }, { \"x\": 155, \"y\": 144 }, { \"x\": 161, \"y\": 137 }, { \"x\": 165, \"y\": 131 }, { \"x\": 171, \"y\": 122 }, { \"x\": 174, \"y\": 118 }, { \"x\": 176, \"y\": 114 }, { \"x\": 177, \"y\": 112 }, { \"x\": 177, \"y\": 114 }, { \"x\": 175, \"y\": 116 }, { \"x\": 173, \"y\": 118 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 113, \"y\": 68 }, { \"x\": 86, \"y\": 79 }, { \"x\": 63, \"y\": 131 }, { \"x\": 78, \"y\": 147 }, { \"x\": 156, \"y\": 149 }, { \"x\": 195, \"y\": 100 }, { \"x\": 189, \"y\": 79 }, { \"x\": 125.73497, \"y\": 62.81168 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 98, \"y\": 67 }, { \"x\": 77, \"y\": 85 }, { \"x\": 77, \"y\": 162 }, { \"x\": 179, \"y\": 156 }, { \"x\": 197, \"y\": 123 }, { \"x\": 167, \"y\": 63 }, { \"x\": 141, \"y\": 61 }, { \"x\": 110, \"y\": 59 }, { \"x\": 106.51192, \"y\": 59.70407 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 60, \"y\": 47 }, { \"x\": 43, \"y\": 96 }, { \"x\": 52, \"y\": 206 }, { \"x\": 63, \"y\": 246 }, { \"x\": 118, \"y\": 296 }, { \"x\": 144, \"y\": 246 }, { \"x\": 141, \"y\": 147 }, { \"x\": 133, \"y\": 129 }, { \"x\": 113, \"y\": 80 }, { \"x\": 60.42738, \"y\": 45.76813 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 127, \"y\": 141 }, { \"x\": 124, \"y\": 140 }, { \"x\": 120, \"y\": 139 }, { \"x\": 118, \"y\": 139 }, { \"x\": 116, \"y\": 139 }, { \"x\": 111, \"y\": 140 }, { \"x\": 109, \"y\": 141 }, { \"x\": 104, \"y\": 144 }, { \"x\": 100, \"y\": 147 }, { \"x\": 96, \"y\": 152 }, { \"x\": 93, \"y\": 157 }, { \"x\": 90, \"y\": 163 }, { \"x\": 87, \"y\": 169 }, { \"x\": 85, \"y\": 175 }, { \"x\": 83, \"y\": 181 }, { \"x\": 82, \"y\": 190 }, { \"x\": 82, \"y\": 195 }, { \"x\": 83, \"y\": 200 }, { \"x\": 84, \"y\": 205 }, { \"x\": 88, \"y\": 213 }, { \"x\": 91, \"y\": 216 }, { \"x\": 96, \"y\": 219 }, { \"x\": 103, \"y\": 222 }, { \"x\": 108, \"y\": 224 }, { \"x\": 111, \"y\": 224 }, { \"x\": 120, \"y\": 224 }, { \"x\": 133, \"y\": 223 }, { \"x\": 142, \"y\": 222 }, { \"x\": 152, \"y\": 218 }, { \"x\": 160, \"y\": 214 }, { \"x\": 167, \"y\": 210 }, { \"x\": 173, \"y\": 204 }, { \"x\": 178, \"y\": 198 }, { \"x\": 179, \"y\": 196 }, { \"x\": 182, \"y\": 188 }, { \"x\": 182, \"y\": 177 }, { \"x\": 178, \"y\": 167 }, { \"x\": 170, \"y\": 150 }, { \"x\": 163, \"y\": 138 }, { \"x\": 152, \"y\": 130 }, { \"x\": 143, \"y\": 129 }, { \"x\": 140, \"y\": 131 }, { \"x\": 129, \"y\": 136 }, { \"x\": 126, \"y\": 139 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 516, \"y\": 284 }, { \"x\": 496, \"y\": 319 }, { \"x\": 496, \"y\": 329 }, { \"x\": 513, \"y\": 329 }, { \"x\": 550, \"y\": 324 }, { \"x\": 696, \"y\": 305 }, { \"x\": 737, \"y\": 298 }, { \"x\": 746, \"y\": 292 }, { \"x\": 734, \"y\": 278 }, { \"x\": 709, \"y\": 252 }, { \"x\": 664, \"y\": 193 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 179, \"y\": 159 }, { \"x\": 152, \"y\": 290 }, { \"x\": 143, \"y\": 336 }, { \"x\": 142, \"y\": 355 }, { \"x\": 160, \"y\": 348 }, { \"x\": 208, \"y\": 337 }, { \"x\": 241, \"y\": 330 }, { \"x\": 256, \"y\": 328 }, { \"x\": 254, \"y\": 315 }, { \"x\": 238, \"y\": 277 }, { \"x\": 210, \"y\": 200 }, { \"x\": 182.94356, \"y\": 110.45656 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 105, \"y\": 335 }, { \"x\": 115, \"y\": 362 }, { \"x\": 128, \"y\": 338 }, { \"x\": 163, \"y\": 271 }, { \"x\": 241, \"y\": 135 }, { \"x\": 261, \"y\": 104 }, { \"x\": 267, \"y\": 98 }, { \"x\": 261, \"y\": 102 }, { \"x\": 236, \"y\": 119 }, { \"x\": 151, \"y\": 195 }, { \"x\": 108, \"y\": 235 }, { \"x\": 83, \"y\": 267 }, { \"x\": 79.92616, \"y\": 270.93451 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 137, \"y\": 139 }, { \"x\": 135, \"y\": 141 }, { \"x\": 133, \"y\": 144 }, { \"x\": 132, \"y\": 146 }, { \"x\": 130, \"y\": 149 }, { \"x\": 128, \"y\": 151 }, { \"x\": 126, \"y\": 155 }, { \"x\": 123, \"y\": 160 }, { \"x\": 120, \"y\": 166 }, { \"x\": 116, \"y\": 171 }, { \"x\": 112, \"y\": 177 }, { \"x\": 107, \"y\": 183 }, { \"x\": 102, \"y\": 188 }, { \"x\": 100, \"y\": 191 }, { \"x\": 95, \"y\": 195 }, { \"x\": 90, \"y\": 199 }, { \"x\": 86, \"y\": 203 }, { \"x\": 82, \"y\": 206 }, { \"x\": 80, \"y\": 209 }, { \"x\": 75, \"y\": 213 }, { \"x\": 73, \"y\": 213 }, { \"x\": 70, \"y\": 216 }, { \"x\": 67, \"y\": 219 }, { \"x\": 64, \"y\": 221 }, { \"x\": 61, \"y\": 223 }, { \"x\": 60, \"y\": 225 }, { \"x\": 62, \"y\": 226 }, { \"x\": 65, \"y\": 225 }, { \"x\": 67, \"y\": 226 }, { \"x\": 74, \"y\": 226 }, { \"x\": 77, \"y\": 227 }, { \"x\": 85, \"y\": 229 }, { \"x\": 91, \"y\": 230 }, { \"x\": 99, \"y\": 231 }, { \"x\": 108, \"y\": 232 }, { \"x\": 116, \"y\": 233 }, { \"x\": 125, \"y\": 233 }, { \"x\": 134, \"y\": 234 }, { \"x\": 145, \"y\": 233 }, { \"x\": 153, \"y\": 232 }, { \"x\": 160, \"y\": 233 }, { \"x\": 170, \"y\": 234 }, { \"x\": 177, \"y\": 235 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 237 }, { \"x\": 193, \"y\": 238 }, { \"x\": 198, \"y\": 239 }, { \"x\": 200, \"y\": 237 }, { \"x\": 202, \"y\": 239 }, { \"x\": 204, \"y\": 238 }, { \"x\": 206, \"y\": 234 }, { \"x\": 205, \"y\": 230 }, { \"x\": 202, \"y\": 222 }, { \"x\": 197, \"y\": 216 }, { \"x\": 192, \"y\": 207 }, { \"x\": 186, \"y\": 198 }, { \"x\": 179, \"y\": 189 }, { \"x\": 174, \"y\": 183 }, { \"x\": 170, \"y\": 178 }, { \"x\": 164, \"y\": 171 }, { \"x\": 161, \"y\": 168 }, { \"x\": 154, \"y\": 160 }, { \"x\": 148, \"y\": 155 }, { \"x\": 143, \"y\": 150 }, { \"x\": 138, \"y\": 148 }, { \"x\": 136, \"y\": 148 }],\n    name: \"triangle\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 50 }, { x: 50, y: 50 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 100 }, { x: 50, y: 100 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 78, \"y\": 149 }, { \"x\": 78, \"y\": 153 }, { \"x\": 78, \"y\": 157 }, { \"x\": 78, \"y\": 160 }, { \"x\": 79, \"y\": 162 }, { \"x\": 79, \"y\": 164 }, { \"x\": 79, \"y\": 167 }, { \"x\": 79, \"y\": 169 }, { \"x\": 79, \"y\": 173 }, { \"x\": 79, \"y\": 178 }, { \"x\": 79, \"y\": 183 }, { \"x\": 80, \"y\": 189 }, { \"x\": 80, \"y\": 193 }, { \"x\": 80, \"y\": 198 }, { \"x\": 80, \"y\": 202 }, { \"x\": 81, \"y\": 208 }, { \"x\": 81, \"y\": 210 }, { \"x\": 81, \"y\": 216 }, { \"x\": 82, \"y\": 222 }, { \"x\": 82, \"y\": 224 }, { \"x\": 82, \"y\": 227 }, { \"x\": 83, \"y\": 229 }, { \"x\": 83, \"y\": 231 }, { \"x\": 85, \"y\": 230 }, { \"x\": 88, \"y\": 232 }, { \"x\": 90, \"y\": 233 }, { \"x\": 92, \"y\": 232 }, { \"x\": 94, \"y\": 233 }, { \"x\": 99, \"y\": 232 }, { \"x\": 102, \"y\": 233 }, { \"x\": 106, \"y\": 233 }, { \"x\": 109, \"y\": 234 }, { \"x\": 117, \"y\": 235 }, { \"x\": 123, \"y\": 236 }, { \"x\": 126, \"y\": 236 }, { \"x\": 135, \"y\": 237 }, { \"x\": 142, \"y\": 238 }, { \"x\": 145, \"y\": 238 }, { \"x\": 152, \"y\": 238 }, { \"x\": 154, \"y\": 239 }, { \"x\": 165, \"y\": 238 }, { \"x\": 174, \"y\": 237 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 235 }, { \"x\": 191, \"y\": 235 }, { \"x\": 195, \"y\": 233 }, { \"x\": 197, \"y\": 233 }, { \"x\": 200, \"y\": 233 }, { \"x\": 201, \"y\": 235 }, { \"x\": 201, \"y\": 233 }, { \"x\": 199, \"y\": 231 }, { \"x\": 198, \"y\": 226 }, { \"x\": 198, \"y\": 220 }, { \"x\": 196, \"y\": 207 }, { \"x\": 195, \"y\": 195 }, { \"x\": 195, \"y\": 181 }, { \"x\": 195, \"y\": 173 }, { \"x\": 195, \"y\": 163 }, { \"x\": 194, \"y\": 155 }, { \"x\": 192, \"y\": 145 }, { \"x\": 192, \"y\": 143 }, { \"x\": 192, \"y\": 138 }, { \"x\": 191, \"y\": 135 }, { \"x\": 191, \"y\": 133 }, { \"x\": 191, \"y\": 130 }, { \"x\": 190, \"y\": 128 }, { \"x\": 188, \"y\": 129 }, { \"x\": 186, \"y\": 129 }, { \"x\": 181, \"y\": 132 }, { \"x\": 173, \"y\": 131 }, { \"x\": 162, \"y\": 131 }, { \"x\": 151, \"y\": 132 }, { \"x\": 149, \"y\": 132 }, { \"x\": 138, \"y\": 132 }, { \"x\": 136, \"y\": 132 }, { \"x\": 122, \"y\": 131 }, { \"x\": 120, \"y\": 131 }, { \"x\": 109, \"y\": 130 }, { \"x\": 107, \"y\": 130 }, { \"x\": 90, \"y\": 132 }, { \"x\": 81, \"y\": 133 }, { \"x\": 76, \"y\": 133 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 67, \"y\": 172 }, { \"x\": 80, \"y\": 85 }, { \"x\": 83, \"y\": 58 }, { \"x\": 83, \"y\": 54 }, { \"x\": 136, \"y\": 110 }, { \"x\": 157, \"y\": 136 }, { \"x\": 162, \"y\": 140 }, { \"x\": 166, \"y\": 143 }, { \"x\": 80, \"y\": 124 }, { \"x\": 45, \"y\": 116 }, { \"x\": 37, \"y\": 114 }, { \"x\": 31, \"y\": 113 }, { \"x\": 52, \"y\": 106 }, { \"x\": 101, \"y\": 86 }, { \"x\": 131, \"y\": 75 }, { \"x\": 157, \"y\": 63 }, { \"x\": 163, \"y\": 62 }, { \"x\": 158, \"y\": 64 }, { \"x\": 153, \"y\": 73 }, { \"x\": 128, \"y\": 103 }, { \"x\": 71, \"y\": 170 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 30, \"y\": 69 }, { \"x\": 116, \"y\": 118 }, { \"x\": 90, \"y\": 164 }, { \"x\": 75, \"y\": 117 }, { \"x\": 157, \"y\": 83 }, { \"x\": 182, \"y\": 140 }, { \"x\": 155, \"y\": 163 }, { \"x\": 144, \"y\": 119 }, { \"x\": 221, \"y\": 54 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 87, \"y\": 76 }, { \"x\": 62, \"y\": 73 }, { \"x\": 100, \"y\": 98 }, { \"x\": 107, \"y\": 57 }, { \"x\": 61, \"y\": 38 }, { \"x\": 73, \"y\": 137 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 123, \"y\": 129 }, { \"x\": 123, \"y\": 131 }, { \"x\": 124, \"y\": 133 }, { \"x\": 125, \"y\": 136 }, { \"x\": 127, \"y\": 140 }, { \"x\": 129, \"y\": 142 }, { \"x\": 133, \"y\": 148 }, { \"x\": 137, \"y\": 154 }, { \"x\": 143, \"y\": 158 }, { \"x\": 145, \"y\": 161 }, { \"x\": 148, \"y\": 164 }, { \"x\": 153, \"y\": 170 }, { \"x\": 158, \"y\": 176 }, { \"x\": 160, \"y\": 178 }, { \"x\": 164, \"y\": 183 }, { \"x\": 168, \"y\": 188 }, { \"x\": 171, \"y\": 191 }, { \"x\": 175, \"y\": 196 }, { \"x\": 178, \"y\": 200 }, { \"x\": 180, \"y\": 202 }, { \"x\": 181, \"y\": 205 }, { \"x\": 184, \"y\": 208 }, { \"x\": 186, \"y\": 210 }, { \"x\": 187, \"y\": 213 }, { \"x\": 188, \"y\": 215 }, { \"x\": 186, \"y\": 212 }, { \"x\": 183, \"y\": 211 }, { \"x\": 177, \"y\": 208 }, { \"x\": 169, \"y\": 206 }, { \"x\": 162, \"y\": 205 }, { \"x\": 154, \"y\": 207 }, { \"x\": 145, \"y\": 209 }, { \"x\": 137, \"y\": 210 }, { \"x\": 129, \"y\": 214 }, { \"x\": 122, \"y\": 217 }, { \"x\": 118, \"y\": 218 }, { \"x\": 111, \"y\": 221 }, { \"x\": 109, \"y\": 222 }, { \"x\": 110, \"y\": 219 }, { \"x\": 112, \"y\": 217 }, { \"x\": 118, \"y\": 209 }, { \"x\": 120, \"y\": 207 }, { \"x\": 128, \"y\": 196 }, { \"x\": 135, \"y\": 187 }, { \"x\": 138, \"y\": 183 }, { \"x\": 148, \"y\": 167 }, { \"x\": 157, \"y\": 153 }, { \"x\": 163, \"y\": 145 }, { \"x\": 165, \"y\": 142 }, { \"x\": 172, \"y\": 133 }, { \"x\": 177, \"y\": 127 }, { \"x\": 179, \"y\": 127 }, { \"x\": 180, \"y\": 125 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 81, \"y\": 219 }, { \"x\": 84, \"y\": 218 }, { \"x\": 86, \"y\": 220 }, { \"x\": 88, \"y\": 220 }, { \"x\": 90, \"y\": 220 }, { \"x\": 92, \"y\": 219 }, { \"x\": 95, \"y\": 220 }, { \"x\": 97, \"y\": 219 }, { \"x\": 99, \"y\": 220 }, { \"x\": 102, \"y\": 218 }, { \"x\": 105, \"y\": 217 }, { \"x\": 107, \"y\": 216 }, { \"x\": 110, \"y\": 216 }, { \"x\": 113, \"y\": 214 }, { \"x\": 116, \"y\": 212 }, { \"x\": 118, \"y\": 210 }, { \"x\": 121, \"y\": 208 }, { \"x\": 124, \"y\": 205 }, { \"x\": 126, \"y\": 202 }, { \"x\": 129, \"y\": 199 }, { \"x\": 132, \"y\": 196 }, { \"x\": 136, \"y\": 191 }, { \"x\": 139, \"y\": 187 }, { \"x\": 142, \"y\": 182 }, { \"x\": 144, \"y\": 179 }, { \"x\": 146, \"y\": 174 }, { \"x\": 148, \"y\": 170 }, { \"x\": 149, \"y\": 168 }, { \"x\": 151, \"y\": 162 }, { \"x\": 152, \"y\": 160 }, { \"x\": 152, \"y\": 157 }, { \"x\": 152, \"y\": 155 }, { \"x\": 152, \"y\": 151 }, { \"x\": 152, \"y\": 149 }, { \"x\": 152, \"y\": 146 }, { \"x\": 149, \"y\": 142 }, { \"x\": 148, \"y\": 139 }, { \"x\": 145, \"y\": 137 }, { \"x\": 141, \"y\": 135 }, { \"x\": 139, \"y\": 135 }, { \"x\": 134, \"y\": 136 }, { \"x\": 130, \"y\": 140 }, { \"x\": 128, \"y\": 142 }, { \"x\": 126, \"y\": 145 }, { \"x\": 122, \"y\": 150 }, { \"x\": 119, \"y\": 158 }, { \"x\": 117, \"y\": 163 }, { \"x\": 115, \"y\": 170 }, { \"x\": 114, \"y\": 175 }, { \"x\": 117, \"y\": 184 }, { \"x\": 120, \"y\": 190 }, { \"x\": 125, \"y\": 199 }, { \"x\": 129, \"y\": 203 }, { \"x\": 133, \"y\": 208 }, { \"x\": 138, \"y\": 213 }, { \"x\": 145, \"y\": 215 }, { \"x\": 155, \"y\": 218 }, { \"x\": 164, \"y\": 219 }, { \"x\": 166, \"y\": 219 }, { \"x\": 177, \"y\": 219 }, { \"x\": 182, \"y\": 218 }, { \"x\": 192, \"y\": 216 }, { \"x\": 196, \"y\": 213 }, { \"x\": 199, \"y\": 212 }, { \"x\": 201, \"y\": 211 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 75, \"y\": 250 }, { \"x\": 75, \"y\": 247 }, { \"x\": 77, \"y\": 244 }, { \"x\": 78, \"y\": 242 }, { \"x\": 79, \"y\": 239 }, { \"x\": 80, \"y\": 237 }, { \"x\": 82, \"y\": 234 }, { \"x\": 82, \"y\": 232 }, { \"x\": 84, \"y\": 229 }, { \"x\": 85, \"y\": 225 }, { \"x\": 87, \"y\": 222 }, { \"x\": 88, \"y\": 219 }, { \"x\": 89, \"y\": 216 }, { \"x\": 91, \"y\": 212 }, { \"x\": 92, \"y\": 208 }, { \"x\": 94, \"y\": 204 }, { \"x\": 95, \"y\": 201 }, { \"x\": 96, \"y\": 196 }, { \"x\": 97, \"y\": 194 }, { \"x\": 98, \"y\": 191 }, { \"x\": 100, \"y\": 185 }, { \"x\": 102, \"y\": 178 }, { \"x\": 104, \"y\": 173 }, { \"x\": 104, \"y\": 171 }, { \"x\": 105, \"y\": 164 }, { \"x\": 106, \"y\": 158 }, { \"x\": 107, \"y\": 156 }, { \"x\": 107, \"y\": 152 }, { \"x\": 108, \"y\": 145 }, { \"x\": 109, \"y\": 141 }, { \"x\": 110, \"y\": 139 }, { \"x\": 112, \"y\": 133 }, { \"x\": 113, \"y\": 131 }, { \"x\": 116, \"y\": 127 }, { \"x\": 117, \"y\": 125 }, { \"x\": 119, \"y\": 122 }, { \"x\": 121, \"y\": 121 }, { \"x\": 123, \"y\": 120 }, { \"x\": 125, \"y\": 122 }, { \"x\": 125, \"y\": 125 }, { \"x\": 127, \"y\": 130 }, { \"x\": 128, \"y\": 133 }, { \"x\": 131, \"y\": 143 }, { \"x\": 136, \"y\": 153 }, { \"x\": 140, \"y\": 163 }, { \"x\": 144, \"y\": 172 }, { \"x\": 145, \"y\": 175 }, { \"x\": 151, \"y\": 189 }, { \"x\": 156, \"y\": 201 }, { \"x\": 161, \"y\": 213 }, { \"x\": 166, \"y\": 225 }, { \"x\": 169, \"y\": 233 }, { \"x\": 171, \"y\": 236 }, { \"x\": 174, \"y\": 243 }, { \"x\": 177, \"y\": 247 }, { \"x\": 178, \"y\": 249 }, { \"x\": 179, \"y\": 251 }, { \"x\": 180, \"y\": 253 }, { \"x\": 180, \"y\": 255 }, { \"x\": 179, \"y\": 257 }, { \"x\": 177, \"y\": 257 }, { \"x\": 174, \"y\": 255 }, { \"x\": 169, \"y\": 250 }, { \"x\": 164, \"y\": 247 }, { \"x\": 160, \"y\": 245 }, { \"x\": 149, \"y\": 238 }, { \"x\": 138, \"y\": 230 }, { \"x\": 127, \"y\": 221 }, { \"x\": 124, \"y\": 220 }, { \"x\": 112, \"y\": 212 }, { \"x\": 110, \"y\": 210 }, { \"x\": 96, \"y\": 201 }, { \"x\": 84, \"y\": 195 }, { \"x\": 74, \"y\": 190 }, { \"x\": 64, \"y\": 182 }, { \"x\": 55, \"y\": 175 }, { \"x\": 51, \"y\": 172 }, { \"x\": 49, \"y\": 170 }, { \"x\": 51, \"y\": 169 }, { \"x\": 56, \"y\": 169 }, { \"x\": 66, \"y\": 169 }, { \"x\": 78, \"y\": 168 }, { \"x\": 92, \"y\": 166 }, { \"x\": 107, \"y\": 164 }, { \"x\": 123, \"y\": 161 }, { \"x\": 140, \"y\": 162 }, { \"x\": 156, \"y\": 162 }, { \"x\": 171, \"y\": 160 }, { \"x\": 173, \"y\": 160 }, { \"x\": 186, \"y\": 160 }, { \"x\": 195, \"y\": 160 }, { \"x\": 198, \"y\": 161 }, { \"x\": 203, \"y\": 163 }, { \"x\": 208, \"y\": 163 }, { \"x\": 206, \"y\": 164 }, { \"x\": 200, \"y\": 167 }, { \"x\": 187, \"y\": 172 }, { \"x\": 174, \"y\": 179 }, { \"x\": 172, \"y\": 181 }, { \"x\": 153, \"y\": 192 }, { \"x\": 137, \"y\": 201 }, { \"x\": 123, \"y\": 211 }, { \"x\": 112, \"y\": 220 }, { \"x\": 99, \"y\": 229 }, { \"x\": 90, \"y\": 237 }, { \"x\": 80, \"y\": 244 }, { \"x\": 73, \"y\": 250 }, { \"x\": 69, \"y\": 254 }, { \"x\": 69, \"y\": 252 }],\n    name: \"other\"\n  }];\n\n  ShapeDetector.prototype.spot = function (points, patternName) {\n\n    if (patternName == null) {\n      patternName = '';\n    }\n\n    var distance, pattern, score;\n    var stroke = new Stroke(points);\n    var bestDistance = +Infinity;\n    var bestPattern = null;\n    var bestScore = 0;\n\n    for (var i = 0; i < this.patterns.length; i++) {\n      pattern = this.patterns[i];\n\n      if (pattern.name.indexOf(patternName) > -1) {\n        distance = stroke.distanceAtBestAngle(pattern);\n        score = 1.0 - distance / _halfDiagonal;\n\n        if (distance < bestDistance && score > this.threshold) {\n          bestDistance = distance;\n          bestPattern = pattern.name;\n          bestScore = score;\n        }\n      }\n    }\n\n    return {\n      pattern: bestPattern,\n      score: bestScore\n    };\n  };\n\n  ShapeDetector.prototype.learn = function (name, points) {\n\n    return this.patterns.push(new Stroke(points, name));\n  };\n\n  return ShapeDetector;\n});\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetWindow = resetWindow;\nvar touch = require('./touch');\nvar ui = require('./ui');\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar timing = require('./timing');\nvar util = require('./util');\nvar sound = require('./sound');\n\nfunction resetWindow() {\n  window.kan = {\n    currentColor: '#2B5E2E',\n    composition: [],\n    compositionInterval: null,\n    compositionTimeout: null,\n    soundTimeouts: [],\n    lastEvent: null,\n    interaction: false,\n    moves: [],\n    playing: false,\n    pinching: false,\n    pinchedGroup: null,\n    pinchedTut: null,\n    pathData: {},\n    shapePath: null,\n    prevAngle: null,\n    sides: [],\n    side: [],\n    corners: [],\n    lastScale: 1,\n    lastRotation: 0,\n    originalPosition: null,\n    tutorialCompletion: {\n      \"fill\": false,\n      \"pinch\": false,\n      \"swipe\": false\n    },\n    inactivityTimeout: null,\n    playPromptTimeout: null,\n    userHasDrawnFirstShape: false,\n    firstTimePlaying: true,\n    shapesSinceTut: 0,\n    refreshCheckInterval: null,\n    sha: null,\n    scheduledOverlay: null,\n    continueCountdownInterval: null,\n    shapeSounds: null\n  };\n}\n\n$(window).on('load', function () {\n  function run() {\n    resetWindow();\n    util.setSha();\n    ui.init();\n    overlays.init();\n    timing.init();\n    sound.init().then(function () {\n      // sound.init() is async because it loads in the sound files\n      touch.init();\n    }).fail(function (e) {\n      console.error('error initting shape sounds:', e);\n      location.reload();\n    });\n  }\n\n  try {\n    run();\n  } catch (e) {\n    console.error(e);\n    setTimeout(function () {\n      // wait 5 seconds then reload\n      location.reload();\n    }, 5 * 1000);\n  }\n});\n\n},{\"./overlays\":10,\"./sound\":13,\"./timing\":14,\"./touch\":15,\"./ui\":17,\"./util\":18,\"./video\":19}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openOverlay = openOverlay;\nexports.resetContinueCountdown = resetContinueCountdown;\nexports.cardNavNext = cardNavNext;\nexports.closeAndResetOverlays = closeAndResetOverlays;\nexports.init = init;\nvar config = require('./../../config');\n\nvar touch = require('./touch');\nvar video = require('./video');\nvar timing = require('./timing');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar hammerCanvas = touch.hammerCanvas;\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar $cardsWrap = $body.find('.overlay.tips .card-wrap');\nvar $cardItems = $cardsWrap.find('article');\nvar cardsCount = $cardItems.length;\nvar $footer = $body.find('.overlay.tips .footer');\n\nvar $sharePhone = $body.find('#phone');\nvar $shareKeypad = $body.find('.keypad');\n\nvar allOverlays = ['intro', 'play-prompt', 'share-prompt', 'continue', 'tips', 'share'];\nvar overlayOpenClasses = allOverlays.map(function (overlay) {\n  return overlay + '-active';\n}).join(' ');\n\nvar overlayActiveClass = 'overlay-active';\n\nfunction openOverlay(overlayName) {\n  // console.log('attempting to open overlay', overlayName);\n  if (window.kan.overlays === false) return;\n  if (allOverlays.includes(overlayName)) {\n    if (window.kan.pinching === true || window.kan.panning === true) {\n      if (overlayName === 'continue') {\n        timing.preventInactivityTimeout();\n      } else {\n        // console.log('scheduling overlay', overlayName);\n        window.kan.scheduledOverlay = overlayName;\n      }\n      return;\n    }\n    closeAndResetOverlays();\n    tutorial.hideContextualTuts();\n    $body.addClass(overlayActiveClass);\n    $body.find('.overlay:not(.tips)').on(tapEvent, function () {\n      closeAndResetOverlays();\n    });\n\n    switch (overlayName) {\n      case 'intro':\n        openIntroOverlay();\n        break;\n      case 'play-prompt':\n        if (util.anyShapesOnCanvas()) {\n          openPlayPromptOverlay();\n        } else {\n          window.kan.playPromptTimeout = setTimeout(function () {\n            openOverlay('play-prompt');\n          }, timing.playPromptDelay / 2);\n        }\n        break;\n      case 'share-prompt':\n        openSharePromptOverlay();\n        break;\n      case 'continue':\n        openContinueOverlay();\n        break;\n      case 'tips':\n        openTipsOverlay();\n        break;\n      case 'share':\n        openShareOverlay();\n        break;\n    }\n  } else {\n    // console.log('unable to open unknown overlay', overlayName);\n  }\n}\n\nfunction openIntroOverlay() {\n  $body.addClass('intro-active');\n}\n\nfunction openPlayPromptOverlay() {\n  $body.addClass('play-prompt-active');\n}\n\nfunction openSharePromptOverlay() {\n  $body.addClass('share-prompt-active');\n}\n\nfunction resetContinueCountdown() {\n  $('.overlay.continue .countdown-num').html(parseInt(timing.continueInactivityDelay / 1000));\n  clearInterval(window.kan.continueCountdownInterval);\n}\n\nfunction openContinueOverlay() {\n  $body.addClass('continue-active');\n\n  resetContinueCountdown();\n  clearTimeout(window.kan.inactivityTimeout);\n  clearTimeout(window.kan.playPromptTimeout);\n\n  window.kan.continueCountdownInterval = setInterval(function () {\n    var $countdownNumWrap = $('.overlay.continue .countdown-num');\n    var count = parseInt($countdownNumWrap.html());\n    if (count > 1) {\n      $countdownNumWrap.html(count - 1);\n    }\n  }, 1000);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    video.enterTutorialMode();\n  }, timing.continueInactivityDelay);\n}\n\nfunction openTipsOverlay() {\n  $body.addClass('tips-active');\n  activateTipsCards();\n}\n\nfunction openShareOverlay() {\n  $body.addClass('share-active');\n}\n\n// card slider navigation\nfunction cardNavNext() {\n  var $old = $body.find('.card-wrap .current');\n  var $new = $old.next().length ? $old.next() : $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  var slide = $new.index();\n  $old.removeClass().addClass('remove');\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(slide + 1, cardsCount);\n  setTimeout(function () {\n    $old.removeClass();\n  }, 600);\n}\n\n// tips card interactions\nfunction cardInteractions() {\n  var timeOfLastInteraction = 0;\n\n  $body.find('.overlay').on(tapEvent, function (e) {\n    var currentTime = Date.now();\n    if (timeOfLastInteraction > currentTime - 250) {\n      return;\n    }\n    timeOfLastInteraction = currentTime;\n\n    if ($(e.target).closest('.card-wrap').length == 1) {\n      // directly on a card, navigate to the next one\n      cardNavNext();\n    } else {\n      // outside elements, close everything and reset\n      closeAndResetOverlays();\n    }\n  });\n}\n\nfunction resetTips() {\n  $cardItems.removeClass();\n  $sharePhone.html('');\n}\n\n// close and reset tips\nfunction closeAndResetOverlays() {\n  $body.removeClass('overlay-active');\n  $body.removeClass(overlayOpenClasses);\n  resetTips();\n}\n\n// deal a fresh stack of cards\nfunction activateTipsCards() {\n  var $new = $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  $cardItems.removeClass();\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(1, cardsCount);\n}\n\n// counting cards\nfunction updateCardCounter(current, total) {\n  $footer.find('.current').html(current);\n  $footer.find('.next').html(total);\n}\n\n// phone inputs\nfunction phoneNumberInputs() {\n  // mask the output\n  $sharePhone.mask('000-000-0000');\n  // get interactions from the keypad\n  $shareKeypad.find('.num').on(tapEvent, function (e) {\n    var phoneNumber = $sharePhone.html().toString() + $(e.target).html().toString();\n    phoneNumber = $sharePhone.masked(phoneNumber);\n    $sharePhone.html(phoneNumber);\n  });\n  // clear the display\n  $shareKeypad.find('.clear').on(tapEvent, function (e) {\n    $sharePhone.html('');\n  });\n  // FIXME: send sms\n  // $shareKeypad.find('.send').on(tapEvent, e => {});\n}\n\n// \"randomly\" place fiddly bits on the cards\nfunction randomCardGraphics() {\n  $body.find('.card-wrap article').each(function (i, el) {\n    $(el).attr('data-bg', i);\n  });\n}\n\nfunction initTips() {\n  cardInteractions();\n}\n\nfunction initShare() {\n  phoneNumberInputs();\n  randomCardGraphics();\n}\n\nfunction init() {\n  initTips();\n  initShare();\n}\n\n},{\"./../../config\":1,\"./timing\":14,\"./touch\":15,\"./tutorial\":16,\"./util\":18,\"./video\":19}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.destroyGroupPops = destroyGroupPops;\nexports.fillInGroupPopsById = fillInGroupPopsById;\nexports.toggleFill = toggleFill;\nexports.cleanUpGroup = cleanUpGroup;\nexports.updatePops = updatePops;\nexports.getOutlineGroup = getOutlineGroup;\nexports.getTruedShape = getTruedShape;\nexports.getCompletedPath = getCompletedPath;\nexports.getShapePrediction = getShapePrediction;\nexports.getIntegerPoint = getIntegerPoint;\nexports.stringifyPoint = stringifyPoint;\nexports.parsePoint = parsePoint;\nexports.getClosestPointFromPathData = getClosestPointFromPathData;\nexports.processShapeData = processShapeData;\nexports.findInteriorCurves = findInteriorCurves;\nexports.getExtendedPath = getExtendedPath;\nexports.getBruteExtendedPath = getBruteExtendedPath;\nexports.getTrimmedPath = getTrimmedPath;\nexports.hitTestGroupBounds = hitTestGroupBounds;\nexports.hitTestBounds = hitTestBounds;\nvar ShapeDetector = require('./lib/shape-detector');\n\nvar config = require('./../../config');\n\nvar util = require('./util');\nvar color = require('./color');\n\nvar cornerThresholdDeg = exports.cornerThresholdDeg = 30;\nvar thresholdDistMultiplier = exports.thresholdDistMultiplier = 0.1;\n\nvar detector = exports.detector = new ShapeDetector(ShapeDetector.defaultShapes);\n\nvar shapeNames = exports.shapeNames = [\"line\", \"circle\", \"square\", \"triangle\", \"other\"];\n\nfunction clearPops() {\n  var pops = util.getAllPops();\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction destroyGroupPops(group) {\n  // console.log('destroying pops');\n  var groupPopsBefore = util.getGroupPops(group);\n  // console.log('pops to be destroyed', groupPopsBefore);\n  if (groupPopsBefore.length > 0) {\n    groupPopsBefore.forEach(function (pop) {\n      return pop.remove();\n    });\n  }\n  var groupPopsAfter = util.getGroupPops(group);\n  // console.log('group pops after', groupPopsAfter);\n}\n\nfunction fillInGroupPopsById(groupId) {\n  var group = paper.project.getItem({\n    className: 'Group',\n    match: function match(el) {\n      return el.id === groupId;\n    }\n  });\n\n  if (!!group && group.children.length > 0) {\n    group.children.forEach(function (groupChild) {\n      if (groupChild.name === 'loop') {\n        toggleFill(groupChild);\n      }\n    });\n  }\n}\n\nfunction toggleFill(item) {\n  var transparent = color.transparent;\n  // console.log('hit');\n  var parent = item.parent;\n\n  // console.log('hit item', item);\n  // console.log('hit parent', parent);\n\n  if (item.data.interior) {\n    // console.log('interior');\n    item.data.transparent = !item.data.transparent;\n\n    if (item.data.transparent) {\n      // console.log('transparent');\n      item.fillColor = transparent;\n      item.strokeColor = transparent;\n    } else {\n      // console.log('not transparent');\n      item.fillColor = parent.data.color;\n      item.strokeColor = parent.data.color;\n    }\n\n    window.kan.moves.push({\n      type: 'fillChange',\n      id: item.id,\n      fill: parent.data.color,\n      transparent: item.data.transparent\n    });\n  } else {\n    // console.log('not interior');\n    // check if item is a pop, because then we'll fill the pop's parent\n    if (!!item.data && item.data.pop === true) {\n      if (!!item.parent) {\n        if (config.pop === true) {\n          fillInGroupPopsById(item.parent.id);\n        }\n      }\n    }\n  }\n}\n\nfunction cleanUpGroup(group) {\n  // console.log('cleaning up group');\n  var acceptableNames = ['mask', 'outer', 'shapePath', 'loop', 'pop'];\n\n  group.children.forEach(function (groupChild) {\n    if (groupChild.name === null || !acceptableNames.includes(groupChild.name) || !groupChild.length > 0) {\n      groupChild.remove();\n    }\n  });\n\n  return group;\n}\n\nfunction updatePops() {\n  var freshGroups = util.getFreshGroups();\n  var popCandidates = util.getPopCandidates();\n  var allPops = util.getAllPops();\n  popCandidates.reverse();\n  // console.log('freshGroups', freshGroups);\n  // console.log('popCandidates', popCandidates);\n  // clearPops();\n\n  freshGroups.forEach(function (freshGroup, i) {\n    // if (i >= 4) return;\n    // console.log('freshGroup', freshGroup);\n\n    var freshOuter = freshGroup._namedChildren.mask[0];\n    freshOuter.bringToFront();\n    // freshOuter.visible = true;\n    // freshOuter.fillColor = 'black';\n    // freshOuter.selected = true;\n    // console.log('freshOuter', freshOuter);\n    // freshOuter.selected = true;\n    popCandidates.forEach(function (otherGroup, j) {\n      var otherGroupOuter = otherGroup._namedChildren.mask[0];\n      if (freshGroup.id !== otherGroup.id) {\n        // console.log('otherGroup', otherGroup);\n        // console.log('otherGroupOuter', otherGroupOuter);\n        // otherGroupOuter.fillColor = 'white';\n        otherGroupOuter.bringToFront();\n        var thisPop = freshOuter.intersect(otherGroupOuter);\n        if (!!thisPop && thisPop.length > 0) {\n          // const popColor = color.getIndexedPopColor(i + j);\n          var popColor = color.getRandomPop();\n          thisPop.fillColor = popColor;\n          thisPop.strokeColor = popColor;\n          thisPop.data.pop = true;\n          thisPop.name = 'pop';\n          thisPop.data.popGroup = freshGroup.id;\n          thisPop.data.intersectingGroup = otherGroup.id;\n          thisPop.visible = true;\n          thisPop.closed = true;\n          thisPop.bringToFront();\n          freshGroup.addChild(thisPop);\n        }\n\n        cleanUpGroup(freshGroup);\n\n        // figure out if this pop intersects any other pops\n        // allPops.forEach((otherPop, k) => {\n        //   console.log('checking other pop', otherPop);\n        //   if (thisPop.id !== otherPop.id && thisPop.intersects(otherPop)) {\n        //     let popIntersection = thisPop.getIntersections(otherPop);\n        //     if (!!popIntersection && popIntersection.length > 0) {\n        //       popIntersection = new Path([popIntersection])\n        //       console.log('popIntersection', popIntersection);\n        //       // const popColor = color.getIndexedPopColor(i + j + k);\n        //       const popColor = color.getRandomPop();\n        //       popIntersection.data.pop = true;\n        //       popIntersection.fillColor = popColor\n        //       popIntersection.strokeColor = popColor;\n        //       popIntersection.visible = true;\n        //       popIntersection.closed = true;\n        //       popIntersection.bringToFront();\n        //     }\n        //   }\n        // });\n      }\n    });\n\n    freshGroup.data.fresh = false;\n  });\n}\n\nfunction getOutlineGroup(truedShape) {\n  // console.log('truedShape', truedShape);\n  var outerPath = new Path();\n  outerPath.name = 'outer';\n  outerPath.visible = true;\n\n  var middlePath = new Path();\n  middlePath.name = 'middle';\n  var sizes = [];\n  var angle = null,\n      lastAngle = null,\n      angleDelta = void 0;\n\n  var firstTop = null,\n      firstBottom = null;\n  var lastTop = null,\n      lastBottom = null;\n\n  if (!(truedShape.length > 0)) return new Group(outerPath, middlePath);\n\n  middlePath.add(truedShape.firstSegment.point);\n\n  for (var i = 0; i < truedShape.length; i += 10) {\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n\n    var size = Math.random() * 9; // This is just random variance\n    sizes.push(size);\n\n    var cumSize = 0;\n    for (var j = 0; j < sizes.length; j++) {\n      cumSize += sizes[j];\n    }\n    var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n    var point = truedShape.getPointAt(i);\n    var normal = truedShape.getNormalAt(i);\n\n    var top = new Point(point.x + normal.x * avgSize, point.y + normal.y * avgSize);\n    var bottom = new Point(point.x - normal.x * avgSize, point.y - normal.y * avgSize);\n\n    // console.log('point', point, 'normal', normal);\n    // console.log('top', top, 'bottom', bottom);\n\n    outerPath.add(top);\n    outerPath.insert(0, bottom);\n    middlePath.add(point);\n\n    lastAngle = angle;\n\n    if (i == 10) {\n      firstTop = top;\n      firstBottom = bottom;\n    } else {\n      lastTop = top;\n      lastBottom = bottom;\n    }\n  }\n\n  if (truedShape.closed === true) {\n    var centerTop = new Point((firstTop.x + lastTop.x) / 2, (firstTop.y + lastTop.y) / 2);\n    var centerBottom = new Point((firstBottom.x + lastBottom.x) / 2, (firstBottom.y + lastBottom.y) / 2);\n    var center = new Point((centerTop.x + centerBottom.x) / 2, (centerTop.y + centerBottom.y) / 2);\n\n    outerPath.add(centerTop);\n    outerPath.insert(0, centerBottom);\n    middlePath.add(center);\n\n    outerPath.add(firstTop);\n    outerPath.insert(0, firstBottom);\n    middlePath.closed = true;\n  }\n\n  outerPath.flatten(50);\n  middlePath.flatten(50);\n  outerPath.simplify();\n  middlePath.simplify();\n\n  outerPath.selected = false;\n  // middlePath.selected = true;\n  outerPath.name = 'outer';\n  middlePath.name = 'middle';\n  var returnGroup = new Group(outerPath, middlePath);\n  return returnGroup;\n}\n\nfunction getTruedShape(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  // console.log('pathClone', pathClone);\n  var completedPath = getCompletedPath(pathClone);\n  // completedPath.reduce();\n\n  // true the path!\n  var truedPath = completedPath;\n  // console.log('truedPath', truedPath);\n\n  truedPath.strokeWidth = pathClone.strokeWidth;\n\n  pathClone.remove();\n  return truedPath;\n}\n\n// extend or trim path if the ends are close\nfunction getCompletedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  pathClone.reduce();\n  pathClone.simplify();\n\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    // trim path if ends are close\n    var trimmedPath = getTrimmedPath(pathClone);\n\n    pathClone.remove();\n\n    return trimmedPath;\n  } else {\n    // extend path to see if an intersection is near\n    var extendedPath = getExtendedPath(pathClone);\n    var _intersections = extendedPath.getIntersections();\n\n    // pathClone.remove();\n\n    if (_intersections.length > 0) {\n      // trim extra extended path\n      var _trimmedPath = getTrimmedPath(extendedPath);\n      extendedPath.remove();\n      return _trimmedPath;\n    } else {\n      // extended path does not intersect, return the original path\n      extendedPath.replaceWith(getBruteExtendedPath(pathClone));\n      if (extendedPath !== null) {\n        var _intersections2 = extendedPath.getIntersections();\n\n        if (_intersections2.length > 0) {\n          var _trimmedPath2 = getTrimmedPath(extendedPath);\n          extendedPath.remove();\n          return _trimmedPath2;\n        }\n\n        if (!!extendedPath && extendedPath.length > 0) {\n          extendedPath.remove();\n        }\n      }\n\n      pathClone.visible = true;\n      return pathClone;\n    }\n  }\n}\n\nfunction getShapePrediction(path) {\n  var prediction = {};\n\n  var shapeJSON = path.exportJSON();\n  var shapeData = processShapeData(shapeJSON);\n  // console.log(JSON.stringify(shapeData));\n  var shapePrediction = detector.spot(shapeData);\n\n  if (shapePrediction.score === 0) {\n    // algorithm doesn't like vertical lines for some reason\n    // if the certainty is 0 it's probably a line\n    prediction.pattern = \"line\";\n    prediction.score = 0.9;\n  } else {\n    if (shapePrediction.score > 0.5) {\n      prediction.pattern = shapePrediction.pattern;\n    } else {\n      prediction.pattern = \"other\";\n    }\n    prediction.score = shapePrediction.score;\n  }\n\n  if (path.closed === true) {\n    var closedShapes = ['triangle', 'square', 'circle'];\n    if (closedShapes.includes(prediction.pattern) === false) {\n      // closed shape should be one of the above, make a random pick\n      prediction.pattern = util.randomPick(closedShapes);\n    }\n  } else if (path.intersects(path) === true) {\n    prediction.pattern = 'other';\n    // const intersectingShapes = ['triangle', 'square', 'circle', 'other'];\n    // if (intersectingShapes.includes(prediction.pattern) === false) {\n    //   prediction.pattern = util.randomPick(intersectingShapes);\n    // }\n  } else {\n    prediction.pattern = 'line'; // lines are the only shape that is not closed and does not intersect\n  }\n\n  // console.log('shape prediction', prediction);\n\n  return prediction;\n}\n\n// floors the coordinates of a point\nfunction getIntegerPoint(point) {\n  return new Point(Math.floor(point.x), Math.floor(point.y));\n}\n\nfunction stringifyPoint(point) {\n  return Math.floor(point.x) + ',' + Math.floor(point.y);\n}\n\nfunction parsePoint(pointStr) {\n  var split = pointStr.split(',').map(function (num) {\n    return Math.floor(num);\n  });\n\n  if (split.length >= 2) {\n    return new Point(split[0], split[1]);\n  }\n\n  return null;\n}\n\nfunction getClosestPointFromPathData(point, pathData) {\n  var leastDistance = void 0,\n      closestPoint = void 0;\n\n  Base.each(pathData, function (datum, i) {\n    var distance = point.getDistance(datum.point);\n    if (!leastDistance || distance < leastDistance) {\n      leastDistance = distance;\n      closestPoint = datum.point;\n    }\n  });\n\n  return closestPoint || point;\n}\n\nfunction processShapeData(json) {\n  var returnShape = [];\n  var jsonObj = JSON.parse(json)[1]; // zero index is stringified type (e.g. \"Path\")\n\n  if ('segments' in jsonObj) {\n    var segments = jsonObj.segments;\n    Base.each(segments, function (segment, i) {\n      if (segment.length === 3) {\n        var positionInfo = segment[0]; // indexes 1 and 2 are superfluous matrix details\n        returnShape.push({\n          x: positionInfo[0],\n          y: positionInfo[1]\n        });\n      } else {\n        returnShape.push({\n          x: segment[0],\n          y: segment[1]\n        });\n      };\n    });\n  }\n  return returnShape;\n}\n\nfunction findInteriorCurves(path) {\n  var transparent = color.transparent;\n\n  var interiorCurves = [];\n\n  var pathClone = path.clone();\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    var dividedPath = pathClone.resolveCrossings();\n    // console.log(dividedPath);\n\n    if (dividedPath.className === 'CompoundPath') {\n      Base.each(dividedPath.children, function (child, i) {\n        if (child.length > 0 && child.closed) {\n          var enclosedLoop = child.clone();\n          if (pathClone.closed) {\n            enclosedLoop.fillColor = pathClone.strokeColor;\n            enclosedLoop.data.interior = true;\n            enclosedLoop.data.transparent = false;\n          } else {\n            enclosedLoop.fillColor = transparent;\n            enclosedLoop.data.transparent = true;\n          }\n          enclosedLoop.data.interior = true;\n          enclosedLoop.visible = true;\n          enclosedLoop.closed = true;\n          interiorCurves.push(enclosedLoop);\n        }\n      });\n    } else {\n      if (pathClone.closed) {\n        var enclosedLoop = pathClone.clone();\n        enclosedLoop.visible = true;\n        enclosedLoop.fillColor = pathClone.strokeColor;\n        enclosedLoop.data.interior = true;\n        enclosedLoop.data.transparent = false;\n        interiorCurves.push(enclosedLoop);\n      }\n    }\n  } else {\n    if (pathClone.closed) {\n      var _enclosedLoop = pathClone.clone();\n      _enclosedLoop.visible = true;\n      _enclosedLoop.fillColor = pathClone.strokeColor;\n      _enclosedLoop.data.interior = true;\n      _enclosedLoop.data.transparent = false;\n      interiorCurves.push(_enclosedLoop);\n    }\n  }\n\n  return interiorCurves;\n}\n\nfunction getExtendedPath(path) {\n  var bruteForce = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n\n  var firstSegment = extendedPath.firstSegment;\n  var nextSegment = firstSegment.next;\n  var startAngle = Math.atan2(nextSegment.point.y - firstSegment.point.y, nextSegment.point.x - firstSegment.point.x); // rad\n  var inverseStartAngle = startAngle + Math.PI;\n  var extendedStartPoint = new Point(firstSegment.point.x + Math.cos(inverseStartAngle) * thresholdDist / 2, firstSegment.point.y + Math.sin(inverseStartAngle) * thresholdDist / 2);\n  extendedPath.insert(0, extendedStartPoint);\n\n  var lastSegment = extendedPath.lastSegment;\n  var penSegment = lastSegment.previous; // penultimate\n  var endAngle = Math.atan2(lastSegment.point.y - penSegment.point.y, lastSegment.point.x - penSegment.point.x); // rad\n  var extendedEndPoint = new Point(lastSegment.point.x + Math.cos(endAngle) * thresholdDist / 2, lastSegment.point.y + Math.sin(endAngle) * thresholdDist / 2);\n  extendedPath.add(extendedEndPoint);\n\n  // extendedPath.visible = true;\n\n  return extendedPath;\n}\n\nfunction getBruteExtendedPath(path) {\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n  var firstPoint = extendedPath.firstSegment.point;\n  var lastPoint = extendedPath.lastSegment.point;\n\n  if (firstPoint.getDistance(lastPoint) < thresholdDist) {\n    extendedPath.insert(0, lastPoint);\n    extendedPath.add(firstPoint);\n    extendedPath.closed = true;\n    extendedPath.unite();\n    var crossings = extendedPath.resolveCrossings();\n    if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n      (function () {\n        var maxArea = 0,\n            maxChild = null;\n        crossings.children.forEach(function (child) {\n          if (child.area > maxArea) {\n            maxChild = child;\n            maxArea = child.area;\n          }\n        });\n\n        extendedPath = maxChild;\n      })();\n    }\n  }\n\n  return extendedPath;\n}\n\nfunction getTrimmedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n\n  var firstPoint = pathClone.firstSegment.point;\n  var lastPoint = pathClone.lastSegment.point;\n  var thresholdDist = thresholdDistMultiplier * pathClone.length;\n\n  var intersections = pathClone.getIntersections();\n  intersections.forEach(function (intersection, i) {\n    if (intersection.offset === 0) {\n      intersections.splice(i, 1);\n    }\n  });\n\n  // console.log('intersections', intersections);\n\n  if (intersections.length == 1) {\n    for (var i = 0; i < intersections.length; i++) {\n      var intersectionPoint = intersections[i].point;\n\n      // if the average of the distance between the first and last points and the intersection point is within the threshold, trim\n      if (firstPoint.getDistance(intersectionPoint) + lastPoint.getDistance(intersectionPoint) < 2 * thresholdDist) {\n        // console.log('trimming path');\n        var dividedPath = pathClone.clone(); // resolve crossings seems to modify the path it was passed, so make an extra clone to be safe\n        dividedPath.visible = false;\n        var pathCrossings = dividedPath.resolveCrossings();\n\n        if (pathCrossings.className === 'CompoundPath' && pathCrossings.children.length > 0) {\n          for (var j = 0; j < pathCrossings.children.length; j++) {\n            var child = pathCrossings.children[j];\n            if (child.closed) {\n              // child.selected = true;\n              dividedPath = dividedPath.subtract(child);\n            }\n          }\n        }\n\n        // dividedPath.selected = true;\n\n        var trimmedPath = pathClone.subtract(dividedPath);\n        if (trimmedPath.length === 0) return pathClone;\n        if (trimmedPath.className === 'CompoundPath' && trimmedPath.children.length > 0) {\n          var _ret2 = function () {\n            var closedChildren = [];\n            trimmedPath.children.forEach(function (child, i) {\n              if (child.length > 0 && child.closed) {\n                var childClone = child.clone();\n                childClone.visible = false;\n                closedChildren.push(childClone);\n              }\n            });\n\n            if (closedChildren.length > 0) {\n              if (closedChildren.length > 1) {\n                // for some reason there are more than one closed children, merge them\n                var accumulator = closedChildren[0];\n\n                for (var _j = 1; _j < closedChildren.length; _j++) {\n                  accumulator = accumulator.unite(closedChildren[_j]);\n                }\n\n                if (accumulator.length > 0 && accumulator.className === 'Path') {\n                  // console.log('trimmed accumulator', accumulator);\n                  var newPath = new Path();\n                  newPath.copyContent(accumulator);\n                  newPath.copyAttributes(pathClone);\n                  accumulator.remove();\n                  pathClone.remove();\n                  dividedPath.remove();\n                  trimmedPath.remove();\n                  return {\n                    v: newPath\n                  };\n                }\n              }\n\n              pathClone.remove();\n              dividedPath.remove();\n              trimmedPath.remove();\n              // console.log('trimmed closedChildren[0]', closedChildren[0]);\n              return {\n                v: closedChildren[0]\n              };\n            }\n          }();\n\n          if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n        }\n\n        // console.log('trimmed path return', trimmedPath);\n        // console.log('path clone', pathClone);\n        // console.log('dividedPath', dividedPath);\n        pathClone.remove();\n        dividedPath.remove();\n        return trimmedPath;\n      }\n    }\n\n    // no close intersection were found so nothing can be trimmed\n    return pathClone;\n  } else {\n    return path;\n  }\n}\n\nfunction hitTestGroupBounds(point) {\n  var groups = util.getVisibleGroups();\n  return hitTestBounds(point, groups);\n}\n\nfunction hitTestBounds(point, children) {\n  if (!point) return null;\n\n  for (var i = children.length - 1; i >= 0; i--) {\n    var child = children[i];\n    var bounds = child.strokeBounds;\n    if (point.isInside(child.strokeBounds)) {\n      return child;\n    }\n  }\n\n  return null;\n}\n\n},{\"./../../config\":1,\"./color\":7,\"./lib/shape-detector\":8,\"./util\":18}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.record = record;\nvar config = require('./../../config');\n\nvar RecordRTC = require('recordrtc');\n\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar drawCanvas = document.getElementById(config.canvasId);\nvar canvasRecorder = RecordRTC(drawCanvas, {\n  type: 'canvas'\n});\n\nfunction record() {\n  var rec = new Recorder(Howler.masterGain, {\n    workerPath: '/js/lib/recorderWorker.js'\n  });\n\n  canvasRecorder.startRecording();\n  rec.record();\n\n  sound.asyncPlayCompositionOnce().then(function () {\n    rec.stop();\n    rec.exportWAV(function (blob) {\n      download(blob, 'blob.wav');\n    });\n    canvasRecorder.stopRecording(function () {\n      var blob = canvasRecorder.getBlob();\n      download(blob, 'blob.webm');\n    });\n  }).error(function (e) {\n    rec.stop();\n    rec.exportWAV(function (blob) {\n      download(blob, 'blob.wav');\n    });\n    canvasRecorder.stopRecording(function () {\n      var blob = canvasRecorder.getBlob();\n      download(blob, 'blob.webm');\n    });\n  });\n}\n\n},{\"./../../config\":1,\"./sound\":13,\"./ui\":17,\"recordrtc\":6}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.init = init;\nexports.reinitShapeSounds = reinitShapeSounds;\nexports.getShapeSoundObj = getShapeSoundObj;\nexports.startPlaying = startPlaying;\nexports.stopPlaying = stopPlaying;\nexports.asyncInitShapeSounds = asyncInitShapeSounds;\nexports.formatShapeSoundData = formatShapeSoundData;\nexports.quantizeLength = quantizeLength;\nexports.quantizePosition = quantizePosition;\nexports.removeShapeFromComposition = removeShapeFromComposition;\nexports.clearSoundTimeouts = clearSoundTimeouts;\nexports.startComposition = startComposition;\nexports.asyncPlayCompositionMultipleTimes = asyncPlayCompositionMultipleTimes;\nexports.asyncPlayCompositionOnce = asyncPlayCompositionOnce;\nexports.stopComposition = stopComposition;\nexports.getTrimmedCompositionObj = getTrimmedCompositionObj;\nrequire('howler');\nvar Promise = require(\"bluebird\");\n\nvar ui = require('./ui');\nvar shape = require('./shape');\nvar color = require('./color');\nvar overlays = require('./overlays');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar measures = 4;\nvar bpm = 120;\nvar beatLength = 60 / bpm * 1000; // ms\nvar measureLength = beatLength * 4;\nvar compositionLength = exports.compositionLength = measureLength * measures;\n\nvar playingClass = exports.playingClass = 'playing';\nvar playEnabledClass = exports.playEnabledClass = 'play-enabled';\n\nfunction init() {\n  return asyncInitShapeSounds();\n}\n\nfunction reinitShapeSounds() {\n  return asyncInitShapeSounds();\n}\n\nfunction getShapeSoundObj(path) {\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var shapeSounds = window.kan.shapeSounds || initShapeSounds();\n  // alert(JSON.stringify(window.kan.shapeSounds));\n  // console.log(JSON.stringify(window.kan.shapeSounds));\n\n  var shapePrediction = shape.getShapePrediction(path);\n  var colorName = color.getPathColorName(path);\n  if (colorName === null) colorName = 'black'; // just in case\n\n  var quantizedSoundStartTime = quantizeLength(path.bounds.x / viewWidth * compositionLength); // ms\n  var quantizedSoundDuration = quantizeLength(path.bounds.width / viewWidth * compositionLength); // ms\n\n  var soundObj = {};\n  soundObj.sound = shapeSounds[shapePrediction.pattern];\n  soundObj.startTime = quantizedSoundStartTime;\n  soundObj.duration = quantizedSoundDuration;\n  soundObj.pathId = path.id;\n  soundObj.spriteName = colorName;\n  soundObj.groupId = path.parent.id;\n  soundObj.play = function () {\n    return new Promise(function (resolve, reject) {\n      soundObj.sound.play(soundObj.spriteName);\n      soundObj.sound.on('end', function () {\n        resolve('Group ' + soundObj.groupId + ' done playing sound');\n      });\n      soundObj.sound.on('loaderror', function () {\n        reject('Group ' + soundObj.groupId + ' failed to load sound');\n      });\n    });\n  };\n\n  return soundObj;\n}\n\nfunction startPlaying() {\n  // console.log('first time', window.kan.firstTimePlaying);\n  if ($body.hasClass(playEnabledClass)) {\n    $body.addClass(playingClass);\n\n    Howler.mute(false);\n\n    window.kan.playing = true;\n\n    if (window.kan.firstTimePlaying === true) {\n      window.kan.firstTimePlaying = false;\n      startComposition(window.kan.composition, false);\n    } else {\n      startComposition(window.kan.composition, true);\n    }\n  } else {\n    window.kan.playing = false;\n    $body.removeClass(playingClass);\n  }\n}\n\nfunction stopPlaying() {\n  var mute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!!mute) {\n    Howler.mute(true);\n  }\n\n  window.kan.playing = false;\n  $body.removeClass(playingClass);\n\n  stopComposition();\n}\n\nfunction asyncGetShapeSoundFromShapeName(shapeName) {\n  var shapeSoundJSONPath = './audio/shapes/' + shapeName + '/' + shapeName + '.json';\n  return $.getJSON(shapeSoundJSONPath).then(function (resp) {\n    var shapeSoundData = formatShapeSoundData(shapeName, resp);\n    var sound = new Howl(shapeSoundData);\n    return {\n      shapeName: shapeName,\n      sound: sound\n    };\n  });\n}\n\nfunction asyncInitShapeSounds() {\n  var returnSounds = {};\n  var extensions = ['ogg', 'm4a', 'mp3', 'ac3'];\n\n  var shapeNames = shape.shapeNames;\n  var promises = [];\n  Base.each(shapeNames, function (shapeName) {\n    promises.push(asyncGetShapeSoundFromShapeName(shapeName));\n  });\n\n  return $.when.apply($, promises).done(function () {\n    var returnSounds = {};\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      returnSounds[arg.shapeName] = arg.sound;\n    }\n\n    window.kan.shapeSounds = returnSounds;\n    return returnSounds;\n  });\n}\n\nfunction formatShapeSoundData(shapeName, data) {\n  var returnData = {};\n\n  returnData.src = data.urls.map(function (url) {\n    return './audio/shapes/' + shapeName + '/' + url;\n  });\n  returnData.sprite = data.sprite;\n  returnData.html5 = false;\n  returnData.loop = false;\n\n  return returnData;\n}\n\nfunction quantizeLength(duration) {\n  var smallestDuration = 60 / bpm;\n  var returnDuration = Math.floor(duration / smallestDuration) * smallestDuration;\n\n  if (returnDuration > 0) {\n    return returnDuration;\n  } else {\n    // always return something greater than zero\n    return smallestDuration;\n  }\n}\n\nfunction quantizePosition(position, viewWidth) {\n  var smallestInterval = viewWidth / (4 * measures);\n  return returnPosition = Math.floor(position / smallestInterval) * smallestInterval;\n}\n\nfunction asyncPlayShape(shape) {\n  return new Promise(function (resolve, reject) {\n    Promise.all([asyncPlayShapeSound(shape), asyncPlayShapeAnimation(shape)]).then(function () {\n      resolve('Group ' + shape.groupId + ' fully done playing');\n    }).error(function (e) {\n      reject('Group ' + shape.groupId + ' errored while playing: ' + e);\n    });\n  });\n}\n\nfunction asyncPlayShapeSound(shape) {\n  return new Promise(function (resolve, reject) {\n    try {\n      // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n      shape.play().then(function (res) {\n        resolve(res);\n      }).catch(function (e) {\n        reject(e);\n      });\n    } catch (e) {\n      reject('Error playing shape sound: ' + e);\n    }\n  });\n}\n\nfunction asyncPlayShapeAnimation(shape) {\n  return new Promise(function (resolve, reject) {\n    var item = paper.project.getItem({\n      className: 'Path',\n      match: function match(el) {\n        return el.id === shape.pathId;\n      }\n    });\n    if (!!item) {\n      (function () {\n        var group = item.parent;\n        group.data.animating = true;\n        var totalDuration = measureLength / 2;\n        group.animate([{\n          properties: {\n            scale: 1,\n            rotate: -5\n          },\n          settings: {\n            duration: totalDuration / 4,\n            easing: \"easeInOut\"\n          }\n        }, {\n          properties: {\n            scale: 1.15,\n            rotate: 5\n          },\n          settings: {\n            duration: totalDuration / 2,\n            easing: \"easeInOut\"\n          }\n        }, {\n          properties: {\n            scale: 1,\n            rotate: 0\n          },\n          settings: {\n            duration: totalDuration / 4,\n            easing: \"easeInOut\",\n            complete: function complete() {\n              this.data.animating = false;\n              resolve('Group ' + group.id + ' done animating');\n              // console.log('animation step 3')\n            }\n          }\n        }]);\n      })();\n    } else {\n      reject('Item not specified. Could not animate');\n    }\n  });\n}\n\nfunction removeShapeFromComposition(shapeGroup) {\n  var _loop = function _loop(i) {\n    var sound = window.kan.composition[i];\n\n    if ('groupId' in sound) {\n      if (sound.groupId === shapeGroup.id) {\n        window.kan.composition.splice(i, 1);\n        return {\n          v: void 0\n        };\n      }\n    } else if ('pathId' in sound) {\n      var item = getItems({\n        match: function match(el) {\n          return el.id === sound.pathId;\n        }\n      });\n      if (item.length > 0) {\n        if (!!item.parent && item.parent.className === 'Group' && item.parent.id === shapeGroup.id) {\n          window.kan.composition.splice(i, 1);\n          return {\n            v: void 0\n          };\n        }\n      }\n    }\n  };\n\n  for (var i = 0; i < window.kan.composition.length; i++) {\n    var _ret2 = _loop(i);\n\n    if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n  }\n}\n\nfunction clearSoundTimeouts() {\n  if (window.kan.soundTimeouts.length > 0) {\n    window.kan.soundTimeouts.forEach(function (soundTimeout) {\n      clearTimeout(soundTimeout);\n    });\n  }\n\n  window.kan.soundTimeouts = [];\n}\n\nfunction startComposition(composition) {\n  var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  stopComposition();\n  tutorial.hideContextualTuts();\n\n  clearTimeout(window.kan.playPromptTimeout);\n\n  var iterations = 0;\n  playCompositionFirstTime();\n\n  function playCompositionFirstTime() {\n    clearSoundTimeouts();\n    // console.log('playing composition first time');\n    var trimmedCompositionObj = getTrimmedCompositionObj(composition);\n\n    Base.each(trimmedCompositionObj.composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          // console.log('not playing, returning');\n          return;\n        }\n\n        if (shape.spriteName === null) {\n          // console.log('%cshape is null', 'color:red', shape);\n          return;\n        }\n\n        asyncPlayShape(shape).then(function (res) {\n          console.log(res);\n        }).error(function (e) {\n          console.log('Error playing shape', e);\n        });\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n\n    iterations++;\n    window.kan.compositionTimeout = setTimeout(repeatComposition, compositionLength - trimmedCompositionObj.startTime);\n  }\n\n  function playCompositionOnce() {\n    clearSoundTimeouts();\n    // console.log('repeat');\n    Base.each(composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          // console.log('not playing, returing');\n          return;\n        }\n\n        // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n        asyncPlayShape(shape).then(function (res) {\n          console.log(res);\n        }).error(function (e) {\n          console.log('Error playing shape', e);\n        });\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n    iterations++;\n  }\n\n  function repeatComposition() {\n    if (loop === true) {\n      playCompositionOnce();\n      window.kan.compositionInterval = setInterval(playCompositionOnce, compositionLength);\n    } else {\n      if (iterations < 2) {\n        playCompositionOnce();\n        setTimeout(repeatComposition, compositionLength);\n      } else {\n        stopPlaying();\n        overlays.openOverlay('share-prompt');\n      }\n    }\n  }\n}\n\nfunction asyncPlayCompositionMultipleTimes() {\n  var repeats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n  return new Promise(function (resolve, reject) {\n    var promisedRepeats = [];\n\n    for (var i = 0; i < repeats; i++) {\n      promisedRepeats.push(asyncPlayCompositionOnce());\n    }\n\n    Promise.each(promisedRepeats, function () {\n      console.log('repeat');\n    }).then(function () {\n      resolve('Repeats done');\n    }).error(function (e) {\n      reject(e);\n    });\n  });\n}\n\nfunction asyncPlayCompositionOnce() {\n  return new Promise(function (resolve, reject) {\n    var composition = window.kan.composition;\n    var startTime = new Date().getTime();\n    clearSoundTimeouts();\n\n    var shapePromises = [];\n\n    Base.each(composition, function (shape, i) {\n      shapePromises.push(asyncPlayShapeWithDelay(shape));\n    });\n\n    Promise.all(shapePromises).then(function (res) {\n      var endTime = new Date().getTime();\n      var playTime = endTime - startTime;\n\n      // wait for composition to be fully done before repeating (play is naturally truncated when the last shape finishes playing)\n      if (playTime < compositionLength) {\n        return Promise.delay(compositionLength - playTime).then(function () {\n          resolve('Composition fully done, after a wait');\n        });\n      } else {\n        resolve('Composition fully done, with no wait');\n      }\n    }).error(function (e) {\n      reject(e);\n    });\n  });\n}\n\nfunction asyncPlayShapeWithDelay(shape) {\n  return new Promise(function (resolve, reject) {\n    var soundTimeout = setTimeout(function () {\n      // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n      asyncPlayShape(shape).then(function (res) {\n        resolve(res);\n      }).error(function (e) {\n        reject('Error playing shape with delay: ' + e);\n      });\n    }, shape.startTime);\n    window.kan.soundTimeouts.push(soundTimeout);\n  });\n}\n\nfunction stopComposition() {\n  clearInterval(window.kan.compositionInterval);\n  clearTimeout(window.kan.compositionTimeout);\n  clearSoundTimeouts();\n}\n\nfunction getTrimmedCompositionObj(composition) {\n  var firstTime = 0;\n  var trimmedComposition = [];\n  var startTime = getCompositionStartTime(composition);\n\n  composition.forEach(function (sound) {\n    var modifiedSound = util.shallowCopy(sound);\n    modifiedSound.startTime = sound.startTime - startTime;\n    if (modifiedSound.startTime < 0) modifiedSound.startTime = 0; // this shouldn't happen\n    trimmedComposition.push(modifiedSound);\n  });\n\n  return {\n    composition: trimmedComposition,\n    startTime: startTime\n  };\n}\n\nfunction getCompositionStartTime(composition) {\n  var startTime = compositionLength;\n\n  composition.forEach(function (sound) {\n    // console.log(sound);\n    // console.log(sound.startTime)\n    if ('startTime' in sound && sound.startTime < startTime) {\n      startTime = sound.startTime;\n    }\n  });\n\n  // console.log('start time', startTime);\n\n  if (startTime !== compositionLength) {\n    return startTime;\n  } else {\n    return 0;\n  }\n}\n\n},{\"./color\":7,\"./overlays\":10,\"./shape\":11,\"./tutorial\":16,\"./ui\":17,\"./util\":18,\"bluebird\":2,\"howler\":4}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.preventInactivityTimeout = preventInactivityTimeout;\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar drawInactivityDelay = exports.drawInactivityDelay = 40 * 1000; // ms\nvar continueInactivityDelay = exports.continueInactivityDelay = 30 * 1000; // ms\nvar playPromptDelay = exports.playPromptDelay = 60 * 1000; // ms;\nvar inputDelay = exports.inputDelay = 100; // ms\nvar refreshCheckDelay = exports.refreshCheckDelay = 60 * 1000; // ms\nvar overlayDelay = exports.overlayDelay = 1000; // ms\n\nfunction init() {\n  if (window.location.hash.length > 0 && window.location.hash == '#dev') {\n    window.kan.overlays = false;\n    video.pauseVideo();\n    video.exitTutorialMode();\n  } else {\n    video.enterTutorialMode();\n  }\n}\n\nfunction preventInactivityTimeout() {\n  console.log('prevent timeout: ' + util.getTime());\n  // overlays.closeAndResetOverlays();\n\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    overlays.openOverlay('continue');\n  }, drawInactivityDelay);\n}\n\n},{\"./overlays\":10,\"./util\":18,\"./video\":19}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nrequire('hammerjs');\n\nvar config = require('./../../config');\nvar sound = require('./sound');\nvar color = require('./color');\nvar shape = require('./shape');\nvar util = require('./util');\nvar tutorial = require('./tutorial');\nvar timing = require('./timing');\nvar overlays = require('./overlays');\nvar ui = require('./ui');\n\nvar $body = $('body');\n\nvar hitOptions = {\n  segments: false,\n  stroke: true,\n  fill: true,\n  tolerance: 5\n};\n\nvar minShapeSize = 100;\nvar maxShapeLength = 5000;\nvar maxScaleFactor = 0.8;\n\nvar outerPath = void 0;\nvar sizes = [];\nvar size = void 0;\nvar cumSize = void 0;\nvar prevPoint = void 0;\n\nvar hammerTips = exports.hammerTips = void 0;\nvar hammerCanvas = exports.hammerCanvas = void 0;\n\nfunction init() {\n  exports.hammerTips = hammerTips = new Hammer.Manager(ui.tipsOverlay);\n  hammerTips.add(new Hammer.Swipe({ direction: Hammer.DIRECTION_ALL }));\n  hammerTips.on('swipe', overlays.cardNavNext);\n\n  exports.hammerCanvas = hammerCanvas = new Hammer.Manager(ui.drawCanvas);\n  hammerCanvas.add(new Hammer.Tap({ event: 'doubletap', taps: 2, interval: 400, time: 150, posThreshold: 50 }));\n  hammerCanvas.add(new Hammer.Tap({ event: 'singletap' }));\n  hammerCanvas.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL }));\n  hammerCanvas.add(new Hammer.Pinch());\n\n  hammerCanvas.get('doubletap').recognizeWith('singletap');\n  // hammerCanvas.get('singletap').requireFailure('doubletap');\n  hammerCanvas.get('pan').requireFailure('pinch');\n  hammerCanvas.get('pinch').requireFailure('pan');\n\n  // hammerCanvas.on('singletap', singleTap);\n  hammerCanvas.on('doubletap', doubleTap);\n\n  hammerCanvas.on('panstart', panStart);\n  hammerCanvas.on('panmove', panMove);\n  hammerCanvas.on('panend', panEnd);\n  // hammerCanvas.on('pancancel', panCancel);\n\n  hammerCanvas.on('pinchstart', pinchStart);\n  hammerCanvas.on('pinchmove', pinchMove);\n  hammerCanvas.on('pinchend', pinchEnd);\n  // hammerCanvas.on('pinchcancel', pinchCancel);\n}\n\nfunction enablePanAndPinchEvents() {\n  enablePanEvents();\n  enablePinchEvents();\n}\n\nfunction enableTapEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n  hammerCanvas.get('singletap').set({ enable: enable });\n  hammerCanvas.get('doubletap').set({ enable: enable });\n}\n\nfunction disableTapEvents() {\n  enableTapEvents(false);\n}\n\nfunction enablePanEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pan').set({ enable: enable });\n  // hammerCanvas.get('panstart').set({enable: enable});\n  // hammerCanvas.get('panmove').set({enable: enable});\n  // hammerCanvas.get('panend').set({enable: enable});\n}\n\nfunction disablePanEvents() {\n  enablePanEvents(false);\n}\n\nfunction enablePinchEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pinch').set({ enable: enable });\n  // hammerCanvas.get('pinchstart').set({enable: enable});\n  // hammerCanvas.get('pinchmove').set({enable: enable});\n  // hammerCanvas.get('pinchend').set({enable: enable});\n}\n\nfunction disablePinchEvents() {\n  enablePinchEvents(false);\n}\n\nfunction singleTap(event) {\n  // console.log(event.target);\n  // event.preventDefault();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  tutorial.hideContextualTuts();\n  // $(event.target).click();\n\n  // sound.stopPlaying();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  // console.log(event);\n  // tutorial.hideContextualTuts();\n  //\n  // sound.stopPlaying();\n  //\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (hitResult) {\n    var item = hitResult.item;\n    // item.selected = !item.selected;\n    console.log(item);\n  }\n}\n\nfunction doubleTap(event) {\n  event.preventDefault();\n  // console.log('doubletap');\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  if (hitResult) {\n    shape.toggleFill(hitResult.item);\n    tutorial.hideContextualTutByName('fill');\n  } else {\n    window.kan.pinchedGroup = null;\n    // console.log('hit no item');\n  }\n}\n\nfunction panStart(event) {\n  // console.log(event);\n  // console.log('panstart');\n  // paper.project.activeLayer.removeChildren(); // REMOVE\n  // event.preventDefault();\n  timing.preventInactivityTimeout();\n\n  if (!eventTargetIsOnCanvas(event)) {\n    window.kan.panning = false;\n    // check if tips modal is up\n    if ($body.hasClass('overlay-active tips-active')) {\n      // if so, go to next tip card\n      overlays.cardNavNext();\n    }\n    event.srcEvent.stopPropagation();\n    return;\n  }\n\n  window.kan.panning = true;\n  tutorial.hideContextualTuts();\n\n  hammerCanvas.off('panstart');\n  // hammerCanvas.get('pan').set({enable: false});\n  disablePinchEvents();\n  disableTapEvents();\n\n  // ignore other touch inputs\n  // if (window.kan.pinching) return;\n  // if (!(event.changedPointers && event.changedPointers.length > 0)) return;\n  // if (event.changedPointers.length > 1) {\n  //   console.log('event.changedPointers > 1');\n  // }\n\n  sound.stopPlaying();\n\n  window.kan.prevAngle = Math.atan2(event.velocityY, event.velocityX);\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  outerPath = new Path();\n  outerPath.fillColor = window.kan.currentColor;\n  // outerPath.fillColor = new Color(0, 0.5);\n\n  sizes = [];\n\n  var shapePath = new Path({\n    strokeColor: window.kan.currentColor,\n    name: 'shapePath',\n    strokeWidth: 5,\n    visible: false,\n    strokeCap: 'round'\n  });\n\n  shapePath.add(point);\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    first: true\n  };\n\n  window.kan.shapePath = shapePath;\n}\n\nfunction panMove(event) {\n  // console.log('panmove');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  // don't let the user draw past the max length\n  if (window.kan.shapePath.length <= maxShapeLength) {\n    var pointer = event.center;\n    var point = new Point(pointer.x, pointer.y);\n\n    var angle = Math.atan2(event.velocityY, event.velocityX);\n    var prevAngle = window.kan.prevAngle;\n    var angleDelta = util.angleDelta(angle, prevAngle);\n    window.kan.prevAngle = angle;\n\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n    if (sizes.length > 0) {\n      var dist = prevPoint.getDistance(point);\n\n      // These are based on acceleration\n      size = Math.random() * 10; // This is just random variance\n\n      cumSize = 0;\n      for (var j = 0; j < sizes.length; j++) {\n        cumSize += sizes[j];\n      }\n      // const avgSize = ((cumSize / sizes.length) + size) / 2;\n      var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n      var halfPointX = (point.x + prevPoint.x) / 2;\n      var halfPointY = (point.y + prevPoint.y) / 2;\n      var halfPoint = new Point(halfPointX, halfPointY);\n\n      var topX = halfPoint.x + Math.cos(angle - Math.PI / 2) * avgSize;\n      var topY = halfPoint.y + Math.sin(angle - Math.PI / 2) * avgSize;\n      var top = new Point(topX, topY);\n\n      var bottomX = halfPoint.x + Math.cos(angle + Math.PI / 2) * avgSize;\n      var bottomY = halfPoint.y + Math.sin(angle + Math.PI / 2) * avgSize;\n      var bottom = new Point(bottomX, bottomY);\n\n      outerPath.add(top);\n      outerPath.insert(0, bottom);\n      outerPath.smooth();\n    } else {\n      size = 5;\n    }\n\n    sizes.push(size);\n    prevPoint = point;\n\n    window.kan.pathData[shape.stringifyPoint(point)] = {\n      point: point,\n      speed: Math.abs(event.overallVelocity),\n      angle: angle\n    };\n\n    window.kan.shapePath.add(point);\n  } else {\n    window.kan.shapePath.data.tooLong = true;\n  }\n\n  paper.view.draw();\n}\n\nfunction panEnd(event) {\n  // console.log('panend');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  var transparent = color.transparent;\n  var colorName = color.getColorName(window.kan.currentColor);\n\n  var move = { type: 'newGroup' };\n\n  var shapePath = window.kan.shapePath;\n\n  if (shapePath.length <= maxShapeLength) {\n    shapePath.add(point);\n  }\n  outerPath.visible = false;\n\n  if (shapePath.length < minShapeSize || shapePath.data && shapePath.data.tooLong === true) {\n    // console.log('path is too short');\n    shapePath.remove();\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    window.kan.panning = false;\n    return;\n  }\n\n  var visibleGroups = util.getVisibleGroups();\n  if (visibleGroups.length >= config.maxShapes) {\n    // too many shapes on canvas, remove first shape\n    // TODO: place on moves stack so that they can be restored with an undo\n    var firstGroup = visibleGroups[0];\n    shape.destroyGroupPops(firstGroup);\n    sound.removeShapeFromComposition(firstGroup);\n    move.removedGroup = firstGroup;\n    // firstGroup.remove();\n    firstGroup.visible = false;\n  }\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    last: true\n  };\n\n  var group = new Group();\n\n  var truedShape = shape.getTruedShape(shapePath);\n\n  // group.data.color = truedShape.strokeColor;\n  // console.log('currentGradient:', config.palette.gradients[window.kan.currentColor]);\n\n  var shapeSize = truedShape.strokeBounds;\n  var centerPoint = new Point(shapeSize.width / 2, shapeSize.height / 2);\n  var angle = util.rad(Math.random() * 360);\n  var gradientSize = (shapeSize.width + shapeSize.height) / 4;\n  var originX = centerPoint.x + Math.cos(angle - Math.PI / 2) * gradientSize;\n  var originY = centerPoint.y + Math.sin(angle - Math.PI / 2) * gradientSize;\n  var destinationX = centerPoint.x + Math.cos(angle + Math.PI / 2) * gradientSize;\n  var destinationY = centerPoint.y + Math.sin(angle + Math.PI / 2) * gradientSize;\n\n  var origin = new Point(originX + shapeSize.x, originY + shapeSize.y);\n  var destination = new Point(destinationX + shapeSize.x, destinationY + shapeSize.y);\n  // group.addChild(new Path.Circle({\n  //   center: origin,\n  //   radius: 5,\n  //   fillColor: 'red',\n  // }));\n  // group.addChild(new Path.Circle({\n  //   center: destination,\n  //   radius: 5,\n  //   fillColor: 'green',\n  // }));\n  group.data.originalColor = window.kan.currentColor;\n  group.data.color = {\n    gradient: {\n      stops: config.palette.gradients[window.kan.currentColor]\n    },\n    origin: origin,\n    destination: destination\n  };\n  group.data.scale = 1; // init variable to track scale changes\n  group.data.rotation = 0; // init variable to track rotation changes\n  group.data.fresh = true;\n\n  shapePath.remove();\n  truedShape.visible = false;\n  truedShape.strokeColor = new Color(0, 0);\n  window.kan.shapePath = truedShape;\n  truedShape.name = 'shapePath';\n\n  if (!(truedShape.length > 0)) {\n    truedShape.remove();\n    group.remove();\n    window.kan.panning = false;\n    return;\n  }\n\n  group.addChild(truedShape);\n\n  var shapeSoundObj = sound.getShapeSoundObj(truedShape);\n  window.kan.composition.push(shapeSoundObj);\n\n  truedShape.visible = false;\n  var outlineGroup = shape.getOutlineGroup(truedShape);\n  var outline = outlineGroup._namedChildren.outer[0].clone();\n  outline.name = 'outer';\n  outline.fillColor = window.kan.currentColor;\n  outline.fillColor = group.data.color;\n\n  var outlineCenter = outlineGroup._namedChildren.middle[0].clone();\n  outlineCenter.strokeColor = group.data.color;\n  outlineCenter.visible = false;\n  group.addChild(outline);\n  outline.sendToBack();\n\n  outlineGroup.remove();\n\n  var shapeMask = outline.clone();\n  shapeMask.fillColor = outline.fillColor;\n  shapeMask.strokeColor = outline.strokeColor;\n  shapeMask.closed = true;\n\n  var enclosedLoops = shape.findInteriorCurves(outlineCenter);\n  if (enclosedLoops.length > 0 || truedShape.closed === true) {\n    group.data.line = false;\n  } else {\n    group.data.line = true;\n  }\n\n  enclosedLoops.forEach(function (loop) {\n    shapeMask.unite(loop);\n    shapeMask.sendToBack();\n    loop.name = 'loop';\n    loop.data.loop = true;\n    loop.visible = true;\n    group.addChild(loop);\n  });\n\n  shapeMask.unite();\n  var crossings = shapeMask.resolveCrossings();\n  if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n    (function () {\n      var maxArea = 0,\n          maxChild = null;\n      crossings.children.forEach(function (child) {\n        if (child.area > maxArea) {\n          maxChild = child;\n          maxArea = child.area;\n        }\n      });\n\n      shapeMask = maxChild;\n    })();\n  }\n\n  outlineCenter.remove();\n  shapeMask.visible = false;\n  shapeMask.name = 'mask';\n  shapeMask.data.mask = true;\n  group.addChild(shapeMask);\n  shapeMask.sendToBack();\n\n  shape.cleanUpGroup(group);\n\n  move.id = group.id;\n  window.kan.moves.push(move);\n\n  ui.unditherButtonsByName(['new', 'undo', 'play-stop', 'share']);\n  $body.addClass(sound.playEnabledClass);\n\n  if (window.kan.userHasDrawnFirstShape !== true) {\n    // first shape!\n    // set play prompt timeout\n    window.kan.playPromptTimeout = setTimeout(function () {\n      overlays.openOverlay('play-prompt');\n    }, timing.playPromptDelay);\n\n    window.kan.userHasDrawnFirstShape = true;\n  }\n\n  if (config.runAnimations) {\n    var scaleFactor = 0.9;\n    group.animate([{\n      properties: {\n        scale: scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeOut\"\n      }\n    }, {\n      properties: {\n        scale: 1 / scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeIn\"\n      }\n    }]);\n  }\n\n  if (!tutorial.allTutsCompleted()) {\n    var tutorialCompletion = window.kan.tutorialCompletion;\n    var tutName = null;\n\n    if (!tutorialCompletion['fill'] && truedShape.closed) {\n      tutName = 'fill';\n    } else {\n      var groups = paper.project.getItems({\n        match: function match(el) {\n          return el.className === 'Group';\n        }\n      });\n      if (!tutorialCompletion['pinch'] && groups.length >= 3) {\n        tutName = 'pinch';\n      } else if (!tutorialCompletion['swipe'] && groups.length >= 5) {\n        tutName = 'swipe';\n      }\n    }\n\n    if (tutName !== null) {\n      // console.log(`${tutName} tutorial`);\n      tutorial.addContextualTut(tutName);\n      window.kan.tutorialCompletion[tutName] = true;\n      group.data.tut = tutName;\n    }\n  }\n\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  shapeSoundObj.play();\n\n  // console.log('pan done');\n  hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    hammerCanvas.set({ enable: true });\n    console.log('touch enabled');\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n\n    window.kan.panning = false;\n  }, timing.inputDelay);\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n}\n\nfunction panCancel(event) {\n  console.log('pancancel');\n  event.srcEvent.stopPropagation();\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('panstart', panStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n  window.kan.panning = false;\n}\n\nfunction pinchStart(event) {\n  // console.log('pinchstart');\n  timing.preventInactivityTimeout();\n  tutorial.hideContextualTuts();\n  window.kan.interacting = true;\n  window.kan.pinching = true;\n  // event.preventDefault();\n\n  // hammerCanvas.get('pinchstart').set({enable: false});\n  hammerCanvas.off('pinchstart');\n  disablePanEvents();\n  disableTapEvents();\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  sound.stopPlaying();\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = shape.hitTestGroupBounds(point);\n\n  if (hitResult) {\n    window.kan.pinching = true;\n    window.kan.pinchedGroup = hitResult;\n    window.kan.lastScale = 1;\n    window.kan.lastRotation = event.rotation;\n\n    window.kan.originalPosition = hitResult.position;\n    window.kan.originalRotation = hitResult.data.rotation;\n    window.kan.originalScale = hitResult.data.scale;\n    hitResult.data.thrown = false;\n\n    if (config.pop === true) {\n      shape.destroyGroupPops(hitResult);\n    }\n\n    hitResult.bringToFront();\n\n    if (hitResult.data.tut && hitResult.data.tut.length > 0) {\n      var $tut = $('.tut[data-tut-type=\\'' + hitResult.data.tut + '\\']');\n      if ($tut) {\n        window.kan.pinchedTut = $tut;\n      } else {\n        window.kan.pinchedTut = null;\n      }\n    } else {\n      window.kan.pinchedTut = null;\n    }\n\n    // if (config.runAnimations) {\n    //   hitResult.animate({\n    //     properties: {\n    //       scale: 1.25\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n    window.kan.pinchedTut = null;\n    // console.log('hit no item');\n  }\n}\n\nfunction pinchMove(event) {\n  // console.log('pinchMove');\n  // event.preventDefault();\n\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n\n  if (!!pinchedGroup) {\n    var currentScale = event.scale;\n    var scaleDelta = void 0;\n\n    tutorial.hideContextualTutByName('pinch');\n\n    if (pinchedGroup.bounds.width < minShapeSize || pinchedGroup.bounds.height < minShapeSize) {\n      // only allow a shape to scale down if it is larger than the minimum size\n      scaleDelta = 1.1;\n    } else if (pinchedGroup.bounds.width >= paper.view.viewSize.width || pinchedGroup.bounds.height >= paper.view.viewSize.height) {\n      // only allow shape to scale up if it fits in the viewport\n      scaleDelta = 0.9;\n    } else {\n      scaleDelta = currentScale / window.kan.lastScale;\n    }\n\n    window.kan.lastScale = currentScale;\n\n    var currentRotation = event.rotation;\n    var rotationDelta = currentRotation - window.kan.lastRotation;\n    window.kan.lastRotation = currentRotation;\n\n    // console.log(`scaling by ${scaleDelta}`);\n    // console.log(`rotating by ${rotationDelta}`);\n\n    var centerPoint = event.center;\n    pinchedGroup.position = centerPoint;\n    if (!!$pinchedTut) {\n      tutorial.moveContextualTut($pinchedTut, centerPoint);\n    }\n\n    if (scaleDelta !== 1) {\n      pinchedGroup.scale(scaleDelta);\n\n      // check if scaling went awry, cannot be too big or too small\n      // hypotenuse must fit within view bounds\n      var hypot = util.hypot(pinchedGroup.bounds.width, pinchedGroup.bounds.height);\n      var viewHypot = util.hypot(paper.view.viewSize.width, paper.view.viewSize.height);\n      if (hypot >= viewHypot) {\n        // shape is too big, bring it back down to size\n        scaleDelta = viewHypot * maxScaleFactor / hypot;\n        pinchedGroup.scale(scaleDelta);\n      } else if (hypot <= minShapeSize) {\n        scaleDelta = minShapeSize / hypot;\n        pinchedGroup.scale(scaleDelta);\n      }\n    }\n    pinchedGroup.rotate(rotationDelta);\n\n    pinchedGroup.data.scale *= scaleDelta;\n    pinchedGroup.data.rotation += rotationDelta;\n  }\n}\n\nfunction pinchEnd(event) {\n  // event.preventDefault();\n\n  window.kan.lastEvent = event;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n  var originalPosition = window.kan.originalPosition;\n  var originalRotation = window.kan.originalRotation;\n  var originalScale = window.kan.originalScale;\n\n  if (!!pinchedGroup) {\n    pinchedGroup.data.fresh = true;\n    var move = {\n      id: pinchedGroup.id,\n      type: 'transform'\n    };\n    if (pinchedGroup.position != originalPosition) {\n      move.position = originalPosition;\n    }\n\n    if (pinchedGroup.data.rotation != originalRotation) {\n      move.rotation = originalRotation - pinchedGroup.data.rotation;\n    }\n\n    if (pinchedGroup.data.scale != originalScale) {\n      move.scale = originalScale / pinchedGroup.data.scale;\n    }\n\n    if (pinchedGroup.children.length > 0 && pinchedGroup._namedChildren.shapePath && pinchedGroup._namedChildren.shapePath.length > 0) {\n      // update shapePath sound object if possible\n      sound.removeShapeFromComposition(pinchedGroup); // sound is now wrong\n\n      var shapePath = pinchedGroup._namedChildren.shapePath[0];\n      var shapeSoundObj = sound.getShapeSoundObj(shapePath);\n      window.kan.composition.push(shapeSoundObj);\n    }\n\n    window.kan.moves.push(move);\n\n    if (Math.abs(event.velocity) > 1) {\n      tutorial.hideContextualTutByName('swipe');\n\n      // hide any connected tuts\n      if (!!$pinchedTut) {\n        tutorial.hideContextualTut($pinchedTut);\n      }\n      // dispose of group offscreen\n      if (config.pop === true) {\n        shape.destroyGroupPops(pinchedGroup);\n        pinchedGroup.data.fresh = false;\n      }\n\n      pinchedGroup.data.thrown = true;\n      throwPinchedGroup();\n    }\n\n    // if (config.runAnimations) {\n    //   pinchedGroup.animate({\n    //     properties: {\n    //       scale: 0.8\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n  }\n\n  // if an overlay was interrupted, open it up now\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  window.kan.pinching = false;\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n\n  // console.log('pinch done');\n  // hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    console.log('touch enabled');\n    hammerCanvas.on('pinchstart', pinchStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    // hammerCanvas.set({ enable: true });\n    // hammerCanvas.on('pinchstart', pinchStart);\n    // enablePanAndPinchEvents();\n    // enableTapEvents();\n    // window.kan.pinching = false;\n    // window.kan.pinchedGroup = null;\n  }, timing.inputDelay);\n}\n\nfunction pinchCancel(event) {\n  // console.log(event);\n  event.srcEvent.stopPropagation();\n  console.log('pinchcancel');\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('pinchstart', pinchStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n\n  window.kan.pinching = false;\n}\n\nfunction throwPinchedGroup() {\n\n  var velocityMultiplier = 25;\n  var lastEvent = window.kan.lastEvent;\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n\n  if (pinchedGroup === null || pinchedGroup.data && pinchedGroup.data.thrown === false) return;\n  if (pinchedGroup.position.x <= 0 - pinchedGroup.bounds.width || pinchedGroup.position.x >= viewWidth + pinchedGroup.bounds.width || pinchedGroup.position.y <= 0 - pinchedGroup.bounds.height || pinchedGroup.position.y >= viewHeight + pinchedGroup.bounds.height) {\n    pinchedGroup.data.offScreen = true;\n    pinchedGroup.visible = false;\n    sound.removeShapeFromComposition(pinchedGroup);\n    window.kan.pinchedGroup = null;\n    return;\n  }\n  requestAnimationFrame(throwPinchedGroup);\n  var newX = pinchedGroup.position.x + lastEvent.velocityX * velocityMultiplier;\n  var newY = pinchedGroup.position.y + lastEvent.velocityY * velocityMultiplier;\n  var newPos = new Point(newX, newY);\n  pinchedGroup.position = newPos;\n}\n\nfunction eventTargetIsOnCanvas(event) {\n  if (!event) return false;\n  if (event.target != ui.drawCanvas) return false;\n  return true;\n}\n\n},{\"./../../config\":1,\"./color\":7,\"./overlays\":10,\"./shape\":11,\"./sound\":13,\"./timing\":14,\"./tutorial\":16,\"./ui\":17,\"./util\":18,\"hammerjs\":3}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTutByName = getTutByName;\nexports.allTutsCompleted = allTutsCompleted;\nexports.addContextualTut = addContextualTut;\nexports.hideContextualTut = hideContextualTut;\nexports.hideContextualTutByName = hideContextualTutByName;\nexports.hideContextualTuts = hideContextualTuts;\nexports.resetContextualTuts = resetContextualTuts;\nexports.moveContextualTut = moveContextualTut;\nexports.getTutPositionFromCenter = getTutPositionFromCenter;\nvar config = require('./../../config');\n\nvar contextualTuts = config.contextualTuts;\nvar tutArrowHeight = 16;\n\nfunction getTutByName(tutName) {\n  for (var i = 0; i < contextualTuts.length; i++) {\n    var tutObj = contextualTuts[i];\n\n    if (tutObj.type === tutName) {\n      return tutObj.copy;\n    }\n  }\n\n  return null;\n}\n\nfunction allTutsCompleted() {\n  var tutorialCompletionObj = window.kan.tutorialCompletion;\n  var completion = true;\n\n  Object.keys(tutorialCompletionObj).forEach(function (key, val) {\n    completion = completion && tutorialCompletionObj[key];\n  });\n\n  return completion === true;\n}\n\nfunction addContextualTut(tutName) {\n  if (!!window.kan.shapePath && window.kan.shapePath.length > 0) {\n    hideContextualTuts();\n    window.kan.shapesSinceTut = 0;\n\n    var shapePath = window.kan.shapePath;\n    var shapeCenter = shapePath.bounds.center;\n\n    var tutCopy = getTutByName(tutName);\n\n    if (tutCopy !== null) {\n      var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n      if ($tut.length > 0) {\n        var tutPos = getTutPositionFromCenter($tut, shapeCenter);\n        $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px', visibility: 'visible' });\n        $tut.addClass('animated bounceIn');\n      }\n    }\n  }\n}\n\nfunction hideContextualTut($tut) {\n  $tut.css({ visibility: 'hidden' });\n}\n\nfunction hideContextualTutByName(tutName) {\n  var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n  hideContextualTut($tut);\n}\n\nfunction hideContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.css({ visibility: 'hidden' });\n}\n\nfunction resetContextualTuts() {\n  hideContextualTuts();\n  window.kan.tutorialCompletion = {\n    \"fill\": false,\n    \"pinch\": false,\n    \"swipe\": false\n  };\n}\n\nfunction moveContextualTut($tut, centerPoint) {\n  var tutPos = getTutPositionFromCenter($tut, centerPoint);\n  $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px' });\n}\n\nfunction getTutPositionFromCenter($tut, centerPoint) {\n  var tutWidth = $tut.outerWidth();\n  var tutHeight = $tut.outerHeight();\n  var leftPos = centerPoint.x - tutWidth / 2;\n  var topPos = centerPoint.y - tutHeight - tutArrowHeight;\n  return new Point(leftPos, topPos);\n}\n\n},{\"./../../config\":1}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.ditherButtonsByName = ditherButtonsByName;\nexports.unditherButtonsByName = unditherButtonsByName;\nexports.ditherButtonByName = ditherButtonByName;\nexports.unditherButtonByName = unditherButtonByName;\nexports.resetCanvas = resetCanvas;\nvar config = require('./../../config');\n\nvar sound = require('./sound');\nvar tutorial = require('./tutorial');\nvar overlays = require('./overlays');\nvar util = require('./util');\nvar color = require('./color');\nvar shape = require('./shape');\nvar share = require('./share');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar playingClass = sound.playingClass;\nvar playEnabledClass = sound.playEnabledClass;\n\nvar $newButton = $('.controls .new');\nvar $undoButton = $('.controls .undo');\nvar $playButton = $('.controls .play-stop');\nvar $shareButton = $('.controls .share');\nvar $tipsButton = $('.controls .tips');\n\nvar drawCanvas = exports.drawCanvas = $('#canvas')[0];\nvar tipsOverlay = exports.tipsOverlay = $('.overlay.tips')[0];\n\nvar ditheredClass = 'dithered';\n\nfunction init() {\n  initLogoRefresh();\n  initColorPalette();\n  initNewButton();\n  initUndoButton();\n  initPlayButton();\n  initTipsButton();\n  initShareButton();\n  initContextualTuts();\n  resetCanvas();\n}\n\nfunction unditherAllButtons() {\n  $('.controls .' + ditheredClass).removeClass(ditheredClass);\n}\n\nfunction ditherButtonsByName(buttonNames) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (buttonNames.length > 0) {\n    if ($.isArray(buttonNames)) {\n      buttonNames.forEach(function (name) {\n        return ditherButtonByName(name, undither);\n      });\n    } else {\n      ditherButtonByName(buttonNames, undither);\n    }\n  }\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction ditherButtonByName(buttonName) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var $button = $('.controls .' + buttonName);\n  // console.log($button);\n  if ($button.length > 0) {\n    if (undither !== true) {\n      $button.addClass(ditheredClass);\n    } else {\n      $button.removeClass(ditheredClass);\n    }\n  }\n}\n\nfunction unditherButtonByName(buttonName) {\n  ditherButtonByName(buttonName, true);\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction newPressed() {\n  // console.log('new pressed');\n  window.kan.composition = [];\n  paper.project.activeLayer.removeChildren();\n  tutorial.hideContextualTuts();\n  ditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n  sound.stopPlaying();\n  // window.kan.userHasDrawnFirstShape = false;\n  // tutorial.resetContextualTuts();\n}\n\nfunction undoPressed() {\n  sound.stopPlaying();\n  tutorial.hideContextualTuts();\n\n  var transparent = new Color(0, 0);\n  // console.log('undo pressed');\n  if (!(window.kan.moves.length > 0)) {\n    // console.log('no moves yet');\n    window.kan.userHasDrawnFirstShape = false;\n    return;\n  }\n\n  var lastMove = window.kan.moves.pop();\n  var item = project.getItem({\n    id: lastMove.id\n  });\n\n  if (item) {\n    item.visible = true; // make sure\n    switch (lastMove.type) {\n      case 'newGroup':\n        // console.log('removing group');\n        sound.removeShapeFromComposition(item);\n        util.clearGroupPops(item);\n        item.remove();\n\n        if ('removedGroup' in lastMove) {\n          // bring back removed group\n          lastMove.removedGroup.visible = true;\n          lastMove.removedGroup.data.fresh = true;\n          shape.updatePops();\n        }\n\n        var numGroups = util.getNumGroups();\n        // console.log('numGroups', numGroups);\n\n        if (numGroups <= 0) {\n          ditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n          $body.removeClass(sound.playEnabledClass);\n        } else {\n          unditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n          $body.addClass(sound.playEnabledClass);\n        }\n\n        break;\n      case 'fillChange':\n        if (lastMove.transparent) {\n          item.fillColor = lastMove.fill;\n          item.strokeColor = lastMove.fill;\n        } else {\n          item.fillColor = transparent;\n          item.strokeColor = transparent;\n        }\n      case 'transform':\n        item.data.fresh = true;\n        if (!!lastMove.position) {\n          item.position = lastMove.position;\n          if (item.data && item.data.tut && item.data.tut.length > 0) {\n            // item has connected contextual tut, move it to the right place\n            var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n            tutorial.moveContextualTut($tut, lastMove.position);\n          }\n        }\n        if (!!lastMove.rotation) {\n          item.rotation = lastMove.rotation;\n        }\n        if (!!lastMove.scale) {\n          item.scale(lastMove.scale);\n        }\n        if (config.pop === true) {\n          shape.updatePops();\n        }\n        break;\n      default:\n      // console.log('unknown case');\n    }\n  } else {\n      // console.log('could not find matching item');\n    }\n}\n\nfunction playPressed() {\n  // console.log('play pressed');\n  // sound.stopComposition();\n  // overlays.closeAndResetOverlays();\n  // tutorial.hideContextualTuts();\n  var playing = window.kan.playing;\n  // console.log(playing, util.getNumGroups() > 2, !playing && util.getNumGroups() > 2, $body);\n\n  clearTimeout(window.kan.playPromptTimeout);\n  if (!playing && util.getNumGroups() > 2) {\n    // console.log('starting playing');\n    sound.startPlaying();\n  } else {\n    // console.log('stopping playing');\n    sound.stopPlaying(true);\n  }\n}\n\nfunction tipsPressed() {\n  sound.stopPlaying();\n  overlays.openOverlay('tips');\n  // console.log('tips pressed');\n}\n\nfunction sharePressed() {\n  share.record();\n  // console.log('share pressed');\n  // sound.stopPlaying();\n  // if ($body.hasClass(sound.playEnabledClass)) {\n  //   overlays.openOverlay('share');\n  // }\n}\n\nfunction initLogoRefresh() {\n  $('.main-logo').on(tapEvent, function () {\n    location.reload();\n  });\n}\n\nfunction initColorPalette() {\n  var $paletteWrap = $('ul.palette-colors');\n  var $paletteColors = $paletteWrap.find('li');\n  var paletteColorSize = 20;\n  var paletteSelectedColorSize = 30;\n  var paletteSelectedClass = 'palette-selected';\n\n  // hook up click\n  $paletteColors.on('click tap touch', function () {\n    if (!$body.hasClass(playingClass)) {\n      var $svg = $(this).find('svg.palette-color');\n\n      if (!$svg.hasClass(paletteSelectedClass)) {\n        $('.' + paletteSelectedClass).removeClass(paletteSelectedClass).attr('width', paletteColorSize).attr('height', paletteColorSize).find('rect').attr('rx', 0).attr('ry', 0);\n\n        $svg.addClass(paletteSelectedClass).attr('width', paletteSelectedColorSize).attr('height', paletteSelectedColorSize).find('rect').attr('rx', paletteSelectedColorSize / 2).attr('ry', paletteSelectedColorSize / 2);\n\n        window.kan.currentColor = $svg.find('rect').attr('fill');\n        // console.log('%ccolor', 'color:red', color.getColorName(window.kan.currentColor));\n      }\n    };\n  });\n}\n\nfunction initNewButton() {\n  $('.main-controls .new').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      newPressed();\n    }\n  });\n}\n\nfunction initUndoButton() {\n  $('.main-controls .undo').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      undoPressed();\n    }\n  });\n}\n\nfunction initPlayButton() {\n  $('.main-controls .play-stop .play').on(tapEvent, sound.startPlaying);\n  $('.main-controls .play-stop .stop').on(tapEvent, sound.stopPlaying);\n}\n\nfunction initTipsButton() {\n  $('.controls .tips').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      tipsPressed();\n    }\n  });\n}\n\nfunction initShareButton() {\n  $('.controls .share').on(tapEvent, sharePressed);\n}\n\nfunction initContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.on(tapEvent, function () {\n    $(this).css({ visibility: 'hidden' });\n  });\n}\n\nfunction resetCanvas() {\n  paper.project.clear();\n\n  // add random background\n  paper.project.activeLayer.name = 'background';\n  var numCanvasses = 10;\n  var randomCanvasIndex = Math.round(Math.random() * (numCanvasses - 1)) + 1; // [1, numCanvasses]\n  var canvasBg = new Raster('canvas-' + randomCanvasIndex);\n  canvasBg.name = 'canvasBg';\n  canvasBg.position = paper.view.center;\n\n  // add canvas layer\n  var scaleFactorHorizontal = paper.view.viewSize.width / canvasBg.size.width;\n  var scaleFactorVertical = paper.view.viewSize.height / canvasBg.size.height;\n  canvasBg.scale(Math.max(scaleFactorHorizontal, scaleFactorVertical));\n  var layer = new Layer(); // init new layer that all other shapes will be drawn upon\n  paper.project.activeLayer.name = 'canvas';\n}\n\n},{\"./../../config\":1,\"./color\":7,\"./overlays\":10,\"./shape\":11,\"./share\":12,\"./sound\":13,\"./tutorial\":16,\"./util\":18}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rad = rad;\nexports.deg = deg;\nexports.hypot = hypot;\nexports.angleDelta = angleDelta;\nexports.delta = delta;\nexports.getTime = getTime;\nexports.getNumVisibleGroups = getNumVisibleGroups;\nexports.getVisibleGroups = getVisibleGroups;\nexports.getAllGroups = getAllGroups;\nexports.anyShapesOnCanvas = anyShapesOnCanvas;\nexports.getNumGroups = getNumGroups;\nexports.getFreshGroups = getFreshGroups;\nexports.getAllPops = getAllPops;\nexports.clearGroupPops = clearGroupPops;\nexports.getGroupPops = getGroupPops;\nexports.getPopCandidates = getPopCandidates;\nexports.setSha = setSha;\nexports.shallowCopy = shallowCopy;\nexports.randomPick = randomPick;\nvar config = require('./../../config');\n\n// Converts from degrees to radians.\nfunction rad(degrees) {\n  return degrees * Math.PI / 180;\n};\n\n// Converts from radians to degrees.\nfunction deg(radians) {\n  return radians * 180 / Math.PI;\n};\n\nfunction hypot(a, b) {\n  return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2)); // pythagorean!\n}\n\n// returns absolute value of the delta of two angles in radians\nfunction angleDelta(x, y) {\n  return Math.abs(Math.atan2(Math.sin(y - x), Math.cos(y - x)));;\n}\n\n// distance between two points\nfunction delta(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)); // pythagorean!\n}\n\nfunction getTime() {\n  return new Date().toLocaleTimeString();\n}\n\nfunction getNumVisibleGroups() {\n  var groups = getVisibleGroups();\n  return groups.length;\n}\n\nfunction getVisibleGroups() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.visible === true;\n    }\n  });\n}\n\nfunction getAllGroups() {\n  return paper.project.getItems({\n    className: 'Group'\n  });\n}\n\nfunction anyShapesOnCanvas() {\n  var groups = getVisibleGroups();\n  return groups.length > 0;\n}\n\nfunction getNumGroups() {\n  var groups = getVisibleGroups();\n  // console.log('numgroups', groups.length);\n  return groups.length;\n}\n\nfunction getFreshGroups() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false && el.data.fresh === true;\n    }\n  });\n}\n\nfunction getAllPops() {\n  return paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true;\n    }\n  });\n}\n\nfunction clearGroupPops(group) {\n  var pops = getGroupPops(group);\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction getGroupPops(group) {\n  // console.log('group pop group', group.id, group);\n  var returnPops = [];\n\n  if (group.children.length > 0) {\n    var groupPops = group.getItems({\n      match: function match(el) {\n        return el.data && el.data.pop === true;\n      }\n    });\n    returnPops = returnPops.concat(groupPops);\n  }\n\n  var intersectingPops = paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true && el.data.intersectingGroup === group.id;\n    }\n  });\n\n  if (intersectingPops.length > 0) {\n    returnPops = returnPops.concat(intersectingPops);\n  }\n\n  return returnPops;\n}\n\nfunction getPopCandidates() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false && el.visible === true;\n    }\n  });\n}\n\nfunction setSha() {\n  $.get('/hash').done(function (res) {\n    console.log('current hash:', res);\n    window.kan.hash = res;\n  }).fail(function (e) {\n    console.error('error getting hash:', e);\n  });\n}\n\n// http://blog.soulserv.net/understanding-object-cloning-in-javascript-part-i/\nfunction shallowCopy(original) {\n  // First create an empty object with\n  // same prototype of our original source\n  var clone = Object.create(Object.getPrototypeOf(original));\n\n  var i,\n      keys = Object.getOwnPropertyNames(original);\n\n  for (i = 0; i < keys.length; i++) {\n    // copy each property into the clone\n    Object.defineProperty(clone, keys[i], Object.getOwnPropertyDescriptor(original, keys[i]));\n  }\n\n  return clone;\n}\n\nfunction randomPick(array) {\n  if (array.length > 0) {\n    return array[Math.floor(Math.random() * array.length)];\n  }\n\n  return null;\n}\n\n},{\"./../../config\":1}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enterTutorialMode = enterTutorialMode;\nexports.exitTutorialMode = exitTutorialMode;\nexports.pauseVideo = pauseVideo;\nexports.playVideo = playVideo;\nvar config = require('./../../config');\n\nvar main = require('./main');\nvar overlays = require('./overlays');\nvar timing = require('./timing');\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar videoPlayingClass = exports.videoPlayingClass = 'video-playing';\n\nvar $videoWrapper = $body.find('#video-wrap');\nvar $video = $videoWrapper.find('video');\n\nfunction enterTutorialMode() {\n  console.log('entering tutorial mode');\n  playVideo();\n  $body.addClass(videoPlayingClass);\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n  $body.off(tapEvent, timing.preventInactivityTimeout);\n  $body.on(tapEvent, exitTutorialMode);\n  main.resetWindow();\n  ui.resetCanvas();\n  window.kan.refreshCheckInterval = setInterval(function () {\n    $.get('/hash').done(function (res) {\n      if (res !== window.kan.hash) {\n        console.log('different hash, reloading');\n        location.reload();\n      }\n    }).fail(function (e) {\n      console.error('error getting hash:', e);\n    });\n  }, timing.refreshCheckDelay);\n}\n\nfunction exitTutorialMode() {\n  console.log('exiting tutorial mode');\n  sound.reinitShapeSounds().then(function () {\n    clearInterval(window.kan.refreshCheckInterval);\n    Howler.mute(false);\n    pauseVideo();\n    $body.off(tapEvent, exitTutorialMode);\n    $body.on(tapEvent, timing.preventInactivityTimeout);\n    $body.removeClass(videoPlayingClass);\n    clearTimeout(window.kan.inactivityTimeout);\n    clearInterval(window.kan.continueCountdownInterval);\n\n    overlays.openOverlay('intro');\n\n    window.kan.inactivityTimeout = setTimeout(function () {\n      overlays.openOverlay('continue');\n    }, timing.continueInactivityDelay);\n  }).fail(function (e) {\n    console.error('error initting shape sounds:', e);\n    location.reload();\n  });\n}\n\nfunction pauseVideo() {\n  $video.get(0).pause();\n}\n\nfunction playVideo() {\n  $video.get(0).play();\n}\n\n},{\"./../../config\":1,\"./main\":9,\"./overlays\":10,\"./sound\":13,\"./timing\":14,\"./ui\":17}]},{},[9])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25maWcuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvYnJvd3Nlci9ibHVlYmlyZC5qcyIsIm5vZGVfbW9kdWxlcy9oYW1tZXJqcy9oYW1tZXIuanMiLCJub2RlX21vZHVsZXMvaG93bGVyL2Rpc3QvaG93bGVyLmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWNvcmRydGMvUmVjb3JkUlRDLmpzIiwic3JjL2pzL2NvbG9yLmpzIiwic3JjL2pzL2xpYi9zaGFwZS1kZXRlY3Rvci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL292ZXJsYXlzLmpzIiwic3JjL2pzL3NoYXBlLmpzIiwic3JjL2pzL3NoYXJlLmpzIiwic3JjL2pzL3NvdW5kLmpzIiwic3JjL2pzL3RpbWluZy5qcyIsInNyYy9qcy90b3VjaC5qcyIsInNyYy9qcy90dXRvcmlhbC5qcyIsInNyYy9qcy91aS5qcyIsInNyYy9qcy91dGlsLmpzIiwic3JjL2pzL3ZpZGVvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxRQUFRLGFBQVIsR0FBd0IsS0FBeEI7QUFDQSxRQUFRLEdBQVIsR0FBYyxJQUFkO0FBQ0EsUUFBUSxRQUFSLEdBQW1CLFFBQW5CO0FBQ0EsUUFBUSxTQUFSLEdBQW9CLEVBQXBCOztBQUVBLFFBQVEsT0FBUixHQUFrQjtBQUNoQixVQUFRLENBQUMsU0FBRCxFQUFZLFNBQVosRUFBdUIsU0FBdkIsRUFBa0MsU0FBbEMsRUFBNkMsU0FBN0MsRUFBd0QsU0FBeEQsRUFBbUUsU0FBbkUsRUFBOEUsU0FBOUUsRUFBeUYsU0FBekYsRUFBb0csU0FBcEcsRUFBK0csU0FBL0csRUFBeUgsU0FBekgsQ0FEUTtBQUVoQixjQUFZO0FBQ1YsZUFBVyxPQUREO0FBRVYsZUFBVyxNQUZEO0FBR1YsZUFBVyxNQUhEO0FBSVYsZUFBVyxNQUpEO0FBS1YsZUFBVyxLQUxEO0FBTVYsZUFBVyxLQU5EO0FBT1YsZUFBVyxRQVBEO0FBUVYsZUFBVyxPQVJEO0FBU1YsZUFBVyxPQVREO0FBVVYsZUFBVyxRQVZEO0FBV1YsZUFBVyxPQVhEO0FBWVYsZUFBVztBQVpELEdBRkk7QUFnQmhCLGFBQVc7QUFDVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FERjtBQUVULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQUZGO0FBR1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBSEY7QUFJVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FKRjtBQUtULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQUxGO0FBTVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBTkY7QUFPVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FQRjtBQVFULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVJGO0FBU1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBVEY7QUFVVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FWRjtBQVdULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVhGO0FBWVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaO0FBWkYsR0FoQks7QUE4QmhCLFFBQU0sQ0FBQyxTQUFELEVBQVksU0FBWixFQUF1QixTQUF2QixFQUFrQyxTQUFsQyxFQUE2QyxTQUE3QyxDQTlCVTtBQStCaEIsYUFBVyxFQS9CSztBQWdDaEIscUJBQW1CO0FBaENILENBQWxCOztBQW1DQSxRQUFRLGNBQVIsR0FBeUIsQ0FDdkI7QUFDRSxRQUFNLE1BRFI7QUFFRSxRQUFNO0FBRlIsQ0FEdUIsRUFLdkI7QUFDRSxRQUFNLE9BRFI7QUFFRSxRQUFNO0FBRlIsQ0FMdUIsRUFTdkI7QUFDRSxRQUFNLE9BRFI7QUFFRSxRQUFNO0FBRlIsQ0FUdUIsQ0FBekI7Ozs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbC9LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbmxGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbHRGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7UUNsdUlnQixnQixHQUFBLGdCO1FBTUEsWSxHQUFBLFk7UUFhQSxZLEdBQUEsWTtRQUtBLGtCLEdBQUEsa0I7QUE1QmhCLElBQU0sU0FBUyxRQUFRLGdCQUFSLENBQWY7O0FBRU8sSUFBTSxvQ0FBYyxJQUFJLEtBQUosQ0FBVSxDQUFWLEVBQWEsQ0FBYixDQUFwQjs7QUFFQSxTQUFTLGdCQUFULENBQTBCLElBQTFCLEVBQWdDO0FBQ3JDLE1BQUksV0FBVyxLQUFLLE1BQUwsQ0FBWSxJQUFaLENBQWlCLGFBQWhDO0FBQ0E7QUFDQSxTQUFPLGFBQWEsUUFBYixDQUFQO0FBQ0Q7O0FBRU0sU0FBUyxZQUFULENBQXNCLEtBQXRCLEVBQTZCO0FBQ2xDLE1BQUksS0FBSixFQUFXO0FBQ1QsWUFBUSxNQUFNLFdBQU4sRUFBUixDQURTLENBQ29CO0FBQzdCLFFBQUksU0FBUyxPQUFPLE9BQVAsQ0FBZSxVQUE1QixFQUF3QztBQUN0QyxhQUFPLE9BQU8sT0FBUCxDQUFlLFVBQWYsQ0FBMEIsS0FBMUIsQ0FBUDtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU8sSUFBUDtBQUNEO0FBQ0YsR0FQRCxNQU9PO0FBQ0wsV0FBTyxJQUFQO0FBQ0Q7QUFDRjs7QUFFTSxTQUFTLFlBQVQsR0FBd0I7QUFDN0IsTUFBTSxPQUFPLE9BQU8sT0FBUCxDQUFlLElBQTVCO0FBQ0EsU0FBTyxLQUFLLEtBQUssS0FBTCxDQUFXLEtBQUssTUFBTCxLQUFnQixLQUFLLE1BQWhDLENBQUwsQ0FBUDtBQUNEOztBQUVNLFNBQVMsa0JBQVQsQ0FBNEIsS0FBNUIsRUFBbUM7QUFDeEMsTUFBTSxPQUFPLE9BQU8sT0FBUCxDQUFlLElBQTVCO0FBQ0EsU0FBTyxLQUFLLFFBQVEsS0FBSyxNQUFsQixDQUFQO0FBQ0Q7Ozs7O0FDL0JBLFdBQVMsSUFBVCxFQUFlLE9BQWYsRUFBd0I7O0FBRXZCLE1BQUksT0FBTyxNQUFQLEtBQWtCLFVBQWxCLElBQWdDLE9BQU8sR0FBM0MsRUFBZ0Q7QUFDOUMsV0FBTyxFQUFQLEVBQVcsT0FBWDtBQUNELEdBRkQsTUFFTyxJQUFJLE9BQU8sTUFBUCxLQUFrQixXQUFsQixJQUFpQyxPQUFPLE9BQTVDLEVBQXFEO0FBQzFELFdBQU8sT0FBUCxHQUFpQixTQUFqQjtBQUNELEdBRk0sTUFFQTtBQUNMLFNBQUssYUFBTCxHQUFxQixTQUFyQjtBQUNEO0FBQ0YsQ0FUQSxhQVNPLFlBQVc7O0FBRWpCLE1BQUksZUFBSjtBQUNBLE1BQUksY0FBYyxHQUFsQjtBQUNBLE1BQUksT0FBTyxPQUFPLENBQUMsR0FBRCxHQUFPLEtBQUssSUFBTCxDQUFVLEdBQVYsQ0FBZCxDQUFYO0FBQ0EsTUFBSSxjQUFjLFFBQVEsSUFBUixDQUFsQjtBQUNBLE1BQUksa0JBQWtCLFFBQVEsR0FBUixDQUF0QjtBQUNBLE1BQUksZ0JBQWdCLEtBQUssSUFBTCxDQUFVLGNBQWMsV0FBZCxHQUE0QixjQUFjLFdBQXBELElBQW1FLEdBQXZGO0FBQ0EsTUFBSSxVQUFVO0FBQ1osT0FBRyxDQURTO0FBRVosT0FBRztBQUZTLEdBQWQ7O0FBS0EsV0FBUyxPQUFULENBQWlCLENBQWpCLEVBQW9COztBQUVsQixXQUFPLElBQUksS0FBSyxFQUFULEdBQWMsS0FBckI7QUFDRDs7QUFFRCxXQUFTLFdBQVQsQ0FBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsRUFBMkI7O0FBRXpCLFFBQUksS0FBSyxFQUFFLENBQUYsR0FBTSxFQUFFLENBQWpCO0FBQ0EsUUFBSSxLQUFLLEVBQUUsQ0FBRixHQUFNLEVBQUUsQ0FBakI7O0FBRUEsV0FBTyxLQUFLLElBQUwsQ0FBVSxLQUFLLEVBQUwsR0FBVSxLQUFLLEVBQXpCLENBQVA7QUFDRDs7QUFFRCxXQUFTLE1BQVQsQ0FBZ0IsTUFBaEIsRUFBd0IsSUFBeEIsRUFBOEI7O0FBRTVCLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0EsU0FBSyxhQUFMO0FBQ0Q7O0FBRUQsU0FBTyxTQUFQLENBQWlCLGFBQWpCLEdBQWlDLFlBQVc7O0FBRTFDLFNBQUssTUFBTCxHQUFjLEtBQUssUUFBTCxFQUFkO0FBQ0EsU0FBSyxXQUFMO0FBQ0EsU0FBSyxNQUFMLEdBQWMsS0FBSyxRQUFMLENBQWMsQ0FBQyxLQUFLLGVBQUwsRUFBZixDQUFkO0FBQ0EsU0FBSyxNQUFMLEdBQWMsS0FBSyxhQUFMLEVBQWQ7QUFDQSxTQUFLLFdBQUw7QUFDQSxTQUFLLE1BQUwsR0FBYyxLQUFLLGlCQUFMLEVBQWQ7O0FBRUEsV0FBTyxJQUFQO0FBQ0QsR0FWRDs7QUFZQSxTQUFPLFNBQVAsQ0FBaUIsUUFBakIsR0FBNEIsWUFBVzs7QUFFckMsUUFBSSxhQUFKLEVBQW1CLENBQW5CO0FBQ0EsUUFBSSxXQUFXLEtBQUssWUFBTCxNQUF1QixrQkFBa0IsQ0FBekMsQ0FBZjtBQUNBLFFBQUksV0FBVyxHQUFmO0FBQ0EsUUFBSSxZQUFZLENBQUMsS0FBSyxNQUFMLENBQVksQ0FBWixDQUFELENBQWhCOztBQUVBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFLLE1BQUwsQ0FBWSxNQUFoQyxFQUF3QyxHQUF4QyxFQUE2QztBQUMzQyxzQkFBZ0IsWUFBWSxLQUFLLE1BQUwsQ0FBWSxJQUFJLENBQWhCLENBQVosRUFBZ0MsS0FBSyxNQUFMLENBQVksQ0FBWixDQUFoQyxDQUFoQjs7QUFFQSxVQUFJLFdBQVcsYUFBWCxJQUE0QixRQUFoQyxFQUEwQztBQUN4QyxZQUFJO0FBQ0YsYUFBRyxLQUFLLE1BQUwsQ0FBWSxJQUFJLENBQWhCLEVBQW1CLENBQW5CLEdBQXdCLENBQUMsV0FBVyxRQUFaLElBQXdCLGFBQXpCLElBQTJDLEtBQUssTUFBTCxDQUFZLENBQVosRUFBZSxDQUFmLEdBQW1CLEtBQUssTUFBTCxDQUFZLElBQUksQ0FBaEIsRUFBbUIsQ0FBakYsQ0FEeEI7QUFFRixhQUFHLEtBQUssTUFBTCxDQUFZLElBQUksQ0FBaEIsRUFBbUIsQ0FBbkIsR0FBd0IsQ0FBQyxXQUFXLFFBQVosSUFBd0IsYUFBekIsSUFBMkMsS0FBSyxNQUFMLENBQVksQ0FBWixFQUFlLENBQWYsR0FBbUIsS0FBSyxNQUFMLENBQVksSUFBSSxDQUFoQixFQUFtQixDQUFqRjtBQUZ4QixTQUFKOztBQUtBLGtCQUFVLElBQVYsQ0FBZSxDQUFmO0FBQ0EsYUFBSyxNQUFMLENBQVksTUFBWixDQUFtQixDQUFuQixFQUFzQixDQUF0QixFQUF5QixDQUF6QjtBQUNBLG1CQUFXLEdBQVg7QUFDRCxPQVRELE1BU087QUFDTCxvQkFBWSxhQUFaO0FBQ0Q7QUFDRjs7QUFFRCxRQUFJLFVBQVUsTUFBVixLQUFxQixrQkFBa0IsQ0FBM0MsRUFBOEM7QUFDNUMsZ0JBQVUsSUFBVixDQUFlLEtBQUssTUFBTCxDQUFZLEtBQUssTUFBTCxDQUFZLE1BQVosR0FBcUIsQ0FBakMsQ0FBZjtBQUNEOztBQUVELFdBQU8sU0FBUDtBQUNELEdBN0JEOztBQStCQSxTQUFPLFNBQVAsQ0FBaUIsUUFBakIsR0FBNEIsVUFBUyxLQUFULEVBQWdCOztBQUUxQyxRQUFJLEtBQUo7QUFDQSxRQUFJLE1BQU0sS0FBSyxHQUFMLENBQVMsS0FBVCxDQUFWO0FBQ0EsUUFBSSxNQUFNLEtBQUssR0FBTCxDQUFTLEtBQVQsQ0FBVjtBQUNBLFFBQUksWUFBWSxFQUFoQjs7QUFFQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxNQUFMLENBQVksTUFBaEMsRUFBd0MsR0FBeEMsRUFBNkM7QUFDM0MsY0FBUSxLQUFLLE1BQUwsQ0FBWSxDQUFaLENBQVI7O0FBRUEsZ0JBQVUsSUFBVixDQUFlO0FBQ2IsV0FBRyxDQUFDLE1BQU0sQ0FBTixHQUFVLEtBQUssQ0FBTCxDQUFPLENBQWxCLElBQXVCLEdBQXZCLEdBQTZCLENBQUMsTUFBTSxDQUFOLEdBQVUsS0FBSyxDQUFMLENBQU8sQ0FBbEIsSUFBdUIsR0FBcEQsR0FBMEQsS0FBSyxDQUFMLENBQU8sQ0FEdkQ7QUFFYixXQUFHLENBQUMsTUFBTSxDQUFOLEdBQVUsS0FBSyxDQUFMLENBQU8sQ0FBbEIsSUFBdUIsR0FBdkIsR0FBNkIsQ0FBQyxNQUFNLENBQU4sR0FBVSxLQUFLLENBQUwsQ0FBTyxDQUFsQixJQUF1QixHQUFwRCxHQUEwRCxLQUFLLENBQUwsQ0FBTztBQUZ2RCxPQUFmO0FBSUQ7O0FBRUQsV0FBTyxTQUFQO0FBQ0QsR0FqQkQ7O0FBbUJBLFNBQU8sU0FBUCxDQUFpQixhQUFqQixHQUFpQyxZQUFXOztBQUUxQyxRQUFJLEtBQUo7QUFDQSxRQUFJLFlBQVksRUFBaEI7QUFDQSxRQUFJLE1BQU07QUFDUixZQUFNLENBQUMsUUFEQztBQUVSLFlBQU0sQ0FBQyxRQUZDO0FBR1IsWUFBTSxDQUFDLFFBSEM7QUFJUixZQUFNLENBQUM7QUFKQyxLQUFWOztBQU9BLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFLLE1BQUwsQ0FBWSxNQUFoQyxFQUF3QyxHQUF4QyxFQUE2QztBQUMzQyxjQUFRLEtBQUssTUFBTCxDQUFZLENBQVosQ0FBUjs7QUFFQSxVQUFJLElBQUosR0FBVyxLQUFLLEdBQUwsQ0FBUyxJQUFJLElBQWIsRUFBbUIsTUFBTSxDQUF6QixDQUFYO0FBQ0EsVUFBSSxJQUFKLEdBQVcsS0FBSyxHQUFMLENBQVMsSUFBSSxJQUFiLEVBQW1CLE1BQU0sQ0FBekIsQ0FBWDtBQUNBLFVBQUksSUFBSixHQUFXLEtBQUssR0FBTCxDQUFTLElBQUksSUFBYixFQUFtQixNQUFNLENBQXpCLENBQVg7QUFDQSxVQUFJLElBQUosR0FBVyxLQUFLLEdBQUwsQ0FBUyxJQUFJLElBQWIsRUFBbUIsTUFBTSxDQUF6QixDQUFYO0FBQ0Q7O0FBRUQsUUFBSSxLQUFKLEdBQVksSUFBSSxJQUFKLEdBQVcsSUFBSSxJQUEzQjtBQUNBLFFBQUksTUFBSixHQUFhLElBQUksSUFBSixHQUFXLElBQUksSUFBNUI7O0FBRUEsU0FBSyxJQUFJLENBQVQsRUFBWSxJQUFJLEtBQUssTUFBTCxDQUFZLE1BQTVCLEVBQW9DLEdBQXBDLEVBQXlDO0FBQ3ZDLGNBQVEsS0FBSyxNQUFMLENBQVksQ0FBWixDQUFSOztBQUVBLGdCQUFVLElBQVYsQ0FBZTtBQUNiLFdBQUcsTUFBTSxDQUFOLElBQVcsY0FBYyxJQUFJLEtBQTdCLENBRFU7QUFFYixXQUFHLE1BQU0sQ0FBTixJQUFXLGNBQWMsSUFBSSxNQUE3QjtBQUZVLE9BQWY7QUFJRDs7QUFFRCxXQUFPLFNBQVA7QUFDRCxHQWpDRDs7QUFtQ0EsU0FBTyxTQUFQLENBQWlCLGlCQUFqQixHQUFxQyxVQUFTLE1BQVQsRUFBaUI7O0FBRXBELFFBQUksS0FBSjtBQUNBLFFBQUksWUFBWSxFQUFoQjs7QUFFQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxNQUFMLENBQVksTUFBaEMsRUFBd0MsR0FBeEMsRUFBNkM7QUFDM0MsY0FBUSxLQUFLLE1BQUwsQ0FBWSxDQUFaLENBQVI7O0FBRUEsZ0JBQVUsSUFBVixDQUFlO0FBQ2IsV0FBRyxNQUFNLENBQU4sR0FBVSxRQUFRLENBQWxCLEdBQXNCLEtBQUssQ0FBTCxDQUFPLENBRG5CO0FBRWIsV0FBRyxNQUFNLENBQU4sR0FBVSxRQUFRLENBQWxCLEdBQXNCLEtBQUssQ0FBTCxDQUFPO0FBRm5CLE9BQWY7QUFJRDs7QUFFRCxXQUFPLFNBQVA7QUFDRCxHQWZEOztBQWlCQSxTQUFPLFNBQVAsQ0FBaUIsV0FBakIsR0FBK0IsWUFBVzs7QUFFeEMsUUFBSSxLQUFKO0FBQ0EsU0FBSyxDQUFMLEdBQVM7QUFDUCxTQUFHLEdBREk7QUFFUCxTQUFHO0FBRkksS0FBVDs7QUFLQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxNQUFMLENBQVksTUFBaEMsRUFBd0MsR0FBeEMsRUFBNkM7QUFDM0MsY0FBUSxLQUFLLE1BQUwsQ0FBWSxDQUFaLENBQVI7O0FBRUEsV0FBSyxDQUFMLENBQU8sQ0FBUCxJQUFZLE1BQU0sQ0FBbEI7QUFDQSxXQUFLLENBQUwsQ0FBTyxDQUFQLElBQVksTUFBTSxDQUFsQjtBQUNEOztBQUVELFNBQUssQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLLE1BQUwsQ0FBWSxNQUF4QjtBQUNBLFNBQUssQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLLE1BQUwsQ0FBWSxNQUF4Qjs7QUFFQSxXQUFPLElBQVA7QUFDRCxHQW5CRDs7QUFxQkEsU0FBTyxTQUFQLENBQWlCLGVBQWpCLEdBQW1DLFlBQVc7O0FBRTVDLFdBQU8sS0FBSyxLQUFMLENBQVcsS0FBSyxDQUFMLENBQU8sQ0FBUCxHQUFXLEtBQUssTUFBTCxDQUFZLENBQVosRUFBZSxDQUFyQyxFQUF3QyxLQUFLLENBQUwsQ0FBTyxDQUFQLEdBQVcsS0FBSyxNQUFMLENBQVksQ0FBWixFQUFlLENBQWxFLENBQVA7QUFDRCxHQUhEOztBQUtBLFNBQU8sU0FBUCxDQUFpQixZQUFqQixHQUFnQyxZQUFXOztBQUV6QyxRQUFJLElBQUksR0FBUjs7QUFFQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxNQUFMLENBQVksTUFBaEMsRUFBd0MsR0FBeEMsRUFBNkM7QUFDM0MsV0FBSyxZQUFZLEtBQUssTUFBTCxDQUFZLElBQUksQ0FBaEIsQ0FBWixFQUFnQyxLQUFLLE1BQUwsQ0FBWSxDQUFaLENBQWhDLENBQUw7QUFDRDs7QUFFRCxXQUFPLENBQVA7QUFDRCxHQVREOztBQVdBLFNBQU8sU0FBUCxDQUFpQixtQkFBakIsR0FBdUMsVUFBUyxPQUFULEVBQWtCOztBQUV2RCxRQUFJLElBQUksQ0FBQyxXQUFUO0FBQ0EsUUFBSSxJQUFJLFdBQVI7QUFDQSxRQUFJLEtBQUssT0FBTyxDQUFQLEdBQVcsQ0FBQyxNQUFNLElBQVAsSUFBZSxDQUFuQztBQUNBLFFBQUksS0FBSyxLQUFLLGVBQUwsQ0FBcUIsT0FBckIsRUFBOEIsRUFBOUIsQ0FBVDtBQUNBLFFBQUksS0FBSyxDQUFDLE1BQU0sSUFBUCxJQUFlLENBQWYsR0FBbUIsT0FBTyxDQUFuQztBQUNBLFFBQUksS0FBSyxLQUFLLGVBQUwsQ0FBcUIsT0FBckIsRUFBOEIsRUFBOUIsQ0FBVDs7QUFFQSxXQUFPLEtBQUssR0FBTCxDQUFTLElBQUksQ0FBYixJQUFrQixlQUF6QixFQUEwQzs7QUFFeEMsVUFBSSxLQUFLLEVBQVQsRUFBYTtBQUNYLFlBQUksRUFBSjtBQUNBLGFBQUssRUFBTDtBQUNBLGFBQUssRUFBTDtBQUNBLGFBQUssT0FBTyxDQUFQLEdBQVcsQ0FBQyxNQUFNLElBQVAsSUFBZSxDQUEvQjtBQUNBLGFBQUssS0FBSyxlQUFMLENBQXFCLE9BQXJCLEVBQThCLEVBQTlCLENBQUw7QUFDRCxPQU5ELE1BTU87QUFDTCxZQUFJLEVBQUo7QUFDQSxhQUFLLEVBQUw7QUFDQSxhQUFLLEVBQUw7QUFDQSxhQUFLLENBQUMsTUFBTSxJQUFQLElBQWUsQ0FBZixHQUFtQixPQUFPLENBQS9CO0FBQ0EsYUFBSyxLQUFLLGVBQUwsQ0FBcUIsT0FBckIsRUFBOEIsRUFBOUIsQ0FBTDtBQUNEO0FBQ0Y7O0FBRUQsV0FBTyxLQUFLLEdBQUwsQ0FBUyxFQUFULEVBQWEsRUFBYixDQUFQO0FBQ0QsR0EzQkQ7O0FBNkJBLFNBQU8sU0FBUCxDQUFpQixlQUFqQixHQUFtQyxVQUFTLE9BQVQsRUFBa0IsS0FBbEIsRUFBeUI7O0FBRTFELFFBQUksZUFBZSxLQUFLLFFBQUwsQ0FBYyxLQUFkLENBQW5CO0FBQ0EsUUFBSSxnQkFBZ0IsUUFBUSxNQUE1QjtBQUNBLFFBQUksSUFBSSxHQUFSOztBQUVBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxhQUFhLE1BQWpDLEVBQXlDLEdBQXpDLEVBQThDO0FBQzVDLFdBQUssWUFBWSxhQUFhLENBQWIsQ0FBWixFQUE2QixjQUFjLENBQWQsQ0FBN0IsQ0FBTDtBQUNEOztBQUVELFdBQU8sSUFBSSxhQUFhLE1BQXhCO0FBQ0QsR0FYRDs7QUFhQSxXQUFTLGFBQVQsQ0FBdUIsUUFBdkIsRUFBaUMsT0FBakMsRUFBMEM7O0FBRXhDLGNBQVUsV0FBVyxFQUFyQjtBQUNBLFNBQUssU0FBTCxHQUFpQixRQUFRLFNBQVIsSUFBcUIsQ0FBdEM7QUFDQSxzQkFBa0IsUUFBUSxjQUFSLElBQTBCLEVBQTVDOztBQUVBLFNBQUssUUFBTCxHQUFnQixFQUFoQjs7QUFFQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksU0FBUyxNQUE3QixFQUFxQyxHQUFyQyxFQUEwQztBQUN4QyxXQUFLLEtBQUwsQ0FBVyxTQUFTLENBQVQsRUFBWSxJQUF2QixFQUE2QixTQUFTLENBQVQsRUFBWSxNQUF6QztBQUNEO0FBQ0Y7O0FBRUQsZ0JBQWMsYUFBZCxHQUE4QixDQUM1QjtBQUNFLFlBQVEsQ0FBQyxFQUFFLEdBQUcsQ0FBTCxFQUFRLEdBQUcsRUFBWCxFQUFELEVBQWtCLEVBQUUsR0FBRyxHQUFMLEVBQVUsR0FBRyxFQUFiLEVBQWxCLENBRFY7QUFFRSxVQUFNO0FBRlIsR0FENEIsRUFLNUI7QUFDRSxZQUFRLENBQUMsRUFBRSxHQUFHLEVBQUwsRUFBUyxHQUFHLENBQVosRUFBRCxFQUFrQixFQUFFLEdBQUcsRUFBTCxFQUFTLEdBQUcsR0FBWixFQUFsQixDQURWO0FBRUUsVUFBTTtBQUZSLEdBTDRCLEVBUzVCO0FBQ0UsWUFBUSxDQUFDLEVBQUUsR0FBRyxDQUFMLEVBQVEsR0FBRyxDQUFYLEVBQUQsRUFBaUIsRUFBRSxHQUFHLEdBQUwsRUFBVSxHQUFHLEdBQWIsRUFBakIsQ0FEVjtBQUVFLFVBQU07QUFGUixHQVQ0QixFQWE1QjtBQUNFLFlBQVEsQ0FBQyxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUFELEVBQW9CLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXBCLEVBQXVDLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXZDLEVBQTBELEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTFELEVBQTZFLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTdFLEVBQWdHLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWhHLEVBQW1ILEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQW5ILEVBQXNJLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXRJLEVBQXlKLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpKLEVBQTZLLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdLLEVBQWlNLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpNLEVBQXFOLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJOLEVBQXlPLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpPLEVBQTZQLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdQLEVBQWlSLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpSLEVBQXFTLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJTLEVBQXlULEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpULEVBQTZVLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdVLEVBQWlXLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpXLEVBQXFYLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJYLEVBQXlZLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpZLEVBQTZaLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdaLEVBQWliLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpiLEVBQXFjLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJjLEVBQXlkLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpk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LEVBQXlDLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpDLEVBQTZELEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdELEVBQWlGLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpGLEVBQXFHLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJHLEVBQXlILEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpILEVBQTZJLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdJLEVBQWlLLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpLLEVBQXFMLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXJMLEVBQXdNLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXhNLEVBQTJOLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTNOLEVBQThPLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTlPLEVBQWlRLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWpRLEVBQW9SLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXBSLEVBQXVTLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXZTLEVBQTBULEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTFULEVBQTZVLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTdVLEVBQWdXLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWhXLEVBQW1YLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQW5YLEVBQXNZLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXRZLEVBQXlaLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXpaLEVBQTRhLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTVhLEVBQWdjLEVBQUMsS0FBSyxH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LEVBQXpDLEVBQTZELEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdELEVBQWlGLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpGLEVBQXFHLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJHLEVBQXlILEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpILEVBQTZJLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdJLEVBQWlLLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpLLEVBQXFMLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJMLEVBQXlNLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpNLEVBQTZOLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdOLEVBQWlQLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpQLEVBQXFRLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJRLEVBQXlSLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXpSLEVBQTRTLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTVTLEVBQStULEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQS9ULEVBQWtWLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWxWLEVBQXFXLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXJXLEVBQXdYLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXhYLEVBQTJZLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTNZLEVBQThaLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTlaLEVBQWliLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWpiLEVBQW9jLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXBjLEVBQXVkLEVBQUMs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QUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUFwQixFQUF1QyxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUF2QyxFQUEwRCxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUExRCxFQUE2RSxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUE3RSxFQUFnRyxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUFoRyxFQUFtSCxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUFuSCxFQUFzSSxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUF0SSxFQUF5SixFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUF6SixFQUE0SyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE1SyxFQUFnTSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFoTSxFQUFvTixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFwTixFQUF3TyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF4TyxFQUE0UCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE1UCxFQUFnUixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFoUixFQUFvUyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFwUyxFQUF3VCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF4VCxFQUE0VSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE1VSxFQUFnVyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFoVyxFQUFvWCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFwWCxFQUF3WSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF4WSxFQUE0WixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE1WixFQUFnYixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUss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dW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0cy5ydW5BbmltYXRpb25zID0gZmFsc2U7XG5leHBvcnRzLnBvcCA9IHRydWU7XG5leHBvcnRzLmNhbnZhc0lkID0gJ2NhbnZhcyc7XG5leHBvcnRzLm1heFNoYXBlcyA9IDIwO1xuXG5leHBvcnRzLnBhbGV0dGUgPSB7XG4gIGNvbG9yczogW1wiIzIwMTcxQ1wiLCBcIiMxRTJBNDNcIiwgXCIjMjgzNzdEXCIsIFwiIzM1Mjc0N1wiLCBcIiNDQTJFMjZcIiwgXCIjOUEyQTFGXCIsIFwiI0RBNkMyNlwiLCBcIiM0NTMxMjFcIiwgXCIjOTE2QTQ3XCIsIFwiI0RBQUQyN1wiLCBcIiM3RjdEMzFcIixcIiMyQjVFMkVcIl0sXG4gIGNvbG9yTmFtZXM6IHtcbiAgICBcIiMyMDE3MUNcIjogXCJibGFja1wiLFxuICAgIFwiIzFFMkE0M1wiOiBcImJsdWVcIixcbiAgICBcIiMyODM3N0RcIjogXCJibHVlXCIsXG4gICAgXCIjMzUyNzQ3XCI6IFwiYmx1ZVwiLFxuICAgIFwiI0NBMkUyNlwiOiBcInJlZFwiLFxuICAgIFwiIzlBMkExRlwiOiBcInJlZFwiLFxuICAgIFwiI0RBNkMyNlwiOiBcIm9yYW5nZVwiLFxuICAgIFwiIzQ1MzEyMVwiOiBcImJyb3duXCIsXG4gICAgXCIjOTE2QTQ3XCI6IFwiYnJvd25cIixcbiAgICBcIiNEQUFEMjdcIjogXCJvcmFuZ2VcIixcbiAgICBcIiM3RjdEMzFcIjogXCJncmVlblwiLFxuICAgIFwiIzJCNUUyRVwiOiBcImdyZWVuXCJcbiAgfSxcbiAgZ3JhZGllbnRzOiB7XG4gICAgJyMyMDE3MUMnOiBbJyMyMDE3MUMnLCAnIzAwMDAwMCddLFxuICAgICcjMUUyQTQzJzogWycjMUUyQTQzJywgJyMyNjMxNjYnXSxcbiAgICAnIzI4Mzc3RCc6IFsnIzI4Mzc3RCcsICcjMUU0Njk1J10sXG4gICAgJyMzNTI3NDcnOiBbJyMzNTI3NDcnLCAnIzQ1MDA1QiddLFxuICAgICcjQ0EyRTI2JzogWycjQ0EyRTI2JywgJyM5QjM1MkYnXSxcbiAgICAnIzlBMkExRic6IFsnIzlBMkExRicsICcjQ0QzNjIxJ10sXG4gICAgJyNEQTZDMjYnOiBbJyNEQTZDMjYnLCAnI0JENDgyMCddLFxuICAgICcjNDUzMTIxJzogWycjNDUzMTIxJywgJyMyODE4MDYnXSxcbiAgICAnIzkxNkE0Nyc6IFsnIzkxNkE0NycsICcjNjIzQTIyJ10sXG4gICAgJyNEQUFEMjcnOiBbJyNEQUFEMjcnLCAnI0FGODcxRCddLFxuICAgICcjN0Y3RDMxJzogWycjN0Y3RDMxJywgJyM1NTU4MjcnXSxcbiAgICAnIzJCNUUyRSc6IFsnIzJCNUUyRScsICcjMTY0NTFEJ10sXG4gIH0sXG4gIHBvcHM6IFtcIiMwMEFERUZcIiwgXCIjRjI4NUE1XCIsIFwiIzdEQzU3RlwiLCBcIiNGNkVCMTZcIiwgXCIjRjRFQUUwXCJdLFxuICBjb2xvclNpemU6IDIwLFxuICBzZWxlY3RlZENvbG9yU2l6ZTogMzBcbn07XG5cbmV4cG9ydHMuY29udGV4dHVhbFR1dHMgPSBbXG4gIHtcbiAgICB0eXBlOiBcImZpbGxcIixcbiAgICBjb3B5OiBcIjxzdHJvbmc+RG91YmxlLXRhcDwvc3Ryb25nPiBhIGZpbGxlZCBzaGFwZSB0byA8c3Ryb25nPlVORklMTDwvc3Ryb25nPiBpdC4gUmVwZWF0IHRvIDxzdHJvbmc+RklMTDwvc3Ryb25nPiBhbiB1bmZpbGxlZCBzaGFwZS5cIixcbiAgfSxcbiAge1xuICAgIHR5cGU6IFwicGluY2hcIixcbiAgICBjb3B5OiBcIjxzdHJvbmc+UGluY2g8L3N0cm9uZz4gc2hhcGVzIHdpdGggPHN0cm9uZz5UV08gRklOR0VSUzwvc3Ryb25nPiB0byA8c3Ryb25nPnJlc2l6ZTwvc3Ryb25nPiBhbmQgPHN0cm9uZz5tb3ZlPC9zdHJvbmc+IHRoZW0uXCIsXG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInN3aXBlXCIsXG4gICAgY29weTogXCJUbyA8c3Ryb25nPnJlbW92ZTwvc3Ryb25nPiBzaGFwZXMsIDxzdHJvbmc+cGluY2g8L3N0cm9uZz4gd2l0aCA8c3Ryb25nPnR3byBmaW5nZXJzPC9zdHJvbmc+IHRoZW4gPHN0cm9uZz5zd2lwZTwvc3Ryb25nPiBvciBoaXQgPHN0cm9uZz51bmRvPC9zdHJvbmc+LlwiXG4gIH0sXG5dO1xuIiwiLyogQHByZXNlcnZlXG4gKiBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbiAqIFxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTcgUGV0a2EgQW50b25vdlxuICogXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiBcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqIFxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICogVEhFIFNPRlRXQVJFLlxuICogXG4gKi9cbi8qKlxuICogYmx1ZWJpcmQgYnVpbGQgdmVyc2lvbiAzLjUuMFxuICogRmVhdHVyZXMgZW5hYmxlZDogY29yZSwgcmFjZSwgY2FsbF9nZXQsIGdlbmVyYXRvcnMsIG1hcCwgbm9kZWlmeSwgcHJvbWlzaWZ5LCBwcm9wcywgcmVkdWNlLCBzZXR0bGUsIHNvbWUsIHVzaW5nLCB0aW1lcnMsIGZpbHRlciwgYW55LCBlYWNoXG4qL1xuIWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgZjtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P2Y9d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Zj1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJihmPXNlbGYpLGYuUHJvbWlzZT1lKCl9fShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgX2RlcmVxXz09XCJmdW5jdGlvblwiJiZfZGVyZXFfO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiBfZGVyZXFfPT1cImZ1bmN0aW9uXCImJl9kZXJlcV87Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgU29tZVByb21pc2VBcnJheSA9IFByb21pc2UuX1NvbWVQcm9taXNlQXJyYXk7XG5mdW5jdGlvbiBhbnkocHJvbWlzZXMpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICByZXQuc2V0SG93TWFueSgxKTtcbiAgICByZXQuc2V0VW53cmFwKCk7XG4gICAgcmV0LmluaXQoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5hbnkgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gYW55KHByb21pc2VzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYW55KHRoaXMpO1xufTtcblxufTtcblxufSx7fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBmaXJzdExpbmVFcnJvcjtcbnRyeSB7dGhyb3cgbmV3IEVycm9yKCk7IH0gY2F0Y2ggKGUpIHtmaXJzdExpbmVFcnJvciA9IGU7fVxudmFyIHNjaGVkdWxlID0gX2RlcmVxXyhcIi4vc2NoZWR1bGVcIik7XG52YXIgUXVldWUgPSBfZGVyZXFfKFwiLi9xdWV1ZVwiKTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxuZnVuY3Rpb24gQXN5bmMoKSB7XG4gICAgdGhpcy5fY3VzdG9tU2NoZWR1bGVyID0gZmFsc2U7XG4gICAgdGhpcy5faXNUaWNrVXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2xhdGVRdWV1ZSA9IG5ldyBRdWV1ZSgxNik7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUgPSBuZXcgUXVldWUoMTYpO1xuICAgIHRoaXMuX2hhdmVEcmFpbmVkUXVldWVzID0gZmFsc2U7XG4gICAgdGhpcy5fdHJhbXBvbGluZUVuYWJsZWQgPSB0cnVlO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmRyYWluUXVldWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLl9kcmFpblF1ZXVlcygpO1xuICAgIH07XG4gICAgdGhpcy5fc2NoZWR1bGUgPSBzY2hlZHVsZTtcbn1cblxuQXN5bmMucHJvdG90eXBlLnNldFNjaGVkdWxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIHByZXYgPSB0aGlzLl9zY2hlZHVsZTtcbiAgICB0aGlzLl9zY2hlZHVsZSA9IGZuO1xuICAgIHRoaXMuX2N1c3RvbVNjaGVkdWxlciA9IHRydWU7XG4gICAgcmV0dXJuIHByZXY7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuaGFzQ3VzdG9tU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbVNjaGVkdWxlcjtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5lbmFibGVUcmFtcG9saW5lID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdHJhbXBvbGluZUVuYWJsZWQgPSB0cnVlO1xufTtcblxuQXN5bmMucHJvdG90eXBlLmRpc2FibGVUcmFtcG9saW5lSWZOZWNlc3NhcnkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5oYXNEZXZUb29scykge1xuICAgICAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5oYXZlSXRlbXNRdWV1ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzVGlja1VzZWQgfHwgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXM7XG59O1xuXG5cbkFzeW5jLnByb3RvdHlwZS5mYXRhbEVycm9yID0gZnVuY3Rpb24oZSwgaXNOb2RlKSB7XG4gICAgaWYgKGlzTm9kZSkge1xuICAgICAgICBwcm9jZXNzLnN0ZGVyci53cml0ZShcIkZhdGFsIFwiICsgKGUgaW5zdGFuY2VvZiBFcnJvciA/IGUuc3RhY2sgOiBlKSArXG4gICAgICAgICAgICBcIlxcblwiKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGhyb3dMYXRlcihlKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUudGhyb3dMYXRlciA9IGZ1bmN0aW9uKGZuLCBhcmcpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhcmcgPSBmbjtcbiAgICAgICAgZm4gPSBmdW5jdGlvbiAoKSB7IHRocm93IGFyZzsgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmbihhcmcpO1xuICAgICAgICB9LCAwKTtcbiAgICB9IGVsc2UgdHJ5IHtcbiAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmbihhcmcpO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFzeW5jIHNjaGVkdWxlciBhdmFpbGFibGVcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIEFzeW5jSW52b2tlTGF0ZXIoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl9sYXRlUXVldWUucHVzaChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmZ1bmN0aW9uIEFzeW5jSW52b2tlKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUucHVzaChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmZ1bmN0aW9uIEFzeW5jU2V0dGxlUHJvbWlzZXMocHJvbWlzZSkge1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLl9wdXNoT25lKHByb21pc2UpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufVxuXG5pZiAoIXV0aWwuaGFzRGV2VG9vbHMpIHtcbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlTGF0ZXIgPSBBc3luY0ludm9rZUxhdGVyO1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2UgPSBBc3luY0ludm9rZTtcbiAgICBBc3luYy5wcm90b3R5cGUuc2V0dGxlUHJvbWlzZXMgPSBBc3luY1NldHRsZVByb21pc2VzO1xufSBlbHNlIHtcbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlTGF0ZXIgPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkKSB7XG4gICAgICAgICAgICBBc3luY0ludm9rZUxhdGVyLmNhbGwodGhpcywgZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZm4uY2FsbChyZWNlaXZlciwgYXJnKTtcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jSW52b2tlLmNhbGwodGhpcywgZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbChyZWNlaXZlciwgYXJnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEFzeW5jLnByb3RvdHlwZS5zZXR0bGVQcm9taXNlcyA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkKSB7XG4gICAgICAgICAgICBBc3luY1NldHRsZVByb21pc2VzLmNhbGwodGhpcywgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9zZXR0bGVQcm9taXNlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbihxdWV1ZSkge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBmbi5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWNlaXZlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHZhciBhcmcgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9ub3JtYWxRdWV1ZSk7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcyA9IHRydWU7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9sYXRlUXVldWUpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl9xdWV1ZVRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1RpY2tVc2VkKSB7XG4gICAgICAgIHRoaXMuX2lzVGlja1VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zY2hlZHVsZSh0aGlzLmRyYWluUXVldWVzKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2lzVGlja1VzZWQgPSBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQXN5bmM7XG5tb2R1bGUuZXhwb3J0cy5maXJzdExpbmVFcnJvciA9IGZpcnN0TGluZUVycm9yO1xuXG59LHtcIi4vcXVldWVcIjoyNixcIi4vc2NoZWR1bGVcIjoyOSxcIi4vdXRpbFwiOjM2fV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGRlYnVnKSB7XG52YXIgY2FsbGVkQmluZCA9IGZhbHNlO1xudmFyIHJlamVjdFRoaXMgPSBmdW5jdGlvbihfLCBlKSB7XG4gICAgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxudmFyIHRhcmdldFJlamVjdGVkID0gZnVuY3Rpb24oZSwgY29udGV4dCkge1xuICAgIGNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCA9IHRydWU7XG4gICAgY29udGV4dC5iaW5kaW5nUHJvbWlzZS5fdGhlbihyZWplY3RUaGlzLCByZWplY3RUaGlzLCBudWxsLCB0aGlzLCBlKTtcbn07XG5cbnZhciBiaW5kaW5nUmVzb2x2ZWQgPSBmdW5jdGlvbih0aGlzQXJnLCBjb250ZXh0KSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayhjb250ZXh0LnRhcmdldCk7XG4gICAgfVxufTtcblxudmFyIGJpbmRpbmdSZWplY3RlZCA9IGZ1bmN0aW9uKGUsIGNvbnRleHQpIHtcbiAgICBpZiAoIWNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCkgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnKSB7XG4gICAgaWYgKCFjYWxsZWRCaW5kKSB7XG4gICAgICAgIGNhbGxlZEJpbmQgPSB0cnVlO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGRlYnVnLnByb3BhZ2F0ZUZyb21GdW5jdGlvbigpO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYm91bmRWYWx1ZSA9IGRlYnVnLmJvdW5kVmFsdWVGdW5jdGlvbigpO1xuICAgIH1cbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzQXJnKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fcHJvcGFnYXRlRnJvbSh0aGlzLCAxKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgcmV0Ll9zZXRCb3VuZFRvKG1heWJlUHJvbWlzZSk7XG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7XG4gICAgICAgICAgICBwcm9taXNlUmVqZWN0aW9uUXVldWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHByb21pc2U6IHJldCxcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgYmluZGluZ1Byb21pc2U6IG1heWJlUHJvbWlzZVxuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQuX3RoZW4oSU5URVJOQUwsIHRhcmdldFJlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgIGJpbmRpbmdSZXNvbHZlZCwgYmluZGluZ1JlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIHJldC5fc2V0T25DYW5jZWwobWF5YmVQcm9taXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQuX3Jlc29sdmVDYWxsYmFjayh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEJvdW5kVG8gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyMDk3MTUyO1xuICAgICAgICB0aGlzLl9ib3VuZFRvID0gb2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjIwOTcxNTIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0JvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSA9PT0gMjA5NzE1Mjtcbn07XG5cblByb21pc2UuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnLCB2YWx1ZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLmJpbmQodGhpc0FyZyk7XG59O1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBvbGQ7XG5pZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIpIG9sZCA9IFByb21pc2U7XG5mdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgIHRyeSB7IGlmIChQcm9taXNlID09PSBibHVlYmlyZCkgUHJvbWlzZSA9IG9sZDsgfVxuICAgIGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBibHVlYmlyZDtcbn1cbnZhciBibHVlYmlyZCA9IF9kZXJlcV8oXCIuL3Byb21pc2VcIikoKTtcbmJsdWViaXJkLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xubW9kdWxlLmV4cG9ydHMgPSBibHVlYmlyZDtcblxufSx7XCIuL3Byb21pc2VcIjoyMn1dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY3IgPSBPYmplY3QuY3JlYXRlO1xuaWYgKGNyKSB7XG4gICAgdmFyIGNhbGxlckNhY2hlID0gY3IobnVsbCk7XG4gICAgdmFyIGdldHRlckNhY2hlID0gY3IobnVsbCk7XG4gICAgY2FsbGVyQ2FjaGVbXCIgc2l6ZVwiXSA9IGdldHRlckNhY2hlW1wiIHNpemVcIl0gPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgaXNJZGVudGlmaWVyID0gdXRpbC5pc0lkZW50aWZpZXI7XG5cbnZhciBnZXRNZXRob2RDYWxsZXI7XG52YXIgZ2V0R2V0dGVyO1xuaWYgKCF0cnVlKSB7XG52YXIgbWFrZU1ldGhvZENhbGxlciA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcImVuc3VyZU1ldGhvZFwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBlbnN1cmVNZXRob2Qob2JqLCAnbWV0aG9kTmFtZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSk7ICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSwgdGhpc1syXSk7ICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubWV0aG9kTmFtZS5hcHBseShvYmosIHRoaXMpOyAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoL21ldGhvZE5hbWUvZywgbWV0aG9kTmFtZSkpKGVuc3VyZU1ldGhvZCk7XG59O1xuXG52YXIgbWFrZUdldHRlciA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwib2JqXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIG9iai5wcm9wZXJ0eU5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcInByb3BlcnR5TmFtZVwiLCBwcm9wZXJ0eU5hbWUpKTtcbn07XG5cbnZhciBnZXRDb21waWxlZCA9IGZ1bmN0aW9uKG5hbWUsIGNvbXBpbGVyLCBjYWNoZSkge1xuICAgIHZhciByZXQgPSBjYWNoZVtuYW1lXTtcbiAgICBpZiAodHlwZW9mIHJldCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghaXNJZGVudGlmaWVyKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXQgPSBjb21waWxlcihuYW1lKTtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSByZXQ7XG4gICAgICAgIGNhY2hlW1wiIHNpemVcIl0rKztcbiAgICAgICAgaWYgKGNhY2hlW1wiIHNpemVcIl0gPiA1MTIpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY2FjaGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkgZGVsZXRlIGNhY2hlW2tleXNbaV1dO1xuICAgICAgICAgICAgY2FjaGVbXCIgc2l6ZVwiXSA9IGtleXMubGVuZ3RoIC0gMjU2O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5nZXRNZXRob2RDYWxsZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VNZXRob2RDYWxsZXIsIGNhbGxlckNhY2hlKTtcbn07XG5cbmdldEdldHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0Q29tcGlsZWQobmFtZSwgbWFrZUdldHRlciwgZ2V0dGVyQ2FjaGUpO1xufTtcbn1cblxuZnVuY3Rpb24gZW5zdXJlTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSkge1xuICAgIHZhciBmbjtcbiAgICBpZiAob2JqICE9IG51bGwpIGZuID0gb2JqW21ldGhvZE5hbWVdO1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiT2JqZWN0IFwiICsgdXRpbC5jbGFzc1N0cmluZyhvYmopICsgXCIgaGFzIG5vIG1ldGhvZCAnXCIgK1xuICAgICAgICAgICAgdXRpbC50b1N0cmluZyhtZXRob2ROYW1lKSArIFwiJ1wiO1xuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZS5UeXBlRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbn1cblxuZnVuY3Rpb24gY2FsbGVyKG9iaikge1xuICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5wb3AoKTtcbiAgICB2YXIgZm4gPSBlbnN1cmVNZXRob2Qob2JqLCBtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gZm4uYXBwbHkob2JqLCB0aGlzKTtcbn1cblByb21pc2UucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOztcbiAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgaWYgKGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICB2YXIgbWF5YmVDYWxsZXIgPSBnZXRNZXRob2RDYWxsZXIobWV0aG9kTmFtZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVDYWxsZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVDYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFyZ3MucHVzaChtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihjYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xufTtcblxuZnVuY3Rpb24gbmFtZWRHZXR0ZXIob2JqKSB7XG4gICAgcmV0dXJuIG9ialt0aGlzXTtcbn1cbmZ1bmN0aW9uIGluZGV4ZWRHZXR0ZXIob2JqKSB7XG4gICAgdmFyIGluZGV4ID0gK3RoaXM7XG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBNYXRoLm1heCgwLCBpbmRleCArIG9iai5sZW5ndGgpO1xuICAgIHJldHVybiBvYmpbaW5kZXhdO1xufVxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBpc0luZGV4ID0gKHR5cGVvZiBwcm9wZXJ0eU5hbWUgPT09IFwibnVtYmVyXCIpO1xuICAgIHZhciBnZXR0ZXI7XG4gICAgaWYgKCFpc0luZGV4KSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlR2V0dGVyID0gZ2V0R2V0dGVyKHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBnZXR0ZXIgPSBtYXliZUdldHRlciAhPT0gbnVsbCA/IG1heWJlR2V0dGVyIDogbmFtZWRHZXR0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXR0ZXIgPSBuYW1lZEdldHRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGluZGV4ZWRHZXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKGdldHRlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcImJyZWFrXCJdID0gUHJvbWlzZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFkZWJ1Zy5jYW5jZWxsYXRpb24oKSkgcmV0dXJuIHRoaXMuX3dhcm4oXCJjYW5jZWxsYXRpb24gaXMgZGlzYWJsZWRcIik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNoaWxkID0gcHJvbWlzZTtcbiAgICB3aGlsZSAocHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIGlmICghcHJvbWlzZS5fY2FuY2VsQnkoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuX2NhbmNlbEJyYW5jaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnQgPSBwcm9taXNlLl9jYW5jZWxsYXRpb25QYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCB8fCAhcGFyZW50Ll9pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlLl9pc0ZvbGxvd2luZygpKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fY2FuY2VsQnJhbmNoZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHByb21pc2UuX2ZvbGxvd2VlKCkuY2FuY2VsKCk7XG4gICAgICAgICAgICBwcm9taXNlLl9zZXRXaWxsQmVDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHByb21pc2UgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYnJhbmNoSGFzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbC0tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA8PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJ5ID0gZnVuY3Rpb24oY2FuY2VsbGVyKSB7XG4gICAgaWYgKGNhbmNlbGxlciA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnJhbmNoSGFzQ2FuY2VsbGVkKCk7XG4gICAgICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxCcmFuY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl9zZXRDYW5jZWxsZWQoKTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fY2FuY2VsUHJvbWlzZXMsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsUHJvbWlzZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fbGVuZ3RoKCkgPiAwKSB0aGlzLl9zZXR0bGVQcm9taXNlcygpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0T25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5faXNDYW5jZWxsZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2RvSW52b2tlT25DYW5jZWwgPSBmdW5jdGlvbihvbkNhbmNlbENhbGxiYWNrLCBpbnRlcm5hbE9ubHkpIHtcbiAgICBpZiAodXRpbC5pc0FycmF5KG9uQ2FuY2VsQ2FsbGJhY2spKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25DYW5jZWxDYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbChvbkNhbmNlbENhbGxiYWNrW2ldLCBpbnRlcm5hbE9ubHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvbkNhbmNlbENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbENhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJuYWxPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0cnlDYXRjaChvbkNhbmNlbENhbGxiYWNrKS5jYWxsKHRoaXMuX2JvdW5kVmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZS5lKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlLmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2FsbGJhY2suX3Jlc3VsdENhbmNlbGxlZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbkNhbmNlbENhbGxiYWNrID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICB0aGlzLl91bnNldE9uQ2FuY2VsKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2RvSW52b2tlT25DYW5jZWwsIHRoaXMsIG9uQ2FuY2VsQ2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZUludGVybmFsT25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuX2RvSW52b2tlT25DYW5jZWwodGhpcy5fb25DYW5jZWwoKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3Vuc2V0T25DYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSw3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihORVhUX0ZJTFRFUikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGdldEtleXMgPSBfZGVyZXFfKFwiLi9lczVcIikua2V5cztcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xuXG5mdW5jdGlvbiBjYXRjaEZpbHRlcihpbnN0YW5jZXMsIGNiLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGJvdW5kVG8gPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgIHByZWRpY2F0ZUxvb3A6IGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGluc3RhbmNlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IEVycm9yIHx8XG4gICAgICAgICAgICAgICAgKGl0ZW0gIT0gbnVsbCAmJiBpdGVtLnByb3RvdHlwZSBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXNQcmVkaWNhdGUgPSB0cnlDYXRjaChpdGVtKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzUHJlZGljYXRlID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1ByZWRpY2F0ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXNQcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXRpbC5pc09iamVjdChlKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gZ2V0S2V5cyhpdGVtKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gIT0gZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBwcmVkaWNhdGVMb29wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTkVYVF9GSUxURVI7XG4gICAgfTtcbn1cblxucmV0dXJuIGNhdGNoRmlsdGVyO1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG52YXIgY29udGV4dFN0YWNrID0gW107XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gbnVsbDt9O1xuUHJvbWlzZS5fcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuXG5mdW5jdGlvbiBDb250ZXh0KCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENvbnRleHQuQ2FwdHVyZWRUcmFjZShwZWVrQ29udGV4dCgpKTtcbn1cbkNvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl90cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICBjb250ZXh0U3RhY2sucHVzaCh0aGlzLl90cmFjZSk7XG4gICAgfVxufTtcblxuQ29udGV4dC5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3RyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHRyYWNlID0gY29udGV4dFN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgcmV0ID0gdHJhY2UuX3Byb21pc2VDcmVhdGVkO1xuICAgICAgICB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQoKSB7XG4gICAgaWYgKGxvbmdTdGFja1RyYWNlcykgcmV0dXJuIG5ldyBDb250ZXh0KCk7XG59XG5cbmZ1bmN0aW9uIHBlZWtDb250ZXh0KCkge1xuICAgIHZhciBsYXN0SW5kZXggPSBjb250ZXh0U3RhY2subGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdEluZGV4ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRTdGFja1tsYXN0SW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuQ29udGV4dC5DYXB0dXJlZFRyYWNlID0gbnVsbDtcbkNvbnRleHQuY3JlYXRlID0gY3JlYXRlQ29udGV4dDtcbkNvbnRleHQuZGVhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge307XG5Db250ZXh0LmFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFByb21pc2VfcHVzaENvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcG9wQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIHZhciBQcm9taXNlX1BlZWtDb250ZXh0ID0gUHJvbWlzZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcHJvbWlzZUNyZWF0ZWQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IFByb21pc2VfcHVzaENvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0ID0gUHJvbWlzZV9wb3BDb250ZXh0O1xuICAgICAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfUGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfcGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2VfcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIGxvbmdTdGFja1RyYWNlcyA9IGZhbHNlO1xuICAgIH07XG4gICAgbG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dDtcbiAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IHBlZWtDb250ZXh0O1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fcGVla0NvbnRleHQoKTtcbiAgICAgICAgaWYgKGN0eCAmJiBjdHguX3Byb21pc2VDcmVhdGVkID09IG51bGwpIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPSB0aGlzO1xuICAgIH07XG59O1xucmV0dXJuIENvbnRleHQ7XG59O1xuXG59LHt9XSw5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBDb250ZXh0KSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgV2FybmluZyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5XYXJuaW5nO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkF0dGFjaFRyYWNlID0gdXRpbC5jYW5BdHRhY2hUcmFjZTtcbnZhciB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkO1xudmFyIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uO1xudmFyIGJsdWViaXJkRnJhbWVQYXR0ZXJuID1cbiAgICAvW1xcXFxcXC9dYmx1ZWJpcmRbXFxcXFxcL11qc1tcXFxcXFwvXShyZWxlYXNlfGRlYnVnfGluc3RydW1lbnRlZCkvO1xudmFyIG5vZGVGcmFtZVBhdHRlcm4gPSAvXFwoKD86dGltZXJzXFwuanMpOlxcZCs6XFxkK1xcKS87XG52YXIgcGFyc2VMaW5lUGF0dGVybiA9IC9bXFwvPFxcKF0oLis/KTooXFxkKyk6KFxcZCspXFwpP1xccyokLztcbnZhciBzdGFja0ZyYW1lUGF0dGVybiA9IG51bGw7XG52YXIgZm9ybWF0U3RhY2sgPSBudWxsO1xudmFyIGluZGVudFN0YWNrRnJhbWVzID0gZmFsc2U7XG52YXIgcHJpbnRXYXJuaW5nO1xudmFyIGRlYnVnZ2luZyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfREVCVUdcIikgIT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHRydWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmVudihcIkJMVUVCSVJEX0RFQlVHXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5lbnYoXCJOT0RFX0VOVlwiKSA9PT0gXCJkZXZlbG9wbWVudFwiKSk7XG5cbnZhciB3YXJuaW5ncyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfV0FSTklOR1NcIikgIT0gMCAmJlxuICAgIChkZWJ1Z2dpbmcgfHwgdXRpbC5lbnYoXCJCTFVFQklSRF9XQVJOSU5HU1wiKSkpO1xuXG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gISEodXRpbC5lbnYoXCJCTFVFQklSRF9MT05HX1NUQUNLX1RSQUNFU1wiKSAhPSAwICYmXG4gICAgKGRlYnVnZ2luZyB8fCB1dGlsLmVudihcIkJMVUVCSVJEX0xPTkdfU1RBQ0tfVFJBQ0VTXCIpKSk7XG5cbnZhciB3Rm9yZ290dGVuUmV0dXJuID0gdXRpbC5lbnYoXCJCTFVFQklSRF9XX0ZPUkdPVFRFTl9SRVRVUk5cIikgIT0gMCAmJlxuICAgICh3YXJuaW5ncyB8fCAhIXV0aWwuZW52KFwiQkxVRUJJUkRfV19GT1JHT1RURU5fUkVUVVJOXCIpKTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHRhcmdldC5fYml0RmllbGQgPSAoKHRhcmdldC5fYml0RmllbGQgJiAofjEwNDg1NzYpKSB8XG4gICAgICAgICAgICAgICAgICAgICAgNTI0Mjg4KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9lbnN1cmVQb3NzaWJsZVJlamVjdGlvbkhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCh0aGlzLl9iaXRGaWVsZCAmIDUyNDI4OCkgIT09IDApIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIGFzeW5jLmludm9rZUxhdGVyKHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZmlyZVJlamVjdGlvbkV2ZW50KFwicmVqZWN0aW9uSGFuZGxlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQsIHVuZGVmaW5lZCwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjY4NDM1NDU2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JldHVybmVkTm9uVW5kZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDI2ODQzNTQ1NikgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1JlamVjdGlvblVuaGFuZGxlZCgpKSB7XG4gICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbiAgICAgICAgdGhpcy5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICBmaXJlUmVqZWN0aW9uRXZlbnQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24sIHJlYXNvbiwgdGhpcyk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDI2MjE0NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MjYyMTQ0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjIxNDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTA0ODU3Njtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEwNDg1NzYpO1xuICAgIGlmICh0aGlzLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkKCkpIHtcbiAgICAgICAgdGhpcy5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkKCk7XG4gICAgICAgIHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbklzSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1JlamVjdGlvblVuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTA0ODU3NikgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3dhcm4gPSBmdW5jdGlvbihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSkge1xuICAgIHJldHVybiB3YXJuKG1lc3NhZ2UsIHNob3VsZFVzZU93blRyYWNlLCBwcm9taXNlIHx8IHRoaXMpO1xufTtcblxuUHJvbWlzZS5vblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID1cbiAgICAgICAgdHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyAoZG9tYWluID09PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2Uub25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQgPVxuICAgICAgICB0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IChkb21haW4gPT09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xufTtcblxudmFyIGRpc2FibGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICB2YXIgUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgdmFyIFByb21pc2VfYXR0YWNoRXh0cmFUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICBjb25maWcubG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IGVuYWJsZSBsb25nIHN0YWNrIHRyYWNlcyBhZnRlciBwcm9taXNlcyBoYXZlIGJlZW4gY3JlYXRlZFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2UgPSBQcm9taXNlX2NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgICAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgICAgIGFzeW5jLmVuYWJsZVRyYW1wb2xpbmUoKTtcbiAgICAgICAgICAgIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQ2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgQ29udGV4dC5hY3RpdmF0ZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICBhc3luYy5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5KCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKTtcbn07XG5cbnZhciBmaXJlRG9tRXZlbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KG5hbWUudG9Mb3dlckNhc2UoKSwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGRvbUV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBuZXcgRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5kZXRhaWwgPSBldmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZG9tRXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgICAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQoXCJ0ZXN0aW5ndGhlZXZlbnRcIiwgZmFsc2UsIHRydWUsIHt9KTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5pbml0Q3VzdG9tRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCBmYWxzZSwgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufSkoKTtcblxudmFyIGZpcmVHbG9iYWxFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5pc05vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdC5hcHBseShwcm9jZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdXRpbC5nbG9iYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IFwib25cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB1dGlsLmdsb2JhbFttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBtZXRob2QuYXBwbHkodXRpbC5nbG9iYWwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdChuYW1lLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlfTtcbn1cblxudmFyIGV2ZW50VG9PYmplY3RHZW5lcmF0b3IgPSB7XG4gICAgcHJvbWlzZUNyZWF0ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VGdWxmaWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VSZWplY3RlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlc29sdmVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2FuY2VsbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2hhaW5lZDogZnVuY3Rpb24obmFtZSwgcHJvbWlzZSwgY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlLCBjaGlsZDogY2hpbGR9O1xuICAgIH0sXG4gICAgd2FybmluZzogZnVuY3Rpb24obmFtZSwgd2FybmluZykge1xuICAgICAgICByZXR1cm4ge3dhcm5pbmc6IHdhcm5pbmd9O1xuICAgIH0sXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uOiBmdW5jdGlvbiAobmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB7cmVhc29uOiByZWFzb24sIHByb21pc2U6IHByb21pc2V9O1xuICAgIH0sXG4gICAgcmVqZWN0aW9uSGFuZGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3Rcbn07XG5cbnZhciBhY3RpdmVGaXJlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBnbG9iYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IGZpcmVHbG9iYWxFdmVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRvbUV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb21FdmVudEZpcmVkID0gZmlyZURvbUV2ZW50KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9PYmplY3RHZW5lcmF0b3JbbmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBkb21FdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tRXZlbnRGaXJlZCB8fCBnbG9iYWxFdmVudEZpcmVkO1xufTtcblxuUHJvbWlzZS5jb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IE9iamVjdChvcHRzKTtcbiAgICBpZiAoXCJsb25nU3RhY2tUcmFjZXNcIiBpbiBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5sb25nU3RhY2tUcmFjZXMgJiYgUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMoKSkge1xuICAgICAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIndhcm5pbmdzXCIgaW4gb3B0cykge1xuICAgICAgICB2YXIgd2FybmluZ3NPcHRpb24gPSBvcHRzLndhcm5pbmdzO1xuICAgICAgICBjb25maWcud2FybmluZ3MgPSAhIXdhcm5pbmdzT3B0aW9uO1xuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gY29uZmlnLndhcm5pbmdzO1xuXG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KHdhcm5pbmdzT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKFwid0ZvcmdvdHRlblJldHVyblwiIGluIHdhcm5pbmdzT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgd0ZvcmdvdHRlblJldHVybiA9ICEhd2FybmluZ3NPcHRpb24ud0ZvcmdvdHRlblJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJjYW5jZWxsYXRpb25cIiBpbiBvcHRzICYmIG9wdHMuY2FuY2VsbGF0aW9uICYmICFjb25maWcuY2FuY2VsbGF0aW9uKSB7XG4gICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiY2Fubm90IGVuYWJsZSBjYW5jZWxsYXRpb24gYWZ0ZXIgcHJvbWlzZXMgYXJlIGluIHVzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYW5jZWxsYXRpb25EYXRhID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkNsZWFyQ2FuY2VsbGF0aW9uRGF0YTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBjYW5jZWxsYXRpb25PbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gY2FuY2VsbGF0aW9uU2V0T25DYW5jZWw7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9XG4gICAgICAgICAgICBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjaztcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBjYW5jZWxsYXRpb25FeGVjdXRlO1xuICAgICAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBjb25maWcuY2FuY2VsbGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFwibW9uaXRvcmluZ1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubW9uaXRvcmluZyAmJiAhY29uZmlnLm1vbml0b3JpbmcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tb25pdG9yaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBhY3RpdmVGaXJlRXZlbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdHMubW9uaXRvcmluZyAmJiBjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlO1xufTtcblxuZnVuY3Rpb24gZGVmYXVsdEZpcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihleGVjdXRvciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5Qcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7IDsgfTtcblByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgO1xufTtcblByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBmdW5jdGlvbiAocGFyZW50LCBmbGFncykge1xuICAgIDtcbiAgICA7XG59O1xuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25FeGVjdXRlKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LCBmdW5jdGlvbihvbkNhbmNlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9uQ2FuY2VsIG11c3QgYmUgYSBmdW5jdGlvbiwgZ290OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG9uQ2FuY2VsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCkge1xuICAgIGlmICghdGhpcy5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBwcmV2aW91c09uQ2FuY2VsID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICBpZiAocHJldmlvdXNPbkNhbmNlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh1dGlsLmlzQXJyYXkocHJldmlvdXNPbkNhbmNlbCkpIHtcbiAgICAgICAgICAgIHByZXZpb3VzT25DYW5jZWwucHVzaChvbkNhbmNlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRPbkNhbmNlbChbcHJldmlvdXNPbkNhbmNlbCwgb25DYW5jZWxdKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKG9uQ2FuY2VsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvbk9uQ2FuY2VsKCkge1xuICAgIHJldHVybiB0aGlzLl9vbkNhbmNlbEZpZWxkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25TZXRPbkNhbmNlbChvbkNhbmNlbCkge1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSBvbkNhbmNlbDtcbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uQ2xlYXJDYW5jZWxsYXRpb25EYXRhKCkge1xuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMSkgIT09IDApIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gcGFyZW50O1xuICAgICAgICB2YXIgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IHBhcmVudC5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbDtcbiAgICAgICAgaWYgKGJyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCArIDE7XG4gICAgfVxuICAgIGlmICgoZmxhZ3MgJiAyKSAhPT0gMCAmJiBwYXJlbnQuX2lzQm91bmQoKSkge1xuICAgICAgICB0aGlzLl9zZXRCb3VuZFRvKHBhcmVudC5fYm91bmRUbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiaW5kaW5nUHJvcGFnYXRlRnJvbShwYXJlbnQsIGZsYWdzKSB7XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG52YXIgcHJvcGFnYXRlRnJvbUZ1bmN0aW9uID0gYmluZGluZ1Byb3BhZ2F0ZUZyb207XG5cbmZ1bmN0aW9uIGJvdW5kVmFsdWVGdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fYm91bmRUbztcbiAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXQuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQudmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNDYXB0dXJlU3RhY2tUcmFjZSgpIHtcbiAgICB0aGlzLl90cmFjZSA9IG5ldyBDYXB0dXJlZFRyYWNlKHRoaXMuX3BlZWtDb250ZXh0KCkpO1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNBdHRhY2hFeHRyYVRyYWNlKGVycm9yLCBpZ25vcmVTZWxmKSB7XG4gICAgaWYgKGNhbkF0dGFjaFRyYWNlKGVycm9yKSkge1xuICAgICAgICB2YXIgdHJhY2UgPSB0aGlzLl90cmFjZTtcbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChpZ25vcmVTZWxmKSB0cmFjZSA9IHRyYWNlLl9wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyYWNlLmF0dGFjaEV4dHJhVHJhY2UoZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKCFlcnJvci5fX3N0YWNrQ2xlYW5lZF9fKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VTdGFja0FuZE1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJzdGFja1wiLFxuICAgICAgICAgICAgICAgIHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwiX19zdGFja0NsZWFuZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKHJldHVyblZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgbmFtZSwgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQpIHtcbiAgICBpZiAocmV0dXJuVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBwcm9taXNlQ3JlYXRlZCAhPT0gbnVsbCAmJlxuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuKSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCAmJiBwYXJlbnQuX3JldHVybmVkTm9uVW5kZWZpbmVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKChwcm9taXNlLl9iaXRGaWVsZCAmIDY1NTM1KSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChuYW1lKSBuYW1lID0gbmFtZSArIFwiIFwiO1xuICAgICAgICB2YXIgaGFuZGxlckxpbmUgPSBcIlwiO1xuICAgICAgICB2YXIgY3JlYXRvckxpbmUgPSBcIlwiO1xuICAgICAgICBpZiAocHJvbWlzZUNyZWF0ZWQuX3RyYWNlKSB7XG4gICAgICAgICAgICB2YXIgdHJhY2VMaW5lcyA9IHByb21pc2VDcmVhdGVkLl90cmFjZS5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGNsZWFuU3RhY2sodHJhY2VMaW5lcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZUZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lTWF0Y2hlcyA9IGxpbmUubWF0Y2gocGFyc2VMaW5lUGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lTWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlckxpbmUgID0gXCJhdCBcIiArIGxpbmVNYXRjaGVzWzFdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjpcIiArIGxpbmVNYXRjaGVzWzJdICsgXCI6XCIgKyBsaW5lTWF0Y2hlc1szXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RVc2VyTGluZSA9IHN0YWNrWzBdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2VMaW5lcy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFjZUxpbmVzW2ldID09PSBmaXJzdFVzZXJMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdG9yTGluZSA9IFwiXFxuXCIgKyB0cmFjZUxpbmVzW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1zZyA9IFwiYSBwcm9taXNlIHdhcyBjcmVhdGVkIGluIGEgXCIgKyBuYW1lICtcbiAgICAgICAgICAgIFwiaGFuZGxlciBcIiArIGhhbmRsZXJMaW5lICsgXCJidXQgd2FzIG5vdCByZXR1cm5lZCBmcm9tIGl0LCBcIiArXG4gICAgICAgICAgICBcInNlZSBodHRwOi8vZ29vLmdsL3JScU1Vd1wiICtcbiAgICAgICAgICAgIGNyZWF0b3JMaW5lO1xuICAgICAgICBwcm9taXNlLl93YXJuKG1zZywgdHJ1ZSwgcHJvbWlzZUNyZWF0ZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lLCByZXBsYWNlbWVudCkge1xuICAgIHZhciBtZXNzYWdlID0gbmFtZSArXG4gICAgICAgIFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLlwiO1xuICAgIGlmIChyZXBsYWNlbWVudCkgbWVzc2FnZSArPSBcIiBVc2UgXCIgKyByZXBsYWNlbWVudCArIFwiIGluc3RlYWQuXCI7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICBpZiAoIWNvbmZpZy53YXJuaW5ncykgcmV0dXJuO1xuICAgIHZhciB3YXJuaW5nID0gbmV3IFdhcm5pbmcobWVzc2FnZSk7XG4gICAgdmFyIGN0eDtcbiAgICBpZiAoc2hvdWxkVXNlT3duVHJhY2UpIHtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3YXJuaW5nKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgKGN0eCA9IFByb21pc2UuX3BlZWtDb250ZXh0KCkpKSB7XG4gICAgICAgIGN0eC5hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZSh3YXJuaW5nKTtcbiAgICAgICAgd2FybmluZy5zdGFjayA9IHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KFwid2FybmluZ1wiLCB3YXJuaW5nKSkge1xuICAgICAgICBmb3JtYXRBbmRMb2dFcnJvcih3YXJuaW5nLCBcIlwiLCB0cnVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIHN0YWNrc1tpXS5wdXNoKFwiRnJvbSBwcmV2aW91cyBldmVudDpcIik7XG4gICAgICAgIHN0YWNrc1tpXSA9IHN0YWNrc1tpXS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IHN0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlICsgXCJcXG5cIiArIHN0YWNrcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHN0YWNrc1tpXS5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICgoaSArIDEgPCBzdGFja3MubGVuZ3RoKSAmJiBzdGFja3NbaV1bMF0gPT09IHN0YWNrc1tpKzFdWzBdKSkge1xuICAgICAgICAgICAgc3RhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGFja3NbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHByZXYgPSBzdGFja3NbaV07XG4gICAgICAgIHZhciBjdXJyZW50TGFzdEluZGV4ID0gY3VycmVudC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICAgICAgdmFyIGNvbW1vblJvb3RNZWV0UG9pbnQgPSAtMTtcblxuICAgICAgICBmb3IgKHZhciBqID0gcHJldi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgaWYgKHByZXZbal0gPT09IGN1cnJlbnRMYXN0TGluZSkge1xuICAgICAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBqO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGNvbW1vblJvb3RNZWV0UG9pbnQ7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHByZXZbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQucG9wKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExhc3RJbmRleC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gcHJldjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuU3RhY2soc3RhY2spIHtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmUgfHxcbiAgICAgICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5kZW50U3RhY2tGcmFtZXMgJiYgbGluZS5jaGFyQXQoMCkgIT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiICAgIFwiICsgbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL1xccyskL2csIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzdGFja1tpXTtcbiAgICAgICAgaWYgKFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fCBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDAgJiYgZXJyb3IubmFtZSAhPSBcIlN5bnRheEVycm9yXCIpIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICBzdGFjayA9IHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIiAmJiBzdGFjay5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzdGFja0ZyYW1lc0FzQXJyYXkoZXJyb3IpIDogW1wiICAgIChObyBzdGFjayB0cmFjZSlcIl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLm5hbWUgPT0gXCJTeW50YXhFcnJvclwiID8gc3RhY2sgOiBjbGVhblN0YWNrKHN0YWNrKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFuZExvZ0Vycm9yKGVycm9yLCB0aXRsZSwgaXNTb2Z0KSB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHZhciBtZXNzYWdlO1xuICAgICAgICBpZiAodXRpbC5pc09iamVjdChlcnJvcikpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgZm9ybWF0U3RhY2soc3RhY2ssIGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aXRsZSArIFN0cmluZyhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwcmludFdhcm5pbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcHJpbnRXYXJuaW5nKG1lc3NhZ2UsIGlzU29mdCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbnNvbGUubG9nID09PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpcmVSZWplY3Rpb25FdmVudChuYW1lLCBsb2NhbEhhbmRsZXIsIHJlYXNvbiwgcHJvbWlzZSkge1xuICAgIHZhciBsb2NhbEV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGxvY2FsSGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBsb2NhbEV2ZW50RmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwicmVqZWN0aW9uSGFuZGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxIYW5kbGVyKHByb21pc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSA9PT0gXCJ1bmhhbmRsZWRSZWplY3Rpb25cIikge1xuICAgICAgICBpZiAoIWFjdGl2ZUZpcmVFdmVudChuYW1lLCByZWFzb24sIHByb21pc2UpICYmICFsb2NhbEV2ZW50RmlyZWQpIHtcbiAgICAgICAgICAgIGZvcm1hdEFuZExvZ0Vycm9yKHJlYXNvbiwgXCJVbmhhbmRsZWQgcmVqZWN0aW9uIFwiKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGl2ZUZpcmVFdmVudChuYW1lLCBwcm9taXNlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE5vbkVycm9yKG9iaikge1xuICAgIHZhciBzdHI7XG4gICAgaWYgKHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBzdHIgPSBcIltmdW5jdGlvbiBcIiArXG4gICAgICAgICAgICAob2JqLm5hbWUgfHwgXCJhbm9ueW1vdXNcIikgK1xuICAgICAgICAgICAgXCJdXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gb2JqICYmIHR5cGVvZiBvYmoudG9TdHJpbmcgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBvYmoudG9TdHJpbmcoKSA6IHV0aWwudG9TdHJpbmcob2JqKTtcbiAgICAgICAgdmFyIHJ1c2VsZXNzVG9TdHJpbmcgPSAvXFxbb2JqZWN0IFthLXpBLVowLTkkX10rXFxdLztcbiAgICAgICAgaWYgKHJ1c2VsZXNzVG9TdHJpbmcudGVzdChzdHIpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdTdHIgPSBKU09OLnN0cmluZ2lmeShvYmopO1xuICAgICAgICAgICAgICAgIHN0ciA9IG5ld1N0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzdHIgPSBcIihlbXB0eSBhcnJheSlcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKFwiKDxcIiArIHNuaXAoc3RyKSArIFwiPiwgbm8gc3RhY2sgdHJhY2UpXCIpO1xufVxuXG5mdW5jdGlvbiBzbmlwKHN0cikge1xuICAgIHZhciBtYXhDaGFycyA9IDQxO1xuICAgIGlmIChzdHIubGVuZ3RoIDwgbWF4Q2hhcnMpIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgbWF4Q2hhcnMgLSAzKSArIFwiLi4uXCI7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0eXBlb2YgY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxudmFyIHNob3VsZElnbm9yZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH07XG52YXIgcGFyc2VMaW5lSW5mb1JlZ2V4ID0gL1tcXC88XFwoXShbXjpcXC9dKyk6KFxcZCspOig/OlxcZCspXFwpP1xccyokLztcbmZ1bmN0aW9uIHBhcnNlTGluZUluZm8obGluZSkge1xuICAgIHZhciBtYXRjaGVzID0gbGluZS5tYXRjaChwYXJzZUxpbmVJbmZvUmVnZXgpO1xuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlTmFtZTogbWF0Y2hlc1sxXSxcbiAgICAgICAgICAgIGxpbmU6IHBhcnNlSW50KG1hdGNoZXNbMl0sIDEwKVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0Qm91bmRzKGZpcnN0TGluZUVycm9yLCBsYXN0TGluZUVycm9yKSB7XG4gICAgaWYgKCFsb25nU3RhY2tUcmFjZXNJc1N1cHBvcnRlZCgpKSByZXR1cm47XG4gICAgdmFyIGZpcnN0U3RhY2tMaW5lcyA9IGZpcnN0TGluZUVycm9yLnN0YWNrLnNwbGl0KFwiXFxuXCIpO1xuICAgIHZhciBsYXN0U3RhY2tMaW5lcyA9IGxhc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGZpcnN0SW5kZXggPSAtMTtcbiAgICB2YXIgbGFzdEluZGV4ID0gLTE7XG4gICAgdmFyIGZpcnN0RmlsZU5hbWU7XG4gICAgdmFyIGxhc3RGaWxlTmFtZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0U3RhY2tMaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VMaW5lSW5mbyhmaXJzdFN0YWNrTGluZXNbaV0pO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaXJzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgZmlyc3RJbmRleCA9IHJlc3VsdC5saW5lO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0U3RhY2tMaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VMaW5lSW5mbyhsYXN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGxhc3RGaWxlTmFtZSA9IHJlc3VsdC5maWxlTmFtZTtcbiAgICAgICAgICAgIGxhc3RJbmRleCA9IHJlc3VsdC5saW5lO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpcnN0SW5kZXggPCAwIHx8IGxhc3RJbmRleCA8IDAgfHwgIWZpcnN0RmlsZU5hbWUgfHwgIWxhc3RGaWxlTmFtZSB8fFxuICAgICAgICBmaXJzdEZpbGVOYW1lICE9PSBsYXN0RmlsZU5hbWUgfHwgZmlyc3RJbmRleCA+PSBsYXN0SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNob3VsZElnbm9yZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSkpIHJldHVybiB0cnVlO1xuICAgICAgICB2YXIgaW5mbyA9IHBhcnNlTGluZUluZm8obGluZSk7XG4gICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5maWxlTmFtZSA9PT0gZmlyc3RGaWxlTmFtZSAmJlxuICAgICAgICAgICAgICAgIChmaXJzdEluZGV4IDw9IGluZm8ubGluZSAmJiBpbmZvLmxpbmUgPD0gbGFzdEluZGV4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBDYXB0dXJlZFRyYWNlKHBhcmVudCkge1xuICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLl9wcm9taXNlc0NyZWF0ZWQgPSAwO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSAxICsgKHBhcmVudCA9PT0gdW5kZWZpbmVkID8gMCA6IHBhcmVudC5fbGVuZ3RoKTtcbiAgICBjYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBDYXB0dXJlZFRyYWNlKTtcbiAgICBpZiAobGVuZ3RoID4gMzIpIHRoaXMudW5jeWNsZSgpO1xufVxudXRpbC5pbmhlcml0cyhDYXB0dXJlZFRyYWNlLCBFcnJvcik7XG5Db250ZXh0LkNhcHR1cmVkVHJhY2UgPSBDYXB0dXJlZFRyYWNlO1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS51bmN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgICBpZiAobGVuZ3RoIDwgMikgcmV0dXJuO1xuICAgIHZhciBub2RlcyA9IFtdO1xuICAgIHZhciBzdGFja1RvSW5kZXggPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBub2RlID0gdGhpczsgbm9kZSAhPT0gdW5kZWZpbmVkOyArK2kpIHtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgbm9kZSA9IG5vZGUuX3BhcmVudDtcbiAgICB9XG4gICAgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoID0gaTtcbiAgICBmb3IgKHZhciBpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIHN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIGlmIChzdGFja1RvSW5kZXhbc3RhY2tdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0YWNrVG9JbmRleFtzdGFja10gPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRTdGFjayA9IG5vZGVzW2ldLnN0YWNrO1xuICAgICAgICB2YXIgaW5kZXggPSBzdGFja1RvSW5kZXhbY3VycmVudFN0YWNrXTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQgJiYgaW5kZXggIT09IGkpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgbm9kZXNbaW5kZXggLSAxXS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGVzW2ldLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBub2Rlc1tpXS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHZhciBjeWNsZUVkZ2VOb2RlID0gaSA+IDAgPyBub2Rlc1tpIC0gMV0gOiB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPCBsZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50ID0gbm9kZXNbaW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQudW5jeWNsZSgpO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX2xlbmd0aCA9XG4gICAgICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC5fbGVuZ3RoICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX2xlbmd0aCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3VycmVudENoaWxkTGVuZ3RoID0gY3ljbGVFZGdlTm9kZS5fbGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpIC0gMjsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICBub2Rlc1tqXS5fbGVuZ3RoID0gY3VycmVudENoaWxkTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaGlsZExlbmd0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuQ2FwdHVyZWRUcmFjZS5wcm90b3R5cGUuYXR0YWNoRXh0cmFUcmFjZSA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLl9fc3RhY2tDbGVhbmVkX18pIHJldHVybjtcbiAgICB0aGlzLnVuY3ljbGUoKTtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VTdGFja0FuZE1lc3NhZ2UoZXJyb3IpO1xuICAgIHZhciBtZXNzYWdlID0gcGFyc2VkLm1lc3NhZ2U7XG4gICAgdmFyIHN0YWNrcyA9IFtwYXJzZWQuc3RhY2tdO1xuXG4gICAgdmFyIHRyYWNlID0gdGhpcztcbiAgICB3aGlsZSAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdGFja3MucHVzaChjbGVhblN0YWNrKHRyYWNlLnN0YWNrLnNwbGl0KFwiXFxuXCIpKSk7XG4gICAgICAgIHRyYWNlID0gdHJhY2UuX3BhcmVudDtcbiAgICB9XG4gICAgcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKTtcbiAgICByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcInN0YWNrXCIsIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSk7XG4gICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJfX3N0YWNrQ2xlYW5lZF9fXCIsIHRydWUpO1xufTtcblxudmFyIGNhcHR1cmVTdGFja1RyYWNlID0gKGZ1bmN0aW9uIHN0YWNrRGV0ZWN0aW9uKCkge1xuICAgIHZhciB2OHN0YWNrRnJhbWVQYXR0ZXJuID0gL15cXHMqYXRcXHMqLztcbiAgICB2YXIgdjhzdGFja0Zvcm1hdHRlciA9IGZ1bmN0aW9uKHN0YWNrLCBlcnJvcikge1xuICAgICAgICBpZiAodHlwZW9mIHN0YWNrID09PSBcInN0cmluZ1wiKSByZXR1cm4gc3RhY2s7XG5cbiAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZXJyb3IubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0Tm9uRXJyb3IoZXJyb3IpO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICB0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgKz0gNjtcbiAgICAgICAgc3RhY2tGcmFtZVBhdHRlcm4gPSB2OHN0YWNrRnJhbWVQYXR0ZXJuO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIHZhciBjYXB0dXJlU3RhY2tUcmFjZSA9IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlO1xuXG4gICAgICAgIHNob3VsZElnbm9yZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBibHVlYmlyZEZyYW1lUGF0dGVybi50ZXN0KGxpbmUpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjZWl2ZXIsIGlnbm9yZVVudGlsKSB7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgKz0gNjtcbiAgICAgICAgICAgIGNhcHR1cmVTdGFja1RyYWNlKHJlY2VpdmVyLCBpZ25vcmVVbnRpbCk7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgLT0gNjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuXG4gICAgaWYgKHR5cGVvZiBlcnIuc3RhY2sgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgZXJyLnN0YWNrLnNwbGl0KFwiXFxuXCIpWzBdLmluZGV4T2YoXCJzdGFja0RldGVjdGlvbkBcIikgPj0gMCkge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IC9ALztcbiAgICAgICAgZm9ybWF0U3RhY2sgPSB2OHN0YWNrRm9ybWF0dGVyO1xuICAgICAgICBpbmRlbnRTdGFja0ZyYW1lcyA9IHRydWU7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBjYXB0dXJlU3RhY2tUcmFjZShvKSB7XG4gICAgICAgICAgICBvLnN0YWNrID0gbmV3IEVycm9yKCkuc3RhY2s7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGhhc1N0YWNrQWZ0ZXJUaHJvdztcbiAgICB0cnkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIGNhdGNoKGUpIHtcbiAgICAgICAgaGFzU3RhY2tBZnRlclRocm93ID0gKFwic3RhY2tcIiBpbiBlKTtcbiAgICB9XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIGVycikgJiYgaGFzU3RhY2tBZnRlclRocm93ICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5zdGFja1RyYWNlTGltaXQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgc3RhY2tGcmFtZVBhdHRlcm4gPSB2OHN0YWNrRnJhbWVQYXR0ZXJuO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBjYXB0dXJlU3RhY2tUcmFjZShvKSB7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgKz0gNjtcbiAgICAgICAgICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgICAgICAgICBjYXRjaChlKSB7IG8uc3RhY2sgPSBlLnN0YWNrOyB9XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgLT0gNjtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmb3JtYXRTdGFjayA9IGZ1bmN0aW9uKHN0YWNrLCBlcnJvcikge1xuICAgICAgICBpZiAodHlwZW9mIHN0YWNrID09PSBcInN0cmluZ1wiKSByZXR1cm4gc3RhY2s7XG5cbiAgICAgICAgaWYgKCh0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBlcnJvciA9PT0gXCJmdW5jdGlvblwiKSAmJlxuICAgICAgICAgICAgZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIHJldHVybiBudWxsO1xuXG59KShbXSk7XG5cbmlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgY29uc29sZS53YXJuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgIH07XG4gICAgaWYgKHV0aWwuaXNOb2RlICYmIHByb2Nlc3Muc3RkZXJyLmlzVFRZKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gaXNTb2Z0ID8gXCJcXHUwMDFiWzMzbVwiIDogXCJcXHUwMDFiWzMxbVwiO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGNvbG9yICsgbWVzc2FnZSArIFwiXFx1MDAxYlswbVxcblwiKTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCF1dGlsLmlzTm9kZSAmJiB0eXBlb2YgKG5ldyBFcnJvcigpLnN0YWNrKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbihtZXNzYWdlLCBpc1NvZnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIiVjXCIgKyBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTb2Z0ID8gXCJjb2xvcjogZGFya29yYW5nZVwiIDogXCJjb2xvcjogcmVkXCIpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxudmFyIGNvbmZpZyA9IHtcbiAgICB3YXJuaW5nczogd2FybmluZ3MsXG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmYWxzZSxcbiAgICBjYW5jZWxsYXRpb246IGZhbHNlLFxuICAgIG1vbml0b3Jpbmc6IGZhbHNlXG59O1xuXG5pZiAobG9uZ1N0YWNrVHJhY2VzKSBQcm9taXNlLmxvbmdTdGFja1RyYWNlcygpO1xuXG5yZXR1cm4ge1xuICAgIGxvbmdTdGFja1RyYWNlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcubG9uZ1N0YWNrVHJhY2VzO1xuICAgIH0sXG4gICAgd2FybmluZ3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLndhcm5pbmdzO1xuICAgIH0sXG4gICAgY2FuY2VsbGF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5jYW5jZWxsYXRpb247XG4gICAgfSxcbiAgICBtb25pdG9yaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5tb25pdG9yaW5nO1xuICAgIH0sXG4gICAgcHJvcGFnYXRlRnJvbUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb3BhZ2F0ZUZyb21GdW5jdGlvbjtcbiAgICB9LFxuICAgIGJvdW5kVmFsdWVGdW5jdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBib3VuZFZhbHVlRnVuY3Rpb247XG4gICAgfSxcbiAgICBjaGVja0ZvcmdvdHRlblJldHVybnM6IGNoZWNrRm9yZ290dGVuUmV0dXJucyxcbiAgICBzZXRCb3VuZHM6IHNldEJvdW5kcyxcbiAgICB3YXJuOiB3YXJuLFxuICAgIGRlcHJlY2F0ZWQ6IGRlcHJlY2F0ZWQsXG4gICAgQ2FwdHVyZWRUcmFjZTogQ2FwdHVyZWRUcmFjZSxcbiAgICBmaXJlRG9tRXZlbnQ6IGZpcmVEb21FdmVudCxcbiAgICBmaXJlR2xvYmFsRXZlbnQ6IGZpcmVHbG9iYWxFdmVudFxufTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbmZ1bmN0aW9uIHJldHVybmVyKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xufVxuZnVuY3Rpb24gdGhyb3dlcigpIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGVbXCJyZXR1cm5cIl0gPVxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJldHVybiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHZhbHVlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICByZXR1cm5lciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGVbXCJ0aHJvd1wiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuVGhyb3cgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHRocm93ZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7cmVhc29uOiByZWFzb259LCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2hUaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICAgICAgdW5kZWZpbmVkLCB0aHJvd2VyLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9yZWFzb24gPSBhcmd1bWVudHNbMV07XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7dGhyb3cgX3JlYXNvbjt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQocmVhc29uLCBoYW5kbGVyKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFJldHVybiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICAgICAgdW5kZWZpbmVkLCByZXR1cm5lciwgdW5kZWZpbmVkLCB7dmFsdWU6IHZhbHVlfSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3ZhbHVlID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBpZiAoX3ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgX3ZhbHVlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCkge3JldHVybiBfdmFsdWU7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2F1Z2h0KHZhbHVlLCBoYW5kbGVyKTtcbiAgICB9XG59O1xufTtcblxufSx7fV0sMTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgUHJvbWlzZVJlZHVjZSA9IFByb21pc2UucmVkdWNlO1xudmFyIFByb21pc2VBbGwgPSBQcm9taXNlLmFsbDtcblxuZnVuY3Rpb24gcHJvbWlzZUFsbFRoaXMoKSB7XG4gICAgcmV0dXJuIFByb21pc2VBbGwodGhpcyk7XG59XG5cbmZ1bmN0aW9uIFByb21pc2VNYXBTZXJpZXMocHJvbWlzZXMsIGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UocHJvbWlzZXMsIGZuLCBJTlRFUk5BTCwgSU5URVJOQUwpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UodGhpcywgZm4sIElOVEVSTkFMLCAwKVxuICAgICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubWFwU2VyaWVzID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UodGhpcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmVhY2ggPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UocHJvbWlzZXMsIGZuLCBJTlRFUk5BTCwgMClcbiAgICAgICAgICAgICAgLl90aGVuKHByb21pc2VBbGxUaGlzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcHJvbWlzZXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLm1hcFNlcmllcyA9IFByb21pc2VNYXBTZXJpZXM7XG59O1xuXG5cbn0se31dLDEyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGVzNSA9IF9kZXJlcV8oXCIuL2VzNVwiKTtcbnZhciBPYmplY3RmcmVlemUgPSBlczUuZnJlZXplO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGluaGVyaXRzID0gdXRpbC5pbmhlcml0cztcbnZhciBub3RFbnVtZXJhYmxlUHJvcCA9IHV0aWwubm90RW51bWVyYWJsZVByb3A7XG5cbmZ1bmN0aW9uIHN1YkVycm9yKG5hbWVQcm9wZXJ0eSwgZGVmYXVsdE1lc3NhZ2UpIHtcbiAgICBmdW5jdGlvbiBTdWJFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTdWJFcnJvcikpIHJldHVybiBuZXcgU3ViRXJyb3IobWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLFxuICAgICAgICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogZGVmYXVsdE1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm5hbWVcIiwgbmFtZVByb3BlcnR5KTtcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5oZXJpdHMoU3ViRXJyb3IsIEVycm9yKTtcbiAgICByZXR1cm4gU3ViRXJyb3I7XG59XG5cbnZhciBfVHlwZUVycm9yLCBfUmFuZ2VFcnJvcjtcbnZhciBXYXJuaW5nID0gc3ViRXJyb3IoXCJXYXJuaW5nXCIsIFwid2FybmluZ1wiKTtcbnZhciBDYW5jZWxsYXRpb25FcnJvciA9IHN1YkVycm9yKFwiQ2FuY2VsbGF0aW9uRXJyb3JcIiwgXCJjYW5jZWxsYXRpb24gZXJyb3JcIik7XG52YXIgVGltZW91dEVycm9yID0gc3ViRXJyb3IoXCJUaW1lb3V0RXJyb3JcIiwgXCJ0aW1lb3V0IGVycm9yXCIpO1xudmFyIEFnZ3JlZ2F0ZUVycm9yID0gc3ViRXJyb3IoXCJBZ2dyZWdhdGVFcnJvclwiLCBcImFnZ3JlZ2F0ZSBlcnJvclwiKTtcbnRyeSB7XG4gICAgX1R5cGVFcnJvciA9IFR5cGVFcnJvcjtcbiAgICBfUmFuZ2VFcnJvciA9IFJhbmdlRXJyb3I7XG59IGNhdGNoKGUpIHtcbiAgICBfVHlwZUVycm9yID0gc3ViRXJyb3IoXCJUeXBlRXJyb3JcIiwgXCJ0eXBlIGVycm9yXCIpO1xuICAgIF9SYW5nZUVycm9yID0gc3ViRXJyb3IoXCJSYW5nZUVycm9yXCIsIFwicmFuZ2UgZXJyb3JcIik7XG59XG5cbnZhciBtZXRob2RzID0gKFwiam9pbiBwb3AgcHVzaCBzaGlmdCB1bnNoaWZ0IHNsaWNlIGZpbHRlciBmb3JFYWNoIHNvbWUgXCIgK1xuICAgIFwiZXZlcnkgbWFwIGluZGV4T2YgbGFzdEluZGV4T2YgcmVkdWNlIHJlZHVjZVJpZ2h0IHNvcnQgcmV2ZXJzZVwiKS5zcGxpdChcIiBcIik7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7ICsraSkge1xuICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlW21ldGhvZHNbaV1dID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgQWdncmVnYXRlRXJyb3IucHJvdG90eXBlW21ldGhvZHNbaV1dID0gQXJyYXkucHJvdG90eXBlW21ldGhvZHNbaV1dO1xuICAgIH1cbn1cblxuZXM1LmRlZmluZVByb3BlcnR5KEFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgIHZhbHVlOiAwLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxufSk7XG5BZ2dyZWdhdGVFcnJvci5wcm90b3R5cGVbXCJpc09wZXJhdGlvbmFsXCJdID0gdHJ1ZTtcbnZhciBsZXZlbCA9IDA7XG5BZ2dyZWdhdGVFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZW50ID0gQXJyYXkobGV2ZWwgKiA0ICsgMSkuam9pbihcIiBcIik7XG4gICAgdmFyIHJldCA9IFwiXFxuXCIgKyBpbmRlbnQgKyBcIkFnZ3JlZ2F0ZUVycm9yIG9mOlwiICsgXCJcXG5cIjtcbiAgICBsZXZlbCsrO1xuICAgIGluZGVudCA9IEFycmF5KGxldmVsICogNCArIDEpLmpvaW4oXCIgXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgc3RyID0gdGhpc1tpXSA9PT0gdGhpcyA/IFwiW0NpcmN1bGFyIEFnZ3JlZ2F0ZUVycm9yXVwiIDogdGhpc1tpXSArIFwiXCI7XG4gICAgICAgIHZhciBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgbGluZXNbal0gPSBpbmRlbnQgKyBsaW5lc1tqXTtcbiAgICAgICAgfVxuICAgICAgICBzdHIgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXQgKz0gc3RyICsgXCJcXG5cIjtcbiAgICB9XG4gICAgbGV2ZWwtLTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gT3BlcmF0aW9uYWxFcnJvcihtZXNzYWdlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE9wZXJhdGlvbmFsRXJyb3IpKVxuICAgICAgICByZXR1cm4gbmV3IE9wZXJhdGlvbmFsRXJyb3IobWVzc2FnZSk7XG4gICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJuYW1lXCIsIFwiT3BlcmF0aW9uYWxFcnJvclwiKTtcbiAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgdGhpcy5jYXVzZSA9IG1lc3NhZ2U7XG4gICAgdGhpc1tcImlzT3BlcmF0aW9uYWxcIl0gPSB0cnVlO1xuXG4gICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIiwgbWVzc2FnZS5tZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJzdGFja1wiLCBtZXNzYWdlLnN0YWNrKTtcbiAgICB9IGVsc2UgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cblxufVxuaW5oZXJpdHMoT3BlcmF0aW9uYWxFcnJvciwgRXJyb3IpO1xuXG52YXIgZXJyb3JUeXBlcyA9IEVycm9yW1wiX19CbHVlYmlyZEVycm9yVHlwZXNfX1wiXTtcbmlmICghZXJyb3JUeXBlcykge1xuICAgIGVycm9yVHlwZXMgPSBPYmplY3RmcmVlemUoe1xuICAgICAgICBDYW5jZWxsYXRpb25FcnJvcjogQ2FuY2VsbGF0aW9uRXJyb3IsXG4gICAgICAgIFRpbWVvdXRFcnJvcjogVGltZW91dEVycm9yLFxuICAgICAgICBPcGVyYXRpb25hbEVycm9yOiBPcGVyYXRpb25hbEVycm9yLFxuICAgICAgICBSZWplY3Rpb25FcnJvcjogT3BlcmF0aW9uYWxFcnJvcixcbiAgICAgICAgQWdncmVnYXRlRXJyb3I6IEFnZ3JlZ2F0ZUVycm9yXG4gICAgfSk7XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KEVycm9yLCBcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIiwge1xuICAgICAgICB2YWx1ZTogZXJyb3JUeXBlcyxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxuICAgIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBFcnJvcjogRXJyb3IsXG4gICAgVHlwZUVycm9yOiBfVHlwZUVycm9yLFxuICAgIFJhbmdlRXJyb3I6IF9SYW5nZUVycm9yLFxuICAgIENhbmNlbGxhdGlvbkVycm9yOiBlcnJvclR5cGVzLkNhbmNlbGxhdGlvbkVycm9yLFxuICAgIE9wZXJhdGlvbmFsRXJyb3I6IGVycm9yVHlwZXMuT3BlcmF0aW9uYWxFcnJvcixcbiAgICBUaW1lb3V0RXJyb3I6IGVycm9yVHlwZXMuVGltZW91dEVycm9yLFxuICAgIEFnZ3JlZ2F0ZUVycm9yOiBlcnJvclR5cGVzLkFnZ3JlZ2F0ZUVycm9yLFxuICAgIFdhcm5pbmc6IFdhcm5pbmdcbn07XG5cbn0se1wiLi9lczVcIjoxMyxcIi4vdXRpbFwiOjM2fV0sMTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGlzRVM1ID0gKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgcmV0dXJuIHRoaXMgPT09IHVuZGVmaW5lZDtcbn0pKCk7XG5cbmlmIChpc0VTNSkge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBmcmVlemU6IE9iamVjdC5mcmVlemUsXG4gICAgICAgIGRlZmluZVByb3BlcnR5OiBPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gICAgICAgIGdldERlc2NyaXB0b3I6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gICAgICAgIGtleXM6IE9iamVjdC5rZXlzLFxuICAgICAgICBuYW1lczogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gICAgICAgIGdldFByb3RvdHlwZU9mOiBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG4gICAgICAgIGlzRVM1OiBpc0VTNSxcbiAgICAgICAgcHJvcGVydHlJc1dyaXRhYmxlOiBmdW5jdGlvbihvYmosIHByb3ApIHtcbiAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApO1xuICAgICAgICAgICAgcmV0dXJuICEhKCFkZXNjcmlwdG9yIHx8IGRlc2NyaXB0b3Iud3JpdGFibGUgfHwgZGVzY3JpcHRvci5zZXQpO1xuICAgICAgICB9XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgdmFyIGhhcyA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgIHZhciBzdHIgPSB7fS50b1N0cmluZztcbiAgICB2YXIgcHJvdG8gPSB7fS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbiAgICB2YXIgT2JqZWN0S2V5cyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG8pIHtcbiAgICAgICAgICAgIGlmIChoYXMuY2FsbChvLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0R2V0RGVzY3JpcHRvciA9IGZ1bmN0aW9uKG8sIGtleSkge1xuICAgICAgICByZXR1cm4ge3ZhbHVlOiBvW2tleV19O1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0RGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAobywga2V5LCBkZXNjKSB7XG4gICAgICAgIG9ba2V5XSA9IGRlc2MudmFsdWU7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0RnJlZXplID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cbiAgICB2YXIgT2JqZWN0R2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0KG9iaikuY29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIEFycmF5SXNBcnJheSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzdHIuY2FsbChvYmopID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2goZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBpc0FycmF5OiBBcnJheUlzQXJyYXksXG4gICAgICAgIGtleXM6IE9iamVjdEtleXMsXG4gICAgICAgIG5hbWVzOiBPYmplY3RLZXlzLFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eTogT2JqZWN0RGVmaW5lUHJvcGVydHksXG4gICAgICAgIGdldERlc2NyaXB0b3I6IE9iamVjdEdldERlc2NyaXB0b3IsXG4gICAgICAgIGZyZWV6ZTogT2JqZWN0RnJlZXplLFxuICAgICAgICBnZXRQcm90b3R5cGVPZjogT2JqZWN0R2V0UHJvdG90eXBlT2YsXG4gICAgICAgIGlzRVM1OiBpc0VTNSxcbiAgICAgICAgcHJvcGVydHlJc1dyaXRhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxufSx7fV0sMTQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgUHJvbWlzZU1hcCA9IFByb21pc2UubWFwO1xuXG5Qcm9taXNlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gUHJvbWlzZU1hcCh0aGlzLCBmbiwgb3B0aW9ucywgSU5URVJOQUwpO1xufTtcblxuUHJvbWlzZS5maWx0ZXIgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBJTlRFUk5BTCk7XG59O1xufTtcblxufSx7fV0sMTU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UsIE5FWFRfRklMVEVSKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBjYXRjaEZpbHRlciA9IF9kZXJlcV8oXCIuL2NhdGNoX2ZpbHRlclwiKShORVhUX0ZJTFRFUik7XG5cbmZ1bmN0aW9uIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQocHJvbWlzZSwgdHlwZSwgaGFuZGxlcikge1xuICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuICAgIHRoaXMuY2FsbGVkID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxQcm9taXNlID0gbnVsbDtcbn1cblxuUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dC5wcm90b3R5cGUuaXNGaW5hbGx5SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IDA7XG59O1xuXG5mdW5jdGlvbiBGaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uKGZpbmFsbHlIYW5kbGVyKSB7XG4gICAgdGhpcy5maW5hbGx5SGFuZGxlciA9IGZpbmFsbHlIYW5kbGVyO1xufVxuXG5GaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY2hlY2tDYW5jZWwodGhpcy5maW5hbGx5SGFuZGxlcik7XG59O1xuXG5mdW5jdGlvbiBjaGVja0NhbmNlbChjdHgsIHJlYXNvbikge1xuICAgIGlmIChjdHguY2FuY2VsUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY3R4LmNhbmNlbFByb21pc2UuX3JlamVjdChyZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmNhbmNlbFByb21pc2UuX2NhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5jYW5jZWxQcm9taXNlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc3VjY2VlZCgpIHtcbiAgICByZXR1cm4gZmluYWxseUhhbmRsZXIuY2FsbCh0aGlzLCB0aGlzLnByb21pc2UuX3RhcmdldCgpLl9zZXR0bGVkVmFsdWUoKSk7XG59XG5mdW5jdGlvbiBmYWlsKHJlYXNvbikge1xuICAgIGlmIChjaGVja0NhbmNlbCh0aGlzLCByZWFzb24pKSByZXR1cm47XG4gICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICByZXR1cm4gZXJyb3JPYmo7XG59XG5mdW5jdGlvbiBmaW5hbGx5SGFuZGxlcihyZWFzb25PclZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG4gICAgdmFyIGhhbmRsZXIgPSB0aGlzLmhhbmRsZXI7XG5cbiAgICBpZiAoIXRoaXMuY2FsbGVkKSB7XG4gICAgICAgIHRoaXMuY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHJldCA9IHRoaXMuaXNGaW5hbGx5SGFuZGxlcigpXG4gICAgICAgICAgICA/IGhhbmRsZXIuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCkpXG4gICAgICAgICAgICA6IGhhbmRsZXIuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbk9yVmFsdWUpO1xuICAgICAgICBpZiAocmV0ID09PSBORVhUX0ZJTFRFUikge1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSBlbHNlIGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcHJvbWlzZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQoKTtcbiAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJldCwgcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbmNlbFByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlLl9pc0NhbmNlbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhc29uID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoXCJsYXRlIGNhbmNlbGxhdGlvbiBvYnNlcnZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yT2JqLmUgPSByZWFzb247XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF5YmVQcm9taXNlLmlzUGVuZGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2F0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKFxuICAgICAgICAgICAgICAgICAgICBzdWNjZWVkLCBmYWlsLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZS5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgY2hlY2tDYW5jZWwodGhpcyk7XG4gICAgICAgIGVycm9yT2JqLmUgPSByZWFzb25PclZhbHVlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tDYW5jZWwodGhpcyk7XG4gICAgICAgIHJldHVybiByZWFzb25PclZhbHVlO1xuICAgIH1cbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuX3Bhc3NUaHJvdWdoID0gZnVuY3Rpb24oaGFuZGxlciwgdHlwZSwgc3VjY2VzcywgZmFpbCkge1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdGhpcy50aGVuKCk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgICBmYWlsLFxuICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dCh0aGlzLCB0eXBlLCBoYW5kbGVyKSxcbiAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubGFzdGx5ID1cblByb21pc2UucHJvdG90eXBlW1wiZmluYWxseVwiXSA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bhc3NUaHJvdWdoKGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5SGFuZGxlcik7XG59O1xuXG5cblByb21pc2UucHJvdG90eXBlLnRhcCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bhc3NUaHJvdWdoKGhhbmRsZXIsIDEsIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRhcENhdGNoID0gZnVuY3Rpb24gKGhhbmRsZXJPclByZWRpY2F0ZSkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmKGxlbiA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlck9yUHJlZGljYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAgdmFyIGNhdGNoSW5zdGFuY2VzID0gbmV3IEFycmF5KGxlbiAtIDEpLFxuICAgICAgICAgICAgaiA9IDAsIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW4gLSAxOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHV0aWwuaXNPYmplY3QoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBjYXRjaEluc3RhbmNlc1tqKytdID0gaXRlbTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIFwidGFwQ2F0Y2ggc3RhdGVtZW50IHByZWRpY2F0ZTogXCJcbiAgICAgICAgICAgICAgICAgICAgKyBcImV4cGVjdGluZyBhbiBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoaXRlbSlcbiAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaEluc3RhbmNlcy5sZW5ndGggPSBqO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bhc3NUaHJvdWdoKGNhdGNoRmlsdGVyKGNhdGNoSW5zdGFuY2VzLCBoYW5kbGVyLCB0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5SGFuZGxlcik7XG4gICAgfVxuXG59O1xuXG5yZXR1cm4gUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dDtcbn07XG5cbn0se1wiLi9jYXRjaF9maWx0ZXJcIjo3LFwiLi91dGlsXCI6MzZ9XSwxNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVqZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJveHlhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zykge1xudmFyIGVycm9ycyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKTtcbnZhciBUeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgeWllbGRIYW5kbGVycyA9IFtdO1xuXG5mdW5jdGlvbiBwcm9taXNlRnJvbVlpZWxkSGFuZGxlcih2YWx1ZSwgeWllbGRIYW5kbGVycywgdHJhY2VQYXJlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHlpZWxkSGFuZGxlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdHJhY2VQYXJlbnQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh5aWVsZEhhbmRsZXJzW2ldKSh2YWx1ZSk7XG4gICAgICAgIHRyYWNlUGFyZW50Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICB0cmFjZVBhcmVudC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgICAgIHZhciByZXQgPSBQcm9taXNlLnJlamVjdChlcnJvck9iai5lKTtcbiAgICAgICAgICAgIHRyYWNlUGFyZW50Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJlc3VsdCwgdHJhY2VQYXJlbnQpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIG1heWJlUHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIFByb21pc2VTcGF3bihnZW5lcmF0b3JGdW5jdGlvbiwgcmVjZWl2ZXIsIHlpZWxkSGFuZGxlciwgc3RhY2spIHtcbiAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkpIHtcbiAgICAgICAgdmFyIGludGVybmFsID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICB2YXIgX2ZpbmFsbHlQcm9taXNlID0gdGhpcy5fZmluYWxseVByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UgPSBpbnRlcm5hbC5sYXN0bHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX2ZpbmFsbHlQcm9taXNlO1xuICAgICAgICB9KTtcbiAgICAgICAgaW50ZXJuYWwuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIGludGVybmFsLl9zZXRPbkNhbmNlbCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgfVxuICAgIHRoaXMuX3N0YWNrID0gc3RhY2s7XG4gICAgdGhpcy5fZ2VuZXJhdG9yRnVuY3Rpb24gPSBnZW5lcmF0b3JGdW5jdGlvbjtcbiAgICB0aGlzLl9yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgIHRoaXMuX2dlbmVyYXRvciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl95aWVsZEhhbmRsZXJzID0gdHlwZW9mIHlpZWxkSGFuZGxlciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gW3lpZWxkSGFuZGxlcl0uY29uY2F0KHlpZWxkSGFuZGxlcnMpXG4gICAgICAgIDogeWllbGRIYW5kbGVycztcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UgPSBmYWxzZTtcbn1cbnV0aWwuaW5oZXJpdHMoUHJvbWlzZVNwYXduLCBQcm94eWFibGUpO1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9pc1Jlc29sdmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2UgPT09IG51bGw7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcHJvbWlzZSA9IHRoaXMuX2dlbmVyYXRvciA9IG51bGw7XG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpICYmIHRoaXMuX2ZpbmFsbHlQcm9taXNlICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2ZpbmFsbHlQcm9taXNlLl9mdWxmaWxsKCk7XG4gICAgICAgIHRoaXMuX2ZpbmFsbHlQcm9taXNlID0gbnVsbDtcbiAgICB9XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9wcm9taXNlQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgIHZhciBpbXBsZW1lbnRzUmV0dXJuID0gdHlwZW9mIHRoaXMuX2dlbmVyYXRvcltcInJldHVyblwiXSAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgIHZhciByZXN1bHQ7XG4gICAgaWYgKCFpbXBsZW1lbnRzUmV0dXJuKSB7XG4gICAgICAgIHZhciByZWFzb24gPSBuZXcgUHJvbWlzZS5DYW5jZWxsYXRpb25FcnJvcihcbiAgICAgICAgICAgIFwiZ2VuZXJhdG9yIC5yZXR1cm4oKSBzZW50aW5lbFwiKTtcbiAgICAgICAgUHJvbWlzZS5jb3JvdXRpbmUucmV0dXJuU2VudGluZWwgPSByZWFzb247XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1widGhyb3dcIl0pLmNhbGwodGhpcy5fZ2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2dlbmVyYXRvcltcInJldHVyblwiXSkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgIH1cbiAgICB0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSA9IHRydWU7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX2NvbnRpbnVlKHJlc3VsdCk7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yLm5leHQpLmNhbGwodGhpcy5fZ2VuZXJhdG9yLCB2YWx1ZSk7XG4gICAgdGhpcy5fcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgIHRoaXMuX2NvbnRpbnVlKHJlc3VsdCk7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2dlbmVyYXRvcltcInRocm93XCJdKVxuICAgICAgICAuY2FsbCh0aGlzLl9nZW5lcmF0b3IsIHJlYXNvbik7XG4gICAgdGhpcy5fcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgIHRoaXMuX2NvbnRpbnVlKHJlc3VsdCk7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5feWllbGRlZFByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5feWllbGRlZFByb21pc2U7XG4gICAgICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICAgICAgcHJvbWlzZS5jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdGhpcy5fZ2VuZXJhdG9yRnVuY3Rpb24uY2FsbCh0aGlzLl9yZWNlaXZlcik7XG4gICAgdGhpcy5fcmVjZWl2ZXIgPVxuICAgICAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9jb250aW51ZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2U7XG4gICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgaWYgKHJlc3VsdC5kb25lID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5jYW5jZWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICBpZiAoIShtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID1cbiAgICAgICAgICAgICAgICBwcm9taXNlRnJvbVlpZWxkSGFuZGxlcihtYXliZVByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5feWllbGRIYW5kbGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9taXNlKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9taXNlUmVqZWN0ZWQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkEgdmFsdWUgJXMgd2FzIHlpZWxkZWQgdGhhdCBjb3VsZCBub3QgYmUgdHJlYXRlZCBhcyBhIHByb21pc2VcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXFx1MDAwYVwiLnJlcGxhY2UoXCIlc1wiLCBTdHJpbmcodmFsdWUpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZyb20gY29yb3V0aW5lOlxcdTAwMGFcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFjay5zcGxpdChcIlxcblwiKS5zbGljZSgxLCAtNykuam9pbihcIlxcblwiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgO1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9wcm94eSh0aGlzLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgUHJvbWlzZS5fYXN5bmMuaW52b2tlKFxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQsIHRoaXMsIG1heWJlUHJvbWlzZS5fdmFsdWUoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgUHJvbWlzZS5fYXN5bmMuaW52b2tlKFxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VSZWplY3RlZCwgdGhpcywgbWF5YmVQcm9taXNlLl9yZWFzb24oKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UuY29yb3V0aW5lID0gZnVuY3Rpb24gKGdlbmVyYXRvckZ1bmN0aW9uLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBnZW5lcmF0b3JGdW5jdGlvbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJnZW5lcmF0b3JGdW5jdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgeWllbGRIYW5kbGVyID0gT2JqZWN0KG9wdGlvbnMpLnlpZWxkSGFuZGxlcjtcbiAgICB2YXIgUHJvbWlzZVNwYXduJCA9IFByb21pc2VTcGF3bjtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gZ2VuZXJhdG9yRnVuY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHNwYXduID0gbmV3IFByb21pc2VTcGF3biQodW5kZWZpbmVkLCB1bmRlZmluZWQsIHlpZWxkSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2spO1xuICAgICAgICB2YXIgcmV0ID0gc3Bhd24ucHJvbWlzZSgpO1xuICAgICAgICBzcGF3bi5fZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xuICAgICAgICBzcGF3bi5fcHJvbWlzZUZ1bGZpbGxlZCh1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG59O1xuXG5Qcm9taXNlLmNvcm91dGluZS5hZGRZaWVsZEhhbmRsZXIgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgeWllbGRIYW5kbGVycy5wdXNoKGZuKTtcbn07XG5cblByb21pc2Uuc3Bhd24gPSBmdW5jdGlvbiAoZ2VuZXJhdG9yRnVuY3Rpb24pIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiUHJvbWlzZS5zcGF3bigpXCIsIFwiUHJvbWlzZS5jb3JvdXRpbmUoKVwiKTtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciBzcGF3biA9IG5ldyBQcm9taXNlU3Bhd24oZ2VuZXJhdG9yRnVuY3Rpb24sIHRoaXMpO1xuICAgIHZhciByZXQgPSBzcGF3bi5wcm9taXNlKCk7XG4gICAgc3Bhd24uX3J1bihQcm9taXNlLnNwYXduKTtcbiAgICByZXR1cm4gcmV0O1xufTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMTc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG5mdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMLCBhc3luYyxcbiAgICAgICAgIGdldERvbWFpbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHJlamVjdDtcblxuaWYgKCF0cnVlKSB7XG5pZiAoY2FuRXZhbHVhdGUpIHtcbiAgICB2YXIgdGhlbkNhbGxiYWNrID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwidmFsdWVcIiwgXCJob2xkZXJcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIuY2hlY2tGdWxmaWxsbWVudCh0aGlzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlU2V0dGVyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwicHJvbWlzZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBnZW5lcmF0ZUhvbGRlckNsYXNzID0gZnVuY3Rpb24odG90YWwpIHtcbiAgICAgICAgdmFyIHByb3BzID0gbmV3IEFycmF5KHRvdGFsKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcHJvcHNbaV0gPSBcInRoaXMucFwiICsgKGkrMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBwcm9wcy5qb2luKFwiID0gXCIpICsgXCIgPSBudWxsO1wiO1xuICAgICAgICB2YXIgY2FuY2VsbGF0aW9uQ29kZT0gXCJ2YXIgcHJvbWlzZTtcXG5cIiArIHByb3BzLm1hcChmdW5jdGlvbihwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBcIiArIHByb3AgKyBcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2FuY2VsKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgICAgdmFyIHBhc3NlZEFyZ3VtZW50cyA9IHByb3BzLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSBcIkhvbGRlciRcIiArIHRvdGFsO1xuXG5cbiAgICAgICAgdmFyIGNvZGUgPSBcInJldHVybiBmdW5jdGlvbih0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKSB7ICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBmdW5jdGlvbiBbVGhlTmFtZV0oZm4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW1RoZVByb3BlcnRpZXNdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5mbiA9IGZuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5hc3luY05lZWRlZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5ub3cgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLl9jYWxsRnVuY3Rpb24gPSBmdW5jdGlvbihwcm9taXNlKSB7ICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKHRoaXMuZm4pKFtUaGVQYXNzZWRBcmd1bWVudHNdKTsgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcG9wQ29udGV4dCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJldC5lLCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayhyZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLmNoZWNrRnVsZmlsbG1lbnQgPSBmdW5jdGlvbihwcm9taXNlKSB7ICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9ICsrdGhpcy5ub3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKG5vdyA9PT0gW1RoZVRvdGFsXSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFzeW5jTmVlZGVkKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYy5pbnZva2UodGhpcy5fY2FsbEZ1bmN0aW9uLCB0aGlzLCBwcm9taXNlKTsgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuY3Rpb24ocHJvbWlzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHsgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NhbmNlbGxhdGlvbkNvZGVdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gW1RoZU5hbWVdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH0odHJ5Q2F0Y2gsIGVycm9yT2JqLCBQcm9taXNlLCBhc3luYyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiO1xuXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcW1RoZU5hbWVcXF0vZywgbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVUb3RhbFxcXS9nLCB0b3RhbClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVQYXNzZWRBcmd1bWVudHNcXF0vZywgcGFzc2VkQXJndW1lbnRzKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVByb3BlcnRpZXNcXF0vZywgYXNzaWdubWVudClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtDYW5jZWxsYXRpb25Db2RlXFxdL2csIGNhbmNlbGxhdGlvbkNvZGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ0cnlDYXRjaFwiLCBcImVycm9yT2JqXCIsIFwiUHJvbWlzZVwiLCBcImFzeW5jXCIsIGNvZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAodHJ5Q2F0Y2gsIGVycm9yT2JqLCBQcm9taXNlLCBhc3luYyk7XG4gICAgfTtcblxuICAgIHZhciBob2xkZXJDbGFzc2VzID0gW107XG4gICAgdmFyIHRoZW5DYWxsYmFja3MgPSBbXTtcbiAgICB2YXIgcHJvbWlzZVNldHRlcnMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgKytpKSB7XG4gICAgICAgIGhvbGRlckNsYXNzZXMucHVzaChnZW5lcmF0ZUhvbGRlckNsYXNzKGkgKyAxKSk7XG4gICAgICAgIHRoZW5DYWxsYmFja3MucHVzaCh0aGVuQ2FsbGJhY2soaSArIDEpKTtcbiAgICAgICAgcHJvbWlzZVNldHRlcnMucHVzaChwcm9taXNlU2V0dGVyKGkgKyAxKSk7XG4gICAgfVxuXG4gICAgcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICB9O1xufX1cblxuUHJvbWlzZS5qb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgdmFyIGZuO1xuICAgIGlmIChsYXN0ID4gMCAmJiB0eXBlb2YgYXJndW1lbnRzW2xhc3RdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm4gPSBhcmd1bWVudHNbbGFzdF07XG4gICAgICAgIGlmICghdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGxhc3QgPD0gOCAmJiBjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIHZhciBIb2xkZXJDbGFzcyA9IGhvbGRlckNsYXNzZXNbbGFzdCAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBob2xkZXIgPSBuZXcgSG9sZGVyQ2xhc3MoZm4pO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGVuQ2FsbGJhY2tzO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoYXJndW1lbnRzW2ldLCByZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3RoZW4oY2FsbGJhY2tzW2ldLCByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcmV0LCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VTZXR0ZXJzW2ldKG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkZXIuYXN5bmNOZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl92YWx1ZSgpLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwocmV0LCBtYXliZVByb21pc2UsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXJldC5faXNGYXRlU2VhbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvbGRlci5hc3luY05lZWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbWFpbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlci5mbiA9IHV0aWwuZG9tYWluQmluZChkb21haW4sIGhvbGRlci5mbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChob2xkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpOztcbiAgICBpZiAoZm4pIGFyZ3MucG9wKCk7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlQXJyYXkoYXJncykucHJvbWlzZSgpO1xuICAgIHJldHVybiBmbiAhPT0gdW5kZWZpbmVkID8gcmV0LnNwcmVhZChmbikgOiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMTg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2VBcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVqZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xuXG5mdW5jdGlvbiBNYXBwaW5nUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgbGltaXQsIF9maWx0ZXIpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJChwcm9taXNlcyk7XG4gICAgdGhpcy5fcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBkb21haW4gPT09IG51bGwgPyBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKTtcbiAgICB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXMgPSBfZmlsdGVyID09PSBJTlRFUk5BTFxuICAgICAgICA/IG5ldyBBcnJheSh0aGlzLmxlbmd0aCgpKVxuICAgICAgICA6IG51bGw7XG4gICAgdGhpcy5fbGltaXQgPSBsaW1pdDtcbiAgICB0aGlzLl9pbkZsaWdodCA9IDA7XG4gICAgdGhpcy5fcXVldWUgPSBbXTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fYXN5bmNJbml0LCB0aGlzLCB1bmRlZmluZWQpO1xufVxudXRpbC5pbmhlcml0cyhNYXBwaW5nUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYXN5bmNJbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtMik7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHZhciBwcmVzZXJ2ZWRWYWx1ZXMgPSB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXM7XG4gICAgdmFyIGxpbWl0ID0gdGhpcy5fbGltaXQ7XG5cbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gKGluZGV4ICogLTEpIC0gMTtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAobGltaXQgPj0gMSkge1xuICAgICAgICAgICAgdGhpcy5faW5GbGlnaHQtLTtcbiAgICAgICAgICAgIHRoaXMuX2RyYWluUXVldWUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGxpbWl0ID49IDEgJiYgdGhpcy5faW5GbGlnaHQgPj0gbGltaXQpIHtcbiAgICAgICAgICAgIHZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwpIHByZXNlcnZlZFZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2U7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMuX2NhbGxiYWNrO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSB0cnlDYXRjaChjYWxsYmFjaykuY2FsbChyZWNlaXZlciwgdmFsdWUsIGluZGV4LCBsZW5ndGgpO1xuICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHJldCxcbiAgICAgICAgICAgIHByb21pc2VDcmVhdGVkLFxuICAgICAgICAgICAgcHJlc2VydmVkVmFsdWVzICE9PSBudWxsID8gXCJQcm9taXNlLmZpbHRlclwiIDogXCJQcm9taXNlLm1hcFwiLFxuICAgICAgICAgICAgcHJvbWlzZVxuICAgICAgICApO1xuICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KHJldC5lKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmV0LCB0aGlzLl9wcm9taXNlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgICAgICB2YXIgYml0RmllbGQgPSBtYXliZVByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbWl0ID49IDEpIHRoaXMuX2luRmxpZ2h0Kys7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IG1heWJlUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3Byb3h5KHRoaXMsIChpbmRleCArIDEpICogLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZXQgPSBtYXliZVByb21pc2UuX3ZhbHVlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gcmV0O1xuICAgIH1cbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fZmlsdGVyKHZhbHVlcywgcHJlc2VydmVkVmFsdWVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHF1ZXVlID0gdGhpcy5fcXVldWU7XG4gICAgdmFyIGxpbWl0ID0gdGhpcy5fbGltaXQ7XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiB0aGlzLl9pbkZsaWdodCA8IGxpbWl0KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICAgICAgdmFyIGluZGV4ID0gcXVldWUucG9wKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodmFsdWVzW2luZGV4XSwgaW5kZXgpO1xuICAgIH1cbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9maWx0ZXIgPSBmdW5jdGlvbiAoYm9vbGVhbnMsIHZhbHVlcykge1xuICAgIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuKTtcbiAgICB2YXIgaiA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBpZiAoYm9vbGVhbnNbaV0pIHJldFtqKytdID0gdmFsdWVzW2ldO1xuICAgIH1cbiAgICByZXQubGVuZ3RoID0gajtcbiAgICB0aGlzLl9yZXNvbHZlKHJldCk7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5wcmVzZXJ2ZWRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbn07XG5cbmZ1bmN0aW9uIG1hcChwcm9taXNlcywgZm4sIG9wdGlvbnMsIF9maWx0ZXIpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuXG4gICAgdmFyIGxpbWl0ID0gMDtcbiAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29uY3VycmVuY3kgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUeXBlRXJyb3IoXCInY29uY3VycmVuY3knIG11c3QgYmUgYSBudW1iZXIgYnV0IGl0IGlzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucy5jb25jdXJyZW5jeSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbWl0ID0gb3B0aW9ucy5jb25jdXJyZW5jeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9ucyBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdCBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKG9wdGlvbnMpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGltaXQgPSB0eXBlb2YgbGltaXQgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgaXNGaW5pdGUobGltaXQpICYmIGxpbWl0ID49IDEgPyBsaW1pdCA6IDA7XG4gICAgcmV0dXJuIG5ldyBNYXBwaW5nUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgbGltaXQsIF9maWx0ZXIpLnByb21pc2UoKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG1hcCh0aGlzLCBmbiwgb3B0aW9ucywgbnVsbCk7XG59O1xuXG5Qcm9taXNlLm1hcCA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIG9wdGlvbnMsIF9maWx0ZXIpIHtcbiAgICByZXR1cm4gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcik7XG59O1xuXG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwxOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24sIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuXG5Qcm9taXNlLm1ldGhvZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZS5UeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIHJldC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHZhbHVlID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHJldC5fcG9wQ29udGV4dCgpO1xuICAgICAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgICAgICB2YWx1ZSwgcHJvbWlzZUNyZWF0ZWQsIFwiUHJvbWlzZS5tZXRob2RcIiwgcmV0KTtcbiAgICAgICAgcmV0Ll9yZXNvbHZlRnJvbVN5bmNWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn07XG5cblByb21pc2UuYXR0ZW1wdCA9IFByb21pc2VbXCJ0cnlcIl0gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHJldC5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJjYWxsaW5nIFByb21pc2UudHJ5IHdpdGggbW9yZSB0aGFuIDEgYXJndW1lbnRcIik7XG4gICAgICAgIHZhciBhcmcgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIHZhciBjdHggPSBhcmd1bWVudHNbMl07XG4gICAgICAgIHZhbHVlID0gdXRpbC5pc0FycmF5KGFyZykgPyB0cnlDYXRjaChmbikuYXBwbHkoY3R4LCBhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnlDYXRjaChmbikuY2FsbChjdHgsIGFyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0cnlDYXRjaChmbikoKTtcbiAgICB9XG4gICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICB2YWx1ZSwgcHJvbWlzZUNyZWF0ZWQsIFwiUHJvbWlzZS50cnlcIiwgcmV0KTtcbiAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVGcm9tU3luY1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1dGlsLmVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdENhbGxiYWNrKHZhbHVlLmUsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ2FsbGJhY2sodmFsdWUsIHRydWUpO1xuICAgIH1cbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgbWF5YmVXcmFwQXNFcnJvciA9IHV0aWwubWF5YmVXcmFwQXNFcnJvcjtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgT3BlcmF0aW9uYWxFcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xudmFyIGVzNSA9IF9kZXJlcV8oXCIuL2VzNVwiKTtcblxuZnVuY3Rpb24gaXNVbnR5cGVkRXJyb3Iob2JqKSB7XG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgIGVzNS5nZXRQcm90b3R5cGVPZihvYmopID09PSBFcnJvci5wcm90b3R5cGU7XG59XG5cbnZhciByRXJyb3JLZXkgPSAvXig/Om5hbWV8bWVzc2FnZXxzdGFja3xjYXVzZSkkLztcbmZ1bmN0aW9uIHdyYXBBc09wZXJhdGlvbmFsRXJyb3Iob2JqKSB7XG4gICAgdmFyIHJldDtcbiAgICBpZiAoaXNVbnR5cGVkRXJyb3Iob2JqKSkge1xuICAgICAgICByZXQgPSBuZXcgT3BlcmF0aW9uYWxFcnJvcihvYmopO1xuICAgICAgICByZXQubmFtZSA9IG9iai5uYW1lO1xuICAgICAgICByZXQubWVzc2FnZSA9IG9iai5tZXNzYWdlO1xuICAgICAgICByZXQuc3RhY2sgPSBvYmouc3RhY2s7XG4gICAgICAgIHZhciBrZXlzID0gZXM1LmtleXMob2JqKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmICghckVycm9yS2V5LnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgICAgIHJldFtrZXldID0gb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24ob2JqKTtcbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgbXVsdGlBcmdzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVyciwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHByb21pc2UgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgdmFyIHdyYXBwZWQgPSB3cmFwQXNPcGVyYXRpb25hbEVycm9yKG1heWJlV3JhcEFzRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHdyYXBwZWQpO1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHdyYXBwZWQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFtdWx0aUFyZ3MpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7O1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5vZGViYWNrRm9yUHJvbWlzZTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi9lczVcIjoxMyxcIi4vdXRpbFwiOjM2fV0sMjE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIHNwcmVhZEFkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICBpZiAoIXV0aWwuaXNBcnJheSh2YWwpKSByZXR1cm4gc3VjY2Vzc0FkYXB0ZXIuY2FsbChwcm9taXNlLCB2YWwsIG5vZGViYWNrKTtcbiAgICB2YXIgcmV0ID1cbiAgICAgICAgdHJ5Q2F0Y2gobm9kZWJhY2spLmFwcGx5KHByb21pc2UuX2JvdW5kVmFsdWUoKSwgW251bGxdLmNvbmNhdCh2YWwpKTtcbiAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKHJldC5lKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NBZGFwdGVyKHZhbCwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIHJlY2VpdmVyID0gcHJvbWlzZS5fYm91bmRWYWx1ZSgpO1xuICAgIHZhciByZXQgPSB2YWwgPT09IHVuZGVmaW5lZFxuICAgICAgICA/IHRyeUNhdGNoKG5vZGViYWNrKS5jYWxsKHJlY2VpdmVyLCBudWxsKVxuICAgICAgICA6IHRyeUNhdGNoKG5vZGViYWNrKS5jYWxsKHJlY2VpdmVyLCBudWxsLCB2YWwpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVycm9yQWRhcHRlcihyZWFzb24sIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghcmVhc29uKSB7XG4gICAgICAgIHZhciBuZXdSZWFzb24gPSBuZXcgRXJyb3IocmVhc29uICsgXCJcIik7XG4gICAgICAgIG5ld1JlYXNvbi5jYXVzZSA9IHJlYXNvbjtcbiAgICAgICAgcmVhc29uID0gbmV3UmVhc29uO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCByZWFzb24pO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYXNDYWxsYmFjayA9IFByb21pc2UucHJvdG90eXBlLm5vZGVpZnkgPSBmdW5jdGlvbiAobm9kZWJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBub2RlYmFjayA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIGFkYXB0ZXIgPSBzdWNjZXNzQWRhcHRlcjtcbiAgICAgICAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qob3B0aW9ucykuc3ByZWFkKSB7XG4gICAgICAgICAgICBhZGFwdGVyID0gc3ByZWFkQWRhcHRlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90aGVuKFxuICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgIGVycm9yQWRhcHRlcixcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBub2RlYmFja1xuICAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xudmFyIG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiY2lyY3VsYXIgcHJvbWlzZSByZXNvbHV0aW9uIGNoYWluXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbn07XG52YXIgcmVmbGVjdEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UuUHJvbWlzZUluc3BlY3Rpb24odGhpcy5fdGFyZ2V0KCkpO1xufTtcbnZhciBhcGlSZWplY3Rpb24gPSBmdW5jdGlvbihtc2cpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcihtc2cpKTtcbn07XG5mdW5jdGlvbiBQcm94eWFibGUoKSB7fVxudmFyIFVOREVGSU5FRF9CSU5ESU5HID0ge307XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbnZhciBnZXREb21haW47XG5pZiAodXRpbC5pc05vZGUpIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJldCA9IHByb2Nlc3MuZG9tYWluO1xuICAgICAgICBpZiAocmV0ID09PSB1bmRlZmluZWQpIHJldCA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgZ2V0RG9tYWluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG59XG51dGlsLm5vdEVudW1lcmFibGVQcm9wKFByb21pc2UsIFwiX2dldERvbWFpblwiLCBnZXREb21haW4pO1xuXG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIEFzeW5jID0gX2RlcmVxXyhcIi4vYXN5bmNcIik7XG52YXIgYXN5bmMgPSBuZXcgQXN5bmMoKTtcbmVzNS5kZWZpbmVQcm9wZXJ0eShQcm9taXNlLCBcIl9hc3luY1wiLCB7dmFsdWU6IGFzeW5jfSk7XG52YXIgZXJyb3JzID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpO1xudmFyIFR5cGVFcnJvciA9IFByb21pc2UuVHlwZUVycm9yID0gZXJyb3JzLlR5cGVFcnJvcjtcblByb21pc2UuUmFuZ2VFcnJvciA9IGVycm9ycy5SYW5nZUVycm9yO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gUHJvbWlzZS5DYW5jZWxsYXRpb25FcnJvciA9IGVycm9ycy5DYW5jZWxsYXRpb25FcnJvcjtcblByb21pc2UuVGltZW91dEVycm9yID0gZXJyb3JzLlRpbWVvdXRFcnJvcjtcblByb21pc2UuT3BlcmF0aW9uYWxFcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xuUHJvbWlzZS5SZWplY3Rpb25FcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xuUHJvbWlzZS5BZ2dyZWdhdGVFcnJvciA9IGVycm9ycy5BZ2dyZWdhdGVFcnJvcjtcbnZhciBJTlRFUk5BTCA9IGZ1bmN0aW9uKCl7fTtcbnZhciBBUFBMWSA9IHt9O1xudmFyIE5FWFRfRklMVEVSID0ge307XG52YXIgdHJ5Q29udmVydFRvUHJvbWlzZSA9IF9kZXJlcV8oXCIuL3RoZW5hYmxlc1wiKShQcm9taXNlLCBJTlRFUk5BTCk7XG52YXIgUHJvbWlzZUFycmF5ID1cbiAgICBfZGVyZXFfKFwiLi9wcm9taXNlX2FycmF5XCIpKFByb21pc2UsIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgUHJveHlhYmxlKTtcbnZhciBDb250ZXh0ID0gX2RlcmVxXyhcIi4vY29udGV4dFwiKShQcm9taXNlKTtcbiAvKmpzaGludCB1bnVzZWQ6ZmFsc2UqL1xudmFyIGNyZWF0ZUNvbnRleHQgPSBDb250ZXh0LmNyZWF0ZTtcbnZhciBkZWJ1ZyA9IF9kZXJlcV8oXCIuL2RlYnVnZ2FiaWxpdHlcIikoUHJvbWlzZSwgQ29udGV4dCk7XG52YXIgQ2FwdHVyZWRUcmFjZSA9IGRlYnVnLkNhcHR1cmVkVHJhY2U7XG52YXIgUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dCA9XG4gICAgX2RlcmVxXyhcIi4vZmluYWxseVwiKShQcm9taXNlLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBORVhUX0ZJTFRFUik7XG52YXIgY2F0Y2hGaWx0ZXIgPSBfZGVyZXFfKFwiLi9jYXRjaF9maWx0ZXJcIikoTkVYVF9GSUxURVIpO1xudmFyIG5vZGViYWNrRm9yUHJvbWlzZSA9IF9kZXJlcV8oXCIuL25vZGViYWNrXCIpO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5mdW5jdGlvbiBjaGVjayhzZWxmLCBleGVjdXRvcikge1xuICAgIGlmIChzZWxmID09IG51bGwgfHwgc2VsZi5jb25zdHJ1Y3RvciAhPT0gUHJvbWlzZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHByb21pc2UgY29uc3RydWN0b3IgY2Fubm90IGJlIGludm9rZWQgZGlyZWN0bHlcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGV4ZWN1dG9yKSk7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcbiAgICBpZiAoZXhlY3V0b3IgIT09IElOVEVSTkFMKSB7XG4gICAgICAgIGNoZWNrKHRoaXMsIGV4ZWN1dG9yKTtcbiAgICB9XG4gICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Jlc29sdmVGcm9tRXhlY3V0b3IoZXhlY3V0b3IpO1xuICAgIHRoaXMuX3Byb21pc2VDcmVhdGVkKCk7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNyZWF0ZWRcIiwgdGhpcyk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgUHJvbWlzZV1cIjtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdWdodCA9IFByb21pc2UucHJvdG90eXBlW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAobGVuID4gMSkge1xuICAgICAgICB2YXIgY2F0Y2hJbnN0YW5jZXMgPSBuZXcgQXJyYXkobGVuIC0gMSksXG4gICAgICAgICAgICBqID0gMCwgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbiAtIDE7ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAodXRpbC5pc09iamVjdChpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNhdGNoSW5zdGFuY2VzW2orK10gPSBpdGVtO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiQ2F0Y2ggc3RhdGVtZW50IHByZWRpY2F0ZTogXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImV4cGVjdGluZyBhbiBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoaXRlbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoSW5zdGFuY2VzLmxlbmd0aCA9IGo7XG4gICAgICAgIGZuID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgY2F0Y2hGaWx0ZXIoY2F0Y2hJbnN0YW5jZXMsIGZuLCB0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBmbik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWZsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90aGVuKHJlZmxlY3RIYW5kbGVyLFxuICAgICAgICByZWZsZWN0SGFuZGxlciwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChkaWRGdWxmaWxsLCBkaWRSZWplY3QpIHtcbiAgICBpZiAoZGVidWcud2FybmluZ3MoKSAmJiBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxuICAgICAgICB0eXBlb2YgZGlkRnVsZmlsbCAhPT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIHR5cGVvZiBkaWRSZWplY3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbXNnID0gXCIudGhlbigpIG9ubHkgYWNjZXB0cyBmdW5jdGlvbnMgYnV0IHdhcyBwYXNzZWQ6IFwiICtcbiAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKGRpZEZ1bGZpbGwpO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIG1zZyArPSBcIiwgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGRpZFJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fd2Fybihtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uIChkaWRGdWxmaWxsLCBkaWRSZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9XG4gICAgICAgIHRoaXMuX3RoZW4oZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICBwcm9taXNlLl9zZXRJc0ZpbmFsKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zcHJlYWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFsbCgpLl90aGVuKGZuLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgQVBQTFksIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHtcbiAgICAgICAgaXNGdWxmaWxsZWQ6IGZhbHNlLFxuICAgICAgICBpc1JlamVjdGVkOiBmYWxzZSxcbiAgICAgICAgZnVsZmlsbG1lbnRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICByZWplY3Rpb25SZWFzb246IHVuZGVmaW5lZFxuICAgIH07XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICByZXQuZnVsZmlsbG1lbnRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgICAgcmV0LmlzRnVsZmlsbGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHJldC5yZWplY3Rpb25SZWFzb24gPSB0aGlzLnJlYXNvbigpO1xuICAgICAgICByZXQuaXNSZWplY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuX3dhcm4oXCIuYWxsKCkgd2FzIHBhc3NlZCBhcmd1bWVudHMgYnV0IGl0IGRvZXMgbm90IHRha2UgYW55XCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2VBcnJheSh0aGlzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiB0aGlzLmNhdWdodCh1dGlsLm9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uLCBmbik7XG59O1xuXG5Qcm9taXNlLmdldE5ld0xpYnJhcnlDb3B5ID0gbW9kdWxlLmV4cG9ydHM7XG5cblByb21pc2UuaXMgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIFByb21pc2U7XG59O1xuXG5Qcm9taXNlLmZyb21Ob2RlID0gUHJvbWlzZS5mcm9tQ2FsbGJhY2sgPSBmdW5jdGlvbihmbikge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHZhciBtdWx0aUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/ICEhT2JqZWN0KGFyZ3VtZW50c1sxXSkubXVsdGlBcmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKGZuKShub2RlYmFja0ZvclByb21pc2UocmV0LCBtdWx0aUFyZ3MpKTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICByZXQuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKCFyZXQuX2lzRmF0ZVNlYWxlZCgpKSByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZUFycmF5KHByb21pc2VzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLmNhc3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIHJldCA9IHRyeUNvbnZlcnRUb1Byb21pc2Uob2JqKTtcbiAgICBpZiAoIShyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9zZXRGdWxmaWxsZWQoKTtcbiAgICAgICAgcmV0Ll9yZWplY3Rpb25IYW5kbGVyMCA9IG9iajtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucmVzb2x2ZSA9IFByb21pc2UuZnVsZmlsbGVkID0gUHJvbWlzZS5jYXN0O1xuXG5Qcm9taXNlLnJlamVjdCA9IFByb21pc2UucmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9yZWplY3RDYWxsYmFjayhyZWFzb24sIHRydWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnNldFNjaGVkdWxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gYXN5bmMuc2V0U2NoZWR1bGVyKGZuKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl90aGVuID0gZnVuY3Rpb24gKFxuICAgIGRpZEZ1bGZpbGwsXG4gICAgZGlkUmVqZWN0LFxuICAgIF8sICAgIHJlY2VpdmVyLFxuICAgIGludGVybmFsRGF0YVxuKSB7XG4gICAgdmFyIGhhdmVJbnRlcm5hbERhdGEgPSBpbnRlcm5hbERhdGEgIT09IHVuZGVmaW5lZDtcbiAgICB2YXIgcHJvbWlzZSA9IGhhdmVJbnRlcm5hbERhdGEgPyBpbnRlcm5hbERhdGEgOiBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHZhciBiaXRGaWVsZCA9IHRhcmdldC5fYml0RmllbGQ7XG5cbiAgICBpZiAoIWhhdmVJbnRlcm5hbERhdGEpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh0aGlzLCAzKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICgodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIGlmICghKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRoaXMuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0YXJnZXQgPT09IHRoaXMgPyB1bmRlZmluZWQgOiB0aGlzLl9ib3VuZFRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VDaGFpbmVkXCIsIHRoaXMsIHByb21pc2UpO1xuICAgIH1cblxuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICBpZiAoISgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHZhciBoYW5kbGVyLCB2YWx1ZSwgc2V0dGxlciA9IHRhcmdldC5fc2V0dGxlUHJvbWlzZUN0eDtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRhcmdldC5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkRnVsZmlsbDtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0YXJnZXQuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkUmVqZWN0O1xuICAgICAgICAgICAgdGFyZ2V0Ll91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXR0bGVyID0gdGFyZ2V0Ll9zZXR0bGVQcm9taXNlTGF0ZUNhbmNlbGxhdGlvbk9ic2VydmVyO1xuICAgICAgICAgICAgdmFsdWUgPSBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoXCJsYXRlIGNhbmNlbGxhdGlvbiBvYnNlcnZlclwiKTtcbiAgICAgICAgICAgIHRhcmdldC5fYXR0YWNoRXh0cmFUcmFjZSh2YWx1ZSk7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkUmVqZWN0O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMuaW52b2tlKHNldHRsZXIsIHRhcmdldCwge1xuICAgICAgICAgICAgaGFuZGxlcjogZG9tYWluID09PSBudWxsID8gaGFuZGxlclxuICAgICAgICAgICAgICAgIDogKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgaGFuZGxlcikpLFxuICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlcixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuX2FkZENhbGxiYWNrcyhkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBkb21haW4pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2xlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fYml0RmllbGQgJiA2NTUzNTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZhdGVTZWFsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDExNzUwNjA0OCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDY3MTA4ODY0KSA9PT0gNjcxMDg4NjQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0TGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gKHRoaXMuX2JpdEZpZWxkICYgLTY1NTM2KSB8XG4gICAgICAgIChsZW4gJiA2NTUzNSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0RnVsZmlsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAzMzU1NDQzMjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlRnVsZmlsbGVkXCIsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxNjc3NzIxNjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlUmVqZWN0ZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Rm9sbG93aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA2NzEwODg2NDtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlUmVzb2x2ZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0SXNGaW5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNDE5NDMwNDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA0MTk0MzA0KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH42NTUzNik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDY1NTM2O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VDYW5jZWxsZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0V2lsbEJlQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDgzODg2MDg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0QXN5bmNHdWFyYW50ZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGFzeW5jLmhhc0N1c3RvbVNjaGVkdWxlcigpKSByZXR1cm47XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDEzNDIxNzcyODtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWNlaXZlckF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgdmFyIHJldCA9IGluZGV4ID09PSAwID8gdGhpcy5fcmVjZWl2ZXIwIDogdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAzXTtcbiAgICBpZiAocmV0ID09PSBVTkRFRklORURfQklORElORykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAocmV0ID09PSB1bmRlZmluZWQgJiYgdGhpcy5faXNCb3VuZCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib3VuZFZhbHVlKCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXNbXG4gICAgICAgICAgICBpbmRleCAqIDQgLSA0ICsgMl07XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbG1lbnRIYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAwXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3Rpb25IYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAxXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ib3VuZFZhbHVlID0gZnVuY3Rpb24oKSB7fTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFjazAgPSBmdW5jdGlvbiAoZm9sbG93ZXIpIHtcbiAgICB2YXIgYml0RmllbGQgPSBmb2xsb3dlci5fYml0RmllbGQ7XG4gICAgdmFyIGZ1bGZpbGwgPSBmb2xsb3dlci5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICB2YXIgcmVqZWN0ID0gZm9sbG93ZXIuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgIHZhciBwcm9taXNlID0gZm9sbG93ZXIuX3Byb21pc2UwO1xuICAgIHZhciByZWNlaXZlciA9IGZvbGxvd2VyLl9yZWNlaXZlckF0KDApO1xuICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkKSByZWNlaXZlciA9IFVOREVGSU5FRF9CSU5ESU5HO1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyhmdWxmaWxsLCByZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9taWdyYXRlQ2FsbGJhY2tBdCA9IGZ1bmN0aW9uIChmb2xsb3dlciwgaW5kZXgpIHtcbiAgICB2YXIgZnVsZmlsbCA9IGZvbGxvd2VyLl9mdWxmaWxsbWVudEhhbmRsZXJBdChpbmRleCk7XG4gICAgdmFyIHJlamVjdCA9IGZvbGxvd2VyLl9yZWplY3Rpb25IYW5kbGVyQXQoaW5kZXgpO1xuICAgIHZhciBwcm9taXNlID0gZm9sbG93ZXIuX3Byb21pc2VBdChpbmRleCk7XG4gICAgdmFyIHJlY2VpdmVyID0gZm9sbG93ZXIuX3JlY2VpdmVyQXQoaW5kZXgpO1xuICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkKSByZWNlaXZlciA9IFVOREVGSU5FRF9CSU5ESU5HO1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyhmdWxmaWxsLCByZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9hZGRDYWxsYmFja3MgPSBmdW5jdGlvbiAoXG4gICAgZnVsZmlsbCxcbiAgICByZWplY3QsXG4gICAgcHJvbWlzZSxcbiAgICByZWNlaXZlcixcbiAgICBkb21haW5cbikge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX2xlbmd0aCgpO1xuXG4gICAgaWYgKGluZGV4ID49IDY1NTM1IC0gNCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZTAgPSBwcm9taXNlO1xuICAgICAgICB0aGlzLl9yZWNlaXZlcjAgPSByZWNlaXZlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBmdWxmaWxsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IGZ1bGZpbGwgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmdWxmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gcmVqZWN0IDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBiYXNlID0gaW5kZXggKiA0IC0gNDtcbiAgICAgICAgdGhpc1tiYXNlICsgMl0gPSBwcm9taXNlO1xuICAgICAgICB0aGlzW2Jhc2UgKyAzXSA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAodHlwZW9mIGZ1bGZpbGwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpc1tiYXNlICsgMF0gPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IGZ1bGZpbGwgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmdWxmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAxXSA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gcmVqZWN0IDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zZXRMZW5ndGgoaW5kZXggKyAxKTtcbiAgICByZXR1cm4gaW5kZXg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAocHJveHlhYmxlLCBhcmcpIHtcbiAgICB0aGlzLl9hZGRDYWxsYmFja3ModW5kZWZpbmVkLCB1bmRlZmluZWQsIGFyZywgcHJveHlhYmxlLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSwgc2hvdWxkQmluZCkge1xuICAgIGlmICgoKHRoaXMuX2JpdEZpZWxkICYgMTE3NTA2MDQ4KSAhPT0gMCkpIHJldHVybjtcbiAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3RDYWxsYmFjayhtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpLCBmYWxzZSk7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHRoaXMpO1xuICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSByZXR1cm4gdGhpcy5fZnVsZmlsbCh2YWx1ZSk7XG5cbiAgICBpZiAoc2hvdWxkQmluZCkgdGhpcy5fcHJvcGFnYXRlRnJvbShtYXliZVByb21pc2UsIDIpO1xuXG4gICAgdmFyIHByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuXG4gICAgaWYgKHByb21pc2UgPT09IHRoaXMpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLl9sZW5ndGgoKTtcbiAgICAgICAgaWYgKGxlbiA+IDApIHByb21pc2UuX21pZ3JhdGVDYWxsYmFjazAodGhpcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb21pc2UuX21pZ3JhdGVDYWxsYmFja0F0KHRoaXMsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2luZygpO1xuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2VlKHByb21pc2UpO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgdGhpcy5fZnVsZmlsbChwcm9taXNlLl92YWx1ZSgpKTtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChwcm9taXNlLl9yZWFzb24oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RDYWxsYmFjayA9XG5mdW5jdGlvbihyZWFzb24sIHN5bmNocm9ub3VzLCBpZ25vcmVOb25FcnJvcldhcm5pbmdzKSB7XG4gICAgdmFyIHRyYWNlID0gdXRpbC5lbnN1cmVFcnJvck9iamVjdChyZWFzb24pO1xuICAgIHZhciBoYXNTdGFjayA9IHRyYWNlID09PSByZWFzb247XG4gICAgaWYgKCFoYXNTdGFjayAmJiAhaWdub3JlTm9uRXJyb3JXYXJuaW5ncyAmJiBkZWJ1Zy53YXJuaW5ncygpKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJhIHByb21pc2Ugd2FzIHJlamVjdGVkIHdpdGggYSBub24tZXJyb3I6IFwiICtcbiAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcocmVhc29uKTtcbiAgICAgICAgdGhpcy5fd2FybihtZXNzYWdlLCB0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSwgc3luY2hyb25vdXMgPyBoYXNTdGFjayA6IGZhbHNlKTtcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlRnJvbUV4ZWN1dG9yID0gZnVuY3Rpb24gKGV4ZWN1dG9yKSB7XG4gICAgaWYgKGV4ZWN1dG9yID09PSBJTlRFUk5BTCkgcmV0dXJuO1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB0aGlzLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHRoaXMuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICB2YXIgciA9IHRoaXMuX2V4ZWN1dGUoZXhlY3V0b3IsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZWFzb24sIHN5bmNocm9ub3VzKTtcbiAgICB9KTtcbiAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgIHRoaXMuX3BvcENvbnRleHQoKTtcblxuICAgIGlmIChyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sociwgdHJ1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlciA9IGZ1bmN0aW9uIChcbiAgICBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUsIHByb21pc2Vcbikge1xuICAgIHZhciBiaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkgcmV0dXJuO1xuICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHg7XG4gICAgaWYgKHJlY2VpdmVyID09PSBBUFBMWSkge1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZS5sZW5ndGggIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHggPSBlcnJvck9iajtcbiAgICAgICAgICAgIHguZSA9IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgLnNwcmVhZCgpIGEgbm9uLWFycmF5OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gdHJ5Q2F0Y2goaGFuZGxlcikuYXBwbHkodGhpcy5fYm91bmRWYWx1ZSgpLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gdHJ5Q2F0Y2goaGFuZGxlcikuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDY1NTM2KSAhPT0gMCkpIHJldHVybjtcblxuICAgIGlmICh4ID09PSBORVhUX0ZJTFRFUikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoeCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2soeC5lLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKHgsIHByb21pc2VDcmVhdGVkLCBcIlwiLCAgcHJvbWlzZSwgdGhpcyk7XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh4KTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IHRoaXM7XG4gICAgd2hpbGUgKHJldC5faXNGb2xsb3dpbmcoKSkgcmV0ID0gcmV0Ll9mb2xsb3dlZSgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZm9sbG93ZWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Rm9sbG93ZWUgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSBwcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2UgPSBmdW5jdGlvbihwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpIHtcbiAgICB2YXIgaXNQcm9taXNlID0gcHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgdmFyIGFzeW5jR3VhcmFudGVlZCA9ICgoYml0RmllbGQgJiAxMzQyMTc3MjgpICE9PSAwKTtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDY1NTM2KSAhPT0gMCkpIHtcbiAgICAgICAgaWYgKGlzUHJvbWlzZSkgcHJvbWlzZS5faW52b2tlSW50ZXJuYWxPbkNhbmNlbCgpO1xuXG4gICAgICAgIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQgJiZcbiAgICAgICAgICAgIHJlY2VpdmVyLmlzRmluYWxseUhhbmRsZXIoKSkge1xuICAgICAgICAgICAgcmVjZWl2ZXIuY2FuY2VsUHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgICAgICBpZiAodHJ5Q2F0Y2goaGFuZGxlcikuY2FsbChyZWNlaXZlciwgdmFsdWUpID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX3JlamVjdChlcnJvck9iai5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyID09PSByZWZsZWN0SGFuZGxlcikge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbChyZWZsZWN0SGFuZGxlci5jYWxsKHJlY2VpdmVyKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQcm94eWFibGUpIHtcbiAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlQ2FuY2VsbGVkKHByb21pc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZSB8fCBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZUFycmF5KSB7XG4gICAgICAgICAgICBwcm9taXNlLl9jYW5jZWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlY2VpdmVyLmNhbmNlbCgpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghaXNQcm9taXNlKSB7XG4gICAgICAgICAgICBoYW5kbGVyLmNhbGwocmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhc3luY0d1YXJhbnRlZWQpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyKGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUHJveHlhYmxlKSB7XG4gICAgICAgIGlmICghcmVjZWl2ZXIuX2lzUmVzb2x2ZWQoKSkge1xuICAgICAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VGdWxmaWxsZWQodmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZVJlamVjdGVkKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKSB7XG4gICAgICAgIGlmIChhc3luY0d1YXJhbnRlZWQpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlTGF0ZUNhbmNlbGxhdGlvbk9ic2VydmVyID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdmFyIGhhbmRsZXIgPSBjdHguaGFuZGxlcjtcbiAgICB2YXIgcHJvbWlzZSA9IGN0eC5wcm9taXNlO1xuICAgIHZhciByZWNlaXZlciA9IGN0eC5yZWNlaXZlcjtcbiAgICB2YXIgdmFsdWUgPSBjdHgudmFsdWU7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKCEocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICBoYW5kbGVyLmNhbGwocmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlcihoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlQ3R4ID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdGhpcy5fc2V0dGxlUHJvbWlzZShjdHgucHJvbWlzZSwgY3R4LmhhbmRsZXIsIGN0eC5yZWNlaXZlciwgY3R4LnZhbHVlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlMCA9IGZ1bmN0aW9uKGhhbmRsZXIsIHZhbHVlLCBiaXRGaWVsZCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTA7XG4gICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdCgwKTtcbiAgICB0aGlzLl9wcm9taXNlMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZWNlaXZlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleCA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgdmFyIGJhc2UgPSBpbmRleCAqIDQgLSA0O1xuICAgIHRoaXNbYmFzZSArIDJdID1cbiAgICB0aGlzW2Jhc2UgKyAzXSA9XG4gICAgdGhpc1tiYXNlICsgMF0gPVxuICAgIHRoaXNbYmFzZSArIDFdID0gdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Z1bGZpbGwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDExNzUwNjA0OCkgPj4+IDE2KSkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcykge1xuICAgICAgICB2YXIgZXJyID0gbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKTtcbiAgICAgICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZShlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0KGVycik7XG4gICAgfVxuICAgIHRoaXMuX3NldEZ1bGZpbGxlZCgpO1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7XG5cbiAgICBpZiAoKGJpdEZpZWxkICYgNjU1MzUpID4gMCkge1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDEzNDIxNzcyOCkgIT09IDApKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXN5bmMuc2V0dGxlUHJvbWlzZXModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMTE3NTA2MDQ4KSA+Pj4gMTYpKSByZXR1cm47XG4gICAgdGhpcy5fc2V0UmVqZWN0ZWQoKTtcbiAgICB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwID0gcmVhc29uO1xuXG4gICAgaWYgKHRoaXMuX2lzRmluYWwoKSkge1xuICAgICAgICByZXR1cm4gYXN5bmMuZmF0YWxFcnJvcihyZWFzb24sIHV0aWwuaXNOb2RlKTtcbiAgICB9XG5cbiAgICBpZiAoKGJpdEZpZWxkICYgNjU1MzUpID4gMCkge1xuICAgICAgICBhc3luYy5zZXR0bGVQcm9taXNlcyh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9lbnN1cmVQb3NzaWJsZVJlamVjdGlvbkhhbmRsZWQoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbFByb21pc2VzID0gZnVuY3Rpb24gKGxlbiwgdmFsdWUpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyQXQoaSk7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZUF0KGkpO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KGkpO1xuICAgICAgICB0aGlzLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXgoaSk7XG4gICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0UHJvbWlzZXMgPSBmdW5jdGlvbiAobGVuLCByZWFzb24pIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5fcmVqZWN0aW9uSGFuZGxlckF0KGkpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2VBdChpKTtcbiAgICAgICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdChpKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4KGkpO1xuICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCByZWFzb24pO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICB2YXIgbGVuID0gKGJpdEZpZWxkICYgNjU1MzUpO1xuXG4gICAgaWYgKGxlbiA+IDApIHtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAxNjg0Mjc1MikgIT09IDApKSB7XG4gICAgICAgICAgICB2YXIgcmVhc29uID0gdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UwKHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwLCByZWFzb24sIGJpdEZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdFByb21pc2VzKGxlbiwgcmVhc29uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZTAodGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCwgdmFsdWUsIGJpdEZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGZpbGxQcm9taXNlcyhsZW4sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgfVxuICAgIHRoaXMuX2NsZWFyQ2FuY2VsbGF0aW9uRGF0YSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBkZWZlclJlc29sdmUodikge3RoaXMucHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHYpO31cbmZ1bmN0aW9uIGRlZmVyUmVqZWN0KHYpIHt0aGlzLnByb21pc2UuX3JlamVjdENhbGxiYWNrKHYsIGZhbHNlKTt9XG5cblByb21pc2UuZGVmZXIgPSBQcm9taXNlLnBlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiUHJvbWlzZS5kZWZlclwiLCBcIm5ldyBQcm9taXNlXCIpO1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgIHJlc29sdmU6IGRlZmVyUmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0OiBkZWZlclJlamVjdFxuICAgIH07XG59O1xuXG51dGlsLm5vdEVudW1lcmFibGVQcm9wKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgIFwiX21ha2VTZWxmUmVzb2x1dGlvbkVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgIG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKTtcblxuX2RlcmVxXyhcIi4vbWV0aG9kXCIpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24sXG4gICAgZGVidWcpO1xuX2RlcmVxXyhcIi4vYmluZFwiKShQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgZGVidWcpO1xuX2RlcmVxXyhcIi4vY2FuY2VsXCIpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9kaXJlY3RfcmVzb2x2ZVwiKShQcm9taXNlKTtcbl9kZXJlcV8oXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIikoUHJvbWlzZSk7XG5fZGVyZXFfKFwiLi9qb2luXCIpKFxuICAgIFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGFzeW5jLCBnZXREb21haW4pO1xuUHJvbWlzZS5Qcm9taXNlID0gUHJvbWlzZTtcblByb21pc2UudmVyc2lvbiA9IFwiMy41LjBcIjtcbl9kZXJlcV8oJy4vbWFwLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2NhbGxfZ2V0LmpzJykoUHJvbWlzZSk7XG5fZGVyZXFfKCcuL3VzaW5nLmpzJykoUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBjcmVhdGVDb250ZXh0LCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi90aW1lcnMuanMnKShQcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9nZW5lcmF0b3JzLmpzJykoUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgUHJveHlhYmxlLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL25vZGVpZnkuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vcHJvbWlzaWZ5LmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9wcm9wcy5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vcmFjZS5qcycpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yZWR1Y2UuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vc2V0dGxlLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3NvbWUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL2ZpbHRlci5qcycpKFByb21pc2UsIElOVEVSTkFMKTtcbl9kZXJlcV8oJy4vZWFjaC5qcycpKFByb21pc2UsIElOVEVSTkFMKTtcbl9kZXJlcV8oJy4vYW55LmpzJykoUHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgdXRpbC50b0Zhc3RQcm9wZXJ0aWVzKFByb21pc2UucHJvdG90eXBlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZ1bmN0aW9uIGZpbGxUeXBlcyh2YWx1ZSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgdmFyIHAgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9yZWplY3Rpb25IYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcHJvbWlzZTAgPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlY2VpdmVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAvLyBDb21wbGV0ZSBzbGFjayB0cmFja2luZywgb3B0IG91dCBvZiBmaWVsZC10eXBlIHRyYWNraW5nIGFuZCAgICAgICAgICAgXG4gICAgLy8gc3RhYmlsaXplIG1hcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YTogMX0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2I6IDJ9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHtjOiAzfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcygxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoZnVuY3Rpb24oKXt9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHVuZGVmaW5lZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmYWxzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMobmV3IFByb21pc2UoSU5URVJOQUwpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZGVidWcuc2V0Qm91bmRzKEFzeW5jLmZpcnN0TGluZUVycm9yLCB1dGlsLmxhc3RMaW5lRXJyb3IpOyAgICAgICAgICAgICAgIFxuICAgIHJldHVybiBQcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxufTtcblxufSx7XCIuL2FueS5qc1wiOjEsXCIuL2FzeW5jXCI6MixcIi4vYmluZFwiOjMsXCIuL2NhbGxfZ2V0LmpzXCI6NSxcIi4vY2FuY2VsXCI6NixcIi4vY2F0Y2hfZmlsdGVyXCI6NyxcIi4vY29udGV4dFwiOjgsXCIuL2RlYnVnZ2FiaWxpdHlcIjo5LFwiLi9kaXJlY3RfcmVzb2x2ZVwiOjEwLFwiLi9lYWNoLmpzXCI6MTEsXCIuL2Vycm9yc1wiOjEyLFwiLi9lczVcIjoxMyxcIi4vZmlsdGVyLmpzXCI6MTQsXCIuL2ZpbmFsbHlcIjoxNSxcIi4vZ2VuZXJhdG9ycy5qc1wiOjE2LFwiLi9qb2luXCI6MTcsXCIuL21hcC5qc1wiOjE4LFwiLi9tZXRob2RcIjoxOSxcIi4vbm9kZWJhY2tcIjoyMCxcIi4vbm9kZWlmeS5qc1wiOjIxLFwiLi9wcm9taXNlX2FycmF5XCI6MjMsXCIuL3Byb21pc2lmeS5qc1wiOjI0LFwiLi9wcm9wcy5qc1wiOjI1LFwiLi9yYWNlLmpzXCI6MjcsXCIuL3JlZHVjZS5qc1wiOjI4LFwiLi9zZXR0bGUuanNcIjozMCxcIi4vc29tZS5qc1wiOjMxLFwiLi9zeW5jaHJvbm91c19pbnNwZWN0aW9uXCI6MzIsXCIuL3RoZW5hYmxlc1wiOjMzLFwiLi90aW1lcnMuanNcIjozNCxcIi4vdXNpbmcuanNcIjozNSxcIi4vdXRpbFwiOjM2fV0sMjM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgIGFwaVJlamVjdGlvbiwgUHJveHlhYmxlKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgaXNBcnJheSA9IHV0aWwuaXNBcnJheTtcblxuZnVuY3Rpb24gdG9SZXNvbHV0aW9uVmFsdWUodmFsKSB7XG4gICAgc3dpdGNoKHZhbCkge1xuICAgIGNhc2UgLTI6IHJldHVybiBbXTtcbiAgICBjYXNlIC0zOiByZXR1cm4ge307XG4gICAgY2FzZSAtNjogcmV0dXJuIG5ldyBNYXAoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh2YWx1ZXMsIDMpO1xuICAgIH1cbiAgICBwcm9taXNlLl9zZXRPbkNhbmNlbCh0aGlzKTtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkID0gMDtcbiAgICB0aGlzLl9pbml0KHVuZGVmaW5lZCwgLTIpO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlQXJyYXksIFByb3h5YWJsZSk7XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChfLCByZXNvbHZlVmFsdWVJZkVtcHR5KSB7XG4gICAgdmFyIHZhbHVlcyA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy5fdmFsdWVzLCB0aGlzLl9wcm9taXNlKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSB2YWx1ZXMuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcblxuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5fdGhlbihcbiAgICAgICAgICAgICAgICBpbml0LFxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICByZXNvbHZlVmFsdWVJZkVtcHR5XG4gICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdCh2YWx1ZXMuX3JlYXNvbigpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZXMgPSB1dGlsLmFzQXJyYXkodmFsdWVzKTtcbiAgICBpZiAodmFsdWVzID09PSBudWxsKSB7XG4gICAgICAgIHZhciBlcnIgPSBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICBcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcodmFsdWVzKSkucmVhc29uKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKHJlc29sdmVWYWx1ZUlmRW1wdHkgPT09IC01KSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlRW1wdHlBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0b1Jlc29sdXRpb25WYWx1ZShyZXNvbHZlVmFsdWVJZkVtcHR5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pdGVyYXRlKHZhbHVlcyk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHRoaXMuZ2V0QWN0dWFsTGVuZ3RoKHZhbHVlcy5sZW5ndGgpO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbjtcbiAgICB0aGlzLl92YWx1ZXMgPSB0aGlzLnNob3VsZENvcHlWYWx1ZXMoKSA/IG5ldyBBcnJheShsZW4pIDogdGhpcy5fdmFsdWVzO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLl9wcm9taXNlO1xuICAgIHZhciBpc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlc1tpXSwgcmVzdWx0KTtcblxuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2Uuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKG1heWJlUHJvbWlzZS5fdmFsdWUoKSwgaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VSZWplY3RlZChtYXliZVByb21pc2UuX3JlYXNvbigpLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNSZXNvbHZlZCkgcmVzdWx0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcyA9PT0gbnVsbDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSB8fCAhdGhpcy5fcHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm47XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9jYW5jZWwoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3JlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgZmFsc2UpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkKys7XG4gICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMuY2FuY2VsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbaV0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgcmV0dXJuIGxlbjtcbn07XG5cbnJldHVybiBQcm9taXNlQXJyYXk7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgVEhJUyA9IHt9O1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIG5vZGViYWNrRm9yUHJvbWlzZSA9IF9kZXJlcV8oXCIuL25vZGViYWNrXCIpO1xudmFyIHdpdGhBcHBlbmRlZCA9IHV0aWwud2l0aEFwcGVuZGVkO1xudmFyIG1heWJlV3JhcEFzRXJyb3IgPSB1dGlsLm1heWJlV3JhcEFzRXJyb3I7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIFR5cGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5UeXBlRXJyb3I7XG52YXIgZGVmYXVsdFN1ZmZpeCA9IFwiQXN5bmNcIjtcbnZhciBkZWZhdWx0UHJvbWlzaWZpZWQgPSB7X19pc1Byb21pc2lmaWVkX186IHRydWV9O1xudmFyIG5vQ29weVByb3BzID0gW1xuICAgIFwiYXJpdHlcIiwgICAgXCJsZW5ndGhcIixcbiAgICBcIm5hbWVcIixcbiAgICBcImFyZ3VtZW50c1wiLFxuICAgIFwiY2FsbGVyXCIsXG4gICAgXCJjYWxsZWVcIixcbiAgICBcInByb3RvdHlwZVwiLFxuICAgIFwiX19pc1Byb21pc2lmaWVkX19cIlxuXTtcbnZhciBub0NvcHlQcm9wc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXig/OlwiICsgbm9Db3B5UHJvcHMuam9pbihcInxcIikgKyBcIikkXCIpO1xuXG52YXIgZGVmYXVsdEZpbHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdXRpbC5pc0lkZW50aWZpZXIobmFtZSkgJiZcbiAgICAgICAgbmFtZS5jaGFyQXQoMCkgIT09IFwiX1wiICYmXG4gICAgICAgIG5hbWUgIT09IFwiY29uc3RydWN0b3JcIjtcbn07XG5cbmZ1bmN0aW9uIHByb3BzRmlsdGVyKGtleSkge1xuICAgIHJldHVybiAhbm9Db3B5UHJvcHNQYXR0ZXJuLnRlc3Qoa2V5KTtcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNpZmllZChmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5fX2lzUHJvbWlzaWZpZWRfXyA9PT0gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkge1xuICAgIHZhciB2YWwgPSB1dGlsLmdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdChvYmosIGtleSArIHN1ZmZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFByb21pc2lmaWVkKTtcbiAgICByZXR1cm4gdmFsID8gaXNQcm9taXNpZmllZCh2YWwpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gcmV0W2ldO1xuICAgICAgICBpZiAoc3VmZml4UmVnZXhwLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgdmFyIGtleVdpdGhvdXRBc3luY1N1ZmZpeCA9IGtleS5yZXBsYWNlKHN1ZmZpeFJlZ2V4cCwgXCJcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJldC5sZW5ndGg7IGogKz0gMikge1xuICAgICAgICAgICAgICAgIGlmIChyZXRbal0gPT09IGtleVdpdGhvdXRBc3luY1N1ZmZpeCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHByb21pc2lmeSBhbiBBUEkgdGhhdCBoYXMgbm9ybWFsIG1ldGhvZHMgd2l0aCAnJXMnLXN1ZmZpeFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIlc1wiLCBzdWZmaXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmaWFibGVNZXRob2RzKG9iaiwgc3VmZml4LCBzdWZmaXhSZWdleHAsIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyhvYmopO1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICB2YXIgcGFzc2VzRGVmYXVsdEZpbHRlciA9IGZpbHRlciA9PT0gZGVmYXVsdEZpbHRlclxuICAgICAgICAgICAgPyB0cnVlIDogZGVmYXVsdEZpbHRlcihrZXksIHZhbHVlLCBvYmopO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICFpc1Byb21pc2lmaWVkKHZhbHVlKSAmJlxuICAgICAgICAgICAgIWhhc1Byb21pc2lmaWVkKG9iaiwga2V5LCBzdWZmaXgpICYmXG4gICAgICAgICAgICBmaWx0ZXIoa2V5LCB2YWx1ZSwgb2JqLCBwYXNzZXNEZWZhdWx0RmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0LnB1c2goa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tWYWxpZChyZXQsIHN1ZmZpeCwgc3VmZml4UmVnZXhwKTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG52YXIgZXNjYXBlSWRlbnRSZWdleCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFskXSkvLCBcIlxcXFwkXCIpO1xufTtcblxudmFyIG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsO1xuaWYgKCF0cnVlKSB7XG52YXIgc3dpdGNoQ2FzZUFyZ3VtZW50T3JkZXIgPSBmdW5jdGlvbihsaWtlbHlBcmd1bWVudENvdW50KSB7XG4gICAgdmFyIHJldCA9IFtsaWtlbHlBcmd1bWVudENvdW50XTtcbiAgICB2YXIgbWluID0gTWF0aC5tYXgoMCwgbGlrZWx5QXJndW1lbnRDb3VudCAtIDEgLSAzKTtcbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50IC0gMTsgaSA+PSBtaW47IC0taSkge1xuICAgICAgICByZXQucHVzaChpKTtcbiAgICB9XG4gICAgZm9yKHZhciBpID0gbGlrZWx5QXJndW1lbnRDb3VudCArIDE7IGkgPD0gMzsgKytpKSB7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxudmFyIGFyZ3VtZW50U2VxdWVuY2UgPSBmdW5jdGlvbihhcmd1bWVudENvdW50KSB7XG4gICAgcmV0dXJuIHV0aWwuZmlsbGVkUmFuZ2UoYXJndW1lbnRDb3VudCwgXCJfYXJnXCIsIFwiXCIpO1xufTtcblxudmFyIHBhcmFtZXRlckRlY2xhcmF0aW9uID0gZnVuY3Rpb24ocGFyYW1ldGVyQ291bnQpIHtcbiAgICByZXR1cm4gdXRpbC5maWxsZWRSYW5nZShcbiAgICAgICAgTWF0aC5tYXgocGFyYW1ldGVyQ291bnQsIDMpLCBcIl9hcmdcIiwgXCJcIik7XG59O1xuXG52YXIgcGFyYW1ldGVyQ291bnQgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihmbi5sZW5ndGgsIDEwMjMgKyAxKSwgMCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xufTtcblxubWFrZU5vZGVQcm9taXNpZmllZEV2YWwgPVxuZnVuY3Rpb24oY2FsbGJhY2ssIHJlY2VpdmVyLCBvcmlnaW5hbE5hbWUsIGZuLCBfLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgbmV3UGFyYW1ldGVyQ291bnQgPSBNYXRoLm1heCgwLCBwYXJhbWV0ZXJDb3VudChmbikgLSAxKTtcbiAgICB2YXIgYXJndW1lbnRPcmRlciA9IHN3aXRjaENhc2VBcmd1bWVudE9yZGVyKG5ld1BhcmFtZXRlckNvdW50KTtcbiAgICB2YXIgc2hvdWxkUHJveHlUaGlzID0gdHlwZW9mIGNhbGxiYWNrID09PSBcInN0cmluZ1wiIHx8IHJlY2VpdmVyID09PSBUSElTO1xuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVDYWxsRm9yQXJndW1lbnRDb3VudChjb3VudCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50U2VxdWVuY2UoY291bnQpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIGNvbW1hID0gY291bnQgPiAwID8gXCIsIFwiIDogXCJcIjtcbiAgICAgICAgdmFyIHJldDtcbiAgICAgICAgaWYgKHNob3VsZFByb3h5VGhpcykge1xuICAgICAgICAgICAgcmV0ID0gXCJyZXQgPSBjYWxsYmFjay5jYWxsKHRoaXMsIHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0ID0gcmVjZWl2ZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gXCJyZXQgPSBjYWxsYmFjayh7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIlxuICAgICAgICAgICAgICAgIDogXCJyZXQgPSBjYWxsYmFjay5jYWxsKHJlY2VpdmVyLCB7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0LnJlcGxhY2UoXCJ7e2FyZ3N9fVwiLCBhcmdzKS5yZXBsYWNlKFwiLCBcIiwgY29tbWEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQXJndW1lbnRTd2l0Y2hDYXNlKCkge1xuICAgICAgICB2YXIgcmV0ID0gXCJcIjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudE9yZGVyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICByZXQgKz0gXCJjYXNlIFwiICsgYXJndW1lbnRPcmRlcltpXSArXCI6XCIgK1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlQ2FsbEZvckFyZ3VtZW50Q291bnQoYXJndW1lbnRPcmRlcltpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXQgKz0gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGxlbiArIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBpID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGFyZ3NbaV0gPSBub2RlYmFjazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtDb2RlRm9yQ2FsbF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcIltDb2RlRm9yQ2FsbF1cIiwgKHNob3VsZFByb3h5VGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwicmV0ID0gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XFxuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInJldCA9IGNhbGxiYWNrLmFwcGx5KHJlY2VpdmVyLCBhcmdzKTtcXG5cIikpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciBnZXRGdW5jdGlvbkNvZGUgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoXCJ0aGlzICE9IG51bGwgPyB0aGlzWydcIitjYWxsYmFjaytcIiddIDogZm5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImZuXCI7XG4gICAgdmFyIGJvZHkgPSBcIid1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB2YXIgcmV0ID0gZnVuY3Rpb24gKFBhcmFtZXRlcnMpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIG5vZGViYWNrID0gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UsIFwiICsgbXVsdGlBcmdzICsgXCIpOyAgIFxcblxcXG4gICAgICAgICAgICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB0cnlDYXRjaChbR2V0RnVuY3Rpb25Db2RlXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NvZGVGb3JTd2l0Y2hDYXNlXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sobWF5YmVXcmFwQXNFcnJvcihyZXQuZSksIHRydWUsIHRydWUpO1xcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBpZiAoIXByb21pc2UuX2lzRmF0ZVNlYWxlZCgpKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTsgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHJldCwgJ19faXNQcm9taXNpZmllZF9fJywgdHJ1ZSk7ICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiByZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgXCIucmVwbGFjZShcIltDb2RlRm9yU3dpdGNoQ2FzZV1cIiwgZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSlcbiAgICAgICAgLnJlcGxhY2UoXCJbR2V0RnVuY3Rpb25Db2RlXVwiLCBnZXRGdW5jdGlvbkNvZGUpO1xuICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoXCJQYXJhbWV0ZXJzXCIsIHBhcmFtZXRlckRlY2xhcmF0aW9uKG5ld1BhcmFtZXRlckNvdW50KSk7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcIlByb21pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZm5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVjZWl2ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0aEFwcGVuZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heWJlV3JhcEFzRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibm9kZWJhY2tGb3JQcm9taXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRyeUNhdGNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yT2JqXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vdEVudW1lcmFibGVQcm9wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklOVEVSTkFMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5KShcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZm4sXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyLFxuICAgICAgICAgICAgICAgICAgICB3aXRoQXBwZW5kZWQsXG4gICAgICAgICAgICAgICAgICAgIG1heWJlV3JhcEFzRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG5vZGViYWNrRm9yUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC50cnlDYXRjaCxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5lcnJvck9iaixcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcCxcbiAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwpO1xufTtcbn1cblxuZnVuY3Rpb24gbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmUoY2FsbGJhY2ssIHJlY2VpdmVyLCBfLCBmbiwgX18sIG11bHRpQXJncykge1xuICAgIHZhciBkZWZhdWx0VGhpcyA9IChmdW5jdGlvbigpIHtyZXR1cm4gdGhpczt9KSgpO1xuICAgIHZhciBtZXRob2QgPSBjYWxsYmFjaztcbiAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9taXNpZmllZCgpIHtcbiAgICAgICAgdmFyIF9yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IFRISVMpIF9yZWNlaXZlciA9IHRoaXM7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICB2YXIgY2IgPSB0eXBlb2YgbWV0aG9kID09PSBcInN0cmluZ1wiICYmIHRoaXMgIT09IGRlZmF1bHRUaGlzXG4gICAgICAgICAgICA/IHRoaXNbbWV0aG9kXSA6IGNhbGxiYWNrO1xuICAgICAgICB2YXIgZm4gPSBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgbXVsdGlBcmdzKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNiLmFwcGx5KF9yZWNlaXZlciwgd2l0aEFwcGVuZGVkKGFyZ3VtZW50cywgZm4pKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhtYXliZVdyYXBBc0Vycm9yKGUpLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByb21pc2UuX2lzRmF0ZVNlYWxlZCgpKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AocHJvbWlzaWZpZWQsIFwiX19pc1Byb21pc2lmaWVkX19cIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHByb21pc2lmaWVkO1xufVxuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZCA9IGNhbkV2YWx1YXRlXG4gICAgPyBtYWtlTm9kZVByb21pc2lmaWVkRXZhbFxuICAgIDogbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmU7XG5cbmZ1bmN0aW9uIHByb21pc2lmeUFsbChvYmosIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKSB7XG4gICAgdmFyIHN1ZmZpeFJlZ2V4cCA9IG5ldyBSZWdFeHAoZXNjYXBlSWRlbnRSZWdleChzdWZmaXgpICsgXCIkXCIpO1xuICAgIHZhciBtZXRob2RzID1cbiAgICAgICAgcHJvbWlzaWZpYWJsZU1ldGhvZHMob2JqLCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCwgZmlsdGVyKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtZXRob2RzLmxlbmd0aDsgaSA8IGxlbjsgaSs9IDIpIHtcbiAgICAgICAgdmFyIGtleSA9IG1ldGhvZHNbaV07XG4gICAgICAgIHZhciBmbiA9IG1ldGhvZHNbaSsxXTtcbiAgICAgICAgdmFyIHByb21pc2lmaWVkS2V5ID0ga2V5ICsgc3VmZml4O1xuICAgICAgICBpZiAocHJvbWlzaWZpZXIgPT09IG1ha2VOb2RlUHJvbWlzaWZpZWQpIHtcbiAgICAgICAgICAgIG9ialtwcm9taXNpZmllZEtleV0gPVxuICAgICAgICAgICAgICAgIG1ha2VOb2RlUHJvbWlzaWZpZWQoa2V5LCBUSElTLCBrZXksIGZuLCBzdWZmaXgsIG11bHRpQXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzaWZpZWQgPSBwcm9taXNpZmllcihmbiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VOb2RlUHJvbWlzaWZpZWQoa2V5LCBUSElTLCBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4sIHN1ZmZpeCwgbXVsdGlBcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChwcm9taXNpZmllZCwgXCJfX2lzUHJvbWlzaWZpZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgICAgIG9ialtwcm9taXNpZmllZEtleV0gPSBwcm9taXNpZmllZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMob2JqKTtcbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBwcm9taXNpZnkoY2FsbGJhY2ssIHJlY2VpdmVyLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChjYWxsYmFjaywgcmVjZWl2ZXIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2ssIG51bGwsIG11bHRpQXJncyk7XG59XG5cblByb21pc2UucHJvbWlzaWZ5ID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICBpZiAoaXNQcm9taXNpZmllZChmbikpIHtcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgICBvcHRpb25zID0gT2JqZWN0KG9wdGlvbnMpO1xuICAgIHZhciByZWNlaXZlciA9IG9wdGlvbnMuY29udGV4dCA9PT0gdW5kZWZpbmVkID8gVEhJUyA6IG9wdGlvbnMuY29udGV4dDtcbiAgICB2YXIgbXVsdGlBcmdzID0gISFvcHRpb25zLm11bHRpQXJncztcbiAgICB2YXIgcmV0ID0gcHJvbWlzaWZ5KGZuLCByZWNlaXZlciwgbXVsdGlBcmdzKTtcbiAgICB1dGlsLmNvcHlEZXNjcmlwdG9ycyhmbiwgcmV0LCBwcm9wc0ZpbHRlcik7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvbWlzaWZ5QWxsID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHRhcmdldCBvZiBwcm9taXNpZnlBbGwgbXVzdCBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIG11bHRpQXJncyA9ICEhb3B0aW9ucy5tdWx0aUFyZ3M7XG4gICAgdmFyIHN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4O1xuICAgIGlmICh0eXBlb2Ygc3VmZml4ICE9PSBcInN0cmluZ1wiKSBzdWZmaXggPSBkZWZhdWx0U3VmZml4O1xuICAgIHZhciBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkZWZhdWx0RmlsdGVyO1xuICAgIHZhciBwcm9taXNpZmllciA9IG9wdGlvbnMucHJvbWlzaWZpZXI7XG4gICAgaWYgKHR5cGVvZiBwcm9taXNpZmllciAhPT0gXCJmdW5jdGlvblwiKSBwcm9taXNpZmllciA9IG1ha2VOb2RlUHJvbWlzaWZpZWQ7XG5cbiAgICBpZiAoIXV0aWwuaXNJZGVudGlmaWVyKHN1ZmZpeCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzdWZmaXggbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cblxuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyh0YXJnZXQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0YXJnZXRba2V5c1tpXV07XG4gICAgICAgIGlmIChrZXlzW2ldICE9PSBcImNvbnN0cnVjdG9yXCIgJiZcbiAgICAgICAgICAgIHV0aWwuaXNDbGFzcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHByb21pc2lmeUFsbCh2YWx1ZS5wcm90b3R5cGUsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllcixcbiAgICAgICAgICAgICAgICBtdWx0aUFyZ3MpO1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzaWZ5QWxsKHRhcmdldCwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpO1xufTtcbn07XG5cblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi9ub2RlYmFja1wiOjIwLFwiLi91dGlsXCI6MzZ9XSwyNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oXG4gICAgUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIEVzNk1hcDtcbmlmICh0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIpIEVzNk1hcCA9IE1hcDtcblxudmFyIG1hcFRvRW50cmllcyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzaXplID0gMDtcblxuICAgIGZ1bmN0aW9uIGV4dHJhY3RFbnRyeSh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHRoaXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIHRoaXNbaW5kZXggKyBzaXplXSA9IGtleTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWFwVG9FbnRyaWVzKG1hcCkge1xuICAgICAgICBzaXplID0gbWFwLnNpemU7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBBcnJheShtYXAuc2l6ZSAqIDIpO1xuICAgICAgICBtYXAuZm9yRWFjaChleHRyYWN0RW50cnksIHJldCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn0pKCk7XG5cbnZhciBlbnRyaWVzVG9NYXAgPSBmdW5jdGlvbihlbnRyaWVzKSB7XG4gICAgdmFyIHJldCA9IG5ldyBFczZNYXAoKTtcbiAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGggLyAyIHwgMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBlbnRyaWVzW2xlbmd0aCArIGldO1xuICAgICAgICB2YXIgdmFsdWUgPSBlbnRyaWVzW2ldO1xuICAgICAgICByZXQuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gUHJvcGVydGllc1Byb21pc2VBcnJheShvYmopIHtcbiAgICB2YXIgaXNNYXAgPSBmYWxzZTtcbiAgICB2YXIgZW50cmllcztcbiAgICBpZiAoRXM2TWFwICE9PSB1bmRlZmluZWQgJiYgb2JqIGluc3RhbmNlb2YgRXM2TWFwKSB7XG4gICAgICAgIGVudHJpZXMgPSBtYXBUb0VudHJpZXMob2JqKTtcbiAgICAgICAgaXNNYXAgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrZXlzID0gZXM1LmtleXMob2JqKTtcbiAgICAgICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBlbnRyaWVzID0gbmV3IEFycmF5KGxlbiAqIDIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGVudHJpZXNbaV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGVudHJpZXNbaSArIGxlbl0gPSBrZXk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQoZW50cmllcyk7XG4gICAgdGhpcy5faXNNYXAgPSBpc01hcDtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIGlzTWFwID8gLTYgOiAtMyk7XG59XG51dGlsLmluaGVyaXRzKFByb3BlcnRpZXNQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbDtcbiAgICAgICAgaWYgKHRoaXMuX2lzTWFwKSB7XG4gICAgICAgICAgICB2YWwgPSBlbnRyaWVzVG9NYXAodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbCA9IHt9O1xuICAgICAgICAgICAgdmFyIGtleU9mZnNldCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5sZW5ndGgoKTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFsW3RoaXMuX3ZhbHVlc1tpICsga2V5T2Zmc2V0XV0gPSB0aGlzLl92YWx1ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuc2hvdWxkQ29weVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgcmV0dXJuIGxlbiA+PiAxO1xufTtcblxuZnVuY3Rpb24gcHJvcHMocHJvbWlzZXMpIHtcbiAgICB2YXIgcmV0O1xuICAgIHZhciBjYXN0VmFsdWUgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHByb21pc2VzKTtcblxuICAgIGlmICghaXNPYmplY3QoY2FzdFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiY2Fubm90IGF3YWl0IHByb3BlcnRpZXMgb2YgYSBub24tb2JqZWN0XFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9IGVsc2UgaWYgKGNhc3RWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0ID0gY2FzdFZhbHVlLl90aGVuKFxuICAgICAgICAgICAgUHJvbWlzZS5wcm9wcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBuZXcgUHJvcGVydGllc1Byb21pc2VBcnJheShjYXN0VmFsdWUpLnByb21pc2UoKTtcbiAgICB9XG5cbiAgICBpZiAoY2FzdFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20oY2FzdFZhbHVlLCAyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUucHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb3BzKHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm9wcyA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBwcm9wcyhwcm9taXNlcyk7XG59O1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGFycmF5TW92ZShzcmMsIHNyY0luZGV4LCBkc3QsIGRzdEluZGV4LCBsZW4pIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgIGRzdFtqICsgZHN0SW5kZXhdID0gc3JjW2ogKyBzcmNJbmRleF07XG4gICAgICAgIHNyY1tqICsgc3JjSW5kZXhdID0gdm9pZCAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUXVldWUoY2FwYWNpdHkpIHtcbiAgICB0aGlzLl9jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgdGhpcy5fZnJvbnQgPSAwO1xufVxuXG5RdWV1ZS5wcm90b3R5cGUuX3dpbGxCZU92ZXJDYXBhY2l0eSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcGFjaXR5IDwgc2l6ZTtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fcHVzaE9uZSA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKTtcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KGxlbmd0aCArIDEpO1xuICAgIHZhciBpID0gKHRoaXMuX2Zyb250ICsgbGVuZ3RoKSAmICh0aGlzLl9jYXBhY2l0eSAtIDEpO1xuICAgIHRoaXNbaV0gPSBhcmc7XG4gICAgdGhpcy5fbGVuZ3RoID0gbGVuZ3RoICsgMTtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCkgKyAzO1xuICAgIGlmICh0aGlzLl93aWxsQmVPdmVyQ2FwYWNpdHkobGVuZ3RoKSkge1xuICAgICAgICB0aGlzLl9wdXNoT25lKGZuKTtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShyZWNlaXZlcik7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUoYXJnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaiA9IHRoaXMuX2Zyb250ICsgbGVuZ3RoIC0gMztcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KGxlbmd0aCk7XG4gICAgdmFyIHdyYXBNYXNrID0gdGhpcy5fY2FwYWNpdHkgLSAxO1xuICAgIHRoaXNbKGogKyAwKSAmIHdyYXBNYXNrXSA9IGZuO1xuICAgIHRoaXNbKGogKyAxKSAmIHdyYXBNYXNrXSA9IHJlY2VpdmVyO1xuICAgIHRoaXNbKGogKyAyKSAmIHdyYXBNYXNrXSA9IGFyZztcbiAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZyb250ID0gdGhpcy5fZnJvbnQsXG4gICAgICAgIHJldCA9IHRoaXNbZnJvbnRdO1xuXG4gICAgdGhpc1tmcm9udF0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZnJvbnQgPSAoZnJvbnQgKyAxKSAmICh0aGlzLl9jYXBhY2l0eSAtIDEpO1xuICAgIHRoaXMuX2xlbmd0aC0tO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX2NoZWNrQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgIGlmICh0aGlzLl9jYXBhY2l0eSA8IHNpemUpIHtcbiAgICAgICAgdGhpcy5fcmVzaXplVG8odGhpcy5fY2FwYWNpdHkgPDwgMSk7XG4gICAgfVxufTtcblxuUXVldWUucHJvdG90eXBlLl9yZXNpemVUbyA9IGZ1bmN0aW9uIChjYXBhY2l0eSkge1xuICAgIHZhciBvbGRDYXBhY2l0eSA9IHRoaXMuX2NhcGFjaXR5O1xuICAgIHRoaXMuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdmFyIGZyb250ID0gdGhpcy5fZnJvbnQ7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgICB2YXIgbW92ZUl0ZW1zQ291bnQgPSAoZnJvbnQgKyBsZW5ndGgpICYgKG9sZENhcGFjaXR5IC0gMSk7XG4gICAgYXJyYXlNb3ZlKHRoaXMsIDAsIHRoaXMsIG9sZENhcGFjaXR5LCBtb3ZlSXRlbXNDb3VudCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFF1ZXVlO1xuXG59LHt9XSwyNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oXG4gICAgUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuXG52YXIgcmFjZUxhdGVyID0gZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHJldHVybiByYWNlKGFycmF5LCBwcm9taXNlKTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIHJhY2UocHJvbWlzZXMsIHBhcmVudCkge1xuICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHByb21pc2VzKTtcblxuICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiByYWNlTGF0ZXIobWF5YmVQcm9taXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlcyA9IHV0aWwuYXNBcnJheShwcm9taXNlcyk7XG4gICAgICAgIGlmIChwcm9taXNlcyA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gYXJyYXkgb3IgYW4gaXRlcmFibGUgb2JqZWN0IGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKHByb21pc2VzKSk7XG4gICAgfVxuXG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICBpZiAocGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0Ll9wcm9wYWdhdGVGcm9tKHBhcmVudCwgMyk7XG4gICAgfVxuICAgIHZhciBmdWxmaWxsID0gcmV0Ll9mdWxmaWxsO1xuICAgIHZhciByZWplY3QgPSByZXQuX3JlamVjdDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcHJvbWlzZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHZhbCA9IHByb21pc2VzW2ldO1xuXG4gICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCAmJiAhKGkgaW4gcHJvbWlzZXMpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIFByb21pc2UuY2FzdCh2YWwpLl90aGVuKGZ1bGZpbGwsIHJlamVjdCwgdW5kZWZpbmVkLCByZXQsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gcmFjZShwcm9taXNlcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnJhY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJhY2UodGhpcywgdW5kZWZpbmVkKTtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zykge1xudmFyIGdldERvbWFpbiA9IFByb21pc2UuX2dldERvbWFpbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cbmZ1bmN0aW9uIFJlZHVjdGlvblByb21pc2VBcnJheShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJChwcm9taXNlcyk7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHRoaXMuX2ZuID0gZG9tYWluID09PSBudWxsID8gZm4gOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmbik7XG4gICAgaWYgKGluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGluaXRpYWxWYWx1ZSA9IFByb21pc2UucmVzb2x2ZShpbml0aWFsVmFsdWUpO1xuICAgICAgICBpbml0aWFsVmFsdWUuX2F0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLl9pbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlID0gbnVsbDtcbiAgICBpZihfZWFjaCA9PT0gSU5URVJOQUwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcyA9IEFycmF5KHRoaXMuX2xlbmd0aCk7XG4gICAgfSBlbHNlIGlmIChfZWFjaCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLl9wcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTUpO1xufVxudXRpbC5pbmhlcml0cyhSZWR1Y3Rpb25Qcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX2dvdEFjY3VtID0gZnVuY3Rpb24oYWNjdW0pIHtcbiAgICBpZiAodGhpcy5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkICYmIFxuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzICE9PSBudWxsICYmIFxuICAgICAgICBhY2N1bSAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcy5wdXNoKGFjY3VtKTtcbiAgICB9XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9lYWNoQ29tcGxldGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lYWNoVmFsdWVzO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge307XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmVFbXB0eUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyB0aGlzLl9lYWNoVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsVmFsdWUpO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3Byb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKHNlbmRlcikge1xuICAgIGlmIChzZW5kZXIgPT09IHRoaXMuX2luaXRpYWxWYWx1ZSkgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB0aGlzLl9yZXN1bHRDYW5jZWxsZWQkKCk7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDYW5jZWxsYWJsZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlLmNhbmNlbCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5pdGlhbFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9pbml0aWFsVmFsdWUuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faXRlcmF0ZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdmFyIHZhbHVlO1xuICAgIHZhciBpO1xuICAgIHZhciBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuX2luaXRpYWxWYWx1ZTtcbiAgICAgICAgaSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBQcm9taXNlLnJlc29sdmUodmFsdWVzWzBdKTtcbiAgICAgICAgaSA9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG5cbiAgICBpZiAoIXZhbHVlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0ge1xuICAgICAgICAgICAgICAgIGFjY3VtOiBudWxsLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgICAgICAgYXJyYXk6IHRoaXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl90aGVuKGdvdEFjY3VtLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3R4LCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICAuX3RoZW4odGhpcy5fZWFjaENvbXBsZXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgdmFsdWUuX3RoZW4oY29tcGxldGVkLCBjb21wbGV0ZWQsIHVuZGVmaW5lZCwgdmFsdWUsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gKGZuLCBpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gcmVkdWNlKHRoaXMsIGZuLCBpbml0aWFsVmFsdWUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5yZWR1Y2UgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgcmV0dXJuIHJlZHVjZShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xufTtcblxuZnVuY3Rpb24gY29tcGxldGVkKHZhbHVlT3JSZWFzb24sIGFycmF5KSB7XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICBhcnJheS5fcmVzb2x2ZSh2YWx1ZU9yUmVhc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJheS5fcmVqZWN0KHZhbHVlT3JSZWFzb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIGFycmF5ID0gbmV3IFJlZHVjdGlvblByb21pc2VBcnJheShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xuICAgIHJldHVybiBhcnJheS5wcm9taXNlKCk7XG59XG5cbmZ1bmN0aW9uIGdvdEFjY3VtKGFjY3VtKSB7XG4gICAgdGhpcy5hY2N1bSA9IGFjY3VtO1xuICAgIHRoaXMuYXJyYXkuX2dvdEFjY3VtKGFjY3VtKTtcbiAgICB2YXIgdmFsdWUgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXMudmFsdWUsIHRoaXMuYXJyYXkuX3Byb21pc2UpO1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5hcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZS5fdGhlbihnb3RWYWx1ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdvdFZhbHVlLmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ290VmFsdWUodmFsdWUpIHtcbiAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuICAgIHZhciBwcm9taXNlID0gYXJyYXkuX3Byb21pc2U7XG4gICAgdmFyIGZuID0gdHJ5Q2F0Y2goYXJyYXkuX2ZuKTtcbiAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXQ7XG4gICAgaWYgKGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtLCB2YWx1ZSwgdGhpcy5pbmRleCwgdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBhcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gcmV0O1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICByZXQsXG4gICAgICAgIHByb21pc2VDcmVhdGVkLFxuICAgICAgICBhcnJheS5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkID8gXCJQcm9taXNlLmVhY2hcIiA6IFwiUHJvbWlzZS5yZWR1Y2VcIixcbiAgICAgICAgcHJvbWlzZVxuICAgICk7XG4gICAgcmV0dXJuIHJldDtcbn1cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBzY2hlZHVsZTtcbnZhciBub0FzeW5jU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG59O1xudmFyIE5hdGl2ZVByb21pc2UgPSB1dGlsLmdldE5hdGl2ZVByb21pc2UoKTtcbmlmICh1dGlsLmlzTm9kZSAmJiB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBHbG9iYWxTZXRJbW1lZGlhdGUgPSBnbG9iYWwuc2V0SW1tZWRpYXRlO1xuICAgIHZhciBQcm9jZXNzTmV4dFRpY2sgPSBwcm9jZXNzLm5leHRUaWNrO1xuICAgIHNjaGVkdWxlID0gdXRpbC5pc1JlY2VudE5vZGVcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uKGZuKSB7IEdsb2JhbFNldEltbWVkaWF0ZS5jYWxsKGdsb2JhbCwgZm4pOyB9XG4gICAgICAgICAgICAgICAgOiBmdW5jdGlvbihmbikgeyBQcm9jZXNzTmV4dFRpY2suY2FsbChwcm9jZXNzLCBmbik7IH07XG59IGVsc2UgaWYgKHR5cGVvZiBOYXRpdmVQcm9taXNlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIE5hdGl2ZVByb21pc2UucmVzb2x2ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIG5hdGl2ZVByb21pc2UgPSBOYXRpdmVQcm9taXNlLnJlc29sdmUoKTtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIG5hdGl2ZVByb21pc2UudGhlbihmbik7XG4gICAgfTtcbn0gZWxzZSBpZiAoKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICEodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvciAmJlxuICAgICAgICAgICAgKHdpbmRvdy5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSB8fCB3aW5kb3cuY29yZG92YSkpKSB7XG4gICAgc2NoZWR1bGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgb3B0cyA9IHthdHRyaWJ1dGVzOiB0cnVlfTtcbiAgICAgICAgdmFyIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZGl2MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvMiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG8yLm9ic2VydmUoZGl2Miwgb3B0cyk7XG5cbiAgICAgICAgdmFyIHNjaGVkdWxlVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodG9nZ2xlU2NoZWR1bGVkKSByZXR1cm47XG4gICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGl2Mi5jbGFzc0xpc3QudG9nZ2xlKFwiZm9vXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzY2hlZHVsZShmbikge1xuICAgICAgICAgICAgdmFyIG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLm9ic2VydmUoZGl2LCBvcHRzKTtcbiAgICAgICAgICAgIHNjaGVkdWxlVG9nZ2xlKCk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcbn0gZWxzZSBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHNldEltbWVkaWF0ZShmbik7XG4gICAgfTtcbn0gZWxzZSBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBzY2hlZHVsZSA9IG5vQXN5bmNTY2hlZHVsZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNjaGVkdWxlO1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBkZWJ1Zykge1xudmFyIFByb21pc2VJbnNwZWN0aW9uID0gUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxuZnVuY3Rpb24gU2V0dGxlZFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJCh2YWx1ZXMpO1xufVxudXRpbC5pbmhlcml0cyhTZXR0bGVkUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlc29sdmVkID0gZnVuY3Rpb24gKGluZGV4LCBpbnNwZWN0aW9uKSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IGluc3BlY3Rpb247XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMzM1NTQ0MzI7XG4gICAgcmV0Ll9zZXR0bGVkVmFsdWVGaWVsZCA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlUmVzb2x2ZWQoaW5kZXgsIHJldCk7XG59O1xuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24sIGluZGV4KSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlSW5zcGVjdGlvbigpO1xuICAgIHJldC5fYml0RmllbGQgPSAxNjc3NzIxNjtcbiAgICByZXQuX3NldHRsZWRWYWx1ZUZpZWxkID0gcmVhc29uO1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlUmVzb2x2ZWQoaW5kZXgsIHJldCk7XG59O1xuXG5Qcm9taXNlLnNldHRsZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCIuc2V0dGxlKClcIiwgXCIucmVmbGVjdCgpXCIpO1xuICAgIHJldHVybiBuZXcgU2V0dGxlZFByb21pc2VBcnJheShwcm9taXNlcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2V0dGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBQcm9taXNlLnNldHRsZSh0aGlzKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG5mdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIFJhbmdlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuUmFuZ2VFcnJvcjtcbnZhciBBZ2dyZWdhdGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5BZ2dyZWdhdGVFcnJvcjtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xudmFyIENBTkNFTExBVElPTiA9IHt9O1xuXG5cbmZ1bmN0aW9uIFNvbWVQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbiAgICB0aGlzLl9ob3dNYW55ID0gMDtcbiAgICB0aGlzLl91bndyYXAgPSBmYWxzZTtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhTb21lUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hvd01hbnkgPT09IDApIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZShbXSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG4gICAgdmFyIGlzQXJyYXlSZXNvbHZlZCA9IGlzQXJyYXkodGhpcy5fdmFsdWVzKTtcbiAgICBpZiAoIXRoaXMuX2lzUmVzb2x2ZWQoKSAmJlxuICAgICAgICBpc0FycmF5UmVzb2x2ZWQgJiZcbiAgICAgICAgdGhpcy5faG93TWFueSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdCh0aGlzLl9nZXRSYW5nZUVycm9yKHRoaXMubGVuZ3RoKCkpKTtcbiAgICB9XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pbml0KCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRVbndyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdW53cmFwID0gdHJ1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLmhvd01hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hvd01hbnk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRIb3dNYW55ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgdGhpcy5faG93TWFueSA9IGNvdW50O1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl9hZGRGdWxmaWxsZWQodmFsdWUpO1xuICAgIGlmICh0aGlzLl9mdWxmaWxsZWQoKSA9PT0gdGhpcy5ob3dNYW55KCkpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IHRoaXMuaG93TWFueSgpO1xuICAgICAgICBpZiAodGhpcy5ob3dNYW55KCkgPT09IDEgJiYgdGhpcy5fdW53cmFwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlc1swXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcblxufTtcblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fYWRkUmVqZWN0ZWQocmVhc29uKTtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tPdXRjb21lKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0aGlzLl92YWx1ZXMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgfVxuICAgIHRoaXMuX2FkZFJlamVjdGVkKENBTkNFTExBVElPTik7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrT3V0Y29tZSgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NoZWNrT3V0Y29tZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmhvd01hbnkoKSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEFnZ3JlZ2F0ZUVycm9yKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCgpOyBpIDwgdGhpcy5fdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fdmFsdWVzW2ldICE9PSBDQU5DRUxMQVRJT04pIHtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5fdmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG90YWxSZXNvbHZlZDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aCAtIHRoaXMubGVuZ3RoKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdmFsdWVzLnB1c2gocmVhc29uKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hZGRGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXNbdGhpcy5fdG90YWxSZXNvbHZlZCsrXSA9IHZhbHVlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NhblBvc3NpYmx5RnVsZmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5sZW5ndGgoKSAtIHRoaXMuX3JlamVjdGVkKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ2V0UmFuZ2VFcnJvciA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHZhciBtZXNzYWdlID0gXCJJbnB1dCBhcnJheSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgXCIgK1xuICAgICAgICAgICAgdGhpcy5faG93TWFueSArIFwiIGl0ZW1zIGJ1dCBjb250YWlucyBvbmx5IFwiICsgY291bnQgKyBcIiBpdGVtc1wiO1xuICAgIHJldHVybiBuZXcgUmFuZ2VFcnJvcihtZXNzYWdlKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXNvbHZlRW1wdHlBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcigwKSk7XG59O1xuXG5mdW5jdGlvbiBzb21lKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgaWYgKChob3dNYW55IHwgMCkgIT09IGhvd01hbnkgfHwgaG93TWFueSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIHBvc2l0aXZlIGludGVnZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICByZXQuc2V0SG93TWFueShob3dNYW55KTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLnNvbWUgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGhvd01hbnkpIHtcbiAgICByZXR1cm4gc29tZShwcm9taXNlcywgaG93TWFueSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zb21lID0gZnVuY3Rpb24gKGhvd01hbnkpIHtcbiAgICByZXR1cm4gc29tZSh0aGlzLCBob3dNYW55KTtcbn07XG5cblByb21pc2UuX1NvbWVQcm9taXNlQXJyYXkgPSBTb21lUHJvbWlzZUFycmF5O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gUHJvbWlzZUluc3BlY3Rpb24ocHJvbWlzZSkge1xuICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZCA9IHByb21pc2UuX2lzRmF0ZVNlYWxlZCgpXG4gICAgICAgICAgICA/IHByb21pc2UuX3NldHRsZWRWYWx1ZSgpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5fc2V0dGxlZFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZUZpZWxkO1xufTtcblxudmFyIHZhbHVlID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IGZ1bGZpbGxtZW50IHZhbHVlIG9mIGEgbm9uLWZ1bGZpbGxlZCBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxudmFyIHJlYXNvbiA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5lcnJvciA9XG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUucmVhc29uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbm5vdCBnZXQgcmVqZWN0aW9uIHJlYXNvbiBvZiBhIG5vbi1yZWplY3RlZCBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxudmFyIGlzRnVsZmlsbGVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMDtcbn07XG5cbnZhciBpc1JlamVjdGVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMDtcbn07XG5cbnZhciBpc1BlbmRpbmcgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDA7XG59O1xuXG52YXIgaXNSZXNvbHZlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1Jlc29sdmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA1MDMzMTY0OCkgIT09IDA7XG59O1xuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgODQ1NDE0NCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fX2lzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDY1NTM2KSA9PT0gNjU1MzY7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX19pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX3RhcmdldCgpLl9iaXRGaWVsZCAmIDg0NTQxNDQpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUGVuZGluZy5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNSZWplY3RlZC5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzRnVsZmlsbGVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1Jlc29sdmVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdmFsdWUuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdGFyZ2V0Ll91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgcmV0dXJuIHJlYXNvbi5jYWxsKHRhcmdldCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVhc29uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cblByb21pc2UuUHJvbWlzZUluc3BlY3Rpb24gPSBQcm9taXNlSW5zcGVjdGlvbjtcbn07XG5cbn0se31dLDMzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIHRyeUNvbnZlcnRUb1Byb21pc2Uob2JqLCBjb250ZXh0KSB7XG4gICAgaWYgKGlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiBvYmo7XG4gICAgICAgIHZhciB0aGVuID0gZ2V0VGhlbihvYmopO1xuICAgICAgICBpZiAodGhlbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KHRoZW4uZSk7XG4gICAgICAgICAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBpZiAoaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgb2JqLl90aGVuKFxuICAgICAgICAgICAgICAgICAgICByZXQuX2Z1bGZpbGwsXG4gICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHJldCxcbiAgICAgICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb1RoZW5hYmxlKG9iaiwgdGhlbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gZG9HZXRUaGVuKG9iaikge1xuICAgIHJldHVybiBvYmoudGhlbjtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9HZXRUaGVuKG9iaik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgIH1cbn1cblxudmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbmZ1bmN0aW9uIGlzQW55Qmx1ZWJpcmRQcm9taXNlKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBoYXNQcm9wLmNhbGwob2JqLCBcIl9wcm9taXNlMFwiKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRvVGhlbmFibGUoeCwgdGhlbiwgY29udGV4dCkge1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHZhciByZXQgPSBwcm9taXNlO1xuICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3BvcENvbnRleHQoKTtcbiAgICB2YXIgc3luY2hyb25vdXMgPSB0cnVlO1xuICAgIHZhciByZXN1bHQgPSB1dGlsLnRyeUNhdGNoKHRoZW4pLmNhbGwoeCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xuXG4gICAgaWYgKHByb21pc2UgJiYgcmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXN1bHQuZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgc3luY2hyb25vdXMsIHRydWUpO1xuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxucmV0dXJuIHRyeUNvbnZlcnRUb1Byb21pc2U7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zykge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIFRpbWVvdXRFcnJvciA9IFByb21pc2UuVGltZW91dEVycm9yO1xuXG5mdW5jdGlvbiBIYW5kbGVXcmFwcGVyKGhhbmRsZSkgIHtcbiAgICB0aGlzLmhhbmRsZSA9IGhhbmRsZTtcbn1cblxuSGFuZGxlV3JhcHBlci5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG59O1xuXG52YXIgYWZ0ZXJWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBkZWxheSgrdGhpcykudGhlblJldHVybih2YWx1ZSk7IH07XG52YXIgZGVsYXkgPSBQcm9taXNlLmRlbGF5ID0gZnVuY3Rpb24gKG1zLCB2YWx1ZSkge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIGhhbmRsZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQgPSBQcm9taXNlLnJlc29sdmUodmFsdWUpXG4gICAgICAgICAgICAgICAgLl90aGVuKGFmdGVyVmFsdWUsIG51bGwsIG51bGwsIG1zLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgaGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgcmV0Ll9mdWxmaWxsKCk7IH0sICttcyk7XG4gICAgICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChuZXcgSGFuZGxlV3JhcHBlcihoYW5kbGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgfVxuICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKG1zKSB7XG4gICAgcmV0dXJuIGRlbGF5KG1zLCB0aGlzKTtcbn07XG5cbnZhciBhZnRlclRpbWVvdXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgbWVzc2FnZSwgcGFyZW50KSB7XG4gICAgdmFyIGVycjtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgZXJyID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBUaW1lb3V0RXJyb3IoXCJvcGVyYXRpb24gdGltZWQgb3V0XCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyID0gbmV3IFRpbWVvdXRFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZXJyKTtcbiAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgcHJvbWlzZS5fcmVqZWN0KGVycik7XG5cbiAgICBpZiAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50LmNhbmNlbCgpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NDbGVhcih2YWx1ZSkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBmYWlsdXJlQ2xlYXIocmVhc29uKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbiAgICB0aHJvdyByZWFzb247XG59XG5cblByb21pc2UucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAobXMsIG1lc3NhZ2UpIHtcbiAgICBtcyA9ICttcztcbiAgICB2YXIgcmV0LCBwYXJlbnQ7XG5cbiAgICB2YXIgaGFuZGxlV3JhcHBlciA9IG5ldyBIYW5kbGVXcmFwcGVyKHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dFRpbWVvdXQoKSB7XG4gICAgICAgIGlmIChyZXQuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgIGFmdGVyVGltZW91dChyZXQsIG1lc3NhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9LCBtcykpO1xuXG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHBhcmVudCA9IHRoaXMudGhlbigpO1xuICAgICAgICByZXQgPSBwYXJlbnQuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhhbmRsZVdyYXBwZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IHRoaXMuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgY3JlYXRlQ29udGV4dCwgSU5URVJOQUwsIGRlYnVnKSB7XG4gICAgdmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuICAgIHZhciBUeXBlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xuICAgIHZhciBpbmhlcml0cyA9IF9kZXJlcV8oXCIuL3V0aWxcIikuaW5oZXJpdHM7XG4gICAgdmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbiAgICB2YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuICAgIHZhciBOVUxMID0ge307XG5cbiAgICBmdW5jdGlvbiB0aHJvd2VyKGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGU7fSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHRoZW5hYmxlKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoZW5hYmxlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSAhPT0gdGhlbmFibGUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5faXNEaXNwb3NhYmxlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5fZ2V0RGlzcG9zZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3NldERpc3Bvc2FibGUodGhlbmFibGUuX2dldERpc3Bvc2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKCkge1xuICAgICAgICAgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4gcmV0Ll9mdWxmaWxsKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHJlc291cmNlc1tpKytdKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlICYmXG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9pc0Rpc3Bvc2FibGUoKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2dldERpc3Bvc2VyKCkudHJ5RGlzcG9zZShpbnNwZWN0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aHJvd2VyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKGl0ZXJhdG9yLCB0aHJvd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEaXNwb3NlcihkYXRhLCBwcm9taXNlLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5yZXNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvbWlzZSgpLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb21pc2UoKS52YWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOVUxMO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUudHJ5RGlzcG9zZSA9IGZ1bmN0aW9uKGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5yZXNvdXJjZSgpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSByZXNvdXJjZSAhPT0gTlVMTFxuICAgICAgICAgICAgPyB0aGlzLmRvRGlzcG9zZShyZXNvdXJjZSwgaW5zcGVjdGlvbikgOiBudWxsO1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3Vuc2V0RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aGlzLl9kYXRhID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIuaXNEaXNwb3NlciA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiAoZCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGQucmVzb3VyY2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnRyeURpc3Bvc2UgPT09IFwiZnVuY3Rpb25cIik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHByb21pc2UsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQoZm4sIHByb21pc2UsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpbmhlcml0cyhGdW5jdGlvbkRpc3Bvc2VyLCBEaXNwb3Nlcik7XG5cbiAgICBGdW5jdGlvbkRpc3Bvc2VyLnByb3RvdHlwZS5kb0Rpc3Bvc2UgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIGZuID0gdGhpcy5kYXRhKCk7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHJlc291cmNlLCByZXNvdXJjZSwgaW5zcGVjdGlvbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1heWJlVW53cmFwRGlzcG9zZXIodmFsdWUpIHtcbiAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlc1t0aGlzLmluZGV4XS5fc2V0RGlzcG9zYWJsZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXNvdXJjZUxpc3QobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzW2xlbmd0aC0xXSA9IG51bGw7XG4gICAgfVxuXG4gICAgUmVzb3VyY2VMaXN0LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBQcm9taXNlLnVzaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHJldHVybiBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcInlvdSBtdXN0IHBhc3MgYXQgbGVhc3QgMiBhcmd1bWVudHMgdG8gUHJvbWlzZS51c2luZ1wiKTtcbiAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzW2xlbiAtIDFdO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnB1dDtcbiAgICAgICAgdmFyIHNwcmVhZEFyZ3MgPSB0cnVlO1xuICAgICAgICBpZiAobGVuID09PSAyICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgaW5wdXQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICBsZW4gPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBzcHJlYWRBcmdzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dCA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2VMaXN0KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IGlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3Bvc2VyID0gcmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZS5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3NldERpc3Bvc2FibGUoZGlzcG9zZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKG1heWJlVW53cmFwRGlzcG9zZXIsIG51bGwsIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM6IHJlc291cmNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc291cmNlc1tpXSA9IHJlc291cmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlZmxlY3RlZFJlc291cmNlcyA9IG5ldyBBcnJheShyZXNvdXJjZXMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWZsZWN0ZWRSZXNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlZmxlY3RlZFJlc291cmNlc1tpXSA9IFByb21pc2UucmVzb2x2ZShyZXNvdXJjZXNbaV0pLnJlZmxlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHRQcm9taXNlID0gUHJvbWlzZS5hbGwocmVmbGVjdGVkUmVzb3VyY2VzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5zcGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3BlY3Rpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnNwZWN0aW9uID0gaW5zcGVjdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IGluc3BlY3Rpb24uZXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaW5zcGVjdGlvbi5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25zW2ldID0gaW5zcGVjdGlvbi52YWx1ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgZm4gPSB0cnlDYXRjaChmbik7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHNwcmVhZEFyZ3NcbiAgICAgICAgICAgICAgICAgICAgPyBmbi5hcHBseSh1bmRlZmluZWQsIGluc3BlY3Rpb25zKSA6IGZuKGluc3BlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgICAgICAgICByZXQsIHByb21pc2VDcmVhdGVkLCBcIlByb21pc2UudXNpbmdcIiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gcmVzdWx0UHJvbWlzZS5sYXN0bHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IG5ldyBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uKHJlc3VsdFByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc291cmNlcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgcHJvbWlzZS5fc2V0T25DYW5jZWwocmVzb3VyY2VzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2VyKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzEwNzI7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMzEwNzIpID4gMDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX2dldERpc3Bvc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl91bnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEzMTA3Mik7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5kaXNwb3NlciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25EaXNwb3NlcihmbiwgdGhpcywgY3JlYXRlQ29udGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfTtcblxufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwidW5kZWZpbmVkXCI7XG5cbnZhciBlcnJvck9iaiA9IHtlOiB7fX07XG52YXIgdHJ5Q2F0Y2hUYXJnZXQ7XG52YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDpcbiAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcbiAgICB0aGlzICE9PSB1bmRlZmluZWQgPyB0aGlzIDogbnVsbDtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJ5Q2F0Y2hUYXJnZXQ7XG4gICAgICAgIHRyeUNhdGNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5mdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIHRyeUNhdGNoVGFyZ2V0ID0gZm47XG4gICAgcmV0dXJuIHRyeUNhdGNoZXI7XG59XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uKENoaWxkLCBQYXJlbnQpIHtcbiAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gICAgZnVuY3Rpb24gVCgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IENoaWxkO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yJCA9IFBhcmVudDtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIFBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwoUGFyZW50LnByb3RvdHlwZSwgcHJvcGVydHlOYW1lKSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZS5jaGFyQXQocHJvcGVydHlOYW1lLmxlbmd0aC0xKSAhPT0gXCIkXCJcbiAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpc1twcm9wZXJ0eU5hbWUgKyBcIiRcIl0gPSBQYXJlbnQucHJvdG90eXBlW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVC5wcm90b3R5cGUgPSBQYXJlbnQucHJvdG90eXBlO1xuICAgIENoaWxkLnByb3RvdHlwZSA9IG5ldyBUKCk7XG4gICAgcmV0dXJuIENoaWxkLnByb3RvdHlwZTtcbn07XG5cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIjtcblxufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIG1heWJlV3JhcEFzRXJyb3IobWF5YmVFcnJvcikge1xuICAgIGlmICghaXNQcmltaXRpdmUobWF5YmVFcnJvcikpIHJldHVybiBtYXliZUVycm9yO1xuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcobWF5YmVFcnJvcikpO1xufVxuXG5mdW5jdGlvbiB3aXRoQXBwZW5kZWQodGFyZ2V0LCBhcHBlbmRlZSkge1xuICAgIHZhciBsZW4gPSB0YXJnZXQubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHRhcmdldFtpXTtcbiAgICB9XG4gICAgcmV0W2ldID0gYXBwZW5kZWU7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cbiAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2MuZ2V0ID09IG51bGwgJiYgZGVzYy5zZXQgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IGRlc2MudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkgPyBvYmpba2V5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEVudW1lcmFibGVQcm9wKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNQcmltaXRpdmUob2JqKSkgcmV0dXJuIG9iajtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH07XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gdGhyb3dlcihyKSB7XG4gICAgdGhyb3cgcjtcbn1cblxudmFyIGluaGVyaXRlZERhdGFLZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBleGNsdWRlZFByb3RvdHlwZXMgPSBbXG4gICAgICAgIEFycmF5LnByb3RvdHlwZSxcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlXG4gICAgXTtcblxuICAgIHZhciBpc0V4Y2x1ZGVkUHJvdG8gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGNsdWRlZFByb3RvdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlZFByb3RvdHlwZXNbaV0gPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICB2YXIgZ2V0S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaXRlZEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgd2hpbGUgKG9iaiAhPSBudWxsICYmICFpc0V4Y2x1ZGVkUHJvdG8ob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMgPSBnZXRLZXlzKG9iaik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkS2V5c1trZXldKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEtleXNba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICE9IG51bGwgJiYgZGVzYy5nZXQgPT0gbnVsbCAmJiBkZXNjLnNldCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iaiA9IGVzNS5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICBpZiAoaXNFeGNsdWRlZFByb3RvKG9iaikpIHJldHVybiBbXTtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgICAgICAgLypqc2hpbnQgZm9yaW46ZmFsc2UgKi9cbiAgICAgICAgICAgIGVudW1lcmF0aW9uOiBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4Y2x1ZGVkUHJvdG90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChleGNsdWRlZFByb3RvdHlwZXNbaV0sIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbnVtZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuXG52YXIgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuID0gL3RoaXNcXHMqXFwuXFxzKlxcUytcXHMqPS87XG5mdW5jdGlvbiBpc0NsYXNzKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGVzNS5uYW1lcyhmbi5wcm90b3R5cGUpO1xuXG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kcyA9IGVzNS5pc0VTNSAmJiBrZXlzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yID0ga2V5cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgIShrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSBcImNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgdmFyIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcyA9XG4gICAgICAgICAgICAgICAgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuLnRlc3QoZm4gKyBcIlwiKSAmJiBlczUubmFtZXMoZm4pLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGlmIChoYXNNZXRob2RzIHx8IGhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciB8fFxuICAgICAgICAgICAgICAgIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvRmFzdFByb3BlcnRpZXMob2JqKSB7XG4gICAgLypqc2hpbnQgLVcwMjcsLVcwNTUsLVcwMzEqL1xuICAgIGZ1bmN0aW9uIEZha2VDb25zdHJ1Y3RvcigpIHt9XG4gICAgRmFrZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG9iajtcbiAgICB2YXIgbCA9IDg7XG4gICAgd2hpbGUgKGwtLSkgbmV3IEZha2VDb25zdHJ1Y3RvcigpO1xuICAgIHJldHVybiBvYmo7XG4gICAgZXZhbChvYmopO1xufVxuXG52YXIgcmlkZW50ID0gL15bYS16JF9dW2EteiRfMC05XSokL2k7XG5mdW5jdGlvbiBpc0lkZW50aWZpZXIoc3RyKSB7XG4gICAgcmV0dXJuIHJpZGVudC50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIGZpbGxlZFJhbmdlKGNvdW50LCBwcmVmaXgsIHN1ZmZpeCkge1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHByZWZpeCArIGkgKyBzdWZmaXg7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyhvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gb2JqICsgXCJcIjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBcIltubyBzdHJpbmcgcmVwcmVzZW50YXRpb25dXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Vycm9yKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iai5uYW1lID09PSBcInN0cmluZ1wiO1xufVxuXG5mdW5jdGlvbiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZSkge1xuICAgIHRyeSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKGUsIFwiaXNPcGVyYXRpb25hbFwiLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2goaWdub3JlKSB7fVxufVxuXG5mdW5jdGlvbiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbihlKSB7XG4gICAgaWYgKGUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoKGUgaW5zdGFuY2VvZiBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl0uT3BlcmF0aW9uYWxFcnJvcikgfHxcbiAgICAgICAgZVtcImlzT3BlcmF0aW9uYWxcIl0gPT09IHRydWUpO1xufVxuXG5mdW5jdGlvbiBjYW5BdHRhY2hUcmFjZShvYmopIHtcbiAgICByZXR1cm4gaXNFcnJvcihvYmopICYmIGVzNS5wcm9wZXJ0eUlzV3JpdGFibGUob2JqLCBcInN0YWNrXCIpO1xufVxuXG52YXIgZW5zdXJlRXJyb3JPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIG5ldyBFcnJvcigpKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7dGhyb3cgbmV3IEVycm9yKHNhZmVUb1N0cmluZyh2YWx1ZSkpO31cbiAgICAgICAgICAgIGNhdGNoKGVycikge3JldHVybiBlcnI7fVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaFRyYWNlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBjbGFzc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopO1xufVxuXG5mdW5jdGlvbiBjb3B5RGVzY3JpcHRvcnMoZnJvbSwgdG8sIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gZXM1Lm5hbWVzKGZyb20pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKGZpbHRlcihrZXkpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVzNS5kZWZpbmVQcm9wZXJ0eSh0bywga2V5LCBlczUuZ2V0RGVzY3JpcHRvcihmcm9tLCBrZXkpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIGFzQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKGVzNS5pc0FycmF5KHYpKSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvcikge1xuICAgIHZhciBBcnJheUZyb20gPSB0eXBlb2YgQXJyYXkuZnJvbSA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2KTtcbiAgICB9IDogZnVuY3Rpb24odikge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIHZhciBpdCA9IHZbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICB2YXIgaXRSZXN1bHQ7XG4gICAgICAgIHdoaWxlICghKChpdFJlc3VsdCA9IGl0Lm5leHQoKSkuZG9uZSkpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGl0UmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICBhc0FycmF5ID0gZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoZXM1LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9IGVsc2UgaWYgKHYgIT0gbnVsbCAmJiB0eXBlb2YgdltTeW1ib2wuaXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheUZyb20odik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cblxudmFyIGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIGNsYXNzU3RyaW5nKHByb2Nlc3MpLnRvTG93ZXJDYXNlKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiO1xuXG52YXIgaGFzRW52VmFyaWFibGVzID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy5lbnYgIT09IFwidW5kZWZpbmVkXCI7XG5cbmZ1bmN0aW9uIGVudihrZXkpIHtcbiAgICByZXR1cm4gaGFzRW52VmFyaWFibGVzID8gcHJvY2Vzcy5lbnZba2V5XSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZ2V0TmF0aXZlUHJvbWlzZSgpIHtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbigpe30pO1xuICAgICAgICAgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwocHJvbWlzZSkgPT09IFwiW29iamVjdCBQcm9taXNlXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkb21haW5CaW5kKHNlbGYsIGNiKSB7XG4gICAgcmV0dXJuIHNlbGYuYmluZChjYik7XG59XG5cbnZhciByZXQgPSB7XG4gICAgaXNDbGFzczogaXNDbGFzcyxcbiAgICBpc0lkZW50aWZpZXI6IGlzSWRlbnRpZmllcixcbiAgICBpbmhlcml0ZWREYXRhS2V5czogaW5oZXJpdGVkRGF0YUtleXMsXG4gICAgZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0OiBnZXREYXRhUHJvcGVydHlPckRlZmF1bHQsXG4gICAgdGhyb3dlcjogdGhyb3dlcixcbiAgICBpc0FycmF5OiBlczUuaXNBcnJheSxcbiAgICBhc0FycmF5OiBhc0FycmF5LFxuICAgIG5vdEVudW1lcmFibGVQcm9wOiBub3RFbnVtZXJhYmxlUHJvcCxcbiAgICBpc1ByaW1pdGl2ZTogaXNQcmltaXRpdmUsXG4gICAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICAgIGlzRXJyb3I6IGlzRXJyb3IsXG4gICAgY2FuRXZhbHVhdGU6IGNhbkV2YWx1YXRlLFxuICAgIGVycm9yT2JqOiBlcnJvck9iaixcbiAgICB0cnlDYXRjaDogdHJ5Q2F0Y2gsXG4gICAgaW5oZXJpdHM6IGluaGVyaXRzLFxuICAgIHdpdGhBcHBlbmRlZDogd2l0aEFwcGVuZGVkLFxuICAgIG1heWJlV3JhcEFzRXJyb3I6IG1heWJlV3JhcEFzRXJyb3IsXG4gICAgdG9GYXN0UHJvcGVydGllczogdG9GYXN0UHJvcGVydGllcyxcbiAgICBmaWxsZWRSYW5nZTogZmlsbGVkUmFuZ2UsXG4gICAgdG9TdHJpbmc6IHNhZmVUb1N0cmluZyxcbiAgICBjYW5BdHRhY2hUcmFjZTogY2FuQXR0YWNoVHJhY2UsXG4gICAgZW5zdXJlRXJyb3JPYmplY3Q6IGVuc3VyZUVycm9yT2JqZWN0LFxuICAgIG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uOiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbixcbiAgICBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb246IG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbixcbiAgICBjbGFzc1N0cmluZzogY2xhc3NTdHJpbmcsXG4gICAgY29weURlc2NyaXB0b3JzOiBjb3B5RGVzY3JpcHRvcnMsXG4gICAgaGFzRGV2VG9vbHM6IHR5cGVvZiBjaHJvbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY2hyb21lICYmXG4gICAgICAgICAgICAgICAgIHR5cGVvZiBjaHJvbWUubG9hZFRpbWVzID09PSBcImZ1bmN0aW9uXCIsXG4gICAgaXNOb2RlOiBpc05vZGUsXG4gICAgaGFzRW52VmFyaWFibGVzOiBoYXNFbnZWYXJpYWJsZXMsXG4gICAgZW52OiBlbnYsXG4gICAgZ2xvYmFsOiBnbG9iYWxPYmplY3QsXG4gICAgZ2V0TmF0aXZlUHJvbWlzZTogZ2V0TmF0aXZlUHJvbWlzZSxcbiAgICBkb21haW5CaW5kOiBkb21haW5CaW5kXG59O1xucmV0LmlzUmVjZW50Tm9kZSA9IHJldC5pc05vZGUgJiYgKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ZXJzaW9uID0gcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKTtcbiAgICByZXR1cm4gKHZlcnNpb25bMF0gPT09IDAgJiYgdmVyc2lvblsxXSA+IDEwKSB8fCAodmVyc2lvblswXSA+IDApO1xufSkoKTtcblxuaWYgKHJldC5pc05vZGUpIHJldC50b0Zhc3RQcm9wZXJ0aWVzKHByb2Nlc3MpO1xuXG50cnkge3Rocm93IG5ldyBFcnJvcigpOyB9IGNhdGNoIChlKSB7cmV0Lmxhc3RMaW5lRXJyb3IgPSBlO31cbm1vZHVsZS5leHBvcnRzID0gcmV0O1xuXG59LHtcIi4vZXM1XCI6MTN9XX0se30sWzRdKSg0KVxufSk7ICAgICAgICAgICAgICAgICAgICA7aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdyAhPT0gbnVsbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUCA9IHdpbmRvdy5Qcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiAhPT0gbnVsbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5QID0gc2VsZi5Qcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0iLCIvKiEgSGFtbWVyLkpTIC0gdjIuMC43IC0gMjAxNi0wNC0yMlxuICogaHR0cDovL2hhbW1lcmpzLmdpdGh1Yi5pby9cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgSm9yaWsgVGFuZ2VsZGVyO1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgZXhwb3J0TmFtZSwgdW5kZWZpbmVkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxudmFyIFZFTkRPUl9QUkVGSVhFUyA9IFsnJywgJ3dlYmtpdCcsICdNb3onLCAnTVMnLCAnbXMnLCAnbyddO1xudmFyIFRFU1RfRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG52YXIgVFlQRV9GVU5DVElPTiA9ICdmdW5jdGlvbic7XG5cbnZhciByb3VuZCA9IE1hdGgucm91bmQ7XG52YXIgYWJzID0gTWF0aC5hYnM7XG52YXIgbm93ID0gRGF0ZS5ub3c7XG5cbi8qKlxuICogc2V0IGEgdGltZW91dCB3aXRoIGEgZ2l2ZW4gc2NvcGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dFxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIHNldFRpbWVvdXRDb250ZXh0KGZuLCB0aW1lb3V0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoYmluZEZuKGZuLCBjb250ZXh0KSwgdGltZW91dCk7XG59XG5cbi8qKlxuICogaWYgdGhlIGFyZ3VtZW50IGlzIGFuIGFycmF5LCB3ZSB3YW50IHRvIGV4ZWN1dGUgdGhlIGZuIG9uIGVhY2ggZW50cnlcbiAqIGlmIGl0IGFpbnQgYW4gYXJyYXkgd2UgZG9uJ3Qgd2FudCB0byBkbyBhIHRoaW5nLlxuICogdGhpcyBpcyB1c2VkIGJ5IGFsbCB0aGUgbWV0aG9kcyB0aGF0IGFjY2VwdCBhIHNpbmdsZSBhbmQgYXJyYXkgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp8QXJyYXl9IGFyZ1xuICogQHBhcmFtIHtTdHJpbmd9IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHRdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaW52b2tlQXJyYXlBcmcoYXJnLCBmbiwgY29udGV4dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcbiAgICAgICAgZWFjaChhcmcsIGNvbnRleHRbZm5dLCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiB3YWxrIG9iamVjdHMgYW5kIGFycmF5c1xuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIHZhciBpO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvYmouZm9yRWFjaCkge1xuICAgICAgICBvYmouZm9yRWFjaChpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICAgICAgICBvYmouaGFzT3duUHJvcGVydHkoaSkgJiYgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogd3JhcCBhIG1ldGhvZCB3aXRoIGEgZGVwcmVjYXRpb24gd2FybmluZyBhbmQgc3RhY2sgdHJhY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIHRoZSBzdXBwbGllZCBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uIGRlcHJlY2F0ZShtZXRob2QsIG5hbWUsIG1lc3NhZ2UpIHtcbiAgICB2YXIgZGVwcmVjYXRpb25NZXNzYWdlID0gJ0RFUFJFQ0FURUQgTUVUSE9EOiAnICsgbmFtZSArICdcXG4nICsgbWVzc2FnZSArICcgQVQgXFxuJztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKCdnZXQtc3RhY2stdHJhY2UnKTtcbiAgICAgICAgdmFyIHN0YWNrID0gZSAmJiBlLnN0YWNrID8gZS5zdGFjay5yZXBsYWNlKC9eW15cXChdKz9bXFxuJF0vZ20sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL15cXHMrYXRcXHMrL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eT2JqZWN0Ljxhbm9ueW1vdXM+XFxzKlxcKC9nbSwgJ3thbm9ueW1vdXN9KClAJykgOiAnVW5rbm93biBTdGFjayBUcmFjZSc7XG5cbiAgICAgICAgdmFyIGxvZyA9IHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS53YXJuIHx8IHdpbmRvdy5jb25zb2xlLmxvZyk7XG4gICAgICAgIGlmIChsb2cpIHtcbiAgICAgICAgICAgIGxvZy5jYWxsKHdpbmRvdy5jb25zb2xlLCBkZXByZWNhdGlvbk1lc3NhZ2UsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBleHRlbmQgb2JqZWN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIGluIGRlc3Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgb25lcyBpbiBzcmMuXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gb2JqZWN0c190b19hc3NpZ25cbiAqIEByZXR1cm5zIHtPYmplY3R9IHRhcmdldFxuICovXG52YXIgYXNzaWduO1xuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59IGVsc2Uge1xuICAgIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW21lcmdlPWZhbHNlXVxuICogQHJldHVybnMge09iamVjdH0gZGVzdFxuICovXG52YXIgZXh0ZW5kID0gZGVwcmVjYXRlKGZ1bmN0aW9uIGV4dGVuZChkZXN0LCBzcmMsIG1lcmdlKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzcmMpO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGtleXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghbWVyZ2UgfHwgKG1lcmdlICYmIGRlc3Rba2V5c1tpXV0gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIGRlc3Rba2V5c1tpXV0gPSBzcmNba2V5c1tpXV07XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn0sICdleHRlbmQnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIG1lcmdlIHRoZSB2YWx1ZXMgZnJvbSBzcmMgaW4gdGhlIGRlc3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgdGhhdCBleGlzdCBpbiBkZXN0IHdpbGwgbm90IGJlIG92ZXJ3cml0dGVuIGJ5IHNyY1xuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIG1lcmdlID0gZGVwcmVjYXRlKGZ1bmN0aW9uIG1lcmdlKGRlc3QsIHNyYykge1xuICAgIHJldHVybiBleHRlbmQoZGVzdCwgc3JjLCB0cnVlKTtcbn0sICdtZXJnZScsICdVc2UgYGFzc2lnbmAuJyk7XG5cbi8qKlxuICogc2ltcGxlIGNsYXNzIGluaGVyaXRhbmNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaGlsZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gYmFzZVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuICovXG5mdW5jdGlvbiBpbmhlcml0KGNoaWxkLCBiYXNlLCBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGJhc2VQID0gYmFzZS5wcm90b3R5cGUsXG4gICAgICAgIGNoaWxkUDtcblxuICAgIGNoaWxkUCA9IGNoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZVApO1xuICAgIGNoaWxkUC5jb25zdHJ1Y3RvciA9IGNoaWxkO1xuICAgIGNoaWxkUC5fc3VwZXIgPSBiYXNlUDtcblxuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGFzc2lnbihjaGlsZFAsIHByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBzaW1wbGUgZnVuY3Rpb24gYmluZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGJpbmRGbihmbiwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBib3VuZEZuKCkge1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIGxldCBhIGJvb2xlYW4gdmFsdWUgYWxzbyBiZSBhIGZ1bmN0aW9uIHRoYXQgbXVzdCByZXR1cm4gYSBib29sZWFuXG4gKiB0aGlzIGZpcnN0IGl0ZW0gaW4gYXJncyB3aWxsIGJlIHVzZWQgYXMgdGhlIGNvbnRleHRcbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gdmFsXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJnc11cbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBib29sT3JGbih2YWwsIGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PSBUWVBFX0ZVTkNUSU9OKSB7XG4gICAgICAgIHJldHVybiB2YWwuYXBwbHkoYXJncyA/IGFyZ3NbMF0gfHwgdW5kZWZpbmVkIDogdW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiB1c2UgdGhlIHZhbDIgd2hlbiB2YWwxIGlzIHVuZGVmaW5lZFxuICogQHBhcmFtIHsqfSB2YWwxXG4gKiBAcGFyYW0geyp9IHZhbDJcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBpZlVuZGVmaW5lZCh2YWwxLCB2YWwyKSB7XG4gICAgcmV0dXJuICh2YWwxID09PSB1bmRlZmluZWQpID8gdmFsMiA6IHZhbDE7XG59XG5cbi8qKlxuICogYWRkRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICovXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG4gICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIHJlbW92ZUV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgbm9kZSBpcyBpbiB0aGUgZ2l2ZW4gcGFyZW50XG4gKiBAbWV0aG9kIGhhc1BhcmVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50XG4gKiBAcmV0dXJuIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBoYXNQYXJlbnQobm9kZSwgcGFyZW50KSB7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogc21hbGwgaW5kZXhPZiB3cmFwcGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmluZFxuICogQHJldHVybnMge0Jvb2xlYW59IGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGluU3RyKHN0ciwgZmluZCkge1xuICAgIHJldHVybiBzdHIuaW5kZXhPZihmaW5kKSA+IC0xO1xufVxuXG4vKipcbiAqIHNwbGl0IHN0cmluZyBvbiB3aGl0ZXNwYWNlXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7QXJyYXl9IHdvcmRzXG4gKi9cbmZ1bmN0aW9uIHNwbGl0U3RyKHN0cikge1xuICAgIHJldHVybiBzdHIudHJpbSgpLnNwbGl0KC9cXHMrL2cpO1xufVxuXG4vKipcbiAqIGZpbmQgaWYgYSBhcnJheSBjb250YWlucyB0aGUgb2JqZWN0IHVzaW5nIGluZGV4T2Ygb3IgYSBzaW1wbGUgcG9seUZpbGxcbiAqIEBwYXJhbSB7QXJyYXl9IHNyY1xuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbZmluZEJ5S2V5XVxuICogQHJldHVybiB7Qm9vbGVhbnxOdW1iZXJ9IGZhbHNlIHdoZW4gbm90IGZvdW5kLCBvciB0aGUgaW5kZXhcbiAqL1xuZnVuY3Rpb24gaW5BcnJheShzcmMsIGZpbmQsIGZpbmRCeUtleSkge1xuICAgIGlmIChzcmMuaW5kZXhPZiAmJiAhZmluZEJ5S2V5KSB7XG4gICAgICAgIHJldHVybiBzcmMuaW5kZXhPZihmaW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKChmaW5kQnlLZXkgJiYgc3JjW2ldW2ZpbmRCeUtleV0gPT0gZmluZCkgfHwgKCFmaW5kQnlLZXkgJiYgc3JjW2ldID09PSBmaW5kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG59XG5cbi8qKlxuICogY29udmVydCBhcnJheS1saWtlIG9iamVjdHMgdG8gcmVhbCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwob2JqLCAwKTtcbn1cblxuLyoqXG4gKiB1bmlxdWUgYXJyYXkgd2l0aCBvYmplY3RzIGJhc2VkIG9uIGEga2V5IChsaWtlICdpZCcpIG9yIGp1c3QgYnkgdGhlIGFycmF5J3MgdmFsdWVcbiAqIEBwYXJhbSB7QXJyYXl9IHNyYyBbe2lkOjF9LHtpZDoyfSx7aWQ6MX1dXG4gKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NvcnQ9RmFsc2VdXG4gKiBAcmV0dXJucyB7QXJyYXl9IFt7aWQ6MX0se2lkOjJ9XVxuICovXG5mdW5jdGlvbiB1bmlxdWVBcnJheShzcmMsIGtleSwgc29ydCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhciBpID0gMDtcblxuICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsID0ga2V5ID8gc3JjW2ldW2tleV0gOiBzcmNbaV07XG4gICAgICAgIGlmIChpbkFycmF5KHZhbHVlcywgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChzcmNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpXSA9IHZhbDtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIGlmIChzb3J0KSB7XG4gICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KGZ1bmN0aW9uIHNvcnRVbmlxdWVBcnJheShhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFba2V5XSA+IGJba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbi8qKlxuICogZ2V0IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcmV0dXJucyB7U3RyaW5nfFVuZGVmaW5lZH0gcHJlZml4ZWRcbiAqL1xuZnVuY3Rpb24gcHJlZml4ZWQob2JqLCBwcm9wZXJ0eSkge1xuICAgIHZhciBwcmVmaXgsIHByb3A7XG4gICAgdmFyIGNhbWVsUHJvcCA9IHByb3BlcnR5WzBdLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zbGljZSgxKTtcblxuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IFZFTkRPUl9QUkVGSVhFUy5sZW5ndGgpIHtcbiAgICAgICAgcHJlZml4ID0gVkVORE9SX1BSRUZJWEVTW2ldO1xuICAgICAgICBwcm9wID0gKHByZWZpeCkgPyBwcmVmaXggKyBjYW1lbFByb3AgOiBwcm9wZXJ0eTtcblxuICAgICAgICBpZiAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBnZXQgYSB1bmlxdWUgaWRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHVuaXF1ZUlkXG4gKi9cbnZhciBfdW5pcXVlSWQgPSAxO1xuZnVuY3Rpb24gdW5pcXVlSWQoKSB7XG4gICAgcmV0dXJuIF91bmlxdWVJZCsrO1xufVxuXG4vKipcbiAqIGdldCB0aGUgd2luZG93IG9iamVjdCBvZiBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJucyB7RG9jdW1lbnRWaWV3fFdpbmRvd31cbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93Rm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgdmFyIGRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudCB8fCBlbGVtZW50O1xuICAgIHJldHVybiAoZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3cgfHwgd2luZG93KTtcbn1cblxudmFyIE1PQklMRV9SRUdFWCA9IC9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaTtcblxudmFyIFNVUFBPUlRfVE9VQ0ggPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KTtcbnZhciBTVVBQT1JUX1BPSU5URVJfRVZFTlRTID0gcHJlZml4ZWQod2luZG93LCAnUG9pbnRlckV2ZW50JykgIT09IHVuZGVmaW5lZDtcbnZhciBTVVBQT1JUX09OTFlfVE9VQ0ggPSBTVVBQT1JUX1RPVUNIICYmIE1PQklMRV9SRUdFWC50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG52YXIgSU5QVVRfVFlQRV9UT1VDSCA9ICd0b3VjaCc7XG52YXIgSU5QVVRfVFlQRV9QRU4gPSAncGVuJztcbnZhciBJTlBVVF9UWVBFX01PVVNFID0gJ21vdXNlJztcbnZhciBJTlBVVF9UWVBFX0tJTkVDVCA9ICdraW5lY3QnO1xuXG52YXIgQ09NUFVURV9JTlRFUlZBTCA9IDI1O1xuXG52YXIgSU5QVVRfU1RBUlQgPSAxO1xudmFyIElOUFVUX01PVkUgPSAyO1xudmFyIElOUFVUX0VORCA9IDQ7XG52YXIgSU5QVVRfQ0FOQ0VMID0gODtcblxudmFyIERJUkVDVElPTl9OT05FID0gMTtcbnZhciBESVJFQ1RJT05fTEVGVCA9IDI7XG52YXIgRElSRUNUSU9OX1JJR0hUID0gNDtcbnZhciBESVJFQ1RJT05fVVAgPSA4O1xudmFyIERJUkVDVElPTl9ET1dOID0gMTY7XG5cbnZhciBESVJFQ1RJT05fSE9SSVpPTlRBTCA9IERJUkVDVElPTl9MRUZUIHwgRElSRUNUSU9OX1JJR0hUO1xudmFyIERJUkVDVElPTl9WRVJUSUNBTCA9IERJUkVDVElPTl9VUCB8IERJUkVDVElPTl9ET1dOO1xudmFyIERJUkVDVElPTl9BTEwgPSBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTDtcblxudmFyIFBST1BTX1hZID0gWyd4JywgJ3knXTtcbnZhciBQUk9QU19DTElFTlRfWFkgPSBbJ2NsaWVudFgnLCAnY2xpZW50WSddO1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSW5wdXQobWFuYWdlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5lbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIHRoaXMudGFyZ2V0ID0gbWFuYWdlci5vcHRpb25zLmlucHV0VGFyZ2V0O1xuXG4gICAgLy8gc21hbGxlciB3cmFwcGVyIGFyb3VuZCB0aGUgaGFuZGxlciwgZm9yIHRoZSBzY29wZSBhbmQgdGhlIGVuYWJsZWQgc3RhdGUgb2YgdGhlIG1hbmFnZXIsXG4gICAgLy8gc28gd2hlbiBkaXNhYmxlZCB0aGUgaW5wdXQgZXZlbnRzIGFyZSBjb21wbGV0ZWx5IGJ5cGFzc2VkLlxuICAgIHRoaXMuZG9tSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChib29sT3JGbihtYW5hZ2VyLm9wdGlvbnMuZW5hYmxlLCBbbWFuYWdlcl0pKSB7XG4gICAgICAgICAgICBzZWxmLmhhbmRsZXIoZXYpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdCgpO1xuXG59XG5cbklucHV0LnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzaG91bGQgaGFuZGxlIHRoZSBpbnB1dEV2ZW50IGRhdGEgYW5kIHRyaWdnZXIgdGhlIGNhbGxiYWNrXG4gICAgICogQHZpcnR1YWxcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIGJpbmQgdGhlIGV2ZW50c1xuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmV2RWwgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZXaW4gJiYgYWRkRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgdGhlIGV2ZW50c1xuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmV2RWwgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZXaW4gJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcbiAqIGNhbGxlZCBieSB0aGUgTWFuYWdlciBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAqIEByZXR1cm5zIHtJbnB1dH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRJbnN0YW5jZShtYW5hZ2VyKSB7XG4gICAgdmFyIFR5cGU7XG4gICAgdmFyIGlucHV0Q2xhc3MgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRDbGFzcztcblxuICAgIGlmIChpbnB1dENsYXNzKSB7XG4gICAgICAgIFR5cGUgPSBpbnB1dENsYXNzO1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9QT0lOVEVSX0VWRU5UUykge1xuICAgICAgICBUeXBlID0gUG9pbnRlckV2ZW50SW5wdXQ7XG4gICAgfSBlbHNlIGlmIChTVVBQT1JUX09OTFlfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoSW5wdXQ7XG4gICAgfSBlbHNlIGlmICghU1VQUE9SVF9UT1VDSCkge1xuICAgICAgICBUeXBlID0gTW91c2VJbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBUeXBlID0gVG91Y2hNb3VzZUlucHV0O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IChUeXBlKShtYW5hZ2VyLCBpbnB1dEhhbmRsZXIpO1xufVxuXG4vKipcbiAqIGhhbmRsZSBpbnB1dCBldmVudHNcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGlucHV0SGFuZGxlcihtYW5hZ2VyLCBldmVudFR5cGUsIGlucHV0KSB7XG4gICAgdmFyIHBvaW50ZXJzTGVuID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoO1xuICAgIHZhciBjaGFuZ2VkUG9pbnRlcnNMZW4gPSBpbnB1dC5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoO1xuICAgIHZhciBpc0ZpcnN0ID0gKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuICAgIHZhciBpc0ZpbmFsID0gKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuXG4gICAgaW5wdXQuaXNGaXJzdCA9ICEhaXNGaXJzdDtcbiAgICBpbnB1dC5pc0ZpbmFsID0gISFpc0ZpbmFsO1xuXG4gICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgbWFuYWdlci5zZXNzaW9uID0ge307XG4gICAgfVxuXG4gICAgLy8gc291cmNlIGV2ZW50IGlzIHRoZSBub3JtYWxpemVkIHZhbHVlIG9mIHRoZSBkb21FdmVudHNcbiAgICAvLyBsaWtlICd0b3VjaHN0YXJ0LCBtb3VzZXVwLCBwb2ludGVyZG93bidcbiAgICBpbnB1dC5ldmVudFR5cGUgPSBldmVudFR5cGU7XG5cbiAgICAvLyBjb21wdXRlIHNjYWxlLCByb3RhdGlvbiBldGNcbiAgICBjb21wdXRlSW5wdXREYXRhKG1hbmFnZXIsIGlucHV0KTtcblxuICAgIC8vIGVtaXQgc2VjcmV0IGV2ZW50XG4gICAgbWFuYWdlci5lbWl0KCdoYW1tZXIuaW5wdXQnLCBpbnB1dCk7XG5cbiAgICBtYW5hZ2VyLnJlY29nbml6ZShpbnB1dCk7XG4gICAgbWFuYWdlci5zZXNzaW9uLnByZXZJbnB1dCA9IGlucHV0O1xufVxuXG4vKipcbiAqIGV4dGVuZCB0aGUgZGF0YSB3aXRoIHNvbWUgdXNhYmxlIHByb3BlcnRpZXMgbGlrZSBzY2FsZSwgcm90YXRlLCB2ZWxvY2l0eSBldGNcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYW5hZ2VyXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCkge1xuICAgIHZhciBzZXNzaW9uID0gbWFuYWdlci5zZXNzaW9uO1xuICAgIHZhciBwb2ludGVycyA9IGlucHV0LnBvaW50ZXJzO1xuICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblxuICAgIC8vIHN0b3JlIHRoZSBmaXJzdCBpbnB1dCB0byBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGFuZCBkaXJlY3Rpb25cbiAgICBpZiAoIXNlc3Npb24uZmlyc3RJbnB1dCkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0SW5wdXQgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG4gICAgfVxuXG4gICAgLy8gdG8gY29tcHV0ZSBzY2FsZSBhbmQgcm90YXRpb24gd2UgbmVlZCB0byBzdG9yZSB0aGUgbXVsdGlwbGUgdG91Y2hlc1xuICAgIGlmIChwb2ludGVyc0xlbmd0aCA+IDEgJiYgIXNlc3Npb24uZmlyc3RNdWx0aXBsZSkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG4gICAgfSBlbHNlIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RJbnB1dCA9IHNlc3Npb24uZmlyc3RJbnB1dDtcbiAgICB2YXIgZmlyc3RNdWx0aXBsZSA9IHNlc3Npb24uZmlyc3RNdWx0aXBsZTtcbiAgICB2YXIgb2Zmc2V0Q2VudGVyID0gZmlyc3RNdWx0aXBsZSA/IGZpcnN0TXVsdGlwbGUuY2VudGVyIDogZmlyc3RJbnB1dC5jZW50ZXI7XG5cbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyID0gZ2V0Q2VudGVyKHBvaW50ZXJzKTtcbiAgICBpbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICBpbnB1dC5kZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBmaXJzdElucHV0LnRpbWVTdGFtcDtcblxuICAgIGlucHV0LmFuZ2xlID0gZ2V0QW5nbGUob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuICAgIGlucHV0LmRpc3RhbmNlID0gZ2V0RGlzdGFuY2Uob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuXG4gICAgY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpO1xuICAgIGlucHV0Lm9mZnNldERpcmVjdGlvbiA9IGdldERpcmVjdGlvbihpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG5cbiAgICB2YXIgb3ZlcmFsbFZlbG9jaXR5ID0gZ2V0VmVsb2NpdHkoaW5wdXQuZGVsdGFUaW1lLCBpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5WCA9IG92ZXJhbGxWZWxvY2l0eS54O1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVkgPSBvdmVyYWxsVmVsb2NpdHkueTtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHkgPSAoYWJzKG92ZXJhbGxWZWxvY2l0eS54KSA+IGFicyhvdmVyYWxsVmVsb2NpdHkueSkpID8gb3ZlcmFsbFZlbG9jaXR5LnggOiBvdmVyYWxsVmVsb2NpdHkueTtcblxuICAgIGlucHV0LnNjYWxlID0gZmlyc3RNdWx0aXBsZSA/IGdldFNjYWxlKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDE7XG4gICAgaW5wdXQucm90YXRpb24gPSBmaXJzdE11bHRpcGxlID8gZ2V0Um90YXRpb24oZmlyc3RNdWx0aXBsZS5wb2ludGVycywgcG9pbnRlcnMpIDogMDtcblxuICAgIGlucHV0Lm1heFBvaW50ZXJzID0gIXNlc3Npb24ucHJldklucHV0ID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogKChpbnB1dC5wb2ludGVycy5sZW5ndGggPlxuICAgICAgICBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycykgPyBpbnB1dC5wb2ludGVycy5sZW5ndGggOiBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycyk7XG5cbiAgICBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpO1xuXG4gICAgLy8gZmluZCB0aGUgY29ycmVjdCB0YXJnZXRcbiAgICB2YXIgdGFyZ2V0ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmIChoYXNQYXJlbnQoaW5wdXQuc3JjRXZlbnQudGFyZ2V0LCB0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldCA9IGlucHV0LnNyY0V2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgaW5wdXQudGFyZ2V0ID0gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCkge1xuICAgIHZhciBjZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG4gICAgdmFyIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgfHwge307XG4gICAgdmFyIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2SW5wdXQgPSBzZXNzaW9uLnByZXZJbnB1dCB8fCB7fTtcblxuICAgIGlmIChpbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX1NUQVJUIHx8IHByZXZJbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX0VORCkge1xuICAgICAgICBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSA9IHtcbiAgICAgICAgICAgIHg6IHByZXZJbnB1dC5kZWx0YVggfHwgMCxcbiAgICAgICAgICAgIHk6IHByZXZJbnB1dC5kZWx0YVkgfHwgMFxuICAgICAgICB9O1xuXG4gICAgICAgIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBjZW50ZXIueCxcbiAgICAgICAgICAgIHk6IGNlbnRlci55XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaW5wdXQuZGVsdGFYID0gcHJldkRlbHRhLnggKyAoY2VudGVyLnggLSBvZmZzZXQueCk7XG4gICAgaW5wdXQuZGVsdGFZID0gcHJldkRlbHRhLnkgKyAoY2VudGVyLnkgLSBvZmZzZXQueSk7XG59XG5cbi8qKlxuICogdmVsb2NpdHkgaXMgY2FsY3VsYXRlZCBldmVyeSB4IG1zXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvblxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnRlcnZhbElucHV0RGF0YShzZXNzaW9uLCBpbnB1dCkge1xuICAgIHZhciBsYXN0ID0gc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgfHwgaW5wdXQsXG4gICAgICAgIGRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGxhc3QudGltZVN0YW1wLFxuICAgICAgICB2ZWxvY2l0eSwgdmVsb2NpdHlYLCB2ZWxvY2l0eVksIGRpcmVjdGlvbjtcblxuICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfQ0FOQ0VMICYmIChkZWx0YVRpbWUgPiBDT01QVVRFX0lOVEVSVkFMIHx8IGxhc3QudmVsb2NpdHkgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGlucHV0LmRlbHRhWCAtIGxhc3QuZGVsdGFYO1xuICAgICAgICB2YXIgZGVsdGFZID0gaW5wdXQuZGVsdGFZIC0gbGFzdC5kZWx0YVk7XG5cbiAgICAgICAgdmFyIHYgPSBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIGRlbHRhWCwgZGVsdGFZKTtcbiAgICAgICAgdmVsb2NpdHlYID0gdi54O1xuICAgICAgICB2ZWxvY2l0eVkgPSB2Lnk7XG4gICAgICAgIHZlbG9jaXR5ID0gKGFicyh2LngpID4gYWJzKHYueSkpID8gdi54IDogdi55O1xuICAgICAgICBkaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oZGVsdGFYLCBkZWx0YVkpO1xuXG4gICAgICAgIHNlc3Npb24ubGFzdEludGVydmFsID0gaW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXNlIGxhdGVzdCB2ZWxvY2l0eSBpbmZvIGlmIGl0IGRvZXNuJ3Qgb3ZlcnRha2UgYSBtaW5pbXVtIHBlcmlvZFxuICAgICAgICB2ZWxvY2l0eSA9IGxhc3QudmVsb2NpdHk7XG4gICAgICAgIHZlbG9jaXR5WCA9IGxhc3QudmVsb2NpdHlYO1xuICAgICAgICB2ZWxvY2l0eVkgPSBsYXN0LnZlbG9jaXR5WTtcbiAgICAgICAgZGlyZWN0aW9uID0gbGFzdC5kaXJlY3Rpb247XG4gICAgfVxuXG4gICAgaW5wdXQudmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgICBpbnB1dC52ZWxvY2l0eVggPSB2ZWxvY2l0eVg7XG4gICAgaW5wdXQudmVsb2NpdHlZID0gdmVsb2NpdHlZO1xuICAgIGlucHV0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbn1cblxuLyoqXG4gKiBjcmVhdGUgYSBzaW1wbGUgY2xvbmUgZnJvbSB0aGUgaW5wdXQgdXNlZCBmb3Igc3RvcmFnZSBvZiBmaXJzdElucHV0IGFuZCBmaXJzdE11bHRpcGxlXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqIEByZXR1cm5zIHtPYmplY3R9IGNsb25lZElucHV0RGF0YVxuICovXG5mdW5jdGlvbiBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCkge1xuICAgIC8vIG1ha2UgYSBzaW1wbGUgY29weSBvZiB0aGUgcG9pbnRlcnMgYmVjYXVzZSB3ZSB3aWxsIGdldCBhIHJlZmVyZW5jZSBpZiB3ZSBkb24ndFxuICAgIC8vIHdlIG9ubHkgbmVlZCBjbGllbnRYWSBmb3IgdGhlIGNhbGN1bGF0aW9uc1xuICAgIHZhciBwb2ludGVycyA9IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGlucHV0LnBvaW50ZXJzLmxlbmd0aCkge1xuICAgICAgICBwb2ludGVyc1tpXSA9IHtcbiAgICAgICAgICAgIGNsaWVudFg6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFgpLFxuICAgICAgICAgICAgY2xpZW50WTogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WSlcbiAgICAgICAgfTtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVTdGFtcDogbm93KCksXG4gICAgICAgIHBvaW50ZXJzOiBwb2ludGVycyxcbiAgICAgICAgY2VudGVyOiBnZXRDZW50ZXIocG9pbnRlcnMpLFxuICAgICAgICBkZWx0YVg6IGlucHV0LmRlbHRhWCxcbiAgICAgICAgZGVsdGFZOiBpbnB1dC5kZWx0YVlcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgY2VudGVyIG9mIGFsbCB0aGUgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtPYmplY3R9IGNlbnRlciBjb250YWlucyBgeGAgYW5kIGB5YCBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIGdldENlbnRlcihwb2ludGVycykge1xuICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblxuICAgIC8vIG5vIG5lZWQgdG8gbG9vcCB3aGVuIG9ubHkgb25lIHRvdWNoXG4gICAgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRYKSxcbiAgICAgICAgICAgIHk6IHJvdW5kKHBvaW50ZXJzWzBdLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIHggPSAwLCB5ID0gMCwgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBwb2ludGVyc0xlbmd0aCkge1xuICAgICAgICB4ICs9IHBvaW50ZXJzW2ldLmNsaWVudFg7XG4gICAgICAgIHkgKz0gcG9pbnRlcnNbaV0uY2xpZW50WTtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHJvdW5kKHggLyBwb2ludGVyc0xlbmd0aCksXG4gICAgICAgIHk6IHJvdW5kKHkgLyBwb2ludGVyc0xlbmd0aClcbiAgICB9O1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgdmVsb2NpdHkgYmV0d2VlbiB0d28gcG9pbnRzLiB1bml0IGlzIGluIHB4IHBlciBtcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVRpbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gKiBAcGFyYW0ge051bWJlcn0geVxuICogQHJldHVybiB7T2JqZWN0fSB2ZWxvY2l0eSBgeGAgYW5kIGB5YFxuICovXG5mdW5jdGlvbiBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIHgsIHkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiB4IC8gZGVsdGFUaW1lIHx8IDAsXG4gICAgICAgIHk6IHkgLyBkZWx0YVRpbWUgfHwgMFxuICAgIH07XG59XG5cbi8qKlxuICogZ2V0IHRoZSBkaXJlY3Rpb24gYmV0d2VlbiB0d28gcG9pbnRzXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge051bWJlcn0gZGlyZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldERpcmVjdGlvbih4LCB5KSB7XG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgcmV0dXJuIERJUkVDVElPTl9OT05FO1xuICAgIH1cblxuICAgIGlmIChhYnMoeCkgPj0gYWJzKHkpKSB7XG4gICAgICAgIHJldHVybiB4IDwgMCA/IERJUkVDVElPTl9MRUZUIDogRElSRUNUSU9OX1JJR0hUO1xuICAgIH1cbiAgICByZXR1cm4geSA8IDAgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFic29sdXRlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtPYmplY3R9IHAxIHt4LCB5fVxuICogQHBhcmFtIHtPYmplY3R9IHAyIHt4LCB5fVxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiBnZXREaXN0YW5jZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcblxuICAgIHJldHVybiBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYW5nbGUgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMVxuICogQHBhcmFtIHtPYmplY3R9IHAyXG4gKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGFuZ2xlXG4gKi9cbmZ1bmN0aW9uIGdldEFuZ2xlKHAxLCBwMiwgcHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKSB7XG4gICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG4gICAgfVxuICAgIHZhciB4ID0gcDJbcHJvcHNbMF1dIC0gcDFbcHJvcHNbMF1dLFxuICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuICAgIHJldHVybiBNYXRoLmF0YW4yKHksIHgpICogMTgwIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHJvdGF0aW9uIGRlZ3JlZXMgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBlbmQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEByZXR1cm4ge051bWJlcn0gcm90YXRpb25cbiAqL1xuZnVuY3Rpb24gZ2V0Um90YXRpb24oc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBnZXRBbmdsZShlbmRbMV0sIGVuZFswXSwgUFJPUFNfQ0xJRU5UX1hZKSArIGdldEFuZ2xlKHN0YXJ0WzFdLCBzdGFydFswXSwgUFJPUFNfQ0xJRU5UX1hZKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHNjYWxlIGZhY3RvciBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuICogbm8gc2NhbGUgaXMgMSwgYW5kIGdvZXMgZG93biB0byAwIHdoZW4gcGluY2hlZCB0b2dldGhlciwgYW5kIGJpZ2dlciB3aGVuIHBpbmNoZWQgb3V0XG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHNjYWxlXG4gKi9cbmZ1bmN0aW9uIGdldFNjYWxlKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0RGlzdGFuY2UoZW5kWzBdLCBlbmRbMV0sIFBST1BTX0NMSUVOVF9YWSkgLyBnZXREaXN0YW5jZShzdGFydFswXSwgc3RhcnRbMV0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbnZhciBNT1VTRV9JTlBVVF9NQVAgPSB7XG4gICAgbW91c2Vkb3duOiBJTlBVVF9TVEFSVCxcbiAgICBtb3VzZW1vdmU6IElOUFVUX01PVkUsXG4gICAgbW91c2V1cDogSU5QVVRfRU5EXG59O1xuXG52YXIgTU9VU0VfRUxFTUVOVF9FVkVOVFMgPSAnbW91c2Vkb3duJztcbnZhciBNT1VTRV9XSU5ET1dfRVZFTlRTID0gJ21vdXNlbW92ZSBtb3VzZXVwJztcblxuLyoqXG4gKiBNb3VzZSBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gTW91c2VJbnB1dCgpIHtcbiAgICB0aGlzLmV2RWwgPSBNT1VTRV9FTEVNRU5UX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gTU9VU0VfV0lORE9XX0VWRU5UUztcblxuICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlOyAvLyBtb3VzZWRvd24gc3RhdGVcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoTW91c2VJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTUVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBNT1VTRV9JTlBVVF9NQVBbZXYudHlwZV07XG5cbiAgICAgICAgLy8gb24gc3RhcnQgd2Ugd2FudCB0byBoYXZlIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBkb3duXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiBldi5idXR0b24gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfTU9WRSAmJiBldi53aGljaCAhPT0gMSkge1xuICAgICAgICAgICAgZXZlbnRUeXBlID0gSU5QVVRfRU5EO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW91c2UgbXVzdCBiZSBkb3duXG4gICAgICAgIGlmICghdGhpcy5wcmVzc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBldmVudFR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbnZhciBQT0lOVEVSX0lOUFVUX01BUCA9IHtcbiAgICBwb2ludGVyZG93bjogSU5QVVRfU1RBUlQsXG4gICAgcG9pbnRlcm1vdmU6IElOUFVUX01PVkUsXG4gICAgcG9pbnRlcnVwOiBJTlBVVF9FTkQsXG4gICAgcG9pbnRlcmNhbmNlbDogSU5QVVRfQ0FOQ0VMLFxuICAgIHBvaW50ZXJvdXQ6IElOUFVUX0NBTkNFTFxufTtcblxuLy8gaW4gSUUxMCB0aGUgcG9pbnRlciB0eXBlcyBpcyBkZWZpbmVkIGFzIGFuIGVudW1cbnZhciBJRTEwX1BPSU5URVJfVFlQRV9FTlVNID0ge1xuICAgIDI6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgMzogSU5QVVRfVFlQRV9QRU4sXG4gICAgNDogSU5QVVRfVFlQRV9NT1VTRSxcbiAgICA1OiBJTlBVVF9UWVBFX0tJTkVDVCAvLyBzZWUgaHR0cHM6Ly90d2l0dGVyLmNvbS9qYWNvYnJvc3NpL3N0YXR1cy80ODA1OTY0Mzg0ODk4OTA4MTZcbn07XG5cbnZhciBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ3BvaW50ZXJkb3duJztcbnZhciBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAncG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwnO1xuXG4vLyBJRTEwIGhhcyBwcmVmaXhlZCBzdXBwb3J0LCBhbmQgY2FzZS1zZW5zaXRpdmVcbmlmICh3aW5kb3cuTVNQb2ludGVyRXZlbnQgJiYgIXdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ01TUG9pbnRlckRvd24nO1xuICAgIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCc7XG59XG5cbi8qKlxuICogUG9pbnRlciBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gUG9pbnRlckV2ZW50SW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gUE9JTlRFUl9FTEVNRU5UX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gUE9JTlRFUl9XSU5ET1dfRVZFTlRTO1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuc3RvcmUgPSAodGhpcy5tYW5hZ2VyLnNlc3Npb24ucG9pbnRlckV2ZW50cyA9IFtdKTtcbn1cblxuaW5oZXJpdChQb2ludGVyRXZlbnRJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gUEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciBzdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICAgIHZhciByZW1vdmVQb2ludGVyID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGV2ZW50VHlwZU5vcm1hbGl6ZWQgPSBldi50eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnbXMnLCAnJyk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBQT0lOVEVSX0lOUFVUX01BUFtldmVudFR5cGVOb3JtYWxpemVkXTtcbiAgICAgICAgdmFyIHBvaW50ZXJUeXBlID0gSUUxMF9QT0lOVEVSX1RZUEVfRU5VTVtldi5wb2ludGVyVHlwZV0gfHwgZXYucG9pbnRlclR5cGU7XG5cbiAgICAgICAgdmFyIGlzVG91Y2ggPSAocG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCk7XG5cbiAgICAgICAgLy8gZ2V0IGluZGV4IG9mIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgdmFyIHN0b3JlSW5kZXggPSBpbkFycmF5KHN0b3JlLCBldi5wb2ludGVySWQsICdwb2ludGVySWQnKTtcblxuICAgICAgICAvLyBzdGFydCBhbmQgbW91c2UgbXVzdCBiZSBkb3duXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAoZXYuYnV0dG9uID09PSAwIHx8IGlzVG91Y2gpKSB7XG4gICAgICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5wdXNoKGV2KTtcbiAgICAgICAgICAgICAgICBzdG9yZUluZGV4ID0gc3RvcmUubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgcmVtb3ZlUG9pbnRlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpdCBub3QgZm91bmQsIHNvIHRoZSBwb2ludGVyIGhhc24ndCBiZWVuIGRvd24gKHNvIGl0J3MgcHJvYmFibHkgYSBob3ZlcilcbiAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGV2ZW50IGluIHRoZSBzdG9yZVxuICAgICAgICBzdG9yZVtzdG9yZUluZGV4XSA9IGV2O1xuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBldmVudFR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiBzdG9yZSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBwb2ludGVyVHlwZSxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVtb3ZlUG9pbnRlcikge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gdGhlIHN0b3JlXG4gICAgICAgICAgICBzdG9yZS5zcGxpY2Uoc3RvcmVJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxudmFyIFNJTkdMRV9UT1VDSF9JTlBVVF9NQVAgPSB7XG4gICAgdG91Y2hzdGFydDogSU5QVVRfU1RBUlQsXG4gICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG4gICAgdG91Y2hjYW5jZWw6IElOUFVUX0NBTkNFTFxufTtcblxudmFyIFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQnO1xudmFyIFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBUb3VjaCBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gU2luZ2xlVG91Y2hJbnB1dCgpIHtcbiAgICB0aGlzLmV2VGFyZ2V0ID0gU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTO1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChTaW5nbGVUb3VjaElucHV0LCBJbnB1dCwge1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFNJTkdMRV9UT1VDSF9JTlBVVF9NQVBbZXYudHlwZV07XG5cbiAgICAgICAgLy8gc2hvdWxkIHdlIGhhbmRsZSB0aGUgdG91Y2ggZXZlbnRzP1xuICAgICAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvdWNoZXMgPSBub3JtYWxpemVTaW5nbGVUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuXG4gICAgICAgIC8vIHdoZW4gZG9uZSwgcmVzZXQgdGhlIHN0YXJ0ZWQgc3RhdGVcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiB0b3VjaGVzWzBdLmxlbmd0aCAtIHRvdWNoZXNbMV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTaW5nbGVUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbCA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG4gICAgdmFyIGNoYW5nZWQgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKTtcblxuICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgYWxsID0gdW5pcXVlQXJyYXkoYWxsLmNvbmNhdChjaGFuZ2VkKSwgJ2lkZW50aWZpZXInLCB0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2FsbCwgY2hhbmdlZF07XG59XG5cbnZhciBUT1VDSF9JTlBVVF9NQVAgPSB7XG4gICAgdG91Y2hzdGFydDogSU5QVVRfU1RBUlQsXG4gICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG4gICAgdG91Y2hjYW5jZWw6IElOUFVUX0NBTkNFTFxufTtcblxudmFyIFRPVUNIX1RBUkdFVF9FVkVOVFMgPSAndG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnO1xuXG4vKipcbiAqIE11bHRpLXVzZXIgdG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFRPVUNIX1RBUkdFVF9FVkVOVFM7XG4gICAgdGhpcy50YXJnZXRJZHMgPSB7fTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBNVEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciB0eXBlID0gVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGdldFRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG4gICAgICAgIGlmICghdG91Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiB0b3VjaGVzWzBdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQHRoaXMge1RvdWNoSW5wdXR9XG4gKiBAcGFyYW0ge09iamVjdH0gZXZcbiAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR8QXJyYXl9IFthbGwsIGNoYW5nZWRdXG4gKi9cbmZ1bmN0aW9uIGdldFRvdWNoZXMoZXYsIHR5cGUpIHtcbiAgICB2YXIgYWxsVG91Y2hlcyA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG4gICAgdmFyIHRhcmdldElkcyA9IHRoaXMudGFyZ2V0SWRzO1xuXG4gICAgLy8gd2hlbiB0aGVyZSBpcyBvbmx5IG9uZSB0b3VjaCwgdGhlIHByb2Nlc3MgY2FuIGJlIHNpbXBsaWZpZWRcbiAgICBpZiAodHlwZSAmIChJTlBVVF9TVEFSVCB8IElOUFVUX01PVkUpICYmIGFsbFRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRhcmdldElkc1thbGxUb3VjaGVzWzBdLmlkZW50aWZpZXJdID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIFthbGxUb3VjaGVzLCBhbGxUb3VjaGVzXTtcbiAgICB9XG5cbiAgICB2YXIgaSxcbiAgICAgICAgdGFyZ2V0VG91Y2hlcyxcbiAgICAgICAgY2hhbmdlZFRvdWNoZXMgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKSxcbiAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMgPSBbXSxcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cbiAgICAvLyBnZXQgdGFyZ2V0IHRvdWNoZXMgZnJvbSB0b3VjaGVzXG4gICAgdGFyZ2V0VG91Y2hlcyA9IGFsbFRvdWNoZXMuZmlsdGVyKGZ1bmN0aW9uKHRvdWNoKSB7XG4gICAgICAgIHJldHVybiBoYXNQYXJlbnQodG91Y2gudGFyZ2V0LCB0YXJnZXQpO1xuICAgIH0pO1xuXG4gICAgLy8gY29sbGVjdCB0b3VjaGVzXG4gICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXJnZXRJZHNbdGFyZ2V0VG91Y2hlc1tpXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgY2hhbmdlZCB0b3VjaGVzIHRvIG9ubHkgY29udGFpbiB0b3VjaGVzIHRoYXQgZXhpc3QgaW4gdGhlIGNvbGxlY3RlZCB0YXJnZXQgaWRzXG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXSkge1xuICAgICAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMucHVzaChjaGFuZ2VkVG91Y2hlc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhbnVwIHJlbW92ZWQgdG91Y2hlc1xuICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoIWNoYW5nZWRUYXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgICAgLy8gbWVyZ2UgdGFyZ2V0VG91Y2hlcyB3aXRoIGNoYW5nZWRUYXJnZXRUb3VjaGVzIHNvIGl0IGNvbnRhaW5zIEFMTCB0b3VjaGVzLCBpbmNsdWRpbmcgJ2VuZCcgYW5kICdjYW5jZWwnXG4gICAgICAgIHVuaXF1ZUFycmF5KHRhcmdldFRvdWNoZXMuY29uY2F0KGNoYW5nZWRUYXJnZXRUb3VjaGVzKSwgJ2lkZW50aWZpZXInLCB0cnVlKSxcbiAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXNcbiAgICBdO1xufVxuXG4vKipcbiAqIENvbWJpbmVkIHRvdWNoIGFuZCBtb3VzZSBpbnB1dFxuICpcbiAqIFRvdWNoIGhhcyBhIGhpZ2hlciBwcmlvcml0eSB0aGVuIG1vdXNlLCBhbmQgd2hpbGUgdG91Y2hpbmcgbm8gbW91c2UgZXZlbnRzIGFyZSBhbGxvd2VkLlxuICogVGhpcyBiZWNhdXNlIHRvdWNoIGRldmljZXMgYWxzbyBlbWl0IG1vdXNlIGV2ZW50cyB3aGlsZSBkb2luZyBhIHRvdWNoLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuXG52YXIgREVEVVBfVElNRU9VVCA9IDI1MDA7XG52YXIgREVEVVBfRElTVEFOQ0UgPSAyNTtcblxuZnVuY3Rpb24gVG91Y2hNb3VzZUlucHV0KCkge1xuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB2YXIgaGFuZGxlciA9IGJpbmRGbih0aGlzLmhhbmRsZXIsIHRoaXMpO1xuICAgIHRoaXMudG91Y2ggPSBuZXcgVG91Y2hJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuICAgIHRoaXMubW91c2UgPSBuZXcgTW91c2VJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuXG4gICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBudWxsO1xuICAgIHRoaXMubGFzdFRvdWNoZXMgPSBbXTtcbn1cblxuaW5oZXJpdChUb3VjaE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGFuZCB0b3VjaCBldmVudHNcbiAgICAgKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dEV2ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRNRWhhbmRsZXIobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBpc1RvdWNoID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKSxcbiAgICAgICAgICAgIGlzTW91c2UgPSAoaW5wdXREYXRhLnBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfTU9VU0UpO1xuXG4gICAgICAgIGlmIChpc01vdXNlICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcy5maXJlc1RvdWNoRXZlbnRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3aGVuIHdlJ3JlIGluIGEgdG91Y2ggZXZlbnQsIHJlY29yZCB0b3VjaGVzIHRvICBkZS1kdXBlIHN5bnRoZXRpYyBtb3VzZSBldmVudFxuICAgICAgICBpZiAoaXNUb3VjaCkge1xuICAgICAgICAgICAgcmVjb3JkVG91Y2hlcy5jYWxsKHRoaXMsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNNb3VzZSAmJiBpc1N5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgaW5wdXREYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayhtYW5hZ2VyLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudG91Y2guZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1vdXNlLmRlc3Ryb3koKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gcmVjb3JkVG91Y2hlcyhldmVudFR5cGUsIGV2ZW50RGF0YSkge1xuICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuICAgICAgICB0aGlzLnByaW1hcnlUb3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF0uaWRlbnRpZmllcjtcbiAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRMYXN0VG91Y2goZXZlbnREYXRhKSB7XG4gICAgdmFyIHRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXTtcblxuICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09PSB0aGlzLnByaW1hcnlUb3VjaCkge1xuICAgICAgICB2YXIgbGFzdFRvdWNoID0ge3g6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFl9O1xuICAgICAgICB0aGlzLmxhc3RUb3VjaGVzLnB1c2gobGFzdFRvdWNoKTtcbiAgICAgICAgdmFyIGx0cyA9IHRoaXMubGFzdFRvdWNoZXM7XG4gICAgICAgIHZhciByZW1vdmVMYXN0VG91Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpID0gbHRzLmluZGV4T2YobGFzdFRvdWNoKTtcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBsdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZUxhc3RUb3VjaCwgREVEVVBfVElNRU9VVCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KGV2ZW50RGF0YSkge1xuICAgIHZhciB4ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFgsIHkgPSBldmVudERhdGEuc3JjRXZlbnQuY2xpZW50WTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGFzdFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLmxhc3RUb3VjaGVzW2ldO1xuICAgICAgICB2YXIgZHggPSBNYXRoLmFicyh4IC0gdC54KSwgZHkgPSBNYXRoLmFicyh5IC0gdC55KTtcbiAgICAgICAgaWYgKGR4IDw9IERFRFVQX0RJU1RBTkNFICYmIGR5IDw9IERFRFVQX0RJU1RBTkNFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gPSBwcmVmaXhlZChURVNUX0VMRU1FTlQuc3R5bGUsICd0b3VjaEFjdGlvbicpO1xudmFyIE5BVElWRV9UT1VDSF9BQ1RJT04gPSBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gIT09IHVuZGVmaW5lZDtcblxuLy8gbWFnaWNhbCB0b3VjaEFjdGlvbiB2YWx1ZVxudmFyIFRPVUNIX0FDVElPTl9DT01QVVRFID0gJ2NvbXB1dGUnO1xudmFyIFRPVUNIX0FDVElPTl9BVVRPID0gJ2F1dG8nO1xudmFyIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04gPSAnbWFuaXB1bGF0aW9uJzsgLy8gbm90IGltcGxlbWVudGVkXG52YXIgVE9VQ0hfQUNUSU9OX05PTkUgPSAnbm9uZSc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9YID0gJ3Bhbi14JztcbnZhciBUT1VDSF9BQ1RJT05fUEFOX1kgPSAncGFuLXknO1xudmFyIFRPVUNIX0FDVElPTl9NQVAgPSBnZXRUb3VjaEFjdGlvblByb3BzKCk7XG5cbi8qKlxuICogVG91Y2ggQWN0aW9uXG4gKiBzZXRzIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBvciB1c2VzIHRoZSBqcyBhbHRlcm5hdGl2ZVxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBUb3VjaEFjdGlvbihtYW5hZ2VyLCB2YWx1ZSkge1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xufVxuXG5Ub3VjaEFjdGlvbi5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZSBvbiB0aGUgZWxlbWVudCBvciBlbmFibGUgdGhlIHBvbHlmaWxsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyBmaW5kIG91dCB0aGUgdG91Y2gtYWN0aW9uIGJ5IHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAodmFsdWUgPT0gVE9VQ0hfQUNUSU9OX0NPTVBVVEUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jb21wdXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoTkFUSVZFX1RPVUNIX0FDVElPTiAmJiB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZSAmJiBUT1VDSF9BQ1RJT05fTUFQW3ZhbHVlXSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGVbUFJFRklYRURfVE9VQ0hfQUNUSU9OXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBqdXN0IHJlLXNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWVcbiAgICAgKi9cbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldCh0aGlzLm1hbmFnZXIub3B0aW9ucy50b3VjaEFjdGlvbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNvbXB1dGUgdGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgYmFzZWQgb24gdGhlIHJlY29nbml6ZXIncyBzZXR0aW5nc1xuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgY29tcHV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhY3Rpb25zID0gW107XG4gICAgICAgIGVhY2godGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLCBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgICAgICBpZiAoYm9vbE9yRm4ocmVjb2duaXplci5vcHRpb25zLmVuYWJsZSwgW3JlY29nbml6ZXJdKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBhY3Rpb25zLmNvbmNhdChyZWNvZ25pemVyLmdldFRvdWNoQWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMuam9pbignICcpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uIGVhY2ggaW5wdXQgY3ljbGUgYW5kIHByb3ZpZGVzIHRoZSBwcmV2ZW50aW5nIG9mIHRoZSBicm93c2VyIGJlaGF2aW9yXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgcHJldmVudERlZmF1bHRzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc3JjRXZlbnQgPSBpbnB1dC5zcmNFdmVudDtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0Lm9mZnNldERpcmVjdGlvbjtcblxuICAgICAgICAvLyBpZiB0aGUgdG91Y2ggYWN0aW9uIGRpZCBwcmV2ZW50ZWQgb25jZSB0aGlzIHNlc3Npb25cbiAgICAgICAgaWYgKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCkge1xuICAgICAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zO1xuICAgICAgICB2YXIgaGFzTm9uZSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1ldO1xuICAgICAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9YXTtcblxuICAgICAgICBpZiAoaGFzTm9uZSkge1xuICAgICAgICAgICAgLy9kbyBub3QgcHJldmVudCBkZWZhdWx0cyBpZiB0aGlzIGlzIGEgdGFwIGdlc3R1cmVcblxuICAgICAgICAgICAgdmFyIGlzVGFwUG9pbnRlciA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgIHZhciBpc1RhcE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCAyO1xuICAgICAgICAgICAgdmFyIGlzVGFwVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgMjUwO1xuXG4gICAgICAgICAgICBpZiAoaXNUYXBQb2ludGVyICYmIGlzVGFwTW92ZW1lbnQgJiYgaXNUYXBUb3VjaFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG4gICAgICAgICAgICAvLyBgcGFuLXggcGFuLXlgIG1lYW5zIGJyb3dzZXIgaGFuZGxlcyBhbGwgc2Nyb2xsaW5nL3Bhbm5pbmcsIGRvIG5vdCBwcmV2ZW50XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzTm9uZSB8fFxuICAgICAgICAgICAgKGhhc1BhblkgJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHx8XG4gICAgICAgICAgICAoaGFzUGFuWCAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2ZW50U3JjKHNyY0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsIHByZXZlbnREZWZhdWx0IHRvIHByZXZlbnQgdGhlIGJyb3dzZXIncyBkZWZhdWx0IGJlaGF2aW9yIChzY3JvbGxpbmcgaW4gbW9zdCBjYXNlcylcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjRXZlbnRcbiAgICAgKi9cbiAgICBwcmV2ZW50U3JjOiBmdW5jdGlvbihzcmNFdmVudCkge1xuICAgICAgICB0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbn07XG5cbi8qKlxuICogd2hlbiB0aGUgdG91Y2hBY3Rpb25zIGFyZSBjb2xsZWN0ZWQgdGhleSBhcmUgbm90IGEgdmFsaWQgdmFsdWUsIHNvIHdlIG5lZWQgdG8gY2xlYW4gdGhpbmdzIHVwLiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uc1xuICogQHJldHVybnMgeyp9XG4gKi9cbmZ1bmN0aW9uIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMpIHtcbiAgICAvLyBub25lXG4gICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcblxuICAgIC8vIGlmIGJvdGggcGFuLXggYW5kIHBhbi15IGFyZSBzZXQgKGRpZmZlcmVudCByZWNvZ25pemVyc1xuICAgIC8vIGZvciBkaWZmZXJlbnQgZGlyZWN0aW9ucywgZS5nLiBob3Jpem9udGFsIHBhbiBidXQgdmVydGljYWwgc3dpcGU/KVxuICAgIC8vIHdlIG5lZWQgbm9uZSAoYXMgb3RoZXJ3aXNlIHdpdGggcGFuLXggcGFuLXkgY29tYmluZWQgbm9uZSBvZiB0aGVzZVxuICAgIC8vIHJlY29nbml6ZXJzIHdpbGwgd29yaywgc2luY2UgdGhlIGJyb3dzZXIgd291bGQgaGFuZGxlIGFsbCBwYW5uaW5nXG4gICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgLy8gcGFuLXggT1IgcGFuLXlcbiAgICBpZiAoaGFzUGFuWCB8fCBoYXNQYW5ZKSB7XG4gICAgICAgIHJldHVybiBoYXNQYW5YID8gVE9VQ0hfQUNUSU9OX1BBTl9YIDogVE9VQ0hfQUNUSU9OX1BBTl9ZO1xuICAgIH1cblxuICAgIC8vIG1hbmlwdWxhdGlvblxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OKSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTjtcbiAgICB9XG5cbiAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX0FVVE87XG59XG5cbmZ1bmN0aW9uIGdldFRvdWNoQWN0aW9uUHJvcHMoKSB7XG4gICAgaWYgKCFOQVRJVkVfVE9VQ0hfQUNUSU9OKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRvdWNoTWFwID0ge307XG4gICAgdmFyIGNzc1N1cHBvcnRzID0gd2luZG93LkNTUyAmJiB3aW5kb3cuQ1NTLnN1cHBvcnRzO1xuICAgIFsnYXV0bycsICdtYW5pcHVsYXRpb24nLCAncGFuLXknLCAncGFuLXgnLCAncGFuLXggcGFuLXknLCAnbm9uZSddLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XG5cbiAgICAgICAgLy8gSWYgY3NzLnN1cHBvcnRzIGlzIG5vdCBzdXBwb3J0ZWQgYnV0IHRoZXJlIGlzIG5hdGl2ZSB0b3VjaC1hY3Rpb24gYXNzdW1lIGl0IHN1cHBvcnRzXG4gICAgICAgIC8vIGFsbCB2YWx1ZXMuIFRoaXMgaXMgdGhlIGNhc2UgZm9yIElFIDEwIGFuZCAxMS5cbiAgICAgICAgdG91Y2hNYXBbdmFsXSA9IGNzc1N1cHBvcnRzID8gd2luZG93LkNTUy5zdXBwb3J0cygndG91Y2gtYWN0aW9uJywgdmFsKSA6IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvdWNoTWFwO1xufVxuXG4vKipcbiAqIFJlY29nbml6ZXIgZmxvdyBleHBsYWluZWQ7ICpcbiAqIEFsbCByZWNvZ25pemVycyBoYXZlIHRoZSBpbml0aWFsIHN0YXRlIG9mIFBPU1NJQkxFIHdoZW4gYSBpbnB1dCBzZXNzaW9uIHN0YXJ0cy5cbiAqIFRoZSBkZWZpbml0aW9uIG9mIGEgaW5wdXQgc2Vzc2lvbiBpcyBmcm9tIHRoZSBmaXJzdCBpbnB1dCB1bnRpbCB0aGUgbGFzdCBpbnB1dCwgd2l0aCBhbGwgaXQncyBtb3ZlbWVudCBpbiBpdC4gKlxuICogRXhhbXBsZSBzZXNzaW9uIGZvciBtb3VzZS1pbnB1dDogbW91c2Vkb3duIC0+IG1vdXNlbW92ZSAtPiBtb3VzZXVwXG4gKlxuICogT24gZWFjaCByZWNvZ25pemluZyBjeWNsZSAoc2VlIE1hbmFnZXIucmVjb2duaXplKSB0aGUgLnJlY29nbml6ZSgpIG1ldGhvZCBpcyBleGVjdXRlZFxuICogd2hpY2ggZGV0ZXJtaW5lcyB3aXRoIHN0YXRlIGl0IHNob3VsZCBiZS5cbiAqXG4gKiBJZiB0aGUgcmVjb2duaXplciBoYXMgdGhlIHN0YXRlIEZBSUxFRCwgQ0FOQ0VMTEVEIG9yIFJFQ09HTklaRUQgKGVxdWFscyBFTkRFRCksIGl0IGlzIHJlc2V0IHRvXG4gKiBQT1NTSUJMRSB0byBnaXZlIGl0IGFub3RoZXIgY2hhbmdlIG9uIHRoZSBuZXh0IGN5Y2xlLlxuICpcbiAqICAgICAgICAgICAgICAgUG9zc2libGVcbiAqICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICArLS0tLS0rLS0tLS0tLS0tLS0tLS0tK1xuICogICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICArLS0tLS0rLS0tLS0rICAgICAgICAgICAgICAgfFxuICogICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgfFxuICogICBGYWlsZWQgICAgICBDYW5jZWxsZWQgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tKy0tLS0tLStcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICBSZWNvZ25pemVkICAgICAgIEJlZ2FuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmRlZC9SZWNvZ25pemVkXG4gKi9cbnZhciBTVEFURV9QT1NTSUJMRSA9IDE7XG52YXIgU1RBVEVfQkVHQU4gPSAyO1xudmFyIFNUQVRFX0NIQU5HRUQgPSA0O1xudmFyIFNUQVRFX0VOREVEID0gODtcbnZhciBTVEFURV9SRUNPR05JWkVEID0gU1RBVEVfRU5ERUQ7XG52YXIgU1RBVEVfQ0FOQ0VMTEVEID0gMTY7XG52YXIgU1RBVEVfRkFJTEVEID0gMzI7XG5cbi8qKlxuICogUmVjb2duaXplclxuICogRXZlcnkgcmVjb2duaXplciBuZWVkcyB0byBleHRlbmQgZnJvbSB0aGlzIGNsYXNzLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBSZWNvZ25pemVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5pZCA9IHVuaXF1ZUlkKCk7XG5cbiAgICB0aGlzLm1hbmFnZXIgPSBudWxsO1xuXG4gICAgLy8gZGVmYXVsdCBpcyBlbmFibGUgdHJ1ZVxuICAgIHRoaXMub3B0aW9ucy5lbmFibGUgPSBpZlVuZGVmaW5lZCh0aGlzLm9wdGlvbnMuZW5hYmxlLCB0cnVlKTtcblxuICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcblxuICAgIHRoaXMuc2ltdWx0YW5lb3VzID0ge307XG4gICAgdGhpcy5yZXF1aXJlRmFpbCA9IFtdO1xufVxuXG5SZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgZGVmYXVsdHM6IHt9LFxuXG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm4ge1JlY29nbml6ZXJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIGFsc28gdXBkYXRlIHRoZSB0b3VjaEFjdGlvbiwgaW4gY2FzZSBzb21ldGhpbmcgY2hhbmdlZCBhYm91dCB0aGUgZGlyZWN0aW9ucy9lbmFibGVkIHN0YXRlXG4gICAgICAgIHRoaXMubWFuYWdlciAmJiB0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgcmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZWNvZ25pemVXaXRoJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNpbXVsdGFuZW91cyA9IHRoaXMuc2ltdWx0YW5lb3VzO1xuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGlmICghc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0pIHtcbiAgICAgICAgICAgIHNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdID0gb3RoZXJSZWNvZ25pemVyO1xuICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlY29nbml6ZVdpdGgodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRyb3AgdGhlIHNpbXVsdGFuZW91cyBsaW5rLiBpdCBkb2VzbnQgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZWNvZ25pemVyIGNhbiBvbmx5IHJ1biB3aGVuIGFuIG90aGVyIGlzIGZhaWxpbmdcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgcmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVxdWlyZUZhaWwgPSB0aGlzLnJlcXVpcmVGYWlsO1xuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGlmIChpbkFycmF5KHJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpID09PSAtMSkge1xuICAgICAgICAgICAgcmVxdWlyZUZhaWwucHVzaChvdGhlclJlY29nbml6ZXIpO1xuICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSByZXF1aXJlRmFpbHVyZSBsaW5rLiBpdCBkb2VzIG5vdCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIGRyb3BSZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkodGhpcy5yZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaGFzIHJlcXVpcmUgZmFpbHVyZXMgYm9vbGVhblxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGhhc1JlcXVpcmVGYWlsdXJlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCA+IDA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGlmIHRoZSByZWNvZ25pemVyIGNhbiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFlvdSBzaG91bGQgdXNlIGB0cnlFbWl0YCBpbnN0ZWFkIG9mIGBlbWl0YCBkaXJlY3RseSB0byBjaGVja1xuICAgICAqIHRoYXQgYWxsIHRoZSBuZWVkZWQgcmVjb2duaXplcnMgaGFzIGZhaWxlZCBiZWZvcmUgZW1pdHRpbmcuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYubWFuYWdlci5lbWl0KGV2ZW50LCBpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAncGFuc3RhcnQnIGFuZCAncGFubW92ZSdcbiAgICAgICAgaWYgKHN0YXRlIDwgU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50KTsgLy8gc2ltcGxlICdldmVudE5hbWUnIGV2ZW50c1xuXG4gICAgICAgIGlmIChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpIHsgLy8gYWRkaXRpb25hbCBldmVudChwYW5sZWZ0LCBwYW5yaWdodCwgcGluY2hpbiwgcGluY2hvdXQuLi4pXG4gICAgICAgICAgICBlbWl0KGlucHV0LmFkZGl0aW9uYWxFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYW5lbmQgYW5kIHBhbmNhbmNlbFxuICAgICAgICBpZiAoc3RhdGUgPj0gU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGF0IGFsbCB0aGUgcmVxdWlyZSBmYWlsdXJlIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQsXG4gICAgICogaWYgdHJ1ZSwgaXQgZW1pdHMgYSBnZXN0dXJlIGV2ZW50LFxuICAgICAqIG90aGVyd2lzZSwgc2V0dXAgdGhlIHN0YXRlIHRvIEZBSUxFRC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICB0cnlFbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5jYW5FbWl0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGl0J3MgZmFpbGluZyBhbnl3YXlcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FuIHdlIGVtaXQ/XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuRW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEodGhpcy5yZXF1aXJlRmFpbFtpXS5zdGF0ZSAmIChTVEFURV9GQUlMRUQgfCBTVEFURV9QT1NTSUJMRSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGUgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcbiAgICAgICAgLy8gbWFrZSBhIG5ldyBjb3B5IG9mIHRoZSBpbnB1dERhdGFcbiAgICAgICAgLy8gc28gd2UgY2FuIGNoYW5nZSB0aGUgaW5wdXREYXRhIHdpdGhvdXQgbWVzc2luZyB1cCB0aGUgb3RoZXIgcmVjb2duaXplcnNcbiAgICAgICAgdmFyIGlucHV0RGF0YUNsb25lID0gYXNzaWduKHt9LCBpbnB1dERhdGEpO1xuXG4gICAgICAgIC8vIGlzIGlzIGVuYWJsZWQgYW5kIGFsbG93IHJlY29nbml6aW5nP1xuICAgICAgICBpZiAoIWJvb2xPckZuKHRoaXMub3B0aW9ucy5lbmFibGUsIFt0aGlzLCBpbnB1dERhdGFDbG9uZV0pKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmRcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfUkVDT0dOSVpFRCB8IFNUQVRFX0NBTkNFTExFRCB8IFNUQVRFX0ZBSUxFRCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnByb2Nlc3MoaW5wdXREYXRhQ2xvbmUpO1xuXG4gICAgICAgIC8vIHRoZSByZWNvZ25pemVyIGhhcyByZWNvZ25pemVkIGEgZ2VzdHVyZVxuICAgICAgICAvLyBzbyB0cmlnZ2VyIGFuIGV2ZW50XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEIHwgU1RBVEVfQ0FOQ0VMTEVEKSkge1xuICAgICAgICAgICAgdGhpcy50cnlFbWl0KGlucHV0RGF0YUNsb25lKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHN0YXRlIG9mIHRoZSByZWNvZ25pemVyXG4gICAgICogdGhlIGFjdHVhbCByZWNvZ25pemluZyBoYXBwZW5zIGluIHRoaXMgbWV0aG9kXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICogQHJldHVybnMge0NvbnN0fSBTVEFURVxuICAgICAqL1xuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0RGF0YSkgeyB9LCAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblxuICAgIC8qKlxuICAgICAqIHJldHVybiB0aGUgcHJlZmVycmVkIHRvdWNoLWFjdGlvblxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHJldHVybnMge0FycmF5fVxuICAgICAqL1xuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBnZXN0dXJlIGlzbid0IGFsbG93ZWQgdG8gcmVjb2duaXplXG4gICAgICogbGlrZSB3aGVuIGFub3RoZXIgaXMgYmVpbmcgcmVjb2duaXplZCBvciBpdCBpcyBkaXNhYmxlZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkgeyB9XG59O1xuXG4vKipcbiAqIGdldCBhIHVzYWJsZSBzdHJpbmcsIHVzZWQgYXMgZXZlbnQgcG9zdGZpeFxuICogQHBhcmFtIHtDb25zdH0gc3RhdGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0YXRlXG4gKi9cbmZ1bmN0aW9uIHN0YXRlU3RyKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlICYgU1RBVEVfQ0FOQ0VMTEVEKSB7XG4gICAgICAgIHJldHVybiAnY2FuY2VsJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgcmV0dXJuICdlbmQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9DSEFOR0VEKSB7XG4gICAgICAgIHJldHVybiAnbW92ZSc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0JFR0FOKSB7XG4gICAgICAgIHJldHVybiAnc3RhcnQnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogZGlyZWN0aW9uIGNvbnMgdG8gc3RyaW5nXG4gKiBAcGFyYW0ge0NvbnN0fSBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGlvblN0cihkaXJlY3Rpb24pIHtcbiAgICBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9ET1dOKSB7XG4gICAgICAgIHJldHVybiAnZG93bic7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1VQKSB7XG4gICAgICAgIHJldHVybiAndXAnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9MRUZUKSB7XG4gICAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1JJR0hUKSB7XG4gICAgICAgIHJldHVybiAncmlnaHQnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogZ2V0IGEgcmVjb2duaXplciBieSBuYW1lIGlmIGl0IGlzIGJvdW5kIHRvIGEgbWFuYWdlclxuICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gb3RoZXJSZWNvZ25pemVyXG4gKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAqIEByZXR1cm5zIHtSZWNvZ25pemVyfVxuICovXG5mdW5jdGlvbiBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgcmVjb2duaXplcikge1xuICAgIHZhciBtYW5hZ2VyID0gcmVjb2duaXplci5tYW5hZ2VyO1xuICAgIGlmIChtYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyLmdldChvdGhlclJlY29nbml6ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gb3RoZXJSZWNvZ25pemVyO1xufVxuXG4vKipcbiAqIFRoaXMgcmVjb2duaXplciBpcyBqdXN0IHVzZWQgYXMgYSBiYXNlIGZvciB0aGUgc2ltcGxlIGF0dHJpYnV0ZSByZWNvZ25pemVycy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBBdHRyUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoQXR0clJlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gY2hlY2sgaWYgaXQgdGhlIHJlY29nbml6ZXIgcmVjZWl2ZXMgdmFsaWQgaW5wdXQsIGxpa2UgaW5wdXQuZGlzdGFuY2UgPiAxMC5cbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gcmVjb2duaXplZFxuICAgICAqL1xuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9uUG9pbnRlcnMgPSB0aGlzLm9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHJldHVybiBvcHRpb25Qb2ludGVycyA9PT0gMCB8fCBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvblBvaW50ZXJzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHRoZSBpbnB1dCBhbmQgcmV0dXJuIHRoZSBzdGF0ZSBmb3IgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKiBAcmV0dXJucyB7Kn0gU3RhdGVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gaW5wdXQuZXZlbnRUeXBlO1xuXG4gICAgICAgIHZhciBpc1JlY29nbml6ZWQgPSBzdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQpO1xuICAgICAgICB2YXIgaXNWYWxpZCA9IHRoaXMuYXR0clRlc3QoaW5wdXQpO1xuXG4gICAgICAgIC8vIG9uIGNhbmNlbCBpbnB1dCBhbmQgd2UndmUgcmVjb2duaXplZCBiZWZvcmUsIHJldHVybiBTVEFURV9DQU5DRUxMRURcbiAgICAgICAgaWYgKGlzUmVjb2duaXplZCAmJiAoZXZlbnRUeXBlICYgSU5QVVRfQ0FOQ0VMIHx8ICFpc1ZhbGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0FOQ0VMTEVEO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUmVjb2duaXplZCB8fCBpc1ZhbGlkKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfRU5ERUQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCEoc3RhdGUgJiBTVEFURV9CRUdBTikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DSEFOR0VEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGFuXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBhbmQgbW92ZWQgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQYW5SZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnBYID0gbnVsbDtcbiAgICB0aGlzLnBZID0gbnVsbDtcbn1cblxuaW5oZXJpdChQYW5SZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGFuUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncGFuJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0FMTFxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChUT1VDSF9BQ1RJT05fUEFOX1kpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChUT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3Rpb25zO1xuICAgIH0sXG5cbiAgICBkaXJlY3Rpb25UZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdmFyIGhhc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gaW5wdXQuZGlzdGFuY2U7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5kaXJlY3Rpb247XG4gICAgICAgIHZhciB4ID0gaW5wdXQuZGVsdGFYO1xuICAgICAgICB2YXIgeSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICAvLyBsb2NrIHRvIGF4aXM/XG4gICAgICAgIGlmICghKGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uKSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeCA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh4IDwgMCkgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHggIT0gdGhpcy5wWDtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh5ID09PSAwKSA/IERJUkVDVElPTl9OT05FIDogKHkgPCAwKSA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xuICAgICAgICAgICAgICAgIGhhc01vdmVkID0geSAhPSB0aGlzLnBZO1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHJldHVybiBoYXNNb3ZlZCAmJiBkaXN0YW5jZSA+IG9wdGlvbnMudGhyZXNob2xkICYmIGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIEF0dHJSZWNvZ25pemVyLnByb3RvdHlwZS5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTiB8fCAoISh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pICYmIHRoaXMuZGlyZWN0aW9uVGVzdChpbnB1dCkpKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblxuICAgICAgICB0aGlzLnBYID0gaW5wdXQuZGVsdGFYO1xuICAgICAgICB0aGlzLnBZID0gaW5wdXQuZGVsdGFZO1xuXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQuZGlyZWN0aW9uKTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpbnB1dC5hZGRpdGlvbmFsRXZlbnQgPSB0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQaW5jaFxuICogUmVjb2duaXplZCB3aGVuIHR3byBvciBtb3JlIHBvaW50ZXJzIGFyZSBtb3ZpbmcgdG93YXJkICh6b29tLWluKSBvciBhd2F5IGZyb20gZWFjaCBvdGhlciAoem9vbS1vdXQpLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQaW5jaFJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChQaW5jaFJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BpbmNoJyxcbiAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICBwb2ludGVyczogMlxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQuc2NhbGUgLSAxKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LnNjYWxlICE9PSAxKSB7XG4gICAgICAgICAgICB2YXIgaW5PdXQgPSBpbnB1dC5zY2FsZSA8IDEgPyAnaW4nIDogJ291dCc7XG4gICAgICAgICAgICBpbnB1dC5hZGRpdGlvbmFsRXZlbnQgPSB0aGlzLm9wdGlvbnMuZXZlbnQgKyBpbk91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFByZXNzXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBmb3IgeCBtcyB3aXRob3V0IGFueSBtb3ZlbWVudC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQcmVzc1JlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcbn1cblxuaW5oZXJpdChQcmVzc1JlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFByZXNzUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncHJlc3MnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGltZTogMjUxLCAvLyBtaW5pbWFsIHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgcHJlc3NlZFxuICAgICAgICB0aHJlc2hvbGQ6IDkgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9BVVRPXTtcbiAgICB9LFxuXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPiBvcHRpb25zLnRpbWU7XG5cbiAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcblxuICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICghdmFsaWRNb3ZlbWVudCB8fCAhdmFsaWRQb2ludGVycyB8fCAoaW5wdXQuZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgIXZhbGlkVGltZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcbiAgICAgICAgICAgIH0sIG9wdGlvbnMudGltZSwgdGhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTVEFURV9SRUNPR05JWkVEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXQgJiYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArICd1cCcsIGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuLyoqXG4gKiBSb3RhdGVcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVyIGFyZSBtb3ZpbmcgaW4gYSBjaXJjdWxhciBtb3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFJvdGF0ZVJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChSb3RhdGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUm90YXRlUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncm90YXRlJyxcbiAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICBwb2ludGVyczogMlxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQucm90YXRpb24pID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFN3aXBlXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgbW92aW5nIGZhc3QgKHZlbG9jaXR5KSwgd2l0aCBlbm91Z2ggZGlzdGFuY2UgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBTd2lwZVJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChTd2lwZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBTd2lwZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3N3aXBlJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgdmVsb2NpdHk6IDAuMyxcbiAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCxcbiAgICAgICAgcG9pbnRlcnM6IDFcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gUGFuUmVjb2duaXplci5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgdmVsb2NpdHk7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIChESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCkpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5O1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVg7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIGRpcmVjdGlvbiAmIGlucHV0Lm9mZnNldERpcmVjdGlvbiAmJlxuICAgICAgICAgICAgaW5wdXQuZGlzdGFuY2UgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkICYmXG4gICAgICAgICAgICBpbnB1dC5tYXhQb2ludGVycyA9PSB0aGlzLm9wdGlvbnMucG9pbnRlcnMgJiZcbiAgICAgICAgICAgIGFicyh2ZWxvY2l0eSkgPiB0aGlzLm9wdGlvbnMudmVsb2NpdHkgJiYgaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0Lm9mZnNldERpcmVjdGlvbik7XG4gICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbiwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQSB0YXAgaXMgZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG9pbmcgYSBzbWFsbCB0YXAvY2xpY2suIE11bHRpcGxlIHRhcHMgYXJlIHJlY29nbml6ZWQgaWYgdGhleSBvY2N1clxuICogYmV0d2VlbiB0aGUgZ2l2ZW4gaW50ZXJ2YWwgYW5kIHBvc2l0aW9uLiBUaGUgZGVsYXkgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHJlY29nbml6ZSBtdWx0aS10YXBzIHdpdGhvdXQgZmlyaW5nXG4gKiBhIHNpbmdsZSB0YXAuXG4gKlxuICogVGhlIGV2ZW50RGF0YSBmcm9tIHRoZSBlbWl0dGVkIGV2ZW50IGNvbnRhaW5zIHRoZSBwcm9wZXJ0eSBgdGFwQ291bnRgLCB3aGljaCBjb250YWlucyB0aGUgYW1vdW50IG9mXG4gKiBtdWx0aS10YXBzIGJlaW5nIHJlY29nbml6ZWQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gVGFwUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyBwcmV2aW91cyB0aW1lIGFuZCBjZW50ZXIsXG4gICAgLy8gdXNlZCBmb3IgdGFwIGNvdW50aW5nXG4gICAgdGhpcy5wVGltZSA9IGZhbHNlO1xuICAgIHRoaXMucENlbnRlciA9IGZhbHNlO1xuXG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcbiAgICB0aGlzLmNvdW50ID0gMDtcbn1cblxuaW5oZXJpdChUYXBSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3RhcCcsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICB0YXBzOiAxLFxuICAgICAgICBpbnRlcnZhbDogMzAwLCAvLyBtYXggdGltZSBiZXR3ZWVuIHRoZSBtdWx0aS10YXAgdGFwc1xuICAgICAgICB0aW1lOiAyNTAsIC8vIG1heCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIGRvd24gKGxpa2UgZmluZ2VyIG9uIHRoZSBzY3JlZW4pXG4gICAgICAgIHRocmVzaG9sZDogOSwgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcbiAgICAgICAgcG9zVGhyZXNob2xkOiAxMCAvLyBhIG11bHRpLXRhcCBjYW4gYmUgYSBiaXQgb2ZmIHRoZSBpbml0aWFsIHBvc2l0aW9uXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OXTtcbiAgICB9LFxuXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgdmFyIHZhbGlkUG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcbiAgICAgICAgdmFyIHZhbGlkVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMucmVzZXQoKTtcblxuICAgICAgICBpZiAoKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSAmJiAodGhpcy5jb3VudCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICh2YWxpZE1vdmVtZW50ICYmIHZhbGlkVG91Y2hUaW1lICYmIHZhbGlkUG9pbnRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbGlkSW50ZXJ2YWwgPSB0aGlzLnBUaW1lID8gKGlucHV0LnRpbWVTdGFtcCAtIHRoaXMucFRpbWUgPCBvcHRpb25zLmludGVydmFsKSA6IHRydWU7XG4gICAgICAgICAgICB2YXIgdmFsaWRNdWx0aVRhcCA9ICF0aGlzLnBDZW50ZXIgfHwgZ2V0RGlzdGFuY2UodGhpcy5wQ2VudGVyLCBpbnB1dC5jZW50ZXIpIDwgb3B0aW9ucy5wb3NUaHJlc2hvbGQ7XG5cbiAgICAgICAgICAgIHRoaXMucFRpbWUgPSBpbnB1dC50aW1lU3RhbXA7XG4gICAgICAgICAgICB0aGlzLnBDZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG5cbiAgICAgICAgICAgIGlmICghdmFsaWRNdWx0aVRhcCB8fCAhdmFsaWRJbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgICAgIC8vIGlmIHRhcCBjb3VudCBtYXRjaGVzIHdlIGhhdmUgcmVjb2duaXplZCBpdCxcbiAgICAgICAgICAgIC8vIGVsc2UgaXQgaGFzIGJlZ2FuIHJlY29nbml6aW5nLi4uXG4gICAgICAgICAgICB2YXIgdGFwQ291bnQgPSB0aGlzLmNvdW50ICUgb3B0aW9ucy50YXBzO1xuICAgICAgICAgICAgaWYgKHRhcENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gZmFpbGluZyByZXF1aXJlbWVudHMsIGltbWVkaWF0ZWx5IHRyaWdnZXIgdGhlIHRhcCBldmVudFxuICAgICAgICAgICAgICAgIC8vIG9yIHdhaXQgYXMgbG9uZyBhcyB0aGUgbXVsdGl0YXAgaW50ZXJ2YWwgdG8gdHJpZ2dlclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgZmFpbFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zLmludGVydmFsLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgdGhpcy5faW5wdXQudGFwQ291bnQgPSB0aGlzLmNvdW50O1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuLyoqXG4gKiBTaW1wbGUgd2F5IHRvIGNyZWF0ZSBhIG1hbmFnZXIgd2l0aCBhIGRlZmF1bHQgc2V0IG9mIHJlY29nbml6ZXJzLlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEhhbW1lcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy5yZWNvZ25pemVycyA9IGlmVW5kZWZpbmVkKG9wdGlvbnMucmVjb2duaXplcnMsIEhhbW1lci5kZWZhdWx0cy5wcmVzZXQpO1xuICAgIHJldHVybiBuZXcgTWFuYWdlcihlbGVtZW50LCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuSGFtbWVyLlZFUlNJT04gPSAnMi4wLjcnO1xuXG4vKipcbiAqIGRlZmF1bHQgc2V0dGluZ3NcbiAqIEBuYW1lc3BhY2VcbiAqL1xuSGFtbWVyLmRlZmF1bHRzID0ge1xuICAgIC8qKlxuICAgICAqIHNldCBpZiBET00gZXZlbnRzIGFyZSBiZWluZyB0cmlnZ2VyZWQuXG4gICAgICogQnV0IHRoaXMgaXMgc2xvd2VyIGFuZCB1bnVzZWQgYnkgc2ltcGxlIGltcGxlbWVudGF0aW9ucywgc28gZGlzYWJsZWQgYnkgZGVmYXVsdC5cbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGRvbUV2ZW50czogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eS9mYWxsYmFjay5cbiAgICAgKiBXaGVuIHNldCB0byBgY29tcHV0ZWAgaXQgd2lsbCBtYWdpY2FsbHkgc2V0IHRoZSBjb3JyZWN0IHZhbHVlIGJhc2VkIG9uIHRoZSBhZGRlZCByZWNvZ25pemVycy5cbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqIEBkZWZhdWx0IGNvbXB1dGVcbiAgICAgKi9cbiAgICB0b3VjaEFjdGlvbjogVE9VQ0hfQUNUSU9OX0NPTVBVVEUsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgZW5hYmxlOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogRVhQRVJJTUVOVEFMIEZFQVRVUkUgLS0gY2FuIGJlIHJlbW92ZWQvY2hhbmdlZFxuICAgICAqIENoYW5nZSB0aGUgcGFyZW50IGlucHV0IHRhcmdldCBlbGVtZW50LlxuICAgICAqIElmIE51bGwsIHRoZW4gaXQgaXMgYmVpbmcgc2V0IHRoZSB0byBtYWluIGVsZW1lbnQuXG4gICAgICogQHR5cGUge051bGx8RXZlbnRUYXJnZXR9XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0VGFyZ2V0OiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogZm9yY2UgYW4gaW5wdXQgY2xhc3NcbiAgICAgKiBAdHlwZSB7TnVsbHxGdW5jdGlvbn1cbiAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgaW5wdXRDbGFzczogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgcmVjb2duaXplciBzZXR1cCB3aGVuIGNhbGxpbmcgYEhhbW1lcigpYFxuICAgICAqIFdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlciB0aGVzZSB3aWxsIGJlIHNraXBwZWQuXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuICAgIHByZXNldDogW1xuICAgICAgICAvLyBSZWNvZ25pemVyQ2xhc3MsIG9wdGlvbnMsIFtyZWNvZ25pemVXaXRoLCAuLi5dLCBbcmVxdWlyZUZhaWx1cmUsIC4uLl1cbiAgICAgICAgW1JvdGF0ZVJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfV0sXG4gICAgICAgIFtQaW5jaFJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfSwgWydyb3RhdGUnXV0sXG4gICAgICAgIFtTd2lwZVJlY29nbml6ZXIsIHtkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMfV0sXG4gICAgICAgIFtQYW5SZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH0sIFsnc3dpcGUnXV0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyXSxcbiAgICAgICAgW1RhcFJlY29nbml6ZXIsIHtldmVudDogJ2RvdWJsZXRhcCcsIHRhcHM6IDJ9LCBbJ3RhcCddXSxcbiAgICAgICAgW1ByZXNzUmVjb2duaXplcl1cbiAgICBdLFxuXG4gICAgLyoqXG4gICAgICogU29tZSBDU1MgcHJvcGVydGllcyBjYW4gYmUgdXNlZCB0byBpbXByb3ZlIHRoZSB3b3JraW5nIG9mIEhhbW1lci5cbiAgICAgKiBBZGQgdGhlbSB0byB0aGlzIG1ldGhvZCBhbmQgdGhleSB3aWxsIGJlIHNldCB3aGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIuXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqL1xuICAgIGNzc1Byb3BzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyB0ZXh0IHNlbGVjdGlvbiB0byBpbXByb3ZlIHRoZSBkcmFnZ2luZyBnZXN0dXJlLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlIHRoZSBXaW5kb3dzIFBob25lIGdyaXBwZXJzIHdoZW4gcHJlc3NpbmcgYW4gZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB0b3VjaFNlbGVjdDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyB0aGUgZGVmYXVsdCBjYWxsb3V0IHNob3duIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0LlxuICAgICAgICAgKiBPbiBpT1MsIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0IHN1Y2ggYXMgYSBsaW5rLCBTYWZhcmkgZGlzcGxheXNcbiAgICAgICAgICogYSBjYWxsb3V0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGxpbmsuIFRoaXMgcHJvcGVydHkgYWxsb3dzIHlvdSB0byBkaXNhYmxlIHRoYXQgY2FsbG91dC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB0b3VjaENhbGxvdXQ6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgem9vbWluZyBpcyBlbmFibGVkLiBVc2VkIGJ5IElFMTA+XG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgY29udGVudFpvb21pbmc6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoYXQgYW4gZW50aXJlIGVsZW1lbnQgc2hvdWxkIGJlIGRyYWdnYWJsZSBpbnN0ZWFkIG9mIGl0cyBjb250ZW50cy4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJEcmFnOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXJyaWRlcyB0aGUgaGlnaGxpZ2h0IGNvbG9yIHNob3duIHdoZW4gdGhlIHVzZXIgdGFwcyBhIGxpbmsgb3IgYSBKYXZhU2NyaXB0XG4gICAgICAgICAqIGNsaWNrYWJsZSBlbGVtZW50IGluIGlPUy4gVGhpcyBwcm9wZXJ0eSBvYmV5cyB0aGUgYWxwaGEgdmFsdWUsIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ3JnYmEoMCwwLDAsMCknXG4gICAgICAgICAqL1xuICAgICAgICB0YXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknXG4gICAgfVxufTtcblxudmFyIFNUT1AgPSAxO1xudmFyIEZPUkNFRF9TVE9QID0gMjtcblxuLyoqXG4gKiBNYW5hZ2VyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gTWFuYWdlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCBIYW1tZXIuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0ID0gdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0IHx8IGVsZW1lbnQ7XG5cbiAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgdGhpcy5zZXNzaW9uID0ge307XG4gICAgdGhpcy5yZWNvZ25pemVycyA9IFtdO1xuICAgIHRoaXMub2xkQ3NzUHJvcHMgPSB7fTtcblxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5pbnB1dCA9IGNyZWF0ZUlucHV0SW5zdGFuY2UodGhpcyk7XG4gICAgdGhpcy50b3VjaEFjdGlvbiA9IG5ldyBUb3VjaEFjdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuXG4gICAgdG9nZ2xlQ3NzUHJvcHModGhpcywgdHJ1ZSk7XG5cbiAgICBlYWNoKHRoaXMub3B0aW9ucy5yZWNvZ25pemVycywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVjb2duaXplciA9IHRoaXMuYWRkKG5ldyAoaXRlbVswXSkoaXRlbVsxXSkpO1xuICAgICAgICBpdGVtWzJdICYmIHJlY29nbml6ZXIucmVjb2duaXplV2l0aChpdGVtWzJdKTtcbiAgICAgICAgaXRlbVszXSAmJiByZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKGl0ZW1bM10pO1xuICAgIH0sIHRoaXMpO1xufVxuXG5NYW5hZ2VyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybnMge01hbmFnZXJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIE9wdGlvbnMgdGhhdCBuZWVkIGEgbGl0dGxlIG1vcmUgc2V0dXBcbiAgICAgICAgaWYgKG9wdGlvbnMudG91Y2hBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW5wdXRUYXJnZXQpIHtcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVpbml0aWFsaXplXG4gICAgICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQudGFyZ2V0ID0gb3B0aW9ucy5pbnB1dFRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuaW5pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBzdG9wIHJlY29nbml6aW5nIGZvciB0aGlzIHNlc3Npb24uXG4gICAgICogVGhpcyBzZXNzaW9uIHdpbGwgYmUgZGlzY2FyZGVkLCB3aGVuIGEgbmV3IFtpbnB1dF1zdGFydCBldmVudCBpcyBmaXJlZC5cbiAgICAgKiBXaGVuIGZvcmNlZCwgdGhlIHJlY29nbml6ZXIgY3ljbGUgaXMgc3RvcHBlZCBpbW1lZGlhdGVseS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmb3JjZV1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICB0aGlzLnNlc3Npb24uc3RvcHBlZCA9IGZvcmNlID8gRk9SQ0VEX1NUT1AgOiBTVE9QO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBydW4gdGhlIHJlY29nbml6ZXJzIVxuICAgICAqIGNhbGxlZCBieSB0aGUgaW5wdXRIYW5kbGVyIGZ1bmN0aW9uIG9uIGV2ZXJ5IG1vdmVtZW50IG9mIHRoZSBwb2ludGVycyAodG91Y2hlcylcbiAgICAgKiBpdCB3YWxrcyB0aHJvdWdoIGFsbCB0aGUgcmVjb2duaXplcnMgYW5kIHRyaWVzIHRvIGRldGVjdCB0aGUgZ2VzdHVyZSB0aGF0IGlzIGJlaW5nIG1hZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIGlmIChzZXNzaW9uLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJ1biB0aGUgdG91Y2gtYWN0aW9uIHBvbHlmaWxsXG4gICAgICAgIHRoaXMudG91Y2hBY3Rpb24ucHJldmVudERlZmF1bHRzKGlucHV0RGF0YSk7XG5cbiAgICAgICAgdmFyIHJlY29nbml6ZXI7XG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cbiAgICAgICAgLy8gdGhpcyBob2xkcyB0aGUgcmVjb2duaXplciB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgIC8vIHNvIHRoZSByZWNvZ25pemVyJ3Mgc3RhdGUgbmVlZHMgdG8gYmUgQkVHQU4sIENIQU5HRUQsIEVOREVEIG9yIFJFQ09HTklaRURcbiAgICAgICAgLy8gaWYgbm8gcmVjb2duaXplciBpcyBkZXRlY3RpbmcgYSB0aGluZywgaXQgaXMgc2V0IHRvIGBudWxsYFxuICAgICAgICB2YXIgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplcjtcblxuICAgICAgICAvLyByZXNldCB3aGVuIHRoZSBsYXN0IHJlY29nbml6ZXIgaXMgcmVjb2duaXplZFxuICAgICAgICAvLyBvciB3aGVuIHdlJ3JlIGluIGEgbmV3IHNlc3Npb25cbiAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyIHx8IChjdXJSZWNvZ25pemVyICYmIGN1clJlY29nbml6ZXIuc3RhdGUgJiBTVEFURV9SRUNPR05JWkVEKSkge1xuICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgcmVjb2duaXplcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWNvZ25pemVyID0gcmVjb2duaXplcnNbaV07XG5cbiAgICAgICAgICAgIC8vIGZpbmQgb3V0IGlmIHdlIGFyZSBhbGxvd2VkIHRyeSB0byByZWNvZ25pemUgdGhlIGlucHV0IGZvciB0aGlzIG9uZS5cbiAgICAgICAgICAgIC8vIDEuICAgYWxsb3cgaWYgdGhlIHNlc3Npb24gaXMgTk9UIGZvcmNlZCBzdG9wcGVkIChzZWUgdGhlIC5zdG9wKCkgbWV0aG9kKVxuICAgICAgICAgICAgLy8gMi4gICBhbGxvdyBpZiB3ZSBzdGlsbCBoYXZlbid0IHJlY29nbml6ZWQgYSBnZXN0dXJlIGluIHRoaXMgc2Vzc2lvbiwgb3IgdGhlIHRoaXMgcmVjb2duaXplciBpcyB0aGUgb25lXG4gICAgICAgICAgICAvLyAgICAgIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgICAgICAgIC8vIDMuICAgYWxsb3cgaWYgdGhlIHJlY29nbml6ZXIgaXMgYWxsb3dlZCB0byBydW4gc2ltdWx0YW5lb3VzIHdpdGggdGhlIGN1cnJlbnQgcmVjb2duaXplZCByZWNvZ25pemVyLlxuICAgICAgICAgICAgLy8gICAgICB0aGlzIGNhbiBiZSBzZXR1cCB3aXRoIHRoZSBgcmVjb2duaXplV2l0aCgpYCBtZXRob2Qgb24gdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkICE9PSBGT1JDRURfU1RPUCAmJiAoIC8vIDFcbiAgICAgICAgICAgICAgICAgICAgIWN1clJlY29nbml6ZXIgfHwgcmVjb2duaXplciA9PSBjdXJSZWNvZ25pemVyIHx8IC8vIDJcbiAgICAgICAgICAgICAgICAgICAgcmVjb2duaXplci5jYW5SZWNvZ25pemVXaXRoKGN1clJlY29nbml6ZXIpKSkgeyAvLyAzXG4gICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemUoaW5wdXREYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjb2duaXplci5yZXNldCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0aGUgcmVjb2duaXplciBoYXMgYmVlbiByZWNvZ25pemluZyB0aGUgaW5wdXQgYXMgYSB2YWxpZCBnZXN0dXJlLCB3ZSB3YW50IHRvIHN0b3JlIHRoaXMgb25lIGFzIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgcmVjb2duaXplci4gYnV0IG9ubHkgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSByZWNvZ25pemVyXG4gICAgICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgJiYgcmVjb2duaXplci5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCkpIHtcbiAgICAgICAgICAgICAgICBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBnZXQgYSByZWNvZ25pemVyIGJ5IGl0cyBldmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxOdWxsfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAocmVjb2duaXplciBpbnN0YW5jZW9mIFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvZ25pemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHJlY29nbml6ZXJzW2ldLm9wdGlvbnMuZXZlbnQgPT0gcmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogYWRkIGEgcmVjb2duaXplciB0byB0aGUgbWFuYWdlclxuICAgICAqIGV4aXN0aW5nIHJlY29nbml6ZXJzIHdpdGggdGhlIHNhbWUgZXZlbnQgbmFtZSB3aWxsIGJlIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxNYW5hZ2VyfVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ2FkZCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSBleGlzdGluZ1xuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChyZWNvZ25pemVyLm9wdGlvbnMuZXZlbnQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGV4aXN0aW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVjb2duaXplcnMucHVzaChyZWNvZ25pemVyKTtcbiAgICAgICAgcmVjb2duaXplci5tYW5hZ2VyID0gdGhpcztcblxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGEgcmVjb2duaXplciBieSBuYW1lIG9yIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHJlbW92ZTogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ3JlbW92ZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlY29nbml6ZXIgPSB0aGlzLmdldChyZWNvZ25pemVyKTtcblxuICAgICAgICAvLyBsZXQncyBtYWtlIHN1cmUgdGhpcyByZWNvZ25pemVyIGV4aXN0c1xuICAgICAgICBpZiAocmVjb2duaXplcikge1xuICAgICAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkocmVjb2duaXplcnMsIHJlY29nbml6ZXIpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVjb2duaXplcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGJpbmQgZXZlbnRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSA9IGhhbmRsZXJzW2V2ZW50XSB8fCBbXTtcbiAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVuYmluZCBldmVudCwgbGVhdmUgZW1pdCBibGFuayB0byByZW1vdmUgYWxsIGhhbmRsZXJzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtoYW5kbGVyXVxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBoYW5kbGVyc1tldmVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSAmJiBoYW5kbGVyc1tldmVudF0uc3BsaWNlKGluQXJyYXkoaGFuZGxlcnNbZXZlbnRdLCBoYW5kbGVyKSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZW1pdCBldmVudCB0byB0aGUgbGlzdGVuZXJzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBlbWl0OiBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICAgICAvLyB3ZSBhbHNvIHdhbnQgdG8gdHJpZ2dlciBkb20gZXZlbnRzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZG9tRXZlbnRzKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gaGFuZGxlcnMsIHNvIHNraXAgaXQgYWxsXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdICYmIHRoaXMuaGFuZGxlcnNbZXZlbnRdLnNsaWNlKCk7XG4gICAgICAgIGlmICghaGFuZGxlcnMgfHwgIWhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50eXBlID0gZXZlbnQ7XG4gICAgICAgIGRhdGEucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRhdGEuc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgaGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tpXShkYXRhKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkZXN0cm95IHRoZSBtYW5hZ2VyIGFuZCB1bmJpbmRzIGFsbCBldmVudHNcbiAgICAgKiBpdCBkb2Vzbid0IHVuYmluZCBkb20gZXZlbnRzLCB0aGF0IGlzIHRoZSB1c2VyIG93biByZXNwb25zaWJpbGl0eVxuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgJiYgdG9nZ2xlQ3NzUHJvcHModGhpcywgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0ge307XG4gICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgIH1cbn07XG5cbi8qKlxuICogYWRkL3JlbW92ZSB0aGUgY3NzIHByb3BlcnRpZXMgYXMgZGVmaW5lZCBpbiBtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHNcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtCb29sZWFufSBhZGRcbiAqL1xuZnVuY3Rpb24gdG9nZ2xlQ3NzUHJvcHMobWFuYWdlciwgYWRkKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgaWYgKCFlbGVtZW50LnN0eWxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHByb3A7XG4gICAgZWFjaChtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHMsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHByb3AgPSBwcmVmaXhlZChlbGVtZW50LnN0eWxlLCBuYW1lKTtcbiAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSA9IGVsZW1lbnQuc3R5bGVbcHJvcF07XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSB8fCAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghYWRkKSB7XG4gICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHMgPSB7fTtcbiAgICB9XG59XG5cbi8qKlxuICogdHJpZ2dlciBkb20gZXZlbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAqL1xuZnVuY3Rpb24gdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgdmFyIGdlc3R1cmVFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGdlc3R1cmVFdmVudC5pbml0RXZlbnQoZXZlbnQsIHRydWUsIHRydWUpO1xuICAgIGdlc3R1cmVFdmVudC5nZXN0dXJlID0gZGF0YTtcbiAgICBkYXRhLnRhcmdldC5kaXNwYXRjaEV2ZW50KGdlc3R1cmVFdmVudCk7XG59XG5cbmFzc2lnbihIYW1tZXIsIHtcbiAgICBJTlBVVF9TVEFSVDogSU5QVVRfU1RBUlQsXG4gICAgSU5QVVRfTU9WRTogSU5QVVRfTU9WRSxcbiAgICBJTlBVVF9FTkQ6IElOUFVUX0VORCxcbiAgICBJTlBVVF9DQU5DRUw6IElOUFVUX0NBTkNFTCxcblxuICAgIFNUQVRFX1BPU1NJQkxFOiBTVEFURV9QT1NTSUJMRSxcbiAgICBTVEFURV9CRUdBTjogU1RBVEVfQkVHQU4sXG4gICAgU1RBVEVfQ0hBTkdFRDogU1RBVEVfQ0hBTkdFRCxcbiAgICBTVEFURV9FTkRFRDogU1RBVEVfRU5ERUQsXG4gICAgU1RBVEVfUkVDT0dOSVpFRDogU1RBVEVfUkVDT0dOSVpFRCxcbiAgICBTVEFURV9DQU5DRUxMRUQ6IFNUQVRFX0NBTkNFTExFRCxcbiAgICBTVEFURV9GQUlMRUQ6IFNUQVRFX0ZBSUxFRCxcblxuICAgIERJUkVDVElPTl9OT05FOiBESVJFQ1RJT05fTk9ORSxcbiAgICBESVJFQ1RJT05fTEVGVDogRElSRUNUSU9OX0xFRlQsXG4gICAgRElSRUNUSU9OX1JJR0hUOiBESVJFQ1RJT05fUklHSFQsXG4gICAgRElSRUNUSU9OX1VQOiBESVJFQ1RJT05fVVAsXG4gICAgRElSRUNUSU9OX0RPV046IERJUkVDVElPTl9ET1dOLFxuICAgIERJUkVDVElPTl9IT1JJWk9OVEFMOiBESVJFQ1RJT05fSE9SSVpPTlRBTCxcbiAgICBESVJFQ1RJT05fVkVSVElDQUw6IERJUkVDVElPTl9WRVJUSUNBTCxcbiAgICBESVJFQ1RJT05fQUxMOiBESVJFQ1RJT05fQUxMLFxuXG4gICAgTWFuYWdlcjogTWFuYWdlcixcbiAgICBJbnB1dDogSW5wdXQsXG4gICAgVG91Y2hBY3Rpb246IFRvdWNoQWN0aW9uLFxuXG4gICAgVG91Y2hJbnB1dDogVG91Y2hJbnB1dCxcbiAgICBNb3VzZUlucHV0OiBNb3VzZUlucHV0LFxuICAgIFBvaW50ZXJFdmVudElucHV0OiBQb2ludGVyRXZlbnRJbnB1dCxcbiAgICBUb3VjaE1vdXNlSW5wdXQ6IFRvdWNoTW91c2VJbnB1dCxcbiAgICBTaW5nbGVUb3VjaElucHV0OiBTaW5nbGVUb3VjaElucHV0LFxuXG4gICAgUmVjb2duaXplcjogUmVjb2duaXplcixcbiAgICBBdHRyUmVjb2duaXplcjogQXR0clJlY29nbml6ZXIsXG4gICAgVGFwOiBUYXBSZWNvZ25pemVyLFxuICAgIFBhbjogUGFuUmVjb2duaXplcixcbiAgICBTd2lwZTogU3dpcGVSZWNvZ25pemVyLFxuICAgIFBpbmNoOiBQaW5jaFJlY29nbml6ZXIsXG4gICAgUm90YXRlOiBSb3RhdGVSZWNvZ25pemVyLFxuICAgIFByZXNzOiBQcmVzc1JlY29nbml6ZXIsXG5cbiAgICBvbjogYWRkRXZlbnRMaXN0ZW5lcnMsXG4gICAgb2ZmOiByZW1vdmVFdmVudExpc3RlbmVycyxcbiAgICBlYWNoOiBlYWNoLFxuICAgIG1lcmdlOiBtZXJnZSxcbiAgICBleHRlbmQ6IGV4dGVuZCxcbiAgICBhc3NpZ246IGFzc2lnbixcbiAgICBpbmhlcml0OiBpbmhlcml0LFxuICAgIGJpbmRGbjogYmluZEZuLFxuICAgIHByZWZpeGVkOiBwcmVmaXhlZFxufSk7XG5cbi8vIHRoaXMgcHJldmVudHMgZXJyb3JzIHdoZW4gSGFtbWVyIGlzIGxvYWRlZCBpbiB0aGUgcHJlc2VuY2Ugb2YgYW4gQU1EXG4vLyAgc3R5bGUgbG9hZGVyIGJ1dCBieSBzY3JpcHQgdGFnLCBub3QgYnkgdGhlIGxvYWRlci5cbnZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fSkpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbmZyZWVHbG9iYWwuSGFtbWVyID0gSGFtbWVyO1xuXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gSGFtbWVyO1xuICAgIH0pO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBIYW1tZXI7XG59IGVsc2Uge1xuICAgIHdpbmRvd1tleHBvcnROYW1lXSA9IEhhbW1lcjtcbn1cblxufSkod2luZG93LCBkb2N1bWVudCwgJ0hhbW1lcicpO1xuIiwiLyohXG4gKiAgaG93bGVyLmpzIHYyLjAuMlxuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDE2LCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gIC8vICd1c2Ugc3RyaWN0JztcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuIEFsbCBjb250YWluZWQgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcHBseVxuICAgKiB0byBhbGwgc291bmRzIHRoYXQgYXJlIGN1cnJlbnRseSBwbGF5aW5nIG9yIHdpbGwgYmUgaW4gdGhlIGZ1dHVyZS5cbiAgICovXG4gIHZhciBIb3dsZXJHbG9iYWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBJbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fY29kZWNzID0ge307XG4gICAgICBzZWxmLl9ob3dscyA9IFtdO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IDE7XG4gICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheXRocm91Z2gnO1xuICAgICAgc2VsZi5fbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IpID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGw7XG5cbiAgICAgIC8vIFB1YmxpYyBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5tYXN0ZXJHYWluID0gbnVsbDtcbiAgICAgIHNlbGYubm9BdWRpbyA9IGZhbHNlO1xuICAgICAgc2VsZi51c2luZ1dlYkF1ZGlvID0gdHJ1ZTtcbiAgICAgIHNlbGYuYXV0b1N1c3BlbmQgPSB0cnVlO1xuICAgICAgc2VsZi5jdHggPSBudWxsO1xuXG4gICAgICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgYXV0byBpT1MgZW5hYmxlci5cbiAgICAgIHNlbGYubW9iaWxlQXV0b0VuYWJsZSA9IHRydWU7XG5cbiAgICAgIC8vIFNldHVwIHRoZSB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAgc2VsZi5fc2V0dXAoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGdsb2JhbCB2b2x1bWUgZm9yIGFsbCBzb3VuZHMuXG4gICAgICogQHBhcmFtICB7RmxvYXR9IHZvbCBWb2x1bWUgZnJvbSAwLjAgdG8gMS4wLlxuICAgICAqIEByZXR1cm4ge0hvd2xlci9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKHZvbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZvbCA9IHBhcnNlRmxvYXQodm9sKTtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIGFueSBvZiB0aGUgbm9kZXMgaWYgd2UgYXJlIG11dGVkLlxuICAgICAgICBpZiAoc2VsZi5fbXV0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnZhbHVlID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBjaGFuZ2Ugdm9sdW1lIGZvciBhbGwgSFRNTDUgYXVkaW8gbm9kZXMuXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hhbmdlIHRoZSB2b2x1bWVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIHZvbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbXV0aW5nIGFuZCB1bm11dGluZyBnbG9iYWxseS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBJcyBtdXRlZCBvciBub3QuXG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAvLyBXaXRoIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIG11dGUgdGhlIG1hc3RlciBnYWluLlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi52YWx1ZSA9IG11dGVkID8gMCA6IHNlbGYuX3ZvbHVtZTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBtdXRlIGFsbCBIVE1MNSBBdWRpbyBub2Rlcy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIG1hcmsgdGhlIGF1ZGlvIG5vZGUgYXMgbXV0ZWQuXG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSAobXV0ZWQpID8gdHJ1ZSA6IHNvdW5kLl9tdXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSBhbGwgY3VycmVudGx5IGxvYWRlZCBIb3dsIG9iamVjdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0udW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgdG8gbWFrZSBzdXJlIGl0IGlzIGZ1bGx5IHJlc2V0LlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbyAmJiBzZWxmLmN0eCAmJiB0eXBlb2Ygc2VsZi5jdHguY2xvc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LmNsb3NlKCk7XG4gICAgICAgIHNlbGYuY3R4ID0gbnVsbDtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBjb2RlYyBzdXBwb3J0IG9mIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV4dCBBdWRpbyBmaWxlIGV4dGVudGlvbi5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNvZGVjczogZnVuY3Rpb24oZXh0KSB7XG4gICAgICByZXR1cm4gKHRoaXMgfHwgSG93bGVyKS5fY29kZWNzW2V4dC5yZXBsYWNlKC9eeC0vLCAnJyldO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIHN1c3BlbmQvcmVzdW1lIHN0YXRlIG9mIHRoZSBBdWRpb0NvbnRleHQuXG4gICAgICBzZWxmLnN0YXRlID0gc2VsZi5jdHggPyBzZWxmLmN0eC5zdGF0ZSB8fCAncnVubmluZycgOiAncnVubmluZyc7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcbiAgICAgIHNlbGYuX2F1dG9TdXNwZW5kKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cbiAgICAgIGlmICghc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIE5vIGF1ZGlvIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHN5c3RlbSBpZiBub0F1ZGlvIGlzIHNldCB0byB0cnVlLlxuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FucGxheXRocm91Z2ggZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0Lm9uY2FucGxheXRocm91Z2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuICAgICAgICBpZiAodGVzdC5tdXRlZCkge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0ZWQgY29kZWNzLlxuICAgICAgaWYgKCFzZWxmLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fc2V0dXBDb2RlY3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBicm93c2VyIHN1cHBvcnQgZm9yIHZhcmlvdXMgY29kZWNzIGFuZCBjYWNoZSB0aGUgcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwQ29kZWNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2YXIgYXVkaW9UZXN0ID0gbnVsbDtcblxuICAgICAgLy8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1Rlc3QgPSAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykgPyBuZXcgQXVkaW8oKSA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXVkaW9UZXN0IHx8IHR5cGVvZiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHZhciBtcGVnVGVzdCA9IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXBlZzsnKS5yZXBsYWNlKC9ebm8kLywgJycpO1xuXG4gICAgICAvLyBPcGVyYSB2ZXJzaW9uIDwzMyBoYXMgbWl4ZWQgTVAzIHN1cHBvcnQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGFuZCBibG9jayBpdC5cbiAgICAgIHZhciBjaGVja09wZXJhID0gc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09QUlxcLyhbMC02XS4pL2cpO1xuICAgICAgdmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcblxuICAgICAgc2VsZi5fY29kZWNzID0ge1xuICAgICAgICBtcDM6ICEhKCFpc09sZE9wZXJhICYmIChtcGVnVGVzdCB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wMzsnKS5yZXBsYWNlKC9ebm8kLywgJycpKSksXG4gICAgICAgIG1wZWc6ICEhbXBlZ1Rlc3QsXG4gICAgICAgIG9wdXM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cIm9wdXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nZzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2E6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2F2OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2OyBjb2RlY3M9XCIxXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBhYWM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgY2FmOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1jYWY7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRhOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtcDQ6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYmE6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYm06ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGRvbGJ5OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9XCJlYy0zXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBmbGFjOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtZmxhYzsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2ZsYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJylcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb2JpbGUgYnJvd3NlcnMgd2lsbCBvbmx5IGFsbG93IGF1ZGlvIHRvIGJlIHBsYXllZCBhZnRlciBhIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHVubG9jayBhdWRpbyBvbiB0aGUgZmlyc3QgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBDb25jZXB0IGZyb206IGh0dHA6Ly9wYXVsYmFrYXVzLmNvbS90dXRvcmlhbHMvaHRtbDUvd2ViLWF1ZGlvLW9uLWlvcy9cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2VuYWJsZU1vYmlsZUF1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIE9ubHkgcnVuIHRoaXMgb24gbW9iaWxlIGRldmljZXMgaWYgYXVkaW8gaXNuJ3QgYWxyZWFkeSBlYW5ibGVkLlxuICAgICAgdmFyIGlzTW9iaWxlID0gL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZHxCbGFja0JlcnJ5fEJCMTB8U2lsa3xNb2JpL2kudGVzdChzZWxmLl9uYXZpZ2F0b3IgJiYgc2VsZi5fbmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB2YXIgaXNUb3VjaCA9ICEhKCgnb250b3VjaGVuZCcgaW4gd2luZG93KSB8fCAoc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDApIHx8IChzZWxmLl9uYXZpZ2F0b3IgJiYgc2VsZi5fbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XG4gICAgICBpZiAoc2VsZi5fbW9iaWxlRW5hYmxlZCB8fCAhc2VsZi5jdHggfHwgKCFpc01vYmlsZSAmJiAhaXNUb3VjaCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tb2JpbGVFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIFNvbWUgbW9iaWxlIGRldmljZXMvcGxhdGZvcm1zIGhhdmUgZGlzdG9ydGlvbiBpc3N1ZXMgd2hlbiBvcGVuaW5nL2Nsb3NpbmcgdGFicyBhbmQvb3Igd2ViIHZpZXdzLlxuICAgICAgLy8gQnVncyBpbiB0aGUgYnJvd3NlciAoZXNwZWNpYWxseSBNb2JpbGUgU2FmYXJpKSBjYW4gY2F1c2UgdGhlIHNhbXBsZVJhdGUgdG8gY2hhbmdlIGZyb20gNDQxMDAgdG8gNDgwMDAuXG4gICAgICAvLyBCeSBjYWxsaW5nIEhvd2xlci51bmxvYWQoKSwgd2UgY3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB3aXRoIHRoZSBjb3JyZWN0IHNhbXBsZVJhdGUuXG4gICAgICBpZiAoIXNlbGYuX21vYmlsZVVubG9hZGVkICYmIHNlbGYuY3R4LnNhbXBsZVJhdGUgIT09IDQ0MTAwKSB7XG4gICAgICAgIHNlbGYuX21vYmlsZVVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2NyYXRjaCBidWZmZXIgZm9yIGVuYWJsaW5nIGlPUyB0byBkaXNwb3NlIG9mIHdlYiBhdWRpbyBidWZmZXJzIGNvcnJlY3RseSwgYXMgcGVyOlxuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDExOTY4NFxuICAgICAgc2VsZi5fc2NyYXRjaEJ1ZmZlciA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlcigxLCAxLCAyMjA1MCk7XG5cbiAgICAgIC8vIENhbGwgdGhpcyBtZXRob2Qgb24gdG91Y2ggc3RhcnQgdG8gY3JlYXRlIGFuZCBwbGF5IGEgYnVmZmVyLFxuICAgICAgLy8gdGhlbiBjaGVjayBpZiB0aGUgYXVkaW8gYWN0dWFsbHkgcGxheWVkIHRvIGRldGVybWluZSBpZlxuICAgICAgLy8gYXVkaW8gaGFzIG5vdyBiZWVuIHVubG9ja2VkIG9uIGlPUywgQW5kcm9pZCwgZXRjLlxuICAgICAgdmFyIHVubG9jayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyLlxuICAgICAgICB2YXIgc291cmNlID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgIHNvdXJjZS5idWZmZXIgPSBzZWxmLl9zY3JhdGNoQnVmZmVyO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChzZWxmLmN0eC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgZW1wdHkgYnVmZmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzb3VyY2Uubm90ZU9uKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldHVwIGEgdGltZW91dCB0byBjaGVjayB0aGF0IHdlIGFyZSB1bmxvY2tlZCBvbiB0aGUgbmV4dCBldmVudCBsb29wLlxuICAgICAgICBzb3VyY2Uub25lbmRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNvdXJjZS5kaXNjb25uZWN0KDApO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSB1bmxvY2tlZCBzdGF0ZSBhbmQgcHJldmVudCB0aGlzIGNoZWNrIGZyb20gaGFwcGVuaW5nIGFnYWluLlxuICAgICAgICAgIHNlbGYuX21vYmlsZUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIHNlbGYubW9iaWxlQXV0b0VuYWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b3VjaCBzdGFydCBsaXN0ZW5lci5cbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhIHRvdWNoIHN0YXJ0IGxpc3RlbmVyIHRvIGF0dGVtcHQgYW4gdW5sb2NrIGluLlxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSBzdXNwZW5kIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IGFmdGVyIG5vIHNvdW5kIGhhcyBwbGF5ZWQgZm9yIDMwIHNlY29uZHMuXG4gICAgICogVGhpcyBzYXZlcyBwcm9jZXNzaW5nL2VuZXJneSBhbmQgZml4ZXMgdmFyaW91cyBicm93c2VyLXNwZWNpZmljIGJ1Z3Mgd2l0aCBhdWRpbyBnZXR0aW5nIHN0dWNrLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1N1c3BlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQgfHwgIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5zdXNwZW5kID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBhbnkgc291bmRzIGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8c2VsZi5faG93bHNbaV0uX3NvdW5kcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fc291bmRzW2pdLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIHNvdW5kIGhhcyBwbGF5ZWQgYWZ0ZXIgMzAgc2Vjb25kcywgc3VzcGVuZCB0aGUgY29udGV4dC5cbiAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGluZyc7XG4gICAgICAgIHNlbGYuY3R4LnN1c3BlbmQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGVkJztcblxuICAgICAgICAgIGlmIChzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQ7XG4gICAgICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sIDMwMDAwKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVzdW1lIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IHdoZW4gYSBuZXcgc291bmQgaXMgcGxheWVkLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1Jlc3VtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgIHNlbGYuc3RhdGUgPSAncmVzdW1pbmcnO1xuICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAncnVubmluZyc7XG5cbiAgICAgICAgICAvLyBFbWl0IHRvIGFsbCBIb3dscyB0aGF0IHRoZSBhdWRpbyBoYXMgcmVzdW1lZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCdyZXN1bWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kaW5nJykge1xuICAgICAgICBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2V0dXAgdGhlIGdsb2JhbCBhdWRpbyBjb250cm9sbGVyLlxuICB2YXIgSG93bGVyID0gbmV3IEhvd2xlckdsb2JhbCgpO1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYXVkaW8gZ3JvdXAgY29udHJvbGxlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAqL1xuICB2YXIgSG93bCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBubyBzb3VyY2UgaXMgcHJvdmlkZWQuXG4gICAgaWYgKCFvLnNyYyB8fCBvLnNyYy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGFycmF5IG9mIHNvdXJjZSBmaWxlcyBtdXN0IGJlIHBhc3NlZCB3aXRoIGFueSBuZXcgSG93bC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxmLmluaXQobyk7XG4gIH07XG4gIEhvd2wucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgSG93bCBncm91cCBvYmplY3QuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fYXV0b3BsYXkgPSBvLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fZm9ybWF0ID0gKHR5cGVvZiBvLmZvcm1hdCAhPT0gJ3N0cmluZycpID8gby5mb3JtYXQgOiBbby5mb3JtYXRdO1xuICAgICAgc2VsZi5faHRtbDUgPSBvLmh0bWw1IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBvLm11dGUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9sb29wID0gby5sb29wIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fcG9vbCA9IG8ucG9vbCB8fCA1O1xuICAgICAgc2VsZi5fcHJlbG9hZCA9ICh0eXBlb2Ygby5wcmVsb2FkID09PSAnYm9vbGVhbicpID8gby5wcmVsb2FkIDogdHJ1ZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBvLnJhdGUgfHwgMTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IG8uc3ByaXRlIHx8IHt9O1xuICAgICAgc2VsZi5fc3JjID0gKHR5cGVvZiBvLnNyYyAhPT0gJ3N0cmluZycpID8gby5zcmMgOiBbby5zcmNdO1xuICAgICAgc2VsZi5fdm9sdW1lID0gby52b2x1bWUgIT09IHVuZGVmaW5lZCA/IG8udm9sdW1lIDogMTtcblxuICAgICAgLy8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gMDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZi5fZW5kVGltZXJzID0ge307XG4gICAgICBzZWxmLl9xdWV1ZSA9IFtdO1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbmVuZCA9IG8ub25lbmQgPyBbe2ZuOiBvLm9uZW5kfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uZmFkZSA9IG8ub25mYWRlID8gW3tmbjogby5vbmZhZGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkID0gby5vbmxvYWQgPyBbe2ZuOiBvLm9ubG9hZH1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWRlcnJvciA9IG8ub25sb2FkZXJyb3IgPyBbe2ZuOiBvLm9ubG9hZGVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe2ZuOiBvLm9ucGF1c2V9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe2ZuOiBvLm9ucGxheX1dIDogW107XG4gICAgICBzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7Zm46IG8ub25zdG9wfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tmbjogby5vbm11dGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tmbjogby5vbnZvbHVtZX1dIDogW107XG4gICAgICBzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7Zm46IG8ub25yYXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tmbjogby5vbnNlZWt9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yZXN1bWUgPSBbXTtcblxuICAgICAgLy8gV2ViIEF1ZGlvIG9yIEhUTUw1IEF1ZGlvP1xuICAgICAgc2VsZi5fd2ViQXVkaW8gPSBIb3dsZXIudXNpbmdXZWJBdWRpbyAmJiAhc2VsZi5faHRtbDU7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpbyBvbiBpT1MuXG4gICAgICBpZiAodHlwZW9mIEhvd2xlci5jdHggIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHggJiYgSG93bGVyLm1vYmlsZUF1dG9FbmFibGUpIHtcbiAgICAgICAgSG93bGVyLl9lbmFibGVNb2JpbGVBdWRpbygpO1xuICAgICAgfVxuXG4gICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoaXMgSG93bCBncm91cCBpbiB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuXG4gICAgICBIb3dsZXIuX2hvd2xzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIElmIHRoZXkgc2VsZWN0ZWQgYXV0b3BsYXksIGFkZCBhIHBsYXkgZXZlbnQgdG8gdGhlIGxvYWQgcXVldWUuXG4gICAgICBpZiAoc2VsZi5fYXV0b3BsYXkpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9hZCB0aGUgc291cmNlIGZpbGUgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gICAgICBpZiAoc2VsZi5fcHJlbG9hZCkge1xuICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGF1ZGlvIGZpbGUuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHVybCA9IG51bGw7XG5cbiAgICAgIC8vIElmIG5vIGF1ZGlvIGlzIGF2YWlsYWJsZSwgcXVpdCBpbW1lZGlhdGVseS5cbiAgICAgIGlmIChIb3dsZXIubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gYXVkaW8gc3VwcG9ydC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgb3VyIHNvdXJjZSBpcyBpbiBhbiBhcnJheS5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5fc3JjID09PSAnc3RyaW5nJykge1xuICAgICAgICBzZWxmLl9zcmMgPSBbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBzb3VyY2VzIGFuZCBwaWNrIHRoZSBmaXJzdCBvbmUgdGhhdCBpcyBjb21wYXRpYmxlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NyYy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0LCBzdHI7XG5cbiAgICAgICAgaWYgKHNlbGYuX2Zvcm1hdCAmJiBzZWxmLl9mb3JtYXRbaV0pIHtcbiAgICAgICAgICAvLyBJZiBhbiBleHRlbnNpb24gd2FzIHNwZWNpZmllZCwgdXNlIHRoYXQgaW5zdGVhZC5cbiAgICAgICAgICBleHQgPSBzZWxmLl9mb3JtYXRbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VyY2UgaXMgYSBzdHJpbmcuXG4gICAgICAgICAgc3RyID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vbi1zdHJpbmcgZm91bmQgaW4gc2VsZWN0ZWQgYXVkaW8gc291cmNlcyAtIGlnbm9yaW5nLicpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSB0aGUgVVJMIG9yIGJhc2U2NCBkYXRhIFVSSS5cbiAgICAgICAgICBleHQgPSAvXmRhdGE6YXVkaW9cXC8oW147LF0rKTsvaS5leGVjKHN0cik7XG4gICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhzdHIuc3BsaXQoJz8nLCAxKVswXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4dCkge1xuICAgICAgICAgICAgZXh0ID0gZXh0WzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBleHRlbnNpb24gaXMgYXZhaWxhYmxlLlxuICAgICAgICBpZiAoSG93bGVyLmNvZGVjcyhleHQpKSB7XG4gICAgICAgICAgdXJsID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBjb2RlYyBzdXBwb3J0IGZvciBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX3NyYyA9IHVybDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAvLyBJZiB0aGUgaG9zdGluZyBwYWdlIGlzIEhUVFBTIGFuZCB0aGUgc291cmNlIGlzbid0LFxuICAgICAgLy8gZHJvcCBkb3duIHRvIEhUTUw1IEF1ZGlvIHRvIGF2b2lkIE1peGVkIENvbnRlbnQgZXJyb3JzLlxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgdXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cDonKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNvdW5kIG9iamVjdCBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxuICAgICAgbmV3IFNvdW5kKHNlbGYpO1xuXG4gICAgICAvLyBMb2FkIGFuZCBkZWNvZGUgdGhlIGF1ZGlvIGRhdGEgZm9yIHBsYXliYWNrLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIGxvYWRCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQbGF5IGEgc291bmQgb3IgcmVzdW1lIHByZXZpb3VzIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge1N0cmluZy9OdW1iZXJ9IHNwcml0ZSAgIFNwcml0ZSBuYW1lIGZvciBzcHJpdGUgcGxheWJhY2sgb3Igc291bmQgaWQgdG8gY29udGludWUgcHJldmlvdXMuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgIFNvdW5kIElELlxuICAgICAqL1xuICAgIHBsYXk6IGZ1bmN0aW9uKHNwcml0ZSwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpZCA9IG51bGw7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiBhIHNwcml0ZSwgc291bmQgaWQgb3Igbm90aGluZyB3YXMgcGFzc2VkXG4gICAgICBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBzcHJpdGU7XG4gICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdzdHJpbmcnICYmIHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAhc2VsZi5fc3ByaXRlW3Nwcml0ZV0pIHtcbiAgICAgICAgLy8gSWYgdGhlIHBhc3NlZCBzcHJpdGUgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZGVmYXVsdCBzb3VuZCBzcHJpdGUgKHBsYXlzIHRoZSBmdWxsIGF1ZGlvIGxlbmd0aCkuXG4gICAgICAgIHNwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgc2luZ2xlIHBhdXNlZCBzb3VuZCB0aGF0IGlzbid0IGVuZGVkLlxuICAgICAgICAvLyBJZiB0aGVyZSBpcywgcGxheSB0aGF0IHNvdW5kLiBJZiBub3QsIGNvbnRpbnVlIGFzIHVzdWFsLlxuICAgICAgICB2YXIgbnVtID0gMDtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCAmJiAhc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgICAgbnVtKys7XG4gICAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1tpXS5faWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51bSA9PT0gMSkge1xuICAgICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgbm9kZSwgb3IgZ2V0IG9uZSBmcm9tIHRoZSBwb29sLlxuICAgICAgdmFyIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5faW5hY3RpdmVTb3VuZCgpO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgIGlmICghc291bmQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgc3ByaXRlIGRlZmluaXRpb24uXG4gICAgICBpZiAoaWQgJiYgIXNwcml0ZSkge1xuICAgICAgICBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlIHx8ICdfX2RlZmF1bHQnO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIG5vIHNwcml0ZSBhbmQgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdFxuICAgICAgLy8gZm9yIHRoZSBzb3VuZCB0byBsb2FkIHRvIGdldCBvdXIgYXVkaW8ncyBkdXJhdGlvbi5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgJiYgIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShzZWxmLl9zb3VuZEJ5SWQoc291bmQuX2lkKSA/IHNvdW5kLl9pZCA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBwbGF5IHRoZSBzb3VuZCBpZiBhbiBpZCB3YXMgcGFzc2VkIGFuZCBpdCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICBpZiAoaWQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgcGxheSBldmVudCwgaW4gb3JkZXIgdG8ga2VlcCBpdGVyYXRpbmcgdGhyb3VnaCBxdWV1ZS5cbiAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgQXVkaW9Db250ZXh0IGlzbid0IHN1c3BlbmRlZCwgYW5kIHJlc3VtZSBpdCBpZiBpdCBpcy5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBIb3dsZXIuX2F1dG9SZXN1bWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBsb25nIHRvIHBsYXkgZm9yIGFuZCB3aGVyZSB0byBzdGFydCBwbGF5aW5nLlxuICAgICAgdmFyIHNlZWsgPSBNYXRoLm1heCgwLCBzb3VuZC5fc2VlayA+IDAgPyBzb3VuZC5fc2VlayA6IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMCk7XG4gICAgICB2YXIgZHVyYXRpb24gPSBNYXRoLm1heCgwLCAoKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrKTtcbiAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyYW1ldGVycyBvZiB0aGUgc291bmRcbiAgICAgIHNvdW5kLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcbiAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgIHNvdW5kLl9zdGFydCA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9zdG9wID0gKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9sb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuXG4gICAgICAvLyBCZWdpbiB0aGUgYWN0dWFsIHBsYXliYWNrLlxuICAgICAgdmFyIG5vZGUgPSBzb3VuZC5fbm9kZTtcbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBXZWIgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5V2ViQXVkaW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcblxuICAgICAgICAgIC8vIFNldHVwIHRoZSBwbGF5YmFjayBwYXJhbXMuXG4gICAgICAgICAgdmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XG4gICAgICAgICAgbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAvLyBQbGF5IHRoZSBzb3VuZCB1c2luZyB0aGUgc3VwcG9ydGVkIG1ldGhvZC5cbiAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHRpbWVyIGlmIG5vbmUgaXMgcHJlc2VudC5cbiAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlzUnVubmluZyA9IChIb3dsZXIuc3RhdGUgPT09ICdydW5uaW5nJyk7XG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgaXNSdW5uaW5nKSB7XG4gICAgICAgICAgcGxheVdlYkF1ZGlvKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGF1ZGlvIHRvIGxvYWQgYW5kIHRoZW4gYmVnaW4gcGxheWJhY2suXG4gICAgICAgICAgc2VsZi5vbmNlKGlzUnVubmluZyA/ICdsb2FkJyA6ICdyZXN1bWUnLCBwbGF5V2ViQXVkaW8sIGlzUnVubmluZyA/IHNvdW5kLl9pZCA6IG51bGwpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBIVE1MNSBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlIdG1sNSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIG5vZGUubXV0ZWQgPSBzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgSG93bGVyLl9tdXRlZCB8fCBub2RlLm11dGVkO1xuICAgICAgICAgIG5vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5vZGUucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGVuZCB0aW1lci5cbiAgICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFBsYXkgaW1tZWRpYXRlbHkgaWYgcmVhZHksIG9yIHdhaXQgZm9yIHRoZSAnY2FucGxheXRocm91Z2gnZSB2ZW50LlxuICAgICAgICB2YXIgbG9hZGVkTm9SZWFkeVN0YXRlID0gKHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAod2luZG93ICYmIHdpbmRvdy5lamVjdGEgfHwgIW5vZGUucmVhZHlTdGF0ZSAmJiBIb3dsZXIuX25hdmlnYXRvci5pc0NvY29vbkpTKSk7XG4gICAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUgPT09IDQgfHwgbG9hZGVkTm9SZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcGxheUh0bWw1KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBCZWdpbiBwbGF5YmFjay5cbiAgICAgICAgICAgIHBsYXlIdG1sNSgpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHBsYXliYWNrIGFuZCBzYXZlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHBhdXNlIGFsbCBpbiBncm91cCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBwYXVzZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGF1c2UnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBwYXVzZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlbGYuc2VlayhpZHNbaV0pO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHNvdW5kIGhhcyBiZWVuIGNyZWF0ZWRcbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmUgdGhlIHBhdXNlIGV2ZW50LCB1bmxlc3MgYHRydWVgIGlzIHBhc3NlZCBhcyB0aGUgMm5kIGFyZ3VtZW50LlxuICAgICAgICBpZiAoIWFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BhdXNlJywgc291bmQgPyBzb3VuZC5faWQgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcCBwbGF5YmFjayBhbmQgcmVzZXQgdG8gc3RhcnQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHN0b3AgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oaWQsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc3RvcCB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc3RvcCcsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgc3RvcHBlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkXG4gICAgICAgICAgICAgIGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc291bmQgJiYgIWludGVybmFsKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGUvdW5tdXRlIGEgc2luZ2xlIHNvdW5kIG9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIFNldCB0byB0cnVlIHRvIG11dGUgYW5kIGZhbHNlIHRvIHVubXV0ZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFRoZSBzb3VuZCBJRCB0byB1cGRhdGUgKG9taXQgdG8gbXV0ZS91bm11dGUgYWxsKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIG11dGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ211dGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLm11dGUobXV0ZWQsIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhcHBseWluZyBtdXRlL3VubXV0ZSB0byBhbGwgc291bmRzLCB1cGRhdGUgdGhlIGdyb3VwJ3MgdmFsdWUuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIG11dGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9tdXRlZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBtdXRlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc291bmQuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSBIb3dsZXIuX211dGVkID8gdHJ1ZSA6IG11dGVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ211dGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSB2b2x1bWUgb2YgdGhpcyBzb3VuZCBvciBvZiB0aGUgSG93bCBncm91cC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgdm9sdW1lKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2b2x1bWUgdmFsdWUuXG4gICAgICogICB2b2x1bWUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCB2b2x1bWUuXG4gICAgICogICB2b2x1bWUodm9sKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICB2b2x1bWUodm9sLCBpZCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciB2b2wsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ3JvdXBzJyB2b2x1bWUuXG4gICAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxIHx8IGFyZ3MubGVuZ3RoID09PSAyICYmIHR5cGVvZiBhcmdzWzFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgdm9sdW1lLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdm9sdW1lLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHZvbHVtZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAndm9sdW1lJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHZvbHVtZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgICBpZiAoIWFyZ3NbMl0pIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gdm9sICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCd2b2x1bWUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl92b2x1bWUgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmFkZSBhIGN1cnJlbnRseSBwbGF5aW5nIHNvdW5kIGJldHdlZW4gdHdvIHZvbHVtZXMgKGlmIG5vIGlkIGlzIHBhc3NzZWQsIGFsbCBzb3VuZHMgd2lsbCBmYWRlKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCAob21pdCB0byBmYWRlIGFsbCBzb3VuZHMpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgZmFkZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxlbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoZnJvbSAtIHRvKTtcbiAgICAgIHZhciBkaXIgPSBmcm9tID4gdG8gPyAnb3V0JyA6ICdpbic7XG4gICAgICB2YXIgc3RlcHMgPSBkaWZmIC8gMC4wMTtcbiAgICAgIHZhciBzdGVwTGVuID0gKHN0ZXBzID4gMCkgPyBsZW4gLyBzdGVwcyA6IGxlbjtcblxuICAgICAgLy8gU2luY2UgYnJvd3NlcnMgY2xhbXAgdGltZW91dHMgdG8gNG1zLCB3ZSBuZWVkIHRvIGNsYW1wIG91ciBzdGVwcyB0byB0aGF0IHRvby5cbiAgICAgIGlmIChzdGVwTGVuIDwgNCkge1xuICAgICAgICBzdGVwcyA9IE1hdGguY2VpbChzdGVwcyAvICg0IC8gc3RlcExlbikpO1xuICAgICAgICBzdGVwTGVuID0gNDtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBmYWRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdmYWRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5mYWRlKGZyb20sIHRvLCBsZW4sIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGhlIHZvbHVtZSB0byB0aGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICBzZWxmLnZvbHVtZShmcm9tLCBpZCk7XG5cbiAgICAgIC8vIEZhZGUgdGhlIHZvbHVtZSBvZiBvbmUgb3IgYWxsIHNvdW5kcy5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGxpbmVhciBmYWRlIG9yIGZhbGwgYmFjayB0byB0aW1lb3V0cyB3aXRoIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwcmV2aW91cyBmYWRlIGlmIG5vIHNwcml0ZSBpcyBiZWluZyB1c2VkIChvdGhlcndpc2UsIHZvbHVtZSBoYW5kbGVzIHRoaXMpLlxuICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbywgbGV0IHRoZSBuYXRpdmUgbWV0aG9kcyBkbyB0aGUgYWN0dWFsIGZhZGUuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG4gICAgICAgICAgICB2YXIgZW5kID0gY3VycmVudFRpbWUgKyAobGVuIC8gMTAwMCk7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gZnJvbTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoZnJvbSwgY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0bywgZW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdm9sID0gZnJvbTtcbiAgICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbihzb3VuZElkLCBzb3VuZCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgYW1vdW50LCBidXQgb25seSBpZiB0aGUgdm9sdW1lIHNob3VsZCBjaGFuZ2UuXG4gICAgICAgICAgICBpZiAoc3RlcHMgPiAwKSB7XG4gICAgICAgICAgICAgIHZvbCArPSAoZGlyID09PSAnaW4nID8gMC4wMSA6IC0wLjAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB2b2x1bWUgaXMgaW4gdGhlIHJpZ2h0IGJvdW5kcy5cbiAgICAgICAgICAgIHZvbCA9IE1hdGgubWF4KDAsIHZvbCk7XG4gICAgICAgICAgICB2b2wgPSBNYXRoLm1pbigxLCB2b2wpO1xuXG4gICAgICAgICAgICAvLyBSb3VuZCB0byB3aXRoaW4gMiBkZWNpbWFsIHBvaW50cy5cbiAgICAgICAgICAgIHZvbCA9IE1hdGgucm91bmQodm9sICogMTAwKSAvIDEwMDtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSB2b2x1bWUuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZElkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgZmFkZSBpcyBjb21wbGV0ZSwgc3RvcCBpdCBhbmQgZmlyZSBldmVudC5cbiAgICAgICAgICAgIGlmICh2b2wgPT09IHRvKSB7XG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZElkKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIHNvdW5kSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0uYmluZChzZWxmLCBpZHNbaV0sIHNvdW5kKSwgc3RlcExlbik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IHN0b3BzIHRoZSBjdXJyZW50bHkgcGxheWluZyBmYWRlIHdoZW5cbiAgICAgKiBhIG5ldyBmYWRlIHN0YXJ0cywgdm9sdW1lIGlzIGNoYW5nZWQgb3IgdGhlIHNvdW5kIGlzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfc3RvcEZhZGU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQgJiYgc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgaWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgbG9vcCBwYXJhbWV0ZXIgb24gYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgbG9vcCgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AobG9vcCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBmb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICBsb29wKGxvb3AsIGlkKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL0Jvb2xlYW59IFJldHVybnMgc2VsZiBvciBjdXJyZW50IGxvb3AgdmFsdWUuXG4gICAgICovXG4gICAgbG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBsb29wLCBpZCwgc291bmQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGZvciBsb29wIGFuZCBpZC5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGdyb3UncyBsb29wIHZhbHVlLlxuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgICBzZWxmLl9sb29wID0gbG9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIGxvb3AgdmFsdWUuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fbG9vcCA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbG9vcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbG9vcCA9IGxvb3A7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBsb29wO1xuICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICByYXRlKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgcmF0ZShyYXRlLCBpZCkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqL1xuICAgIHJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgcmF0ZSwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcmF0ZSBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgcmF0ZSB2YWx1ZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAncmF0ZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnJhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBvdXIgcG9zaXRpb24gd2hlbiB0aGUgcmF0ZSBjaGFuZ2VkIGFuZCB1cGRhdGUgdGhlIHBsYXliYWNrXG4gICAgICAgICAgICAvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXG4gICAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IHNlbGYuX3dlYkF1ZGlvID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSA6IHNvdW5kLl9wbGF5U3RhcnQ7XG4gICAgICAgICAgICBzb3VuZC5fcmF0ZSA9IHJhdGU7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZSA9IHJhdGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBsYXliYWNrUmF0ZSA9IHJhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0aW1lcnMuXG4gICAgICAgICAgICB2YXIgc2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAoKHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWs7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAgICAgICAvLyBTdGFydCBhIG5ldyBlbmQgdGltZXIgaWYgc291bmQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gfHwgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZFtpXSk7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgncmF0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9yYXRlIDogc2VsZi5fcmF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHNlZWsgcG9zaXRpb24gb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgc2VlaygpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoc2VlaykgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc291bmQgbm9kZS5cbiAgICAgKiAgIHNlZWsoc2VlaywgaWQpIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBzZWVrOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHNlZWssIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyBzZWVrIHBvc2l0aW9uLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc2VlayB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc2VlaycsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Vlay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XG4gICAgICAgICAgLy8gUGF1c2UgdGhlIHNvdW5kIGFuZCB1cGRhdGUgcG9zaXRpb24gZm9yIHJlc3RhcnRpbmcgcGxheWJhY2suXG4gICAgICAgICAgdmFyIHBsYXlpbmcgPSBzZWxmLnBsYXlpbmcoaWQpO1xuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdHJhY2sgYW5kIGNhbmNlbCB0aW1lci5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZCk7XG5cbiAgICAgICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBpZiB0aGUgc291bmQgd2FzIHBsYXlpbmcuXG4gICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShpZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWVrIHBvc2l0aW9uIGZvciBIVE1MNSBBdWRpby5cbiAgICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnc2VlaycsIGlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHZhciByZWFsVGltZSA9IHNlbGYucGxheWluZyhpZCkgPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIC0gc291bmQuX3BsYXlTdGFydCA6IDA7XG4gICAgICAgICAgICB2YXIgcmF0ZVNlZWsgPSBzb3VuZC5fcmF0ZVNlZWsgPyBzb3VuZC5fcmF0ZVNlZWsgLSBzb3VuZC5fc2VlayA6IDA7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX3NlZWsgKyAocmF0ZVNlZWsgKyByZWFsVGltZSAqIE1hdGguYWJzKHNvdW5kLl9yYXRlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgc3BlY2lmaWMgc291bmQgaXMgY3VycmVudGx5IHBsYXlpbmcgb3Igbm90IChpZiBpZCBpcyBwcm92aWRlZCksIG9yIGNoZWNrIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgc291bmRzIGluIHRoZSBncm91cCBpcyBwbGF5aW5nIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCB0aGUgd2hvbGUgc291bmQgZ3JvdXAgaXMgY2hlY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHBsYXlpbmcgYW5kIGZhbHNlIGlmIG5vdC5cbiAgICAgKi9cbiAgICBwbGF5aW5nOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBDaGVjayB0aGUgcGFzc2VkIHNvdW5kIElEIChpZiBhbnkpLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gIXNvdW5kLl9wYXVzZWQgOiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlLCBsb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hlY2sgaWYgYW55IGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIG9mIHRoaXMgc291bmQuIFBhc3NpbmcgYSBzb3VuZCBpZCB3aWxsIHJldHVybiB0aGUgc3ByaXRlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgcmV0dXJuIGZ1bGwgc291cmNlIGR1cmF0aW9uLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQXVkaW8gZHVyYXRpb24gaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBkdXJhdGlvbjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBkdXJhdGlvbiA9IHNlbGYuX2R1cmF0aW9uO1xuXG4gICAgICAvLyBJZiB3ZSBwYXNzIGFuIElELCBnZXQgdGhlIHNvdW5kIGFuZCByZXR1cm4gdGhlIHNwcml0ZSBsZW5ndGguXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGR1cmF0aW9uID0gc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdIC8gMTAwMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGR1cmF0aW9uO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGxvYWRlZCBzdGF0ZSBvZiB0aGlzIEhvd2wuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSAndW5sb2FkZWQnLCAnbG9hZGluZycsICdsb2FkZWQnXG4gICAgICovXG4gICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgdGhlIGN1cnJlbnQgSG93bCBvYmplY3QuXG4gICAgICogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IHN0b3AgYWxsIHNvdW5kIGluc3RhbmNlcyBhdHRhY2hlZCB0byB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFN0b3AgcGxheWluZyBhbnkgYWN0aXZlIHNvdW5kcy5cbiAgICAgIHZhciBzb3VuZHMgPSBzZWxmLl9zb3VuZHM7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8c291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIFN0b3AgdGhlIHNvdW5kIGlmIGl0IGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAgICAgICBpZiAoIXNvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgc2VsZi5zdG9wKHNvdW5kc1tpXS5faWQpO1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2VuZCcsIHNvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBzb3VyY2Ugb3IgZGlzY29ubmVjdC5cbiAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIFNldCB0aGUgc291cmNlIHRvIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcuXG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnNyYyA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpUUFBQUJYUVZaRlptMTBJQkFBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBWkdGMFlRQUFBQUE9JztcblxuICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNvdW5kc1tpXS5fZXJyb3JGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzb3VuZHNbaV0uX2xvYWRGbiwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW1wdHkgb3V0IGFsbCBvZiB0aGUgbm9kZXMuXG4gICAgICAgIGRlbGV0ZSBzb3VuZHNbaV0uX25vZGU7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCB0aW1lcnMgYXJlIGNsZWFyZWQgb3V0LlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kc1tpXS5faWQpO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlcyBpbiB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBIb3dsZXIuX2hvd2xzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjKSB7XG4gICAgICAgICAgcmVtQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FjaGUgJiYgcmVtQ2FjaGUpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGdsb2JhbCBlcnJvcnMuXG4gICAgICBIb3dsZXIubm9BdWRpbyA9IGZhbHNlO1xuXG4gICAgICAvLyBDbGVhciBvdXQgYHNlbGZgLlxuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmID0gbnVsbDtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIG9uY2UgIChJTlRFUk5BTCkgTWFya3MgZXZlbnQgdG8gZmlyZSBvbmx5IG9uY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCwgb25jZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnRzLnB1c2gob25jZSA/IHtpZDogaWQsIGZuOiBmbiwgb25jZTogb25jZX0gOiB7aWQ6IGlkLCBmbjogZm59KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGN1c3RvbSBldmVudC4gQ2FsbCB3aXRob3V0IHBhcmFtZXRlcnMgdG8gcmVtb3ZlIGFsbCBldmVudHMuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIHJlbW92ZS4gTGVhdmUgZW1wdHkgdG8gcmVtb3ZlIGFsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IHJlbW92ZSBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCByZW1vdmUgdGhlIHBhc3NlZCBmdW5jdGlvbi5cbiAgICAgICAgZm9yIChpPTA7IGk8ZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGZuID09PSBldmVudHNbaV0uZm4gJiYgaWQgPT09IGV2ZW50c1tpXS5pZCkge1xuICAgICAgICAgICAgZXZlbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudCkge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiB0aGlzIHR5cGUuXG4gICAgICAgIHNlbGZbJ19vbicgKyBldmVudF0gPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIGV2ZXJ5IHR5cGUuXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZik7XG4gICAgICAgIGZvciAoaT0wOyBpPGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoKGtleXNbaV0uaW5kZXhPZignX29uJykgPT09IDApICYmIEFycmF5LmlzQXJyYXkoc2VsZltrZXlzW2ldXSkpIHtcbiAgICAgICAgICAgIHNlbGZba2V5c1tpXV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudCBhbmQgcmVtb3ZlIGl0IG9uY2UgZmlyZWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb25jZTogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLm9uKGV2ZW50LCBmbiwgaWQsIDEpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRW1pdCBhbGwgZXZlbnRzIG9mIGEgc3BlY2lmaWMgdHlwZSBhbmQgcGFzcyB0aGUgc291bmQgaWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgU291bmQgSUQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBtc2cgICBNZXNzYWdlIHRvIGdvIHdpdGggZXZlbnQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW1pdDogZnVuY3Rpb24oZXZlbnQsIGlkLCBtc2cpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIGZpcmUgYWxsIGZ1bmN0aW9ucy5cbiAgICAgIGZvciAodmFyIGk9ZXZlbnRzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKCFldmVudHNbaV0uaWQgfHwgZXZlbnRzW2ldLmlkID09PSBpZCB8fCBldmVudCA9PT0gJ2xvYWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiwgZXZlbnRzW2ldLmZuKSwgMCk7XG5cbiAgICAgICAgICAvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChldmVudHNbaV0ub25jZSkge1xuICAgICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIGV2ZW50c1tpXS5mbiwgZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFF1ZXVlIG9mIGFjdGlvbnMgaW5pdGlhdGVkIGJlZm9yZSB0aGUgc291bmQgaGFzIGxvYWRlZC5cbiAgICAgKiBUaGVzZSB3aWxsIGJlIGNhbGxlZCBpbiBzZXF1ZW5jZSwgd2l0aCB0aGUgbmV4dCBvbmx5IGZpcmluZ1xuICAgICAqIGFmdGVyIHRoZSBwcmV2aW91cyBoYXMgZmluaXNoZWQgZXhlY3V0aW5nIChldmVuIGlmIGFzeW5jIGxpa2UgcGxheSkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfbG9hZFF1ZXVlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHRhc2sgPSBzZWxmLl9xdWV1ZVswXTtcblxuICAgICAgICAvLyBkb24ndCBtb3ZlIG9udG8gdGhlIG5leHQgdGFzayB1bnRpbCB0aGlzIG9uZSBpcyBkb25lXG4gICAgICAgIHNlbGYub25jZSh0YXNrLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0YXNrLmFjdGlvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBwbGF5YmFjayBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbmRlZDogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlO1xuXG4gICAgICAvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xuICAgICAgdmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmQuX2lkKTtcblxuICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXN0YXJ0IHRoaXMgdGltZXIgaWYgb24gYSBXZWIgQXVkaW8gbG9vcC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICB2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmsgdGhlIG5vZGUgYXMgcGF1c2VkLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxuICAgICAgICBIb3dsZXIuX2F1dG9TdXNwZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdXNpbmcgYSBzcHJpdGUsIGVuZCB0aGUgdHJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGVuZCB0aW1lciBmb3IgYSBzb3VuZCBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhclRpbWVyOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkXSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZW5kVGltZXJzW2lkXSk7XG4gICAgICAgIGRlbGV0ZSBzZWxmLl9lbmRUaW1lcnNbaWRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzb3VuZCBpZGVudGlmaWVkIGJ5IHRoaXMgSUQsIG9yIHJldHVybiBudWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIFNvdW5kIG9iamVjdCBvciBudWxsLlxuICAgICAqL1xuICAgIF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaWQgPT09IHNlbGYuX3NvdW5kc1tpXS5faWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW5hY3RpdmUgc291bmQgZnJvbSB0aGUgcG9vbCBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfSBTb3VuZCBwbGF5YmFjayBvYmplY3QuXG4gICAgICovXG4gICAgX2luYWN0aXZlU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLl9kcmFpbigpO1xuXG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgcmV0dXJuIG5ldyBTb3VuZChzZWxmKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRHJhaW4gZXhjZXNzIGluYWN0aXZlIHNvdW5kcyBmcm9tIHRoZSBwb29sLlxuICAgICAqL1xuICAgIF9kcmFpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xuICAgICAgdmFyIGNudCA9IDA7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBsZXNzIHNvdW5kcyB0aGFuIHRoZSBtYXggcG9vbCBzaXplLCB3ZSBhcmUgZG9uZS5cbiAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChpPXNlbGYuX3NvdW5kcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKGNudCA8PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzZWxmLl9zb3VuZHNbaV0uX25vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3NvdW5kc1tpXS5fbm9kZS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBzb3VuZHMgdW50aWwgd2UgaGF2ZSB0aGUgcG9vbCBzaXplLlxuICAgICAgICAgIHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgY250LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBJRCdzIGZyb20gdGhlIHNvdW5kcyBwb29sLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgT25seSByZXR1cm4gb25lIElEIGlmIG9uZSBpcyBwYXNzZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cbiAgICAgKi9cbiAgICBfZ2V0U291bmRJZHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlkcy5wdXNoKHNlbGYuX3NvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbaWRdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSA9IEhvd2xlci5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gY2FjaGVbc2VsZi5fc3JjXTtcblxuICAgICAgLy8gQ29ubmVjdCB0byB0aGUgY29ycmVjdCBub2RlLlxuICAgICAgaWYgKHNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGxvb3BpbmcgYW5kIHBsYXliYWNrIHJhdGUuXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xuICAgICAgaWYgKHNvdW5kLl9sb29wKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcbiAgICAgIH1cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgbWVtb3J5IGxlYWtzIGJ5IGNsZWFuaW5nIHVwIHRoZSBidWZmZXIgc291cmNlIGFmdGVyIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBTb3VuZCdzIGF1ZGlvIG5vZGUgY29udGFpbmluZyB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhbkJ1ZmZlcjogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fc2NyYXRjaEJ1ZmZlcikge1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5vbmVuZGVkID0gbnVsbDtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2UuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgdHJ5IHsgbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjsgfSBjYXRjaChlKSB7fVxuICAgICAgfVxuICAgICAgbm9kZS5idWZmZXJTb3VyY2UgPSBudWxsO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc291bmQgb2JqZWN0LCB3aGljaCBlYWNoIG5vZGUgYXR0YWNoZWQgdG8gYSBIb3dsIGdyb3VwIGlzIGNvbnRhaW5lZCBpbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGhvd2wgVGhlIEhvd2wgcGFyZW50IGdyb3VwLlxuICAgKi9cbiAgdmFyIFNvdW5kID0gZnVuY3Rpb24oaG93bCkge1xuICAgIHRoaXMuX3BhcmVudCA9IGhvd2w7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIFNvdW5kLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IFNvdW5kIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIElEIGZvciB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgKiBNYXRoLnJhbmRvbSgpKTtcblxuICAgICAgLy8gQWRkIGl0c2VsZiB0byB0aGUgcGFyZW50J3MgcG9vbC5cbiAgICAgIHBhcmVudC5fc291bmRzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IG5vZGUuXG4gICAgICBzZWxmLmNyZWF0ZSgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBzZXR1cCBhIG5ldyBzb3VuZCBvYmplY3QsIHdoZXRoZXIgSFRNTDUgQXVkaW8gb3IgV2ViIEF1ZGlvLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuICAgICAgdmFyIHZvbHVtZSA9IChIb3dsZXIuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IHNlbGYuX3BhcmVudC5fbXV0ZWQpID8gMCA6IHNlbGYuX3ZvbHVtZTtcblxuICAgICAgaWYgKHBhcmVudC5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBnYWluIG5vZGUgZm9yIGNvbnRyb2xsaW5nIHZvbHVtZSAodGhlIHNvdXJjZSB3aWxsIGNvbm5lY3QgdG8gdGhpcykuXG4gICAgICAgIHNlbGYuX25vZGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHNlbGYuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzZWxmLl9ub2RlLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIHNlbGYuX25vZGUuY29ubmVjdChIb3dsZXIubWFzdGVyR2Fpbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLl9ub2RlID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxuICAgICAgICBzZWxmLl9lcnJvckZuID0gc2VsZi5fZXJyb3JMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCB0byBsZXQgdXMga25vdyB0aGUgc291bmQgaXMgcmVhZHkuXG4gICAgICAgIHNlbGYuX2xvYWRGbiA9IHNlbGYuX2xvYWRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBuZXcgYXVkaW8gbm9kZS5cbiAgICAgICAgc2VsZi5fbm9kZS5zcmMgPSBwYXJlbnQuX3NyYztcbiAgICAgICAgc2VsZi5fbm9kZS5wcmVsb2FkID0gJ2F1dG8nO1xuICAgICAgICBzZWxmLl9ub2RlLnZvbHVtZSA9IHZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcblxuICAgICAgICAvLyBCZWdpbiBsb2FkaW5nIHRoZSBzb3VyY2UuXG4gICAgICAgIHNlbGYuX25vZGUubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZCB0byB0aGUgb3JpZ2luYWwgc3RhdGUgKGZvciByZWN5Y2xlKS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3JhdGVTZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgc28gdGhhdCBpdCBpc24ndCBjb25mdXNlZCB3aXRoIHRoZSBwcmV2aW91cyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gTWF0aC5yb3VuZChEYXRlLm5vdygpICogTWF0aC5yYW5kb20oKSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlcnJvciBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZXJyb3JMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIEZpcmUgYW4gZXJyb3IgZXZlbnQgYW5kIHBhc3MgYmFjayB0aGUgY29kZS5cbiAgICAgIHNlbGYuX3BhcmVudC5fZW1pdCgnbG9hZGVycm9yJywgc2VsZi5faWQsIHNlbGYuX25vZGUuZXJyb3IgPyBzZWxmLl9ub2RlLmVycm9yLmNvZGUgOiAwKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yTGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gY2FucGxheXRocm91Z2ggbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2xvYWRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgICBpZiAoT2JqZWN0LmtleXMocGFyZW50Ll9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBwYXJlbnQuX2R1cmF0aW9uICogMTAwMF19O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Ll9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgcGFyZW50Ll9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICBwYXJlbnQuX2VtaXQoJ2xvYWQnKTtcbiAgICAgICAgcGFyZW50Ll9sb2FkUXVldWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBCdWZmZXIgYSBzb3VuZCBmcm9tIFVSTCwgRGF0YSBVUkkgb3IgY2FjaGUgYW5kIGRlY29kZSB0byBhdWRpbyBzb3VyY2UgKFdlYiBBdWRpbyBBUEkpLlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqL1xuICB2YXIgbG9hZEJ1ZmZlciA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICB2YXIgdXJsID0gc2VsZi5fc3JjO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIGNhY2hlZCBhbmQgdXNlIGl0IGluc3RlYWQuXG4gICAgaWYgKGNhY2hlW3VybF0pIHtcbiAgICAgIC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGNhY2hlW3VybF0uZHVyYXRpb247XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxuICAgICAgbG9hZFNvdW5kKHNlbGYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcbiAgICAgIC8vIERlY29kZSB0aGUgYmFzZTY0IGRhdGEgVVJJIHdpdGhvdXQgWEhSLCBzaW5jZSBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICB2YXIgZGF0YSA9IGF0b2IodXJsLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGF0YVZpZXdbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG5cbiAgICAgIGRlY29kZUF1ZGlvRGF0YShkYXRhVmlldy5idWZmZXIsIHNlbGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGdldCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgYmFjay5cbiAgICAgICAgdmFyIGNvZGUgPSAoeGhyLnN0YXR1cyArICcnKVswXTtcbiAgICAgICAgaWYgKGNvZGUgIT09ICcwJyAmJiBjb2RlICE9PSAnMicgJiYgY29kZSAhPT0gJzMnKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0ZhaWxlZCBsb2FkaW5nIGF1ZGlvIGZpbGUgd2l0aCBzdGF0dXM6ICcgKyB4aHIuc3RhdHVzICsgJy4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkZWNvZGVBdWRpb0RhdGEoeGhyLnJlc3BvbnNlLCBzZWxmKTtcbiAgICAgIH07XG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciwgc3dpdGNoIHRvIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgICAgICBkZWxldGUgY2FjaGVbdXJsXTtcbiAgICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNhZmVYaHJTZW5kKHhocik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kIHRoZSBYSFIgcmVxdWVzdCB3cmFwcGVkIGluIGEgdHJ5L2NhdGNoLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHhociBYSFIgdG8gc2VuZC5cbiAgICovXG4gIHZhciBzYWZlWGhyU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuICAgIHRyeSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHhoci5vbmVycm9yKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWNvZGUgYXVkaW8gZGF0YSBmcm9tIGFuIGFycmF5IGJ1ZmZlci5cbiAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGFycmF5YnVmZmVyIFRoZSBhdWRpbyBkYXRhLlxuICAgKiBAcGFyYW0gIHtIb3dsfSAgICAgICAgc2VsZlxuICAgKi9cbiAgdmFyIGRlY29kZUF1ZGlvRGF0YSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyLCBzZWxmKSB7XG4gICAgLy8gRGVjb2RlIHRoZSBidWZmZXIgaW50byBhbiBhdWRpbyBzb3VyY2UuXG4gICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIsIGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgaWYgKGJ1ZmZlciAmJiBzZWxmLl9zb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjYWNoZVtzZWxmLl9zcmNdID0gYnVmZmVyO1xuICAgICAgICBsb2FkU291bmQoc2VsZiwgYnVmZmVyKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdEZWNvZGluZyBhdWRpbyBkYXRhIGZhaWxlZC4nKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU291bmQgaXMgbm93IGxvYWRlZCwgc28gZmluaXNoIHNldHRpbmcgZXZlcnl0aGluZyB1cCBhbmQgZmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqIEBwYXJhbSAge09iamVjdH0gYnVmZmVyIFRoZSBkZWNvZGVkIGJ1ZmZlciBzb3VuZCBzb3VyY2UuXG4gICAqL1xuICB2YXIgbG9hZFNvdW5kID0gZnVuY3Rpb24oc2VsZiwgYnVmZmVyKSB7XG4gICAgLy8gU2V0IHRoZSBkdXJhdGlvbi5cbiAgICBpZiAoYnVmZmVyICYmICFzZWxmLl9kdXJhdGlvbikge1xuICAgICAgc2VsZi5fZHVyYXRpb24gPSBidWZmZXIuZHVyYXRpb247XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgIGlmIChPYmplY3Qua2V5cyhzZWxmLl9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2VsZi5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHNlbGYuX2R1cmF0aW9uICogMTAwMF19O1xuICAgIH1cblxuICAgIC8vIEZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZCcpO1xuICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgYXVkaW8gY29udGV4dCB3aGVuIGF2YWlsYWJsZSwgb3Igc3dpdGNoIHRvIEhUTUw1IEF1ZGlvIG1vZGUuXG4gICAqL1xuICB2YXIgc2V0dXBBdWRpb0NvbnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBDaGVjayBpZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvIGFuZCBzZXR1cCB0aGUgQXVkaW9Db250ZXh0IGlmIHdlIGFyZS5cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWJraXRBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhIHdlYnZpZXcgaXMgYmVpbmcgdXNlZCBvbiBpT1M4IG9yIGVhcmxpZXIgKHJhdGhlciB0aGFuIHRoZSBicm93c2VyKS5cbiAgICAvLyBJZiBpdCBpcywgZGlzYWJsZSBXZWIgQXVkaW8gYXMgaXQgY2F1c2VzIGNyYXNoaW5nLlxuICAgIHZhciBpT1MgPSAoL2lQKGhvbmV8b2R8YWQpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnBsYXRmb3JtKSk7XG4gICAgdmFyIGFwcFZlcnNpb24gPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XG4gICAgdmFyIHZlcnNpb24gPSBhcHBWZXJzaW9uID8gcGFyc2VJbnQoYXBwVmVyc2lvblsxXSwgMTApIDogbnVsbDtcbiAgICBpZiAoaU9TICYmIHZlcnNpb24gJiYgdmVyc2lvbiA8IDkpIHtcbiAgICAgIHZhciBzYWZhcmkgPSAvc2FmYXJpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5zdGFuZGFsb25lICYmICFzYWZhcmkgfHwgSG93bGVyLl9uYXZpZ2F0b3IgJiYgIUhvd2xlci5fbmF2aWdhdG9yLnN0YW5kYWxvbmUgJiYgIXNhZmFyaSkge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgZXhwb3NlIHRoZSBtYXN0ZXIgR2Fpbk5vZGUgd2hlbiB1c2luZyBXZWIgQXVkaW8gKHVzZWZ1bCBmb3IgcGx1Z2lucyBvciBhZHZhbmNlZCB1c2FnZSkuXG4gICAgaWYgKEhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICBIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmdhaW4udmFsdWUgPSAxO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uY29ubmVjdChIb3dsZXIuY3R4LmRlc3RpbmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZS1ydW4gdGhlIHNldHVwIG9uIEhvd2xlci5cbiAgICBIb3dsZXIuX3NldHVwKCk7XG4gIH07XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uKSBsaWJyYXJpZXMgc3VjaCBhcyByZXF1aXJlLmpzLlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIEhvd2xlcjogSG93bGVyLFxuICAgICAgICBIb3dsOiBIb3dsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTIGxpYnJhcmllcyBzdWNoIGFzIGJyb3dzZXJpZnkuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkhvd2xlciA9IEhvd2xlcjtcbiAgICBleHBvcnRzLkhvd2wgPSBIb3dsO1xuICB9XG5cbiAgLy8gRGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgdW51c2VkLlxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgd2luZG93Lkhvd2wgPSBIb3dsO1xuICAgIHdpbmRvdy5Tb3VuZCA9IFNvdW5kO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7IC8vIEFkZCB0byBnbG9iYWwgaW4gTm9kZS5qcyAoZm9yIHRlc3RpbmcsIGV0YykuXG4gICAgZ2xvYmFsLkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICBnbG9iYWwuSG93bGVyID0gSG93bGVyO1xuICAgIGdsb2JhbC5Ib3dsID0gSG93bDtcbiAgICBnbG9iYWwuU291bmQgPSBTb3VuZDtcbiAgfVxufSkoKTtcblxuXG4vKiFcbiAqICBTcGF0aWFsIFBsdWdpbiAtIEFkZHMgc3VwcG9ydCBmb3Igc3RlcmVvIGFuZCAzRCBhdWRpbyB3aGVyZSBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkLlxuICogIFxuICogIGhvd2xlci5qcyB2Mi4wLjJcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAxNiwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU2V0dXAgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9wb3MgPSBbMCwgMCwgMF07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX29yaWVudGF0aW9uID0gWzAsIDAsIC0xLCAwLCAxLCAwXTtcbiAgXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byB1cGRhdGUgdGhlIHN0ZXJlbyBwYW5uaW5nIHBvc2l0aW9uIG9mIGFsbCBjdXJyZW50IEhvd2xzLlxuICAgKiBGdXR1cmUgSG93bHMgd2lsbCBub3QgdXNlIHRoaXMgdmFsdWUgdW5sZXNzIGV4cGxpY2l0bHkgc2V0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvTnVtYmVyfSAgICAgU2VsZiBvciBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgdXBkYXRlIHRoZWlyIHN0ZXJlbyBwYW5uaW5nLlxuICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgc2VsZi5faG93bHNbaV0uc3RlcmVvKHBhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciBpbiAzRCBjYXJ0ZXNpYW4gc3BhY2UuIFNvdW5kcyB1c2luZ1xuICAgKiAzRCBwb3NpdGlvbiB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBsaXN0ZW5lcidzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggVGhlIHgtcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgVGhlIHktcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogVGhlIHotcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgU2VsZiBvciBjdXJyZW50IGxpc3RlbmVyIHBvc2l0aW9uLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1syXSA6IHo7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG4gICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRQb3NpdGlvbihzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIHNwYWNlLlxuICAgKiBBIGZyb250IGFuZCB1cCB2ZWN0b3IgbXVzdCBiZSBwcm92aWRlZC4gVGhlIGZyb250IGlzIHRoZSBkaXJlY3Rpb24gdGhlXG4gICAqIGZhY2Ugb2YgdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nLCBhbmQgdXAgaXMgdGhlIGRpcmVjdGlvbiB0aGUgdG9wIG9mIHRoZVxuICAgKiBsaXN0ZW5lciBpcyBwb2ludGluZy4gVGh1cywgdGhlc2UgdmFsdWVzIGFyZSBleHBlY3RlZCB0byBiZSBhdCByaWdodCBhbmdsZXNcbiAgICogZnJvbSBlYWNoIG90aGVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHhVcCBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5VXAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0gelVwIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdmVjdG9ycy5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB2YXIgb3IgPSBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBvclsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gb3JbMl0gOiB6O1xuICAgIHhVcCA9ICh0eXBlb2YgeFVwICE9PSAnbnVtYmVyJykgPyBvclszXSA6IHhVcDtcbiAgICB5VXAgPSAodHlwZW9mIHlVcCAhPT0gJ251bWJlcicpID8gb3JbNF0gOiB5VXA7XG4gICAgelVwID0gKHR5cGVvZiB6VXAgIT09ICdudW1iZXInKSA/IG9yWzVdIDogelVwO1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgeiwgeFVwLCB5VXAsIHpVcF07XG4gICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9yO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBvLm9yaWVudGF0aW9uIHx8IFsxLCAwLCAwXTtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IG8uc3RlcmVvIHx8IG51bGw7XG4gICAgICBzZWxmLl9wb3MgPSBvLnBvcyB8fCBudWxsO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IDAsXG4gICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogJ2ludmVyc2UnLFxuICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IDEwMDAwLFxuICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6ICdIUlRGJyxcbiAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiAxLFxuICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IDFcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uc3RlcmVvID0gby5vbnN0ZXJlbyA/IFt7Zm46IG8ub25zdGVyZW99XSA6IFtdO1xuICAgICAgc2VsZi5fb25wb3MgPSBvLm9ucG9zID8gW3tmbjogby5vbnBvc31dIDogW107XG4gICAgICBzZWxmLl9vbm9yaWVudGF0aW9uID0gby5vbm9yaWVudGF0aW9uID8gW3tmbjogby5vbm9yaWVudGF0aW9ufV0gOiBbXTtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvKTtcbiAgICB9O1xuICB9KShIb3dsLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgc3RlcmVvIHBhbm5pbmcgb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBhbGwgaW4gdGhlIGdyb3VwLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiAgQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4sIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugc3RlcmVvIHBhbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnc3RlcmVvJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0ZXJlbyhwYW4sIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBQYW5uZXJTdGVyZW9Ob2RlIHN1cHBvcnQgYW5kIGZhbGxiYWNrIHRvIFBhbm5lck5vZGUgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICB2YXIgcGFubmVyVHlwZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIgPT09ICd1bmRlZmluZWQnKSA/ICdzcGF0aWFsJyA6ICdzdGVyZW8nO1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgc2VsZi5fcG9zID0gW3BhbiwgMCwgMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fc3RlcmVvO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3RyZW8gcGFubmluZyBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9zdGVyZW8gPSBwYW47XG4gICAgICAgICAgc291bmQuX3BvcyA9IFtwYW4sIDAsIDBdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZmFsbGluZyBiYWNrLCBtYWtlIHN1cmUgdGhlIHBhbm5pbmdNb2RlbCBpcyBlcXVhbHBvd2VyLlxuICAgICAgICAgICAgc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsID0gJ2VxdWFscG93ZXInO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgIXNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCBwYW5uZXJUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbm5lclR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHBhbiwgMCwgMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBhbi52YWx1ZSA9IHBhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdzdGVyZW8nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fc3RlcmVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIDNEIHNwYXRpYWwgcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvclxuICAgKiBhbGwgaW4gdGhlIGdyb3VwLiBUaGUgbW9zdCBjb21tb24gdXNhZ2UgaXMgdG8gc2V0IHRoZSAneCcgcG9zaXRpb24gZm9yXG4gICAqIGxlZnQvcmlnaHQgcGFubmluZy4gU2V0dGluZyBhbnkgdmFsdWUgaGlnaGVyIHRoYW4gMS4wIHdpbGwgYmVnaW4gdG9cbiAgICogZGVjcmVhc2UgdGhlIHZvbHVtZSBvZiB0aGUgc291bmQgYXMgaXQgbW92ZXMgZnVydGhlciBhd2F5LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgcG9zaXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcG9zaXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3BvcycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5wb3MoeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IDAgOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IC0wLjUgOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgcG9zaXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8IHNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHgsIHksIHopO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BvcycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9wb3M7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBhdWRpbyBzb3VyY2UgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBjb29yZGluYXRlXG4gICAqIHNwYWNlLiBEZXBlbmRpbmcgb24gaG93IGRpcmVjdGlvbiB0aGUgc291bmQgaXMsIGJhc2VkIG9uIHRoZSBgY29uZWAgYXR0cmlidXRlcyxcbiAgICogYSBzb3VuZCBwb2ludGluZyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyIGNhbiBiZSBxdWlldCBvciBzaWxlbnQuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBvcmllbnRhdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIG9yaWVudGF0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdvcmllbnRhdGlvbicsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5vcmllbnRhdGlvbih4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzJdIDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX29yaWVudGF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBvcmllbnRhdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lcikge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnb3JpZW50YXRpb24nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fb3JpZW50YXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcGFubmVyIG5vZGUncyBhdHRyaWJ1dGVzIGZvciBhIHNvdW5kIG9yIGdyb3VwIG9mIHNvdW5kcy5cbiAgICogVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbCB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAqICAgcGFubmVyQXR0cigpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIobykgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICogICBwYW5uZXJBdHRyKG8sIGlkKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICpcbiAgICogICBBdHRyaWJ1dGVzOlxuICAgKiAgICAgY29uZUlubmVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIFRoZXJlIHdpbGwgYmUgbm8gdm9sdW1lIHJlZHVjdGlvbiBpbnNpZGUgdGhpcyBhbmdsZS5cbiAgICogICAgIGNvbmVPdXRlckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBUaGUgdm9sdW1lIHdpbGwgYmUgcmVkdWNlZCB0byBhIGNvbnN0YW50IHZhbHVlIG9mXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb25lT3V0ZXJHYWluYCBvdXRzaWRlIHRoaXMgYW5nbGUuXG4gICAqICAgICBjb25lT3V0ZXJHYWluIC0gKDAgYnkgZGVmYXVsdCkgVGhlIGFtb3VudCBvZiB2b2x1bWUgcmVkdWN0aW9uIG91dHNpZGUgb2YgYGNvbmVPdXRlckFuZ2xlYC5cbiAgICogICAgIGRpc3RhbmNlTW9kZWwgLSAoJ2ludmVyc2UnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgYWxnb3JpdGhtIHRvIHVzZSB0byByZWR1Y2Ugdm9sdW1lIGFzIGF1ZGlvIG1vdmVzXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGF3YXkgZnJvbSBsaXN0ZW5lci4gQ2FuIGJlIGBsaW5lYXJgLCBgaW52ZXJzZWAgb3IgYGV4cG9uZW50aWFsYC5cbiAgICogICAgIG1heERpc3RhbmNlIC0gKDEwMDAwIGJ5IGRlZmF1bHQpIFZvbHVtZSB3b24ndCByZWR1Y2UgYmV0d2VlbiBzb3VyY2UvbGlzdGVuZXIgYmV5b25kIHRoaXMgZGlzdGFuY2UuXG4gICAqICAgICBwYW5uaW5nTW9kZWwgLSAoJ0hSVEYnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgd2hpY2ggc3BhdGlhbGl6YXRpb24gYWxnb3JpdGhtIGlzIHVzZWQgdG8gcG9zaXRpb24gYXVkaW8uXG4gICAqICAgICAgICAgICAgICAgICAgICAgQ2FuIGJlIGBIUlRGYCBvciBgZXF1YWxwb3dlcmAuXG4gICAqICAgICByZWZEaXN0YW5jZSAtICgxIGJ5IGRlZmF1bHQpIEEgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgdGhlIHNvdXJjZVxuICAgKiAgICAgICAgICAgICAgICAgICAgbW92ZXMgYXdheSBmcm9tIHRoZSBsaXN0ZW5lci5cbiAgICogICAgIHJvbGxvZmZGYWN0b3IgLSAoMSBieSBkZWZhdWx0KSBIb3cgcXVpY2tseSB0aGUgdm9sdW1lIHJlZHVjZXMgYXMgc291cmNlIG1vdmVzIGZyb20gbGlzdGVuZXIuXG4gICAqIFxuICAgKiBAcmV0dXJuIHtIb3dsL09iamVjdH0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGFubmVyIGF0dHJpYnV0ZXMuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wYW5uZXJBdHRyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBvLCBpZCwgc291bmQ7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICByZXR1cm4gc2VsZi5fcGFubmVyQXR0cjtcbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG8gPSBhcmdzWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdSdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHNlbGYuX2NvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBzZWxmLl9jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogc2VsZi5fY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogc2VsZi5fZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogc2VsZi5fbWF4RGlzdGFuY2UsXG4gICAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6IHNlbGYuX3Bhbm5pbmdNb2RlbCxcbiAgICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogc2VsZi5fcmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHNlbGYuX3JvbGxvZmZGYWN0b3JcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcGFubmVyQXR0ciA6IHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgbyA9IGFyZ3NbMF07XG4gICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgc3BlY2lmaWVkIHNvdW5kcy5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IHZhbHVlcyBpbnRvIHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHBhID0gc291bmQuX3Bhbm5lckF0dHI7XG4gICAgICAgIHBhID0ge1xuICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogcGEuY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBwYS5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IHBhLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiBwYS5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogcGEubWF4RGlzdGFuY2UsXG4gICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBwYS5wYW5uaW5nTW9kZWwsXG4gICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiBwYS5yZWZEaXN0YW5jZSxcbiAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHBhLnJvbGxvZmZGYWN0b3JcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHBhbm5lciB2YWx1ZXMgb3IgY3JlYXRlIGEgbmV3IHBhbm5lciBpZiBub25lIGV4aXN0cy5cbiAgICAgICAgdmFyIHBhbm5lciA9IHNvdW5kLl9wYW5uZXI7XG4gICAgICAgIGlmIChwYW5uZXIpIHtcbiAgICAgICAgICBwYW5uZXIuY29uZUlubmVyQW5nbGUgPSBwYS5jb25lSW5uZXJBbmdsZTtcbiAgICAgICAgICBwYW5uZXIuY29uZU91dGVyQW5nbGUgPSBwYS5jb25lT3V0ZXJBbmdsZTtcbiAgICAgICAgICBwYW5uZXIuY29uZU91dGVyR2FpbiA9IHBhLmNvbmVPdXRlckdhaW47XG4gICAgICAgICAgcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBwYS5kaXN0YW5jZU1vZGVsO1xuICAgICAgICAgIHBhbm5lci5tYXhEaXN0YW5jZSA9IHBhLm1heERpc3RhbmNlO1xuICAgICAgICAgIHBhbm5lci5wYW5uaW5nTW9kZWwgPSBwYS5wYW5uaW5nTW9kZWw7XG4gICAgICAgICAgcGFubmVyLnJlZkRpc3RhbmNlID0gcGEucmVmRGlzdGFuY2U7XG4gICAgICAgICAgcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBwYS5yb2xsb2ZmRmFjdG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZS5cbiAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIFNvdW5kIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBTb3VuZCBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSBTb3VuZCdzIGluaXQgZnVuY3Rpb24uXG4gICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBTb3VuZC5yZXNldCBtZXRob2QgdG8gY2xlYW4gdXAgcHJvcGVydGllcyBmcm9tIHRoZSBzcGF0aWFsIHBsdWdpbi5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBTb3VuZCByZXNldCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLnJlc2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBzcGF0aWFsIHBsdWdpbiBwcm9wZXJ0aWVzIG9uIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIHJlc2V0dGluZyBvZiB0aGUgc291bmQuXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLnJlc2V0KTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBhbmQgc2F2ZSBpdCBvbiB0aGUgc291bmQuXG4gICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBTcGVjaWZpYyBzb3VuZCB0byBzZXR1cCBwYW5uaW5nIG9uLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUeXBlIG9mIHBhbm5lciB0byBjcmVhdGU6ICdzdGVyZW8nIG9yICdzcGF0aWFsJy5cbiAgICovXG4gIHZhciBzZXR1cFBhbm5lciA9IGZ1bmN0aW9uKHNvdW5kLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgJ3NwYXRpYWwnO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgcGFubmVyIG5vZGUuXG4gICAgaWYgKHR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZUlubmVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckdhaW4gPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJHYWluO1xuICAgICAgc291bmQuX3Bhbm5lci5kaXN0YW5jZU1vZGVsID0gc291bmQuX3Bhbm5lckF0dHIuZGlzdGFuY2VNb2RlbDtcbiAgICAgIHNvdW5kLl9wYW5uZXIubWF4RGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5tYXhEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFubmluZ01vZGVsID0gc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5yZWZEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLnJlZkRpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcbiAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oc291bmQuX3Bvc1swXSwgc291bmQuX3Bvc1sxXSwgc291bmQuX3Bvc1syXSk7XG4gICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHNvdW5kLl9vcmllbnRhdGlvblswXSwgc291bmQuX29yaWVudGF0aW9uWzFdLCBzb3VuZC5fb3JpZW50YXRpb25bMl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnZhbHVlID0gc291bmQuX3N0ZXJlbztcbiAgICB9XG5cbiAgICBzb3VuZC5fcGFubmVyLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9ucy5cbiAgICBpZiAoIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgIHNvdW5kLl9wYXJlbnQucGF1c2Uoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCk7XG4gICAgfVxuICB9O1xufSkoKTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvLyBMYXN0IHRpbWUgdXBkYXRlZDogMjAxNy0wMi0xMyA5OjU4OjE4IEFNIFVUQ1xuXG4vLyBfX19fX19fX19fX19fX19fXG4vLyBSZWNvcmRSVEMgdjUuNC4xXG5cbi8vIE9wZW4tU291cmNlZDogaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVENcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE11YXogS2hhbiAgICAgLSB3d3cuTXVhektoYW4uY29tXG4vLyBNSVQgTGljZW5zZSAgIC0gd3d3LldlYlJUQy1FeHBlcmltZW50LmNvbS9saWNlbmNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4ndXNlIHN0cmljdCc7XG5cbi8vIF9fX19fX19fX19fX1xuLy8gUmVjb3JkUlRDLmpzXG5cbi8qKlxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQ30gaXMgYSBKYXZhU2NyaXB0LWJhc2VkIG1lZGlhLXJlY29yZGluZyBsaWJyYXJ5IGZvciBtb2Rlcm4gd2ViLWJyb3dzZXJzIChzdXBwb3J0aW5nIFdlYlJUQyBnZXRVc2VyTWVkaWEgQVBJKS4gSXQgaXMgb3B0aW1pemVkIGZvciBkaWZmZXJlbnQgZGV2aWNlcyBhbmQgYnJvd3NlcnMgdG8gYnJpbmcgYWxsIGNsaWVudC1zaWRlIChwbHVnaW5mcmVlKSByZWNvcmRpbmcgc29sdXRpb25zIGluIHNpbmdsZSBwbGFjZS5cbiAqIEBzdW1tYXJ5IEphdmFTY3JpcHQgYXVkaW8vdmlkZW8gcmVjb3JkaW5nIGxpYnJhcnkgcnVucyB0b3Agb3ZlciBXZWJSVEMgZ2V0VXNlck1lZGlhIEFQSS5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIFJlY29yZFJUQ1xuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIHJlY29yZFJUQyA9IFJlY29yZFJUQyhtZWRpYVN0cmVhbSwge1xuICogICAgIHR5cGU6ICd2aWRlbycgLy8gYXVkaW8gb3IgdmlkZW8gb3IgZ2lmIG9yIGNhbnZhc1xuICogfSk7XG4gKlxuICogLy8gb3IsIHlvdSBjYW4gYWxzbyB1c2UgdGhlIFwibmV3XCIga2V5d29yZFxuICogdmFyIHJlY29yZFJUQyA9IG5ldyBSZWNvcmRSVEMobWVkaWFTdHJlYW1bLCBjb25maWddKTtcbiAqIEBzZWUgRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb246XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBtZWRpYVN0cmVhbSAtIE1lZGlhU3RyZWFtIG9iamVjdCBmZXRjaGVkIHVzaW5nIGdldFVzZXJNZWRpYSBBUEkgb3IgZ2VuZXJhdGVkIHVzaW5nIGNhcHR1cmVTdHJlYW1VbnRpbEVuZGVkIG9yIFdlYkF1ZGlvIEFQSS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB7dHlwZTpcInZpZGVvXCIsIGRpc2FibGVMb2dzOiB0cnVlLCBudW1iZXJPZkF1ZGlvQ2hhbm5lbHM6IDEsIGJ1ZmZlclNpemU6IDAsIHNhbXBsZVJhdGU6IDAsIHZpZGVvOiBIVE1MVmlkZW9FbGVtZW50LCBldGMufVxuICovXG5cbmZ1bmN0aW9uIFJlY29yZFJUQyhtZWRpYVN0cmVhbSwgY29uZmlnKSB7XG4gICAgaWYgKCFtZWRpYVN0cmVhbSkge1xuICAgICAgICB0aHJvdyAnTWVkaWFTdHJlYW0gaXMgbWFuZGF0b3J5Lic7XG4gICAgfVxuXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHtcbiAgICAgICAgdHlwZTogJ3ZpZGVvJ1xuICAgIH07XG5cbiAgICBjb25maWcgPSBuZXcgUmVjb3JkUlRDQ29uZmlndXJhdGlvbihtZWRpYVN0cmVhbSwgY29uZmlnKTtcblxuICAgIC8vIGEgcmVmZXJlbmNlIHRvIHVzZXIncyByZWNvcmRSVEMgb2JqZWN0XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gc3RhcnRSZWNvcmRpbmcoKSB7XG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdzdGFydGVkIHJlY29yZGluZyAnICsgY29uZmlnLnR5cGUgKyAnIHN0cmVhbS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnJlY29yZCgpO1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5yZWNvcmRpbmdEdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVJlY29yZGluZ0R1cmF0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIGluaXRSZWNvcmRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLnJlY29yZGluZ0R1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlUmVjb3JkaW5nRHVyYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdFJlY29yZGVyKGluaXRDYWxsYmFjaykge1xuICAgICAgICBpZiAoaW5pdENhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb25maWcuaW5pdENhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaW5pdENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgaW5pdENhbGxiYWNrID0gY29uZmlnLmluaXRDYWxsYmFjayA9IG51bGw7IC8vIHJlY29yZFJUQy5pbml0UmVjb3JkZXIgc2hvdWxkIGJlIGNhbGwtYmFja2VkIG9uY2UuXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIFJlY29yZGVyID0gbmV3IEdldFJlY29yZGVyVHlwZShtZWRpYVN0cmVhbSwgY29uZmlnKTtcblxuICAgICAgICBtZWRpYVJlY29yZGVyID0gbmV3IFJlY29yZGVyKG1lZGlhU3RyZWFtLCBjb25maWcpO1xuICAgICAgICBtZWRpYVJlY29yZGVyLnJlY29yZCgpO1xuXG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdJbml0aWFsaXplZCByZWNvcmRlclR5cGU6JywgbWVkaWFSZWNvcmRlci5jb25zdHJ1Y3Rvci5uYW1lLCAnZm9yIG91dHB1dC10eXBlOicsIGNvbmZpZy50eXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0b3BSZWNvcmRpbmcoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFdBUk5JTkcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgICAgdmFyIHJlY29yZFJUQyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignU3RvcHBlZCByZWNvcmRpbmcgJyArIGNvbmZpZy50eXBlICsgJyBzdHJlYW0uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLnR5cGUgIT09ICdnaWYnKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoX2NhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpO1xuICAgICAgICAgICAgX2NhbGxiYWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfY2FsbGJhY2soX19ibG9iKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIG1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZikge1xuICAgICAgICAgICAgICAgICAgICBzZWxmW2l0ZW1dID0gbWVkaWFSZWNvcmRlcltpdGVtXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkUlRDKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY29yZFJUQ1tpdGVtXSA9IG1lZGlhUmVjb3JkZXJbaXRlbV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYmxvYiA9IG1lZGlhUmVjb3JkZXIuYmxvYjtcblxuICAgICAgICAgICAgaWYgKCFibG9iKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9fYmxvYikge1xuICAgICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLmJsb2IgPSBibG9iID0gX19ibG9iO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdSZWNvcmRpbmcgZmFpbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmxvYiAmJiAhY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhibG9iLnR5cGUsICctPicsIGJ5dGVzVG9TaXplKGJsb2Iuc2l6ZSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5hdXRvV3JpdGVUb0Rpc2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdldERhdGFVUkwoZnVuY3Rpb24oZGF0YVVSTCkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJbY29uZmlnLnR5cGUgKyAnQmxvYiddID0gZGF0YVVSTDtcbiAgICAgICAgICAgICAgICBEaXNrU3RvcmFnZS5TdG9yZShwYXJhbWV0ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXVzZVJlY29yZGluZygpIHtcbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFdBUk5JTkcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVkaWFSZWNvcmRlci5wYXVzZSgpO1xuXG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdQYXVzZWQgcmVjb3JkaW5nLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzdW1lUmVjb3JkaW5nKCkge1xuICAgICAgICBpZiAoIW1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oV0FSTklORyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBub3QgYWxsIGxpYnMgaGF2ZSB0aGlzIG1ldGhvZCB5ZXRcbiAgICAgICAgbWVkaWFSZWNvcmRlci5yZXN1bWUoKTtcblxuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUmVzdW1lZCByZWNvcmRpbmcuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkRmlsZShfYmxvYikge1xuICAgICAgICBwb3N0TWVzc2FnZShuZXcgRmlsZVJlYWRlclN5bmMoKS5yZWFkQXNEYXRhVVJMKF9ibG9iKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGF0YVVSTChjYWxsYmFjaywgX21lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgdGhyb3cgJ1Bhc3MgYSBjYWxsYmFjayBmdW5jdGlvbiBvdmVyIGdldERhdGFVUkwuJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBibG9iID0gX21lZGlhUmVjb3JkZXIgPyBfbWVkaWFSZWNvcmRlci5ibG9iIDogKG1lZGlhUmVjb3JkZXIgfHwge30pLmJsb2I7XG5cbiAgICAgICAgaWYgKCFibG9iKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQmxvYiBlbmNvZGVyIGRpZCBub3QgZmluaXNoIGl0cyBqb2IgeWV0LicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGdldERhdGFVUkwoY2FsbGJhY2ssIF9tZWRpYVJlY29yZGVyKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnICYmICFuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgICAgICB2YXIgd2ViV29ya2VyID0gcHJvY2Vzc0luV2ViV29ya2VyKHJlYWRGaWxlKTtcblxuICAgICAgICAgICAgd2ViV29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB3ZWJXb3JrZXIucG9zdE1lc3NhZ2UoYmxvYik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0luV2ViV29ya2VyKF9mdW5jdGlvbikge1xuICAgICAgICAgICAgdmFyIGJsb2IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtfZnVuY3Rpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAndGhpcy5vbm1lc3NhZ2UgPSAgZnVuY3Rpb24gKGUpIHsnICsgX2Z1bmN0aW9uLm5hbWUgKyAnKGUuZGF0YSk7fSdcbiAgICAgICAgICAgIF0sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCdcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoYmxvYik7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlY29yZGluZ0R1cmF0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3RvcFJlY29yZGluZyhzZWxmLm9uUmVjb3JkaW5nU3RvcHBlZCk7XG4gICAgICAgIH0sIHNlbGYucmVjb3JkaW5nRHVyYXRpb24pO1xuICAgIH1cblxuICAgIHZhciBXQVJOSU5HID0gJ0l0IHNlZW1zIHRoYXQgXCJzdGFydFJlY29yZGluZ1wiIGlzIG5vdCBpbnZva2VkIGZvciAnICsgY29uZmlnLnR5cGUgKyAnIHJlY29yZGVyLic7XG5cbiAgICB2YXIgbWVkaWFSZWNvcmRlcjtcblxuICAgIHZhciByZXR1cm5PYmplY3QgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBzdGFydHMgcmVjb3JkaW5nLiBJdCBkb2Vzbid0IHRha2UgYW55IGFyZ3VtZW50cy5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICAgICAgICovXG4gICAgICAgIHN0YXJ0UmVjb3JkaW5nOiBzdGFydFJlY29yZGluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc3RvcHMgcmVjb3JkaW5nLiBJdCB0YWtlcyBhIHNpbmdsZSBcImNhbGxiYWNrXCIgYXJndW1lbnQuIEl0IGlzIHN1Z2dlc3RlZCB0byBnZXQgYmxvYiBvciBVUkkgaW4gdGhlIGNhbGxiYWNrIHRvIG1ha2Ugc3VyZSBhbGwgZW5jb2RlcnMgZmluaXNoZWQgdGhlaXIgam9icy5cbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBUaGlzIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGludm9rZWQgYWZ0ZXIgY29tcGxldGlvbiBvZiBhbGwgZW5jb2Rpbmcgam9icy5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbih2aWRlb1VSTCkge1xuICAgICAgICAgKiAgICAgdmlkZW8uc3JjID0gdmlkZW9VUkw7XG4gICAgICAgICAqICAgICByZWNvcmRSVEMuYmxvYjsgcmVjb3JkUlRDLmJ1ZmZlcjtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBzdG9wUmVjb3JkaW5nOiBzdG9wUmVjb3JkaW5nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBwYXVzZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5wYXVzZVJlY29yZGluZygpO1xuICAgICAgICAgKi9cbiAgICAgICAgcGF1c2VSZWNvcmRpbmc6IHBhdXNlUmVjb3JkaW5nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXN1bWVzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgICAgICogQG1ldGhvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMucmVzdW1lUmVjb3JkaW5nKCk7XG4gICAgICAgICAqL1xuICAgICAgICByZXN1bWVSZWNvcmRpbmc6IHJlc3VtZVJlY29yZGluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgaW5pdGlhbGl6ZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5pbml0UmVjb3JkZXIoKTtcbiAgICAgICAgICovXG4gICAgICAgIGluaXRSZWNvcmRlcjogaW5pdFJlY29yZGVyLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBzZXRzIHRoZSByZWNvcmRpbmcgZHVyYXRpb24uXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnNldFJlY29yZGluZ0R1cmF0aW9uKCk7XG4gICAgICAgICAqL1xuICAgICAgICBzZXRSZWNvcmRpbmdEdXJhdGlvbjogZnVuY3Rpb24obWlsbGlzZWNvbmRzLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtaWxsaXNlY29uZHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ21pbGxpc2Vjb25kcyBpcyByZXF1aXJlZC4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1pbGxpc2Vjb25kcyAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnbWlsbGlzZWNvbmRzIG11c3QgYmUgYSBudW1iZXIuJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5yZWNvcmRpbmdEdXJhdGlvbiA9IG1pbGxpc2Vjb25kcztcbiAgICAgICAgICAgIHNlbGYub25SZWNvcmRpbmdTdG9wcGVkID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBvblJlY29yZGluZ1N0b3BwZWQ6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25SZWNvcmRpbmdTdG9wcGVkID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gY2xlYXIvcmVzZXQgYWxsIHRoZSByZWNvcmRlZCBkYXRhLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5jbGVhclJlY29yZGVkRGF0YSgpO1xuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJSZWNvcmRlZERhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5jbGVhclJlY29yZGVkRGF0YSgpO1xuXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0NsZWFyZWQgb2xkIHJlY29yZGVkIGRhdGEuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEl0IGlzIGVxdWl2YWxlbnQgdG8gPGNvZGUgY2xhc3M9XCJzdHJcIj5cInJlY29yZFJUQy5ibG9iXCI8L2NvZGU+IHByb3BlcnR5LlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgdmFyIGJsb2IgPSByZWNvcmRSVEMuZ2V0QmxvYigpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gZXF1aXZhbGVudCB0bzogcmVjb3JkUlRDLmJsb2IgcHJvcGVydHlcbiAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkUlRDLmJsb2I7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0QmxvYjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIW1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFdBUk5JTkcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbWVkaWFSZWNvcmRlci5ibG9iO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBEYXRhVVJMLiBJdCB0YWtlcyBhIHNpbmdsZSBcImNhbGxiYWNrXCIgYXJndW1lbnQuXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gRGF0YVVSTCBpcyBwYXNzZWQgYmFjayBvdmVyIHRoaXMgY2FsbGJhY2suXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICAgICAqICAgICByZWNvcmRSVEMuZ2V0RGF0YVVSTChmdW5jdGlvbihkYXRhVVJMKSB7XG4gICAgICAgICAqICAgICAgICAgdmlkZW8uc3JjID0gZGF0YVVSTDtcbiAgICAgICAgICogICAgIH0pO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIGdldERhdGFVUkw6IGdldERhdGFVUkwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIFZpcnV0YWwvQmxvYiBVUkwuIEl0IGRvZXNuJ3QgdGFrZSBhbnkgYXJndW1lbnRzLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgdmlkZW8uc3JjID0gcmVjb3JkUlRDLnRvVVJMKCk7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgdG9VUkw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihXQVJOSU5HKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwobWVkaWFSZWNvcmRlci5ibG9iKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc2F2ZXMgdGhlIGJsb2IvZmlsZSB0byBkaXNrIChieSBpbnZva2luZyBzYXZlLWFzIGRpYWxvZykuIEl0IHRha2VzIGEgc2luZ2xlIChvcHRpb25hbCkgYXJndW1lbnQgaS5lLiBGaWxlTmFtZVxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgcmVjb3JkUlRDLnNhdmUoJ2ZpbGUtbmFtZScpO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIHNhdmU6IGZ1bmN0aW9uKGZpbGVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIW1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFdBUk5JTkcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnZva2VTYXZlQXNEaWFsb2cobWVkaWFSZWNvcmRlci5ibG9iLCBmaWxlTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGdldHMgYSBibG9iIGZyb20gaW5kZXhlZC1EQiBzdG9yYWdlLiBJdCB0YWtlcyBhIHNpbmdsZSBcImNhbGxiYWNrXCIgYXJndW1lbnQuXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLmdldEZyb21EaXNrKGZ1bmN0aW9uKGRhdGFVUkwpIHtcbiAgICAgICAgICogICAgIHZpZGVvLnNyYyA9IGRhdGFVUkw7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0RnJvbURpc2s6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoIW1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFdBUk5JTkcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBSZWNvcmRSVEMuZ2V0RnJvbURpc2soY29uZmlnLnR5cGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgYXBwZW5kcyBhbiBhcnJheSBvZiB3ZWJwIGltYWdlcyB0byB0aGUgcmVjb3JkZWQgdmlkZW8tYmxvYi4gSXQgdGFrZXMgYW4gXCJhcnJheVwiIG9iamVjdC5cbiAgICAgICAgICogQHR5cGUge0FycmF5LjxBcnJheT59XG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5T2ZXZWJQSW1hZ2VzIC0gQXJyYXkgb2Ygd2VicCBpbWFnZXMuXG4gICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogdmFyIGFycmF5T2ZXZWJQSW1hZ2VzID0gW107XG4gICAgICAgICAqIGFycmF5T2ZXZWJQSW1hZ2VzLnB1c2goe1xuICAgICAgICAgKiAgICAgZHVyYXRpb246IGluZGV4LFxuICAgICAgICAgKiAgICAgaW1hZ2U6ICdkYXRhOmltYWdlL3dlYnA7YmFzZTY0LC4uLidcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqIHJlY29yZFJUQy5zZXRBZHZlcnRpc2VtZW50QXJyYXkoYXJyYXlPZldlYlBJbWFnZXMpO1xuICAgICAgICAgKi9cbiAgICAgICAgc2V0QWR2ZXJ0aXNlbWVudEFycmF5OiBmdW5jdGlvbihhcnJheU9mV2ViUEltYWdlcykge1xuICAgICAgICAgICAgY29uZmlnLmFkdmVydGlzZW1lbnQgPSBbXTtcblxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5T2ZXZWJQSW1hZ2VzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25maWcuYWR2ZXJ0aXNlbWVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiBhcnJheU9mV2ViUEltYWdlc1tpXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJdCBpcyBlcXVpdmFsZW50IHRvIDxjb2RlIGNsYXNzPVwic3RyXCI+XCJyZWNvcmRSVEMuZ2V0QmxvYigpXCI8L2NvZGU+IG1ldGhvZC5cbiAgICAgICAgICogQHByb3BlcnR5IHtCbG9ifSBibG9iIC0gUmVjb3JkZWQgQmxvYiBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgdGhpcyBwcm9wZXJ0eS5cbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZFJUQy5ibG9iO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gZXF1aXZhbGVudCB0bzogcmVjb3JkUlRDLmdldEJsb2IoKSBtZXRob2RcbiAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkUlRDLmdldEJsb2IoKTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBibG9iOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdG9kbyBBZGQgZGVzY3JpcHRpb25zLlxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gYnVmZmVyU2l6ZSAtIEVpdGhlciBhdWRpbyBkZXZpY2UncyBkZWZhdWx0IGJ1ZmZlci1zaXplLCBvciB5b3VyIGN1c3RvbSB2YWx1ZS5cbiAgICAgICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkUlRDLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICAgICAqICAgICB2YXIgYnVmZmVyU2l6ZSA9IHJlY29yZFJUQy5idWZmZXJTaXplO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIGJ1ZmZlclNpemU6IDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0b2RvIEFkZCBkZXNjcmlwdGlvbnMuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzYW1wbGVSYXRlIC0gQXVkaW8gZGV2aWNlJ3MgZGVmYXVsdCBzYW1wbGUgcmF0ZXMuXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgdmFyIHNhbXBsZVJhdGUgPSByZWNvcmRSVEMuc2FtcGxlUmF0ZTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqL1xuICAgICAgICBzYW1wbGVSYXRlOiAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdG9kbyBBZGQgZGVzY3JpcHRpb25zLlxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5QnVmZmVyfSBidWZmZXIgLSBBdWRpbyBBcnJheUJ1ZmZlciwgc3VwcG9ydGVkIG9ubHkgaW4gQ2hyb21lLlxuICAgICAgICAgKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRSVEMuc3RvcFJlY29yZGluZyhmdW5jdGlvbigpIHtcbiAgICAgICAgICogICAgIHZhciBidWZmZXIgPSByZWNvcmRSVEMuYnVmZmVyO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIGJ1ZmZlcjogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHRvZG8gQWRkIGRlc2NyaXB0aW9ucy5cbiAgICAgICAgICogQHByb3BlcnR5IHtEYXRhVmlld30gdmlldyAtIEF1ZGlvIERhdGFWaWV3LCBzdXBwb3J0ZWQgb25seSBpbiBDaHJvbWUuXG4gICAgICAgICAqIEBtZW1iZXJvZiBSZWNvcmRSVENcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZFJUQy5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgdmFyIGRhdGFWaWV3ID0gcmVjb3JkUlRDLnZpZXc7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgdmlldzogbnVsbFxuICAgIH07XG5cbiAgICBpZiAoIXRoaXMpIHtcbiAgICAgICAgc2VsZiA9IHJldHVybk9iamVjdDtcbiAgICAgICAgcmV0dXJuIHJldHVybk9iamVjdDtcbiAgICB9XG5cbiAgICAvLyBpZiBzb21lb25lIHdhbnRzIHRvIHVzZSBSZWNvcmRSVEMgd2l0aCB0aGUgXCJuZXdcIiBrZXl3b3JkLlxuICAgIGZvciAodmFyIHByb3AgaW4gcmV0dXJuT2JqZWN0KSB7XG4gICAgICAgIHRoaXNbcHJvcF0gPSByZXR1cm5PYmplY3RbcHJvcF07XG4gICAgfVxuXG4gICAgc2VsZiA9IHRoaXM7XG5cbiAgICByZXR1cm4gcmV0dXJuT2JqZWN0O1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGdldCBhbGwgcmVjb3JkZWQgYmxvYnMgZnJvbSBJbmRleGVkREIgc3RvcmFnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gJ2FsbCcgb3IgJ2F1ZGlvJyBvciAndmlkZW8nIG9yICdnaWYnXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGdldCBhbGwgc3RvcmVkIGJsb2JzLlxuICogQG1ldGhvZFxuICogQG1lbWJlcm9mIFJlY29yZFJUQ1xuICogQGV4YW1wbGVcbiAqIFJlY29yZFJUQy5nZXRGcm9tRGlzaygnYWxsJywgZnVuY3Rpb24oZGF0YVVSTCwgdHlwZSl7XG4gKiAgICAgaWYodHlwZSA9PT0gJ2F1ZGlvJykgeyB9XG4gKiAgICAgaWYodHlwZSA9PT0gJ3ZpZGVvJykgeyB9XG4gKiAgICAgaWYodHlwZSA9PT0gJ2dpZicpICAgeyB9XG4gKiB9KTtcbiAqL1xuUmVjb3JkUlRDLmdldEZyb21EaXNrID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHRocm93ICdjYWxsYmFjayBpcyBtYW5kYXRvcnkuJztcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnR2V0dGluZyByZWNvcmRlZCAnICsgKHR5cGUgPT09ICdhbGwnID8gJ2Jsb2JzJyA6IHR5cGUgKyAnIGJsb2IgJykgKyAnIGZyb20gZGlzayEnKTtcbiAgICBEaXNrU3RvcmFnZS5GZXRjaChmdW5jdGlvbihkYXRhVVJMLCBfdHlwZSkge1xuICAgICAgICBpZiAodHlwZSAhPT0gJ2FsbCcgJiYgX3R5cGUgPT09IHR5cGUgKyAnQmxvYicgJiYgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGFVUkwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdhbGwnICYmIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhVVJMLCBfdHlwZS5yZXBsYWNlKCdCbG9iJywgJycpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBzdG9yZSByZWNvcmRlZCBibG9icyBpbnRvIEluZGV4ZWREQiBzdG9yYWdlLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSB7YXVkaW86IEJsb2IsIHZpZGVvOiBCbG9iLCBnaWY6IEJsb2J9XG4gKiBAbWV0aG9kXG4gKiBAbWVtYmVyb2YgUmVjb3JkUlRDXG4gKiBAZXhhbXBsZVxuICogUmVjb3JkUlRDLndyaXRlVG9EaXNrKHtcbiAqICAgICBhdWRpbzogYXVkaW9CbG9iLFxuICogICAgIHZpZGVvOiB2aWRlb0Jsb2IsXG4gKiAgICAgZ2lmICA6IGdpZkJsb2JcbiAqIH0pO1xuICovXG5SZWNvcmRSVEMud3JpdGVUb0Rpc2sgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgY29uc29sZS5sb2coJ1dyaXRpbmcgcmVjb3JkZWQgYmxvYihzKSB0byBkaXNrIScpO1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmIChvcHRpb25zLmF1ZGlvICYmIG9wdGlvbnMudmlkZW8gJiYgb3B0aW9ucy5naWYpIHtcbiAgICAgICAgb3B0aW9ucy5hdWRpby5nZXREYXRhVVJMKGZ1bmN0aW9uKGF1ZGlvRGF0YVVSTCkge1xuICAgICAgICAgICAgb3B0aW9ucy52aWRlby5nZXREYXRhVVJMKGZ1bmN0aW9uKHZpZGVvRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZ2lmLmdldERhdGFVUkwoZnVuY3Rpb24oZ2lmRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgICAgICBEaXNrU3RvcmFnZS5TdG9yZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0Jsb2I6IGF1ZGlvRGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvQmxvYjogdmlkZW9EYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lmQmxvYjogZ2lmRGF0YVVSTFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYXVkaW8gJiYgb3B0aW9ucy52aWRlbykge1xuICAgICAgICBvcHRpb25zLmF1ZGlvLmdldERhdGFVUkwoZnVuY3Rpb24oYXVkaW9EYXRhVVJMKSB7XG4gICAgICAgICAgICBvcHRpb25zLnZpZGVvLmdldERhdGFVUkwoZnVuY3Rpb24odmlkZW9EYXRhVVJMKSB7XG4gICAgICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAgICAgICAgICAgICAgICBhdWRpb0Jsb2I6IGF1ZGlvRGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9CbG9iOiB2aWRlb0RhdGFVUkxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYXVkaW8gJiYgb3B0aW9ucy5naWYpIHtcbiAgICAgICAgb3B0aW9ucy5hdWRpby5nZXREYXRhVVJMKGZ1bmN0aW9uKGF1ZGlvRGF0YVVSTCkge1xuICAgICAgICAgICAgb3B0aW9ucy5naWYuZ2V0RGF0YVVSTChmdW5jdGlvbihnaWZEYXRhVVJMKSB7XG4gICAgICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAgICAgICAgICAgICAgICBhdWRpb0Jsb2I6IGF1ZGlvRGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgZ2lmQmxvYjogZ2lmRGF0YVVSTFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy52aWRlbyAmJiBvcHRpb25zLmdpZikge1xuICAgICAgICBvcHRpb25zLnZpZGVvLmdldERhdGFVUkwoZnVuY3Rpb24odmlkZW9EYXRhVVJMKSB7XG4gICAgICAgICAgICBvcHRpb25zLmdpZi5nZXREYXRhVVJMKGZ1bmN0aW9uKGdpZkRhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICBEaXNrU3RvcmFnZS5TdG9yZSh7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvQmxvYjogdmlkZW9EYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICBnaWZCbG9iOiBnaWZEYXRhVVJMXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmF1ZGlvKSB7XG4gICAgICAgIG9wdGlvbnMuYXVkaW8uZ2V0RGF0YVVSTChmdW5jdGlvbihhdWRpb0RhdGFVUkwpIHtcbiAgICAgICAgICAgIERpc2tTdG9yYWdlLlN0b3JlKHtcbiAgICAgICAgICAgICAgICBhdWRpb0Jsb2I6IGF1ZGlvRGF0YVVSTFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy52aWRlbykge1xuICAgICAgICBvcHRpb25zLnZpZGVvLmdldERhdGFVUkwoZnVuY3Rpb24odmlkZW9EYXRhVVJMKSB7XG4gICAgICAgICAgICBEaXNrU3RvcmFnZS5TdG9yZSh7XG4gICAgICAgICAgICAgICAgdmlkZW9CbG9iOiB2aWRlb0RhdGFVUkxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZ2lmKSB7XG4gICAgICAgIG9wdGlvbnMuZ2lmLmdldERhdGFVUkwoZnVuY3Rpb24oZ2lmRGF0YVVSTCkge1xuICAgICAgICAgICAgRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAgICAgICAgICAgIGdpZkJsb2I6IGdpZkRhdGFVUkxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgLyogJiYgISFtb2R1bGUuZXhwb3J0cyovICkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUmVjb3JkUlRDO1xufVxuXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCdSZWNvcmRSVEMnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBSZWNvcmRSVEM7XG4gICAgfSk7XG59XG5cbi8vIF9fX19fX19fX19fX19fX19fX19fX19fX19fXG4vLyBSZWNvcmRSVEMtQ29uZmlndXJhdGlvbi5qc1xuXG4vKipcbiAqIHtAbGluayBSZWNvcmRSVENDb25maWd1cmF0aW9ufSBpcyBhbiBpbm5lci9wcml2YXRlIGhlbHBlciBmb3Ige0BsaW5rIFJlY29yZFJUQ30uXG4gKiBAc3VtbWFyeSBJdCBjb25maWd1cmVzIHRoZSAybmQgcGFyYW1ldGVyIHBhc3NlZCBvdmVyIHtAbGluayBSZWNvcmRSVEN9IGFuZCByZXR1cm5zIGEgdmFsaWQgXCJjb25maWdcIiBvYmplY3QuXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBSZWNvcmRSVENDb25maWd1cmF0aW9uXG4gKiBAY2xhc3NcbiAqIEBleGFtcGxlXG4gKiB2YXIgb3B0aW9ucyA9IFJlY29yZFJUQ0NvbmZpZ3VyYXRpb24obWVkaWFTdHJlYW0sIG9wdGlvbnMpO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gbWVkaWFTdHJlYW0gLSBNZWRpYVN0cmVhbSBvYmplY3QgZmV0Y2hlZCB1c2luZyBnZXRVc2VyTWVkaWEgQVBJIG9yIGdlbmVyYXRlZCB1c2luZyBjYXB0dXJlU3RyZWFtVW50aWxFbmRlZCBvciBXZWJBdWRpbyBBUEkuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0ge3R5cGU6XCJ2aWRlb1wiLCBkaXNhYmxlTG9nczogdHJ1ZSwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzOiAxLCBidWZmZXJTaXplOiAwLCBzYW1wbGVSYXRlOiAwLCB2aWRlbzogSFRNTFZpZGVvRWxlbWVudCwgZ2V0TmF0aXZlQmxvYjp0cnVlLCBldGMufVxuICovXG5cbmZ1bmN0aW9uIFJlY29yZFJUQ0NvbmZpZ3VyYXRpb24obWVkaWFTdHJlYW0sIGNvbmZpZykge1xuICAgIGlmIChjb25maWcucmVjb3JkZXJUeXBlICYmICFjb25maWcudHlwZSkge1xuICAgICAgICBpZiAoY29uZmlnLnJlY29yZGVyVHlwZSA9PT0gV2hhbW15UmVjb3JkZXIgfHwgY29uZmlnLnJlY29yZGVyVHlwZSA9PT0gQ2FudmFzUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIGNvbmZpZy50eXBlID0gJ3ZpZGVvJztcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcucmVjb3JkZXJUeXBlID09PSBHaWZSZWNvcmRlcikge1xuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSAnZ2lmJztcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcucmVjb3JkZXJUeXBlID09PSBTdGVyZW9BdWRpb1JlY29yZGVyKSB7XG4gICAgICAgICAgICBjb25maWcudHlwZSA9ICdhdWRpbyc7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnJlY29yZGVyVHlwZSA9PT0gTWVkaWFTdHJlYW1SZWNvcmRlcikge1xuICAgICAgICAgICAgaWYgKG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoICYmIG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnR5cGUgPSAndmlkZW8nO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCAmJiAhbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25maWcudHlwZSA9ICdhdWRpbyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCAmJiBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50eXBlID0gJ2F1ZGlvJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29uZmlnLnR5cGUgPSAnVW5Lbm93bic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIE1lZGlhU3RyZWFtUmVjb3JkZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZWRpYVJlY29yZGVyICE9PSAndW5kZWZpbmVkJyAmJiAncmVxdWVzdERhdGEnIGluIE1lZGlhUmVjb3JkZXIucHJvdG90eXBlKSB7XG4gICAgICAgIGlmICghY29uZmlnLm1pbWVUeXBlKSB7XG4gICAgICAgICAgICBjb25maWcubWltZVR5cGUgPSAndmlkZW8vd2VibSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmZpZy50eXBlKSB7XG4gICAgICAgICAgICBjb25maWcudHlwZSA9IGNvbmZpZy5taW1lVHlwZS5zcGxpdCgnLycpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb25maWcuYml0c1BlclNlY29uZCkge1xuICAgICAgICAgICAgLy8gY29uZmlnLmJpdHNQZXJTZWNvbmQgPSAxMjgwMDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb25zaWRlciBkZWZhdWx0IHR5cGU9YXVkaW9cbiAgICBpZiAoIWNvbmZpZy50eXBlKSB7XG4gICAgICAgIGlmIChjb25maWcubWltZVR5cGUpIHtcbiAgICAgICAgICAgIGNvbmZpZy50eXBlID0gY29uZmlnLm1pbWVUeXBlLnNwbGl0KCcvJylbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25maWcudHlwZSkge1xuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSAnYXVkaW8nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbmZpZztcbn1cblxuLy8gX19fX19fX19fX19fX19fX19fXG4vLyBHZXRSZWNvcmRlclR5cGUuanNcblxuLyoqXG4gKiB7QGxpbmsgR2V0UmVjb3JkZXJUeXBlfSBpcyBhbiBpbm5lci9wcml2YXRlIGhlbHBlciBmb3Ige0BsaW5rIFJlY29yZFJUQ30uXG4gKiBAc3VtbWFyeSBJdCByZXR1cm5zIGJlc3QgcmVjb3JkZXItdHlwZSBhdmFpbGFibGUgZm9yIHlvdXIgYnJvd3Nlci5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIEdldFJlY29yZGVyVHlwZVxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIFJlY29yZGVyVHlwZSA9IEdldFJlY29yZGVyVHlwZShvcHRpb25zKTtcbiAqIHZhciByZWNvcmRlciA9IG5ldyBSZWNvcmRlclR5cGUob3B0aW9ucyk7XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBtZWRpYVN0cmVhbSAtIE1lZGlhU3RyZWFtIG9iamVjdCBmZXRjaGVkIHVzaW5nIGdldFVzZXJNZWRpYSBBUEkgb3IgZ2VuZXJhdGVkIHVzaW5nIGNhcHR1cmVTdHJlYW1VbnRpbEVuZGVkIG9yIFdlYkF1ZGlvIEFQSS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB7dHlwZTpcInZpZGVvXCIsIGRpc2FibGVMb2dzOiB0cnVlLCBudW1iZXJPZkF1ZGlvQ2hhbm5lbHM6IDEsIGJ1ZmZlclNpemU6IDAsIHNhbXBsZVJhdGU6IDAsIHZpZGVvOiBIVE1MVmlkZW9FbGVtZW50LCBldGMufVxuICovXG5cbmZ1bmN0aW9uIEdldFJlY29yZGVyVHlwZShtZWRpYVN0cmVhbSwgY29uZmlnKSB7XG4gICAgdmFyIHJlY29yZGVyO1xuXG4gICAgLy8gU3RlcmVvQXVkaW9SZWNvcmRlciBjYW4gd29yayB3aXRoIGFsbCB0aHJlZTogRWRnZSwgRmlyZWZveCBhbmQgQ2hyb21lXG4gICAgLy8gdG9kbzogZGV0ZWN0IGlmIGl0IGlzIEVkZ2UsIHRoZW4gYXV0byB1c2U6IFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAgICBpZiAoaXNDaHJvbWUgfHwgaXNFZGdlIHx8IGlzT3BlcmEpIHtcbiAgICAgICAgLy8gTWVkaWEgU3RyZWFtIFJlY29yZGluZyBBUEkgaGFzIG5vdCBiZWVuIGltcGxlbWVudGVkIGluIGNocm9tZSB5ZXQ7XG4gICAgICAgIC8vIFRoYXQncyB3aHkgdXNpbmcgV2ViQXVkaW8gQVBJIHRvIHJlY29yZCBzdGVyZW8gYXVkaW8gaW4gV0FWIGZvcm1hdFxuICAgICAgICByZWNvcmRlciA9IFN0ZXJlb0F1ZGlvUmVjb3JkZXI7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBNZWRpYVJlY29yZGVyICE9PSAndW5kZWZpbmVkJyAmJiAncmVxdWVzdERhdGEnIGluIE1lZGlhUmVjb3JkZXIucHJvdG90eXBlICYmICFpc0Nocm9tZSkge1xuICAgICAgICByZWNvcmRlciA9IE1lZGlhU3RyZWFtUmVjb3JkZXI7XG4gICAgfVxuXG4gICAgLy8gdmlkZW8gcmVjb3JkZXIgKGluIFdlYk0gZm9ybWF0KVxuICAgIGlmIChjb25maWcudHlwZSA9PT0gJ3ZpZGVvJyAmJiAoaXNDaHJvbWUgfHwgaXNPcGVyYSkpIHtcbiAgICAgICAgcmVjb3JkZXIgPSBXaGFtbXlSZWNvcmRlcjtcbiAgICB9XG5cbiAgICAvLyB2aWRlbyByZWNvcmRlciAoaW4gR2lmIGZvcm1hdClcbiAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdnaWYnKSB7XG4gICAgICAgIHJlY29yZGVyID0gR2lmUmVjb3JkZXI7XG4gICAgfVxuXG4gICAgLy8gaHRtbDJjYW52YXMgcmVjb3JkaW5nIVxuICAgIGlmIChjb25maWcudHlwZSA9PT0gJ2NhbnZhcycpIHtcbiAgICAgICAgcmVjb3JkZXIgPSBDYW52YXNSZWNvcmRlcjtcbiAgICB9XG5cbiAgICBpZiAoaXNNZWRpYVJlY29yZGVyQ29tcGF0aWJsZSgpICYmIHJlY29yZGVyICE9PSBDYW52YXNSZWNvcmRlciAmJiByZWNvcmRlciAhPT0gR2lmUmVjb3JkZXIgJiYgdHlwZW9mIE1lZGlhUmVjb3JkZXIgIT09ICd1bmRlZmluZWQnICYmICdyZXF1ZXN0RGF0YScgaW4gTWVkaWFSZWNvcmRlci5wcm90b3R5cGUpIHtcbiAgICAgICAgaWYgKChtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcyAmJiBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgfHwgKG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzICYmIG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoKSkge1xuICAgICAgICAgICAgLy8gYXVkaW8tb25seSByZWNvcmRpbmdcbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQgPT09ICdmdW5jdGlvbicgJiYgTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoJ2F1ZGlvL3dlYm0nKSkge1xuICAgICAgICAgICAgICAgICAgICByZWNvcmRlciA9IE1lZGlhU3RyZWFtUmVjb3JkZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVsc2UgcmVjb3JkZXIgPSBTdGVyZW9BdWRpb1JlY29yZGVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB2aWRlbyBvciBzY3JlZW4gdHJhY2tzXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZCA9PT0gJ2Z1bmN0aW9uJyAmJiBNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZCgndmlkZW8vd2VibScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY29yZGVyID0gTWVkaWFTdHJlYW1SZWNvcmRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLnJlY29yZGVyVHlwZSkge1xuICAgICAgICByZWNvcmRlciA9IGNvbmZpZy5yZWNvcmRlclR5cGU7XG4gICAgfVxuXG4gICAgaWYgKG1lZGlhU3RyZWFtIGluc3RhbmNlb2YgQXJyYXkgJiYgbWVkaWFTdHJlYW0ubGVuZ3RoKSB7XG4gICAgICAgIHJlY29yZGVyID0gTXVsdGlTdHJlYW1SZWNvcmRlcjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncyAmJiAhIXJlY29yZGVyICYmICEhcmVjb3JkZXIubmFtZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdVc2luZyByZWNvcmRlclR5cGU6JywgcmVjb3JkZXIubmFtZSB8fCByZWNvcmRlci5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb3JkZXI7XG59XG5cbi8vIF9fX19fX19fX19fX19cbi8vIE1SZWNvcmRSVEMuanNcblxuLyoqXG4gKiBNUmVjb3JkUlRDIHJ1bnMgb24gdG9wIG9mIHtAbGluayBSZWNvcmRSVEN9IHRvIGJyaW5nIG11bHRpcGxlIHJlY29yZGluZ3MgaW4gYSBzaW5nbGUgcGxhY2UsIGJ5IHByb3ZpZGluZyBzaW1wbGUgQVBJLlxuICogQHN1bW1hcnkgTVJlY29yZFJUQyBzdGFuZHMgZm9yIFwiTXVsdGlwbGUtUmVjb3JkUlRDXCIuXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBNUmVjb3JkUlRDXG4gKiBAY2xhc3NcbiAqIEBleGFtcGxlXG4gKiB2YXIgcmVjb3JkZXIgPSBuZXcgTVJlY29yZFJUQygpO1xuICogcmVjb3JkZXIuYWRkU3RyZWFtKE1lZGlhU3RyZWFtKTtcbiAqIHJlY29yZGVyLm1lZGlhVHlwZSA9IHtcbiAqICAgICBhdWRpbzogdHJ1ZSwgLy8gb3IgU3RlcmVvQXVkaW9SZWNvcmRlciBvciBNZWRpYVN0cmVhbVJlY29yZGVyXG4gKiAgICAgdmlkZW86IHRydWUsIC8vIG9yIFdoYW1teVJlY29yZGVyIG9yIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAqICAgICBnaWY6IHRydWUgICAgLy8gb3IgR2lmUmVjb3JkZXJcbiAqIH07XG4gKiAvLyBtaW1lVHlwZSBpcyBvcHRpb25hbCBhbmQgc2hvdWxkIGJlIHNldCBvbmx5IGluIGFkdmFuY2UgY2FzZXMuXG4gKiByZWNvcmRlci5taW1lVHlwZSA9IHtcbiAqICAgICBhdWRpbzogJ2F1ZGlvL3dhdicsXG4gKiAgICAgdmlkZW86ICd2aWRlby93ZWJtJyxcbiAqICAgICBnaWY6ICAgJ2ltYWdlL2dpZidcbiAqIH07XG4gKiByZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICogQHNlZSBGb3IgZnVydGhlciBpbmZvcm1hdGlvbjpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDL3RyZWUvbWFzdGVyL01SZWNvcmRSVEN8TVJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gTWVkaWFTdHJlYW0gb2JqZWN0IGZldGNoZWQgdXNpbmcgZ2V0VXNlck1lZGlhIEFQSSBvciBnZW5lcmF0ZWQgdXNpbmcgY2FwdHVyZVN0cmVhbVVudGlsRW5kZWQgb3IgV2ViQXVkaW8gQVBJLlxuICovXG5cbmZ1bmN0aW9uIE1SZWNvcmRSVEMobWVkaWFTdHJlYW0pIHtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGF0dGFjaGVzIE1lZGlhU3RyZWFtIG9iamVjdCB0byB7QGxpbmsgTVJlY29yZFJUQ30uXG4gICAgICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gbWVkaWFTdHJlYW0gLSBBIE1lZGlhU3RyZWFtIG9iamVjdCwgZWl0aGVyIGZldGNoZWQgdXNpbmcgZ2V0VXNlck1lZGlhIEFQSSwgb3IgZ2VuZXJhdGVkIHVzaW5nIGNhcHR1cmVTdHJlYW1VbnRpbEVuZGVkIG9yIFdlYkF1ZGlvIEFQSS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmFkZFN0cmVhbShNZWRpYVN0cmVhbSk7XG4gICAgICovXG4gICAgdGhpcy5hZGRTdHJlYW0gPSBmdW5jdGlvbihfbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgaWYgKF9tZWRpYVN0cmVhbSkge1xuICAgICAgICAgICAgbWVkaWFTdHJlYW0gPSBfbWVkaWFTdHJlYW07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBwcm9wZXJ0eSBjYW4gYmUgdXNlZCB0byBzZXQgdGhlIHJlY29yZGluZyB0eXBlIGUuZy4gYXVkaW8sIG9yIHZpZGVvLCBvciBnaWYsIG9yIGNhbnZhcy5cbiAgICAgKiBAcHJvcGVydHkge29iamVjdH0gbWVkaWFUeXBlIC0ge2F1ZGlvOiB0cnVlLCB2aWRlbzogdHJ1ZSwgZ2lmOiB0cnVlfVxuICAgICAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiB2YXIgcmVjb3JkZXIgPSBuZXcgTVJlY29yZFJUQygpO1xuICAgICAqIHJlY29yZGVyLm1lZGlhVHlwZSA9IHtcbiAgICAgKiAgICAgYXVkaW86IHRydWUsIC8vIFRSVUUgb3IgU3RlcmVvQXVkaW9SZWNvcmRlciBvciBNZWRpYVN0cmVhbVJlY29yZGVyXG4gICAgICogICAgIHZpZGVvOiB0cnVlLCAvLyBUUlVFIG9yIFdoYW1teVJlY29yZGVyIG9yIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAgICAgKiAgICAgZ2lmICA6IHRydWUgIC8vIFRSVUUgb3IgR2lmUmVjb3JkZXJcbiAgICAgKiB9O1xuICAgICAqL1xuICAgIHRoaXMubWVkaWFUeXBlID0ge1xuICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgdmlkZW86IHRydWVcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgc3RhcnRzIHJlY29yZGluZy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG4gICAgICovXG4gICAgdGhpcy5zdGFydFJlY29yZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWVkaWFUeXBlID0gdGhpcy5tZWRpYVR5cGU7XG4gICAgICAgIHZhciByZWNvcmRlclR5cGU7XG4gICAgICAgIHZhciBtaW1lVHlwZSA9IHRoaXMubWltZVR5cGUgfHwge1xuICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICB2aWRlbzogbnVsbCxcbiAgICAgICAgICAgIGdpZjogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0eXBlb2YgbWVkaWFUeXBlLmF1ZGlvICE9PSAnZnVuY3Rpb24nICYmIGlzTWVkaWFSZWNvcmRlckNvbXBhdGlibGUoKSAmJiBtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcyAmJiAhbWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggc3VwcG9ydHMgYm90aCBhdWRpby92aWRlbyBpbiBzaW5nbGUgYmxvYlxuICAgICAgICAgICAgbWVkaWFUeXBlLmF1ZGlvID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG1lZGlhVHlwZS52aWRlbyAhPT0gJ2Z1bmN0aW9uJyAmJiBpc01lZGlhUmVjb3JkZXJDb21wYXRpYmxlKCkgJiYgbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MgJiYgIW1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGaXJlZm94IHN1cHBvcnRzIGJvdGggYXVkaW8vdmlkZW8gaW4gc2luZ2xlIGJsb2JcbiAgICAgICAgICAgIG1lZGlhVHlwZS52aWRlbyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtZWRpYVR5cGUuYXVkaW8gJiYgIW1lZGlhVHlwZS52aWRlbykge1xuICAgICAgICAgICAgdGhyb3cgJ01lZGlhU3RyZWFtIG11c3QgaGF2ZSBlaXRoZXIgYXVkaW8gb3IgdmlkZW8gdHJhY2tzLic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFtZWRpYVR5cGUuYXVkaW8pIHtcbiAgICAgICAgICAgIHJlY29yZGVyVHlwZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lZGlhVHlwZS5hdWRpbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZSA9IG1lZGlhVHlwZS5hdWRpbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hdWRpb1JlY29yZGVyID0gbmV3IFJlY29yZFJUQyhtZWRpYVN0cmVhbSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICAgICAgYnVmZmVyU2l6ZTogdGhpcy5idWZmZXJTaXplLFxuICAgICAgICAgICAgICAgIHNhbXBsZVJhdGU6IHRoaXMuc2FtcGxlUmF0ZSxcbiAgICAgICAgICAgICAgICBudW1iZXJPZkF1ZGlvQ2hhbm5lbHM6IHRoaXMubnVtYmVyT2ZBdWRpb0NoYW5uZWxzIHx8IDIsXG4gICAgICAgICAgICAgICAgZGlzYWJsZUxvZ3M6IHRoaXMuZGlzYWJsZUxvZ3MsXG4gICAgICAgICAgICAgICAgcmVjb3JkZXJUeXBlOiByZWNvcmRlclR5cGUsXG4gICAgICAgICAgICAgICAgbWltZVR5cGU6IG1pbWVUeXBlLmF1ZGlvXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFtZWRpYVR5cGUudmlkZW8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIW1lZGlhVHlwZS52aWRlbykge1xuICAgICAgICAgICAgcmVjb3JkZXJUeXBlID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVkaWFUeXBlLnZpZGVvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkZXJUeXBlID0gbWVkaWFUeXBlLnZpZGVvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbmV3U3RyZWFtID0gbWVkaWFTdHJlYW07XG5cbiAgICAgICAgICAgIGlmIChpc01lZGlhUmVjb3JkZXJDb21wYXRpYmxlKCkgJiYgISFtZWRpYVR5cGUuYXVkaW8gJiYgdHlwZW9mIG1lZGlhVHlwZS5hdWRpbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciB2aWRlb1RyYWNrID0gbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcblxuICAgICAgICAgICAgICAgIGlmICghIW5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0cmVhbS5hZGRUcmFjayh2aWRlb1RyYWNrKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVjb3JkZXJUeXBlICYmIHJlY29yZGVyVHlwZSA9PT0gV2hhbW15UmVjb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggZG9lcyBOT1Qgc3VwcG9ydCB3ZWJwLWVuY29kaW5nIHlldFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkZXJUeXBlID0gTWVkaWFTdHJlYW1SZWNvcmRlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbShbdmlkZW9UcmFja10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy52aWRlb1JlY29yZGVyID0gbmV3IFJlY29yZFJUQyhuZXdTdHJlYW0sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8nLFxuICAgICAgICAgICAgICAgIHZpZGVvOiB0aGlzLnZpZGVvLFxuICAgICAgICAgICAgICAgIGNhbnZhczogdGhpcy5jYW52YXMsXG4gICAgICAgICAgICAgICAgZnJhbWVJbnRlcnZhbDogdGhpcy5mcmFtZUludGVydmFsIHx8IDEwLFxuICAgICAgICAgICAgICAgIGRpc2FibGVMb2dzOiB0aGlzLmRpc2FibGVMb2dzLFxuICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZTogcmVjb3JkZXJUeXBlLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZS52aWRlb1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghbWVkaWFUeXBlLmF1ZGlvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1JlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFtZWRpYVR5cGUuYXVkaW8gJiYgISFtZWRpYVR5cGUudmlkZW8pIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGlmIChpc01lZGlhUmVjb3JkZXJDb21wYXRpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmF1ZGlvUmVjb3JkZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNlbGYudmlkZW9SZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLnZpZGVvUmVjb3JkZXIuaW5pdFJlY29yZGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1ZGlvUmVjb3JkZXIuaW5pdFJlY29yZGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm90aCByZWNvcmRlcnMgYXJlIHJlYWR5IHRvIHJlY29yZCB0aGluZ3MgYWNjdXJhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi52aWRlb1JlY29yZGVyLnN0YXJ0UmVjb3JkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmF1ZGlvUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFtZWRpYVR5cGUuZ2lmKSB7XG4gICAgICAgICAgICByZWNvcmRlclR5cGUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZWRpYVR5cGUuZ2lmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkZXJUeXBlID0gbWVkaWFUeXBlLmdpZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2lmUmVjb3JkZXIgPSBuZXcgUmVjb3JkUlRDKG1lZGlhU3RyZWFtLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2dpZicsXG4gICAgICAgICAgICAgICAgZnJhbWVSYXRlOiB0aGlzLmZyYW1lUmF0ZSB8fCAyMDAsXG4gICAgICAgICAgICAgICAgcXVhbGl0eTogdGhpcy5xdWFsaXR5IHx8IDEwLFxuICAgICAgICAgICAgICAgIGRpc2FibGVMb2dzOiB0aGlzLmRpc2FibGVMb2dzLFxuICAgICAgICAgICAgICAgIHJlY29yZGVyVHlwZTogcmVjb3JkZXJUeXBlLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZS5naWZcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5naWZSZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0b3BzIHJlY29yZGluZy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uIGlzIGludm9rZWQgd2hlbiBhbGwgZW5jb2RlcnMgZmluaXNoZWQgdGhlaXIgam9icy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24ocmVjb3JkaW5nKXtcbiAgICAgKiAgICAgdmFyIGF1ZGlvQmxvYiA9IHJlY29yZGluZy5hdWRpbztcbiAgICAgKiAgICAgdmFyIHZpZGVvQmxvYiA9IHJlY29yZGluZy52aWRlbztcbiAgICAgKiAgICAgdmFyIGdpZkJsb2IgICA9IHJlY29yZGluZy5naWY7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgdGhpcy5zdG9wUmVjb3JkaW5nID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9SZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKGJsb2JVUkwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhibG9iVVJMLCAnYXVkaW8nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudmlkZW9SZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy52aWRlb1JlY29yZGVyLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oYmxvYlVSTCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGJsb2JVUkwsICd2aWRlbycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5naWZSZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy5naWZSZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKGJsb2JVUkwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhibG9iVVJMLCAnZ2lmJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwYXVzZXMgcmVjb3JkaW5nLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTVJlY29yZFJUQ1xuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucGF1c2VSZWNvcmRpbmcoKTtcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlUmVjb3JkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9SZWNvcmRlci5wYXVzZVJlY29yZGluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudmlkZW9SZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy52aWRlb1JlY29yZGVyLnBhdXNlUmVjb3JkaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5naWZSZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy5naWZSZWNvcmRlci5wYXVzZVJlY29yZGluZygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc3VtZXMgcmVjb3JkaW5nLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTVJlY29yZFJUQ1xuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVzdW1lUmVjb3JkaW5nKCk7XG4gICAgICovXG4gICAgdGhpcy5yZXN1bWVSZWNvcmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9SZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy5hdWRpb1JlY29yZGVyLnJlc3VtZVJlY29yZGluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudmlkZW9SZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy52aWRlb1JlY29yZGVyLnJlc3VtZVJlY29yZGluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ2lmUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2lmUmVjb3JkZXIucmVzdW1lUmVjb3JkaW5nKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gbWFudWFsbHkgZ2V0IGFsbCByZWNvcmRlZCBibG9icy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEFsbCByZWNvcmRlZCBibG9icyBhcmUgcGFzc2VkIGJhY2sgdG8gdGhlIFwiY2FsbGJhY2tcIiBmdW5jdGlvbi5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmdldEJsb2IoZnVuY3Rpb24ocmVjb3JkaW5nKXtcbiAgICAgKiAgICAgdmFyIGF1ZGlvQmxvYiA9IHJlY29yZGluZy5hdWRpbztcbiAgICAgKiAgICAgdmFyIHZpZGVvQmxvYiA9IHJlY29yZGluZy52aWRlbztcbiAgICAgKiAgICAgdmFyIGdpZkJsb2IgICA9IHJlY29yZGluZy5naWY7XG4gICAgICogfSk7XG4gICAgICogLy8gb3JcbiAgICAgKiB2YXIgYXVkaW9CbG9iID0gcmVjb3JkZXIuZ2V0QmxvYigpLmF1ZGlvO1xuICAgICAqIHZhciB2aWRlb0Jsb2IgPSByZWNvcmRlci5nZXRCbG9iKCkudmlkZW87XG4gICAgICovXG4gICAgdGhpcy5nZXRCbG9iID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIG91dHB1dC5hdWRpbyA9IHRoaXMuYXVkaW9SZWNvcmRlci5nZXRCbG9iKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy52aWRlb1JlY29yZGVyKSB7XG4gICAgICAgICAgICBvdXRwdXQudmlkZW8gPSB0aGlzLnZpZGVvUmVjb3JkZXIuZ2V0QmxvYigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ2lmUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIG91dHB1dC5naWYgPSB0aGlzLmdpZlJlY29yZGVyLmdldEJsb2IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2sob3V0cHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIG1hbnVhbGx5IGdldCBhbGwgcmVjb3JkZWQgYmxvYnMnIERhdGFVUkxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQWxsIHJlY29yZGVkIGJsb2JzJyBEYXRhVVJMcyBhcmUgcGFzc2VkIGJhY2sgdG8gdGhlIFwiY2FsbGJhY2tcIiBmdW5jdGlvbi5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmdldERhdGFVUkwoZnVuY3Rpb24ocmVjb3JkaW5nKXtcbiAgICAgKiAgICAgdmFyIGF1ZGlvRGF0YVVSTCA9IHJlY29yZGluZy5hdWRpbztcbiAgICAgKiAgICAgdmFyIHZpZGVvRGF0YVVSTCA9IHJlY29yZGluZy52aWRlbztcbiAgICAgKiAgICAgdmFyIGdpZkRhdGFVUkwgICA9IHJlY29yZGluZy5naWY7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgdGhpcy5nZXREYXRhVVJMID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5nZXRCbG9iKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgICAgICAgIGlmIChibG9iLmF1ZGlvICYmIGJsb2IudmlkZW8pIHtcbiAgICAgICAgICAgICAgICBnZXREYXRhVVJMKGJsb2IuYXVkaW8sIGZ1bmN0aW9uKF9hdWRpb0RhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0RGF0YVVSTChibG9iLnZpZGVvLCBmdW5jdGlvbihfdmlkZW9EYXRhVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IF9hdWRpb0RhdGFVUkwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IF92aWRlb0RhdGFVUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYmxvYi5hdWRpbykge1xuICAgICAgICAgICAgICAgIGdldERhdGFVUkwoYmxvYi5hdWRpbywgZnVuY3Rpb24oX2F1ZGlvRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogX2F1ZGlvRGF0YVVSTFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYmxvYi52aWRlbykge1xuICAgICAgICAgICAgICAgIGdldERhdGFVUkwoYmxvYi52aWRlbywgZnVuY3Rpb24oX3ZpZGVvRGF0YVVSTCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzogX3ZpZGVvRGF0YVVSTFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RGF0YVVSTChibG9iLCBjYWxsYmFjazAwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2ViV29ya2VyID0gcHJvY2Vzc0luV2ViV29ya2VyKGZ1bmN0aW9uIHJlYWRGaWxlKF9ibG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKG5ldyBGaWxlUmVhZGVyU3luYygpLnJlYWRBc0RhdGFVUkwoX2Jsb2IpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHdlYldvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazAwKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB3ZWJXb3JrZXIucG9zdE1lc3NhZ2UoYmxvYik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazAwKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzSW5XZWJXb3JrZXIoX2Z1bmN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYmxvYiA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW19mdW5jdGlvbi50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICd0aGlzLm9ubWVzc2FnZSA9ICBmdW5jdGlvbiAoZSkgeycgKyBfZnVuY3Rpb24ubmFtZSArICcoZS5kYXRhKTt9J1xuICAgICAgICAgICAgXSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0J1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihibG9iKTtcbiAgICAgICAgICAgIHZhciB1cmw7XG4gICAgICAgICAgICBpZiAodHlwZW9mIFVSTCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cmwgPSBVUkw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWJraXRVUkwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gd2Via2l0VVJMO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnTmVpdGhlciBVUkwgbm9yIHdlYmtpdFVSTCBkZXRlY3RlZC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsLnJldm9rZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgIHJldHVybiB3b3JrZXI7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gYXNrIHtAbGluayBNUmVjb3JkUlRDfSB0byB3cml0ZSBhbGwgcmVjb3JkZWQgYmxvYnMgaW50byBJbmRleGVkREIgc3RvcmFnZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1SZWNvcmRSVENcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLndyaXRlVG9EaXNrKCk7XG4gICAgICovXG4gICAgdGhpcy53cml0ZVRvRGlzayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBSZWNvcmRSVEMud3JpdGVUb0Rpc2soe1xuICAgICAgICAgICAgYXVkaW86IHRoaXMuYXVkaW9SZWNvcmRlcixcbiAgICAgICAgICAgIHZpZGVvOiB0aGlzLnZpZGVvUmVjb3JkZXIsXG4gICAgICAgICAgICBnaWY6IHRoaXMuZ2lmUmVjb3JkZXJcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGludm9rZSBhIHNhdmUtYXMgZGlhbG9nIGZvciBhbGwgcmVjb3JkZWQgYmxvYnMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFyZ3MgLSB7YXVkaW86ICdhdWRpby1uYW1lJywgdmlkZW86ICd2aWRlby1uYW1lJywgZ2lmOiAnZ2lmLW5hbWUnfVxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTVJlY29yZFJUQ1xuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuc2F2ZSh7XG4gICAgICogICAgIGF1ZGlvOiAnYXVkaW8tZmlsZS1uYW1lJyxcbiAgICAgKiAgICAgdmlkZW86ICd2aWRlby1maWxlLW5hbWUnLFxuICAgICAqICAgICBnaWYgIDogJ2dpZi1maWxlLW5hbWUnXG4gICAgICogfSk7XG4gICAgICovXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgICBhcmdzID0gYXJncyB8fCB7XG4gICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgIHZpZGVvOiB0cnVlLFxuICAgICAgICAgICAgZ2lmOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCEhYXJncy5hdWRpbyAmJiB0aGlzLmF1ZGlvUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9SZWNvcmRlci5zYXZlKHR5cGVvZiBhcmdzLmF1ZGlvID09PSAnc3RyaW5nJyA/IGFyZ3MuYXVkaW8gOiAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFhcmdzLnZpZGVvICYmIHRoaXMudmlkZW9SZWNvcmRlcikge1xuICAgICAgICAgICAgdGhpcy52aWRlb1JlY29yZGVyLnNhdmUodHlwZW9mIGFyZ3MudmlkZW8gPT09ICdzdHJpbmcnID8gYXJncy52aWRlbyA6ICcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFhcmdzLmdpZiAmJiB0aGlzLmdpZlJlY29yZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmdpZlJlY29yZGVyLnNhdmUodHlwZW9mIGFyZ3MuZ2lmID09PSAnc3RyaW5nJyA/IGFyZ3MuZ2lmIDogJycpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBnZXQgYWxsIHJlY29yZGVkIGJsb2JzIGZyb20gSW5kZXhlZERCIHN0b3JhZ2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtICdhbGwnIG9yICdhdWRpbycgb3IgJ3ZpZGVvJyBvciAnZ2lmJ1xuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiB0byBnZXQgYWxsIHN0b3JlZCBibG9icy5cbiAqIEBtZXRob2RcbiAqIEBtZW1iZXJvZiBNUmVjb3JkUlRDXG4gKiBAZXhhbXBsZVxuICogTVJlY29yZFJUQy5nZXRGcm9tRGlzaygnYWxsJywgZnVuY3Rpb24oZGF0YVVSTCwgdHlwZSl7XG4gKiAgICAgaWYodHlwZSA9PT0gJ2F1ZGlvJykgeyB9XG4gKiAgICAgaWYodHlwZSA9PT0gJ3ZpZGVvJykgeyB9XG4gKiAgICAgaWYodHlwZSA9PT0gJ2dpZicpICAgeyB9XG4gKiB9KTtcbiAqL1xuTVJlY29yZFJUQy5nZXRGcm9tRGlzayA9IFJlY29yZFJUQy5nZXRGcm9tRGlzaztcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBzdG9yZSByZWNvcmRlZCBibG9icyBpbnRvIEluZGV4ZWREQiBzdG9yYWdlLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSB7YXVkaW86IEJsb2IsIHZpZGVvOiBCbG9iLCBnaWY6IEJsb2J9XG4gKiBAbWV0aG9kXG4gKiBAbWVtYmVyb2YgTVJlY29yZFJUQ1xuICogQGV4YW1wbGVcbiAqIE1SZWNvcmRSVEMud3JpdGVUb0Rpc2soe1xuICogICAgIGF1ZGlvOiBhdWRpb0Jsb2IsXG4gKiAgICAgdmlkZW86IHZpZGVvQmxvYixcbiAqICAgICBnaWYgIDogZ2lmQmxvYlxuICogfSk7XG4gKi9cbk1SZWNvcmRSVEMud3JpdGVUb0Rpc2sgPSBSZWNvcmRSVEMud3JpdGVUb0Rpc2s7XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5NUmVjb3JkUlRDID0gTVJlY29yZFJUQztcbn1cblxudmFyIGJyb3dzZXJGYWtlVXNlckFnZW50ID0gJ0Zha2UvNS4wIChGYWtlT1MpIEFwcGxlV2ViS2l0LzEyMyAoS0hUTUwsIGxpa2UgR2Vja28pIEZha2UvMTIuMy40NTY3Ljg5IEZha2UvMTIzLjQ1JztcblxuKGZ1bmN0aW9uKHRoYXQpIHtcbiAgICBpZiAoIXRoYXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBnbG9iYWwubmF2aWdhdG9yID0ge1xuICAgICAgICB1c2VyQWdlbnQ6IGJyb3dzZXJGYWtlVXNlckFnZW50LFxuICAgICAgICBnZXRVc2VyTWVkaWE6IGZ1bmN0aW9uKCkge31cbiAgICB9O1xuXG4gICAgaWYgKCFnbG9iYWwuY29uc29sZSkge1xuICAgICAgICBnbG9iYWwuY29uc29sZSA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsLmNvbnNvbGUuZGVidWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGdsb2JhbC5jb25zb2xlLmRlYnVnID0gZ2xvYmFsLmNvbnNvbGUuaW5mbyA9IGdsb2JhbC5jb25zb2xlLmVycm9yID0gZ2xvYmFsLmNvbnNvbGUubG9nID0gZ2xvYmFsLmNvbnNvbGUubG9nIHx8IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCBkb2N1bWVudDp0cnVlICovXG4gICAgICAgIHRoYXQuZG9jdW1lbnQgPSB7fTtcblxuICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZG9jdW1lbnQuY2FwdHVyZVN0cmVhbSA9IGRvY3VtZW50Lm1vekNhcHR1cmVTdHJlYW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgZ2V0Q29udGV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwbGF5OiBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgICAgIHBhdXNlOiBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgICAgIGRyYXdJbWFnZTogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgICAgICB0b0RhdGFVUkw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhhdC5IVE1MVmlkZW9FbGVtZW50ID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCBsb2NhdGlvbjp0cnVlICovXG4gICAgICAgIHRoYXQubG9jYXRpb24gPSB7XG4gICAgICAgICAgICBwcm90b2NvbDogJ2ZpbGU6JyxcbiAgICAgICAgICAgIGhyZWY6ICcnLFxuICAgICAgICAgICAgaGFzaDogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNjcmVlbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgc2NyZWVuOnRydWUgKi9cbiAgICAgICAgdGhhdC5zY3JlZW4gPSB7XG4gICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgIGhlaWdodDogMFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgVVJMID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCBzY3JlZW46dHJ1ZSAqL1xuICAgICAgICB0aGF0LlVSTCA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9iamVjdFVSTDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJldm9rZU9iamVjdFVSTDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qZ2xvYmFsIHdpbmRvdzp0cnVlICovXG4gICAgdGhhdC53aW5kb3cgPSBnbG9iYWw7XG59KSh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IG51bGwpO1xuXG4vLyBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xuLy8gQ3Jvc3MtQnJvd3Nlci1EZWNsYXJhdGlvbnMuanNcblxuLy8gYW5pbWF0aW9uLWZyYW1lIHVzZWQgaW4gV2ViTSByZWNvcmRpbmdcblxuLypqc2hpbnQgLVcwNzkgKi9cbnZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuaWYgKHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiB3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qZ2xvYmFsIHJlcXVlc3RBbmltYXRpb25GcmFtZTp0cnVlICovXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG1velJlcXVlc3RBbmltYXRpb25GcmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOnRydWUgKi9cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gbW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIH1cbn1cblxuLypqc2hpbnQgLVcwNzkgKi9cbnZhciBjYW5jZWxBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZTtcbmlmICh0eXBlb2YgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiB3ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLypnbG9iYWwgY2FuY2VsQW5pbWF0aW9uRnJhbWU6dHJ1ZSAqL1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSA9IHdlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qZ2xvYmFsIGNhbmNlbEFuaW1hdGlvbkZyYW1lOnRydWUgKi9cbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBtb3pDYW5jZWxBbmltYXRpb25GcmFtZTtcbiAgICB9XG59XG5cbi8vIFdlYkF1ZGlvIEFQSSByZXByZXNlbnRlclxudmFyIEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQ7XG5cbmlmICh0eXBlb2YgQXVkaW9Db250ZXh0ID09PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKmdsb2JhbCBBdWRpb0NvbnRleHQ6dHJ1ZSAqL1xuICAgICAgICBBdWRpb0NvbnRleHQgPSB3ZWJraXRBdWRpb0NvbnRleHQ7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBtb3pBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qZ2xvYmFsIEF1ZGlvQ29udGV4dDp0cnVlICovXG4gICAgICAgIEF1ZGlvQ29udGV4dCA9IG1vekF1ZGlvQ29udGV4dDtcbiAgICB9XG59XG5cbi8qanNoaW50IC1XMDc5ICovXG52YXIgVVJMID0gd2luZG93LlVSTDtcblxuaWYgKHR5cGVvZiBVUkwgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3ZWJraXRVUkwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLypnbG9iYWwgVVJMOnRydWUgKi9cbiAgICBVUkwgPSB3ZWJraXRVUkw7XG59XG5cbmlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9PT0gJ3VuZGVmaW5lZCcpIHsgLy8gbWF5YmUgd2luZG93Lm5hdmlnYXRvcj9cbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWE7XG4gICAgfVxufVxuXG52YXIgaXNFZGdlID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdFZGdlJykgIT09IC0xICYmICghIW5hdmlnYXRvci5tc1NhdmVCbG9iIHx8ICEhbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpO1xudmFyIGlzT3BlcmEgPSAhIXdpbmRvdy5vcGVyYSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ09QUi8nKSAhPT0gLTE7XG52YXIgaXNDaHJvbWUgPSAhaXNPcGVyYSAmJiAhaXNFZGdlICYmICEhbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYTtcblxudmFyIE1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtO1xuXG5pZiAodHlwZW9mIE1lZGlhU3RyZWFtID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2Via2l0TWVkaWFTdHJlYW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgTWVkaWFTdHJlYW0gPSB3ZWJraXRNZWRpYVN0cmVhbTtcbn1cblxuLypnbG9iYWwgTWVkaWFTdHJlYW06dHJ1ZSAqL1xuaWYgKHR5cGVvZiBNZWRpYVN0cmVhbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAoISgnZ2V0VmlkZW9UcmFja3MnIGluIE1lZGlhU3RyZWFtLnByb3RvdHlwZSkpIHtcbiAgICAgICAgTWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldFZpZGVvVHJhY2tzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0VHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdHJhY2tzID0gW107XG4gICAgICAgICAgICB0aGlzLmdldFRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQudG9TdHJpbmcoKS5pbmRleE9mKCd2aWRlbycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFja3MucHVzaCh0cmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHJhY2tzO1xuICAgICAgICB9O1xuXG4gICAgICAgIE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRBdWRpb1RyYWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldFRyYWNrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5nZXRUcmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgICAgICAgIGlmICh0cmFjay5raW5kLnRvU3RyaW5nKCkuaW5kZXhPZignYXVkaW8nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNrcztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoISgnc3RvcCcgaW4gTWVkaWFTdHJlYW0ucHJvdG90eXBlKSkge1xuICAgICAgICBNZWRpYVN0cmVhbS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoISF0cmFjay5zdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoISF0cmFjay5zdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8vIGJlbG93IGZ1bmN0aW9uIHZpYTogaHR0cDovL2dvby5nbC9CM2FlOGNcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGJ5dGVzIC0gUGFzcyBieXRlcyBhbmQgZ2V0IGZvcm1hZnRlZCBzdHJpbmcuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIGZvcm1hZnRlZCBzdHJpbmdcbiAqIEBleGFtcGxlXG4gKiBieXRlc1RvU2l6ZSgxMDI0KjEwMjQqNSkgPT09ICc1IEdCJ1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICovXG5mdW5jdGlvbiBieXRlc1RvU2l6ZShieXRlcykge1xuICAgIHZhciBrID0gMTAwMDtcbiAgICB2YXIgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJ107XG4gICAgaWYgKGJ5dGVzID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnMCBCeXRlcyc7XG4gICAgfVxuICAgIHZhciBpID0gcGFyc2VJbnQoTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSksIDEwKTtcbiAgICByZXR1cm4gKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvUHJlY2lzaW9uKDMpICsgJyAnICsgc2l6ZXNbaV07XG59XG5cbi8qKlxuICogQHBhcmFtIHtCbG9ifSBmaWxlIC0gRmlsZSBvciBCbG9iIG9iamVjdC4gVGhpcyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWUgLSBPcHRpb25hbCBmaWxlIG5hbWUgZS5nLiBcIlJlY29yZGVkLVZpZGVvLndlYm1cIlxuICogQGV4YW1wbGVcbiAqIGludm9rZVNhdmVBc0RpYWxvZyhibG9iIG9yIGZpbGUsIFtvcHRpb25hbF0gZmlsZU5hbWUpO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICovXG5mdW5jdGlvbiBpbnZva2VTYXZlQXNEaWFsb2coZmlsZSwgZmlsZU5hbWUpIHtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgdGhyb3cgJ0Jsb2Igb2JqZWN0IGlzIHJlcXVpcmVkLic7XG4gICAgfVxuXG4gICAgaWYgKCFmaWxlLnR5cGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZpbGUudHlwZSA9ICd2aWRlby93ZWJtJztcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG5cbiAgICB2YXIgZmlsZUV4dGVuc2lvbiA9IChmaWxlLnR5cGUgfHwgJ3ZpZGVvL3dlYm0nKS5zcGxpdCgnLycpWzFdO1xuXG4gICAgaWYgKGZpbGVOYW1lICYmIGZpbGVOYW1lLmluZGV4T2YoJy4nKSAhPT0gLTEpIHtcbiAgICAgICAgdmFyIHNwbGl0dGVkID0gZmlsZU5hbWUuc3BsaXQoJy4nKTtcbiAgICAgICAgZmlsZU5hbWUgPSBzcGxpdHRlZFswXTtcbiAgICAgICAgZmlsZUV4dGVuc2lvbiA9IHNwbGl0dGVkWzFdO1xuICAgIH1cblxuICAgIHZhciBmaWxlRnVsbE5hbWUgPSAoZmlsZU5hbWUgfHwgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDk5OTk5OTk5OTkpICsgODg4ODg4ODg4KSkgKyAnLicgKyBmaWxlRXh0ZW5zaW9uO1xuXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGZpbGUsIGZpbGVGdWxsTmFtZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1zU2F2ZUJsb2IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IubXNTYXZlQmxvYihmaWxlLCBmaWxlRnVsbE5hbWUpO1xuICAgIH1cblxuICAgIHZhciBoeXBlcmxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgaHlwZXJsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgIGh5cGVybGluay50YXJnZXQgPSAnX2JsYW5rJztcbiAgICBoeXBlcmxpbmsuZG93bmxvYWQgPSBmaWxlRnVsbE5hbWU7XG5cbiAgICBpZiAoISFuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgIGh5cGVybGluay5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAoZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnJlbW92ZUNoaWxkKGh5cGVybGluayk7XG4gICAgICAgIH07XG4gICAgICAgIChkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoaHlwZXJsaW5rKTtcbiAgICB9XG5cbiAgICB2YXIgZXZ0ID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJywge1xuICAgICAgICB2aWV3OiB3aW5kb3csXG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KTtcblxuICAgIGh5cGVybGluay5kaXNwYXRjaEV2ZW50KGV2dCk7XG5cbiAgICBpZiAoIW5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChoeXBlcmxpbmsuaHJlZik7XG4gICAgfVxufVxuXG4vLyBfX19fX19fX19fICh1c2VkIHRvIGhhbmRsZSBzdHVmZiBsaWtlIGh0dHA6Ly9nb28uZ2wveG1FNWVnKSBpc3N1ZSAjMTI5XG4vLyBTdG9yYWdlLmpzXG5cbi8qKlxuICogU3RvcmFnZSBpcyBhIHN0YW5kYWxvbmUgb2JqZWN0IHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gc3RvcmUgcmV1c2FibGUgb2JqZWN0cyBlLmcuIFwibmV3IEF1ZGlvQ29udGV4dFwiLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQGV4YW1wbGVcbiAqIFN0b3JhZ2UuQXVkaW9Db250ZXh0ID09PSB3ZWJraXRBdWRpb0NvbnRleHRcbiAqIEBwcm9wZXJ0eSB7d2Via2l0QXVkaW9Db250ZXh0fSBBdWRpb0NvbnRleHQgLSBLZWVwcyBhIHJlZmVyZW5jZSB0byBBdWRpb0NvbnRleHQgb2JqZWN0LlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICovXG5cbnZhciBTdG9yYWdlID0ge307XG5cbmlmICh0eXBlb2YgQXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIFN0b3JhZ2UuQXVkaW9Db250ZXh0ID0gQXVkaW9Db250ZXh0O1xufSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIFN0b3JhZ2UuQXVkaW9Db250ZXh0ID0gd2Via2l0QXVkaW9Db250ZXh0O1xufVxuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuU3RvcmFnZSA9IFN0b3JhZ2U7XG59XG5cbmZ1bmN0aW9uIGlzTWVkaWFSZWNvcmRlckNvbXBhdGlibGUoKSB7XG4gICAgdmFyIGlzT3BlcmEgPSAhIXdpbmRvdy5vcGVyYSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJyBPUFIvJykgPj0gMDtcbiAgICB2YXIgaXNDaHJvbWUgPSAhIXdpbmRvdy5jaHJvbWUgJiYgIWlzT3BlcmE7XG4gICAgdmFyIGlzRmlyZWZveCA9IHR5cGVvZiB3aW5kb3cuSW5zdGFsbFRyaWdnZXIgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgaWYgKGlzRmlyZWZveCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgblZlciA9IG5hdmlnYXRvci5hcHBWZXJzaW9uO1xuICAgIHZhciBuQWd0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICB2YXIgZnVsbFZlcnNpb24gPSAnJyArIHBhcnNlRmxvYXQobmF2aWdhdG9yLmFwcFZlcnNpb24pO1xuICAgIHZhciBtYWpvclZlcnNpb24gPSBwYXJzZUludChuYXZpZ2F0b3IuYXBwVmVyc2lvbiwgMTApO1xuICAgIHZhciBuYW1lT2Zmc2V0LCB2ZXJPZmZzZXQsIGl4O1xuXG4gICAgaWYgKGlzQ2hyb21lIHx8IGlzT3BlcmEpIHtcbiAgICAgICAgdmVyT2Zmc2V0ID0gbkFndC5pbmRleE9mKCdDaHJvbWUnKTtcbiAgICAgICAgZnVsbFZlcnNpb24gPSBuQWd0LnN1YnN0cmluZyh2ZXJPZmZzZXQgKyA3KTtcbiAgICB9XG5cbiAgICAvLyB0cmltIHRoZSBmdWxsVmVyc2lvbiBzdHJpbmcgYXQgc2VtaWNvbG9uL3NwYWNlIGlmIHByZXNlbnRcbiAgICBpZiAoKGl4ID0gZnVsbFZlcnNpb24uaW5kZXhPZignOycpKSAhPT0gLTEpIHtcbiAgICAgICAgZnVsbFZlcnNpb24gPSBmdWxsVmVyc2lvbi5zdWJzdHJpbmcoMCwgaXgpO1xuICAgIH1cblxuICAgIGlmICgoaXggPSBmdWxsVmVyc2lvbi5pbmRleE9mKCcgJykpICE9PSAtMSkge1xuICAgICAgICBmdWxsVmVyc2lvbiA9IGZ1bGxWZXJzaW9uLnN1YnN0cmluZygwLCBpeCk7XG4gICAgfVxuXG4gICAgbWFqb3JWZXJzaW9uID0gcGFyc2VJbnQoJycgKyBmdWxsVmVyc2lvbiwgMTApO1xuXG4gICAgaWYgKGlzTmFOKG1ham9yVmVyc2lvbikpIHtcbiAgICAgICAgZnVsbFZlcnNpb24gPSAnJyArIHBhcnNlRmxvYXQobmF2aWdhdG9yLmFwcFZlcnNpb24pO1xuICAgICAgICBtYWpvclZlcnNpb24gPSBwYXJzZUludChuYXZpZ2F0b3IuYXBwVmVyc2lvbiwgMTApO1xuICAgIH1cblxuICAgIHJldHVybiBtYWpvclZlcnNpb24gPj0gNDk7XG59XG5cbi8vIF9fX19fX19fX19fX19fX19fX19fX19cbi8vIE1lZGlhU3RyZWFtUmVjb3JkZXIuanNcblxuLypcbiAqIEltcGxlbWVudGF0aW9uIG9mIGh0dHBzOi8vZHZjcy53My5vcmcvaGcvZGFwL3Jhdy1maWxlL2RlZmF1bHQvbWVkaWEtc3RyZWFtLWNhcHR1cmUvTWVkaWFSZWNvcmRlci5odG1sXG4gKiBUaGUgTWVkaWFSZWNvcmRlciBhY2NlcHRzIGEgbWVkaWFTdHJlYW0gYXMgaW5wdXQgc291cmNlIHBhc3NlZCBmcm9tIFVBLiBXaGVuIHJlY29yZGVyIHN0YXJ0cyxcbiAqIGEgTWVkaWFFbmNvZGVyIHdpbGwgYmUgY3JlYXRlZCBhbmQgYWNjZXB0IHRoZSBtZWRpYVN0cmVhbSBhcyBpbnB1dCBzb3VyY2UuXG4gKiBFbmNvZGVyIHdpbGwgZ2V0IHRoZSByYXcgZGF0YSBieSB0cmFjayBkYXRhIGNoYW5nZXMsIGVuY29kZSBpdCBieSBzZWxlY3RlZCBNSU1FIFR5cGUsIHRoZW4gc3RvcmUgdGhlIGVuY29kZWQgaW4gRW5jb2RlZEJ1ZmZlckNhY2hlIG9iamVjdC5cbiAqIFRoZSBlbmNvZGVkIGRhdGEgd2lsbCBiZSBleHRyYWN0ZWQgb24gZXZlcnkgdGltZXNsaWNlIHBhc3NlZCBmcm9tIFN0YXJ0IGZ1bmN0aW9uIGNhbGwgb3IgYnkgUmVxdWVzdERhdGEgZnVuY3Rpb24uXG4gKiBUaHJlYWQgbW9kZWw6XG4gKiBXaGVuIHRoZSByZWNvcmRlciBzdGFydHMsIGl0IGNyZWF0ZXMgYSBcIk1lZGlhIEVuY29kZXJcIiB0aHJlYWQgdG8gcmVhZCBkYXRhIGZyb20gTWVkaWFFbmNvZGVyIG9iamVjdCBhbmQgc3RvcmUgYnVmZmVyIGluIEVuY29kZWRCdWZmZXJDYWNoZSBvYmplY3QuXG4gKiBBbHNvIGV4dHJhY3QgdGhlIGVuY29kZWQgZGF0YSBhbmQgY3JlYXRlIGJsb2JzIG9uIGV2ZXJ5IHRpbWVzbGljZSBwYXNzZWQgZnJvbSBzdGFydCBmdW5jdGlvbiBvciBSZXF1ZXN0RGF0YSBmdW5jdGlvbiBjYWxsZWQgYnkgVUEuXG4gKi9cblxuLyoqXG4gKiBNZWRpYVN0cmVhbVJlY29yZGVyIGlzIGFuIGFic3RyYWN0aW9uIGxheWVyIGZvciBcIk1lZGlhUmVjb3JkZXIgQVBJXCIuIEl0IGlzIHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gcmVjb3JkIE1lZGlhU3RyZWFtKHMpIGluIEZpcmVmb3guXG4gKiBAc3VtbWFyeSBSdW5zIHRvcCBvdmVyIE1lZGlhUmVjb3JkZXIgQVBJLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgTWVkaWFTdHJlYW1SZWNvcmRlclxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIG9wdGlvbnMgPSB7XG4gKiAgICAgbWltZVR5cGU6ICd2aWRlby93ZWJtJyxcbiAqICAgICBhdWRpb0JpdHNQZXJTZWNvbmQgOiAyNTYgKiA4ICogMTAyNCxcbiAqICAgICB2aWRlb0JpdHNQZXJTZWNvbmQgOiAyNTYgKiA4ICogMTAyNCxcbiAqICAgICBiaXRzUGVyU2Vjb25kOiAyNTYgKiA4ICogMTAyNCwgIC8vIGlmIHRoaXMgaXMgcHJvdmlkZWQsIHNraXAgYWJvdmUgdHdvXG4gKiAgICAgZ2V0TmF0aXZlQmxvYjogdHJ1ZSAvLyBieSBkZWZhdWx0OiBpdCBpcyBmYWxzZVxuICogfVxuICogdmFyIHJlY29yZGVyID0gbmV3IE1lZGlhU3RyZWFtUmVjb3JkZXIoTWVkaWFTdHJlYW0sIG9wdGlvbnMpO1xuICogcmVjb3JkZXIucmVjb3JkKCk7XG4gKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICpcbiAqICAgICAvLyBvclxuICogICAgIHZhciBibG9iID0gcmVjb3JkZXIuYmxvYjtcbiAqIH0pO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gbWVkaWFTdHJlYW0gLSBNZWRpYVN0cmVhbSBvYmplY3QgZmV0Y2hlZCB1c2luZyBnZXRVc2VyTWVkaWEgQVBJIG9yIGdlbmVyYXRlZCB1c2luZyBjYXB0dXJlU3RyZWFtVW50aWxFbmRlZCBvciBXZWJBdWRpbyBBUEkuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0ge2Rpc2FibGVMb2dzOnRydWUsIGluaXRDYWxsYmFjazogZnVuY3Rpb24sIG1pbWVUeXBlOiBcInZpZGVvL3dlYm1cIiwgb25BdWRpb1Byb2Nlc3NTdGFydGVkOiBmdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBNZWRpYVN0cmVhbVJlY29yZGVyKG1lZGlhU3RyZWFtLCBjb25maWcpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge1xuICAgICAgICAvLyBiaXRzUGVyU2Vjb25kOiAyNTYgKiA4ICogMTAyNCxcbiAgICAgICAgbWltZVR5cGU6ICd2aWRlby93ZWJtJ1xuICAgIH07XG5cbiAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgaWYgKG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoICYmIG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtO1xuICAgICAgICAgICAgaWYgKCEhbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuICAgICAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIHN0cmVhbS5hZGRUcmFjayhtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gd2Via2l0TWVkaWFTdHJlYW1cbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0obWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZWRpYVN0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZmlnLm1pbWVUeXBlIHx8IGNvbmZpZy5taW1lVHlwZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYXVkaW8nKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNvbmZpZy5taW1lVHlwZSA9IGlzQ2hyb21lID8gJ2F1ZGlvL3dlYm0nIDogJ2F1ZGlvL29nZyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLm1pbWVUeXBlICYmIGNvbmZpZy5taW1lVHlwZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgIT09ICdhdWRpby9vZ2cnICYmICEhbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuICAgICAgICAgICAgLy8gZm9yY2luZyBiZXR0ZXIgY29kZWNzIG9uIEZpcmVmb3ggKHZpYSAjMTY2KVxuICAgICAgICAgICAgY29uZmlnLm1pbWVUeXBlID0gJ2F1ZGlvL29nZyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZWNvcmRzIE1lZGlhU3RyZWFtLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTWVkaWFTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVjb3JkKCk7XG4gICAgICovXG4gICAgdGhpcy5yZWNvcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5ibG9iID0gbnVsbDtcblxuICAgICAgICB2YXIgcmVjb3JkZXJIaW50cyA9IGNvbmZpZztcblxuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Bhc3NpbmcgZm9sbG93aW5nIGNvbmZpZyBvdmVyIE1lZGlhUmVjb3JkZXIgQVBJLicsIHJlY29yZGVySGludHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIC8vIG1hbmRhdG9yeSB0byBtYWtlIHN1cmUgRmlyZWZveCBkb2Vzbid0IGZhaWxzIHRvIHJlY29yZCBzdHJlYW1zIDMtNCB0aW1lcyB3aXRob3V0IHJlbG9hZGluZyB0aGUgcGFnZS5cbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQ2hyb21lICYmICFpc01lZGlhUmVjb3JkZXJDb21wYXRpYmxlKCkpIHtcbiAgICAgICAgICAgIC8vIHRvIHN1cHBvcnQgdmlkZW8tb25seSByZWNvcmRpbmcgb24gc3RhYmxlXG4gICAgICAgICAgICByZWNvcmRlckhpbnRzID0gJ3ZpZGVvL3ZwOCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkID09PSAnZnVuY3Rpb24nICYmIHJlY29yZGVySGludHMubWltZVR5cGUpIHtcbiAgICAgICAgICAgIGlmICghTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQocmVjb3JkZXJIaW50cy5taW1lVHlwZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01lZGlhUmVjb3JkZXIgQVBJIHNlZW1zIHVuYWJsZSB0byByZWNvcmQgbWltZVR5cGU6JywgcmVjb3JkZXJIaW50cy5taW1lVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVjb3JkZXJIaW50cy5taW1lVHlwZSA9IGNvbmZpZy50eXBlID09PSAnYXVkaW8nID8gJ2F1ZGlvL3dlYm0nIDogJ3ZpZGVvL3dlYm0nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaHR0cDovL2R4ci5tb3ppbGxhLm9yZy9tb3ppbGxhLWNlbnRyYWwvc291cmNlL2NvbnRlbnQvbWVkaWEvTWVkaWFSZWNvcmRlci5jcHBcbiAgICAgICAgLy8gaHR0cHM6Ly93aWtpLm1vemlsbGEub3JnL0dlY2tvOk1lZGlhUmVjb3JkZXJcbiAgICAgICAgLy8gaHR0cHM6Ly9kdmNzLnczLm9yZy9oZy9kYXAvcmF3LWZpbGUvZGVmYXVsdC9tZWRpYS1zdHJlYW0tY2FwdHVyZS9NZWRpYVJlY29yZGVyLmh0bWxcblxuICAgICAgICAvLyBzdGFydGluZyBhIHJlY29yZGluZyBzZXNzaW9uOyB3aGljaCB3aWxsIGluaXRpYXRlIFwiUmVhZGluZyBUaHJlYWRcIlxuICAgICAgICAvLyBcIlJlYWRpbmcgVGhyZWFkXCIgYXJlIHVzZWQgdG8gcHJldmVudCBtYWluLXRocmVhZCBibG9ja2luZyBzY2VuYXJpb3NcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihtZWRpYVN0cmVhbSwgcmVjb3JkZXJIaW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihtZWRpYVN0cmVhbSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIU1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkICYmICdjYW5SZWNvcmRNaW1lVHlwZScgaW4gbWVkaWFSZWNvcmRlciAmJiBtZWRpYVJlY29yZGVyLmNhblJlY29yZE1pbWVUeXBlKGNvbmZpZy5taW1lVHlwZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWVkaWFSZWNvcmRlciBBUEkgc2VlbXMgdW5hYmxlIHRvIHJlY29yZCBtaW1lVHlwZTonLCBjb25maWcubWltZVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaS5lLiBzdG9wIHJlY29yZGluZyB3aGVuIDx2aWRlbz4gaXMgcGF1c2VkIGJ5IHRoZSB1c2VyOyBhbmQgYXV0byByZXN0YXJ0IHJlY29yZGluZyBcbiAgICAgICAgLy8gd2hlbiB2aWRlbyBpcyByZXN1bWVkLiBFLmcuIHlvdXJTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5tdXRlZCA9IHRydWU7IC8vIGl0IHdpbGwgYXV0by1zdG9wIHJlY29yZGluZy5cbiAgICAgICAgbWVkaWFSZWNvcmRlci5pZ25vcmVNdXRlZE1lZGlhID0gY29uZmlnLmlnbm9yZU11dGVkTWVkaWEgfHwgZmFsc2U7XG5cbiAgICAgICAgLy8gRGlzcGF0Y2hpbmcgT25EYXRhQXZhaWxhYmxlIEhhbmRsZXJcbiAgICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5kb250RmlyZU9uRGF0YUF2YWlsYWJsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWUuZGF0YSB8fCAhZS5kYXRhLnNpemUgfHwgZS5kYXRhLnNpemUgPCAxMDAgfHwgc2VsZi5ibG9iKSB7XG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgc3RvcFJlY29yZGluZyBhbHdheXMgZ2V0dGluZyBmaXJlZFxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlcmUgaXMgaW52YWxpZCBkYXRhXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYucmVjb3JkaW5nQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNvcmRpbmdDYWxsYmFjayhuZXcgQmxvYihbXSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmVjb3JkZXJIaW50cy5taW1lVHlwZSB8fCAndmlkZW8vd2VibSdcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY29yZGluZ0NhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QmxvYn0gYmxvYiAtIFJlY29yZGVkIGZyYW1lcyBpbiB2aWRlby93ZWJtIGJsb2IuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgTWVkaWFTdHJlYW1SZWNvcmRlclxuICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgKiAgICAgdmFyIGJsb2IgPSByZWNvcmRlci5ibG9iO1xuICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNlbGYuYmxvYiA9IGNvbmZpZy5nZXROYXRpdmVCbG9iID8gZS5kYXRhIDogbmV3IEJsb2IoW2UuZGF0YV0sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZWNvcmRlckhpbnRzLm1pbWVUeXBlIHx8ICd2aWRlby93ZWJtJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLnJlY29yZGluZ0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZWNvcmRpbmdDYWxsYmFjayhzZWxmLmJsb2IpO1xuICAgICAgICAgICAgICAgIHNlbGYucmVjb3JkaW5nQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG1lZGlhUmVjb3JkZXIub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnSW52YWxpZFN0YXRlJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUaGUgTWVkaWFSZWNvcmRlciBpcyBub3QgaW4gYSBzdGF0ZSBpbiB3aGljaCB0aGUgcHJvcG9zZWQgb3BlcmF0aW9uIGlzIGFsbG93ZWQgdG8gYmUgZXhlY3V0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnT3V0T2ZNZW1vcnknKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBVQSBoYXMgZXhoYXVzZWQgdGhlIGF2YWlsYWJsZSBtZW1vcnkuIFVzZXIgYWdlbnRzIFNIT1VMRCBwcm92aWRlIGFzIG11Y2ggYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhcyBwb3NzaWJsZSBpbiB0aGUgbWVzc2FnZSBhdHRyaWJ1dGUuJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnSWxsZWdhbFN0cmVhbU1vZGlmaWNhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQSBtb2RpZmljYXRpb24gdG8gdGhlIHN0cmVhbSBoYXMgb2NjdXJyZWQgdGhhdCBtYWtlcyBpdCBpbXBvc3NpYmxlIHRvIGNvbnRpbnVlIHJlY29yZGluZy4gQW4gZXhhbXBsZSB3b3VsZCBiZSB0aGUgYWRkaXRpb24gb2YgYSBUcmFjayB3aGlsZSByZWNvcmRpbmcgaXMgb2NjdXJyaW5nLiBVc2VyIGFnZW50cyBTSE9VTEQgcHJvdmlkZSBhcyBtdWNoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYXMgcG9zc2libGUgaW4gdGhlIG1lc3NhZ2UgYXR0cmlidXRlLicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ090aGVyUmVjb3JkaW5nRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VzZWQgZm9yIGFuIGZhdGFsIGVycm9yIG90aGVyIHRoYW4gdGhvc2UgbGlzdGVkIGFib3ZlLiBVc2VyIGFnZW50cyBTSE9VTEQgcHJvdmlkZSBhcyBtdWNoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYXMgcG9zc2libGUgaW4gdGhlIG1lc3NhZ2UgYXR0cmlidXRlLicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0dlbmVyaWNFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIFVBIGNhbm5vdCBwcm92aWRlIHRoZSBjb2RlYyBvciByZWNvcmRpbmcgb3B0aW9uIHRoYXQgaGFzIGJlZW4gcmVxdWVzdGVkLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNZWRpYVJlY29yZGVyIEVycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgc3RyZWFtIGlzIFwiZW5kZWRcIiBzZXQgcmVjb3JkaW5nIHRvICdpbmFjdGl2ZScgXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBnYXRoZXJpbmcgZGF0YS4gQ2FsbGVycyBzaG91bGQgbm90IHJlbHkgb24gXG4gICAgICAgICAgICAvLyBleGFjdG5lc3Mgb2YgdGhlIHRpbWVTbGljZSB2YWx1ZSwgZXNwZWNpYWxseSBcbiAgICAgICAgICAgIC8vIGlmIHRoZSB0aW1lU2xpY2UgdmFsdWUgaXMgc21hbGwuIENhbGxlcnMgc2hvdWxkIFxuICAgICAgICAgICAgLy8gY29uc2lkZXIgdGltZVNsaWNlIGFzIGEgbWluaW11bSB2YWx1ZVxuXG4gICAgICAgICAgICBpZiAobWVkaWFSZWNvcmRlci5zdGF0ZSAhPT0gJ2luYWN0aXZlJyAmJiBtZWRpYVJlY29yZGVyLnN0YXRlICE9PSAnc3RvcHBlZCcpIHtcbiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyB2b2lkIHN0YXJ0KG9wdGlvbmFsIGxvbmcgbVRpbWVTbGljZSlcbiAgICAgICAgLy8gVGhlIGludGVydmFsIG9mIHBhc3NpbmcgZW5jb2RlZCBkYXRhIGZyb20gRW5jb2RlZEJ1ZmZlckNhY2hlIHRvIG9uRGF0YUF2YWlsYWJsZVxuICAgICAgICAvLyBoYW5kbGVyLiBcIm1UaW1lU2xpY2UgPCAwXCIgbWVhbnMgU2Vzc2lvbiBvYmplY3QgZG9lcyBub3QgcHVzaCBlbmNvZGVkIGRhdGEgdG9cbiAgICAgICAgLy8gb25EYXRhQXZhaWxhYmxlLCBpbnN0ZWFkLCBpdCBwYXNzaXZlIHdhaXQgdGhlIGNsaWVudCBzaWRlIHB1bGwgZW5jb2RlZCBkYXRhXG4gICAgICAgIC8vIGJ5IGNhbGxpbmcgcmVxdWVzdERhdGEgQVBJLlxuICAgICAgICBtZWRpYVJlY29yZGVyLnN0YXJ0KDMuNmUrNik7XG5cbiAgICAgICAgLy8gU3RhcnQgcmVjb3JkaW5nLiBJZiB0aW1lU2xpY2UgaGFzIGJlZW4gcHJvdmlkZWQsIG1lZGlhUmVjb3JkZXIgd2lsbFxuICAgICAgICAvLyByYWlzZSBhIGRhdGFhdmFpbGFibGUgZXZlbnQgY29udGFpbmluZyB0aGUgQmxvYiBvZiBjb2xsZWN0ZWQgZGF0YSBvbiBldmVyeSB0aW1lU2xpY2UgbWlsbGlzZWNvbmRzLlxuICAgICAgICAvLyBJZiB0aW1lU2xpY2UgaXNuJ3QgcHJvdmlkZWQsIFVBIHNob3VsZCBjYWxsIHRoZSBSZXF1ZXN0RGF0YSB0byBvYnRhaW4gdGhlIEJsb2IgZGF0YSwgYWxzbyBzZXQgdGhlIG1UaW1lU2xpY2UgdG8gemVyby5cblxuICAgICAgICBpZiAoY29uZmlnLm9uQXVkaW9Qcm9jZXNzU3RhcnRlZCkge1xuICAgICAgICAgICAgY29uZmlnLm9uQXVkaW9Qcm9jZXNzU3RhcnRlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy5pbml0Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNvbmZpZy5pbml0Q2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9wcyByZWNvcmRpbmcgTWVkaWFTdHJlYW0uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiwgdGhhdCBpcyB1c2VkIHRvIHBhc3MgcmVjb3JkZWQgYmxvYiBiYWNrIHRvIHRoZSBjYWxsZWUuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNZWRpYVN0cmVhbVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpZiAoIW1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVjb3JkaW5nQ2FsbGJhY2sgPSBmdW5jdGlvbihibG9iKSB7XG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYmxvYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gbWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3JlY29yZGluZycgbWVhbnMgdGhhdCBtZWRpYSByZWNvcmRlciBpcyBhc3NvY2lhdGVkIHdpdGggXCJzZXNzaW9uXCJcbiAgICAgICAgLy8gbWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3N0b3BwZWQnIG1lYW5zIHRoYXQgbWVkaWEgcmVjb3JkZXIgaXMgZGV0YWNoZWQgZnJvbSB0aGUgXCJzZXNzaW9uXCIgLi4uIGluIHRoaXMgY2FzZTsgXCJzZXNzaW9uXCIgd2lsbCBhbHNvIGJlIGRlbGV0ZWQuXG5cbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIuc3RhdGUgPT09ICdyZWNvcmRpbmcnKSB7XG4gICAgICAgICAgICAvLyBcInN0b3BcIiBtZXRob2QgYXV0byBpbnZva2VzIFwicmVxdWVzdERhdGFcIiFcbiAgICAgICAgICAgIC8vIG1lZGlhUmVjb3JkZXIucmVxdWVzdERhdGEoKTtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHBhdXNlcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNZWRpYVN0cmVhbVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5wYXVzZSgpO1xuICAgICAqL1xuICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3JlY29yZGluZycpIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIucGF1c2UoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXN1bWVzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE1lZGlhU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlc3VtZSgpO1xuICAgICAqL1xuICAgIHRoaXMucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmRvbnRGaXJlT25EYXRhQXZhaWxhYmxlRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZG9udEZpcmVPbkRhdGFBdmFpbGFibGVFdmVudCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgZGlzYWJsZUxvZ3MgPSBjb25maWcuZGlzYWJsZUxvZ3M7XG4gICAgICAgICAgICBjb25maWcuZGlzYWJsZUxvZ3MgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZWNvcmQoKTtcbiAgICAgICAgICAgIGNvbmZpZy5kaXNhYmxlTG9ncyA9IGRpc2FibGVMb2dzO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3BhdXNlZCcpIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzZXRzIGN1cnJlbnRseSByZWNvcmRlZCBkYXRhLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTWVkaWFTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFyUmVjb3JkZWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghbWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuXG4gICAgICAgIHRoaXMuZG9udEZpcmVPbkRhdGFBdmFpbGFibGVFdmVudCA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH07XG5cbiAgICAvLyBSZWZlcmVuY2UgdG8gXCJNZWRpYVJlY29yZGVyXCIgb2JqZWN0XG4gICAgdmFyIG1lZGlhUmVjb3JkZXI7XG5cbiAgICBmdW5jdGlvbiBpc01lZGlhU3RyZWFtQWN0aXZlKCkge1xuICAgICAgICBpZiAoJ2FjdGl2ZScgaW4gbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgIGlmICghbWVkaWFTdHJlYW0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCdlbmRlZCcgaW4gbWVkaWFTdHJlYW0pIHsgLy8gb2xkIGhhY2tcbiAgICAgICAgICAgIGlmIChtZWRpYVN0cmVhbS5lbmRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyB0aGlzIG1ldGhvZCBjaGVja3MgaWYgbWVkaWEgc3RyZWFtIGlzIHN0b3BwZWRcbiAgICAvLyBvciBhbnkgdHJhY2sgaXMgZW5kZWQuXG4gICAgKGZ1bmN0aW9uIGxvb3BlcigpIHtcbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNZWRpYVN0cmVhbUFjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWVkaWFTdHJlYW0gc2VlbXMgc3RvcHBlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuc3RvcCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dChsb29wZXIsIDEwMDApOyAvLyBjaGVjayBldmVyeSBzZWNvbmRcbiAgICB9KSgpO1xufVxuXG5pZiAodHlwZW9mIFJlY29yZFJUQyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBSZWNvcmRSVEMuTWVkaWFTdHJlYW1SZWNvcmRlciA9IE1lZGlhU3RyZWFtUmVjb3JkZXI7XG59XG5cbi8vIHNvdXJjZSBjb2RlIGZyb206IGh0dHA6Ly90eXBlZGFycmF5Lm9yZy93cC1jb250ZW50L3Byb2plY3RzL1dlYkF1ZGlvUmVjb3JkZXIvc2NyaXB0LmpzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWF0dGRpYW1vbmQvUmVjb3JkZXJqcyNsaWNlbnNlLW1pdFxuLy8gX19fX19fX19fX19fX19fX19fX19fX1xuLy8gU3RlcmVvQXVkaW9SZWNvcmRlci5qc1xuXG4vKipcbiAqIFN0ZXJlb0F1ZGlvUmVjb3JkZXIgaXMgYSBzdGFuZGFsb25lIGNsYXNzIHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gYnJpbmcgXCJzdGVyZW9cIiBhdWRpby1yZWNvcmRpbmcgaW4gY2hyb21lLlxuICogQHN1bW1hcnkgSmF2YVNjcmlwdCBzdGFuZGFsb25lIG9iamVjdCBmb3Igc3RlcmVvIGF1ZGlvIHJlY29yZGluZy5cbiAqIEBsaWNlbnNlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQyNsaWNlbnNlfE1JVH1cbiAqIEBhdXRob3Ige0BsaW5rIGh0dHA6Ly93d3cuTXVhektoYW4uY29tfE11YXogS2hhbn1cbiAqIEB0eXBlZGVmIFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciByZWNvcmRlciA9IG5ldyBTdGVyZW9BdWRpb1JlY29yZGVyKE1lZGlhU3RyZWFtLCB7XG4gKiAgICAgc2FtcGxlUmF0ZTogNDQxMDAsXG4gKiAgICAgYnVmZmVyU2l6ZTogNDA5NlxuICogfSk7XG4gKiByZWNvcmRlci5yZWNvcmQoKTtcbiAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICogICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gKiB9KTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gTWVkaWFTdHJlYW0gb2JqZWN0IGZldGNoZWQgdXNpbmcgZ2V0VXNlck1lZGlhIEFQSSBvciBnZW5lcmF0ZWQgdXNpbmcgY2FwdHVyZVN0cmVhbVVudGlsRW5kZWQgb3IgV2ViQXVkaW8gQVBJLlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHtzYW1wbGVSYXRlOiA0NDEwMCwgYnVmZmVyU2l6ZTogNDA5NiwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzOiAxLCBldGMufVxuICovXG5cbmZ1bmN0aW9uIFN0ZXJlb0F1ZGlvUmVjb3JkZXIobWVkaWFTdHJlYW0sIGNvbmZpZykge1xuICAgIGlmICghbWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgJ1lvdXIgc3RyZWFtIGhhcyBubyBhdWRpbyB0cmFja3MuJztcbiAgICB9XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyB2YXJpYWJsZXNcbiAgICB2YXIgbGVmdGNoYW5uZWwgPSBbXTtcbiAgICB2YXIgcmlnaHRjaGFubmVsID0gW107XG4gICAgdmFyIHJlY29yZGluZyA9IGZhbHNlO1xuICAgIHZhciByZWNvcmRpbmdMZW5ndGggPSAwO1xuICAgIHZhciBqc0F1ZGlvTm9kZTtcblxuICAgIHZhciBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPSAyO1xuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgIGlmIChjb25maWcubGVmdENoYW5uZWwgPT09IHRydWUpIHtcbiAgICAgICAgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzID0gMTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLm51bWJlck9mQXVkaW9DaGFubmVscyA9PT0gMSkge1xuICAgICAgICBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPSAxO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1N0ZXJlb0F1ZGlvUmVjb3JkZXIgaXMgc2V0IHRvIHJlY29yZCBudW1iZXIgb2YgY2hhbm5lbHM6ICcsIG51bWJlck9mQXVkaW9DaGFubmVscyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNNZWRpYVN0cmVhbUFjdGl2ZSgpIHtcbiAgICAgICAgaWYgKCdhY3RpdmUnIGluIG1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoIW1lZGlhU3RyZWFtLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICgnZW5kZWQnIGluIG1lZGlhU3RyZWFtKSB7IC8vIG9sZCBoYWNrXG4gICAgICAgICAgICBpZiAobWVkaWFTdHJlYW0uZW5kZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVjb3JkcyBNZWRpYVN0cmVhbS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlY29yZCgpO1xuICAgICAqL1xuICAgIHRoaXMucmVjb3JkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc01lZGlhU3RyZWFtQWN0aXZlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aHJvdyAnUGxlYXNlIG1ha2Ugc3VyZSBNZWRpYVN0cmVhbSBpcyBhY3RpdmUuJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0IHRoZSBidWZmZXJzIGZvciB0aGUgbmV3IHJlY29yZGluZ1xuICAgICAgICBsZWZ0Y2hhbm5lbC5sZW5ndGggPSByaWdodGNoYW5uZWwubGVuZ3RoID0gMDtcbiAgICAgICAgcmVjb3JkaW5nTGVuZ3RoID0gMDtcblxuICAgICAgICBpZiAoYXVkaW9JbnB1dCkge1xuICAgICAgICAgICAgYXVkaW9JbnB1dC5jb25uZWN0KGpzQXVkaW9Ob2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRvIHByZXZlbnQgc2VsZiBhdWRpbyB0byBiZSBjb25uZWN0ZWQgd2l0aCBzcGVha2Vyc1xuICAgICAgICAvLyBqc0F1ZGlvTm9kZS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgICAgIGlzQXVkaW9Qcm9jZXNzU3RhcnRlZCA9IGlzUGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHJlY29yZGluZyA9IHRydWU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1lcmdlTGVmdFJpZ2h0QnVmZmVycyhjb25maWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGZ1bmN0aW9uIG1lcmdlQXVkaW9CdWZmZXJzKGNvbmZpZywgY2IpIHtcbiAgICAgICAgICAgIHZhciBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPSBjb25maWcubnVtYmVyT2ZBdWRpb0NoYW5uZWxzO1xuXG4gICAgICAgICAgICAvLyB0b2RvOiBcInNsaWNlKDApXCIgLS0tIGlzIGl0IGNhdXNlcyBsb29wPyBTaG91bGQgYmUgcmVtb3ZlZD9cbiAgICAgICAgICAgIHZhciBsZWZ0QnVmZmVycyA9IGNvbmZpZy5sZWZ0QnVmZmVycy5zbGljZSgwKTtcbiAgICAgICAgICAgIHZhciByaWdodEJ1ZmZlcnMgPSBjb25maWcucmlnaHRCdWZmZXJzLnNsaWNlKDApO1xuICAgICAgICAgICAgdmFyIHNhbXBsZVJhdGUgPSBjb25maWcuc2FtcGxlUmF0ZTtcbiAgICAgICAgICAgIHZhciBpbnRlcm5hbEludGVybGVhdmVkTGVuZ3RoID0gY29uZmlnLmludGVybmFsSW50ZXJsZWF2ZWRMZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBsZWZ0QnVmZmVycyA9IG1lcmdlQnVmZmVycyhsZWZ0QnVmZmVycywgaW50ZXJuYWxJbnRlcmxlYXZlZExlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmlnaHRCdWZmZXJzID0gbWVyZ2VCdWZmZXJzKHJpZ2h0QnVmZmVycywgaW50ZXJuYWxJbnRlcmxlYXZlZExlbmd0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBsZWZ0QnVmZmVycyA9IG1lcmdlQnVmZmVycyhsZWZ0QnVmZmVycywgaW50ZXJuYWxJbnRlcmxlYXZlZExlbmd0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1lcmdlQnVmZmVycyhjaGFubmVsQnVmZmVyLCByTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBGbG9hdDY0QXJyYXkockxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGxuZyA9IGNoYW5uZWxCdWZmZXIubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsbmc7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gY2hhbm5lbEJ1ZmZlcltpXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldChidWZmZXIsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBidWZmZXIubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGludGVybGVhdmUobGVmdENoYW5uZWwsIHJpZ2h0Q2hhbm5lbCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBsZWZ0Q2hhbm5lbC5sZW5ndGggKyByaWdodENoYW5uZWwubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBGbG9hdDY0QXJyYXkobGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIHZhciBpbnB1dEluZGV4ID0gMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleCsrXSA9IGxlZnRDaGFubmVsW2lucHV0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXgrK10gPSByaWdodENoYW5uZWxbaW5wdXRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlucHV0SW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd3JpdGVVVEZCeXRlcyh2aWV3LCBvZmZzZXQsIHN0cmluZykge1xuICAgICAgICAgICAgICAgIHZhciBsbmcgPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG5nOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnRlcmxlYXZlIGJvdGggY2hhbm5lbHMgdG9nZXRoZXJcbiAgICAgICAgICAgIHZhciBpbnRlcmxlYXZlZDtcblxuICAgICAgICAgICAgaWYgKG51bWJlck9mQXVkaW9DaGFubmVscyA9PT0gMikge1xuICAgICAgICAgICAgICAgIGludGVybGVhdmVkID0gaW50ZXJsZWF2ZShsZWZ0QnVmZmVycywgcmlnaHRCdWZmZXJzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG51bWJlck9mQXVkaW9DaGFubmVscyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGludGVybGVhdmVkID0gbGVmdEJ1ZmZlcnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbnRlcmxlYXZlZExlbmd0aCA9IGludGVybGVhdmVkLmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIHdhdiBmaWxlXG4gICAgICAgICAgICB2YXIgcmVzdWx0aW5nQnVmZmVyTGVuZ3RoID0gNDQgKyBpbnRlcmxlYXZlZExlbmd0aCAqIDI7XG5cbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIocmVzdWx0aW5nQnVmZmVyTGVuZ3RoKTtcblxuICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcblxuICAgICAgICAgICAgLy8gUklGRiBjaHVuayBkZXNjcmlwdG9yL2lkZW50aWZpZXIgXG4gICAgICAgICAgICB3cml0ZVVURkJ5dGVzKHZpZXcsIDAsICdSSUZGJyk7XG5cbiAgICAgICAgICAgIC8vIFJJRkYgY2h1bmsgbGVuZ3RoXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMig0LCA0NCArIGludGVybGVhdmVkTGVuZ3RoICogMiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIFJJRkYgdHlwZSBcbiAgICAgICAgICAgIHdyaXRlVVRGQnl0ZXModmlldywgOCwgJ1dBVkUnKTtcblxuICAgICAgICAgICAgLy8gZm9ybWF0IGNodW5rIGlkZW50aWZpZXIgXG4gICAgICAgICAgICAvLyBGTVQgc3ViLWNodW5rXG4gICAgICAgICAgICB3cml0ZVVURkJ5dGVzKHZpZXcsIDEyLCAnZm10ICcpO1xuXG4gICAgICAgICAgICAvLyBmb3JtYXQgY2h1bmsgbGVuZ3RoIFxuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gc2FtcGxlIGZvcm1hdCAocmF3KVxuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjAsIDEsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBzdGVyZW8gKDIgY2hhbm5lbHMpXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQxNigyMiwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gc2FtcGxlIHJhdGUgXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIGJ5dGUgcmF0ZSAoc2FtcGxlIHJhdGUgKiBibG9jayBhbGlnbilcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDI4LCBzYW1wbGVSYXRlICogMiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIGJsb2NrIGFsaWduIChjaGFubmVsIGNvdW50ICogYnl0ZXMgcGVyIHNhbXBsZSkgXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQxNigzMiwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzICogMiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIGJpdHMgcGVyIHNhbXBsZSBcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDM0LCAxNiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIGRhdGEgc3ViLWNodW5rXG4gICAgICAgICAgICAvLyBkYXRhIGNodW5rIGlkZW50aWZpZXIgXG4gICAgICAgICAgICB3cml0ZVVURkJ5dGVzKHZpZXcsIDM2LCAnZGF0YScpO1xuXG4gICAgICAgICAgICAvLyBkYXRhIGNodW5rIGxlbmd0aCBcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQwLCBpbnRlcmxlYXZlZExlbmd0aCAqIDIsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyB3cml0ZSB0aGUgUENNIHNhbXBsZXNcbiAgICAgICAgICAgIHZhciBsbmcgPSBpbnRlcmxlYXZlZExlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDQ0O1xuICAgICAgICAgICAgdmFyIHZvbHVtZSA9IDE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxuZzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRJbnQxNihpbmRleCwgaW50ZXJsZWF2ZWRbaV0gKiAoMHg3RkZGICogdm9sdW1lKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaW5kZXggKz0gMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNiKHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBidWZmZXIsXG4gICAgICAgICAgICAgICAgICAgIHZpZXc6IHZpZXdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgICAgICAgICAgIHZpZXc6IHZpZXdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0Nocm9tZSkge1xuICAgICAgICAgICAgLy8gaXRzIE1pY3Jvc29mdCBFZGdlXG4gICAgICAgICAgICBtZXJnZUF1ZGlvQnVmZmVycyhjb25maWcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhLmJ1ZmZlciwgZGF0YS52aWV3KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cblxuICAgICAgICB2YXIgd2ViV29ya2VyID0gcHJvY2Vzc0luV2ViV29ya2VyKG1lcmdlQXVkaW9CdWZmZXJzKTtcblxuICAgICAgICB3ZWJXb3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50LmRhdGEuYnVmZmVyLCBldmVudC5kYXRhLnZpZXcpO1xuXG4gICAgICAgICAgICAvLyByZWxlYXNlIG1lbW9yeVxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh3ZWJXb3JrZXIud29ya2VyVVJMKTtcbiAgICAgICAgfTtcblxuICAgICAgICB3ZWJXb3JrZXIucG9zdE1lc3NhZ2UoY29uZmlnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzSW5XZWJXb3JrZXIoX2Z1bmN0aW9uKSB7XG4gICAgICAgIHZhciB3b3JrZXJVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtfZnVuY3Rpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICc7dGhpcy5vbm1lc3NhZ2UgPSAgZnVuY3Rpb24gKGUpIHsnICsgX2Z1bmN0aW9uLm5hbWUgKyAnKGUuZGF0YSk7fSdcbiAgICAgICAgXSwge1xuICAgICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnXG4gICAgICAgIH0pKTtcblxuICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJVUkwpO1xuICAgICAgICB3b3JrZXIud29ya2VyVVJMID0gd29ya2VyVVJMO1xuICAgICAgICByZXR1cm4gd29ya2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0b3BzIHJlY29yZGluZyBNZWRpYVN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLCB0aGF0IGlzIHVzZWQgdG8gcGFzcyByZWNvcmRlZCBibG9iIGJhY2sgdG8gdGhlIGNhbGxlZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFN0ZXJlb0F1ZGlvUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICAgICAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIHN0b3AgcmVjb3JkaW5nXG4gICAgICAgIHJlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBvbmF1ZGlvcHJvY2VzcyBzdG9wcyBmaXJpbmdcbiAgICAgICAgLy8gYXVkaW9JbnB1dC5kaXNjb25uZWN0KCk7XG5cbiAgICAgICAgbWVyZ2VMZWZ0UmlnaHRCdWZmZXJzKHtcbiAgICAgICAgICAgIHNhbXBsZVJhdGU6IHNhbXBsZVJhdGUsXG4gICAgICAgICAgICBudW1iZXJPZkF1ZGlvQ2hhbm5lbHM6IG51bWJlck9mQXVkaW9DaGFubmVscyxcbiAgICAgICAgICAgIGludGVybmFsSW50ZXJsZWF2ZWRMZW5ndGg6IHJlY29yZGluZ0xlbmd0aCxcbiAgICAgICAgICAgIGxlZnRCdWZmZXJzOiBsZWZ0Y2hhbm5lbCxcbiAgICAgICAgICAgIHJpZ2h0QnVmZmVyczogbnVtYmVyT2ZBdWRpb0NoYW5uZWxzID09PSAxID8gW10gOiByaWdodGNoYW5uZWxcbiAgICAgICAgfSwgZnVuY3Rpb24oYnVmZmVyLCB2aWV3KSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QmxvYn0gYmxvYiAtIFRoZSByZWNvcmRlZCBibG9iIG9iamVjdC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkZXIuYmxvYjtcbiAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZWxmLmJsb2IgPSBuZXcgQmxvYihbdmlld10sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8vd2F2J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheUJ1ZmZlcn0gYnVmZmVyIC0gVGhlIHJlY29yZGVkIGJ1ZmZlciBvYmplY3QuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAqICAgICB2YXIgYnVmZmVyID0gcmVjb3JkZXIuYnVmZmVyO1xuICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNlbGYuYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHZpZXcuYnVmZmVyLmJ5dGVMZW5ndGgpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7RGF0YVZpZXd9IHZpZXcgLSBUaGUgcmVjb3JkZWQgZGF0YS12aWV3IG9iamVjdC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICogICAgIHZhciB2aWV3ID0gcmVjb3JkZXIudmlldztcbiAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZWxmLnZpZXcgPSB2aWV3O1xuXG4gICAgICAgICAgICBzZWxmLnNhbXBsZVJhdGUgPSBzYW1wbGVSYXRlO1xuICAgICAgICAgICAgc2VsZi5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcblxuICAgICAgICAgICAgLy8gcmVjb3JkZWQgYXVkaW8gbGVuZ3RoXG4gICAgICAgICAgICBzZWxmLmxlbmd0aCA9IHJlY29yZGluZ0xlbmd0aDtcblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXNBdWRpb1Byb2Nlc3NTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAoIVN0b3JhZ2UuQXVkaW9Db250ZXh0Q29uc3RydWN0b3IpIHtcbiAgICAgICAgU3RvcmFnZS5BdWRpb0NvbnRleHRDb25zdHJ1Y3RvciA9IG5ldyBTdG9yYWdlLkF1ZGlvQ29udGV4dCgpO1xuICAgIH1cblxuICAgIHZhciBjb250ZXh0ID0gU3RvcmFnZS5BdWRpb0NvbnRleHRDb25zdHJ1Y3RvcjtcblxuICAgIC8vIGNyZWF0ZXMgYW4gYXVkaW8gbm9kZSBmcm9tIHRoZSBtaWNyb3Bob25lIGluY29taW5nIHN0cmVhbVxuICAgIHZhciBhdWRpb0lucHV0ID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShtZWRpYVN0cmVhbSk7XG5cbiAgICB2YXIgbGVnYWxCdWZmZXJWYWx1ZXMgPSBbMCwgMjU2LCA1MTIsIDEwMjQsIDIwNDgsIDQwOTYsIDgxOTIsIDE2Mzg0XTtcblxuICAgIC8qKlxuICAgICAqIEZyb20gdGhlIHNwZWM6IFRoaXMgdmFsdWUgY29udHJvbHMgaG93IGZyZXF1ZW50bHkgdGhlIGF1ZGlvcHJvY2VzcyBldmVudCBpc1xuICAgICAqIGRpc3BhdGNoZWQgYW5kIGhvdyBtYW55IHNhbXBsZS1mcmFtZXMgbmVlZCB0byBiZSBwcm9jZXNzZWQgZWFjaCBjYWxsLlxuICAgICAqIExvd2VyIHZhbHVlcyBmb3IgYnVmZmVyIHNpemUgd2lsbCByZXN1bHQgaW4gYSBsb3dlciAoYmV0dGVyKSBsYXRlbmN5LlxuICAgICAqIEhpZ2hlciB2YWx1ZXMgd2lsbCBiZSBuZWNlc3NhcnkgdG8gYXZvaWQgYXVkaW8gYnJlYWt1cCBhbmQgZ2xpdGNoZXNcbiAgICAgKiBUaGUgc2l6ZSBvZiB0aGUgYnVmZmVyIChpbiBzYW1wbGUtZnJhbWVzKSB3aGljaCBuZWVkcyB0b1xuICAgICAqIGJlIHByb2Nlc3NlZCBlYWNoIHRpbWUgb25wcm9jZXNzYXVkaW8gaXMgY2FsbGVkLlxuICAgICAqIExlZ2FsIHZhbHVlcyBhcmUgKDI1NiwgNTEyLCAxMDI0LCAyMDQ4LCA0MDk2LCA4MTkyLCAxNjM4NCkuXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGJ1ZmZlclNpemUgLSBCdWZmZXItc2l6ZSBmb3IgaG93IGZyZXF1ZW50bHkgdGhlIGF1ZGlvcHJvY2VzcyBldmVudCBpcyBkaXNwYXRjaGVkLlxuICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlciA9IG5ldyBTdGVyZW9BdWRpb1JlY29yZGVyKG1lZGlhU3RyZWFtLCB7XG4gICAgICogICAgIGJ1ZmZlclNpemU6IDQwOTZcbiAgICAgKiB9KTtcbiAgICAgKi9cblxuICAgIC8vIFwiMFwiIG1lYW5zLCBsZXQgY2hyb21lIGRlY2lkZSB0aGUgbW9zdCBhY2N1cmF0ZSBidWZmZXItc2l6ZSBmb3IgY3VycmVudCBwbGF0Zm9ybS5cbiAgICB2YXIgYnVmZmVyU2l6ZSA9IHR5cGVvZiBjb25maWcuYnVmZmVyU2l6ZSA9PT0gJ3VuZGVmaW5lZCcgPyA0MDk2IDogY29uZmlnLmJ1ZmZlclNpemU7XG5cbiAgICBpZiAobGVnYWxCdWZmZXJWYWx1ZXMuaW5kZXhPZihidWZmZXJTaXplKSA9PT0gLTEpIHtcbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTGVnYWwgdmFsdWVzIGZvciBidWZmZXItc2l6ZSBhcmUgJyArIEpTT04uc3RyaW5naWZ5KGxlZ2FsQnVmZmVyVmFsdWVzLCBudWxsLCAnXFx0JykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQuY3JlYXRlSmF2YVNjcmlwdE5vZGUpIHtcbiAgICAgICAganNBdWRpb05vZGUgPSBjb250ZXh0LmNyZWF0ZUphdmFTY3JpcHROb2RlKGJ1ZmZlclNpemUsIG51bWJlck9mQXVkaW9DaGFubmVscywgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKSB7XG4gICAgICAgIGpzQXVkaW9Ob2RlID0gY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoYnVmZmVyU2l6ZSwgbnVtYmVyT2ZBdWRpb0NoYW5uZWxzLCBudW1iZXJPZkF1ZGlvQ2hhbm5lbHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93ICdXZWJBdWRpbyBBUEkgaGFzIG5vIHN1cHBvcnQgb24gdGhpcyBicm93c2VyLic7XG4gICAgfVxuXG4gICAgLy8gY29ubmVjdCB0aGUgc3RyZWFtIHRvIHRoZSBnYWluIG5vZGVcbiAgICBhdWRpb0lucHV0LmNvbm5lY3QoanNBdWRpb05vZGUpO1xuXG4gICAgaWYgKCFjb25maWcuYnVmZmVyU2l6ZSkge1xuICAgICAgICBidWZmZXJTaXplID0ganNBdWRpb05vZGUuYnVmZmVyU2l6ZTsgLy8gZGV2aWNlIGJ1ZmZlci1zaXplXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHNhbXBsZSByYXRlIChpbiBzYW1wbGUtZnJhbWVzIHBlciBzZWNvbmQpIGF0IHdoaWNoIHRoZVxuICAgICAqIEF1ZGlvQ29udGV4dCBoYW5kbGVzIGF1ZGlvLiBJdCBpcyBhc3N1bWVkIHRoYXQgYWxsIEF1ZGlvTm9kZXNcbiAgICAgKiBpbiB0aGUgY29udGV4dCBydW4gYXQgdGhpcyByYXRlLiBJbiBtYWtpbmcgdGhpcyBhc3N1bXB0aW9uLFxuICAgICAqIHNhbXBsZS1yYXRlIGNvbnZlcnRlcnMgb3IgXCJ2YXJpc3BlZWRcIiBwcm9jZXNzb3JzIGFyZSBub3Qgc3VwcG9ydGVkXG4gICAgICogaW4gcmVhbC10aW1lIHByb2Nlc3NpbmcuXG4gICAgICogVGhlIHNhbXBsZVJhdGUgcGFyYW1ldGVyIGRlc2NyaWJlcyB0aGUgc2FtcGxlLXJhdGUgb2YgdGhlXG4gICAgICogbGluZWFyIFBDTSBhdWRpbyBkYXRhIGluIHRoZSBidWZmZXIgaW4gc2FtcGxlLWZyYW1lcyBwZXIgc2Vjb25kLlxuICAgICAqIEFuIGltcGxlbWVudGF0aW9uIG11c3Qgc3VwcG9ydCBzYW1wbGUtcmF0ZXMgaW4gYXQgbGVhc3RcbiAgICAgKiB0aGUgcmFuZ2UgMjIwNTAgdG8gOTYwMDAuXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHNhbXBsZVJhdGUgLSBCdWZmZXItc2l6ZSBmb3IgaG93IGZyZXF1ZW50bHkgdGhlIGF1ZGlvcHJvY2VzcyBldmVudCBpcyBkaXNwYXRjaGVkLlxuICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlciA9IG5ldyBTdGVyZW9BdWRpb1JlY29yZGVyKG1lZGlhU3RyZWFtLCB7XG4gICAgICogICAgIHNhbXBsZVJhdGU6IDQ0MTAwXG4gICAgICogfSk7XG4gICAgICovXG4gICAgdmFyIHNhbXBsZVJhdGUgPSB0eXBlb2YgY29uZmlnLnNhbXBsZVJhdGUgIT09ICd1bmRlZmluZWQnID8gY29uZmlnLnNhbXBsZVJhdGUgOiBjb250ZXh0LnNhbXBsZVJhdGUgfHwgNDQxMDA7XG5cbiAgICBpZiAoc2FtcGxlUmF0ZSA8IDIyMDUwIHx8IHNhbXBsZVJhdGUgPiA5NjAwMCkge1xuICAgICAgICAvLyBSZWY6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2MzAzOTE4LzU1MjE4MlxuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdzYW1wbGUtcmF0ZSBtdXN0IGJlIHVuZGVyIHJhbmdlIDIyMDUwIGFuZCA5NjAwMC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzYW1wbGUtcmF0ZScsIHNhbXBsZVJhdGUpO1xuICAgICAgICBjb25zb2xlLmxvZygnYnVmZmVyLXNpemUnLCBidWZmZXJTaXplKTtcbiAgICB9XG5cbiAgICB2YXIgaXNQYXVzZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwYXVzZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucGF1c2UoKTtcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlzUGF1c2VkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzdW1lcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZXN1bWUoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaXNNZWRpYVN0cmVhbUFjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhyb3cgJ1BsZWFzZSBtYWtlIHN1cmUgTWVkaWFTdHJlYW0gaXMgYWN0aXZlLic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlY29yZGluZykge1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ1NlZW1zIHJlY29yZGluZyBoYXMgYmVlbiByZXN0YXJ0ZWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlY29yZCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaXNQYXVzZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzZXRzIGN1cnJlbnRseSByZWNvcmRlZCBkYXRhLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgU3RlcmVvQXVkaW9SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFyUmVjb3JkZWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucGF1c2UoKTtcblxuICAgICAgICBsZWZ0Y2hhbm5lbC5sZW5ndGggPSByaWdodGNoYW5uZWwubGVuZ3RoID0gMDtcbiAgICAgICAgcmVjb3JkaW5nTGVuZ3RoID0gMDtcbiAgICB9O1xuXG4gICAgdmFyIGlzQXVkaW9Qcm9jZXNzU3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gb25BdWRpb1Byb2Nlc3NEYXRhQXZhaWxhYmxlKGUpIHtcbiAgICAgICAgaWYgKGlzUGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNZWRpYVN0cmVhbUFjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWVkaWFTdHJlYW0gc2VlbXMgc3RvcHBlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGpzQXVkaW9Ob2RlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHJlY29yZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZWNvcmRpbmcpIHtcbiAgICAgICAgICAgIGF1ZGlvSW5wdXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbiBcIm9uYXVkaW9wcm9jZXNzXCIgZXZlbnQncyBmaXJzdCBpbnZvY2F0aW9uLlxuICAgICAgICAgKiBAbWV0aG9kIHtmdW5jdGlvbn0gb25BdWRpb1Byb2Nlc3NTdGFydGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiBTdGVyZW9BdWRpb1JlY29yZGVyXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIHJlY29yZGVyLm9uQXVkaW9Qcm9jZXNzU3RhcnRlZDogZnVuY3Rpb24oKSB7IH07XG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIWlzQXVkaW9Qcm9jZXNzU3RhcnRlZCkge1xuICAgICAgICAgICAgaXNBdWRpb1Byb2Nlc3NTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChjb25maWcub25BdWRpb1Byb2Nlc3NTdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLm9uQXVkaW9Qcm9jZXNzU3RhcnRlZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29uZmlnLmluaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5pbml0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsZWZ0ID0gZS5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTtcblxuICAgICAgICAvLyB3ZSBjbG9uZSB0aGUgc2FtcGxlc1xuICAgICAgICBsZWZ0Y2hhbm5lbC5wdXNoKG5ldyBGbG9hdDMyQXJyYXkobGVmdCkpO1xuXG4gICAgICAgIGlmIChudW1iZXJPZkF1ZGlvQ2hhbm5lbHMgPT09IDIpIHtcbiAgICAgICAgICAgIHZhciByaWdodCA9IGUuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMSk7XG4gICAgICAgICAgICByaWdodGNoYW5uZWwucHVzaChuZXcgRmxvYXQzMkFycmF5KHJpZ2h0KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWNvcmRpbmdMZW5ndGggKz0gYnVmZmVyU2l6ZTtcbiAgICB9XG5cbiAgICBqc0F1ZGlvTm9kZS5vbmF1ZGlvcHJvY2VzcyA9IG9uQXVkaW9Qcm9jZXNzRGF0YUF2YWlsYWJsZTtcblxuICAgIC8vIHRvIHByZXZlbnQgc2VsZiBhdWRpbyB0byBiZSBjb25uZWN0ZWQgd2l0aCBzcGVha2Vyc1xuICAgIGpzQXVkaW9Ob2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG59XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5TdGVyZW9BdWRpb1JlY29yZGVyID0gU3RlcmVvQXVkaW9SZWNvcmRlcjtcbn1cblxuLy8gX19fX19fX19fX19fX19fX19cbi8vIENhbnZhc1JlY29yZGVyLmpzXG5cbi8qKlxuICogQ2FudmFzUmVjb3JkZXIgaXMgYSBzdGFuZGFsb25lIGNsYXNzIHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gYnJpbmcgSFRNTDUtQ2FudmFzIHJlY29yZGluZyBpbnRvIHZpZGVvIFdlYk0uIEl0IHVzZXMgSFRNTDJDYW52YXMgbGlicmFyeSBhbmQgcnVucyB0b3Agb3ZlciB7QGxpbmsgV2hhbW15fS5cbiAqIEBzdW1tYXJ5IEhUTUwyQ2FudmFzIHJlY29yZGluZyBpbnRvIHZpZGVvIFdlYk0uXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBDYW52YXNSZWNvcmRlclxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIHJlY29yZGVyID0gbmV3IENhbnZhc1JlY29yZGVyKGh0bWxFbGVtZW50LCB7IGRpc2FibGVMb2dzOiB0cnVlIH0pO1xuICogcmVjb3JkZXIucmVjb3JkKCk7XG4gKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICogfSk7XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBodG1sRWxlbWVudCAtIHF1ZXJ5U2VsZWN0b3IvZ2V0RWxlbWVudEJ5SWQvZ2V0RWxlbWVudHNCeVRhZ05hbWVbMF0vZXRjLlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHtkaXNhYmxlTG9nczp0cnVlLCBpbml0Q2FsbGJhY2s6IGZ1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIENhbnZhc1JlY29yZGVyKGh0bWxFbGVtZW50LCBjb25maWcpIHtcbiAgICBpZiAodHlwZW9mIGh0bWwyY2FudmFzID09PSAndW5kZWZpbmVkJyAmJiBodG1sRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnY2FudmFzJykge1xuICAgICAgICB0aHJvdyAnUGxlYXNlIGxpbms6IGh0dHBzOi8vY2RuLndlYnJ0Yy1leHBlcmltZW50LmNvbS9zY3JlZW5zaG90LmpzJztcbiAgICB9XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gICAgaWYgKCFjb25maWcuZnJhbWVJbnRlcnZhbCkge1xuICAgICAgICBjb25maWcuZnJhbWVJbnRlcnZhbCA9IDEwO1xuICAgIH1cblxuICAgIC8vIHZpYSBEZXRlY3RSVEMuanNcbiAgICB2YXIgaXNDYW52YXNTdXBwb3J0c1N0cmVhbUNhcHR1cmluZyA9IGZhbHNlO1xuICAgIFsnY2FwdHVyZVN0cmVhbScsICdtb3pDYXB0dXJlU3RyZWFtJywgJ3dlYmtpdENhcHR1cmVTdHJlYW0nXS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0gaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykpIHtcbiAgICAgICAgICAgIGlzQ2FudmFzU3VwcG9ydHNTdHJlYW1DYXB0dXJpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgX2lzQ2hyb21lID0gKCEhd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uIHx8ICEhd2luZG93LndlYmtpdEdldFVzZXJNZWRpYSkgJiYgISF3aW5kb3cuY2hyb21lO1xuXG4gICAgdmFyIGNocm9tZVZlcnNpb24gPSA1MDtcbiAgICB2YXIgbWF0Y2hBcnJheSA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tKGV8aXVtKVxcLyhbMC05XSspXFwuLyk7XG4gICAgaWYgKF9pc0Nocm9tZSAmJiBtYXRjaEFycmF5ICYmIG1hdGNoQXJyYXlbMl0pIHtcbiAgICAgICAgY2hyb21lVmVyc2lvbiA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMl0sIDEwKTtcbiAgICB9XG5cbiAgICBpZiAoX2lzQ2hyb21lICYmIGNocm9tZVZlcnNpb24gPCA1Mikge1xuICAgICAgICBpc0NhbnZhc1N1cHBvcnRzU3RyZWFtQ2FwdHVyaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGdsb2JhbENhbnZhcywgbWVkaWFTdHJlYW1SZWNvcmRlcjtcblxuICAgIGlmIChpc0NhbnZhc1N1cHBvcnRzU3RyZWFtQ2FwdHVyaW5nKSB7XG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdZb3VyIGJyb3dzZXIgc3VwcG9ydHMgYm90aCBNZWRpUmVjb3JkZXIgQVBJIGFuZCBjYW52YXMuY2FwdHVyZVN0cmVhbSEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChodG1sRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgICAgICBnbG9iYWxDYW52YXMgPSBodG1sRWxlbWVudDtcbiAgICAgICAgfSBlbHNlIGlmIChodG1sRWxlbWVudCBpbnN0YW5jZW9mIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICAgICAgZ2xvYmFsQ2FudmFzID0gaHRtbEVsZW1lbnQuY2FudmFzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgJ1BsZWFzZSBwYXNzIGVpdGhlciBIVE1MQ2FudmFzRWxlbWVudCBvciBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuJztcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISFuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgIGlmICghY29uZmlnLmRpc2FibGVMb2dzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW52YXMgcmVjb3JkaW5nIGlzIE5PVCBzdXBwb3J0ZWQgaW4gRmlyZWZveC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpc1JlY29yZGluZztcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlY29yZHMgQ2FudmFzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgQ2FudmFzUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlY29yZCgpO1xuICAgICAqL1xuICAgIHRoaXMucmVjb3JkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlzUmVjb3JkaW5nID0gdHJ1ZTtcblxuICAgICAgICBpZiAoaXNDYW52YXNTdXBwb3J0c1N0cmVhbUNhcHR1cmluZykge1xuICAgICAgICAgICAgLy8gQ2FudmFzQ2FwdHVyZU1lZGlhU3RyZWFtXG4gICAgICAgICAgICB2YXIgY2FudmFzTWVkaWFTdHJlYW07XG4gICAgICAgICAgICBpZiAoJ2NhcHR1cmVTdHJlYW0nIGluIGdsb2JhbENhbnZhcykge1xuICAgICAgICAgICAgICAgIGNhbnZhc01lZGlhU3RyZWFtID0gZ2xvYmFsQ2FudmFzLmNhcHR1cmVTdHJlYW0oMjUpOyAvLyAyNSBGUFNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJ21vekNhcHR1cmVTdHJlYW0nIGluIGdsb2JhbENhbnZhcykge1xuICAgICAgICAgICAgICAgIGNhbnZhc01lZGlhU3RyZWFtID0gZ2xvYmFsQ2FudmFzLm1vekNhcHR1cmVTdHJlYW0oMjUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgnd2Via2l0Q2FwdHVyZVN0cmVhbScgaW4gZ2xvYmFsQ2FudmFzKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzTWVkaWFTdHJlYW0gPSBnbG9iYWxDYW52YXMud2Via2l0Q2FwdHVyZVN0cmVhbSgyNSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG1kU3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgbWRTdHJlYW0uYWRkVHJhY2soY2FudmFzTWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSk7XG4gICAgICAgICAgICAgICAgY2FudmFzTWVkaWFTdHJlYW0gPSBtZFN0cmVhbTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgICAgICAgIGlmICghY2FudmFzTWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnY2FwdHVyZVN0cmVhbSBBUEkgYXJlIE5PVCBhdmFpbGFibGUuJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm90ZTogSmFuIDE4LCAyMDE2IHN0YXR1cyBpcyB0aGF0LCBcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggTWVkaWFSZWNvcmRlciBBUEkgY2FuJ3QgcmVjb3JkIENhbnZhc0NhcHR1cmVNZWRpYVN0cmVhbSBvYmplY3QuXG4gICAgICAgICAgICBtZWRpYVN0cmVhbVJlY29yZGVyID0gbmV3IE1lZGlhU3RyZWFtUmVjb3JkZXIoY2FudmFzTWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogJ3ZpZGVvL3dlYm0nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1lZGlhU3RyZWFtUmVjb3JkZXIucmVjb3JkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aGFtbXkuZnJhbWVzID0gW107XG4gICAgICAgICAgICBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgZHJhd0NhbnZhc0ZyYW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLmluaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uZmlnLmluaXRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0V2ViUEltYWdlcyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChodG1sRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnY2FudmFzJykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmcmFtZXNMZW5ndGggPSB3aGFtbXkuZnJhbWVzLmxlbmd0aDtcbiAgICAgICAgd2hhbW15LmZyYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGZyYW1lLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBmcmFtZXNSZW1haW5pbmcgPSBmcmFtZXNMZW5ndGggLSBpZHg7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoZnJhbWVzUmVtYWluaW5nICsgJy8nICsgZnJhbWVzTGVuZ3RoICsgJyBmcmFtZXMgcmVtYWluaW5nJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb25maWcub25FbmNvZGluZ0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLm9uRW5jb2RpbmdDYWxsYmFjayhmcmFtZXNSZW1haW5pbmcsIGZyYW1lc0xlbmd0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3ZWJwID0gZnJhbWUuaW1hZ2UudG9EYXRhVVJMKCdpbWFnZS93ZWJwJywgMSk7XG4gICAgICAgICAgICB3aGFtbXkuZnJhbWVzW2lkeF0uaW1hZ2UgPSB3ZWJwO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWNvbmZpZy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnR2VuZXJhdGluZyBXZWJNJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzdG9wcyByZWNvcmRpbmcgQ2FudmFzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24sIHRoYXQgaXMgdXNlZCB0byBwYXNzIHJlY29yZGVkIGJsb2IgYmFjayB0byB0aGUgY2FsbGVlLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgQ2FudmFzUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICAgICAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGlzUmVjb3JkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGlmIChpc0NhbnZhc1N1cHBvcnRzU3RyZWFtQ2FwdHVyaW5nICYmIG1lZGlhU3RyZWFtUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIG1lZGlhU3RyZWFtUmVjb3JkZXIuc3RvcChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldFdlYlBJbWFnZXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QmxvYn0gYmxvYiAtIFJlY29yZGVkIGZyYW1lcyBpbiB2aWRlby93ZWJtIGJsb2IuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQ2FudmFzUmVjb3JkZXJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkZXIuYmxvYjtcbiAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB3aGFtbXkuY29tcGlsZShmdW5jdGlvbihibG9iKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUmVjb3JkaW5nIGZpbmlzaGVkIScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoYXQuYmxvYiA9IGJsb2I7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhhdC5ibG9iLmZvckVhY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5ibG9iID0gbmV3IEJsb2IoW10sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodGhhdC5ibG9iKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3aGFtbXkuZnJhbWVzID0gW107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBpc1BhdXNlZFJlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGF1c2VzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIENhbnZhc1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5wYXVzZSgpO1xuICAgICAqL1xuICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaXNQYXVzZWRSZWNvcmRpbmcgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXN1bWVzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIENhbnZhc1JlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZXN1bWUoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1BhdXNlZFJlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghaXNSZWNvcmRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmVjb3JkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzZXRzIGN1cnJlbnRseSByZWNvcmRlZCBkYXRhLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgQ2FudmFzUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLmNsZWFyUmVjb3JkZWREYXRhKCk7XG4gICAgICovXG4gICAgdGhpcy5jbGVhclJlY29yZGVkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIHdoYW1teS5mcmFtZXMgPSBbXTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY2xvbmVDYW52YXMoKSB7XG4gICAgICAgIC8vY3JlYXRlIGEgbmV3IGNhbnZhc1xuICAgICAgICB2YXIgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgLy9zZXQgZGltZW5zaW9uc1xuICAgICAgICBuZXdDYW52YXMud2lkdGggPSBodG1sRWxlbWVudC53aWR0aDtcbiAgICAgICAgbmV3Q2FudmFzLmhlaWdodCA9IGh0bWxFbGVtZW50LmhlaWdodDtcblxuICAgICAgICAvL2FwcGx5IHRoZSBvbGQgY2FudmFzIHRvIHRoZSBuZXcgb25lXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGh0bWxFbGVtZW50LCAwLCAwKTtcblxuICAgICAgICAvL3JldHVybiB0aGUgbmV3IGNhbnZhc1xuICAgICAgICByZXR1cm4gbmV3Q2FudmFzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyYXdDYW52YXNGcmFtZSgpIHtcbiAgICAgICAgaWYgKGlzUGF1c2VkUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZHJhd0NhbnZhc0ZyYW1lLCA1MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGh0bWxFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdjYW52YXMnKSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RUaW1lO1xuICAgICAgICAgICAgLy8gdmlhICMyMDYsIGJ5IEphY2sgaS5lLiBAU2V5bW91cnJcbiAgICAgICAgICAgIGxhc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgICAgIHdoYW1teS5mcmFtZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW1hZ2U6IGNsb25lQ2FudmFzKCksXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGlzUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChkcmF3Q2FudmFzRnJhbWUsIGNvbmZpZy5mcmFtZUludGVydmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGh0bWwyY2FudmFzKGh0bWxFbGVtZW50LCB7XG4gICAgICAgICAgICBncmFiTW91c2U6IHR5cGVvZiBjb25maWcuc2hvd01vdXNlUG9pbnRlciA9PT0gJ3VuZGVmaW5lZCcgfHwgY29uZmlnLnNob3dNb3VzZVBvaW50ZXIsXG4gICAgICAgICAgICBvbnJlbmRlcmVkOiBmdW5jdGlvbihjYW52YXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RUaW1lO1xuICAgICAgICAgICAgICAgIGlmICghZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZHJhd0NhbnZhc0ZyYW1lLCBjb25maWcuZnJhbWVJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdmlhICMyMDYsIGJ5IEphY2sgaS5lLiBAU2V5bW91cnJcbiAgICAgICAgICAgICAgICBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgICAgICAgd2hhbW15LmZyYW1lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3dlYnAnLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZWNvcmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChkcmF3Q2FudmFzRnJhbWUsIGNvbmZpZy5mcmFtZUludGVydmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgdmFyIHdoYW1teSA9IG5ldyBXaGFtbXkuVmlkZW8oMTAwKTtcbn1cblxuaWYgKHR5cGVvZiBSZWNvcmRSVEMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgUmVjb3JkUlRDLkNhbnZhc1JlY29yZGVyID0gQ2FudmFzUmVjb3JkZXI7XG59XG5cbi8vIF9fX19fX19fX19fX19fX19fXG4vLyBXaGFtbXlSZWNvcmRlci5qc1xuXG4vKipcbiAqIFdoYW1teVJlY29yZGVyIGlzIGEgc3RhbmRhbG9uZSBjbGFzcyB1c2VkIGJ5IHtAbGluayBSZWNvcmRSVEN9IHRvIGJyaW5nIHZpZGVvIHJlY29yZGluZyBpbiBDaHJvbWUuIEl0IHJ1bnMgdG9wIG92ZXIge0BsaW5rIFdoYW1teX0uXG4gKiBAc3VtbWFyeSBWaWRlbyByZWNvcmRpbmcgZmVhdHVyZSBpbiBDaHJvbWUuXG4gKiBAbGljZW5zZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEMjbGljZW5zZXxNSVR9XG4gKiBAYXV0aG9yIHtAbGluayBodHRwOi8vd3d3Lk11YXpLaGFuLmNvbXxNdWF6IEtoYW59XG4gKiBAdHlwZWRlZiBXaGFtbXlSZWNvcmRlclxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIHJlY29yZGVyID0gbmV3IFdoYW1teVJlY29yZGVyKG1lZGlhU3RyZWFtKTtcbiAqIHJlY29yZGVyLnJlY29yZCgpO1xuICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbihibG9iKSB7XG4gKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAqIH0pO1xuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gbWVkaWFTdHJlYW0gLSBNZWRpYVN0cmVhbSBvYmplY3QgZmV0Y2hlZCB1c2luZyBnZXRVc2VyTWVkaWEgQVBJIG9yIGdlbmVyYXRlZCB1c2luZyBjYXB0dXJlU3RyZWFtVW50aWxFbmRlZCBvciBXZWJBdWRpbyBBUEkuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0ge2Rpc2FibGVMb2dzOiB0cnVlLCBpbml0Q2FsbGJhY2s6IGZ1bmN0aW9uLCB2aWRlbzogSFRNTFZpZGVvRWxlbWVudCwgZXRjLn1cbiAqL1xuXG5mdW5jdGlvbiBXaGFtbXlSZWNvcmRlcihtZWRpYVN0cmVhbSwgY29uZmlnKSB7XG5cbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cbiAgICBpZiAoIWNvbmZpZy5mcmFtZUludGVydmFsKSB7XG4gICAgICAgIGNvbmZpZy5mcmFtZUludGVydmFsID0gMTA7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGZyYW1lcy1pbnRlcnZhbDonLCBjb25maWcuZnJhbWVJbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVjb3JkcyB2aWRlby5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFdoYW1teVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZWNvcmQoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWNvbmZpZy53aWR0aCkge1xuICAgICAgICAgICAgY29uZmlnLndpZHRoID0gMzIwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb25maWcuaGVpZ2h0KSB7XG4gICAgICAgICAgICBjb25maWcuaGVpZ2h0ID0gMjQwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb25maWcudmlkZW8pIHtcbiAgICAgICAgICAgIGNvbmZpZy52aWRlbyA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZmlnLmNhbnZhcykge1xuICAgICAgICAgICAgY29uZmlnLmNhbnZhcyA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNvbmZpZy5jYW52YXMud2lkdGggfHwgMzIwO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY29uZmlnLmNhbnZhcy5oZWlnaHQgfHwgMjQwO1xuXG4gICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICAvLyBzZXR0aW5nIGRlZmF1bHRzXG4gICAgICAgIGlmIChjb25maWcudmlkZW8gJiYgY29uZmlnLnZpZGVvIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgdmlkZW8gPSBjb25maWcudmlkZW8uY2xvbmVOb2RlKCk7XG5cbiAgICAgICAgICAgIGlmIChjb25maWcuaW5pdENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmluaXRDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZpZGVvLnNyY09iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBtZWRpYVN0cmVhbTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChtZWRpYVN0cmVhbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbigpIHsgLy8gXCJvbmxvYWRlZG1ldGFkYXRhXCIgbWF5IE5PVCB3b3JrIGluIEZGP1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcuaW5pdENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5pbml0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2aWRlby53aWR0aCA9IGNvbmZpZy52aWRlby53aWR0aDtcbiAgICAgICAgICAgIHZpZGVvLmhlaWdodCA9IGNvbmZpZy52aWRlby5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICB2aWRlby5tdXRlZCA9IHRydWU7XG4gICAgICAgIHZpZGVvLnBsYXkoKTtcblxuICAgICAgICBsYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB3aGFtbXkgPSBuZXcgV2hhbW15LlZpZGVvKCk7XG5cbiAgICAgICAgaWYgKCFjb25maWcuZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW52YXMgcmVzb2x1dGlvbnMnLCBjYW52YXMud2lkdGgsICcqJywgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gd2lkdGgvaGVpZ2h0JywgdmlkZW8ud2lkdGggfHwgY2FudmFzLndpZHRoLCAnKicsIHZpZGVvLmhlaWdodCB8fCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRyYXdGcmFtZXMoY29uZmlnLmZyYW1lSW50ZXJ2YWwpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEcmF3IGFuZCBwdXNoIGZyYW1lcyB0byBXaGFtbXlcbiAgICAgKiBAcGFyYW0ge2ludGVnZXJ9IGZyYW1lSW50ZXJ2YWwgLSBzZXQgbWluaW11bSBpbnRlcnZhbCAoaW4gbWlsbGlzZWNvbmRzKSBiZXR3ZWVuIGVhY2ggdGltZSB3ZSBwdXNoIGEgZnJhbWUgdG8gV2hhbW15XG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJhd0ZyYW1lcyhmcmFtZUludGVydmFsKSB7XG4gICAgICAgIGZyYW1lSW50ZXJ2YWwgPSB0eXBlb2YgZnJhbWVJbnRlcnZhbCAhPT0gJ3VuZGVmaW5lZCcgPyBmcmFtZUludGVydmFsIDogMTA7XG5cbiAgICAgICAgdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0VGltZTtcbiAgICAgICAgaWYgKCFkdXJhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZHJhd0ZyYW1lcywgZnJhbWVJbnRlcnZhbCwgZnJhbWVJbnRlcnZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNQYXVzZWRSZWNvcmRpbmcpIHtcbiAgICAgICAgICAgIGxhc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChkcmF3RnJhbWVzLCAxMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmlhICMyMDYsIGJ5IEphY2sgaS5lLiBAU2V5bW91cnJcbiAgICAgICAgbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICBpZiAodmlkZW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAvLyB2aWE6IGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vV2ViUlRDLUV4cGVyaW1lbnQvcHVsbC8zMTZcbiAgICAgICAgICAgIC8vIFR3ZWFrIGZvciBBbmRyb2lkIENocm9tZVxuICAgICAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIHdoYW1teS5mcmFtZXMucHVzaCh7XG4gICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICBpbWFnZTogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2Uvd2VicCcpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaXNTdG9wRHJhd2luZykge1xuICAgICAgICAgICAgc2V0VGltZW91dChkcmF3RnJhbWVzLCBmcmFtZUludGVydmFsLCBmcmFtZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzeW5jTG9vcChvKSB7XG4gICAgICAgIHZhciBpID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBvLmxlbmd0aDtcblxuICAgICAgICB2YXIgbG9vcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgaWYgKGkgPT09IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG8uY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvLmZ1bmN0aW9uVG9Mb29wKGxvb3AsIGkpO1xuICAgICAgICB9O1xuICAgICAgICBsb29wKCk7IC8vaW5pdFxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGJsYWNrIGZyYW1lcyBmcm9tIHRoZSBiZWdpbm5pbmcgdG8gdGhlIHNwZWNpZmllZCBmcmFtZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IF9mcmFtZXMgLSBhcnJheSBvZiBmcmFtZXMgdG8gYmUgY2hlY2tlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBfZnJhbWVzVG9DaGVjayAtIG51bWJlciBvZiBmcmFtZSB1bnRpbCBjaGVjayB3aWxsIGJlIGV4ZWN1dGVkICgtMSAtIHdpbGwgZHJvcCBhbGwgZnJhbWVzIHVudGlsIGZyYW1lIG5vdCBtYXRjaGVkIHdpbGwgYmUgZm91bmQpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IF9waXhUb2xlcmFuY2UgLSAwIC0gdmVyeSBzdHJpY3QgKG9ubHkgYmxhY2sgcGl4ZWwgY29sb3IpIDsgMSAtIGFsbFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBfZnJhbWVUb2xlcmFuY2UgLSAwIC0gdmVyeSBzdHJpY3QgKG9ubHkgYmxhY2sgZnJhbWUgY29sb3IpIDsgMSAtIGFsbFxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gLSBhcnJheSBvZiBmcmFtZXNcbiAgICAgKi9cbiAgICAvLyBwdWxsIzI5MyBieSBAdm9sb2RhbGV4ZXlcbiAgICBmdW5jdGlvbiBkcm9wQmxhY2tGcmFtZXMoX2ZyYW1lcywgX2ZyYW1lc1RvQ2hlY2ssIF9waXhUb2xlcmFuY2UsIF9mcmFtZVRvbGVyYW5jZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGxvY2FsQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGxvY2FsQ2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoO1xuICAgICAgICBsb2NhbENhbnZhcy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICB2YXIgY29udGV4dDJkID0gbG9jYWxDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgdmFyIHJlc3VsdEZyYW1lcyA9IFtdO1xuXG4gICAgICAgIHZhciBjaGVja1VudGlsTm90QmxhY2sgPSBfZnJhbWVzVG9DaGVjayA9PT0gLTE7XG4gICAgICAgIHZhciBlbmRDaGVja0ZyYW1lID0gKF9mcmFtZXNUb0NoZWNrICYmIF9mcmFtZXNUb0NoZWNrID4gMCAmJiBfZnJhbWVzVG9DaGVjayA8PSBfZnJhbWVzLmxlbmd0aCkgP1xuICAgICAgICAgICAgX2ZyYW1lc1RvQ2hlY2sgOiBfZnJhbWVzLmxlbmd0aDtcbiAgICAgICAgdmFyIHNhbXBsZUNvbG9yID0ge1xuICAgICAgICAgICAgcjogMCxcbiAgICAgICAgICAgIGc6IDAsXG4gICAgICAgICAgICBiOiAwXG4gICAgICAgIH07XG4gICAgICAgIHZhciBtYXhDb2xvckRpZmZlcmVuY2UgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICBNYXRoLnBvdygyNTUsIDIpICtcbiAgICAgICAgICAgIE1hdGgucG93KDI1NSwgMikgK1xuICAgICAgICAgICAgTWF0aC5wb3coMjU1LCAyKVxuICAgICAgICApO1xuICAgICAgICB2YXIgcGl4VG9sZXJhbmNlID0gX3BpeFRvbGVyYW5jZSAmJiBfcGl4VG9sZXJhbmNlID49IDAgJiYgX3BpeFRvbGVyYW5jZSA8PSAxID8gX3BpeFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBmcmFtZVRvbGVyYW5jZSA9IF9mcmFtZVRvbGVyYW5jZSAmJiBfZnJhbWVUb2xlcmFuY2UgPj0gMCAmJiBfZnJhbWVUb2xlcmFuY2UgPD0gMSA/IF9mcmFtZVRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBkb05vdENoZWNrTmV4dCA9IGZhbHNlO1xuXG4gICAgICAgIGFzeW5jTG9vcCh7XG4gICAgICAgICAgICBsZW5ndGg6IGVuZENoZWNrRnJhbWUsXG4gICAgICAgICAgICBmdW5jdGlvblRvTG9vcDogZnVuY3Rpb24obG9vcCwgZikge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaFBpeENvdW50LCBlbmRQaXhDaGVjaywgbWF4UGl4Q291bnQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgZmluaXNoSW1hZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb05vdENoZWNrTmV4dCAmJiBtYXhQaXhDb3VudCAtIG1hdGNoUGl4Q291bnQgPD0gbWF4UGl4Q291bnQgKiBmcmFtZVRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbW92ZWQgYmxhY2sgZnJhbWUgOiAnICsgZiArICcgOyBmcmFtZSBkdXJhdGlvbiAnICsgX2ZyYW1lc1tmXS5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZnJhbWUgaXMgcGFzc2VkIDogJyArIGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrVW50aWxOb3RCbGFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvTm90Q2hlY2tOZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdEZyYW1lcy5wdXNoKF9mcmFtZXNbZl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvb3AoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFkb05vdENoZWNrTmV4dCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0MmQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGNvbnRleHQyZC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUGl4Q291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kUGl4Q2hlY2sgPSBpbWFnZURhdGEuZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhQaXhDb3VudCA9IGltYWdlRGF0YS5kYXRhLmxlbmd0aCAvIDQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHBpeCA9IDA7IHBpeCA8IGVuZFBpeENoZWNrOyBwaXggKz0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sb3IgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHI6IGltYWdlRGF0YS5kYXRhW3BpeF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGc6IGltYWdlRGF0YS5kYXRhW3BpeCArIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiBpbWFnZURhdGEuZGF0YVtwaXggKyAyXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yRGlmZmVyZW5jZSA9IE1hdGguc3FydChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coY3VycmVudENvbG9yLnIgLSBzYW1wbGVDb2xvci5yLCAyKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGN1cnJlbnRDb2xvci5nIC0gc2FtcGxlQ29sb3IuZywgMikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhjdXJyZW50Q29sb3IuYiAtIHNhbXBsZUNvbG9yLmIsIDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbmNlIGluIGNvbG9yIGl0IGlzIGRpZmZlcmVuY2UgaW4gY29sb3IgdmVjdG9ycyAocjEsZzEsYjEpIDw9PiAocjIsZzIsYjIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yRGlmZmVyZW5jZSA8PSBtYXhDb2xvckRpZmZlcmVuY2UgKiBwaXhUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hQaXhDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IF9mcmFtZXNbZl0uaW1hZ2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdEZyYW1lcyA9IHJlc3VsdEZyYW1lcy5jb25jYXQoX2ZyYW1lcy5zbGljZShlbmRDaGVja0ZyYW1lKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0RnJhbWVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0IGxlYXN0IG9uZSBsYXN0IGZyYW1lIHNob3VsZCBiZSBhdmFpbGFibGUgZm9yIG5leHQgbWFuaXB1bGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRvdGFsIGR1cmF0aW9uIG9mIGFsbCBmcmFtZXMgd2lsbCBiZSA8IDEwMDAgdGhhbiBmZm1wZWcgZG9lc24ndCB3b3JrIHdlbGwuLi5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0RnJhbWVzLnB1c2goX2ZyYW1lc1tfZnJhbWVzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0RnJhbWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3RvcERyYXdpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0b3BzIHJlY29yZGluZyB2aWRlby5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLCB0aGF0IGlzIHVzZWQgdG8gcGFzcyByZWNvcmRlZCBibG9iIGJhY2sgdG8gdGhlIGNhbGxlZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFdoYW1teVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgKiAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpc1N0b3BEcmF3aW5nID0gdHJ1ZTtcblxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBhbmFseXNlIG9mIGFsbCBmcmFtZXMgdGFrZXMgc29tZSB0aW1lIVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gZS5nLiBkcm9wQmxhY2tGcmFtZXMoZnJhbWVzLCAxMCwgMSwgMSkgLSB3aWxsIGN1dCBhbGwgMTAgZnJhbWVzXG4gICAgICAgICAgICAvLyBlLmcuIGRyb3BCbGFja0ZyYW1lcyhmcmFtZXMsIDEwLCAwLjUsIDAuNSkgLSB3aWxsIGFuYWx5c2UgMTAgZnJhbWVzXG4gICAgICAgICAgICAvLyBlLmcuIGRyb3BCbGFja0ZyYW1lcyhmcmFtZXMsIDEwKSA9PT0gZHJvcEJsYWNrRnJhbWVzKGZyYW1lcywgMTAsIDAsIDApIC0gd2lsbCBhbmFseXNlIDEwIGZyYW1lcyB3aXRoIHN0cmljdCBibGFjayBjb2xvclxuICAgICAgICAgICAgZHJvcEJsYWNrRnJhbWVzKHdoYW1teS5mcmFtZXMsIC0xLCBudWxsLCBudWxsLCBmdW5jdGlvbihmcmFtZXMpIHtcbiAgICAgICAgICAgICAgICB3aGFtbXkuZnJhbWVzID0gZnJhbWVzO1xuXG4gICAgICAgICAgICAgICAgLy8gdG8gZGlzcGxheSBhZHZlcnRpc2VtZW50IGltYWdlcyFcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFkdmVydGlzZW1lbnQgJiYgY29uZmlnLmFkdmVydGlzZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoYW1teS5mcmFtZXMgPSBjb25maWcuYWR2ZXJ0aXNlbWVudC5jb25jYXQod2hhbW15LmZyYW1lcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtCbG9ifSBibG9iIC0gUmVjb3JkZWQgZnJhbWVzIGluIHZpZGVvL3dlYm0gYmxvYi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgV2hhbW15UmVjb3JkZXJcbiAgICAgICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICogICAgIHZhciBibG9iID0gcmVjb3JkZXIuYmxvYjtcbiAgICAgICAgICAgICAgICAgKiB9KTtcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB3aGFtbXkuY29tcGlsZShmdW5jdGlvbihibG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJsb2IgPSBibG9iO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5ibG9iLmZvckVhY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJsb2IgPSBuZXcgQmxvYihbXSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKF90aGlzLmJsb2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMTApO1xuICAgIH07XG5cbiAgICB2YXIgaXNQYXVzZWRSZWNvcmRpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHBhdXNlcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucGF1c2UoKTtcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlzUGF1c2VkUmVjb3JkaW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzdW1lcyB0aGUgcmVjb3JkaW5nIHByb2Nlc3MuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVzdW1lKCk7XG4gICAgICovXG4gICAgdGhpcy5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaXNQYXVzZWRSZWNvcmRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoaXNTdG9wRHJhd2luZykge1xuICAgICAgICAgICAgdGhpcy5yZWNvcmQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXNldHMgY3VycmVudGx5IHJlY29yZGVkIGRhdGEuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlSZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFyUmVjb3JkZWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgd2hhbW15LmZyYW1lcyA9IFtdO1xuICAgIH07XG5cbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIHZhciB2aWRlbztcbiAgICB2YXIgbGFzdFRpbWU7XG4gICAgdmFyIHdoYW1teTtcbn1cblxuaWYgKHR5cGVvZiBSZWNvcmRSVEMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgUmVjb3JkUlRDLldoYW1teVJlY29yZGVyID0gV2hhbW15UmVjb3JkZXI7XG59XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnRpbWF0dGVyMTUvd2hhbW15L2Jsb2IvbWFzdGVyL0xJQ0VOU0Vcbi8vIF9fX19fX19fX1xuLy8gV2hhbW15LmpzXG5cbi8vIHRvZG86IEZpcmVmb3ggbm93IHN1cHBvcnRzIHdlYnAgZm9yIHdlYm0gY29udGFpbmVycyFcbi8vIHRoZWlyIE1lZGlhUmVjb3JkZXIgaW1wbGVtZW50YXRpb24gd29ya3Mgd2VsbCFcbi8vIHNob3VsZCB3ZSBwcm92aWRlIGFuIG9wdGlvbiB0byByZWNvcmQgdmlhIFdoYW1teS5qcyBvciBNZWRpYVJlY29yZGVyIEFQSSBpcyBhIGJldHRlciBzb2x1dGlvbj9cblxuLyoqXG4gKiBXaGFtbXkgaXMgYSBzdGFuZGFsb25lIGNsYXNzIHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gYnJpbmcgdmlkZW8gcmVjb3JkaW5nIGluIENocm9tZS4gSXQgaXMgd3JpdHRlbiBieSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FudGltYXR0ZXIxNXxhbnRpbWF0dGVyMTV9XG4gKiBAc3VtbWFyeSBBIHJlYWwgdGltZSBqYXZhc2NyaXB0IHdlYm0gZW5jb2RlciBiYXNlZCBvbiBhIGNhbnZhcyBoYWNrLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgV2hhbW15XG4gKiBAY2xhc3NcbiAqIEBleGFtcGxlXG4gKiB2YXIgcmVjb3JkZXIgPSBuZXcgV2hhbW15KCkuVmlkZW8oMTUpO1xuICogcmVjb3JkZXIuYWRkKGNvbnRleHQgfHwgY2FudmFzIHx8IGRhdGFVUkwpO1xuICogdmFyIG91dHB1dCA9IHJlY29yZGVyLmNvbXBpbGUoKTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqL1xuXG52YXIgV2hhbW15ID0gKGZ1bmN0aW9uKCkge1xuICAgIC8vIGEgbW9yZSBhYnN0cmFjdC1pc2ggQVBJXG5cbiAgICBmdW5jdGlvbiBXaGFtbXlWaWRlbyhkdXJhdGlvbikge1xuICAgICAgICB0aGlzLmZyYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb24gfHwgMTtcbiAgICAgICAgdGhpcy5xdWFsaXR5ID0gMC44O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhc3MgQ2FudmFzIG9yIENvbnRleHQgb3IgaW1hZ2Uvd2VicChzdHJpbmcpIHRvIHtAbGluayBXaGFtbXl9IGVuY29kZXIuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBXaGFtbXlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyID0gbmV3IFdoYW1teSgpLlZpZGVvKDAuOCwgMTAwKTtcbiAgICAgKiByZWNvcmRlci5hZGQoY2FudmFzIHx8IGNvbnRleHQgfHwgJ2ltYWdlL3dlYnAnKTtcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZnJhbWUgLSBDYW52YXMgfHwgQ29udGV4dCB8fCBpbWFnZS93ZWJwXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIC0gU3RpY2sgYSBkdXJhdGlvbiAoaW4gbWlsbGlzZWNvbmRzKVxuICAgICAqL1xuICAgIFdoYW1teVZpZGVvLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihmcmFtZSwgZHVyYXRpb24pIHtcbiAgICAgICAgaWYgKCdjYW52YXMnIGluIGZyYW1lKSB7IC8vQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXG4gICAgICAgICAgICBmcmFtZSA9IGZyYW1lLmNhbnZhcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgndG9EYXRhVVJMJyBpbiBmcmFtZSkge1xuICAgICAgICAgICAgZnJhbWUgPSBmcmFtZS50b0RhdGFVUkwoJ2ltYWdlL3dlYnAnLCB0aGlzLnF1YWxpdHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEoL15kYXRhOmltYWdlXFwvd2VicDtiYXNlNjQsL2lnKS50ZXN0KGZyYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgJ0lucHV0IG11c3QgYmUgZm9ybWF0dGVkIHByb3Blcmx5IGFzIGEgYmFzZTY0IGVuY29kZWQgRGF0YVVSSSBvZiB0eXBlIGltYWdlL3dlYnAnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJhbWVzLnB1c2goe1xuICAgICAgICAgICAgaW1hZ2U6IGZyYW1lLFxuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uIHx8IHRoaXMuZHVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NJbldlYldvcmtlcihfZnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIGJsb2IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtfZnVuY3Rpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICd0aGlzLm9ubWVzc2FnZSA9ICBmdW5jdGlvbiAoZSkgeycgKyBfZnVuY3Rpb24ubmFtZSArICcoZS5kYXRhKTt9J1xuICAgICAgICBdLCB7XG4gICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCdcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKGJsb2IpO1xuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICByZXR1cm4gd29ya2VyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdoYW1teUluV2ViV29ya2VyKGZyYW1lcykge1xuICAgICAgICBmdW5jdGlvbiBBcnJheVRvV2ViTShmcmFtZXMpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gY2hlY2tGcmFtZXMoZnJhbWVzKTtcbiAgICAgICAgICAgIGlmICghaW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNsdXN0ZXJNYXhEdXJhdGlvbiA9IDMwMDAwO1xuXG4gICAgICAgICAgICB2YXIgRUJNTCA9IFt7XG4gICAgICAgICAgICAgICAgJ2lkJzogMHgxYTQ1ZGZhMywgLy8gRUJNTFxuICAgICAgICAgICAgICAgICdkYXRhJzogW3tcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAxLFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDQyODYgLy8gRUJNTFZlcnNpb25cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg0MmY3IC8vIEVCTUxSZWFkVmVyc2lvblxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiA0LFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDQyZjIgLy8gRUJNTE1heElETGVuZ3RoXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IDgsXG4gICAgICAgICAgICAgICAgICAgICdpZCc6IDB4NDJmMyAvLyBFQk1MTWF4U2l6ZUxlbmd0aFxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAnd2VibScsXG4gICAgICAgICAgICAgICAgICAgICdpZCc6IDB4NDI4MiAvLyBEb2NUeXBlXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IDIsXG4gICAgICAgICAgICAgICAgICAgICdpZCc6IDB4NDI4NyAvLyBEb2NUeXBlVmVyc2lvblxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAyLFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDQyODUgLy8gRG9jVHlwZVJlYWRWZXJzaW9uXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAnaWQnOiAweDE4NTM4MDY3LCAvLyBTZWdtZW50XG4gICAgICAgICAgICAgICAgJ2RhdGEnOiBbe1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDE1NDlhOTY2LCAvLyBJbmZvXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogMWU2LCAvL2RvIHRoaW5ncyBpbiBtaWxsaXNlY3MgKG51bSBvZiBuYW5vc2VjcyBmb3IgZHVyYXRpb24gc2NhbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDJhZDdiMSAvLyBUaW1lY29kZVNjYWxlXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogJ3doYW1teScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDRkODAgLy8gTXV4aW5nQXBwXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogJ3doYW1teScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDU3NDEgLy8gV3JpdGluZ0FwcFxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IGRvdWJsZVRvU3RyaW5nKGluZm8uZHVyYXRpb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHg0NDg5IC8vIER1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDE2NTRhZTZiLCAvLyBUcmFja3NcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHhhZSwgLy8gVHJhY2tFbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweGQ3IC8vIFRyYWNrTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4NzNjNSAvLyBUcmFja1VJRFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweDljIC8vIEZsYWdMYWNpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6ICd1bmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4MjJiNTljIC8vIExhbmd1YWdlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAnVl9WUDgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4ODYgLy8gQ29kZWNJRFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogJ1ZQOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHgyNTg2ODggLy8gQ29kZWNOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IDB4ODMgLy8gVHJhY2tUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHhlMCwgLy8gVmlkZW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogaW5mby53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogMHhiMCAvLyBQaXhlbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IGluZm8uaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAweGJhIC8vIFBpeGVsSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1dO1xuXG4gICAgICAgICAgICAvL0dlbmVyYXRlIGNsdXN0ZXJzIChtYXggZHVyYXRpb24pXG4gICAgICAgICAgICB2YXIgZnJhbWVOdW1iZXIgPSAwO1xuICAgICAgICAgICAgdmFyIGNsdXN0ZXJUaW1lY29kZSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoZnJhbWVOdW1iZXIgPCBmcmFtZXMubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2x1c3RlckZyYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyRHVyYXRpb24gPSAwO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlckZyYW1lcy5wdXNoKGZyYW1lc1tmcmFtZU51bWJlcl0pO1xuICAgICAgICAgICAgICAgICAgICBjbHVzdGVyRHVyYXRpb24gKz0gZnJhbWVzW2ZyYW1lTnVtYmVyXS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVOdW1iZXIrKztcbiAgICAgICAgICAgICAgICB9IHdoaWxlIChmcmFtZU51bWJlciA8IGZyYW1lcy5sZW5ndGggJiYgY2x1c3RlckR1cmF0aW9uIDwgY2x1c3Rlck1heER1cmF0aW9uKTtcblxuICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyQ291bnRlciA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGNsdXN0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IDB4MWY0M2I2NzUsIC8vIENsdXN0ZXJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBnZXRDbHVzdGVyRGF0YShjbHVzdGVyVGltZWNvZGUsIGNsdXN0ZXJDb3VudGVyLCBjbHVzdGVyRnJhbWVzKVxuICAgICAgICAgICAgICAgIH07IC8vQWRkIGNsdXN0ZXIgdG8gc2VnbWVudFxuICAgICAgICAgICAgICAgIEVCTUxbMV0uZGF0YS5wdXNoKGNsdXN0ZXIpO1xuICAgICAgICAgICAgICAgIGNsdXN0ZXJUaW1lY29kZSArPSBjbHVzdGVyRHVyYXRpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZUVCTUwoRUJNTCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDbHVzdGVyRGF0YShjbHVzdGVyVGltZWNvZGUsIGNsdXN0ZXJDb3VudGVyLCBjbHVzdGVyRnJhbWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICAnZGF0YSc6IGNsdXN0ZXJUaW1lY29kZSxcbiAgICAgICAgICAgICAgICAnaWQnOiAweGU3IC8vIFRpbWVjb2RlXG4gICAgICAgICAgICB9XS5jb25jYXQoY2x1c3RlckZyYW1lcy5tYXAoZnVuY3Rpb24od2VicCkge1xuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IG1ha2VTaW1wbGVCbG9jayh7XG4gICAgICAgICAgICAgICAgICAgIGRpc2NhcmRhYmxlOiAwLFxuICAgICAgICAgICAgICAgICAgICBmcmFtZTogd2VicC5kYXRhLnNsaWNlKDQpLFxuICAgICAgICAgICAgICAgICAgICBpbnZpc2libGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGtleWZyYW1lOiAxLFxuICAgICAgICAgICAgICAgICAgICBsYWNpbmc6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrTnVtOiAxLFxuICAgICAgICAgICAgICAgICAgICB0aW1lY29kZTogTWF0aC5yb3VuZChjbHVzdGVyQ291bnRlcilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjbHVzdGVyQ291bnRlciArPSB3ZWJwLmR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGJsb2NrLFxuICAgICAgICAgICAgICAgICAgICBpZDogMHhhM1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdW1zIHRoZSBsZW5ndGhzIG9mIGFsbCB0aGUgZnJhbWVzIGFuZCBnZXRzIHRoZSBkdXJhdGlvblxuXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrRnJhbWVzKGZyYW1lcykge1xuICAgICAgICAgICAgaWYgKCFmcmFtZXNbMF0pIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnU29tZXRoaW5nIHdlbnQgd3JvbmcuIE1heWJlIFdlYlAgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgYnJvd3Nlci4nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgd2lkdGggPSBmcmFtZXNbMF0ud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gZnJhbWVzWzBdLmhlaWdodCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGZyYW1lc1swXS5kdXJhdGlvbjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiArPSBmcmFtZXNbaV0uZHVyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBudW1Ub0J1ZmZlcihudW0pIHtcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKG51bSA+IDApIHtcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKG51bSAmIDB4ZmYpO1xuICAgICAgICAgICAgICAgIG51bSA9IG51bSA+PiA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHBhcnRzLnJldmVyc2UoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdHJUb0J1ZmZlcihzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShzdHIuc3BsaXQoJycpLm1hcChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJpdHNUb0J1ZmZlcihiaXRzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgdmFyIHBhZCA9IChiaXRzLmxlbmd0aCAlIDgpID8gKG5ldyBBcnJheSgxICsgOCAtIChiaXRzLmxlbmd0aCAlIDgpKSkuam9pbignMCcpIDogJyc7XG4gICAgICAgICAgICBiaXRzID0gcGFkICsgYml0cztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYml0cy5sZW5ndGg7IGkgKz0gOCkge1xuICAgICAgICAgICAgICAgIGRhdGEucHVzaChwYXJzZUludChiaXRzLnN1YnN0cihpLCA4KSwgMikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVFQk1MKGpzb24pIHtcbiAgICAgICAgICAgIHZhciBlYm1sID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpzb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGpzb25baV0uZGF0YTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGdlbmVyYXRlRUJNTChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBiaXRzVG9CdWZmZXIoZGF0YS50b1N0cmluZygyKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gc3RyVG9CdWZmZXIoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGRhdGEuc2l6ZSB8fCBkYXRhLmJ5dGVMZW5ndGggfHwgZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIHplcm9lcyA9IE1hdGguY2VpbChNYXRoLmNlaWwoTWF0aC5sb2cobGVuKSAvIE1hdGgubG9nKDIpKSAvIDgpO1xuICAgICAgICAgICAgICAgIHZhciBzaXplVG9TdHJpbmcgPSBsZW4udG9TdHJpbmcoMik7XG4gICAgICAgICAgICAgICAgdmFyIHBhZGRlZCA9IChuZXcgQXJyYXkoKHplcm9lcyAqIDcgKyA3ICsgMSkgLSBzaXplVG9TdHJpbmcubGVuZ3RoKSkuam9pbignMCcpICsgc2l6ZVRvU3RyaW5nO1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gKG5ldyBBcnJheSh6ZXJvZXMpKS5qb2luKCcwJykgKyAnMScgKyBwYWRkZWQ7XG5cbiAgICAgICAgICAgICAgICBlYm1sLnB1c2gobnVtVG9CdWZmZXIoanNvbltpXS5pZCkpO1xuICAgICAgICAgICAgICAgIGVibWwucHVzaChiaXRzVG9CdWZmZXIoc2l6ZSkpO1xuICAgICAgICAgICAgICAgIGVibWwucHVzaChkYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iKGVibWwsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vd2VibSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9CaW5TdHJPbGQoYml0cykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSAnJztcbiAgICAgICAgICAgIHZhciBwYWQgPSAoYml0cy5sZW5ndGggJSA4KSA/IChuZXcgQXJyYXkoMSArIDggLSAoYml0cy5sZW5ndGggJSA4KSkpLmpvaW4oJzAnKSA6ICcnO1xuICAgICAgICAgICAgYml0cyA9IHBhZCArIGJpdHM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdHMubGVuZ3RoOyBpICs9IDgpIHtcbiAgICAgICAgICAgICAgICBkYXRhICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoYml0cy5zdWJzdHIoaSwgOCksIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbWFrZVNpbXBsZUJsb2NrKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBmbGFncyA9IDA7XG5cbiAgICAgICAgICAgIGlmIChkYXRhLmtleWZyYW1lKSB7XG4gICAgICAgICAgICAgICAgZmxhZ3MgfD0gMTI4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5pbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBmbGFncyB8PSA4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5sYWNpbmcpIHtcbiAgICAgICAgICAgICAgICBmbGFncyB8PSAoZGF0YS5sYWNpbmcgPDwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkYXRhLmRpc2NhcmRhYmxlKSB7XG4gICAgICAgICAgICAgICAgZmxhZ3MgfD0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRhdGEudHJhY2tOdW0gPiAxMjcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnVHJhY2tOdW1iZXIgPiAxMjcgbm90IHN1cHBvcnRlZCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvdXQgPSBbZGF0YS50cmFja051bSB8IDB4ODAsIGRhdGEudGltZWNvZGUgPj4gOCwgZGF0YS50aW1lY29kZSAmIDB4ZmYsIGZsYWdzXS5tYXAoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpO1xuICAgICAgICAgICAgfSkuam9pbignJykgKyBkYXRhLmZyYW1lO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGFyc2VXZWJQKHJpZmYpIHtcbiAgICAgICAgICAgIHZhciBWUDggPSByaWZmLlJJRkZbMF0uV0VCUFswXTtcblxuICAgICAgICAgICAgdmFyIGZyYW1lU3RhcnQgPSBWUDguaW5kZXhPZignXFx4OWRcXHgwMVxceDJhJyk7IC8vIEEgVlA4IGtleWZyYW1lIHN0YXJ0cyB3aXRoIHRoZSAweDlkMDEyYSBoZWFkZXJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBjID0gW107IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjW2ldID0gVlA4LmNoYXJDb2RlQXQoZnJhbWVTdGFydCArIDMgKyBpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHdpZHRoLCBoZWlnaHQsIHRtcDtcblxuICAgICAgICAgICAgLy90aGUgY29kZSBiZWxvdyBpcyBsaXRlcmFsbHkgY29waWVkIHZlcmJhdGltIGZyb20gdGhlIGJpdHN0cmVhbSBzcGVjXG4gICAgICAgICAgICB0bXAgPSAoY1sxXSA8PCA4KSB8IGNbMF07XG4gICAgICAgICAgICB3aWR0aCA9IHRtcCAmIDB4M0ZGRjtcbiAgICAgICAgICAgIHRtcCA9IChjWzNdIDw8IDgpIHwgY1syXTtcbiAgICAgICAgICAgIGhlaWdodCA9IHRtcCAmIDB4M0ZGRjtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGRhdGE6IFZQOCxcbiAgICAgICAgICAgICAgICByaWZmOiByaWZmXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U3RyTGVuZ3RoKHN0cmluZywgb2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihvZmZzZXQgKyA0LCA0KS5zcGxpdCgnJykubWFwKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdW5wYWRkZWQgPSBpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgQXJyYXkoOCAtIHVucGFkZGVkLmxlbmd0aCArIDEpKS5qb2luKCcwJykgKyB1bnBhZGRlZDtcbiAgICAgICAgICAgIH0pLmpvaW4oJycpLCAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUklGRihzdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgdmFyIGNodW5rcyA9IHt9O1xuXG4gICAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IHN0cmluZy5zdWJzdHIob2Zmc2V0LCA0KTtcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gZ2V0U3RyTGVuZ3RoKHN0cmluZywgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHN0cmluZy5zdWJzdHIob2Zmc2V0ICsgNCArIDQsIGxlbik7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQgKyA0ICsgbGVuO1xuICAgICAgICAgICAgICAgIGNodW5rc1tpZF0gPSBjaHVua3NbaWRdIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlkID09PSAnUklGRicgfHwgaWQgPT09ICdMSVNUJykge1xuICAgICAgICAgICAgICAgICAgICBjaHVua3NbaWRdLnB1c2gocGFyc2VSSUZGKGRhdGEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaHVua3NbaWRdLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNodW5rcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRvdWJsZVRvU3RyaW5nKG51bSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoXG4gICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoKG5ldyBGbG9hdDY0QXJyYXkoW251bV0pKS5idWZmZXIpLCAwKS5tYXAoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpO1xuICAgICAgICAgICAgfSkucmV2ZXJzZSgpLmpvaW4oJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHdlYm0gPSBuZXcgQXJyYXlUb1dlYk0oZnJhbWVzLm1hcChmdW5jdGlvbihmcmFtZSkge1xuICAgICAgICAgICAgdmFyIHdlYnAgPSBwYXJzZVdlYlAocGFyc2VSSUZGKGF0b2IoZnJhbWUuaW1hZ2Uuc2xpY2UoMjMpKSkpO1xuICAgICAgICAgICAgd2VicC5kdXJhdGlvbiA9IGZyYW1lLmR1cmF0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIHdlYnA7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBwb3N0TWVzc2FnZSh3ZWJtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGZyYW1lcyBpbiBXZWJNIGNvbnRhaW5lci4gSXQgdXNlcyBXZWJXb3JraW52b2tlIHRvIGludm9rZSAnQXJyYXlUb1dlYk0nIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLCB0aGF0IGlzIHVzZWQgdG8gcGFzcyByZWNvcmRlZCBibG9iIGJhY2sgdG8gdGhlIGNhbGxlZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIFdoYW1teVxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIgPSBuZXcgV2hhbW15KCkuVmlkZW8oMC44LCAxMDApO1xuICAgICAqIHJlY29yZGVyLmNvbXBpbGUoZnVuY3Rpb24oYmxvYikge1xuICAgICAqICAgIC8vIGJsb2Iuc2l6ZSAtIGJsb2IudHlwZVxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIFdoYW1teVZpZGVvLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHdlYldvcmtlciA9IHByb2Nlc3NJbldlYldvcmtlcih3aGFtbXlJbldlYldvcmtlcik7XG5cbiAgICAgICAgd2ViV29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXZlbnQuZGF0YS5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQuZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgd2ViV29ya2VyLnBvc3RNZXNzYWdlKHRoaXMuZnJhbWVzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbW9yZSBhYnN0cmFjdC1pc2ggQVBJLlxuICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAqIEBtZW1iZXJvZiBXaGFtbXlcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogcmVjb3JkZXIgPSBuZXcgV2hhbW15KCkuVmlkZW8oMC44LCAxMDApO1xuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJ9IHNwZWVkIC0gMC44XG4gICAgICAgICAqIEBwYXJhbSB7P251bWJlcn0gcXVhbGl0eSAtIDEwMFxuICAgICAgICAgKi9cbiAgICAgICAgVmlkZW86IFdoYW1teVZpZGVvXG4gICAgfTtcbn0pKCk7XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5XaGFtbXkgPSBXaGFtbXk7XG59XG5cbi8vIF9fX19fX19fX19fX19fIChpbmRleGVkLWRiKVxuLy8gRGlza1N0b3JhZ2UuanNcblxuLyoqXG4gKiBEaXNrU3RvcmFnZSBpcyBhIHN0YW5kYWxvbmUgb2JqZWN0IHVzZWQgYnkge0BsaW5rIFJlY29yZFJUQ30gdG8gc3RvcmUgcmVjb3JkZWQgYmxvYnMgaW4gSW5kZXhlZERCIHN0b3JhZ2UuXG4gKiBAc3VtbWFyeSBXcml0aW5nIGJsb2JzIGludG8gSW5kZXhlZERCLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQGV4YW1wbGVcbiAqIERpc2tTdG9yYWdlLlN0b3JlKHtcbiAqICAgICBhdWRpb0Jsb2I6IHlvdXJBdWRpb0Jsb2IsXG4gKiAgICAgdmlkZW9CbG9iOiB5b3VyVmlkZW9CbG9iLFxuICogICAgIGdpZkJsb2IgIDogeW91ckdpZkJsb2JcbiAqIH0pO1xuICogRGlza1N0b3JhZ2UuRmV0Y2goZnVuY3Rpb24oZGF0YVVSTCwgdHlwZSkge1xuICogICAgIGlmKHR5cGUgPT09ICdhdWRpb0Jsb2InKSB7IH1cbiAqICAgICBpZih0eXBlID09PSAndmlkZW9CbG9iJykgeyB9XG4gKiAgICAgaWYodHlwZSA9PT0gJ2dpZkJsb2InKSAgIHsgfVxuICogfSk7XG4gKiAvLyBEaXNrU3RvcmFnZS5kYXRhU3RvcmVOYW1lID0gJ3JlY29yZFJUQyc7XG4gKiAvLyBEaXNrU3RvcmFnZS5vbkVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsgfTtcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGluaXQgLSBUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBvbmNlIHRvIGluaXRpYWxpemUgSW5kZXhlZERCIE9iamVjdFN0b3JlLiBUaG91Z2gsIGl0IGlzIGF1dG8tdXNlZCBpbnRlcm5hbGx5LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gRmV0Y2ggLSBUaGlzIG1ldGhvZCBmZXRjaGVzIHN0b3JlZCBibG9icyBmcm9tIEluZGV4ZWREQi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFN0b3JlIC0gVGhpcyBtZXRob2Qgc3RvcmVzIGJsb2JzIGluIEluZGV4ZWREQi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IG9uRXJyb3IgLSBUaGlzIGZ1bmN0aW9uIGlzIGludm9rZWQgZm9yIGFueSBrbm93bi91bmtub3duIGVycm9yLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGRhdGFTdG9yZU5hbWUgLSBOYW1lIG9mIHRoZSBPYmplY3RTdG9yZSBjcmVhdGVkIGluIEluZGV4ZWREQiBzdG9yYWdlLlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL211YXota2hhbi9SZWNvcmRSVEN8UmVjb3JkUlRDIFNvdXJjZSBDb2RlfVxuICovXG5cblxudmFyIERpc2tTdG9yYWdlID0ge1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIG9uY2UgdG8gaW5pdGlhbGl6ZSBJbmRleGVkREIgT2JqZWN0U3RvcmUuIFRob3VnaCwgaXQgaXMgYXV0by11c2VkIGludGVybmFsbHkuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBEaXNrU3RvcmFnZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBleGFtcGxlXG4gICAgICogRGlza1N0b3JhZ2UuaW5pdCgpO1xuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleGVkREIgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBpbmRleGVkREIub3BlbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0luZGV4ZWREQiBBUEkgYXJlIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBicm93c2VyLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRiVmVyc2lvbiA9IDE7XG4gICAgICAgIHZhciBkYk5hbWUgPSB0aGlzLmRiTmFtZSB8fCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1xcL3w6fCN8JXxcXC58XFxbfFxcXS9nLCAnJyksXG4gICAgICAgICAgICBkYjtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihkYk5hbWUsIGRiVmVyc2lvbik7XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0U3RvcmUoZGF0YUJhc2UpIHtcbiAgICAgICAgICAgIGRhdGFCYXNlLmNyZWF0ZU9iamVjdFN0b3JlKHNlbGYuZGF0YVN0b3JlTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwdXRJbkRCKCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oW3NlbGYuZGF0YVN0b3JlTmFtZV0sICdyZWFkd3JpdGUnKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYudmlkZW9CbG9iKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc2VsZi5kYXRhU3RvcmVOYW1lKS5wdXQoc2VsZi52aWRlb0Jsb2IsICd2aWRlb0Jsb2InKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuZ2lmQmxvYikge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuZGF0YVN0b3JlTmFtZSkucHV0KHNlbGYuZ2lmQmxvYiwgJ2dpZkJsb2InKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuYXVkaW9CbG9iKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc2VsZi5kYXRhU3RvcmVOYW1lKS5wdXQoc2VsZi5hdWRpb0Jsb2IsICdhdWRpb0Jsb2InKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RnJvbVN0b3JlKHBvcnRpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc2VsZi5kYXRhU3RvcmVOYW1lKS5nZXQocG9ydGlvbk5hbWUpLm9uc3VjY2VzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKGV2ZW50LnRhcmdldC5yZXN1bHQsIHBvcnRpb25OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdldEZyb21TdG9yZSgnYXVkaW9CbG9iJyk7XG4gICAgICAgICAgICBnZXRGcm9tU3RvcmUoJ3ZpZGVvQmxvYicpO1xuICAgICAgICAgICAgZ2V0RnJvbVN0b3JlKCdnaWZCbG9iJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBzZWxmLm9uRXJyb3I7XG5cbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRiID0gcmVxdWVzdC5yZXN1bHQ7XG4gICAgICAgICAgICBkYi5vbmVycm9yID0gc2VsZi5vbkVycm9yO1xuXG4gICAgICAgICAgICBpZiAoZGIuc2V0VmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGlmIChkYi52ZXJzaW9uICE9PSBkYlZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNldFZlcnNpb24gPSBkYi5zZXRWZXJzaW9uKGRiVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIHNldFZlcnNpb24ub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVPYmplY3RTdG9yZShkYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwdXRJbkRCKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHV0SW5EQigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHV0SW5EQigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBjcmVhdGVPYmplY3RTdG9yZShldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGZldGNoZXMgc3RvcmVkIGJsb2JzIGZyb20gSW5kZXhlZERCLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgRGlza1N0b3JhZ2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIERpc2tTdG9yYWdlLkZldGNoKGZ1bmN0aW9uKGRhdGFVUkwsIHR5cGUpIHtcbiAgICAgKiAgICAgaWYodHlwZSA9PT0gJ2F1ZGlvQmxvYicpIHsgfVxuICAgICAqICAgICBpZih0eXBlID09PSAndmlkZW9CbG9iJykgeyB9XG4gICAgICogICAgIGlmKHR5cGUgPT09ICdnaWZCbG9iJykgICB7IH1cbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBGZXRjaDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmluaXQoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0b3JlcyBibG9icyBpbiBJbmRleGVkREIuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBEaXNrU3RvcmFnZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBleGFtcGxlXG4gICAgICogRGlza1N0b3JhZ2UuU3RvcmUoe1xuICAgICAqICAgICBhdWRpb0Jsb2I6IHlvdXJBdWRpb0Jsb2IsXG4gICAgICogICAgIHZpZGVvQmxvYjogeW91clZpZGVvQmxvYixcbiAgICAgKiAgICAgZ2lmQmxvYiAgOiB5b3VyR2lmQmxvYlxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIFN0b3JlOiBmdW5jdGlvbihjb25maWcpIHtcbiAgICAgICAgdGhpcy5hdWRpb0Jsb2IgPSBjb25maWcuYXVkaW9CbG9iO1xuICAgICAgICB0aGlzLnZpZGVvQmxvYiA9IGNvbmZpZy52aWRlb0Jsb2I7XG4gICAgICAgIHRoaXMuZ2lmQmxvYiA9IGNvbmZpZy5naWZCbG9iO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBpbnZva2VkIGZvciBhbnkga25vd24vdW5rbm93biBlcnJvci5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIERpc2tTdG9yYWdlXG4gICAgICogQGludGVybmFsXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBEaXNrU3RvcmFnZS5vbkVycm9yID0gZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAqICAgICBhbGVyb3QoIEpTT04uc3RyaW5naWZ5KGVycm9yKSApO1xuICAgICAqIH07XG4gICAgICovXG4gICAgb25FcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgJ1xcdCcpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGRhdGFTdG9yZU5hbWUgLSBOYW1lIG9mIHRoZSBPYmplY3RTdG9yZSBjcmVhdGVkIGluIEluZGV4ZWREQiBzdG9yYWdlLlxuICAgICAqIEBtZW1iZXJvZiBEaXNrU3RvcmFnZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBleGFtcGxlXG4gICAgICogRGlza1N0b3JhZ2UuZGF0YVN0b3JlTmFtZSA9ICdyZWNvcmRSVEMnO1xuICAgICAqL1xuICAgIGRhdGFTdG9yZU5hbWU6ICdyZWNvcmRSVEMnLFxuICAgIGRiTmFtZTogbnVsbFxufTtcblxuaWYgKHR5cGVvZiBSZWNvcmRSVEMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgUmVjb3JkUlRDLkRpc2tTdG9yYWdlID0gRGlza1N0b3JhZ2U7XG59XG5cbi8vIF9fX19fX19fX19fX19fXG4vLyBHaWZSZWNvcmRlci5qc1xuXG4vKipcbiAqIEdpZlJlY29yZGVyIGlzIHN0YW5kYWxvbmUgY2Fsc3MgdXNlZCBieSB7QGxpbmsgUmVjb3JkUlRDfSB0byByZWNvcmQgdmlkZW8gb3IgY2FudmFzIGludG8gYW5pbWF0ZWQgZ2lmLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgR2lmUmVjb3JkZXJcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciByZWNvcmRlciA9IG5ldyBHaWZSZWNvcmRlcihtZWRpYVN0cmVhbSB8fCBjYW52YXMgfHwgY29udGV4dCwgeyB3aWR0aDogMTI4MCwgaGVpZ2h0OiA3MjAsIGZyYW1lUmF0ZTogMjAwLCBxdWFsaXR5OiAxMCB9KTtcbiAqIHJlY29yZGVyLnJlY29yZCgpO1xuICogcmVjb3JkZXIuc3RvcChmdW5jdGlvbihibG9iKSB7XG4gKiAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gKiB9KTtcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDfFJlY29yZFJUQyBTb3VyY2UgQ29kZX1cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IG1lZGlhU3RyZWFtIC0gTWVkaWFTdHJlYW0gb2JqZWN0IG9yIEhUTUxDYW52YXNFbGVtZW50IG9yIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB7ZGlzYWJsZUxvZ3M6dHJ1ZSwgaW5pdENhbGxiYWNrOiBmdW5jdGlvbiwgd2lkdGg6IDMyMCwgaGVpZ2h0OiAyNDAsIGZyYW1lUmF0ZTogMjAwLCBxdWFsaXR5OiAxMH1cbiAqL1xuXG5mdW5jdGlvbiBHaWZSZWNvcmRlcihtZWRpYVN0cmVhbSwgY29uZmlnKSB7XG4gICAgaWYgKHR5cGVvZiBHSUZFbmNvZGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyAnUGxlYXNlIGxpbms6IGh0dHBzOi8vY2RuLndlYnJ0Yy1leHBlcmltZW50LmNvbS9naWYtcmVjb3JkZXIuanMnO1xuICAgIH1cblxuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblxuICAgIHZhciBpc0hUTUxPYmplY3QgPSBtZWRpYVN0cmVhbSBpbnN0YW5jZW9mIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8fCBtZWRpYVN0cmVhbSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVjb3JkcyBNZWRpYVN0cmVhbS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIEdpZlJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZWNvcmQoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWlzSFRNTE9iamVjdCkge1xuICAgICAgICAgICAgaWYgKCFjb25maWcud2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb25maWcud2lkdGggPSB2aWRlby5vZmZzZXRXaWR0aCB8fCAzMjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVpZ2h0ID0gdmlkZW8ub2Zmc2V0SGVpZ2h0IHx8IDI0MDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjb25maWcudmlkZW8pIHtcbiAgICAgICAgICAgICAgICBjb25maWcudmlkZW8gPSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjb25maWcud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY29uZmlnLmNhbnZhcykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5jYW52YXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjb25maWcud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNvbmZpZy5jYW52YXMud2lkdGggfHwgMzIwO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGNvbmZpZy5jYW52YXMuaGVpZ2h0IHx8IDI0MDtcblxuICAgICAgICAgICAgdmlkZW8ud2lkdGggPSBjb25maWcudmlkZW8ud2lkdGggfHwgMzIwO1xuICAgICAgICAgICAgdmlkZW8uaGVpZ2h0ID0gY29uZmlnLnZpZGVvLmhlaWdodCB8fCAyNDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBleHRlcm5hbCBsaWJyYXJ5IHRvIHJlY29yZCBhcyBHSUYgaW1hZ2VzXG4gICAgICAgIGdpZkVuY29kZXIgPSBuZXcgR0lGRW5jb2RlcigpO1xuXG4gICAgICAgIC8vIHZvaWQgc2V0UmVwZWF0KGludCBpdGVyKSBcbiAgICAgICAgLy8gU2V0cyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBzZXQgb2YgR0lGIGZyYW1lcyBzaG91bGQgYmUgcGxheWVkLiBcbiAgICAgICAgLy8gRGVmYXVsdCBpcyAxOyAwIG1lYW5zIHBsYXkgaW5kZWZpbml0ZWx5LlxuICAgICAgICBnaWZFbmNvZGVyLnNldFJlcGVhdCgwKTtcblxuICAgICAgICAvLyB2b2lkIHNldEZyYW1lUmF0ZShOdW1iZXIgZnBzKSBcbiAgICAgICAgLy8gU2V0cyBmcmFtZSByYXRlIGluIGZyYW1lcyBwZXIgc2Vjb25kLiBcbiAgICAgICAgLy8gRXF1aXZhbGVudCB0byBzZXREZWxheSgxMDAwL2ZwcykuXG4gICAgICAgIC8vIFVzaW5nIFwic2V0RGVsYXlcIiBpbnN0ZWFkIG9mIFwic2V0RnJhbWVSYXRlXCJcbiAgICAgICAgZ2lmRW5jb2Rlci5zZXREZWxheShjb25maWcuZnJhbWVSYXRlIHx8IDIwMCk7XG5cbiAgICAgICAgLy8gdm9pZCBzZXRRdWFsaXR5KGludCBxdWFsaXR5KSBcbiAgICAgICAgLy8gU2V0cyBxdWFsaXR5IG9mIGNvbG9yIHF1YW50aXphdGlvbiAoY29udmVyc2lvbiBvZiBpbWFnZXMgdG8gdGhlIFxuICAgICAgICAvLyBtYXhpbXVtIDI1NiBjb2xvcnMgYWxsb3dlZCBieSB0aGUgR0lGIHNwZWNpZmljYXRpb24pLiBcbiAgICAgICAgLy8gTG93ZXIgdmFsdWVzIChtaW5pbXVtID0gMSkgcHJvZHVjZSBiZXR0ZXIgY29sb3JzLCBcbiAgICAgICAgLy8gYnV0IHNsb3cgcHJvY2Vzc2luZyBzaWduaWZpY2FudGx5LiAxMCBpcyB0aGUgZGVmYXVsdCwgXG4gICAgICAgIC8vIGFuZCBwcm9kdWNlcyBnb29kIGNvbG9yIG1hcHBpbmcgYXQgcmVhc29uYWJsZSBzcGVlZHMuIFxuICAgICAgICAvLyBWYWx1ZXMgZ3JlYXRlciB0aGFuIDIwIGRvIG5vdCB5aWVsZCBzaWduaWZpY2FudCBpbXByb3ZlbWVudHMgaW4gc3BlZWQuXG4gICAgICAgIGdpZkVuY29kZXIuc2V0UXVhbGl0eShjb25maWcucXVhbGl0eSB8fCAxMCk7XG5cbiAgICAgICAgLy8gQm9vbGVhbiBzdGFydCgpIFxuICAgICAgICAvLyBUaGlzIHdyaXRlcyB0aGUgR0lGIEhlYWRlciBhbmQgcmV0dXJucyBmYWxzZSBpZiBpdCBmYWlscy5cbiAgICAgICAgZ2lmRW5jb2Rlci5zdGFydCgpO1xuXG4gICAgICAgIHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdWaWRlb0ZyYW1lKHRpbWUpIHtcbiAgICAgICAgICAgIGlmIChpc1BhdXNlZFJlY29yZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkcmF3VmlkZW9GcmFtZSh0aW1lKTtcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0QW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd1ZpZGVvRnJhbWUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxhc3RGcmFtZVRpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhc3RGcmFtZVRpbWUgPSB0aW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB+MTAgZnBzXG4gICAgICAgICAgICBpZiAodGltZSAtIGxhc3RGcmFtZVRpbWUgPCA5MCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc0hUTUxPYmplY3QgJiYgdmlkZW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gdmlhOiBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1dlYlJUQy1FeHBlcmltZW50L3B1bGwvMzE2XG4gICAgICAgICAgICAgICAgLy8gVHdlYWsgZm9yIEFuZHJvaWQgQ2hyb21lXG4gICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWlzSFRNTE9iamVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29uZmlnLm9uR2lmUHJldmlldykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5vbkdpZlByZXZpZXcoY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnaWZFbmNvZGVyLmFkZEZyYW1lKGNvbnRleHQpO1xuICAgICAgICAgICAgbGFzdEZyYW1lVGltZSA9IHRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0QW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd1ZpZGVvRnJhbWUpO1xuXG4gICAgICAgIGlmIChjb25maWcuaW5pdENhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb25maWcuaW5pdENhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgc3RvcHMgcmVjb3JkaW5nIE1lZGlhU3RyZWFtLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24sIHRoYXQgaXMgdXNlZCB0byBwYXNzIHJlY29yZGVkIGJsb2IgYmFjayB0byB0aGUgY2FsbGVlLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgR2lmUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICAgICAqICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGxhc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUobGFzdEFuaW1hdGlvbkZyYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvcGVydHkge0Jsb2J9IGJsb2IgLSBUaGUgcmVjb3JkZWQgYmxvYiBvYmplY3QuXG4gICAgICAgICAqIEBtZW1iZXJvZiBHaWZSZWNvcmRlclxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiByZWNvcmRlci5zdG9wKGZ1bmN0aW9uKCl7XG4gICAgICAgICAqICAgICB2YXIgYmxvYiA9IHJlY29yZGVyLmJsb2I7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ibG9iID0gbmV3IEJsb2IoW25ldyBVaW50OEFycmF5KGdpZkVuY29kZXIuc3RyZWFtKCkuYmluKV0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZS9naWYnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGJ1ZzogZmluZCBhIHdheSB0byBjbGVhciBvbGQgcmVjb3JkZWQgYmxvYnNcbiAgICAgICAgZ2lmRW5jb2Rlci5zdHJlYW0oKS5iaW4gPSBbXTtcbiAgICB9O1xuXG4gICAgdmFyIGlzUGF1c2VkUmVjb3JkaW5nID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwYXVzZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgR2lmUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnBhdXNlKCk7XG4gICAgICovXG4gICAgdGhpcy5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1BhdXNlZFJlY29yZGluZyA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc3VtZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgR2lmUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnJlc3VtZSgpO1xuICAgICAqL1xuICAgIHRoaXMucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlzUGF1c2VkUmVjb3JkaW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc2V0cyBjdXJyZW50bHkgcmVjb3JkZWQgZGF0YS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIEdpZlJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5jbGVhclJlY29yZGVkRGF0YSgpO1xuICAgICAqL1xuICAgIHRoaXMuY2xlYXJSZWNvcmRlZERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFnaWZFbmNvZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBhdXNlKCk7XG5cbiAgICAgICAgZ2lmRW5jb2Rlci5zdHJlYW0oKS5iaW4gPSBbXTtcbiAgICB9O1xuXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBpZiAoaXNIVE1MT2JqZWN0KSB7XG4gICAgICAgIGlmIChtZWRpYVN0cmVhbSBpbnN0YW5jZW9mIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICAgICAgY29udGV4dCA9IG1lZGlhU3RyZWFtO1xuICAgICAgICAgICAgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIH0gZWxzZSBpZiAobWVkaWFTdHJlYW0gaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgY29udGV4dCA9IG1lZGlhU3RyZWFtLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBjYW52YXMgPSBtZWRpYVN0cmVhbTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaXNIVE1MT2JqZWN0KSB7XG4gICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgIHZpZGVvLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgdmlkZW8uYXV0b3BsYXkgPSB0cnVlO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmlkZW8uc3JjT2JqZWN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gbWVkaWFTdHJlYW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1lZGlhU3RyZWFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICB9XG5cbiAgICB2YXIgbGFzdEFuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICB2YXIgc3RhcnRUaW1lLCBlbmRUaW1lLCBsYXN0RnJhbWVUaW1lO1xuXG4gICAgdmFyIGdpZkVuY29kZXI7XG59XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5HaWZSZWNvcmRlciA9IEdpZlJlY29yZGVyO1xufVxuXG4vLyBfX19fX19fX19fX19fX19fX19fX19fXG4vLyBNdWx0aVN0cmVhbVJlY29yZGVyLmpzXG5cbi8qXG4gKiBWaWRlbyBjb25mZXJlbmNlIHJlY29yZGluZywgdXNpbmcgY2FwdHVyZVN0cmVhbSBBUEkgYWxvbmcgd2l0aCBXZWJBdWRpbyBhbmQgQ2FudmFzMkQgQVBJLlxuICovXG5cbi8qKlxuICogTXVsdGlTdHJlYW1SZWNvcmRlciBjYW4gcmVjb3JkIG11bHRpcGxlIHZpZGVvcyBpbiBzaW5nbGUgY29udGFpbmVyLlxuICogQHN1bW1hcnkgTXVsdGktdmlkZW9zIHJlY29yZGVyLlxuICogQGxpY2Vuc2Uge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWF6LWtoYW4vUmVjb3JkUlRDI2xpY2Vuc2V8TUlUfVxuICogQGF1dGhvciB7QGxpbmsgaHR0cDovL3d3dy5NdWF6S2hhbi5jb218TXVheiBLaGFufVxuICogQHR5cGVkZWYgTXVsdGlTdHJlYW1SZWNvcmRlclxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogdmFyIG9wdGlvbnMgPSB7XG4gKiAgICAgbWltZVR5cGU6ICd2aWRlby93ZWJtJ1xuICogfVxuICogdmFyIHJlY29yZGVyID0gbmV3IE11bHRpU3RyZWFtUmVjb3JkZXIoQXJyYXlPZk1lZGlhU3RyZWFtcywgb3B0aW9ucyk7XG4gKiByZWNvcmRlci5yZWNvcmQoKTtcbiAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICogICAgIHZpZGVvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gKlxuICogICAgIC8vIG9yXG4gKiAgICAgdmFyIGJsb2IgPSByZWNvcmRlci5ibG9iO1xuICogfSk7XG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL1JlY29yZFJUQ3xSZWNvcmRSVEMgU291cmNlIENvZGV9XG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtc30gbWVkaWFTdHJlYW1zIC0gQXJyYXkgb2YgTWVkaWFTdHJlYW1zLlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHtkaXNhYmxlTG9nczp0cnVlLCBmcmFtZUludGVydmFsOiAxMCwgbWltZVR5cGU6IFwidmlkZW8vd2VibVwifVxuICovXG5cbmZ1bmN0aW9uIE11bHRpU3RyZWFtUmVjb3JkZXIoYXJyYXlPZk1lZGlhU3RyZWFtcywgb3B0aW9ucykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHtcbiAgICAgICAgbWltZVR5cGU6ICd2aWRlby93ZWJtJyxcbiAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICAgIHdpZHRoOiAzMjAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI0MFxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmICghb3B0aW9ucy5mcmFtZUludGVydmFsKSB7XG4gICAgICAgIG9wdGlvbnMuZnJhbWVJbnRlcnZhbCA9IDEwO1xuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy52aWRlbykge1xuICAgICAgICBvcHRpb25zLnZpZGVvID0ge307XG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLnZpZGVvLndpZHRoKSB7XG4gICAgICAgIG9wdGlvbnMudmlkZW8ud2lkdGggPSAzMjA7XG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLnZpZGVvLmhlaWdodCkge1xuICAgICAgICBvcHRpb25zLnZpZGVvLmhlaWdodCA9IDI0MDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZWNvcmRzIGFsbCBNZWRpYVN0cmVhbXMuXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBtZW1iZXJvZiBNdWx0aVN0cmVhbVJlY29yZGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiByZWNvcmRlci5yZWNvcmQoKTtcbiAgICAgKi9cbiAgICB0aGlzLnJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1N0b3BwZWRSZWNvcmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1peGVkVmlkZW9TdHJlYW0gPSBnZXRNaXhlZFZpZGVvU3RyZWFtKCk7XG5cbiAgICAgICAgdmFyIG1peGVkQXVkaW9TdHJlYW0gPSBnZXRNaXhlZEF1ZGlvU3RyZWFtKCk7XG4gICAgICAgIGlmIChtaXhlZEF1ZGlvU3RyZWFtKSB7XG4gICAgICAgICAgICBtaXhlZEF1ZGlvU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgICAgICAgIG1peGVkVmlkZW9TdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5wcmV2aWV3U3RyZWFtICYmIHR5cGVvZiBvcHRpb25zLnByZXZpZXdTdHJlYW0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHJldmlld1N0cmVhbShtaXhlZFZpZGVvU3RyZWFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFTdHJlYW1SZWNvcmRlcihtaXhlZFZpZGVvU3RyZWFtLCB7XG4gICAgICAgICAgICBtaW1lVHlwZTogJ3ZpZGVvL3dlYm0nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvcy5sZW5ndGggPiAxID8gdmlkZW9zWzBdLndpZHRoICogMiA6IHZpZGVvc1swXS53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvcy5sZW5ndGggPiAyID8gdmlkZW9zWzBdLmhlaWdodCAqIDIgOiB2aWRlb3NbMF0uaGVpZ2h0O1xuXG4gICAgICAgIGRyYXdWaWRlb3NUb0NhbnZhcygpO1xuXG4gICAgICAgIG1lZGlhUmVjb3JkZXIucmVjb3JkKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHN0b3BzIHJlY29yZGluZyBNZWRpYVN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLCB0aGF0IGlzIHVzZWQgdG8gcGFzcyByZWNvcmRlZCBibG9iIGJhY2sgdG8gdGhlIGNhbGxlZS5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE11bHRpU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICAgICAqICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGlzU3RvcHBlZFJlY29yZGluZyA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFtZWRpYVJlY29yZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoZnVuY3Rpb24oYmxvYikge1xuICAgICAgICAgICAgY2FsbGJhY2soYmxvYik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRNaXhlZEF1ZGlvU3RyZWFtKCkge1xuICAgICAgICAvLyB2aWE6IEBwZWhyc29uc1xuICAgICAgICB2YXIgYXVkaW9Db250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgICB2YXIgYXVkaW9Tb3VyY2VzID0gW107XG5cbiAgICAgICAgdmFyIGF1ZGlvVHJhY2tzTGVuZ3RoID0gMDtcbiAgICAgICAgYXJyYXlPZk1lZGlhU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF1ZGlvVHJhY2tzTGVuZ3RoKys7XG5cbiAgICAgICAgICAgIGF1ZGlvU291cmNlcy5wdXNoKGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFhdWRpb1RyYWNrc0xlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGF1ZGlvaURlc3RpbmF0aW9uID0gYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKTtcbiAgICAgICAgYXVkaW9Tb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oYXVkaW9Tb3VyY2UpIHtcbiAgICAgICAgICAgIGF1ZGlvU291cmNlLmNvbm5lY3QoYXVkaW9pRGVzdGluYXRpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF1ZGlvaURlc3RpbmF0aW9uLnN0cmVhbTtcbiAgICB9XG5cbiAgICB2YXIgdmlkZW9zID0gW107XG4gICAgdmFyIG1lZGlhUmVjb3JkZXI7XG5cbiAgICBmdW5jdGlvbiBnZXRNaXhlZFZpZGVvU3RyZWFtKCkge1xuICAgICAgICAvLyB2aWE6IEBhZHJpYW4tYmVyXG4gICAgICAgIGFycmF5T2ZNZWRpYVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIGlmICghc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdmlkZW8gPSBnZXRWaWRlbyhzdHJlYW0pO1xuICAgICAgICAgICAgdmlkZW8ud2lkdGggPSBvcHRpb25zLnZpZGVvLndpZHRoO1xuICAgICAgICAgICAgdmlkZW8uaGVpZ2h0ID0gb3B0aW9ucy52aWRlby5oZWlnaHQ7XG4gICAgICAgICAgICB2aWRlb3MucHVzaCh2aWRlbyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjYXB0dXJlZFN0cmVhbTtcblxuICAgICAgICBpZiAoJ2NhcHR1cmVTdHJlYW0nIGluIGNhbnZhcykge1xuICAgICAgICAgICAgY2FwdHVyZWRTdHJlYW0gPSBjYW52YXMuY2FwdHVyZVN0cmVhbSgpO1xuICAgICAgICB9IGVsc2UgaWYgKCdtb3pDYXB0dXJlU3RyZWFtJyBpbiBjYW52YXMpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkU3RyZWFtID0gY2FudmFzLm1vekNhcHR1cmVTdHJlYW0oKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy5kaXNhYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignY2FwdHVyZVN0cmVhbSBBUEkgcmVxdWlyZXMgdGhpcyBmbGFnOiBjaHJvbWU6Ly9mbGFncy8jZW5hYmxlLWV4cGVyaW1lbnRhbC13ZWItcGxhdGZvcm0tZmVhdHVyZXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYXB0dXJlZFN0cmVhbTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRWaWRlbyhzdHJlYW0pIHtcbiAgICAgICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICB2aWRlby5wbGF5KCk7XG4gICAgICAgIHJldHVybiB2aWRlbztcbiAgICB9XG5cbiAgICB2YXIgaXNTdG9wcGVkUmVjb3JkaW5nID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBkcmF3VmlkZW9zVG9DYW52YXMoKSB7XG4gICAgICAgIGlmIChpc1N0b3BwZWRSZWNvcmRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2aWRlb3NMZW5ndGggPSB2aWRlb3MubGVuZ3RoO1xuICAgICAgICB2aWRlb3MuZm9yRWFjaChmdW5jdGlvbih2aWRlbywgaWR4KSB7XG4gICAgICAgICAgICBpZiAodmlkZW9zTGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIHZpZGVvLndpZHRoLCB2aWRlby5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZpZGVvc0xlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSB2aWRlby53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgeCwgeSwgdmlkZW8ud2lkdGgsIHZpZGVvLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmlkZW9zTGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSAwO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IHZpZGVvLndpZHRoO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHZpZGVvLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgeCwgeSwgdmlkZW8ud2lkdGgsIHZpZGVvLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmlkZW9zTGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSAwO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IHZpZGVvLndpZHRoO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHZpZGVvLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSB2aWRlby53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHZpZGVvLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgeCwgeSwgdmlkZW8ud2lkdGgsIHZpZGVvLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzZXRUaW1lb3V0KGRyYXdWaWRlb3NUb0NhbnZhcywgb3B0aW9ucy5mcmFtZUludGVydmFsKTtcbiAgICB9XG5cbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIGNhbnZhcy5zdHlsZSA9ICdvcGFjaXR5OjA7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMTt0b3A6IC0xMDAwMDAwMDA7bGVmdDotMTAwMDAwMDAwMDsnO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGF1c2VzIHRoZSByZWNvcmRpbmcgcHJvY2Vzcy5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG1lbWJlcm9mIE11bHRpU3RyZWFtUmVjb3JkZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHJlY29yZGVyLnBhdXNlKCk7XG4gICAgICovXG4gICAgdGhpcy5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAobWVkaWFSZWNvcmRlcikge1xuICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJlc3VtZXMgdGhlIHJlY29yZGluZyBwcm9jZXNzLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTXVsdGlTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIucmVzdW1lKCk7XG4gICAgICovXG4gICAgdGhpcy5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmVzZXRzIGN1cnJlbnRseSByZWNvcmRlZCBkYXRhLlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbWVtYmVyb2YgTXVsdGlTdHJlYW1SZWNvcmRlclxuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFyUmVjb3JkZWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZpZGVvcyA9IFtdO1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBpc1N0b3BwZWRSZWNvcmRpbmcgPSBmYWxzZTtcbiAgICAgICAgbWVkaWFSZWNvcmRlciA9IG51bGw7XG5cbiAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuY2xlYXJSZWNvcmRlZERhdGEoKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmlmICh0eXBlb2YgUmVjb3JkUlRDICE9PSAndW5kZWZpbmVkJykge1xuICAgIFJlY29yZFJUQy5NdWx0aVN0cmVhbVJlY29yZGVyID0gTXVsdGlTdHJlYW1SZWNvcmRlcjtcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmV4cG9ydCBjb25zdCB0cmFuc3BhcmVudCA9IG5ldyBDb2xvcigwLCAwKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhDb2xvck5hbWUocGF0aCkge1xuICBsZXQgaGV4Q29sb3IgPSBwYXRoLnBhcmVudC5kYXRhLm9yaWdpbmFsQ29sb3I7XG4gIC8vIGxldCBoZXhDb2xvciA9IHBhdGguc3Ryb2tlQ29sb3IudG9DU1ModHJ1ZSk7IC8vIFRoaXMgZmFpbHMgd2hlbiBpdCdzIGEgZ3JhZGllbnRcbiAgcmV0dXJuIGdldENvbG9yTmFtZShoZXhDb2xvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xvck5hbWUoY29sb3IpIHtcbiAgaWYgKGNvbG9yKSB7XG4gICAgY29sb3IgPSBjb2xvci50b1VwcGVyQ2FzZSgpOyAvLyBtYWtlIHN1cmVcbiAgICBpZiAoY29sb3IgaW4gY29uZmlnLnBhbGV0dGUuY29sb3JOYW1lcykge1xuICAgICAgcmV0dXJuIGNvbmZpZy5wYWxldHRlLmNvbG9yTmFtZXNbY29sb3JdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbVBvcCgpIHtcbiAgY29uc3QgcG9wcyA9IGNvbmZpZy5wYWxldHRlLnBvcHM7XG4gIHJldHVybiBwb3BzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvcHMubGVuZ3RoKV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmRleGVkUG9wQ29sb3IoaW5kZXgpIHtcbiAgY29uc3QgcG9wcyA9IGNvbmZpZy5wYWxldHRlLnBvcHM7XG4gIHJldHVybiBwb3BzW2luZGV4ICUgcG9wcy5sZW5ndGhdO1xufVxuIiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5TaGFwZURldGVjdG9yID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBfbmJTYW1wbGVQb2ludHM7XG4gIHZhciBfc3F1YXJlU2l6ZSA9IDI1MDtcbiAgdmFyIF9waGkgPSAwLjUgKiAoLTEuMCArIE1hdGguc3FydCg1LjApKTtcbiAgdmFyIF9hbmdsZVJhbmdlID0gZGVnMlJhZCg0NS4wKTtcbiAgdmFyIF9hbmdsZVByZWNpc2lvbiA9IGRlZzJSYWQoMi4wKTtcbiAgdmFyIF9oYWxmRGlhZ29uYWwgPSBNYXRoLnNxcnQoX3NxdWFyZVNpemUgKiBfc3F1YXJlU2l6ZSArIF9zcXVhcmVTaXplICogX3NxdWFyZVNpemUpICogMC41O1xuICB2YXIgX29yaWdpbiA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBmdW5jdGlvbiBkZWcyUmFkKGQpIHtcblxuICAgIHJldHVybiBkICogTWF0aC5QSSAvIDE4MC4wO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldERpc3RhbmNlKGEsIGIpIHtcblxuICAgIHZhciBkeCA9IGIueCAtIGEueDtcbiAgICB2YXIgZHkgPSBiLnkgLSBhLnk7XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgfTtcblxuICBmdW5jdGlvbiBTdHJva2UocG9pbnRzLCBuYW1lKSB7XG5cbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucHJvY2Vzc1N0cm9rZSgpO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUucHJvY2Vzc1N0cm9rZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnJlc2FtcGxlKCk7XG4gICAgdGhpcy5zZXRDZW50cm9pZCgpO1xuICAgIHRoaXMucG9pbnRzID0gdGhpcy5yb3RhdGVCeSgtdGhpcy5pbmRpY2F0aXZlQW5nbGUoKSk7XG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnNjYWxlVG9TcXVhcmUoKTtcbiAgICB0aGlzLnNldENlbnRyb2lkKCk7XG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnRyYW5zbGF0ZVRvT3JpZ2luKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnJlc2FtcGxlID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgbG9jYWxEaXN0YW5jZSwgcTtcbiAgICB2YXIgaW50ZXJ2YWwgPSB0aGlzLnN0cm9rZUxlbmd0aCgpIC8gKF9uYlNhbXBsZVBvaW50cyAtIDEpO1xuICAgIHZhciBkaXN0YW5jZSA9IDAuMDtcbiAgICB2YXIgbmV3UG9pbnRzID0gW3RoaXMucG9pbnRzWzBdXTtcblxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvY2FsRGlzdGFuY2UgPSBnZXREaXN0YW5jZSh0aGlzLnBvaW50c1tpIC0gMV0sIHRoaXMucG9pbnRzW2ldKTtcblxuICAgICAgaWYgKGRpc3RhbmNlICsgbG9jYWxEaXN0YW5jZSA+PSBpbnRlcnZhbCkge1xuICAgICAgICBxID0ge1xuICAgICAgICAgIHg6IHRoaXMucG9pbnRzW2kgLSAxXS54ICsgKChpbnRlcnZhbCAtIGRpc3RhbmNlKSAvIGxvY2FsRGlzdGFuY2UpICogKHRoaXMucG9pbnRzW2ldLnggLSB0aGlzLnBvaW50c1tpIC0gMV0ueCksXG4gICAgICAgICAgeTogdGhpcy5wb2ludHNbaSAtIDFdLnkgKyAoKGludGVydmFsIC0gZGlzdGFuY2UpIC8gbG9jYWxEaXN0YW5jZSkgKiAodGhpcy5wb2ludHNbaV0ueSAtIHRoaXMucG9pbnRzW2kgLSAxXS55KVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1BvaW50cy5wdXNoKHEpO1xuICAgICAgICB0aGlzLnBvaW50cy5zcGxpY2UoaSwgMCwgcSk7XG4gICAgICAgIGRpc3RhbmNlID0gMC4wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzdGFuY2UgKz0gbG9jYWxEaXN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3UG9pbnRzLmxlbmd0aCA9PT0gX25iU2FtcGxlUG9pbnRzIC0gMSkge1xuICAgICAgbmV3UG9pbnRzLnB1c2godGhpcy5wb2ludHNbdGhpcy5wb2ludHMubGVuZ3RoIC0gMV0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5yb3RhdGVCeSA9IGZ1bmN0aW9uKGFuZ2xlKSB7XG5cbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBuZXdQb2ludHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG5cbiAgICAgIG5ld1BvaW50cy5wdXNoKHtcbiAgICAgICAgeDogKHBvaW50LnggLSB0aGlzLmMueCkgKiBjb3MgLSAocG9pbnQueSAtIHRoaXMuYy55KSAqIHNpbiArIHRoaXMuYy54LFxuICAgICAgICB5OiAocG9pbnQueCAtIHRoaXMuYy54KSAqIHNpbiArIChwb2ludC55IC0gdGhpcy5jLnkpICogY29zICsgdGhpcy5jLnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zY2FsZVRvU3F1YXJlID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIG5ld1BvaW50cyA9IFtdXG4gICAgdmFyIGJveCA9IHtcbiAgICAgIG1pblg6ICtJbmZpbml0eSxcbiAgICAgIG1heFg6IC1JbmZpbml0eSxcbiAgICAgIG1pblk6ICtJbmZpbml0eSxcbiAgICAgIG1heFk6IC1JbmZpbml0eVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBib3gubWluWCA9IE1hdGgubWluKGJveC5taW5YLCBwb2ludC54KTtcbiAgICAgIGJveC5taW5ZID0gTWF0aC5taW4oYm94Lm1pblksIHBvaW50LnkpO1xuICAgICAgYm94Lm1heFggPSBNYXRoLm1heChib3gubWF4WCwgcG9pbnQueCk7XG4gICAgICBib3gubWF4WSA9IE1hdGgubWF4KGJveC5tYXhZLCBwb2ludC55KTtcbiAgICB9XG5cbiAgICBib3gud2lkdGggPSBib3gubWF4WCAtIGJveC5taW5YO1xuICAgIGJveC5oZWlnaHQgPSBib3gubWF4WSAtIGJveC5taW5ZO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBuZXdQb2ludHMucHVzaCh7XG4gICAgICAgIHg6IHBvaW50LnggKiAoX3NxdWFyZVNpemUgLyBib3gud2lkdGgpLFxuICAgICAgICB5OiBwb2ludC55ICogKF9zcXVhcmVTaXplIC8gYm94LmhlaWdodClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS50cmFuc2xhdGVUb09yaWdpbiA9IGZ1bmN0aW9uKHBvaW50cykge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBuZXdQb2ludHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG5cbiAgICAgIG5ld1BvaW50cy5wdXNoKHtcbiAgICAgICAgeDogcG9pbnQueCArIF9vcmlnaW4ueCAtIHRoaXMuYy54LFxuICAgICAgICB5OiBwb2ludC55ICsgX29yaWdpbi55IC0gdGhpcy5jLnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zZXRDZW50cm9pZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHRoaXMuYyA9IHtcbiAgICAgIHg6IDAuMCxcbiAgICAgIHk6IDAuMFxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICB0aGlzLmMueCArPSBwb2ludC54O1xuICAgICAgdGhpcy5jLnkgKz0gcG9pbnQueTtcbiAgICB9XG5cbiAgICB0aGlzLmMueCAvPSB0aGlzLnBvaW50cy5sZW5ndGg7XG4gICAgdGhpcy5jLnkgLz0gdGhpcy5wb2ludHMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5pbmRpY2F0aXZlQW5nbGUgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMuYy55IC0gdGhpcy5wb2ludHNbMF0ueSwgdGhpcy5jLnggLSB0aGlzLnBvaW50c1swXS54KTtcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnN0cm9rZUxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGQgPSAwLjA7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkICs9IGdldERpc3RhbmNlKHRoaXMucG9pbnRzW2kgLSAxXSwgdGhpcy5wb2ludHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBkO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuZGlzdGFuY2VBdEJlc3RBbmdsZSA9IGZ1bmN0aW9uKHBhdHRlcm4pIHtcblxuICAgIHZhciBhID0gLV9hbmdsZVJhbmdlO1xuICAgIHZhciBiID0gX2FuZ2xlUmFuZ2U7XG4gICAgdmFyIHgxID0gX3BoaSAqIGEgKyAoMS4wIC0gX3BoaSkgKiBiO1xuICAgIHZhciBmMSA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgxKTtcbiAgICB2YXIgeDIgPSAoMS4wIC0gX3BoaSkgKiBhICsgX3BoaSAqIGI7XG4gICAgdmFyIGYyID0gdGhpcy5kaXN0YW5jZUF0QW5nbGUocGF0dGVybiwgeDIpO1xuXG4gICAgd2hpbGUgKE1hdGguYWJzKGIgLSBhKSA+IF9hbmdsZVByZWNpc2lvbikge1xuXG4gICAgICBpZiAoZjEgPCBmMikge1xuICAgICAgICBiID0geDI7XG4gICAgICAgIHgyID0geDE7XG4gICAgICAgIGYyID0gZjE7XG4gICAgICAgIHgxID0gX3BoaSAqIGEgKyAoMS4wIC0gX3BoaSkgKiBiO1xuICAgICAgICBmMSA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGEgPSB4MTtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgZjEgPSBmMjtcbiAgICAgICAgeDIgPSAoMS4wIC0gX3BoaSkgKiBhICsgX3BoaSAqIGI7XG4gICAgICAgIGYyID0gdGhpcy5kaXN0YW5jZUF0QW5nbGUocGF0dGVybiwgeDIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBNYXRoLm1pbihmMSwgZjIpO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuZGlzdGFuY2VBdEFuZ2xlID0gZnVuY3Rpb24ocGF0dGVybiwgYW5nbGUpIHtcblxuICAgIHZhciBzdHJva2VQb2ludHMgPSB0aGlzLnJvdGF0ZUJ5KGFuZ2xlKTtcbiAgICB2YXIgcGF0dGVyblBvaW50cyA9IHBhdHRlcm4ucG9pbnRzO1xuICAgIHZhciBkID0gMC4wO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJva2VQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGQgKz0gZ2V0RGlzdGFuY2Uoc3Ryb2tlUG9pbnRzW2ldLCBwYXR0ZXJuUG9pbnRzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZCAvIHN0cm9rZVBvaW50cy5sZW5ndGg7XG4gIH07XG5cbiAgZnVuY3Rpb24gU2hhcGVEZXRlY3RvcihwYXR0ZXJucywgb3B0aW9ucykge1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy50aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZCB8fCAwO1xuICAgIF9uYlNhbXBsZVBvaW50cyA9IG9wdGlvbnMubmJTYW1wbGVQb2ludHMgfHwgNjQ7XG5cbiAgICB0aGlzLnBhdHRlcm5zID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmxlYXJuKHBhdHRlcm5zW2ldLm5hbWUsIHBhdHRlcm5zW2ldLnBvaW50cyk7XG4gICAgfVxuICB9XG5cbiAgU2hhcGVEZXRlY3Rvci5kZWZhdWx0U2hhcGVzID0gW1xuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogMCwgeTogNTAgfSwgeyB4OiAxMDAsIHk6IDUwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogNTAsIHk6IDAgfSwgeyB4OiA1MCwgeTogMTAwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogMCwgeTogMCB9LCB7IHg6IDEwMCwgeTogMTAwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogODksXCJ5XCI6IDE2NH0se1wieFwiOiA5MCxcInlcIjogMTYyfSx7XCJ4XCI6IDkyLFwieVwiOiAxNjJ9LHtcInhcIjogOTQsXCJ5XCI6IDE2NH0se1wieFwiOiA5NSxcInlcIjogMTY2fSx7XCJ4XCI6IDk2LFwieVwiOiAxNjl9LHtcInhcIjogOTcsXCJ5XCI6IDE3MX0se1wieFwiOiA5OSxcInlcIjogMTc1fSx7XCJ4XCI6IDEwMSxcInlcIjogMTc4fSx7XCJ4XCI6IDEwMyxcInlcIjogMTgyfSx7XCJ4XCI6IDEwNixcInlcIjogMTg5fSx7XCJ4XCI6IDEwOCxcInlcIjogMTk0fSx7XCJ4XCI6IDExMSxcInlcIjogMTk5fSx7XCJ4XCI6IDExNCxcInlcIjogMjA0fSx7XCJ4XCI6IDExNyxcInlcIjogMjA5fSx7XCJ4XCI6IDExOSxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMixcInlcIjogMjE4fSx7XCJ4XCI6IDEyNCxcInlcIjogMjIyfSx7XCJ4XCI6IDEyNixcInlcIjogMjI1fSx7XCJ4XCI6IDEyOCxcInlcIjogMjI4fSx7XCJ4XCI6IDEzMCxcInlcIjogMjI5fSx7XCJ4XCI6IDEzMyxcInlcIjogMjMzfSx7XCJ4XCI6IDEzNCxcInlcIjogMjM2fSx7XCJ4XCI6IDEzNixcInlcIjogMjM5fSx7XCJ4XCI6IDEzOCxcInlcIjogMjQwfSx7XCJ4XCI6IDEzOSxcInlcIjogMjQyfSx7XCJ4XCI6IDE0MCxcInlcIjogMjQ0fSx7XCJ4XCI6IDE0MixcInlcIjogMjQyfSx7XCJ4XCI6IDE0MixcInlcIjogMjQwfSx7XCJ4XCI6IDE0MixcInlcIjogMjM3fSx7XCJ4XCI6IDE0MyxcInlcIjogMjM1fSx7XCJ4XCI6IDE0MyxcInlcIjogMjMzfSx7XCJ4XCI6IDE0NSxcInlcIjogMjI5fSx7XCJ4XCI6IDE0NixcInlcIjogMjI2fSx7XCJ4XCI6IDE0OCxcInlcIjogMjE3fSx7XCJ4XCI6IDE0OSxcInlcIjogMjA4fSx7XCJ4XCI6IDE0OSxcInlcIjogMjA1fSx7XCJ4XCI6IDE1MSxcInlcIjogMTk2fSx7XCJ4XCI6IDE1MSxcInlcIjogMTkzfSx7XCJ4XCI6IDE1MyxcInlcIjogMTgyfSx7XCJ4XCI6IDE1NSxcInlcIjogMTcyfSx7XCJ4XCI6IDE1NyxcInlcIjogMTY1fSx7XCJ4XCI6IDE1OSxcInlcIjogMTYwfSx7XCJ4XCI6IDE2MixcInlcIjogMTU1fSx7XCJ4XCI6IDE2NCxcInlcIjogMTUwfSx7XCJ4XCI6IDE2NSxcInlcIjogMTQ4fSx7XCJ4XCI6IDE2NixcInlcIjogMTQ2fV0sXG4gICAgICBuYW1lOiBcImxpbmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA5MSxcInlcIjogMTg1fSx7XCJ4XCI6IDkzLFwieVwiOiAxODV9LHtcInhcIjogOTUsXCJ5XCI6IDE4NX0se1wieFwiOiA5NyxcInlcIjogMTg1fSx7XCJ4XCI6IDEwMCxcInlcIjogMTg4fSx7XCJ4XCI6IDEwMixcInlcIjogMTg5fSx7XCJ4XCI6IDEwNCxcInlcIjogMTkwfSx7XCJ4XCI6IDEwNixcInlcIjogMTkzfSx7XCJ4XCI6IDEwOCxcInlcIjogMTk1fSx7XCJ4XCI6IDExMCxcInlcIjogMTk4fSx7XCJ4XCI6IDExMixcInlcIjogMjAxfSx7XCJ4XCI6IDExNCxcInlcIjogMjA0fSx7XCJ4XCI6IDExNSxcInlcIjogMjA3fSx7XCJ4XCI6IDExNyxcInlcIjogMjEwfSx7XCJ4XCI6IDExOCxcInlcIjogMjEyfSx7XCJ4XCI6IDEyMCxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMSxcInlcIjogMjE3fSx7XCJ4XCI6IDEyMixcInlcIjogMjE5fSx7XCJ4XCI6IDEyMyxcInlcIjogMjIyfSx7XCJ4XCI6IDEyNCxcInlcIjogMjI0fSx7XCJ4XCI6IDEyNixcInlcIjogMjI2fSx7XCJ4XCI6IDEyNyxcInlcIjogMjI5fSx7XCJ4XCI6IDEyOSxcInlcIjogMjMxfSx7XCJ4XCI6IDEzMCxcInlcIjogMjMzfSx7XCJ4XCI6IDEyOSxcInlcIjogMjMxfSx7XCJ4XCI6IDEyOSxcInlcIjogMjI4fSx7XCJ4XCI6IDEyOSxcInlcIjogMjI2fSx7XCJ4XCI6IDEyOSxcInlcIjogMjI0fSx7XCJ4XCI6IDEyOSxcInlcIjogMjIxfSx7XCJ4XCI6IDEyOSxcInlcIjogMjE4fSx7XCJ4XCI6IDEyOSxcInlcIjogMjEyfSx7XCJ4XCI6IDEyOSxcInlcIjogMjA4fSx7XCJ4XCI6IDEzMCxcInlcIjogMTk4fSx7XCJ4XCI6IDEzMixcInlcIjogMTg5fSx7XCJ4XCI6IDEzNCxcInlcIjogMTgyfSx7XCJ4XCI6IDEzNyxcInlcIjogMTczfSx7XCJ4XCI6IDE0MyxcInlcIjogMTY0fSx7XCJ4XCI6IDE0NyxcInlcIjogMTU3fSx7XCJ4XCI6IDE1MSxcInlcIjogMTUxfSx7XCJ4XCI6IDE1NSxcInlcIjogMTQ0fSx7XCJ4XCI6IDE2MSxcInlcIjogMTM3fSx7XCJ4XCI6IDE2NSxcInlcIjogMTMxfSx7XCJ4XCI6IDE3MSxcInlcIjogMTIyfSx7XCJ4XCI6IDE3NCxcInlcIjogMTE4fSx7XCJ4XCI6IDE3NixcInlcIjogMTE0fSx7XCJ4XCI6IDE3NyxcInlcIjogMTEyfSx7XCJ4XCI6IDE3NyxcInlcIjogMTE0fSx7XCJ4XCI6IDE3NSxcInlcIjogMTE2fSx7XCJ4XCI6IDE3MyxcInlcIjogMTE4fV0sXG4gICAgICBuYW1lOiBcImxpbmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjExMyxcInlcIjo2OH0se1wieFwiOjg2LFwieVwiOjc5fSx7XCJ4XCI6NjMsXCJ5XCI6MTMxfSx7XCJ4XCI6NzgsXCJ5XCI6MTQ3fSx7XCJ4XCI6MTU2LFwieVwiOjE0OX0se1wieFwiOjE5NSxcInlcIjoxMDB9LHtcInhcIjoxODksXCJ5XCI6Nzl9LHtcInhcIjoxMjUuNzM0OTcsXCJ5XCI6NjIuODExNjh9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo5OCxcInlcIjo2N30se1wieFwiOjc3LFwieVwiOjg1fSx7XCJ4XCI6NzcsXCJ5XCI6MTYyfSx7XCJ4XCI6MTc5LFwieVwiOjE1Nn0se1wieFwiOjE5NyxcInlcIjoxMjN9LHtcInhcIjoxNjcsXCJ5XCI6NjN9LHtcInhcIjoxNDEsXCJ5XCI6NjF9LHtcInhcIjoxMTAsXCJ5XCI6NTl9LHtcInhcIjoxMDYuNTExOTIsXCJ5XCI6NTkuNzA0MDd9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo2MCxcInlcIjo0N30se1wieFwiOjQzLFwieVwiOjk2fSx7XCJ4XCI6NTIsXCJ5XCI6MjA2fSx7XCJ4XCI6NjMsXCJ5XCI6MjQ2fSx7XCJ4XCI6MTE4LFwieVwiOjI5Nn0se1wieFwiOjE0NCxcInlcIjoyNDZ9LHtcInhcIjoxNDEsXCJ5XCI6MTQ3fSx7XCJ4XCI6MTMzLFwieVwiOjEyOX0se1wieFwiOjExMyxcInlcIjo4MH0se1wieFwiOjYwLjQyNzM4LFwieVwiOjQ1Ljc2ODEzfV0sXG4gICAgICBuYW1lOiBcImNpcmNsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDEyNyxcInlcIjogMTQxfSx7XCJ4XCI6IDEyNCxcInlcIjogMTQwfSx7XCJ4XCI6IDEyMCxcInlcIjogMTM5fSx7XCJ4XCI6IDExOCxcInlcIjogMTM5fSx7XCJ4XCI6IDExNixcInlcIjogMTM5fSx7XCJ4XCI6IDExMSxcInlcIjogMTQwfSx7XCJ4XCI6IDEwOSxcInlcIjogMTQxfSx7XCJ4XCI6IDEwNCxcInlcIjogMTQ0fSx7XCJ4XCI6IDEwMCxcInlcIjogMTQ3fSx7XCJ4XCI6IDk2LFwieVwiOiAxNTJ9LHtcInhcIjogOTMsXCJ5XCI6IDE1N30se1wieFwiOiA5MCxcInlcIjogMTYzfSx7XCJ4XCI6IDg3LFwieVwiOiAxNjl9LHtcInhcIjogODUsXCJ5XCI6IDE3NX0se1wieFwiOiA4MyxcInlcIjogMTgxfSx7XCJ4XCI6IDgyLFwieVwiOiAxOTB9LHtcInhcIjogODIsXCJ5XCI6IDE5NX0se1wieFwiOiA4MyxcInlcIjogMjAwfSx7XCJ4XCI6IDg0LFwieVwiOiAyMDV9LHtcInhcIjogODgsXCJ5XCI6IDIxM30se1wieFwiOiA5MSxcInlcIjogMjE2fSx7XCJ4XCI6IDk2LFwieVwiOiAyMTl9LHtcInhcIjogMTAzLFwieVwiOiAyMjJ9LHtcInhcIjogMTA4LFwieVwiOiAyMjR9LHtcInhcIjogMTExLFwieVwiOiAyMjR9LHtcInhcIjogMTIwLFwieVwiOiAyMjR9LHtcInhcIjogMTMzLFwieVwiOiAyMjN9LHtcInhcIjogMTQyLFwieVwiOiAyMjJ9LHtcInhcIjogMTUyLFwieVwiOiAyMTh9LHtcInhcIjogMTYwLFwieVwiOiAyMTR9LHtcInhcIjogMTY3LFwieVwiOiAyMTB9LHtcInhcIjogMTczLFwieVwiOiAyMDR9LHtcInhcIjogMTc4LFwieVwiOiAxOTh9LHtcInhcIjogMTc5LFwieVwiOiAxOTZ9LHtcInhcIjogMTgyLFwieVwiOiAxODh9LHtcInhcIjogMTgyLFwieVwiOiAxNzd9LHtcInhcIjogMTc4LFwieVwiOiAxNjd9LHtcInhcIjogMTcwLFwieVwiOiAxNTB9LHtcInhcIjogMTYzLFwieVwiOiAxMzh9LHtcInhcIjogMTUyLFwieVwiOiAxMzB9LHtcInhcIjogMTQzLFwieVwiOiAxMjl9LHtcInhcIjogMTQwLFwieVwiOiAxMzF9LHtcInhcIjogMTI5LFwieVwiOiAxMzZ9LHtcInhcIjogMTI2LFwieVwiOiAxMzl9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo1MTYsXCJ5XCI6Mjg0fSx7XCJ4XCI6NDk2LFwieVwiOjMxOX0se1wieFwiOjQ5NixcInlcIjozMjl9LHtcInhcIjo1MTMsXCJ5XCI6MzI5fSx7XCJ4XCI6NTUwLFwieVwiOjMyNH0se1wieFwiOjY5NixcInlcIjozMDV9LHtcInhcIjo3MzcsXCJ5XCI6Mjk4fSx7XCJ4XCI6NzQ2LFwieVwiOjI5Mn0se1wieFwiOjczNCxcInlcIjoyNzh9LHtcInhcIjo3MDksXCJ5XCI6MjUyfSx7XCJ4XCI6NjY0LFwieVwiOjE5M31dLFxuICAgICAgbmFtZTogXCJ0cmlhbmdsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6MTc5LFwieVwiOjE1OX0se1wieFwiOjE1MixcInlcIjoyOTB9LHtcInhcIjoxNDMsXCJ5XCI6MzM2fSx7XCJ4XCI6MTQyLFwieVwiOjM1NX0se1wieFwiOjE2MCxcInlcIjozNDh9LHtcInhcIjoyMDgsXCJ5XCI6MzM3fSx7XCJ4XCI6MjQxLFwieVwiOjMzMH0se1wieFwiOjI1NixcInlcIjozMjh9LHtcInhcIjoyNTQsXCJ5XCI6MzE1fSx7XCJ4XCI6MjM4LFwieVwiOjI3N30se1wieFwiOjIxMCxcInlcIjoyMDB9LHtcInhcIjoxODIuOTQzNTYsXCJ5XCI6MTEwLjQ1NjU2fV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjoxMDUsXCJ5XCI6MzM1fSx7XCJ4XCI6MTE1LFwieVwiOjM2Mn0se1wieFwiOjEyOCxcInlcIjozMzh9LHtcInhcIjoxNjMsXCJ5XCI6MjcxfSx7XCJ4XCI6MjQxLFwieVwiOjEzNX0se1wieFwiOjI2MSxcInlcIjoxMDR9LHtcInhcIjoyNjcsXCJ5XCI6OTh9LHtcInhcIjoyNjEsXCJ5XCI6MTAyfSx7XCJ4XCI6MjM2LFwieVwiOjExOX0se1wieFwiOjE1MSxcInlcIjoxOTV9LHtcInhcIjoxMDgsXCJ5XCI6MjM1fSx7XCJ4XCI6ODMsXCJ5XCI6MjY3fSx7XCJ4XCI6NzkuOTI2MTYsXCJ5XCI6MjcwLjkzNDUxfV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogMTM3LFwieVwiOiAxMzl9LHtcInhcIjogMTM1LFwieVwiOiAxNDF9LHtcInhcIjogMTMzLFwieVwiOiAxNDR9LHtcInhcIjogMTMyLFwieVwiOiAxNDZ9LHtcInhcIjogMTMwLFwieVwiOiAxNDl9LHtcInhcIjogMTI4LFwieVwiOiAxNTF9LHtcInhcIjogMTI2LFwieVwiOiAxNTV9LHtcInhcIjogMTIzLFwieVwiOiAxNjB9LHtcInhcIjogMTIwLFwieVwiOiAxNjZ9LHtcInhcIjogMTE2LFwieVwiOiAxNzF9LHtcInhcIjogMTEyLFwieVwiOiAxNzd9LHtcInhcIjogMTA3LFwieVwiOiAxODN9LHtcInhcIjogMTAyLFwieVwiOiAxODh9LHtcInhcIjogMTAwLFwieVwiOiAxOTF9LHtcInhcIjogOTUsXCJ5XCI6IDE5NX0se1wieFwiOiA5MCxcInlcIjogMTk5fSx7XCJ4XCI6IDg2LFwieVwiOiAyMDN9LHtcInhcIjogODIsXCJ5XCI6IDIwNn0se1wieFwiOiA4MCxcInlcIjogMjA5fSx7XCJ4XCI6IDc1LFwieVwiOiAyMTN9LHtcInhcIjogNzMsXCJ5XCI6IDIxM30se1wieFwiOiA3MCxcInlcIjogMjE2fSx7XCJ4XCI6IDY3LFwieVwiOiAyMTl9LHtcInhcIjogNjQsXCJ5XCI6IDIyMX0se1wieFwiOiA2MSxcInlcIjogMjIzfSx7XCJ4XCI6IDYwLFwieVwiOiAyMjV9LHtcInhcIjogNjIsXCJ5XCI6IDIyNn0se1wieFwiOiA2NSxcInlcIjogMjI1fSx7XCJ4XCI6IDY3LFwieVwiOiAyMjZ9LHtcInhcIjogNzQsXCJ5XCI6IDIyNn0se1wieFwiOiA3NyxcInlcIjogMjI3fSx7XCJ4XCI6IDg1LFwieVwiOiAyMjl9LHtcInhcIjogOTEsXCJ5XCI6IDIzMH0se1wieFwiOiA5OSxcInlcIjogMjMxfSx7XCJ4XCI6IDEwOCxcInlcIjogMjMyfSx7XCJ4XCI6IDExNixcInlcIjogMjMzfSx7XCJ4XCI6IDEyNSxcInlcIjogMjMzfSx7XCJ4XCI6IDEzNCxcInlcIjogMjM0fSx7XCJ4XCI6IDE0NSxcInlcIjogMjMzfSx7XCJ4XCI6IDE1MyxcInlcIjogMjMyfSx7XCJ4XCI6IDE2MCxcInlcIjogMjMzfSx7XCJ4XCI6IDE3MCxcInlcIjogMjM0fSx7XCJ4XCI6IDE3NyxcInlcIjogMjM1fSx7XCJ4XCI6IDE3OSxcInlcIjogMjM2fSx7XCJ4XCI6IDE4NixcInlcIjogMjM3fSx7XCJ4XCI6IDE5MyxcInlcIjogMjM4fSx7XCJ4XCI6IDE5OCxcInlcIjogMjM5fSx7XCJ4XCI6IDIwMCxcInlcIjogMjM3fSx7XCJ4XCI6IDIwMixcInlcIjogMjM5fSx7XCJ4XCI6IDIwNCxcInlcIjogMjM4fSx7XCJ4XCI6IDIwNixcInlcIjogMjM0fSx7XCJ4XCI6IDIwNSxcInlcIjogMjMwfSx7XCJ4XCI6IDIwMixcInlcIjogMjIyfSx7XCJ4XCI6IDE5NyxcInlcIjogMjE2fSx7XCJ4XCI6IDE5MixcInlcIjogMjA3fSx7XCJ4XCI6IDE4NixcInlcIjogMTk4fSx7XCJ4XCI6IDE3OSxcInlcIjogMTg5fSx7XCJ4XCI6IDE3NCxcInlcIjogMTgzfSx7XCJ4XCI6IDE3MCxcInlcIjogMTc4fSx7XCJ4XCI6IDE2NCxcInlcIjogMTcxfSx7XCJ4XCI6IDE2MSxcInlcIjogMTY4fSx7XCJ4XCI6IDE1NCxcInlcIjogMTYwfSx7XCJ4XCI6IDE0OCxcInlcIjogMTU1fSx7XCJ4XCI6IDE0MyxcInlcIjogMTUwfSx7XCJ4XCI6IDEzOCxcInlcIjogMTQ4fSx7XCJ4XCI6IDEzNixcInlcIjogMTQ4fV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3t4OiAwLCB5OiAwfSwge3g6IDAsIHk6IDUwfSwge3g6IDUwLCB5OiA1MH0sIHt4OiA1MCwgeTogMH1dLFxuICAgICAgbmFtZTogXCJzcXVhcmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe3g6IDAsIHk6IDB9LCB7eDogMCwgeTogMTAwfSwge3g6IDUwLCB5OiAxMDB9LCB7eDogNTAsIHk6IDB9XSxcbiAgICAgIG5hbWU6IFwic3F1YXJlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogNzgsXCJ5XCI6IDE0OX0se1wieFwiOiA3OCxcInlcIjogMTUzfSx7XCJ4XCI6IDc4LFwieVwiOiAxNTd9LHtcInhcIjogNzgsXCJ5XCI6IDE2MH0se1wieFwiOiA3OSxcInlcIjogMTYyfSx7XCJ4XCI6IDc5LFwieVwiOiAxNjR9LHtcInhcIjogNzksXCJ5XCI6IDE2N30se1wieFwiOiA3OSxcInlcIjogMTY5fSx7XCJ4XCI6IDc5LFwieVwiOiAxNzN9LHtcInhcIjogNzksXCJ5XCI6IDE3OH0se1wieFwiOiA3OSxcInlcIjogMTgzfSx7XCJ4XCI6IDgwLFwieVwiOiAxODl9LHtcInhcIjogODAsXCJ5XCI6IDE5M30se1wieFwiOiA4MCxcInlcIjogMTk4fSx7XCJ4XCI6IDgwLFwieVwiOiAyMDJ9LHtcInhcIjogODEsXCJ5XCI6IDIwOH0se1wieFwiOiA4MSxcInlcIjogMjEwfSx7XCJ4XCI6IDgxLFwieVwiOiAyMTZ9LHtcInhcIjogODIsXCJ5XCI6IDIyMn0se1wieFwiOiA4MixcInlcIjogMjI0fSx7XCJ4XCI6IDgyLFwieVwiOiAyMjd9LHtcInhcIjogODMsXCJ5XCI6IDIyOX0se1wieFwiOiA4MyxcInlcIjogMjMxfSx7XCJ4XCI6IDg1LFwieVwiOiAyMzB9LHtcInhcIjogODgsXCJ5XCI6IDIzMn0se1wieFwiOiA5MCxcInlcIjogMjMzfSx7XCJ4XCI6IDkyLFwieVwiOiAyMzJ9LHtcInhcIjogOTQsXCJ5XCI6IDIzM30se1wieFwiOiA5OSxcInlcIjogMjMyfSx7XCJ4XCI6IDEwMixcInlcIjogMjMzfSx7XCJ4XCI6IDEwNixcInlcIjogMjMzfSx7XCJ4XCI6IDEwOSxcInlcIjogMjM0fSx7XCJ4XCI6IDExNyxcInlcIjogMjM1fSx7XCJ4XCI6IDEyMyxcInlcIjogMjM2fSx7XCJ4XCI6IDEyNixcInlcIjogMjM2fSx7XCJ4XCI6IDEzNSxcInlcIjogMjM3fSx7XCJ4XCI6IDE0MixcInlcIjogMjM4fSx7XCJ4XCI6IDE0NSxcInlcIjogMjM4fSx7XCJ4XCI6IDE1MixcInlcIjogMjM4fSx7XCJ4XCI6IDE1NCxcInlcIjogMjM5fSx7XCJ4XCI6IDE2NSxcInlcIjogMjM4fSx7XCJ4XCI6IDE3NCxcInlcIjogMjM3fSx7XCJ4XCI6IDE3OSxcInlcIjogMjM2fSx7XCJ4XCI6IDE4NixcInlcIjogMjM1fSx7XCJ4XCI6IDE5MSxcInlcIjogMjM1fSx7XCJ4XCI6IDE5NSxcInlcIjogMjMzfSx7XCJ4XCI6IDE5NyxcInlcIjogMjMzfSx7XCJ4XCI6IDIwMCxcInlcIjogMjMzfSx7XCJ4XCI6IDIwMSxcInlcIjogMjM1fSx7XCJ4XCI6IDIwMSxcInlcIjogMjMzfSx7XCJ4XCI6IDE5OSxcInlcIjogMjMxfSx7XCJ4XCI6IDE5OCxcInlcIjogMjI2fSx7XCJ4XCI6IDE5OCxcInlcIjogMjIwfSx7XCJ4XCI6IDE5NixcInlcIjogMjA3fSx7XCJ4XCI6IDE5NSxcInlcIjogMTk1fSx7XCJ4XCI6IDE5NSxcInlcIjogMTgxfSx7XCJ4XCI6IDE5NSxcInlcIjogMTczfSx7XCJ4XCI6IDE5NSxcInlcIjogMTYzfSx7XCJ4XCI6IDE5NCxcInlcIjogMTU1fSx7XCJ4XCI6IDE5MixcInlcIjogMTQ1fSx7XCJ4XCI6IDE5MixcInlcIjogMTQzfSx7XCJ4XCI6IDE5MixcInlcIjogMTM4fSx7XCJ4XCI6IDE5MSxcInlcIjogMTM1fSx7XCJ4XCI6IDE5MSxcInlcIjogMTMzfSx7XCJ4XCI6IDE5MSxcInlcIjogMTMwfSx7XCJ4XCI6IDE5MCxcInlcIjogMTI4fSx7XCJ4XCI6IDE4OCxcInlcIjogMTI5fSx7XCJ4XCI6IDE4NixcInlcIjogMTI5fSx7XCJ4XCI6IDE4MSxcInlcIjogMTMyfSx7XCJ4XCI6IDE3MyxcInlcIjogMTMxfSx7XCJ4XCI6IDE2MixcInlcIjogMTMxfSx7XCJ4XCI6IDE1MSxcInlcIjogMTMyfSx7XCJ4XCI6IDE0OSxcInlcIjogMTMyfSx7XCJ4XCI6IDEzOCxcInlcIjogMTMyfSx7XCJ4XCI6IDEzNixcInlcIjogMTMyfSx7XCJ4XCI6IDEyMixcInlcIjogMTMxfSx7XCJ4XCI6IDEyMCxcInlcIjogMTMxfSx7XCJ4XCI6IDEwOSxcInlcIjogMTMwfSx7XCJ4XCI6IDEwNyxcInlcIjogMTMwfSx7XCJ4XCI6IDkwLFwieVwiOiAxMzJ9LHtcInhcIjogODEsXCJ5XCI6IDEzM30se1wieFwiOiA3NixcInlcIjogMTMzfV0sXG4gICAgICBuYW1lOiBcInNxdWFyZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6NjcsXCJ5XCI6MTcyfSx7XCJ4XCI6ODAsXCJ5XCI6ODV9LHtcInhcIjo4MyxcInlcIjo1OH0se1wieFwiOjgzLFwieVwiOjU0fSx7XCJ4XCI6MTM2LFwieVwiOjExMH0se1wieFwiOjE1NyxcInlcIjoxMzZ9LHtcInhcIjoxNjIsXCJ5XCI6MTQwfSx7XCJ4XCI6MTY2LFwieVwiOjE0M30se1wieFwiOjgwLFwieVwiOjEyNH0se1wieFwiOjQ1LFwieVwiOjExNn0se1wieFwiOjM3LFwieVwiOjExNH0se1wieFwiOjMxLFwieVwiOjExM30se1wieFwiOjUyLFwieVwiOjEwNn0se1wieFwiOjEwMSxcInlcIjo4Nn0se1wieFwiOjEzMSxcInlcIjo3NX0se1wieFwiOjE1NyxcInlcIjo2M30se1wieFwiOjE2MyxcInlcIjo2Mn0se1wieFwiOjE1OCxcInlcIjo2NH0se1wieFwiOjE1MyxcInlcIjo3M30se1wieFwiOjEyOCxcInlcIjoxMDN9LHtcInhcIjo3MSxcInlcIjoxNzB9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjMwLFwieVwiOjY5fSx7XCJ4XCI6MTE2LFwieVwiOjExOH0se1wieFwiOjkwLFwieVwiOjE2NH0se1wieFwiOjc1LFwieVwiOjExN30se1wieFwiOjE1NyxcInlcIjo4M30se1wieFwiOjE4MixcInlcIjoxNDB9LHtcInhcIjoxNTUsXCJ5XCI6MTYzfSx7XCJ4XCI6MTQ0LFwieVwiOjExOX0se1wieFwiOjIyMSxcInlcIjo1NH1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6ODcsXCJ5XCI6NzZ9LHtcInhcIjo2MixcInlcIjo3M30se1wieFwiOjEwMCxcInlcIjo5OH0se1wieFwiOjEwNyxcInlcIjo1N30se1wieFwiOjYxLFwieVwiOjM4fSx7XCJ4XCI6NzMsXCJ5XCI6MTM3fV0sXG4gICAgICBuYW1lOiBcIm90aGVyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogMTIzLFwieVwiOiAxMjl9LHtcInhcIjogMTIzLFwieVwiOiAxMzF9LHtcInhcIjogMTI0LFwieVwiOiAxMzN9LHtcInhcIjogMTI1LFwieVwiOiAxMzZ9LHtcInhcIjogMTI3LFwieVwiOiAxNDB9LHtcInhcIjogMTI5LFwieVwiOiAxNDJ9LHtcInhcIjogMTMzLFwieVwiOiAxNDh9LHtcInhcIjogMTM3LFwieVwiOiAxNTR9LHtcInhcIjogMTQzLFwieVwiOiAxNTh9LHtcInhcIjogMTQ1LFwieVwiOiAxNjF9LHtcInhcIjogMTQ4LFwieVwiOiAxNjR9LHtcInhcIjogMTUzLFwieVwiOiAxNzB9LHtcInhcIjogMTU4LFwieVwiOiAxNzZ9LHtcInhcIjogMTYwLFwieVwiOiAxNzh9LHtcInhcIjogMTY0LFwieVwiOiAxODN9LHtcInhcIjogMTY4LFwieVwiOiAxODh9LHtcInhcIjogMTcxLFwieVwiOiAxOTF9LHtcInhcIjogMTc1LFwieVwiOiAxOTZ9LHtcInhcIjogMTc4LFwieVwiOiAyMDB9LHtcInhcIjogMTgwLFwieVwiOiAyMDJ9LHtcInhcIjogMTgxLFwieVwiOiAyMDV9LHtcInhcIjogMTg0LFwieVwiOiAyMDh9LHtcInhcIjogMTg2LFwieVwiOiAyMTB9LHtcInhcIjogMTg3LFwieVwiOiAyMTN9LHtcInhcIjogMTg4LFwieVwiOiAyMTV9LHtcInhcIjogMTg2LFwieVwiOiAyMTJ9LHtcInhcIjogMTgzLFwieVwiOiAyMTF9LHtcInhcIjogMTc3LFwieVwiOiAyMDh9LHtcInhcIjogMTY5LFwieVwiOiAyMDZ9LHtcInhcIjogMTYyLFwieVwiOiAyMDV9LHtcInhcIjogMTU0LFwieVwiOiAyMDd9LHtcInhcIjogMTQ1LFwieVwiOiAyMDl9LHtcInhcIjogMTM3LFwieVwiOiAyMTB9LHtcInhcIjogMTI5LFwieVwiOiAyMTR9LHtcInhcIjogMTIyLFwieVwiOiAyMTd9LHtcInhcIjogMTE4LFwieVwiOiAyMTh9LHtcInhcIjogMTExLFwieVwiOiAyMjF9LHtcInhcIjogMTA5LFwieVwiOiAyMjJ9LHtcInhcIjogMTEwLFwieVwiOiAyMTl9LHtcInhcIjogMTEyLFwieVwiOiAyMTd9LHtcInhcIjogMTE4LFwieVwiOiAyMDl9LHtcInhcIjogMTIwLFwieVwiOiAyMDd9LHtcInhcIjogMTI4LFwieVwiOiAxOTZ9LHtcInhcIjogMTM1LFwieVwiOiAxODd9LHtcInhcIjogMTM4LFwieVwiOiAxODN9LHtcInhcIjogMTQ4LFwieVwiOiAxNjd9LHtcInhcIjogMTU3LFwieVwiOiAxNTN9LHtcInhcIjogMTYzLFwieVwiOiAxNDV9LHtcInhcIjogMTY1LFwieVwiOiAxNDJ9LHtcInhcIjogMTcyLFwieVwiOiAxMzN9LHtcInhcIjogMTc3LFwieVwiOiAxMjd9LHtcInhcIjogMTc5LFwieVwiOiAxMjd9LHtcInhcIjogMTgwLFwieVwiOiAxMjV9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA4MSxcInlcIjogMjE5fSx7XCJ4XCI6IDg0LFwieVwiOiAyMTh9LHtcInhcIjogODYsXCJ5XCI6IDIyMH0se1wieFwiOiA4OCxcInlcIjogMjIwfSx7XCJ4XCI6IDkwLFwieVwiOiAyMjB9LHtcInhcIjogOTIsXCJ5XCI6IDIxOX0se1wieFwiOiA5NSxcInlcIjogMjIwfSx7XCJ4XCI6IDk3LFwieVwiOiAyMTl9LHtcInhcIjogOTksXCJ5XCI6IDIyMH0se1wieFwiOiAxMDIsXCJ5XCI6IDIxOH0se1wieFwiOiAxMDUsXCJ5XCI6IDIxN30se1wieFwiOiAxMDcsXCJ5XCI6IDIxNn0se1wieFwiOiAxMTAsXCJ5XCI6IDIxNn0se1wieFwiOiAxMTMsXCJ5XCI6IDIxNH0se1wieFwiOiAxMTYsXCJ5XCI6IDIxMn0se1wieFwiOiAxMTgsXCJ5XCI6IDIxMH0se1wieFwiOiAxMjEsXCJ5XCI6IDIwOH0se1wieFwiOiAxMjQsXCJ5XCI6IDIwNX0se1wieFwiOiAxMjYsXCJ5XCI6IDIwMn0se1wieFwiOiAxMjksXCJ5XCI6IDE5OX0se1wieFwiOiAxMzIsXCJ5XCI6IDE5Nn0se1wieFwiOiAxMzYsXCJ5XCI6IDE5MX0se1wieFwiOiAxMzksXCJ5XCI6IDE4N30se1wieFwiOiAxNDIsXCJ5XCI6IDE4Mn0se1wieFwiOiAxNDQsXCJ5XCI6IDE3OX0se1wieFwiOiAxNDYsXCJ5XCI6IDE3NH0se1wieFwiOiAxNDgsXCJ5XCI6IDE3MH0se1wieFwiOiAxNDksXCJ5XCI6IDE2OH0se1wieFwiOiAxNTEsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNTIsXCJ5XCI6IDE2MH0se1wieFwiOiAxNTIsXCJ5XCI6IDE1N30se1wieFwiOiAxNTIsXCJ5XCI6IDE1NX0se1wieFwiOiAxNTIsXCJ5XCI6IDE1MX0se1wieFwiOiAxNTIsXCJ5XCI6IDE0OX0se1wieFwiOiAxNTIsXCJ5XCI6IDE0Nn0se1wieFwiOiAxNDksXCJ5XCI6IDE0Mn0se1wieFwiOiAxNDgsXCJ5XCI6IDEzOX0se1wieFwiOiAxNDUsXCJ5XCI6IDEzN30se1wieFwiOiAxNDEsXCJ5XCI6IDEzNX0se1wieFwiOiAxMzksXCJ5XCI6IDEzNX0se1wieFwiOiAxMzQsXCJ5XCI6IDEzNn0se1wieFwiOiAxMzAsXCJ5XCI6IDE0MH0se1wieFwiOiAxMjgsXCJ5XCI6IDE0Mn0se1wieFwiOiAxMjYsXCJ5XCI6IDE0NX0se1wieFwiOiAxMjIsXCJ5XCI6IDE1MH0se1wieFwiOiAxMTksXCJ5XCI6IDE1OH0se1wieFwiOiAxMTcsXCJ5XCI6IDE2M30se1wieFwiOiAxMTUsXCJ5XCI6IDE3MH0se1wieFwiOiAxMTQsXCJ5XCI6IDE3NX0se1wieFwiOiAxMTcsXCJ5XCI6IDE4NH0se1wieFwiOiAxMjAsXCJ5XCI6IDE5MH0se1wieFwiOiAxMjUsXCJ5XCI6IDE5OX0se1wieFwiOiAxMjksXCJ5XCI6IDIwM30se1wieFwiOiAxMzMsXCJ5XCI6IDIwOH0se1wieFwiOiAxMzgsXCJ5XCI6IDIxM30se1wieFwiOiAxNDUsXCJ5XCI6IDIxNX0se1wieFwiOiAxNTUsXCJ5XCI6IDIxOH0se1wieFwiOiAxNjQsXCJ5XCI6IDIxOX0se1wieFwiOiAxNjYsXCJ5XCI6IDIxOX0se1wieFwiOiAxNzcsXCJ5XCI6IDIxOX0se1wieFwiOiAxODIsXCJ5XCI6IDIxOH0se1wieFwiOiAxOTIsXCJ5XCI6IDIxNn0se1wieFwiOiAxOTYsXCJ5XCI6IDIxM30se1wieFwiOiAxOTksXCJ5XCI6IDIxMn0se1wieFwiOiAyMDEsXCJ5XCI6IDIxMX1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDc1LFwieVwiOiAyNTB9LHtcInhcIjogNzUsXCJ5XCI6IDI0N30se1wieFwiOiA3NyxcInlcIjogMjQ0fSx7XCJ4XCI6IDc4LFwieVwiOiAyNDJ9LHtcInhcIjogNzksXCJ5XCI6IDIzOX0se1wieFwiOiA4MCxcInlcIjogMjM3fSx7XCJ4XCI6IDgyLFwieVwiOiAyMzR9LHtcInhcIjogODIsXCJ5XCI6IDIzMn0se1wieFwiOiA4NCxcInlcIjogMjI5fSx7XCJ4XCI6IDg1LFwieVwiOiAyMjV9LHtcInhcIjogODcsXCJ5XCI6IDIyMn0se1wieFwiOiA4OCxcInlcIjogMjE5fSx7XCJ4XCI6IDg5LFwieVwiOiAyMTZ9LHtcInhcIjogOTEsXCJ5XCI6IDIxMn0se1wieFwiOiA5MixcInlcIjogMjA4fSx7XCJ4XCI6IDk0LFwieVwiOiAyMDR9LHtcInhcIjogOTUsXCJ5XCI6IDIwMX0se1wieFwiOiA5NixcInlcIjogMTk2fSx7XCJ4XCI6IDk3LFwieVwiOiAxOTR9LHtcInhcIjogOTgsXCJ5XCI6IDE5MX0se1wieFwiOiAxMDAsXCJ5XCI6IDE4NX0se1wieFwiOiAxMDIsXCJ5XCI6IDE3OH0se1wieFwiOiAxMDQsXCJ5XCI6IDE3M30se1wieFwiOiAxMDQsXCJ5XCI6IDE3MX0se1wieFwiOiAxMDUsXCJ5XCI6IDE2NH0se1wieFwiOiAxMDYsXCJ5XCI6IDE1OH0se1wieFwiOiAxMDcsXCJ5XCI6IDE1Nn0se1wieFwiOiAxMDcsXCJ5XCI6IDE1Mn0se1wieFwiOiAxMDgsXCJ5XCI6IDE0NX0se1wieFwiOiAxMDksXCJ5XCI6IDE0MX0se1wieFwiOiAxMTAsXCJ5XCI6IDEzOX0se1wieFwiOiAxMTIsXCJ5XCI6IDEzM30se1wieFwiOiAxMTMsXCJ5XCI6IDEzMX0se1wieFwiOiAxMTYsXCJ5XCI6IDEyN30se1wieFwiOiAxMTcsXCJ5XCI6IDEyNX0se1wieFwiOiAxMTksXCJ5XCI6IDEyMn0se1wieFwiOiAxMjEsXCJ5XCI6IDEyMX0se1wieFwiOiAxMjMsXCJ5XCI6IDEyMH0se1wieFwiOiAxMjUsXCJ5XCI6IDEyMn0se1wieFwiOiAxMjUsXCJ5XCI6IDEyNX0se1wieFwiOiAxMjcsXCJ5XCI6IDEzMH0se1wieFwiOiAxMjgsXCJ5XCI6IDEzM30se1wieFwiOiAxMzEsXCJ5XCI6IDE0M30se1wieFwiOiAxMzYsXCJ5XCI6IDE1M30se1wieFwiOiAxNDAsXCJ5XCI6IDE2M30se1wieFwiOiAxNDQsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNDUsXCJ5XCI6IDE3NX0se1wieFwiOiAxNTEsXCJ5XCI6IDE4OX0se1wieFwiOiAxNTYsXCJ5XCI6IDIwMX0se1wieFwiOiAxNjEsXCJ5XCI6IDIxM30se1wieFwiOiAxNjYsXCJ5XCI6IDIyNX0se1wieFwiOiAxNjksXCJ5XCI6IDIzM30se1wieFwiOiAxNzEsXCJ5XCI6IDIzNn0se1wieFwiOiAxNzQsXCJ5XCI6IDI0M30se1wieFwiOiAxNzcsXCJ5XCI6IDI0N30se1wieFwiOiAxNzgsXCJ5XCI6IDI0OX0se1wieFwiOiAxNzksXCJ5XCI6IDI1MX0se1wieFwiOiAxODAsXCJ5XCI6IDI1M30se1wieFwiOiAxODAsXCJ5XCI6IDI1NX0se1wieFwiOiAxNzksXCJ5XCI6IDI1N30se1wieFwiOiAxNzcsXCJ5XCI6IDI1N30se1wieFwiOiAxNzQsXCJ5XCI6IDI1NX0se1wieFwiOiAxNjksXCJ5XCI6IDI1MH0se1wieFwiOiAxNjQsXCJ5XCI6IDI0N30se1wieFwiOiAxNjAsXCJ5XCI6IDI0NX0se1wieFwiOiAxNDksXCJ5XCI6IDIzOH0se1wieFwiOiAxMzgsXCJ5XCI6IDIzMH0se1wieFwiOiAxMjcsXCJ5XCI6IDIyMX0se1wieFwiOiAxMjQsXCJ5XCI6IDIyMH0se1wieFwiOiAxMTIsXCJ5XCI6IDIxMn0se1wieFwiOiAxMTAsXCJ5XCI6IDIxMH0se1wieFwiOiA5NixcInlcIjogMjAxfSx7XCJ4XCI6IDg0LFwieVwiOiAxOTV9LHtcInhcIjogNzQsXCJ5XCI6IDE5MH0se1wieFwiOiA2NCxcInlcIjogMTgyfSx7XCJ4XCI6IDU1LFwieVwiOiAxNzV9LHtcInhcIjogNTEsXCJ5XCI6IDE3Mn0se1wieFwiOiA0OSxcInlcIjogMTcwfSx7XCJ4XCI6IDUxLFwieVwiOiAxNjl9LHtcInhcIjogNTYsXCJ5XCI6IDE2OX0se1wieFwiOiA2NixcInlcIjogMTY5fSx7XCJ4XCI6IDc4LFwieVwiOiAxNjh9LHtcInhcIjogOTIsXCJ5XCI6IDE2Nn0se1wieFwiOiAxMDcsXCJ5XCI6IDE2NH0se1wieFwiOiAxMjMsXCJ5XCI6IDE2MX0se1wieFwiOiAxNDAsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNTYsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNzEsXCJ5XCI6IDE2MH0se1wieFwiOiAxNzMsXCJ5XCI6IDE2MH0se1wieFwiOiAxODYsXCJ5XCI6IDE2MH0se1wieFwiOiAxOTUsXCJ5XCI6IDE2MH0se1wieFwiOiAxOTgsXCJ5XCI6IDE2MX0se1wieFwiOiAyMDMsXCJ5XCI6IDE2M30se1wieFwiOiAyMDgsXCJ5XCI6IDE2M30se1wieFwiOiAyMDYsXCJ5XCI6IDE2NH0se1wieFwiOiAyMDAsXCJ5XCI6IDE2N30se1wieFwiOiAxODcsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNzQsXCJ5XCI6IDE3OX0se1wieFwiOiAxNzIsXCJ5XCI6IDE4MX0se1wieFwiOiAxNTMsXCJ5XCI6IDE5Mn0se1wieFwiOiAxMzcsXCJ5XCI6IDIwMX0se1wieFwiOiAxMjMsXCJ5XCI6IDIxMX0se1wieFwiOiAxMTIsXCJ5XCI6IDIyMH0se1wieFwiOiA5OSxcInlcIjogMjI5fSx7XCJ4XCI6IDkwLFwieVwiOiAyMzd9LHtcInhcIjogODAsXCJ5XCI6IDI0NH0se1wieFwiOiA3MyxcInlcIjogMjUwfSx7XCJ4XCI6IDY5LFwieVwiOiAyNTR9LHtcInhcIjogNjksXCJ5XCI6IDI1Mn1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgXTtcblxuICBTaGFwZURldGVjdG9yLnByb3RvdHlwZS5zcG90ID0gZnVuY3Rpb24ocG9pbnRzLCBwYXR0ZXJuTmFtZSkge1xuXG4gICAgaWYgKHBhdHRlcm5OYW1lID09IG51bGwpIHtcbiAgICAgIHBhdHRlcm5OYW1lID0gJyc7XG4gICAgfVxuXG4gICAgdmFyIGRpc3RhbmNlLCBwYXR0ZXJuLCBzY29yZTtcbiAgICB2YXIgc3Ryb2tlID0gbmV3IFN0cm9rZShwb2ludHMpO1xuICAgIHZhciBiZXN0RGlzdGFuY2UgPSArSW5maW5pdHk7XG4gICAgdmFyIGJlc3RQYXR0ZXJuID0gbnVsbDtcbiAgICB2YXIgYmVzdFNjb3JlID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXR0ZXJucy5sZW5ndGg7IGkrKykge1xuICAgICAgcGF0dGVybiA9IHRoaXMucGF0dGVybnNbaV07XG5cbiAgICAgIGlmIChwYXR0ZXJuLm5hbWUuaW5kZXhPZihwYXR0ZXJuTmFtZSkgPiAtMSkge1xuICAgICAgICBkaXN0YW5jZSA9IHN0cm9rZS5kaXN0YW5jZUF0QmVzdEFuZ2xlKHBhdHRlcm4pO1xuICAgICAgICBzY29yZSA9IDEuMCAtIGRpc3RhbmNlIC8gX2hhbGZEaWFnb25hbDtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBiZXN0RGlzdGFuY2UgJiYgc2NvcmUgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAgIGJlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgIGJlc3RQYXR0ZXJuID0gcGF0dGVybi5uYW1lO1xuICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdHRlcm46IGJlc3RQYXR0ZXJuLFxuICAgICAgc2NvcmU6IGJlc3RTY29yZVxuICAgIH07XG4gIH07XG5cbiAgU2hhcGVEZXRlY3Rvci5wcm90b3R5cGUubGVhcm4gPSBmdW5jdGlvbihuYW1lLCBwb2ludHMpIHtcblxuICAgIHJldHVybiB0aGlzLnBhdHRlcm5zLnB1c2gobmV3IFN0cm9rZShwb2ludHMsIG5hbWUpKTtcbiAgfTtcblxuICByZXR1cm4gU2hhcGVEZXRlY3Rvcjtcbn0pKTtcbiIsImNvbnN0IHRvdWNoID0gcmVxdWlyZSgnLi90b3VjaCcpO1xuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHZpZGVvID0gcmVxdWlyZSgnLi92aWRlbycpO1xuY29uc3QgdGltaW5nID0gcmVxdWlyZSgnLi90aW1pbmcnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRXaW5kb3coKSB7XG4gIHdpbmRvdy5rYW4gPSB7XG4gICAgY3VycmVudENvbG9yOiAnIzJCNUUyRScsXG4gICAgY29tcG9zaXRpb246IFtdLFxuICAgIGNvbXBvc2l0aW9uSW50ZXJ2YWw6IG51bGwsXG4gICAgY29tcG9zaXRpb25UaW1lb3V0OiBudWxsLFxuICAgIHNvdW5kVGltZW91dHM6IFtdLFxuICAgIGxhc3RFdmVudDogbnVsbCxcbiAgICBpbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgbW92ZXM6IFtdLFxuICAgIHBsYXlpbmc6IGZhbHNlLFxuICAgIHBpbmNoaW5nOiBmYWxzZSxcbiAgICBwaW5jaGVkR3JvdXA6IG51bGwsXG4gICAgcGluY2hlZFR1dDogbnVsbCxcbiAgICBwYXRoRGF0YToge30sXG4gICAgc2hhcGVQYXRoOiBudWxsLFxuICAgIHByZXZBbmdsZTogbnVsbCxcbiAgICBzaWRlczogW10sXG4gICAgc2lkZTogW10sXG4gICAgY29ybmVyczogW10sXG4gICAgbGFzdFNjYWxlOiAxLFxuICAgIGxhc3RSb3RhdGlvbjogMCxcbiAgICBvcmlnaW5hbFBvc2l0aW9uOiBudWxsLFxuICAgIHR1dG9yaWFsQ29tcGxldGlvbjoge1xuICAgICAgXCJmaWxsXCI6IGZhbHNlLFxuICAgICAgXCJwaW5jaFwiOiBmYWxzZSxcbiAgICAgIFwic3dpcGVcIjogZmFsc2VcbiAgICB9LFxuICAgIGluYWN0aXZpdHlUaW1lb3V0OiBudWxsLFxuICAgIHBsYXlQcm9tcHRUaW1lb3V0OiBudWxsLFxuICAgIHVzZXJIYXNEcmF3bkZpcnN0U2hhcGU6IGZhbHNlLFxuICAgIGZpcnN0VGltZVBsYXlpbmc6IHRydWUsXG4gICAgc2hhcGVzU2luY2VUdXQ6IDAsXG4gICAgcmVmcmVzaENoZWNrSW50ZXJ2YWw6IG51bGwsXG4gICAgc2hhOiBudWxsLFxuICAgIHNjaGVkdWxlZE92ZXJsYXk6IG51bGwsXG4gICAgY29udGludWVDb3VudGRvd25JbnRlcnZhbDogbnVsbCxcbiAgICBzaGFwZVNvdW5kczogbnVsbCxcbiAgfTtcbn1cblxuJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICByZXNldFdpbmRvdygpO1xuICAgIHV0aWwuc2V0U2hhKCk7XG4gICAgdWkuaW5pdCgpO1xuICAgIG92ZXJsYXlzLmluaXQoKTtcbiAgICB0aW1pbmcuaW5pdCgpO1xuICAgIHNvdW5kLmluaXQoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBzb3VuZC5pbml0KCkgaXMgYXN5bmMgYmVjYXVzZSBpdCBsb2FkcyBpbiB0aGUgc291bmQgZmlsZXNcbiAgICAgICAgdG91Y2guaW5pdCgpO1xuICAgICAgfSlcbiAgICAgIC5mYWlsKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGluaXR0aW5nIHNoYXBlIHNvdW5kczonLCBlKTtcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBydW4oKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIHdhaXQgNSBzZWNvbmRzIHRoZW4gcmVsb2FkXG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9LCA1ICogMTAwMCk7XG4gIH1cbn0pO1xuIiwiY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuY29uc3QgdG91Y2ggPSByZXF1aXJlKCcuL3RvdWNoJyk7XG5jb25zdCB2aWRlbyA9IHJlcXVpcmUoJy4vdmlkZW8nKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCB0dXRvcmlhbCA9IHJlcXVpcmUoJy4vdHV0b3JpYWwnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuY29uc3QgaGFtbWVyQ2FudmFzID0gdG91Y2guaGFtbWVyQ2FudmFzO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbmNvbnN0IHRhcEV2ZW50ID0gJ2NsaWNrIHRhcCB0b3VjaCc7XG5cbmNvbnN0ICRjYXJkc1dyYXAgPSAkYm9keS5maW5kKCcub3ZlcmxheS50aXBzIC5jYXJkLXdyYXAnKTtcbmNvbnN0ICRjYXJkSXRlbXMgPSAkY2FyZHNXcmFwLmZpbmQoJ2FydGljbGUnKTtcbmNvbnN0IGNhcmRzQ291bnQgPSAkY2FyZEl0ZW1zLmxlbmd0aDtcbmNvbnN0ICRmb290ZXIgPSAkYm9keS5maW5kKCcub3ZlcmxheS50aXBzIC5mb290ZXInKTtcblxuY29uc3QgJHNoYXJlUGhvbmUgPSAkYm9keS5maW5kKCcjcGhvbmUnKTtcbmNvbnN0ICRzaGFyZUtleXBhZCA9ICRib2R5LmZpbmQoJy5rZXlwYWQnKTtcblxuY29uc3QgYWxsT3ZlcmxheXMgPSBbJ2ludHJvJywgJ3BsYXktcHJvbXB0JywgJ3NoYXJlLXByb21wdCcsICdjb250aW51ZScsICd0aXBzJywgJ3NoYXJlJ107XG5jb25zdCBvdmVybGF5T3BlbkNsYXNzZXMgPSBhbGxPdmVybGF5cy5tYXAoKG92ZXJsYXkpID0+IGAke292ZXJsYXl9LWFjdGl2ZWApLmpvaW4oJyAnKTtcblxuY29uc3Qgb3ZlcmxheUFjdGl2ZUNsYXNzID0gJ292ZXJsYXktYWN0aXZlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5PdmVybGF5KG92ZXJsYXlOYW1lKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdhdHRlbXB0aW5nIHRvIG9wZW4gb3ZlcmxheScsIG92ZXJsYXlOYW1lKTtcbiAgaWYgKHdpbmRvdy5rYW4ub3ZlcmxheXMgPT09IGZhbHNlKSByZXR1cm47XG4gIGlmIChhbGxPdmVybGF5cy5pbmNsdWRlcyhvdmVybGF5TmFtZSkpIHtcbiAgICBpZiAod2luZG93Lmthbi5waW5jaGluZyA9PT0gdHJ1ZSB8fCB3aW5kb3cua2FuLnBhbm5pbmcgPT09IHRydWUpIHtcbiAgICAgIGlmIChvdmVybGF5TmFtZSA9PT0gJ2NvbnRpbnVlJykge1xuICAgICAgICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2NoZWR1bGluZyBvdmVybGF5Jywgb3ZlcmxheU5hbWUpO1xuICAgICAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBvdmVybGF5TmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2xvc2VBbmRSZXNldE92ZXJsYXlzKCk7XG4gICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gICAgJGJvZHkuYWRkQ2xhc3Mob3ZlcmxheUFjdGl2ZUNsYXNzKTtcbiAgICAkYm9keS5maW5kKCcub3ZlcmxheTpub3QoLnRpcHMpJykub24odGFwRXZlbnQsICgpID0+IHtcbiAgICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIH0pO1xuXG4gICAgc3dpdGNoIChvdmVybGF5TmFtZSkge1xuICAgICAgY2FzZSAnaW50cm8nOlxuICAgICAgICBvcGVuSW50cm9PdmVybGF5KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheS1wcm9tcHQnOlxuICAgICAgICBpZiAodXRpbC5hbnlTaGFwZXNPbkNhbnZhcygpKSB7XG4gICAgICAgICAgb3BlblBsYXlQcm9tcHRPdmVybGF5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgb3Blbk92ZXJsYXkoJ3BsYXktcHJvbXB0Jyk7XG4gICAgICAgICAgfSwgdGltaW5nLnBsYXlQcm9tcHREZWxheSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2hhcmUtcHJvbXB0JzpcbiAgICAgICAgb3BlblNoYXJlUHJvbXB0T3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvbnRpbnVlJzpcbiAgICAgICAgb3BlbkNvbnRpbnVlT3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpcHMnOlxuICAgICAgICBvcGVuVGlwc092ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzaGFyZSc6XG4gICAgICAgIG9wZW5TaGFyZU92ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKCd1bmFibGUgdG8gb3BlbiB1bmtub3duIG92ZXJsYXknLCBvdmVybGF5TmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlbkludHJvT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ2ludHJvLWFjdGl2ZScpO1xufVxuXG5mdW5jdGlvbiBvcGVuUGxheVByb21wdE92ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdwbGF5LXByb21wdC1hY3RpdmUnKTtcbn1cblxuZnVuY3Rpb24gb3BlblNoYXJlUHJvbXB0T3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3NoYXJlLXByb21wdC1hY3RpdmUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29udGludWVDb3VudGRvd24oKSB7XG4gICQoJy5vdmVybGF5LmNvbnRpbnVlIC5jb3VudGRvd24tbnVtJykuaHRtbChwYXJzZUludCh0aW1pbmcuY29udGludWVJbmFjdGl2aXR5RGVsYXkgLyAxMDAwKSk7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcbn1cblxuZnVuY3Rpb24gb3BlbkNvbnRpbnVlT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ2NvbnRpbnVlLWFjdGl2ZScpO1xuXG4gIHJlc2V0Q29udGludWVDb3VudGRvd24oKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCk7XG5cbiAgd2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGxldCAkY291bnRkb3duTnVtV3JhcCA9ICQoJy5vdmVybGF5LmNvbnRpbnVlIC5jb3VudGRvd24tbnVtJyk7XG4gICAgbGV0IGNvdW50ID0gcGFyc2VJbnQoJGNvdW50ZG93bk51bVdyYXAuaHRtbCgpKTtcbiAgICBpZiAoY291bnQgPiAxKSB7XG4gICAgICAkY291bnRkb3duTnVtV3JhcC5odG1sKGNvdW50IC0gMSk7XG4gICAgfVxuICB9LCAxMDAwKTtcblxuICB3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdmlkZW8uZW50ZXJUdXRvcmlhbE1vZGUoKTtcbiAgfSwgdGltaW5nLmNvbnRpbnVlSW5hY3Rpdml0eURlbGF5KTtcbn1cblxuZnVuY3Rpb24gb3BlblRpcHNPdmVybGF5KCkge1xuICAkYm9keS5hZGRDbGFzcygndGlwcy1hY3RpdmUnKTtcbiAgYWN0aXZhdGVUaXBzQ2FyZHMoKTtcbn1cblxuZnVuY3Rpb24gb3BlblNoYXJlT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3NoYXJlLWFjdGl2ZScpO1xufVxuXG5cbi8vIGNhcmQgc2xpZGVyIG5hdmlnYXRpb25cbmV4cG9ydCBmdW5jdGlvbiBjYXJkTmF2TmV4dCgpIHtcbiAgbGV0ICRvbGQgPSAkYm9keS5maW5kKCcuY2FyZC13cmFwIC5jdXJyZW50Jyk7XG4gIGxldCAkbmV3ID0gKCRvbGQubmV4dCgpLmxlbmd0aCkgPyAkb2xkLm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKTtcbiAgbGV0ICRuZXh0ID0gKCRuZXcubmV4dCgpLmxlbmd0aCkgPyAkbmV3Lm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKTtcbiAgbGV0ICR0aGlyZCA9ICgkbmV4dC5uZXh0KCkubGVuZ3RoKSA/ICRuZXh0Lm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKS5uZXh0KCk7XG4gIGxldCBzbGlkZSA9ICRuZXcuaW5kZXgoKTtcbiAgJG9sZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdyZW1vdmUnKTtcbiAgJG5ldy5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICRuZXh0LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ25leHQnKTtcbiAgJHRoaXJkLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ3RoaXJkJyk7XG4gIHVwZGF0ZUNhcmRDb3VudGVyKHNsaWRlICsgMSwgY2FyZHNDb3VudCk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICRvbGQucmVtb3ZlQ2xhc3MoKTtcbiAgfSwgNjAwKTtcbn1cblxuLy8gdGlwcyBjYXJkIGludGVyYWN0aW9uc1xuZnVuY3Rpb24gY2FyZEludGVyYWN0aW9ucygpIHtcbiAgbGV0IHRpbWVPZkxhc3RJbnRlcmFjdGlvbiA9IDA7XG5cbiAgJGJvZHkuZmluZCgnLm92ZXJsYXknKS5vbih0YXBFdmVudCwgZSA9PiB7XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aW1lT2ZMYXN0SW50ZXJhY3Rpb24gPiAoY3VycmVudFRpbWUgLSAyNTApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRpbWVPZkxhc3RJbnRlcmFjdGlvbiA9IGN1cnJlbnRUaW1lO1xuXG4gICAgaWYgKCAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2FyZC13cmFwJykubGVuZ3RoID09IDEgKSB7XG4gICAgICAvLyBkaXJlY3RseSBvbiBhIGNhcmQsIG5hdmlnYXRlIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgY2FyZE5hdk5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3V0c2lkZSBlbGVtZW50cywgY2xvc2UgZXZlcnl0aGluZyBhbmQgcmVzZXRcbiAgICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlc2V0VGlwcygpIHtcbiAgJGNhcmRJdGVtcy5yZW1vdmVDbGFzcygpO1xuICAkc2hhcmVQaG9uZS5odG1sKCcnKTtcbn1cblxuLy8gY2xvc2UgYW5kIHJlc2V0IHRpcHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZUFuZFJlc2V0T3ZlcmxheXMoKSB7XG4gICRib2R5LnJlbW92ZUNsYXNzKCdvdmVybGF5LWFjdGl2ZScpO1xuICAkYm9keS5yZW1vdmVDbGFzcyhvdmVybGF5T3BlbkNsYXNzZXMpO1xuICByZXNldFRpcHMoKTtcbn1cblxuLy8gZGVhbCBhIGZyZXNoIHN0YWNrIG9mIGNhcmRzXG5mdW5jdGlvbiBhY3RpdmF0ZVRpcHNDYXJkcygpIHtcbiAgbGV0ICRuZXcgPSAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkbmV4dCA9ICgkbmV3Lm5leHQoKS5sZW5ndGgpID8gJG5ldy5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkdGhpcmQgPSAoJG5leHQubmV4dCgpLmxlbmd0aCkgPyAkbmV4dC5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCkubmV4dCgpO1xuICAkY2FyZEl0ZW1zLnJlbW92ZUNsYXNzKCk7XG4gICRuZXcucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnY3VycmVudCcpO1xuICAkbmV4dC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCduZXh0Jyk7XG4gICR0aGlyZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCd0aGlyZCcpO1xuICB1cGRhdGVDYXJkQ291bnRlcigxLCBjYXJkc0NvdW50KTtcbn1cblxuLy8gY291bnRpbmcgY2FyZHNcbmZ1bmN0aW9uIHVwZGF0ZUNhcmRDb3VudGVyKGN1cnJlbnQsIHRvdGFsKSB7XG4gICRmb290ZXIuZmluZCgnLmN1cnJlbnQnKS5odG1sKGN1cnJlbnQpO1xuICAkZm9vdGVyLmZpbmQoJy5uZXh0JykuaHRtbCh0b3RhbCk7XG59XG5cbi8vIHBob25lIGlucHV0c1xuZnVuY3Rpb24gcGhvbmVOdW1iZXJJbnB1dHMoKSB7XG4gIC8vIG1hc2sgdGhlIG91dHB1dFxuICAkc2hhcmVQaG9uZS5tYXNrKCcwMDAtMDAwLTAwMDAnKTtcbiAgLy8gZ2V0IGludGVyYWN0aW9ucyBmcm9tIHRoZSBrZXlwYWRcbiAgJHNoYXJlS2V5cGFkLmZpbmQoJy5udW0nKS5vbih0YXBFdmVudCwgZSA9PiB7XG4gICAgbGV0IHBob25lTnVtYmVyID0gJHNoYXJlUGhvbmUuaHRtbCgpLnRvU3RyaW5nKCkgKyAkKGUudGFyZ2V0KS5odG1sKCkudG9TdHJpbmcoKTtcbiAgICBwaG9uZU51bWJlciA9ICRzaGFyZVBob25lLm1hc2tlZChwaG9uZU51bWJlcik7XG4gICAgJHNoYXJlUGhvbmUuaHRtbChwaG9uZU51bWJlcik7XG4gIH0pO1xuICAvLyBjbGVhciB0aGUgZGlzcGxheVxuICAkc2hhcmVLZXlwYWQuZmluZCgnLmNsZWFyJykub24odGFwRXZlbnQsIGUgPT4ge1xuICAgICRzaGFyZVBob25lLmh0bWwoJycpO1xuICB9KTtcbiAgLy8gRklYTUU6IHNlbmQgc21zXG4gIC8vICRzaGFyZUtleXBhZC5maW5kKCcuc2VuZCcpLm9uKHRhcEV2ZW50LCBlID0+IHt9KTtcbn1cblxuLy8gXCJyYW5kb21seVwiIHBsYWNlIGZpZGRseSBiaXRzIG9uIHRoZSBjYXJkc1xuZnVuY3Rpb24gcmFuZG9tQ2FyZEdyYXBoaWNzKCkge1xuICAkYm9keS5maW5kKCcuY2FyZC13cmFwIGFydGljbGUnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICQoZWwpLmF0dHIoJ2RhdGEtYmcnLCBpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRUaXBzKCkge1xuICBjYXJkSW50ZXJhY3Rpb25zKCk7XG59XG5cbmZ1bmN0aW9uIGluaXRTaGFyZSgpIHtcbiAgcGhvbmVOdW1iZXJJbnB1dHMoKTtcbiAgcmFuZG9tQ2FyZEdyYXBoaWNzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBpbml0VGlwcygpO1xuICBpbml0U2hhcmUoKTtcbn1cbiIsImNvbnN0IFNoYXBlRGV0ZWN0b3IgPSByZXF1aXJlKCcuL2xpYi9zaGFwZS1kZXRlY3RvcicpO1xuXG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcblxuZXhwb3J0IGNvbnN0IGNvcm5lclRocmVzaG9sZERlZyA9IDMwO1xuZXhwb3J0IGNvbnN0IHRocmVzaG9sZERpc3RNdWx0aXBsaWVyID0gMC4xO1xuXG5leHBvcnQgY29uc3QgZGV0ZWN0b3IgPSBuZXcgU2hhcGVEZXRlY3RvcihTaGFwZURldGVjdG9yLmRlZmF1bHRTaGFwZXMpO1xuXG5leHBvcnQgY29uc3Qgc2hhcGVOYW1lcyA9IFtcImxpbmVcIiwgXCJjaXJjbGVcIiwgXCJzcXVhcmVcIiwgXCJ0cmlhbmdsZVwiLCBcIm90aGVyXCJdO1xuXG5mdW5jdGlvbiBjbGVhclBvcHMoKSB7XG4gIGNvbnN0IHBvcHMgPSB1dGlsLmdldEFsbFBvcHMoKTtcbiAgcG9wcy5mb3JFYWNoKChwb3ApID0+IHBvcC5yZW1vdmUoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95R3JvdXBQb3BzKGdyb3VwKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdkZXN0cm95aW5nIHBvcHMnKTtcbiAgY29uc3QgZ3JvdXBQb3BzQmVmb3JlID0gdXRpbC5nZXRHcm91cFBvcHMoZ3JvdXApO1xuICAvLyBjb25zb2xlLmxvZygncG9wcyB0byBiZSBkZXN0cm95ZWQnLCBncm91cFBvcHNCZWZvcmUpO1xuICBpZiAoZ3JvdXBQb3BzQmVmb3JlLmxlbmd0aCA+IDApIHtcbiAgICBncm91cFBvcHNCZWZvcmUuZm9yRWFjaCgocG9wKSA9PiBwb3AucmVtb3ZlKCkpO1xuICB9XG4gIGNvbnN0IGdyb3VwUG9wc0FmdGVyID0gdXRpbC5nZXRHcm91cFBvcHMoZ3JvdXApO1xuICAvLyBjb25zb2xlLmxvZygnZ3JvdXAgcG9wcyBhZnRlcicsIGdyb3VwUG9wc0FmdGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxJbkdyb3VwUG9wc0J5SWQoZ3JvdXBJZCkge1xuICBjb25zdCBncm91cCA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbSh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLmlkID09PSBncm91cElkXG4gIH0pO1xuXG4gIGlmICghIWdyb3VwICYmIGdyb3VwLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBncm91cC5jaGlsZHJlbi5mb3JFYWNoKChncm91cENoaWxkKSA9PiB7XG4gICAgICBpZiAoZ3JvdXBDaGlsZC5uYW1lID09PSAnbG9vcCcpIHtcbiAgICAgICAgdG9nZ2xlRmlsbChncm91cENoaWxkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRmlsbChpdGVtKSB7XG4gIGNvbnN0IHRyYW5zcGFyZW50ID0gY29sb3IudHJhbnNwYXJlbnQ7XG4gIC8vIGNvbnNvbGUubG9nKCdoaXQnKTtcbiAgbGV0IHBhcmVudCA9IGl0ZW0ucGFyZW50O1xuXG4gIC8vIGNvbnNvbGUubG9nKCdoaXQgaXRlbScsIGl0ZW0pO1xuICAvLyBjb25zb2xlLmxvZygnaGl0IHBhcmVudCcsIHBhcmVudCk7XG5cbiAgaWYgKGl0ZW0uZGF0YS5pbnRlcmlvcikge1xuICAgIC8vIGNvbnNvbGUubG9nKCdpbnRlcmlvcicpO1xuICAgIGl0ZW0uZGF0YS50cmFuc3BhcmVudCA9ICFpdGVtLmRhdGEudHJhbnNwYXJlbnQ7XG5cbiAgICBpZiAoaXRlbS5kYXRhLnRyYW5zcGFyZW50KSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygndHJhbnNwYXJlbnQnKTtcbiAgICAgIGl0ZW0uZmlsbENvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgICBpdGVtLnN0cm9rZUNvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdub3QgdHJhbnNwYXJlbnQnKTtcbiAgICAgIGl0ZW0uZmlsbENvbG9yID0gcGFyZW50LmRhdGEuY29sb3I7XG4gICAgICBpdGVtLnN0cm9rZUNvbG9yID0gcGFyZW50LmRhdGEuY29sb3I7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5tb3Zlcy5wdXNoKHtcbiAgICAgIHR5cGU6ICdmaWxsQ2hhbmdlJyxcbiAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgZmlsbDogcGFyZW50LmRhdGEuY29sb3IsXG4gICAgICB0cmFuc3BhcmVudDogaXRlbS5kYXRhLnRyYW5zcGFyZW50XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ25vdCBpbnRlcmlvcicpO1xuICAgIC8vIGNoZWNrIGlmIGl0ZW0gaXMgYSBwb3AsIGJlY2F1c2UgdGhlbiB3ZSdsbCBmaWxsIHRoZSBwb3AncyBwYXJlbnRcbiAgICBpZiAoISFpdGVtLmRhdGEgJiYgaXRlbS5kYXRhLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCEhaXRlbS5wYXJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICAgICAgICBmaWxsSW5Hcm91cFBvcHNCeUlkKGl0ZW0ucGFyZW50LmlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW5VcEdyb3VwKGdyb3VwKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdjbGVhbmluZyB1cCBncm91cCcpO1xuICBjb25zdCBhY2NlcHRhYmxlTmFtZXMgPSBbJ21hc2snLCAnb3V0ZXInLCAnc2hhcGVQYXRoJywgJ2xvb3AnLCAncG9wJ107XG5cbiAgZ3JvdXAuY2hpbGRyZW4uZm9yRWFjaCgoZ3JvdXBDaGlsZCkgPT4ge1xuICAgIGlmIChncm91cENoaWxkLm5hbWUgPT09IG51bGwgfHwgIWFjY2VwdGFibGVOYW1lcy5pbmNsdWRlcyhncm91cENoaWxkLm5hbWUpIHx8ICFncm91cENoaWxkLmxlbmd0aCA+IDApIHtcbiAgICAgIGdyb3VwQ2hpbGQucmVtb3ZlKCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZ3JvdXA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQb3BzKCkge1xuICBjb25zdCBmcmVzaEdyb3VwcyA9IHV0aWwuZ2V0RnJlc2hHcm91cHMoKTtcbiAgY29uc3QgcG9wQ2FuZGlkYXRlcyA9IHV0aWwuZ2V0UG9wQ2FuZGlkYXRlcygpO1xuICBjb25zdCBhbGxQb3BzID0gdXRpbC5nZXRBbGxQb3BzKCk7XG4gIHBvcENhbmRpZGF0ZXMucmV2ZXJzZSgpO1xuICAvLyBjb25zb2xlLmxvZygnZnJlc2hHcm91cHMnLCBmcmVzaEdyb3Vwcyk7XG4gIC8vIGNvbnNvbGUubG9nKCdwb3BDYW5kaWRhdGVzJywgcG9wQ2FuZGlkYXRlcyk7XG4gIC8vIGNsZWFyUG9wcygpO1xuXG4gIGZyZXNoR3JvdXBzLmZvckVhY2goKGZyZXNoR3JvdXAsIGkpID0+IHtcbiAgICAvLyBpZiAoaSA+PSA0KSByZXR1cm47XG4gICAgLy8gY29uc29sZS5sb2coJ2ZyZXNoR3JvdXAnLCBmcmVzaEdyb3VwKTtcblxuICAgIGNvbnN0IGZyZXNoT3V0ZXIgPSBmcmVzaEdyb3VwLl9uYW1lZENoaWxkcmVuLm1hc2tbMF07XG4gICAgZnJlc2hPdXRlci5icmluZ1RvRnJvbnQoKTtcbiAgICAvLyBmcmVzaE91dGVyLnZpc2libGUgPSB0cnVlO1xuICAgIC8vIGZyZXNoT3V0ZXIuZmlsbENvbG9yID0gJ2JsYWNrJztcbiAgICAvLyBmcmVzaE91dGVyLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAvLyBjb25zb2xlLmxvZygnZnJlc2hPdXRlcicsIGZyZXNoT3V0ZXIpO1xuICAgIC8vIGZyZXNoT3V0ZXIuc2VsZWN0ZWQgPSB0cnVlO1xuICAgIHBvcENhbmRpZGF0ZXMuZm9yRWFjaCgob3RoZXJHcm91cCwgaikgPT4ge1xuICAgICAgY29uc3Qgb3RoZXJHcm91cE91dGVyID0gb3RoZXJHcm91cC5fbmFtZWRDaGlsZHJlbi5tYXNrWzBdO1xuICAgICAgaWYgKGZyZXNoR3JvdXAuaWQgIT09IG90aGVyR3JvdXAuaWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ290aGVyR3JvdXAnLCBvdGhlckdyb3VwKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ290aGVyR3JvdXBPdXRlcicsIG90aGVyR3JvdXBPdXRlcik7XG4gICAgICAgIC8vIG90aGVyR3JvdXBPdXRlci5maWxsQ29sb3IgPSAnd2hpdGUnO1xuICAgICAgICBvdGhlckdyb3VwT3V0ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgICAgIGxldCB0aGlzUG9wID0gZnJlc2hPdXRlci5pbnRlcnNlY3Qob3RoZXJHcm91cE91dGVyKTtcbiAgICAgICAgaWYgKCEhdGhpc1BvcCAmJiB0aGlzUG9wLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBjb25zdCBwb3BDb2xvciA9IGNvbG9yLmdldEluZGV4ZWRQb3BDb2xvcihpICsgaik7XG4gICAgICAgICAgY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRSYW5kb21Qb3AoKTtcbiAgICAgICAgICB0aGlzUG9wLmZpbGxDb2xvciA9IHBvcENvbG9yO1xuICAgICAgICAgIHRoaXNQb3Auc3Ryb2tlQ29sb3IgPSBwb3BDb2xvcjtcbiAgICAgICAgICB0aGlzUG9wLmRhdGEucG9wID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzUG9wLm5hbWUgPSAncG9wJztcbiAgICAgICAgICB0aGlzUG9wLmRhdGEucG9wR3JvdXAgPSBmcmVzaEdyb3VwLmlkO1xuICAgICAgICAgIHRoaXNQb3AuZGF0YS5pbnRlcnNlY3RpbmdHcm91cCA9IG90aGVyR3JvdXAuaWQ7XG4gICAgICAgICAgdGhpc1BvcC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzUG9wLmNsb3NlZCA9IHRydWU7XG4gICAgICAgICAgdGhpc1BvcC5icmluZ1RvRnJvbnQoKTtcbiAgICAgICAgICBmcmVzaEdyb3VwLmFkZENoaWxkKHRoaXNQb3ApO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYW5VcEdyb3VwKGZyZXNoR3JvdXApO1xuXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgaWYgdGhpcyBwb3AgaW50ZXJzZWN0cyBhbnkgb3RoZXIgcG9wc1xuICAgICAgICAvLyBhbGxQb3BzLmZvckVhY2goKG90aGVyUG9wLCBrKSA9PiB7XG4gICAgICAgIC8vICAgY29uc29sZS5sb2coJ2NoZWNraW5nIG90aGVyIHBvcCcsIG90aGVyUG9wKTtcbiAgICAgICAgLy8gICBpZiAodGhpc1BvcC5pZCAhPT0gb3RoZXJQb3AuaWQgJiYgdGhpc1BvcC5pbnRlcnNlY3RzKG90aGVyUG9wKSkge1xuICAgICAgICAvLyAgICAgbGV0IHBvcEludGVyc2VjdGlvbiA9IHRoaXNQb3AuZ2V0SW50ZXJzZWN0aW9ucyhvdGhlclBvcCk7XG4gICAgICAgIC8vICAgICBpZiAoISFwb3BJbnRlcnNlY3Rpb24gJiYgcG9wSW50ZXJzZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uID0gbmV3IFBhdGgoW3BvcEludGVyc2VjdGlvbl0pXG4gICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCdwb3BJbnRlcnNlY3Rpb24nLCBwb3BJbnRlcnNlY3Rpb24pO1xuICAgICAgICAvLyAgICAgICAvLyBjb25zdCBwb3BDb2xvciA9IGNvbG9yLmdldEluZGV4ZWRQb3BDb2xvcihpICsgaiArIGspO1xuICAgICAgICAvLyAgICAgICBjb25zdCBwb3BDb2xvciA9IGNvbG9yLmdldFJhbmRvbVBvcCgpO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24uZGF0YS5wb3AgPSB0cnVlO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24uZmlsbENvbG9yID0gcG9wQ29sb3JcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLnN0cm9rZUNvbG9yID0gcG9wQ29sb3I7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5icmluZ1RvRnJvbnQoKTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmcmVzaEdyb3VwLmRhdGEuZnJlc2ggPSBmYWxzZTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPdXRsaW5lR3JvdXAodHJ1ZWRTaGFwZSkge1xuICAvLyBjb25zb2xlLmxvZygndHJ1ZWRTaGFwZScsIHRydWVkU2hhcGUpO1xuICBsZXQgb3V0ZXJQYXRoID0gbmV3IFBhdGgoKTtcbiAgb3V0ZXJQYXRoLm5hbWUgPSAnb3V0ZXInO1xuICBvdXRlclBhdGgudmlzaWJsZSA9IHRydWU7XG5cbiAgbGV0IG1pZGRsZVBhdGggPSBuZXcgUGF0aCgpO1xuICBtaWRkbGVQYXRoLm5hbWUgPSAnbWlkZGxlJztcbiAgbGV0IHNpemVzID0gW107XG4gIGxldCBhbmdsZSA9IG51bGwsIGxhc3RBbmdsZSA9IG51bGwsIGFuZ2xlRGVsdGE7XG5cbiAgbGV0IGZpcnN0VG9wID0gbnVsbCwgZmlyc3RCb3R0b20gPSBudWxsO1xuICBsZXQgbGFzdFRvcCA9IG51bGwsIGxhc3RCb3R0b20gPSBudWxsO1xuXG4gIGlmICghKHRydWVkU2hhcGUubGVuZ3RoID4gMCkpIHJldHVybiBuZXcgR3JvdXAob3V0ZXJQYXRoLCBtaWRkbGVQYXRoKTtcblxuICBtaWRkbGVQYXRoLmFkZCh0cnVlZFNoYXBlLmZpcnN0U2VnbWVudC5wb2ludCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cnVlZFNoYXBlLmxlbmd0aDsgaSArPSAxMCkge1xuICAgIHdoaWxlIChzaXplcy5sZW5ndGggPiAxMCkge1xuICAgICAgc2l6ZXMuc2hpZnQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaXplID0gTWF0aC5yYW5kb20oKSAqIDk7IC8vIFRoaXMgaXMganVzdCByYW5kb20gdmFyaWFuY2VcbiAgICBzaXplcy5wdXNoKHNpemUpO1xuXG4gICAgbGV0IGN1bVNpemUgPSAwO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGN1bVNpemUgKz0gc2l6ZXNbal07XG4gICAgfVxuICAgIGxldCBhdmdTaXplID0gTWF0aC5tYXgoNSwgKChjdW1TaXplIC8gc2l6ZXMubGVuZ3RoKSArIHNpemUpIC8gMik7XG5cbiAgICBjb25zdCBwb2ludCA9IHRydWVkU2hhcGUuZ2V0UG9pbnRBdChpKTtcbiAgICBjb25zdCBub3JtYWwgPSB0cnVlZFNoYXBlLmdldE5vcm1hbEF0KGkpO1xuXG4gICAgY29uc3QgdG9wID0gbmV3IFBvaW50KHBvaW50LnggKyBub3JtYWwueCAqIGF2Z1NpemUsIHBvaW50LnkgKyBub3JtYWwueSAqIGF2Z1NpemUpO1xuICAgIGNvbnN0IGJvdHRvbSA9IG5ldyBQb2ludChwb2ludC54IC0gbm9ybWFsLnggKiBhdmdTaXplLCBwb2ludC55IC0gbm9ybWFsLnkgKiBhdmdTaXplKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCdwb2ludCcsIHBvaW50LCAnbm9ybWFsJywgbm9ybWFsKTtcbiAgICAvLyBjb25zb2xlLmxvZygndG9wJywgdG9wLCAnYm90dG9tJywgYm90dG9tKTtcblxuICAgIG91dGVyUGF0aC5hZGQodG9wKTtcbiAgICBvdXRlclBhdGguaW5zZXJ0KDAsIGJvdHRvbSk7XG4gICAgbWlkZGxlUGF0aC5hZGQocG9pbnQpO1xuXG4gICAgbGFzdEFuZ2xlID0gYW5nbGU7XG5cbiAgICBpZiAoaSA9PSAxMCkge1xuICAgICAgZmlyc3RUb3AgPSB0b3A7XG4gICAgICBmaXJzdEJvdHRvbSA9IGJvdHRvbTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdFRvcCA9IHRvcDtcbiAgICAgIGxhc3RCb3R0b20gPSBib3R0b207XG4gICAgfVxuICB9XG5cbiAgaWYgKHRydWVkU2hhcGUuY2xvc2VkID09PSB0cnVlKSB7XG4gICAgY29uc3QgY2VudGVyVG9wID0gbmV3IFBvaW50KChmaXJzdFRvcC54ICsgbGFzdFRvcC54KSAvIDIsIChmaXJzdFRvcC55ICsgbGFzdFRvcC55KSAvIDIpO1xuICAgIGNvbnN0IGNlbnRlckJvdHRvbSA9IG5ldyBQb2ludCgoZmlyc3RCb3R0b20ueCArIGxhc3RCb3R0b20ueCkgLyAyLCAoZmlyc3RCb3R0b20ueSArIGxhc3RCb3R0b20ueSkgLyAyKTtcbiAgICBjb25zdCBjZW50ZXIgPSBuZXcgUG9pbnQoKGNlbnRlclRvcC54ICsgY2VudGVyQm90dG9tLngpIC8gMiwgKGNlbnRlclRvcC55ICsgY2VudGVyQm90dG9tLnkpIC8gMik7XG5cbiAgICBvdXRlclBhdGguYWRkKGNlbnRlclRvcCk7XG4gICAgb3V0ZXJQYXRoLmluc2VydCgwLCBjZW50ZXJCb3R0b20pO1xuICAgIG1pZGRsZVBhdGguYWRkKGNlbnRlcik7XG5cbiAgICBvdXRlclBhdGguYWRkKGZpcnN0VG9wKTtcbiAgICBvdXRlclBhdGguaW5zZXJ0KDAsIGZpcnN0Qm90dG9tKTtcbiAgICBtaWRkbGVQYXRoLmNsb3NlZCA9IHRydWU7XG4gIH1cblxuICBvdXRlclBhdGguZmxhdHRlbig1MCk7XG4gIG1pZGRsZVBhdGguZmxhdHRlbig1MCk7XG4gIG91dGVyUGF0aC5zaW1wbGlmeSgpO1xuICBtaWRkbGVQYXRoLnNpbXBsaWZ5KCk7XG5cbiAgb3V0ZXJQYXRoLnNlbGVjdGVkID0gZmFsc2U7XG4gIC8vIG1pZGRsZVBhdGguc2VsZWN0ZWQgPSB0cnVlO1xuICBvdXRlclBhdGgubmFtZSA9ICdvdXRlcic7XG4gIG1pZGRsZVBhdGgubmFtZSA9ICdtaWRkbGUnO1xuICBjb25zdCByZXR1cm5Hcm91cCA9IG5ldyBHcm91cChvdXRlclBhdGgsIG1pZGRsZVBhdGgpO1xuICByZXR1cm4gcmV0dXJuR3JvdXA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcnVlZFNoYXBlKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgLy8gY29uc29sZS5sb2coJ3BhdGhDbG9uZScsIHBhdGhDbG9uZSk7XG4gIGxldCBjb21wbGV0ZWRQYXRoID0gZ2V0Q29tcGxldGVkUGF0aChwYXRoQ2xvbmUpO1xuICAvLyBjb21wbGV0ZWRQYXRoLnJlZHVjZSgpO1xuXG4gIC8vIHRydWUgdGhlIHBhdGghXG4gIGxldCB0cnVlZFBhdGggPSBjb21wbGV0ZWRQYXRoO1xuICAvLyBjb25zb2xlLmxvZygndHJ1ZWRQYXRoJywgdHJ1ZWRQYXRoKTtcblxuICB0cnVlZFBhdGguc3Ryb2tlV2lkdGggPSBwYXRoQ2xvbmUuc3Ryb2tlV2lkdGg7XG5cbiAgcGF0aENsb25lLnJlbW92ZSgpO1xuICByZXR1cm4gdHJ1ZWRQYXRoO1xufVxuXG4vLyBleHRlbmQgb3IgdHJpbSBwYXRoIGlmIHRoZSBlbmRzIGFyZSBjbG9zZVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBsZXRlZFBhdGgocGF0aCkge1xuICBsZXQgcGF0aENsb25lID0gcGF0aC5jbG9uZSgpO1xuICBwYXRoQ2xvbmUudmlzaWJsZSA9IGZhbHNlO1xuICBwYXRoQ2xvbmUucmVkdWNlKCk7XG4gIHBhdGhDbG9uZS5zaW1wbGlmeSgpO1xuXG4gIGxldCBpbnRlcnNlY3Rpb25zID0gcGF0aENsb25lLmdldEludGVyc2VjdGlvbnMoKTtcblxuICBpZiAoaW50ZXJzZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgLy8gdHJpbSBwYXRoIGlmIGVuZHMgYXJlIGNsb3NlXG4gICAgbGV0IHRyaW1tZWRQYXRoID0gZ2V0VHJpbW1lZFBhdGgocGF0aENsb25lKTtcblxuICAgIHBhdGhDbG9uZS5yZW1vdmUoKTtcblxuICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgfSBlbHNlIHtcbiAgICAvLyBleHRlbmQgcGF0aCB0byBzZWUgaWYgYW4gaW50ZXJzZWN0aW9uIGlzIG5lYXJcbiAgICBsZXQgZXh0ZW5kZWRQYXRoID0gZ2V0RXh0ZW5kZWRQYXRoKHBhdGhDbG9uZSk7XG4gICAgbGV0IGludGVyc2VjdGlvbnMgPSBleHRlbmRlZFBhdGguZ2V0SW50ZXJzZWN0aW9ucygpO1xuXG4gICAgLy8gcGF0aENsb25lLnJlbW92ZSgpO1xuXG4gICAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gdHJpbSBleHRyYSBleHRlbmRlZCBwYXRoXG4gICAgICBsZXQgdHJpbW1lZFBhdGggPSBnZXRUcmltbWVkUGF0aChleHRlbmRlZFBhdGgpO1xuICAgICAgZXh0ZW5kZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIHRyaW1tZWRQYXRoO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBleHRlbmRlZCBwYXRoIGRvZXMgbm90IGludGVyc2VjdCwgcmV0dXJuIHRoZSBvcmlnaW5hbCBwYXRoXG4gICAgICBleHRlbmRlZFBhdGgucmVwbGFjZVdpdGgoZ2V0QnJ1dGVFeHRlbmRlZFBhdGgocGF0aENsb25lKSk7XG4gICAgICBpZiAoZXh0ZW5kZWRQYXRoICE9PSBudWxsKSB7XG4gICAgICAgIGxldCBpbnRlcnNlY3Rpb25zID0gZXh0ZW5kZWRQYXRoLmdldEludGVyc2VjdGlvbnMoKTtcblxuICAgICAgICBpZiAoaW50ZXJzZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbGV0IHRyaW1tZWRQYXRoID0gZ2V0VHJpbW1lZFBhdGgoZXh0ZW5kZWRQYXRoKTtcbiAgICAgICAgICBleHRlbmRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgcmV0dXJuIHRyaW1tZWRQYXRoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEhZXh0ZW5kZWRQYXRoICYmIGV4dGVuZGVkUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZXh0ZW5kZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhdGhDbG9uZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHJldHVybiBwYXRoQ2xvbmU7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaGFwZVByZWRpY3Rpb24ocGF0aCkge1xuICBsZXQgcHJlZGljdGlvbiA9IHt9O1xuXG4gIGxldCBzaGFwZUpTT04gPSBwYXRoLmV4cG9ydEpTT04oKTtcbiAgbGV0IHNoYXBlRGF0YSA9IHByb2Nlc3NTaGFwZURhdGEoc2hhcGVKU09OKTtcbiAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoc2hhcGVEYXRhKSk7XG4gIGxldCBzaGFwZVByZWRpY3Rpb24gPSBkZXRlY3Rvci5zcG90KHNoYXBlRGF0YSk7XG5cbiAgaWYgKHNoYXBlUHJlZGljdGlvbi5zY29yZSA9PT0gMCkge1xuICAgIC8vIGFsZ29yaXRobSBkb2Vzbid0IGxpa2UgdmVydGljYWwgbGluZXMgZm9yIHNvbWUgcmVhc29uXG4gICAgLy8gaWYgdGhlIGNlcnRhaW50eSBpcyAwIGl0J3MgcHJvYmFibHkgYSBsaW5lXG4gICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gXCJsaW5lXCI7XG4gICAgcHJlZGljdGlvbi5zY29yZSA9IDAuOTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoc2hhcGVQcmVkaWN0aW9uLnNjb3JlID4gMC41KSB7XG4gICAgICBwcmVkaWN0aW9uLnBhdHRlcm4gPSBzaGFwZVByZWRpY3Rpb24ucGF0dGVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gXCJvdGhlclwiO1xuICAgIH1cbiAgICBwcmVkaWN0aW9uLnNjb3JlID0gc2hhcGVQcmVkaWN0aW9uLnNjb3JlO1xuICB9XG5cbiAgaWYgKHBhdGguY2xvc2VkID09PSB0cnVlKSB7XG4gICAgY29uc3QgY2xvc2VkU2hhcGVzID0gWyd0cmlhbmdsZScsICdzcXVhcmUnLCAnY2lyY2xlJ107XG4gICAgaWYgKGNsb3NlZFNoYXBlcy5pbmNsdWRlcyhwcmVkaWN0aW9uLnBhdHRlcm4pID09PSBmYWxzZSkge1xuICAgICAgLy8gY2xvc2VkIHNoYXBlIHNob3VsZCBiZSBvbmUgb2YgdGhlIGFib3ZlLCBtYWtlIGEgcmFuZG9tIHBpY2tcbiAgICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IHV0aWwucmFuZG9tUGljayhjbG9zZWRTaGFwZXMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChwYXRoLmludGVyc2VjdHMocGF0aCkgPT09IHRydWUpIHtcbiAgICBwcmVkaWN0aW9uLnBhdHRlcm4gPSAnb3RoZXInO1xuICAgIC8vIGNvbnN0IGludGVyc2VjdGluZ1NoYXBlcyA9IFsndHJpYW5nbGUnLCAnc3F1YXJlJywgJ2NpcmNsZScsICdvdGhlciddO1xuICAgIC8vIGlmIChpbnRlcnNlY3RpbmdTaGFwZXMuaW5jbHVkZXMocHJlZGljdGlvbi5wYXR0ZXJuKSA9PT0gZmFsc2UpIHtcbiAgICAvLyAgIHByZWRpY3Rpb24ucGF0dGVybiA9IHV0aWwucmFuZG9tUGljayhpbnRlcnNlY3RpbmdTaGFwZXMpO1xuICAgIC8vIH1cbiAgfSBlbHNlIHtcbiAgICBwcmVkaWN0aW9uLnBhdHRlcm4gPSAnbGluZSc7IC8vIGxpbmVzIGFyZSB0aGUgb25seSBzaGFwZSB0aGF0IGlzIG5vdCBjbG9zZWQgYW5kIGRvZXMgbm90IGludGVyc2VjdFxuICB9XG5cbiAgLy8gY29uc29sZS5sb2coJ3NoYXBlIHByZWRpY3Rpb24nLCBwcmVkaWN0aW9uKTtcblxuICByZXR1cm4gcHJlZGljdGlvbjtcbn1cblxuLy8gZmxvb3JzIHRoZSBjb29yZGluYXRlcyBvZiBhIHBvaW50XG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZWdlclBvaW50KHBvaW50KSB7XG4gIHJldHVybiBuZXcgUG9pbnQoTWF0aC5mbG9vcihwb2ludC54KSwgTWF0aC5mbG9vcihwb2ludC55KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlQb2ludChwb2ludCkge1xuICByZXR1cm4gYCR7TWF0aC5mbG9vcihwb2ludC54KX0sJHtNYXRoLmZsb29yKHBvaW50LnkpfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBvaW50KHBvaW50U3RyKSB7XG4gIGxldCBzcGxpdCA9IHBvaW50U3RyLnNwbGl0KCcsJykubWFwKChudW0pID0+IE1hdGguZmxvb3IobnVtKSk7XG5cbiAgaWYgKHNwbGl0Lmxlbmd0aCA+PSAyKSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludChzcGxpdFswXSwgc3BsaXRbMV0pO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbG9zZXN0UG9pbnRGcm9tUGF0aERhdGEocG9pbnQsIHBhdGhEYXRhKSB7XG4gIGxldCBsZWFzdERpc3RhbmNlLCBjbG9zZXN0UG9pbnQ7XG5cbiAgQmFzZS5lYWNoKHBhdGhEYXRhLCAoZGF0dW0sIGkpID0+IHtcbiAgICBsZXQgZGlzdGFuY2UgPSBwb2ludC5nZXREaXN0YW5jZShkYXR1bS5wb2ludCk7XG4gICAgaWYgKCFsZWFzdERpc3RhbmNlIHx8IGRpc3RhbmNlIDwgbGVhc3REaXN0YW5jZSkge1xuICAgICAgbGVhc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgY2xvc2VzdFBvaW50ID0gZGF0dW0ucG9pbnQ7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gY2xvc2VzdFBvaW50IHx8IHBvaW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc1NoYXBlRGF0YShqc29uKSB7XG4gIGxldCByZXR1cm5TaGFwZSA9IFtdO1xuICBsZXQganNvbk9iaiA9IEpTT04ucGFyc2UoanNvbilbMV07IC8vIHplcm8gaW5kZXggaXMgc3RyaW5naWZpZWQgdHlwZSAoZS5nLiBcIlBhdGhcIilcblxuICBpZiAoJ3NlZ21lbnRzJyBpbiBqc29uT2JqKSB7XG4gICAgbGV0IHNlZ21lbnRzID0ganNvbk9iai5zZWdtZW50cztcbiAgICBCYXNlLmVhY2goc2VnbWVudHMsIChzZWdtZW50LCBpKSA9PiB7XG4gICAgICBpZiAoc2VnbWVudC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgbGV0IHBvc2l0aW9uSW5mbyA9IHNlZ21lbnRbMF07IC8vIGluZGV4ZXMgMSBhbmQgMiBhcmUgc3VwZXJmbHVvdXMgbWF0cml4IGRldGFpbHNcbiAgICAgICAgcmV0dXJuU2hhcGUucHVzaCh7XG4gICAgICAgICAgeDogcG9zaXRpb25JbmZvWzBdLFxuICAgICAgICAgIHk6IHBvc2l0aW9uSW5mb1sxXVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuU2hhcGUucHVzaCh7XG4gICAgICAgICAgeDogc2VnbWVudFswXSxcbiAgICAgICAgICB5OiBzZWdtZW50WzFdXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmV0dXJuU2hhcGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW50ZXJpb3JDdXJ2ZXMocGF0aCkge1xuICBjb25zdCB0cmFuc3BhcmVudCA9IGNvbG9yLnRyYW5zcGFyZW50O1xuXG4gIGxldCBpbnRlcmlvckN1cnZlcyA9IFtdO1xuXG4gIGxldCBwYXRoQ2xvbmUgPSBwYXRoLmNsb25lKCk7XG4gIGxldCBpbnRlcnNlY3Rpb25zID0gcGF0aENsb25lLmdldEludGVyc2VjdGlvbnMoKTtcblxuICBpZiAoaW50ZXJzZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgbGV0IGRpdmlkZWRQYXRoID0gcGF0aENsb25lLnJlc29sdmVDcm9zc2luZ3MoKTtcbiAgICAvLyBjb25zb2xlLmxvZyhkaXZpZGVkUGF0aCk7XG5cbiAgICBpZiAoZGl2aWRlZFBhdGguY2xhc3NOYW1lID09PSAnQ29tcG91bmRQYXRoJykge1xuICAgICAgQmFzZS5lYWNoKGRpdmlkZWRQYXRoLmNoaWxkcmVuLCAoY2hpbGQsIGkpID0+IHtcbiAgICAgICAgaWYgKGNoaWxkLmxlbmd0aCA+IDAgJiYgY2hpbGQuY2xvc2VkKSB7XG4gICAgICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IGNoaWxkLmNsb25lKCk7XG4gICAgICAgICAgaWYgKHBhdGhDbG9uZS5jbG9zZWQpIHtcbiAgICAgICAgICAgIGVuY2xvc2VkTG9vcC5maWxsQ29sb3IgPSBwYXRoQ2xvbmUuc3Ryb2tlQ29sb3I7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS5pbnRlcmlvciA9IHRydWU7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS50cmFuc3BhcmVudCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZmlsbENvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS50cmFuc3BhcmVudCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgICAgICBlbmNsb3NlZExvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgZW5jbG9zZWRMb29wLmNsb3NlZCA9IHRydWU7XG4gICAgICAgICAgaW50ZXJpb3JDdXJ2ZXMucHVzaChlbmNsb3NlZExvb3ApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGF0aENsb25lLmNsb3NlZCkge1xuICAgICAgICBsZXQgZW5jbG9zZWRMb29wID0gcGF0aENsb25lLmNsb25lKCk7XG4gICAgICAgIGVuY2xvc2VkTG9vcC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHBhdGhDbG9uZS5zdHJva2VDb2xvcjtcbiAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEuaW50ZXJpb3IgPSB0cnVlO1xuICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS50cmFuc3BhcmVudCA9IGZhbHNlO1xuICAgICAgICBpbnRlcmlvckN1cnZlcy5wdXNoKGVuY2xvc2VkTG9vcCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChwYXRoQ2xvbmUuY2xvc2VkKSB7XG4gICAgICBsZXQgZW5jbG9zZWRMb29wID0gcGF0aENsb25lLmNsb25lKCk7XG4gICAgICBlbmNsb3NlZExvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICBlbmNsb3NlZExvb3AuZmlsbENvbG9yID0gcGF0aENsb25lLnN0cm9rZUNvbG9yO1xuICAgICAgZW5jbG9zZWRMb29wLmRhdGEuaW50ZXJpb3IgPSB0cnVlO1xuICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgIGludGVyaW9yQ3VydmVzLnB1c2goZW5jbG9zZWRMb29wKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW50ZXJpb3JDdXJ2ZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRlbmRlZFBhdGgocGF0aCwgYnJ1dGVGb3JjZSA9IGZhbHNlKSB7XG4gIGxldCBleHRlbmRlZFBhdGggPSBwYXRoLmNsb25lKCk7XG4gIGV4dGVuZGVkUGF0aC52aXNpYmxlID0gZmFsc2U7XG5cbiAgY29uc3QgdGhyZXNob2xkRGlzdCA9IHRocmVzaG9sZERpc3RNdWx0aXBsaWVyICogZXh0ZW5kZWRQYXRoLmxlbmd0aDtcblxuICBjb25zdCBmaXJzdFNlZ21lbnQgPSBleHRlbmRlZFBhdGguZmlyc3RTZWdtZW50O1xuICBjb25zdCBuZXh0U2VnbWVudCA9IGZpcnN0U2VnbWVudC5uZXh0O1xuICBjb25zdCBzdGFydEFuZ2xlID0gTWF0aC5hdGFuMihuZXh0U2VnbWVudC5wb2ludC55IC0gZmlyc3RTZWdtZW50LnBvaW50LnksIG5leHRTZWdtZW50LnBvaW50LnggLSBmaXJzdFNlZ21lbnQucG9pbnQueCk7IC8vIHJhZFxuICBjb25zdCBpbnZlcnNlU3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGUgKyBNYXRoLlBJO1xuICBjb25zdCBleHRlbmRlZFN0YXJ0UG9pbnQgPSBuZXcgUG9pbnQoZmlyc3RTZWdtZW50LnBvaW50LnggKyAoTWF0aC5jb3MoaW52ZXJzZVN0YXJ0QW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpLCBmaXJzdFNlZ21lbnQucG9pbnQueSArIChNYXRoLnNpbihpbnZlcnNlU3RhcnRBbmdsZSkgKiB0aHJlc2hvbGREaXN0IC8gMikpO1xuICBleHRlbmRlZFBhdGguaW5zZXJ0KDAsIGV4dGVuZGVkU3RhcnRQb2ludCk7XG5cbiAgY29uc3QgbGFzdFNlZ21lbnQgPSBleHRlbmRlZFBhdGgubGFzdFNlZ21lbnQ7XG4gIGNvbnN0IHBlblNlZ21lbnQgPSBsYXN0U2VnbWVudC5wcmV2aW91czsgLy8gcGVudWx0aW1hdGVcbiAgY29uc3QgZW5kQW5nbGUgPSBNYXRoLmF0YW4yKGxhc3RTZWdtZW50LnBvaW50LnkgLSBwZW5TZWdtZW50LnBvaW50LnksIGxhc3RTZWdtZW50LnBvaW50LnggLSBwZW5TZWdtZW50LnBvaW50LngpOyAvLyByYWRcbiAgY29uc3QgZXh0ZW5kZWRFbmRQb2ludCA9IG5ldyBQb2ludChsYXN0U2VnbWVudC5wb2ludC54ICsgKE1hdGguY29zKGVuZEFuZ2xlKSAqIHRocmVzaG9sZERpc3QgLyAyKSwgbGFzdFNlZ21lbnQucG9pbnQueSArIChNYXRoLnNpbihlbmRBbmdsZSkgKiB0aHJlc2hvbGREaXN0IC8gMikpO1xuICBleHRlbmRlZFBhdGguYWRkKGV4dGVuZGVkRW5kUG9pbnQpO1xuXG4gIC8vIGV4dGVuZGVkUGF0aC52aXNpYmxlID0gdHJ1ZTtcblxuICByZXR1cm4gZXh0ZW5kZWRQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJ1dGVFeHRlbmRlZFBhdGgocGF0aCkge1xuICBsZXQgZXh0ZW5kZWRQYXRoID0gcGF0aC5jbG9uZSgpO1xuICBleHRlbmRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuXG4gIGNvbnN0IHRocmVzaG9sZERpc3QgPSB0aHJlc2hvbGREaXN0TXVsdGlwbGllciAqIGV4dGVuZGVkUGF0aC5sZW5ndGg7XG4gIGNvbnN0IGZpcnN0UG9pbnQgPSBleHRlbmRlZFBhdGguZmlyc3RTZWdtZW50LnBvaW50O1xuICBjb25zdCBsYXN0UG9pbnQgPSBleHRlbmRlZFBhdGgubGFzdFNlZ21lbnQucG9pbnQ7XG5cbiAgaWYgKGZpcnN0UG9pbnQuZ2V0RGlzdGFuY2UobGFzdFBvaW50KSA8IHRocmVzaG9sZERpc3QpIHtcbiAgICBleHRlbmRlZFBhdGguaW5zZXJ0KDAsIGxhc3RQb2ludCk7XG4gICAgZXh0ZW5kZWRQYXRoLmFkZChmaXJzdFBvaW50KTtcbiAgICBleHRlbmRlZFBhdGguY2xvc2VkID0gdHJ1ZTtcbiAgICBleHRlbmRlZFBhdGgudW5pdGUoKTtcbiAgICBsZXQgY3Jvc3NpbmdzID0gZXh0ZW5kZWRQYXRoLnJlc29sdmVDcm9zc2luZ3MoKTtcbiAgICBpZiAoISFjcm9zc2luZ3MgJiYgISFjcm9zc2luZ3MuY2hpbGRyZW4gJiYgY3Jvc3NpbmdzLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBtYXhBcmVhID0gMCwgbWF4Q2hpbGQgPSBudWxsO1xuICAgICAgY3Jvc3NpbmdzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgIGlmIChjaGlsZC5hcmVhID4gbWF4QXJlYSkge1xuICAgICAgICAgIG1heENoaWxkID0gY2hpbGQ7XG4gICAgICAgICAgbWF4QXJlYSA9IGNoaWxkLmFyZWE7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBleHRlbmRlZFBhdGggPSBtYXhDaGlsZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZXh0ZW5kZWRQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJpbW1lZFBhdGgocGF0aCkge1xuICBsZXQgcGF0aENsb25lID0gcGF0aC5jbG9uZSgpO1xuICBwYXRoQ2xvbmUudmlzaWJsZSA9IGZhbHNlO1xuXG4gIGxldCBmaXJzdFBvaW50ID0gcGF0aENsb25lLmZpcnN0U2VnbWVudC5wb2ludDtcbiAgbGV0IGxhc3RQb2ludCA9IHBhdGhDbG9uZS5sYXN0U2VnbWVudC5wb2ludDtcbiAgbGV0IHRocmVzaG9sZERpc3QgPSB0aHJlc2hvbGREaXN0TXVsdGlwbGllciAqIHBhdGhDbG9uZS5sZW5ndGg7XG5cbiAgbGV0IGludGVyc2VjdGlvbnMgPSBwYXRoQ2xvbmUuZ2V0SW50ZXJzZWN0aW9ucygpO1xuICBpbnRlcnNlY3Rpb25zLmZvckVhY2goKGludGVyc2VjdGlvbiwgaSkgPT4ge1xuICAgIGlmIChpbnRlcnNlY3Rpb24ub2Zmc2V0ID09PSAwKSB7XG4gICAgICBpbnRlcnNlY3Rpb25zLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGNvbnNvbGUubG9nKCdpbnRlcnNlY3Rpb25zJywgaW50ZXJzZWN0aW9ucyk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID09IDEpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGludGVyc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpbnRlcnNlY3Rpb25Qb2ludCA9IGludGVyc2VjdGlvbnNbaV0ucG9pbnQ7XG5cbiAgICAgIC8vIGlmIHRoZSBhdmVyYWdlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBmaXJzdCBhbmQgbGFzdCBwb2ludHMgYW5kIHRoZSBpbnRlcnNlY3Rpb24gcG9pbnQgaXMgd2l0aGluIHRoZSB0aHJlc2hvbGQsIHRyaW1cbiAgICAgIGlmIChmaXJzdFBvaW50LmdldERpc3RhbmNlKGludGVyc2VjdGlvblBvaW50KSArIGxhc3RQb2ludC5nZXREaXN0YW5jZShpbnRlcnNlY3Rpb25Qb2ludCkgPCAyICogdGhyZXNob2xkRGlzdCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygndHJpbW1pbmcgcGF0aCcpO1xuICAgICAgICBsZXQgZGl2aWRlZFBhdGggPSBwYXRoQ2xvbmUuY2xvbmUoKTsgLy8gcmVzb2x2ZSBjcm9zc2luZ3Mgc2VlbXMgdG8gbW9kaWZ5IHRoZSBwYXRoIGl0IHdhcyBwYXNzZWQsIHNvIG1ha2UgYW4gZXh0cmEgY2xvbmUgdG8gYmUgc2FmZVxuICAgICAgICBkaXZpZGVkUGF0aC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIGxldCBwYXRoQ3Jvc3NpbmdzID0gZGl2aWRlZFBhdGgucmVzb2x2ZUNyb3NzaW5ncygpO1xuXG4gICAgICAgIGlmIChwYXRoQ3Jvc3NpbmdzLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcgJiYgcGF0aENyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXRoQ3Jvc3NpbmdzLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBwYXRoQ3Jvc3NpbmdzLmNoaWxkcmVuW2pdO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmNsb3NlZCkge1xuICAgICAgICAgICAgICAvLyBjaGlsZC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgIGRpdmlkZWRQYXRoID0gZGl2aWRlZFBhdGguc3VidHJhY3QoY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRpdmlkZWRQYXRoLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICBsZXQgdHJpbW1lZFBhdGggPSBwYXRoQ2xvbmUuc3VidHJhY3QoZGl2aWRlZFBhdGgpO1xuICAgICAgICBpZiAodHJpbW1lZFBhdGgubGVuZ3RoID09PSAwKSByZXR1cm4gcGF0aENsb25lO1xuICAgICAgICBpZiAodHJpbW1lZFBhdGguY2xhc3NOYW1lID09PSAnQ29tcG91bmRQYXRoJyAmJiB0cmltbWVkUGF0aC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbGV0IGNsb3NlZENoaWxkcmVuID0gW107XG4gICAgICAgICAgdHJpbW1lZFBhdGguY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGkpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGlsZC5sZW5ndGggPiAwICYmIGNoaWxkLmNsb3NlZCkge1xuICAgICAgICAgICAgICBsZXQgY2hpbGRDbG9uZSA9IGNoaWxkLmNsb25lKCk7XG4gICAgICAgICAgICAgIGNoaWxkQ2xvbmUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICBjbG9zZWRDaGlsZHJlbi5wdXNoKGNoaWxkQ2xvbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGNsb3NlZENoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChjbG9zZWRDaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIC8vIGZvciBzb21lIHJlYXNvbiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBjbG9zZWQgY2hpbGRyZW4sIG1lcmdlIHRoZW1cbiAgICAgICAgICAgICAgbGV0IGFjY3VtdWxhdG9yID0gY2xvc2VkQ2hpbGRyZW5bMF07XG5cbiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBjbG9zZWRDaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3IudW5pdGUoY2xvc2VkQ2hpbGRyZW5bal0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGFjY3VtdWxhdG9yLmxlbmd0aCA+IDAgJiYgYWNjdW11bGF0b3IuY2xhc3NOYW1lID09PSAnUGF0aCcpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndHJpbW1lZCBhY2N1bXVsYXRvcicsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3UGF0aCA9IG5ldyBQYXRoKCk7XG4gICAgICAgICAgICAgICAgbmV3UGF0aC5jb3B5Q29udGVudChhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgbmV3UGF0aC5jb3B5QXR0cmlidXRlcyhwYXRoQ2xvbmUpO1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHBhdGhDbG9uZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBkaXZpZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0cmltbWVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3UGF0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICBkaXZpZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRyaW1tZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1tZWQgY2xvc2VkQ2hpbGRyZW5bMF0nLCBjbG9zZWRDaGlsZHJlblswXSk7XG4gICAgICAgICAgICByZXR1cm4gY2xvc2VkQ2hpbGRyZW5bMF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1tZWQgcGF0aCByZXR1cm4nLCB0cmltbWVkUGF0aCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXRoIGNsb25lJywgcGF0aENsb25lKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2RpdmlkZWRQYXRoJywgZGl2aWRlZFBhdGgpO1xuICAgICAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG4gICAgICAgIGRpdmlkZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm4gdHJpbW1lZFBhdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbm8gY2xvc2UgaW50ZXJzZWN0aW9uIHdlcmUgZm91bmQgc28gbm90aGluZyBjYW4gYmUgdHJpbW1lZFxuICAgIHJldHVybiBwYXRoQ2xvbmU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gaGl0VGVzdEdyb3VwQm91bmRzKHBvaW50KSB7XG4gIGxldCBncm91cHMgPSB1dGlsLmdldFZpc2libGVHcm91cHMoKTtcbiAgcmV0dXJuIGhpdFRlc3RCb3VuZHMocG9pbnQsIGdyb3Vwcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaXRUZXN0Qm91bmRzKHBvaW50LCBjaGlsZHJlbikge1xuICBpZiAoIXBvaW50KSByZXR1cm4gbnVsbDtcblxuICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICBsZXQgYm91bmRzID0gY2hpbGQuc3Ryb2tlQm91bmRzO1xuICAgIGlmIChwb2ludC5pc0luc2lkZShjaGlsZC5zdHJva2VCb3VuZHMpKSB7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBSZWNvcmRSVEMgPSByZXF1aXJlKCdyZWNvcmRydGMnKTtcblxuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcblxuY29uc3QgZHJhd0NhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5jYW52YXNJZCk7XG5jb25zdCBjYW52YXNSZWNvcmRlciA9IFJlY29yZFJUQyhkcmF3Q2FudmFzLCB7XG4gIHR5cGU6ICdjYW52YXMnLFxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWNvcmQoKSB7XG4gIGxldCByZWMgPSBuZXcgUmVjb3JkZXIoSG93bGVyLm1hc3RlckdhaW4sIHtcbiAgICB3b3JrZXJQYXRoOiAnL2pzL2xpYi9yZWNvcmRlcldvcmtlci5qcydcbiAgfSk7XG5cbiAgY2FudmFzUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAgcmVjLnJlY29yZCgpO1xuXG4gIHNvdW5kLmFzeW5jUGxheUNvbXBvc2l0aW9uT25jZSgpLnRoZW4oKCkgPT4ge1xuICAgIHJlYy5zdG9wKCk7XG4gICAgcmVjLmV4cG9ydFdBVihmdW5jdGlvbihibG9iKSB7XG4gICAgICBkb3dubG9hZChibG9iLCAnYmxvYi53YXYnKTtcbiAgICB9KTtcbiAgICBjYW52YXNSZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJsb2IgPSBjYW52YXNSZWNvcmRlci5nZXRCbG9iKCk7XG4gICAgICBkb3dubG9hZChibG9iLCAnYmxvYi53ZWJtJyk7XG4gICAgfSk7XG4gIH0pLmVycm9yKChlKSA9PiB7XG4gICAgcmVjLnN0b3AoKTtcbiAgICByZWMuZXhwb3J0V0FWKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgIGRvd25sb2FkKGJsb2IsICdibG9iLndhdicpO1xuICAgIH0pO1xuICAgIGNhbnZhc1JlY29yZGVyLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmxvYiA9IGNhbnZhc1JlY29yZGVyLmdldEJsb2IoKTtcbiAgICAgIGRvd25sb2FkKGJsb2IsICdibG9iLndlYm0nKTtcbiAgICB9KTtcbiAgfSk7XG59XG4iLCJyZXF1aXJlKCdob3dsZXInKTtcbmNvbnN0IFByb21pc2UgPSByZXF1aXJlKFwiYmx1ZWJpcmRcIik7XG5cbmNvbnN0IHVpID0gcmVxdWlyZSgnLi91aScpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbmNvbnN0IG92ZXJsYXlzID0gcmVxdWlyZSgnLi9vdmVybGF5cycpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuXG5jb25zdCBtZWFzdXJlcyA9IDQ7XG5jb25zdCBicG0gPSAxMjA7XG5jb25zdCBiZWF0TGVuZ3RoID0gKDYwIC8gYnBtKSAqIDEwMDA7IC8vIG1zXG5jb25zdCBtZWFzdXJlTGVuZ3RoID0gYmVhdExlbmd0aCAqIDQ7XG5leHBvcnQgY29uc3QgY29tcG9zaXRpb25MZW5ndGggPSBtZWFzdXJlTGVuZ3RoICogbWVhc3VyZXM7XG5cbmV4cG9ydCBjb25zdCBwbGF5aW5nQ2xhc3MgPSAncGxheWluZyc7XG5leHBvcnQgY29uc3QgcGxheUVuYWJsZWRDbGFzcyA9ICdwbGF5LWVuYWJsZWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgcmV0dXJuIGFzeW5jSW5pdFNoYXBlU291bmRzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWluaXRTaGFwZVNvdW5kcygpIHtcbiAgcmV0dXJuIGFzeW5jSW5pdFNoYXBlU291bmRzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaGFwZVNvdW5kT2JqKHBhdGgpIHtcbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBjb25zdCBzaGFwZVNvdW5kcyA9IHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMgfHwgaW5pdFNoYXBlU291bmRzKCk7XG4gIC8vIGFsZXJ0KEpTT04uc3RyaW5naWZ5KHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMpKTtcbiAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkod2luZG93Lmthbi5zaGFwZVNvdW5kcykpO1xuXG4gIGxldCBzaGFwZVByZWRpY3Rpb24gPSBzaGFwZS5nZXRTaGFwZVByZWRpY3Rpb24ocGF0aCk7XG4gIGxldCBjb2xvck5hbWUgPSBjb2xvci5nZXRQYXRoQ29sb3JOYW1lKHBhdGgpO1xuICBpZiAoY29sb3JOYW1lID09PSBudWxsKSBjb2xvck5hbWUgPSAnYmxhY2snOyAvLyBqdXN0IGluIGNhc2VcblxuICBjb25zdCBxdWFudGl6ZWRTb3VuZFN0YXJ0VGltZSA9IHF1YW50aXplTGVuZ3RoKHBhdGguYm91bmRzLnggLyB2aWV3V2lkdGggKiBjb21wb3NpdGlvbkxlbmd0aCk7IC8vIG1zXG4gIGNvbnN0IHF1YW50aXplZFNvdW5kRHVyYXRpb24gPSBxdWFudGl6ZUxlbmd0aChwYXRoLmJvdW5kcy53aWR0aCAvIHZpZXdXaWR0aCAqIGNvbXBvc2l0aW9uTGVuZ3RoKTsgLy8gbXNcblxuICBsZXQgc291bmRPYmogPSB7fTtcbiAgc291bmRPYmouc291bmQgPSBzaGFwZVNvdW5kc1tzaGFwZVByZWRpY3Rpb24ucGF0dGVybl07XG4gIHNvdW5kT2JqLnN0YXJ0VGltZSA9IHF1YW50aXplZFNvdW5kU3RhcnRUaW1lO1xuICBzb3VuZE9iai5kdXJhdGlvbiA9IHF1YW50aXplZFNvdW5kRHVyYXRpb247XG4gIHNvdW5kT2JqLnBhdGhJZCA9IHBhdGguaWQ7XG4gIHNvdW5kT2JqLnNwcml0ZU5hbWUgPSBjb2xvck5hbWU7XG4gIHNvdW5kT2JqLmdyb3VwSWQgPSBwYXRoLnBhcmVudC5pZDtcbiAgc291bmRPYmoucGxheSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHNvdW5kT2JqLnNvdW5kLnBsYXkoc291bmRPYmouc3ByaXRlTmFtZSk7XG4gICAgICBzb3VuZE9iai5zb3VuZC5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUoYEdyb3VwICR7c291bmRPYmouZ3JvdXBJZH0gZG9uZSBwbGF5aW5nIHNvdW5kYCk7XG4gICAgICB9KTtcbiAgICAgIHNvdW5kT2JqLnNvdW5kLm9uKCdsb2FkZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGBHcm91cCAke3NvdW5kT2JqLmdyb3VwSWR9IGZhaWxlZCB0byBsb2FkIHNvdW5kYCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cblxuICByZXR1cm4gc291bmRPYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydFBsYXlpbmcoKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdmaXJzdCB0aW1lJywgd2luZG93Lmthbi5maXJzdFRpbWVQbGF5aW5nKTtcbiAgaWYgKCRib2R5Lmhhc0NsYXNzKHBsYXlFbmFibGVkQ2xhc3MpKSB7XG4gICAgJGJvZHkuYWRkQ2xhc3MocGxheWluZ0NsYXNzKTtcblxuICAgIEhvd2xlci5tdXRlKGZhbHNlKTtcblxuICAgIHdpbmRvdy5rYW4ucGxheWluZyA9IHRydWU7XG5cbiAgICBpZiAod2luZG93Lmthbi5maXJzdFRpbWVQbGF5aW5nID09PSB0cnVlKSB7XG4gICAgICB3aW5kb3cua2FuLmZpcnN0VGltZVBsYXlpbmcgPSBmYWxzZTtcbiAgICAgIHN0YXJ0Q29tcG9zaXRpb24od2luZG93Lmthbi5jb21wb3NpdGlvbiwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGFydENvbXBvc2l0aW9uKHdpbmRvdy5rYW4uY29tcG9zaXRpb24sIHRydWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cua2FuLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAkYm9keS5yZW1vdmVDbGFzcyhwbGF5aW5nQ2xhc3MpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wUGxheWluZyhtdXRlID0gZmFsc2UpIHtcbiAgaWYgKCEhbXV0ZSkge1xuICAgIEhvd2xlci5tdXRlKHRydWUpO1xuICB9XG5cbiAgd2luZG93Lmthbi5wbGF5aW5nID0gZmFsc2U7XG4gICRib2R5LnJlbW92ZUNsYXNzKHBsYXlpbmdDbGFzcyk7XG5cbiAgc3RvcENvbXBvc2l0aW9uKCk7XG59XG5cbmZ1bmN0aW9uIGFzeW5jR2V0U2hhcGVTb3VuZEZyb21TaGFwZU5hbWUoc2hhcGVOYW1lKSB7XG4gIGNvbnN0IHNoYXBlU291bmRKU09OUGF0aCA9IGAuL2F1ZGlvL3NoYXBlcy8ke3NoYXBlTmFtZX0vJHtzaGFwZU5hbWV9Lmpzb25gO1xuICByZXR1cm4gJC5nZXRKU09OKHNoYXBlU291bmRKU09OUGF0aCkudGhlbigocmVzcCkgPT4ge1xuICAgIGNvbnN0IHNoYXBlU291bmREYXRhID0gZm9ybWF0U2hhcGVTb3VuZERhdGEoc2hhcGVOYW1lLCByZXNwKTtcbiAgICBjb25zdCBzb3VuZCA9IG5ldyBIb3dsKHNoYXBlU291bmREYXRhKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2hhcGVOYW1lOiBzaGFwZU5hbWUsXG4gICAgICBzb3VuZDogc291bmRcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXN5bmNJbml0U2hhcGVTb3VuZHMoKSB7XG4gIGxldCByZXR1cm5Tb3VuZHMgPSB7fTtcbiAgY29uc3QgZXh0ZW5zaW9ucyA9IFsnb2dnJywgJ200YScsICdtcDMnLCAnYWMzJ107XG5cbiAgY29uc3Qgc2hhcGVOYW1lcyA9IHNoYXBlLnNoYXBlTmFtZXM7XG4gIGxldCBwcm9taXNlcyA9IFtdO1xuICBCYXNlLmVhY2goc2hhcGVOYW1lcywgKHNoYXBlTmFtZSkgPT4ge1xuICAgIHByb21pc2VzLnB1c2goYXN5bmNHZXRTaGFwZVNvdW5kRnJvbVNoYXBlTmFtZShzaGFwZU5hbWUpKTtcbiAgfSk7XG5cbiAgcmV0dXJuICQud2hlbi5hcHBseSgkLCBwcm9taXNlcykuZG9uZShmdW5jdGlvbigpIHtcbiAgICBsZXQgcmV0dXJuU291bmRzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgICByZXR1cm5Tb3VuZHNbYXJnLnNoYXBlTmFtZV0gPSBhcmcuc291bmQ7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5zaGFwZVNvdW5kcyA9IHJldHVyblNvdW5kcztcbiAgICByZXR1cm4gcmV0dXJuU291bmRzO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNoYXBlU291bmREYXRhKHNoYXBlTmFtZSwgZGF0YSkge1xuICBsZXQgcmV0dXJuRGF0YSA9IHt9O1xuXG4gIHJldHVybkRhdGEuc3JjID0gZGF0YS51cmxzLm1hcCgodXJsKSA9PiBgLi9hdWRpby9zaGFwZXMvJHtzaGFwZU5hbWV9LyR7dXJsfWApO1xuICByZXR1cm5EYXRhLnNwcml0ZSA9IGRhdGEuc3ByaXRlO1xuICByZXR1cm5EYXRhLmh0bWw1ID0gZmFsc2U7XG4gIHJldHVybkRhdGEubG9vcCA9IGZhbHNlO1xuXG4gIHJldHVybiByZXR1cm5EYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVMZW5ndGgoZHVyYXRpb24pIHtcbiAgY29uc3Qgc21hbGxlc3REdXJhdGlvbiA9ICg2MCAvIGJwbSk7XG4gIGNvbnN0IHJldHVybkR1cmF0aW9uID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIHNtYWxsZXN0RHVyYXRpb24pICogc21hbGxlc3REdXJhdGlvbjtcblxuICBpZiAocmV0dXJuRHVyYXRpb24gPiAwKSB7XG4gICAgcmV0dXJuIHJldHVybkR1cmF0aW9uO1xuICB9IGVsc2Uge1xuICAgIC8vIGFsd2F5cyByZXR1cm4gc29tZXRoaW5nIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgcmV0dXJuIHNtYWxsZXN0RHVyYXRpb247XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplUG9zaXRpb24ocG9zaXRpb24sIHZpZXdXaWR0aCkge1xuICBjb25zdCBzbWFsbGVzdEludGVydmFsID0gdmlld1dpZHRoIC8gKDQgKiBtZWFzdXJlcyk7XG4gIHJldHVybiByZXR1cm5Qb3NpdGlvbiA9IE1hdGguZmxvb3IocG9zaXRpb24gLyBzbWFsbGVzdEludGVydmFsKSAqIHNtYWxsZXN0SW50ZXJ2YWw7XG59XG5cbmZ1bmN0aW9uIGFzeW5jUGxheVNoYXBlKHNoYXBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBQcm9taXNlLmFsbChbYXN5bmNQbGF5U2hhcGVTb3VuZChzaGFwZSksIGFzeW5jUGxheVNoYXBlQW5pbWF0aW9uKHNoYXBlKV0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoYEdyb3VwICR7c2hhcGUuZ3JvdXBJZH0gZnVsbHkgZG9uZSBwbGF5aW5nYCk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKChlKSA9PiB7XG4gICAgICAgIHJlamVjdChgR3JvdXAgJHtzaGFwZS5ncm91cElkfSBlcnJvcmVkIHdoaWxlIHBsYXlpbmc6ICR7ZX1gKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYXN5bmNQbGF5U2hhcGVTb3VuZChzaGFwZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5aW5nOiAnLCBzaGFwZS5zb3VuZCwgc2hhcGUuc3ByaXRlTmFtZSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIHNoYXBlLnBsYXkoKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICByZWplY3QoYEVycm9yIHBsYXlpbmcgc2hhcGUgc291bmQ6ICR7ZX1gKTtcbiAgICB9XG5cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzeW5jUGxheVNoYXBlQW5pbWF0aW9uKHNoYXBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBpdGVtID0gcGFwZXIucHJvamVjdC5nZXRJdGVtKHtcbiAgICAgIGNsYXNzTmFtZTogJ1BhdGgnLFxuICAgICAgbWF0Y2g6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIHJldHVybiAoZWwuaWQgPT09IHNoYXBlLnBhdGhJZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCEhaXRlbSkge1xuICAgICAgbGV0IGdyb3VwID0gaXRlbS5wYXJlbnQ7XG4gICAgICBncm91cC5kYXRhLmFuaW1hdGluZyA9IHRydWU7XG4gICAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gbWVhc3VyZUxlbmd0aCAvIDI7XG4gICAgICBncm91cC5hbmltYXRlKFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgcm90YXRlOiAtNSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBkdXJhdGlvbjogdG90YWxEdXJhdGlvbiAvIDQsXG4gICAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluT3V0XCIsXG4gICAgICAgICAgICAvLyBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdhbmltYXRpb24gc3RlcCAxJylcbiAgICAgICAgICAgIC8vIH0sXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgc2NhbGU6IDEuMTUsXG4gICAgICAgICAgICByb3RhdGU6IDUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgZHVyYXRpb246IHRvdGFsRHVyYXRpb24gLyAyLFxuICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VJbk91dFwiLFxuICAgICAgICAgICAgLy8gY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnYW5pbWF0aW9uIHN0ZXAgMicpXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgcm90YXRlOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0b3RhbER1cmF0aW9uIC8gNCxcbiAgICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5PdXRcIixcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXNvbHZlKGBHcm91cCAke2dyb3VwLmlkfSBkb25lIGFuaW1hdGluZ2ApO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYW5pbWF0aW9uIHN0ZXAgMycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlamVjdCgnSXRlbSBub3Qgc3BlY2lmaWVkLiBDb3VsZCBub3QgYW5pbWF0ZScpO1xuICAgIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVNoYXBlRnJvbUNvbXBvc2l0aW9uKHNoYXBlR3JvdXApIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHNvdW5kID0gd2luZG93Lmthbi5jb21wb3NpdGlvbltpXTtcblxuICAgIGlmICgnZ3JvdXBJZCcgaW4gc291bmQpIHtcbiAgICAgIGlmIChzb3VuZC5ncm91cElkID09PSBzaGFwZUdyb3VwLmlkKSB7XG4gICAgICAgIHdpbmRvdy5rYW4uY29tcG9zaXRpb24uc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgncGF0aElkJyBpbiBzb3VuZCkge1xuICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtcyh7XG4gICAgICAgIG1hdGNoOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5pZCA9PT0gc291bmQucGF0aElkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGl0ZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoISFpdGVtLnBhcmVudCAmJiBpdGVtLnBhcmVudC5jbGFzc05hbWUgPT09ICdHcm91cCcgJiYgaXRlbS5wYXJlbnQuaWQgPT09IHNoYXBlR3JvdXAuaWQpIHtcbiAgICAgICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU291bmRUaW1lb3V0cygpIHtcbiAgaWYgKHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5sZW5ndGggPiAwKSB7XG4gICAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLmZvckVhY2goKHNvdW5kVGltZW91dCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHNvdW5kVGltZW91dCk7XG4gICAgfSk7XG4gIH1cblxuICB3aW5kb3cua2FuLnNvdW5kVGltZW91dHMgPSBbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0Q29tcG9zaXRpb24oY29tcG9zaXRpb24sIGxvb3AgPSBmYWxzZSkge1xuICBzdG9wQ29tcG9zaXRpb24oKTtcbiAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG5cbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQpO1xuXG4gIGxldCBpdGVyYXRpb25zID0gMDtcbiAgcGxheUNvbXBvc2l0aW9uRmlyc3RUaW1lKCk7XG5cbiAgZnVuY3Rpb24gcGxheUNvbXBvc2l0aW9uRmlyc3RUaW1lKCkge1xuICAgIGNsZWFyU291bmRUaW1lb3V0cygpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5aW5nIGNvbXBvc2l0aW9uIGZpcnN0IHRpbWUnKTtcbiAgICBsZXQgdHJpbW1lZENvbXBvc2l0aW9uT2JqID0gZ2V0VHJpbW1lZENvbXBvc2l0aW9uT2JqKGNvbXBvc2l0aW9uKTtcblxuICAgIEJhc2UuZWFjaCh0cmltbWVkQ29tcG9zaXRpb25PYmouY29tcG9zaXRpb24sIChzaGFwZSwgaSkgPT4ge1xuICAgICAgbGV0IHNvdW5kVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXdpbmRvdy5rYW4ucGxheWluZykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3QgcGxheWluZywgcmV0dXJuaW5nJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYXBlLnNwcml0ZU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnJWNzaGFwZSBpcyBudWxsJywgJ2NvbG9yOnJlZCcsIHNoYXBlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhc3luY1BsYXlTaGFwZShzaGFwZSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgfSkuZXJyb3IoKGUpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgcGxheWluZyBzaGFwZScsIGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICB3aW5kb3cua2FuLnNvdW5kVGltZW91dHMucHVzaChzb3VuZFRpbWVvdXQpO1xuICAgIH0pO1xuXG4gICAgaXRlcmF0aW9ucysrO1xuICAgIHdpbmRvdy5rYW4uY29tcG9zaXRpb25UaW1lb3V0ID0gc2V0VGltZW91dChyZXBlYXRDb21wb3NpdGlvbiwgY29tcG9zaXRpb25MZW5ndGggLSB0cmltbWVkQ29tcG9zaXRpb25PYmouc3RhcnRUaW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXlDb21wb3NpdGlvbk9uY2UoKSB7XG4gICAgY2xlYXJTb3VuZFRpbWVvdXRzKCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3JlcGVhdCcpO1xuICAgIEJhc2UuZWFjaChjb21wb3NpdGlvbiwgKHNoYXBlLCBpKSA9PiB7XG4gICAgICBsZXQgc291bmRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghd2luZG93Lmthbi5wbGF5aW5nKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdCBwbGF5aW5nLCByZXR1cmluZycpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5aW5nOiAnLCBzaGFwZS5zb3VuZCwgc2hhcGUuc3ByaXRlTmFtZSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgICAgYXN5bmNQbGF5U2hhcGUoc2hhcGUpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgIH0pLmVycm9yKChlKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHBsYXlpbmcgc2hhcGUnLCBlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBzaGFwZS5zdGFydFRpbWUpO1xuICAgICAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLnB1c2goc291bmRUaW1lb3V0KTtcbiAgICB9KTtcbiAgICBpdGVyYXRpb25zKys7XG4gIH1cblxuICBmdW5jdGlvbiByZXBlYXRDb21wb3NpdGlvbigpIHtcbiAgICBpZiAobG9vcCA9PT0gdHJ1ZSkge1xuICAgICAgcGxheUNvbXBvc2l0aW9uT25jZSgpO1xuICAgICAgd2luZG93Lmthbi5jb21wb3NpdGlvbkludGVydmFsID0gc2V0SW50ZXJ2YWwocGxheUNvbXBvc2l0aW9uT25jZSwgY29tcG9zaXRpb25MZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXRlcmF0aW9ucyA8IDIpIHtcbiAgICAgICAgcGxheUNvbXBvc2l0aW9uT25jZSgpO1xuICAgICAgICBzZXRUaW1lb3V0KHJlcGVhdENvbXBvc2l0aW9uLCBjb21wb3NpdGlvbkxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdG9wUGxheWluZygpO1xuICAgICAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnc2hhcmUtcHJvbXB0Jyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3luY1BsYXlDb21wb3NpdGlvbk11bHRpcGxlVGltZXMocmVwZWF0cyA9IDEpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGxldCBwcm9taXNlZFJlcGVhdHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwZWF0czsgaSsrKSB7XG4gICAgICBwcm9taXNlZFJlcGVhdHMucHVzaChhc3luY1BsYXlDb21wb3NpdGlvbk9uY2UoKSk7XG4gICAgfVxuXG4gICAgUHJvbWlzZS5lYWNoKHByb21pc2VkUmVwZWF0cywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZygncmVwZWF0Jyk7XG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICByZXNvbHZlKCdSZXBlYXRzIGRvbmUnKTtcbiAgICB9KS5lcnJvcigoZSkgPT4ge1xuICAgICAgcmVqZWN0KGUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jUGxheUNvbXBvc2l0aW9uT25jZSgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IGNvbXBvc2l0aW9uID0gd2luZG93Lmthbi5jb21wb3NpdGlvbjtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBjbGVhclNvdW5kVGltZW91dHMoKTtcblxuICAgIGxldCBzaGFwZVByb21pc2VzID0gW107XG5cbiAgICBCYXNlLmVhY2goY29tcG9zaXRpb24sIChzaGFwZSwgaSkgPT4ge1xuICAgICAgc2hhcGVQcm9taXNlcy5wdXNoKGFzeW5jUGxheVNoYXBlV2l0aERlbGF5KHNoYXBlKSk7XG4gICAgfSk7XG5cbiAgICBQcm9taXNlLmFsbChzaGFwZVByb21pc2VzKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIGNvbnN0IHBsYXlUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcblxuICAgICAgLy8gd2FpdCBmb3IgY29tcG9zaXRpb24gdG8gYmUgZnVsbHkgZG9uZSBiZWZvcmUgcmVwZWF0aW5nIChwbGF5IGlzIG5hdHVyYWxseSB0cnVuY2F0ZWQgd2hlbiB0aGUgbGFzdCBzaGFwZSBmaW5pc2hlcyBwbGF5aW5nKVxuICAgICAgaWYgKHBsYXlUaW1lIDwgY29tcG9zaXRpb25MZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuZGVsYXkoY29tcG9zaXRpb25MZW5ndGggLSBwbGF5VGltZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShgQ29tcG9zaXRpb24gZnVsbHkgZG9uZSwgYWZ0ZXIgYSB3YWl0YCk7XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKGBDb21wb3NpdGlvbiBmdWxseSBkb25lLCB3aXRoIG5vIHdhaXRgKTtcbiAgICAgIH1cbiAgICB9KS5lcnJvcigoZSkgPT4ge1xuICAgICAgcmVqZWN0KGUpO1xuICAgIH0pO1xuICB9KVxufVxuXG5mdW5jdGlvbiBhc3luY1BsYXlTaGFwZVdpdGhEZWxheShzaGFwZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3Qgc291bmRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZygncGxheWluZzogJywgc2hhcGUuc291bmQsIHNoYXBlLnNwcml0ZU5hbWUsIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICBhc3luY1BsYXlTaGFwZShzaGFwZSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgIH0pLmVycm9yKChlKSA9PiB7XG4gICAgICAgIHJlamVjdChgRXJyb3IgcGxheWluZyBzaGFwZSB3aXRoIGRlbGF5OiAke2V9YCk7XG4gICAgICB9KTtcbiAgICB9LCBzaGFwZS5zdGFydFRpbWUpO1xuICAgIHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5wdXNoKHNvdW5kVGltZW91dCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcENvbXBvc2l0aW9uKCkge1xuICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4uY29tcG9zaXRpb25JbnRlcnZhbCk7XG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmNvbXBvc2l0aW9uVGltZW91dCk7XG4gIGNsZWFyU291bmRUaW1lb3V0cygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJpbW1lZENvbXBvc2l0aW9uT2JqKGNvbXBvc2l0aW9uKSB7XG4gIGxldCBmaXJzdFRpbWUgPSAwO1xuICBsZXQgdHJpbW1lZENvbXBvc2l0aW9uID0gW107XG4gIGxldCBzdGFydFRpbWUgPSBnZXRDb21wb3NpdGlvblN0YXJ0VGltZShjb21wb3NpdGlvbik7XG5cbiAgY29tcG9zaXRpb24uZm9yRWFjaCgoc291bmQpID0+IHtcbiAgICBsZXQgbW9kaWZpZWRTb3VuZCA9IHV0aWwuc2hhbGxvd0NvcHkoc291bmQpO1xuICAgIG1vZGlmaWVkU291bmQuc3RhcnRUaW1lID0gc291bmQuc3RhcnRUaW1lIC0gc3RhcnRUaW1lO1xuICAgIGlmIChtb2RpZmllZFNvdW5kLnN0YXJ0VGltZSA8IDApIG1vZGlmaWVkU291bmQuc3RhcnRUaW1lID0gMDsgLy8gdGhpcyBzaG91bGRuJ3QgaGFwcGVuXG4gICAgdHJpbW1lZENvbXBvc2l0aW9uLnB1c2gobW9kaWZpZWRTb3VuZCk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgY29tcG9zaXRpb246IHRyaW1tZWRDb21wb3NpdGlvbixcbiAgICBzdGFydFRpbWU6IHN0YXJ0VGltZVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldENvbXBvc2l0aW9uU3RhcnRUaW1lKGNvbXBvc2l0aW9uKSB7XG4gIGxldCBzdGFydFRpbWUgPSBjb21wb3NpdGlvbkxlbmd0aDtcblxuICBjb21wb3NpdGlvbi5mb3JFYWNoKChzb3VuZCkgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKHNvdW5kKTtcbiAgICAvLyBjb25zb2xlLmxvZyhzb3VuZC5zdGFydFRpbWUpXG4gICAgaWYgKCdzdGFydFRpbWUnIGluIHNvdW5kICYmIHNvdW5kLnN0YXJ0VGltZSA8IHN0YXJ0VGltZSkge1xuICAgICAgc3RhcnRUaW1lID0gc291bmQuc3RhcnRUaW1lO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gY29uc29sZS5sb2coJ3N0YXJ0IHRpbWUnLCBzdGFydFRpbWUpO1xuXG4gIGlmIChzdGFydFRpbWUgIT09IGNvbXBvc2l0aW9uTGVuZ3RoKSB7XG4gICAgcmV0dXJuIHN0YXJ0VGltZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuIiwiY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB2aWRlbyA9IHJlcXVpcmUoJy4vdmlkZW8nKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbmV4cG9ydCBjb25zdCBkcmF3SW5hY3Rpdml0eURlbGF5ID0gNDAgKiAxMDAwOyAvLyBtc1xuZXhwb3J0IGNvbnN0IGNvbnRpbnVlSW5hY3Rpdml0eURlbGF5ID0gMzAgKiAxMDAwOyAvLyBtc1xuZXhwb3J0IGNvbnN0IHBsYXlQcm9tcHREZWxheSA9IDYwICogMTAwMDsgLy8gbXM7XG5leHBvcnQgY29uc3QgaW5wdXREZWxheSA9IDEwMDsgLy8gbXNcbmV4cG9ydCBjb25zdCByZWZyZXNoQ2hlY2tEZWxheSA9IDYwICogMTAwMDsgLy8gbXNcbmV4cG9ydCBjb25zdCBvdmVybGF5RGVsYXkgPSAxMDAwOyAvLyBtc1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoLmxlbmd0aCA+IDAgJiYgd2luZG93LmxvY2F0aW9uLmhhc2ggPT0gJyNkZXYnKSB7XG4gICAgd2luZG93Lmthbi5vdmVybGF5cyA9IGZhbHNlO1xuICAgIHZpZGVvLnBhdXNlVmlkZW8oKTtcbiAgICB2aWRlby5leGl0VHV0b3JpYWxNb2RlKCk7XG4gIH0gZWxzZSB7XG4gICAgdmlkZW8uZW50ZXJUdXRvcmlhbE1vZGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCkge1xuICBjb25zb2xlLmxvZyhgcHJldmVudCB0aW1lb3V0OiAke3V0aWwuZ2V0VGltZSgpfWApO1xuICAvLyBvdmVybGF5cy5jbG9zZUFuZFJlc2V0T3ZlcmxheXMoKTtcblxuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5pbmFjdGl2aXR5VGltZW91dCk7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcblxuICB3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ2NvbnRpbnVlJyk7XG4gIH0sIGRyYXdJbmFjdGl2aXR5RGVsYXkpO1xufVxuIiwicmVxdWlyZSgnaGFtbWVyanMnKTtcblxuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuY29uc3QgY29sb3IgPSByZXF1aXJlKCcuL2NvbG9yJyk7XG5jb25zdCBzaGFwZSA9IHJlcXVpcmUoJy4vc2hhcGUnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHR1dG9yaWFsID0gcmVxdWlyZSgnLi90dXRvcmlhbCcpO1xuY29uc3QgdGltaW5nID0gcmVxdWlyZSgnLi90aW1pbmcnKTtcbmNvbnN0IG92ZXJsYXlzID0gcmVxdWlyZSgnLi9vdmVybGF5cycpO1xuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuXG5jb25zdCBoaXRPcHRpb25zID0ge1xuICBzZWdtZW50czogZmFsc2UsXG4gIHN0cm9rZTogdHJ1ZSxcbiAgZmlsbDogdHJ1ZSxcbiAgdG9sZXJhbmNlOiA1XG59O1xuXG5jb25zdCBtaW5TaGFwZVNpemUgPSAxMDA7XG5jb25zdCBtYXhTaGFwZUxlbmd0aCA9IDUwMDA7XG5jb25zdCBtYXhTY2FsZUZhY3RvciA9IDAuODtcblxubGV0IG91dGVyUGF0aDtcbmxldCBzaXplcyA9IFtdO1xubGV0IHNpemU7XG5sZXQgY3VtU2l6ZTtcbmxldCBwcmV2UG9pbnQ7XG5cbmV4cG9ydCBsZXQgaGFtbWVyVGlwcztcbmV4cG9ydCBsZXQgaGFtbWVyQ2FudmFzO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaGFtbWVyVGlwcyA9IG5ldyBIYW1tZXIuTWFuYWdlcih1aS50aXBzT3ZlcmxheSk7XG4gIGhhbW1lclRpcHMuYWRkKG5ldyBIYW1tZXIuU3dpcGUoeyBkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fQUxMIH0pKTtcbiAgaGFtbWVyVGlwcy5vbignc3dpcGUnLCBvdmVybGF5cy5jYXJkTmF2TmV4dCk7XG5cbiAgaGFtbWVyQ2FudmFzID0gbmV3IEhhbW1lci5NYW5hZ2VyKHVpLmRyYXdDYW52YXMpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuVGFwKHsgZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyLCBpbnRlcnZhbDogNDAwLCB0aW1lOiAxNTAsIHBvc1RocmVzaG9sZDogNTAgfSkpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuVGFwKHsgZXZlbnQ6ICdzaW5nbGV0YXAnIH0pKTtcbiAgaGFtbWVyQ2FudmFzLmFkZChuZXcgSGFtbWVyLlBhbih7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9BTEwgfSkpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuUGluY2goKSk7XG5cbiAgaGFtbWVyQ2FudmFzLmdldCgnZG91YmxldGFwJykucmVjb2duaXplV2l0aCgnc2luZ2xldGFwJyk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3NpbmdsZXRhcCcpLnJlcXVpcmVGYWlsdXJlKCdkb3VibGV0YXAnKTtcbiAgaGFtbWVyQ2FudmFzLmdldCgncGFuJykucmVxdWlyZUZhaWx1cmUoJ3BpbmNoJyk7XG4gIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoJykucmVxdWlyZUZhaWx1cmUoJ3BhbicpO1xuXG4gIC8vIGhhbW1lckNhbnZhcy5vbignc2luZ2xldGFwJywgc2luZ2xlVGFwKTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdkb3VibGV0YXAnLCBkb3VibGVUYXApO1xuXG4gIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gIGhhbW1lckNhbnZhcy5vbigncGFubW92ZScsIHBhbk1vdmUpO1xuICBoYW1tZXJDYW52YXMub24oJ3BhbmVuZCcsIHBhbkVuZCk7XG4gIC8vIGhhbW1lckNhbnZhcy5vbigncGFuY2FuY2VsJywgcGFuQ2FuY2VsKTtcblxuICBoYW1tZXJDYW52YXMub24oJ3BpbmNoc3RhcnQnLCBwaW5jaFN0YXJ0KTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdwaW5jaG1vdmUnLCBwaW5jaE1vdmUpO1xuICBoYW1tZXJDYW52YXMub24oJ3BpbmNoZW5kJywgcGluY2hFbmQpO1xuICAvLyBoYW1tZXJDYW52YXMub24oJ3BpbmNoY2FuY2VsJywgcGluY2hDYW5jZWwpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpIHtcbiAgZW5hYmxlUGFuRXZlbnRzKCk7XG4gIGVuYWJsZVBpbmNoRXZlbnRzKCk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVRhcEV2ZW50cyhlbmFibGUgPSB0cnVlKSB7XG4gIGVuYWJsZSA9IGVuYWJsZSA9PT0gdHJ1ZTtcbiAgaGFtbWVyQ2FudmFzLmdldCgnc2luZ2xldGFwJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICBoYW1tZXJDYW52YXMuZ2V0KCdkb3VibGV0YXAnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVUYXBFdmVudHMoKSB7XG4gIGVuYWJsZVRhcEV2ZW50cyhmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVBhbkV2ZW50cyhlbmFibGUgPSB0cnVlKSB7XG4gIGVuYWJsZSA9IGVuYWJsZSA9PT0gdHJ1ZTtcblxuICBoYW1tZXJDYW52YXMuZ2V0KCdwYW4nKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbnN0YXJ0Jykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwYW5tb3ZlJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwYW5lbmQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVQYW5FdmVudHMoKSB7XG4gIGVuYWJsZVBhbkV2ZW50cyhmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVBpbmNoRXZlbnRzKGVuYWJsZSA9IHRydWUpIHtcbiAgZW5hYmxlID0gZW5hYmxlID09PSB0cnVlO1xuXG4gIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwaW5jaHN0YXJ0Jykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwaW5jaG1vdmUnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoZW5kJykuc2V0KHtlbmFibGU6IGVuYWJsZX0pO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlUGluY2hFdmVudHMoKSB7XG4gIGVuYWJsZVBpbmNoRXZlbnRzKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gc2luZ2xlVGFwKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIC8vIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkgcmV0dXJuO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgLy8gJChldmVudC50YXJnZXQpLmNsaWNrKCk7XG5cbiAgLy8gc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy8gaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgLy8gdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIC8vXG4gIC8vIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIC8vXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXIsXG4gICAgICBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSksXG4gICAgICBoaXRSZXN1bHQgPSBwYXBlci5wcm9qZWN0LmhpdFRlc3QocG9pbnQsIGhpdE9wdGlvbnMpO1xuXG4gIGlmIChoaXRSZXN1bHQpIHtcbiAgICBsZXQgaXRlbSA9IGhpdFJlc3VsdC5pdGVtO1xuICAgIC8vIGl0ZW0uc2VsZWN0ZWQgPSAhaXRlbS5zZWxlY3RlZDtcbiAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkb3VibGVUYXAoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gY29uc29sZS5sb2coJ2RvdWJsZXRhcCcpO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXIsXG4gICAgICBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSksXG4gICAgICBoaXRSZXN1bHQgPSBwYXBlci5wcm9qZWN0LmhpdFRlc3QocG9pbnQsIGhpdE9wdGlvbnMpO1xuXG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkgcmV0dXJuO1xuXG5cbiAgaWYgKGhpdFJlc3VsdCkge1xuICAgIHNoYXBlLnRvZ2dsZUZpbGwoaGl0UmVzdWx0Lml0ZW0pO1xuICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKCdmaWxsJyk7XG5cbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cua2FuLnBpbmNoZWRHcm91cCA9IG51bGw7XG4gICAgLy8gY29uc29sZS5sb2coJ2hpdCBubyBpdGVtJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFuU3RhcnQoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xuICAvLyBjb25zb2xlLmxvZygncGFuc3RhcnQnKTtcbiAgLy8gcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5yZW1vdmVDaGlsZHJlbigpOyAvLyBSRU1PVkVcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgdGltaW5nLnByZXZlbnRJbmFjdGl2aXR5VGltZW91dCgpO1xuXG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkge1xuICAgIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xuICAgIC8vIGNoZWNrIGlmIHRpcHMgbW9kYWwgaXMgdXBcbiAgICBpZiAoJGJvZHkuaGFzQ2xhc3MoJ292ZXJsYXktYWN0aXZlIHRpcHMtYWN0aXZlJykpIHtcbiAgICAgIC8vIGlmIHNvLCBnbyB0byBuZXh0IHRpcCBjYXJkXG4gICAgICBvdmVybGF5cy5jYXJkTmF2TmV4dCgpO1xuICAgIH1cbiAgICBldmVudC5zcmNFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB3aW5kb3cua2FuLnBhbm5pbmcgPSB0cnVlO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcblxuICBoYW1tZXJDYW52YXMub2ZmKCdwYW5zdGFydCcpO1xuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwYW4nKS5zZXQoe2VuYWJsZTogZmFsc2V9KTtcbiAgZGlzYWJsZVBpbmNoRXZlbnRzKCk7XG4gIGRpc2FibGVUYXBFdmVudHMoKTtcblxuICAvLyBpZ25vcmUgb3RoZXIgdG91Y2ggaW5wdXRzXG4gIC8vIGlmICh3aW5kb3cua2FuLnBpbmNoaW5nKSByZXR1cm47XG4gIC8vIGlmICghKGV2ZW50LmNoYW5nZWRQb2ludGVycyAmJiBldmVudC5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoID4gMCkpIHJldHVybjtcbiAgLy8gaWYgKGV2ZW50LmNoYW5nZWRQb2ludGVycy5sZW5ndGggPiAxKSB7XG4gIC8vICAgY29uc29sZS5sb2coJ2V2ZW50LmNoYW5nZWRQb2ludGVycyA+IDEnKTtcbiAgLy8gfVxuXG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG5cbiAgd2luZG93Lmthbi5wcmV2QW5nbGUgPSBNYXRoLmF0YW4yKGV2ZW50LnZlbG9jaXR5WSwgZXZlbnQudmVsb2NpdHlYKTtcblxuICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyO1xuICBjb25zdCBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSk7XG5cbiAgb3V0ZXJQYXRoID0gbmV3IFBhdGgoKTtcbiAgb3V0ZXJQYXRoLmZpbGxDb2xvciA9IHdpbmRvdy5rYW4uY3VycmVudENvbG9yO1xuICAvLyBvdXRlclBhdGguZmlsbENvbG9yID0gbmV3IENvbG9yKDAsIDAuNSk7XG5cbiAgc2l6ZXMgPSBbXTtcblxuICBsZXQgc2hhcGVQYXRoID0gbmV3IFBhdGgoe1xuICAgIHN0cm9rZUNvbG9yOiB3aW5kb3cua2FuLmN1cnJlbnRDb2xvcixcbiAgICBuYW1lOiAnc2hhcGVQYXRoJyxcbiAgICBzdHJva2VXaWR0aDogNSxcbiAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICBzdHJva2VDYXA6ICdyb3VuZCdcbiAgfSk7XG5cbiAgc2hhcGVQYXRoLmFkZChwb2ludCk7XG5cbiAgd2luZG93Lmthbi5wYXRoRGF0YVtzaGFwZS5zdHJpbmdpZnlQb2ludChwb2ludCldID0ge1xuICAgIHBvaW50OiBwb2ludCxcbiAgICBmaXJzdDogdHJ1ZVxuICB9O1xuXG4gIHdpbmRvdy5rYW4uc2hhcGVQYXRoID0gc2hhcGVQYXRoO1xufVxuXG5mdW5jdGlvbiBwYW5Nb3ZlKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKCdwYW5tb3ZlJyk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkge1xuICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAod2luZG93Lmthbi5wYW5uaW5nICE9PSB0cnVlKSByZXR1cm47XG5cbiAgLy8gZG9uJ3QgbGV0IHRoZSB1c2VyIGRyYXcgcGFzdCB0aGUgbWF4IGxlbmd0aFxuICBpZiAod2luZG93Lmthbi5zaGFwZVBhdGgubGVuZ3RoIDw9IG1heFNoYXBlTGVuZ3RoKSB7XG4gICAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcjtcbiAgICBsZXQgcG9pbnQgPSBuZXcgUG9pbnQocG9pbnRlci54LCBwb2ludGVyLnkpO1xuXG4gICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMihldmVudC52ZWxvY2l0eVksIGV2ZW50LnZlbG9jaXR5WCk7XG4gICAgbGV0IHByZXZBbmdsZSA9IHdpbmRvdy5rYW4ucHJldkFuZ2xlO1xuICAgIGxldCBhbmdsZURlbHRhID0gdXRpbC5hbmdsZURlbHRhKGFuZ2xlLCBwcmV2QW5nbGUpO1xuICAgIHdpbmRvdy5rYW4ucHJldkFuZ2xlID0gYW5nbGU7XG5cbiAgICB3aGlsZSAoc2l6ZXMubGVuZ3RoID4gMTApIHtcbiAgICAgIHNpemVzLnNoaWZ0KCk7XG4gICAgfVxuICAgIGlmIChzaXplcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBkaXN0ID0gcHJldlBvaW50LmdldERpc3RhbmNlKHBvaW50KTtcblxuICAgICAgLy8gVGhlc2UgYXJlIGJhc2VkIG9uIGFjY2VsZXJhdGlvblxuICAgICAgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiAxMDsgLy8gVGhpcyBpcyBqdXN0IHJhbmRvbSB2YXJpYW5jZVxuXG4gICAgICBjdW1TaXplID0gMDtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY3VtU2l6ZSArPSBzaXplc1tqXTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnN0IGF2Z1NpemUgPSAoKGN1bVNpemUgLyBzaXplcy5sZW5ndGgpICsgc2l6ZSkgLyAyO1xuICAgICAgY29uc3QgYXZnU2l6ZSA9IE1hdGgubWF4KDUsICgoY3VtU2l6ZSAvIHNpemVzLmxlbmd0aCkgKyBzaXplKSAvIDIpO1xuXG4gICAgICBjb25zdCBoYWxmUG9pbnRYID0gKHBvaW50LnggKyBwcmV2UG9pbnQueCkgLyAyO1xuICAgICAgY29uc3QgaGFsZlBvaW50WSA9IChwb2ludC55ICsgcHJldlBvaW50LnkpIC8gMjtcbiAgICAgIGNvbnN0IGhhbGZQb2ludCA9IG5ldyBQb2ludChoYWxmUG9pbnRYLCBoYWxmUG9pbnRZKTtcblxuICAgICAgY29uc3QgdG9wWCA9IGhhbGZQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICAgIGNvbnN0IHRvcFkgPSBoYWxmUG9pbnQueSArIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgICBjb25zdCB0b3AgPSBuZXcgUG9pbnQodG9wWCwgdG9wWSk7XG5cbiAgICAgIGNvbnN0IGJvdHRvbVggPSBoYWxmUG9pbnQueCArIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgICBjb25zdCBib3R0b21ZID0gaGFsZlBvaW50LnkgKyBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkvMikgKiBhdmdTaXplO1xuICAgICAgY29uc3QgYm90dG9tID0gbmV3IFBvaW50KGJvdHRvbVgsIGJvdHRvbVkpO1xuXG4gICAgICBvdXRlclBhdGguYWRkKHRvcCk7XG4gICAgICBvdXRlclBhdGguaW5zZXJ0KDAsIGJvdHRvbSk7XG4gICAgICBvdXRlclBhdGguc21vb3RoKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpemUgPSA1O1xuICAgIH1cblxuICAgIHNpemVzLnB1c2goc2l6ZSk7XG4gICAgcHJldlBvaW50ID0gcG9pbnQ7XG5cbiAgICB3aW5kb3cua2FuLnBhdGhEYXRhW3NoYXBlLnN0cmluZ2lmeVBvaW50KHBvaW50KV0gPSB7XG4gICAgICBwb2ludDogcG9pbnQsXG4gICAgICBzcGVlZDogTWF0aC5hYnMoZXZlbnQub3ZlcmFsbFZlbG9jaXR5KSxcbiAgICAgIGFuZ2xlOiBhbmdsZVxuICAgIH07XG5cbiAgICB3aW5kb3cua2FuLnNoYXBlUGF0aC5hZGQocG9pbnQpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4uc2hhcGVQYXRoLmRhdGEudG9vTG9uZyA9IHRydWU7XG4gIH1cblxuICBwYXBlci52aWV3LmRyYXcoKTtcbn1cblxuZnVuY3Rpb24gcGFuRW5kKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKCdwYW5lbmQnKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSB7XG4gICAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cua2FuLnBhbm5pbmcgIT09IHRydWUpIHJldHVybjtcblxuICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyO1xuICBjb25zdCBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSk7XG5cbiAgY29uc3QgdHJhbnNwYXJlbnQgPSBjb2xvci50cmFuc3BhcmVudDtcbiAgY29uc3QgY29sb3JOYW1lID0gY29sb3IuZ2V0Q29sb3JOYW1lKHdpbmRvdy5rYW4uY3VycmVudENvbG9yKTtcblxuICBsZXQgbW92ZSA9IHsgdHlwZTogJ25ld0dyb3VwJyB9O1xuXG4gIGxldCBzaGFwZVBhdGggPSB3aW5kb3cua2FuLnNoYXBlUGF0aDtcblxuICBpZiAoc2hhcGVQYXRoLmxlbmd0aCA8PSBtYXhTaGFwZUxlbmd0aCkge1xuICAgIHNoYXBlUGF0aC5hZGQocG9pbnQpO1xuICB9XG4gIG91dGVyUGF0aC52aXNpYmxlID0gZmFsc2U7XG5cbiAgaWYgKHNoYXBlUGF0aC5sZW5ndGggPCBtaW5TaGFwZVNpemUgfHwgKHNoYXBlUGF0aC5kYXRhICYmIHNoYXBlUGF0aC5kYXRhLnRvb0xvbmcgPT09IHRydWUpKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3BhdGggaXMgdG9vIHNob3J0Jyk7XG4gICAgc2hhcGVQYXRoLnJlbW92ZSgpO1xuICAgIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB2aXNpYmxlR3JvdXBzID0gdXRpbC5nZXRWaXNpYmxlR3JvdXBzKCk7XG4gIGlmICh2aXNpYmxlR3JvdXBzLmxlbmd0aCA+PSBjb25maWcubWF4U2hhcGVzKSB7XG4gICAgLy8gdG9vIG1hbnkgc2hhcGVzIG9uIGNhbnZhcywgcmVtb3ZlIGZpcnN0IHNoYXBlXG4gICAgLy8gVE9ETzogcGxhY2Ugb24gbW92ZXMgc3RhY2sgc28gdGhhdCB0aGV5IGNhbiBiZSByZXN0b3JlZCB3aXRoIGFuIHVuZG9cbiAgICBjb25zdCBmaXJzdEdyb3VwID0gdmlzaWJsZUdyb3Vwc1swXTtcbiAgICBzaGFwZS5kZXN0cm95R3JvdXBQb3BzKGZpcnN0R3JvdXApO1xuICAgIHNvdW5kLnJlbW92ZVNoYXBlRnJvbUNvbXBvc2l0aW9uKGZpcnN0R3JvdXApO1xuICAgIG1vdmUucmVtb3ZlZEdyb3VwID0gZmlyc3RHcm91cDtcbiAgICAvLyBmaXJzdEdyb3VwLnJlbW92ZSgpO1xuICAgIGZpcnN0R3JvdXAudmlzaWJsZSA9IGZhbHNlO1xuICB9XG5cbiAgd2luZG93Lmthbi5wYXRoRGF0YVtzaGFwZS5zdHJpbmdpZnlQb2ludChwb2ludCldID0ge1xuICAgIHBvaW50OiBwb2ludCxcbiAgICBsYXN0OiB0cnVlXG4gIH07XG5cbiAgbGV0IGdyb3VwID0gbmV3IEdyb3VwKCk7XG5cbiAgbGV0IHRydWVkU2hhcGUgPSBzaGFwZS5nZXRUcnVlZFNoYXBlKHNoYXBlUGF0aCk7XG5cbiAgLy8gZ3JvdXAuZGF0YS5jb2xvciA9IHRydWVkU2hhcGUuc3Ryb2tlQ29sb3I7XG4gIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50R3JhZGllbnQ6JywgY29uZmlnLnBhbGV0dGUuZ3JhZGllbnRzW3dpbmRvdy5rYW4uY3VycmVudENvbG9yXSk7XG5cbiAgY29uc3Qgc2hhcGVTaXplID0gdHJ1ZWRTaGFwZS5zdHJva2VCb3VuZHM7XG4gIGNvbnN0IGNlbnRlclBvaW50ID0gbmV3IFBvaW50KHNoYXBlU2l6ZS53aWR0aCAvIDIsIHNoYXBlU2l6ZS5oZWlnaHQgLyAyKTtcbiAgY29uc3QgYW5nbGUgPSB1dGlsLnJhZChNYXRoLnJhbmRvbSgpICogMzYwKTtcbiAgY29uc3QgZ3JhZGllbnRTaXplID0gKHNoYXBlU2l6ZS53aWR0aCArIHNoYXBlU2l6ZS5oZWlnaHQpIC8gNDtcbiAgY29uc3Qgb3JpZ2luWCA9IGNlbnRlclBvaW50LnggKyBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkvMikgKiBncmFkaWVudFNpemU7XG4gIGNvbnN0IG9yaWdpblkgPSBjZW50ZXJQb2ludC55ICsgTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuICBjb25zdCBkZXN0aW5hdGlvblggPSBjZW50ZXJQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuICBjb25zdCBkZXN0aW5hdGlvblkgPSBjZW50ZXJQb2ludC55ICsgTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJLzIpICogZ3JhZGllbnRTaXplO1xuXG4gIGNvbnN0IG9yaWdpbiA9IG5ldyBQb2ludChvcmlnaW5YICsgc2hhcGVTaXplLngsIG9yaWdpblkgKyBzaGFwZVNpemUueSk7XG4gIGNvbnN0IGRlc3RpbmF0aW9uID0gbmV3IFBvaW50KGRlc3RpbmF0aW9uWCArIHNoYXBlU2l6ZS54LCBkZXN0aW5hdGlvblkgKyBzaGFwZVNpemUueSk7XG4gIC8vIGdyb3VwLmFkZENoaWxkKG5ldyBQYXRoLkNpcmNsZSh7XG4gIC8vICAgY2VudGVyOiBvcmlnaW4sXG4gIC8vICAgcmFkaXVzOiA1LFxuICAvLyAgIGZpbGxDb2xvcjogJ3JlZCcsXG4gIC8vIH0pKTtcbiAgLy8gZ3JvdXAuYWRkQ2hpbGQobmV3IFBhdGguQ2lyY2xlKHtcbiAgLy8gICBjZW50ZXI6IGRlc3RpbmF0aW9uLFxuICAvLyAgIHJhZGl1czogNSxcbiAgLy8gICBmaWxsQ29sb3I6ICdncmVlbicsXG4gIC8vIH0pKTtcbiAgZ3JvdXAuZGF0YS5vcmlnaW5hbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIGdyb3VwLmRhdGEuY29sb3IgPSB7XG4gICAgZ3JhZGllbnQ6IHtcbiAgICAgIHN0b3BzOiBjb25maWcucGFsZXR0ZS5ncmFkaWVudHNbd2luZG93Lmthbi5jdXJyZW50Q29sb3JdLFxuICAgIH0sXG4gICAgb3JpZ2luOiBvcmlnaW4sXG4gICAgZGVzdGluYXRpb246IGRlc3RpbmF0aW9uLFxuICB9O1xuICBncm91cC5kYXRhLnNjYWxlID0gMTsgLy8gaW5pdCB2YXJpYWJsZSB0byB0cmFjayBzY2FsZSBjaGFuZ2VzXG4gIGdyb3VwLmRhdGEucm90YXRpb24gPSAwOyAvLyBpbml0IHZhcmlhYmxlIHRvIHRyYWNrIHJvdGF0aW9uIGNoYW5nZXNcbiAgZ3JvdXAuZGF0YS5mcmVzaCA9IHRydWU7XG5cbiAgc2hhcGVQYXRoLnJlbW92ZSgpO1xuICB0cnVlZFNoYXBlLnZpc2libGUgPSBmYWxzZTtcbiAgdHJ1ZWRTaGFwZS5zdHJva2VDb2xvciA9IG5ldyBDb2xvcigwLCAwKTtcbiAgd2luZG93Lmthbi5zaGFwZVBhdGggPSB0cnVlZFNoYXBlO1xuICB0cnVlZFNoYXBlLm5hbWUgPSAnc2hhcGVQYXRoJztcblxuICBpZiAoISh0cnVlZFNoYXBlLmxlbmd0aCA+IDApKSB7XG4gICAgdHJ1ZWRTaGFwZS5yZW1vdmUoKTtcbiAgICBncm91cC5yZW1vdmUoKTtcbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBncm91cC5hZGRDaGlsZCh0cnVlZFNoYXBlKTtcblxuICBsZXQgc2hhcGVTb3VuZE9iaiA9IHNvdW5kLmdldFNoYXBlU291bmRPYmoodHJ1ZWRTaGFwZSk7XG4gIHdpbmRvdy5rYW4uY29tcG9zaXRpb24ucHVzaChzaGFwZVNvdW5kT2JqKTtcblxuICB0cnVlZFNoYXBlLnZpc2libGUgPSBmYWxzZTtcbiAgY29uc3Qgb3V0bGluZUdyb3VwID0gc2hhcGUuZ2V0T3V0bGluZUdyb3VwKHRydWVkU2hhcGUpO1xuICBjb25zdCBvdXRsaW5lID0gb3V0bGluZUdyb3VwLl9uYW1lZENoaWxkcmVuLm91dGVyWzBdLmNsb25lKCk7XG4gIG91dGxpbmUubmFtZSA9ICdvdXRlcic7XG4gIG91dGxpbmUuZmlsbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIG91dGxpbmUuZmlsbENvbG9yID0gZ3JvdXAuZGF0YS5jb2xvcjtcblxuICBjb25zdCBvdXRsaW5lQ2VudGVyID0gb3V0bGluZUdyb3VwLl9uYW1lZENoaWxkcmVuLm1pZGRsZVswXS5jbG9uZSgpO1xuICBvdXRsaW5lQ2VudGVyLnN0cm9rZUNvbG9yID0gZ3JvdXAuZGF0YS5jb2xvcjtcbiAgb3V0bGluZUNlbnRlci52aXNpYmxlID0gZmFsc2U7XG4gIGdyb3VwLmFkZENoaWxkKG91dGxpbmUpO1xuICBvdXRsaW5lLnNlbmRUb0JhY2soKTtcblxuICBvdXRsaW5lR3JvdXAucmVtb3ZlKCk7XG5cbiAgbGV0IHNoYXBlTWFzayA9IG91dGxpbmUuY2xvbmUoKTtcbiAgc2hhcGVNYXNrLmZpbGxDb2xvciA9IG91dGxpbmUuZmlsbENvbG9yO1xuICBzaGFwZU1hc2suc3Ryb2tlQ29sb3IgPSBvdXRsaW5lLnN0cm9rZUNvbG9yO1xuICBzaGFwZU1hc2suY2xvc2VkID0gdHJ1ZTtcblxuICBsZXQgZW5jbG9zZWRMb29wcyA9IHNoYXBlLmZpbmRJbnRlcmlvckN1cnZlcyhvdXRsaW5lQ2VudGVyKTtcbiAgaWYgKGVuY2xvc2VkTG9vcHMubGVuZ3RoID4gMCB8fCB0cnVlZFNoYXBlLmNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgIGdyb3VwLmRhdGEubGluZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGdyb3VwLmRhdGEubGluZSA9IHRydWU7XG4gIH1cblxuICBlbmNsb3NlZExvb3BzLmZvckVhY2goKGxvb3ApID0+IHtcbiAgICBzaGFwZU1hc2sudW5pdGUobG9vcCk7XG4gICAgc2hhcGVNYXNrLnNlbmRUb0JhY2soKTtcbiAgICBsb29wLm5hbWUgPSAnbG9vcCc7XG4gICAgbG9vcC5kYXRhLmxvb3AgPSB0cnVlO1xuICAgIGxvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgZ3JvdXAuYWRkQ2hpbGQobG9vcCk7XG4gIH0pO1xuXG5cbiAgc2hhcGVNYXNrLnVuaXRlKCk7XG4gIGxldCBjcm9zc2luZ3MgPSBzaGFwZU1hc2sucmVzb2x2ZUNyb3NzaW5ncygpO1xuICBpZiAoISFjcm9zc2luZ3MgJiYgISFjcm9zc2luZ3MuY2hpbGRyZW4gJiYgY3Jvc3NpbmdzLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBsZXQgbWF4QXJlYSA9IDAsIG1heENoaWxkID0gbnVsbDtcbiAgICBjcm9zc2luZ3MuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZC5hcmVhID4gbWF4QXJlYSkge1xuICAgICAgICBtYXhDaGlsZCA9IGNoaWxkO1xuICAgICAgICBtYXhBcmVhID0gY2hpbGQuYXJlYTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHNoYXBlTWFzayA9IG1heENoaWxkO1xuICB9XG5cbiAgb3V0bGluZUNlbnRlci5yZW1vdmUoKTtcbiAgc2hhcGVNYXNrLnZpc2libGUgPSBmYWxzZTtcbiAgc2hhcGVNYXNrLm5hbWUgPSAnbWFzayc7XG4gIHNoYXBlTWFzay5kYXRhLm1hc2sgPSB0cnVlO1xuICBncm91cC5hZGRDaGlsZChzaGFwZU1hc2spO1xuICBzaGFwZU1hc2suc2VuZFRvQmFjaygpO1xuXG4gIHNoYXBlLmNsZWFuVXBHcm91cChncm91cCk7XG5cbiAgbW92ZS5pZCA9IGdyb3VwLmlkO1xuICB3aW5kb3cua2FuLm1vdmVzLnB1c2gobW92ZSk7XG5cblxuICB1aS51bmRpdGhlckJ1dHRvbnNCeU5hbWUoWyduZXcnLCAndW5kbycsICdwbGF5LXN0b3AnLCAnc2hhcmUnXSk7XG4gICRib2R5LmFkZENsYXNzKHNvdW5kLnBsYXlFbmFibGVkQ2xhc3MpO1xuXG4gIGlmICh3aW5kb3cua2FuLnVzZXJIYXNEcmF3bkZpcnN0U2hhcGUgIT09IHRydWUpIHtcbiAgICAvLyBmaXJzdCBzaGFwZSFcbiAgICAvLyBzZXQgcGxheSBwcm9tcHQgdGltZW91dFxuICAgIHdpbmRvdy5rYW4ucGxheVByb21wdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdwbGF5LXByb21wdCcpO1xuICAgIH0sIHRpbWluZy5wbGF5UHJvbXB0RGVsYXkpO1xuXG4gICAgd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChjb25maWcucnVuQW5pbWF0aW9ucykge1xuICAgIGNvbnN0IHNjYWxlRmFjdG9yID0gMC45O1xuICAgIGdyb3VwLmFuaW1hdGUoXG4gICAgICBbe1xuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc2NhbGU6IHNjYWxlRmFjdG9yXG4gICAgICAgIH0sXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgICBlYXNpbmc6IFwiZWFzZU91dFwiLFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc2NhbGU6IDEgLyBzY2FsZUZhY3RvclxuICAgICAgICB9LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgICAgICAgZWFzaW5nOiBcImVhc2VJblwiLFxuICAgICAgICB9XG4gICAgICB9XVxuICAgICk7XG4gIH1cblxuICBpZiAoIXR1dG9yaWFsLmFsbFR1dHNDb21wbGV0ZWQoKSkge1xuICAgIGNvbnN0IHR1dG9yaWFsQ29tcGxldGlvbiA9IHdpbmRvdy5rYW4udHV0b3JpYWxDb21wbGV0aW9uO1xuICAgIGxldCB0dXROYW1lID0gbnVsbDtcblxuICAgIGlmICghdHV0b3JpYWxDb21wbGV0aW9uWydmaWxsJ10gJiYgdHJ1ZWRTaGFwZS5jbG9zZWQpIHtcbiAgICAgIHR1dE5hbWUgPSAnZmlsbCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBncm91cHMgPSBwYXBlci5wcm9qZWN0LmdldEl0ZW1zKHtcbiAgICAgICAgbWF0Y2g6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGVsLmNsYXNzTmFtZSA9PT0gJ0dyb3VwJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghdHV0b3JpYWxDb21wbGV0aW9uWydwaW5jaCddICYmIGdyb3Vwcy5sZW5ndGggPj0gMykge1xuICAgICAgICB0dXROYW1lID0gJ3BpbmNoJztcbiAgICAgIH0gZWxzZSBpZiAoIXR1dG9yaWFsQ29tcGxldGlvblsnc3dpcGUnXSAmJiBncm91cHMubGVuZ3RoID49IDUpIHtcbiAgICAgICAgdHV0TmFtZSA9ICdzd2lwZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR1dE5hbWUgIT09IG51bGwpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGAke3R1dE5hbWV9IHR1dG9yaWFsYCk7XG4gICAgICB0dXRvcmlhbC5hZGRDb250ZXh0dWFsVHV0KHR1dE5hbWUpO1xuICAgICAgd2luZG93Lmthbi50dXRvcmlhbENvbXBsZXRpb25bdHV0TmFtZV0gPSB0cnVlO1xuICAgICAgZ3JvdXAuZGF0YS50dXQgPSB0dXROYW1lO1xuICAgIH1cbiAgfVxuXG4gIGlmICh3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgIT09IG51bGwpIHtcbiAgICBsZXQgc2NoZWR1bGVkT3ZlcmxheSA9IHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheTtcbiAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBudWxsO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoc2NoZWR1bGVkT3ZlcmxheSk7XG4gICAgfSwgdGltaW5nLm92ZXJsYXlEZWxheSk7XG4gIH1cblxuICBzaGFwZVNvdW5kT2JqLnBsYXkoKTtcblxuICAvLyBjb25zb2xlLmxvZygncGFuIGRvbmUnKTtcbiAgaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogZmFsc2UgfSk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gICAgY29uc29sZS5sb2coJ3RvdWNoIGVuYWJsZWQnKTtcbiAgICBoYW1tZXJDYW52YXMub24oJ3BhbnN0YXJ0JywgcGFuU3RhcnQpO1xuICAgIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCk7XG4gICAgZW5hYmxlVGFwRXZlbnRzKCk7XG5cbiAgICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbiAgfSwgdGltaW5nLmlucHV0RGVsYXkpO1xuXG4gIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgc2hhcGUudXBkYXRlUG9wcygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhbkNhbmNlbChldmVudCkge1xuICBjb25zb2xlLmxvZygncGFuY2FuY2VsJyk7XG4gIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCk7XG4gIGVuYWJsZVRhcEV2ZW50cygpO1xuICB3aW5kb3cua2FuLnBhbm5pbmcgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcGluY2hTdGFydChldmVudCkge1xuICAvLyBjb25zb2xlLmxvZygncGluY2hzdGFydCcpO1xuICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuICB3aW5kb3cua2FuLmludGVyYWN0aW5nID0gdHJ1ZTtcbiAgd2luZG93Lmthbi5waW5jaGluZyA9IHRydWU7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgncGluY2hzdGFydCcpLnNldCh7ZW5hYmxlOiBmYWxzZX0pO1xuICBoYW1tZXJDYW52YXMub2ZmKCdwaW5jaHN0YXJ0Jyk7XG4gIGRpc2FibGVQYW5FdmVudHMoKTtcbiAgZGlzYWJsZVRhcEV2ZW50cygpO1xuXG4gIGlmICghZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSkgcmV0dXJuO1xuXG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG5cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcixcbiAgICAgIHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KSxcbiAgICAgIGhpdFJlc3VsdCA9IHNoYXBlLmhpdFRlc3RHcm91cEJvdW5kcyhwb2ludCk7XG5cbiAgaWYgKGhpdFJlc3VsdCkge1xuICAgIHdpbmRvdy5rYW4ucGluY2hpbmcgPSB0cnVlO1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gaGl0UmVzdWx0O1xuICAgIHdpbmRvdy5rYW4ubGFzdFNjYWxlID0gMTtcbiAgICB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbiA9IGV2ZW50LnJvdGF0aW9uO1xuXG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFBvc2l0aW9uID0gaGl0UmVzdWx0LnBvc2l0aW9uO1xuICAgIHdpbmRvdy5rYW4ub3JpZ2luYWxSb3RhdGlvbiA9IGhpdFJlc3VsdC5kYXRhLnJvdGF0aW9uO1xuICAgIHdpbmRvdy5rYW4ub3JpZ2luYWxTY2FsZSA9IGhpdFJlc3VsdC5kYXRhLnNjYWxlO1xuICAgIGhpdFJlc3VsdC5kYXRhLnRocm93biA9IGZhbHNlO1xuXG4gICAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICAgIHNoYXBlLmRlc3Ryb3lHcm91cFBvcHMoaGl0UmVzdWx0KTtcbiAgICB9XG5cbiAgICBoaXRSZXN1bHQuYnJpbmdUb0Zyb250KCk7XG5cbiAgICBpZiAoaGl0UmVzdWx0LmRhdGEudHV0ICYmIGhpdFJlc3VsdC5kYXRhLnR1dC5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgJHR1dCA9ICQoYC50dXRbZGF0YS10dXQtdHlwZT0nJHtoaXRSZXN1bHQuZGF0YS50dXR9J11gKTtcbiAgICAgIGlmICgkdHV0KSB7XG4gICAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9ICR0dXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cua2FuLnBpbmNoZWRUdXQgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cua2FuLnBpbmNoZWRUdXQgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIGlmIChjb25maWcucnVuQW5pbWF0aW9ucykge1xuICAgIC8vICAgaGl0UmVzdWx0LmFuaW1hdGUoe1xuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgc2NhbGU6IDEuMjVcbiAgICAvLyAgICAgfSxcbiAgICAvLyAgICAgc2V0dGluZ3M6IHtcbiAgICAvLyAgICAgICBkdXJhdGlvbjogMTAwLFxuICAgIC8vICAgICAgIGVhc2luZzogXCJlYXNlT3V0XCIsXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pO1xuICAgIC8vIH1cbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cua2FuLnBpbmNoZWRHcm91cCA9IG51bGw7XG4gICAgd2luZG93Lmthbi5waW5jaGVkVHV0ID0gbnVsbDtcbiAgICAvLyBjb25zb2xlLmxvZygnaGl0IG5vIGl0ZW0nKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwaW5jaE1vdmUoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coJ3BpbmNoTW92ZScpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHZpZXdXaWR0aCA9IHBhcGVyLnZpZXcudmlld1NpemUud2lkdGg7XG4gIGNvbnN0IHZpZXdIZWlnaHQgPSBwYXBlci52aWV3LnZpZXdTaXplLmhlaWdodDtcbiAgbGV0IHBpbmNoZWRHcm91cCA9IHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwO1xuICBsZXQgJHBpbmNoZWRUdXQgPSB3aW5kb3cua2FuLnBpbmNoZWRUdXQ7XG5cbiAgaWYgKCEhcGluY2hlZEdyb3VwKSB7XG4gICAgbGV0IGN1cnJlbnRTY2FsZSA9IGV2ZW50LnNjYWxlO1xuICAgIGxldCBzY2FsZURlbHRhO1xuXG4gICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRCeU5hbWUoJ3BpbmNoJyk7XG5cbiAgICBpZiAocGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCA8IG1pblNoYXBlU2l6ZSB8fCBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCA8IG1pblNoYXBlU2l6ZSkge1xuICAgICAgLy8gb25seSBhbGxvdyBhIHNoYXBlIHRvIHNjYWxlIGRvd24gaWYgaXQgaXMgbGFyZ2VyIHRoYW4gdGhlIG1pbmltdW0gc2l6ZVxuICAgICAgc2NhbGVEZWx0YSA9IDEuMTtcbiAgICB9IGVsc2UgaWYgKHBpbmNoZWRHcm91cC5ib3VuZHMud2lkdGggPj0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aCB8fFxuICAgICAgICBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCA+PSBwYXBlci52aWV3LnZpZXdTaXplLmhlaWdodCkge1xuICAgICAgLy8gb25seSBhbGxvdyBzaGFwZSB0byBzY2FsZSB1cCBpZiBpdCBmaXRzIGluIHRoZSB2aWV3cG9ydFxuICAgICAgc2NhbGVEZWx0YSA9IDAuOTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NhbGVEZWx0YSA9IGN1cnJlbnRTY2FsZSAvIHdpbmRvdy5rYW4ubGFzdFNjYWxlO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4ubGFzdFNjYWxlID0gY3VycmVudFNjYWxlO1xuXG4gICAgbGV0IGN1cnJlbnRSb3RhdGlvbiA9IGV2ZW50LnJvdGF0aW9uO1xuICAgIGxldCByb3RhdGlvbkRlbHRhID0gY3VycmVudFJvdGF0aW9uIC0gd2luZG93Lmthbi5sYXN0Um90YXRpb247XG4gICAgd2luZG93Lmthbi5sYXN0Um90YXRpb24gPSBjdXJyZW50Um90YXRpb247XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgc2NhbGluZyBieSAke3NjYWxlRGVsdGF9YCk7XG4gICAgLy8gY29uc29sZS5sb2coYHJvdGF0aW5nIGJ5ICR7cm90YXRpb25EZWx0YX1gKTtcblxuICAgIGNvbnN0IGNlbnRlclBvaW50ID0gZXZlbnQuY2VudGVyO1xuICAgIHBpbmNoZWRHcm91cC5wb3NpdGlvbiA9IGNlbnRlclBvaW50O1xuICAgIGlmICghISRwaW5jaGVkVHV0KSB7XG4gICAgICB0dXRvcmlhbC5tb3ZlQ29udGV4dHVhbFR1dCgkcGluY2hlZFR1dCwgY2VudGVyUG9pbnQpO1xuICAgIH1cblxuICAgIGlmIChzY2FsZURlbHRhICE9PSAxKSB7XG4gICAgICBwaW5jaGVkR3JvdXAuc2NhbGUoc2NhbGVEZWx0YSk7XG5cbiAgICAgIC8vIGNoZWNrIGlmIHNjYWxpbmcgd2VudCBhd3J5LCBjYW5ub3QgYmUgdG9vIGJpZyBvciB0b28gc21hbGxcbiAgICAgIC8vIGh5cG90ZW51c2UgbXVzdCBmaXQgd2l0aGluIHZpZXcgYm91bmRzXG4gICAgICBjb25zdCBoeXBvdCA9IHV0aWwuaHlwb3QocGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCwgcGluY2hlZEdyb3VwLmJvdW5kcy5oZWlnaHQpO1xuICAgICAgY29uc3Qgdmlld0h5cG90ID0gdXRpbC5oeXBvdChwYXBlci52aWV3LnZpZXdTaXplLndpZHRoLCBwYXBlci52aWV3LnZpZXdTaXplLmhlaWdodClcbiAgICAgIGlmIChoeXBvdCA+PSB2aWV3SHlwb3QpIHtcbiAgICAgICAgLy8gc2hhcGUgaXMgdG9vIGJpZywgYnJpbmcgaXQgYmFjayBkb3duIHRvIHNpemVcbiAgICAgICAgc2NhbGVEZWx0YSA9IHZpZXdIeXBvdCAqIG1heFNjYWxlRmFjdG9yIC8gaHlwb3Q7XG4gICAgICAgIHBpbmNoZWRHcm91cC5zY2FsZShzY2FsZURlbHRhKTtcbiAgICAgIH0gZWxzZSBpZiAoaHlwb3QgPD0gbWluU2hhcGVTaXplKSB7XG4gICAgICAgIHNjYWxlRGVsdGEgPSBtaW5TaGFwZVNpemUgLyBoeXBvdDtcbiAgICAgICAgcGluY2hlZEdyb3VwLnNjYWxlKHNjYWxlRGVsdGEpO1xuICAgICAgfVxuICAgIH1cbiAgICBwaW5jaGVkR3JvdXAucm90YXRlKHJvdGF0aW9uRGVsdGEpO1xuXG4gICAgcGluY2hlZEdyb3VwLmRhdGEuc2NhbGUgKj0gc2NhbGVEZWx0YTtcbiAgICBwaW5jaGVkR3JvdXAuZGF0YS5yb3RhdGlvbiArPSByb3RhdGlvbkRlbHRhO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBpbmNoRW5kKGV2ZW50KSB7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgd2luZG93Lmthbi5sYXN0RXZlbnQgPSBldmVudDtcbiAgbGV0IHBpbmNoZWRHcm91cCA9IHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwO1xuICBsZXQgJHBpbmNoZWRUdXQgPSB3aW5kb3cua2FuLnBpbmNoZWRUdXQ7XG4gIGxldCBvcmlnaW5hbFBvc2l0aW9uID0gd2luZG93Lmthbi5vcmlnaW5hbFBvc2l0aW9uO1xuICBsZXQgb3JpZ2luYWxSb3RhdGlvbiA9IHdpbmRvdy5rYW4ub3JpZ2luYWxSb3RhdGlvbjtcbiAgbGV0IG9yaWdpbmFsU2NhbGUgPSB3aW5kb3cua2FuLm9yaWdpbmFsU2NhbGU7XG5cbiAgaWYgKCEhcGluY2hlZEdyb3VwKSB7XG4gICAgcGluY2hlZEdyb3VwLmRhdGEuZnJlc2ggPSB0cnVlO1xuICAgIGxldCBtb3ZlID0ge1xuICAgICAgaWQ6IHBpbmNoZWRHcm91cC5pZCxcbiAgICAgIHR5cGU6ICd0cmFuc2Zvcm0nXG4gICAgfTtcbiAgICBpZiAocGluY2hlZEdyb3VwLnBvc2l0aW9uICE9IG9yaWdpbmFsUG9zaXRpb24pIHtcbiAgICAgIG1vdmUucG9zaXRpb24gPSBvcmlnaW5hbFBvc2l0aW9uO1xuICAgIH1cblxuICAgIGlmIChwaW5jaGVkR3JvdXAuZGF0YS5yb3RhdGlvbiAhPSBvcmlnaW5hbFJvdGF0aW9uKSB7XG4gICAgICBtb3ZlLnJvdGF0aW9uID0gb3JpZ2luYWxSb3RhdGlvbiAtIHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uO1xuICAgIH1cblxuICAgIGlmIChwaW5jaGVkR3JvdXAuZGF0YS5zY2FsZSAhPSBvcmlnaW5hbFNjYWxlKSB7XG4gICAgICBtb3ZlLnNjYWxlID0gb3JpZ2luYWxTY2FsZSAvIHBpbmNoZWRHcm91cC5kYXRhLnNjYWxlO1xuICAgIH1cblxuICAgIGlmIChwaW5jaGVkR3JvdXAuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBwaW5jaGVkR3JvdXAuX25hbWVkQ2hpbGRyZW4uc2hhcGVQYXRoICYmIHBpbmNoZWRHcm91cC5fbmFtZWRDaGlsZHJlbi5zaGFwZVBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgLy8gdXBkYXRlIHNoYXBlUGF0aCBzb3VuZCBvYmplY3QgaWYgcG9zc2libGVcbiAgICAgIHNvdW5kLnJlbW92ZVNoYXBlRnJvbUNvbXBvc2l0aW9uKHBpbmNoZWRHcm91cCk7IC8vIHNvdW5kIGlzIG5vdyB3cm9uZ1xuXG4gICAgICBsZXQgc2hhcGVQYXRoID0gcGluY2hlZEdyb3VwLl9uYW1lZENoaWxkcmVuLnNoYXBlUGF0aFswXTtcbiAgICAgIGxldCBzaGFwZVNvdW5kT2JqID0gc291bmQuZ2V0U2hhcGVTb3VuZE9iaihzaGFwZVBhdGgpO1xuICAgICAgd2luZG93Lmthbi5jb21wb3NpdGlvbi5wdXNoKHNoYXBlU291bmRPYmopO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4ubW92ZXMucHVzaChtb3ZlKTtcblxuICAgIGlmIChNYXRoLmFicyhldmVudC52ZWxvY2l0eSkgPiAxKSB7XG4gICAgICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dEJ5TmFtZSgnc3dpcGUnKTtcblxuICAgICAgLy8gaGlkZSBhbnkgY29ubmVjdGVkIHR1dHNcbiAgICAgIGlmICghISRwaW5jaGVkVHV0KSB7XG4gICAgICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0KCRwaW5jaGVkVHV0KTtcbiAgICAgIH1cbiAgICAgIC8vIGRpc3Bvc2Ugb2YgZ3JvdXAgb2Zmc2NyZWVuXG4gICAgICBpZiAoY29uZmlnLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgICBzaGFwZS5kZXN0cm95R3JvdXBQb3BzKHBpbmNoZWRHcm91cCk7XG4gICAgICAgIHBpbmNoZWRHcm91cC5kYXRhLmZyZXNoID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHBpbmNoZWRHcm91cC5kYXRhLnRocm93biA9IHRydWU7XG4gICAgICB0aHJvd1BpbmNoZWRHcm91cCgpO1xuICAgIH1cblxuICAgIC8vIGlmIChjb25maWcucnVuQW5pbWF0aW9ucykge1xuICAgIC8vICAgcGluY2hlZEdyb3VwLmFuaW1hdGUoe1xuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgc2NhbGU6IDAuOFxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBzZXR0aW5nczoge1xuICAgIC8vICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgLy8gICAgICAgZWFzaW5nOiBcImVhc2VPdXRcIixcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG4gICAgLy8gfVxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgfVxuXG4gIC8vIGlmIGFuIG92ZXJsYXkgd2FzIGludGVycnVwdGVkLCBvcGVuIGl0IHVwIG5vd1xuICBpZiAod2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5ICE9PSBudWxsKSB7XG4gICAgbGV0IHNjaGVkdWxlZE92ZXJsYXkgPSB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXk7XG4gICAgd2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5ID0gbnVsbDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KHNjaGVkdWxlZE92ZXJsYXkpO1xuICAgIH0sIHRpbWluZy5vdmVybGF5RGVsYXkpO1xuICB9XG5cbiAgd2luZG93Lmthbi5waW5jaGluZyA9IGZhbHNlO1xuXG4gIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgc2hhcGUudXBkYXRlUG9wcygpO1xuICB9XG5cbiAgLy8gY29uc29sZS5sb2coJ3BpbmNoIGRvbmUnKTtcbiAgLy8gaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogZmFsc2UgfSk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCd0b3VjaCBlbmFibGVkJyk7XG4gICAgaGFtbWVyQ2FudmFzLm9uKCdwaW5jaHN0YXJ0JywgcGluY2hTdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcbiAgICAvLyBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiB0cnVlIH0pO1xuICAgIC8vIGhhbW1lckNhbnZhcy5vbigncGluY2hzdGFydCcsIHBpbmNoU3RhcnQpO1xuICAgIC8vIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCk7XG4gICAgLy8gZW5hYmxlVGFwRXZlbnRzKCk7XG4gICAgLy8gd2luZG93Lmthbi5waW5jaGluZyA9IGZhbHNlO1xuICAgIC8vIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgfSwgdGltaW5nLmlucHV0RGVsYXkpO1xufVxuXG5mdW5jdGlvbiBwaW5jaENhbmNlbChldmVudCkge1xuICAvLyBjb25zb2xlLmxvZyhldmVudCk7XG4gIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBjb25zb2xlLmxvZygncGluY2hjYW5jZWwnKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiB0cnVlIH0pO1xuICBoYW1tZXJDYW52YXMub24oJ3BpbmNoc3RhcnQnLCBwaW5jaFN0YXJ0KTtcbiAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgZW5hYmxlVGFwRXZlbnRzKCk7XG5cbiAgd2luZG93Lmthbi5waW5jaGluZyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0aHJvd1BpbmNoZWRHcm91cCgpIHtcblxuICBjb25zdCB2ZWxvY2l0eU11bHRpcGxpZXIgPSAyNTtcbiAgY29uc3QgbGFzdEV2ZW50ID0gd2luZG93Lmthbi5sYXN0RXZlbnQ7XG4gIGNvbnN0IHZpZXdXaWR0aCA9IHBhcGVyLnZpZXcudmlld1NpemUud2lkdGg7XG4gIGNvbnN0IHZpZXdIZWlnaHQgPSBwYXBlci52aWV3LnZpZXdTaXplLmhlaWdodDtcbiAgbGV0IHBpbmNoZWRHcm91cCA9IHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwO1xuXG4gIGlmIChwaW5jaGVkR3JvdXAgPT09IG51bGwgfHwgKHBpbmNoZWRHcm91cC5kYXRhICYmIHBpbmNoZWRHcm91cC5kYXRhLnRocm93biA9PT0gZmFsc2UpKSByZXR1cm47XG4gIGlmIChwaW5jaGVkR3JvdXAucG9zaXRpb24ueCA8PSAwIC0gcGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCB8fFxuICAgICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uLnggPj0gdmlld1dpZHRoICsgcGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCB8fFxuICAgICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uLnkgPD0gMCAtIHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0IHx8XG4gICAgICBwaW5jaGVkR3JvdXAucG9zaXRpb24ueSA+PSB2aWV3SGVpZ2h0ICsgcGluY2hlZEdyb3VwLmJvdW5kcy5oZWlnaHQpIHtcbiAgICAgICAgcGluY2hlZEdyb3VwLmRhdGEub2ZmU2NyZWVuID0gdHJ1ZTtcbiAgICAgICAgcGluY2hlZEdyb3VwLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgc291bmQucmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24ocGluY2hlZEdyb3VwKTtcbiAgICAgICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBudWxsO1xuICAgIHJldHVybjtcbiAgfVxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhyb3dQaW5jaGVkR3JvdXApO1xuICBjb25zdCBuZXdYID0gcGluY2hlZEdyb3VwLnBvc2l0aW9uLnggKyBsYXN0RXZlbnQudmVsb2NpdHlYICogdmVsb2NpdHlNdWx0aXBsaWVyO1xuICBjb25zdCBuZXdZID0gcGluY2hlZEdyb3VwLnBvc2l0aW9uLnkgKyBsYXN0RXZlbnQudmVsb2NpdHlZICogdmVsb2NpdHlNdWx0aXBsaWVyO1xuICBjb25zdCBuZXdQb3MgPSBuZXcgUG9pbnQobmV3WCwgbmV3WSk7XG4gIHBpbmNoZWRHcm91cC5wb3NpdGlvbiA9IG5ld1Bvcztcbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRJc09uQ2FudmFzKGV2ZW50KSB7XG4gIGlmICghZXZlbnQpIHJldHVybiBmYWxzZTtcbiAgaWYgKGV2ZW50LnRhcmdldCAhPSB1aS5kcmF3Q2FudmFzKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xuXG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBjb250ZXh0dWFsVHV0cyA9IGNvbmZpZy5jb250ZXh0dWFsVHV0cztcbmNvbnN0IHR1dEFycm93SGVpZ2h0ID0gMTY7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXRCeU5hbWUodHV0TmFtZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRleHR1YWxUdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHR1dE9iaiA9IGNvbnRleHR1YWxUdXRzW2ldO1xuXG4gICAgaWYgKHR1dE9iai50eXBlID09PSB0dXROYW1lKSB7XG4gICAgICByZXR1cm4gdHV0T2JqLmNvcHk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGxUdXRzQ29tcGxldGVkKCkge1xuICBjb25zdCB0dXRvcmlhbENvbXBsZXRpb25PYmogPSB3aW5kb3cua2FuLnR1dG9yaWFsQ29tcGxldGlvbjtcbiAgbGV0IGNvbXBsZXRpb24gPSB0cnVlO1xuXG4gIE9iamVjdC5rZXlzKHR1dG9yaWFsQ29tcGxldGlvbk9iaikuZm9yRWFjaCgoa2V5LCB2YWwpID0+IHtcbiAgICBjb21wbGV0aW9uID0gY29tcGxldGlvbiAmJiB0dXRvcmlhbENvbXBsZXRpb25PYmpba2V5XTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbXBsZXRpb24gPT09IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb250ZXh0dWFsVHV0KHR1dE5hbWUpIHtcbiAgaWYgKCEhd2luZG93Lmthbi5zaGFwZVBhdGggJiYgd2luZG93Lmthbi5zaGFwZVBhdGgubGVuZ3RoID4gMCkge1xuICAgIGhpZGVDb250ZXh0dWFsVHV0cygpO1xuICAgIHdpbmRvdy5rYW4uc2hhcGVzU2luY2VUdXQgPSAwO1xuXG4gICAgbGV0IHNoYXBlUGF0aCA9IHdpbmRvdy5rYW4uc2hhcGVQYXRoO1xuICAgIGxldCBzaGFwZUNlbnRlciA9IHNoYXBlUGF0aC5ib3VuZHMuY2VudGVyO1xuXG4gICAgbGV0IHR1dENvcHkgPSBnZXRUdXRCeU5hbWUodHV0TmFtZSk7XG5cbiAgICBpZiAodHV0Q29weSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgJHR1dCA9ICQoYC50dXRbZGF0YS10dXQtdHlwZT0nJHt0dXROYW1lfSddYCk7XG4gICAgICBpZiAoJHR1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHR1dFBvcyA9IGdldFR1dFBvc2l0aW9uRnJvbUNlbnRlcigkdHV0LCBzaGFwZUNlbnRlcik7XG4gICAgICAgICR0dXQuY3NzKHt0b3A6IGAke3R1dFBvcy55fXB4YCwgbGVmdDogYCR7dHV0UG9zLnh9cHhgLCB2aXNpYmlsaXR5OiAndmlzaWJsZSd9KTtcbiAgICAgICAgJHR1dC5hZGRDbGFzcygnYW5pbWF0ZWQgYm91bmNlSW4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVDb250ZXh0dWFsVHV0KCR0dXQpIHtcbiAgJHR1dC5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlQ29udGV4dHVhbFR1dEJ5TmFtZSh0dXROYW1lKSB7XG4gIGNvbnN0ICR0dXQgPSAkKGAudHV0W2RhdGEtdHV0LXR5cGU9JyR7dHV0TmFtZX0nXWApO1xuICBoaWRlQ29udGV4dHVhbFR1dCgkdHV0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVDb250ZXh0dWFsVHV0cygpIHtcbiAgY29uc3QgJHR1dHMgPSAkKCcuY29udGV4dHVhbC10dXRzIC50dXQnKTtcbiAgJHR1dHMuY3NzKHt2aXNpYmlsaXR5OiAnaGlkZGVuJ30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDb250ZXh0dWFsVHV0cygpIHtcbiAgaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIHdpbmRvdy5rYW4udHV0b3JpYWxDb21wbGV0aW9uID0ge1xuICAgIFwiZmlsbFwiOiBmYWxzZSxcbiAgICBcInBpbmNoXCI6IGZhbHNlLFxuICAgIFwic3dpcGVcIjogZmFsc2VcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVDb250ZXh0dWFsVHV0KCR0dXQsIGNlbnRlclBvaW50KSB7XG4gIGxldCB0dXRQb3MgPSBnZXRUdXRQb3NpdGlvbkZyb21DZW50ZXIoJHR1dCwgY2VudGVyUG9pbnQpO1xuICAkdHV0LmNzcyh7dG9wOiBgJHt0dXRQb3MueX1weGAsIGxlZnQ6IGAke3R1dFBvcy54fXB4YH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHV0UG9zaXRpb25Gcm9tQ2VudGVyKCR0dXQsIGNlbnRlclBvaW50KSB7XG4gIGNvbnN0IHR1dFdpZHRoID0gJHR1dC5vdXRlcldpZHRoKCk7XG4gIGNvbnN0IHR1dEhlaWdodCA9ICR0dXQub3V0ZXJIZWlnaHQoKTtcbiAgY29uc3QgbGVmdFBvcyA9IGNlbnRlclBvaW50LnggLSAodHV0V2lkdGggLyAyKTtcbiAgY29uc3QgdG9wUG9zID0gY2VudGVyUG9pbnQueSAtIHR1dEhlaWdodCAtIHR1dEFycm93SGVpZ2h0O1xuICByZXR1cm4gbmV3IFBvaW50KGxlZnRQb3MsIHRvcFBvcyk7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcbmNvbnN0IHR1dG9yaWFsID0gcmVxdWlyZSgnLi90dXRvcmlhbCcpO1xuY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbmNvbnN0IHNoYXBlID0gcmVxdWlyZSgnLi9zaGFwZScpO1xuY29uc3Qgc2hhcmUgPSByZXF1aXJlKCcuL3NoYXJlJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuY29uc3QgdGFwRXZlbnQgPSAnY2xpY2sgdGFwIHRvdWNoJztcblxuY29uc3QgcGxheWluZ0NsYXNzID0gc291bmQucGxheWluZ0NsYXNzO1xuY29uc3QgcGxheUVuYWJsZWRDbGFzcyA9IHNvdW5kLnBsYXlFbmFibGVkQ2xhc3M7XG5cbmNvbnN0ICRuZXdCdXR0b24gPSAkKCcuY29udHJvbHMgLm5ldycpO1xuY29uc3QgJHVuZG9CdXR0b24gPSAkKCcuY29udHJvbHMgLnVuZG8nKTtcbmNvbnN0ICRwbGF5QnV0dG9uID0gJCgnLmNvbnRyb2xzIC5wbGF5LXN0b3AnKTtcbmNvbnN0ICRzaGFyZUJ1dHRvbiA9ICQoJy5jb250cm9scyAuc2hhcmUnKTtcbmNvbnN0ICR0aXBzQnV0dG9uID0gJCgnLmNvbnRyb2xzIC50aXBzJyk7XG5cbmV4cG9ydCBjb25zdCBkcmF3Q2FudmFzID0gJCgnI2NhbnZhcycpWzBdO1xuZXhwb3J0IGNvbnN0IHRpcHNPdmVybGF5ID0gJCgnLm92ZXJsYXkudGlwcycpWzBdO1xuXG5jb25zdCBkaXRoZXJlZENsYXNzID0gJ2RpdGhlcmVkJztcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGluaXRMb2dvUmVmcmVzaCgpO1xuICBpbml0Q29sb3JQYWxldHRlKCk7XG4gIGluaXROZXdCdXR0b24oKTtcbiAgaW5pdFVuZG9CdXR0b24oKTtcbiAgaW5pdFBsYXlCdXR0b24oKTtcbiAgaW5pdFRpcHNCdXR0b24oKTtcbiAgaW5pdFNoYXJlQnV0dG9uKCk7XG4gIGluaXRDb250ZXh0dWFsVHV0cygpO1xuICByZXNldENhbnZhcygpO1xufVxuXG5mdW5jdGlvbiB1bmRpdGhlckFsbEJ1dHRvbnMoKSB7XG4gICQoYC5jb250cm9scyAuJHtkaXRoZXJlZENsYXNzfWApLnJlbW92ZUNsYXNzKGRpdGhlcmVkQ2xhc3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcywgdW5kaXRoZXIgPSBmYWxzZSkge1xuICBpZiAoYnV0dG9uTmFtZXMubGVuZ3RoID4gMCkge1xuICAgIGlmICgkLmlzQXJyYXkoYnV0dG9uTmFtZXMpKSB7XG4gICAgICBidXR0b25OYW1lcy5mb3JFYWNoKChuYW1lKSA9PiBkaXRoZXJCdXR0b25CeU5hbWUobmFtZSwgdW5kaXRoZXIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGl0aGVyQnV0dG9uQnlOYW1lKGJ1dHRvbk5hbWVzLCB1bmRpdGhlcik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmRpdGhlckJ1dHRvbnNCeU5hbWUoYnV0dG9uTmFtZXMpIHtcbiAgZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcywgdHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSwgdW5kaXRoZXIgPSBmYWxzZSkge1xuICBsZXQgJGJ1dHRvbiA9ICQoYC5jb250cm9scyAuJHtidXR0b25OYW1lfWApO1xuICAvLyBjb25zb2xlLmxvZygkYnV0dG9uKTtcbiAgaWYgKCRidXR0b24ubGVuZ3RoID4gMCkge1xuICAgIGlmICh1bmRpdGhlciAhPT0gdHJ1ZSkge1xuICAgICAgJGJ1dHRvbi5hZGRDbGFzcyhkaXRoZXJlZENsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGJ1dHRvbi5yZW1vdmVDbGFzcyhkaXRoZXJlZENsYXNzKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uQnlOYW1lKGJ1dHRvbk5hbWUpIHtcbiAgZGl0aGVyQnV0dG9uQnlOYW1lKGJ1dHRvbk5hbWUsIHRydWUpO1xufVxuXG5mdW5jdGlvbiB1bmRpdGhlckJ1dHRvbnNCeU5hbWUoYnV0dG9uTmFtZXMpIHtcbiAgZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIG5ld1ByZXNzZWQoKSB7XG4gIC8vIGNvbnNvbGUubG9nKCduZXcgcHJlc3NlZCcpO1xuICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uID0gW107XG4gIHBhcGVyLnByb2plY3QuYWN0aXZlTGF5ZXIucmVtb3ZlQ2hpbGRyZW4oKTtcbiAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIGRpdGhlckJ1dHRvbnNCeU5hbWUoWyd1bmRvJywgJ25ldycsICdwbGF5LXN0b3AnLCAnc2hhcmUnXSk7XG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIC8vIHdpbmRvdy5rYW4udXNlckhhc0RyYXduRmlyc3RTaGFwZSA9IGZhbHNlO1xuICAvLyB0dXRvcmlhbC5yZXNldENvbnRleHR1YWxUdXRzKCk7XG59XG5cbmZ1bmN0aW9uIHVuZG9QcmVzc2VkKCkge1xuICBzb3VuZC5zdG9wUGxheWluZygpO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcblxuICBjb25zdCB0cmFuc3BhcmVudCA9IG5ldyBDb2xvcigwLCAwKTtcbiAgLy8gY29uc29sZS5sb2coJ3VuZG8gcHJlc3NlZCcpO1xuICBpZiAoISh3aW5kb3cua2FuLm1vdmVzLmxlbmd0aCA+IDApKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ25vIG1vdmVzIHlldCcpO1xuICAgIHdpbmRvdy5rYW4udXNlckhhc0RyYXduRmlyc3RTaGFwZSA9IGZhbHNlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBsYXN0TW92ZSA9IHdpbmRvdy5rYW4ubW92ZXMucG9wKCk7XG4gIGxldCBpdGVtID0gcHJvamVjdC5nZXRJdGVtKHtcbiAgICBpZDogbGFzdE1vdmUuaWRcbiAgfSk7XG5cbiAgaWYgKGl0ZW0pIHtcbiAgICBpdGVtLnZpc2libGUgPSB0cnVlOyAvLyBtYWtlIHN1cmVcbiAgICBzd2l0Y2gobGFzdE1vdmUudHlwZSkge1xuICAgICAgY2FzZSAnbmV3R3JvdXAnOlxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3ZpbmcgZ3JvdXAnKTtcbiAgICAgICAgc291bmQucmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24oaXRlbSk7XG4gICAgICAgIHV0aWwuY2xlYXJHcm91cFBvcHMoaXRlbSk7XG4gICAgICAgIGl0ZW0ucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKCdyZW1vdmVkR3JvdXAnIGluIGxhc3RNb3ZlKSB7XG4gICAgICAgICAgLy8gYnJpbmcgYmFjayByZW1vdmVkIGdyb3VwXG4gICAgICAgICAgbGFzdE1vdmUucmVtb3ZlZEdyb3VwLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIGxhc3RNb3ZlLnJlbW92ZWRHcm91cC5kYXRhLmZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICBzaGFwZS51cGRhdGVQb3BzKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGNvbnN0IG51bUdyb3VwcyA9IHV0aWwuZ2V0TnVtR3JvdXBzKCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdudW1Hcm91cHMnLCBudW1Hcm91cHMpO1xuXG4gICAgICAgIGlmIChudW1Hcm91cHMgPD0gMCkge1xuICAgICAgICAgIGRpdGhlckJ1dHRvbnNCeU5hbWUoWyd1bmRvJywgJ25ldycsICdwbGF5LXN0b3AnLCAnc2hhcmUnXSk7XG4gICAgICAgICAgJGJvZHkucmVtb3ZlQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5kaXRoZXJCdXR0b25zQnlOYW1lKFsndW5kbycsICduZXcnLCAncGxheS1zdG9wJywgJ3NoYXJlJ10pO1xuICAgICAgICAgICRib2R5LmFkZENsYXNzKHNvdW5kLnBsYXlFbmFibGVkQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmaWxsQ2hhbmdlJzpcbiAgICAgICAgaWYgKGxhc3RNb3ZlLnRyYW5zcGFyZW50KSB7XG4gICAgICAgICAgaXRlbS5maWxsQ29sb3IgPSBsYXN0TW92ZS5maWxsO1xuICAgICAgICAgIGl0ZW0uc3Ryb2tlQ29sb3IgPSBsYXN0TW92ZS5maWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW0uZmlsbENvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgaXRlbS5zdHJva2VDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgICB9XG4gICAgICBjYXNlICd0cmFuc2Zvcm0nOlxuICAgICAgICBpdGVtLmRhdGEuZnJlc2ggPSB0cnVlO1xuICAgICAgICBpZiAoISFsYXN0TW92ZS5wb3NpdGlvbikge1xuICAgICAgICAgIGl0ZW0ucG9zaXRpb24gPSBsYXN0TW92ZS5wb3NpdGlvblxuICAgICAgICAgIGlmIChpdGVtLmRhdGEgJiYgaXRlbS5kYXRhLnR1dCAmJiBpdGVtLmRhdGEudHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGl0ZW0gaGFzIGNvbm5lY3RlZCBjb250ZXh0dWFsIHR1dCwgbW92ZSBpdCB0byB0aGUgcmlnaHQgcGxhY2VcbiAgICAgICAgICAgIGNvbnN0ICR0dXQgPSAkKGAudHV0W2RhdGEtdHV0LXR5cGU9JyR7dHV0TmFtZX0nXWApO1xuICAgICAgICAgICAgdHV0b3JpYWwubW92ZUNvbnRleHR1YWxUdXQoJHR1dCwgbGFzdE1vdmUucG9zaXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISFsYXN0TW92ZS5yb3RhdGlvbikge1xuICAgICAgICAgIGl0ZW0ucm90YXRpb24gPSBsYXN0TW92ZS5yb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFsYXN0TW92ZS5zY2FsZSkge1xuICAgICAgICAgIGl0ZW0uc2NhbGUobGFzdE1vdmUuc2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgICAgICAgc2hhcGUudXBkYXRlUG9wcygpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Vua25vd24gY2FzZScpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZygnY291bGQgbm90IGZpbmQgbWF0Y2hpbmcgaXRlbScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBsYXlQcmVzc2VkKCkge1xuICAvLyBjb25zb2xlLmxvZygncGxheSBwcmVzc2VkJyk7XG4gIC8vIHNvdW5kLnN0b3BDb21wb3NpdGlvbigpO1xuICAvLyBvdmVybGF5cy5jbG9zZUFuZFJlc2V0T3ZlcmxheXMoKTtcbiAgLy8gdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIGxldCBwbGF5aW5nID0gd2luZG93Lmthbi5wbGF5aW5nO1xuICAvLyBjb25zb2xlLmxvZyhwbGF5aW5nLCB1dGlsLmdldE51bUdyb3VwcygpID4gMiwgIXBsYXlpbmcgJiYgdXRpbC5nZXROdW1Hcm91cHMoKSA+IDIsICRib2R5KTtcblxuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCk7XG4gIGlmICghcGxheWluZyAmJiB1dGlsLmdldE51bUdyb3VwcygpID4gMikge1xuICAgIC8vIGNvbnNvbGUubG9nKCdzdGFydGluZyBwbGF5aW5nJyk7XG4gICAgc291bmQuc3RhcnRQbGF5aW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3N0b3BwaW5nIHBsYXlpbmcnKTtcbiAgICBzb3VuZC5zdG9wUGxheWluZyh0cnVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0aXBzUHJlc3NlZCgpIHtcbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ3RpcHMnKTtcbiAgLy8gY29uc29sZS5sb2coJ3RpcHMgcHJlc3NlZCcpO1xufVxuXG5mdW5jdGlvbiBzaGFyZVByZXNzZWQoKSB7XG4gIHNoYXJlLnJlY29yZCgpO1xuICAvLyBjb25zb2xlLmxvZygnc2hhcmUgcHJlc3NlZCcpO1xuICAvLyBzb3VuZC5zdG9wUGxheWluZygpO1xuICAvLyBpZiAoJGJvZHkuaGFzQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcykpIHtcbiAgLy8gICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnc2hhcmUnKTtcbiAgLy8gfVxufVxuXG5mdW5jdGlvbiBpbml0TG9nb1JlZnJlc2goKSB7XG4gICQoJy5tYWluLWxvZ28nKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0Q29sb3JQYWxldHRlKCkge1xuICBjb25zdCAkcGFsZXR0ZVdyYXAgPSAkKCd1bC5wYWxldHRlLWNvbG9ycycpO1xuICBjb25zdCAkcGFsZXR0ZUNvbG9ycyA9ICRwYWxldHRlV3JhcC5maW5kKCdsaScpO1xuICBjb25zdCBwYWxldHRlQ29sb3JTaXplID0gMjA7XG4gIGNvbnN0IHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSA9IDMwO1xuICBjb25zdCBwYWxldHRlU2VsZWN0ZWRDbGFzcyA9ICdwYWxldHRlLXNlbGVjdGVkJztcblxuICAvLyBob29rIHVwIGNsaWNrXG4gICRwYWxldHRlQ29sb3JzLm9uKCdjbGljayB0YXAgdG91Y2gnLCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIGxldCAkc3ZnID0gJCh0aGlzKS5maW5kKCdzdmcucGFsZXR0ZS1jb2xvcicpO1xuXG4gICAgICBpZiAoISRzdmcuaGFzQ2xhc3MocGFsZXR0ZVNlbGVjdGVkQ2xhc3MpKSB7XG4gICAgICAgICQoJy4nICsgcGFsZXR0ZVNlbGVjdGVkQ2xhc3MpXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKHBhbGV0dGVTZWxlY3RlZENsYXNzKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHBhbGV0dGVDb2xvclNpemUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhbGV0dGVDb2xvclNpemUpXG4gICAgICAgICAgLmZpbmQoJ3JlY3QnKVxuICAgICAgICAgIC5hdHRyKCdyeCcsIDApXG4gICAgICAgICAgLmF0dHIoJ3J5JywgMCk7XG5cbiAgICAgICAgJHN2Zy5hZGRDbGFzcyhwYWxldHRlU2VsZWN0ZWRDbGFzcylcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSlcbiAgICAgICAgICAuZmluZCgncmVjdCcpXG4gICAgICAgICAgLmF0dHIoJ3J4JywgcGFsZXR0ZVNlbGVjdGVkQ29sb3JTaXplIC8gMilcbiAgICAgICAgICAuYXR0cigncnknLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUgLyAyKVxuXG4gICAgICAgIHdpbmRvdy5rYW4uY3VycmVudENvbG9yID0gJHN2Zy5maW5kKCdyZWN0JykuYXR0cignZmlsbCcpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnJWNjb2xvcicsICdjb2xvcjpyZWQnLCBjb2xvci5nZXRDb2xvck5hbWUod2luZG93Lmthbi5jdXJyZW50Q29sb3IpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdE5ld0J1dHRvbigpIHtcbiAgJCgnLm1haW4tY29udHJvbHMgLm5ldycpLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIG5ld1ByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0VW5kb0J1dHRvbigpIHtcbiAgJCgnLm1haW4tY29udHJvbHMgLnVuZG8nKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkYm9keS5oYXNDbGFzcyhwbGF5aW5nQ2xhc3MpKSB7XG4gICAgICB1bmRvUHJlc3NlZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRQbGF5QnV0dG9uKCkge1xuICAkKCcubWFpbi1jb250cm9scyAucGxheS1zdG9wIC5wbGF5Jykub24odGFwRXZlbnQsIHNvdW5kLnN0YXJ0UGxheWluZyk7XG4gICQoJy5tYWluLWNvbnRyb2xzIC5wbGF5LXN0b3AgLnN0b3AnKS5vbih0YXBFdmVudCwgc291bmQuc3RvcFBsYXlpbmcpO1xufVxuXG5mdW5jdGlvbiBpbml0VGlwc0J1dHRvbigpIHtcbiAgJCgnLmNvbnRyb2xzIC50aXBzJykub24odGFwRXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgIGlmICghJGJvZHkuaGFzQ2xhc3MocGxheWluZ0NsYXNzKSkge1xuICAgICAgdGlwc1ByZXNzZWQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0U2hhcmVCdXR0b24oKSB7XG4gICQoJy5jb250cm9scyAuc2hhcmUnKS5vbih0YXBFdmVudCwgc2hhcmVQcmVzc2VkKTtcbn1cblxuZnVuY3Rpb24gaW5pdENvbnRleHR1YWxUdXRzKCkge1xuICBjb25zdCAkdHV0cyA9ICQoJy5jb250ZXh0dWFsLXR1dHMgLnR1dCcpO1xuICAkdHV0cy5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDYW52YXMoKSB7XG4gIHBhcGVyLnByb2plY3QuY2xlYXIoKTtcblxuICAvLyBhZGQgcmFuZG9tIGJhY2tncm91bmRcbiAgcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5uYW1lID0gJ2JhY2tncm91bmQnO1xuICBjb25zdCBudW1DYW52YXNzZXMgPSAxMDtcbiAgY29uc3QgcmFuZG9tQ2FudmFzSW5kZXggPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAobnVtQ2FudmFzc2VzIC0gMSkpICsgMTsgLy8gWzEsIG51bUNhbnZhc3Nlc11cbiAgY29uc3QgY2FudmFzQmcgPSBuZXcgUmFzdGVyKGBjYW52YXMtJHtyYW5kb21DYW52YXNJbmRleH1gKTtcbiAgY2FudmFzQmcubmFtZSA9ICdjYW52YXNCZyc7XG4gIGNhbnZhc0JnLnBvc2l0aW9uID0gcGFwZXIudmlldy5jZW50ZXI7XG5cbiAgLy8gYWRkIGNhbnZhcyBsYXllclxuICBjb25zdCBzY2FsZUZhY3Rvckhvcml6b250YWwgPSBwYXBlci52aWV3LnZpZXdTaXplLndpZHRoIC8gY2FudmFzQmcuc2l6ZS53aWR0aDtcbiAgY29uc3Qgc2NhbGVGYWN0b3JWZXJ0aWNhbCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0IC8gY2FudmFzQmcuc2l6ZS5oZWlnaHQ7XG4gIGNhbnZhc0JnLnNjYWxlKE1hdGgubWF4KHNjYWxlRmFjdG9ySG9yaXpvbnRhbCwgc2NhbGVGYWN0b3JWZXJ0aWNhbCkpO1xuICBsZXQgbGF5ZXIgPSBuZXcgTGF5ZXIoKTsgLy8gaW5pdCBuZXcgbGF5ZXIgdGhhdCBhbGwgb3RoZXIgc2hhcGVzIHdpbGwgYmUgZHJhd24gdXBvblxuICBwYXBlci5wcm9qZWN0LmFjdGl2ZUxheWVyLm5hbWUgPSAnY2FudmFzJztcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbi8vIENvbnZlcnRzIGZyb20gZGVncmVlcyB0byByYWRpYW5zLlxuZXhwb3J0IGZ1bmN0aW9uIHJhZChkZWdyZWVzKSB7XG4gIHJldHVybiBkZWdyZWVzICogTWF0aC5QSSAvIDE4MDtcbn07XG5cbi8vIENvbnZlcnRzIGZyb20gcmFkaWFucyB0byBkZWdyZWVzLlxuZXhwb3J0IGZ1bmN0aW9uIGRlZyhyYWRpYW5zKSB7XG4gIHJldHVybiByYWRpYW5zICogMTgwIC8gTWF0aC5QSTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBoeXBvdChhLCBiKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYSwgMikgKyBNYXRoLnBvdyhiLCAyKSk7IC8vIHB5dGhhZ29yZWFuIVxufVxuXG4vLyByZXR1cm5zIGFic29sdXRlIHZhbHVlIG9mIHRoZSBkZWx0YSBvZiB0d28gYW5nbGVzIGluIHJhZGlhbnNcbmV4cG9ydCBmdW5jdGlvbiBhbmdsZURlbHRhKHgsIHkpIHtcbiAgcmV0dXJuIE1hdGguYWJzKE1hdGguYXRhbjIoTWF0aC5zaW4oeSAtIHgpLCBNYXRoLmNvcyh5IC0geCkpKTs7XG59XG5cbi8vIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuZXhwb3J0IGZ1bmN0aW9uIGRlbHRhKHAxLCBwMikge1xuICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHAxLnggLSBwMi54LCAyKSArIE1hdGgucG93KHAxLnkgLSBwMi55LCAyKSk7IC8vIHB5dGhhZ29yZWFuIVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZSgpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROdW1WaXNpYmxlR3JvdXBzKCkge1xuICBjb25zdCBncm91cHMgPSBnZXRWaXNpYmxlR3JvdXBzKCk7XG4gIHJldHVybiBncm91cHMubGVuZ3RoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmlzaWJsZUdyb3VwcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC52aXNpYmxlID09PSB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsR3JvdXBzKCkge1xuICByZXR1cm4gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYW55U2hhcGVzT25DYW52YXMoKSB7XG4gIGNvbnN0IGdyb3VwcyA9IGdldFZpc2libGVHcm91cHMoKTtcbiAgcmV0dXJuIGdyb3Vwcy5sZW5ndGggPiAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtR3JvdXBzKCkge1xuICBjb25zdCBncm91cHMgPSBnZXRWaXNpYmxlR3JvdXBzKCk7XG4gIC8vIGNvbnNvbGUubG9nKCdudW1ncm91cHMnLCBncm91cHMubGVuZ3RoKTtcbiAgcmV0dXJuIGdyb3Vwcy5sZW5ndGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmVzaEdyb3VwcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEubGluZSA9PT0gZmFsc2UgJiYgZWwuZGF0YS5mcmVzaCA9PT0gdHJ1ZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFBvcHMoKSB7XG4gIHJldHVybiBwYXBlci5wcm9qZWN0LmdldEl0ZW1zKHtcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEucG9wID09PSB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJHcm91cFBvcHMoZ3JvdXApIHtcbiAgY29uc3QgcG9wcyA9IGdldEdyb3VwUG9wcyhncm91cCk7XG4gIHBvcHMuZm9yRWFjaCgocG9wKSA9PiBwb3AucmVtb3ZlKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JvdXBQb3BzKGdyb3VwKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdncm91cCBwb3AgZ3JvdXAnLCBncm91cC5pZCwgZ3JvdXApO1xuICBsZXQgcmV0dXJuUG9wcyA9IFtdO1xuXG4gIGlmIChncm91cC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZ3JvdXBQb3BzID0gZ3JvdXAuZ2V0SXRlbXMoe1xuICAgICAgbWF0Y2g6IChlbCkgPT4gZWwuZGF0YSAmJiBlbC5kYXRhLnBvcCA9PT0gdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVyblBvcHMgPSByZXR1cm5Qb3BzLmNvbmNhdChncm91cFBvcHMpO1xuICB9XG5cbiAgY29uc3QgaW50ZXJzZWN0aW5nUG9wcyA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5wb3AgPT09IHRydWUgJiYgZWwuZGF0YS5pbnRlcnNlY3RpbmdHcm91cCA9PT0gZ3JvdXAuaWRcbiAgfSk7XG5cbiAgaWYgKGludGVyc2VjdGluZ1BvcHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVyblBvcHMgPSByZXR1cm5Qb3BzLmNvbmNhdChpbnRlcnNlY3RpbmdQb3BzKTtcbiAgfVxuXG4gIHJldHVybiByZXR1cm5Qb3BzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9wQ2FuZGlkYXRlcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEubGluZSA9PT0gZmFsc2UgJiYgZWwudmlzaWJsZSA9PT0gdHJ1ZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNoYSgpIHtcbiAgJC5nZXQoJy9oYXNoJylcbiAgICAuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjdXJyZW50IGhhc2g6JywgcmVzKTtcbiAgICAgIHdpbmRvdy5rYW4uaGFzaCA9IHJlcztcbiAgICB9KVxuICAgIC5mYWlsKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGdldHRpbmcgaGFzaDonLCBlKTtcbiAgICB9KTtcbn1cblxuLy8gaHR0cDovL2Jsb2cuc291bHNlcnYubmV0L3VuZGVyc3RhbmRpbmctb2JqZWN0LWNsb25pbmctaW4tamF2YXNjcmlwdC1wYXJ0LWkvXG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0NvcHkoIG9yaWdpbmFsICkge1xuICAgIC8vIEZpcnN0IGNyZWF0ZSBhbiBlbXB0eSBvYmplY3Qgd2l0aFxuICAgIC8vIHNhbWUgcHJvdG90eXBlIG9mIG91ciBvcmlnaW5hbCBzb3VyY2VcbiAgICB2YXIgY2xvbmUgPSBPYmplY3QuY3JlYXRlKCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoIG9yaWdpbmFsICkgKSA7XG5cbiAgICB2YXIgaSwga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKCBvcmlnaW5hbCApIDtcblxuICAgIGZvciAoIGkgPSAwIDsgaSA8IGtleXMubGVuZ3RoIDsgaSArKyApIHtcbiAgICAgIC8vIGNvcHkgZWFjaCBwcm9wZXJ0eSBpbnRvIHRoZSBjbG9uZVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KCBjbG9uZSAsIGtleXNbIGkgXSAsXG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoIG9yaWdpbmFsICwga2V5c1sgaSBdIClcbiAgICAgICkgO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21QaWNrKGFycmF5KSB7XG4gIGlmIChhcnJheS5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIGFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCldO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBtYWluID0gcmVxdWlyZSgnLi9tYWluJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCB1aSA9IHJlcXVpcmUoJy4vdWknKTtcbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbmNvbnN0IHRhcEV2ZW50ID0gJ2NsaWNrIHRhcCB0b3VjaCc7XG5cbmV4cG9ydCBjb25zdCB2aWRlb1BsYXlpbmdDbGFzcyA9ICd2aWRlby1wbGF5aW5nJztcblxuY29uc3QgJHZpZGVvV3JhcHBlciA9ICRib2R5LmZpbmQoJyN2aWRlby13cmFwJyk7XG5jb25zdCAkdmlkZW8gPSAkdmlkZW9XcmFwcGVyLmZpbmQoJ3ZpZGVvJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnRlclR1dG9yaWFsTW9kZSgpIHtcbiAgY29uc29sZS5sb2coJ2VudGVyaW5nIHR1dG9yaWFsIG1vZGUnKTtcbiAgcGxheVZpZGVvKCk7XG4gICRib2R5LmFkZENsYXNzKHZpZGVvUGxheWluZ0NsYXNzKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4uY29udGludWVDb3VudGRvd25JbnRlcnZhbCk7XG4gICRib2R5Lm9mZih0YXBFdmVudCwgdGltaW5nLnByZXZlbnRJbmFjdGl2aXR5VGltZW91dCk7XG4gICRib2R5Lm9uKHRhcEV2ZW50LCBleGl0VHV0b3JpYWxNb2RlKTtcbiAgbWFpbi5yZXNldFdpbmRvdygpO1xuICB1aS5yZXNldENhbnZhcygpO1xuICB3aW5kb3cua2FuLnJlZnJlc2hDaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICQuZ2V0KCcvaGFzaCcpXG4gICAgICAuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgaWYgKHJlcyAhPT0gd2luZG93Lmthbi5oYXNoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2RpZmZlcmVudCBoYXNoLCByZWxvYWRpbmcnKTtcbiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5mYWlsKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignZXJyb3IgZ2V0dGluZyBoYXNoOicsIGUpO1xuICAgICAgfSk7XG4gIH0sIHRpbWluZy5yZWZyZXNoQ2hlY2tEZWxheSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGl0VHV0b3JpYWxNb2RlKCkge1xuICBjb25zb2xlLmxvZygnZXhpdGluZyB0dXRvcmlhbCBtb2RlJyk7XG4gIHNvdW5kLnJlaW5pdFNoYXBlU291bmRzKClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKHdpbmRvdy5rYW4ucmVmcmVzaENoZWNrSW50ZXJ2YWwpO1xuICAgICAgSG93bGVyLm11dGUoZmFsc2UpO1xuICAgICAgcGF1c2VWaWRlbygpO1xuICAgICAgJGJvZHkub2ZmKHRhcEV2ZW50LCBleGl0VHV0b3JpYWxNb2RlKTtcbiAgICAgICRib2R5Lm9uKHRhcEV2ZW50LCB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKHZpZGVvUGxheWluZ0NsYXNzKTtcbiAgICAgIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0KTtcbiAgICAgIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcblxuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ2ludHJvJyk7XG5cbiAgICAgIHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ2NvbnRpbnVlJyk7XG4gICAgICB9LCB0aW1pbmcuY29udGludWVJbmFjdGl2aXR5RGVsYXkpO1xuICAgIH0pXG4gIC5mYWlsKChlKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignZXJyb3IgaW5pdHRpbmcgc2hhcGUgc291bmRzOicsIGUpO1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7XG4gICR2aWRlby5nZXQoMCkucGF1c2UoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlWaWRlbygpIHtcbiAgJHZpZGVvLmdldCgwKS5wbGF5KCk7XG59XG4iXX0=\n"]}
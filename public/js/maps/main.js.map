{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","runAnimations","pop","canvasId","maxShapes","palette","colors","colorNames","#20171C","#1E2A43","#28377D","#352747","#CA2E26","#9A2A1F","#DA6C26","#453121","#916A47","#DAAD27","#7F7D31","#2B5E2E","gradients","pops","colorSize","selectedColorSize","contextualTuts","type","copy","2","./lib/axios","3","process","utils","settle","buildURL","parseHeaders","isURLSameOrigin","createError","btoa","window","bind","config","Promise","resolve","reject","requestData","data","requestHeaders","headers","isFormData","request","XMLHttpRequest","loadEvent","xDomain","env","NODE_ENV","XDomainRequest","url","onprogress","ontimeout","auth","username","password","Authorization","open","method","toUpperCase","params","paramsSerializer","timeout","readyState","status","responseURL","indexOf","responseHeaders","getAllResponseHeaders","responseData","responseType","response","responseText","statusText","onerror","isStandardBrowserEnv","cookies","xsrfValue","withCredentials","xsrfCookieName","read","undefined","xsrfHeaderName","forEach","val","key","toLowerCase","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","this","../core/createError","./../core/settle","./../helpers/btoa","./../helpers/buildURL","./../helpers/cookies","./../helpers/isURLSameOrigin","./../helpers/parseHeaders","./../utils","_process","4","createInstance","defaultConfig","context","Axios","instance","prototype","extend","defaults","axios","create","instanceConfig","merge","Cancel","CancelToken","isCancel","all","promises","spread","default","./cancel/Cancel","./cancel/CancelToken","./cancel/isCancel","./core/Axios","./defaults","./helpers/bind","./helpers/spread","./utils","5","message","toString","__CANCEL__","6","executor","TypeError","resolvePromise","token","reason","throwIfRequested","source","c","./Cancel","7","value","8","interceptors","InterceptorManager","dispatchRequest","isAbsoluteURL","combineURLs","arguments","baseURL","chain","interceptor","unshift","fulfilled","rejected","push","shift","./../defaults","./../helpers/combineURLs","./../helpers/isAbsoluteURL","./InterceptorManager","./dispatchRequest","9","handlers","use","eject","id","fn","h","10","enhanceError","error","./enhanceError","11","throwIfCancellationRequested","transformData","transformRequest","common","adapter","transformResponse","../cancel/isCancel","../defaults","./transformData","12","13","validateStatus","./createError","14","fns","15","setContentTypeIfUnset","isUndefined","getDefaultAdapter","normalizeHeaderName","PROTECTION_PREFIX","DEFAULT_CONTENT_TYPE","Content-Type","isArrayBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","JSON","stringify","replace","parse","maxContentLength","Accept","./adapters/http","./adapters/xhr","./helpers/normalizeHeaderName","16","thisArg","args","Array","apply","17","E","input","block","charCode","str","String","output","idx","map","chars","charAt","charCodeAt","name","18","encode","encodeURIComponent","serializedParams","parts","isArray","v","isDate","toISOString","join","19","relativeURL","20","write","expires","path","domain","secure","cookie","isNumber","Date","toGMTString","isString","document","match","RegExp","decodeURIComponent","remove","now","21","test","22","resolveURL","href","msie","urlParsingNode","setAttribute","protocol","host","search","hash","hostname","port","pathname","originURL","navigator","userAgent","createElement","location","requestURL","parsed","23","normalizedName","../utils","24","split","line","trim","substr","25","callback","arr","26","FormData","result","ArrayBuffer","isView","isFunction","pipe","URLSearchParams","obj","Object","hasOwnProperty","assignValue","b","27","global","define","amd","self","_dereq_","any","ret","SomePromiseArray","setHowMany","setUnwrap","init","_SomePromiseArray","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","receiver","arg","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","stack","exit","throwLater","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","_reset","./queue","./schedule","./util","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","promiseRejectionQueued","bindingPromise","_then","bindingResolved","_bitField","_resolveCallback","target","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","noConflict","bluebird","old","./promise","cr","callerCache","getterCache","ensureMethod","methodName","classString","caller","namedGetter","indexedGetter","index","Math","max","getGetter","canEvaluate","isIdentifier","slice","get","propertyName","getter","isIndex","maybeGetter","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","NEXT_FILTER","catchFilter","instances","cb","boundTo","predicateLoop","item","matchesPredicate","keys","getKeys","j","./es5","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","generatePromiseLifecycleEventObject","defaultFireEvent","cancellationExecute","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parseStackAndMessage","notEnumerableProp","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","cleanStack","nodeFramePattern","lineMatches","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","stackFramesAsArray","title","isSoft","console","formatStack","printWarning","log","fireRejectionEvent","localHandler","localEventFired","formatNonError","ruselessToString","newStr","snip","maxChars","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","detail","cancelable","Event","createEvent","initCustomEvent","fireGlobalEvent","emit","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","inherits","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","err","hasStackAfterThrow","isTTY","color","./errors","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","reduce","each","mapSeries","subError","nameProperty","defaultMessage","SubError","constructor","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","set","has","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","PromiseMap","filter","options","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","len","catchInstances","./catch_filter","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","last","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","totalResolved","_totalResolved","_resolve","booleans","_resolveFromSyncValue","attempt","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","wrapped","maybeWrapAsError","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","deferReject","fillTypes","p","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","version","toFastProperties","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","toResolutionValue","Map","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","defaultSuffix","noCopyProps","copyDescriptors","isClass","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","extractEntry","size","entriesToMap","keyOffset","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","race","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","standalone","cordova","div","attributes","toggleScheduled","div2","o2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","ms","afterTimeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","prefix","isError","ignore","from","to","hasEnvVariables","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","exportName","setTimeoutContext","bindFn","invokeArrayArg","deprecate","deprecationMessage","inherit","properties","childP","baseP","_super","assign","boolOrFn","TYPE_FUNCTION","ifUndefined","val1","val2","addEventListeners","types","splitStr","removeEventListeners","removeEventListener","hasParent","parentNode","inStr","find","inArray","findByKey","toArray","uniqueArray","sort","results","prefixed","property","camelProp","VENDOR_PREFIXES","uniqueId","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","Input","manager","inputTarget","domHandler","ev","enable","createInputInstance","Type","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","SUPPORT_ONLY_TOUCH","TouchInput","SUPPORT_TOUCH","TouchMouseInput","MouseInput","inputHandler","eventType","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","INPUT_START","isFinal","INPUT_END","INPUT_CANCEL","session","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","deltaTime","angle","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","y","abs","scale","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offset","offsetDelta","prevDelta","velocity","velocityX","velocityY","direction","lastInterval","COMPUTE_INTERVAL","clientX","round","clientY","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","p1","p2","PROPS_XY","sqrt","atan2","PI","start","end","PROPS_CLIENT_XY","evEl","MOUSE_ELEMENT_EVENTS","evWin","MOUSE_WINDOW_EVENTS","pressed","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","SingleTouchInput","evTarget","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","started","normalizeSingleTouches","touches","changed","changedTouches","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","INPUT_MOVE","identifier","targetTouches","changedTargetTouches","touch","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","DEDUP_TIMEOUT","isSyntheticEvent","dx","dy","DEDUP_DISTANCE","TouchAction","cleanTouchActions","actions","TOUCH_ACTION_NONE","hasPanX","TOUCH_ACTION_PAN_X","hasPanY","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_AUTO","getTouchActionProps","NATIVE_TOUCH_ACTION","touchMap","cssSupports","CSS","supports","Recognizer","state","STATE_POSSIBLE","simultaneous","requireFail","stateStr","STATE_CANCELLED","STATE_ENDED","STATE_CHANGED","STATE_BEGAN","directionStr","getRecognizerByNameIfManager","otherRecognizer","recognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","recognizers","preset","Manager","oldCssProps","touchAction","toggleCssProps","add","recognizeWith","requireFailure","style","cssProps","triggerDomEvent","gestureEvent","initEvent","gesture","TEST_ELEMENT","nextKey","dest","MOBILE_REGEX","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","TOUCH_INPUT_MAP","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_MAP","compute","update","getTouchAction","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_RECOGNIZED","STATE_FAILED","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","reset","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","stop","force","stopped","curRecognizer","existing","on","events","off","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","HowlerGlobal","Howler","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","mobileAutoEnable","_setup","volume","vol","parseFloat","setupAudioContext","gain","_webAudio","ids","_getSoundIds","sound","_soundById","_node","mute","muted","unload","close","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","checkOpera","isOldOpera","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_enableMobileAudio","isMobile","maxTouchPoints","msMaxTouchPoints","_mobileEnabled","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","createBufferSource","connect","destination","noteOn","onended","suspend","_sounds","_paused","_suspendTimer","_resumeAfterSuspend","_autoResume","resume","_emit","Howl","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_state","_endTimers","_onend","onend","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onresume","action","play","load","exec","Sound","loadBuffer","num","_ended","_id","_inactiveSound","seek","_seek","duration","_start","_stop","playWebAudio","_refreshBuffer","setValueAtTime","currentTime","_playStart","bufferSource","noteGrainOn","Infinity","isRunning","once","_clearTimer","playHtml5","playbackRate","loadedNoReadyState","ejecta","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","fade","diff","dir","steps","stepLen","ceil","linearRampToValueAtTime","_interval","setInterval","soundId","min","clearInterval","cancelScheduledValues","loopStart","loopEnd","realTime","playing","rateSeek","sounds","_errorFn","_loadFn","remCache","cache","_loadQueue","task","_drain","cnt","_panner","howl","random","createGain","createGainNode","paused","_errorListener","_loadListener","__default","loadSound","atob","dataView","Uint8Array","decodeAudioData","xhr","safeXhrSend","arraybuffer","AudioContext","webkitAudioContext","iOS","platform","appVersion","safari","_pos","_orientation","stereo","pan","pos","z","setPosition","orientation","xUp","yUp","zUp","or","setOrientation","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_panningModel","_refDistance","_rolloffFactor","pa","panner","createPanner","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","noop","browser","argv","addListener","removeListener","removeAllListeners","binding","cwd","chdir","umask","getPathColorName","hexColor","originalColor","getColorName","getRandomPop","floor","getIndexedPopColor","transparent","Color","./../../config","root","factory","ShapeDetector","deg2Rad","Stroke","points","processStroke","patterns","_nbSamplePoints","nbSamplePoints","learn","_squareSize","_phi","_angleRange","_anglePrecision","_halfDiagonal","_origin","resample","setCentroid","rotateBy","indicativeAngle","scaleToSquare","translateToOrigin","localDistance","q","strokeLength","newPoints","point","cos","sin","box","minX","maxX","minY","maxY","width","height","distanceAtBestAngle","pattern","x1","f1","distanceAtAngle","x2","f2","strokePoints","patternPoints","defaultShapes","spot","patternName","score","stroke","bestDistance","bestPattern","bestScore","resetWindow","kan","currentColor","composition","compositionInterval","compositionTimeout","soundTimeouts","lastEvent","interaction","moves","pinching","pinchedGroup","pinchedTut","pathData","shapePath","prevAngle","sides","side","corners","lastScale","lastRotation","originalPosition","tutorialCompletion","fill","pinch","swipe","inactivityTimeout","playPromptTimeout","userHasDrawnFirstShape","firstTimePlaying","shapesSinceTut","refreshCheckInterval","sha","scheduledOverlay","continueCountdownInterval","shapeSounds","ui","overlays","timing","shape","$","setSha","reload","./overlays","./shape","./sound","./timing","./touch","./ui","./video","openOverlay","overlayName","allOverlays","includes","panning","preventInactivityTimeout","closeAndResetOverlays","tutorial","hideContextualTuts","$body","addClass","overlayActiveClass","tapEvent","openIntroOverlay","anyShapesOnCanvas","openPlayPromptOverlay","playPromptDelay","openSharePromptOverlay","openContinueOverlay","openTipsOverlay","openShareOverlay","resetContinueCountdown","html","continueInactivityDelay","$countdownNumWrap","video","enterTutorialMode","activateTipsCards","cardNavNext","$old","$new","$cardItems","first","$next","$third","slide","removeClass","updateCardCounter","cardsCount","cardInteractions","timeOfLastInteraction","closest","resetTips","$sharePhone","overlayOpenClasses","total","$footer","phoneNumberInputs","mask","$shareKeypad","phoneNumber","masked","randomCardGraphics","el","attr","initTips","initShare","hammerCanvas","$cardsWrap","overlay","./tutorial","initKeepaliveShape","keepaliveShape","Path","Rectangle","strokeColor","visible","startKeepaliveAnimation","keepaliveInterval","stopKeepaliveAnimation","destroyGroupPops","group","groupPopsBefore","getGroupPops","fillInGroupPopsById","groupId","paper","project","getItem","className","children","groupChild","toggleFill","interior","fillColor","cleanUpGroup","acceptableNames","updatePops","freshGroups","getFreshGroups","popCandidates","getPopCandidates","getAllPops","reverse","freshGroup","freshOuter","_namedChildren","bringToFront","otherGroup","otherGroupOuter","thisPop","intersect","popColor","popGroup","intersectingGroup","closed","addChild","fresh","getOutlineGroup","truedShape","outerPath","middlePath","sizes","lastAngle","firstTop","firstBottom","lastTop","lastBottom","Group","firstSegment","cumSize","avgSize","getPointAt","normal","getNormalAt","top","Point","bottom","insert","centerTop","centerBottom","flatten","simplify","selected","returnGroup","getTruedShape","pathClone","clone","completedPath","getCompletedPath","truedPath","strokeWidth","intersections","getIntersections","trimmedPath","getTrimmedPath","extendedPath","getExtendedPath","_intersections","_trimmedPath","replaceWith","getBruteExtendedPath","_intersections2","_trimmedPath2","getShapePrediction","prediction","shapeJSON","exportJSON","shapeData","processShapeData","shapePrediction","detector","closedShapes","randomPick","intersects","getIntegerPoint","stringifyPoint","parsePoint","pointStr","getClosestPointFromPathData","leastDistance","closestPoint","Base","datum","json","returnShape","jsonObj","segments","segment","positionInfo","findInteriorCurves","interiorCurves","dividedPath","resolveCrossings","enclosedLoop","_enclosedLoop","thresholdDist","thresholdDistMultiplier","nextSegment","startAngle","inverseStartAngle","extendedStartPoint","lastSegment","penSegment","previous","endAngle","extendedEndPoint","firstPoint","lastPoint","unite","crossings","maxArea","maxChild","area","intersection","intersectionPoint","pathCrossings","subtract","_ret2","closedChildren","childClone","accumulator","_j","newPath","copyContent","copyAttributes","_typeof","hitTestGroupBounds","groups","getVisibleGroups","hitTestBounds","strokeBounds","isInside","cornerThresholdDeg","shapeNames","./color","./lib/shape-detector","asyncStopAudioRecordingAndExportBlob","recorder","exportWAV","blob","asyncStopVideoRecordingAndExportBlob","stopRecording","getBlob","record","audioRecorder","Recorder","workerPath","canvasRecorder","startRecording","asyncPlayCompositionOnce","_slicedToArray","audioBlob","videoBlob","formData","append","post","resp","videoId","catch","sliceIterator","_arr","_n","_d","_e","_s","_i","drawCanvas","getElementById","RecordRTC","37","asyncInitShapeSounds","reinitShapeSounds","getShapeSoundObj","viewWidth","view","viewSize","initShapeSounds","colorName","quantizedSoundStartTime","quantizeLength","bounds","compositionLength","quantizedSoundDuration","soundObj","startTime","pathId","spriteName","startPlaying","hasClass","playEnabledClass","playingClass","startComposition","stopPlaying","stopComposition","asyncGetShapeSoundFromShapeName","shapeName","shapeSoundJSONPath","getJSON","shapeSoundData","formatShapeSoundData","when","returnSounds","returnData","urls","smallestDuration","bpm","returnDuration","quantizePosition","position","smallestInterval","measures","returnPosition","asyncPlayShape","asyncPlayShapeSound","asyncPlayShapeAnimation","res","animating","totalDuration","measureLength","animate","rotate","settings","easing","complete","removeShapeFromComposition","shapeGroup","getItems","clearSoundTimeouts","soundTimeout","playCompositionFirstTime","trimmedCompositionObj","getTrimmedCompositionObj","iterations","repeatComposition","playCompositionOnce","asyncPlayCompositionMultipleTimes","repeats","promisedRepeats","getTime","shapePromises","asyncPlayShapeWithDelay","endTime","playTime","trimmedComposition","getCompositionStartTime","modifiedSound","shallowCopy","beatLength","howler","38","pauseVideo","exitTutorialMode","drawInactivityDelay","inputDelay","refreshCheckDelay","overlayDelay","39","hammerTips","tipsOverlay","doubleTap","panStart","panMove","panEnd","pinchStart","pinchMove","pinchEnd","enablePanAndPinchEvents","enablePanEvents","enablePinchEvents","enableTapEvents","disableTapEvents","disablePanEvents","disablePinchEvents","pointer","hitResult","hitTest","hitOptions","eventTargetIsOnCanvas","hideContextualTutByName","stopPropagation","strokeCap","maxShapeLength","angleDelta","prevPoint","halfPointX","halfPointY","halfPoint","topX","topY","bottomX","bottomY","smooth","speed","tooLong","draw","move","minShapeSize","visibleGroups","firstGroup","removedGroup","shapeSize","centerPoint","rad","gradientSize","originX","originY","destinationX","destinationY","origin","gradient","stops","shapeSoundObj","outlineGroup","outline","outer","outlineCenter","middle","sendToBack","shapeMask","enclosedLoops","unditherButtonsByName","scaleFactor","allTutsCompleted","tutName","addContextualTut","tut","interacting","originalRotation","originalScale","thrown","$tut","$pinchedTut","currentScale","scaleDelta","currentRotation","rotationDelta","moveContextualTut","hypot","viewHypot","maxScaleFactor","hideContextualTut","throwPinchedGroup","velocityMultiplier","viewHeight","offScreen","requestAnimationFrame","newX","newY","newPos","tolerance","hammerjs","40","getTutByName","tutObj","tutorialCompletionObj","completion","shapeCenter","tutCopy","tutPos","getTutPositionFromCenter","css","left","visibility","$tuts","resetContextualTuts","tutWidth","outerWidth","tutHeight","outerHeight","leftPos","topPos","tutArrowHeight","41","initLogoRefresh","initColorPalette","initNewButton","initUndoButton","initPlayButton","initTipsButton","initShareButton","initContextualTuts","resetCanvas","ditherButtonsByName","buttonNames","undither","ditherButtonByName","buttonName","$button","ditheredClass","unditherButtonByName","newPressed","activeLayer","removeChildren","undoPressed","lastMove","clearGroupPops","numGroups","getNumGroups","tipsPressed","sharePressed","share","$paletteWrap","$paletteColors","paletteColorSize","paletteSelectedColorSize","paletteSelectedClass","$svg","clear","numCanvasses","randomCanvasIndex","canvasBg","Raster","scaleFactorHorizontal","scaleFactorVertical","Layer","./share","42","degrees","deg","radians","pow","delta","toLocaleTimeString","getNumVisibleGroups","getAllGroups","returnPops","groupPops","intersectingPops","original","43","playVideo","videoPlayingClass","main","$video","$videoWrapper","./main"],"mappings":"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IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAClmCt+B,KAAM,SAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,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,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAC9hDt+B,KAAM,aAENogD,SAAWl4B,EAAG,EAAGoW,EAAG,IAAOpW,EAAG,EAAGoW,EAAG,KAAQpW,EAAG,GAAIoW,EAAG,KAAQpW,EAAG,GAAIoW,EAAG,IACxEt+B,KAAM,WAENogD,SAAWl4B,EAAG,EAAGoW,EAAG,IAAOpW,EAAG,EAAGoW,EAAG,MAASpW,EAAG,GAAIoW,EAAG,MAASpW,EAAG,GAAIoW,EAAG,IAC1Et+B,KAAM,WAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MACl5Dt+B,KAAM,WAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MACvet+B,KAAM,UAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,KACrNt+B,KAAM,UAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,IAAKoW,EAAK,KAAQpW,EAAK,GAAIoW,EAAK,KAAQpW,EAAK,GAAIoW,EAAK,MACzIt+B,KAAM,UAENogD,SAAWl4B,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAC1vCt+B,KAAM,UAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MACjhDt+B,KAAM,UAENogD,SAAWl4B,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,GAAIoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK,MAASpW,EAAK,IAAKoW,EAAK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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nexports.runAnimations = false;\nexports.pop = true;\nexports.canvasId = 'canvas';\nexports.maxShapes = 20;\n\nexports.palette = {\n  colors: [\"#20171C\", \"#1E2A43\", \"#28377D\", \"#352747\", \"#CA2E26\", \"#9A2A1F\", \"#DA6C26\", \"#453121\", \"#916A47\", \"#DAAD27\", \"#7F7D31\", \"#2B5E2E\"],\n  colorNames: {\n    \"#20171C\": \"black\",\n    \"#1E2A43\": \"blue\",\n    \"#28377D\": \"blue\",\n    \"#352747\": \"blue\",\n    \"#CA2E26\": \"red\",\n    \"#9A2A1F\": \"red\",\n    \"#DA6C26\": \"orange\",\n    \"#453121\": \"brown\",\n    \"#916A47\": \"brown\",\n    \"#DAAD27\": \"orange\",\n    \"#7F7D31\": \"green\",\n    \"#2B5E2E\": \"green\"\n  },\n  gradients: {\n    '#20171C': ['#20171C', '#000000'],\n    '#1E2A43': ['#1E2A43', '#263166'],\n    '#28377D': ['#28377D', '#1E4695'],\n    '#352747': ['#352747', '#45005B'],\n    '#CA2E26': ['#CA2E26', '#9B352F'],\n    '#9A2A1F': ['#9A2A1F', '#CD3621'],\n    '#DA6C26': ['#DA6C26', '#BD4820'],\n    '#453121': ['#453121', '#281806'],\n    '#916A47': ['#916A47', '#623A22'],\n    '#DAAD27': ['#DAAD27', '#AF871D'],\n    '#7F7D31': ['#7F7D31', '#555827'],\n    '#2B5E2E': ['#2B5E2E', '#16451D']\n  },\n  pops: [\"#00ADEF\", \"#F285A5\", \"#7DC57F\", \"#F6EB16\", \"#F4EAE0\"],\n  colorSize: 20,\n  selectedColorSize: 30\n};\n\nexports.contextualTuts = [{\n  type: \"fill\",\n  copy: \"<strong>Double-tap</strong> a filled shape to <strong>UNFILL</strong> it. Repeat to <strong>FILL</strong> an unfilled shape.\"\n}, {\n  type: \"pinch\",\n  copy: \"<strong>Pinch</strong> shapes with <strong>TWO FINGERS</strong> to <strong>resize</strong> and <strong>move</strong> them.\"\n}, {\n  type: \"swipe\",\n  copy: \"To <strong>remove</strong> shapes, <strong>pinch</strong> with <strong>two fingers</strong> then <strong>swipe</strong> or hit <strong>undo</strong>.\"\n}];\n\n},{}],2:[function(require,module,exports){\nmodule.exports = require('./lib/axios');\n},{\"./lib/axios\":4}],3:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\nvar btoa = (typeof window !== 'undefined' && window.btoa && window.btoa.bind(window)) || require('./../helpers/btoa');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n    var loadEvent = 'onreadystatechange';\n    var xDomain = false;\n\n    // For IE 8/9 CORS support\n    // Only supports POST and GET calls and doesn't returns the response headers.\n    // DON'T do this for testing b/c XMLHttpRequest is mocked, not XDomainRequest.\n    if (process.env.NODE_ENV !== 'test' &&\n        typeof window !== 'undefined' &&\n        window.XDomainRequest && !('withCredentials' in request) &&\n        !isURLSameOrigin(config.url)) {\n      request = new window.XDomainRequest();\n      loadEvent = 'onload';\n      xDomain = true;\n      request.onprogress = function handleProgress() {};\n      request.ontimeout = function handleTimeout() {};\n    }\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request[loadEvent] = function handleLoad() {\n      if (!request || (request.readyState !== 4 && !xDomain)) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        // IE sends 1223 instead of 204 (https://github.com/mzabriskie/axios/issues/201)\n        status: request.status === 1223 ? 204 : request.status,\n        statusText: request.status === 1223 ? 'No Content' : request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED'));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        if (request.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n}).call(this,require('_process'))\n\n},{\"../core/createError\":10,\"./../core/settle\":13,\"./../helpers/btoa\":17,\"./../helpers/buildURL\":18,\"./../helpers/cookies\":20,\"./../helpers/isURLSameOrigin\":22,\"./../helpers/parseHeaders\":24,\"./../utils\":26,\"_process\":30}],4:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n},{\"./cancel/Cancel\":5,\"./cancel/CancelToken\":6,\"./cancel/isCancel\":7,\"./core/Axios\":8,\"./defaults\":15,\"./helpers/bind\":16,\"./helpers/spread\":25,\"./utils\":26}],5:[function(require,module,exports){\n'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n},{\"./Cancel\":5}],7:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, this.defaults, { method: 'get' }, config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n},{\"./../defaults\":15,\"./../helpers/combineURLs\":19,\"./../helpers/isAbsoluteURL\":21,\"./../utils\":26,\"./InterceptorManager\":9,\"./dispatchRequest\":11}],9:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n},{\"./../utils\":26}],10:[function(require,module,exports){\n'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n @ @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, response);\n};\n\n},{\"./enhanceError\":12}],11:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n},{\"../cancel/isCancel\":7,\"../defaults\":15,\"./../utils\":26,\"./transformData\":14}],12:[function(require,module,exports){\n'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n @ @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.response = response;\n  return error;\n};\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response\n    ));\n  }\n};\n\n},{\"./createError\":10}],14:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n},{\"./../utils\":26}],15:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar PROTECTION_PREFIX = /^\\)\\]\\}',?\\n/;\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      data = data.replace(PROTECTION_PREFIX, '');\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMehtodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n}).call(this,require('_process'))\n\n},{\"./adapters/http\":3,\"./adapters/xhr\":3,\"./helpers/normalizeHeaderName\":23,\"./utils\":26,\"_process\":30}],16:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\n// btoa polyfill for IE<10 courtesy https://github.com/davidchambers/Base64.js\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction E() {\n  this.message = 'String contains an invalid character';\n}\nE.prototype = new Error;\nE.prototype.code = 5;\nE.prototype.name = 'InvalidCharacterError';\n\nfunction btoa(input) {\n  var str = String(input);\n  var output = '';\n  for (\n    // initialize result and counter\n    var block, charCode, idx = 0, map = chars;\n    // if the next str index does not exist:\n    //   change the mapping table to \"=\"\n    //   check if d has no fractional digits\n    str.charAt(idx | 0) || (map = '=', idx % 1);\n    // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n    output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n  ) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new E();\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\n\nmodule.exports = btoa;\n\n},{}],18:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      }\n\n      if (!utils.isArray(val)) {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n},{\"./../utils\":26}],19:[function(require,module,exports){\n'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '');\n};\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n\n},{\"./../utils\":26}],21:[function(require,module,exports){\n'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n},{}],22:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n\n},{\"./../utils\":26}],23:[function(require,module,exports){\n'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n},{\"../utils\":26}],24:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\n},{\"./../utils\":26}],25:[function(require,module,exports){\n'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n},{}],26:[function(require,module,exports){\n'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  typeof document.createElement -> undefined\n */\nfunction isStandardBrowserEnv() {\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined' &&\n    typeof document.createElement === 'function'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object' && !isArray(obj)) {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n\n},{\"./helpers/bind\":16}],27:[function(require,module,exports){\n(function (process,global){\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.0\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.0\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":30}],28:[function(require,module,exports){\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n},{}],29:[function(require,module,exports){\n(function (global){\n/*!\n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  // 'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto iOS enabler.\n      self.mobileAutoEnable = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.value = vol;\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.value = muted ? 0 : self._volume;\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'running' : 'running';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Mobile browsers will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _enableMobileAudio: function() {\n      var self = this || Howler;\n\n      // Only run this on mobile devices if audio isn't already eanbled.\n      var isMobile = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(self._navigator && self._navigator.userAgent);\n      var isTouch = !!(('ontouchend' in window) || (self._navigator && self._navigator.maxTouchPoints > 0) || (self._navigator && self._navigator.msMaxTouchPoints > 0));\n      if (self._mobileEnabled || !self.ctx || (!isMobile && !isTouch)) {\n        return;\n      }\n\n      self._mobileEnabled = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function() {\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._mobileEnabled = true;\n          self.mobileAutoEnable = false;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchend', unlock, true);\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchend', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.state = 'resuming';\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio on iOS.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.mobileAutoEnable) {\n        Howler._enableMobileAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Check if this extension is available.\n        if (Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        var num = 0;\n        for (var i=0; i<self._sounds.length; i++) {\n          if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n            num++;\n            id = self._sounds[i]._id;\n          }\n        }\n\n        if (num === 1) {\n          sprite = null;\n        } else {\n          id = null;\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If we have no sprite and the sound hasn't loaded, we must wait\n      // for the sound to load to get our audio's duration.\n      if (self._state !== 'loaded' && !self._sprite[sprite]) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(self._soundById(sound._id) ? sound._id : undefined);\n          }\n        });\n\n        return sound._id;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          setTimeout(function() {\n            self._emit('play', sound._id);\n          }, 0);\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n      // Update the parameters of the sound\n      sound._paused = false;\n      sound._ended = false;\n      sound._sprite = sprite;\n      sound._seek = seek;\n      sound._start = self._sprite[sprite][0] / 1000;\n      sound._stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n            }, 0);\n          }\n        };\n\n        var isRunning = (Howler.state === 'running');\n        if (self._state === 'loaded' && isRunning) {\n          playWebAudio();\n        } else {\n          // Wait for the audio to load and then begin playback.\n          self.once(isRunning ? 'load' : 'resume', playWebAudio, isRunning ? sound._id : null);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          setTimeout(function() {\n            node.play();\n\n            // Setup the new end timer.\n            if (timeout !== Infinity) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            if (!internal) {\n              self._emit('play', sound._id);\n            }\n          }, 0);\n        };\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (self._state === 'loaded' && (window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS));\n        if (node.readyState === 4 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                if (!internal) {\n                  self._emit('stop', sound._id);\n                }\n\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n            }\n          }\n        }\n\n        if (sound && !internal) {\n          self._emit('stop', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n      var diff = Math.abs(from - to);\n      var dir = from > to ? 'out' : 'in';\n      var steps = diff / 0.01;\n      var stepLen = (steps > 0) ? len / steps : len;\n\n      // Since browsers clamp timeouts to 4ms, we need to clamp our steps to that too.\n      if (stepLen < 4) {\n        steps = Math.ceil(steps / (4 / stepLen));\n        stepLen = 4;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          var vol = from;\n          sound._interval = setInterval(function(soundId, sound) {\n            // Update the volume amount, but only if the volume should change.\n            if (steps > 0) {\n              vol += (dir === 'in' ? 0.01 : -0.01);\n            }\n\n            // Make sure the volume is in the right bounds.\n            vol = Math.max(0, vol);\n            vol = Math.min(1, vol);\n\n            // Round to within 2 decimal points.\n            vol = Math.round(vol * 100) / 100;\n\n            // Change the volume.\n            if (self._webAudio) {\n              if (typeof id === 'undefined') {\n                self._volume = vol;\n              }\n\n              sound._volume = vol;\n            } else {\n              self.volume(vol, soundId, true);\n            }\n\n            // When the fade is complete, stop it and fire event.\n            if (vol === to) {\n              clearInterval(sound._interval);\n              sound._interval = null;\n              self.volume(vol, soundId);\n              self._emit('fade', soundId);\n            }\n          }.bind(self, ids[i], sound), stepLen);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            sound._rateSeek = self.seek(id[i]);\n            sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.value = rate;\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Restart the playback if the sound was playing.\n          if (playing) {\n            self.play(id, true);\n          }\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node) {\n            sound._node.currentTime = seek;\n          }\n\n          self._emit('seek', id);\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n          self._emit('end', sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading.\n          sounds[i]._node.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=';\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n\n        // Remove the references in the global Howler object.\n        var index = Howler._howls.indexOf(self);\n        if (index >= 0) {\n          Howler._howls.splice(index, 1);\n        }\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      if (fn) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          if (fn === events[i].fn && id === events[i].id) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function() {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // don't move onto the next task until this one is done\n        self.once(task.event, function() {\n          self._queue.shift();\n          self._loadQueue();\n        });\n\n        task.action();\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        clearTimeout(self._endTimers[id]);\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop;\n      }\n      sound._node.bufferSource.playbackRate.value = sound._rate;\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n\n      if (self._scratchBuffer) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        try { node.bufferSource.buffer = self._scratchBuffer; } catch(e) {}\n      }\n      node.bufferSource = null;\n\n      return self;\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        self._node = new Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorListener, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Decode the buffer into an audio source.\n    Howler.ctx.decodeAudioData(arraybuffer, function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      }\n    }, function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    });\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.value = 1;\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.0.2\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n  \n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n      self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n      self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              sound._panner.setPosition(pan, 0, 0);\n            } else {\n              sound._panner.pan.value = pan;\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or\n   * all in the group. The most common usage is to set the 'x' position for\n   * left/right panning. Setting any value higher than 1.0 will begin to\n   * decrease the volume of the sound as it moves further away.\n   * @param  {Number} x  The x-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} y  The y-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} z  The z-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setPosition(x, y, z);\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setOrientation(x, y, z);\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) There will be no volume reduction inside this angle.\n   *     coneOuterAngle - (360 by default) The volume will be reduced to a constant value of\n   *                      `coneOuterGain` outside this angle.\n   *     coneOuterGain - (0 by default) The amount of volume reduction outside of `coneOuterAngle`.\n   *     distanceModel - ('inverse' by default) Determines algorithm to use to reduce volume as audio moves\n   *                      away from listener. Can be `linear`, `inverse` or `exponential`.\n   *     maxDistance - (10000 by default) Volume won't reduce between source/listener beyond this distance.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *     refDistance - (1 by default) A reference distance for reducing volume as the source\n   *                    moves away from the listener.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener.\n   * \n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : self._distanceModel,\n            maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : self._maxDistance,\n            panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : self._panningModel,\n            refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : self._refDistance,\n            rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : self._rolloffFactor\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.panningModel = pa.panningModel;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.value = sound._stereo;\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id);\n    }\n  };\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],30:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPathColorName = getPathColorName;\nexports.getColorName = getColorName;\nexports.getRandomPop = getRandomPop;\nexports.getIndexedPopColor = getIndexedPopColor;\nvar config = require('./../../config');\n\nvar transparent = exports.transparent = new Color(0, 0);\n\nfunction getPathColorName(path) {\n  var hexColor = path.parent.data.originalColor;\n  // let hexColor = path.strokeColor.toCSS(true); // This fails when it's a gradient\n  return getColorName(hexColor);\n}\n\nfunction getColorName(color) {\n  if (color) {\n    color = color.toUpperCase(); // make sure\n    if (color in config.palette.colorNames) {\n      return config.palette.colorNames[color];\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\nfunction getRandomPop() {\n  var pops = config.palette.pops;\n  return pops[Math.floor(Math.random() * pops.length)];\n}\n\nfunction getIndexedPopColor(index) {\n  var pops = config.palette.pops;\n  return pops[index % pops.length];\n}\n\n},{\"./../../config\":1}],32:[function(require,module,exports){\n\"use strict\";\n\n(function (root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.ShapeDetector = factory();\n  }\n})(undefined, function () {\n\n  var _nbSamplePoints;\n  var _squareSize = 250;\n  var _phi = 0.5 * (-1.0 + Math.sqrt(5.0));\n  var _angleRange = deg2Rad(45.0);\n  var _anglePrecision = deg2Rad(2.0);\n  var _halfDiagonal = Math.sqrt(_squareSize * _squareSize + _squareSize * _squareSize) * 0.5;\n  var _origin = {\n    x: 0,\n    y: 0\n  };\n\n  function deg2Rad(d) {\n\n    return d * Math.PI / 180.0;\n  };\n\n  function getDistance(a, b) {\n\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  function Stroke(points, name) {\n\n    this.points = points;\n    this.name = name;\n    this.processStroke();\n  };\n\n  Stroke.prototype.processStroke = function () {\n\n    this.points = this.resample();\n    this.setCentroid();\n    this.points = this.rotateBy(-this.indicativeAngle());\n    this.points = this.scaleToSquare();\n    this.setCentroid();\n    this.points = this.translateToOrigin();\n\n    return this;\n  };\n\n  Stroke.prototype.resample = function () {\n\n    var localDistance, q;\n    var interval = this.strokeLength() / (_nbSamplePoints - 1);\n    var distance = 0.0;\n    var newPoints = [this.points[0]];\n\n    for (var i = 1; i < this.points.length; i++) {\n      localDistance = getDistance(this.points[i - 1], this.points[i]);\n\n      if (distance + localDistance >= interval) {\n        q = {\n          x: this.points[i - 1].x + (interval - distance) / localDistance * (this.points[i].x - this.points[i - 1].x),\n          y: this.points[i - 1].y + (interval - distance) / localDistance * (this.points[i].y - this.points[i - 1].y)\n        };\n\n        newPoints.push(q);\n        this.points.splice(i, 0, q);\n        distance = 0.0;\n      } else {\n        distance += localDistance;\n      }\n    }\n\n    if (newPoints.length === _nbSamplePoints - 1) {\n      newPoints.push(this.points[this.points.length - 1]);\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.rotateBy = function (angle) {\n\n    var point;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: (point.x - this.c.x) * cos - (point.y - this.c.y) * sin + this.c.x,\n        y: (point.x - this.c.x) * sin + (point.y - this.c.y) * cos + this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.scaleToSquare = function () {\n\n    var point;\n    var newPoints = [];\n    var box = {\n      minX: +Infinity,\n      maxX: -Infinity,\n      minY: +Infinity,\n      maxY: -Infinity\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      box.minX = Math.min(box.minX, point.x);\n      box.minY = Math.min(box.minY, point.y);\n      box.maxX = Math.max(box.maxX, point.x);\n      box.maxY = Math.max(box.maxY, point.y);\n    }\n\n    box.width = box.maxX - box.minX;\n    box.height = box.maxY - box.minY;\n\n    for (i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x * (_squareSize / box.width),\n        y: point.y * (_squareSize / box.height)\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.translateToOrigin = function (points) {\n\n    var point;\n    var newPoints = [];\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      newPoints.push({\n        x: point.x + _origin.x - this.c.x,\n        y: point.y + _origin.y - this.c.y\n      });\n    }\n\n    return newPoints;\n  };\n\n  Stroke.prototype.setCentroid = function () {\n\n    var point;\n    this.c = {\n      x: 0.0,\n      y: 0.0\n    };\n\n    for (var i = 0; i < this.points.length; i++) {\n      point = this.points[i];\n\n      this.c.x += point.x;\n      this.c.y += point.y;\n    }\n\n    this.c.x /= this.points.length;\n    this.c.y /= this.points.length;\n\n    return this;\n  };\n\n  Stroke.prototype.indicativeAngle = function () {\n\n    return Math.atan2(this.c.y - this.points[0].y, this.c.x - this.points[0].x);\n  };\n\n  Stroke.prototype.strokeLength = function () {\n\n    var d = 0.0;\n\n    for (var i = 1; i < this.points.length; i++) {\n      d += getDistance(this.points[i - 1], this.points[i]);\n    }\n\n    return d;\n  };\n\n  Stroke.prototype.distanceAtBestAngle = function (pattern) {\n\n    var a = -_angleRange;\n    var b = _angleRange;\n    var x1 = _phi * a + (1.0 - _phi) * b;\n    var f1 = this.distanceAtAngle(pattern, x1);\n    var x2 = (1.0 - _phi) * a + _phi * b;\n    var f2 = this.distanceAtAngle(pattern, x2);\n\n    while (Math.abs(b - a) > _anglePrecision) {\n\n      if (f1 < f2) {\n        b = x2;\n        x2 = x1;\n        f2 = f1;\n        x1 = _phi * a + (1.0 - _phi) * b;\n        f1 = this.distanceAtAngle(pattern, x1);\n      } else {\n        a = x1;\n        x1 = x2;\n        f1 = f2;\n        x2 = (1.0 - _phi) * a + _phi * b;\n        f2 = this.distanceAtAngle(pattern, x2);\n      }\n    }\n\n    return Math.min(f1, f2);\n  };\n\n  Stroke.prototype.distanceAtAngle = function (pattern, angle) {\n\n    var strokePoints = this.rotateBy(angle);\n    var patternPoints = pattern.points;\n    var d = 0.0;\n\n    for (var i = 0; i < strokePoints.length; i++) {\n      d += getDistance(strokePoints[i], patternPoints[i]);\n    }\n\n    return d / strokePoints.length;\n  };\n\n  function ShapeDetector(patterns, options) {\n\n    options = options || {};\n    this.threshold = options.threshold || 0;\n    _nbSamplePoints = options.nbSamplePoints || 64;\n\n    this.patterns = [];\n\n    for (var i = 0; i < patterns.length; i++) {\n      this.learn(patterns[i].name, patterns[i].points);\n    }\n  }\n\n  ShapeDetector.defaultShapes = [{\n    points: [{ x: 0, y: 50 }, { x: 100, y: 50 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 50, y: 0 }, { x: 50, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 100, y: 100 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 89, \"y\": 164 }, { \"x\": 90, \"y\": 162 }, { \"x\": 92, \"y\": 162 }, { \"x\": 94, \"y\": 164 }, { \"x\": 95, \"y\": 166 }, { \"x\": 96, \"y\": 169 }, { \"x\": 97, \"y\": 171 }, { \"x\": 99, \"y\": 175 }, { \"x\": 101, \"y\": 178 }, { \"x\": 103, \"y\": 182 }, { \"x\": 106, \"y\": 189 }, { \"x\": 108, \"y\": 194 }, { \"x\": 111, \"y\": 199 }, { \"x\": 114, \"y\": 204 }, { \"x\": 117, \"y\": 209 }, { \"x\": 119, \"y\": 214 }, { \"x\": 122, \"y\": 218 }, { \"x\": 124, \"y\": 222 }, { \"x\": 126, \"y\": 225 }, { \"x\": 128, \"y\": 228 }, { \"x\": 130, \"y\": 229 }, { \"x\": 133, \"y\": 233 }, { \"x\": 134, \"y\": 236 }, { \"x\": 136, \"y\": 239 }, { \"x\": 138, \"y\": 240 }, { \"x\": 139, \"y\": 242 }, { \"x\": 140, \"y\": 244 }, { \"x\": 142, \"y\": 242 }, { \"x\": 142, \"y\": 240 }, { \"x\": 142, \"y\": 237 }, { \"x\": 143, \"y\": 235 }, { \"x\": 143, \"y\": 233 }, { \"x\": 145, \"y\": 229 }, { \"x\": 146, \"y\": 226 }, { \"x\": 148, \"y\": 217 }, { \"x\": 149, \"y\": 208 }, { \"x\": 149, \"y\": 205 }, { \"x\": 151, \"y\": 196 }, { \"x\": 151, \"y\": 193 }, { \"x\": 153, \"y\": 182 }, { \"x\": 155, \"y\": 172 }, { \"x\": 157, \"y\": 165 }, { \"x\": 159, \"y\": 160 }, { \"x\": 162, \"y\": 155 }, { \"x\": 164, \"y\": 150 }, { \"x\": 165, \"y\": 148 }, { \"x\": 166, \"y\": 146 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 91, \"y\": 185 }, { \"x\": 93, \"y\": 185 }, { \"x\": 95, \"y\": 185 }, { \"x\": 97, \"y\": 185 }, { \"x\": 100, \"y\": 188 }, { \"x\": 102, \"y\": 189 }, { \"x\": 104, \"y\": 190 }, { \"x\": 106, \"y\": 193 }, { \"x\": 108, \"y\": 195 }, { \"x\": 110, \"y\": 198 }, { \"x\": 112, \"y\": 201 }, { \"x\": 114, \"y\": 204 }, { \"x\": 115, \"y\": 207 }, { \"x\": 117, \"y\": 210 }, { \"x\": 118, \"y\": 212 }, { \"x\": 120, \"y\": 214 }, { \"x\": 121, \"y\": 217 }, { \"x\": 122, \"y\": 219 }, { \"x\": 123, \"y\": 222 }, { \"x\": 124, \"y\": 224 }, { \"x\": 126, \"y\": 226 }, { \"x\": 127, \"y\": 229 }, { \"x\": 129, \"y\": 231 }, { \"x\": 130, \"y\": 233 }, { \"x\": 129, \"y\": 231 }, { \"x\": 129, \"y\": 228 }, { \"x\": 129, \"y\": 226 }, { \"x\": 129, \"y\": 224 }, { \"x\": 129, \"y\": 221 }, { \"x\": 129, \"y\": 218 }, { \"x\": 129, \"y\": 212 }, { \"x\": 129, \"y\": 208 }, { \"x\": 130, \"y\": 198 }, { \"x\": 132, \"y\": 189 }, { \"x\": 134, \"y\": 182 }, { \"x\": 137, \"y\": 173 }, { \"x\": 143, \"y\": 164 }, { \"x\": 147, \"y\": 157 }, { \"x\": 151, \"y\": 151 }, { \"x\": 155, \"y\": 144 }, { \"x\": 161, \"y\": 137 }, { \"x\": 165, \"y\": 131 }, { \"x\": 171, \"y\": 122 }, { \"x\": 174, \"y\": 118 }, { \"x\": 176, \"y\": 114 }, { \"x\": 177, \"y\": 112 }, { \"x\": 177, \"y\": 114 }, { \"x\": 175, \"y\": 116 }, { \"x\": 173, \"y\": 118 }],\n    name: \"line\"\n  }, {\n    points: [{ \"x\": 113, \"y\": 68 }, { \"x\": 86, \"y\": 79 }, { \"x\": 63, \"y\": 131 }, { \"x\": 78, \"y\": 147 }, { \"x\": 156, \"y\": 149 }, { \"x\": 195, \"y\": 100 }, { \"x\": 189, \"y\": 79 }, { \"x\": 125.73497, \"y\": 62.81168 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 98, \"y\": 67 }, { \"x\": 77, \"y\": 85 }, { \"x\": 77, \"y\": 162 }, { \"x\": 179, \"y\": 156 }, { \"x\": 197, \"y\": 123 }, { \"x\": 167, \"y\": 63 }, { \"x\": 141, \"y\": 61 }, { \"x\": 110, \"y\": 59 }, { \"x\": 106.51192, \"y\": 59.70407 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 60, \"y\": 47 }, { \"x\": 43, \"y\": 96 }, { \"x\": 52, \"y\": 206 }, { \"x\": 63, \"y\": 246 }, { \"x\": 118, \"y\": 296 }, { \"x\": 144, \"y\": 246 }, { \"x\": 141, \"y\": 147 }, { \"x\": 133, \"y\": 129 }, { \"x\": 113, \"y\": 80 }, { \"x\": 60.42738, \"y\": 45.76813 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 127, \"y\": 141 }, { \"x\": 124, \"y\": 140 }, { \"x\": 120, \"y\": 139 }, { \"x\": 118, \"y\": 139 }, { \"x\": 116, \"y\": 139 }, { \"x\": 111, \"y\": 140 }, { \"x\": 109, \"y\": 141 }, { \"x\": 104, \"y\": 144 }, { \"x\": 100, \"y\": 147 }, { \"x\": 96, \"y\": 152 }, { \"x\": 93, \"y\": 157 }, { \"x\": 90, \"y\": 163 }, { \"x\": 87, \"y\": 169 }, { \"x\": 85, \"y\": 175 }, { \"x\": 83, \"y\": 181 }, { \"x\": 82, \"y\": 190 }, { \"x\": 82, \"y\": 195 }, { \"x\": 83, \"y\": 200 }, { \"x\": 84, \"y\": 205 }, { \"x\": 88, \"y\": 213 }, { \"x\": 91, \"y\": 216 }, { \"x\": 96, \"y\": 219 }, { \"x\": 103, \"y\": 222 }, { \"x\": 108, \"y\": 224 }, { \"x\": 111, \"y\": 224 }, { \"x\": 120, \"y\": 224 }, { \"x\": 133, \"y\": 223 }, { \"x\": 142, \"y\": 222 }, { \"x\": 152, \"y\": 218 }, { \"x\": 160, \"y\": 214 }, { \"x\": 167, \"y\": 210 }, { \"x\": 173, \"y\": 204 }, { \"x\": 178, \"y\": 198 }, { \"x\": 179, \"y\": 196 }, { \"x\": 182, \"y\": 188 }, { \"x\": 182, \"y\": 177 }, { \"x\": 178, \"y\": 167 }, { \"x\": 170, \"y\": 150 }, { \"x\": 163, \"y\": 138 }, { \"x\": 152, \"y\": 130 }, { \"x\": 143, \"y\": 129 }, { \"x\": 140, \"y\": 131 }, { \"x\": 129, \"y\": 136 }, { \"x\": 126, \"y\": 139 }],\n    name: \"circle\"\n  }, {\n    points: [{ \"x\": 516, \"y\": 284 }, { \"x\": 496, \"y\": 319 }, { \"x\": 496, \"y\": 329 }, { \"x\": 513, \"y\": 329 }, { \"x\": 550, \"y\": 324 }, { \"x\": 696, \"y\": 305 }, { \"x\": 737, \"y\": 298 }, { \"x\": 746, \"y\": 292 }, { \"x\": 734, \"y\": 278 }, { \"x\": 709, \"y\": 252 }, { \"x\": 664, \"y\": 193 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 179, \"y\": 159 }, { \"x\": 152, \"y\": 290 }, { \"x\": 143, \"y\": 336 }, { \"x\": 142, \"y\": 355 }, { \"x\": 160, \"y\": 348 }, { \"x\": 208, \"y\": 337 }, { \"x\": 241, \"y\": 330 }, { \"x\": 256, \"y\": 328 }, { \"x\": 254, \"y\": 315 }, { \"x\": 238, \"y\": 277 }, { \"x\": 210, \"y\": 200 }, { \"x\": 182.94356, \"y\": 110.45656 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 105, \"y\": 335 }, { \"x\": 115, \"y\": 362 }, { \"x\": 128, \"y\": 338 }, { \"x\": 163, \"y\": 271 }, { \"x\": 241, \"y\": 135 }, { \"x\": 261, \"y\": 104 }, { \"x\": 267, \"y\": 98 }, { \"x\": 261, \"y\": 102 }, { \"x\": 236, \"y\": 119 }, { \"x\": 151, \"y\": 195 }, { \"x\": 108, \"y\": 235 }, { \"x\": 83, \"y\": 267 }, { \"x\": 79.92616, \"y\": 270.93451 }],\n    name: \"triangle\"\n  }, {\n    points: [{ \"x\": 137, \"y\": 139 }, { \"x\": 135, \"y\": 141 }, { \"x\": 133, \"y\": 144 }, { \"x\": 132, \"y\": 146 }, { \"x\": 130, \"y\": 149 }, { \"x\": 128, \"y\": 151 }, { \"x\": 126, \"y\": 155 }, { \"x\": 123, \"y\": 160 }, { \"x\": 120, \"y\": 166 }, { \"x\": 116, \"y\": 171 }, { \"x\": 112, \"y\": 177 }, { \"x\": 107, \"y\": 183 }, { \"x\": 102, \"y\": 188 }, { \"x\": 100, \"y\": 191 }, { \"x\": 95, \"y\": 195 }, { \"x\": 90, \"y\": 199 }, { \"x\": 86, \"y\": 203 }, { \"x\": 82, \"y\": 206 }, { \"x\": 80, \"y\": 209 }, { \"x\": 75, \"y\": 213 }, { \"x\": 73, \"y\": 213 }, { \"x\": 70, \"y\": 216 }, { \"x\": 67, \"y\": 219 }, { \"x\": 64, \"y\": 221 }, { \"x\": 61, \"y\": 223 }, { \"x\": 60, \"y\": 225 }, { \"x\": 62, \"y\": 226 }, { \"x\": 65, \"y\": 225 }, { \"x\": 67, \"y\": 226 }, { \"x\": 74, \"y\": 226 }, { \"x\": 77, \"y\": 227 }, { \"x\": 85, \"y\": 229 }, { \"x\": 91, \"y\": 230 }, { \"x\": 99, \"y\": 231 }, { \"x\": 108, \"y\": 232 }, { \"x\": 116, \"y\": 233 }, { \"x\": 125, \"y\": 233 }, { \"x\": 134, \"y\": 234 }, { \"x\": 145, \"y\": 233 }, { \"x\": 153, \"y\": 232 }, { \"x\": 160, \"y\": 233 }, { \"x\": 170, \"y\": 234 }, { \"x\": 177, \"y\": 235 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 237 }, { \"x\": 193, \"y\": 238 }, { \"x\": 198, \"y\": 239 }, { \"x\": 200, \"y\": 237 }, { \"x\": 202, \"y\": 239 }, { \"x\": 204, \"y\": 238 }, { \"x\": 206, \"y\": 234 }, { \"x\": 205, \"y\": 230 }, { \"x\": 202, \"y\": 222 }, { \"x\": 197, \"y\": 216 }, { \"x\": 192, \"y\": 207 }, { \"x\": 186, \"y\": 198 }, { \"x\": 179, \"y\": 189 }, { \"x\": 174, \"y\": 183 }, { \"x\": 170, \"y\": 178 }, { \"x\": 164, \"y\": 171 }, { \"x\": 161, \"y\": 168 }, { \"x\": 154, \"y\": 160 }, { \"x\": 148, \"y\": 155 }, { \"x\": 143, \"y\": 150 }, { \"x\": 138, \"y\": 148 }, { \"x\": 136, \"y\": 148 }],\n    name: \"triangle\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 50 }, { x: 50, y: 50 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ x: 0, y: 0 }, { x: 0, y: 100 }, { x: 50, y: 100 }, { x: 50, y: 0 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 78, \"y\": 149 }, { \"x\": 78, \"y\": 153 }, { \"x\": 78, \"y\": 157 }, { \"x\": 78, \"y\": 160 }, { \"x\": 79, \"y\": 162 }, { \"x\": 79, \"y\": 164 }, { \"x\": 79, \"y\": 167 }, { \"x\": 79, \"y\": 169 }, { \"x\": 79, \"y\": 173 }, { \"x\": 79, \"y\": 178 }, { \"x\": 79, \"y\": 183 }, { \"x\": 80, \"y\": 189 }, { \"x\": 80, \"y\": 193 }, { \"x\": 80, \"y\": 198 }, { \"x\": 80, \"y\": 202 }, { \"x\": 81, \"y\": 208 }, { \"x\": 81, \"y\": 210 }, { \"x\": 81, \"y\": 216 }, { \"x\": 82, \"y\": 222 }, { \"x\": 82, \"y\": 224 }, { \"x\": 82, \"y\": 227 }, { \"x\": 83, \"y\": 229 }, { \"x\": 83, \"y\": 231 }, { \"x\": 85, \"y\": 230 }, { \"x\": 88, \"y\": 232 }, { \"x\": 90, \"y\": 233 }, { \"x\": 92, \"y\": 232 }, { \"x\": 94, \"y\": 233 }, { \"x\": 99, \"y\": 232 }, { \"x\": 102, \"y\": 233 }, { \"x\": 106, \"y\": 233 }, { \"x\": 109, \"y\": 234 }, { \"x\": 117, \"y\": 235 }, { \"x\": 123, \"y\": 236 }, { \"x\": 126, \"y\": 236 }, { \"x\": 135, \"y\": 237 }, { \"x\": 142, \"y\": 238 }, { \"x\": 145, \"y\": 238 }, { \"x\": 152, \"y\": 238 }, { \"x\": 154, \"y\": 239 }, { \"x\": 165, \"y\": 238 }, { \"x\": 174, \"y\": 237 }, { \"x\": 179, \"y\": 236 }, { \"x\": 186, \"y\": 235 }, { \"x\": 191, \"y\": 235 }, { \"x\": 195, \"y\": 233 }, { \"x\": 197, \"y\": 233 }, { \"x\": 200, \"y\": 233 }, { \"x\": 201, \"y\": 235 }, { \"x\": 201, \"y\": 233 }, { \"x\": 199, \"y\": 231 }, { \"x\": 198, \"y\": 226 }, { \"x\": 198, \"y\": 220 }, { \"x\": 196, \"y\": 207 }, { \"x\": 195, \"y\": 195 }, { \"x\": 195, \"y\": 181 }, { \"x\": 195, \"y\": 173 }, { \"x\": 195, \"y\": 163 }, { \"x\": 194, \"y\": 155 }, { \"x\": 192, \"y\": 145 }, { \"x\": 192, \"y\": 143 }, { \"x\": 192, \"y\": 138 }, { \"x\": 191, \"y\": 135 }, { \"x\": 191, \"y\": 133 }, { \"x\": 191, \"y\": 130 }, { \"x\": 190, \"y\": 128 }, { \"x\": 188, \"y\": 129 }, { \"x\": 186, \"y\": 129 }, { \"x\": 181, \"y\": 132 }, { \"x\": 173, \"y\": 131 }, { \"x\": 162, \"y\": 131 }, { \"x\": 151, \"y\": 132 }, { \"x\": 149, \"y\": 132 }, { \"x\": 138, \"y\": 132 }, { \"x\": 136, \"y\": 132 }, { \"x\": 122, \"y\": 131 }, { \"x\": 120, \"y\": 131 }, { \"x\": 109, \"y\": 130 }, { \"x\": 107, \"y\": 130 }, { \"x\": 90, \"y\": 132 }, { \"x\": 81, \"y\": 133 }, { \"x\": 76, \"y\": 133 }],\n    name: \"square\"\n  }, {\n    points: [{ \"x\": 67, \"y\": 172 }, { \"x\": 80, \"y\": 85 }, { \"x\": 83, \"y\": 58 }, { \"x\": 83, \"y\": 54 }, { \"x\": 136, \"y\": 110 }, { \"x\": 157, \"y\": 136 }, { \"x\": 162, \"y\": 140 }, { \"x\": 166, \"y\": 143 }, { \"x\": 80, \"y\": 124 }, { \"x\": 45, \"y\": 116 }, { \"x\": 37, \"y\": 114 }, { \"x\": 31, \"y\": 113 }, { \"x\": 52, \"y\": 106 }, { \"x\": 101, \"y\": 86 }, { \"x\": 131, \"y\": 75 }, { \"x\": 157, \"y\": 63 }, { \"x\": 163, \"y\": 62 }, { \"x\": 158, \"y\": 64 }, { \"x\": 153, \"y\": 73 }, { \"x\": 128, \"y\": 103 }, { \"x\": 71, \"y\": 170 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 30, \"y\": 69 }, { \"x\": 116, \"y\": 118 }, { \"x\": 90, \"y\": 164 }, { \"x\": 75, \"y\": 117 }, { \"x\": 157, \"y\": 83 }, { \"x\": 182, \"y\": 140 }, { \"x\": 155, \"y\": 163 }, { \"x\": 144, \"y\": 119 }, { \"x\": 221, \"y\": 54 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 87, \"y\": 76 }, { \"x\": 62, \"y\": 73 }, { \"x\": 100, \"y\": 98 }, { \"x\": 107, \"y\": 57 }, { \"x\": 61, \"y\": 38 }, { \"x\": 73, \"y\": 137 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 123, \"y\": 129 }, { \"x\": 123, \"y\": 131 }, { \"x\": 124, \"y\": 133 }, { \"x\": 125, \"y\": 136 }, { \"x\": 127, \"y\": 140 }, { \"x\": 129, \"y\": 142 }, { \"x\": 133, \"y\": 148 }, { \"x\": 137, \"y\": 154 }, { \"x\": 143, \"y\": 158 }, { \"x\": 145, \"y\": 161 }, { \"x\": 148, \"y\": 164 }, { \"x\": 153, \"y\": 170 }, { \"x\": 158, \"y\": 176 }, { \"x\": 160, \"y\": 178 }, { \"x\": 164, \"y\": 183 }, { \"x\": 168, \"y\": 188 }, { \"x\": 171, \"y\": 191 }, { \"x\": 175, \"y\": 196 }, { \"x\": 178, \"y\": 200 }, { \"x\": 180, \"y\": 202 }, { \"x\": 181, \"y\": 205 }, { \"x\": 184, \"y\": 208 }, { \"x\": 186, \"y\": 210 }, { \"x\": 187, \"y\": 213 }, { \"x\": 188, \"y\": 215 }, { \"x\": 186, \"y\": 212 }, { \"x\": 183, \"y\": 211 }, { \"x\": 177, \"y\": 208 }, { \"x\": 169, \"y\": 206 }, { \"x\": 162, \"y\": 205 }, { \"x\": 154, \"y\": 207 }, { \"x\": 145, \"y\": 209 }, { \"x\": 137, \"y\": 210 }, { \"x\": 129, \"y\": 214 }, { \"x\": 122, \"y\": 217 }, { \"x\": 118, \"y\": 218 }, { \"x\": 111, \"y\": 221 }, { \"x\": 109, \"y\": 222 }, { \"x\": 110, \"y\": 219 }, { \"x\": 112, \"y\": 217 }, { \"x\": 118, \"y\": 209 }, { \"x\": 120, \"y\": 207 }, { \"x\": 128, \"y\": 196 }, { \"x\": 135, \"y\": 187 }, { \"x\": 138, \"y\": 183 }, { \"x\": 148, \"y\": 167 }, { \"x\": 157, \"y\": 153 }, { \"x\": 163, \"y\": 145 }, { \"x\": 165, \"y\": 142 }, { \"x\": 172, \"y\": 133 }, { \"x\": 177, \"y\": 127 }, { \"x\": 179, \"y\": 127 }, { \"x\": 180, \"y\": 125 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 81, \"y\": 219 }, { \"x\": 84, \"y\": 218 }, { \"x\": 86, \"y\": 220 }, { \"x\": 88, \"y\": 220 }, { \"x\": 90, \"y\": 220 }, { \"x\": 92, \"y\": 219 }, { \"x\": 95, \"y\": 220 }, { \"x\": 97, \"y\": 219 }, { \"x\": 99, \"y\": 220 }, { \"x\": 102, \"y\": 218 }, { \"x\": 105, \"y\": 217 }, { \"x\": 107, \"y\": 216 }, { \"x\": 110, \"y\": 216 }, { \"x\": 113, \"y\": 214 }, { \"x\": 116, \"y\": 212 }, { \"x\": 118, \"y\": 210 }, { \"x\": 121, \"y\": 208 }, { \"x\": 124, \"y\": 205 }, { \"x\": 126, \"y\": 202 }, { \"x\": 129, \"y\": 199 }, { \"x\": 132, \"y\": 196 }, { \"x\": 136, \"y\": 191 }, { \"x\": 139, \"y\": 187 }, { \"x\": 142, \"y\": 182 }, { \"x\": 144, \"y\": 179 }, { \"x\": 146, \"y\": 174 }, { \"x\": 148, \"y\": 170 }, { \"x\": 149, \"y\": 168 }, { \"x\": 151, \"y\": 162 }, { \"x\": 152, \"y\": 160 }, { \"x\": 152, \"y\": 157 }, { \"x\": 152, \"y\": 155 }, { \"x\": 152, \"y\": 151 }, { \"x\": 152, \"y\": 149 }, { \"x\": 152, \"y\": 146 }, { \"x\": 149, \"y\": 142 }, { \"x\": 148, \"y\": 139 }, { \"x\": 145, \"y\": 137 }, { \"x\": 141, \"y\": 135 }, { \"x\": 139, \"y\": 135 }, { \"x\": 134, \"y\": 136 }, { \"x\": 130, \"y\": 140 }, { \"x\": 128, \"y\": 142 }, { \"x\": 126, \"y\": 145 }, { \"x\": 122, \"y\": 150 }, { \"x\": 119, \"y\": 158 }, { \"x\": 117, \"y\": 163 }, { \"x\": 115, \"y\": 170 }, { \"x\": 114, \"y\": 175 }, { \"x\": 117, \"y\": 184 }, { \"x\": 120, \"y\": 190 }, { \"x\": 125, \"y\": 199 }, { \"x\": 129, \"y\": 203 }, { \"x\": 133, \"y\": 208 }, { \"x\": 138, \"y\": 213 }, { \"x\": 145, \"y\": 215 }, { \"x\": 155, \"y\": 218 }, { \"x\": 164, \"y\": 219 }, { \"x\": 166, \"y\": 219 }, { \"x\": 177, \"y\": 219 }, { \"x\": 182, \"y\": 218 }, { \"x\": 192, \"y\": 216 }, { \"x\": 196, \"y\": 213 }, { \"x\": 199, \"y\": 212 }, { \"x\": 201, \"y\": 211 }],\n    name: \"other\"\n  }, {\n    points: [{ \"x\": 75, \"y\": 250 }, { \"x\": 75, \"y\": 247 }, { \"x\": 77, \"y\": 244 }, { \"x\": 78, \"y\": 242 }, { \"x\": 79, \"y\": 239 }, { \"x\": 80, \"y\": 237 }, { \"x\": 82, \"y\": 234 }, { \"x\": 82, \"y\": 232 }, { \"x\": 84, \"y\": 229 }, { \"x\": 85, \"y\": 225 }, { \"x\": 87, \"y\": 222 }, { \"x\": 88, \"y\": 219 }, { \"x\": 89, \"y\": 216 }, { \"x\": 91, \"y\": 212 }, { \"x\": 92, \"y\": 208 }, { \"x\": 94, \"y\": 204 }, { \"x\": 95, \"y\": 201 }, { \"x\": 96, \"y\": 196 }, { \"x\": 97, \"y\": 194 }, { \"x\": 98, \"y\": 191 }, { \"x\": 100, \"y\": 185 }, { \"x\": 102, \"y\": 178 }, { \"x\": 104, \"y\": 173 }, { \"x\": 104, \"y\": 171 }, { \"x\": 105, \"y\": 164 }, { \"x\": 106, \"y\": 158 }, { \"x\": 107, \"y\": 156 }, { \"x\": 107, \"y\": 152 }, { \"x\": 108, \"y\": 145 }, { \"x\": 109, \"y\": 141 }, { \"x\": 110, \"y\": 139 }, { \"x\": 112, \"y\": 133 }, { \"x\": 113, \"y\": 131 }, { \"x\": 116, \"y\": 127 }, { \"x\": 117, \"y\": 125 }, { \"x\": 119, \"y\": 122 }, { \"x\": 121, \"y\": 121 }, { \"x\": 123, \"y\": 120 }, { \"x\": 125, \"y\": 122 }, { \"x\": 125, \"y\": 125 }, { \"x\": 127, \"y\": 130 }, { \"x\": 128, \"y\": 133 }, { \"x\": 131, \"y\": 143 }, { \"x\": 136, \"y\": 153 }, { \"x\": 140, \"y\": 163 }, { \"x\": 144, \"y\": 172 }, { \"x\": 145, \"y\": 175 }, { \"x\": 151, \"y\": 189 }, { \"x\": 156, \"y\": 201 }, { \"x\": 161, \"y\": 213 }, { \"x\": 166, \"y\": 225 }, { \"x\": 169, \"y\": 233 }, { \"x\": 171, \"y\": 236 }, { \"x\": 174, \"y\": 243 }, { \"x\": 177, \"y\": 247 }, { \"x\": 178, \"y\": 249 }, { \"x\": 179, \"y\": 251 }, { \"x\": 180, \"y\": 253 }, { \"x\": 180, \"y\": 255 }, { \"x\": 179, \"y\": 257 }, { \"x\": 177, \"y\": 257 }, { \"x\": 174, \"y\": 255 }, { \"x\": 169, \"y\": 250 }, { \"x\": 164, \"y\": 247 }, { \"x\": 160, \"y\": 245 }, { \"x\": 149, \"y\": 238 }, { \"x\": 138, \"y\": 230 }, { \"x\": 127, \"y\": 221 }, { \"x\": 124, \"y\": 220 }, { \"x\": 112, \"y\": 212 }, { \"x\": 110, \"y\": 210 }, { \"x\": 96, \"y\": 201 }, { \"x\": 84, \"y\": 195 }, { \"x\": 74, \"y\": 190 }, { \"x\": 64, \"y\": 182 }, { \"x\": 55, \"y\": 175 }, { \"x\": 51, \"y\": 172 }, { \"x\": 49, \"y\": 170 }, { \"x\": 51, \"y\": 169 }, { \"x\": 56, \"y\": 169 }, { \"x\": 66, \"y\": 169 }, { \"x\": 78, \"y\": 168 }, { \"x\": 92, \"y\": 166 }, { \"x\": 107, \"y\": 164 }, { \"x\": 123, \"y\": 161 }, { \"x\": 140, \"y\": 162 }, { \"x\": 156, \"y\": 162 }, { \"x\": 171, \"y\": 160 }, { \"x\": 173, \"y\": 160 }, { \"x\": 186, \"y\": 160 }, { \"x\": 195, \"y\": 160 }, { \"x\": 198, \"y\": 161 }, { \"x\": 203, \"y\": 163 }, { \"x\": 208, \"y\": 163 }, { \"x\": 206, \"y\": 164 }, { \"x\": 200, \"y\": 167 }, { \"x\": 187, \"y\": 172 }, { \"x\": 174, \"y\": 179 }, { \"x\": 172, \"y\": 181 }, { \"x\": 153, \"y\": 192 }, { \"x\": 137, \"y\": 201 }, { \"x\": 123, \"y\": 211 }, { \"x\": 112, \"y\": 220 }, { \"x\": 99, \"y\": 229 }, { \"x\": 90, \"y\": 237 }, { \"x\": 80, \"y\": 244 }, { \"x\": 73, \"y\": 250 }, { \"x\": 69, \"y\": 254 }, { \"x\": 69, \"y\": 252 }],\n    name: \"other\"\n  }];\n\n  ShapeDetector.prototype.spot = function (points, patternName) {\n\n    if (patternName == null) {\n      patternName = '';\n    }\n\n    var distance, pattern, score;\n    var stroke = new Stroke(points);\n    var bestDistance = +Infinity;\n    var bestPattern = null;\n    var bestScore = 0;\n\n    for (var i = 0; i < this.patterns.length; i++) {\n      pattern = this.patterns[i];\n\n      if (pattern.name.indexOf(patternName) > -1) {\n        distance = stroke.distanceAtBestAngle(pattern);\n        score = 1.0 - distance / _halfDiagonal;\n\n        if (distance < bestDistance && score > this.threshold) {\n          bestDistance = distance;\n          bestPattern = pattern.name;\n          bestScore = score;\n        }\n      }\n    }\n\n    return {\n      pattern: bestPattern,\n      score: bestScore\n    };\n  };\n\n  ShapeDetector.prototype.learn = function (name, points) {\n\n    return this.patterns.push(new Stroke(points, name));\n  };\n\n  return ShapeDetector;\n});\n\n},{}],33:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetWindow = resetWindow;\nvar touch = require('./touch');\nvar ui = require('./ui');\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar timing = require('./timing');\nvar util = require('./util');\nvar sound = require('./sound');\nvar shape = require('./shape');\n\nfunction resetWindow() {\n  window.kan = {\n    currentColor: '#2B5E2E',\n    composition: [],\n    compositionInterval: null,\n    compositionTimeout: null,\n    soundTimeouts: [],\n    lastEvent: null,\n    interaction: false,\n    moves: [],\n    playing: false,\n    pinching: false,\n    pinchedGroup: null,\n    pinchedTut: null,\n    pathData: {},\n    shapePath: null,\n    prevAngle: null,\n    sides: [],\n    side: [],\n    corners: [],\n    lastScale: 1,\n    lastRotation: 0,\n    originalPosition: null,\n    tutorialCompletion: {\n      \"fill\": false,\n      \"pinch\": false,\n      \"swipe\": false\n    },\n    inactivityTimeout: null,\n    playPromptTimeout: null,\n    userHasDrawnFirstShape: false,\n    firstTimePlaying: true,\n    shapesSinceTut: 0,\n    refreshCheckInterval: null,\n    sha: null,\n    scheduledOverlay: null,\n    continueCountdownInterval: null,\n    shapeSounds: null\n  };\n}\n\n$(window).on('load', function () {\n  function run() {\n    resetWindow();\n    util.setSha();\n    ui.init();\n    overlays.init();\n    timing.init();\n    shape.init();\n    sound.init().then(function () {\n      // sound.init() is async because it loads in the sound files\n      touch.init();\n    }).fail(function (e) {\n      console.error('error initting shape sounds:', e);\n      location.reload();\n    });\n  }\n\n  try {\n    run();\n  } catch (e) {\n    console.error(e);\n    setTimeout(function () {\n      // wait 5 seconds then reload\n      location.reload();\n    }, 5 * 1000);\n  }\n});\n\n},{\"./overlays\":34,\"./shape\":35,\"./sound\":37,\"./timing\":38,\"./touch\":39,\"./ui\":41,\"./util\":42,\"./video\":43}],34:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openOverlay = openOverlay;\nexports.resetContinueCountdown = resetContinueCountdown;\nexports.cardNavNext = cardNavNext;\nexports.closeAndResetOverlays = closeAndResetOverlays;\nexports.init = init;\nvar config = require('./../../config');\n\nvar touch = require('./touch');\nvar video = require('./video');\nvar timing = require('./timing');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar hammerCanvas = touch.hammerCanvas;\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar $cardsWrap = $body.find('.overlay.tips .card-wrap');\nvar $cardItems = $cardsWrap.find('article');\nvar cardsCount = $cardItems.length;\nvar $footer = $body.find('.overlay.tips .footer');\n\nvar $sharePhone = $body.find('#phone');\nvar $shareKeypad = $body.find('.keypad');\n\nvar allOverlays = ['intro', 'play-prompt', 'share-prompt', 'continue', 'tips', 'share'];\nvar overlayOpenClasses = allOverlays.map(function (overlay) {\n  return overlay + '-active';\n}).join(' ');\n\nvar overlayActiveClass = 'overlay-active';\n\nfunction openOverlay(overlayName) {\n  // console.log('attempting to open overlay', overlayName);\n  if (window.kan.overlays === false) return;\n  if (allOverlays.includes(overlayName)) {\n    if (window.kan.pinching === true || window.kan.panning === true) {\n      if (overlayName === 'continue') {\n        timing.preventInactivityTimeout();\n      } else {\n        // console.log('scheduling overlay', overlayName);\n        window.kan.scheduledOverlay = overlayName;\n      }\n      return;\n    }\n    closeAndResetOverlays();\n    tutorial.hideContextualTuts();\n    $body.addClass(overlayActiveClass);\n    $body.find('.overlay:not(.tips)').on(tapEvent, function () {\n      closeAndResetOverlays();\n    });\n\n    switch (overlayName) {\n      case 'intro':\n        openIntroOverlay();\n        break;\n      case 'play-prompt':\n        if (util.anyShapesOnCanvas()) {\n          openPlayPromptOverlay();\n        } else {\n          window.kan.playPromptTimeout = setTimeout(function () {\n            openOverlay('play-prompt');\n          }, timing.playPromptDelay / 2);\n        }\n        break;\n      case 'share-prompt':\n        openSharePromptOverlay();\n        break;\n      case 'continue':\n        openContinueOverlay();\n        break;\n      case 'tips':\n        openTipsOverlay();\n        break;\n      case 'share':\n        openShareOverlay();\n        break;\n    }\n  } else {\n    // console.log('unable to open unknown overlay', overlayName);\n  }\n}\n\nfunction openIntroOverlay() {\n  $body.addClass('intro-active');\n}\n\nfunction openPlayPromptOverlay() {\n  $body.addClass('play-prompt-active');\n}\n\nfunction openSharePromptOverlay() {\n  $body.addClass('share-prompt-active');\n}\n\nfunction resetContinueCountdown() {\n  $('.overlay.continue .countdown-num').html(parseInt(timing.continueInactivityDelay / 1000));\n  clearInterval(window.kan.continueCountdownInterval);\n}\n\nfunction openContinueOverlay() {\n  $body.addClass('continue-active');\n\n  resetContinueCountdown();\n  clearTimeout(window.kan.inactivityTimeout);\n  clearTimeout(window.kan.playPromptTimeout);\n\n  window.kan.continueCountdownInterval = setInterval(function () {\n    var $countdownNumWrap = $('.overlay.continue .countdown-num');\n    var count = parseInt($countdownNumWrap.html());\n    if (count > 1) {\n      $countdownNumWrap.html(count - 1);\n    }\n  }, 1000);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    video.enterTutorialMode();\n  }, timing.continueInactivityDelay);\n}\n\nfunction openTipsOverlay() {\n  $body.addClass('tips-active');\n  activateTipsCards();\n}\n\nfunction openShareOverlay() {\n  $body.addClass('share-active');\n}\n\n// card slider navigation\nfunction cardNavNext() {\n  var $old = $body.find('.card-wrap .current');\n  var $new = $old.next().length ? $old.next() : $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  var slide = $new.index();\n  $old.removeClass().addClass('remove');\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(slide + 1, cardsCount);\n  setTimeout(function () {\n    $old.removeClass();\n  }, 600);\n}\n\n// tips card interactions\nfunction cardInteractions() {\n  var timeOfLastInteraction = 0;\n\n  $body.find('.overlay').on(tapEvent, function (e) {\n    var currentTime = Date.now();\n    if (timeOfLastInteraction > currentTime - 250) {\n      return;\n    }\n    timeOfLastInteraction = currentTime;\n\n    if ($(e.target).closest('.card-wrap').length == 1) {\n      // directly on a card, navigate to the next one\n      cardNavNext();\n    } else {\n      // outside elements, close everything and reset\n      closeAndResetOverlays();\n    }\n  });\n}\n\nfunction resetTips() {\n  $cardItems.removeClass();\n  $sharePhone.html('');\n}\n\n// close and reset tips\nfunction closeAndResetOverlays() {\n  $body.removeClass('overlay-active');\n  $body.removeClass(overlayOpenClasses);\n  resetTips();\n}\n\n// deal a fresh stack of cards\nfunction activateTipsCards() {\n  var $new = $cardItems.first();\n  var $next = $new.next().length ? $new.next() : $cardItems.first();\n  var $third = $next.next().length ? $next.next() : $cardItems.first().next();\n  $cardItems.removeClass();\n  $new.removeClass().addClass('current');\n  $next.removeClass().addClass('next');\n  $third.removeClass().addClass('third');\n  updateCardCounter(1, cardsCount);\n}\n\n// counting cards\nfunction updateCardCounter(current, total) {\n  $footer.find('.current').html(current);\n  $footer.find('.next').html(total);\n}\n\n// phone inputs\nfunction phoneNumberInputs() {\n  // mask the output\n  $sharePhone.mask('000-000-0000');\n  // get interactions from the keypad\n  $shareKeypad.find('.num').on(tapEvent, function (e) {\n    var phoneNumber = $sharePhone.html().toString() + $(e.target).html().toString();\n    phoneNumber = $sharePhone.masked(phoneNumber);\n    $sharePhone.html(phoneNumber);\n  });\n  // clear the display\n  $shareKeypad.find('.clear').on(tapEvent, function (e) {\n    $sharePhone.html('');\n  });\n  // FIXME: send sms\n  // $shareKeypad.find('.send').on(tapEvent, e => {});\n}\n\n// \"randomly\" place fiddly bits on the cards\nfunction randomCardGraphics() {\n  $body.find('.card-wrap article').each(function (i, el) {\n    $(el).attr('data-bg', i);\n  });\n}\n\nfunction initTips() {\n  cardInteractions();\n}\n\nfunction initShare() {\n  phoneNumberInputs();\n  randomCardGraphics();\n}\n\nfunction init() {\n  initTips();\n  initShare();\n}\n\n},{\"./../../config\":1,\"./timing\":38,\"./touch\":39,\"./tutorial\":40,\"./util\":42,\"./video\":43}],35:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.startKeepaliveAnimation = startKeepaliveAnimation;\nexports.stopKeepaliveAnimation = stopKeepaliveAnimation;\nexports.destroyGroupPops = destroyGroupPops;\nexports.fillInGroupPopsById = fillInGroupPopsById;\nexports.toggleFill = toggleFill;\nexports.cleanUpGroup = cleanUpGroup;\nexports.updatePops = updatePops;\nexports.getOutlineGroup = getOutlineGroup;\nexports.getTruedShape = getTruedShape;\nexports.getCompletedPath = getCompletedPath;\nexports.getShapePrediction = getShapePrediction;\nexports.getIntegerPoint = getIntegerPoint;\nexports.stringifyPoint = stringifyPoint;\nexports.parsePoint = parsePoint;\nexports.getClosestPointFromPathData = getClosestPointFromPathData;\nexports.processShapeData = processShapeData;\nexports.findInteriorCurves = findInteriorCurves;\nexports.getExtendedPath = getExtendedPath;\nexports.getBruteExtendedPath = getBruteExtendedPath;\nexports.getTrimmedPath = getTrimmedPath;\nexports.hitTestGroupBounds = hitTestGroupBounds;\nexports.hitTestBounds = hitTestBounds;\nexports.init = init;\nvar ShapeDetector = require('./lib/shape-detector');\n\nvar config = require('./../../config');\n\nvar util = require('./util');\nvar color = require('./color');\n\nvar keepaliveShape = exports.keepaliveShape = void 0;\n\nvar cornerThresholdDeg = exports.cornerThresholdDeg = 30;\nvar thresholdDistMultiplier = exports.thresholdDistMultiplier = 0.1;\n\nvar detector = exports.detector = new ShapeDetector(ShapeDetector.defaultShapes);\n\nvar shapeNames = exports.shapeNames = [\"line\", \"circle\", \"square\", \"triangle\", \"other\"];\n\nfunction clearPops() {\n  var pops = util.getAllPops();\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nvar keepaliveInterval = null;\n\n// the canvas recorder automatically trims 'still' frames, so I add a semitransparent 1px square to trick the recorder into recording :)\nfunction initKeepaliveShape() {\n  exports.keepaliveShape = keepaliveShape = Path.Rectangle({\n    point: [1, 1],\n    size: [1, 1],\n    strokeColor: new Color(0, 0.001),\n    visible: false,\n    name: 'keepalive'\n  });\n}\n\nfunction startKeepaliveAnimation() {\n  keepaliveShape.visible = true;\n  keepaliveInterval = setInterval(function () {\n    keepaliveShape.rotation += 5;\n  }, 40);\n};\n\nfunction stopKeepaliveAnimation() {\n  keepaliveShape.visible = false;\n  clearInterval(keepaliveInterval);\n}\n\nfunction destroyGroupPops(group) {\n  // console.log('destroying pops');\n  var groupPopsBefore = util.getGroupPops(group);\n  // console.log('pops to be destroyed', groupPopsBefore);\n  if (groupPopsBefore.length > 0) {\n    groupPopsBefore.forEach(function (pop) {\n      return pop.remove();\n    });\n  }\n  var groupPopsAfter = util.getGroupPops(group);\n  // console.log('group pops after', groupPopsAfter);\n}\n\nfunction fillInGroupPopsById(groupId) {\n  var group = paper.project.getItem({\n    className: 'Group',\n    match: function match(el) {\n      return el.id === groupId;\n    }\n  });\n\n  if (!!group && group.children.length > 0) {\n    group.children.forEach(function (groupChild) {\n      if (groupChild.name === 'loop') {\n        toggleFill(groupChild);\n      }\n    });\n  }\n}\n\nfunction toggleFill(item) {\n  var transparent = color.transparent;\n  // console.log('hit');\n  var parent = item.parent;\n\n  // console.log('hit item', item);\n  // console.log('hit parent', parent);\n\n  if (item.data.interior) {\n    // console.log('interior');\n    item.data.transparent = !item.data.transparent;\n\n    if (item.data.transparent) {\n      // console.log('transparent');\n      item.fillColor = transparent;\n      item.strokeColor = transparent;\n    } else {\n      // console.log('not transparent');\n      item.fillColor = parent.data.color;\n      item.strokeColor = parent.data.color;\n    }\n\n    window.kan.moves.push({\n      type: 'fillChange',\n      id: item.id,\n      fill: parent.data.color,\n      transparent: item.data.transparent\n    });\n  } else {\n    // console.log('not interior');\n    // check if item is a pop, because then we'll fill the pop's parent\n    if (!!item.data && item.data.pop === true) {\n      if (!!item.parent) {\n        if (config.pop === true) {\n          fillInGroupPopsById(item.parent.id);\n        }\n      }\n    }\n  }\n}\n\nfunction cleanUpGroup(group) {\n  // console.log('cleaning up group');\n  var acceptableNames = ['mask', 'outer', 'shapePath', 'loop', 'pop'];\n\n  group.children.forEach(function (groupChild) {\n    if (groupChild.name === null || !acceptableNames.includes(groupChild.name) || !groupChild.length > 0) {\n      groupChild.remove();\n    }\n  });\n\n  return group;\n}\n\nfunction updatePops() {\n  var freshGroups = util.getFreshGroups();\n  var popCandidates = util.getPopCandidates();\n  var allPops = util.getAllPops();\n  popCandidates.reverse();\n  // console.log('freshGroups', freshGroups);\n  // console.log('popCandidates', popCandidates);\n  // clearPops();\n\n  freshGroups.forEach(function (freshGroup, i) {\n    // if (i >= 4) return;\n    // console.log('freshGroup', freshGroup);\n\n    var freshOuter = freshGroup._namedChildren.mask[0];\n    freshOuter.bringToFront();\n    // freshOuter.visible = true;\n    // freshOuter.fillColor = 'black';\n    // freshOuter.selected = true;\n    // console.log('freshOuter', freshOuter);\n    // freshOuter.selected = true;\n    popCandidates.forEach(function (otherGroup, j) {\n      var otherGroupOuter = otherGroup._namedChildren.mask[0];\n      if (freshGroup.id !== otherGroup.id) {\n        // console.log('otherGroup', otherGroup);\n        // console.log('otherGroupOuter', otherGroupOuter);\n        // otherGroupOuter.fillColor = 'white';\n        otherGroupOuter.bringToFront();\n        var thisPop = freshOuter.intersect(otherGroupOuter);\n        if (!!thisPop && thisPop.length > 0) {\n          // const popColor = color.getIndexedPopColor(i + j);\n          var popColor = color.getRandomPop();\n          thisPop.fillColor = popColor;\n          thisPop.strokeColor = popColor;\n          thisPop.data.pop = true;\n          thisPop.name = 'pop';\n          thisPop.data.popGroup = freshGroup.id;\n          thisPop.data.intersectingGroup = otherGroup.id;\n          thisPop.visible = true;\n          thisPop.closed = true;\n          thisPop.bringToFront();\n          freshGroup.addChild(thisPop);\n        }\n\n        cleanUpGroup(freshGroup);\n\n        // figure out if this pop intersects any other pops\n        // allPops.forEach((otherPop, k) => {\n        //   console.log('checking other pop', otherPop);\n        //   if (thisPop.id !== otherPop.id && thisPop.intersects(otherPop)) {\n        //     let popIntersection = thisPop.getIntersections(otherPop);\n        //     if (!!popIntersection && popIntersection.length > 0) {\n        //       popIntersection = new Path([popIntersection])\n        //       console.log('popIntersection', popIntersection);\n        //       // const popColor = color.getIndexedPopColor(i + j + k);\n        //       const popColor = color.getRandomPop();\n        //       popIntersection.data.pop = true;\n        //       popIntersection.fillColor = popColor\n        //       popIntersection.strokeColor = popColor;\n        //       popIntersection.visible = true;\n        //       popIntersection.closed = true;\n        //       popIntersection.bringToFront();\n        //     }\n        //   }\n        // });\n      }\n    });\n\n    freshGroup.data.fresh = false;\n  });\n}\n\nfunction getOutlineGroup(truedShape) {\n  // console.log('truedShape', truedShape);\n  var outerPath = new Path();\n  outerPath.name = 'outer';\n  outerPath.visible = true;\n\n  var middlePath = new Path();\n  middlePath.name = 'middle';\n  var sizes = [];\n  var angle = null,\n      lastAngle = null,\n      angleDelta = void 0;\n\n  var firstTop = null,\n      firstBottom = null;\n  var lastTop = null,\n      lastBottom = null;\n\n  if (!(truedShape.length > 0)) return new Group(outerPath, middlePath);\n\n  middlePath.add(truedShape.firstSegment.point);\n\n  for (var i = 0; i < truedShape.length; i += 10) {\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n\n    var size = Math.random() * 9; // This is just random variance\n    sizes.push(size);\n\n    var cumSize = 0;\n    for (var j = 0; j < sizes.length; j++) {\n      cumSize += sizes[j];\n    }\n    var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n    var point = truedShape.getPointAt(i);\n    var normal = truedShape.getNormalAt(i);\n\n    var top = new Point(point.x + normal.x * avgSize, point.y + normal.y * avgSize);\n    var bottom = new Point(point.x - normal.x * avgSize, point.y - normal.y * avgSize);\n\n    // console.log('point', point, 'normal', normal);\n    // console.log('top', top, 'bottom', bottom);\n\n    outerPath.add(top);\n    outerPath.insert(0, bottom);\n    middlePath.add(point);\n\n    lastAngle = angle;\n\n    if (i == 10) {\n      firstTop = top;\n      firstBottom = bottom;\n    } else {\n      lastTop = top;\n      lastBottom = bottom;\n    }\n  }\n\n  if (truedShape.closed === true) {\n    var centerTop = new Point((firstTop.x + lastTop.x) / 2, (firstTop.y + lastTop.y) / 2);\n    var centerBottom = new Point((firstBottom.x + lastBottom.x) / 2, (firstBottom.y + lastBottom.y) / 2);\n    var center = new Point((centerTop.x + centerBottom.x) / 2, (centerTop.y + centerBottom.y) / 2);\n\n    outerPath.add(centerTop);\n    outerPath.insert(0, centerBottom);\n    middlePath.add(center);\n\n    outerPath.add(firstTop);\n    outerPath.insert(0, firstBottom);\n    middlePath.closed = true;\n  }\n\n  outerPath.flatten(50);\n  middlePath.flatten(50);\n  outerPath.simplify();\n  middlePath.simplify();\n\n  outerPath.selected = false;\n  // middlePath.selected = true;\n  outerPath.name = 'outer';\n  middlePath.name = 'middle';\n  var returnGroup = new Group(outerPath, middlePath);\n  return returnGroup;\n}\n\nfunction getTruedShape(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  // console.log('pathClone', pathClone);\n  var completedPath = getCompletedPath(pathClone);\n  // completedPath.reduce();\n\n  // true the path!\n  var truedPath = completedPath;\n  // console.log('truedPath', truedPath);\n\n  truedPath.strokeWidth = pathClone.strokeWidth;\n\n  pathClone.remove();\n  return truedPath;\n}\n\n// extend or trim path if the ends are close\nfunction getCompletedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n  pathClone.reduce();\n  pathClone.simplify();\n\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    // trim path if ends are close\n    var trimmedPath = getTrimmedPath(pathClone);\n\n    pathClone.remove();\n\n    return trimmedPath;\n  } else {\n    // extend path to see if an intersection is near\n    var extendedPath = getExtendedPath(pathClone);\n    var _intersections = extendedPath.getIntersections();\n\n    // pathClone.remove();\n\n    if (_intersections.length > 0) {\n      // trim extra extended path\n      var _trimmedPath = getTrimmedPath(extendedPath);\n      extendedPath.remove();\n      return _trimmedPath;\n    } else {\n      // extended path does not intersect, return the original path\n      extendedPath.replaceWith(getBruteExtendedPath(pathClone));\n      if (extendedPath !== null) {\n        var _intersections2 = extendedPath.getIntersections();\n\n        if (_intersections2.length > 0) {\n          var _trimmedPath2 = getTrimmedPath(extendedPath);\n          extendedPath.remove();\n          return _trimmedPath2;\n        }\n\n        if (!!extendedPath && extendedPath.length > 0) {\n          extendedPath.remove();\n        }\n      }\n\n      pathClone.visible = true;\n      return pathClone;\n    }\n  }\n}\n\nfunction getShapePrediction(path) {\n  var prediction = {};\n\n  var shapeJSON = path.exportJSON();\n  var shapeData = processShapeData(shapeJSON);\n  // console.log(JSON.stringify(shapeData));\n  var shapePrediction = detector.spot(shapeData);\n\n  if (shapePrediction.score === 0) {\n    // algorithm doesn't like vertical lines for some reason\n    // if the certainty is 0 it's probably a line\n    prediction.pattern = \"line\";\n    prediction.score = 0.9;\n  } else {\n    if (shapePrediction.score > 0.5) {\n      prediction.pattern = shapePrediction.pattern;\n    } else {\n      prediction.pattern = \"other\";\n    }\n    prediction.score = shapePrediction.score;\n  }\n\n  if (path.closed === true) {\n    var closedShapes = ['triangle', 'square', 'circle'];\n    if (closedShapes.includes(prediction.pattern) === false) {\n      // closed shape should be one of the above, make a random pick\n      prediction.pattern = util.randomPick(closedShapes);\n    }\n  } else if (path.intersects(path) === true) {\n    prediction.pattern = 'other';\n    // const intersectingShapes = ['triangle', 'square', 'circle', 'other'];\n    // if (intersectingShapes.includes(prediction.pattern) === false) {\n    //   prediction.pattern = util.randomPick(intersectingShapes);\n    // }\n  } else {\n    prediction.pattern = 'line'; // lines are the only shape that is not closed and does not intersect\n  }\n\n  // console.log('shape prediction', prediction);\n\n  return prediction;\n}\n\n// floors the coordinates of a point\nfunction getIntegerPoint(point) {\n  return new Point(Math.floor(point.x), Math.floor(point.y));\n}\n\nfunction stringifyPoint(point) {\n  return Math.floor(point.x) + ',' + Math.floor(point.y);\n}\n\nfunction parsePoint(pointStr) {\n  var split = pointStr.split(',').map(function (num) {\n    return Math.floor(num);\n  });\n\n  if (split.length >= 2) {\n    return new Point(split[0], split[1]);\n  }\n\n  return null;\n}\n\nfunction getClosestPointFromPathData(point, pathData) {\n  var leastDistance = void 0,\n      closestPoint = void 0;\n\n  Base.each(pathData, function (datum, i) {\n    var distance = point.getDistance(datum.point);\n    if (!leastDistance || distance < leastDistance) {\n      leastDistance = distance;\n      closestPoint = datum.point;\n    }\n  });\n\n  return closestPoint || point;\n}\n\nfunction processShapeData(json) {\n  var returnShape = [];\n  var jsonObj = JSON.parse(json)[1]; // zero index is stringified type (e.g. \"Path\")\n\n  if ('segments' in jsonObj) {\n    var segments = jsonObj.segments;\n    Base.each(segments, function (segment, i) {\n      if (segment.length === 3) {\n        var positionInfo = segment[0]; // indexes 1 and 2 are superfluous matrix details\n        returnShape.push({\n          x: positionInfo[0],\n          y: positionInfo[1]\n        });\n      } else {\n        returnShape.push({\n          x: segment[0],\n          y: segment[1]\n        });\n      };\n    });\n  }\n  return returnShape;\n}\n\nfunction findInteriorCurves(path) {\n  var transparent = color.transparent;\n\n  var interiorCurves = [];\n\n  var pathClone = path.clone();\n  var intersections = pathClone.getIntersections();\n\n  if (intersections.length > 0) {\n    var dividedPath = pathClone.resolveCrossings();\n    // console.log(dividedPath);\n\n    if (dividedPath.className === 'CompoundPath') {\n      Base.each(dividedPath.children, function (child, i) {\n        if (child.length > 0 && child.closed) {\n          var enclosedLoop = child.clone();\n          if (pathClone.closed) {\n            enclosedLoop.fillColor = pathClone.strokeColor;\n            enclosedLoop.data.interior = true;\n            enclosedLoop.data.transparent = false;\n          } else {\n            enclosedLoop.fillColor = transparent;\n            enclosedLoop.data.transparent = true;\n          }\n          enclosedLoop.data.interior = true;\n          enclosedLoop.visible = true;\n          enclosedLoop.closed = true;\n          interiorCurves.push(enclosedLoop);\n        }\n      });\n    } else {\n      if (pathClone.closed) {\n        var enclosedLoop = pathClone.clone();\n        enclosedLoop.visible = true;\n        enclosedLoop.fillColor = pathClone.strokeColor;\n        enclosedLoop.data.interior = true;\n        enclosedLoop.data.transparent = false;\n        interiorCurves.push(enclosedLoop);\n      }\n    }\n  } else {\n    if (pathClone.closed) {\n      var _enclosedLoop = pathClone.clone();\n      _enclosedLoop.visible = true;\n      _enclosedLoop.fillColor = pathClone.strokeColor;\n      _enclosedLoop.data.interior = true;\n      _enclosedLoop.data.transparent = false;\n      interiorCurves.push(_enclosedLoop);\n    }\n  }\n\n  return interiorCurves;\n}\n\nfunction getExtendedPath(path) {\n  var bruteForce = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n\n  var firstSegment = extendedPath.firstSegment;\n  var nextSegment = firstSegment.next;\n  var startAngle = Math.atan2(nextSegment.point.y - firstSegment.point.y, nextSegment.point.x - firstSegment.point.x); // rad\n  var inverseStartAngle = startAngle + Math.PI;\n  var extendedStartPoint = new Point(firstSegment.point.x + Math.cos(inverseStartAngle) * thresholdDist / 2, firstSegment.point.y + Math.sin(inverseStartAngle) * thresholdDist / 2);\n  extendedPath.insert(0, extendedStartPoint);\n\n  var lastSegment = extendedPath.lastSegment;\n  var penSegment = lastSegment.previous; // penultimate\n  var endAngle = Math.atan2(lastSegment.point.y - penSegment.point.y, lastSegment.point.x - penSegment.point.x); // rad\n  var extendedEndPoint = new Point(lastSegment.point.x + Math.cos(endAngle) * thresholdDist / 2, lastSegment.point.y + Math.sin(endAngle) * thresholdDist / 2);\n  extendedPath.add(extendedEndPoint);\n\n  // extendedPath.visible = true;\n\n  return extendedPath;\n}\n\nfunction getBruteExtendedPath(path) {\n  var extendedPath = path.clone();\n  extendedPath.visible = false;\n\n  var thresholdDist = thresholdDistMultiplier * extendedPath.length;\n  var firstPoint = extendedPath.firstSegment.point;\n  var lastPoint = extendedPath.lastSegment.point;\n\n  if (firstPoint.getDistance(lastPoint) < thresholdDist) {\n    extendedPath.insert(0, lastPoint);\n    extendedPath.add(firstPoint);\n    extendedPath.closed = true;\n    extendedPath.unite();\n    var crossings = extendedPath.resolveCrossings();\n    if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n      (function () {\n        var maxArea = 0,\n            maxChild = null;\n        crossings.children.forEach(function (child) {\n          if (child.area > maxArea) {\n            maxChild = child;\n            maxArea = child.area;\n          }\n        });\n\n        extendedPath = maxChild;\n      })();\n    }\n  }\n\n  return extendedPath;\n}\n\nfunction getTrimmedPath(path) {\n  var pathClone = path.clone();\n  pathClone.visible = false;\n\n  var firstPoint = pathClone.firstSegment.point;\n  var lastPoint = pathClone.lastSegment.point;\n  var thresholdDist = thresholdDistMultiplier * pathClone.length;\n\n  var intersections = pathClone.getIntersections();\n  intersections.forEach(function (intersection, i) {\n    if (intersection.offset === 0) {\n      intersections.splice(i, 1);\n    }\n  });\n\n  // console.log('intersections', intersections);\n\n  if (intersections.length == 1) {\n    for (var i = 0; i < intersections.length; i++) {\n      var intersectionPoint = intersections[i].point;\n\n      // if the average of the distance between the first and last points and the intersection point is within the threshold, trim\n      if (firstPoint.getDistance(intersectionPoint) + lastPoint.getDistance(intersectionPoint) < 2 * thresholdDist) {\n        // console.log('trimming path');\n        var dividedPath = pathClone.clone(); // resolve crossings seems to modify the path it was passed, so make an extra clone to be safe\n        dividedPath.visible = false;\n        var pathCrossings = dividedPath.resolveCrossings();\n\n        if (pathCrossings.className === 'CompoundPath' && pathCrossings.children.length > 0) {\n          for (var j = 0; j < pathCrossings.children.length; j++) {\n            var child = pathCrossings.children[j];\n            if (child.closed) {\n              // child.selected = true;\n              dividedPath = dividedPath.subtract(child);\n            }\n          }\n        }\n\n        // dividedPath.selected = true;\n\n        var trimmedPath = pathClone.subtract(dividedPath);\n        if (trimmedPath.length === 0) return pathClone;\n        if (trimmedPath.className === 'CompoundPath' && trimmedPath.children.length > 0) {\n          var _ret2 = function () {\n            var closedChildren = [];\n            trimmedPath.children.forEach(function (child, i) {\n              if (child.length > 0 && child.closed) {\n                var childClone = child.clone();\n                childClone.visible = false;\n                closedChildren.push(childClone);\n              }\n            });\n\n            if (closedChildren.length > 0) {\n              if (closedChildren.length > 1) {\n                // for some reason there are more than one closed children, merge them\n                var accumulator = closedChildren[0];\n\n                for (var _j = 1; _j < closedChildren.length; _j++) {\n                  accumulator = accumulator.unite(closedChildren[_j]);\n                }\n\n                if (accumulator.length > 0 && accumulator.className === 'Path') {\n                  // console.log('trimmed accumulator', accumulator);\n                  var newPath = new Path();\n                  newPath.copyContent(accumulator);\n                  newPath.copyAttributes(pathClone);\n                  accumulator.remove();\n                  pathClone.remove();\n                  dividedPath.remove();\n                  trimmedPath.remove();\n                  return {\n                    v: newPath\n                  };\n                }\n              }\n\n              pathClone.remove();\n              dividedPath.remove();\n              trimmedPath.remove();\n              // console.log('trimmed closedChildren[0]', closedChildren[0]);\n              return {\n                v: closedChildren[0]\n              };\n            }\n          }();\n\n          if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n        }\n\n        // console.log('trimmed path return', trimmedPath);\n        // console.log('path clone', pathClone);\n        // console.log('dividedPath', dividedPath);\n        pathClone.remove();\n        dividedPath.remove();\n        return trimmedPath;\n      }\n    }\n\n    // no close intersection were found so nothing can be trimmed\n    return pathClone;\n  } else {\n    return path;\n  }\n}\n\nfunction hitTestGroupBounds(point) {\n  var groups = util.getVisibleGroups();\n  return hitTestBounds(point, groups);\n}\n\nfunction hitTestBounds(point, children) {\n  if (!point) return null;\n\n  for (var i = children.length - 1; i >= 0; i--) {\n    var child = children[i];\n    var bounds = child.strokeBounds;\n    if (point.isInside(child.strokeBounds)) {\n      return child;\n    }\n  }\n\n  return null;\n}\n\nfunction init() {\n  initKeepaliveShape();\n}\n\n},{\"./../../config\":1,\"./color\":31,\"./lib/shape-detector\":32,\"./util\":42}],36:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.record = record;\nvar config = require('./../../config');\n\nvar Promise = require('bluebird');\nvar axios = require('axios');\n\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar drawCanvas = document.getElementById(config.canvasId);\nvar canvasRecorder = RecordRTC(drawCanvas, {\n  type: 'canvas'\n});\n\nfunction asyncStopAudioRecordingAndExportBlob(recorder) {\n  return new Promise(function (resolve, reject) {\n    try {\n      recorder.stop();\n      recorder.exportWAV(function (blob) {\n        resolve(blob);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nfunction asyncStopVideoRecordingAndExportBlob(recorder) {\n  return new Promise(function (resolve, reject) {\n    try {\n      recorder.stopRecording(function () {\n        var blob = recorder.getBlob();\n        resolve(blob);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nfunction record() {\n  var audioRecorder = new Recorder(Howler.masterGain, {\n    workerPath: '/js/lib/recorderWorker.js'\n  });\n\n  canvasRecorder.startRecording();\n  audioRecorder.record();\n\n  sound.asyncPlayCompositionOnce().then(function () {\n    return Promise.all([asyncStopAudioRecordingAndExportBlob(audioRecorder), asyncStopVideoRecordingAndExportBlob(canvasRecorder)]).then(function (values) {\n      var _values = _slicedToArray(values, 2),\n          audioBlob = _values[0],\n          videoBlob = _values[1];\n\n      console.log('audioBlob', audioBlob);\n      console.log('videoBlob', videoBlob);\n\n      console.log('sending files');\n\n      var formData = new FormData();\n      formData.append('audio', audioBlob);\n      formData.append('video', videoBlob);\n\n      axios.post('/process', formData).then(function (resp) {\n        var videoId = resp;\n        console.log(resp);\n        window.location.href = '/process?id=' + videoId;\n      }).catch(function (e) {\n        console.error(e);\n      });\n    }).catch(function (e) {\n      console.error(e);\n    });\n    // audioRecorder.stop();\n    // audioRecorder.exportWAV(function(blob) {\n    //   download(blob, 'blob.wav');\n    // });\n    // canvasRecorder.stopRecording(function() {\n    //   var blob = canvasRecorder.getBlob();\n    //   download(blob, 'blob.webm');\n    // });\n  }).error(function (e) {\n    Promise.all([asyncStopAudioRecordingAndExportBlob(audioRecorder), asyncStopVideoRecordingAndExportBlob(canvasRecorder)]).then(function (values) {\n      console.log(values);\n    }).catch(function (e) {\n      console.error(e);\n    });\n    // audioRecorder.stop();\n    // audioRecorder.exportWAV(function(blob) {\n    //   download(blob, 'blob.wav');\n    // });\n    // canvasRecorder.stopRecording(function() {\n    //   var blob = canvasRecorder.getBlob();\n    //   download(blob, 'blob.webm');\n    // });\n  });\n}\n\n},{\"./../../config\":1,\"./sound\":37,\"./ui\":41,\"axios\":2,\"bluebird\":27}],37:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.init = init;\nexports.reinitShapeSounds = reinitShapeSounds;\nexports.getShapeSoundObj = getShapeSoundObj;\nexports.startPlaying = startPlaying;\nexports.stopPlaying = stopPlaying;\nexports.asyncInitShapeSounds = asyncInitShapeSounds;\nexports.formatShapeSoundData = formatShapeSoundData;\nexports.quantizeLength = quantizeLength;\nexports.quantizePosition = quantizePosition;\nexports.removeShapeFromComposition = removeShapeFromComposition;\nexports.clearSoundTimeouts = clearSoundTimeouts;\nexports.startComposition = startComposition;\nexports.asyncPlayCompositionMultipleTimes = asyncPlayCompositionMultipleTimes;\nexports.asyncPlayCompositionOnce = asyncPlayCompositionOnce;\nexports.stopComposition = stopComposition;\nexports.getTrimmedCompositionObj = getTrimmedCompositionObj;\nrequire('howler');\nvar Promise = require(\"bluebird\");\n\nvar ui = require('./ui');\nvar shape = require('./shape');\nvar color = require('./color');\nvar overlays = require('./overlays');\nvar tutorial = require('./tutorial');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar measures = 4;\nvar bpm = 120;\nvar beatLength = 60 / bpm * 1000; // ms\nvar measureLength = beatLength * 4;\nvar compositionLength = exports.compositionLength = measureLength * measures;\n\nvar playingClass = exports.playingClass = 'playing';\nvar playEnabledClass = exports.playEnabledClass = 'play-enabled';\n\nfunction init() {\n  return asyncInitShapeSounds();\n}\n\nfunction reinitShapeSounds() {\n  return asyncInitShapeSounds();\n}\n\nfunction getShapeSoundObj(path) {\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var shapeSounds = window.kan.shapeSounds || initShapeSounds();\n  // alert(JSON.stringify(window.kan.shapeSounds));\n  // console.log(JSON.stringify(window.kan.shapeSounds));\n\n  var shapePrediction = shape.getShapePrediction(path);\n  var colorName = color.getPathColorName(path);\n  if (colorName === null) colorName = 'black'; // just in case\n\n  var quantizedSoundStartTime = quantizeLength(path.bounds.x / viewWidth * compositionLength); // ms\n  var quantizedSoundDuration = quantizeLength(path.bounds.width / viewWidth * compositionLength); // ms\n\n  var soundObj = {};\n  soundObj.sound = shapeSounds[shapePrediction.pattern];\n  soundObj.startTime = quantizedSoundStartTime;\n  soundObj.duration = quantizedSoundDuration;\n  soundObj.pathId = path.id;\n  soundObj.spriteName = colorName;\n  soundObj.groupId = path.parent.id;\n  soundObj.play = function () {\n    return new Promise(function (resolve, reject) {\n      soundObj.sound.play(soundObj.spriteName);\n      soundObj.sound.on('end', function () {\n        resolve('Group ' + soundObj.groupId + ' done playing sound');\n      });\n      soundObj.sound.on('loaderror', function () {\n        reject('Group ' + soundObj.groupId + ' failed to load sound');\n      });\n    });\n  };\n\n  return soundObj;\n}\n\nfunction startPlaying() {\n  // console.log('first time', window.kan.firstTimePlaying);\n  if ($body.hasClass(playEnabledClass)) {\n    $body.addClass(playingClass);\n\n    Howler.mute(false);\n\n    window.kan.playing = true;\n\n    if (window.kan.firstTimePlaying === true) {\n      window.kan.firstTimePlaying = false;\n      startComposition(window.kan.composition, false);\n    } else {\n      startComposition(window.kan.composition, true);\n    }\n  } else {\n    window.kan.playing = false;\n    $body.removeClass(playingClass);\n  }\n}\n\nfunction stopPlaying() {\n  var mute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!!mute) {\n    Howler.mute(true);\n  }\n\n  window.kan.playing = false;\n  $body.removeClass(playingClass);\n\n  stopComposition();\n}\n\nfunction asyncGetShapeSoundFromShapeName(shapeName) {\n  var shapeSoundJSONPath = './audio/shapes/' + shapeName + '/' + shapeName + '.json';\n  return $.getJSON(shapeSoundJSONPath).then(function (resp) {\n    var shapeSoundData = formatShapeSoundData(shapeName, resp);\n    var sound = new Howl(shapeSoundData);\n    return {\n      shapeName: shapeName,\n      sound: sound\n    };\n  });\n}\n\nfunction asyncInitShapeSounds() {\n  var returnSounds = {};\n  var extensions = ['ogg', 'm4a', 'mp3', 'ac3'];\n\n  var shapeNames = shape.shapeNames;\n  var promises = [];\n  Base.each(shapeNames, function (shapeName) {\n    promises.push(asyncGetShapeSoundFromShapeName(shapeName));\n  });\n\n  return $.when.apply($, promises).done(function () {\n    var returnSounds = {};\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      returnSounds[arg.shapeName] = arg.sound;\n    }\n\n    window.kan.shapeSounds = returnSounds;\n    return returnSounds;\n  });\n}\n\nfunction formatShapeSoundData(shapeName, data) {\n  var returnData = {};\n\n  returnData.src = data.urls.map(function (url) {\n    return './audio/shapes/' + shapeName + '/' + url;\n  });\n  returnData.sprite = data.sprite;\n  returnData.html5 = false;\n  returnData.loop = false;\n\n  return returnData;\n}\n\nfunction quantizeLength(duration) {\n  var smallestDuration = 60 / bpm;\n  var returnDuration = Math.floor(duration / smallestDuration) * smallestDuration;\n\n  if (returnDuration > 0) {\n    return returnDuration;\n  } else {\n    // always return something greater than zero\n    return smallestDuration;\n  }\n}\n\nfunction quantizePosition(position, viewWidth) {\n  var smallestInterval = viewWidth / (4 * measures);\n  return returnPosition = Math.floor(position / smallestInterval) * smallestInterval;\n}\n\nfunction asyncPlayShape(shape) {\n  return new Promise(function (resolve, reject) {\n    Promise.all([asyncPlayShapeSound(shape), asyncPlayShapeAnimation(shape)]).then(function () {\n      resolve('Group ' + shape.groupId + ' fully done playing');\n    }).error(function (e) {\n      reject('Group ' + shape.groupId + ' errored while playing: ' + e);\n    });\n  });\n}\n\nfunction asyncPlayShapeSound(shape) {\n  return new Promise(function (resolve, reject) {\n    try {\n      // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n      shape.play().then(function (res) {\n        resolve(res);\n      }).catch(function (e) {\n        reject(e);\n      });\n    } catch (e) {\n      reject('Error playing shape sound: ' + e);\n    }\n  });\n}\n\nfunction asyncPlayShapeAnimation(shape) {\n  return new Promise(function (resolve, reject) {\n    var item = paper.project.getItem({\n      className: 'Path',\n      match: function match(el) {\n        return el.id === shape.pathId;\n      }\n    });\n    if (!!item) {\n      (function () {\n        var group = item.parent;\n        group.data.animating = true;\n        var totalDuration = measureLength / 2;\n        group.animate([{\n          properties: {\n            scale: 1,\n            rotate: -5\n          },\n          settings: {\n            duration: totalDuration / 4,\n            easing: \"easeInOut\"\n          }\n        }, {\n          properties: {\n            scale: 1.15,\n            rotate: 5\n          },\n          settings: {\n            duration: totalDuration / 2,\n            easing: \"easeInOut\"\n          }\n        }, {\n          properties: {\n            scale: 1,\n            rotate: 0\n          },\n          settings: {\n            duration: totalDuration / 4,\n            easing: \"easeInOut\",\n            complete: function complete() {\n              this.data.animating = false;\n              resolve('Group ' + group.id + ' done animating');\n              // console.log('animation step 3')\n            }\n          }\n        }]);\n      })();\n    } else {\n      reject('Item not specified. Could not animate');\n    }\n  });\n}\n\nfunction removeShapeFromComposition(shapeGroup) {\n  var _loop = function _loop(i) {\n    var sound = window.kan.composition[i];\n\n    if ('groupId' in sound) {\n      if (sound.groupId === shapeGroup.id) {\n        window.kan.composition.splice(i, 1);\n        return {\n          v: void 0\n        };\n      }\n    } else if ('pathId' in sound) {\n      var item = getItems({\n        match: function match(el) {\n          return el.id === sound.pathId;\n        }\n      });\n      if (item.length > 0) {\n        if (!!item.parent && item.parent.className === 'Group' && item.parent.id === shapeGroup.id) {\n          window.kan.composition.splice(i, 1);\n          return {\n            v: void 0\n          };\n        }\n      }\n    }\n  };\n\n  for (var i = 0; i < window.kan.composition.length; i++) {\n    var _ret2 = _loop(i);\n\n    if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n  }\n}\n\nfunction clearSoundTimeouts() {\n  if (window.kan.soundTimeouts.length > 0) {\n    window.kan.soundTimeouts.forEach(function (soundTimeout) {\n      clearTimeout(soundTimeout);\n    });\n  }\n\n  window.kan.soundTimeouts = [];\n}\n\nfunction startComposition(composition) {\n  var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  stopComposition();\n  tutorial.hideContextualTuts();\n\n  clearTimeout(window.kan.playPromptTimeout);\n\n  var iterations = 0;\n  playCompositionFirstTime();\n\n  function playCompositionFirstTime() {\n    clearSoundTimeouts();\n    // console.log('playing composition first time');\n    var trimmedCompositionObj = getTrimmedCompositionObj(composition);\n\n    Base.each(trimmedCompositionObj.composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          // console.log('not playing, returning');\n          return;\n        }\n\n        if (shape.spriteName === null) {\n          // console.log('%cshape is null', 'color:red', shape);\n          return;\n        }\n\n        asyncPlayShape(shape).then(function (res) {\n          console.log(res);\n        }).error(function (e) {\n          console.log('Error playing shape', e);\n        });\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n\n    iterations++;\n    window.kan.compositionTimeout = setTimeout(repeatComposition, compositionLength - trimmedCompositionObj.startTime);\n  }\n\n  function playCompositionOnce() {\n    clearSoundTimeouts();\n    // console.log('repeat');\n    Base.each(composition, function (shape, i) {\n      var soundTimeout = setTimeout(function () {\n        if (!window.kan.playing) {\n          // console.log('not playing, returing');\n          return;\n        }\n\n        // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n        asyncPlayShape(shape).then(function (res) {\n          console.log(res);\n        }).error(function (e) {\n          console.log('Error playing shape', e);\n        });\n      }, shape.startTime);\n      window.kan.soundTimeouts.push(soundTimeout);\n    });\n    iterations++;\n  }\n\n  function repeatComposition() {\n    if (loop === true) {\n      playCompositionOnce();\n      window.kan.compositionInterval = setInterval(playCompositionOnce, compositionLength);\n    } else {\n      if (iterations < 2) {\n        playCompositionOnce();\n        setTimeout(repeatComposition, compositionLength);\n      } else {\n        stopPlaying();\n        overlays.openOverlay('share-prompt');\n      }\n    }\n  }\n}\n\nfunction asyncPlayCompositionMultipleTimes() {\n  var repeats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n  return new Promise(function (resolve, reject) {\n    var promisedRepeats = [];\n\n    for (var i = 0; i < repeats; i++) {\n      promisedRepeats.push(asyncPlayCompositionOnce());\n    }\n\n    Promise.each(promisedRepeats, function () {\n      console.log('repeat');\n    }).then(function () {\n      resolve('Repeats done');\n    }).error(function (e) {\n      reject(e);\n    });\n  });\n}\n\nfunction asyncPlayCompositionOnce() {\n  return new Promise(function (resolve, reject) {\n    var composition = window.kan.composition;\n    var startTime = new Date().getTime();\n    clearSoundTimeouts();\n\n    var shapePromises = [];\n\n    shape.startKeepaliveAnimation();\n\n    Base.each(composition, function (shape, i) {\n      shapePromises.push(asyncPlayShapeWithDelay(shape));\n    });\n\n    Promise.all(shapePromises).then(function (res) {\n      var endTime = new Date().getTime();\n      var playTime = endTime - startTime;\n\n      // wait for composition to be fully done before repeating (play is naturally truncated when the last shape finishes playing)\n      if (playTime < compositionLength) {\n        return Promise.delay(compositionLength - playTime).then(function () {\n          shape.stopKeepaliveAnimation();\n          resolve('Composition fully done, after a wait');\n        });\n      } else {\n        shape.stopKeepaliveAnimation();\n        resolve('Composition fully done, with no wait');\n      }\n    }).error(function (e) {\n      shape.stopKeepaliveAnimation();\n      reject(e);\n    });\n  });\n}\n\nfunction asyncPlayShapeWithDelay(shape) {\n  return new Promise(function (resolve, reject) {\n    var soundTimeout = setTimeout(function () {\n      // console.log('playing: ', shape.sound, shape.spriteName, shape.startTime);\n      asyncPlayShape(shape).then(function (res) {\n        resolve(res);\n      }).error(function (e) {\n        reject('Error playing shape with delay: ' + e);\n      });\n    }, shape.startTime);\n    window.kan.soundTimeouts.push(soundTimeout);\n  });\n}\n\nfunction stopComposition() {\n  clearInterval(window.kan.compositionInterval);\n  clearTimeout(window.kan.compositionTimeout);\n  clearSoundTimeouts();\n}\n\nfunction getTrimmedCompositionObj(composition) {\n  var firstTime = 0;\n  var trimmedComposition = [];\n  var startTime = getCompositionStartTime(composition);\n\n  composition.forEach(function (sound) {\n    var modifiedSound = util.shallowCopy(sound);\n    modifiedSound.startTime = sound.startTime - startTime;\n    if (modifiedSound.startTime < 0) modifiedSound.startTime = 0; // this shouldn't happen\n    trimmedComposition.push(modifiedSound);\n  });\n\n  return {\n    composition: trimmedComposition,\n    startTime: startTime\n  };\n}\n\nfunction getCompositionStartTime(composition) {\n  var startTime = compositionLength;\n\n  composition.forEach(function (sound) {\n    // console.log(sound);\n    // console.log(sound.startTime)\n    if ('startTime' in sound && sound.startTime < startTime) {\n      startTime = sound.startTime;\n    }\n  });\n\n  // console.log('start time', startTime);\n\n  if (startTime !== compositionLength) {\n    return startTime;\n  } else {\n    return 0;\n  }\n}\n\n},{\"./color\":31,\"./overlays\":34,\"./shape\":35,\"./tutorial\":40,\"./ui\":41,\"./util\":42,\"bluebird\":27,\"howler\":29}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.preventInactivityTimeout = preventInactivityTimeout;\nvar overlays = require('./overlays');\nvar video = require('./video');\nvar util = require('./util');\n\nvar $body = $('body');\n\nvar drawInactivityDelay = exports.drawInactivityDelay = 40 * 1000; // ms\nvar continueInactivityDelay = exports.continueInactivityDelay = 30 * 1000; // ms\nvar playPromptDelay = exports.playPromptDelay = 60 * 1000; // ms;\nvar inputDelay = exports.inputDelay = 100; // ms\nvar refreshCheckDelay = exports.refreshCheckDelay = 60 * 1000; // ms\nvar overlayDelay = exports.overlayDelay = 1000; // ms\n\nfunction init() {\n  if (window.location.hash.length > 0 && window.location.hash == '#dev') {\n    window.kan.overlays = false;\n    video.pauseVideo();\n    video.exitTutorialMode();\n  } else {\n    video.enterTutorialMode();\n  }\n}\n\nfunction preventInactivityTimeout() {\n  console.log('prevent timeout: ' + util.getTime());\n  // overlays.closeAndResetOverlays();\n\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n\n  window.kan.inactivityTimeout = setTimeout(function () {\n    overlays.openOverlay('continue');\n  }, drawInactivityDelay);\n}\n\n},{\"./overlays\":34,\"./util\":42,\"./video\":43}],39:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nrequire('hammerjs');\n\nvar config = require('./../../config');\nvar sound = require('./sound');\nvar color = require('./color');\nvar shape = require('./shape');\nvar util = require('./util');\nvar tutorial = require('./tutorial');\nvar timing = require('./timing');\nvar overlays = require('./overlays');\nvar ui = require('./ui');\n\nvar $body = $('body');\n\nvar hitOptions = {\n  segments: false,\n  stroke: true,\n  fill: true,\n  tolerance: 5\n};\n\nvar minShapeSize = 100;\nvar maxShapeLength = 5000;\nvar maxScaleFactor = 0.8;\n\nvar outerPath = void 0;\nvar sizes = [];\nvar size = void 0;\nvar cumSize = void 0;\nvar prevPoint = void 0;\n\nvar hammerTips = exports.hammerTips = void 0;\nvar hammerCanvas = exports.hammerCanvas = void 0;\n\nfunction init() {\n  exports.hammerTips = hammerTips = new Hammer.Manager(ui.tipsOverlay);\n  hammerTips.add(new Hammer.Swipe({ direction: Hammer.DIRECTION_ALL }));\n  hammerTips.on('swipe', overlays.cardNavNext);\n\n  exports.hammerCanvas = hammerCanvas = new Hammer.Manager(ui.drawCanvas);\n  hammerCanvas.add(new Hammer.Tap({ event: 'doubletap', taps: 2, interval: 400, time: 150, posThreshold: 50 }));\n  hammerCanvas.add(new Hammer.Tap({ event: 'singletap' }));\n  hammerCanvas.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL }));\n  hammerCanvas.add(new Hammer.Pinch());\n\n  hammerCanvas.get('doubletap').recognizeWith('singletap');\n  // hammerCanvas.get('singletap').requireFailure('doubletap');\n  hammerCanvas.get('pan').requireFailure('pinch');\n  hammerCanvas.get('pinch').requireFailure('pan');\n\n  // hammerCanvas.on('singletap', singleTap);\n  hammerCanvas.on('doubletap', doubleTap);\n\n  hammerCanvas.on('panstart', panStart);\n  hammerCanvas.on('panmove', panMove);\n  hammerCanvas.on('panend', panEnd);\n  // hammerCanvas.on('pancancel', panCancel);\n\n  hammerCanvas.on('pinchstart', pinchStart);\n  hammerCanvas.on('pinchmove', pinchMove);\n  hammerCanvas.on('pinchend', pinchEnd);\n  // hammerCanvas.on('pinchcancel', pinchCancel);\n}\n\nfunction enablePanAndPinchEvents() {\n  enablePanEvents();\n  enablePinchEvents();\n}\n\nfunction enableTapEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n  hammerCanvas.get('singletap').set({ enable: enable });\n  hammerCanvas.get('doubletap').set({ enable: enable });\n}\n\nfunction disableTapEvents() {\n  enableTapEvents(false);\n}\n\nfunction enablePanEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pan').set({ enable: enable });\n  // hammerCanvas.get('panstart').set({enable: enable});\n  // hammerCanvas.get('panmove').set({enable: enable});\n  // hammerCanvas.get('panend').set({enable: enable});\n}\n\nfunction disablePanEvents() {\n  enablePanEvents(false);\n}\n\nfunction enablePinchEvents() {\n  var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  enable = enable === true;\n\n  hammerCanvas.get('pinch').set({ enable: enable });\n  // hammerCanvas.get('pinchstart').set({enable: enable});\n  // hammerCanvas.get('pinchmove').set({enable: enable});\n  // hammerCanvas.get('pinchend').set({enable: enable});\n}\n\nfunction disablePinchEvents() {\n  enablePinchEvents(false);\n}\n\nfunction singleTap(event) {\n  // console.log(event.target);\n  // event.preventDefault();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  tutorial.hideContextualTuts();\n  // $(event.target).click();\n\n  // sound.stopPlaying();\n  // if (!eventTargetIsOnCanvas(event)) return;\n  // console.log(event);\n  // tutorial.hideContextualTuts();\n  //\n  // sound.stopPlaying();\n  //\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (hitResult) {\n    var item = hitResult.item;\n    // item.selected = !item.selected;\n    console.log(item);\n  }\n}\n\nfunction doubleTap(event) {\n  event.preventDefault();\n  // console.log('doubletap');\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = paper.project.hitTest(point, hitOptions);\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  if (hitResult) {\n    shape.toggleFill(hitResult.item);\n    tutorial.hideContextualTutByName('fill');\n  } else {\n    window.kan.pinchedGroup = null;\n    // console.log('hit no item');\n  }\n}\n\nfunction panStart(event) {\n  // console.log(event);\n  // console.log('panstart');\n  // paper.project.activeLayer.removeChildren(); // REMOVE\n  // event.preventDefault();\n  timing.preventInactivityTimeout();\n\n  if (!eventTargetIsOnCanvas(event)) {\n    window.kan.panning = false;\n    // check if tips modal is up\n    if ($body.hasClass('overlay-active tips-active')) {\n      // if so, go to next tip card\n      overlays.cardNavNext();\n    }\n    event.srcEvent.stopPropagation();\n    return;\n  }\n\n  window.kan.panning = true;\n  tutorial.hideContextualTuts();\n\n  hammerCanvas.off('panstart');\n  // hammerCanvas.get('pan').set({enable: false});\n  disablePinchEvents();\n  disableTapEvents();\n\n  // ignore other touch inputs\n  // if (window.kan.pinching) return;\n  // if (!(event.changedPointers && event.changedPointers.length > 0)) return;\n  // if (event.changedPointers.length > 1) {\n  //   console.log('event.changedPointers > 1');\n  // }\n\n  sound.stopPlaying();\n\n  window.kan.prevAngle = Math.atan2(event.velocityY, event.velocityX);\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  outerPath = new Path();\n  outerPath.fillColor = window.kan.currentColor;\n  // outerPath.fillColor = new Color(0, 0.5);\n\n  sizes = [];\n\n  var shapePath = new Path({\n    strokeColor: window.kan.currentColor,\n    name: 'shapePath',\n    strokeWidth: 5,\n    visible: false,\n    strokeCap: 'round'\n  });\n\n  shapePath.add(point);\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    first: true\n  };\n\n  window.kan.shapePath = shapePath;\n}\n\nfunction panMove(event) {\n  // console.log('panmove');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  // don't let the user draw past the max length\n  if (window.kan.shapePath.length <= maxShapeLength) {\n    var pointer = event.center;\n    var point = new Point(pointer.x, pointer.y);\n\n    var angle = Math.atan2(event.velocityY, event.velocityX);\n    var prevAngle = window.kan.prevAngle;\n    var angleDelta = util.angleDelta(angle, prevAngle);\n    window.kan.prevAngle = angle;\n\n    while (sizes.length > 10) {\n      sizes.shift();\n    }\n    if (sizes.length > 0) {\n      var dist = prevPoint.getDistance(point);\n\n      // These are based on acceleration\n      size = Math.random() * 10; // This is just random variance\n\n      cumSize = 0;\n      for (var j = 0; j < sizes.length; j++) {\n        cumSize += sizes[j];\n      }\n      // const avgSize = ((cumSize / sizes.length) + size) / 2;\n      var avgSize = Math.max(5, (cumSize / sizes.length + size) / 2);\n\n      var halfPointX = (point.x + prevPoint.x) / 2;\n      var halfPointY = (point.y + prevPoint.y) / 2;\n      var halfPoint = new Point(halfPointX, halfPointY);\n\n      var topX = halfPoint.x + Math.cos(angle - Math.PI / 2) * avgSize;\n      var topY = halfPoint.y + Math.sin(angle - Math.PI / 2) * avgSize;\n      var top = new Point(topX, topY);\n\n      var bottomX = halfPoint.x + Math.cos(angle + Math.PI / 2) * avgSize;\n      var bottomY = halfPoint.y + Math.sin(angle + Math.PI / 2) * avgSize;\n      var bottom = new Point(bottomX, bottomY);\n\n      outerPath.add(top);\n      outerPath.insert(0, bottom);\n      outerPath.smooth();\n    } else {\n      size = 5;\n    }\n\n    sizes.push(size);\n    prevPoint = point;\n\n    window.kan.pathData[shape.stringifyPoint(point)] = {\n      point: point,\n      speed: Math.abs(event.overallVelocity),\n      angle: angle\n    };\n\n    window.kan.shapePath.add(point);\n  } else {\n    window.kan.shapePath.data.tooLong = true;\n  }\n\n  paper.view.draw();\n}\n\nfunction panEnd(event) {\n  // console.log('panend');\n  // event.preventDefault();\n  if (!eventTargetIsOnCanvas(event)) {\n    event.srcEvent.stopPropagation();\n    return;\n  }\n  if (window.kan.panning !== true) return;\n\n  var pointer = event.center;\n  var point = new Point(pointer.x, pointer.y);\n\n  var transparent = color.transparent;\n  var colorName = color.getColorName(window.kan.currentColor);\n\n  var move = { type: 'newGroup' };\n\n  var shapePath = window.kan.shapePath;\n\n  if (shapePath.length <= maxShapeLength) {\n    shapePath.add(point);\n  }\n  outerPath.visible = false;\n\n  if (shapePath.length < minShapeSize || shapePath.data && shapePath.data.tooLong === true) {\n    // console.log('path is too short');\n    shapePath.remove();\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    window.kan.panning = false;\n    return;\n  }\n\n  var visibleGroups = util.getVisibleGroups();\n  if (visibleGroups.length >= config.maxShapes) {\n    // too many shapes on canvas, remove first shape\n    // TODO: place on moves stack so that they can be restored with an undo\n    var firstGroup = visibleGroups[0];\n    shape.destroyGroupPops(firstGroup);\n    sound.removeShapeFromComposition(firstGroup);\n    move.removedGroup = firstGroup;\n    // firstGroup.remove();\n    firstGroup.visible = false;\n  }\n\n  window.kan.pathData[shape.stringifyPoint(point)] = {\n    point: point,\n    last: true\n  };\n\n  var group = new Group();\n\n  var truedShape = shape.getTruedShape(shapePath);\n\n  // group.data.color = truedShape.strokeColor;\n  // console.log('currentGradient:', config.palette.gradients[window.kan.currentColor]);\n\n  var shapeSize = truedShape.strokeBounds;\n  var centerPoint = new Point(shapeSize.width / 2, shapeSize.height / 2);\n  var angle = util.rad(Math.random() * 360);\n  var gradientSize = (shapeSize.width + shapeSize.height) / 4;\n  var originX = centerPoint.x + Math.cos(angle - Math.PI / 2) * gradientSize;\n  var originY = centerPoint.y + Math.sin(angle - Math.PI / 2) * gradientSize;\n  var destinationX = centerPoint.x + Math.cos(angle + Math.PI / 2) * gradientSize;\n  var destinationY = centerPoint.y + Math.sin(angle + Math.PI / 2) * gradientSize;\n\n  var origin = new Point(originX + shapeSize.x, originY + shapeSize.y);\n  var destination = new Point(destinationX + shapeSize.x, destinationY + shapeSize.y);\n  // group.addChild(new Path.Circle({\n  //   center: origin,\n  //   radius: 5,\n  //   fillColor: 'red',\n  // }));\n  // group.addChild(new Path.Circle({\n  //   center: destination,\n  //   radius: 5,\n  //   fillColor: 'green',\n  // }));\n  group.data.originalColor = window.kan.currentColor;\n  group.data.color = {\n    gradient: {\n      stops: config.palette.gradients[window.kan.currentColor]\n    },\n    origin: origin,\n    destination: destination\n  };\n  group.data.scale = 1; // init variable to track scale changes\n  group.data.rotation = 0; // init variable to track rotation changes\n  group.data.fresh = true;\n\n  shapePath.remove();\n  truedShape.visible = false;\n  truedShape.strokeColor = new Color(0, 0);\n  window.kan.shapePath = truedShape;\n  truedShape.name = 'shapePath';\n\n  if (!(truedShape.length > 0)) {\n    truedShape.remove();\n    group.remove();\n    window.kan.panning = false;\n    return;\n  }\n\n  group.addChild(truedShape);\n\n  var shapeSoundObj = sound.getShapeSoundObj(truedShape);\n  window.kan.composition.push(shapeSoundObj);\n\n  truedShape.visible = false;\n  var outlineGroup = shape.getOutlineGroup(truedShape);\n  var outline = outlineGroup._namedChildren.outer[0].clone();\n  outline.name = 'outer';\n  outline.fillColor = window.kan.currentColor;\n  outline.fillColor = group.data.color;\n\n  var outlineCenter = outlineGroup._namedChildren.middle[0].clone();\n  outlineCenter.strokeColor = group.data.color;\n  outlineCenter.visible = false;\n  group.addChild(outline);\n  outline.sendToBack();\n\n  outlineGroup.remove();\n\n  var shapeMask = outline.clone();\n  shapeMask.fillColor = outline.fillColor;\n  shapeMask.strokeColor = outline.strokeColor;\n  shapeMask.closed = true;\n\n  var enclosedLoops = shape.findInteriorCurves(outlineCenter);\n  if (enclosedLoops.length > 0 || truedShape.closed === true) {\n    group.data.line = false;\n  } else {\n    group.data.line = true;\n  }\n\n  enclosedLoops.forEach(function (loop) {\n    shapeMask.unite(loop);\n    shapeMask.sendToBack();\n    loop.name = 'loop';\n    loop.data.loop = true;\n    loop.visible = true;\n    group.addChild(loop);\n  });\n\n  shapeMask.unite();\n  var crossings = shapeMask.resolveCrossings();\n  if (!!crossings && !!crossings.children && crossings.children.length > 0) {\n    (function () {\n      var maxArea = 0,\n          maxChild = null;\n      crossings.children.forEach(function (child) {\n        if (child.area > maxArea) {\n          maxChild = child;\n          maxArea = child.area;\n        }\n      });\n\n      shapeMask = maxChild;\n    })();\n  }\n\n  outlineCenter.remove();\n  shapeMask.visible = false;\n  shapeMask.name = 'mask';\n  shapeMask.data.mask = true;\n  group.addChild(shapeMask);\n  shapeMask.sendToBack();\n\n  shape.cleanUpGroup(group);\n\n  move.id = group.id;\n  window.kan.moves.push(move);\n\n  ui.unditherButtonsByName(['new', 'undo', 'play-stop', 'share']);\n  $body.addClass(sound.playEnabledClass);\n\n  if (window.kan.userHasDrawnFirstShape !== true) {\n    // first shape!\n    // set play prompt timeout\n    window.kan.playPromptTimeout = setTimeout(function () {\n      overlays.openOverlay('play-prompt');\n    }, timing.playPromptDelay);\n\n    window.kan.userHasDrawnFirstShape = true;\n  }\n\n  if (config.runAnimations) {\n    var scaleFactor = 0.9;\n    group.animate([{\n      properties: {\n        scale: scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeOut\"\n      }\n    }, {\n      properties: {\n        scale: 1 / scaleFactor\n      },\n      settings: {\n        duration: 100,\n        easing: \"easeIn\"\n      }\n    }]);\n  }\n\n  if (!tutorial.allTutsCompleted()) {\n    var tutorialCompletion = window.kan.tutorialCompletion;\n    var tutName = null;\n\n    if (!tutorialCompletion['fill'] && truedShape.closed) {\n      tutName = 'fill';\n    } else {\n      var groups = paper.project.getItems({\n        match: function match(el) {\n          return el.className === 'Group';\n        }\n      });\n      if (!tutorialCompletion['pinch'] && groups.length >= 3) {\n        tutName = 'pinch';\n      } else if (!tutorialCompletion['swipe'] && groups.length >= 5) {\n        tutName = 'swipe';\n      }\n    }\n\n    if (tutName !== null) {\n      // console.log(`${tutName} tutorial`);\n      tutorial.addContextualTut(tutName);\n      window.kan.tutorialCompletion[tutName] = true;\n      group.data.tut = tutName;\n    }\n  }\n\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  shapeSoundObj.play();\n\n  // console.log('pan done');\n  hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    hammerCanvas.set({ enable: true });\n    console.log('touch enabled');\n    hammerCanvas.on('panstart', panStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n\n    window.kan.panning = false;\n  }, timing.inputDelay);\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n}\n\nfunction panCancel(event) {\n  console.log('pancancel');\n  event.srcEvent.stopPropagation();\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('panstart', panStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n  window.kan.panning = false;\n}\n\nfunction pinchStart(event) {\n  // console.log('pinchstart');\n  timing.preventInactivityTimeout();\n  tutorial.hideContextualTuts();\n  window.kan.interacting = true;\n  window.kan.pinching = true;\n  // event.preventDefault();\n\n  // hammerCanvas.get('pinchstart').set({enable: false});\n  hammerCanvas.off('pinchstart');\n  disablePanEvents();\n  disableTapEvents();\n\n  if (!eventTargetIsOnCanvas(event)) return;\n\n  sound.stopPlaying();\n\n  var pointer = event.center,\n      point = new Point(pointer.x, pointer.y),\n      hitResult = shape.hitTestGroupBounds(point);\n\n  if (hitResult) {\n    window.kan.pinching = true;\n    window.kan.pinchedGroup = hitResult;\n    window.kan.lastScale = 1;\n    window.kan.lastRotation = event.rotation;\n\n    window.kan.originalPosition = hitResult.position;\n    window.kan.originalRotation = hitResult.data.rotation;\n    window.kan.originalScale = hitResult.data.scale;\n    hitResult.data.thrown = false;\n\n    if (config.pop === true) {\n      shape.destroyGroupPops(hitResult);\n    }\n\n    hitResult.bringToFront();\n\n    if (hitResult.data.tut && hitResult.data.tut.length > 0) {\n      var $tut = $('.tut[data-tut-type=\\'' + hitResult.data.tut + '\\']');\n      if ($tut) {\n        window.kan.pinchedTut = $tut;\n      } else {\n        window.kan.pinchedTut = null;\n      }\n    } else {\n      window.kan.pinchedTut = null;\n    }\n\n    // if (config.runAnimations) {\n    //   hitResult.animate({\n    //     properties: {\n    //       scale: 1.25\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n    window.kan.pinchedTut = null;\n    // console.log('hit no item');\n  }\n}\n\nfunction pinchMove(event) {\n  // console.log('pinchMove');\n  // event.preventDefault();\n\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n\n  if (!!pinchedGroup) {\n    var currentScale = event.scale;\n    var scaleDelta = void 0;\n\n    tutorial.hideContextualTutByName('pinch');\n\n    if (pinchedGroup.bounds.width < minShapeSize || pinchedGroup.bounds.height < minShapeSize) {\n      // only allow a shape to scale down if it is larger than the minimum size\n      scaleDelta = 1.1;\n    } else if (pinchedGroup.bounds.width >= paper.view.viewSize.width || pinchedGroup.bounds.height >= paper.view.viewSize.height) {\n      // only allow shape to scale up if it fits in the viewport\n      scaleDelta = 0.9;\n    } else {\n      scaleDelta = currentScale / window.kan.lastScale;\n    }\n\n    window.kan.lastScale = currentScale;\n\n    var currentRotation = event.rotation;\n    var rotationDelta = currentRotation - window.kan.lastRotation;\n    window.kan.lastRotation = currentRotation;\n\n    // console.log(`scaling by ${scaleDelta}`);\n    // console.log(`rotating by ${rotationDelta}`);\n\n    var centerPoint = event.center;\n    pinchedGroup.position = centerPoint;\n    if (!!$pinchedTut) {\n      tutorial.moveContextualTut($pinchedTut, centerPoint);\n    }\n\n    if (scaleDelta !== 1) {\n      pinchedGroup.scale(scaleDelta);\n\n      // check if scaling went awry, cannot be too big or too small\n      // hypotenuse must fit within view bounds\n      var hypot = util.hypot(pinchedGroup.bounds.width, pinchedGroup.bounds.height);\n      var viewHypot = util.hypot(paper.view.viewSize.width, paper.view.viewSize.height);\n      if (hypot >= viewHypot) {\n        // shape is too big, bring it back down to size\n        scaleDelta = viewHypot * maxScaleFactor / hypot;\n        pinchedGroup.scale(scaleDelta);\n      } else if (hypot <= minShapeSize) {\n        scaleDelta = minShapeSize / hypot;\n        pinchedGroup.scale(scaleDelta);\n      }\n    }\n    pinchedGroup.rotate(rotationDelta);\n\n    pinchedGroup.data.scale *= scaleDelta;\n    pinchedGroup.data.rotation += rotationDelta;\n  }\n}\n\nfunction pinchEnd(event) {\n  // event.preventDefault();\n\n  window.kan.lastEvent = event;\n  var pinchedGroup = window.kan.pinchedGroup;\n  var $pinchedTut = window.kan.pinchedTut;\n  var originalPosition = window.kan.originalPosition;\n  var originalRotation = window.kan.originalRotation;\n  var originalScale = window.kan.originalScale;\n\n  if (!!pinchedGroup) {\n    pinchedGroup.data.fresh = true;\n    var move = {\n      id: pinchedGroup.id,\n      type: 'transform'\n    };\n    if (pinchedGroup.position != originalPosition) {\n      move.position = originalPosition;\n    }\n\n    if (pinchedGroup.data.rotation != originalRotation) {\n      move.rotation = originalRotation - pinchedGroup.data.rotation;\n    }\n\n    if (pinchedGroup.data.scale != originalScale) {\n      move.scale = originalScale / pinchedGroup.data.scale;\n    }\n\n    if (pinchedGroup.children.length > 0 && pinchedGroup._namedChildren.shapePath && pinchedGroup._namedChildren.shapePath.length > 0) {\n      // update shapePath sound object if possible\n      sound.removeShapeFromComposition(pinchedGroup); // sound is now wrong\n\n      var shapePath = pinchedGroup._namedChildren.shapePath[0];\n      var shapeSoundObj = sound.getShapeSoundObj(shapePath);\n      window.kan.composition.push(shapeSoundObj);\n    }\n\n    window.kan.moves.push(move);\n\n    if (Math.abs(event.velocity) > 1) {\n      tutorial.hideContextualTutByName('swipe');\n\n      // hide any connected tuts\n      if (!!$pinchedTut) {\n        tutorial.hideContextualTut($pinchedTut);\n      }\n      // dispose of group offscreen\n      if (config.pop === true) {\n        shape.destroyGroupPops(pinchedGroup);\n        pinchedGroup.data.fresh = false;\n      }\n\n      pinchedGroup.data.thrown = true;\n      throwPinchedGroup();\n    }\n\n    // if (config.runAnimations) {\n    //   pinchedGroup.animate({\n    //     properties: {\n    //       scale: 0.8\n    //     },\n    //     settings: {\n    //       duration: 100,\n    //       easing: \"easeOut\",\n    //     }\n    //   });\n    // }\n  } else {\n    window.kan.pinchedGroup = null;\n  }\n\n  // if an overlay was interrupted, open it up now\n  if (window.kan.scheduledOverlay !== null) {\n    (function () {\n      var scheduledOverlay = window.kan.scheduledOverlay;\n      window.kan.scheduledOverlay = null;\n      setTimeout(function () {\n        overlays.openOverlay(scheduledOverlay);\n      }, timing.overlayDelay);\n    })();\n  }\n\n  window.kan.pinching = false;\n\n  if (config.pop === true) {\n    shape.updatePops();\n  }\n\n  // console.log('pinch done');\n  // hammerCanvas.set({ enable: false });\n  setTimeout(function () {\n    console.log('touch enabled');\n    hammerCanvas.on('pinchstart', pinchStart);\n    enablePanAndPinchEvents();\n    enableTapEvents();\n    // hammerCanvas.set({ enable: true });\n    // hammerCanvas.on('pinchstart', pinchStart);\n    // enablePanAndPinchEvents();\n    // enableTapEvents();\n    // window.kan.pinching = false;\n    // window.kan.pinchedGroup = null;\n  }, timing.inputDelay);\n}\n\nfunction pinchCancel(event) {\n  // console.log(event);\n  event.srcEvent.stopPropagation();\n  console.log('pinchcancel');\n  // event.preventDefault();\n\n  hammerCanvas.set({ enable: true });\n  hammerCanvas.on('pinchstart', pinchStart);\n  enablePanAndPinchEvents();\n  enableTapEvents();\n\n  window.kan.pinching = false;\n}\n\nfunction throwPinchedGroup() {\n\n  var velocityMultiplier = 25;\n  var lastEvent = window.kan.lastEvent;\n  var viewWidth = paper.view.viewSize.width;\n  var viewHeight = paper.view.viewSize.height;\n  var pinchedGroup = window.kan.pinchedGroup;\n\n  if (pinchedGroup === null || pinchedGroup.data && pinchedGroup.data.thrown === false) return;\n  if (pinchedGroup.position.x <= 0 - pinchedGroup.bounds.width || pinchedGroup.position.x >= viewWidth + pinchedGroup.bounds.width || pinchedGroup.position.y <= 0 - pinchedGroup.bounds.height || pinchedGroup.position.y >= viewHeight + pinchedGroup.bounds.height) {\n    pinchedGroup.data.offScreen = true;\n    pinchedGroup.visible = false;\n    sound.removeShapeFromComposition(pinchedGroup);\n    window.kan.pinchedGroup = null;\n    return;\n  }\n  requestAnimationFrame(throwPinchedGroup);\n  var newX = pinchedGroup.position.x + lastEvent.velocityX * velocityMultiplier;\n  var newY = pinchedGroup.position.y + lastEvent.velocityY * velocityMultiplier;\n  var newPos = new Point(newX, newY);\n  pinchedGroup.position = newPos;\n}\n\nfunction eventTargetIsOnCanvas(event) {\n  if (!event) return false;\n  if (event.target != ui.drawCanvas) return false;\n  return true;\n}\n\n},{\"./../../config\":1,\"./color\":31,\"./overlays\":34,\"./shape\":35,\"./sound\":37,\"./timing\":38,\"./tutorial\":40,\"./ui\":41,\"./util\":42,\"hammerjs\":28}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTutByName = getTutByName;\nexports.allTutsCompleted = allTutsCompleted;\nexports.addContextualTut = addContextualTut;\nexports.hideContextualTut = hideContextualTut;\nexports.hideContextualTutByName = hideContextualTutByName;\nexports.hideContextualTuts = hideContextualTuts;\nexports.resetContextualTuts = resetContextualTuts;\nexports.moveContextualTut = moveContextualTut;\nexports.getTutPositionFromCenter = getTutPositionFromCenter;\nvar config = require('./../../config');\n\nvar contextualTuts = config.contextualTuts;\nvar tutArrowHeight = 16;\n\nfunction getTutByName(tutName) {\n  for (var i = 0; i < contextualTuts.length; i++) {\n    var tutObj = contextualTuts[i];\n\n    if (tutObj.type === tutName) {\n      return tutObj.copy;\n    }\n  }\n\n  return null;\n}\n\nfunction allTutsCompleted() {\n  var tutorialCompletionObj = window.kan.tutorialCompletion;\n  var completion = true;\n\n  Object.keys(tutorialCompletionObj).forEach(function (key, val) {\n    completion = completion && tutorialCompletionObj[key];\n  });\n\n  return completion === true;\n}\n\nfunction addContextualTut(tutName) {\n  if (!!window.kan.shapePath && window.kan.shapePath.length > 0) {\n    hideContextualTuts();\n    window.kan.shapesSinceTut = 0;\n\n    var shapePath = window.kan.shapePath;\n    var shapeCenter = shapePath.bounds.center;\n\n    var tutCopy = getTutByName(tutName);\n\n    if (tutCopy !== null) {\n      var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n      if ($tut.length > 0) {\n        var tutPos = getTutPositionFromCenter($tut, shapeCenter);\n        $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px', visibility: 'visible' });\n        $tut.addClass('animated bounceIn');\n      }\n    }\n  }\n}\n\nfunction hideContextualTut($tut) {\n  $tut.css({ visibility: 'hidden' });\n}\n\nfunction hideContextualTutByName(tutName) {\n  var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n  hideContextualTut($tut);\n}\n\nfunction hideContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.css({ visibility: 'hidden' });\n}\n\nfunction resetContextualTuts() {\n  hideContextualTuts();\n  window.kan.tutorialCompletion = {\n    \"fill\": false,\n    \"pinch\": false,\n    \"swipe\": false\n  };\n}\n\nfunction moveContextualTut($tut, centerPoint) {\n  var tutPos = getTutPositionFromCenter($tut, centerPoint);\n  $tut.css({ top: tutPos.y + 'px', left: tutPos.x + 'px' });\n}\n\nfunction getTutPositionFromCenter($tut, centerPoint) {\n  var tutWidth = $tut.outerWidth();\n  var tutHeight = $tut.outerHeight();\n  var leftPos = centerPoint.x - tutWidth / 2;\n  var topPos = centerPoint.y - tutHeight - tutArrowHeight;\n  return new Point(leftPos, topPos);\n}\n\n},{\"./../../config\":1}],41:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\nexports.ditherButtonsByName = ditherButtonsByName;\nexports.unditherButtonsByName = unditherButtonsByName;\nexports.ditherButtonByName = ditherButtonByName;\nexports.unditherButtonByName = unditherButtonByName;\nexports.resetCanvas = resetCanvas;\nvar config = require('./../../config');\n\nvar sound = require('./sound');\nvar tutorial = require('./tutorial');\nvar overlays = require('./overlays');\nvar util = require('./util');\nvar color = require('./color');\nvar shape = require('./shape');\nvar share = require('./share');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar playingClass = sound.playingClass;\nvar playEnabledClass = sound.playEnabledClass;\n\nvar $newButton = $('.controls .new');\nvar $undoButton = $('.controls .undo');\nvar $playButton = $('.controls .play-stop');\nvar $shareButton = $('.controls .share');\nvar $tipsButton = $('.controls .tips');\n\nvar drawCanvas = exports.drawCanvas = $('#canvas')[0];\nvar tipsOverlay = exports.tipsOverlay = $('.overlay.tips')[0];\n\nvar ditheredClass = 'dithered';\n\nfunction init() {\n  initLogoRefresh();\n  initColorPalette();\n  initNewButton();\n  initUndoButton();\n  initPlayButton();\n  initTipsButton();\n  initShareButton();\n  initContextualTuts();\n  resetCanvas();\n}\n\nfunction unditherAllButtons() {\n  $('.controls .' + ditheredClass).removeClass(ditheredClass);\n}\n\nfunction ditherButtonsByName(buttonNames) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (buttonNames.length > 0) {\n    if ($.isArray(buttonNames)) {\n      buttonNames.forEach(function (name) {\n        return ditherButtonByName(name, undither);\n      });\n    } else {\n      ditherButtonByName(buttonNames, undither);\n    }\n  }\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction ditherButtonByName(buttonName) {\n  var undither = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var $button = $('.controls .' + buttonName);\n  // console.log($button);\n  if ($button.length > 0) {\n    if (undither !== true) {\n      $button.addClass(ditheredClass);\n    } else {\n      $button.removeClass(ditheredClass);\n    }\n  }\n}\n\nfunction unditherButtonByName(buttonName) {\n  ditherButtonByName(buttonName, true);\n}\n\nfunction unditherButtonsByName(buttonNames) {\n  ditherButtonsByName(buttonNames, true);\n}\n\nfunction newPressed() {\n  // console.log('new pressed');\n  window.kan.composition = [];\n  paper.project.activeLayer.removeChildren();\n  tutorial.hideContextualTuts();\n  ditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n  sound.stopPlaying();\n  // window.kan.userHasDrawnFirstShape = false;\n  // tutorial.resetContextualTuts();\n}\n\nfunction undoPressed() {\n  sound.stopPlaying();\n  tutorial.hideContextualTuts();\n\n  var transparent = new Color(0, 0);\n  // console.log('undo pressed');\n  if (!(window.kan.moves.length > 0)) {\n    // console.log('no moves yet');\n    window.kan.userHasDrawnFirstShape = false;\n    return;\n  }\n\n  var lastMove = window.kan.moves.pop();\n  var item = project.getItem({\n    id: lastMove.id\n  });\n\n  if (item) {\n    item.visible = true; // make sure\n    switch (lastMove.type) {\n      case 'newGroup':\n        // console.log('removing group');\n        sound.removeShapeFromComposition(item);\n        util.clearGroupPops(item);\n        item.remove();\n\n        if ('removedGroup' in lastMove) {\n          // bring back removed group\n          lastMove.removedGroup.visible = true;\n          lastMove.removedGroup.data.fresh = true;\n          shape.updatePops();\n        }\n\n        var numGroups = util.getNumGroups();\n        // console.log('numGroups', numGroups);\n\n        if (numGroups <= 0) {\n          ditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n          $body.removeClass(sound.playEnabledClass);\n        } else {\n          unditherButtonsByName(['undo', 'new', 'play-stop', 'share']);\n          $body.addClass(sound.playEnabledClass);\n        }\n\n        break;\n      case 'fillChange':\n        if (lastMove.transparent) {\n          item.fillColor = lastMove.fill;\n          item.strokeColor = lastMove.fill;\n        } else {\n          item.fillColor = transparent;\n          item.strokeColor = transparent;\n        }\n      case 'transform':\n        item.data.fresh = true;\n        if (!!lastMove.position) {\n          item.position = lastMove.position;\n          if (item.data && item.data.tut && item.data.tut.length > 0) {\n            // item has connected contextual tut, move it to the right place\n            var $tut = $('.tut[data-tut-type=\\'' + tutName + '\\']');\n            tutorial.moveContextualTut($tut, lastMove.position);\n          }\n        }\n        if (!!lastMove.rotation) {\n          item.rotation = lastMove.rotation;\n        }\n        if (!!lastMove.scale) {\n          item.scale(lastMove.scale);\n        }\n        if (config.pop === true) {\n          shape.updatePops();\n        }\n        break;\n      default:\n      // console.log('unknown case');\n    }\n  } else {\n      // console.log('could not find matching item');\n    }\n}\n\nfunction playPressed() {\n  // console.log('play pressed');\n  // sound.stopComposition();\n  // overlays.closeAndResetOverlays();\n  // tutorial.hideContextualTuts();\n  var playing = window.kan.playing;\n  // console.log(playing, util.getNumGroups() > 2, !playing && util.getNumGroups() > 2, $body);\n\n  clearTimeout(window.kan.playPromptTimeout);\n  if (!playing && util.getNumGroups() > 2) {\n    // console.log('starting playing');\n    sound.startPlaying();\n  } else {\n    // console.log('stopping playing');\n    sound.stopPlaying(true);\n  }\n}\n\nfunction tipsPressed() {\n  sound.stopPlaying();\n  overlays.openOverlay('tips');\n  // console.log('tips pressed');\n}\n\nfunction sharePressed() {\n  share.record();\n  // console.log('share pressed');\n  // sound.stopPlaying();\n  // if ($body.hasClass(sound.playEnabledClass)) {\n  //   overlays.openOverlay('share');\n  // }\n}\n\nfunction initLogoRefresh() {\n  $('.main-logo').on(tapEvent, function () {\n    location.reload();\n  });\n}\n\nfunction initColorPalette() {\n  var $paletteWrap = $('ul.palette-colors');\n  var $paletteColors = $paletteWrap.find('li');\n  var paletteColorSize = 20;\n  var paletteSelectedColorSize = 30;\n  var paletteSelectedClass = 'palette-selected';\n\n  // hook up click\n  $paletteColors.on('click tap touch', function () {\n    if (!$body.hasClass(playingClass)) {\n      var $svg = $(this).find('svg.palette-color');\n\n      if (!$svg.hasClass(paletteSelectedClass)) {\n        $('.' + paletteSelectedClass).removeClass(paletteSelectedClass).attr('width', paletteColorSize).attr('height', paletteColorSize).find('rect').attr('rx', 0).attr('ry', 0);\n\n        $svg.addClass(paletteSelectedClass).attr('width', paletteSelectedColorSize).attr('height', paletteSelectedColorSize).find('rect').attr('rx', paletteSelectedColorSize / 2).attr('ry', paletteSelectedColorSize / 2);\n\n        window.kan.currentColor = $svg.find('rect').attr('fill');\n        // console.log('%ccolor', 'color:red', color.getColorName(window.kan.currentColor));\n      }\n    };\n  });\n}\n\nfunction initNewButton() {\n  $('.main-controls .new').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      newPressed();\n    }\n  });\n}\n\nfunction initUndoButton() {\n  $('.main-controls .undo').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      undoPressed();\n    }\n  });\n}\n\nfunction initPlayButton() {\n  $('.main-controls .play-stop .play').on(tapEvent, sound.startPlaying);\n  $('.main-controls .play-stop .stop').on(tapEvent, sound.stopPlaying);\n}\n\nfunction initTipsButton() {\n  $('.controls .tips').on(tapEvent, function () {\n    if (!$body.hasClass(playingClass)) {\n      tipsPressed();\n    }\n  });\n}\n\nfunction initShareButton() {\n  $('.controls .share').on(tapEvent, sharePressed);\n}\n\nfunction initContextualTuts() {\n  var $tuts = $('.contextual-tuts .tut');\n  $tuts.on(tapEvent, function () {\n    $(this).css({ visibility: 'hidden' });\n  });\n}\n\nfunction resetCanvas() {\n  paper.project.clear();\n\n  // add random background\n  paper.project.activeLayer.name = 'background';\n  var numCanvasses = 10;\n  var randomCanvasIndex = Math.round(Math.random() * (numCanvasses - 1)) + 1; // [1, numCanvasses]\n  var canvasBg = new Raster('canvas-' + randomCanvasIndex);\n  canvasBg.name = 'canvasBg';\n  canvasBg.position = paper.view.center;\n\n  // add canvas layer\n  var scaleFactorHorizontal = paper.view.viewSize.width / canvasBg.size.width;\n  var scaleFactorVertical = paper.view.viewSize.height / canvasBg.size.height;\n  canvasBg.scale(Math.max(scaleFactorHorizontal, scaleFactorVertical));\n  var layer = new Layer(); // init new layer that all other shapes will be drawn upon\n  paper.project.activeLayer.name = 'canvas';\n}\n\n},{\"./../../config\":1,\"./color\":31,\"./overlays\":34,\"./shape\":35,\"./share\":36,\"./sound\":37,\"./tutorial\":40,\"./util\":42}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rad = rad;\nexports.deg = deg;\nexports.hypot = hypot;\nexports.angleDelta = angleDelta;\nexports.delta = delta;\nexports.getTime = getTime;\nexports.getNumVisibleGroups = getNumVisibleGroups;\nexports.getVisibleGroups = getVisibleGroups;\nexports.getAllGroups = getAllGroups;\nexports.anyShapesOnCanvas = anyShapesOnCanvas;\nexports.getNumGroups = getNumGroups;\nexports.getFreshGroups = getFreshGroups;\nexports.getAllPops = getAllPops;\nexports.clearGroupPops = clearGroupPops;\nexports.getGroupPops = getGroupPops;\nexports.getPopCandidates = getPopCandidates;\nexports.setSha = setSha;\nexports.shallowCopy = shallowCopy;\nexports.randomPick = randomPick;\nvar config = require('./../../config');\n\n// Converts from degrees to radians.\nfunction rad(degrees) {\n  return degrees * Math.PI / 180;\n};\n\n// Converts from radians to degrees.\nfunction deg(radians) {\n  return radians * 180 / Math.PI;\n};\n\nfunction hypot(a, b) {\n  return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2)); // pythagorean!\n}\n\n// returns absolute value of the delta of two angles in radians\nfunction angleDelta(x, y) {\n  return Math.abs(Math.atan2(Math.sin(y - x), Math.cos(y - x)));;\n}\n\n// distance between two points\nfunction delta(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)); // pythagorean!\n}\n\nfunction getTime() {\n  return new Date().toLocaleTimeString();\n}\n\nfunction getNumVisibleGroups() {\n  var groups = getVisibleGroups();\n  return groups.length;\n}\n\nfunction getVisibleGroups() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.visible === true;\n    }\n  });\n}\n\nfunction getAllGroups() {\n  return paper.project.getItems({\n    className: 'Group'\n  });\n}\n\nfunction anyShapesOnCanvas() {\n  var groups = getVisibleGroups();\n  return groups.length > 0;\n}\n\nfunction getNumGroups() {\n  var groups = getVisibleGroups();\n  // console.log('numgroups', groups.length);\n  return groups.length;\n}\n\nfunction getFreshGroups() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false && el.data.fresh === true;\n    }\n  });\n}\n\nfunction getAllPops() {\n  return paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true;\n    }\n  });\n}\n\nfunction clearGroupPops(group) {\n  var pops = getGroupPops(group);\n  pops.forEach(function (pop) {\n    return pop.remove();\n  });\n}\n\nfunction getGroupPops(group) {\n  // console.log('group pop group', group.id, group);\n  var returnPops = [];\n\n  if (group.children.length > 0) {\n    var groupPops = group.getItems({\n      match: function match(el) {\n        return el.data && el.data.pop === true;\n      }\n    });\n    returnPops = returnPops.concat(groupPops);\n  }\n\n  var intersectingPops = paper.project.getItems({\n    match: function match(el) {\n      return el.data && el.data.pop === true && el.data.intersectingGroup === group.id;\n    }\n  });\n\n  if (intersectingPops.length > 0) {\n    returnPops = returnPops.concat(intersectingPops);\n  }\n\n  return returnPops;\n}\n\nfunction getPopCandidates() {\n  return paper.project.getItems({\n    className: 'Group',\n    match: function match(el) {\n      return el.data && el.data.line === false && el.visible === true;\n    }\n  });\n}\n\nfunction setSha() {\n  $.get('/hash').done(function (res) {\n    console.log('current hash:', res);\n    window.kan.hash = res;\n  }).fail(function (e) {\n    console.error('error getting hash:', e);\n  });\n}\n\n// http://blog.soulserv.net/understanding-object-cloning-in-javascript-part-i/\nfunction shallowCopy(original) {\n  // First create an empty object with\n  // same prototype of our original source\n  var clone = Object.create(Object.getPrototypeOf(original));\n\n  var i,\n      keys = Object.getOwnPropertyNames(original);\n\n  for (i = 0; i < keys.length; i++) {\n    // copy each property into the clone\n    Object.defineProperty(clone, keys[i], Object.getOwnPropertyDescriptor(original, keys[i]));\n  }\n\n  return clone;\n}\n\nfunction randomPick(array) {\n  if (array.length > 0) {\n    return array[Math.floor(Math.random() * array.length)];\n  }\n\n  return null;\n}\n\n},{\"./../../config\":1}],43:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enterTutorialMode = enterTutorialMode;\nexports.exitTutorialMode = exitTutorialMode;\nexports.pauseVideo = pauseVideo;\nexports.playVideo = playVideo;\nvar config = require('./../../config');\n\nvar main = require('./main');\nvar overlays = require('./overlays');\nvar timing = require('./timing');\nvar ui = require('./ui');\nvar sound = require('./sound');\n\nvar $body = $('body');\nvar tapEvent = 'click tap touch';\n\nvar videoPlayingClass = exports.videoPlayingClass = 'video-playing';\n\nvar $videoWrapper = $body.find('#video-wrap');\nvar $video = $videoWrapper.find('video');\n\nfunction enterTutorialMode() {\n  console.log('entering tutorial mode');\n  playVideo();\n  $body.addClass(videoPlayingClass);\n  clearTimeout(window.kan.inactivityTimeout);\n  clearInterval(window.kan.continueCountdownInterval);\n  $body.off(tapEvent, timing.preventInactivityTimeout);\n  $body.on(tapEvent, exitTutorialMode);\n  main.resetWindow();\n  ui.resetCanvas();\n  window.kan.refreshCheckInterval = setInterval(function () {\n    $.get('/hash').done(function (res) {\n      if (res !== window.kan.hash) {\n        console.log('different hash, reloading');\n        location.reload();\n      }\n    }).fail(function (e) {\n      console.error('error getting hash:', e);\n    });\n  }, timing.refreshCheckDelay);\n}\n\nfunction exitTutorialMode() {\n  console.log('exiting tutorial mode');\n  sound.reinitShapeSounds().then(function () {\n    clearInterval(window.kan.refreshCheckInterval);\n    Howler.mute(false);\n    pauseVideo();\n    $body.off(tapEvent, exitTutorialMode);\n    $body.on(tapEvent, timing.preventInactivityTimeout);\n    $body.removeClass(videoPlayingClass);\n    clearTimeout(window.kan.inactivityTimeout);\n    clearInterval(window.kan.continueCountdownInterval);\n\n    overlays.openOverlay('intro');\n\n    window.kan.inactivityTimeout = setTimeout(function () {\n      overlays.openOverlay('continue');\n    }, timing.continueInactivityDelay);\n  }).fail(function (e) {\n    console.error('error initting shape sounds:', e);\n    location.reload();\n  });\n}\n\nfunction pauseVideo() {\n  $video.get(0).pause();\n}\n\nfunction playVideo() {\n  $video.get(0).play();\n}\n\n},{\"./../../config\":1,\"./main\":33,\"./overlays\":34,\"./sound\":37,\"./timing\":38,\"./ui\":41}]},{},[33])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25maWcuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYXhpb3MuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL2lzQ2FuY2VsLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9jcmVhdGVFcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3NldHRsZS5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2J0b2EuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL2Jyb3dzZXIvYmx1ZWJpcmQuanMiLCJub2RlX21vZHVsZXMvaGFtbWVyanMvaGFtbWVyLmpzIiwibm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJzcmMvanMvY29sb3IuanMiLCJzcmMvanMvbGliL3NoYXBlLWRldGVjdG9yLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvb3ZlcmxheXMuanMiLCJzcmMvanMvc2hhcGUuanMiLCJzcmMvanMvc2hhcmUuanMiLCJzcmMvanMvc291bmQuanMiLCJzcmMvanMvdGltaW5nLmpzIiwic3JjL2pzL3RvdWNoLmpzIiwic3JjL2pzL3R1dG9yaWFsLmpzIiwic3JjL2pzL3VpLmpzIiwic3JjL2pzL3V0aWwuanMiLCJzcmMvanMvdmlkZW8uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLFFBQVEsYUFBUixHQUF3QixLQUF4QjtBQUNBLFFBQVEsR0FBUixHQUFjLElBQWQ7QUFDQSxRQUFRLFFBQVIsR0FBbUIsUUFBbkI7QUFDQSxRQUFRLFNBQVIsR0FBb0IsRUFBcEI7O0FBRUEsUUFBUSxPQUFSLEdBQWtCO0FBQ2hCLFVBQVEsQ0FBQyxTQUFELEVBQVksU0FBWixFQUF1QixTQUF2QixFQUFrQyxTQUFsQyxFQUE2QyxTQUE3QyxFQUF3RCxTQUF4RCxFQUFtRSxTQUFuRSxFQUE4RSxTQUE5RSxFQUF5RixTQUF6RixFQUFvRyxTQUFwRyxFQUErRyxTQUEvRyxFQUF5SCxTQUF6SCxDQURRO0FBRWhCLGNBQVk7QUFDVixlQUFXLE9BREQ7QUFFVixlQUFXLE1BRkQ7QUFHVixlQUFXLE1BSEQ7QUFJVixlQUFXLE1BSkQ7QUFLVixlQUFXLEtBTEQ7QUFNVixlQUFXLEtBTkQ7QUFPVixlQUFXLFFBUEQ7QUFRVixlQUFXLE9BUkQ7QUFTVixlQUFXLE9BVEQ7QUFVVixlQUFXLFFBVkQ7QUFXVixlQUFXLE9BWEQ7QUFZVixlQUFXO0FBWkQsR0FGSTtBQWdCaEIsYUFBVztBQUNULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQURGO0FBRVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBRkY7QUFHVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FIRjtBQUlULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQUpGO0FBS1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBTEY7QUFNVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FORjtBQU9ULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVBGO0FBUVQsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBUkY7QUFTVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVosQ0FURjtBQVVULGVBQVcsQ0FBQyxTQUFELEVBQVksU0FBWixDQVZGO0FBV1QsZUFBVyxDQUFDLFNBQUQsRUFBWSxTQUFaLENBWEY7QUFZVCxlQUFXLENBQUMsU0FBRCxFQUFZLFNBQVo7QUFaRixHQWhCSztBQThCaEIsUUFBTSxDQUFDLFNBQUQsRUFBWSxTQUFaLEVBQXVCLFNBQXZCLEVBQWtDLFNBQWxDLEVBQTZDLFNBQTdDLENBOUJVO0FBK0JoQixhQUFXLEVBL0JLO0FBZ0NoQixxQkFBbUI7QUFoQ0gsQ0FBbEI7O0FBbUNBLFFBQVEsY0FBUixHQUF5QixDQUN2QjtBQUNFLFFBQU0sTUFEUjtBQUVFLFFBQU07QUFGUixDQUR1QixFQUt2QjtBQUNFLFFBQU0sT0FEUjtBQUVFLFFBQU07QUFGUixDQUx1QixFQVN2QjtBQUNFLFFBQU0sT0FEUjtBQUVFLFFBQU07QUFGUixDQVR1QixDQUF6Qjs7O0FDeENBOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2pMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM3RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM1NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2wvS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25sRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2x0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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R0FBZCxFQUF2QyxFQUEwRCxFQUFDLEtBQUssRUFBTixFQUFTLEtBQUssR0FBZCxFQUExRCxFQUE2RSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3RSxFQUFpRyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqRyxFQUFxSCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFySCxFQUF5SSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6SSxFQUE2SixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3SixFQUFpTCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqTCxFQUFxTSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyTSxFQUF5TixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6TixFQUE2TyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3TyxFQUFpUSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqUSxFQUFxUixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyUixFQUF5UyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6UyxFQUE2VCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3VCxFQUFpVixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqVixFQUFxVyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyVyxFQUF5WCxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6WCxFQUE2WSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUE3WSxFQUFpYSxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFqYSxFQUFxYixFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUFyYixFQUF5YyxFQUFDLEtBQUssR0FBTixFQUFVLEtBQUssR0FBZixFQUF6YyxFQUE2ZCxF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QTBELEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTFELEVBQTZFLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTdFLEVBQWdHLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWhHLEVBQW1ILEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQW5ILEVBQXNJLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXRJLEVBQXlKLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXpKLEVBQTRLLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTVLLEVBQStMLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQS9MLEVBQWtOLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWxOLEVBQXFPLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXJPLEVBQXdQLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXhQLEVBQTJRLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTNRLEVBQThSLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTlSLEVBQWlULEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQWpULEVBQW9VLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXBVLEVBQXVWLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQXZWLEVBQTBXLEVBQUMsS0FBSyxFQUFOLEVBQVMsS0FBSyxHQUFkLEVBQTFXLEVBQTZYLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQTdYLEVBQWlaLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQWpaLEVBQXFhLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXJhLEVBQXliLEVBQUMsS0FBSyxHQUFOLEVBQVUsS0FBSyxHQUFmLEVBQXpiLEVBQTZjLEVBQUMsS0FBSyxHQUFO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UixDQUFZLHVCQUFaO0FBQ0EsUUFBTSxpQkFBTixHQUNHLElBREgsQ0FDUSxZQUFNO0FBQ1Ysa0JBQWMsT0FBTyxHQUFQLENBQVcsb0JBQXpCO0FBQ0EsV0FBTyxJQUFQLENBQVksS0FBWjtBQUNBO0FBQ0EsVUFBTSxHQUFOLENBQVUsUUFBVixFQUFvQixnQkFBcEI7QUFDQSxVQUFNLEVBQU4sQ0FBUyxRQUFULEVBQW1CLE9BQU8sd0JBQTFCO0FBQ0EsVUFBTSxXQUFOLENBQWtCLGlCQUFsQjtBQUNBLGlCQUFhLE9BQU8sR0FBUCxDQUFXLGlCQUF4QjtBQUNBLGtCQUFjLE9BQU8sR0FBUCxDQUFXLHlCQUF6Qjs7QUFFQSxhQUFTLFdBQVQsQ0FBcUIsT0FBckI7O0FBRUEsV0FBTyxHQUFQLENBQVcsaUJBQVgsR0FBK0IsV0FBVyxZQUFNO0FBQzlDLGVBQVMsV0FBVCxDQUFxQixVQUFyQjtBQUNELEtBRjhCLEVBRTVCLE9BQU8sdUJBRnFCLENBQS9CO0FBR0QsR0FoQkgsRUFpQkMsSUFqQkQsQ0FpQk0sVUFBQyxDQUFELEVBQU87QUFDWCxZQUFRLEtBQVIsQ0FBYyw4QkFBZCxFQUE4QyxDQUE5QztBQUNBLGFBQVMsTUFBVDtBQUNELEdBcEJEO0FBcUJEOztBQUVNLFNBQVMsVUFBVCxHQUFzQjtBQUMzQixTQUFPLEdBQVAsQ0FBVyxDQUFYLEVBQWMsS0FBZDtBQUNEOztBQUVNLFNBQVMsU0FBVCxHQUFxQjtBQUMxQixTQUFPLEdBQVAsQ0FBVyxDQUFYLEVBQWMsSUFBZDtBQUNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImV4cG9ydHMucnVuQW5pbWF0aW9ucyA9IGZhbHNlO1xuZXhwb3J0cy5wb3AgPSB0cnVlO1xuZXhwb3J0cy5jYW52YXNJZCA9ICdjYW52YXMnO1xuZXhwb3J0cy5tYXhTaGFwZXMgPSAyMDtcblxuZXhwb3J0cy5wYWxldHRlID0ge1xuICBjb2xvcnM6IFtcIiMyMDE3MUNcIiwgXCIjMUUyQTQzXCIsIFwiIzI4Mzc3RFwiLCBcIiMzNTI3NDdcIiwgXCIjQ0EyRTI2XCIsIFwiIzlBMkExRlwiLCBcIiNEQTZDMjZcIiwgXCIjNDUzMTIxXCIsIFwiIzkxNkE0N1wiLCBcIiNEQUFEMjdcIiwgXCIjN0Y3RDMxXCIsXCIjMkI1RTJFXCJdLFxuICBjb2xvck5hbWVzOiB7XG4gICAgXCIjMjAxNzFDXCI6IFwiYmxhY2tcIixcbiAgICBcIiMxRTJBNDNcIjogXCJibHVlXCIsXG4gICAgXCIjMjgzNzdEXCI6IFwiYmx1ZVwiLFxuICAgIFwiIzM1Mjc0N1wiOiBcImJsdWVcIixcbiAgICBcIiNDQTJFMjZcIjogXCJyZWRcIixcbiAgICBcIiM5QTJBMUZcIjogXCJyZWRcIixcbiAgICBcIiNEQTZDMjZcIjogXCJvcmFuZ2VcIixcbiAgICBcIiM0NTMxMjFcIjogXCJicm93blwiLFxuICAgIFwiIzkxNkE0N1wiOiBcImJyb3duXCIsXG4gICAgXCIjREFBRDI3XCI6IFwib3JhbmdlXCIsXG4gICAgXCIjN0Y3RDMxXCI6IFwiZ3JlZW5cIixcbiAgICBcIiMyQjVFMkVcIjogXCJncmVlblwiXG4gIH0sXG4gIGdyYWRpZW50czoge1xuICAgICcjMjAxNzFDJzogWycjMjAxNzFDJywgJyMwMDAwMDAnXSxcbiAgICAnIzFFMkE0Myc6IFsnIzFFMkE0MycsICcjMjYzMTY2J10sXG4gICAgJyMyODM3N0QnOiBbJyMyODM3N0QnLCAnIzFFNDY5NSddLFxuICAgICcjMzUyNzQ3JzogWycjMzUyNzQ3JywgJyM0NTAwNUInXSxcbiAgICAnI0NBMkUyNic6IFsnI0NBMkUyNicsICcjOUIzNTJGJ10sXG4gICAgJyM5QTJBMUYnOiBbJyM5QTJBMUYnLCAnI0NEMzYyMSddLFxuICAgICcjREE2QzI2JzogWycjREE2QzI2JywgJyNCRDQ4MjAnXSxcbiAgICAnIzQ1MzEyMSc6IFsnIzQ1MzEyMScsICcjMjgxODA2J10sXG4gICAgJyM5MTZBNDcnOiBbJyM5MTZBNDcnLCAnIzYyM0EyMiddLFxuICAgICcjREFBRDI3JzogWycjREFBRDI3JywgJyNBRjg3MUQnXSxcbiAgICAnIzdGN0QzMSc6IFsnIzdGN0QzMScsICcjNTU1ODI3J10sXG4gICAgJyMyQjVFMkUnOiBbJyMyQjVFMkUnLCAnIzE2NDUxRCddLFxuICB9LFxuICBwb3BzOiBbXCIjMDBBREVGXCIsIFwiI0YyODVBNVwiLCBcIiM3REM1N0ZcIiwgXCIjRjZFQjE2XCIsIFwiI0Y0RUFFMFwiXSxcbiAgY29sb3JTaXplOiAyMCxcbiAgc2VsZWN0ZWRDb2xvclNpemU6IDMwXG59O1xuXG5leHBvcnRzLmNvbnRleHR1YWxUdXRzID0gW1xuICB7XG4gICAgdHlwZTogXCJmaWxsXCIsXG4gICAgY29weTogXCI8c3Ryb25nPkRvdWJsZS10YXA8L3N0cm9uZz4gYSBmaWxsZWQgc2hhcGUgdG8gPHN0cm9uZz5VTkZJTEw8L3N0cm9uZz4gaXQuIFJlcGVhdCB0byA8c3Ryb25nPkZJTEw8L3N0cm9uZz4gYW4gdW5maWxsZWQgc2hhcGUuXCIsXG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInBpbmNoXCIsXG4gICAgY29weTogXCI8c3Ryb25nPlBpbmNoPC9zdHJvbmc+IHNoYXBlcyB3aXRoIDxzdHJvbmc+VFdPIEZJTkdFUlM8L3N0cm9uZz4gdG8gPHN0cm9uZz5yZXNpemU8L3N0cm9uZz4gYW5kIDxzdHJvbmc+bW92ZTwvc3Ryb25nPiB0aGVtLlwiLFxuICB9LFxuICB7XG4gICAgdHlwZTogXCJzd2lwZVwiLFxuICAgIGNvcHk6IFwiVG8gPHN0cm9uZz5yZW1vdmU8L3N0cm9uZz4gc2hhcGVzLCA8c3Ryb25nPnBpbmNoPC9zdHJvbmc+IHdpdGggPHN0cm9uZz50d28gZmluZ2Vyczwvc3Ryb25nPiB0aGVuIDxzdHJvbmc+c3dpcGU8L3N0cm9uZz4gb3IgaGl0IDxzdHJvbmc+dW5kbzwvc3Ryb25nPi5cIlxuICB9LFxuXTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvYXhpb3MnKTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzJyk7XG52YXIgaXNVUkxTYW1lT3JpZ2luID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO1xudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9jcmVhdGVFcnJvcicpO1xudmFyIGJ0b2EgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmJ0b2EgJiYgd2luZG93LmJ0b2EuYmluZCh3aW5kb3cpKSB8fCByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnRvYScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBsb2FkRXZlbnQgPSAnb25yZWFkeXN0YXRlY2hhbmdlJztcbiAgICB2YXIgeERvbWFpbiA9IGZhbHNlO1xuXG4gICAgLy8gRm9yIElFIDgvOSBDT1JTIHN1cHBvcnRcbiAgICAvLyBPbmx5IHN1cHBvcnRzIFBPU1QgYW5kIEdFVCBjYWxscyBhbmQgZG9lc24ndCByZXR1cm5zIHRoZSByZXNwb25zZSBoZWFkZXJzLlxuICAgIC8vIERPTidUIGRvIHRoaXMgZm9yIHRlc3RpbmcgYi9jIFhNTEh0dHBSZXF1ZXN0IGlzIG1vY2tlZCwgbm90IFhEb21haW5SZXF1ZXN0LlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5YRG9tYWluUmVxdWVzdCAmJiAhKCd3aXRoQ3JlZGVudGlhbHMnIGluIHJlcXVlc3QpICYmXG4gICAgICAgICFpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpIHtcbiAgICAgIHJlcXVlc3QgPSBuZXcgd2luZG93LlhEb21haW5SZXF1ZXN0KCk7XG4gICAgICBsb2FkRXZlbnQgPSAnb25sb2FkJztcbiAgICAgIHhEb21haW4gPSB0cnVlO1xuICAgICAgcmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24gaGFuZGxlUHJvZ3Jlc3MoKSB7fTtcbiAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHt9O1xuICAgIH1cblxuICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICBpZiAoY29uZmlnLmF1dGgpIHtcbiAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuXG4gICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZVxuICAgIHJlcXVlc3RbbG9hZEV2ZW50XSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QgfHwgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCAmJiAheERvbWFpbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkXG4gICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoJ2ZpbGU6JykgPT09IDApKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcbiAgICAgIHZhciByZXNwb25zZURhdGEgPSAhY29uZmlnLnJlc3BvbnNlVHlwZSB8fCBjb25maWcucmVzcG9uc2VUeXBlID09PSAndGV4dCcgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgLy8gSUUgc2VuZHMgMTIyMyBpbnN0ZWFkIG9mIDIwNCAoaHR0cHM6Ly9naXRodWIuY29tL216YWJyaXNraWUvYXhpb3MvaXNzdWVzLzIwMSlcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZykpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJykpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xuXG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG4gICAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLndpdGhDcmVkZW50aWFscykge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAocmVxdWVzdC5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG4gICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gIHJldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcbn07XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICB2YXIgdG9rZW4gPSB0aGlzO1xuICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29tYmluZVVSTHMnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IHV0aWxzLm1lcmdlKHtcbiAgICAgIHVybDogYXJndW1lbnRzWzBdXG4gICAgfSwgYXJndW1lbnRzWzFdKTtcbiAgfVxuXG4gIGNvbmZpZyA9IHV0aWxzLm1lcmdlKGRlZmF1bHRzLCB0aGlzLmRlZmF1bHRzLCB7IG1ldGhvZDogJ2dldCcgfSwgY29uZmlnKTtcblxuICAvLyBTdXBwb3J0IGJhc2VVUkwgY29uZmlnXG4gIGlmIChjb25maWcuYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSkge1xuICAgIGNvbmZpZy51cmwgPSBjb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG4gIH1cblxuICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG4gIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG4gIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybFxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW5oYW5jZUVycm9yID0gcmVxdWlyZSgnLi9lbmhhbmNlRXJyb3InKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiBAIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXNwb25zZSkge1xuICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVzcG9uc2UpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5mdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykge1xuICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7XG4gIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgIGNvbmZpZy5kYXRhLFxuICAgIGNvbmZpZy5oZWFkZXJzLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG4gICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzIHx8IHt9XG4gICk7XG5cbiAgdXRpbHMuZm9yRWFjaChcbiAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHtcbiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuICAgIH1cbiAgKTtcblxuICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cbiAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcbiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgcmVzcG9uc2UuZGF0YSxcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVcGRhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuIEAgQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICByZXR1cm4gZXJyb3I7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUVycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICAvLyBOb3RlOiBzdGF0dXMgaXMgbm90IGV4cG9zZWQgYnkgWERvbWFpblJlcXVlc3RcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcblxudmFyIFBST1RFQ1RJT05fUFJFRklYID0gL15cXClcXF1cXH0nLD9cXG4vO1xudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKFBST1RFQ1RJT05fUFJFRklYLCAnJyk7XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH1cbn07XG5cbmRlZmF1bHRzLmhlYWRlcnMgPSB7XG4gIGNvbW1vbjoge1xuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZWh0b2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblxudmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuZnVuY3Rpb24gRSgpIHtcbiAgdGhpcy5tZXNzYWdlID0gJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3Rlcic7XG59XG5FLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcbkUucHJvdG90eXBlLmNvZGUgPSA1O1xuRS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5mdW5jdGlvbiBidG9hKGlucHV0KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuICB2YXIgb3V0cHV0ID0gJyc7XG4gIGZvciAoXG4gICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcbiAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcbiAgICAvLyBpZiB0aGUgbmV4dCBzdHIgaW5kZXggZG9lcyBub3QgZXhpc3Q6XG4gICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcbiAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG4gICAgc3RyLmNoYXJBdChpZHggfCAwKSB8fCAobWFwID0gJz0nLCBpZHggJSAxKTtcbiAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuICApIHtcbiAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG4gICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEUoKTtcbiAgICB9XG4gICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH1cblxuICAgICAgaWYgKCF1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiB7XG4gICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7XG4gICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xcXFxzKikoJyArIG5hbWUgKyAnKT0oW147XSopJykpO1xuICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgfVxuICAgIH07XG4gIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgfVxuXG4gICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG5cbi8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgLT4gdW5kZWZpbmVkXG4gKi9cbmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID09PSAnZnVuY3Rpb24nXG4gICk7XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyAmJiAhaXNBcnJheShvYmopKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZzogaXNTdHJpbmcsXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc0ZpbGU6IGlzRmlsZSxcbiAgaXNCbG9iOiBpc0Jsb2IsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtOiBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIGZvckVhY2g6IGZvckVhY2gsXG4gIG1lcmdlOiBtZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW1cbn07XG4iLCIvKiBAcHJlc2VydmVcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICogXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNyBQZXRrYSBBbnRvbm92XG4gKiBcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqIFxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICogXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gKiBUSEUgU09GVFdBUkUuXG4gKiBcbiAqL1xuLyoqXG4gKiBibHVlYmlyZCBidWlsZCB2ZXJzaW9uIDMuNS4wXG4gKiBGZWF0dXJlcyBlbmFibGVkOiBjb3JlLCByYWNlLCBjYWxsX2dldCwgZ2VuZXJhdG9ycywgbWFwLCBub2RlaWZ5LCBwcm9taXNpZnksIHByb3BzLCByZWR1Y2UsIHNldHRsZSwgc29tZSwgdXNpbmcsIHRpbWVycywgZmlsdGVyLCBhbnksIGVhY2hcbiovXG4hZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciBmO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/Zj13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9mPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKGY9c2VsZiksZi5Qcm9taXNlPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiBfZGVyZXFfPT1cImZ1bmN0aW9uXCImJl9kZXJlcV87aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIF9kZXJlcV89PVwiZnVuY3Rpb25cIiYmX2RlcmVxXztmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciBTb21lUHJvbWlzZUFycmF5ID0gUHJvbWlzZS5fU29tZVByb21pc2VBcnJheTtcbmZ1bmN0aW9uIGFueShwcm9taXNlcykge1xuICAgIHZhciByZXQgPSBuZXcgU29tZVByb21pc2VBcnJheShwcm9taXNlcyk7XG4gICAgdmFyIHByb21pc2UgPSByZXQucHJvbWlzZSgpO1xuICAgIHJldC5zZXRIb3dNYW55KDEpO1xuICAgIHJldC5zZXRVbndyYXAoKTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLmFueSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBhbnkocHJvbWlzZXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbnkodGhpcyk7XG59O1xuXG59O1xuXG59LHt9XSwyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGZpcnN0TGluZUVycm9yO1xudHJ5IHt0aHJvdyBuZXcgRXJyb3IoKTsgfSBjYXRjaCAoZSkge2ZpcnN0TGluZUVycm9yID0gZTt9XG52YXIgc2NoZWR1bGUgPSBfZGVyZXFfKFwiLi9zY2hlZHVsZVwiKTtcbnZhciBRdWV1ZSA9IF9kZXJlcV8oXCIuL3F1ZXVlXCIpO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuXG5mdW5jdGlvbiBBc3luYygpIHtcbiAgICB0aGlzLl9jdXN0b21TY2hlZHVsZXIgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1RpY2tVc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fbGF0ZVF1ZXVlID0gbmV3IFF1ZXVlKDE2KTtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZSA9IG5ldyBRdWV1ZSgxNik7XG4gICAgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXMgPSBmYWxzZTtcbiAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IHRydWU7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuX2RyYWluUXVldWVzKCk7XG4gICAgfTtcbiAgICB0aGlzLl9zY2hlZHVsZSA9IHNjaGVkdWxlO1xufVxuXG5Bc3luYy5wcm90b3R5cGUuc2V0U2NoZWR1bGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgcHJldiA9IHRoaXMuX3NjaGVkdWxlO1xuICAgIHRoaXMuX3NjaGVkdWxlID0gZm47XG4gICAgdGhpcy5fY3VzdG9tU2NoZWR1bGVyID0gdHJ1ZTtcbiAgICByZXR1cm4gcHJldjtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5oYXNDdXN0b21TY2hlZHVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tU2NoZWR1bGVyO1xufTtcblxuQXN5bmMucHJvdG90eXBlLmVuYWJsZVRyYW1wb2xpbmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IHRydWU7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuZGlzYWJsZVRyYW1wb2xpbmVJZk5lY2Vzc2FyeSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh1dGlsLmhhc0RldlRvb2xzKSB7XG4gICAgICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gZmFsc2U7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLmhhdmVJdGVtc1F1ZXVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNUaWNrVXNlZCB8fCB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcztcbn07XG5cblxuQXN5bmMucHJvdG90eXBlLmZhdGFsRXJyb3IgPSBmdW5jdGlvbihlLCBpc05vZGUpIHtcbiAgICBpZiAoaXNOb2RlKSB7XG4gICAgICAgIHByb2Nlc3Muc3RkZXJyLndyaXRlKFwiRmF0YWwgXCIgKyAoZSBpbnN0YW5jZW9mIEVycm9yID8gZS5zdGFjayA6IGUpICtcbiAgICAgICAgICAgIFwiXFxuXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0xhdGVyKGUpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS50aHJvd0xhdGVyID0gZnVuY3Rpb24oZm4sIGFyZykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGFyZyA9IGZuO1xuICAgICAgICBmbiA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgYXJnOyB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0sIDApO1xuICAgIH0gZWxzZSB0cnkge1xuICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gQXN5bmNJbnZva2VMYXRlcihmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX2xhdGVRdWV1ZS5wdXNoKGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuZnVuY3Rpb24gQXN5bmNJbnZva2UoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZS5wdXNoKGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuZnVuY3Rpb24gQXN5bmNTZXR0bGVQcm9taXNlcyhwcm9taXNlKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUuX3B1c2hPbmUocHJvbWlzZSk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmlmICghdXRpbC5oYXNEZXZUb29scykge1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2VMYXRlciA9IEFzeW5jSW52b2tlTGF0ZXI7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZSA9IEFzeW5jSW52b2tlO1xuICAgIEFzeW5jLnByb3RvdHlwZS5zZXR0bGVQcm9taXNlcyA9IEFzeW5jU2V0dGxlUHJvbWlzZXM7XG59IGVsc2Uge1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2VMYXRlciA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jSW52b2tlTGF0ZXIuY2FsbCh0aGlzLCBmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNJbnZva2UuY2FsbCh0aGlzLCBmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQXN5bmMucHJvdG90eXBlLnNldHRsZVByb21pc2VzID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jU2V0dGxlUHJvbWlzZXMuY2FsbCh0aGlzLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbkFzeW5jLnByb3RvdHlwZS5fZHJhaW5RdWV1ZSA9IGZ1bmN0aW9uKHF1ZXVlKSB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCgpID4gMCkge1xuICAgICAgICB2YXIgZm4gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGZuLl9zZXR0bGVQcm9taXNlcygpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlY2VpdmVyID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgdmFyIGFyZyA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGZuLmNhbGwocmVjZWl2ZXIsIGFyZyk7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLl9kcmFpblF1ZXVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9kcmFpblF1ZXVlKHRoaXMuX25vcm1hbFF1ZXVlKTtcbiAgICB0aGlzLl9yZXNldCgpO1xuICAgIHRoaXMuX2hhdmVEcmFpbmVkUXVldWVzID0gdHJ1ZTtcbiAgICB0aGlzLl9kcmFpblF1ZXVlKHRoaXMuX2xhdGVRdWV1ZSk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX3F1ZXVlVGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX2lzVGlja1VzZWQpIHtcbiAgICAgICAgdGhpcy5faXNUaWNrVXNlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlKHRoaXMuZHJhaW5RdWV1ZXMpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faXNUaWNrVXNlZCA9IGZhbHNlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBc3luYztcbm1vZHVsZS5leHBvcnRzLmZpcnN0TGluZUVycm9yID0gZmlyc3RMaW5lRXJyb3I7XG5cbn0se1wiLi9xdWV1ZVwiOjI2LFwiLi9zY2hlZHVsZVwiOjI5LFwiLi91dGlsXCI6MzZ9XSwzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgZGVidWcpIHtcbnZhciBjYWxsZWRCaW5kID0gZmFsc2U7XG52YXIgcmVqZWN0VGhpcyA9IGZ1bmN0aW9uKF8sIGUpIHtcbiAgICB0aGlzLl9yZWplY3QoZSk7XG59O1xuXG52YXIgdGFyZ2V0UmVqZWN0ZWQgPSBmdW5jdGlvbihlLCBjb250ZXh0KSB7XG4gICAgY29udGV4dC5wcm9taXNlUmVqZWN0aW9uUXVldWVkID0gdHJ1ZTtcbiAgICBjb250ZXh0LmJpbmRpbmdQcm9taXNlLl90aGVuKHJlamVjdFRoaXMsIHJlamVjdFRoaXMsIG51bGwsIHRoaXMsIGUpO1xufTtcblxudmFyIGJpbmRpbmdSZXNvbHZlZCA9IGZ1bmN0aW9uKHRoaXNBcmcsIGNvbnRleHQpIHtcbiAgICBpZiAoKCh0aGlzLl9iaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZUNhbGxiYWNrKGNvbnRleHQudGFyZ2V0KTtcbiAgICB9XG59O1xuXG52YXIgYmluZGluZ1JlamVjdGVkID0gZnVuY3Rpb24oZSwgY29udGV4dCkge1xuICAgIGlmICghY29udGV4dC5wcm9taXNlUmVqZWN0aW9uUXVldWVkKSB0aGlzLl9yZWplY3QoZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKHRoaXNBcmcpIHtcbiAgICBpZiAoIWNhbGxlZEJpbmQpIHtcbiAgICAgICAgY2FsbGVkQmluZCA9IHRydWU7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9wYWdhdGVGcm9tID0gZGVidWcucHJvcGFnYXRlRnJvbUZ1bmN0aW9uKCk7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9ib3VuZFZhbHVlID0gZGVidWcuYm91bmRWYWx1ZUZ1bmN0aW9uKCk7XG4gICAgfVxuICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXNBcmcpO1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9wcm9wYWdhdGVGcm9tKHRoaXMsIDEpO1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICByZXQuX3NldEJvdW5kVG8obWF5YmVQcm9taXNlKTtcbiAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHtcbiAgICAgICAgICAgIHByb21pc2VSZWplY3Rpb25RdWV1ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcHJvbWlzZTogcmV0LFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICBiaW5kaW5nUHJvbWlzZTogbWF5YmVQcm9taXNlXG4gICAgICAgIH07XG4gICAgICAgIHRhcmdldC5fdGhlbihJTlRFUk5BTCwgdGFyZ2V0UmVqZWN0ZWQsIHVuZGVmaW5lZCwgcmV0LCBjb250ZXh0KTtcbiAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKFxuICAgICAgICAgICAgYmluZGluZ1Jlc29sdmVkLCBiaW5kaW5nUmVqZWN0ZWQsIHVuZGVmaW5lZCwgcmV0LCBjb250ZXh0KTtcbiAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChtYXliZVByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldC5fcmVzb2x2ZUNhbGxiYWNrKHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Qm91bmRUbyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAob2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDIwOTcxNTI7XG4gICAgICAgIHRoaXMuX2JvdW5kVG8gPSBvYmo7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MjA5NzE1Mik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDIwOTcxNTIpID09PSAyMDk3MTUyO1xufTtcblxuUHJvbWlzZS5iaW5kID0gZnVuY3Rpb24gKHRoaXNBcmcsIHZhbHVlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkuYmluZCh0aGlzQXJnKTtcbn07XG59O1xuXG59LHt9XSw0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIG9sZDtcbmlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIikgb2xkID0gUHJvbWlzZTtcbmZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgdHJ5IHsgaWYgKFByb21pc2UgPT09IGJsdWViaXJkKSBQcm9taXNlID0gb2xkOyB9XG4gICAgY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGJsdWViaXJkO1xufVxudmFyIGJsdWViaXJkID0gX2RlcmVxXyhcIi4vcHJvbWlzZVwiKSgpO1xuYmx1ZWJpcmQubm9Db25mbGljdCA9IG5vQ29uZmxpY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IGJsdWViaXJkO1xuXG59LHtcIi4vcHJvbWlzZVwiOjIyfV0sNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBjciA9IE9iamVjdC5jcmVhdGU7XG5pZiAoY3IpIHtcbiAgICB2YXIgY2FsbGVyQ2FjaGUgPSBjcihudWxsKTtcbiAgICB2YXIgZ2V0dGVyQ2FjaGUgPSBjcihudWxsKTtcbiAgICBjYWxsZXJDYWNoZVtcIiBzaXplXCJdID0gZ2V0dGVyQ2FjaGVbXCIgc2l6ZVwiXSA9IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciBpc0lkZW50aWZpZXIgPSB1dGlsLmlzSWRlbnRpZmllcjtcblxudmFyIGdldE1ldGhvZENhbGxlcjtcbnZhciBnZXRHZXR0ZXI7XG5pZiAoIXRydWUpIHtcbnZhciBtYWtlTWV0aG9kQ2FsbGVyID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiZW5zdXJlTWV0aG9kXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGVuc3VyZU1ldGhvZChvYmosICdtZXRob2ROYW1lJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHN3aXRjaChsZW4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBvYmoubWV0aG9kTmFtZSh0aGlzWzBdKTsgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBvYmoubWV0aG9kTmFtZSh0aGlzWzBdLCB0aGlzWzFdKTsgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBvYmoubWV0aG9kTmFtZSh0aGlzWzBdLCB0aGlzWzFdLCB0aGlzWzJdKTsgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBvYmoubWV0aG9kTmFtZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5tZXRob2ROYW1lLmFwcGx5KG9iaiwgdGhpcyk7ICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZSgvbWV0aG9kTmFtZS9nLCBtZXRob2ROYW1lKSkoZW5zdXJlTWV0aG9kKTtcbn07XG5cbnZhciBtYWtlR2V0dGVyID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJvYmpcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXR1cm4gb2JqLnByb3BlcnR5TmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKFwicHJvcGVydHlOYW1lXCIsIHByb3BlcnR5TmFtZSkpO1xufTtcblxudmFyIGdldENvbXBpbGVkID0gZnVuY3Rpb24obmFtZSwgY29tcGlsZXIsIGNhY2hlKSB7XG4gICAgdmFyIHJldCA9IGNhY2hlW25hbWVdO1xuICAgIGlmICh0eXBlb2YgcmV0ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKCFpc0lkZW50aWZpZXIobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldCA9IGNvbXBpbGVyKG5hbWUpO1xuICAgICAgICBjYWNoZVtuYW1lXSA9IHJldDtcbiAgICAgICAgY2FjaGVbXCIgc2l6ZVwiXSsrO1xuICAgICAgICBpZiAoY2FjaGVbXCIgc2l6ZVwiXSA+IDUxMikge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjYWNoZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSBkZWxldGUgY2FjaGVba2V5c1tpXV07XG4gICAgICAgICAgICBjYWNoZVtcIiBzaXplXCJdID0ga2V5cy5sZW5ndGggLSAyNTY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmdldE1ldGhvZENhbGxlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0Q29tcGlsZWQobmFtZSwgbWFrZU1ldGhvZENhbGxlciwgY2FsbGVyQ2FjaGUpO1xufTtcblxuZ2V0R2V0dGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBnZXRDb21waWxlZChuYW1lLCBtYWtlR2V0dGVyLCBnZXR0ZXJDYWNoZSk7XG59O1xufVxuXG5mdW5jdGlvbiBlbnN1cmVNZXRob2Qob2JqLCBtZXRob2ROYW1lKSB7XG4gICAgdmFyIGZuO1xuICAgIGlmIChvYmogIT0gbnVsbCkgZm4gPSBvYmpbbWV0aG9kTmFtZV07XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJPYmplY3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKG9iaikgKyBcIiBoYXMgbm8gbWV0aG9kICdcIiArXG4gICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG1ldGhvZE5hbWUpICsgXCInXCI7XG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlLlR5cGVFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZuO1xufVxuXG5mdW5jdGlvbiBjYWxsZXIob2JqKSB7XG4gICAgdmFyIG1ldGhvZE5hbWUgPSB0aGlzLnBvcCgpO1xuICAgIHZhciBmbiA9IGVuc3VyZU1ldGhvZChvYmosIG1ldGhvZE5hbWUpO1xuICAgIHJldHVybiBmbi5hcHBseShvYmosIHRoaXMpO1xufVxuUHJvbWlzZS5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7O1xuICAgIGlmICghdHJ1ZSkge1xuICAgICAgICBpZiAoY2FuRXZhbHVhdGUpIHtcbiAgICAgICAgICAgIHZhciBtYXliZUNhbGxlciA9IGdldE1ldGhvZENhbGxlcihtZXRob2ROYW1lKTtcbiAgICAgICAgICAgIGlmIChtYXliZUNhbGxlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90aGVuKFxuICAgICAgICAgICAgICAgICAgICBtYXliZUNhbGxlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGFyZ3MsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXJncy5wdXNoKG1ldGhvZE5hbWUpO1xuICAgIHJldHVybiB0aGlzLl90aGVuKGNhbGxlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGFyZ3MsIHVuZGVmaW5lZCk7XG59O1xuXG5mdW5jdGlvbiBuYW1lZEdldHRlcihvYmopIHtcbiAgICByZXR1cm4gb2JqW3RoaXNdO1xufVxuZnVuY3Rpb24gaW5kZXhlZEdldHRlcihvYmopIHtcbiAgICB2YXIgaW5kZXggPSArdGhpcztcbiAgICBpZiAoaW5kZXggPCAwKSBpbmRleCA9IE1hdGgubWF4KDAsIGluZGV4ICsgb2JqLmxlbmd0aCk7XG4gICAgcmV0dXJuIG9ialtpbmRleF07XG59XG5Qcm9taXNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIGlzSW5kZXggPSAodHlwZW9mIHByb3BlcnR5TmFtZSA9PT0gXCJudW1iZXJcIik7XG4gICAgdmFyIGdldHRlcjtcbiAgICBpZiAoIWlzSW5kZXgpIHtcbiAgICAgICAgaWYgKGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICB2YXIgbWF5YmVHZXR0ZXIgPSBnZXRHZXR0ZXIocHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIGdldHRlciA9IG1heWJlR2V0dGVyICE9PSBudWxsID8gbWF5YmVHZXR0ZXIgOiBuYW1lZEdldHRlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdldHRlciA9IG5hbWVkR2V0dGVyO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0dGVyID0gaW5kZXhlZEdldHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oZ2V0dGVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcHJvcGVydHlOYW1lLCB1bmRlZmluZWQpO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSw2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG5cblByb21pc2UucHJvdG90eXBlW1wiYnJlYWtcIl0gPSBQcm9taXNlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIWRlYnVnLmNhbmNlbGxhdGlvbigpKSByZXR1cm4gdGhpcy5fd2FybihcImNhbmNlbGxhdGlvbiBpcyBkaXNhYmxlZFwiKTtcblxuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgY2hpbGQgPSBwcm9taXNlO1xuICAgIHdoaWxlIChwcm9taXNlLl9pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgaWYgKCFwcm9taXNlLl9jYW5jZWxCeShjaGlsZCkpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZC5faXNGb2xsb3dpbmcoKSkge1xuICAgICAgICAgICAgICAgIGNoaWxkLl9mb2xsb3dlZSgpLmNhbmNlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fY2FuY2VsQnJhbmNoZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcmVudCA9IHByb21pc2UuX2NhbmNlbGxhdGlvblBhcmVudDtcbiAgICAgICAgaWYgKHBhcmVudCA9PSBudWxsIHx8ICFwYXJlbnQuX2lzQ2FuY2VsbGFibGUoKSkge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9mb2xsb3dlZSgpLmNhbmNlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9jYW5jZWxCcmFuY2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZS5faXNGb2xsb3dpbmcoKSkgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIHByb21pc2UuX3NldFdpbGxCZUNhbmNlbGxlZCgpO1xuICAgICAgICAgICAgY2hpbGQgPSBwcm9taXNlO1xuICAgICAgICAgICAgcHJvbWlzZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9icmFuY2hIYXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsLS07XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZW5vdWdoQnJhbmNoZXNIYXZlQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsIDw9IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsQnkgPSBmdW5jdGlvbihjYW5jZWxsZXIpIHtcbiAgICBpZiAoY2FuY2VsbGVyID09PSB0aGlzKSB7XG4gICAgICAgIHRoaXMuX2JyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPSAwO1xuICAgICAgICB0aGlzLl9pbnZva2VPbkNhbmNlbCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9icmFuY2hIYXNDYW5jZWxsZWQoKTtcbiAgICAgICAgaWYgKHRoaXMuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnZva2VPbkNhbmNlbCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJyYW5jaGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCgpKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2lzQ2FuY2VsbGFibGUoKSkgcmV0dXJuO1xuICAgIHRoaXMuX3NldENhbmNlbGxlZCgpO1xuICAgIGFzeW5jLmludm9rZSh0aGlzLl9jYW5jZWxQcm9taXNlcywgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxQcm9taXNlcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9sZW5ndGgoKSA+IDApIHRoaXMuX3NldHRsZVByb21pc2VzKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNDYW5jZWxsYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmlzUGVuZGluZygpICYmICF0aGlzLl9pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNDYW5jZWxsYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmlzUGVuZGluZygpICYmICF0aGlzLmlzQ2FuY2VsbGVkKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZG9JbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKG9uQ2FuY2VsQ2FsbGJhY2ssIGludGVybmFsT25seSkge1xuICAgIGlmICh1dGlsLmlzQXJyYXkob25DYW5jZWxDYWxsYmFjaykpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbkNhbmNlbENhbGxiYWNrLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl9kb0ludm9rZU9uQ2FuY2VsKG9uQ2FuY2VsQ2FsbGJhY2tbaV0sIGludGVybmFsT25seSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9uQ2FuY2VsQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIG9uQ2FuY2VsQ2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaWYgKCFpbnRlcm5hbE9ubHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHRyeUNhdGNoKG9uQ2FuY2VsQ2FsbGJhY2spLmNhbGwodGhpcy5fYm91bmRWYWx1ZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZShlLmUpO1xuICAgICAgICAgICAgICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb25DYW5jZWxDYWxsYmFjay5fcmVzdWx0Q2FuY2VsbGVkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZU9uQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uQ2FuY2VsQ2FsbGJhY2sgPSB0aGlzLl9vbkNhbmNlbCgpO1xuICAgIHRoaXMuX3Vuc2V0T25DYW5jZWwoKTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fZG9JbnZva2VPbkNhbmNlbCwgdGhpcywgb25DYW5jZWxDYWxsYmFjayk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faW52b2tlSW50ZXJuYWxPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbCh0aGlzLl9vbkNhbmNlbCgpLCB0cnVlKTtcbiAgICAgICAgdGhpcy5fdW5zZXRPbkNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5FWFRfRklMVEVSKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZ2V0S2V5cyA9IF9kZXJlcV8oXCIuL2VzNVwiKS5rZXlzO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIGNhdGNoRmlsdGVyKGluc3RhbmNlcywgY2IsIHByb21pc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgYm91bmRUbyA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJlZGljYXRlTG9vcDogZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gaW5zdGFuY2VzW2ldO1xuXG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gRXJyb3IgfHxcbiAgICAgICAgICAgICAgICAoaXRlbSAhPSBudWxsICYmIGl0ZW0ucHJvdG90eXBlIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlc1ByZWRpY2F0ZSA9IHRyeUNhdGNoKGl0ZW0pLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNQcmVkaWNhdGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzUHJlZGljYXRlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlc1ByZWRpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh1dGlsLmlzT2JqZWN0KGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBnZXRLZXlzKGl0ZW0pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1ba2V5XSAhPSBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHByZWRpY2F0ZUxvb3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBORVhUX0ZJTFRFUjtcbiAgICB9O1xufVxuXG5yZXR1cm4gY2F0Y2hGaWx0ZXI7XG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciBsb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbnZhciBjb250ZXh0U3RhY2sgPSBbXTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gZnVuY3Rpb24oKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IGZ1bmN0aW9uKCkge3JldHVybiBudWxsO307XG5Qcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIENvbnRleHQoKSB7XG4gICAgdGhpcy5fdHJhY2UgPSBuZXcgQ29udGV4dC5DYXB0dXJlZFRyYWNlKHBlZWtDb250ZXh0KCkpO1xufVxuQ29udGV4dC5wcm90b3R5cGUuX3B1c2hDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl90cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3RyYWNlLl9wcm9taXNlQ3JlYXRlZCA9IG51bGw7XG4gICAgICAgIGNvbnRleHRTdGFjay5wdXNoKHRoaXMuX3RyYWNlKTtcbiAgICB9XG59O1xuXG5Db250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgdHJhY2UgPSBjb250ZXh0U3RhY2sucG9wKCk7XG4gICAgICAgIHZhciByZXQgPSB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIHRyYWNlLl9wcm9taXNlQ3JlYXRlZCA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlQ29udGV4dCgpIHtcbiAgICBpZiAobG9uZ1N0YWNrVHJhY2VzKSByZXR1cm4gbmV3IENvbnRleHQoKTtcbn1cblxuZnVuY3Rpb24gcGVla0NvbnRleHQoKSB7XG4gICAgdmFyIGxhc3RJbmRleCA9IGNvbnRleHRTdGFjay5sZW5ndGggLSAxO1xuICAgIGlmIChsYXN0SW5kZXggPj0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dFN0YWNrW2xhc3RJbmRleF07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5Db250ZXh0LkNhcHR1cmVkVHJhY2UgPSBudWxsO1xuQ29udGV4dC5jcmVhdGUgPSBjcmVhdGVDb250ZXh0O1xuQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7fTtcbkNvbnRleHQuYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgUHJvbWlzZV9wdXNoQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wb3BDb250ZXh0ID0gUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfUGVla0NvbnRleHQgPSBQcm9taXNlLl9wZWVrQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZDtcbiAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3B1c2hDb250ZXh0ID0gUHJvbWlzZV9wdXNoQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBQcm9taXNlX3BvcENvbnRleHQ7XG4gICAgICAgIFByb21pc2UuX3BlZWtDb250ZXh0ID0gUHJvbWlzZV9QZWVrQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gUHJvbWlzZV9wZWVrQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gUHJvbWlzZV9wcm9taXNlQ3JlYXRlZDtcbiAgICAgICAgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG4gICAgfTtcbiAgICBsb25nU3RhY2tUcmFjZXMgPSB0cnVlO1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dDtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIFByb21pc2UuX3BlZWtDb250ZXh0ID0gUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gcGVla0NvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjdHggPSB0aGlzLl9wZWVrQ29udGV4dCgpO1xuICAgICAgICBpZiAoY3R4ICYmIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPT0gbnVsbCkgY3R4Ll9wcm9taXNlQ3JlYXRlZCA9IHRoaXM7XG4gICAgfTtcbn07XG5yZXR1cm4gQ29udGV4dDtcbn07XG5cbn0se31dLDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIENvbnRleHQpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgYXN5bmMgPSBQcm9taXNlLl9hc3luYztcbnZhciBXYXJuaW5nID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLldhcm5pbmc7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuQXR0YWNoVHJhY2UgPSB1dGlsLmNhbkF0dGFjaFRyYWNlO1xudmFyIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQ7XG52YXIgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb247XG52YXIgYmx1ZWJpcmRGcmFtZVBhdHRlcm4gPVxuICAgIC9bXFxcXFxcL11ibHVlYmlyZFtcXFxcXFwvXWpzW1xcXFxcXC9dKHJlbGVhc2V8ZGVidWd8aW5zdHJ1bWVudGVkKS87XG52YXIgbm9kZUZyYW1lUGF0dGVybiA9IC9cXCgoPzp0aW1lcnNcXC5qcyk6XFxkKzpcXGQrXFwpLztcbnZhciBwYXJzZUxpbmVQYXR0ZXJuID0gL1tcXC88XFwoXSguKz8pOihcXGQrKTooXFxkKylcXCk/XFxzKiQvO1xudmFyIHN0YWNrRnJhbWVQYXR0ZXJuID0gbnVsbDtcbnZhciBmb3JtYXRTdGFjayA9IG51bGw7XG52YXIgaW5kZW50U3RhY2tGcmFtZXMgPSBmYWxzZTtcbnZhciBwcmludFdhcm5pbmc7XG52YXIgZGVidWdnaW5nID0gISEodXRpbC5lbnYoXCJCTFVFQklSRF9ERUJVR1wiKSAhPSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAodHJ1ZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuZW52KFwiQkxVRUJJUkRfREVCVUdcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmVudihcIk5PREVfRU5WXCIpID09PSBcImRldmVsb3BtZW50XCIpKTtcblxudmFyIHdhcm5pbmdzID0gISEodXRpbC5lbnYoXCJCTFVFQklSRF9XQVJOSU5HU1wiKSAhPSAwICYmXG4gICAgKGRlYnVnZ2luZyB8fCB1dGlsLmVudihcIkJMVUVCSVJEX1dBUk5JTkdTXCIpKSk7XG5cbnZhciBsb25nU3RhY2tUcmFjZXMgPSAhISh1dGlsLmVudihcIkJMVUVCSVJEX0xPTkdfU1RBQ0tfVFJBQ0VTXCIpICE9IDAgJiZcbiAgICAoZGVidWdnaW5nIHx8IHV0aWwuZW52KFwiQkxVRUJJUkRfTE9OR19TVEFDS19UUkFDRVNcIikpKTtcblxudmFyIHdGb3Jnb3R0ZW5SZXR1cm4gPSB1dGlsLmVudihcIkJMVUVCSVJEX1dfRk9SR09UVEVOX1JFVFVSTlwiKSAhPSAwICYmXG4gICAgKHdhcm5pbmdzIHx8ICEhdXRpbC5lbnYoXCJCTFVFQklSRF9XX0ZPUkdPVFRFTl9SRVRVUk5cIikpO1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdGFyZ2V0Ll9iaXRGaWVsZCA9ICgodGFyZ2V0Ll9iaXRGaWVsZCAmICh+MTA0ODU3NikpIHxcbiAgICAgICAgICAgICAgICAgICAgICA1MjQyODgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoKHRoaXMuX2JpdEZpZWxkICYgNTI0Mjg4KSAhPT0gMCkgcmV0dXJuO1xuICAgIHRoaXMuX3NldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgYXN5bmMuaW52b2tlTGF0ZXIodGhpcy5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbklzSGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmaXJlUmVqZWN0aW9uRXZlbnQoXCJyZWplY3Rpb25IYW5kbGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCwgdW5kZWZpbmVkLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRSZXR1cm5lZE5vblVuZGVmaW5lZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyNjg0MzU0NTY7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmV0dXJuZWROb25VbmRlZmluZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMjY4NDM1NDU2KSAhPT0gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVqZWN0aW9uVW5oYW5kbGVkKCkpIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xuICAgICAgICB0aGlzLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkKCk7XG4gICAgICAgIGZpcmVSZWplY3Rpb25FdmVudChcInVuaGFuZGxlZFJlamVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiwgcmVhc29uLCB0aGlzKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjYyMTQ0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4yNjIxNDQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzVW5oYW5kbGVkUmVqZWN0aW9uTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDI2MjE0NCkgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJlamVjdGlvbklzVW5oYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMDQ4NTc2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MTA0ODU3Nik7XG4gICAgaWYgKHRoaXMuX2lzVW5oYW5kbGVkUmVqZWN0aW9uTm90aWZpZWQoKSkge1xuICAgICAgICB0aGlzLl91bnNldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQoKTtcbiAgICAgICAgdGhpcy5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uSXNIYW5kbGVkKCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzUmVqZWN0aW9uVW5oYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMDQ4NTc2KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fd2FybiA9IGZ1bmN0aW9uKG1lc3NhZ2UsIHNob3VsZFVzZU93blRyYWNlLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UgfHwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLm9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24gPVxuICAgICAgICB0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IChkb21haW4gPT09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5vblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCA9XG4gICAgICAgIHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiID8gKGRvbWFpbiA9PT0gbnVsbCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuIDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgZm4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG59O1xuXG52YXIgZGlzYWJsZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLmxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXN5bmMuaGF2ZUl0ZW1zUXVldWVkKCkgJiYgIWNvbmZpZy5sb25nU3RhY2tUcmFjZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IGVuYWJsZSBsb25nIHN0YWNrIHRyYWNlcyBhZnRlciBwcm9taXNlcyBoYXZlIGJlZW4gY3JlYXRlZFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIGlmICghY29uZmlnLmxvbmdTdGFja1RyYWNlcyAmJiBsb25nU3RhY2tUcmFjZXNJc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIHZhciBQcm9taXNlX2NhcHR1cmVTdGFja1RyYWNlID0gUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICB2YXIgUHJvbWlzZV9hdHRhY2hFeHRyYVRyYWNlID0gUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgPSB0cnVlO1xuICAgICAgICBkaXNhYmxlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYXN5bmMuaGF2ZUl0ZW1zUXVldWVkKCkgJiYgIWNvbmZpZy5sb25nU3RhY2tUcmFjZXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgZW5hYmxlIGxvbmcgc3RhY2sgdHJhY2VzIGFmdGVyIHByb21pc2VzIGhhdmUgYmVlbiBjcmVhdGVkXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IFByb21pc2VfY2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZSA9IFByb21pc2VfYXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgICAgIENvbnRleHQuZGVhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICAgICAgYXN5bmMuZW5hYmxlVHJhbXBvbGluZSgpO1xuICAgICAgICAgICAgY29uZmlnLmxvbmdTdGFja1RyYWNlcyA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2UgPSBsb25nU3RhY2tUcmFjZXNDYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBsb25nU3RhY2tUcmFjZXNBdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICBDb250ZXh0LmFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzKCk7XG4gICAgICAgIGFzeW5jLmRpc2FibGVUcmFtcG9saW5lSWZOZWNlc3NhcnkoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLmhhc0xvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY29uZmlnLmxvbmdTdGFja1RyYWNlcyAmJiBsb25nU3RhY2tUcmFjZXNJc1N1cHBvcnRlZCgpO1xufTtcblxudmFyIGZpcmVEb21FdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIEN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZG9tRXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgRXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgICAgICB1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lLCBldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBkb21FdmVudCA9IG5ldyBFdmVudChuYW1lLnRvTG93ZXJDYXNlKCksIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRvbUV2ZW50LmRldGFpbCA9IGV2ZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudChcInRlc3Rpbmd0aGVldmVudFwiLCBmYWxzZSwgdHJ1ZSwge30pO1xuICAgICAgICAgICAgdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgICAgIGRvbUV2ZW50LmluaXRDdXN0b21FdmVudChuYW1lLnRvTG93ZXJDYXNlKCksIGZhbHNlLCB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBldmVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGRvbUV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59KSgpO1xuXG52YXIgZmlyZUdsb2JhbEV2ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIGlmICh1dGlsLmlzTm9kZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbWl0LmFwcGx5KHByb2Nlc3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF1dGlsLmdsb2JhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gXCJvblwiICsgbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IHV0aWwuZ2xvYmFsW21ldGhvZE5hbWVdO1xuICAgICAgICAgICAgaWYgKCFtZXRob2QpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIG1ldGhvZC5hcHBseSh1dGlsLmdsb2JhbCwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0KG5hbWUsIHByb21pc2UpIHtcbiAgICByZXR1cm4ge3Byb21pc2U6IHByb21pc2V9O1xufVxuXG52YXIgZXZlbnRUb09iamVjdEdlbmVyYXRvciA9IHtcbiAgICBwcm9taXNlQ3JlYXRlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZUZ1bGZpbGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlamVjdGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlUmVzb2x2ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VDYW5jZWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VDaGFpbmVkOiBmdW5jdGlvbihuYW1lLCBwcm9taXNlLCBjaGlsZCkge1xuICAgICAgICByZXR1cm4ge3Byb21pc2U6IHByb21pc2UsIGNoaWxkOiBjaGlsZH07XG4gICAgfSxcbiAgICB3YXJuaW5nOiBmdW5jdGlvbihuYW1lLCB3YXJuaW5nKSB7XG4gICAgICAgIHJldHVybiB7d2FybmluZzogd2FybmluZ307XG4gICAgfSxcbiAgICB1bmhhbmRsZWRSZWplY3Rpb246IGZ1bmN0aW9uIChuYW1lLCByZWFzb24sIHByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHtyZWFzb246IHJlYXNvbiwgcHJvbWlzZTogcHJvbWlzZX07XG4gICAgfSxcbiAgICByZWplY3Rpb25IYW5kbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdFxufTtcblxudmFyIGFjdGl2ZUZpcmVFdmVudCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGdsb2JhbEV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBnbG9iYWxFdmVudEZpcmVkID0gZmlyZUdsb2JhbEV2ZW50LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBnbG9iYWxFdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZG9tRXZlbnRGaXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGRvbUV2ZW50RmlyZWQgPSBmaXJlRG9tRXZlbnQobmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRUb09iamVjdEdlbmVyYXRvcltuYW1lXS5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIoZSk7XG4gICAgICAgIGRvbUV2ZW50RmlyZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBkb21FdmVudEZpcmVkIHx8IGdsb2JhbEV2ZW50RmlyZWQ7XG59O1xuXG5Qcm9taXNlLmNvbmZpZyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBvcHRzID0gT2JqZWN0KG9wdHMpO1xuICAgIGlmIChcImxvbmdTdGFja1RyYWNlc1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgICAgICBQcm9taXNlLmxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9IGVsc2UgaWYgKCFvcHRzLmxvbmdTdGFja1RyYWNlcyAmJiBQcm9taXNlLmhhc0xvbmdTdGFja1RyYWNlcygpKSB7XG4gICAgICAgICAgICBkaXNhYmxlTG9uZ1N0YWNrVHJhY2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKFwid2FybmluZ3NcIiBpbiBvcHRzKSB7XG4gICAgICAgIHZhciB3YXJuaW5nc09wdGlvbiA9IG9wdHMud2FybmluZ3M7XG4gICAgICAgIGNvbmZpZy53YXJuaW5ncyA9ICEhd2FybmluZ3NPcHRpb247XG4gICAgICAgIHdGb3Jnb3R0ZW5SZXR1cm4gPSBjb25maWcud2FybmluZ3M7XG5cbiAgICAgICAgaWYgKHV0aWwuaXNPYmplY3Qod2FybmluZ3NPcHRpb24pKSB7XG4gICAgICAgICAgICBpZiAoXCJ3Rm9yZ290dGVuUmV0dXJuXCIgaW4gd2FybmluZ3NPcHRpb24pIHtcbiAgICAgICAgICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gISF3YXJuaW5nc09wdGlvbi53Rm9yZ290dGVuUmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcImNhbmNlbGxhdGlvblwiIGluIG9wdHMgJiYgb3B0cy5jYW5jZWxsYXRpb24gJiYgIWNvbmZpZy5jYW5jZWxsYXRpb24pIHtcbiAgICAgICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJjYW5ub3QgZW5hYmxlIGNhbmNlbGxhdGlvbiBhZnRlciBwcm9taXNlcyBhcmUgaW4gdXNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPVxuICAgICAgICAgICAgY2FuY2VsbGF0aW9uQ2xlYXJDYW5jZWxsYXRpb25EYXRhO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGNhbmNlbGxhdGlvblByb3BhZ2F0ZUZyb207XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9vbkNhbmNlbCA9IGNhbmNlbGxhdGlvbk9uQ2FuY2VsO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fc2V0T25DYW5jZWwgPSBjYW5jZWxsYXRpb25TZXRPbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkF0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fZXhlY3V0ZSA9IGNhbmNlbGxhdGlvbkV4ZWN1dGU7XG4gICAgICAgIHByb3BhZ2F0ZUZyb21GdW5jdGlvbiA9IGNhbmNlbGxhdGlvblByb3BhZ2F0ZUZyb207XG4gICAgICAgIGNvbmZpZy5jYW5jZWxsYXRpb24gPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoXCJtb25pdG9yaW5nXCIgaW4gb3B0cykge1xuICAgICAgICBpZiAob3B0cy5tb25pdG9yaW5nICYmICFjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSB0cnVlO1xuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2ZpcmVFdmVudCA9IGFjdGl2ZUZpcmVFdmVudDtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5tb25pdG9yaW5nICYmIGNvbmZpZy5tb25pdG9yaW5nKSB7XG4gICAgICAgICAgICBjb25maWcubW9uaXRvcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2ZpcmVFdmVudCA9IGRlZmF1bHRGaXJlRXZlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2U7XG59O1xuXG5mdW5jdGlvbiBkZWZhdWx0RmlyZUV2ZW50KCkgeyByZXR1cm4gZmFsc2U7IH1cblxuUHJvbWlzZS5wcm90b3R5cGUuX2ZpcmVFdmVudCA9IGRlZmF1bHRGaXJlRXZlbnQ7XG5Qcm9taXNlLnByb3RvdHlwZS5fZXhlY3V0ZSA9IGZ1bmN0aW9uKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB0cnkge1xuICAgICAgICBleGVjdXRvcihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufTtcblByb21pc2UucHJvdG90eXBlLl9vbkNhbmNlbCA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gZnVuY3Rpb24gKGhhbmRsZXIpIHsgOyB9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24ob25DYW5jZWwpIHtcbiAgICA7XG59O1xuUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gZnVuY3Rpb24gKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2NsZWFyQ2FuY2VsbGF0aW9uRGF0YSA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGZ1bmN0aW9uIChwYXJlbnQsIGZsYWdzKSB7XG4gICAgO1xuICAgIDtcbn07XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvbkV4ZWN1dGUoZXhlY3V0b3IsIHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB0cnkge1xuICAgICAgICBleGVjdXRvcihyZXNvbHZlLCByZWplY3QsIGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQ2FuY2VsICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwib25DYW5jZWwgbXVzdCBiZSBhIGZ1bmN0aW9uLCBnb3Q6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwudG9TdHJpbmcob25DYW5jZWwpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrKG9uQ2FuY2VsKTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvbkF0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrKG9uQ2FuY2VsKSB7XG4gICAgaWYgKCF0aGlzLl9pc0NhbmNlbGxhYmxlKCkpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIHByZXZpb3VzT25DYW5jZWwgPSB0aGlzLl9vbkNhbmNlbCgpO1xuICAgIGlmIChwcmV2aW91c09uQ2FuY2VsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNBcnJheShwcmV2aW91c09uQ2FuY2VsKSkge1xuICAgICAgICAgICAgcHJldmlvdXNPbkNhbmNlbC5wdXNoKG9uQ2FuY2VsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKFtwcmV2aW91c09uQ2FuY2VsLCBvbkNhbmNlbF0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2V0T25DYW5jZWwob25DYW5jZWwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uT25DYW5jZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uQ2FuY2VsRmllbGQ7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvblNldE9uQ2FuY2VsKG9uQ2FuY2VsKSB7XG4gICAgdGhpcy5fb25DYW5jZWxGaWVsZCA9IG9uQ2FuY2VsO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25DbGVhckNhbmNlbGxhdGlvbkRhdGEoKSB7XG4gICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvblByb3BhZ2F0ZUZyb20ocGFyZW50LCBmbGFncykge1xuICAgIGlmICgoZmxhZ3MgJiAxKSAhPT0gMCkge1xuICAgICAgICB0aGlzLl9jYW5jZWxsYXRpb25QYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHZhciBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsO1xuICAgICAgICBpZiAoYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQuX2JyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPSBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsICsgMTtcbiAgICB9XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJpbmRpbmdQcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMikgIT09IDAgJiYgcGFyZW50Ll9pc0JvdW5kKCkpIHtcbiAgICAgICAgdGhpcy5fc2V0Qm91bmRUbyhwYXJlbnQuX2JvdW5kVG8pO1xuICAgIH1cbn1cbnZhciBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBiaW5kaW5nUHJvcGFnYXRlRnJvbTtcblxuZnVuY3Rpb24gYm91bmRWYWx1ZUZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0aGlzLl9ib3VuZFRvO1xuICAgIGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHJldC5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldC52YWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0NhcHR1cmVTdGFja1RyYWNlKCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENhcHR1cmVkVHJhY2UodGhpcy5fcGVla0NvbnRleHQoKSk7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0F0dGFjaEV4dHJhVHJhY2UoZXJyb3IsIGlnbm9yZVNlbGYpIHtcbiAgICBpZiAoY2FuQXR0YWNoVHJhY2UoZXJyb3IpKSB7XG4gICAgICAgIHZhciB0cmFjZSA9IHRoaXMuX3RyYWNlO1xuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlnbm9yZVNlbGYpIHRyYWNlID0gdHJhY2UuX3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdHJhY2UuYXR0YWNoRXh0cmFUcmFjZShlcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVycm9yLl9fc3RhY2tDbGVhbmVkX18pIHtcbiAgICAgICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcInN0YWNrXCIsXG4gICAgICAgICAgICAgICAgcGFyc2VkLm1lc3NhZ2UgKyBcIlxcblwiICsgcGFyc2VkLnN0YWNrLmpvaW4oXCJcXG5cIikpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJfX3N0YWNrQ2xlYW5lZF9fXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0ZvcmdvdHRlblJldHVybnMocmV0dXJuVmFsdWUsIHByb21pc2VDcmVhdGVkLCBuYW1lLCBwcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCkge1xuICAgIGlmIChyZXR1cm5WYWx1ZSA9PT0gdW5kZWZpbmVkICYmIHByb21pc2VDcmVhdGVkICE9PSBudWxsICYmXG4gICAgICAgIHdGb3Jnb3R0ZW5SZXR1cm4pIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkICYmIHBhcmVudC5fcmV0dXJuZWROb25VbmRlZmluZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoKHByb21pc2UuX2JpdEZpZWxkICYgNjU1MzUpID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgaWYgKG5hbWUpIG5hbWUgPSBuYW1lICsgXCIgXCI7XG4gICAgICAgIHZhciBoYW5kbGVyTGluZSA9IFwiXCI7XG4gICAgICAgIHZhciBjcmVhdG9yTGluZSA9IFwiXCI7XG4gICAgICAgIGlmIChwcm9taXNlQ3JlYXRlZC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHZhciB0cmFjZUxpbmVzID0gcHJvbWlzZUNyZWF0ZWQuX3RyYWNlLnN0YWNrLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gY2xlYW5TdGFjayh0cmFjZUxpbmVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFjay5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gc3RhY2tbaV07XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlRnJhbWVQYXR0ZXJuLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmVNYXRjaGVzID0gbGluZS5tYXRjaChwYXJzZUxpbmVQYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVNYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyTGluZSAgPSBcImF0IFwiICsgbGluZU1hdGNoZXNbMV0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiOlwiICsgbGluZU1hdGNoZXNbMl0gKyBcIjpcIiArIGxpbmVNYXRjaGVzWzNdICsgXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdFVzZXJMaW5lID0gc3RhY2tbMF07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFjZUxpbmVzLmxlbmd0aDsgKytpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNlTGluZXNbaV0gPT09IGZpcnN0VXNlckxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0b3JMaW5lID0gXCJcXG5cIiArIHRyYWNlTGluZXNbaSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgbXNnID0gXCJhIHByb21pc2Ugd2FzIGNyZWF0ZWQgaW4gYSBcIiArIG5hbWUgK1xuICAgICAgICAgICAgXCJoYW5kbGVyIFwiICsgaGFuZGxlckxpbmUgKyBcImJ1dCB3YXMgbm90IHJldHVybmVkIGZyb20gaXQsIFwiICtcbiAgICAgICAgICAgIFwic2VlIGh0dHA6Ly9nb28uZ2wvclJxTVV3XCIgK1xuICAgICAgICAgICAgY3JlYXRvckxpbmU7XG4gICAgICAgIHByb21pc2UuX3dhcm4obXNnLCB0cnVlLCBwcm9taXNlQ3JlYXRlZCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZXByZWNhdGVkKG5hbWUsIHJlcGxhY2VtZW50KSB7XG4gICAgdmFyIG1lc3NhZ2UgPSBuYW1lICtcbiAgICAgICAgXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uXCI7XG4gICAgaWYgKHJlcGxhY2VtZW50KSBtZXNzYWdlICs9IFwiIFVzZSBcIiArIHJlcGxhY2VtZW50ICsgXCIgaW5zdGVhZC5cIjtcbiAgICByZXR1cm4gd2FybihtZXNzYWdlKTtcbn1cblxuZnVuY3Rpb24gd2FybihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSkge1xuICAgIGlmICghY29uZmlnLndhcm5pbmdzKSByZXR1cm47XG4gICAgdmFyIHdhcm5pbmcgPSBuZXcgV2FybmluZyhtZXNzYWdlKTtcbiAgICB2YXIgY3R4O1xuICAgIGlmIChzaG91bGRVc2VPd25UcmFjZSkge1xuICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLmxvbmdTdGFja1RyYWNlcyAmJiAoY3R4ID0gUHJvbWlzZS5fcGVla0NvbnRleHQoKSkpIHtcbiAgICAgICAgY3R4LmF0dGFjaEV4dHJhVHJhY2Uod2FybmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlU3RhY2tBbmRNZXNzYWdlKHdhcm5pbmcpO1xuICAgICAgICB3YXJuaW5nLnN0YWNrID0gcGFyc2VkLm1lc3NhZ2UgKyBcIlxcblwiICsgcGFyc2VkLnN0YWNrLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuXG4gICAgaWYgKCFhY3RpdmVGaXJlRXZlbnQoXCJ3YXJuaW5nXCIsIHdhcm5pbmcpKSB7XG4gICAgICAgIGZvcm1hdEFuZExvZ0Vycm9yKHdhcm5pbmcsIFwiXCIsIHRydWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVjb25zdHJ1Y3RTdGFjayhtZXNzYWdlLCBzdGFja3MpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrcy5sZW5ndGggLSAxOyArK2kpIHtcbiAgICAgICAgc3RhY2tzW2ldLnB1c2goXCJGcm9tIHByZXZpb3VzIGV2ZW50OlwiKTtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIGlmIChpIDwgc3RhY2tzLmxlbmd0aCkge1xuICAgICAgICBzdGFja3NbaV0gPSBzdGFja3NbaV0uam9pbihcIlxcblwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2UgKyBcIlxcblwiICsgc3RhY2tzLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUR1cGxpY2F0ZU9yRW1wdHlKdW1wcyhzdGFja3MpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoc3RhY2tzW2ldLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgKChpICsgMSA8IHN0YWNrcy5sZW5ndGgpICYmIHN0YWNrc1tpXVswXSA9PT0gc3RhY2tzW2krMV1bMF0pKSB7XG4gICAgICAgICAgICBzdGFja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVDb21tb25Sb290cyhzdGFja3MpIHtcbiAgICB2YXIgY3VycmVudCA9IHN0YWNrc1swXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHN0YWNrcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcHJldiA9IHN0YWNrc1tpXTtcbiAgICAgICAgdmFyIGN1cnJlbnRMYXN0SW5kZXggPSBjdXJyZW50Lmxlbmd0aCAtIDE7XG4gICAgICAgIHZhciBjdXJyZW50TGFzdExpbmUgPSBjdXJyZW50W2N1cnJlbnRMYXN0SW5kZXhdO1xuICAgICAgICB2YXIgY29tbW9uUm9vdE1lZXRQb2ludCA9IC0xO1xuXG4gICAgICAgIGZvciAodmFyIGogPSBwcmV2Lmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICBpZiAocHJldltqXSA9PT0gY3VycmVudExhc3RMaW5lKSB7XG4gICAgICAgICAgICAgICAgY29tbW9uUm9vdE1lZXRQb2ludCA9IGo7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBqID0gY29tbW9uUm9vdE1lZXRQb2ludDsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgIHZhciBsaW5lID0gcHJldltqXTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50W2N1cnJlbnRMYXN0SW5kZXhdID09PSBsaW5lKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5wb3AoKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGFzdEluZGV4LS07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBwcmV2O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xlYW5TdGFjayhzdGFjaykge1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBsaW5lID0gc3RhY2tbaV07XG4gICAgICAgIHZhciBpc1RyYWNlTGluZSA9IFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fFxuICAgICAgICAgICAgc3RhY2tGcmFtZVBhdHRlcm4udGVzdChsaW5lKTtcbiAgICAgICAgdmFyIGlzSW50ZXJuYWxGcmFtZSA9IGlzVHJhY2VMaW5lICYmIHNob3VsZElnbm9yZShsaW5lKTtcbiAgICAgICAgaWYgKGlzVHJhY2VMaW5lICYmICFpc0ludGVybmFsRnJhbWUpIHtcbiAgICAgICAgICAgIGlmIChpbmRlbnRTdGFja0ZyYW1lcyAmJiBsaW5lLmNoYXJBdCgwKSAhPT0gXCIgXCIpIHtcbiAgICAgICAgICAgICAgICBsaW5lID0gXCIgICAgXCIgKyBsaW5lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0LnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gc3RhY2tGcmFtZXNBc0FycmF5KGVycm9yKSB7XG4gICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2sucmVwbGFjZSgvXFxzKyQvZywgXCJcIikuc3BsaXQoXCJcXG5cIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICBpZiAoXCIgICAgKE5vIHN0YWNrIHRyYWNlKVwiID09PSBsaW5lIHx8IHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpID4gMCAmJiBlcnJvci5uYW1lICE9IFwiU3ludGF4RXJyb3JcIikge1xuICAgICAgICBzdGFjayA9IHN0YWNrLnNsaWNlKGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhY2s7XG59XG5cbmZ1bmN0aW9uIHBhcnNlU3RhY2tBbmRNZXNzYWdlKGVycm9yKSB7XG4gICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgdmFyIG1lc3NhZ2UgPSBlcnJvci50b1N0cmluZygpO1xuICAgIHN0YWNrID0gdHlwZW9mIHN0YWNrID09PSBcInN0cmluZ1wiICYmIHN0YWNrLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICA/IHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikgOiBbXCIgICAgKE5vIHN0YWNrIHRyYWNlKVwiXTtcbiAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICBzdGFjazogZXJyb3IubmFtZSA9PSBcIlN5bnRheEVycm9yXCIgPyBzdGFjayA6IGNsZWFuU3RhY2soc3RhY2spXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QW5kTG9nRXJyb3IoZXJyb3IsIHRpdGxlLCBpc1NvZnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGVycm9yKSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGl0bGUgKyBmb3JtYXRTdGFjayhzdGFjaywgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgU3RyaW5nKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByaW50V2FybmluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcmludFdhcm5pbmcobWVzc2FnZSwgaXNTb2Z0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUubG9nID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlyZVJlamVjdGlvbkV2ZW50KG5hbWUsIGxvY2FsSGFuZGxlciwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgdmFyIGxvY2FsRXZlbnRGaXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgbG9jYWxIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxvY2FsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJyZWplY3Rpb25IYW5kbGVkXCIpIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsSGFuZGxlcihyZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBcInVuaGFuZGxlZFJlamVjdGlvblwiKSB7XG4gICAgICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHJlYXNvbiwgcHJvbWlzZSkgJiYgIWxvY2FsRXZlbnRGaXJlZCkge1xuICAgICAgICAgICAgZm9ybWF0QW5kTG9nRXJyb3IocmVhc29uLCBcIlVuaGFuZGxlZCByZWplY3Rpb24gXCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHByb21pc2UpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0Tm9uRXJyb3Iob2JqKSB7XG4gICAgdmFyIHN0cjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHN0ciA9IFwiW2Z1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIChvYmoubmFtZSB8fCBcImFub255bW91c1wiKSArXG4gICAgICAgICAgICBcIl1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBvYmogJiYgdHlwZW9mIG9iai50b1N0cmluZyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IG9iai50b1N0cmluZygpIDogdXRpbC50b1N0cmluZyhvYmopO1xuICAgICAgICB2YXIgcnVzZWxlc3NUb1N0cmluZyA9IC9cXFtvYmplY3QgW2EtekEtWjAtOSRfXStcXF0vO1xuICAgICAgICBpZiAocnVzZWxlc3NUb1N0cmluZy50ZXN0KHN0cikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICAgICAgICAgICAgc3RyID0gbmV3U3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHN0ciA9IFwiKGVtcHR5IGFycmF5KVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXCIoPFwiICsgc25pcChzdHIpICsgXCI+LCBubyBzdGFjayB0cmFjZSlcIik7XG59XG5cbmZ1bmN0aW9uIHNuaXAoc3RyKSB7XG4gICAgdmFyIG1heENoYXJzID0gNDE7XG4gICAgaWYgKHN0ci5sZW5ndGggPCBtYXhDaGFycykge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXhDaGFycyAtIDMpICsgXCIuLi5cIjtcbn1cblxuZnVuY3Rpb24gbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG52YXIgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbnZhciBwYXJzZUxpbmVJbmZvUmVnZXggPSAvW1xcLzxcXChdKFteOlxcL10rKTooXFxkKyk6KD86XFxkKylcXCk/XFxzKiQvO1xuZnVuY3Rpb24gcGFyc2VMaW5lSW5mbyhsaW5lKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBsaW5lLm1hdGNoKHBhcnNlTGluZUluZm9SZWdleCk7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVOYW1lOiBtYXRjaGVzWzFdLFxuICAgICAgICAgICAgbGluZTogcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRCb3VuZHMoZmlyc3RMaW5lRXJyb3IsIGxhc3RMaW5lRXJyb3IpIHtcbiAgICBpZiAoIWxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHJldHVybjtcbiAgICB2YXIgZmlyc3RTdGFja0xpbmVzID0gZmlyc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGxhc3RTdGFja0xpbmVzID0gbGFzdExpbmVFcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZmlyc3RJbmRleCA9IC0xO1xuICAgIHZhciBsYXN0SW5kZXggPSAtMTtcbiAgICB2YXIgZmlyc3RGaWxlTmFtZTtcbiAgICB2YXIgbGFzdEZpbGVOYW1lO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGZpcnN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpcnN0RmlsZU5hbWUgPSByZXN1bHQuZmlsZU5hbWU7XG4gICAgICAgICAgICBmaXJzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGxhc3RTdGFja0xpbmVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgbGFzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgbGFzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RJbmRleCA8IDAgfHwgbGFzdEluZGV4IDwgMCB8fCAhZmlyc3RGaWxlTmFtZSB8fCAhbGFzdEZpbGVOYW1lIHx8XG4gICAgICAgIGZpcnN0RmlsZU5hbWUgIT09IGxhc3RGaWxlTmFtZSB8fCBmaXJzdEluZGV4ID49IGxhc3RJbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAoYmx1ZWJpcmRGcmFtZVBhdHRlcm4udGVzdChsaW5lKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VMaW5lSW5mbyhsaW5lKTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmZpbGVOYW1lID09PSBmaXJzdEZpbGVOYW1lICYmXG4gICAgICAgICAgICAgICAgKGZpcnN0SW5kZXggPD0gaW5mby5saW5lICYmIGluZm8ubGluZSA8PSBsYXN0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIENhcHR1cmVkVHJhY2UocGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuX3Byb21pc2VzQ3JlYXRlZCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aCA9IDEgKyAocGFyZW50ID09PSB1bmRlZmluZWQgPyAwIDogcGFyZW50Ll9sZW5ndGgpO1xuICAgIGNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIENhcHR1cmVkVHJhY2UpO1xuICAgIGlmIChsZW5ndGggPiAzMikgdGhpcy51bmN5Y2xlKCk7XG59XG51dGlsLmluaGVyaXRzKENhcHR1cmVkVHJhY2UsIEVycm9yKTtcbkNvbnRleHQuQ2FwdHVyZWRUcmFjZSA9IENhcHR1cmVkVHJhY2U7XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLnVuY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPCAyKSByZXR1cm47XG4gICAgdmFyIG5vZGVzID0gW107XG4gICAgdmFyIHN0YWNrVG9JbmRleCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIG5vZGUgPSB0aGlzOyBub2RlICE9PSB1bmRlZmluZWQ7ICsraSkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5fcGFyZW50O1xuICAgIH1cbiAgICBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSBpO1xuICAgIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgc3RhY2sgPSBub2Rlc1tpXS5zdGFjaztcbiAgICAgICAgaWYgKHN0YWNrVG9JbmRleFtzdGFja10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhY2tUb0luZGV4W3N0YWNrXSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YWNrVG9JbmRleFtjdXJyZW50U3RhY2tdO1xuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVzW2luZGV4IC0gMV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZXNbaV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG5vZGVzW2ldLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgdmFyIGN5Y2xlRWRnZU5vZGUgPSBpID4gMCA/IG5vZGVzW2kgLSAxXSA6IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSBub2Rlc1tpbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC51bmN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID1cbiAgICAgICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50Ll9sZW5ndGggKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hpbGRMZW5ndGggPSBjeWNsZUVkZ2VOb2RlLl9sZW5ndGggKyAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgLSAyOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIG5vZGVzW2pdLl9sZW5ndGggPSBjdXJyZW50Q2hpbGRMZW5ndGg7XG4gICAgICAgICAgICAgICAgY3VycmVudENoaWxkTGVuZ3RoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS5hdHRhY2hFeHRyYVRyYWNlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuX19zdGFja0NsZWFuZWRfXykgcmV0dXJuO1xuICAgIHRoaXMudW5jeWNsZSgpO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgdmFyIG1lc3NhZ2UgPSBwYXJzZWQubWVzc2FnZTtcbiAgICB2YXIgc3RhY2tzID0gW3BhcnNlZC5zdGFja107XG5cbiAgICB2YXIgdHJhY2UgPSB0aGlzO1xuICAgIHdoaWxlICh0cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0YWNrcy5wdXNoKGNsZWFuU3RhY2sodHJhY2Uuc3RhY2suc3BsaXQoXCJcXG5cIikpKTtcbiAgICAgICAgdHJhY2UgPSB0cmFjZS5fcGFyZW50O1xuICAgIH1cbiAgICByZW1vdmVDb21tb25Sb290cyhzdGFja3MpO1xuICAgIHJlbW92ZUR1cGxpY2F0ZU9yRW1wdHlKdW1wcyhzdGFja3MpO1xuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwic3RhY2tcIiwgcmVjb25zdHJ1Y3RTdGFjayhtZXNzYWdlLCBzdGFja3MpKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcIl9fc3RhY2tDbGVhbmVkX19cIiwgdHJ1ZSk7XG59O1xuXG52YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSAoZnVuY3Rpb24gc3RhY2tEZXRlY3Rpb24oKSB7XG4gICAgdmFyIHY4c3RhY2tGcmFtZVBhdHRlcm4gPSAvXlxccyphdFxccyovO1xuICAgIHZhciB2OHN0YWNrRm9ybWF0dGVyID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7XG5cbiAgICAgICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNlaXZlciwgaWdub3JlVW50aWwpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgY2FwdHVyZVN0YWNrVHJhY2UocmVjZWl2ZXIsIGlnbm9yZVVudGlsKTtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cbiAgICBpZiAodHlwZW9mIGVyci5zdGFjayA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBlcnIuc3RhY2suc3BsaXQoXCJcXG5cIilbMF0uaW5kZXhPZihcInN0YWNrRGV0ZWN0aW9uQFwiKSA+PSAwKSB7XG4gICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuID0gL0AvO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIGluZGVudFN0YWNrRnJhbWVzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIG8uc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaGFzU3RhY2tBZnRlclRocm93O1xuICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICBoYXNTdGFja0FmdGVyVGhyb3cgPSAoXCJzdGFja1wiIGluIGUpO1xuICAgIH1cbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZXJyKSAmJiBoYXNTdGFja0FmdGVyVGhyb3cgJiZcbiAgICAgICAgdHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgdHJ5IHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHsgby5zdGFjayA9IGUuc3RhY2s7IH1cbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1hdFN0YWNrID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpICYmXG4gICAgICAgICAgICBlcnJvci5uYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdE5vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG51bGw7XG5cbn0pKFtdKTtcblxuaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25zb2xlLndhcm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfTtcbiAgICBpZiAodXRpbC5pc05vZGUgJiYgcHJvY2Vzcy5zdGRlcnIuaXNUVFkpIHtcbiAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24obWVzc2FnZSwgaXNTb2Z0KSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBpc1NvZnQgPyBcIlxcdTAwMWJbMzNtXCIgOiBcIlxcdTAwMWJbMzFtXCI7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oY29sb3IgKyBtZXNzYWdlICsgXCJcXHUwMDFiWzBtXFxuXCIpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoIXV0aWwuaXNOb2RlICYmIHR5cGVvZiAobmV3IEVycm9yKCkuc3RhY2spID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiJWNcIiArIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NvZnQgPyBcImNvbG9yOiBkYXJrb3JhbmdlXCIgOiBcImNvbG9yOiByZWRcIik7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG52YXIgY29uZmlnID0ge1xuICAgIHdhcm5pbmdzOiB3YXJuaW5ncyxcbiAgICBsb25nU3RhY2tUcmFjZXM6IGZhbHNlLFxuICAgIGNhbmNlbGxhdGlvbjogZmFsc2UsXG4gICAgbW9uaXRvcmluZzogZmFsc2Vcbn07XG5cbmlmIChsb25nU3RhY2tUcmFjZXMpIFByb21pc2UubG9uZ1N0YWNrVHJhY2VzKCk7XG5cbnJldHVybiB7XG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXM7XG4gICAgfSxcbiAgICB3YXJuaW5nczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcud2FybmluZ3M7XG4gICAgfSxcbiAgICBjYW5jZWxsYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLmNhbmNlbGxhdGlvbjtcbiAgICB9LFxuICAgIG1vbml0b3Jpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLm1vbml0b3Jpbmc7XG4gICAgfSxcbiAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRlRnJvbUZ1bmN0aW9uO1xuICAgIH0sXG4gICAgYm91bmRWYWx1ZUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvdW5kVmFsdWVGdW5jdGlvbjtcbiAgICB9LFxuICAgIGNoZWNrRm9yZ290dGVuUmV0dXJuczogY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zLFxuICAgIHNldEJvdW5kczogc2V0Qm91bmRzLFxuICAgIHdhcm46IHdhcm4sXG4gICAgZGVwcmVjYXRlZDogZGVwcmVjYXRlZCxcbiAgICBDYXB0dXJlZFRyYWNlOiBDYXB0dXJlZFRyYWNlLFxuICAgIGZpcmVEb21FdmVudDogZmlyZURvbUV2ZW50LFxuICAgIGZpcmVHbG9iYWxFdmVudDogZmlyZUdsb2JhbEV2ZW50XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gcmV0dXJuZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG59XG5mdW5jdGlvbiB0aHJvd2VyKCkge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcInJldHVyblwiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHJldHVybmVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge3ZhbHVlOiB2YWx1ZX0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcInRocm93XCJdID1cblByb21pc2UucHJvdG90eXBlLnRoZW5UaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgdGhyb3dlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFRocm93ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHRocm93ZXIsIHVuZGVmaW5lZCwge3JlYXNvbjogcmVhc29ufSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JlYXNvbiA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbigpIHt0aHJvdyBfcmVhc29uO307XG4gICAgICAgIHJldHVybiB0aGlzLmNhdWdodChyZWFzb24sIGhhbmRsZXIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdGNoUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB2YWx1ZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHJldHVybmVyLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfdmFsdWUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlmIChfdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSBfdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7cmV0dXJuIF92YWx1ZTt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQodmFsdWUsIGhhbmRsZXIpO1xuICAgIH1cbn07XG59O1xuXG59LHt9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlUmVkdWNlID0gUHJvbWlzZS5yZWR1Y2U7XG52YXIgUHJvbWlzZUFsbCA9IFByb21pc2UuYWxsO1xuXG5mdW5jdGlvbiBwcm9taXNlQWxsVGhpcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZUFsbCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZU1hcFNlcmllcyhwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgSU5URVJOQUwsIDApXG4gICAgICAgICAgICAgIC5fdGhlbihwcm9taXNlQWxsVGhpcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXBTZXJpZXMgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgSU5URVJOQUwsIElOVEVSTkFMKTtcbn07XG5cblByb21pc2UuZWFjaCA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCAwKVxuICAgICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwcm9taXNlcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UubWFwU2VyaWVzID0gUHJvbWlzZU1hcFNlcmllcztcbn07XG5cblxufSx7fV0sMTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIE9iamVjdGZyZWV6ZSA9IGVzNS5mcmVlemU7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgaW5oZXJpdHMgPSB1dGlsLmluaGVyaXRzO1xudmFyIG5vdEVudW1lcmFibGVQcm9wID0gdXRpbC5ub3RFbnVtZXJhYmxlUHJvcDtcblxuZnVuY3Rpb24gc3ViRXJyb3IobmFtZVByb3BlcnR5LCBkZWZhdWx0TWVzc2FnZSkge1xuICAgIGZ1bmN0aW9uIFN1YkVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFN1YkVycm9yKSkgcmV0dXJuIG5ldyBTdWJFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibmFtZVwiLCBuYW1lUHJvcGVydHkpO1xuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmhlcml0cyhTdWJFcnJvciwgRXJyb3IpO1xuICAgIHJldHVybiBTdWJFcnJvcjtcbn1cblxudmFyIF9UeXBlRXJyb3IsIF9SYW5nZUVycm9yO1xudmFyIFdhcm5pbmcgPSBzdWJFcnJvcihcIldhcm5pbmdcIiwgXCJ3YXJuaW5nXCIpO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gc3ViRXJyb3IoXCJDYW5jZWxsYXRpb25FcnJvclwiLCBcImNhbmNlbGxhdGlvbiBlcnJvclwiKTtcbnZhciBUaW1lb3V0RXJyb3IgPSBzdWJFcnJvcihcIlRpbWVvdXRFcnJvclwiLCBcInRpbWVvdXQgZXJyb3JcIik7XG52YXIgQWdncmVnYXRlRXJyb3IgPSBzdWJFcnJvcihcIkFnZ3JlZ2F0ZUVycm9yXCIsIFwiYWdncmVnYXRlIGVycm9yXCIpO1xudHJ5IHtcbiAgICBfVHlwZUVycm9yID0gVHlwZUVycm9yO1xuICAgIF9SYW5nZUVycm9yID0gUmFuZ2VFcnJvcjtcbn0gY2F0Y2goZSkge1xuICAgIF9UeXBlRXJyb3IgPSBzdWJFcnJvcihcIlR5cGVFcnJvclwiLCBcInR5cGUgZXJyb3JcIik7XG4gICAgX1JhbmdlRXJyb3IgPSBzdWJFcnJvcihcIlJhbmdlRXJyb3JcIiwgXCJyYW5nZSBlcnJvclwiKTtcbn1cblxudmFyIG1ldGhvZHMgPSAoXCJqb2luIHBvcCBwdXNoIHNoaWZ0IHVuc2hpZnQgc2xpY2UgZmlsdGVyIGZvckVhY2ggc29tZSBcIiArXG4gICAgXCJldmVyeSBtYXAgaW5kZXhPZiBsYXN0SW5kZXhPZiByZWR1Y2UgcmVkdWNlUmlnaHQgc29ydCByZXZlcnNlXCIpLnNwbGl0KFwiIFwiKTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHR5cGVvZiBBcnJheS5wcm90b3R5cGVbbWV0aG9kc1tpXV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBBZ2dyZWdhdGVFcnJvci5wcm90b3R5cGVbbWV0aG9kc1tpXV0gPSBBcnJheS5wcm90b3R5cGVbbWV0aG9kc1tpXV07XG4gICAgfVxufVxuXG5lczUuZGVmaW5lUHJvcGVydHkoQWdncmVnYXRlRXJyb3IucHJvdG90eXBlLCBcImxlbmd0aFwiLCB7XG4gICAgdmFsdWU6IDAsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG59KTtcbkFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZVtcImlzT3BlcmF0aW9uYWxcIl0gPSB0cnVlO1xudmFyIGxldmVsID0gMDtcbkFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRlbnQgPSBBcnJheShsZXZlbCAqIDQgKyAxKS5qb2luKFwiIFwiKTtcbiAgICB2YXIgcmV0ID0gXCJcXG5cIiArIGluZGVudCArIFwiQWdncmVnYXRlRXJyb3Igb2Y6XCIgKyBcIlxcblwiO1xuICAgIGxldmVsKys7XG4gICAgaW5kZW50ID0gQXJyYXkobGV2ZWwgKiA0ICsgMSkuam9pbihcIiBcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzW2ldID09PSB0aGlzID8gXCJbQ2lyY3VsYXIgQWdncmVnYXRlRXJyb3JdXCIgOiB0aGlzW2ldICsgXCJcIjtcbiAgICAgICAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBsaW5lc1tqXSA9IGluZGVudCArIGxpbmVzW2pdO1xuICAgICAgICB9XG4gICAgICAgIHN0ciA9IGxpbmVzLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIHJldCArPSBzdHIgKyBcIlxcblwiO1xuICAgIH1cbiAgICBsZXZlbC0tO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBPcGVyYXRpb25hbEVycm9yKG1lc3NhZ2UpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgT3BlcmF0aW9uYWxFcnJvcikpXG4gICAgICAgIHJldHVybiBuZXcgT3BlcmF0aW9uYWxFcnJvcihtZXNzYWdlKTtcbiAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm5hbWVcIiwgXCJPcGVyYXRpb25hbEVycm9yXCIpO1xuICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICB0aGlzLmNhdXNlID0gbWVzc2FnZTtcbiAgICB0aGlzW1wiaXNPcGVyYXRpb25hbFwiXSA9IHRydWU7XG5cbiAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLCBtZXNzYWdlLm1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcInN0YWNrXCIsIG1lc3NhZ2Uuc3RhY2spO1xuICAgIH0gZWxzZSBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuXG59XG5pbmhlcml0cyhPcGVyYXRpb25hbEVycm9yLCBFcnJvcik7XG5cbnZhciBlcnJvclR5cGVzID0gRXJyb3JbXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCJdO1xuaWYgKCFlcnJvclR5cGVzKSB7XG4gICAgZXJyb3JUeXBlcyA9IE9iamVjdGZyZWV6ZSh7XG4gICAgICAgIENhbmNlbGxhdGlvbkVycm9yOiBDYW5jZWxsYXRpb25FcnJvcixcbiAgICAgICAgVGltZW91dEVycm9yOiBUaW1lb3V0RXJyb3IsXG4gICAgICAgIE9wZXJhdGlvbmFsRXJyb3I6IE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgICAgIFJlamVjdGlvbkVycm9yOiBPcGVyYXRpb25hbEVycm9yLFxuICAgICAgICBBZ2dyZWdhdGVFcnJvcjogQWdncmVnYXRlRXJyb3JcbiAgICB9KTtcbiAgICBlczUuZGVmaW5lUHJvcGVydHkoRXJyb3IsIFwiX19CbHVlYmlyZEVycm9yVHlwZXNfX1wiLCB7XG4gICAgICAgIHZhbHVlOiBlcnJvclR5cGVzLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVycm9yOiBFcnJvcixcbiAgICBUeXBlRXJyb3I6IF9UeXBlRXJyb3IsXG4gICAgUmFuZ2VFcnJvcjogX1JhbmdlRXJyb3IsXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3I6IGVycm9yVHlwZXMuQ2FuY2VsbGF0aW9uRXJyb3IsXG4gICAgT3BlcmF0aW9uYWxFcnJvcjogZXJyb3JUeXBlcy5PcGVyYXRpb25hbEVycm9yLFxuICAgIFRpbWVvdXRFcnJvcjogZXJyb3JUeXBlcy5UaW1lb3V0RXJyb3IsXG4gICAgQWdncmVnYXRlRXJyb3I6IGVycm9yVHlwZXMuQWdncmVnYXRlRXJyb3IsXG4gICAgV2FybmluZzogV2FybmluZ1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwxMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaXNFUzUgPSAoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICByZXR1cm4gdGhpcyA9PT0gdW5kZWZpbmVkO1xufSkoKTtcblxuaWYgKGlzRVM1KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGZyZWV6ZTogT2JqZWN0LmZyZWV6ZSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHk6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgICAgICAgZ2V0RGVzY3JpcHRvcjogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICAgICAga2V5czogT2JqZWN0LmtleXMsXG4gICAgICAgIG5hbWVzOiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgICAgICAgZ2V0UHJvdG90eXBlT2Y6IE9iamVjdC5nZXRQcm90b3R5cGVPZixcbiAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSxcbiAgICAgICAgaXNFUzU6IGlzRVM1LFxuICAgICAgICBwcm9wZXJ0eUlzV3JpdGFibGU6IGZ1bmN0aW9uKG9iaiwgcHJvcCkge1xuICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCk7XG4gICAgICAgICAgICByZXR1cm4gISEoIWRlc2NyaXB0b3IgfHwgZGVzY3JpcHRvci53cml0YWJsZSB8fCBkZXNjcmlwdG9yLnNldCk7XG4gICAgICAgIH1cbiAgICB9O1xufSBlbHNlIHtcbiAgICB2YXIgaGFzID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgdmFyIHN0ciA9IHt9LnRvU3RyaW5nO1xuICAgIHZhciBwcm90byA9IHt9LmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblxuICAgIHZhciBPYmplY3RLZXlzID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbykge1xuICAgICAgICAgICAgaWYgKGhhcy5jYWxsKG8sIGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RHZXREZXNjcmlwdG9yID0gZnVuY3Rpb24obywga2V5KSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IG9ba2V5XX07XG4gICAgfTtcblxuICAgIHZhciBPYmplY3REZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvLCBrZXksIGRlc2MpIHtcbiAgICAgICAgb1trZXldID0gZGVzYy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RGcmVlemUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RHZXRQcm90b3R5cGVPZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qob2JqKS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm90bztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgQXJyYXlJc0FycmF5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5jYWxsKG9iaikgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGlzQXJyYXk6IEFycmF5SXNBcnJheSxcbiAgICAgICAga2V5czogT2JqZWN0S2V5cyxcbiAgICAgICAgbmFtZXM6IE9iamVjdEtleXMsXG4gICAgICAgIGRlZmluZVByb3BlcnR5OiBPYmplY3REZWZpbmVQcm9wZXJ0eSxcbiAgICAgICAgZ2V0RGVzY3JpcHRvcjogT2JqZWN0R2V0RGVzY3JpcHRvcixcbiAgICAgICAgZnJlZXplOiBPYmplY3RGcmVlemUsXG4gICAgICAgIGdldFByb3RvdHlwZU9mOiBPYmplY3RHZXRQcm90b3R5cGVPZixcbiAgICAgICAgaXNFUzU6IGlzRVM1LFxuICAgICAgICBwcm9wZXJ0eUlzV3JpdGFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG59LHt9XSwxNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlTWFwID0gUHJvbWlzZS5tYXA7XG5cblByb21pc2UucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBQcm9taXNlTWFwKHRoaXMsIGZuLCBvcHRpb25zLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmZpbHRlciA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gUHJvbWlzZU1hcChwcm9taXNlcywgZm4sIG9wdGlvbnMsIElOVEVSTkFMKTtcbn07XG59O1xuXG59LHt9XSwxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgTkVYVF9GSUxURVIpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBDYW5jZWxsYXRpb25FcnJvciA9IFByb21pc2UuQ2FuY2VsbGF0aW9uRXJyb3I7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGNhdGNoRmlsdGVyID0gX2RlcmVxXyhcIi4vY2F0Y2hfZmlsdGVyXCIpKE5FWFRfRklMVEVSKTtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dChwcm9taXNlLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgdGhpcy5jYWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFByb21pc2UgPSBudWxsO1xufVxuXG5QYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0LnByb3RvdHlwZS5pc0ZpbmFsbHlIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gMDtcbn07XG5cbmZ1bmN0aW9uIEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24oZmluYWxseUhhbmRsZXIpIHtcbiAgICB0aGlzLmZpbmFsbHlIYW5kbGVyID0gZmluYWxseUhhbmRsZXI7XG59XG5cbkZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBjaGVja0NhbmNlbCh0aGlzLmZpbmFsbHlIYW5kbGVyKTtcbn07XG5cbmZ1bmN0aW9uIGNoZWNrQ2FuY2VsKGN0eCwgcmVhc29uKSB7XG4gICAgaWYgKGN0eC5jYW5jZWxQcm9taXNlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjdHguY2FuY2VsUHJvbWlzZS5fcmVqZWN0KHJlYXNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguY2FuY2VsUHJvbWlzZS5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmNhbmNlbFByb21pc2UgPSBudWxsO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzdWNjZWVkKCkge1xuICAgIHJldHVybiBmaW5hbGx5SGFuZGxlci5jYWxsKHRoaXMsIHRoaXMucHJvbWlzZS5fdGFyZ2V0KCkuX3NldHRsZWRWYWx1ZSgpKTtcbn1cbmZ1bmN0aW9uIGZhaWwocmVhc29uKSB7XG4gICAgaWYgKGNoZWNrQ2FuY2VsKHRoaXMsIHJlYXNvbikpIHJldHVybjtcbiAgICBlcnJvck9iai5lID0gcmVhc29uO1xuICAgIHJldHVybiBlcnJvck9iajtcbn1cbmZ1bmN0aW9uIGZpbmFsbHlIYW5kbGVyKHJlYXNvbk9yVmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICB2YXIgaGFuZGxlciA9IHRoaXMuaGFuZGxlcjtcblxuICAgIGlmICghdGhpcy5jYWxsZWQpIHtcbiAgICAgICAgdGhpcy5jYWxsZWQgPSB0cnVlO1xuICAgICAgICB2YXIgcmV0ID0gdGhpcy5pc0ZpbmFsbHlIYW5kbGVyKClcbiAgICAgICAgICAgID8gaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSlcbiAgICAgICAgICAgIDogaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSwgcmVhc29uT3JWYWx1ZSk7XG4gICAgICAgIGlmIChyZXQgPT09IE5FWFRfRklMVEVSKSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2UgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9zZXRSZXR1cm5lZE5vblVuZGVmaW5lZCgpO1xuICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmV0LCBwcm9taXNlKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuY2VsUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UuX2lzQ2FuY2VsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFzb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXliZVByb21pc2UuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24odGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVByb21pc2UuX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHN1Y2NlZWQsIGZhaWwsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9taXNlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbk9yVmFsdWU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJlYXNvbk9yVmFsdWU7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5fcGFzc1Rocm91Z2ggPSBmdW5jdGlvbihoYW5kbGVyLCB0eXBlLCBzdWNjZXNzLCBmYWlsKSB7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0aGlzLnRoZW4oKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihzdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIGZhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0KHRoaXMsIHR5cGUsIGhhbmRsZXIpLFxuICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5sYXN0bHkgPVxuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cblxuUHJvbWlzZS5wcm90b3R5cGUudGFwID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlciwgMSwgZmluYWxseUhhbmRsZXIpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGFwQ2F0Y2ggPSBmdW5jdGlvbiAoaGFuZGxlck9yUHJlZGljYXRlKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYobGVuID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXNzVGhyb3VnaChoYW5kbGVyT3JQcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICB2YXIgY2F0Y2hJbnN0YW5jZXMgPSBuZXcgQXJyYXkobGVuIC0gMSksXG4gICAgICAgICAgICBqID0gMCwgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbiAtIDE7ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAodXRpbC5pc09iamVjdChpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNhdGNoSW5zdGFuY2VzW2orK10gPSBpdGVtO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgXCJ0YXBDYXRjaCBzdGF0ZW1lbnQgcHJlZGljYXRlOiBcIlxuICAgICAgICAgICAgICAgICAgICArIFwiZXhwZWN0aW5nIGFuIG9iamVjdCBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhpdGVtKVxuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoSW5zdGFuY2VzLmxlbmd0aCA9IGo7XG4gICAgICAgIHZhciBoYW5kbGVyID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goY2F0Y2hGaWx0ZXIoY2F0Y2hJbnN0YW5jZXMsIGhhbmRsZXIsIHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyKTtcbiAgICB9XG5cbn07XG5cbnJldHVybiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0O1xufTtcblxufSx7XCIuL2NhdGNoX2ZpbHRlclwiOjcsXCIuL3V0aWxcIjozNn1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94eWFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZXJyb3JzID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpO1xudmFyIFR5cGVFcnJvciA9IGVycm9ycy5UeXBlRXJyb3I7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciB5aWVsZEhhbmRsZXJzID0gW107XG5cbmZ1bmN0aW9uIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKHZhbHVlLCB5aWVsZEhhbmRsZXJzLCB0cmFjZVBhcmVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeWllbGRIYW5kbGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0cmFjZVBhcmVudC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHlpZWxkSGFuZGxlcnNbaV0pKHZhbHVlKTtcbiAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmVzdWx0LCB0cmFjZVBhcmVudCk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gbWF5YmVQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZVNwYXduKGdlbmVyYXRvckZ1bmN0aW9uLCByZWNlaXZlciwgeWllbGRIYW5kbGVyLCBzdGFjaykge1xuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICB2YXIgaW50ZXJuYWwgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHZhciBfZmluYWxseVByb21pc2UgPSB0aGlzLl9maW5hbGx5UHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZSA9IGludGVybmFsLmxhc3RseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfZmluYWxseVByb21pc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpbnRlcm5hbC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaW50ZXJuYWwuX3NldE9uQ2FuY2VsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhY2sgPSBzdGFjaztcbiAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IGdlbmVyYXRvckZ1bmN0aW9uO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMgPSB0eXBlb2YgeWllbGRIYW5kbGVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyBbeWllbGRIYW5kbGVyXS5jb25jYXQoeWllbGRIYW5kbGVycylcbiAgICAgICAgOiB5aWVsZEhhbmRsZXJzO1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlU3Bhd24sIFByb3h5YWJsZSk7XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZSA9PT0gbnVsbDtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9wcm9taXNlID0gdGhpcy5fZ2VuZXJhdG9yID0gbnVsbDtcbiAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdGhpcy5fZmluYWxseVByb21pc2UgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UuX2Z1bGZpbGwoKTtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UgPSBudWxsO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIGltcGxlbWVudHNSZXR1cm4gPSB0eXBlb2YgdGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoIWltcGxlbWVudHNSZXR1cm4pIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yKFxuICAgICAgICAgICAgXCJnZW5lcmF0b3IgLnJldHVybigpIHNlbnRpbmVsXCIpO1xuICAgICAgICBQcm9taXNlLmNvcm91dGluZS5yZXR1cm5TZW50aW5lbCA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJ0aHJvd1wiXSkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdKS5jYWxsKHRoaXMuX2dlbmVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfVxuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlID0gdHJ1ZTtcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3IubmV4dCkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsIHZhbHVlKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1widGhyb3dcIl0pXG4gICAgICAgIC5jYWxsKHRoaXMuX2dlbmVyYXRvciwgcmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl95aWVsZGVkUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl95aWVsZGVkUHJvbWlzZTtcbiAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgICAgICBwcm9taXNlLmNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3J1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9nZW5lcmF0b3IgPSB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbi5jYWxsKHRoaXMuX3JlY2VpdmVyKTtcbiAgICB0aGlzLl9yZWNlaXZlciA9XG4gICAgICAgIHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodW5kZWZpbmVkKTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NvbnRpbnVlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICBpZiAocmVzdWx0LmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPVxuICAgICAgICAgICAgICAgIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKG1heWJlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl95aWVsZEhhbmRsZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VSZWplY3RlZChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQSB2YWx1ZSAlcyB3YXMgeWllbGRlZCB0aGF0IGNvdWxkIG5vdCBiZSB0cmVhdGVkIGFzIGEgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcXHUwMDBhXCIucmVwbGFjZShcIiVzXCIsIFN0cmluZyh2YWx1ZSkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRnJvbSBjb3JvdXRpbmU6XFx1MDAwYVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YWNrLnNwbGl0KFwiXFxuXCIpLnNsaWNlKDEsIC03KS5qb2luKFwiXFxuXCIpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSBtYXliZVByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBtYXliZVByb21pc2U7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3Byb3h5KHRoaXMsIG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICBQcm9taXNlLl9hc3luYy5pbnZva2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCwgdGhpcywgbWF5YmVQcm9taXNlLl92YWx1ZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICBQcm9taXNlLl9hc3luYy5pbnZva2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVJlamVjdGVkLCB0aGlzLCBtYXliZVByb21pc2UuX3JlYXNvbigpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUNhbmNlbGxlZCgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5jb3JvdXRpbmUgPSBmdW5jdGlvbiAoZ2VuZXJhdG9yRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciB5aWVsZEhhbmRsZXIgPSBPYmplY3Qob3B0aW9ucykueWllbGRIYW5kbGVyO1xuICAgIHZhciBQcm9taXNlU3Bhd24kID0gUHJvbWlzZVNwYXduO1xuICAgIHZhciBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBnZW5lcmF0b3JGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgc3Bhd24gPSBuZXcgUHJvbWlzZVNwYXduJCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgeWllbGRIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjayk7XG4gICAgICAgIHZhciByZXQgPSBzcGF3bi5wcm9taXNlKCk7XG4gICAgICAgIHNwYXduLl9nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gICAgICAgIHNwYXduLl9wcm9taXNlRnVsZmlsbGVkKHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn07XG5cblByb21pc2UuY29yb3V0aW5lLmFkZFlpZWxkSGFuZGxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICB5aWVsZEhhbmRsZXJzLnB1c2goZm4pO1xufTtcblxuUHJvbWlzZS5zcGF3biA9IGZ1bmN0aW9uIChnZW5lcmF0b3JGdW5jdGlvbikge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJQcm9taXNlLnNwYXduKClcIiwgXCJQcm9taXNlLmNvcm91dGluZSgpXCIpO1xuICAgIGlmICh0eXBlb2YgZ2VuZXJhdG9yRnVuY3Rpb24gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHNwYXduID0gbmV3IFByb21pc2VTcGF3bihnZW5lcmF0b3JGdW5jdGlvbiwgdGhpcyk7XG4gICAgdmFyIHJldCA9IHNwYXduLnByb21pc2UoKTtcbiAgICBzcGF3bi5fcnVuKFByb21pc2Uuc3Bhd24pO1xuICAgIHJldHVybiByZXQ7XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGFzeW5jLFxuICAgICAgICAgZ2V0RG9tYWluKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgcmVqZWN0O1xuXG5pZiAoIXRydWUpIHtcbmlmIChjYW5FdmFsdWF0ZSkge1xuICAgIHZhciB0aGVuQ2FsbGJhY2sgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ2YWx1ZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5wSW5kZXggPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5jaGVja0Z1bGZpbGxtZW50KHRoaXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL0luZGV4L2csIGkpKTtcbiAgICB9O1xuXG4gICAgdmFyIHByb21pc2VTZXR0ZXIgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJwcm9taXNlXCIsIFwiaG9sZGVyXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5wSW5kZXggPSBwcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL0luZGV4L2csIGkpKTtcbiAgICB9O1xuXG4gICAgdmFyIGdlbmVyYXRlSG9sZGVyQ2xhc3MgPSBmdW5jdGlvbih0b3RhbCkge1xuICAgICAgICB2YXIgcHJvcHMgPSBuZXcgQXJyYXkodG90YWwpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBwcm9wc1tpXSA9IFwidGhpcy5wXCIgKyAoaSsxKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXNzaWdubWVudCA9IHByb3BzLmpvaW4oXCIgPSBcIikgKyBcIiA9IG51bGw7XCI7XG4gICAgICAgIHZhciBjYW5jZWxsYXRpb25Db2RlPSBcInZhciBwcm9taXNlO1xcblwiICsgcHJvcHMubWFwKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IFwiICsgcHJvcCArIFwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5jYW5jZWwoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiO1xuICAgICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgICAgICB2YXIgcGFzc2VkQXJndW1lbnRzID0gcHJvcHMuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgbmFtZSA9IFwiSG9sZGVyJFwiICsgdG90YWw7XG5cblxuICAgICAgICB2YXIgY29kZSA9IFwicmV0dXJuIGZ1bmN0aW9uKHRyeUNhdGNoLCBlcnJvck9iaiwgUHJvbWlzZSwgYXN5bmMpIHsgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZ1bmN0aW9uIFtUaGVOYW1lXShmbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbVGhlUHJvcGVydGllc10gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLmZuID0gZm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jTmVlZGVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLm5vdyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuX2NhbGxGdW5jdGlvbiA9IGZ1bmN0aW9uKHByb21pc2UpIHsgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2godGhpcy5mbikoW1RoZVBhc3NlZEFyZ3VtZW50c10pOyAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wb3BDb250ZXh0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmV0LmUsIGZhbHNlKTsgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHJldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuY2hlY2tGdWxmaWxsbWVudCA9IGZ1bmN0aW9uKHByb21pc2UpIHsgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gKyt0aGlzLm5vdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAobm93ID09PSBbVGhlVG90YWxdKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXN5bmNOZWVkZWQpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jLmludm9rZSh0aGlzLl9jYWxsRnVuY3Rpb24sIHRoaXMsIHByb21pc2UpOyAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jdGlvbihwcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkgeyAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbQ2FuY2VsbGF0aW9uQ29kZV0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBbVGhlTmFtZV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfSh0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCI7XG5cbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFxbVGhlTmFtZVxcXS9nLCBuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVRvdGFsXFxdL2csIHRvdGFsKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVBhc3NlZEFyZ3VtZW50c1xcXS9nLCBwYXNzZWRBcmd1bWVudHMpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbVGhlUHJvcGVydGllc1xcXS9nLCBhc3NpZ25tZW50KVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW0NhbmNlbGxhdGlvbkNvZGVcXF0vZywgY2FuY2VsbGF0aW9uQ29kZSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInRyeUNhdGNoXCIsIFwiZXJyb3JPYmpcIiwgXCJQcm9taXNlXCIsIFwiYXN5bmNcIiwgY29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICh0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKTtcbiAgICB9O1xuXG4gICAgdmFyIGhvbGRlckNsYXNzZXMgPSBbXTtcbiAgICB2YXIgdGhlbkNhbGxiYWNrcyA9IFtdO1xuICAgIHZhciBwcm9taXNlU2V0dGVycyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyArK2kpIHtcbiAgICAgICAgaG9sZGVyQ2xhc3Nlcy5wdXNoKGdlbmVyYXRlSG9sZGVyQ2xhc3MoaSArIDEpKTtcbiAgICAgICAgdGhlbkNhbGxiYWNrcy5wdXNoKHRoZW5DYWxsYmFjayhpICsgMSkpO1xuICAgICAgICBwcm9taXNlU2V0dGVycy5wdXNoKHByb21pc2VTZXR0ZXIoaSArIDEpKTtcbiAgICB9XG5cbiAgICByZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH07XG59fVxuXG5Qcm9taXNlLmpvaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3QgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcbiAgICB2YXIgZm47XG4gICAgaWYgKGxhc3QgPiAwICYmIHR5cGVvZiBhcmd1bWVudHNbbGFzdF0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBmbiA9IGFyZ3VtZW50c1tsYXN0XTtcbiAgICAgICAgaWYgKCF0cnVlKSB7XG4gICAgICAgICAgICBpZiAobGFzdCA8PSA4ICYmIGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIEhvbGRlckNsYXNzID0gaG9sZGVyQ2xhc3Nlc1tsYXN0IC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIGhvbGRlciA9IG5ldyBIb2xkZXJDbGFzcyhmbik7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoZW5DYWxsYmFja3M7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3Q7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShhcmd1bWVudHNbaV0sIHJldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihjYWxsYmFja3NbaV0sIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCByZXQsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVNldHRlcnNbaV0obWF5YmVQcm9taXNlLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlci5hc3luY05lZWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKHJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3ZhbHVlKCksIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0Ll9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsIG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghcmV0Ll9pc0ZhdGVTZWFsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG9sZGVyLmFzeW5jTmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9tYWluICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZGVyLmZuID0gdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgaG9sZGVyLmZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhvbGRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7O1xuICAgIGlmIChmbikgYXJncy5wb3AoKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VBcnJheShhcmdzKS5wcm9taXNlKCk7XG4gICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyByZXQuc3ByZWFkKGZuKSA6IHJldDtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zykge1xudmFyIGdldERvbWFpbiA9IFByb21pc2UuX2dldERvbWFpbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG5cbmZ1bmN0aW9uIE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHByb21pc2VzKTtcbiAgICB0aGlzLl9wcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgZm4pO1xuICAgIHRoaXMuX3ByZXNlcnZlZFZhbHVlcyA9IF9maWx0ZXIgPT09IElOVEVSTkFMXG4gICAgICAgID8gbmV3IEFycmF5KHRoaXMubGVuZ3RoKCkpXG4gICAgICAgIDogbnVsbDtcbiAgICB0aGlzLl9saW1pdCA9IGxpbWl0O1xuICAgIHRoaXMuX2luRmxpZ2h0ID0gMDtcbiAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIGFzeW5jLmludm9rZSh0aGlzLl9hc3luY0luaXQsIHRoaXMsIHVuZGVmaW5lZCk7XG59XG51dGlsLmluaGVyaXRzKE1hcHBpbmdQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hc3luY0luaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC0yKTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdmFyIHByZXNlcnZlZFZhbHVlcyA9IHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcblxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSAoaW5kZXggKiAtMSkgLSAxO1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmIChsaW1pdCA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pbkZsaWdodC0tO1xuICAgICAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGltaXQgPj0gMSAmJiB0aGlzLl9pbkZsaWdodCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucHVzaChpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkgcHJlc2VydmVkVmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGNhbGxiYWNrKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgaW5kZXgsIGxlbmd0aCk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgICAgICBwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwgPyBcIlByb21pc2UuZmlsdGVyXCIgOiBcIlByb21pc2UubWFwXCIsXG4gICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QocmV0LmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGltaXQgPj0gMSkgdGhpcy5faW5GbGlnaHQrKztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgKGluZGV4ICsgMSkgKiAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbmRleF0gPSByZXQ7XG4gICAgfVxuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IGxlbmd0aCkge1xuICAgICAgICBpZiAocHJlc2VydmVkVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIodmFsdWVzLCBwcmVzZXJ2ZWRWYWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZHJhaW5RdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMuX2luRmxpZ2h0IDwgbGltaXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaW5kZXggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZXNbaW5kZXhdLCBpbmRleCk7XG4gICAgfVxufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2ZpbHRlciA9IGZ1bmN0aW9uIChib29sZWFucywgdmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShsZW4pO1xuICAgIHZhciBqID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChib29sZWFuc1tpXSkgcmV0W2orK10gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldC5sZW5ndGggPSBqO1xuICAgIHRoaXMuX3Jlc29sdmUocmV0KTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLnByZXNlcnZlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJlc2VydmVkVmFsdWVzO1xufTtcblxuZnVuY3Rpb24gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG5cbiAgICB2YXIgbGltaXQgPSAwO1xuICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb25jdXJyZW5jeSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcIidjb25jdXJyZW5jeScgbXVzdCBiZSBhIG51bWJlciBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhvcHRpb25zLmNvbmN1cnJlbmN5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGltaXQgPSBvcHRpb25zLmNvbmN1cnJlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0IGJ1dCBpdCBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW1pdCA9IHR5cGVvZiBsaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICBpc0Zpbml0ZShsaW1pdCkgJiYgbGltaXQgPj0gMSA/IGxpbWl0IDogMDtcbiAgICByZXR1cm4gbmV3IE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikucHJvbWlzZSgpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFwKHRoaXMsIGZuLCBvcHRpb25zLCBudWxsKTtcbn07XG5cblByb21pc2UubWFwID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIHJldHVybiBtYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBfZmlsdGVyKTtcbn07XG5cblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cblByb21pc2UubWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlLlR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgdmFsdWUgPSB0cnlDYXRjaChmbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLm1ldGhvZFwiLCByZXQpO1xuICAgICAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5hdHRlbXB0ID0gUHJvbWlzZVtcInRyeVwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZGVidWcuZGVwcmVjYXRlZChcImNhbGxpbmcgUHJvbWlzZS50cnkgd2l0aCBtb3JlIHRoYW4gMSBhcmd1bWVudFwiKTtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGN0eCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgdmFsdWUgPSB1dGlsLmlzQXJyYXkoYXJnKSA/IHRyeUNhdGNoKGZuKS5hcHBseShjdHgsIGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRyeUNhdGNoKGZuKS5jYWxsKGN0eCwgYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRyeUNhdGNoKGZuKSgpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSByZXQuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLnRyeVwiLCByZXQpO1xuICAgIHJldC5fcmVzb2x2ZUZyb21TeW5jVmFsdWUodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHV0aWwuZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0Q2FsbGJhY2sodmFsdWUuZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGVycm9ycyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKTtcbnZhciBPcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xuXG5mdW5jdGlvbiBpc1VudHlwZWRFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgZXM1LmdldFByb3RvdHlwZU9mKG9iaikgPT09IEVycm9yLnByb3RvdHlwZTtcbn1cblxudmFyIHJFcnJvcktleSA9IC9eKD86bmFtZXxtZXNzYWdlfHN0YWNrfGNhdXNlKSQvO1xuZnVuY3Rpb24gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihvYmopIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmIChpc1VudHlwZWRFcnJvcihvYmopKSB7XG4gICAgICAgIHJldCA9IG5ldyBPcGVyYXRpb25hbEVycm9yKG9iaik7XG4gICAgICAgIHJldC5uYW1lID0gb2JqLm5hbWU7XG4gICAgICAgIHJldC5tZXNzYWdlID0gb2JqLm1lc3NhZ2U7XG4gICAgICAgIHJldC5zdGFjayA9IG9iai5zdGFjaztcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFyRXJyb3JLZXkudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICB1dGlsLm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCB2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHdyYXBBc09wZXJhdGlvbmFsRXJyb3IobWF5YmVXcmFwQXNFcnJvcihlcnIpKTtcbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2Uod3JhcHBlZCk7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3Qod3JhcHBlZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIW11bHRpQXJncykge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbm9kZWJhY2tGb3JQcm9taXNlO1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gc3ByZWFkQWRhcHRlcih2YWwsIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHZhbCkpIHJldHVybiBzdWNjZXNzQWRhcHRlci5jYWxsKHByb21pc2UsIHZhbCwgbm9kZWJhY2spO1xuICAgIHZhciByZXQgPVxuICAgICAgICB0cnlDYXRjaChub2RlYmFjaykuYXBwbHkocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCBbbnVsbF0uY29uY2F0KHZhbCkpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3VjY2Vzc0FkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgdmFyIHJldCA9IHZhbCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwpXG4gICAgICAgIDogdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwsIHZhbCk7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXJyb3JBZGFwdGVyKHJlYXNvbiwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgICAgdmFyIG5ld1JlYXNvbiA9IG5ldyBFcnJvcihyZWFzb24gKyBcIlwiKTtcbiAgICAgICAgbmV3UmVhc29uLmNhdXNlID0gcmVhc29uO1xuICAgICAgICByZWFzb24gPSBuZXdSZWFzb247XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYXRjaChub2RlYmFjaykuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbik7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hc0NhbGxiYWNrID0gUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG5vZGViYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgYWRhcHRlciA9IHN1Y2Nlc3NBZGFwdGVyO1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdChvcHRpb25zKS5zcHJlYWQpIHtcbiAgICAgICAgICAgIGFkYXB0ZXIgPSBzcHJlYWRBZGFwdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgZXJyb3JBZGFwdGVyLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG5vZGViYWNrXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG52YXIgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJjaXJjdWxhciBwcm9taXNlIHJlc29sdXRpb24gY2hhaW5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xufTtcbnZhciByZWZsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbih0aGlzLl90YXJnZXQoKSk7XG59O1xudmFyIGFwaVJlamVjdGlvbiA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKG1zZykpO1xufTtcbmZ1bmN0aW9uIFByb3h5YWJsZSgpIHt9XG52YXIgVU5ERUZJTkVEX0JJTkRJTkcgPSB7fTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIGdldERvbWFpbjtcbmlmICh1dGlsLmlzTm9kZSkge1xuICAgIGdldERvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmV0ID0gcHJvY2Vzcy5kb21haW47XG4gICAgICAgIGlmIChyZXQgPT09IHVuZGVmaW5lZCkgcmV0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSwgXCJfZ2V0RG9tYWluXCIsIGdldERvbWFpbik7XG5cbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgQXN5bmMgPSBfZGVyZXFfKFwiLi9hc3luY1wiKTtcbnZhciBhc3luYyA9IG5ldyBBc3luYygpO1xuZXM1LmRlZmluZVByb3BlcnR5KFByb21pc2UsIFwiX2FzeW5jXCIsIHt2YWx1ZTogYXN5bmN9KTtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gUHJvbWlzZS5UeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xuUHJvbWlzZS5SYW5nZUVycm9yID0gZXJyb3JzLlJhbmdlRXJyb3I7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yID0gZXJyb3JzLkNhbmNlbGxhdGlvbkVycm9yO1xuUHJvbWlzZS5UaW1lb3V0RXJyb3IgPSBlcnJvcnMuVGltZW91dEVycm9yO1xuUHJvbWlzZS5PcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLlJlamVjdGlvbkVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLkFnZ3JlZ2F0ZUVycm9yID0gZXJyb3JzLkFnZ3JlZ2F0ZUVycm9yO1xudmFyIElOVEVSTkFMID0gZnVuY3Rpb24oKXt9O1xudmFyIEFQUExZID0ge307XG52YXIgTkVYVF9GSUxURVIgPSB7fTtcbnZhciB0cnlDb252ZXJ0VG9Qcm9taXNlID0gX2RlcmVxXyhcIi4vdGhlbmFibGVzXCIpKFByb21pc2UsIElOVEVSTkFMKTtcbnZhciBQcm9taXNlQXJyYXkgPVxuICAgIF9kZXJlcV8oXCIuL3Byb21pc2VfYXJyYXlcIikoUHJvbWlzZSwgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpO1xudmFyIENvbnRleHQgPSBfZGVyZXFfKFwiLi9jb250ZXh0XCIpKFByb21pc2UpO1xuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG52YXIgY3JlYXRlQ29udGV4dCA9IENvbnRleHQuY3JlYXRlO1xudmFyIGRlYnVnID0gX2RlcmVxXyhcIi4vZGVidWdnYWJpbGl0eVwiKShQcm9taXNlLCBDb250ZXh0KTtcbnZhciBDYXB0dXJlZFRyYWNlID0gZGVidWcuQ2FwdHVyZWRUcmFjZTtcbnZhciBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ID1cbiAgICBfZGVyZXFfKFwiLi9maW5hbGx5XCIpKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UsIE5FWFRfRklMVEVSKTtcbnZhciBjYXRjaEZpbHRlciA9IF9kZXJlcV8oXCIuL2NhdGNoX2ZpbHRlclwiKShORVhUX0ZJTFRFUik7XG52YXIgbm9kZWJhY2tGb3JQcm9taXNlID0gX2RlcmVxXyhcIi4vbm9kZWJhY2tcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbmZ1bmN0aW9uIGNoZWNrKHNlbGYsIGV4ZWN1dG9yKSB7XG4gICAgaWYgKHNlbGYgPT0gbnVsbCB8fCBzZWxmLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgaW52b2tlZCBkaXJlY3RseVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZXhlY3V0b3IpKTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikge1xuICAgIGlmIChleGVjdXRvciAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgY2hlY2sodGhpcywgZXhlY3V0b3IpO1xuICAgIH1cbiAgICB0aGlzLl9iaXRGaWVsZCA9IDA7XG4gICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9wcm9taXNlMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZWNlaXZlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVzb2x2ZUZyb21FeGVjdXRvcihleGVjdXRvcik7XG4gICAgdGhpcy5fcHJvbWlzZUNyZWF0ZWQoKTtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ3JlYXRlZFwiLCB0aGlzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F1Z2h0ID0gUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgIHZhciBjYXRjaEluc3RhbmNlcyA9IG5ldyBBcnJheShsZW4gLSAxKSxcbiAgICAgICAgICAgIGogPSAwLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hJbnN0YW5jZXNbaisrXSA9IGl0ZW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJDYXRjaCBzdGF0ZW1lbnQgcHJlZGljYXRlOiBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiZXhwZWN0aW5nIGFuIG9iamVjdCBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2hJbnN0YW5jZXMubGVuZ3RoID0gajtcbiAgICAgICAgZm4gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBjYXRjaEZpbHRlcihjYXRjaEluc3RhbmNlcywgZm4sIHRoaXMpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIGZuKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnJlZmxlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4ocmVmbGVjdEhhbmRsZXIsXG4gICAgICAgIHJlZmxlY3RIYW5kbGVyLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCkge1xuICAgIGlmIChkZWJ1Zy53YXJuaW5ncygpICYmIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmXG4gICAgICAgIHR5cGVvZiBkaWRGdWxmaWxsICE9PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgdHlwZW9mIGRpZFJlamVjdCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhciBtc2cgPSBcIi50aGVuKCkgb25seSBhY2NlcHRzIGZ1bmN0aW9ucyBidXQgd2FzIHBhc3NlZDogXCIgK1xuICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcoZGlkRnVsZmlsbCk7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbXNnICs9IFwiLCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZGlkUmVqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl93YXJuKG1zZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24gKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCkge1xuICAgIHZhciBwcm9taXNlID1cbiAgICAgICAgdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgIHByb21pc2UuX3NldElzRmluYWwoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNwcmVhZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYWxsKCkuX3RoZW4oZm4sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBBUFBMWSwgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV0ID0ge1xuICAgICAgICBpc0Z1bGZpbGxlZDogZmFsc2UsXG4gICAgICAgIGlzUmVqZWN0ZWQ6IGZhbHNlLFxuICAgICAgICBmdWxmaWxsbWVudFZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIHJlamVjdGlvblJlYXNvbjogdW5kZWZpbmVkXG4gICAgfTtcbiAgICBpZiAodGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIHJldC5mdWxmaWxsbWVudFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgICAgICByZXQuaXNGdWxmaWxsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgcmV0LnJlamVjdGlvblJlYXNvbiA9IHRoaXMucmVhc29uKCk7XG4gICAgICAgIHJldC5pc1JlamVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5fd2FybihcIi5hbGwoKSB3YXMgcGFzc2VkIGFyZ3VtZW50cyBidXQgaXQgZG9lcyBub3QgdGFrZSBhbnlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZUFycmF5KHRoaXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIHRoaXMuY2F1Z2h0KHV0aWwub3JpZ2luYXRlc0Zyb21SZWplY3Rpb24sIGZuKTtcbn07XG5cblByb21pc2UuZ2V0TmV3TGlicmFyeUNvcHkgPSBtb2R1bGUuZXhwb3J0cztcblxuUHJvbWlzZS5pcyA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgUHJvbWlzZTtcbn07XG5cblByb21pc2UuZnJvbU5vZGUgPSBQcm9taXNlLmZyb21DYWxsYmFjayA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdmFyIG11bHRpQXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gISFPYmplY3QoYXJndW1lbnRzWzFdKS5tdWx0aUFyZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goZm4pKG5vZGViYWNrRm9yUHJvbWlzZShyZXQsIG11bHRpQXJncykpO1xuICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldC5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoIXJldC5faXNGYXRlU2VhbGVkKCkpIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UuY2FzdCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgcmV0ID0gdHJ5Q29udmVydFRvUHJvbWlzZShvYmopO1xuICAgIGlmICghKHJldCBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICByZXQuX3NldEZ1bGZpbGxlZCgpO1xuICAgICAgICByZXQuX3JlamVjdGlvbkhhbmRsZXIwID0gb2JqO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5yZXNvbHZlID0gUHJvbWlzZS5mdWxmaWxsZWQgPSBQcm9taXNlLmNhc3Q7XG5cblByb21pc2UucmVqZWN0ID0gUHJvbWlzZS5yZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICByZXQuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2Uuc2V0U2NoZWR1bGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBhc3luYy5zZXRTY2hlZHVsZXIoZm4pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RoZW4gPSBmdW5jdGlvbiAoXG4gICAgZGlkRnVsZmlsbCxcbiAgICBkaWRSZWplY3QsXG4gICAgXywgICAgcmVjZWl2ZXIsXG4gICAgaW50ZXJuYWxEYXRhXG4pIHtcbiAgICB2YXIgaGF2ZUludGVybmFsRGF0YSA9IGludGVybmFsRGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgIHZhciBwcm9taXNlID0gaGF2ZUludGVybmFsRGF0YSA/IGludGVybmFsRGF0YSA6IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdmFyIGJpdEZpZWxkID0gdGFyZ2V0Ll9iaXRGaWVsZDtcblxuICAgIGlmICghaGF2ZUludGVybmFsRGF0YSkge1xuICAgICAgICBwcm9taXNlLl9wcm9wYWdhdGVGcm9tKHRoaXMsIDMpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKCh0aGlzLl9iaXRGaWVsZCAmIDIwOTcxNTIpICE9PSAwKSkge1xuICAgICAgICAgICAgaWYgKCEoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gdGhpcy5fYm91bmRWYWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRhcmdldCA9PT0gdGhpcyA/IHVuZGVmaW5lZCA6IHRoaXMuX2JvdW5kVG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNoYWluZWRcIiwgdGhpcywgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIGlmICghKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGhhbmRsZXIsIHZhbHVlLCBzZXR0bGVyID0gdGFyZ2V0Ll9zZXR0bGVQcm9taXNlQ3R4O1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGFyZ2V0Ll9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRGdWxmaWxsO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRhcmdldC5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRSZWplY3Q7XG4gICAgICAgICAgICB0YXJnZXQuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldHRsZXIgPSB0YXJnZXQuX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXI7XG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgdGFyZ2V0Ll9hdHRhY2hFeHRyYVRyYWNlKHZhbHVlKTtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRSZWplY3Q7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYy5pbnZva2Uoc2V0dGxlciwgdGFyZ2V0LCB7XG4gICAgICAgICAgICBoYW5kbGVyOiBkb21haW4gPT09IG51bGwgPyBoYW5kbGVyXG4gICAgICAgICAgICAgICAgOiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgICAgICB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBoYW5kbGVyKSksXG4gICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICAgICAgcmVjZWl2ZXI6IHJlY2VpdmVyLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC5fYWRkQ2FsbGJhY2tzKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIGRvbWFpbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9iaXRGaWVsZCAmIDY1NTM1O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRmF0ZVNlYWxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTE3NTA2MDQ4KSAhPT0gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZvbGxvd2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNjcxMDg4NjQpID09PSA2NzEwODg2NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAodGhpcy5fYml0RmllbGQgJiAtNjU1MzYpIHxcbiAgICAgICAgKGxlbiAmIDY1NTM1KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDMzNTU0NDMyO1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VGdWxmaWxsZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDE2Nzc3MjE2O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VSZWplY3RlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDY3MTA4ODY0O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VSZXNvbHZlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRJc0ZpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA0MTk0MzA0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRmluYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDQxOTQzMDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjY1NTM2KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNjU1MzY7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNhbmNlbGxlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRXaWxsQmVDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgODM4ODYwODtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRBc3luY0d1YXJhbnRlZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYXN5bmMuaGFzQ3VzdG9tU2NoZWR1bGVyKCkpIHJldHVybjtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTM0MjE3NzI4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlY2VpdmVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gaW5kZXggPT09IDAgPyB0aGlzLl9yZWNlaXZlcjAgOiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDNdO1xuICAgIGlmIChyZXQgPT09IFVOREVGSU5FRF9CSU5ESU5HKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChyZXQgPT09IHVuZGVmaW5lZCAmJiB0aGlzLl9pc0JvdW5kKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvdW5kVmFsdWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAyXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsbWVudEhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDBdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdGlvbkhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDFdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2JvdW5kVmFsdWUgPSBmdW5jdGlvbigpIHt9O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbWlncmF0ZUNhbGxiYWNrMCA9IGZ1bmN0aW9uIChmb2xsb3dlcikge1xuICAgIHZhciBiaXRGaWVsZCA9IGZvbGxvd2VyLl9iaXRGaWVsZDtcbiAgICB2YXIgZnVsZmlsbCA9IGZvbGxvd2VyLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgIHZhciByZWplY3QgPSBmb2xsb3dlci5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgdmFyIHByb21pc2UgPSBmb2xsb3dlci5fcHJvbWlzZTA7XG4gICAgdmFyIHJlY2VpdmVyID0gZm9sbG93ZXIuX3JlY2VpdmVyQXQoMCk7XG4gICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gVU5ERUZJTkVEX0JJTkRJTkc7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFja0F0ID0gZnVuY3Rpb24gKGZvbGxvd2VyLCBpbmRleCkge1xuICAgIHZhciBmdWxmaWxsID0gZm9sbG93ZXIuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGluZGV4KTtcbiAgICB2YXIgcmVqZWN0ID0gZm9sbG93ZXIuX3JlamVjdGlvbkhhbmRsZXJBdChpbmRleCk7XG4gICAgdmFyIHByb21pc2UgPSBmb2xsb3dlci5fcHJvbWlzZUF0KGluZGV4KTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBmb2xsb3dlci5fcmVjZWl2ZXJBdChpbmRleCk7XG4gICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gVU5ERUZJTkVEX0JJTkRJTkc7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2FkZENhbGxiYWNrcyA9IGZ1bmN0aW9uIChcbiAgICBmdWxmaWxsLFxuICAgIHJlamVjdCxcbiAgICBwcm9taXNlLFxuICAgIHJlY2VpdmVyLFxuICAgIGRvbWFpblxuKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fbGVuZ3RoKCk7XG5cbiAgICBpZiAoaW5kZXggPj0gNjU1MzUgLSA0KSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgIH1cblxuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9wcm9taXNlMCA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuX3JlY2VpdmVyMCA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAodHlwZW9mIGZ1bGZpbGwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gZnVsZmlsbCA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZ1bGZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyByZWplY3QgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJhc2UgPSBpbmRleCAqIDQgLSA0O1xuICAgICAgICB0aGlzW2Jhc2UgKyAyXSA9IHByb21pc2U7XG4gICAgICAgIHRoaXNbYmFzZSArIDNdID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmICh0eXBlb2YgZnVsZmlsbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAwXSA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gZnVsZmlsbCA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZ1bGZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXNbYmFzZSArIDFdID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyByZWplY3QgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3NldExlbmd0aChpbmRleCArIDEpO1xuICAgIHJldHVybiBpbmRleDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChwcm94eWFibGUsIGFyZykge1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJnLCBwcm94eWFibGUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlLCBzaG91bGRCaW5kKSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiAxMTc1MDYwNDgpICE9PSAwKSkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcylcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdENhbGxiYWNrKG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCksIGZhbHNlKTtcbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcyk7XG4gICAgaWYgKCEobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHJldHVybiB0aGlzLl9mdWxmaWxsKHZhbHVlKTtcblxuICAgIGlmIChzaG91bGRCaW5kKSB0aGlzLl9wcm9wYWdhdGVGcm9tKG1heWJlUHJvbWlzZSwgMik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9yZWplY3QobWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2xlbmd0aCgpO1xuICAgICAgICBpZiAobGVuID4gMCkgcHJvbWlzZS5fbWlncmF0ZUNhbGxiYWNrMCh0aGlzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fbWlncmF0ZUNhbGxiYWNrQXQodGhpcywgaSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0Rm9sbG93aW5nKCk7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICAgICAgdGhpcy5fc2V0Rm9sbG93ZWUocHJvbWlzZSk7XG4gICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICB0aGlzLl9mdWxmaWxsKHByb21pc2UuX3ZhbHVlKCkpO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHByb21pc2UuX3JlYXNvbigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVhc29uID0gbmV3IENhbmNlbGxhdGlvbkVycm9yKFwibGF0ZSBjYW5jZWxsYXRpb24gb2JzZXJ2ZXJcIik7XG4gICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdENhbGxiYWNrID1cbmZ1bmN0aW9uKHJlYXNvbiwgc3luY2hyb25vdXMsIGlnbm9yZU5vbkVycm9yV2FybmluZ3MpIHtcbiAgICB2YXIgdHJhY2UgPSB1dGlsLmVuc3VyZUVycm9yT2JqZWN0KHJlYXNvbik7XG4gICAgdmFyIGhhc1N0YWNrID0gdHJhY2UgPT09IHJlYXNvbjtcbiAgICBpZiAoIWhhc1N0YWNrICYmICFpZ25vcmVOb25FcnJvcldhcm5pbmdzICYmIGRlYnVnLndhcm5pbmdzKCkpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcImEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQgd2l0aCBhIG5vbi1lcnJvcjogXCIgK1xuICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhyZWFzb24pO1xuICAgICAgICB0aGlzLl93YXJuKG1lc3NhZ2UsIHRydWUpO1xuICAgIH1cbiAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlLCBzeW5jaHJvbm91cyA/IGhhc1N0YWNrIDogZmFsc2UpO1xuICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVGcm9tRXhlY3V0b3IgPSBmdW5jdGlvbiAoZXhlY3V0b3IpIHtcbiAgICBpZiAoZXhlY3V0b3IgPT09IElOVEVSTkFMKSByZXR1cm47XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHRoaXMuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgc3luY2hyb25vdXMgPSB0cnVlO1xuICAgIHZhciByID0gdGhpcy5fZXhlY3V0ZShleGVjdXRvciwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgc3luY2hyb25vdXMpO1xuICAgIH0pO1xuICAgIHN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgdGhpcy5fcG9wQ29udGV4dCgpO1xuXG4gICAgaWYgKHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyLCB0cnVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyID0gZnVuY3Rpb24gKFxuICAgIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZVxuKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSByZXR1cm47XG4gICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgeDtcbiAgICBpZiAocmVjZWl2ZXIgPT09IEFQUExZKSB7XG4gICAgICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlLmxlbmd0aCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgeCA9IGVycm9yT2JqO1xuICAgICAgICAgICAgeC5lID0gbmV3IFR5cGVFcnJvcihcImNhbm5vdCAuc3ByZWFkKCkgYSBub24tYXJyYXk6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHggPSB0cnlDYXRjaChoYW5kbGVyKS5hcHBseSh0aGlzLl9ib3VuZFZhbHVlKCksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB0cnlDYXRjaChoYW5kbGVyKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgfVxuICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICBiaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkgcmV0dXJuO1xuXG4gICAgaWYgKHggPT09IE5FWFRfRklMVEVSKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh4ID09PSBlcnJvck9iaikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayh4LmUsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoeCwgcHJvbWlzZUNyZWF0ZWQsIFwiXCIsICBwcm9taXNlLCB0aGlzKTtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl90YXJnZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcztcbiAgICB3aGlsZSAocmV0Ll9pc0ZvbGxvd2luZygpKSByZXQgPSByZXQuX2ZvbGxvd2VlKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mb2xsb3dlZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGb2xsb3dlZSA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9IHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZSA9IGZ1bmN0aW9uKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSkge1xuICAgIHZhciBpc1Byb21pc2UgPSBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZTtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICB2YXIgYXN5bmNHdWFyYW50ZWVkID0gKChiaXRGaWVsZCAmIDEzNDIxNzcyOCkgIT09IDApO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkge1xuICAgICAgICBpZiAoaXNQcm9taXNlKSBwcm9taXNlLl9pbnZva2VJbnRlcm5hbE9uQ2FuY2VsKCk7XG5cbiAgICAgICAgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dCAmJlxuICAgICAgICAgICAgcmVjZWl2ZXIuaXNGaW5hbGx5SGFuZGxlcigpKSB7XG4gICAgICAgICAgICByZWNlaXZlci5jYW5jZWxQcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgICAgIGlmICh0cnlDYXRjaChoYW5kbGVyKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPT09IHJlZmxlY3RIYW5kbGVyKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKHJlZmxlY3RIYW5kbGVyLmNhbGwocmVjZWl2ZXIpKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFByb3h5YWJsZSkge1xuICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VDYW5jZWxsZWQocHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlIHx8IHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlQXJyYXkpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2NhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjZWl2ZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKCFpc1Byb21pc2UpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbChyZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFzeW5jR3VhcmFudGVlZCkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQcm94eWFibGUpIHtcbiAgICAgICAgaWYgKCFyZWNlaXZlci5faXNSZXNvbHZlZCgpKSB7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlUmVqZWN0ZWQodmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2UpIHtcbiAgICAgICAgaWYgKGFzeW5jR3VhcmFudGVlZCkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXIgPSBmdW5jdGlvbihjdHgpIHtcbiAgICB2YXIgaGFuZGxlciA9IGN0eC5oYW5kbGVyO1xuICAgIHZhciBwcm9taXNlID0gY3R4LnByb21pc2U7XG4gICAgdmFyIHJlY2VpdmVyID0gY3R4LnJlY2VpdmVyO1xuICAgIHZhciB2YWx1ZSA9IGN0eC52YWx1ZTtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIShwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbChyZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyKGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VDdHggPSBmdW5jdGlvbihjdHgpIHtcbiAgICB0aGlzLl9zZXR0bGVQcm9taXNlKGN0eC5wcm9taXNlLCBjdHguaGFuZGxlciwgY3R4LnJlY2VpdmVyLCBjdHgudmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2UwID0gZnVuY3Rpb24oaGFuZGxlciwgdmFsdWUsIGJpdEZpZWxkKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlMDtcbiAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KDApO1xuICAgIHRoaXMuX3Byb21pc2UwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JlY2VpdmVyMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICB2YXIgYmFzZSA9IGluZGV4ICogNCAtIDQ7XG4gICAgdGhpc1tiYXNlICsgMl0gPVxuICAgIHRoaXNbYmFzZSArIDNdID1cbiAgICB0aGlzW2Jhc2UgKyAwXSA9XG4gICAgdGhpc1tiYXNlICsgMV0gPSB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMTE3NTA2MDQ4KSA+Pj4gMTYpKSByZXR1cm47XG4gICAgaWYgKHZhbHVlID09PSB0aGlzKSB7XG4gICAgICAgIHZhciBlcnIgPSBtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpO1xuICAgICAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3QoZXJyKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RnVsZmlsbGVkKCk7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB2YWx1ZTtcblxuICAgIGlmICgoYml0RmllbGQgJiA2NTUzNSkgPiAwKSB7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMTM0MjE3NzI4KSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhc3luYy5zZXR0bGVQcm9taXNlcyh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAxMTc1MDYwNDgpID4+PiAxNikpIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3RlZCgpO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSByZWFzb247XG5cbiAgICBpZiAodGhpcy5faXNGaW5hbCgpKSB7XG4gICAgICAgIHJldHVybiBhc3luYy5mYXRhbEVycm9yKHJlYXNvbiwgdXRpbC5pc05vZGUpO1xuICAgIH1cblxuICAgIGlmICgoYml0RmllbGQgJiA2NTUzNSkgPiAwKSB7XG4gICAgICAgIGFzeW5jLnNldHRsZVByb21pc2VzKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsUHJvbWlzZXMgPSBmdW5jdGlvbiAobGVuLCB2YWx1ZSkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXJBdChpKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlQXQoaSk7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoaSk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChpKTtcbiAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RQcm9taXNlcyA9IGZ1bmN0aW9uIChsZW4sIHJlYXNvbikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9yZWplY3Rpb25IYW5kbGVyQXQoaSk7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZUF0KGkpO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KGkpO1xuICAgICAgICB0aGlzLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXgoaSk7XG4gICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHJlYXNvbik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIHZhciBsZW4gPSAoYml0RmllbGQgJiA2NTUzNSk7XG5cbiAgICBpZiAobGVuID4gMCkge1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDE2ODQyNzUyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZTAodGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAsIHJlYXNvbiwgYml0RmllbGQpO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0UHJvbWlzZXMobGVuLCByZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlMCh0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwLCB2YWx1ZSwgYml0RmllbGQpO1xuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbFByb21pc2VzKGxlbiwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG4gICAgdGhpcy5fY2xlYXJDYW5jZWxsYXRpb25EYXRhKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlZFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGRlZmVyUmVzb2x2ZSh2KSB7dGhpcy5wcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodik7fVxuZnVuY3Rpb24gZGVmZXJSZWplY3Qodikge3RoaXMucHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sodiwgZmFsc2UpO31cblxuUHJvbWlzZS5kZWZlciA9IFByb21pc2UucGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJQcm9taXNlLmRlZmVyXCIsIFwibmV3IFByb21pc2VcIik7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgcmVzb2x2ZTogZGVmZXJSZXNvbHZlLFxuICAgICAgICByZWplY3Q6IGRlZmVyUmVqZWN0XG4gICAgfTtcbn07XG5cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgXCJfbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IpO1xuXG5fZGVyZXFfKFwiLi9tZXRob2RcIikoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbixcbiAgICBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9iaW5kXCIpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9jYW5jZWxcIikoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2RpcmVjdF9yZXNvbHZlXCIpKFByb21pc2UpO1xuX2RlcmVxXyhcIi4vc3luY2hyb25vdXNfaW5zcGVjdGlvblwiKShQcm9taXNlKTtcbl9kZXJlcV8oXCIuL2pvaW5cIikoXG4gICAgUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgYXN5bmMsIGdldERvbWFpbik7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuUHJvbWlzZS52ZXJzaW9uID0gXCIzLjUuMFwiO1xuX2RlcmVxXygnLi9tYXAuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vY2FsbF9nZXQuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vdXNpbmcuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIGNyZWF0ZUNvbnRleHQsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3RpbWVycy5qcycpKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2dlbmVyYXRvcnMuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBQcm94eWFibGUsIGRlYnVnKTtcbl9kZXJlcV8oJy4vbm9kZWlmeS5qcycpKFByb21pc2UpO1xuX2RlcmVxXygnLi9wcm9taXNpZnkuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5fZGVyZXFfKCcuL3Byb3BzLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yYWNlLmpzJykoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL3JlZHVjZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9zZXR0bGUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGRlYnVnKTtcbl9kZXJlcV8oJy4vc29tZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vZmlsdGVyLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9lYWNoLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9hbnkuanMnKShQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZS5wcm90b3R5cGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZnVuY3Rpb24gZmlsbFR5cGVzKHZhbHVlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9wcm9taXNlMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcmVjZWl2ZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIC8vIENvbXBsZXRlIHNsYWNrIHRyYWNraW5nLCBvcHQgb3V0IG9mIGZpZWxkLXR5cGUgdHJhY2tpbmcgYW5kICAgICAgICAgICBcbiAgICAvLyBzdGFiaWxpemUgbWFwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHthOiAxfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YjogMn0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2M6IDN9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmdW5jdGlvbigpe30pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXModW5kZWZpbmVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhuZXcgUHJvbWlzZShJTlRFUk5BTCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBkZWJ1Zy5zZXRCb3VuZHMoQXN5bmMuZmlyc3RMaW5lRXJyb3IsIHV0aWwubGFzdExpbmVFcnJvcik7ICAgICAgICAgICAgICAgXG4gICAgcmV0dXJuIFByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG59O1xuXG59LHtcIi4vYW55LmpzXCI6MSxcIi4vYXN5bmNcIjoyLFwiLi9iaW5kXCI6MyxcIi4vY2FsbF9nZXQuanNcIjo1LFwiLi9jYW5jZWxcIjo2LFwiLi9jYXRjaF9maWx0ZXJcIjo3LFwiLi9jb250ZXh0XCI6OCxcIi4vZGVidWdnYWJpbGl0eVwiOjksXCIuL2RpcmVjdF9yZXNvbHZlXCI6MTAsXCIuL2VhY2guanNcIjoxMSxcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi9maWx0ZXIuanNcIjoxNCxcIi4vZmluYWxseVwiOjE1LFwiLi9nZW5lcmF0b3JzLmpzXCI6MTYsXCIuL2pvaW5cIjoxNyxcIi4vbWFwLmpzXCI6MTgsXCIuL21ldGhvZFwiOjE5LFwiLi9ub2RlYmFja1wiOjIwLFwiLi9ub2RlaWZ5LmpzXCI6MjEsXCIuL3Byb21pc2VfYXJyYXlcIjoyMyxcIi4vcHJvbWlzaWZ5LmpzXCI6MjQsXCIuL3Byb3BzLmpzXCI6MjUsXCIuL3JhY2UuanNcIjoyNyxcIi4vcmVkdWNlLmpzXCI6MjgsXCIuL3NldHRsZS5qc1wiOjMwLFwiLi9zb21lLmpzXCI6MzEsXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIjozMixcIi4vdGhlbmFibGVzXCI6MzMsXCIuL3RpbWVycy5qc1wiOjM0LFwiLi91c2luZy5qc1wiOjM1LFwiLi91dGlsXCI6MzZ9XSwyMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5mdW5jdGlvbiB0b1Jlc29sdXRpb25WYWx1ZSh2YWwpIHtcbiAgICBzd2l0Y2godmFsKSB7XG4gICAgY2FzZSAtMjogcmV0dXJuIFtdO1xuICAgIGNhc2UgLTM6IHJldHVybiB7fTtcbiAgICBjYXNlIC02OiByZXR1cm4gbmV3IE1hcCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlLl9wcm9wYWdhdGVGcm9tKHZhbHVlcywgMyk7XG4gICAgfVxuICAgIHByb21pc2UuX3NldE9uQ2FuY2VsKHRoaXMpO1xuICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcbiAgICB0aGlzLl9sZW5ndGggPSAwO1xuICAgIHRoaXMuX3RvdGFsUmVzb2x2ZWQgPSAwO1xuICAgIHRoaXMuX2luaXQodW5kZWZpbmVkLCAtMik7XG59XG51dGlsLmluaGVyaXRzKFByb21pc2VBcnJheSwgUHJveHlhYmxlKTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KF8sIHJlc29sdmVWYWx1ZUlmRW1wdHkpIHtcbiAgICB2YXIgdmFsdWVzID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzLl92YWx1ZXMsIHRoaXMuX3Byb21pc2UpO1xuICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdGFyZ2V0KCk7XG4gICAgICAgIHZhciBiaXRGaWVsZCA9IHZhbHVlcy5fYml0RmllbGQ7XG4gICAgICAgIDtcbiAgICAgICAgdGhpcy5fdmFsdWVzID0gdmFsdWVzO1xuXG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzLl90aGVuKFxuICAgICAgICAgICAgICAgIGluaXQsXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVqZWN0LFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIHJlc29sdmVWYWx1ZUlmRW1wdHlcbiAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFsdWVzID0gdmFsdWVzLl92YWx1ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0KHZhbHVlcy5fcmVhc29uKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhbHVlcyA9IHV0aWwuYXNBcnJheSh2YWx1ZXMpO1xuICAgIGlmICh2YWx1ZXMgPT09IG51bGwpIHtcbiAgICAgICAgdmFyIGVyciA9IGFwaVJlamVjdGlvbihcbiAgICAgICAgICAgIFwiZXhwZWN0aW5nIGFuIGFycmF5IG9yIGFuIGl0ZXJhYmxlIG9iamVjdCBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyh2YWx1ZXMpKS5yZWFzb24oKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2soZXJyLCBmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAocmVzb2x2ZVZhbHVlSWZFbXB0eSA9PT0gLTUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVFbXB0eUFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRvUmVzb2x1dGlvblZhbHVlKHJlc29sdmVWYWx1ZUlmRW1wdHkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2l0ZXJhdGUodmFsdWVzKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2l0ZXJhdGUgPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICB2YXIgbGVuID0gdGhpcy5nZXRBY3R1YWxMZW5ndGgodmFsdWVzLmxlbmd0aCk7XG4gICAgdGhpcy5fbGVuZ3RoID0gbGVuO1xuICAgIHRoaXMuX3ZhbHVlcyA9IHRoaXMuc2hvdWxkQ29weVZhbHVlcygpID8gbmV3IEFycmF5KGxlbikgOiB0aGlzLl92YWx1ZXM7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuX3Byb21pc2U7XG4gICAgdmFyIGlzUmVzb2x2ZWQgPSBmYWxzZTtcbiAgICB2YXIgYml0RmllbGQgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWVzW2ldLCByZXN1bHQpO1xuXG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICAgICAgYml0RmllbGQgPSBtYXliZVByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYml0RmllbGQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgIGlmIChiaXRGaWVsZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChiaXRGaWVsZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9wcm94eSh0aGlzLCBpKTtcbiAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSBtYXliZVByb21pc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VGdWxmaWxsZWQobWF5YmVQcm9taXNlLl92YWx1ZSgpLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZVJlamVjdGVkKG1heWJlUHJvbWlzZS5fcmVhc29uKCksIGkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUNhbmNlbGxlZChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKG1heWJlUHJvbWlzZSwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpc1Jlc29sdmVkKSByZXN1bHQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faXNSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzID09PSBudWxsO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlcyA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpIHx8ICF0aGlzLl9wcm9taXNlLl9pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhbmNlbCgpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3ZhbHVlcyA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBmYWxzZSk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3RvdGFsUmVzb2x2ZWQrKztcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhbHVlcy5jYW5jZWwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1tpXSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaV0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICByZXR1cm4gbGVuO1xufTtcblxucmV0dXJuIFByb21pc2VBcnJheTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBUSElTID0ge307XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgbm9kZWJhY2tGb3JQcm9taXNlID0gX2RlcmVxXyhcIi4vbm9kZWJhY2tcIik7XG52YXIgd2l0aEFwcGVuZGVkID0gdXRpbC53aXRoQXBwZW5kZWQ7XG52YXIgbWF5YmVXcmFwQXNFcnJvciA9IHV0aWwubWF5YmVXcmFwQXNFcnJvcjtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgVHlwZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlR5cGVFcnJvcjtcbnZhciBkZWZhdWx0U3VmZml4ID0gXCJBc3luY1wiO1xudmFyIGRlZmF1bHRQcm9taXNpZmllZCA9IHtfX2lzUHJvbWlzaWZpZWRfXzogdHJ1ZX07XG52YXIgbm9Db3B5UHJvcHMgPSBbXG4gICAgXCJhcml0eVwiLCAgICBcImxlbmd0aFwiLFxuICAgIFwibmFtZVwiLFxuICAgIFwiYXJndW1lbnRzXCIsXG4gICAgXCJjYWxsZXJcIixcbiAgICBcImNhbGxlZVwiLFxuICAgIFwicHJvdG90eXBlXCIsXG4gICAgXCJfX2lzUHJvbWlzaWZpZWRfX1wiXG5dO1xudmFyIG5vQ29weVByb3BzUGF0dGVybiA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyBub0NvcHlQcm9wcy5qb2luKFwifFwiKSArIFwiKSRcIik7XG5cbnZhciBkZWZhdWx0RmlsdGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB1dGlsLmlzSWRlbnRpZmllcihuYW1lKSAmJlxuICAgICAgICBuYW1lLmNoYXJBdCgwKSAhPT0gXCJfXCIgJiZcbiAgICAgICAgbmFtZSAhPT0gXCJjb25zdHJ1Y3RvclwiO1xufTtcblxuZnVuY3Rpb24gcHJvcHNGaWx0ZXIoa2V5KSB7XG4gICAgcmV0dXJuICFub0NvcHlQcm9wc1BhdHRlcm4udGVzdChrZXkpO1xufVxuXG5mdW5jdGlvbiBpc1Byb21pc2lmaWVkKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuLl9faXNQcm9taXNpZmllZF9fID09PSB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNQcm9taXNpZmllZChvYmosIGtleSwgc3VmZml4KSB7XG4gICAgdmFyIHZhbCA9IHV0aWwuZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5ICsgc3VmZml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UHJvbWlzaWZpZWQpO1xuICAgIHJldHVybiB2YWwgPyBpc1Byb21pc2lmaWVkKHZhbCkgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNoZWNrVmFsaWQocmV0LCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIHZhciBrZXkgPSByZXRbaV07XG4gICAgICAgIGlmIChzdWZmaXhSZWdleHAudGVzdChrZXkpKSB7XG4gICAgICAgICAgICB2YXIga2V5V2l0aG91dEFzeW5jU3VmZml4ID0ga2V5LnJlcGxhY2Uoc3VmZml4UmVnZXhwLCBcIlwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmV0Lmxlbmd0aDsgaiArPSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJldFtqXSA9PT0ga2V5V2l0aG91dEFzeW5jU3VmZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcHJvbWlzaWZ5IGFuIEFQSSB0aGF0IGhhcyBub3JtYWwgbWV0aG9kcyB3aXRoICclcyctc3VmZml4XFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIiVzXCIsIHN1ZmZpeCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcHJvbWlzaWZpYWJsZU1ldGhvZHMob2JqLCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCwgZmlsdGVyKSB7XG4gICAgdmFyIGtleXMgPSB1dGlsLmluaGVyaXRlZERhdGFLZXlzKG9iaik7XG4gICAgdmFyIHJldCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHZhciBwYXNzZXNEZWZhdWx0RmlsdGVyID0gZmlsdGVyID09PSBkZWZhdWx0RmlsdGVyXG4gICAgICAgICAgICA/IHRydWUgOiBkZWZhdWx0RmlsdGVyKGtleSwgdmFsdWUsIG9iaik7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgIWlzUHJvbWlzaWZpZWQodmFsdWUpICYmXG4gICAgICAgICAgICAhaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkgJiZcbiAgICAgICAgICAgIGZpbHRlcihrZXksIHZhbHVlLCBvYmosIHBhc3Nlc0RlZmF1bHRGaWx0ZXIpKSB7XG4gICAgICAgICAgICByZXQucHVzaChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApO1xuICAgIHJldHVybiByZXQ7XG59XG5cbnZhciBlc2NhcGVJZGVudFJlZ2V4ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWyRdKS8sIFwiXFxcXCRcIik7XG59O1xuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZEV2YWw7XG5pZiAoIXRydWUpIHtcbnZhciBzd2l0Y2hDYXNlQXJndW1lbnRPcmRlciA9IGZ1bmN0aW9uKGxpa2VseUFyZ3VtZW50Q291bnQpIHtcbiAgICB2YXIgcmV0ID0gW2xpa2VseUFyZ3VtZW50Q291bnRdO1xuICAgIHZhciBtaW4gPSBNYXRoLm1heCgwLCBsaWtlbHlBcmd1bWVudENvdW50IC0gMSAtIDMpO1xuICAgIGZvcih2YXIgaSA9IGxpa2VseUFyZ3VtZW50Q291bnQgLSAxOyBpID49IG1pbjsgLS1pKSB7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50ICsgMTsgaSA8PSAzOyArK2kpIHtcbiAgICAgICAgcmV0LnB1c2goaSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG52YXIgYXJndW1lbnRTZXF1ZW5jZSA9IGZ1bmN0aW9uKGFyZ3VtZW50Q291bnQpIHtcbiAgICByZXR1cm4gdXRpbC5maWxsZWRSYW5nZShhcmd1bWVudENvdW50LCBcIl9hcmdcIiwgXCJcIik7XG59O1xuXG52YXIgcGFyYW1ldGVyRGVjbGFyYXRpb24gPSBmdW5jdGlvbihwYXJhbWV0ZXJDb3VudCkge1xuICAgIHJldHVybiB1dGlsLmZpbGxlZFJhbmdlKFxuICAgICAgICBNYXRoLm1heChwYXJhbWV0ZXJDb3VudCwgMyksIFwiX2FyZ1wiLCBcIlwiKTtcbn07XG5cbnZhciBwYXJhbWV0ZXJDb3VudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbi5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKGZuLmxlbmd0aCwgMTAyMyArIDEpLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59O1xuXG5tYWtlTm9kZVByb21pc2lmaWVkRXZhbCA9XG5mdW5jdGlvbihjYWxsYmFjaywgcmVjZWl2ZXIsIG9yaWdpbmFsTmFtZSwgZm4sIF8sIG11bHRpQXJncykge1xuICAgIHZhciBuZXdQYXJhbWV0ZXJDb3VudCA9IE1hdGgubWF4KDAsIHBhcmFtZXRlckNvdW50KGZuKSAtIDEpO1xuICAgIHZhciBhcmd1bWVudE9yZGVyID0gc3dpdGNoQ2FzZUFyZ3VtZW50T3JkZXIobmV3UGFyYW1ldGVyQ291bnQpO1xuICAgIHZhciBzaG91bGRQcm94eVRoaXMgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCIgfHwgcmVjZWl2ZXIgPT09IFRISVM7XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxGb3JBcmd1bWVudENvdW50KGNvdW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRTZXF1ZW5jZShjb3VudCkuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgY29tbWEgPSBjb3VudCA+IDAgPyBcIiwgXCIgOiBcIlwiO1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICBpZiAoc2hvdWxkUHJveHlUaGlzKSB7XG4gICAgICAgICAgICByZXQgPSBcInJldCA9IGNhbGxiYWNrLmNhbGwodGhpcywge3thcmdzfX0sIG5vZGViYWNrKTsgYnJlYWs7XFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXQgPSByZWNlaXZlciA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBcInJldCA9IGNhbGxiYWNrKHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiXG4gICAgICAgICAgICAgICAgOiBcInJldCA9IGNhbGxiYWNrLmNhbGwocmVjZWl2ZXIsIHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQucmVwbGFjZShcInt7YXJnc319XCIsIGFyZ3MpLnJlcGxhY2UoXCIsIFwiLCBjb21tYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSB7XG4gICAgICAgIHZhciByZXQgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50T3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJldCArPSBcImNhc2UgXCIgKyBhcmd1bWVudE9yZGVyW2ldICtcIjpcIiArXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDYWxsRm9yQXJndW1lbnRDb3VudChhcmd1bWVudE9yZGVyW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldCArPSBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkobGVuICsgMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgYXJnc1tpXSA9IG5vZGViYWNrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgW0NvZGVGb3JDYWxsXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKFwiW0NvZGVGb3JDYWxsXVwiLCAoc2hvdWxkUHJveHlUaGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJyZXQgPSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcXG5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmV0ID0gY2FsbGJhY2suYXBwbHkocmVjZWl2ZXIsIGFyZ3MpO1xcblwiKSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdmFyIGdldEZ1bmN0aW9uQ29kZSA9IHR5cGVvZiBjYWxsYmFjayA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChcInRoaXMgIT0gbnVsbCA/IHRoaXNbJ1wiK2NhbGxiYWNrK1wiJ10gOiBmblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZm5cIjtcbiAgICB2YXIgYm9keSA9IFwiJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHZhciByZXQgPSBmdW5jdGlvbiAoUGFyYW1ldGVycykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbm9kZWJhY2sgPSBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgXCIgKyBtdWx0aUFyZ3MgKyBcIik7ICAgXFxuXFxcbiAgICAgICAgICAgIHZhciByZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRyeUNhdGNoKFtHZXRGdW5jdGlvbkNvZGVdKTsgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHN3aXRjaChsZW4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbQ29kZUZvclN3aXRjaENhc2VdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhtYXliZVdyYXBBc0Vycm9yKHJldC5lKSwgdHJ1ZSwgdHJ1ZSk7XFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGlmICghcHJvbWlzZS5faXNGYXRlU2VhbGVkKCkpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpOyAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AocmV0LCAnX19pc1Byb21pc2lmaWVkX18nLCB0cnVlKTsgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIHJldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICBcIi5yZXBsYWNlKFwiW0NvZGVGb3JTd2l0Y2hDYXNlXVwiLCBnZW5lcmF0ZUFyZ3VtZW50U3dpdGNoQ2FzZSgpKVxuICAgICAgICAucmVwbGFjZShcIltHZXRGdW5jdGlvbkNvZGVdXCIsIGdldEZ1bmN0aW9uQ29kZSk7XG4gICAgYm9keSA9IGJvZHkucmVwbGFjZShcIlBhcmFtZXRlcnNcIiwgcGFyYW1ldGVyRGVjbGFyYXRpb24obmV3UGFyYW1ldGVyQ291bnQpKTtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiUHJvbWlzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWNlaXZlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aXRoQXBwZW5kZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWF5YmVXcmFwQXNFcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJub2RlYmFja0ZvclByb21pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHJ5Q2F0Y2hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3JPYmpcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibm90RW51bWVyYWJsZVByb3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSU5URVJOQUxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkpKFxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBmbixcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIsXG4gICAgICAgICAgICAgICAgICAgIHdpdGhBcHBlbmRlZCxcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVXcmFwQXNFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgbm9kZWJhY2tGb3JQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLnRyeUNhdGNoLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLmVycm9yT2JqLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wLFxuICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCk7XG59O1xufVxuXG5mdW5jdGlvbiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZShjYWxsYmFjaywgcmVjZWl2ZXIsIF8sIGZuLCBfXywgbXVsdGlBcmdzKSB7XG4gICAgdmFyIGRlZmF1bHRUaGlzID0gKGZ1bmN0aW9uKCkge3JldHVybiB0aGlzO30pKCk7XG4gICAgdmFyIG1ldGhvZCA9IGNhbGxiYWNrO1xuICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb21pc2lmaWVkKCkge1xuICAgICAgICB2YXIgX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmIChyZWNlaXZlciA9PT0gVEhJUykgX3JlY2VpdmVyID0gdGhpcztcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIHZhciBjYiA9IHR5cGVvZiBtZXRob2QgPT09IFwic3RyaW5nXCIgJiYgdGhpcyAhPT0gZGVmYXVsdFRoaXNcbiAgICAgICAgICAgID8gdGhpc1ttZXRob2RdIDogY2FsbGJhY2s7XG4gICAgICAgIHZhciBmbiA9IG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2IuYXBwbHkoX3JlY2VpdmVyLCB3aXRoQXBwZW5kZWQoYXJndW1lbnRzLCBmbikpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKG1heWJlV3JhcEFzRXJyb3IoZSksIHRydWUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJvbWlzZS5faXNGYXRlU2VhbGVkKCkpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChwcm9taXNpZmllZCwgXCJfX2lzUHJvbWlzaWZpZWRfX1wiLCB0cnVlKTtcbiAgICByZXR1cm4gcHJvbWlzaWZpZWQ7XG59XG5cbnZhciBtYWtlTm9kZVByb21pc2lmaWVkID0gY2FuRXZhbHVhdGVcbiAgICA/IG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsXG4gICAgOiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZTtcblxuZnVuY3Rpb24gcHJvbWlzaWZ5QWxsKG9iaiwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgc3VmZml4UmVnZXhwID0gbmV3IFJlZ0V4cChlc2NhcGVJZGVudFJlZ2V4KHN1ZmZpeCkgKyBcIiRcIik7XG4gICAgdmFyIG1ldGhvZHMgPVxuICAgICAgICBwcm9taXNpZmlhYmxlTWV0aG9kcyhvYmosIHN1ZmZpeCwgc3VmZml4UmVnZXhwLCBmaWx0ZXIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1ldGhvZHMubGVuZ3RoOyBpIDwgbGVuOyBpKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gbWV0aG9kc1tpXTtcbiAgICAgICAgdmFyIGZuID0gbWV0aG9kc1tpKzFdO1xuICAgICAgICB2YXIgcHJvbWlzaWZpZWRLZXkgPSBrZXkgKyBzdWZmaXg7XG4gICAgICAgIGlmIChwcm9taXNpZmllciA9PT0gbWFrZU5vZGVQcm9taXNpZmllZCkge1xuICAgICAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9XG4gICAgICAgICAgICAgICAgbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSwgZm4sIHN1ZmZpeCwgbXVsdGlBcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNpZmllZCA9IHByb21pc2lmaWVyKGZuLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiwgc3VmZml4LCBtdWx0aUFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKHByb21pc2lmaWVkLCBcIl9faXNQcm9taXNpZmllZF9fXCIsIHRydWUpO1xuICAgICAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9IHByb21pc2lmaWVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmeShjYWxsYmFjaywgcmVjZWl2ZXIsIG11bHRpQXJncykge1xuICAgIHJldHVybiBtYWtlTm9kZVByb21pc2lmaWVkKGNhbGxiYWNrLCByZWNlaXZlciwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaywgbnVsbCwgbXVsdGlBcmdzKTtcbn1cblxuUHJvbWlzZS5wcm9taXNpZnkgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIGlmIChpc1Byb21pc2lmaWVkKGZuKSkge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIHJlY2VpdmVyID0gb3B0aW9ucy5jb250ZXh0ID09PSB1bmRlZmluZWQgPyBUSElTIDogb3B0aW9ucy5jb250ZXh0O1xuICAgIHZhciBtdWx0aUFyZ3MgPSAhIW9wdGlvbnMubXVsdGlBcmdzO1xuICAgIHZhciByZXQgPSBwcm9taXNpZnkoZm4sIHJlY2VpdmVyLCBtdWx0aUFyZ3MpO1xuICAgIHV0aWwuY29weURlc2NyaXB0b3JzKGZuLCByZXQsIHByb3BzRmlsdGVyKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm9taXNpZnlBbGwgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgdGFyZ2V0IG9mIHByb21pc2lmeUFsbCBtdXN0IGJlIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IE9iamVjdChvcHRpb25zKTtcbiAgICB2YXIgbXVsdGlBcmdzID0gISFvcHRpb25zLm11bHRpQXJncztcbiAgICB2YXIgc3VmZml4ID0gb3B0aW9ucy5zdWZmaXg7XG4gICAgaWYgKHR5cGVvZiBzdWZmaXggIT09IFwic3RyaW5nXCIpIHN1ZmZpeCA9IGRlZmF1bHRTdWZmaXg7XG4gICAgdmFyIGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICAgIGlmICh0eXBlb2YgZmlsdGVyICE9PSBcImZ1bmN0aW9uXCIpIGZpbHRlciA9IGRlZmF1bHRGaWx0ZXI7XG4gICAgdmFyIHByb21pc2lmaWVyID0gb3B0aW9ucy5wcm9taXNpZmllcjtcbiAgICBpZiAodHlwZW9mIHByb21pc2lmaWVyICE9PSBcImZ1bmN0aW9uXCIpIHByb21pc2lmaWVyID0gbWFrZU5vZGVQcm9taXNpZmllZDtcblxuICAgIGlmICghdXRpbC5pc0lkZW50aWZpZXIoc3VmZml4KSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInN1ZmZpeCBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSB1dGlsLmluaGVyaXRlZERhdGFLZXlzKHRhcmdldCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRhcmdldFtrZXlzW2ldXTtcbiAgICAgICAgaWYgKGtleXNbaV0gIT09IFwiY29uc3RydWN0b3JcIiAmJlxuICAgICAgICAgICAgdXRpbC5pc0NsYXNzKHZhbHVlKSkge1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLnByb3RvdHlwZSwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLFxuICAgICAgICAgICAgICAgIG11bHRpQXJncyk7XG4gICAgICAgICAgICBwcm9taXNpZnlBbGwodmFsdWUsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNpZnlBbGwodGFyZ2V0LCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncyk7XG59O1xufTtcblxuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL25vZGViYWNrXCI6MjAsXCIuL3V0aWxcIjozNn1dLDI1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihcbiAgICBQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgRXM2TWFwO1xuaWYgKHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIikgRXM2TWFwID0gTWFwO1xuXG52YXIgbWFwVG9FbnRyaWVzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHNpemUgPSAwO1xuXG4gICAgZnVuY3Rpb24gZXh0cmFjdEVudHJ5KHZhbHVlLCBrZXkpIHtcbiAgICAgICAgdGhpc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgdGhpc1tpbmRleCArIHNpemVdID0ga2V5O1xuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBtYXBUb0VudHJpZXMobWFwKSB7XG4gICAgICAgIHNpemUgPSBtYXAuc2l6ZTtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB2YXIgcmV0ID0gbmV3IEFycmF5KG1hcC5zaXplICogMik7XG4gICAgICAgIG1hcC5mb3JFYWNoKGV4dHJhY3RFbnRyeSwgcmV0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSkoKTtcblxudmFyIGVudHJpZXNUb01hcCA9IGZ1bmN0aW9uKGVudHJpZXMpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEVzNk1hcCgpO1xuICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aCAvIDIgfCAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGVudHJpZXNbbGVuZ3RoICsgaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IGVudHJpZXNbaV07XG4gICAgICAgIHJldC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KG9iaikge1xuICAgIHZhciBpc01hcCA9IGZhbHNlO1xuICAgIHZhciBlbnRyaWVzO1xuICAgIGlmIChFczZNYXAgIT09IHVuZGVmaW5lZCAmJiBvYmogaW5zdGFuY2VvZiBFczZNYXApIHtcbiAgICAgICAgZW50cmllcyA9IG1hcFRvRW50cmllcyhvYmopO1xuICAgICAgICBpc01hcCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGVudHJpZXMgPSBuZXcgQXJyYXkobGVuICogMik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgZW50cmllc1tpXSA9IG9ialtrZXldO1xuICAgICAgICAgICAgZW50cmllc1tpICsgbGVuXSA9IGtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbnN0cnVjdG9yJChlbnRyaWVzKTtcbiAgICB0aGlzLl9pc01hcCA9IGlzTWFwO1xuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgaXNNYXAgPyAtNiA6IC0zKTtcbn1cbnV0aWwuaW5oZXJpdHMoUHJvcGVydGllc1Byb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB2YXIgdmFsO1xuICAgICAgICBpZiAodGhpcy5faXNNYXApIHtcbiAgICAgICAgICAgIHZhbCA9IGVudHJpZXNUb01hcCh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsID0ge307XG4gICAgICAgICAgICB2YXIga2V5T2Zmc2V0ID0gdGhpcy5sZW5ndGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aCgpOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YWxbdGhpcy5fdmFsdWVzW2kgKyBrZXlPZmZzZXRdXSA9IHRoaXMuX3ZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXNvbHZlKHZhbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICByZXR1cm4gbGVuID4+IDE7XG59O1xuXG5mdW5jdGlvbiBwcm9wcyhwcm9taXNlcykge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIGNhc3RWYWx1ZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMpO1xuXG4gICAgaWYgKCFpc09iamVjdChjYXN0VmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJjYW5ub3QgYXdhaXQgcHJvcGVydGllcyBvZiBhIG5vbi1vYmplY3RcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH0gZWxzZSBpZiAoY2FzdFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXQgPSBjYXN0VmFsdWUuX3RoZW4oXG4gICAgICAgICAgICBQcm9taXNlLnByb3BzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KGNhc3RWYWx1ZSkucHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGlmIChjYXN0VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldC5fcHJvcGFnYXRlRnJvbShjYXN0VmFsdWUsIDIpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5wcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvcHModGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3BzID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHByb3BzKHByb21pc2VzKTtcbn07XG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDI2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gYXJyYXlNb3ZlKHNyYywgc3JjSW5kZXgsIGRzdCwgZHN0SW5kZXgsIGxlbikge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgZHN0W2ogKyBkc3RJbmRleF0gPSBzcmNbaiArIHNyY0luZGV4XTtcbiAgICAgICAgc3JjW2ogKyBzcmNJbmRleF0gPSB2b2lkIDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRdWV1ZShjYXBhY2l0eSkge1xuICAgIHRoaXMuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl9mcm9udCA9IDA7XG59XG5cblF1ZXVlLnByb3RvdHlwZS5fd2lsbEJlT3ZlckNhcGFjaXR5ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwYWNpdHkgPCBzaXplO1xufTtcblxuUXVldWUucHJvdG90eXBlLl9wdXNoT25lID0gZnVuY3Rpb24gKGFyZykge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoICsgMSk7XG4gICAgdmFyIGkgPSAodGhpcy5fZnJvbnQgKyBsZW5ndGgpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpc1tpXSA9IGFyZztcbiAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGggKyAxO1xufTtcblxuUXVldWUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDM7XG4gICAgaWYgKHRoaXMuX3dpbGxCZU92ZXJDYXBhY2l0eShsZW5ndGgpKSB7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUoZm4pO1xuICAgICAgICB0aGlzLl9wdXNoT25lKHJlY2VpdmVyKTtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShhcmcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBqID0gdGhpcy5fZnJvbnQgKyBsZW5ndGggLSAzO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoKTtcbiAgICB2YXIgd3JhcE1hc2sgPSB0aGlzLl9jYXBhY2l0eSAtIDE7XG4gICAgdGhpc1soaiArIDApICYgd3JhcE1hc2tdID0gZm47XG4gICAgdGhpc1soaiArIDEpICYgd3JhcE1hc2tdID0gcmVjZWl2ZXI7XG4gICAgdGhpc1soaiArIDIpICYgd3JhcE1hc2tdID0gYXJnO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udCxcbiAgICAgICAgcmV0ID0gdGhpc1tmcm9udF07XG5cbiAgICB0aGlzW2Zyb250XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9mcm9udCA9IChmcm9udCArIDEpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpcy5fbGVuZ3RoLS07XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fY2hlY2tDYXBhY2l0eSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgaWYgKHRoaXMuX2NhcGFjaXR5IDwgc2l6ZSkge1xuICAgICAgICB0aGlzLl9yZXNpemVUbyh0aGlzLl9jYXBhY2l0eSA8PCAxKTtcbiAgICB9XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3Jlc2l6ZVRvID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XG4gICAgdmFyIG9sZENhcGFjaXR5ID0gdGhpcy5fY2FwYWNpdHk7XG4gICAgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIHZhciBtb3ZlSXRlbXNDb3VudCA9IChmcm9udCArIGxlbmd0aCkgJiAob2xkQ2FwYWNpdHkgLSAxKTtcbiAgICBhcnJheU1vdmUodGhpcywgMCwgdGhpcywgb2xkQ2FwYWNpdHksIG1vdmVJdGVtc0NvdW50KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUXVldWU7XG5cbn0se31dLDI3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihcbiAgICBQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbnZhciByYWNlTGF0ZXIgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHJhY2UoYXJyYXksIHByb21pc2UpO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gcmFjZShwcm9taXNlcywgcGFyZW50KSB7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMpO1xuXG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHJhY2VMYXRlcihtYXliZVByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2VzID0gdXRpbC5hc0FycmF5KHByb21pc2VzKTtcbiAgICAgICAgaWYgKHByb21pc2VzID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcocHJvbWlzZXMpKTtcbiAgICB9XG5cbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20ocGFyZW50LCAzKTtcbiAgICB9XG4gICAgdmFyIGZ1bGZpbGwgPSByZXQuX2Z1bGZpbGw7XG4gICAgdmFyIHJlamVjdCA9IHJldC5fcmVqZWN0O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwcm9taXNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdmFsID0gcHJvbWlzZXNbaV07XG5cbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkICYmICEoaSBpbiBwcm9taXNlcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgUHJvbWlzZS5jYXN0KHZhbCkuX3RoZW4oZnVsZmlsbCwgcmVqZWN0LCB1bmRlZmluZWQsIHJldCwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiByYWNlKHByb21pc2VzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmFjZSh0aGlzLCB1bmRlZmluZWQpO1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlQXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcblxuZnVuY3Rpb24gUmVkdWN0aW9uUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHByb21pc2VzKTtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgdGhpcy5fZm4gPSBkb21haW4gPT09IG51bGwgPyBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKTtcbiAgICBpZiAoaW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gUHJvbWlzZS5yZXNvbHZlKGluaXRpYWxWYWx1ZSk7XG4gICAgICAgIGluaXRpYWxWYWx1ZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2sodGhpcyk7XG4gICAgfVxuICAgIHRoaXMuX2luaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUgPSBudWxsO1xuICAgIGlmKF9lYWNoID09PSBJTlRFUk5BTCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gQXJyYXkodGhpcy5fbGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKF9lYWNoID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG59XG51dGlsLmluaGVyaXRzKFJlZHVjdGlvblByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ290QWNjdW0gPSBmdW5jdGlvbihhY2N1bSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgJiYgXG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgIT09IG51bGwgJiYgXG4gICAgICAgIGFjY3VtICE9PSBJTlRFUk5BTCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzLnB1c2goYWNjdW0pO1xuICAgIH1cbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX2VhY2hDb21wbGV0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2VhY2hWYWx1ZXM7XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24oKSB7fTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZUVtcHR5QXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCA/IHRoaXMuX2VhY2hWYWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2luaXRpYWxWYWx1ZSk7XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgaWYgKHNlbmRlciA9PT0gdGhpcy5faW5pdGlhbFZhbHVlKSByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgIHRoaXMuX3Jlc3VsdENhbmNlbGxlZCQoKTtcbiAgICBpZiAodGhpcy5fY3VycmVudENhbmNlbGxhYmxlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUuY2FuY2VsKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYWxWYWx1ZS5jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcbiAgICB2YXIgdmFsdWU7XG4gICAgdmFyIGk7XG4gICAgdmFyIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuX2luaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5faW5pdGlhbFZhbHVlO1xuICAgICAgICBpID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IFByb21pc2UucmVzb2x2ZSh2YWx1ZXNbMF0pO1xuICAgICAgICBpID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUgPSB2YWx1ZTtcblxuICAgIGlmICghdmFsdWUuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB7XG4gICAgICAgICAgICAgICAgYWNjdW06IG51bGwsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1tpXSxcbiAgICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgICAgICAgICBhcnJheTogdGhpc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX3RoZW4oZ290QWNjdW0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjdHgsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgIC5fdGhlbih0aGlzLl9lYWNoQ29tcGxldGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICB2YWx1ZS5fdGhlbihjb21wbGV0ZWQsIGNvbXBsZXRlZCwgdW5kZWZpbmVkLCB2YWx1ZSwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiAoZm4sIGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgZm4sIGluaXRpYWxWYWx1ZSwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnJlZHVjZSA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICByZXR1cm4gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG59O1xuXG5mdW5jdGlvbiBjb21wbGV0ZWQodmFsdWVPclJlYXNvbiwgYXJyYXkpIHtcbiAgICBpZiAodGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIGFycmF5Ll9yZXNvbHZlKHZhbHVlT3JSZWFzb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFycmF5Ll9yZWplY3QodmFsdWVPclJlYXNvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWR1Y2UocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICB2YXIgYXJyYXkgPSBuZXcgUmVkdWN0aW9uUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG4gICAgcmV0dXJuIGFycmF5LnByb21pc2UoKTtcbn1cblxuZnVuY3Rpb24gZ290QWNjdW0oYWNjdW0pIHtcbiAgICB0aGlzLmFjY3VtID0gYWNjdW07XG4gICAgdGhpcy5hcnJheS5fZ290QWNjdW0oYWNjdW0pO1xuICAgIHZhciB2YWx1ZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy52YWx1ZSwgdGhpcy5hcnJheS5fcHJvbWlzZSk7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLmFycmF5Ll9jdXJyZW50Q2FuY2VsbGFibGUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLl90aGVuKGdvdFZhbHVlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ290VmFsdWUuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnb3RWYWx1ZSh2YWx1ZSkge1xuICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgdmFyIHByb21pc2UgPSBhcnJheS5fcHJvbWlzZTtcbiAgICB2YXIgZm4gPSB0cnlDYXRjaChhcnJheS5fZm4pO1xuICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHJldDtcbiAgICBpZiAoYXJyYXkuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQgPSBmbi5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSwgdmFsdWUsIHRoaXMuaW5kZXgsIHRoaXMubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBmbi5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjdW0sIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIGFycmF5Ll9jdXJyZW50Q2FuY2VsbGFibGUgPSByZXQ7XG4gICAgfVxuICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHJldCxcbiAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgIGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyBcIlByb21pc2UuZWFjaFwiIDogXCJQcm9taXNlLnJlZHVjZVwiLFxuICAgICAgICBwcm9taXNlXG4gICAgKTtcbiAgICByZXR1cm4gcmV0O1xufVxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHNjaGVkdWxlO1xudmFyIG5vQXN5bmNTY2hlZHVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3luYyBzY2hlZHVsZXIgYXZhaWxhYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbn07XG52YXIgTmF0aXZlUHJvbWlzZSA9IHV0aWwuZ2V0TmF0aXZlUHJvbWlzZSgpO1xuaWYgKHV0aWwuaXNOb2RlICYmIHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIEdsb2JhbFNldEltbWVkaWF0ZSA9IGdsb2JhbC5zZXRJbW1lZGlhdGU7XG4gICAgdmFyIFByb2Nlc3NOZXh0VGljayA9IHByb2Nlc3MubmV4dFRpY2s7XG4gICAgc2NoZWR1bGUgPSB1dGlsLmlzUmVjZW50Tm9kZVxuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24oZm4pIHsgR2xvYmFsU2V0SW1tZWRpYXRlLmNhbGwoZ2xvYmFsLCBmbik7IH1cbiAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uKGZuKSB7IFByb2Nlc3NOZXh0VGljay5jYWxsKHByb2Nlc3MsIGZuKTsgfTtcbn0gZWxzZSBpZiAodHlwZW9mIE5hdGl2ZVByb21pc2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICB0eXBlb2YgTmF0aXZlUHJvbWlzZS5yZXNvbHZlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgbmF0aXZlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgbmF0aXZlUHJvbWlzZS50aGVuKGZuKTtcbiAgICB9O1xufSBlbHNlIGlmICgodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgISh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yICYmXG4gICAgICAgICAgICAod2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lIHx8IHdpbmRvdy5jb3Jkb3ZhKSkpIHtcbiAgICBzY2hlZHVsZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvcHRzID0ge2F0dHJpYnV0ZXM6IHRydWV9O1xuICAgICAgICB2YXIgdG9nZ2xlU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBkaXYyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIG8yID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnRvZ2dsZShcImZvb1wiKTtcbiAgICAgICAgICAgIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgbzIub2JzZXJ2ZShkaXYyLCBvcHRzKTtcblxuICAgICAgICB2YXIgc2NoZWR1bGVUb2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0b2dnbGVTY2hlZHVsZWQpIHJldHVybjtcbiAgICAgICAgICAgIHRvZ2dsZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgICBkaXYyLmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNjaGVkdWxlKGZuKSB7XG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG8uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG8ub2JzZXJ2ZShkaXYsIG9wdHMpO1xuICAgICAgICAgICAgc2NoZWR1bGVUb2dnbGUoKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xufSBlbHNlIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgc2NoZWR1bGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGZuKTtcbiAgICB9O1xufSBlbHNlIGlmICh0eXBlb2Ygc2V0VGltZW91dCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgIH07XG59IGVsc2Uge1xuICAgIHNjaGVkdWxlID0gbm9Bc3luY1NjaGVkdWxlcjtcbn1cbm1vZHVsZS5leHBvcnRzID0gc2NoZWR1bGU7XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwzMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbiAgICBmdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIGRlYnVnKSB7XG52YXIgUHJvbWlzZUluc3BlY3Rpb24gPSBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuXG5mdW5jdGlvbiBTZXR0bGVkUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHZhbHVlcyk7XG59XG51dGlsLmluaGVyaXRzKFNldHRsZWRQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVzb2x2ZWQgPSBmdW5jdGlvbiAoaW5kZXgsIGluc3BlY3Rpb24pIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gaW5zcGVjdGlvbjtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlSW5zcGVjdGlvbigpO1xuICAgIHJldC5fYml0RmllbGQgPSAzMzU1NDQzMjtcbiAgICByZXQuX3NldHRsZWRWYWx1ZUZpZWxkID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2VSZXNvbHZlZChpbmRleCwgcmV0KTtcbn07XG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbiwgaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VJbnNwZWN0aW9uKCk7XG4gICAgcmV0Ll9iaXRGaWVsZCA9IDE2Nzc3MjE2O1xuICAgIHJldC5fc2V0dGxlZFZhbHVlRmllbGQgPSByZWFzb247XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2VSZXNvbHZlZChpbmRleCwgcmV0KTtcbn07XG5cblByb21pc2Uuc2V0dGxlID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgZGVidWcuZGVwcmVjYXRlZChcIi5zZXR0bGUoKVwiLCBcIi5yZWZsZWN0KClcIik7XG4gICAgcmV0dXJuIG5ldyBTZXR0bGVkUHJvbWlzZUFycmF5KHByb21pc2VzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zZXR0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFByb21pc2Uuc2V0dGxlKHRoaXMpO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwzMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgUmFuZ2VFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5SYW5nZUVycm9yO1xudmFyIEFnZ3JlZ2F0ZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLkFnZ3JlZ2F0ZUVycm9yO1xudmFyIGlzQXJyYXkgPSB1dGlsLmlzQXJyYXk7XG52YXIgQ0FOQ0VMTEFUSU9OID0ge307XG5cblxuZnVuY3Rpb24gU29tZVByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJCh2YWx1ZXMpO1xuICAgIHRoaXMuX2hvd01hbnkgPSAwO1xuICAgIHRoaXMuX3Vud3JhcCA9IGZhbHNlO1xuICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XG59XG51dGlsLmluaGVyaXRzKFNvbWVQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5faG93TWFueSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlKFtdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC01KTtcbiAgICB2YXIgaXNBcnJheVJlc29sdmVkID0gaXNBcnJheSh0aGlzLl92YWx1ZXMpO1xuICAgIGlmICghdGhpcy5faXNSZXNvbHZlZCgpICYmXG4gICAgICAgIGlzQXJyYXlSZXNvbHZlZCAmJlxuICAgICAgICB0aGlzLl9ob3dNYW55ID4gdGhpcy5fY2FuUG9zc2libHlGdWxmaWxsKCkpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHRoaXMuX2dldFJhbmdlRXJyb3IodGhpcy5sZW5ndGgoKSkpO1xuICAgIH1cbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHRoaXMuX2luaXQoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLnNldFVud3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl91bndyYXAgPSB0cnVlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuaG93TWFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faG93TWFueTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLnNldEhvd01hbnkgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICB0aGlzLl9ob3dNYW55ID0gY291bnQ7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHRoaXMuX2FkZEZ1bGZpbGxlZCh2YWx1ZSk7XG4gICAgaWYgKHRoaXMuX2Z1bGZpbGxlZCgpID09PSB0aGlzLmhvd01hbnkoKSkge1xuICAgICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gdGhpcy5ob3dNYW55KCk7XG4gICAgICAgIGlmICh0aGlzLmhvd01hbnkoKSA9PT0gMSAmJiB0aGlzLl91bndyYXApIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzWzBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuXG59O1xuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl9hZGRSZWplY3RlZChyZWFzb24pO1xuICAgIHJldHVybiB0aGlzLl9jaGVja091dGNvbWUoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlQ2FuY2VsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl92YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHRoaXMuX3ZhbHVlcyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG4gICAgdGhpcy5fYWRkUmVqZWN0ZWQoQ0FOQ0VMTEFUSU9OKTtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tPdXRjb21lKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2hlY2tPdXRjb21lID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuaG93TWFueSgpID4gdGhpcy5fY2FuUG9zc2libHlGdWxmaWxsKCkpIHtcbiAgICAgICAgdmFyIGUgPSBuZXcgQWdncmVnYXRlRXJyb3IoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoKCk7IGkgPCB0aGlzLl92YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl92YWx1ZXNbaV0gIT09IENBTkNFTExBVElPTikge1xuICAgICAgICAgICAgICAgIGUucHVzaCh0aGlzLl92YWx1ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdChlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZnVsZmlsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90b3RhbFJlc29sdmVkO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZXMubGVuZ3RoIC0gdGhpcy5sZW5ndGgoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hZGRSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl92YWx1ZXMucHVzaChyZWFzb24pO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2FkZEZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlc1t0aGlzLl90b3RhbFJlc29sdmVkKytdID0gdmFsdWU7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2FuUG9zc2libHlGdWxmaWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmxlbmd0aCgpIC0gdGhpcy5fcmVqZWN0ZWQoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9nZXRSYW5nZUVycm9yID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgdmFyIG1lc3NhZ2UgPSBcIklucHV0IGFycmF5IG11c3QgY29udGFpbiBhdCBsZWFzdCBcIiArXG4gICAgICAgICAgICB0aGlzLl9ob3dNYW55ICsgXCIgaXRlbXMgYnV0IGNvbnRhaW5zIG9ubHkgXCIgKyBjb3VudCArIFwiIGl0ZW1zXCI7XG4gICAgcmV0dXJuIG5ldyBSYW5nZUVycm9yKG1lc3NhZ2UpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmVFbXB0eUFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3JlamVjdCh0aGlzLl9nZXRSYW5nZUVycm9yKDApKTtcbn07XG5cbmZ1bmN0aW9uIHNvbWUocHJvbWlzZXMsIGhvd01hbnkpIHtcbiAgICBpZiAoKGhvd01hbnkgfCAwKSAhPT0gaG93TWFueSB8fCBob3dNYW55IDwgMCkge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgcG9zaXRpdmUgaW50ZWdlclxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciByZXQgPSBuZXcgU29tZVByb21pc2VBcnJheShwcm9taXNlcyk7XG4gICAgdmFyIHByb21pc2UgPSByZXQucHJvbWlzZSgpO1xuICAgIHJldC5zZXRIb3dNYW55KGhvd01hbnkpO1xuICAgIHJldC5pbml0KCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cblByb21pc2Uuc29tZSA9IGZ1bmN0aW9uIChwcm9taXNlcywgaG93TWFueSkge1xuICAgIHJldHVybiBzb21lKHByb21pc2VzLCBob3dNYW55KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNvbWUgPSBmdW5jdGlvbiAoaG93TWFueSkge1xuICAgIHJldHVybiBzb21lKHRoaXMsIGhvd01hbnkpO1xufTtcblxuUHJvbWlzZS5fU29tZVByb21pc2VBcnJheSA9IFNvbWVQcm9taXNlQXJyYXk7XG59O1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL3V0aWxcIjozNn1dLDMyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG5mdW5jdGlvbiBQcm9taXNlSW5zcGVjdGlvbihwcm9taXNlKSB7XG4gICAgaWYgKHByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgIHRoaXMuX3NldHRsZWRWYWx1ZUZpZWxkID0gcHJvbWlzZS5faXNGYXRlU2VhbGVkKClcbiAgICAgICAgICAgID8gcHJvbWlzZS5fc2V0dGxlZFZhbHVlKCkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IDA7XG4gICAgICAgIHRoaXMuX3NldHRsZWRWYWx1ZUZpZWxkID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLl9zZXR0bGVkVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQ7XG59O1xuXG52YXIgdmFsdWUgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbm5vdCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgb2YgYSBub24tZnVsZmlsbGVkIHByb21pc2VcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG59O1xuXG52YXIgcmVhc29uID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmVycm9yID1cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5yZWFzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IGdldCByZWplY3Rpb24gcmVhc29uIG9mIGEgbm9uLXJlamVjdGVkIHByb21pc2VcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG59O1xuXG52YXIgaXNGdWxmaWxsZWQgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwO1xufTtcblxudmFyIGlzUmVqZWN0ZWQgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwO1xufTtcblxudmFyIGlzUGVuZGluZyA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMDtcbn07XG5cbnZhciBpc1Jlc29sdmVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDUwMzMxNjQ4KSAhPT0gMDtcbn07XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA4NDU0MTQ0KSAhPT0gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9faXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNjU1MzYpID09PSA2NTUzNjtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXQoKS5fX2lzQ2FuY2VsbGVkKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fdGFyZ2V0KCkuX2JpdEZpZWxkICYgODQ1NDE0NCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNQZW5kaW5nLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1JlamVjdGVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNGdWxmaWxsZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1Jlc29sdmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUmVzb2x2ZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB2YWx1ZS5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICB0YXJnZXQuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICByZXR1cm4gcmVhc29uLmNhbGwodGFyZ2V0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl92YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxuUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2VJbnNwZWN0aW9uO1xufTtcblxufSx7fV0sMzM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcblxuZnVuY3Rpb24gdHJ5Q29udmVydFRvUHJvbWlzZShvYmosIGNvbnRleHQpIHtcbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIG9iajtcbiAgICAgICAgdmFyIHRoZW4gPSBnZXRUaGVuKG9iaik7XG4gICAgICAgIGlmICh0aGVuID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gUHJvbWlzZS5yZWplY3QodGhlbi5lKTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmIChpc0FueUJsdWViaXJkUHJvbWlzZShvYmopKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgICAgICBvYmouX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHJldC5fZnVsZmlsbCxcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9yZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvVGhlbmFibGUob2JqLCB0aGVuLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBkb0dldFRoZW4ob2JqKSB7XG4gICAgcmV0dXJuIG9iai50aGVuO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkb0dldFRoZW4ob2JqKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxufVxuXG52YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGhhc1Byb3AuY2FsbChvYmosIFwiX3Byb21pc2UwXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZG9UaGVuYWJsZSh4LCB0aGVuLCBjb250ZXh0KSB7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgdmFyIHJldCA9IHByb21pc2U7XG4gICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgIHZhciBzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgdmFyIHJlc3VsdCA9IHV0aWwudHJ5Q2F0Y2godGhlbikuY2FsbCh4LCByZXNvbHZlLCByZWplY3QpO1xuICAgIHN5bmNocm9ub3VzID0gZmFsc2U7XG5cbiAgICBpZiAocHJvbWlzZSAmJiByZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgICBpZiAoIXByb21pc2UpIHJldHVybjtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICBpZiAoIXByb21pc2UpIHJldHVybjtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBzeW5jaHJvbm91cywgdHJ1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5yZXR1cm4gdHJ5Q29udmVydFRvUHJvbWlzZTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwzNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgVGltZW91dEVycm9yID0gUHJvbWlzZS5UaW1lb3V0RXJyb3I7XG5cbmZ1bmN0aW9uIEhhbmRsZVdyYXBwZXIoaGFuZGxlKSAge1xuICAgIHRoaXMuaGFuZGxlID0gaGFuZGxlO1xufVxuXG5IYW5kbGVXcmFwcGVyLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbn07XG5cbnZhciBhZnRlclZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGRlbGF5KCt0aGlzKS50aGVuUmV0dXJuKHZhbHVlKTsgfTtcbnZhciBkZWxheSA9IFByb21pc2UuZGVsYXkgPSBmdW5jdGlvbiAobXMsIHZhbHVlKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgaGFuZGxlO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldCA9IFByb21pc2UucmVzb2x2ZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAuX3RoZW4oYWZ0ZXJWYWx1ZSwgbnVsbCwgbnVsbCwgbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSAmJiB2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldC5fc2V0T25DYW5jZWwodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyByZXQuX2Z1bGZpbGwoKTsgfSwgK21zKTtcbiAgICAgICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKG5ldyBIYW5kbGVXcmFwcGVyKGhhbmRsZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB9XG4gICAgcmV0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbiAobXMpIHtcbiAgICByZXR1cm4gZGVsYXkobXMsIHRoaXMpO1xufTtcblxudmFyIGFmdGVyVGltZW91dCA9IGZ1bmN0aW9uIChwcm9taXNlLCBtZXNzYWdlLCBwYXJlbnQpIHtcbiAgICB2YXIgZXJyO1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICBlcnIgPSBtZXNzYWdlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyID0gbmV3IFRpbWVvdXRFcnJvcihcIm9wZXJhdGlvbiB0aW1lZCBvdXRcIik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBlcnIgPSBuZXcgVGltZW91dEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICB1dGlsLm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihlcnIpO1xuICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UoZXJyKTtcbiAgICBwcm9taXNlLl9yZWplY3QoZXJyKTtcblxuICAgIGlmIChwYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICBwYXJlbnQuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gc3VjY2Vzc0NsZWFyKHZhbHVlKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGZhaWx1cmVDbGVhcihyZWFzb24pIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpO1xuICAgIHRocm93IHJlYXNvbjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uIChtcywgbWVzc2FnZSkge1xuICAgIG1zID0gK21zO1xuICAgIHZhciByZXQsIHBhcmVudDtcblxuICAgIHZhciBoYW5kbGVXcmFwcGVyID0gbmV3IEhhbmRsZVdyYXBwZXIoc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0VGltZW91dCgpIHtcbiAgICAgICAgaWYgKHJldC5pc1BlbmRpbmcoKSkge1xuICAgICAgICAgICAgYWZ0ZXJUaW1lb3V0KHJldCwgbWVzc2FnZSwgcGFyZW50KTtcbiAgICAgICAgfVxuICAgIH0sIG1zKSk7XG5cbiAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkpIHtcbiAgICAgICAgcGFyZW50ID0gdGhpcy50aGVuKCk7XG4gICAgICAgIHJldCA9IHBhcmVudC5fdGhlbihzdWNjZXNzQ2xlYXIsIGZhaWx1cmVDbGVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIGhhbmRsZVdyYXBwZXIsIHVuZGVmaW5lZCk7XG4gICAgICAgIHJldC5fc2V0T25DYW5jZWwoaGFuZGxlV3JhcHBlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gdGhpcy5fdGhlbihzdWNjZXNzQ2xlYXIsIGZhaWx1cmVDbGVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIGhhbmRsZVdyYXBwZXIsIHVuZGVmaW5lZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwzNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFByb21pc2UsIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICBjcmVhdGVDb250ZXh0LCBJTlRFUk5BTCwgZGVidWcpIHtcbiAgICB2YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG4gICAgdmFyIFR5cGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5UeXBlRXJyb3I7XG4gICAgdmFyIGluaGVyaXRzID0gX2RlcmVxXyhcIi4vdXRpbFwiKS5pbmhlcml0cztcbiAgICB2YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xuICAgIHZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG4gICAgdmFyIE5VTEwgPSB7fTtcblxuICAgIGZ1bmN0aW9uIHRocm93ZXIoZSkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZTt9LCAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYXN0UHJlc2VydmluZ0Rpc3Bvc2FibGUodGhlbmFibGUpIHtcbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhlbmFibGUpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlICE9PSB0aGVuYWJsZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoZW5hYmxlLl9pc0Rpc3Bvc2FibGUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoZW5hYmxlLl9nZXREaXNwb3NlciA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICB0aGVuYWJsZS5faXNEaXNwb3NhYmxlKCkpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fc2V0RGlzcG9zYWJsZSh0aGVuYWJsZS5fZ2V0RGlzcG9zZXIoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlzcG9zZShyZXNvdXJjZXMsIGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgbGVuID0gcmVzb3VyY2VzLmxlbmd0aDtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgZnVuY3Rpb24gaXRlcmF0b3IoKSB7XG4gICAgICAgICAgICBpZiAoaSA+PSBsZW4pIHJldHVybiByZXQuX2Z1bGZpbGwoKTtcbiAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSBjYXN0UHJlc2VydmluZ0Rpc3Bvc2FibGUocmVzb3VyY2VzW2krK10pO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UgJiZcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fZ2V0RGlzcG9zZXIoKS50cnlEaXNwb3NlKGluc3BlY3Rpb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnByb21pc2UpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRocm93ZXIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVByb21pc2UuX3RoZW4oaXRlcmF0b3IsIHRocm93ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpdGVyYXRvcigpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIERpc3Bvc2VyKGRhdGEsIHByb21pc2UsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuX3Byb21pc2UgPSBwcm9taXNlO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5wcm9taXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLnJlc291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9taXNlKCkuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZSgpLnZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5VTEw7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS50cnlEaXNwb3NlID0gZnVuY3Rpb24oaW5zcGVjdGlvbikge1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSB0aGlzLnJlc291cmNlKCk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5fY29udGV4dDtcbiAgICAgICAgaWYgKGNvbnRleHQgIT09IHVuZGVmaW5lZCkgY29udGV4dC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJldCA9IHJlc291cmNlICE9PSBOVUxMXG4gICAgICAgICAgICA/IHRoaXMuZG9EaXNwb3NlKHJlc291cmNlLCBpbnNwZWN0aW9uKSA6IG51bGw7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIGNvbnRleHQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fdW5zZXREaXNwb3NhYmxlKCk7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5pc0Rpc3Bvc2VyID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIChkICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZC5yZXNvdXJjZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGQudHJ5RGlzcG9zZSA9PT0gXCJmdW5jdGlvblwiKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRnVuY3Rpb25EaXNwb3NlcihmbiwgcHJvbWlzZSwgY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yJChmbiwgcHJvbWlzZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGluaGVyaXRzKEZ1bmN0aW9uRGlzcG9zZXIsIERpc3Bvc2VyKTtcblxuICAgIEZ1bmN0aW9uRGlzcG9zZXIucHJvdG90eXBlLmRvRGlzcG9zZSA9IGZ1bmN0aW9uIChyZXNvdXJjZSwgaW5zcGVjdGlvbikge1xuICAgICAgICB2YXIgZm4gPSB0aGlzLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwocmVzb3VyY2UsIHJlc291cmNlLCBpbnNwZWN0aW9uKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbWF5YmVVbndyYXBEaXNwb3Nlcih2YWx1ZSkge1xuICAgICAgICBpZiAoRGlzcG9zZXIuaXNEaXNwb3Nlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzW3RoaXMuaW5kZXhdLl9zZXREaXNwb3NhYmxlKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFJlc291cmNlTGlzdChsZW5ndGgpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHRoaXNbbGVuZ3RoLTFdID0gbnVsbDtcbiAgICB9XG5cbiAgICBSZXNvdXJjZUxpc3QucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXNbaV07XG4gICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIFByb21pc2UudXNpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuIDwgMikgcmV0dXJuIGFwaVJlamVjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieW91IG11c3QgcGFzcyBhdCBsZWFzdCAyIGFyZ3VtZW50cyB0byBQcm9taXNlLnVzaW5nXCIpO1xuICAgICAgICB2YXIgZm4gPSBhcmd1bWVudHNbbGVuIC0gMV07XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlucHV0O1xuICAgICAgICB2YXIgc3ByZWFkQXJncyA9IHRydWU7XG4gICAgICAgIGlmIChsZW4gPT09IDIgJiYgQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgICAgICBpbnB1dCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIGxlbiA9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIHNwcmVhZEFyZ3MgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlucHV0ID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgbGVuLS07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc291cmNlcyA9IG5ldyBSZXNvdXJjZUxpc3QobGVuKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIHJlc291cmNlID0gaW5wdXRbaV07XG4gICAgICAgICAgICBpZiAoRGlzcG9zZXIuaXNEaXNwb3NlcihyZXNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzcG9zZXIgPSByZXNvdXJjZTtcbiAgICAgICAgICAgICAgICByZXNvdXJjZSA9IHJlc291cmNlLnByb21pc2UoKTtcbiAgICAgICAgICAgICAgICByZXNvdXJjZS5fc2V0RGlzcG9zYWJsZShkaXNwb3Nlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJlc291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3RoZW4obWF5YmVVbndyYXBEaXNwb3NlciwgbnVsbCwgbnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlczogcmVzb3VyY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgICAgICAgICAgICAgIH0sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb3VyY2VzW2ldID0gcmVzb3VyY2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVmbGVjdGVkUmVzb3VyY2VzID0gbmV3IEFycmF5KHJlc291cmNlcy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZmxlY3RlZFJlc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcmVmbGVjdGVkUmVzb3VyY2VzW2ldID0gUHJvbWlzZS5yZXNvbHZlKHJlc291cmNlc1tpXSkucmVmbGVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdFByb21pc2UgPSBQcm9taXNlLmFsbChyZWZsZWN0ZWRSZXNvdXJjZXMpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihpbnNwZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zcGVjdGlvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3BlY3Rpb24gPSBpbnNwZWN0aW9uc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3BlY3Rpb24uaXNSZWplY3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck9iai5lID0gaW5zcGVjdGlvbi5lcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpbnNwZWN0aW9uLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5zcGVjdGlvbnNbaV0gPSBpbnNwZWN0aW9uLnZhbHVlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG5cbiAgICAgICAgICAgICAgICBmbiA9IHRyeUNhdGNoKGZuKTtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gc3ByZWFkQXJnc1xuICAgICAgICAgICAgICAgICAgICA/IGZuLmFwcGx5KHVuZGVmaW5lZCwgaW5zcGVjdGlvbnMpIDogZm4oaW5zcGVjdGlvbnMpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgICAgICAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgICAgICAgICAgICAgIHJldCwgcHJvbWlzZUNyZWF0ZWQsIFwiUHJvbWlzZS51c2luZ1wiLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSByZXN1bHRQcm9taXNlLmxhc3RseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpbnNwZWN0aW9uID0gbmV3IFByb21pc2UuUHJvbWlzZUluc3BlY3Rpb24ocmVzdWx0UHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gZGlzcG9zZShyZXNvdXJjZXMsIGluc3BlY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzb3VyY2VzLnByb21pc2UgPSBwcm9taXNlO1xuICAgICAgICBwcm9taXNlLl9zZXRPbkNhbmNlbChyZXNvdXJjZXMpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZGlzcG9zZXIpIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDEzMTA3MjtcbiAgICAgICAgdGhpcy5fZGlzcG9zZXIgPSBkaXNwb3NlcjtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX2lzRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDEzMTA3MikgPiAwO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5fZ2V0RGlzcG9zZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwb3NlcjtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MTMxMDcyKTtcbiAgICAgICAgdGhpcy5fZGlzcG9zZXIgPSB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLmRpc3Bvc2VyID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbkRpc3Bvc2VyKGZuLCB0aGlzLCBjcmVhdGVDb250ZXh0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICB9O1xuXG59O1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL3V0aWxcIjozNn1dLDM2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGVzNSA9IF9kZXJlcV8oXCIuL2VzNVwiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHR5cGVvZiBuYXZpZ2F0b3IgPT0gXCJ1bmRlZmluZWRcIjtcblxudmFyIGVycm9yT2JqID0ge2U6IHt9fTtcbnZhciB0cnlDYXRjaFRhcmdldDtcbnZhciBnbG9iYWxPYmplY3QgPSB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOlxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOlxuICAgIHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOlxuICAgIHRoaXMgIT09IHVuZGVmaW5lZCA/IHRoaXMgOiBudWxsO1xuXG5mdW5jdGlvbiB0cnlDYXRjaGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0cnlDYXRjaFRhcmdldDtcbiAgICAgICAgdHJ5Q2F0Y2hUYXJnZXQgPSBudWxsO1xuICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyeUNhdGNoKGZuKSB7XG4gICAgdHJ5Q2F0Y2hUYXJnZXQgPSBmbjtcbiAgICByZXR1cm4gdHJ5Q2F0Y2hlcjtcbn1cblxudmFyIGluaGVyaXRzID0gZnVuY3Rpb24oQ2hpbGQsIFBhcmVudCkge1xuICAgIHZhciBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgICBmdW5jdGlvbiBUKCkge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gQ2hpbGQ7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IkID0gUGFyZW50O1xuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eU5hbWUgaW4gUGFyZW50LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChQYXJlbnQucHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUpICYmXG4gICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lLmNoYXJBdChwcm9wZXJ0eU5hbWUubGVuZ3RoLTEpICE9PSBcIiRcIlxuICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzW3Byb3BlcnR5TmFtZSArIFwiJFwiXSA9IFBhcmVudC5wcm90b3R5cGVbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBULnByb3RvdHlwZSA9IFBhcmVudC5wcm90b3R5cGU7XG4gICAgQ2hpbGQucHJvdG90eXBlID0gbmV3IFQoKTtcbiAgICByZXR1cm4gQ2hpbGQucHJvdG90eXBlO1xufTtcblxuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZSh2YWwpIHtcbiAgICByZXR1cm4gdmFsID09IG51bGwgfHwgdmFsID09PSB0cnVlIHx8IHZhbCA9PT0gZmFsc2UgfHxcbiAgICAgICAgdHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiO1xuXG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gbWF5YmVXcmFwQXNFcnJvcihtYXliZUVycm9yKSB7XG4gICAgaWYgKCFpc1ByaW1pdGl2ZShtYXliZUVycm9yKSkgcmV0dXJuIG1heWJlRXJyb3I7XG5cbiAgICByZXR1cm4gbmV3IEVycm9yKHNhZmVUb1N0cmluZyhtYXliZUVycm9yKSk7XG59XG5cbmZ1bmN0aW9uIHdpdGhBcHBlbmRlZCh0YXJnZXQsIGFwcGVuZGVlKSB7XG4gICAgdmFyIGxlbiA9IHRhcmdldC5sZW5ndGg7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShsZW4gKyAxKTtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgcmV0W2ldID0gdGFyZ2V0W2ldO1xuICAgIH1cbiAgICByZXRbaV0gPSBhcHBlbmRlZTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBnZXREYXRhUHJvcGVydHlPckRlZmF1bHQob2JqLCBrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmIChlczUuaXNFUzUpIHtcbiAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcblxuICAgICAgICBpZiAoZGVzYyAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzYy5nZXQgPT0gbnVsbCAmJiBkZXNjLnNldCA9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgID8gZGVzYy52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSA/IG9ialtrZXldIDogdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbm90RW51bWVyYWJsZVByb3Aob2JqLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChpc1ByaW1pdGl2ZShvYmopKSByZXR1cm4gb2JqO1xuICAgIHZhciBkZXNjcmlwdG9yID0ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfTtcbiAgICBlczUuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCBkZXNjcmlwdG9yKTtcbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiB0aHJvd2VyKHIpIHtcbiAgICB0aHJvdyByO1xufVxuXG52YXIgaW5oZXJpdGVkRGF0YUtleXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGV4Y2x1ZGVkUHJvdG90eXBlcyA9IFtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLFxuICAgICAgICBPYmplY3QucHJvdG90eXBlLFxuICAgICAgICBGdW5jdGlvbi5wcm90b3R5cGVcbiAgICBdO1xuXG4gICAgdmFyIGlzRXhjbHVkZWRQcm90byA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4Y2x1ZGVkUHJvdG90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVkUHJvdG90eXBlc1tpXSA9PT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBnZXRLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgICAgIHZhciB2aXNpdGVkS2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICB3aGlsZSAob2JqICE9IG51bGwgJiYgIWlzRXhjbHVkZWRQcm90byhvYmopKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXM7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAga2V5cyA9IGdldEtleXMob2JqKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpc2l0ZWRLZXlzW2tleV0pIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkS2V5c1trZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCAmJiBkZXNjLmdldCA9PSBudWxsICYmIGRlc2Muc2V0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2JqID0gZXM1LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIGlmIChpc0V4Y2x1ZGVkUHJvdG8ob2JqKSkgcmV0dXJuIFtdO1xuICAgICAgICAgICAgdmFyIHJldCA9IFtdO1xuXG4gICAgICAgICAgICAvKmpzaGludCBmb3JpbjpmYWxzZSAqL1xuICAgICAgICAgICAgZW51bWVyYXRpb246IGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzUHJvcC5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhjbHVkZWRQcm90b3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUHJvcC5jYWxsKGV4Y2x1ZGVkUHJvdG90eXBlc1tpXSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIGVudW1lcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9XG5cbn0pKCk7XG5cbnZhciB0aGlzQXNzaWdubWVudFBhdHRlcm4gPSAvdGhpc1xccypcXC5cXHMqXFxTK1xccyo9LztcbmZ1bmN0aW9uIGlzQ2xhc3MoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gZXM1Lm5hbWVzKGZuLnByb3RvdHlwZSk7XG5cbiAgICAgICAgICAgIHZhciBoYXNNZXRob2RzID0gZXM1LmlzRVM1ICYmIGtleXMubGVuZ3RoID4gMTtcbiAgICAgICAgICAgIHZhciBoYXNNZXRob2RzT3RoZXJUaGFuQ29uc3RydWN0b3IgPSBrZXlzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAhKGtleXMubGVuZ3RoID09PSAxICYmIGtleXNbMF0gPT09IFwiY29uc3RydWN0b3JcIik7XG4gICAgICAgICAgICB2YXIgaGFzVGhpc0Fzc2lnbm1lbnRBbmRTdGF0aWNNZXRob2RzID1cbiAgICAgICAgICAgICAgICB0aGlzQXNzaWdubWVudFBhdHRlcm4udGVzdChmbiArIFwiXCIpICYmIGVzNS5uYW1lcyhmbikubGVuZ3RoID4gMDtcblxuICAgICAgICAgICAgaWYgKGhhc01ldGhvZHMgfHwgaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yIHx8XG4gICAgICAgICAgICAgICAgaGFzVGhpc0Fzc2lnbm1lbnRBbmRTdGF0aWNNZXRob2RzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdG9GYXN0UHJvcGVydGllcyhvYmopIHtcbiAgICAvKmpzaGludCAtVzAyNywtVzA1NSwtVzAzMSovXG4gICAgZnVuY3Rpb24gRmFrZUNvbnN0cnVjdG9yKCkge31cbiAgICBGYWtlQ29uc3RydWN0b3IucHJvdG90eXBlID0gb2JqO1xuICAgIHZhciBsID0gODtcbiAgICB3aGlsZSAobC0tKSBuZXcgRmFrZUNvbnN0cnVjdG9yKCk7XG4gICAgcmV0dXJuIG9iajtcbiAgICBldmFsKG9iaik7XG59XG5cbnZhciByaWRlbnQgPSAvXlthLXokX11bYS16JF8wLTldKiQvaTtcbmZ1bmN0aW9uIGlzSWRlbnRpZmllcihzdHIpIHtcbiAgICByZXR1cm4gcmlkZW50LnRlc3Qoc3RyKTtcbn1cblxuZnVuY3Rpb24gZmlsbGVkUmFuZ2UoY291bnQsIHByZWZpeCwgc3VmZml4KSB7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgcmV0W2ldID0gcHJlZml4ICsgaSArIHN1ZmZpeDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gc2FmZVRvU3RyaW5nKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBvYmogKyBcIlwiO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIFwiW25vIHN0cmluZyByZXByZXNlbnRhdGlvbl1cIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzRXJyb3Iob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgIHR5cGVvZiBvYmoubWVzc2FnZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqLm5hbWUgPT09IFwic3RyaW5nXCI7XG59XG5cbmZ1bmN0aW9uIG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AoZSwgXCJpc09wZXJhdGlvbmFsXCIsIHRydWUpO1xuICAgIH1cbiAgICBjYXRjaChpZ25vcmUpIHt9XG59XG5cbmZ1bmN0aW9uIG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uKGUpIHtcbiAgICBpZiAoZSA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICgoZSBpbnN0YW5jZW9mIEVycm9yW1wiX19CbHVlYmlyZEVycm9yVHlwZXNfX1wiXS5PcGVyYXRpb25hbEVycm9yKSB8fFxuICAgICAgICBlW1wiaXNPcGVyYXRpb25hbFwiXSA9PT0gdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGNhbkF0dGFjaFRyYWNlKG9iaikge1xuICAgIHJldHVybiBpc0Vycm9yKG9iaikgJiYgZXM1LnByb3BlcnR5SXNXcml0YWJsZShvYmosIFwic3RhY2tcIik7XG59XG5cbnZhciBlbnN1cmVFcnJvck9iamVjdCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAoIShcInN0YWNrXCIgaW4gbmV3IEVycm9yKCkpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaFRyYWNlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgdHJ5IHt0aHJvdyBuZXcgRXJyb3Ioc2FmZVRvU3RyaW5nKHZhbHVlKSk7fVxuICAgICAgICAgICAgY2F0Y2goZXJyKSB7cmV0dXJuIGVycjt9XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoY2FuQXR0YWNoVHJhY2UodmFsdWUpKSByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKHNhZmVUb1N0cmluZyh2YWx1ZSkpO1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG5cbmZ1bmN0aW9uIGNsYXNzU3RyaW5nKG9iaikge1xuICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKG9iaik7XG59XG5cbmZ1bmN0aW9uIGNvcHlEZXNjcmlwdG9ycyhmcm9tLCB0bywgZmlsdGVyKSB7XG4gICAgdmFyIGtleXMgPSBlczUubmFtZXMoZnJvbSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICBpZiAoZmlsdGVyKGtleSkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZXM1LmRlZmluZVByb3BlcnR5KHRvLCBrZXksIGVzNS5nZXREZXNjcmlwdG9yKGZyb20sIGtleSkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgYXNBcnJheSA9IGZ1bmN0aW9uKHYpIHtcbiAgICBpZiAoZXM1LmlzQXJyYXkodikpIHtcbiAgICAgICAgcmV0dXJuIHY7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgU3ltYm9sLml0ZXJhdG9yKSB7XG4gICAgdmFyIEFycmF5RnJvbSA9IHR5cGVvZiBBcnJheS5mcm9tID09PSBcImZ1bmN0aW9uXCIgPyBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHYpO1xuICAgIH0gOiBmdW5jdGlvbih2KSB7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgdmFyIGl0ID0gdltTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIHZhciBpdFJlc3VsdDtcbiAgICAgICAgd2hpbGUgKCEoKGl0UmVzdWx0ID0gaXQubmV4dCgpKS5kb25lKSkge1xuICAgICAgICAgICAgcmV0LnB1c2goaXRSZXN1bHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIGFzQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgICAgIGlmIChlczUuaXNBcnJheSh2KSkge1xuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH0gZWxzZSBpZiAodiAhPSBudWxsICYmIHR5cGVvZiB2W1N5bWJvbC5pdGVyYXRvcl0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5RnJvbSh2KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xufVxuXG52YXIgaXNOb2RlID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgY2xhc3NTdHJpbmcocHJvY2VzcykudG9Mb3dlckNhc2UoKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCI7XG5cbnZhciBoYXNFbnZWYXJpYWJsZXMgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLmVudiAhPT0gXCJ1bmRlZmluZWRcIjtcblxuZnVuY3Rpb24gZW52KGtleSkge1xuICAgIHJldHVybiBoYXNFbnZWYXJpYWJsZXMgPyBwcm9jZXNzLmVudltrZXldIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBnZXROYXRpdmVQcm9taXNlKCkge1xuICAgIGlmICh0eXBlb2YgUHJvbWlzZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKCl7fSk7XG4gICAgICAgICAgICBpZiAoe30udG9TdHJpbmcuY2FsbChwcm9taXNlKSA9PT0gXCJbb2JqZWN0IFByb21pc2VdXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRvbWFpbkJpbmQoc2VsZiwgY2IpIHtcbiAgICByZXR1cm4gc2VsZi5iaW5kKGNiKTtcbn1cblxudmFyIHJldCA9IHtcbiAgICBpc0NsYXNzOiBpc0NsYXNzLFxuICAgIGlzSWRlbnRpZmllcjogaXNJZGVudGlmaWVyLFxuICAgIGluaGVyaXRlZERhdGFLZXlzOiBpbmhlcml0ZWREYXRhS2V5cyxcbiAgICBnZXREYXRhUHJvcGVydHlPckRlZmF1bHQ6IGdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdCxcbiAgICB0aHJvd2VyOiB0aHJvd2VyLFxuICAgIGlzQXJyYXk6IGVzNS5pc0FycmF5LFxuICAgIGFzQXJyYXk6IGFzQXJyYXksXG4gICAgbm90RW51bWVyYWJsZVByb3A6IG5vdEVudW1lcmFibGVQcm9wLFxuICAgIGlzUHJpbWl0aXZlOiBpc1ByaW1pdGl2ZSxcbiAgICBpc09iamVjdDogaXNPYmplY3QsXG4gICAgaXNFcnJvcjogaXNFcnJvcixcbiAgICBjYW5FdmFsdWF0ZTogY2FuRXZhbHVhdGUsXG4gICAgZXJyb3JPYmo6IGVycm9yT2JqLFxuICAgIHRyeUNhdGNoOiB0cnlDYXRjaCxcbiAgICBpbmhlcml0czogaW5oZXJpdHMsXG4gICAgd2l0aEFwcGVuZGVkOiB3aXRoQXBwZW5kZWQsXG4gICAgbWF5YmVXcmFwQXNFcnJvcjogbWF5YmVXcmFwQXNFcnJvcixcbiAgICB0b0Zhc3RQcm9wZXJ0aWVzOiB0b0Zhc3RQcm9wZXJ0aWVzLFxuICAgIGZpbGxlZFJhbmdlOiBmaWxsZWRSYW5nZSxcbiAgICB0b1N0cmluZzogc2FmZVRvU3RyaW5nLFxuICAgIGNhbkF0dGFjaFRyYWNlOiBjYW5BdHRhY2hUcmFjZSxcbiAgICBlbnN1cmVFcnJvck9iamVjdDogZW5zdXJlRXJyb3JPYmplY3QsXG4gICAgb3JpZ2luYXRlc0Zyb21SZWplY3Rpb246IG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uLFxuICAgIG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbjogbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uLFxuICAgIGNsYXNzU3RyaW5nOiBjbGFzc1N0cmluZyxcbiAgICBjb3B5RGVzY3JpcHRvcnM6IGNvcHlEZXNjcmlwdG9ycyxcbiAgICBoYXNEZXZUb29sczogdHlwZW9mIGNocm9tZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjaHJvbWUgJiZcbiAgICAgICAgICAgICAgICAgdHlwZW9mIGNocm9tZS5sb2FkVGltZXMgPT09IFwiZnVuY3Rpb25cIixcbiAgICBpc05vZGU6IGlzTm9kZSxcbiAgICBoYXNFbnZWYXJpYWJsZXM6IGhhc0VudlZhcmlhYmxlcyxcbiAgICBlbnY6IGVudixcbiAgICBnbG9iYWw6IGdsb2JhbE9iamVjdCxcbiAgICBnZXROYXRpdmVQcm9taXNlOiBnZXROYXRpdmVQcm9taXNlLFxuICAgIGRvbWFpbkJpbmQ6IGRvbWFpbkJpbmRcbn07XG5yZXQuaXNSZWNlbnROb2RlID0gcmV0LmlzTm9kZSAmJiAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlcnNpb24gPSBwcm9jZXNzLnZlcnNpb25zLm5vZGUuc3BsaXQoXCIuXCIpLm1hcChOdW1iZXIpO1xuICAgIHJldHVybiAodmVyc2lvblswXSA9PT0gMCAmJiB2ZXJzaW9uWzFdID4gMTApIHx8ICh2ZXJzaW9uWzBdID4gMCk7XG59KSgpO1xuXG5pZiAocmV0LmlzTm9kZSkgcmV0LnRvRmFzdFByb3BlcnRpZXMocHJvY2Vzcyk7XG5cbnRyeSB7dGhyb3cgbmV3IEVycm9yKCk7IH0gY2F0Y2ggKGUpIHtyZXQubGFzdExpbmVFcnJvciA9IGU7fVxubW9kdWxlLmV4cG9ydHMgPSByZXQ7XG5cbn0se1wiLi9lczVcIjoxM31dfSx7fSxbNF0pKDQpXG59KTsgICAgICAgICAgICAgICAgICAgIDtpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93ICE9PSBudWxsKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5QID0gd2luZG93LlByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmICE9PSBudWxsKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlAgPSBzZWxmLlByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSIsIi8qISBIYW1tZXIuSlMgLSB2Mi4wLjcgLSAyMDE2LTA0LTIyXG4gKiBodHRwOi8vaGFtbWVyanMuZ2l0aHViLmlvL1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNiBKb3JpayBUYW5nZWxkZXI7XG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgKi9cbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCBleHBvcnROYW1lLCB1bmRlZmluZWQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG52YXIgVkVORE9SX1BSRUZJWEVTID0gWycnLCAnd2Via2l0JywgJ01veicsICdNUycsICdtcycsICdvJ107XG52YXIgVEVTVF9FTEVNRU5UID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbnZhciBUWVBFX0ZVTkNUSU9OID0gJ2Z1bmN0aW9uJztcblxudmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcbnZhciBhYnMgPSBNYXRoLmFicztcbnZhciBub3cgPSBEYXRlLm5vdztcblxuLyoqXG4gKiBzZXQgYSB0aW1lb3V0IHdpdGggYSBnaXZlbiBzY29wZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0XG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gc2V0VGltZW91dENvbnRleHQoZm4sIHRpbWVvdXQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChiaW5kRm4oZm4sIGNvbnRleHQpLCB0aW1lb3V0KTtcbn1cblxuLyoqXG4gKiBpZiB0aGUgYXJndW1lbnQgaXMgYW4gYXJyYXksIHdlIHdhbnQgdG8gZXhlY3V0ZSB0aGUgZm4gb24gZWFjaCBlbnRyeVxuICogaWYgaXQgYWludCBhbiBhcnJheSB3ZSBkb24ndCB3YW50IHRvIGRvIGEgdGhpbmcuXG4gKiB0aGlzIGlzIHVzZWQgYnkgYWxsIHRoZSBtZXRob2RzIHRoYXQgYWNjZXB0IGEgc2luZ2xlIGFuZCBhcnJheSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7KnxBcnJheX0gYXJnXG4gKiBAcGFyYW0ge1N0cmluZ30gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF1cbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpbnZva2VBcnJheUFyZyhhcmcsIGZuLCBjb250ZXh0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgICAgICBlYWNoKGFyZywgY29udGV4dFtmbl0sIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHdhbGsgb2JqZWN0cyBhbmQgYXJyYXlzXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRvclxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZWFjaChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIGk7XG5cbiAgICBpZiAoIW9iaikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9iai5mb3JFYWNoKSB7XG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICB9IGVsc2UgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBvYmoubGVuZ3RoKSB7XG4gICAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoaSBpbiBvYmopIHtcbiAgICAgICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShpKSAmJiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiB3cmFwIGEgbWV0aG9kIHdpdGggYSBkZXByZWNhdGlvbiB3YXJuaW5nIGFuZCBzdGFjayB0cmFjZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBuZXcgZnVuY3Rpb24gd3JhcHBpbmcgdGhlIHN1cHBsaWVkIG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gZGVwcmVjYXRlKG1ldGhvZCwgbmFtZSwgbWVzc2FnZSkge1xuICAgIHZhciBkZXByZWNhdGlvbk1lc3NhZ2UgPSAnREVQUkVDQVRFRCBNRVRIT0Q6ICcgKyBuYW1lICsgJ1xcbicgKyBtZXNzYWdlICsgJyBBVCBcXG4nO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ2dldC1zdGFjay10cmFjZScpO1xuICAgICAgICB2YXIgc3RhY2sgPSBlICYmIGUuc3RhY2sgPyBlLnN0YWNrLnJlcGxhY2UoL15bXlxcKF0rP1tcXG4kXS9nbSwgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXlxccythdFxccysvZ20sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL15PYmplY3QuPGFub255bW91cz5cXHMqXFwoL2dtLCAne2Fub255bW91c30oKUAnKSA6ICdVbmtub3duIFN0YWNrIFRyYWNlJztcblxuICAgICAgICB2YXIgbG9nID0gd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLndhcm4gfHwgd2luZG93LmNvbnNvbGUubG9nKTtcbiAgICAgICAgaWYgKGxvZykge1xuICAgICAgICAgICAgbG9nLmNhbGwod2luZG93LmNvbnNvbGUsIGRlcHJlY2F0aW9uTWVzc2FnZSwgc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIGV4dGVuZCBvYmplY3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBvYmplY3RzX3RvX2Fzc2lnblxuICogQHJldHVybnMge09iamVjdH0gdGFyZ2V0XG4gKi9cbnZhciBhc3NpZ247XG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcbiAgICBhc3NpZ24gPSBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcbn1cblxuLyoqXG4gKiBleHRlbmQgb2JqZWN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIGluIGRlc3Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgb25lcyBpbiBzcmMuXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICogQHBhcmFtIHtCb29sZWFufSBbbWVyZ2U9ZmFsc2VdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG4gKi9cbnZhciBleHRlbmQgPSBkZXByZWNhdGUoZnVuY3Rpb24gZXh0ZW5kKGRlc3QsIHNyYywgbWVyZ2UpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNyYyk7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFtZXJnZSB8fCAobWVyZ2UgJiYgZGVzdFtrZXlzW2ldXSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgZGVzdFtrZXlzW2ldXSA9IHNyY1trZXlzW2ldXTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufSwgJ2V4dGVuZCcsICdVc2UgYGFzc2lnbmAuJyk7XG5cbi8qKlxuICogbWVyZ2UgdGhlIHZhbHVlcyBmcm9tIHNyYyBpbiB0aGUgZGVzdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyB0aGF0IGV4aXN0IGluIGRlc3Qgd2lsbCBub3QgYmUgb3ZlcndyaXR0ZW4gYnkgc3JjXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICogQHJldHVybnMge09iamVjdH0gZGVzdFxuICovXG52YXIgbWVyZ2UgPSBkZXByZWNhdGUoZnVuY3Rpb24gbWVyZ2UoZGVzdCwgc3JjKSB7XG4gICAgcmV0dXJuIGV4dGVuZChkZXN0LCBzcmMsIHRydWUpO1xufSwgJ21lcmdlJywgJ1VzZSBgYXNzaWduYC4nKTtcblxuLyoqXG4gKiBzaW1wbGUgY2xhc3MgaW5oZXJpdGFuY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNoaWxkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBiYXNlXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXNdXG4gKi9cbmZ1bmN0aW9uIGluaGVyaXQoY2hpbGQsIGJhc2UsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgYmFzZVAgPSBiYXNlLnByb3RvdHlwZSxcbiAgICAgICAgY2hpbGRQO1xuXG4gICAgY2hpbGRQID0gY2hpbGQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlUCk7XG4gICAgY2hpbGRQLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG4gICAgY2hpbGRQLl9zdXBlciA9IGJhc2VQO1xuXG4gICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgYXNzaWduKGNoaWxkUCwgcHJvcGVydGllcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIHNpbXBsZSBmdW5jdGlvbiBiaW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gYmluZEZuKGZuLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGJvdW5kRm4oKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogbGV0IGEgYm9vbGVhbiB2YWx1ZSBhbHNvIGJlIGEgZnVuY3Rpb24gdGhhdCBtdXN0IHJldHVybiBhIGJvb2xlYW5cbiAqIHRoaXMgZmlyc3QgaXRlbSBpbiBhcmdzIHdpbGwgYmUgdXNlZCBhcyB0aGUgY29udGV4dFxuICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSB2YWxcbiAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGJvb2xPckZuKHZhbCwgYXJncykge1xuICAgIGlmICh0eXBlb2YgdmFsID09IFRZUEVfRlVOQ1RJT04pIHtcbiAgICAgICAgcmV0dXJuIHZhbC5hcHBseShhcmdzID8gYXJnc1swXSB8fCB1bmRlZmluZWQgOiB1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIHVzZSB0aGUgdmFsMiB3aGVuIHZhbDEgaXMgdW5kZWZpbmVkXG4gKiBAcGFyYW0geyp9IHZhbDFcbiAqIEBwYXJhbSB7Kn0gdmFsMlxuICogQHJldHVybnMgeyp9XG4gKi9cbmZ1bmN0aW9uIGlmVW5kZWZpbmVkKHZhbDEsIHZhbDIpIHtcbiAgICByZXR1cm4gKHZhbDEgPT09IHVuZGVmaW5lZCkgPyB2YWwyIDogdmFsMTtcbn1cblxuLyoqXG4gKiBhZGRFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2VcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcbiAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogcmVtb3ZlRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICovXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG4gICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIGZpbmQgaWYgYSBub2RlIGlzIGluIHRoZSBnaXZlbiBwYXJlbnRcbiAqIEBtZXRob2QgaGFzUGFyZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGhhc1BhcmVudChub2RlLCBwYXJlbnQpIHtcbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAobm9kZSA9PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBzbWFsbCBpbmRleE9mIHdyYXBwZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gZm91bmRcbiAqL1xuZnVuY3Rpb24gaW5TdHIoc3RyLCBmaW5kKSB7XG4gICAgcmV0dXJuIHN0ci5pbmRleE9mKGZpbmQpID4gLTE7XG59XG5cbi8qKlxuICogc3BsaXQgc3RyaW5nIG9uIHdoaXRlc3BhY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm5zIHtBcnJheX0gd29yZHNcbiAqL1xuZnVuY3Rpb24gc3BsaXRTdHIoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50cmltKCkuc3BsaXQoL1xccysvZyk7XG59XG5cbi8qKlxuICogZmluZCBpZiBhIGFycmF5IGNvbnRhaW5zIHRoZSBvYmplY3QgdXNpbmcgaW5kZXhPZiBvciBhIHNpbXBsZSBwb2x5RmlsbFxuICogQHBhcmFtIHtBcnJheX0gc3JjXG4gKiBAcGFyYW0ge1N0cmluZ30gZmluZFxuICogQHBhcmFtIHtTdHJpbmd9IFtmaW5kQnlLZXldXG4gKiBAcmV0dXJuIHtCb29sZWFufE51bWJlcn0gZmFsc2Ugd2hlbiBub3QgZm91bmQsIG9yIHRoZSBpbmRleFxuICovXG5mdW5jdGlvbiBpbkFycmF5KHNyYywgZmluZCwgZmluZEJ5S2V5KSB7XG4gICAgaWYgKHNyYy5pbmRleE9mICYmICFmaW5kQnlLZXkpIHtcbiAgICAgICAgcmV0dXJuIHNyYy5pbmRleE9mKGZpbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzcmMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoKGZpbmRCeUtleSAmJiBzcmNbaV1bZmluZEJ5S2V5XSA9PSBmaW5kKSB8fCAoIWZpbmRCeUtleSAmJiBzcmNbaV0gPT09IGZpbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbn1cblxuLyoqXG4gKiBjb252ZXJ0IGFycmF5LWxpa2Ugb2JqZWN0cyB0byByZWFsIGFycmF5c1xuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybnMge0FycmF5fVxuICovXG5mdW5jdGlvbiB0b0FycmF5KG9iaikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmosIDApO1xufVxuXG4vKipcbiAqIHVuaXF1ZSBhcnJheSB3aXRoIG9iamVjdHMgYmFzZWQgb24gYSBrZXkgKGxpa2UgJ2lkJykgb3IganVzdCBieSB0aGUgYXJyYXkncyB2YWx1ZVxuICogQHBhcmFtIHtBcnJheX0gc3JjIFt7aWQ6MX0se2lkOjJ9LHtpZDoxfV1cbiAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICogQHBhcmFtIHtCb29sZWFufSBbc29ydD1GYWxzZV1cbiAqIEByZXR1cm5zIHtBcnJheX0gW3tpZDoxfSx7aWQ6Mn1dXG4gKi9cbmZ1bmN0aW9uIHVuaXF1ZUFycmF5KHNyYywga2V5LCBzb3J0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgdmFyIGkgPSAwO1xuXG4gICAgd2hpbGUgKGkgPCBzcmMubGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWwgPSBrZXkgPyBzcmNbaV1ba2V5XSA6IHNyY1tpXTtcbiAgICAgICAgaWYgKGluQXJyYXkodmFsdWVzLCB2YWwpIDwgMCkge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHNyY1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWVzW2ldID0gdmFsO1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgaWYgKHNvcnQpIHtcbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNvcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNvcnQoZnVuY3Rpb24gc29ydFVuaXF1ZUFycmF5KGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYVtrZXldID4gYltrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiBnZXQgdGhlIHByZWZpeGVkIHByb3BlcnR5XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAqIEByZXR1cm5zIHtTdHJpbmd8VW5kZWZpbmVkfSBwcmVmaXhlZFxuICovXG5mdW5jdGlvbiBwcmVmaXhlZChvYmosIHByb3BlcnR5KSB7XG4gICAgdmFyIHByZWZpeCwgcHJvcDtcbiAgICB2YXIgY2FtZWxQcm9wID0gcHJvcGVydHlbMF0udG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgVkVORE9SX1BSRUZJWEVTLmxlbmd0aCkge1xuICAgICAgICBwcmVmaXggPSBWRU5ET1JfUFJFRklYRVNbaV07XG4gICAgICAgIHByb3AgPSAocHJlZml4KSA/IHByZWZpeCArIGNhbWVsUHJvcCA6IHByb3BlcnR5O1xuXG4gICAgICAgIGlmIChwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHByb3A7XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIGdldCBhIHVuaXF1ZSBpZFxuICogQHJldHVybnMge251bWJlcn0gdW5pcXVlSWRcbiAqL1xudmFyIF91bmlxdWVJZCA9IDE7XG5mdW5jdGlvbiB1bmlxdWVJZCgpIHtcbiAgICByZXR1cm4gX3VuaXF1ZUlkKys7XG59XG5cbi8qKlxuICogZ2V0IHRoZSB3aW5kb3cgb2JqZWN0IG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm5zIHtEb2N1bWVudFZpZXd8V2luZG93fVxuICovXG5mdW5jdGlvbiBnZXRXaW5kb3dGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50IHx8IGVsZW1lbnQ7XG4gICAgcmV0dXJuIChkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cpO1xufVxuXG52YXIgTU9CSUxFX1JFR0VYID0gL21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZC9pO1xuXG52YXIgU1VQUE9SVF9UT1VDSCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xudmFyIFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMgPSBwcmVmaXhlZCh3aW5kb3csICdQb2ludGVyRXZlbnQnKSAhPT0gdW5kZWZpbmVkO1xudmFyIFNVUFBPUlRfT05MWV9UT1VDSCA9IFNVUFBPUlRfVE9VQ0ggJiYgTU9CSUxFX1JFR0VYLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cbnZhciBJTlBVVF9UWVBFX1RPVUNIID0gJ3RvdWNoJztcbnZhciBJTlBVVF9UWVBFX1BFTiA9ICdwZW4nO1xudmFyIElOUFVUX1RZUEVfTU9VU0UgPSAnbW91c2UnO1xudmFyIElOUFVUX1RZUEVfS0lORUNUID0gJ2tpbmVjdCc7XG5cbnZhciBDT01QVVRFX0lOVEVSVkFMID0gMjU7XG5cbnZhciBJTlBVVF9TVEFSVCA9IDE7XG52YXIgSU5QVVRfTU9WRSA9IDI7XG52YXIgSU5QVVRfRU5EID0gNDtcbnZhciBJTlBVVF9DQU5DRUwgPSA4O1xuXG52YXIgRElSRUNUSU9OX05PTkUgPSAxO1xudmFyIERJUkVDVElPTl9MRUZUID0gMjtcbnZhciBESVJFQ1RJT05fUklHSFQgPSA0O1xudmFyIERJUkVDVElPTl9VUCA9IDg7XG52YXIgRElSRUNUSU9OX0RPV04gPSAxNjtcblxudmFyIERJUkVDVElPTl9IT1JJWk9OVEFMID0gRElSRUNUSU9OX0xFRlQgfCBESVJFQ1RJT05fUklHSFQ7XG52YXIgRElSRUNUSU9OX1ZFUlRJQ0FMID0gRElSRUNUSU9OX1VQIHwgRElSRUNUSU9OX0RPV047XG52YXIgRElSRUNUSU9OX0FMTCA9IERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMO1xuXG52YXIgUFJPUFNfWFkgPSBbJ3gnLCAneSddO1xudmFyIFBST1BTX0NMSUVOVF9YWSA9IFsnY2xpZW50WCcsICdjbGllbnRZJ107XG5cbi8qKlxuICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtJbnB1dH1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBJbnB1dChtYW5hZ2VyLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLmVsZW1lbnQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgdGhpcy50YXJnZXQgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRUYXJnZXQ7XG5cbiAgICAvLyBzbWFsbGVyIHdyYXBwZXIgYXJvdW5kIHRoZSBoYW5kbGVyLCBmb3IgdGhlIHNjb3BlIGFuZCB0aGUgZW5hYmxlZCBzdGF0ZSBvZiB0aGUgbWFuYWdlcixcbiAgICAvLyBzbyB3aGVuIGRpc2FibGVkIHRoZSBpbnB1dCBldmVudHMgYXJlIGNvbXBsZXRlbHkgYnlwYXNzZWQuXG4gICAgdGhpcy5kb21IYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKGJvb2xPckZuKG1hbmFnZXIub3B0aW9ucy5lbmFibGUsIFttYW5hZ2VyXSkpIHtcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlcihldik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pbml0KCk7XG5cbn1cblxuSW5wdXQucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNob3VsZCBoYW5kbGUgdGhlIGlucHV0RXZlbnQgZGF0YSBhbmQgdHJpZ2dlciB0aGUgY2FsbGJhY2tcbiAgICAgKiBAdmlydHVhbFxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCkgeyB9LFxuXG4gICAgLyoqXG4gICAgICogYmluZCB0aGUgZXZlbnRzXG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXZFbCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldlRhcmdldCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldldpbiAmJiBhZGRFdmVudExpc3RlbmVycyhnZXRXaW5kb3dGb3JFbGVtZW50KHRoaXMuZWxlbWVudCksIHRoaXMuZXZXaW4sIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVuYmluZCB0aGUgZXZlbnRzXG4gICAgICovXG4gICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXZFbCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldlRhcmdldCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldldpbiAmJiByZW1vdmVFdmVudExpc3RlbmVycyhnZXRXaW5kb3dGb3JFbGVtZW50KHRoaXMuZWxlbWVudCksIHRoaXMuZXZXaW4sIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgfVxufTtcblxuLyoqXG4gKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuICogY2FsbGVkIGJ5IHRoZSBNYW5hZ2VyIGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuICogQHJldHVybnMge0lucHV0fVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnB1dEluc3RhbmNlKG1hbmFnZXIpIHtcbiAgICB2YXIgVHlwZTtcbiAgICB2YXIgaW5wdXRDbGFzcyA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dENsYXNzO1xuXG4gICAgaWYgKGlucHV0Q2xhc3MpIHtcbiAgICAgICAgVHlwZSA9IGlucHV0Q2xhc3M7XG4gICAgfSBlbHNlIGlmIChTVVBQT1JUX1BPSU5URVJfRVZFTlRTKSB7XG4gICAgICAgIFR5cGUgPSBQb2ludGVyRXZlbnRJbnB1dDtcbiAgICB9IGVsc2UgaWYgKFNVUFBPUlRfT05MWV9UT1VDSCkge1xuICAgICAgICBUeXBlID0gVG91Y2hJbnB1dDtcbiAgICB9IGVsc2UgaWYgKCFTVVBQT1JUX1RPVUNIKSB7XG4gICAgICAgIFR5cGUgPSBNb3VzZUlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIFR5cGUgPSBUb3VjaE1vdXNlSW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiBuZXcgKFR5cGUpKG1hbmFnZXIsIGlucHV0SGFuZGxlcik7XG59XG5cbi8qKlxuICogaGFuZGxlIGlucHV0IGV2ZW50c1xuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRUeXBlXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gaW5wdXRIYW5kbGVyKG1hbmFnZXIsIGV2ZW50VHlwZSwgaW5wdXQpIHtcbiAgICB2YXIgcG9pbnRlcnNMZW4gPSBpbnB1dC5wb2ludGVycy5sZW5ndGg7XG4gICAgdmFyIGNoYW5nZWRQb2ludGVyc0xlbiA9IGlucHV0LmNoYW5nZWRQb2ludGVycy5sZW5ndGg7XG4gICAgdmFyIGlzRmlyc3QgPSAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG4gICAgdmFyIGlzRmluYWwgPSAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG5cbiAgICBpbnB1dC5pc0ZpcnN0ID0gISFpc0ZpcnN0O1xuICAgIGlucHV0LmlzRmluYWwgPSAhIWlzRmluYWw7XG5cbiAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICBtYW5hZ2VyLnNlc3Npb24gPSB7fTtcbiAgICB9XG5cbiAgICAvLyBzb3VyY2UgZXZlbnQgaXMgdGhlIG5vcm1hbGl6ZWQgdmFsdWUgb2YgdGhlIGRvbUV2ZW50c1xuICAgIC8vIGxpa2UgJ3RvdWNoc3RhcnQsIG1vdXNldXAsIHBvaW50ZXJkb3duJ1xuICAgIGlucHV0LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblxuICAgIC8vIGNvbXB1dGUgc2NhbGUsIHJvdGF0aW9uIGV0Y1xuICAgIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpO1xuXG4gICAgLy8gZW1pdCBzZWNyZXQgZXZlbnRcbiAgICBtYW5hZ2VyLmVtaXQoJ2hhbW1lci5pbnB1dCcsIGlucHV0KTtcblxuICAgIG1hbmFnZXIucmVjb2duaXplKGlucHV0KTtcbiAgICBtYW5hZ2VyLnNlc3Npb24ucHJldklucHV0ID0gaW5wdXQ7XG59XG5cbi8qKlxuICogZXh0ZW5kIHRoZSBkYXRhIHdpdGggc29tZSB1c2FibGUgcHJvcGVydGllcyBsaWtlIHNjYWxlLCByb3RhdGUsIHZlbG9jaXR5IGV0Y1xuICogQHBhcmFtIHtPYmplY3R9IG1hbmFnZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBjb21wdXRlSW5wdXREYXRhKG1hbmFnZXIsIGlucHV0KSB7XG4gICAgdmFyIHNlc3Npb24gPSBtYW5hZ2VyLnNlc3Npb247XG4gICAgdmFyIHBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnM7XG4gICAgdmFyIHBvaW50ZXJzTGVuZ3RoID0gcG9pbnRlcnMubGVuZ3RoO1xuXG4gICAgLy8gc3RvcmUgdGhlIGZpcnN0IGlucHV0IHRvIGNhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYW5kIGRpcmVjdGlvblxuICAgIGlmICghc2Vzc2lvbi5maXJzdElucHV0KSB7XG4gICAgICAgIHNlc3Npb24uZmlyc3RJbnB1dCA9IHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KTtcbiAgICB9XG5cbiAgICAvLyB0byBjb21wdXRlIHNjYWxlIGFuZCByb3RhdGlvbiB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBtdWx0aXBsZSB0b3VjaGVzXG4gICAgaWYgKHBvaW50ZXJzTGVuZ3RoID4gMSAmJiAhc2Vzc2lvbi5maXJzdE11bHRpcGxlKSB7XG4gICAgICAgIHNlc3Npb24uZmlyc3RNdWx0aXBsZSA9IHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KTtcbiAgICB9IGVsc2UgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHNlc3Npb24uZmlyc3RNdWx0aXBsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBmaXJzdElucHV0ID0gc2Vzc2lvbi5maXJzdElucHV0O1xuICAgIHZhciBmaXJzdE11bHRpcGxlID0gc2Vzc2lvbi5maXJzdE11bHRpcGxlO1xuICAgIHZhciBvZmZzZXRDZW50ZXIgPSBmaXJzdE11bHRpcGxlID8gZmlyc3RNdWx0aXBsZS5jZW50ZXIgOiBmaXJzdElucHV0LmNlbnRlcjtcblxuICAgIHZhciBjZW50ZXIgPSBpbnB1dC5jZW50ZXIgPSBnZXRDZW50ZXIocG9pbnRlcnMpO1xuICAgIGlucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuICAgIGlucHV0LmRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGZpcnN0SW5wdXQudGltZVN0YW1wO1xuXG4gICAgaW5wdXQuYW5nbGUgPSBnZXRBbmdsZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG4gICAgaW5wdXQuZGlzdGFuY2UgPSBnZXREaXN0YW5jZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG5cbiAgICBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCk7XG4gICAgaW5wdXQub2Zmc2V0RGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcblxuICAgIHZhciBvdmVyYWxsVmVsb2NpdHkgPSBnZXRWZWxvY2l0eShpbnB1dC5kZWx0YVRpbWUsIGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYID0gb3ZlcmFsbFZlbG9jaXR5Lng7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5WSA9IG92ZXJhbGxWZWxvY2l0eS55O1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eSA9IChhYnMob3ZlcmFsbFZlbG9jaXR5LngpID4gYWJzKG92ZXJhbGxWZWxvY2l0eS55KSkgPyBvdmVyYWxsVmVsb2NpdHkueCA6IG92ZXJhbGxWZWxvY2l0eS55O1xuXG4gICAgaW5wdXQuc2NhbGUgPSBmaXJzdE11bHRpcGxlID8gZ2V0U2NhbGUoZmlyc3RNdWx0aXBsZS5wb2ludGVycywgcG9pbnRlcnMpIDogMTtcbiAgICBpbnB1dC5yb3RhdGlvbiA9IGZpcnN0TXVsdGlwbGUgPyBnZXRSb3RhdGlvbihmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAwO1xuXG4gICAgaW5wdXQubWF4UG9pbnRlcnMgPSAhc2Vzc2lvbi5wcmV2SW5wdXQgPyBpbnB1dC5wb2ludGVycy5sZW5ndGggOiAoKGlucHV0LnBvaW50ZXJzLmxlbmd0aCA+XG4gICAgICAgIHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKSA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6IHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKTtcblxuICAgIGNvbXB1dGVJbnRlcnZhbElucHV0RGF0YShzZXNzaW9uLCBpbnB1dCk7XG5cbiAgICAvLyBmaW5kIHRoZSBjb3JyZWN0IHRhcmdldFxuICAgIHZhciB0YXJnZXQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgaWYgKGhhc1BhcmVudChpbnB1dC5zcmNFdmVudC50YXJnZXQsIHRhcmdldCkpIHtcbiAgICAgICAgdGFyZ2V0ID0gaW5wdXQuc3JjRXZlbnQudGFyZ2V0O1xuICAgIH1cbiAgICBpbnB1dC50YXJnZXQgPSB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KSB7XG4gICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlcjtcbiAgICB2YXIgb2Zmc2V0ID0gc2Vzc2lvbi5vZmZzZXREZWx0YSB8fCB7fTtcbiAgICB2YXIgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgfHwge307XG4gICAgdmFyIHByZXZJbnB1dCA9IHNlc3Npb24ucHJldklucHV0IHx8IHt9O1xuXG4gICAgaWYgKGlucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfU1RBUlQgfHwgcHJldklucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfRU5EKSB7XG4gICAgICAgIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhID0ge1xuICAgICAgICAgICAgeDogcHJldklucHV0LmRlbHRhWCB8fCAwLFxuICAgICAgICAgICAgeTogcHJldklucHV0LmRlbHRhWSB8fCAwXG4gICAgICAgIH07XG5cbiAgICAgICAgb2Zmc2V0ID0gc2Vzc2lvbi5vZmZzZXREZWx0YSA9IHtcbiAgICAgICAgICAgIHg6IGNlbnRlci54LFxuICAgICAgICAgICAgeTogY2VudGVyLnlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpbnB1dC5kZWx0YVggPSBwcmV2RGVsdGEueCArIChjZW50ZXIueCAtIG9mZnNldC54KTtcbiAgICBpbnB1dC5kZWx0YVkgPSBwcmV2RGVsdGEueSArIChjZW50ZXIueSAtIG9mZnNldC55KTtcbn1cblxuLyoqXG4gKiB2ZWxvY2l0eSBpcyBjYWxjdWxhdGVkIGV2ZXJ5IHggbXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXNzaW9uXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KSB7XG4gICAgdmFyIGxhc3QgPSBzZXNzaW9uLmxhc3RJbnRlcnZhbCB8fCBpbnB1dCxcbiAgICAgICAgZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gbGFzdC50aW1lU3RhbXAsXG4gICAgICAgIHZlbG9jaXR5LCB2ZWxvY2l0eVgsIHZlbG9jaXR5WSwgZGlyZWN0aW9uO1xuXG4gICAgaWYgKGlucHV0LmV2ZW50VHlwZSAhPSBJTlBVVF9DQU5DRUwgJiYgKGRlbHRhVGltZSA+IENPTVBVVEVfSU5URVJWQUwgfHwgbGFzdC52ZWxvY2l0eSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gaW5wdXQuZGVsdGFYIC0gbGFzdC5kZWx0YVg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBpbnB1dC5kZWx0YVkgLSBsYXN0LmRlbHRhWTtcblxuICAgICAgICB2YXIgdiA9IGdldFZlbG9jaXR5KGRlbHRhVGltZSwgZGVsdGFYLCBkZWx0YVkpO1xuICAgICAgICB2ZWxvY2l0eVggPSB2Lng7XG4gICAgICAgIHZlbG9jaXR5WSA9IHYueTtcbiAgICAgICAgdmVsb2NpdHkgPSAoYWJzKHYueCkgPiBhYnModi55KSkgPyB2LnggOiB2Lnk7XG4gICAgICAgIGRpcmVjdGlvbiA9IGdldERpcmVjdGlvbihkZWx0YVgsIGRlbHRhWSk7XG5cbiAgICAgICAgc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgPSBpbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1c2UgbGF0ZXN0IHZlbG9jaXR5IGluZm8gaWYgaXQgZG9lc24ndCBvdmVydGFrZSBhIG1pbmltdW0gcGVyaW9kXG4gICAgICAgIHZlbG9jaXR5ID0gbGFzdC52ZWxvY2l0eTtcbiAgICAgICAgdmVsb2NpdHlYID0gbGFzdC52ZWxvY2l0eVg7XG4gICAgICAgIHZlbG9jaXR5WSA9IGxhc3QudmVsb2NpdHlZO1xuICAgICAgICBkaXJlY3Rpb24gPSBsYXN0LmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBpbnB1dC52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgIGlucHV0LnZlbG9jaXR5WCA9IHZlbG9jaXR5WDtcbiAgICBpbnB1dC52ZWxvY2l0eVkgPSB2ZWxvY2l0eVk7XG4gICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xufVxuXG4vKipcbiAqIGNyZWF0ZSBhIHNpbXBsZSBjbG9uZSBmcm9tIHRoZSBpbnB1dCB1c2VkIGZvciBzdG9yYWdlIG9mIGZpcnN0SW5wdXQgYW5kIGZpcnN0TXVsdGlwbGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICogQHJldHVybnMge09iamVjdH0gY2xvbmVkSW5wdXREYXRhXG4gKi9cbmZ1bmN0aW9uIHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KSB7XG4gICAgLy8gbWFrZSBhIHNpbXBsZSBjb3B5IG9mIHRoZSBwb2ludGVycyBiZWNhdXNlIHdlIHdpbGwgZ2V0IGEgcmVmZXJlbmNlIGlmIHdlIGRvbid0XG4gICAgLy8gd2Ugb25seSBuZWVkIGNsaWVudFhZIGZvciB0aGUgY2FsY3VsYXRpb25zXG4gICAgdmFyIHBvaW50ZXJzID0gW107XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgaW5wdXQucG9pbnRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHBvaW50ZXJzW2ldID0ge1xuICAgICAgICAgICAgY2xpZW50WDogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WCksXG4gICAgICAgICAgICBjbGllbnRZOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGltZVN0YW1wOiBub3coKSxcbiAgICAgICAgcG9pbnRlcnM6IHBvaW50ZXJzLFxuICAgICAgICBjZW50ZXI6IGdldENlbnRlcihwb2ludGVycyksXG4gICAgICAgIGRlbHRhWDogaW5wdXQuZGVsdGFYLFxuICAgICAgICBkZWx0YVk6IGlucHV0LmRlbHRhWVxuICAgIH07XG59XG5cbi8qKlxuICogZ2V0IHRoZSBjZW50ZXIgb2YgYWxsIHRoZSBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gcG9pbnRlcnNcbiAqIEByZXR1cm4ge09iamVjdH0gY2VudGVyIGNvbnRhaW5zIGB4YCBhbmQgYHlgIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gZ2V0Q2VudGVyKHBvaW50ZXJzKSB7XG4gICAgdmFyIHBvaW50ZXJzTGVuZ3RoID0gcG9pbnRlcnMubGVuZ3RoO1xuXG4gICAgLy8gbm8gbmVlZCB0byBsb29wIHdoZW4gb25seSBvbmUgdG91Y2hcbiAgICBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHJvdW5kKHBvaW50ZXJzWzBdLmNsaWVudFgpLFxuICAgICAgICAgICAgeTogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WSlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgeCA9IDAsIHkgPSAwLCBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHBvaW50ZXJzTGVuZ3RoKSB7XG4gICAgICAgIHggKz0gcG9pbnRlcnNbaV0uY2xpZW50WDtcbiAgICAgICAgeSArPSBwb2ludGVyc1tpXS5jbGllbnRZO1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogcm91bmQoeCAvIHBvaW50ZXJzTGVuZ3RoKSxcbiAgICAgICAgeTogcm91bmQoeSAvIHBvaW50ZXJzTGVuZ3RoKVxuICAgIH07XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSB2ZWxvY2l0eSBiZXR3ZWVuIHR3byBwb2ludHMuIHVuaXQgaXMgaW4gcHggcGVyIG1zLlxuICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhVGltZVxuICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiBAcmV0dXJuIHtPYmplY3R9IHZlbG9jaXR5IGB4YCBhbmQgYHlgXG4gKi9cbmZ1bmN0aW9uIGdldFZlbG9jaXR5KGRlbHRhVGltZSwgeCwgeSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHggLyBkZWx0YVRpbWUgfHwgMCxcbiAgICAgICAgeTogeSAvIGRlbHRhVGltZSB8fCAwXG4gICAgfTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGRpcmVjdGlvbiBiZXR3ZWVuIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gKiBAcGFyYW0ge051bWJlcn0geVxuICogQHJldHVybiB7TnVtYmVyfSBkaXJlY3Rpb25cbiAqL1xuZnVuY3Rpb24gZ2V0RGlyZWN0aW9uKHgsIHkpIHtcbiAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICByZXR1cm4gRElSRUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgaWYgKGFicyh4KSA+PSBhYnMoeSkpIHtcbiAgICAgICAgcmV0dXJuIHggPCAwID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgfVxuICAgIHJldHVybiB5IDwgMCA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYWJzb2x1dGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG4gKiBAcGFyYW0ge09iamVjdH0gcDEge3gsIHl9XG4gKiBAcGFyYW0ge09iamVjdH0gcDIge3gsIHl9XG4gKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGdldERpc3RhbmNlKHAxLCBwMiwgcHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKSB7XG4gICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG4gICAgfVxuICAgIHZhciB4ID0gcDJbcHJvcHNbMF1dIC0gcDFbcHJvcHNbMF1dLFxuICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuXG4gICAgcmV0dXJuIE1hdGguc3FydCgoeCAqIHgpICsgKHkgKiB5KSk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhbmdsZSBiZXR3ZWVuIHR3byBjb29yZGluYXRlc1xuICogQHBhcmFtIHtPYmplY3R9IHAxXG4gKiBAcGFyYW0ge09iamVjdH0gcDJcbiAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcbiAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcbiAqL1xuZnVuY3Rpb24gZ2V0QW5nbGUocDEsIHAyLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcHJvcHMgPSBQUk9QU19YWTtcbiAgICB9XG4gICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG4gICAgICAgIHkgPSBwMltwcm9wc1sxXV0gLSBwMVtwcm9wc1sxXV07XG4gICAgcmV0dXJuIE1hdGguYXRhbjIoeSwgeCkgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgcm90YXRpb24gZGVncmVlcyBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuICogQHJldHVybiB7TnVtYmVyfSByb3RhdGlvblxuICovXG5mdW5jdGlvbiBnZXRSb3RhdGlvbihzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGdldEFuZ2xlKGVuZFsxXSwgZW5kWzBdLCBQUk9QU19DTElFTlRfWFkpICsgZ2V0QW5nbGUoc3RhcnRbMV0sIHN0YXJ0WzBdLCBQUk9QU19DTElFTlRfWFkpO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgc2NhbGUgZmFjdG9yIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG4gKiBubyBzY2FsZSBpcyAxLCBhbmQgZ29lcyBkb3duIHRvIDAgd2hlbiBwaW5jaGVkIHRvZ2V0aGVyLCBhbmQgYmlnZ2VyIHdoZW4gcGluY2hlZCBvdXRcbiAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBlbmQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEByZXR1cm4ge051bWJlcn0gc2NhbGVcbiAqL1xuZnVuY3Rpb24gZ2V0U2NhbGUoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBnZXREaXN0YW5jZShlbmRbMF0sIGVuZFsxXSwgUFJPUFNfQ0xJRU5UX1hZKSAvIGdldERpc3RhbmNlKHN0YXJ0WzBdLCBzdGFydFsxXSwgUFJPUFNfQ0xJRU5UX1hZKTtcbn1cblxudmFyIE1PVVNFX0lOUFVUX01BUCA9IHtcbiAgICBtb3VzZWRvd246IElOUFVUX1NUQVJULFxuICAgIG1vdXNlbW92ZTogSU5QVVRfTU9WRSxcbiAgICBtb3VzZXVwOiBJTlBVVF9FTkRcbn07XG5cbnZhciBNT1VTRV9FTEVNRU5UX0VWRU5UUyA9ICdtb3VzZWRvd24nO1xudmFyIE1PVVNFX1dJTkRPV19FVkVOVFMgPSAnbW91c2Vtb3ZlIG1vdXNldXAnO1xuXG4vKipcbiAqIE1vdXNlIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBNb3VzZUlucHV0KCkge1xuICAgIHRoaXMuZXZFbCA9IE1PVVNFX0VMRU1FTlRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBNT1VTRV9XSU5ET1dfRVZFTlRTO1xuXG4gICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7IC8vIG1vdXNlZG93biBzdGF0ZVxuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChNb3VzZUlucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBNRWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IE1PVVNFX0lOUFVUX01BUFtldi50eXBlXTtcblxuICAgICAgICAvLyBvbiBzdGFydCB3ZSB3YW50IHRvIGhhdmUgdGhlIGxlZnQgbW91c2UgYnV0dG9uIGRvd25cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIGV2LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9NT1ZFICYmIGV2LndoaWNoICE9PSAxKSB7XG4gICAgICAgICAgICBldmVudFR5cGUgPSBJTlBVVF9FTkQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtb3VzZSBtdXN0IGJlIGRvd25cbiAgICAgICAgaWYgKCF0aGlzLnByZXNzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGV2ZW50VHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9NT1VTRSxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxudmFyIFBPSU5URVJfSU5QVVRfTUFQID0ge1xuICAgIHBvaW50ZXJkb3duOiBJTlBVVF9TVEFSVCxcbiAgICBwb2ludGVybW92ZTogSU5QVVRfTU9WRSxcbiAgICBwb2ludGVydXA6IElOUFVUX0VORCxcbiAgICBwb2ludGVyY2FuY2VsOiBJTlBVVF9DQU5DRUwsXG4gICAgcG9pbnRlcm91dDogSU5QVVRfQ0FOQ0VMXG59O1xuXG4vLyBpbiBJRTEwIHRoZSBwb2ludGVyIHR5cGVzIGlzIGRlZmluZWQgYXMgYW4gZW51bVxudmFyIElFMTBfUE9JTlRFUl9UWVBFX0VOVU0gPSB7XG4gICAgMjogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAzOiBJTlBVVF9UWVBFX1BFTixcbiAgICA0OiBJTlBVVF9UWVBFX01PVVNFLFxuICAgIDU6IElOUFVUX1RZUEVfS0lORUNUIC8vIHNlZSBodHRwczovL3R3aXR0ZXIuY29tL2phY29icm9zc2kvc3RhdHVzLzQ4MDU5NjQzODQ4OTg5MDgxNlxufTtcblxudmFyIFBPSU5URVJfRUxFTUVOVF9FVkVOVFMgPSAncG9pbnRlcmRvd24nO1xudmFyIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbCc7XG5cbi8vIElFMTAgaGFzIHByZWZpeGVkIHN1cHBvcnQsIGFuZCBjYXNlLXNlbnNpdGl2ZVxuaWYgKHdpbmRvdy5NU1BvaW50ZXJFdmVudCAmJiAhd2luZG93LlBvaW50ZXJFdmVudCkge1xuICAgIFBPSU5URVJfRUxFTUVOVF9FVkVOVFMgPSAnTVNQb2ludGVyRG93bic7XG4gICAgUE9JTlRFUl9XSU5ET1dfRVZFTlRTID0gJ01TUG9pbnRlck1vdmUgTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsJztcbn1cblxuLyoqXG4gKiBQb2ludGVyIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBQb2ludGVyRXZlbnRJbnB1dCgpIHtcbiAgICB0aGlzLmV2RWwgPSBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBQT0lOVEVSX1dJTkRPV19FVkVOVFM7XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5zdG9yZSA9ICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzID0gW10pO1xufVxuXG5pbmhlcml0KFBvaW50ZXJFdmVudElucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBQRWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICAgICAgdmFyIHJlbW92ZVBvaW50ZXIgPSBmYWxzZTtcblxuICAgICAgICB2YXIgZXZlbnRUeXBlTm9ybWFsaXplZCA9IGV2LnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdtcycsICcnKTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IFBPSU5URVJfSU5QVVRfTUFQW2V2ZW50VHlwZU5vcm1hbGl6ZWRdO1xuICAgICAgICB2YXIgcG9pbnRlclR5cGUgPSBJRTEwX1BPSU5URVJfVFlQRV9FTlVNW2V2LnBvaW50ZXJUeXBlXSB8fCBldi5wb2ludGVyVHlwZTtcblxuICAgICAgICB2YXIgaXNUb3VjaCA9IChwb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKTtcblxuICAgICAgICAvLyBnZXQgaW5kZXggb2YgdGhlIGV2ZW50IGluIHRoZSBzdG9yZVxuICAgICAgICB2YXIgc3RvcmVJbmRleCA9IGluQXJyYXkoc3RvcmUsIGV2LnBvaW50ZXJJZCwgJ3BvaW50ZXJJZCcpO1xuXG4gICAgICAgIC8vIHN0YXJ0IGFuZCBtb3VzZSBtdXN0IGJlIGRvd25cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIChldi5idXR0b24gPT09IDAgfHwgaXNUb3VjaCkpIHtcbiAgICAgICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHN0b3JlLnB1c2goZXYpO1xuICAgICAgICAgICAgICAgIHN0b3JlSW5kZXggPSBzdG9yZS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgICAgICByZW1vdmVQb2ludGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGl0IG5vdCBmb3VuZCwgc28gdGhlIHBvaW50ZXIgaGFzbid0IGJlZW4gZG93biAoc28gaXQncyBwcm9iYWJseSBhIGhvdmVyKVxuICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG4gICAgICAgIHN0b3JlW3N0b3JlSW5kZXhdID0gZXY7XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGV2ZW50VHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHN0b3JlLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlLFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZW1vdmVQb2ludGVyKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGUgc3RvcmVcbiAgICAgICAgICAgIHN0b3JlLnNwbGljZShzdG9yZUluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG52YXIgU0lOR0xFX1RPVUNIX0lOUFVUX01BUCA9IHtcbiAgICB0b3VjaHN0YXJ0OiBJTlBVVF9TVEFSVCxcbiAgICB0b3VjaG1vdmU6IElOUFVUX01PVkUsXG4gICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcbiAgICB0b3VjaGNhbmNlbDogSU5QVVRfQ0FOQ0VMXG59O1xuXG52YXIgU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFMgPSAndG91Y2hzdGFydCc7XG52YXIgU0lOR0xFX1RPVUNIX1dJTkRPV19FVkVOVFMgPSAndG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnO1xuXG4vKipcbiAqIFRvdWNoIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBTaW5nbGVUb3VjaElucHV0KCkge1xuICAgIHRoaXMuZXZUYXJnZXQgPSBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gU0lOR0xFX1RPVUNIX1dJTkRPV19FVkVOVFM7XG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFNpbmdsZVRvdWNoSW5wdXQsIElucHV0LCB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24gVEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciB0eXBlID0gU0lOR0xFX1RPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcblxuICAgICAgICAvLyBzaG91bGQgd2UgaGFuZGxlIHRoZSB0b3VjaCBldmVudHM/XG4gICAgICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG91Y2hlcyA9IG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG5cbiAgICAgICAgLy8gd2hlbiBkb25lLCByZXNldCB0aGUgc3RhcnRlZCBzdGF0ZVxuICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIHRvdWNoZXNbMF0ubGVuZ3RoIC0gdG91Y2hlc1sxXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiB0b3VjaGVzWzBdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQHRoaXMge1RvdWNoSW5wdXR9XG4gKiBAcGFyYW0ge09iamVjdH0gZXZcbiAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR8QXJyYXl9IFthbGwsIGNoYW5nZWRdXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMoZXYsIHR5cGUpIHtcbiAgICB2YXIgYWxsID0gdG9BcnJheShldi50b3VjaGVzKTtcbiAgICB2YXIgY2hhbmdlZCA9IHRvQXJyYXkoZXYuY2hhbmdlZFRvdWNoZXMpO1xuXG4gICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICBhbGwgPSB1bmlxdWVBcnJheShhbGwuY29uY2F0KGNoYW5nZWQpLCAnaWRlbnRpZmllcicsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBbYWxsLCBjaGFuZ2VkXTtcbn1cblxudmFyIFRPVUNIX0lOUFVUX01BUCA9IHtcbiAgICB0b3VjaHN0YXJ0OiBJTlBVVF9TVEFSVCxcbiAgICB0b3VjaG1vdmU6IElOUFVUX01PVkUsXG4gICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcbiAgICB0b3VjaGNhbmNlbDogSU5QVVRfQ0FOQ0VMXG59O1xuXG52YXIgVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8qKlxuICogTXVsdGktdXNlciB0b3VjaCBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gVG91Y2hJbnB1dCgpIHtcbiAgICB0aGlzLmV2VGFyZ2V0ID0gVE9VQ0hfVEFSR0VUX0VWRU5UUztcbiAgICB0aGlzLnRhcmdldElkcyA9IHt9O1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChUb3VjaElucHV0LCBJbnB1dCwge1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1URWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBUT1VDSF9JTlBVVF9NQVBbZXYudHlwZV07XG4gICAgICAgIHZhciB0b3VjaGVzID0gZ2V0VG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcbiAgICAgICAgaWYgKCF0b3VjaGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAdGhpcyB7VG91Y2hJbnB1dH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cbiAqL1xuZnVuY3Rpb24gZ2V0VG91Y2hlcyhldiwgdHlwZSkge1xuICAgIHZhciBhbGxUb3VjaGVzID0gdG9BcnJheShldi50b3VjaGVzKTtcbiAgICB2YXIgdGFyZ2V0SWRzID0gdGhpcy50YXJnZXRJZHM7XG5cbiAgICAvLyB3aGVuIHRoZXJlIGlzIG9ubHkgb25lIHRvdWNoLCB0aGUgcHJvY2VzcyBjYW4gYmUgc2ltcGxpZmllZFxuICAgIGlmICh0eXBlICYgKElOUFVUX1NUQVJUIHwgSU5QVVRfTU9WRSkgJiYgYWxsVG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGFyZ2V0SWRzW2FsbFRvdWNoZXNbMF0uaWRlbnRpZmllcl0gPSB0cnVlO1xuICAgICAgICByZXR1cm4gW2FsbFRvdWNoZXMsIGFsbFRvdWNoZXNdO1xuICAgIH1cblxuICAgIHZhciBpLFxuICAgICAgICB0YXJnZXRUb3VjaGVzLFxuICAgICAgICBjaGFuZ2VkVG91Y2hlcyA9IHRvQXJyYXkoZXYuY2hhbmdlZFRvdWNoZXMpLFxuICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyA9IFtdLFxuICAgICAgICB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblxuICAgIC8vIGdldCB0YXJnZXQgdG91Y2hlcyBmcm9tIHRvdWNoZXNcbiAgICB0YXJnZXRUb3VjaGVzID0gYWxsVG91Y2hlcy5maWx0ZXIoZnVuY3Rpb24odG91Y2gpIHtcbiAgICAgICAgcmV0dXJuIGhhc1BhcmVudCh0b3VjaC50YXJnZXQsIHRhcmdldCk7XG4gICAgfSk7XG5cbiAgICAvLyBjb2xsZWN0IHRvdWNoZXNcbiAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRhcmdldElkc1t0YXJnZXRUb3VjaGVzW2ldLmlkZW50aWZpZXJdID0gdHJ1ZTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpbHRlciBjaGFuZ2VkIHRvdWNoZXMgdG8gb25seSBjb250YWluIHRvdWNoZXMgdGhhdCBleGlzdCBpbiB0aGUgY29sbGVjdGVkIHRhcmdldCBpZHNcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdKSB7XG4gICAgICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5wdXNoKGNoYW5nZWRUb3VjaGVzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNsZWFudXAgcmVtb3ZlZCB0b3VjaGVzXG4gICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl07XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIGlmICghY2hhbmdlZFRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gW1xuICAgICAgICAvLyBtZXJnZSB0YXJnZXRUb3VjaGVzIHdpdGggY2hhbmdlZFRhcmdldFRvdWNoZXMgc28gaXQgY29udGFpbnMgQUxMIHRvdWNoZXMsIGluY2x1ZGluZyAnZW5kJyBhbmQgJ2NhbmNlbCdcbiAgICAgICAgdW5pcXVlQXJyYXkodGFyZ2V0VG91Y2hlcy5jb25jYXQoY2hhbmdlZFRhcmdldFRvdWNoZXMpLCAnaWRlbnRpZmllcicsIHRydWUpLFxuICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlc1xuICAgIF07XG59XG5cbi8qKlxuICogQ29tYmluZWQgdG91Y2ggYW5kIG1vdXNlIGlucHV0XG4gKlxuICogVG91Y2ggaGFzIGEgaGlnaGVyIHByaW9yaXR5IHRoZW4gbW91c2UsIGFuZCB3aGlsZSB0b3VjaGluZyBubyBtb3VzZSBldmVudHMgYXJlIGFsbG93ZWQuXG4gKiBUaGlzIGJlY2F1c2UgdG91Y2ggZGV2aWNlcyBhbHNvIGVtaXQgbW91c2UgZXZlbnRzIHdoaWxlIGRvaW5nIGEgdG91Y2guXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5cbnZhciBERURVUF9USU1FT1VUID0gMjUwMDtcbnZhciBERURVUF9ESVNUQU5DRSA9IDI1O1xuXG5mdW5jdGlvbiBUb3VjaE1vdXNlSW5wdXQoKSB7XG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHZhciBoYW5kbGVyID0gYmluZEZuKHRoaXMuaGFuZGxlciwgdGhpcyk7XG4gICAgdGhpcy50b3VjaCA9IG5ldyBUb3VjaElucHV0KHRoaXMubWFuYWdlciwgaGFuZGxlcik7XG4gICAgdGhpcy5tb3VzZSA9IG5ldyBNb3VzZUlucHV0KHRoaXMubWFuYWdlciwgaGFuZGxlcik7XG5cbiAgICB0aGlzLnByaW1hcnlUb3VjaCA9IG51bGw7XG4gICAgdGhpcy5sYXN0VG91Y2hlcyA9IFtdO1xufVxuXG5pbmhlcml0KFRvdWNoTW91c2VJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgYW5kIHRvdWNoIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlucHV0RXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gVE1FaGFuZGxlcihtYW5hZ2VyLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpIHtcbiAgICAgICAgdmFyIGlzVG91Y2ggPSAoaW5wdXREYXRhLnBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpLFxuICAgICAgICAgICAgaXNNb3VzZSA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9NT1VTRSk7XG5cbiAgICAgICAgaWYgKGlzTW91c2UgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcyAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzLmZpcmVzVG91Y2hFdmVudHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdoZW4gd2UncmUgaW4gYSB0b3VjaCBldmVudCwgcmVjb3JkIHRvdWNoZXMgdG8gIGRlLWR1cGUgc3ludGhldGljIG1vdXNlIGV2ZW50XG4gICAgICAgIGlmIChpc1RvdWNoKSB7XG4gICAgICAgICAgICByZWNvcmRUb3VjaGVzLmNhbGwodGhpcywgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc01vdXNlICYmIGlzU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBpbnB1dERhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICovXG4gICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy50b3VjaC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMubW91c2UuZGVzdHJveSgpO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiByZWNvcmRUb3VjaGVzKGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSB7XG4gICAgICAgIHRoaXMucHJpbWFyeVRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXS5pZGVudGlmaWVyO1xuICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldExhc3RUb3VjaChldmVudERhdGEpIHtcbiAgICB2YXIgdG91Y2ggPSBldmVudERhdGEuY2hhbmdlZFBvaW50ZXJzWzBdO1xuXG4gICAgaWYgKHRvdWNoLmlkZW50aWZpZXIgPT09IHRoaXMucHJpbWFyeVRvdWNoKSB7XG4gICAgICAgIHZhciBsYXN0VG91Y2ggPSB7eDogdG91Y2guY2xpZW50WCwgeTogdG91Y2guY2xpZW50WX07XG4gICAgICAgIHRoaXMubGFzdFRvdWNoZXMucHVzaChsYXN0VG91Y2gpO1xuICAgICAgICB2YXIgbHRzID0gdGhpcy5sYXN0VG91Y2hlcztcbiAgICAgICAgdmFyIHJlbW92ZUxhc3RUb3VjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGkgPSBsdHMuaW5kZXhPZihsYXN0VG91Y2gpO1xuICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xuICAgICAgICAgICAgICAgIGx0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNldFRpbWVvdXQocmVtb3ZlTGFzdFRvdWNoLCBERURVUF9USU1FT1VUKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzU3ludGhldGljRXZlbnQoZXZlbnREYXRhKSB7XG4gICAgdmFyIHggPSBldmVudERhdGEuc3JjRXZlbnQuY2xpZW50WCwgeSA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRZO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sYXN0VG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdCA9IHRoaXMubGFzdFRvdWNoZXNbaV07XG4gICAgICAgIHZhciBkeCA9IE1hdGguYWJzKHggLSB0LngpLCBkeSA9IE1hdGguYWJzKHkgLSB0LnkpO1xuICAgICAgICBpZiAoZHggPD0gREVEVVBfRElTVEFOQ0UgJiYgZHkgPD0gREVEVVBfRElTVEFOQ0UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxudmFyIFBSRUZJWEVEX1RPVUNIX0FDVElPTiA9IHByZWZpeGVkKFRFU1RfRUxFTUVOVC5zdHlsZSwgJ3RvdWNoQWN0aW9uJyk7XG52YXIgTkFUSVZFX1RPVUNIX0FDVElPTiA9IFBSRUZJWEVEX1RPVUNIX0FDVElPTiAhPT0gdW5kZWZpbmVkO1xuXG4vLyBtYWdpY2FsIHRvdWNoQWN0aW9uIHZhbHVlXG52YXIgVE9VQ0hfQUNUSU9OX0NPTVBVVEUgPSAnY29tcHV0ZSc7XG52YXIgVE9VQ0hfQUNUSU9OX0FVVE8gPSAnYXV0byc7XG52YXIgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTiA9ICdtYW5pcHVsYXRpb24nOyAvLyBub3QgaW1wbGVtZW50ZWRcbnZhciBUT1VDSF9BQ1RJT05fTk9ORSA9ICdub25lJztcbnZhciBUT1VDSF9BQ1RJT05fUEFOX1ggPSAncGFuLXgnO1xudmFyIFRPVUNIX0FDVElPTl9QQU5fWSA9ICdwYW4teSc7XG52YXIgVE9VQ0hfQUNUSU9OX01BUCA9IGdldFRvdWNoQWN0aW9uUHJvcHMoKTtcblxuLyoqXG4gKiBUb3VjaCBBY3Rpb25cbiAqIHNldHMgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IG9yIHVzZXMgdGhlIGpzIGFsdGVybmF0aXZlXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFRvdWNoQWN0aW9uKG1hbmFnZXIsIHZhbHVlKSB7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICB0aGlzLnNldCh2YWx1ZSk7XG59XG5cblRvdWNoQWN0aW9uLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIHRvdWNoQWN0aW9uIHZhbHVlIG9uIHRoZSBlbGVtZW50IG9yIGVuYWJsZSB0aGUgcG9seWZpbGxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIGZpbmQgb3V0IHRoZSB0b3VjaC1hY3Rpb24gYnkgdGhlIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIGlmICh2YWx1ZSA9PSBUT1VDSF9BQ1RJT05fQ09NUFVURSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChOQVRJVkVfVE9VQ0hfQUNUSU9OICYmIHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlICYmIFRPVUNIX0FDVElPTl9NQVBbdmFsdWVdKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtQUkVGSVhFRF9UT1VDSF9BQ1RJT05dID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3Rpb25zID0gdmFsdWUudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGp1c3QgcmUtc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZVxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY29tcHV0ZSB0aGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgcmVjb2duaXplcidzIHNldHRpbmdzXG4gICAgICogQHJldHVybnMge1N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBjb21wdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgZWFjaCh0aGlzLm1hbmFnZXIucmVjb2duaXplcnMsIGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIGlmIChib29sT3JGbihyZWNvZ25pemVyLm9wdGlvbnMuZW5hYmxlLCBbcmVjb2duaXplcl0pKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9ucyA9IGFjdGlvbnMuY29uY2F0KHJlY29nbml6ZXIuZ2V0VG91Y2hBY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2xlYW5Ub3VjaEFjdGlvbnMoYWN0aW9ucy5qb2luKCcgJykpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gZWFjaCBpbnB1dCBjeWNsZSBhbmQgcHJvdmlkZXMgdGhlIHByZXZlbnRpbmcgb2YgdGhlIGJyb3dzZXIgYmVoYXZpb3JcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICBwcmV2ZW50RGVmYXVsdHM6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzcmNFdmVudCA9IGlucHV0LnNyY0V2ZW50O1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQub2Zmc2V0RGlyZWN0aW9uO1xuXG4gICAgICAgIC8vIGlmIHRoZSB0b3VjaCBhY3Rpb24gZGlkIHByZXZlbnRlZCBvbmNlIHRoaXMgc2Vzc2lvblxuICAgICAgICBpZiAodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKSB7XG4gICAgICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7XG4gICAgICAgIHZhciBoYXNOb25lID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX05PTkUpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICAgICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWV07XG4gICAgICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1hdO1xuXG4gICAgICAgIGlmIChoYXNOb25lKSB7XG4gICAgICAgICAgICAvL2RvIG5vdCBwcmV2ZW50IGRlZmF1bHRzIGlmIHRoaXMgaXMgYSB0YXAgZ2VzdHVyZVxuXG4gICAgICAgICAgICB2YXIgaXNUYXBQb2ludGVyID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgdmFyIGlzVGFwTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IDI7XG4gICAgICAgICAgICB2YXIgaXNUYXBUb3VjaFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPCAyNTA7XG5cbiAgICAgICAgICAgIGlmIChpc1RhcFBvaW50ZXIgJiYgaXNUYXBNb3ZlbWVudCAmJiBpc1RhcFRvdWNoVGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcbiAgICAgICAgICAgIC8vIGBwYW4teCBwYW4teWAgbWVhbnMgYnJvd3NlciBoYW5kbGVzIGFsbCBzY3JvbGxpbmcvcGFubmluZywgZG8gbm90IHByZXZlbnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNOb25lIHx8XG4gICAgICAgICAgICAoaGFzUGFuWSAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkgfHxcbiAgICAgICAgICAgIChoYXNQYW5YICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZlbnRTcmMoc3JjRXZlbnQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbGwgcHJldmVudERlZmF1bHQgdG8gcHJldmVudCB0aGUgYnJvd3NlcidzIGRlZmF1bHQgYmVoYXZpb3IgKHNjcm9sbGluZyBpbiBtb3N0IGNhc2VzKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcmNFdmVudFxuICAgICAqL1xuICAgIHByZXZlbnRTcmM6IGZ1bmN0aW9uKHNyY0V2ZW50KSB7XG4gICAgICAgIHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxufTtcblxuLyoqXG4gKiB3aGVuIHRoZSB0b3VjaEFjdGlvbnMgYXJlIGNvbGxlY3RlZCB0aGV5IGFyZSBub3QgYSB2YWxpZCB2YWx1ZSwgc28gd2UgbmVlZCB0byBjbGVhbiB0aGluZ3MgdXAuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gY2xlYW5Ub3VjaEFjdGlvbnMoYWN0aW9ucykge1xuICAgIC8vIG5vbmVcbiAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX05PTkUpKSB7XG4gICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCk7XG4gICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpO1xuXG4gICAgLy8gaWYgYm90aCBwYW4teCBhbmQgcGFuLXkgYXJlIHNldCAoZGlmZmVyZW50IHJlY29nbml6ZXJzXG4gICAgLy8gZm9yIGRpZmZlcmVudCBkaXJlY3Rpb25zLCBlLmcuIGhvcml6b250YWwgcGFuIGJ1dCB2ZXJ0aWNhbCBzd2lwZT8pXG4gICAgLy8gd2UgbmVlZCBub25lIChhcyBvdGhlcndpc2Ugd2l0aCBwYW4teCBwYW4teSBjb21iaW5lZCBub25lIG9mIHRoZXNlXG4gICAgLy8gcmVjb2duaXplcnMgd2lsbCB3b3JrLCBzaW5jZSB0aGUgYnJvd3NlciB3b3VsZCBoYW5kbGUgYWxsIHBhbm5pbmdcbiAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG4gICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICAvLyBwYW4teCBPUiBwYW4teVxuICAgIGlmIChoYXNQYW5YIHx8IGhhc1BhblkpIHtcbiAgICAgICAgcmV0dXJuIGhhc1BhblggPyBUT1VDSF9BQ1RJT05fUEFOX1ggOiBUT1VDSF9BQ1RJT05fUEFOX1k7XG4gICAgfVxuXG4gICAgLy8gbWFuaXB1bGF0aW9uXG4gICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04pKSB7XG4gICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OO1xuICAgIH1cblxuICAgIHJldHVybiBUT1VDSF9BQ1RJT05fQVVUTztcbn1cblxuZnVuY3Rpb24gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpIHtcbiAgICBpZiAoIU5BVElWRV9UT1VDSF9BQ1RJT04pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgdG91Y2hNYXAgPSB7fTtcbiAgICB2YXIgY3NzU3VwcG9ydHMgPSB3aW5kb3cuQ1NTICYmIHdpbmRvdy5DU1Muc3VwcG9ydHM7XG4gICAgWydhdXRvJywgJ21hbmlwdWxhdGlvbicsICdwYW4teScsICdwYW4teCcsICdwYW4teCBwYW4teScsICdub25lJ10uZm9yRWFjaChmdW5jdGlvbih2YWwpIHtcblxuICAgICAgICAvLyBJZiBjc3Muc3VwcG9ydHMgaXMgbm90IHN1cHBvcnRlZCBidXQgdGhlcmUgaXMgbmF0aXZlIHRvdWNoLWFjdGlvbiBhc3N1bWUgaXQgc3VwcG9ydHNcbiAgICAgICAgLy8gYWxsIHZhbHVlcy4gVGhpcyBpcyB0aGUgY2FzZSBmb3IgSUUgMTAgYW5kIDExLlxuICAgICAgICB0b3VjaE1hcFt2YWxdID0gY3NzU3VwcG9ydHMgPyB3aW5kb3cuQ1NTLnN1cHBvcnRzKCd0b3VjaC1hY3Rpb24nLCB2YWwpIDogdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdG91Y2hNYXA7XG59XG5cbi8qKlxuICogUmVjb2duaXplciBmbG93IGV4cGxhaW5lZDsgKlxuICogQWxsIHJlY29nbml6ZXJzIGhhdmUgdGhlIGluaXRpYWwgc3RhdGUgb2YgUE9TU0lCTEUgd2hlbiBhIGlucHV0IHNlc3Npb24gc3RhcnRzLlxuICogVGhlIGRlZmluaXRpb24gb2YgYSBpbnB1dCBzZXNzaW9uIGlzIGZyb20gdGhlIGZpcnN0IGlucHV0IHVudGlsIHRoZSBsYXN0IGlucHV0LCB3aXRoIGFsbCBpdCdzIG1vdmVtZW50IGluIGl0LiAqXG4gKiBFeGFtcGxlIHNlc3Npb24gZm9yIG1vdXNlLWlucHV0OiBtb3VzZWRvd24gLT4gbW91c2Vtb3ZlIC0+IG1vdXNldXBcbiAqXG4gKiBPbiBlYWNoIHJlY29nbml6aW5nIGN5Y2xlIChzZWUgTWFuYWdlci5yZWNvZ25pemUpIHRoZSAucmVjb2duaXplKCkgbWV0aG9kIGlzIGV4ZWN1dGVkXG4gKiB3aGljaCBkZXRlcm1pbmVzIHdpdGggc3RhdGUgaXQgc2hvdWxkIGJlLlxuICpcbiAqIElmIHRoZSByZWNvZ25pemVyIGhhcyB0aGUgc3RhdGUgRkFJTEVELCBDQU5DRUxMRUQgb3IgUkVDT0dOSVpFRCAoZXF1YWxzIEVOREVEKSwgaXQgaXMgcmVzZXQgdG9cbiAqIFBPU1NJQkxFIHRvIGdpdmUgaXQgYW5vdGhlciBjaGFuZ2Ugb24gdGhlIG5leHQgY3ljbGUuXG4gKlxuICogICAgICAgICAgICAgICBQb3NzaWJsZVxuICogICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICstLS0tLSstLS0tLS0tLS0tLS0tLS0rXG4gKiAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICstLS0tLSstLS0tLSsgICAgICAgICAgICAgICB8XG4gKiAgICAgIHwgICAgICAgICAgIHwgICAgICAgICAgICAgICB8XG4gKiAgIEZhaWxlZCAgICAgIENhbmNlbGxlZCAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0rLS0tLS0tK1xuICogICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgIFJlY29nbml6ZWQgICAgICAgQmVnYW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbmdlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZGVkL1JlY29nbml6ZWRcbiAqL1xudmFyIFNUQVRFX1BPU1NJQkxFID0gMTtcbnZhciBTVEFURV9CRUdBTiA9IDI7XG52YXIgU1RBVEVfQ0hBTkdFRCA9IDQ7XG52YXIgU1RBVEVfRU5ERUQgPSA4O1xudmFyIFNUQVRFX1JFQ09HTklaRUQgPSBTVEFURV9FTkRFRDtcbnZhciBTVEFURV9DQU5DRUxMRUQgPSAxNjtcbnZhciBTVEFURV9GQUlMRUQgPSAzMjtcblxuLyoqXG4gKiBSZWNvZ25pemVyXG4gKiBFdmVyeSByZWNvZ25pemVyIG5lZWRzIHRvIGV4dGVuZCBmcm9tIHRoaXMgY2xhc3MuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIFJlY29nbml6ZXIob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cbiAgICB0aGlzLmlkID0gdW5pcXVlSWQoKTtcblxuICAgIHRoaXMubWFuYWdlciA9IG51bGw7XG5cbiAgICAvLyBkZWZhdWx0IGlzIGVuYWJsZSB0cnVlXG4gICAgdGhpcy5vcHRpb25zLmVuYWJsZSA9IGlmVW5kZWZpbmVkKHRoaXMub3B0aW9ucy5lbmFibGUsIHRydWUpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1BPU1NJQkxFO1xuXG4gICAgdGhpcy5zaW11bHRhbmVvdXMgPSB7fTtcbiAgICB0aGlzLnJlcXVpcmVGYWlsID0gW107XG59XG5cblJlY29nbml6ZXIucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBkZWZhdWx0czoge30sXG5cbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybiB7UmVjb2duaXplcn1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gYWxzbyB1cGRhdGUgdGhlIHRvdWNoQWN0aW9uLCBpbiBjYXNlIHNvbWV0aGluZyBjaGFuZ2VkIGFib3V0IHRoZSBkaXJlY3Rpb25zL2VuYWJsZWQgc3RhdGVcbiAgICAgICAgdGhpcy5tYW5hZ2VyICYmIHRoaXMubWFuYWdlci50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICByZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ3JlY29nbml6ZVdpdGgnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2ltdWx0YW5lb3VzID0gdGhpcy5zaW11bHRhbmVvdXM7XG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgaWYgKCFzaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXSkge1xuICAgICAgICAgICAgc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0gPSBvdGhlclJlY29nbml6ZXI7XG4gICAgICAgICAgICBvdGhlclJlY29nbml6ZXIucmVjb2duaXplV2l0aCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZHJvcCB0aGUgc2ltdWx0YW5lb3VzIGxpbmsuIGl0IGRvZXNudCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIGRyb3BSZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZWNvZ25pemVXaXRoJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBkZWxldGUgdGhpcy5zaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlY29nbml6ZXIgY2FuIG9ubHkgcnVuIHdoZW4gYW4gb3RoZXIgaXMgZmFpbGluZ1xuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICByZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXF1aXJlRmFpbCA9IHRoaXMucmVxdWlyZUZhaWw7XG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgaWYgKGluQXJyYXkocmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcikgPT09IC0xKSB7XG4gICAgICAgICAgICByZXF1aXJlRmFpbC5wdXNoKG90aGVyUmVjb2duaXplcik7XG4gICAgICAgICAgICBvdGhlclJlY29nbml6ZXIucmVxdWlyZUZhaWx1cmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRyb3AgdGhlIHJlcXVpcmVGYWlsdXJlIGxpbmsuIGl0IGRvZXMgbm90IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgZHJvcFJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaW5BcnJheSh0aGlzLnJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5yZXF1aXJlRmFpbC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBoYXMgcmVxdWlyZSBmYWlsdXJlcyBib29sZWFuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaGFzUmVxdWlyZUZhaWx1cmVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoID4gMDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaWYgdGhlIHJlY29nbml6ZXIgY2FuIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjYW5SZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogWW91IHNob3VsZCB1c2UgYHRyeUVtaXRgIGluc3RlYWQgb2YgYGVtaXRgIGRpcmVjdGx5IHRvIGNoZWNrXG4gICAgICogdGhhdCBhbGwgdGhlIG5lZWRlZCByZWNvZ25pemVycyBoYXMgZmFpbGVkIGJlZm9yZSBlbWl0dGluZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgZnVuY3Rpb24gZW1pdChldmVudCkge1xuICAgICAgICAgICAgc2VsZi5tYW5hZ2VyLmVtaXQoZXZlbnQsIGlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICdwYW5zdGFydCcgYW5kICdwYW5tb3ZlJ1xuICAgICAgICBpZiAoc3RhdGUgPCBTVEFURV9FTkRFRCkge1xuICAgICAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQgKyBzdGF0ZVN0cihzdGF0ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQpOyAvLyBzaW1wbGUgJ2V2ZW50TmFtZScgZXZlbnRzXG5cbiAgICAgICAgaWYgKGlucHV0LmFkZGl0aW9uYWxFdmVudCkgeyAvLyBhZGRpdGlvbmFsIGV2ZW50KHBhbmxlZnQsIHBhbnJpZ2h0LCBwaW5jaGluLCBwaW5jaG91dC4uLilcbiAgICAgICAgICAgIGVtaXQoaW5wdXQuYWRkaXRpb25hbEV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBhbmVuZCBhbmQgcGFuY2FuY2VsXG4gICAgICAgIGlmIChzdGF0ZSA+PSBTVEFURV9FTkRFRCkge1xuICAgICAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQgKyBzdGF0ZVN0cihzdGF0ZSkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRoYXQgYWxsIHRoZSByZXF1aXJlIGZhaWx1cmUgcmVjb2duaXplcnMgaGFzIGZhaWxlZCxcbiAgICAgKiBpZiB0cnVlLCBpdCBlbWl0cyBhIGdlc3R1cmUgZXZlbnQsXG4gICAgICogb3RoZXJ3aXNlLCBzZXR1cCB0aGUgc3RhdGUgdG8gRkFJTEVELlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIHRyeUVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkVtaXQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1pdChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaXQncyBmYWlsaW5nIGFueXdheVxuICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjYW4gd2UgZW1pdD9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBjYW5FbWl0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnJlcXVpcmVGYWlsW2ldLnN0YXRlICYgKFNUQVRFX0ZBSUxFRCB8IFNUQVRFX1BPU1NJQkxFKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVwZGF0ZSB0aGUgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICByZWNvZ25pemU6IGZ1bmN0aW9uKGlucHV0RGF0YSkge1xuICAgICAgICAvLyBtYWtlIGEgbmV3IGNvcHkgb2YgdGhlIGlucHV0RGF0YVxuICAgICAgICAvLyBzbyB3ZSBjYW4gY2hhbmdlIHRoZSBpbnB1dERhdGEgd2l0aG91dCBtZXNzaW5nIHVwIHRoZSBvdGhlciByZWNvZ25pemVyc1xuICAgICAgICB2YXIgaW5wdXREYXRhQ2xvbmUgPSBhc3NpZ24oe30sIGlucHV0RGF0YSk7XG5cbiAgICAgICAgLy8gaXMgaXMgZW5hYmxlZCBhbmQgYWxsb3cgcmVjb2duaXppbmc/XG4gICAgICAgIGlmICghYm9vbE9yRm4odGhpcy5vcHRpb25zLmVuYWJsZSwgW3RoaXMsIGlucHV0RGF0YUNsb25lXSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXNldCB3aGVuIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9SRUNPR05JWkVEIHwgU1RBVEVfQ0FOQ0VMTEVEIHwgU1RBVEVfRkFJTEVEKSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1BPU1NJQkxFO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucHJvY2VzcyhpbnB1dERhdGFDbG9uZSk7XG5cbiAgICAgICAgLy8gdGhlIHJlY29nbml6ZXIgaGFzIHJlY29nbml6ZWQgYSBnZXN0dXJlXG4gICAgICAgIC8vIHNvIHRyaWdnZXIgYW4gZXZlbnRcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQgfCBTVEFURV9DQU5DRUxMRUQpKSB7XG4gICAgICAgICAgICB0aGlzLnRyeUVtaXQoaW5wdXREYXRhQ2xvbmUpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJldHVybiB0aGUgc3RhdGUgb2YgdGhlIHJlY29nbml6ZXJcbiAgICAgKiB0aGUgYWN0dWFsIHJlY29nbml6aW5nIGhhcHBlbnMgaW4gdGhpcyBtZXRob2RcbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKiBAcmV0dXJucyB7Q29uc3R9IFNUQVRFXG4gICAgICovXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXREYXRhKSB7IH0sIC8vIGpzaGludCBpZ25vcmU6bGluZVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBwcmVmZXJyZWQgdG91Y2gtYWN0aW9uXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICovXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkgeyB9LFxuXG4gICAgLyoqXG4gICAgICogY2FsbGVkIHdoZW4gdGhlIGdlc3R1cmUgaXNuJ3QgYWxsb3dlZCB0byByZWNvZ25pemVcbiAgICAgKiBsaWtlIHdoZW4gYW5vdGhlciBpcyBiZWluZyByZWNvZ25pemVkIG9yIGl0IGlzIGRpc2FibGVkXG4gICAgICogQHZpcnR1YWxcbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7IH1cbn07XG5cbi8qKlxuICogZ2V0IGEgdXNhYmxlIHN0cmluZywgdXNlZCBhcyBldmVudCBwb3N0Zml4XG4gKiBAcGFyYW0ge0NvbnN0fSBzdGF0ZVxuICogQHJldHVybnMge1N0cmluZ30gc3RhdGVcbiAqL1xuZnVuY3Rpb24gc3RhdGVTdHIoc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUgJiBTVEFURV9DQU5DRUxMRUQpIHtcbiAgICAgICAgcmV0dXJuICdjYW5jZWwnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9FTkRFRCkge1xuICAgICAgICByZXR1cm4gJ2VuZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0NIQU5HRUQpIHtcbiAgICAgICAgcmV0dXJuICdtb3ZlJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfQkVHQU4pIHtcbiAgICAgICAgcmV0dXJuICdzdGFydCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBkaXJlY3Rpb24gY29ucyB0byBzdHJpbmdcbiAqIEBwYXJhbSB7Q29uc3R9IGRpcmVjdGlvblxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZGlyZWN0aW9uU3RyKGRpcmVjdGlvbikge1xuICAgIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX0RPV04pIHtcbiAgICAgICAgcmV0dXJuICdkb3duJztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fVVApIHtcbiAgICAgICAgcmV0dXJuICd1cCc7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX0xFRlQpIHtcbiAgICAgICAgcmV0dXJuICdsZWZ0JztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fUklHSFQpIHtcbiAgICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBnZXQgYSByZWNvZ25pemVyIGJ5IG5hbWUgaWYgaXQgaXMgYm91bmQgdG8gYSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSBvdGhlclJlY29nbml6ZXJcbiAqIEBwYXJhbSB7UmVjb2duaXplcn0gcmVjb2duaXplclxuICogQHJldHVybnMge1JlY29nbml6ZXJ9XG4gKi9cbmZ1bmN0aW9uIGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCByZWNvZ25pemVyKSB7XG4gICAgdmFyIG1hbmFnZXIgPSByZWNvZ25pemVyLm1hbmFnZXI7XG4gICAgaWYgKG1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIG1hbmFnZXIuZ2V0KG90aGVyUmVjb2duaXplcik7XG4gICAgfVxuICAgIHJldHVybiBvdGhlclJlY29nbml6ZXI7XG59XG5cbi8qKlxuICogVGhpcyByZWNvZ25pemVyIGlzIGp1c3QgdXNlZCBhcyBhIGJhc2UgZm9yIHRoZSBzaW1wbGUgYXR0cmlidXRlIHJlY29nbml6ZXJzLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIEF0dHJSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChBdHRyUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgcG9pbnRlcnM6IDFcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBjaGVjayBpZiBpdCB0aGUgcmVjb2duaXplciByZWNlaXZlcyB2YWxpZCBpbnB1dCwgbGlrZSBpbnB1dC5kaXN0YW5jZSA+IDEwLlxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSByZWNvZ25pemVkXG4gICAgICovXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25Qb2ludGVycyA9IHRoaXMub3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgcmV0dXJuIG9wdGlvblBvaW50ZXJzID09PSAwIHx8IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9uUG9pbnRlcnM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgdGhlIGlucHV0IGFuZCByZXR1cm4gdGhlIHN0YXRlIGZvciB0aGUgcmVjb2duaXplclxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqIEByZXR1cm5zIHsqfSBTdGF0ZVxuICAgICAqL1xuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBpbnB1dC5ldmVudFR5cGU7XG5cbiAgICAgICAgdmFyIGlzUmVjb2duaXplZCA9IHN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCk7XG4gICAgICAgIHZhciBpc1ZhbGlkID0gdGhpcy5hdHRyVGVzdChpbnB1dCk7XG5cbiAgICAgICAgLy8gb24gY2FuY2VsIGlucHV0IGFuZCB3ZSd2ZSByZWNvZ25pemVkIGJlZm9yZSwgcmV0dXJuIFNUQVRFX0NBTkNFTExFRFxuICAgICAgICBpZiAoaXNSZWNvZ25pemVkICYmIChldmVudFR5cGUgJiBJTlBVVF9DQU5DRUwgfHwgIWlzVmFsaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DQU5DRUxMRUQ7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNSZWNvZ25pemVkIHx8IGlzVmFsaWQpIHtcbiAgICAgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9FTkRFRDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIShzdGF0ZSAmIFNUQVRFX0JFR0FOKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NIQU5HRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQYW5cbiAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGFuZCBtb3ZlZCBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFBhblJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMucFggPSBudWxsO1xuICAgIHRoaXMucFkgPSBudWxsO1xufVxuXG5pbmhlcml0KFBhblJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQYW5SZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwYW4nLFxuICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fQUxMXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb247XG4gICAgICAgIHZhciBhY3Rpb25zID0gW107XG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGlvbnM7XG4gICAgfSxcblxuICAgIGRpcmVjdGlvblRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB2YXIgaGFzTW92ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSBpbnB1dC5kaXN0YW5jZTtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0LmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHggPSBpbnB1dC5kZWx0YVg7XG4gICAgICAgIHZhciB5ID0gaW5wdXQuZGVsdGFZO1xuXG4gICAgICAgIC8vIGxvY2sgdG8gYXhpcz9cbiAgICAgICAgaWYgKCEoZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb24pKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh4ID09PSAwKSA/IERJUkVDVElPTl9OT05FIDogKHggPCAwKSA/IERJUkVDVElPTl9MRUZUIDogRElSRUNUSU9OX1JJR0hUO1xuICAgICAgICAgICAgICAgIGhhc01vdmVkID0geCAhPSB0aGlzLnBYO1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFYKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHkgPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeSA8IDApID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG4gICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB5ICE9IHRoaXMucFk7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlucHV0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICAgICAgcmV0dXJuIGhhc01vdmVkICYmIGRpc3RhbmNlID4gb3B0aW9ucy50aHJlc2hvbGQgJiYgZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb247XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gQXR0clJlY29nbml6ZXIucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOIHx8ICghKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTikgJiYgdGhpcy5kaXJlY3Rpb25UZXN0KGlucHV0KSkpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXG4gICAgICAgIHRoaXMucFggPSBpbnB1dC5kZWx0YVg7XG4gICAgICAgIHRoaXMucFkgPSBpbnB1dC5kZWx0YVk7XG5cbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5kaXJlY3Rpb24pO1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlucHV0LmFkZGl0aW9uYWxFdmVudCA9IHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFBpbmNoXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlcnMgYXJlIG1vdmluZyB0b3dhcmQgKHpvb20taW4pIG9yIGF3YXkgZnJvbSBlYWNoIG90aGVyICh6b29tLW91dCkuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFBpbmNoUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFBpbmNoUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBpbmNoUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncGluY2gnLFxuICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgIHBvaW50ZXJzOiAyXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5zY2FsZSAtIDEpID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuc2NhbGUgIT09IDEpIHtcbiAgICAgICAgICAgIHZhciBpbk91dCA9IGlucHV0LnNjYWxlIDwgMSA/ICdpbicgOiAnb3V0JztcbiAgICAgICAgICAgIGlucHV0LmFkZGl0aW9uYWxFdmVudCA9IHRoaXMub3B0aW9ucy5ldmVudCArIGluT3V0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUHJlc3NcbiAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGZvciB4IG1zIHdpdGhvdXQgYW55IG1vdmVtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFByZXNzUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLl90aW1lciA9IG51bGw7XG4gICAgdGhpcy5faW5wdXQgPSBudWxsO1xufVxuXG5pbmhlcml0KFByZXNzUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUHJlc3NSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwcmVzcycsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICB0aW1lOiAyNTEsIC8vIG1pbmltYWwgdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBwcmVzc2VkXG4gICAgICAgIHRocmVzaG9sZDogOSAvLyBhIG1pbmltYWwgbW92ZW1lbnQgaXMgb2ssIGJ1dCBrZWVwIGl0IGxvd1xuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX0FVVE9dO1xuICAgIH0sXG5cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdmFyIHZhbGlkUG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcbiAgICAgICAgdmFyIHZhbGlkVGltZSA9IGlucHV0LmRlbHRhVGltZSA+IG9wdGlvbnMudGltZTtcblxuICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXG4gICAgICAgIC8vIHdlIG9ubHkgYWxsb3cgbGl0dGxlIG1vdmVtZW50XG4gICAgICAgIC8vIGFuZCB3ZSd2ZSByZWFjaGVkIGFuIGVuZCBldmVudCwgc28gYSB0YXAgaXMgcG9zc2libGVcbiAgICAgICAgaWYgKCF2YWxpZE1vdmVtZW50IHx8ICF2YWxpZFBvaW50ZXJzIHx8IChpbnB1dC5ldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAhdmFsaWRUaW1lKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuICAgICAgICAgICAgfSwgb3B0aW9ucy50aW1lLCB0aGlzKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgIHJldHVybiBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNUQVRFX1JFQ09HTklaRUQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnB1dCAmJiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgJ3VwJywgaW5wdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faW5wdXQudGltZVN0YW1wID0gbm93KCk7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIHRoaXMuX2lucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vKipcbiAqIFJvdGF0ZVxuICogUmVjb2duaXplZCB3aGVuIHR3byBvciBtb3JlIHBvaW50ZXIgYXJlIG1vdmluZyBpbiBhIGNpcmN1bGFyIG1vdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUm90YXRlUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFJvdGF0ZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBSb3RhdGVSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdyb3RhdGUnLFxuICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgIHBvaW50ZXJzOiAyXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5yb3RhdGlvbikgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU3dpcGVcbiAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBtb3ZpbmcgZmFzdCAodmVsb2NpdHkpLCB3aXRoIGVub3VnaCBkaXN0YW5jZSBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFN3aXBlUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFN3aXBlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFN3aXBlUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAnc3dpcGUnLFxuICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICB2ZWxvY2l0eTogMC4zLFxuICAgICAgICBkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMLFxuICAgICAgICBwb2ludGVyczogMVxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBQYW5SZWNvZ25pemVyLnByb3RvdHlwZS5nZXRUb3VjaEFjdGlvbi5jYWxsKHRoaXMpO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb247XG4gICAgICAgIHZhciB2ZWxvY2l0eTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uICYgKERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5WDtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5WTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgZGlyZWN0aW9uICYgaW5wdXQub2Zmc2V0RGlyZWN0aW9uICYmXG4gICAgICAgICAgICBpbnB1dC5kaXN0YW5jZSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgJiZcbiAgICAgICAgICAgIGlucHV0Lm1heFBvaW50ZXJzID09IHRoaXMub3B0aW9ucy5wb2ludGVycyAmJlxuICAgICAgICAgICAgYWJzKHZlbG9jaXR5KSA+IHRoaXMub3B0aW9ucy52ZWxvY2l0eSAmJiBpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQ7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQub2Zmc2V0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uLCBpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBBIHRhcCBpcyBlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb2luZyBhIHNtYWxsIHRhcC9jbGljay4gTXVsdGlwbGUgdGFwcyBhcmUgcmVjb2duaXplZCBpZiB0aGV5IG9jY3VyXG4gKiBiZXR3ZWVuIHRoZSBnaXZlbiBpbnRlcnZhbCBhbmQgcG9zaXRpb24uIFRoZSBkZWxheSBvcHRpb24gY2FuIGJlIHVzZWQgdG8gcmVjb2duaXplIG11bHRpLXRhcHMgd2l0aG91dCBmaXJpbmdcbiAqIGEgc2luZ2xlIHRhcC5cbiAqXG4gKiBUaGUgZXZlbnREYXRhIGZyb20gdGhlIGVtaXR0ZWQgZXZlbnQgY29udGFpbnMgdGhlIHByb3BlcnR5IGB0YXBDb3VudGAsIHdoaWNoIGNvbnRhaW5zIHRoZSBhbW91bnQgb2ZcbiAqIG11bHRpLXRhcHMgYmVpbmcgcmVjb2duaXplZC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBUYXBSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIC8vIHByZXZpb3VzIHRpbWUgYW5kIGNlbnRlcixcbiAgICAvLyB1c2VkIGZvciB0YXAgY291bnRpbmdcbiAgICB0aGlzLnBUaW1lID0gZmFsc2U7XG4gICAgdGhpcy5wQ2VudGVyID0gZmFsc2U7XG5cbiAgICB0aGlzLl90aW1lciA9IG51bGw7XG4gICAgdGhpcy5faW5wdXQgPSBudWxsO1xuICAgIHRoaXMuY291bnQgPSAwO1xufVxuXG5pbmhlcml0KFRhcFJlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBpbmNoUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAndGFwJyxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIHRhcHM6IDEsXG4gICAgICAgIGludGVydmFsOiAzMDAsIC8vIG1heCB0aW1lIGJldHdlZW4gdGhlIG11bHRpLXRhcCB0YXBzXG4gICAgICAgIHRpbWU6IDI1MCwgLy8gbWF4IHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgZG93biAobGlrZSBmaW5nZXIgb24gdGhlIHNjcmVlbilcbiAgICAgICAgdGhyZXNob2xkOiA5LCAvLyBhIG1pbmltYWwgbW92ZW1lbnQgaXMgb2ssIGJ1dCBrZWVwIGl0IGxvd1xuICAgICAgICBwb3NUaHJlc2hvbGQ6IDEwIC8vIGEgbXVsdGktdGFwIGNhbiBiZSBhIGJpdCBvZmYgdGhlIGluaXRpYWwgcG9zaXRpb25cbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9NQU5JUFVMQVRJT05dO1xuICAgIH0sXG5cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICB2YXIgdmFsaWRUb3VjaFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPCBvcHRpb25zLnRpbWU7XG5cbiAgICAgICAgdGhpcy5yZXNldCgpO1xuXG4gICAgICAgIGlmICgoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpICYmICh0aGlzLmNvdW50ID09PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIG9ubHkgYWxsb3cgbGl0dGxlIG1vdmVtZW50XG4gICAgICAgIC8vIGFuZCB3ZSd2ZSByZWFjaGVkIGFuIGVuZCBldmVudCwgc28gYSB0YXAgaXMgcG9zc2libGVcbiAgICAgICAgaWYgKHZhbGlkTW92ZW1lbnQgJiYgdmFsaWRUb3VjaFRpbWUgJiYgdmFsaWRQb2ludGVycykge1xuICAgICAgICAgICAgaWYgKGlucHV0LmV2ZW50VHlwZSAhPSBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdmFsaWRJbnRlcnZhbCA9IHRoaXMucFRpbWUgPyAoaW5wdXQudGltZVN0YW1wIC0gdGhpcy5wVGltZSA8IG9wdGlvbnMuaW50ZXJ2YWwpIDogdHJ1ZTtcbiAgICAgICAgICAgIHZhciB2YWxpZE11bHRpVGFwID0gIXRoaXMucENlbnRlciB8fCBnZXREaXN0YW5jZSh0aGlzLnBDZW50ZXIsIGlucHV0LmNlbnRlcikgPCBvcHRpb25zLnBvc1RocmVzaG9sZDtcblxuICAgICAgICAgICAgdGhpcy5wVGltZSA9IGlucHV0LnRpbWVTdGFtcDtcbiAgICAgICAgICAgIHRoaXMucENlbnRlciA9IGlucHV0LmNlbnRlcjtcblxuICAgICAgICAgICAgaWYgKCF2YWxpZE11bHRpVGFwIHx8ICF2YWxpZEludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgKz0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcblxuICAgICAgICAgICAgLy8gaWYgdGFwIGNvdW50IG1hdGNoZXMgd2UgaGF2ZSByZWNvZ25pemVkIGl0LFxuICAgICAgICAgICAgLy8gZWxzZSBpdCBoYXMgYmVnYW4gcmVjb2duaXppbmcuLi5cbiAgICAgICAgICAgIHZhciB0YXBDb3VudCA9IHRoaXMuY291bnQgJSBvcHRpb25zLnRhcHM7XG4gICAgICAgICAgICBpZiAodGFwQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBubyBmYWlsaW5nIHJlcXVpcmVtZW50cywgaW1tZWRpYXRlbHkgdHJpZ2dlciB0aGUgdGFwIGV2ZW50XG4gICAgICAgICAgICAgICAgLy8gb3Igd2FpdCBhcyBsb25nIGFzIHRoZSBtdWx0aXRhcCBpbnRlcnZhbCB0byB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc1JlcXVpcmVGYWlsdXJlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zLmludGVydmFsLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX0JFR0FOO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICBmYWlsVGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBTVEFURV9SRUNPR05JWkVEKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dC50YXBDb3VudCA9IHRoaXMuY291bnQ7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIHRoaXMuX2lucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNpbXBsZSB3YXkgdG8gY3JlYXRlIGEgbWFuYWdlciB3aXRoIGEgZGVmYXVsdCBzZXQgb2YgcmVjb2duaXplcnMuXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSGFtbWVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLnJlY29nbml6ZXJzID0gaWZVbmRlZmluZWQob3B0aW9ucy5yZWNvZ25pemVycywgSGFtbWVyLmRlZmF1bHRzLnByZXNldCk7XG4gICAgcmV0dXJuIG5ldyBNYW5hZ2VyKGVsZW1lbnQsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5IYW1tZXIuVkVSU0lPTiA9ICcyLjAuNyc7XG5cbi8qKlxuICogZGVmYXVsdCBzZXR0aW5nc1xuICogQG5hbWVzcGFjZVxuICovXG5IYW1tZXIuZGVmYXVsdHMgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IGlmIERPTSBldmVudHMgYXJlIGJlaW5nIHRyaWdnZXJlZC5cbiAgICAgKiBCdXQgdGhpcyBpcyBzbG93ZXIgYW5kIHVudXNlZCBieSBzaW1wbGUgaW1wbGVtZW50YXRpb25zLCBzbyBkaXNhYmxlZCBieSBkZWZhdWx0LlxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgZG9tRXZlbnRzOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5L2ZhbGxiYWNrLlxuICAgICAqIFdoZW4gc2V0IHRvIGBjb21wdXRlYCBpdCB3aWxsIG1hZ2ljYWxseSBzZXQgdGhlIGNvcnJlY3QgdmFsdWUgYmFzZWQgb24gdGhlIGFkZGVkIHJlY29nbml6ZXJzLlxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICogQGRlZmF1bHQgY29tcHV0ZVxuICAgICAqL1xuICAgIHRvdWNoQWN0aW9uOiBUT1VDSF9BQ1RJT05fQ09NUFVURSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBlbmFibGU6IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBFWFBFUklNRU5UQUwgRkVBVFVSRSAtLSBjYW4gYmUgcmVtb3ZlZC9jaGFuZ2VkXG4gICAgICogQ2hhbmdlIHRoZSBwYXJlbnQgaW5wdXQgdGFyZ2V0IGVsZW1lbnQuXG4gICAgICogSWYgTnVsbCwgdGhlbiBpdCBpcyBiZWluZyBzZXQgdGhlIHRvIG1haW4gZWxlbWVudC5cbiAgICAgKiBAdHlwZSB7TnVsbHxFdmVudFRhcmdldH1cbiAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgaW5wdXRUYXJnZXQ6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBmb3JjZSBhbiBpbnB1dCBjbGFzc1xuICAgICAqIEB0eXBlIHtOdWxsfEZ1bmN0aW9ufVxuICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICBpbnB1dENsYXNzOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogRGVmYXVsdCByZWNvZ25pemVyIHNldHVwIHdoZW4gY2FsbGluZyBgSGFtbWVyKClgXG4gICAgICogV2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyIHRoZXNlIHdpbGwgYmUgc2tpcHBlZC5cbiAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICovXG4gICAgcHJlc2V0OiBbXG4gICAgICAgIC8vIFJlY29nbml6ZXJDbGFzcywgb3B0aW9ucywgW3JlY29nbml6ZVdpdGgsIC4uLl0sIFtyZXF1aXJlRmFpbHVyZSwgLi4uXVxuICAgICAgICBbUm90YXRlUmVjb2duaXplciwge2VuYWJsZTogZmFsc2V9XSxcbiAgICAgICAgW1BpbmNoUmVjb2duaXplciwge2VuYWJsZTogZmFsc2V9LCBbJ3JvdGF0ZSddXSxcbiAgICAgICAgW1N3aXBlUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9XSxcbiAgICAgICAgW1BhblJlY29nbml6ZXIsIHtkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMfSwgWydzd2lwZSddXSxcbiAgICAgICAgW1RhcFJlY29nbml6ZXJdLFxuICAgICAgICBbVGFwUmVjb2duaXplciwge2V2ZW50OiAnZG91YmxldGFwJywgdGFwczogMn0sIFsndGFwJ11dLFxuICAgICAgICBbUHJlc3NSZWNvZ25pemVyXVxuICAgIF0sXG5cbiAgICAvKipcbiAgICAgKiBTb21lIENTUyBwcm9wZXJ0aWVzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgdGhlIHdvcmtpbmcgb2YgSGFtbWVyLlxuICAgICAqIEFkZCB0aGVtIHRvIHRoaXMgbWV0aG9kIGFuZCB0aGV5IHdpbGwgYmUgc2V0IHdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlci5cbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICovXG4gICAgY3NzUHJvcHM6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIHRleHQgc2VsZWN0aW9uIHRvIGltcHJvdmUgdGhlIGRyYWdnaW5nIGdlc3R1cmUuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGUgdGhlIFdpbmRvd3MgUGhvbmUgZ3JpcHBlcnMgd2hlbiBwcmVzc2luZyBhbiBlbGVtZW50LlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHRvdWNoU2VsZWN0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIHRoZSBkZWZhdWx0IGNhbGxvdXQgc2hvd24gd2hlbiB5b3UgdG91Y2ggYW5kIGhvbGQgYSB0b3VjaCB0YXJnZXQuXG4gICAgICAgICAqIE9uIGlPUywgd2hlbiB5b3UgdG91Y2ggYW5kIGhvbGQgYSB0b3VjaCB0YXJnZXQgc3VjaCBhcyBhIGxpbmssIFNhZmFyaSBkaXNwbGF5c1xuICAgICAgICAgKiBhIGNhbGxvdXQgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbGluay4gVGhpcyBwcm9wZXJ0eSBhbGxvd3MgeW91IHRvIGRpc2FibGUgdGhhdCBjYWxsb3V0LlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHRvdWNoQ2FsbG91dDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB6b29taW5nIGlzIGVuYWJsZWQuIFVzZWQgYnkgSUUxMD5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICBjb250ZW50Wm9vbWluZzogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhhdCBhbiBlbnRpcmUgZWxlbWVudCBzaG91bGQgYmUgZHJhZ2dhYmxlIGluc3RlYWQgb2YgaXRzIGNvbnRlbnRzLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdXNlckRyYWc6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogT3ZlcnJpZGVzIHRoZSBoaWdobGlnaHQgY29sb3Igc2hvd24gd2hlbiB0aGUgdXNlciB0YXBzIGEgbGluayBvciBhIEphdmFTY3JpcHRcbiAgICAgICAgICogY2xpY2thYmxlIGVsZW1lbnQgaW4gaU9TLiBUaGlzIHByb3BlcnR5IG9iZXlzIHRoZSBhbHBoYSB2YWx1ZSwgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAncmdiYSgwLDAsMCwwKSdcbiAgICAgICAgICovXG4gICAgICAgIHRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKSdcbiAgICB9XG59O1xuXG52YXIgU1RPUCA9IDE7XG52YXIgRk9SQ0VEX1NUT1AgPSAyO1xuXG4vKipcbiAqIE1hbmFnZXJcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBNYW5hZ2VyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIEhhbW1lci5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cbiAgICB0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQgPSB0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQgfHwgZWxlbWVudDtcblxuICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcbiAgICB0aGlzLnNlc3Npb24gPSB7fTtcbiAgICB0aGlzLnJlY29nbml6ZXJzID0gW107XG4gICAgdGhpcy5vbGRDc3NQcm9wcyA9IHt9O1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLmlucHV0ID0gY3JlYXRlSW5wdXRJbnN0YW5jZSh0aGlzKTtcbiAgICB0aGlzLnRvdWNoQWN0aW9uID0gbmV3IFRvdWNoQWN0aW9uKHRoaXMsIHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbik7XG5cbiAgICB0b2dnbGVDc3NQcm9wcyh0aGlzLCB0cnVlKTtcblxuICAgIGVhY2godGhpcy5vcHRpb25zLnJlY29nbml6ZXJzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIHZhciByZWNvZ25pemVyID0gdGhpcy5hZGQobmV3IChpdGVtWzBdKShpdGVtWzFdKSk7XG4gICAgICAgIGl0ZW1bMl0gJiYgcmVjb2duaXplci5yZWNvZ25pemVXaXRoKGl0ZW1bMl0pO1xuICAgICAgICBpdGVtWzNdICYmIHJlY29nbml6ZXIucmVxdWlyZUZhaWx1cmUoaXRlbVszXSk7XG4gICAgfSwgdGhpcyk7XG59XG5cbk1hbmFnZXIucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gT3B0aW9ucyB0aGF0IG5lZWQgYSBsaXR0bGUgbW9yZSBzZXR1cFxuICAgICAgICBpZiAob3B0aW9ucy50b3VjaEFjdGlvbikge1xuICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnB1dFRhcmdldCkge1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZXhpc3RpbmcgZXZlbnQgbGlzdGVuZXJzIGFuZCByZWluaXRpYWxpemVcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC50YXJnZXQgPSBvcHRpb25zLmlucHV0VGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5pbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHN0b3AgcmVjb2duaXppbmcgZm9yIHRoaXMgc2Vzc2lvbi5cbiAgICAgKiBUaGlzIHNlc3Npb24gd2lsbCBiZSBkaXNjYXJkZWQsIHdoZW4gYSBuZXcgW2lucHV0XXN0YXJ0IGV2ZW50IGlzIGZpcmVkLlxuICAgICAqIFdoZW4gZm9yY2VkLCB0aGUgcmVjb2duaXplciBjeWNsZSBpcyBzdG9wcGVkIGltbWVkaWF0ZWx5LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZvcmNlXVxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zdG9wcGVkID0gZm9yY2UgPyBGT1JDRURfU1RPUCA6IFNUT1A7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJ1biB0aGUgcmVjb2duaXplcnMhXG4gICAgICogY2FsbGVkIGJ5IHRoZSBpbnB1dEhhbmRsZXIgZnVuY3Rpb24gb24gZXZlcnkgbW92ZW1lbnQgb2YgdGhlIHBvaW50ZXJzICh0b3VjaGVzKVxuICAgICAqIGl0IHdhbGtzIHRocm91Z2ggYWxsIHRoZSByZWNvZ25pemVycyBhbmQgdHJpZXMgdG8gZGV0ZWN0IHRoZSBnZXN0dXJlIHRoYXQgaXMgYmVpbmcgbWFkZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICByZWNvZ25pemU6IGZ1bmN0aW9uKGlucHV0RGF0YSkge1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcnVuIHRoZSB0b3VjaC1hY3Rpb24gcG9seWZpbGxcbiAgICAgICAgdGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoaW5wdXREYXRhKTtcblxuICAgICAgICB2YXIgcmVjb2duaXplcjtcbiAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcblxuICAgICAgICAvLyB0aGlzIGhvbGRzIHRoZSByZWNvZ25pemVyIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgICAgLy8gc28gdGhlIHJlY29nbml6ZXIncyBzdGF0ZSBuZWVkcyB0byBiZSBCRUdBTiwgQ0hBTkdFRCwgRU5ERUQgb3IgUkVDT0dOSVpFRFxuICAgICAgICAvLyBpZiBubyByZWNvZ25pemVyIGlzIGRldGVjdGluZyBhIHRoaW5nLCBpdCBpcyBzZXQgdG8gYG51bGxgXG4gICAgICAgIHZhciBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyO1xuXG4gICAgICAgIC8vIHJlc2V0IHdoZW4gdGhlIGxhc3QgcmVjb2duaXplciBpcyByZWNvZ25pemVkXG4gICAgICAgIC8vIG9yIHdoZW4gd2UncmUgaW4gYSBuZXcgc2Vzc2lvblxuICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgfHwgKGN1clJlY29nbml6ZXIgJiYgY3VyUmVjb2duaXplci5zdGF0ZSAmIFNUQVRFX1JFQ09HTklaRUQpKSB7XG4gICAgICAgICAgICBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCByZWNvZ25pemVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlY29nbml6ZXIgPSByZWNvZ25pemVyc1tpXTtcblxuICAgICAgICAgICAgLy8gZmluZCBvdXQgaWYgd2UgYXJlIGFsbG93ZWQgdHJ5IHRvIHJlY29nbml6ZSB0aGUgaW5wdXQgZm9yIHRoaXMgb25lLlxuICAgICAgICAgICAgLy8gMS4gICBhbGxvdyBpZiB0aGUgc2Vzc2lvbiBpcyBOT1QgZm9yY2VkIHN0b3BwZWQgKHNlZSB0aGUgLnN0b3AoKSBtZXRob2QpXG4gICAgICAgICAgICAvLyAyLiAgIGFsbG93IGlmIHdlIHN0aWxsIGhhdmVuJ3QgcmVjb2duaXplZCBhIGdlc3R1cmUgaW4gdGhpcyBzZXNzaW9uLCBvciB0aGUgdGhpcyByZWNvZ25pemVyIGlzIHRoZSBvbmVcbiAgICAgICAgICAgIC8vICAgICAgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuICAgICAgICAgICAgLy8gMy4gICBhbGxvdyBpZiB0aGUgcmVjb2duaXplciBpcyBhbGxvd2VkIHRvIHJ1biBzaW11bHRhbmVvdXMgd2l0aCB0aGUgY3VycmVudCByZWNvZ25pemVkIHJlY29nbml6ZXIuXG4gICAgICAgICAgICAvLyAgICAgIHRoaXMgY2FuIGJlIHNldHVwIHdpdGggdGhlIGByZWNvZ25pemVXaXRoKClgIG1ldGhvZCBvbiB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIGlmIChzZXNzaW9uLnN0b3BwZWQgIT09IEZPUkNFRF9TVE9QICYmICggLy8gMVxuICAgICAgICAgICAgICAgICAgICAhY3VyUmVjb2duaXplciB8fCByZWNvZ25pemVyID09IGN1clJlY29nbml6ZXIgfHwgLy8gMlxuICAgICAgICAgICAgICAgICAgICByZWNvZ25pemVyLmNhblJlY29nbml6ZVdpdGgoY3VyUmVjb2duaXplcikpKSB7IC8vIDNcbiAgICAgICAgICAgICAgICByZWNvZ25pemVyLnJlY29nbml6ZShpbnB1dERhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNvZ25pemVyLnJlc2V0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZSByZWNvZ25pemVyIGhhcyBiZWVuIHJlY29nbml6aW5nIHRoZSBpbnB1dCBhcyBhIHZhbGlkIGdlc3R1cmUsIHdlIHdhbnQgdG8gc3RvcmUgdGhpcyBvbmUgYXMgdGhlXG4gICAgICAgICAgICAvLyBjdXJyZW50IGFjdGl2ZSByZWNvZ25pemVyLiBidXQgb25seSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYW4gYWN0aXZlIHJlY29nbml6ZXJcbiAgICAgICAgICAgIGlmICghY3VyUmVjb2duaXplciAmJiByZWNvZ25pemVyLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEKSkge1xuICAgICAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGdldCBhIHJlY29nbml6ZXIgYnkgaXRzIGV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE51bGx9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChyZWNvZ25pemVyIGluc3RhbmNlb2YgUmVjb2duaXplcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29nbml6ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocmVjb2duaXplcnNbaV0ub3B0aW9ucy5ldmVudCA9PSByZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY29nbml6ZXJzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBhZGQgYSByZWNvZ25pemVyIHRvIHRoZSBtYW5hZ2VyXG4gICAgICogZXhpc3RpbmcgcmVjb2duaXplcnMgd2l0aCB0aGUgc2FtZSBldmVudCBuYW1lIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE1hbmFnZXJ9XG4gICAgICovXG4gICAgYWRkOiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhyZWNvZ25pemVyLCAnYWRkJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIGV4aXN0aW5nXG4gICAgICAgIHZhciBleGlzdGluZyA9IHRoaXMuZ2V0KHJlY29nbml6ZXIub3B0aW9ucy5ldmVudCk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoZXhpc3RpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWNvZ25pemVycy5wdXNoKHJlY29nbml6ZXIpO1xuICAgICAgICByZWNvZ25pemVyLm1hbmFnZXIgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgYSByZWNvZ25pemVyIGJ5IG5hbWUgb3IgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge01hbmFnZXJ9XG4gICAgICovXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhyZWNvZ25pemVyLCAncmVtb3ZlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjb2duaXplciA9IHRoaXMuZ2V0KHJlY29nbml6ZXIpO1xuXG4gICAgICAgIC8vIGxldCdzIG1ha2Ugc3VyZSB0aGlzIHJlY29nbml6ZXIgZXhpc3RzXG4gICAgICAgIGlmIChyZWNvZ25pemVyKSB7XG4gICAgICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5BcnJheShyZWNvZ25pemVycywgcmVjb2duaXplcik7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZWNvZ25pemVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogYmluZCBldmVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gdGhpc1xuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgZWFjaChzcGxpdFN0cihldmVudHMpLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdID0gaGFuZGxlcnNbZXZlbnRdIHx8IFtdO1xuICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5iaW5kIGV2ZW50LCBsZWF2ZSBlbWl0IGJsYW5rIHRvIHJlbW92ZSBhbGwgaGFuZGxlcnNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2hhbmRsZXJdXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gdGhpc1xuICAgICAqL1xuICAgIG9mZjogZnVuY3Rpb24oZXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgZWFjaChzcGxpdFN0cihldmVudHMpLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGhhbmRsZXJzW2V2ZW50XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdICYmIGhhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaW5BcnJheShoYW5kbGVyc1tldmVudF0sIGhhbmRsZXIpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBlbWl0IGV2ZW50IHRvIHRoZSBsaXN0ZW5lcnNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIC8vIHdlIGFsc28gd2FudCB0byB0cmlnZ2VyIGRvbSBldmVudHNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kb21FdmVudHMpIHtcbiAgICAgICAgICAgIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBoYW5kbGVycywgc28gc2tpcCBpdCBhbGxcbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF0gJiYgdGhpcy5oYW5kbGVyc1tldmVudF0uc2xpY2UoKTtcbiAgICAgICAgaWYgKCFoYW5kbGVycyB8fCAhaGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLnR5cGUgPSBldmVudDtcbiAgICAgICAgZGF0YS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGF0YS5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW2ldKGRhdGEpO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRlc3Ryb3kgdGhlIG1hbmFnZXIgYW5kIHVuYmluZHMgYWxsIGV2ZW50c1xuICAgICAqIGl0IGRvZXNuJ3QgdW5iaW5kIGRvbSBldmVudHMsIHRoYXQgaXMgdGhlIHVzZXIgb3duIHJlc3BvbnNpYmlsaXR5XG4gICAgICovXG4gICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCAmJiB0b2dnbGVDc3NQcm9wcyh0aGlzLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB7fTtcbiAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgfVxufTtcblxuLyoqXG4gKiBhZGQvcmVtb3ZlIHRoZSBjc3MgcHJvcGVydGllcyBhcyBkZWZpbmVkIGluIG1hbmFnZXIub3B0aW9ucy5jc3NQcm9wc1xuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFkZFxuICovXG5mdW5jdGlvbiB0b2dnbGVDc3NQcm9wcyhtYW5hZ2VyLCBhZGQpIHtcbiAgICB2YXIgZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICBpZiAoIWVsZW1lbnQuc3R5bGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcHJvcDtcbiAgICBlYWNoKG1hbmFnZXIub3B0aW9ucy5jc3NQcm9wcywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgcHJvcCA9IHByZWZpeGVkKGVsZW1lbnQuc3R5bGUsIG5hbWUpO1xuICAgICAgICBpZiAoYWRkKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdID0gZWxlbWVudC5zdHlsZVtwcm9wXTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdIHx8ICcnO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFhZGQpIHtcbiAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wcyA9IHt9O1xuICAgIH1cbn1cblxuLyoqXG4gKiB0cmlnZ2VyIGRvbSBldmVudFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICovXG5mdW5jdGlvbiB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICB2YXIgZ2VzdHVyZUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgZ2VzdHVyZUV2ZW50LmluaXRFdmVudChldmVudCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgZ2VzdHVyZUV2ZW50Lmdlc3R1cmUgPSBkYXRhO1xuICAgIGRhdGEudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZ2VzdHVyZUV2ZW50KTtcbn1cblxuYXNzaWduKEhhbW1lciwge1xuICAgIElOUFVUX1NUQVJUOiBJTlBVVF9TVEFSVCxcbiAgICBJTlBVVF9NT1ZFOiBJTlBVVF9NT1ZFLFxuICAgIElOUFVUX0VORDogSU5QVVRfRU5ELFxuICAgIElOUFVUX0NBTkNFTDogSU5QVVRfQ0FOQ0VMLFxuXG4gICAgU1RBVEVfUE9TU0lCTEU6IFNUQVRFX1BPU1NJQkxFLFxuICAgIFNUQVRFX0JFR0FOOiBTVEFURV9CRUdBTixcbiAgICBTVEFURV9DSEFOR0VEOiBTVEFURV9DSEFOR0VELFxuICAgIFNUQVRFX0VOREVEOiBTVEFURV9FTkRFRCxcbiAgICBTVEFURV9SRUNPR05JWkVEOiBTVEFURV9SRUNPR05JWkVELFxuICAgIFNUQVRFX0NBTkNFTExFRDogU1RBVEVfQ0FOQ0VMTEVELFxuICAgIFNUQVRFX0ZBSUxFRDogU1RBVEVfRkFJTEVELFxuXG4gICAgRElSRUNUSU9OX05PTkU6IERJUkVDVElPTl9OT05FLFxuICAgIERJUkVDVElPTl9MRUZUOiBESVJFQ1RJT05fTEVGVCxcbiAgICBESVJFQ1RJT05fUklHSFQ6IERJUkVDVElPTl9SSUdIVCxcbiAgICBESVJFQ1RJT05fVVA6IERJUkVDVElPTl9VUCxcbiAgICBESVJFQ1RJT05fRE9XTjogRElSRUNUSU9OX0RPV04sXG4gICAgRElSRUNUSU9OX0hPUklaT05UQUw6IERJUkVDVElPTl9IT1JJWk9OVEFMLFxuICAgIERJUkVDVElPTl9WRVJUSUNBTDogRElSRUNUSU9OX1ZFUlRJQ0FMLFxuICAgIERJUkVDVElPTl9BTEw6IERJUkVDVElPTl9BTEwsXG5cbiAgICBNYW5hZ2VyOiBNYW5hZ2VyLFxuICAgIElucHV0OiBJbnB1dCxcbiAgICBUb3VjaEFjdGlvbjogVG91Y2hBY3Rpb24sXG5cbiAgICBUb3VjaElucHV0OiBUb3VjaElucHV0LFxuICAgIE1vdXNlSW5wdXQ6IE1vdXNlSW5wdXQsXG4gICAgUG9pbnRlckV2ZW50SW5wdXQ6IFBvaW50ZXJFdmVudElucHV0LFxuICAgIFRvdWNoTW91c2VJbnB1dDogVG91Y2hNb3VzZUlucHV0LFxuICAgIFNpbmdsZVRvdWNoSW5wdXQ6IFNpbmdsZVRvdWNoSW5wdXQsXG5cbiAgICBSZWNvZ25pemVyOiBSZWNvZ25pemVyLFxuICAgIEF0dHJSZWNvZ25pemVyOiBBdHRyUmVjb2duaXplcixcbiAgICBUYXA6IFRhcFJlY29nbml6ZXIsXG4gICAgUGFuOiBQYW5SZWNvZ25pemVyLFxuICAgIFN3aXBlOiBTd2lwZVJlY29nbml6ZXIsXG4gICAgUGluY2g6IFBpbmNoUmVjb2duaXplcixcbiAgICBSb3RhdGU6IFJvdGF0ZVJlY29nbml6ZXIsXG4gICAgUHJlc3M6IFByZXNzUmVjb2duaXplcixcblxuICAgIG9uOiBhZGRFdmVudExpc3RlbmVycyxcbiAgICBvZmY6IHJlbW92ZUV2ZW50TGlzdGVuZXJzLFxuICAgIGVhY2g6IGVhY2gsXG4gICAgbWVyZ2U6IG1lcmdlLFxuICAgIGV4dGVuZDogZXh0ZW5kLFxuICAgIGFzc2lnbjogYXNzaWduLFxuICAgIGluaGVyaXQ6IGluaGVyaXQsXG4gICAgYmluZEZuOiBiaW5kRm4sXG4gICAgcHJlZml4ZWQ6IHByZWZpeGVkXG59KTtcblxuLy8gdGhpcyBwcmV2ZW50cyBlcnJvcnMgd2hlbiBIYW1tZXIgaXMgbG9hZGVkIGluIHRoZSBwcmVzZW5jZSBvZiBhbiBBTURcbi8vICBzdHlsZSBsb2FkZXIgYnV0IGJ5IHNjcmlwdCB0YWcsIG5vdCBieSB0aGUgbG9hZGVyLlxudmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9KSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuZnJlZUdsb2JhbC5IYW1tZXIgPSBIYW1tZXI7XG5cbmlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBIYW1tZXI7XG4gICAgfSk7XG59IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IEhhbW1lcjtcbn0gZWxzZSB7XG4gICAgd2luZG93W2V4cG9ydE5hbWVdID0gSGFtbWVyO1xufVxuXG59KSh3aW5kb3csIGRvY3VtZW50LCAnSGFtbWVyJyk7XG4iLCIvKiFcbiAqICBob3dsZXIuanMgdjIuMC4yXG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMTYsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgLy8gJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBnbG9iYWwgY29udHJvbGxlci4gQWxsIGNvbnRhaW5lZCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGFwcGx5XG4gICAqIHRvIGFsbCBzb3VuZHMgdGhhdCBhcmUgY3VycmVudGx5IHBsYXlpbmcgb3Igd2lsbCBiZSBpbiB0aGUgZnV0dXJlLlxuICAgKi9cbiAgdmFyIEhvd2xlckdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIEludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7fTtcbiAgICAgIHNlbGYuX2hvd2xzID0gW107XG4gICAgICBzZWxmLl9tdXRlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5fdm9sdW1lID0gMTtcbiAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5dGhyb3VnaCc7XG4gICAgICBzZWxmLl9uYXZpZ2F0b3IgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvcikgPyB3aW5kb3cubmF2aWdhdG9yIDogbnVsbDtcblxuICAgICAgLy8gUHVibGljIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLm1hc3RlckdhaW4gPSBudWxsO1xuICAgICAgc2VsZi5ub0F1ZGlvID0gZmFsc2U7XG4gICAgICBzZWxmLnVzaW5nV2ViQXVkaW8gPSB0cnVlO1xuICAgICAgc2VsZi5hdXRvU3VzcGVuZCA9IHRydWU7XG4gICAgICBzZWxmLmN0eCA9IG51bGw7XG5cbiAgICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRoZSBhdXRvIGlPUyBlbmFibGVyLlxuICAgICAgc2VsZi5tb2JpbGVBdXRvRW5hYmxlID0gdHJ1ZTtcblxuICAgICAgLy8gU2V0dXAgdGhlIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICBzZWxmLl9zZXR1cCgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgZ2xvYmFsIHZvbHVtZSBmb3IgYWxsIHNvdW5kcy5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gdm9sIFZvbHVtZSBmcm9tIDAuMCB0byAxLjAuXG4gICAgICogQHJldHVybiB7SG93bGVyL0Zsb2F0fSAgICAgUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24odm9sKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdm9sID0gcGFyc2VGbG9hdCh2b2wpO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAvLyBEb24ndCB1cGRhdGUgYW55IG9mIHRoZSBub2RlcyBpZiB3ZSBhcmUgbXV0ZWQuXG4gICAgICAgIGlmIChzZWxmLl9tdXRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB1c2luZyBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBhZGp1c3QgdGhlIG1hc3RlciBnYWluLlxuICAgICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4udmFsdWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW5kIGNoYW5nZSB2b2x1bWUgZm9yIGFsbCBIVE1MNSBhdWRpbyBub2Rlcy5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGFuZ2UgdGhlIHZvbHVtZXMuXG4gICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogdm9sO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtdXRpbmcgYW5kIHVubXV0aW5nIGdsb2JhbGx5LlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIElzIG11dGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgIC8vIFdpdGggV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gbXV0ZSB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnZhbHVlID0gbXV0ZWQgPyAwIDogc2VsZi5fdm9sdW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYW5kIG11dGUgYWxsIEhUTUw1IEF1ZGlvIG5vZGVzLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgbWFyayB0aGUgYXVkaW8gbm9kZSBhcyBtdXRlZC5cbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IChtdXRlZCkgPyB0cnVlIDogc291bmQuX211dGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IGFsbCBjdXJyZW50bHkgbG9hZGVkIEhvd2wgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB0byBtYWtlIHN1cmUgaXQgaXMgZnVsbHkgcmVzZXQuXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvICYmIHNlbGYuY3R4ICYmIHR5cGVvZiBzZWxmLmN0eC5jbG9zZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHguY2xvc2UoKTtcbiAgICAgICAgc2VsZi5jdHggPSBudWxsO1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGNvZGVjIHN1cHBvcnQgb2Ygc3BlY2lmaWMgZXh0ZW5zaW9uLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXh0IEF1ZGlvIGZpbGUgZXh0ZW50aW9uLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29kZWNzOiBmdW5jdGlvbihleHQpIHtcbiAgICAgIHJldHVybiAodGhpcyB8fCBIb3dsZXIpLl9jb2RlY3NbZXh0LnJlcGxhY2UoL154LS8sICcnKV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHVwIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgc3VzcGVuZC9yZXN1bWUgc3RhdGUgb2YgdGhlIEF1ZGlvQ29udGV4dC5cbiAgICAgIHNlbGYuc3RhdGUgPSBzZWxmLmN0eCA/IHNlbGYuY3R4LnN0YXRlIHx8ICdydW5uaW5nJyA6ICdydW5uaW5nJztcblxuICAgICAgLy8gQXV0b21hdGljYWxseSBiZWdpbiB0aGUgMzAtc2Vjb25kIHN1c3BlbmQgcHJvY2Vzc1xuICAgICAgc2VsZi5fYXV0b1N1c3BlbmQoKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYXVkaW8gaXMgYXZhaWxhYmxlLlxuICAgICAgaWYgKCFzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgLy8gTm8gYXVkaW8gaXMgYXZhaWxhYmxlIG9uIHRoaXMgc3lzdGVtIGlmIG5vQXVkaW8gaXMgc2V0IHRvIHRydWUuXG4gICAgICAgIGlmICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYW5wbGF5dGhyb3VnaCBldmVudCBpcyBhdmFpbGFibGUuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRlc3Qub25jYW5wbGF5dGhyb3VnaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IHRvIG1ha2Ugc3VyZSBhdWRpbyBpc24ndCBkaXNhYmxlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgIGlmICh0ZXN0Lm11dGVkKSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgLy8gQ2hlY2sgZm9yIHN1cHBvcnRlZCBjb2RlY3MuXG4gICAgICBpZiAoIXNlbGYubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9zZXR1cENvZGVjcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGJyb3dzZXIgc3VwcG9ydCBmb3IgdmFyaW91cyBjb2RlY3MgYW5kIGNhY2hlIHRoZSByZXN1bHRzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXBDb2RlY3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZhciBhdWRpb1Rlc3QgPSBudWxsO1xuXG4gICAgICAvLyBNdXN0IHdyYXAgaW4gYSB0cnkvY2F0Y2ggYmVjYXVzZSBJRTExIGluIHNlcnZlciBtb2RlIHRocm93cyBhbiBlcnJvci5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF1ZGlvVGVzdCA9ICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSA/IG5ldyBBdWRpbygpIDogbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhdWRpb1Rlc3QgfHwgdHlwZW9mIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1wZWdUZXN0ID0gYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcGVnOycpLnJlcGxhY2UoL15ubyQvLCAnJyk7XG5cbiAgICAgIC8vIE9wZXJhIHZlcnNpb24gPDMzIGhhcyBtaXhlZCBNUDMgc3VwcG9ydCwgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgYW5kIGJsb2NrIGl0LlxuICAgICAgdmFyIGNoZWNrT3BlcmEgPSBzZWxmLl9uYXZpZ2F0b3IgJiYgc2VsZi5fbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvT1BSXFwvKFswLTZdLikvZyk7XG4gICAgICB2YXIgaXNPbGRPcGVyYSA9IChjaGVja09wZXJhICYmIHBhcnNlSW50KGNoZWNrT3BlcmFbMF0uc3BsaXQoJy8nKVsxXSwgMTApIDwgMzMpO1xuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7XG4gICAgICAgIG1wMzogISEoIWlzT2xkT3BlcmEgJiYgKG1wZWdUZXN0IHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXAzOycpLnJlcGxhY2UoL15ubyQvLCAnJykpKSxcbiAgICAgICAgbXBlZzogISFtcGVnVGVzdCxcbiAgICAgICAgb3B1czogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwib3B1c1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dnOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3YXY6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93YXY7IGNvZGVjcz1cIjFcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGFhYzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBjYWY6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWNhZjsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtNGE6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG1wNDogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW1wNDsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2ViYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2VibTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgZG9sYnk6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7IGNvZGVjcz1cImVjLTNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGZsYWM6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1mbGFjOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vZmxhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE1vYmlsZSBicm93c2VycyB3aWxsIG9ubHkgYWxsb3cgYXVkaW8gdG8gYmUgcGxheWVkIGFmdGVyIGEgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBBdHRlbXB0IHRvIGF1dG9tYXRpY2FsbHkgdW5sb2NrIGF1ZGlvIG9uIHRoZSBmaXJzdCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIENvbmNlcHQgZnJvbTogaHR0cDovL3BhdWxiYWthdXMuY29tL3R1dG9yaWFscy9odG1sNS93ZWItYXVkaW8tb24taW9zL1xuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfZW5hYmxlTW9iaWxlQXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gT25seSBydW4gdGhpcyBvbiBtb2JpbGUgZGV2aWNlcyBpZiBhdWRpbyBpc24ndCBhbHJlYWR5IGVhbmJsZWQuXG4gICAgICB2YXIgaXNNb2JpbGUgPSAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkfEJsYWNrQmVycnl8QkIxMHxTaWxrfE1vYmkvaS50ZXN0KHNlbGYuX25hdmlnYXRvciAmJiBzZWxmLl9uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHZhciBpc1RvdWNoID0gISEoKCdvbnRvdWNoZW5kJyBpbiB3aW5kb3cpIHx8IChzZWxmLl9uYXZpZ2F0b3IgJiYgc2VsZi5fbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCkgfHwgKHNlbGYuX25hdmlnYXRvciAmJiBzZWxmLl9uYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcbiAgICAgIGlmIChzZWxmLl9tb2JpbGVFbmFibGVkIHx8ICFzZWxmLmN0eCB8fCAoIWlzTW9iaWxlICYmICFpc1RvdWNoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX21vYmlsZUVuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgLy8gU29tZSBtb2JpbGUgZGV2aWNlcy9wbGF0Zm9ybXMgaGF2ZSBkaXN0b3J0aW9uIGlzc3VlcyB3aGVuIG9wZW5pbmcvY2xvc2luZyB0YWJzIGFuZC9vciB3ZWIgdmlld3MuXG4gICAgICAvLyBCdWdzIGluIHRoZSBicm93c2VyIChlc3BlY2lhbGx5IE1vYmlsZSBTYWZhcmkpIGNhbiBjYXVzZSB0aGUgc2FtcGxlUmF0ZSB0byBjaGFuZ2UgZnJvbSA0NDEwMCB0byA0ODAwMC5cbiAgICAgIC8vIEJ5IGNhbGxpbmcgSG93bGVyLnVubG9hZCgpLCB3ZSBjcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHdpdGggdGhlIGNvcnJlY3Qgc2FtcGxlUmF0ZS5cbiAgICAgIGlmICghc2VsZi5fbW9iaWxlVW5sb2FkZWQgJiYgc2VsZi5jdHguc2FtcGxlUmF0ZSAhPT0gNDQxMDApIHtcbiAgICAgICAgc2VsZi5fbW9iaWxlVW5sb2FkZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTY3JhdGNoIGJ1ZmZlciBmb3IgZW5hYmxpbmcgaU9TIHRvIGRpc3Bvc2Ugb2Ygd2ViIGF1ZGlvIGJ1ZmZlcnMgY29ycmVjdGx5LCBhcyBwZXI6XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0MTE5Njg0XG4gICAgICBzZWxmLl9zY3JhdGNoQnVmZmVyID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcblxuICAgICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCBvbiB0b3VjaCBzdGFydCB0byBjcmVhdGUgYW5kIHBsYXkgYSBidWZmZXIsXG4gICAgICAvLyB0aGVuIGNoZWNrIGlmIHRoZSBhdWRpbyBhY3R1YWxseSBwbGF5ZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICAvLyBhdWRpbyBoYXMgbm93IGJlZW4gdW5sb2NrZWQgb24gaU9TLCBBbmRyb2lkLCBldGMuXG4gICAgICB2YXIgdW5sb2NrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBidWZmZXIuXG4gICAgICAgIHZhciBzb3VyY2UgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgc291cmNlLmJ1ZmZlciA9IHNlbGYuX3NjcmF0Y2hCdWZmZXI7XG4gICAgICAgIHNvdXJjZS5jb25uZWN0KHNlbGYuY3R4LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBlbXB0eSBidWZmZXIuXG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNvdXJjZS5ub3RlT24oMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc291cmNlLnN0YXJ0KDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0dXAgYSB0aW1lb3V0IHRvIGNoZWNrIHRoYXQgd2UgYXJlIHVubG9ja2VkIG9uIHRoZSBuZXh0IGV2ZW50IGxvb3AuXG4gICAgICAgIHNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc291cmNlLmRpc2Nvbm5lY3QoMCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHVubG9ja2VkIHN0YXRlIGFuZCBwcmV2ZW50IHRoaXMgY2hlY2sgZnJvbSBoYXBwZW5pbmcgYWdhaW4uXG4gICAgICAgICAgc2VsZi5fbW9iaWxlRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgc2VsZi5tb2JpbGVBdXRvRW5hYmxlID0gZmFsc2U7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRvdWNoIHN0YXJ0IGxpc3RlbmVyLlxuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGEgdG91Y2ggc3RhcnQgbGlzdGVuZXIgdG8gYXR0ZW1wdCBhbiB1bmxvY2sgaW4uXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHN1c3BlbmQgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgYWZ0ZXIgbm8gc291bmQgaGFzIHBsYXllZCBmb3IgMzAgc2Vjb25kcy5cbiAgICAgKiBUaGlzIHNhdmVzIHByb2Nlc3NpbmcvZW5lcmd5IGFuZCBmaXhlcyB2YXJpb3VzIGJyb3dzZXItc3BlY2lmaWMgYnVncyB3aXRoIGF1ZGlvIGdldHRpbmcgc3R1Y2suXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvU3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCB8fCAhc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnN1c3BlbmQgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBzb3VuZHMgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxzZWxmLl9ob3dsc1tpXS5fc291bmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl9zb3VuZHNbal0uX3BhdXNlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gc291bmQgaGFzIHBsYXllZCBhZnRlciAzMCBzZWNvbmRzLCBzdXNwZW5kIHRoZSBjb250ZXh0LlxuICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kaW5nJztcbiAgICAgICAgc2VsZi5jdHguc3VzcGVuZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kZWQnO1xuXG4gICAgICAgICAgaWYgKHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZDtcbiAgICAgICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSwgMzAwMDApO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSByZXN1bWUgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgd2hlbiBhIG5ldyBzb3VuZCBpcyBwbGF5ZWQuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvUmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHtcbiAgICAgICAgc2VsZi5zdGF0ZSA9ICdyZXN1bWluZyc7XG4gICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdydW5uaW5nJztcblxuICAgICAgICAgIC8vIEVtaXQgdG8gYWxsIEhvd2xzIHRoYXQgdGhlIGF1ZGlvIGhhcyByZXN1bWVkLlxuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2VsZi5faG93bHNbaV0uX2VtaXQoJ3Jlc3VtZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRpbmcnKSB7XG4gICAgICAgIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgfTtcblxuICAvLyBTZXR1cCB0aGUgZ2xvYmFsIGF1ZGlvIGNvbnRyb2xsZXIuXG4gIHZhciBIb3dsZXIgPSBuZXcgSG93bGVyR2xvYmFsKCk7XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBhdWRpbyBncm91cCBjb250cm9sbGVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICovXG4gIHZhciBIb3dsID0gZnVuY3Rpb24obykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFRocm93IGFuIGVycm9yIGlmIG5vIHNvdXJjZSBpcyBwcm92aWRlZC5cbiAgICBpZiAoIW8uc3JjIHx8IG8uc3JjLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcignQW4gYXJyYXkgb2Ygc291cmNlIGZpbGVzIG11c3QgYmUgcGFzc2VkIHdpdGggYW55IG5ldyBIb3dsLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlbGYuaW5pdChvKTtcbiAgfTtcbiAgSG93bC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBIb3dsIGdyb3VwIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFIb3dsZXIuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9hdXRvcGxheSA9IG8uYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9mb3JtYXQgPSAodHlwZW9mIG8uZm9ybWF0ICE9PSAnc3RyaW5nJykgPyBvLmZvcm1hdCA6IFtvLmZvcm1hdF07XG4gICAgICBzZWxmLl9odG1sNSA9IG8uaHRtbDUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9tdXRlZCA9IG8ubXV0ZSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2xvb3AgPSBvLmxvb3AgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9wb29sID0gby5wb29sIHx8IDU7XG4gICAgICBzZWxmLl9wcmVsb2FkID0gKHR5cGVvZiBvLnByZWxvYWQgPT09ICdib29sZWFuJykgPyBvLnByZWxvYWQgOiB0cnVlO1xuICAgICAgc2VsZi5fcmF0ZSA9IG8ucmF0ZSB8fCAxO1xuICAgICAgc2VsZi5fc3ByaXRlID0gby5zcHJpdGUgfHwge307XG4gICAgICBzZWxmLl9zcmMgPSAodHlwZW9mIG8uc3JjICE9PSAnc3RyaW5nJykgPyBvLnNyYyA6IFtvLnNyY107XG4gICAgICBzZWxmLl92b2x1bWUgPSBvLnZvbHVtZSAhPT0gdW5kZWZpbmVkID8gby52b2x1bWUgOiAxO1xuXG4gICAgICAvLyBTZXR1cCBhbGwgb3RoZXIgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSAwO1xuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmLl9lbmRUaW1lcnMgPSB7fTtcbiAgICAgIHNlbGYuX3F1ZXVlID0gW107XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uZW5kID0gby5vbmVuZCA/IFt7Zm46IG8ub25lbmR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25mYWRlID0gby5vbmZhZGUgPyBbe2ZuOiBvLm9uZmFkZX1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWQgPSBvLm9ubG9hZCA/IFt7Zm46IG8ub25sb2FkfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZGVycm9yID0gby5vbmxvYWRlcnJvciA/IFt7Zm46IG8ub25sb2FkZXJyb3J9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wYXVzZSA9IG8ub25wYXVzZSA/IFt7Zm46IG8ub25wYXVzZX1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXkgPSBvLm9ucGxheSA/IFt7Zm46IG8ub25wbGF5fV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc3RvcCA9IG8ub25zdG9wID8gW3tmbjogby5vbnN0b3B9XSA6IFtdO1xuICAgICAgc2VsZi5fb25tdXRlID0gby5vbm11dGUgPyBbe2ZuOiBvLm9ubXV0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnZvbHVtZSA9IG8ub252b2x1bWUgPyBbe2ZuOiBvLm9udm9sdW1lfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucmF0ZSA9IG8ub25yYXRlID8gW3tmbjogby5vbnJhdGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zZWVrID0gby5vbnNlZWsgPyBbe2ZuOiBvLm9uc2Vla31dIDogW107XG4gICAgICBzZWxmLl9vbnJlc3VtZSA9IFtdO1xuXG4gICAgICAvLyBXZWIgQXVkaW8gb3IgSFRNTDUgQXVkaW8/XG4gICAgICBzZWxmLl93ZWJBdWRpbyA9IEhvd2xlci51c2luZ1dlYkF1ZGlvICYmICFzZWxmLl9odG1sNTtcblxuICAgICAgLy8gQXV0b21hdGljYWxseSB0cnkgdG8gZW5hYmxlIGF1ZGlvIG9uIGlPUy5cbiAgICAgIGlmICh0eXBlb2YgSG93bGVyLmN0eCAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eCAmJiBIb3dsZXIubW9iaWxlQXV0b0VuYWJsZSkge1xuICAgICAgICBIb3dsZXIuX2VuYWJsZU1vYmlsZUF1ZGlvKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhpcyBIb3dsIGdyb3VwIGluIHRoZSBnbG9iYWwgY29udHJvbGxlci5cbiAgICAgIEhvd2xlci5faG93bHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gSWYgdGhleSBzZWxlY3RlZCBhdXRvcGxheSwgYWRkIGEgcGxheSBldmVudCB0byB0aGUgbG9hZCBxdWV1ZS5cbiAgICAgIGlmIChzZWxmLl9hdXRvcGxheSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VyY2UgZmlsZSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAgICAgIGlmIChzZWxmLl9wcmVsb2FkKSB7XG4gICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgYXVkaW8gZmlsZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdXJsID0gbnVsbDtcblxuICAgICAgLy8gSWYgbm8gYXVkaW8gaXMgYXZhaWxhYmxlLCBxdWl0IGltbWVkaWF0ZWx5LlxuICAgICAgaWYgKEhvd2xlci5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBhdWRpbyBzdXBwb3J0LicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgc291cmNlIGlzIGluIGFuIGFycmF5LlxuICAgICAgaWYgKHR5cGVvZiBzZWxmLl9zcmMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNlbGYuX3NyYyA9IFtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHNvdXJjZXMgYW5kIHBpY2sgdGhlIGZpcnN0IG9uZSB0aGF0IGlzIGNvbXBhdGlibGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc3JjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBleHQsIHN0cjtcblxuICAgICAgICBpZiAoc2VsZi5fZm9ybWF0ICYmIHNlbGYuX2Zvcm1hdFtpXSkge1xuICAgICAgICAgIC8vIElmIGFuIGV4dGVuc2lvbiB3YXMgc3BlY2lmaWVkLCB1c2UgdGhhdCBpbnN0ZWFkLlxuICAgICAgICAgIGV4dCA9IHNlbGYuX2Zvcm1hdFtpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdXJjZSBpcyBhIHN0cmluZy5cbiAgICAgICAgICBzdHIgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm9uLXN0cmluZyBmb3VuZCBpbiBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzIC0gaWdub3JpbmcuJyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIHRoZSBVUkwgb3IgYmFzZTY0IGRhdGEgVVJJLlxuICAgICAgICAgIGV4dCA9IC9eZGF0YTphdWRpb1xcLyhbXjssXSspOy9pLmV4ZWMoc3RyKTtcbiAgICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgICAgZXh0ID0gL1xcLihbXi5dKykkLy5leGVjKHN0ci5zcGxpdCgnPycsIDEpWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXh0KSB7XG4gICAgICAgICAgICBleHQgPSBleHRbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGV4dGVuc2lvbiBpcyBhdmFpbGFibGUuXG4gICAgICAgIGlmIChIb3dsZXIuY29kZWNzKGV4dCkpIHtcbiAgICAgICAgICB1cmwgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGNvZGVjIHN1cHBvcnQgZm9yIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fc3JjID0gdXJsO1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgIC8vIElmIHRoZSBob3N0aW5nIHBhZ2UgaXMgSFRUUFMgYW5kIHRoZSBzb3VyY2UgaXNuJ3QsXG4gICAgICAvLyBkcm9wIGRvd24gdG8gSFRNTDUgQXVkaW8gdG8gYXZvaWQgTWl4ZWQgQ29udGVudCBlcnJvcnMuXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiB1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwOicpIHtcbiAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgc291bmQgb2JqZWN0IGFuZCBhZGQgaXQgdG8gdGhlIHBvb2wuXG4gICAgICBuZXcgU291bmQoc2VsZik7XG5cbiAgICAgIC8vIExvYWQgYW5kIGRlY29kZSB0aGUgYXVkaW8gZGF0YSBmb3IgcGxheWJhY2suXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgbG9hZEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBsYXkgYSBzb3VuZCBvciByZXN1bWUgcHJldmlvdXMgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7U3RyaW5nL051bWJlcn0gc3ByaXRlICAgU3ByaXRlIG5hbWUgZm9yIHNwcml0ZSBwbGF5YmFjayBvciBzb3VuZCBpZCB0byBjb250aW51ZSBwcmV2aW91cy5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgU291bmQgSUQuXG4gICAgICovXG4gICAgcGxheTogZnVuY3Rpb24oc3ByaXRlLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlkID0gbnVsbDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIGEgc3ByaXRlLCBzb3VuZCBpZCBvciBub3RoaW5nIHdhcyBwYXNzZWRcbiAgICAgIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZCA9IHNwcml0ZTtcbiAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmICFzZWxmLl9zcHJpdGVbc3ByaXRlXSkge1xuICAgICAgICAvLyBJZiB0aGUgcGFzc2VkIHNwcml0ZSBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBkZWZhdWx0IHNvdW5kIHNwcml0ZSAocGxheXMgdGhlIGZ1bGwgYXVkaW8gbGVuZ3RoKS5cbiAgICAgICAgc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBzaW5nbGUgcGF1c2VkIHNvdW5kIHRoYXQgaXNuJ3QgZW5kZWQuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzLCBwbGF5IHRoYXQgc291bmQuIElmIG5vdCwgY29udGludWUgYXMgdXN1YWwuXG4gICAgICAgIHZhciBudW0gPSAwO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkICYmICFzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgICBudW0rKztcbiAgICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzW2ldLl9pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobnVtID09PSAxKSB7XG4gICAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzZWxlY3RlZCBub2RlLCBvciBnZXQgb25lIGZyb20gdGhlIHBvb2wuXG4gICAgICB2YXIgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9pbmFjdGl2ZVNvdW5kKCk7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgaWYgKCFzb3VuZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gU2VsZWN0IHRoZSBzcHJpdGUgZGVmaW5pdGlvbi5cbiAgICAgIGlmIChpZCAmJiAhc3ByaXRlKSB7XG4gICAgICAgIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGUgfHwgJ19fZGVmYXVsdCc7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgbm8gc3ByaXRlIGFuZCB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgd2UgbXVzdCB3YWl0XG4gICAgICAvLyBmb3IgdGhlIHNvdW5kIHRvIGxvYWQgdG8gZ2V0IG91ciBhdWRpbydzIGR1cmF0aW9uLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyAmJiAhc2VsZi5fc3ByaXRlW3Nwcml0ZV0pIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KHNlbGYuX3NvdW5kQnlJZChzb3VuZC5faWQpID8gc291bmQuX2lkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHBsYXkgdGhlIHNvdW5kIGlmIGFuIGlkIHdhcyBwYXNzZWQgYW5kIGl0IGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgIGlmIChpZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBwbGF5IGV2ZW50LCBpbiBvcmRlciB0byBrZWVwIGl0ZXJhdGluZyB0aHJvdWdoIHF1ZXVlLlxuICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBBdWRpb0NvbnRleHQgaXNuJ3Qgc3VzcGVuZGVkLCBhbmQgcmVzdW1lIGl0IGlmIGl0IGlzLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIEhvd2xlci5fYXV0b1Jlc3VtZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgaG93IGxvbmcgdG8gcGxheSBmb3IgYW5kIHdoZXJlIHRvIHN0YXJ0IHBsYXlpbmcuXG4gICAgICB2YXIgc2VlayA9IE1hdGgubWF4KDAsIHNvdW5kLl9zZWVrID4gMCA/IHNvdW5kLl9zZWVrIDogc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwKTtcbiAgICAgIHZhciBkdXJhdGlvbiA9IE1hdGgubWF4KDAsICgoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWspO1xuICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBzb3VuZFxuICAgICAgc291bmQuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICBzb3VuZC5fc3ByaXRlID0gc3ByaXRlO1xuICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgc291bmQuX3N0YXJ0ID0gc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwO1xuICAgICAgc291bmQuX3N0b3AgPSAoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwO1xuICAgICAgc291bmQuX2xvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEJlZ2luIHRoZSBhY3R1YWwgcGxheWJhY2suXG4gICAgICB2YXIgbm9kZSA9IHNvdW5kLl9ub2RlO1xuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIFdlYiBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlXZWJBdWRpbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuX3JlZnJlc2hCdWZmZXIoc291bmQpO1xuXG4gICAgICAgICAgLy8gU2V0dXAgdGhlIHBsYXliYWNrIHBhcmFtcy5cbiAgICAgICAgICB2YXIgdm9sID0gKHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCkgPyAwIDogc291bmQuX3ZvbHVtZTtcbiAgICAgICAgICBub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICAgIC8vIFBsYXkgdGhlIHNvdW5kIHVzaW5nIHRoZSBzdXBwb3J0ZWQgbWV0aG9kLlxuICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3RhcnQgYSBuZXcgdGltZXIgaWYgbm9uZSBpcyBwcmVzZW50LlxuICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaXNSdW5uaW5nID0gKEhvd2xlci5zdGF0ZSA9PT0gJ3J1bm5pbmcnKTtcbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiBpc1J1bm5pbmcpIHtcbiAgICAgICAgICBwbGF5V2ViQXVkaW8oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgYXVkaW8gdG8gbG9hZCBhbmQgdGhlbiBiZWdpbiBwbGF5YmFjay5cbiAgICAgICAgICBzZWxmLm9uY2UoaXNSdW5uaW5nID8gJ2xvYWQnIDogJ3Jlc3VtZScsIHBsYXlXZWJBdWRpbywgaXNSdW5uaW5nID8gc291bmQuX2lkIDogbnVsbCk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIEhUTUw1IEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheUh0bWw1ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgbm9kZS5tdXRlZCA9IHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBIb3dsZXIuX211dGVkIHx8IG5vZGUubXV0ZWQ7XG4gICAgICAgICAgbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgIG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbm9kZS5wbGF5KCk7XG5cbiAgICAgICAgICAgIC8vIFNldHVwIHRoZSBuZXcgZW5kIHRpbWVyLlxuICAgICAgICAgICAgaWYgKHRpbWVvdXQgIT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUGxheSBpbW1lZGlhdGVseSBpZiByZWFkeSwgb3Igd2FpdCBmb3IgdGhlICdjYW5wbGF5dGhyb3VnaCdlIHZlbnQuXG4gICAgICAgIHZhciBsb2FkZWROb1JlYWR5U3RhdGUgPSAoc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmICh3aW5kb3cgJiYgd2luZG93LmVqZWN0YSB8fCAhbm9kZS5yZWFkeVN0YXRlICYmIEhvd2xlci5fbmF2aWdhdG9yLmlzQ29jb29uSlMpKTtcbiAgICAgICAgaWYgKG5vZGUucmVhZHlTdGF0ZSA9PT0gNCB8fCBsb2FkZWROb1JlYWR5U3RhdGUpIHtcbiAgICAgICAgICBwbGF5SHRtbDUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEJlZ2luIHBsYXliYWNrLlxuICAgICAgICAgICAgcGxheUh0bWw1KCk7XG5cbiAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGF1c2UgcGxheWJhY2sgYW5kIHNhdmUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gcGF1c2UgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHBhdXNlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHBhdXNlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwYXVzZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHBhdXNlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VsZi5zZWVrKGlkc1tpXSk7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZFxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyZSB0aGUgcGF1c2UgZXZlbnQsIHVubGVzcyBgdHJ1ZWAgaXMgcGFzc2VkIGFzIHRoZSAybmQgYXJndW1lbnQuXG4gICAgICAgIGlmICghYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgncGF1c2UnLCBzb3VuZCA/IHNvdW5kLl9pZCA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdG9wIHBsYXliYWNrIGFuZCByZXNldCB0byBzdGFydC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gc3RvcCBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihpZCwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzdG9wIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzdG9wJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zdG9wKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBzdG9wcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHNvdW5kIGhhcyBiZWVuIGNyZWF0ZWRcbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdzdG9wJywgc291bmQuX2lkKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzb3VuZCAmJiAhaW50ZXJuYWwpIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdzdG9wJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0ZS91bm11dGUgYSBzaW5nbGUgc291bmQgb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgU2V0IHRvIHRydWUgdG8gbXV0ZSBhbmQgZmFsc2UgdG8gdW5tdXRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgVGhlIHNvdW5kIElEIHRvIHVwZGF0ZSAob21pdCB0byBtdXRlL3VubXV0ZSBhbGwpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQsIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gbXV0ZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnbXV0ZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYubXV0ZShtdXRlZCwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGFwcGx5aW5nIG11dGUvdW5tdXRlIHRvIGFsbCBzb3VuZHMsIHVwZGF0ZSB0aGUgZ3JvdXAncyB2YWx1ZS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbXV0ZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX211dGVkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIG11dGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzb3VuZC5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IEhvd2xlci5fbXV0ZWQgPyB0cnVlIDogbXV0ZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnbXV0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNvdW5kIG9yIG9mIHRoZSBIb3dsIGdyb3VwLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICB2b2x1bWUoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZvbHVtZSB2YWx1ZS5cbiAgICAgKiAgIHZvbHVtZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHZvbHVtZS5cbiAgICAgKiAgIHZvbHVtZSh2b2wpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIHZvbHVtZSh2b2wsIGlkKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHZvbCwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBncm91cHMnIHZvbHVtZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEgfHwgYXJncy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGFyZ3NbMV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyB2b2x1bWUuXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIG9yIHJldHVybiB0aGUgY3VycmVudCB2b2x1bWUuXG4gICAgICB2YXIgc291bmQ7XG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugdm9sdW1lIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICd2b2x1bWUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgdm9sdW1lLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICAgIGlmICghYXJnc1syXSkge1xuICAgICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZFtpXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSB2b2wgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3ZvbHVtZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX3NvdW5kc1swXTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3ZvbHVtZSA6IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGYWRlIGEgY3VycmVudGx5IHBsYXlpbmcgc291bmQgYmV0d2VlbiB0d28gdm9sdW1lcyAoaWYgbm8gaWQgaXMgcGFzc3NlZCwgYWxsIHNvdW5kcyB3aWxsIGZhZGUpLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIChvbWl0IHRvIGZhZGUgYWxsIHNvdW5kcykuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBmYWRlOiBmdW5jdGlvbihmcm9tLCB0bywgbGVuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGRpZmYgPSBNYXRoLmFicyhmcm9tIC0gdG8pO1xuICAgICAgdmFyIGRpciA9IGZyb20gPiB0byA/ICdvdXQnIDogJ2luJztcbiAgICAgIHZhciBzdGVwcyA9IGRpZmYgLyAwLjAxO1xuICAgICAgdmFyIHN0ZXBMZW4gPSAoc3RlcHMgPiAwKSA/IGxlbiAvIHN0ZXBzIDogbGVuO1xuXG4gICAgICAvLyBTaW5jZSBicm93c2VycyBjbGFtcCB0aW1lb3V0cyB0byA0bXMsIHdlIG5lZWQgdG8gY2xhbXAgb3VyIHN0ZXBzIHRvIHRoYXQgdG9vLlxuICAgICAgaWYgKHN0ZXBMZW4gPCA0KSB7XG4gICAgICAgIHN0ZXBzID0gTWF0aC5jZWlsKHN0ZXBzIC8gKDQgLyBzdGVwTGVuKSk7XG4gICAgICAgIHN0ZXBMZW4gPSA0O1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGZhZGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ2ZhZGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmZhZGUoZnJvbSwgdG8sIGxlbiwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCB0aGUgdm9sdW1lIHRvIHRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgIHNlbGYudm9sdW1lKGZyb20sIGlkKTtcblxuICAgICAgLy8gRmFkZSB0aGUgdm9sdW1lIG9mIG9uZSBvciBhbGwgc291bmRzLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbGluZWFyIGZhZGUgb3IgZmFsbCBiYWNrIHRvIHRpbWVvdXRzIHdpdGggSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFN0b3AgdGhlIHByZXZpb3VzIGZhZGUgaWYgbm8gc3ByaXRlIGlzIGJlaW5nIHVzZWQgKG90aGVyd2lzZSwgdm9sdW1lIGhhbmRsZXMgdGhpcykuXG4gICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvLCBsZXQgdGhlIG5hdGl2ZSBtZXRob2RzIGRvIHRoZSBhY3R1YWwgZmFkZS5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBjdXJyZW50VGltZSArIChsZW4gLyAxMDAwKTtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSBmcm9tO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShmcm9tLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRvLCBlbmQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB2b2wgPSBmcm9tO1xuICAgICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKHNvdW5kSWQsIHNvdW5kKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBhbW91bnQsIGJ1dCBvbmx5IGlmIHRoZSB2b2x1bWUgc2hvdWxkIGNoYW5nZS5cbiAgICAgICAgICAgIGlmIChzdGVwcyA+IDApIHtcbiAgICAgICAgICAgICAgdm9sICs9IChkaXIgPT09ICdpbicgPyAwLjAxIDogLTAuMDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHZvbHVtZSBpcyBpbiB0aGUgcmlnaHQgYm91bmRzLlxuICAgICAgICAgICAgdm9sID0gTWF0aC5tYXgoMCwgdm9sKTtcbiAgICAgICAgICAgIHZvbCA9IE1hdGgubWluKDEsIHZvbCk7XG5cbiAgICAgICAgICAgIC8vIFJvdW5kIHRvIHdpdGhpbiAyIGRlY2ltYWwgcG9pbnRzLlxuICAgICAgICAgICAgdm9sID0gTWF0aC5yb3VuZCh2b2wgKiAxMDApIC8gMTAwO1xuXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIHZvbHVtZS5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLnZvbHVtZSh2b2wsIHNvdW5kSWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBXaGVuIHRoZSBmYWRlIGlzIGNvbXBsZXRlLCBzdG9wIGl0IGFuZCBmaXJlIGV2ZW50LlxuICAgICAgICAgICAgaWYgKHZvbCA9PT0gdG8pIHtcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgICBzZWxmLnZvbHVtZSh2b2wsIHNvdW5kSWQpO1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgc291bmRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfS5iaW5kKHNlbGYsIGlkc1tpXSwgc291bmQpLCBzdGVwTGVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgc3RvcHMgdGhlIGN1cnJlbnRseSBwbGF5aW5nIGZhZGUgd2hlblxuICAgICAqIGEgbmV3IGZhZGUgc3RhcnRzLCB2b2x1bWUgaXMgY2hhbmdlZCBvciB0aGUgc291bmQgaXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9zdG9wRmFkZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBpZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBsb29wIHBhcmFtZXRlciBvbiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBsb29wKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChsb29wKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIGZvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIGxvb3AobG9vcCwgaWQpIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvQm9vbGVhbn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgbG9vcCB2YWx1ZS5cbiAgICAgKi9cbiAgICBsb29wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxvb3AsIGlkLCBzb3VuZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgZm9yIGxvb3AgYW5kIGlkLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgZ3JvdSdzIGxvb3AgdmFsdWUuXG4gICAgICAgIHJldHVybiBzZWxmLl9sb29wO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICAgIHNlbGYuX2xvb3AgPSBsb29wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9sb29wIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBsb29wZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9sb29wID0gbG9vcDtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBwbGF5YmFjayByYXRlIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHJhdGUoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKHJhdGUpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICByYXRlKHJhdGUsIGlkKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICovXG4gICAgcmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciByYXRlLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCByYXRlIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyByYXRlIHZhbHVlLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBsYXliYWNrIHJhdGUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiByYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwbGF5YmFjayByYXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICdyYXRlJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYucmF0ZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCByYXRlLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3JhdGUgPSByYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIG91ciBwb3NpdGlvbiB3aGVuIHRoZSByYXRlIGNoYW5nZWQgYW5kIHVwZGF0ZSB0aGUgcGxheWJhY2tcbiAgICAgICAgICAgIC8vIHN0YXJ0IHBvc2l0aW9uIHNvIHdlIGNhbiBwcm9wZXJseSBhZGp1c3QgdGhlIHNlZWsgcG9zaXRpb24gZm9yIHRpbWUgZWxhcHNlZC5cbiAgICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gc2VsZi5fd2ViQXVkaW8gPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIDogc291bmQuX3BsYXlTdGFydDtcbiAgICAgICAgICAgIHNvdW5kLl9yYXRlID0gcmF0ZTtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSBwbGF5YmFjayByYXRlLlxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlID0gcmF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGxheWJhY2tSYXRlID0gcmF0ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVycy5cbiAgICAgICAgICAgIHZhciBzZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9ICgoc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdKSAvIDEwMDApIC0gc2VlaztcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG5cbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IGVuZCB0aW1lciBpZiBzb3VuZCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkW2ldXSB8fCAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkW2ldKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW2lkW2ldXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdyYXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3JhdGUgOiBzZWxmLl9yYXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgc2VlayBwb3NpdGlvbiBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBzZWVrKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhzZWVrKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBzb3VuZCBub2RlLlxuICAgICAqICAgc2VlayhzZWVrLCBpZCkgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHNlZWs6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgc2VlaywgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHNlZWsgcG9zaXRpb24uXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICAgICAgc2VlayA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgc2VlayA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBJRCwgYmFpbCBvdXQuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzZWVrIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzZWVrJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zZWVrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWVrID09PSAnbnVtYmVyJyAmJiBzZWVrID49IDApIHtcbiAgICAgICAgICAvLyBQYXVzZSB0aGUgc291bmQgYW5kIHVwZGF0ZSBwb3NpdGlvbiBmb3IgcmVzdGFydGluZyBwbGF5YmFjay5cbiAgICAgICAgICB2YXIgcGxheWluZyA9IHNlbGYucGxheWluZyhpZCk7XG4gICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSB0cmFjayBhbmQgY2FuY2VsIHRpbWVyLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkKTtcblxuICAgICAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGlmIHRoZSBzb3VuZCB3YXMgcGxheWluZy5cbiAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgc2VsZi5wbGF5KGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlZWsgcG9zaXRpb24gZm9yIEhUTUw1IEF1ZGlvLlxuICAgICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdzZWVrJywgaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIHJlYWxUaW1lID0gc2VsZi5wbGF5aW5nKGlkKSA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgLSBzb3VuZC5fcGxheVN0YXJ0IDogMDtcbiAgICAgICAgICAgIHZhciByYXRlU2VlayA9IHNvdW5kLl9yYXRlU2VlayA/IHNvdW5kLl9yYXRlU2VlayAtIHNvdW5kLl9zZWVrIDogMDtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fc2VlayArIChyYXRlU2VlayArIHJlYWxUaW1lICogTWF0aC5hYnMoc291bmQuX3JhdGUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzcGVjaWZpYyBzb3VuZCBpcyBjdXJyZW50bHkgcGxheWluZyBvciBub3QgKGlmIGlkIGlzIHByb3ZpZGVkKSwgb3IgY2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBzb3VuZHMgaW4gdGhlIGdyb3VwIGlzIHBsYXlpbmcgb3Igbm90LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHRoZSB3aG9sZSBzb3VuZCBncm91cCBpcyBjaGVja2VkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgcGxheWluZyBhbmQgZmFsc2UgaWYgbm90LlxuICAgICAqL1xuICAgIHBsYXlpbmc6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIENoZWNrIHRoZSBwYXNzZWQgc291bmQgSUQgKGlmIGFueSkuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyAhc291bmQuX3BhdXNlZCA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UsIGxvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGVjayBpZiBhbnkgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5fc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhpcyBzb3VuZC4gUGFzc2luZyBhIHNvdW5kIGlkIHdpbGwgcmV0dXJuIHRoZSBzcHJpdGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCByZXR1cm4gZnVsbCBzb3VyY2UgZHVyYXRpb24uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBBdWRpbyBkdXJhdGlvbiBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGR1cmF0aW9uOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGR1cmF0aW9uID0gc2VsZi5fZHVyYXRpb247XG5cbiAgICAgIC8vIElmIHdlIHBhc3MgYW4gSUQsIGdldCB0aGUgc291bmQgYW5kIHJldHVybiB0aGUgc3ByaXRlIGxlbmd0aC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0gLyAxMDAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbG9hZGVkIHN0YXRlIG9mIHRoaXMgSG93bC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICd1bmxvYWRlZCcsICdsb2FkaW5nJywgJ2xvYWRlZCdcbiAgICAgKi9cbiAgICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSB0aGUgY3VycmVudCBIb3dsIG9iamVjdC5cbiAgICAgKiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgc3RvcCBhbGwgc291bmQgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgc291bmRzLlxuICAgICAgdmFyIHNvdW5kcyA9IHNlbGYuX3NvdW5kcztcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gU3RvcCB0aGUgc291bmQgaWYgaXQgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICAgIGlmICghc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICBzZWxmLnN0b3Aoc291bmRzW2ldLl9pZCk7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNvdXJjZSBvciBkaXNjb25uZWN0LlxuICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBzb3VyY2UgdG8gMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZy5cbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUuc3JjID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlRQUFBQlhRVlpGWm0xMElCQUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFaR0YwWVFBQUFBQT0nO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIGFueSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc291bmRzW2ldLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNvdW5kc1tpXS5fbG9hZEZuLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbXB0eSBvdXQgYWxsIG9mIHRoZSBub2Rlcy5cbiAgICAgICAgZGVsZXRlIHNvdW5kc1tpXS5fbm9kZTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgYWxsIHRpbWVycyBhcmUgY2xlYXJlZCBvdXQuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmRzW2ldLl9pZCk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgICAgdmFyIGluZGV4ID0gSG93bGVyLl9ob3dscy5pbmRleE9mKHNlbGYpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGUgdGhpcyBzb3VuZCBmcm9tIHRoZSBjYWNoZSAoaWYgbm8gb3RoZXIgSG93bCBpcyB1c2luZyBpdCkuXG4gICAgICB2YXIgcmVtQ2FjaGUgPSB0cnVlO1xuICAgICAgZm9yIChpPTA7IGk8SG93bGVyLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoSG93bGVyLl9ob3dsc1tpXS5fc3JjID09PSBzZWxmLl9zcmMpIHtcbiAgICAgICAgICByZW1DYWNoZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWNoZSAmJiByZW1DYWNoZSkge1xuICAgICAgICBkZWxldGUgY2FjaGVbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgZ2xvYmFsIGVycm9ycy5cbiAgICAgIEhvd2xlci5ub0F1ZGlvID0gZmFsc2U7XG5cbiAgICAgIC8vIENsZWFyIG91dCBgc2VsZmAuXG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYgPSBudWxsO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50LlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgb25jZSAgKElOVEVSTkFMKSBNYXJrcyBldmVudCB0byBmaXJlIG9ubHkgb25jZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbihldmVudCwgZm4sIGlkLCBvbmNlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBldmVudHMucHVzaChvbmNlID8ge2lkOiBpZCwgZm46IGZuLCBvbmNlOiBvbmNlfSA6IHtpZDogaWQsIGZuOiBmbn0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY3VzdG9tIGV2ZW50LiBDYWxsIHdpdGhvdXQgcGFyYW1ldGVycyB0byByZW1vdmUgYWxsIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gcmVtb3ZlLiBMZWF2ZSBlbXB0eSB0byByZW1vdmUgYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgcmVtb3ZlIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9mZjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIGlmIChmbikge1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIHJlbW92ZSB0aGUgcGFzc2VkIGZ1bmN0aW9uLlxuICAgICAgICBmb3IgKGk9MDsgaTxldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZm4gPT09IGV2ZW50c1tpXS5mbiAmJiBpZCA9PT0gZXZlbnRzW2ldLmlkKSB7XG4gICAgICAgICAgICBldmVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50KSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIHRoaXMgdHlwZS5cbiAgICAgICAgc2VsZlsnX29uJyArIGV2ZW50XSA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgZXZlcnkgdHlwZS5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzZWxmKTtcbiAgICAgICAgZm9yIChpPTA7IGk8a2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgoa2V5c1tpXS5pbmRleE9mKCdfb24nKSA9PT0gMCkgJiYgQXJyYXkuaXNBcnJheShzZWxmW2tleXNbaV1dKSkge1xuICAgICAgICAgICAgc2VsZltrZXlzW2ldXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50IGFuZCByZW1vdmUgaXQgb25jZSBmaXJlZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbmNlOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYub24oZXZlbnQsIGZuLCBpZCwgMSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBFbWl0IGFsbCBldmVudHMgb2YgYSBzcGVjaWZpYyB0eXBlIGFuZCBwYXNzIHRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBTb3VuZCBJRC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IG1zZyAgIE1lc3NhZ2UgdG8gZ28gd2l0aCBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbWl0OiBmdW5jdGlvbihldmVudCwgaWQsIG1zZykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgZmlyZSBhbGwgZnVuY3Rpb25zLlxuICAgICAgZm9yICh2YXIgaT1ldmVudHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICBpZiAoIWV2ZW50c1tpXS5pZCB8fCBldmVudHNbaV0uaWQgPT09IGlkIHx8IGV2ZW50ID09PSAnbG9hZCcpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGlkLCBtc2cpO1xuICAgICAgICAgIH0uYmluZChzZWxmLCBldmVudHNbaV0uZm4pLCAwKTtcblxuICAgICAgICAgIC8vIElmIHRoaXMgZXZlbnQgd2FzIHNldHVwIHdpdGggYG9uY2VgLCByZW1vdmUgaXQuXG4gICAgICAgICAgaWYgKGV2ZW50c1tpXS5vbmNlKSB7XG4gICAgICAgICAgICBzZWxmLm9mZihldmVudCwgZXZlbnRzW2ldLmZuLCBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUXVldWUgb2YgYWN0aW9ucyBpbml0aWF0ZWQgYmVmb3JlIHRoZSBzb3VuZCBoYXMgbG9hZGVkLlxuICAgICAqIFRoZXNlIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLCB3aXRoIHRoZSBuZXh0IG9ubHkgZmlyaW5nXG4gICAgICogYWZ0ZXIgdGhlIHByZXZpb3VzIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcgKGV2ZW4gaWYgYXN5bmMgbGlrZSBwbGF5KS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9sb2FkUXVldWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fcXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgdGFzayA9IHNlbGYuX3F1ZXVlWzBdO1xuXG4gICAgICAgIC8vIGRvbid0IG1vdmUgb250byB0aGUgbmV4dCB0YXNrIHVudGlsIHRoaXMgb25lIGlzIGRvbmVcbiAgICAgICAgc2VsZi5vbmNlKHRhc2suZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRhc2suYWN0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHBsYXliYWNrIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VuZGVkOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGU7XG5cbiAgICAgIC8vIFNob3VsZCB0aGlzIHNvdW5kIGxvb3A/XG4gICAgICB2YXIgbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgLy8gRmlyZSB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICBzZWxmLl9lbWl0KCdlbmQnLCBzb3VuZC5faWQpO1xuXG4gICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBmb3IgSFRNTDUgQXVkaW8gbG9vcC5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhpcyB0aW1lciBpZiBvbiBhIFdlYiBBdWRpbyBsb29wLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgIHZhciB0aW1lb3V0ID0gKChzb3VuZC5fc3RvcCAtIHNvdW5kLl9zdGFydCkgKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayB0aGUgbm9kZSBhcyBwYXVzZWQuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcblxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gYXV0by1zdXNwZW5kIEF1ZGlvQ29udGV4dCBpZiBubyBzb3VuZHMgYXJlIHN0aWxsIHBsYXlpbmcuXG4gICAgICAgIEhvd2xlci5fYXV0b1N1c3BlbmQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2hlbiB1c2luZyBhIHNwcml0ZSwgZW5kIHRoZSB0cmFjay5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciB0aGUgZW5kIHRpbWVyIGZvciBhIHNvdW5kIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElELlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFyVGltZXI6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRdKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9lbmRUaW1lcnNbaWRdKTtcbiAgICAgICAgZGVsZXRlIHNlbGYuX2VuZFRpbWVyc1tpZF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHNvdW5kIGlkZW50aWZpZWQgYnkgdGhpcyBJRCwgb3IgcmV0dXJuIG51bGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBTb3VuZCBJRFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgU291bmQgb2JqZWN0IG9yIG51bGwuXG4gICAgICovXG4gICAgX3NvdW5kQnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGZpbmQgdGhlIG9uZSB3aXRoIHRoaXMgSUQuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpZCA9PT0gc2VsZi5fc291bmRzW2ldLl9pZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbmFjdGl2ZSBzb3VuZCBmcm9tIHRoZSBwb29sIG9yIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICogQHJldHVybiB7U291bmR9IFNvdW5kIHBsYXliYWNrIG9iamVjdC5cbiAgICAgKi9cbiAgICBfaW5hY3RpdmVTb3VuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHNlbGYuX2RyYWluKCk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGluYWN0aXZlIG5vZGUgdG8gcmVjeWNsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaW5hY3RpdmUgbm9kZSB3YXMgZm91bmQsIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICByZXR1cm4gbmV3IFNvdW5kKHNlbGYpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEcmFpbiBleGNlc3MgaW5hY3RpdmUgc291bmRzIGZyb20gdGhlIHBvb2wuXG4gICAgICovXG4gICAgX2RyYWluOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBsaW1pdCA9IHNlbGYuX3Bvb2w7XG4gICAgICB2YXIgY250ID0gMDtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIGxlc3Mgc291bmRzIHRoYW4gdGhlIG1heCBwb29sIHNpemUsIHdlIGFyZSBkb25lLlxuICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGggPCBsaW1pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgaW5hY3RpdmUgc291bmRzLlxuICAgICAgZm9yIChpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgY250Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMsIGdvaW5nIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgICBmb3IgKGk9c2VsZi5fc291bmRzLmxlbmd0aCAtIDE7IGk+PTA7IGktLSkge1xuICAgICAgICBpZiAoY250IDw9IGxpbWl0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBhdWRpbyBzb3VyY2Ugd2hlbiB1c2luZyBXZWIgQXVkaW8uXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNlbGYuX3NvdW5kc1tpXS5fbm9kZSkge1xuICAgICAgICAgICAgc2VsZi5fc291bmRzW2ldLl9ub2RlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVtb3ZlIHNvdW5kcyB1bnRpbCB3ZSBoYXZlIHRoZSBwb29sIHNpemUuXG4gICAgICAgICAgc2VsZi5fc291bmRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBjbnQtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIElEJ3MgZnJvbSB0aGUgc291bmRzIHBvb2wuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBPbmx5IHJldHVybiBvbmUgSUQgaWYgb25lIGlzIHBhc3NlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gICAgQXJyYXkgb2YgSURzLlxuICAgICAqL1xuICAgIF9nZXRTb3VuZElkczogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWRzLnB1c2goc2VsZi5fc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtpZF07XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHNvdW5kIGJhY2sgaW50byB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfcmVmcmVzaEJ1ZmZlcjogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGJ1ZmZlciBzb3VyY2UgZm9yIHBsYXliYWNrLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlID0gSG93bGVyLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBjYWNoZVtzZWxmLl9zcmNdO1xuXG4gICAgICAvLyBDb25uZWN0IHRvIHRoZSBjb3JyZWN0IG5vZGUuXG4gICAgICBpZiAoc291bmQuX3Bhbm5lcikge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fcGFubmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9ub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgbG9vcGluZyBhbmQgcGxheWJhY2sgcmF0ZS5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gc291bmQuX2xvb3A7XG4gICAgICBpZiAoc291bmQuX2xvb3ApIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wO1xuICAgICAgfVxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJldmVudCBtZW1vcnkgbGVha3MgYnkgY2xlYW5pbmcgdXAgdGhlIGJ1ZmZlciBzb3VyY2UgYWZ0ZXIgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIFNvdW5kJ3MgYXVkaW8gbm9kZSBjb250YWluaW5nIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFuQnVmZmVyOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9zY3JhdGNoQnVmZmVyKSB7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLm9uZW5kZWQgPSBudWxsO1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5kaXNjb25uZWN0KDApO1xuICAgICAgICB0cnkgeyBub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBzZWxmLl9zY3JhdGNoQnVmZmVyOyB9IGNhdGNoKGUpIHt9XG4gICAgICB9XG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZSA9IG51bGw7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBzb3VuZCBvYmplY3QsIHdoaWNoIGVhY2ggbm9kZSBhdHRhY2hlZCB0byBhIEhvd2wgZ3JvdXAgaXMgY29udGFpbmVkIGluLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaG93bCBUaGUgSG93bCBwYXJlbnQgZ3JvdXAuXG4gICAqL1xuICB2YXIgU291bmQgPSBmdW5jdGlvbihob3dsKSB7XG4gICAgdGhpcy5fcGFyZW50ID0gaG93bDtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgU291bmQucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgU291bmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdGhlIGRlZmF1bHQgcGFyYW1ldGVycy5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAqIE1hdGgucmFuZG9tKCkpO1xuXG4gICAgICAvLyBBZGQgaXRzZWxmIHRvIHRoZSBwYXJlbnQncyBwb29sLlxuICAgICAgcGFyZW50Ll9zb3VuZHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgbm9kZS5cbiAgICAgIHNlbGYuY3JlYXRlKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIHNldHVwIGEgbmV3IHNvdW5kIG9iamVjdCwgd2hldGhlciBIVE1MNSBBdWRpbyBvciBXZWIgQXVkaW8uXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgY3JlYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG4gICAgICB2YXIgdm9sdW1lID0gKEhvd2xlci5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgc2VsZi5fcGFyZW50Ll9tdXRlZCkgPyAwIDogc2VsZi5fdm9sdW1lO1xuXG4gICAgICBpZiAocGFyZW50Ll93ZWJBdWRpbykge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGdhaW4gbm9kZSBmb3IgY29udHJvbGxpbmcgdm9sdW1lICh0aGUgc291cmNlIHdpbGwgY29ubmVjdCB0byB0aGlzKS5cbiAgICAgICAgc2VsZi5fbm9kZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgc2VsZi5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNlbGYuX25vZGUucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fbm9kZS5jb25uZWN0KEhvd2xlci5tYXN0ZXJHYWluKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuX25vZGUgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGVycm9ycyAoaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy1hdXRob3Itdmlldy9zcGVjLmh0bWwjbWVkaWFlcnJvcikuXG4gICAgICAgIHNlbGYuX2Vycm9yRm4gPSBzZWxmLl9lcnJvckxpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciAnY2FucGxheXRocm91Z2gnIGV2ZW50IHRvIGxldCB1cyBrbm93IHRoZSBzb3VuZCBpcyByZWFkeS5cbiAgICAgICAgc2VsZi5fbG9hZEZuID0gc2VsZi5fbG9hZExpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gU2V0dXAgdGhlIG5ldyBhdWRpbyBub2RlLlxuICAgICAgICBzZWxmLl9ub2RlLnNyYyA9IHBhcmVudC5fc3JjO1xuICAgICAgICBzZWxmLl9ub2RlLnByZWxvYWQgPSAnYXV0byc7XG4gICAgICAgIHNlbGYuX25vZGUudm9sdW1lID0gdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuXG4gICAgICAgIC8vIEJlZ2luIGxvYWRpbmcgdGhlIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fbm9kZS5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kIHRvIHRoZSBvcmlnaW5hbCBzdGF0ZSAoZm9yIHJlY3ljbGUpLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBvZiB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcmF0ZVNlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBzbyB0aGF0IGl0IGlzbid0IGNvbmZ1c2VkIHdpdGggdGhlIHByZXZpb3VzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgKiBNYXRoLnJhbmRvbSgpKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGVycm9yIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9lcnJvckxpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gRmlyZSBhbiBlcnJvciBldmVudCBhbmQgcGFzcyBiYWNrIHRoZSBjb2RlLlxuICAgICAgc2VsZi5fcGFyZW50Ll9lbWl0KCdsb2FkZXJyb3InLCBzZWxmLl9pZCwgc2VsZi5fbm9kZS5lcnJvciA/IHNlbGYuX25vZGUuZXJyb3IuY29kZSA6IDApO1xuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JMaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBjYW5wbGF5dGhyb3VnaCBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfbG9hZExpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJvdW5kIHVwIHRoZSBkdXJhdGlvbiB0byBhY2NvdW50IGZvciB0aGUgbG93ZXIgcHJlY2lzaW9uIGluIEhUTUw1IEF1ZGlvLlxuICAgICAgcGFyZW50Ll9kdXJhdGlvbiA9IE1hdGguY2VpbChzZWxmLl9ub2RlLmR1cmF0aW9uICogMTApIC8gMTA7XG5cbiAgICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhwYXJlbnQuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHBhcmVudC5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHBhcmVudC5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnQuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBwYXJlbnQuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICAgIHBhcmVudC5fZW1pdCgnbG9hZCcpO1xuICAgICAgICBwYXJlbnQuX2xvYWRRdWV1ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgdmFyIGNhY2hlID0ge307XG5cbiAgLyoqXG4gICAqIEJ1ZmZlciBhIHNvdW5kIGZyb20gVVJMLCBEYXRhIFVSSSBvciBjYWNoZSBhbmQgZGVjb2RlIHRvIGF1ZGlvIHNvdXJjZSAoV2ViIEF1ZGlvIEFQSSkuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICovXG4gIHZhciBsb2FkQnVmZmVyID0gZnVuY3Rpb24oc2VsZikge1xuICAgIHZhciB1cmwgPSBzZWxmLl9zcmM7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgYnVmZmVyIGhhcyBhbHJlYWR5IGJlZW4gY2FjaGVkIGFuZCB1c2UgaXQgaW5zdGVhZC5cbiAgICBpZiAoY2FjaGVbdXJsXSkge1xuICAgICAgLy8gU2V0IHRoZSBkdXJhdGlvbiBmcm9tIHRoZSBjYWNoZS5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gY2FjaGVbdXJsXS5kdXJhdGlvbjtcblxuICAgICAgLy8gTG9hZCB0aGUgc291bmQgaW50byB0aGlzIEhvd2wuXG4gICAgICBsb2FkU291bmQoc2VsZik7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoL15kYXRhOlteO10rO2Jhc2U2NCwvLnRlc3QodXJsKSkge1xuICAgICAgLy8gRGVjb2RlIHRoZSBiYXNlNjQgZGF0YSBVUkkgd2l0aG91dCBYSFIsIHNpbmNlIHNvbWUgYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCBpdC5cbiAgICAgIHZhciBkYXRhID0gYXRvYih1cmwuc3BsaXQoJywnKVsxXSk7XG4gICAgICB2YXIgZGF0YVZpZXcgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8ZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICBkYXRhVmlld1tpXSA9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgICAgIH1cblxuICAgICAgZGVjb2RlQXVkaW9EYXRhKGRhdGFWaWV3LmJ1ZmZlciwgc2VsZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExvYWQgdGhlIGJ1ZmZlciBmcm9tIHRoZSBVUkwuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZ2V0IGEgc3VjY2Vzc2Z1bCByZXNwb25zZSBiYWNrLlxuICAgICAgICB2YXIgY29kZSA9ICh4aHIuc3RhdHVzICsgJycpWzBdO1xuICAgICAgICBpZiAoY29kZSAhPT0gJzAnICYmIGNvZGUgIT09ICcyJyAmJiBjb2RlICE9PSAnMycpIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRmFpbGVkIGxvYWRpbmcgYXVkaW8gZmlsZSB3aXRoIHN0YXR1czogJyArIHhoci5zdGF0dXMgKyAnLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlY29kZUF1ZGlvRGF0YSh4aHIucmVzcG9uc2UsIHNlbGYpO1xuICAgICAgfTtcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGVycm9yLCBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZVt1cmxdO1xuICAgICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgc2FmZVhoclNlbmQoeGhyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgdGhlIFhIUiByZXF1ZXN0IHdyYXBwZWQgaW4gYSB0cnkvY2F0Y2guXG4gICAqIEBwYXJhbSAge09iamVjdH0geGhyIFhIUiB0byBzZW5kLlxuICAgKi9cbiAgdmFyIHNhZmVYaHJTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgeGhyLm9uZXJyb3IoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY29kZSBhdWRpbyBkYXRhIGZyb20gYW4gYXJyYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXIgVGhlIGF1ZGlvIGRhdGEuXG4gICAqIEBwYXJhbSAge0hvd2x9ICAgICAgICBzZWxmXG4gICAqL1xuICB2YXIgZGVjb2RlQXVkaW9EYXRhID0gZnVuY3Rpb24oYXJyYXlidWZmZXIsIHNlbGYpIHtcbiAgICAvLyBEZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZS5cbiAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlciwgZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICBpZiAoYnVmZmVyICYmIHNlbGYuX3NvdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNhY2hlW3NlbGYuX3NyY10gPSBidWZmZXI7XG4gICAgICAgIGxvYWRTb3VuZChzZWxmLCBidWZmZXIpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0RlY29kaW5nIGF1ZGlvIGRhdGEgZmFpbGVkLicpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTb3VuZCBpcyBub3cgbG9hZGVkLCBzbyBmaW5pc2ggc2V0dGluZyBldmVyeXRoaW5nIHVwIGFuZCBmaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICogQHBhcmFtICB7T2JqZWN0fSBidWZmZXIgVGhlIGRlY29kZWQgYnVmZmVyIHNvdW5kIHNvdXJjZS5cbiAgICovXG4gIHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihzZWxmLCBidWZmZXIpIHtcbiAgICAvLyBTZXQgdGhlIGR1cmF0aW9uLlxuICAgIGlmIChidWZmZXIgJiYgIXNlbGYuX2R1cmF0aW9uKSB7XG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGJ1ZmZlci5kdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgaWYgKE9iamVjdC5rZXlzKHNlbGYuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxmLl9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgc2VsZi5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgfVxuXG4gICAgLy8gRmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkJyk7XG4gICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBhdWRpbyBjb250ZXh0IHdoZW4gYXZhaWxhYmxlLCBvciBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8gbW9kZS5cbiAgICovXG4gIHZhciBzZXR1cEF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIENoZWNrIGlmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8gYW5kIHNldHVwIHRoZSBBdWRpb0NvbnRleHQgaWYgd2UgYXJlLlxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGEgd2VidmlldyBpcyBiZWluZyB1c2VkIG9uIGlPUzggb3IgZWFybGllciAocmF0aGVyIHRoYW4gdGhlIGJyb3dzZXIpLlxuICAgIC8vIElmIGl0IGlzLCBkaXNhYmxlIFdlYiBBdWRpbyBhcyBpdCBjYXVzZXMgY3Jhc2hpbmcuXG4gICAgdmFyIGlPUyA9ICgvaVAoaG9uZXxvZHxhZCkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IucGxhdGZvcm0pKTtcbiAgICB2YXIgYXBwVmVyc2lvbiA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT8vKTtcbiAgICB2YXIgdmVyc2lvbiA9IGFwcFZlcnNpb24gPyBwYXJzZUludChhcHBWZXJzaW9uWzFdLCAxMCkgOiBudWxsO1xuICAgIGlmIChpT1MgJiYgdmVyc2lvbiAmJiB2ZXJzaW9uIDwgOSkge1xuICAgICAgdmFyIHNhZmFyaSA9IC9zYWZhcmkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnN0YW5kYWxvbmUgJiYgIXNhZmFyaSB8fCBIb3dsZXIuX25hdmlnYXRvciAmJiAhSG93bGVyLl9uYXZpZ2F0b3Iuc3RhbmRhbG9uZSAmJiAhc2FmYXJpKSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBleHBvc2UgdGhlIG1hc3RlciBHYWluTm9kZSB3aGVuIHVzaW5nIFdlYiBBdWRpbyAodXNlZnVsIGZvciBwbHVnaW5zIG9yIGFkdmFuY2VkIHVzYWdlKS5cbiAgICBpZiAoSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uZ2Fpbi52YWx1ZSA9IDE7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KEhvd2xlci5jdHguZGVzdGluYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFJlLXJ1biB0aGUgc2V0dXAgb24gSG93bGVyLlxuICAgIEhvd2xlci5fc2V0dXAoKTtcbiAgfTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQU1EIChBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24pIGxpYnJhcmllcyBzdWNoIGFzIHJlcXVpcmUuanMuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgSG93bGVyOiBIb3dsZXIsXG4gICAgICAgIEhvd2w6IEhvd2xcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQ29tbW9uSlMgbGlicmFyaWVzIHN1Y2ggYXMgYnJvd3NlcmlmeS5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGV4cG9ydHMuSG93bGVyID0gSG93bGVyO1xuICAgIGV4cG9ydHMuSG93bCA9IEhvd2w7XG4gIH1cblxuICAvLyBEZWZpbmUgZ2xvYmFsbHkgaW4gY2FzZSBBTUQgaXMgbm90IGF2YWlsYWJsZSBvciB1bnVzZWQuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgd2luZG93Lkhvd2xlciA9IEhvd2xlcjtcbiAgICB3aW5kb3cuSG93bCA9IEhvd2w7XG4gICAgd2luZG93LlNvdW5kID0gU291bmQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gQWRkIHRvIGdsb2JhbCBpbiBOb2RlLmpzIChmb3IgdGVzdGluZywgZXRjKS5cbiAgICBnbG9iYWwuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIGdsb2JhbC5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZ2xvYmFsLkhvd2wgPSBIb3dsO1xuICAgIGdsb2JhbC5Tb3VuZCA9IFNvdW5kO1xuICB9XG59KSgpO1xuXG5cbi8qIVxuICogIFNwYXRpYWwgUGx1Z2luIC0gQWRkcyBzdXBwb3J0IGZvciBzdGVyZW8gYW5kIDNEIGF1ZGlvIHdoZXJlIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQuXG4gKiAgXG4gKiAgaG93bGVyLmpzIHYyLjAuMlxuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDE2LCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBTZXR1cCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX3BvcyA9IFswLCAwLCAwXTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fb3JpZW50YXRpb24gPSBbMCwgMCwgLTEsIDAsIDEsIDBdO1xuICBcbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgc3RlcmVvIHBhbm5pbmcgcG9zaXRpb24gb2YgYWxsIGN1cnJlbnQgSG93bHMuXG4gICAqIEZ1dHVyZSBIb3dscyB3aWxsIG5vdCB1c2UgdGhpcyB2YWx1ZSB1bmxlc3MgZXhwbGljaXRseSBzZXQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEByZXR1cm4ge0hvd2xlci9OdW1iZXJ9ICAgICBTZWxmIG9yIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCB1cGRhdGUgdGhlaXIgc3RlcmVvIHBhbm5pbmcuXG4gICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICBzZWxmLl9ob3dsc1tpXS5zdGVyZW8ocGFuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyIGluIDNEIGNhcnRlc2lhbiBzcGFjZS4gU291bmRzIHVzaW5nXG4gICAqIDNEIHBvc2l0aW9uIHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIGxpc3RlbmVyJ3MgcG9zaXRpb24uXG4gICAqIEBwYXJhbSAge051bWJlcn0geCBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiBUaGUgei1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICBTZWxmIG9yIGN1cnJlbnQgbGlzdGVuZXIgcG9zaXRpb24uXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1sxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzJdIDogejtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcbiAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldFBvc2l0aW9uKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gc3BhY2UuXG4gICAqIEEgZnJvbnQgYW5kIHVwIHZlY3RvciBtdXN0IGJlIHByb3ZpZGVkLiBUaGUgZnJvbnQgaXMgdGhlIGRpcmVjdGlvbiB0aGVcbiAgICogZmFjZSBvZiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcsIGFuZCB1cCBpcyB0aGUgZGlyZWN0aW9uIHRoZSB0b3Agb2YgdGhlXG4gICAqIGxpc3RlbmVyIGlzIHBvaW50aW5nLiBUaHVzLCB0aGVzZSB2YWx1ZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGF0IHJpZ2h0IGFuZ2xlc1xuICAgKiBmcm9tIGVhY2ggb3RoZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geFVwIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHlVcCBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6VXAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBvcmllbnRhdGlvbiB2ZWN0b3JzLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHZhciBvciA9IHNlbGYuX29yaWVudGF0aW9uO1xuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IG9yWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBvclsyXSA6IHo7XG4gICAgeFVwID0gKHR5cGVvZiB4VXAgIT09ICdudW1iZXInKSA/IG9yWzNdIDogeFVwO1xuICAgIHlVcCA9ICh0eXBlb2YgeVVwICE9PSAnbnVtYmVyJykgPyBvcls0XSA6IHlVcDtcbiAgICB6VXAgPSAodHlwZW9mIHpVcCAhPT0gJ251bWJlcicpID8gb3JbNV0gOiB6VXA7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6LCB4VXAsIHlVcCwgelVwXTtcbiAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge0hvd2x9XG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IG8ub3JpZW50YXRpb24gfHwgWzEsIDAsIDBdO1xuICAgICAgc2VsZi5fc3RlcmVvID0gby5zdGVyZW8gfHwgbnVsbDtcbiAgICAgIHNlbGYuX3BvcyA9IG8ucG9zIHx8IG51bGw7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogMCxcbiAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiAnaW52ZXJzZScsXG4gICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogMTAwMDAsXG4gICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogJ0hSVEYnLFxuICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IDEsXG4gICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogMVxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25zdGVyZW8gPSBvLm9uc3RlcmVvID8gW3tmbjogby5vbnN0ZXJlb31dIDogW107XG4gICAgICBzZWxmLl9vbnBvcyA9IG8ub25wb3MgPyBbe2ZuOiBvLm9ucG9zfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ub3JpZW50YXRpb24gPSBvLm9ub3JpZW50YXRpb24gPyBbe2ZuOiBvLm9ub3JpZW50YXRpb259XSA6IFtdO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG8pO1xuICAgIH07XG4gIH0pKEhvd2wucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBzdGVyZW8gcGFubmluZyBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGFsbCBpbiB0aGUgZ3JvdXAuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuICBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBzdGVyZW8gcGFuIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdzdGVyZW8nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RlcmVvKHBhbiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIFBhbm5lclN0ZXJlb05vZGUgc3VwcG9ydCBhbmQgZmFsbGJhY2sgdG8gUGFubmVyTm9kZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIHZhciBwYW5uZXJUeXBlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lciA9PT0gJ3VuZGVmaW5lZCcpID8gJ3NwYXRpYWwnIDogJ3N0ZXJlbyc7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fc3RlcmVvID0gcGFuO1xuICAgICAgICBzZWxmLl9wb3MgPSBbcGFuLCAwLCAwXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9zdGVyZW87XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzdHJlbyBwYW5uaW5nIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3BhbiwgMCwgMF07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBmYWxsaW5nIGJhY2ssIG1ha2Ugc3VyZSB0aGUgcGFubmluZ01vZGVsIGlzIGVxdWFscG93ZXIuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgPSAnZXF1YWxwb3dlcic7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCAhc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsIHBhbm5lclR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFubmVyVHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24ocGFuLCAwLCAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnZhbHVlID0gcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0ZXJlbycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9zdGVyZW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgM0Qgc3BhdGlhbCBwb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yXG4gICAqIGFsbCBpbiB0aGUgZ3JvdXAuIFRoZSBtb3N0IGNvbW1vbiB1c2FnZSBpcyB0byBzZXQgdGhlICd4JyBwb3NpdGlvbiBmb3JcbiAgICogbGVmdC9yaWdodCBwYW5uaW5nLiBTZXR0aW5nIGFueSB2YWx1ZSBoaWdoZXIgdGhhbiAxLjAgd2lsbCBiZWdpbiB0b1xuICAgKiBkZWNyZWFzZSB0aGUgdm9sdW1lIG9mIHRoZSBzb3VuZCBhcyBpdCBtb3ZlcyBmdXJ0aGVyIGF3YXkuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtcG9zaXRpb24gb2YgdGhlIGF1ZGlvIGZyb20gLTEwMDAuMCB0byAxMDAwLjAuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktcG9zaXRpb24gb2YgdGhlIGF1ZGlvIGZyb20gLTEwMDAuMCB0byAxMDAwLjAuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotcG9zaXRpb24gb2YgdGhlIGF1ZGlvIGZyb20gLTEwMDAuMCB0byAxMDAwLjAuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBwb3NpdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwb3NpdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAncG9zJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnBvcyh4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gMCA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gLTAuNSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBwb3NpdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgncG9zJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3BvcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGF1ZGlvIHNvdXJjZSBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIGNvb3JkaW5hdGVcbiAgICogc3BhY2UuIERlcGVuZGluZyBvbiBob3cgZGlyZWN0aW9uIHRoZSBzb3VuZCBpcywgYmFzZWQgb24gdGhlIGBjb25lYCBhdHRyaWJ1dGVzLFxuICAgKiBhIHNvdW5kIHBvaW50aW5nIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIgY2FuIGJlIHF1aWV0IG9yIHNpbGVudC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIG9yaWVudGF0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugb3JpZW50YXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ29yaWVudGF0aW9uJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLm9yaWVudGF0aW9uKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMl0gOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fb3JpZW50YXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIG9yaWVudGF0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdvcmllbnRhdGlvbicsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9vcmllbnRhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwYW5uZXIgbm9kZSdzIGF0dHJpYnV0ZXMgZm9yIGEgc291bmQgb3IgZ3JvdXAgb2Ygc291bmRzLlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxsIHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICogICBwYW5uZXJBdHRyKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihvKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgKiAgIHBhbm5lckF0dHIobywgaWQpIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgKlxuICAgKiAgIEF0dHJpYnV0ZXM6XG4gICAqICAgICBjb25lSW5uZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgVGhlcmUgd2lsbCBiZSBubyB2b2x1bWUgcmVkdWN0aW9uIGluc2lkZSB0aGlzIGFuZ2xlLlxuICAgKiAgICAgY29uZU91dGVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIFRoZSB2b2x1bWUgd2lsbCBiZSByZWR1Y2VkIHRvIGEgY29uc3RhbnQgdmFsdWUgb2ZcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGNvbmVPdXRlckdhaW5gIG91dHNpZGUgdGhpcyBhbmdsZS5cbiAgICogICAgIGNvbmVPdXRlckdhaW4gLSAoMCBieSBkZWZhdWx0KSBUaGUgYW1vdW50IG9mIHZvbHVtZSByZWR1Y3Rpb24gb3V0c2lkZSBvZiBgY29uZU91dGVyQW5nbGVgLlxuICAgKiAgICAgZGlzdGFuY2VNb2RlbCAtICgnaW52ZXJzZScgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyBhbGdvcml0aG0gdG8gdXNlIHRvIHJlZHVjZSB2b2x1bWUgYXMgYXVkaW8gbW92ZXNcbiAgICogICAgICAgICAgICAgICAgICAgICAgYXdheSBmcm9tIGxpc3RlbmVyLiBDYW4gYmUgYGxpbmVhcmAsIGBpbnZlcnNlYCBvciBgZXhwb25lbnRpYWxgLlxuICAgKiAgICAgbWF4RGlzdGFuY2UgLSAoMTAwMDAgYnkgZGVmYXVsdCkgVm9sdW1lIHdvbid0IHJlZHVjZSBiZXR3ZWVuIHNvdXJjZS9saXN0ZW5lciBiZXlvbmQgdGhpcyBkaXN0YW5jZS5cbiAgICogICAgIHBhbm5pbmdNb2RlbCAtICgnSFJURicgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyB3aGljaCBzcGF0aWFsaXphdGlvbiBhbGdvcml0aG0gaXMgdXNlZCB0byBwb3NpdGlvbiBhdWRpby5cbiAgICogICAgICAgICAgICAgICAgICAgICBDYW4gYmUgYEhSVEZgIG9yIGBlcXVhbHBvd2VyYC5cbiAgICogICAgIHJlZkRpc3RhbmNlIC0gKDEgYnkgZGVmYXVsdCkgQSByZWZlcmVuY2UgZGlzdGFuY2UgZm9yIHJlZHVjaW5nIHZvbHVtZSBhcyB0aGUgc291cmNlXG4gICAqICAgICAgICAgICAgICAgICAgICBtb3ZlcyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyLlxuICAgKiAgICAgcm9sbG9mZkZhY3RvciAtICgxIGJ5IGRlZmF1bHQpIEhvdyBxdWlja2x5IHRoZSB2b2x1bWUgcmVkdWNlcyBhcyBzb3VyY2UgbW92ZXMgZnJvbSBsaXN0ZW5lci5cbiAgICogXG4gICAqIEByZXR1cm4ge0hvd2wvT2JqZWN0fSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBwYW5uZXIgYXR0cmlidXRlcy5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBhbm5lckF0dHIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIG8sIGlkLCBzb3VuZDtcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgIHJldHVybiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgbyA9IGFyZ3NbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91J3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogc2VsZi5fY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IHNlbGYuX2NvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiBzZWxmLl9jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiBzZWxmLl9kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiBzZWxmLl9tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogc2VsZi5fcGFubmluZ01vZGVsLFxuICAgICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiBzZWxmLl9yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogc2VsZi5fcm9sbG9mZkZhY3RvclxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9wYW5uZXJBdHRyIDogc2VsZi5fcGFubmVyQXR0cjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICBvID0gYXJnc1swXTtcbiAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWVzIG9mIHRoZSBzcGVjaWZpZWQgc291bmRzLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgdmFsdWVzIGludG8gdGhlIHNvdW5kLlxuICAgICAgICB2YXIgcGEgPSBzb3VuZC5fcGFubmVyQXR0cjtcbiAgICAgICAgcGEgPSB7XG4gICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiBwYS5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IHBhLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogcGEuY29uZU91dGVyR2FpbixcbiAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6IHBhLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiBwYS5tYXhEaXN0YW5jZSxcbiAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6IHBhLnBhbm5pbmdNb2RlbCxcbiAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IHBhLnJlZkRpc3RhbmNlLFxuICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogcGEucm9sbG9mZkZhY3RvclxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFubmVyIHZhbHVlcyBvciBjcmVhdGUgYSBuZXcgcGFubmVyIGlmIG5vbmUgZXhpc3RzLlxuICAgICAgICB2YXIgcGFubmVyID0gc291bmQuX3Bhbm5lcjtcbiAgICAgICAgaWYgKHBhbm5lcikge1xuICAgICAgICAgIHBhbm5lci5jb25lSW5uZXJBbmdsZSA9IHBhLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgICAgIHBhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHBhLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgICAgIHBhbm5lci5jb25lT3V0ZXJHYWluID0gcGEuY29uZU91dGVyR2FpbjtcbiAgICAgICAgICBwYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHBhLmRpc3RhbmNlTW9kZWw7XG4gICAgICAgICAgcGFubmVyLm1heERpc3RhbmNlID0gcGEubWF4RGlzdGFuY2U7XG4gICAgICAgICAgcGFubmVyLnBhbm5pbmdNb2RlbCA9IHBhLnBhbm5pbmdNb2RlbDtcbiAgICAgICAgICBwYW5uZXIucmVmRGlzdGFuY2UgPSBwYS5yZWZEaXN0YW5jZTtcbiAgICAgICAgICBwYW5uZXIucm9sbG9mZkZhY3RvciA9IHBhLnJvbGxvZmZGYWN0b3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlLlxuICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgU291bmQgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIFNvdW5kIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlIFNvdW5kJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXG4gICAgICAvLyBJZiBhIHN0ZXJlbyBvciBwb3NpdGlvbiB3YXMgc3BlY2lmaWVkLCBzZXQgaXQgdXAuXG4gICAgICBpZiAoc2VsZi5fc3RlcmVvKSB7XG4gICAgICAgIHBhcmVudC5zdGVyZW8oc2VsZi5fc3RlcmVvKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcG9zKSB7XG4gICAgICAgIHBhcmVudC5wb3Moc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSwgc2VsZi5faWQpO1xuICAgICAgfVxuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIFNvdW5kLnJlc2V0IG1ldGhvZCB0byBjbGVhbiB1cCBwcm9wZXJ0aWVzIGZyb20gdGhlIHNwYXRpYWwgcGx1Z2luLlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIFNvdW5kIHJlc2V0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUucmVzZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIHNwYXRpYWwgcGx1Z2luIHByb3BlcnRpZXMgb24gdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gQ29tcGxldGUgcmVzZXR0aW5nIG9mIHRoZSBzb3VuZC5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUucmVzZXQpO1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlIGFuZCBzYXZlIGl0IG9uIHRoZSBzb3VuZC5cbiAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFNwZWNpZmljIHNvdW5kIHRvIHNldHVwIHBhbm5pbmcgb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFR5cGUgb2YgcGFubmVyIHRvIGNyZWF0ZTogJ3N0ZXJlbycgb3IgJ3NwYXRpYWwnLlxuICAgKi9cbiAgdmFyIHNldHVwUGFubmVyID0gZnVuY3Rpb24oc291bmQsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSB8fCAnc3BhdGlhbCc7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBwYW5uZXIgbm9kZS5cbiAgICBpZiAodHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVQYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZUlubmVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyR2FpbiA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW47XG4gICAgICBzb3VuZC5fcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5tYXhEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLm1heERpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW5uaW5nTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWw7XG4gICAgICBzb3VuZC5fcGFubmVyLnJlZkRpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIucmVmRGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBzb3VuZC5fcGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yO1xuICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihzb3VuZC5fcG9zWzBdLCBzb3VuZC5fcG9zWzFdLCBzb3VuZC5fcG9zWzJdKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oc291bmQuX29yaWVudGF0aW9uWzBdLCBzb3VuZC5fb3JpZW50YXRpb25bMV0sIHNvdW5kLl9vcmllbnRhdGlvblsyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW4udmFsdWUgPSBzb3VuZC5fc3RlcmVvO1xuICAgIH1cblxuICAgIHNvdW5kLl9wYW5uZXIuY29ubmVjdChzb3VuZC5fbm9kZSk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIGNvbm5lY3Rpb25zLlxuICAgIGlmICghc291bmQuX3BhdXNlZCkge1xuICAgICAgc291bmQuX3BhcmVudC5wYXVzZShzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkKTtcbiAgICB9XG4gIH07XG59KSgpO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmV4cG9ydCBjb25zdCB0cmFuc3BhcmVudCA9IG5ldyBDb2xvcigwLCAwKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhDb2xvck5hbWUocGF0aCkge1xuICBsZXQgaGV4Q29sb3IgPSBwYXRoLnBhcmVudC5kYXRhLm9yaWdpbmFsQ29sb3I7XG4gIC8vIGxldCBoZXhDb2xvciA9IHBhdGguc3Ryb2tlQ29sb3IudG9DU1ModHJ1ZSk7IC8vIFRoaXMgZmFpbHMgd2hlbiBpdCdzIGEgZ3JhZGllbnRcbiAgcmV0dXJuIGdldENvbG9yTmFtZShoZXhDb2xvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xvck5hbWUoY29sb3IpIHtcbiAgaWYgKGNvbG9yKSB7XG4gICAgY29sb3IgPSBjb2xvci50b1VwcGVyQ2FzZSgpOyAvLyBtYWtlIHN1cmVcbiAgICBpZiAoY29sb3IgaW4gY29uZmlnLnBhbGV0dGUuY29sb3JOYW1lcykge1xuICAgICAgcmV0dXJuIGNvbmZpZy5wYWxldHRlLmNvbG9yTmFtZXNbY29sb3JdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbVBvcCgpIHtcbiAgY29uc3QgcG9wcyA9IGNvbmZpZy5wYWxldHRlLnBvcHM7XG4gIHJldHVybiBwb3BzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvcHMubGVuZ3RoKV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmRleGVkUG9wQ29sb3IoaW5kZXgpIHtcbiAgY29uc3QgcG9wcyA9IGNvbmZpZy5wYWxldHRlLnBvcHM7XG4gIHJldHVybiBwb3BzW2luZGV4ICUgcG9wcy5sZW5ndGhdO1xufVxuIiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5TaGFwZURldGVjdG9yID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBfbmJTYW1wbGVQb2ludHM7XG4gIHZhciBfc3F1YXJlU2l6ZSA9IDI1MDtcbiAgdmFyIF9waGkgPSAwLjUgKiAoLTEuMCArIE1hdGguc3FydCg1LjApKTtcbiAgdmFyIF9hbmdsZVJhbmdlID0gZGVnMlJhZCg0NS4wKTtcbiAgdmFyIF9hbmdsZVByZWNpc2lvbiA9IGRlZzJSYWQoMi4wKTtcbiAgdmFyIF9oYWxmRGlhZ29uYWwgPSBNYXRoLnNxcnQoX3NxdWFyZVNpemUgKiBfc3F1YXJlU2l6ZSArIF9zcXVhcmVTaXplICogX3NxdWFyZVNpemUpICogMC41O1xuICB2YXIgX29yaWdpbiA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBmdW5jdGlvbiBkZWcyUmFkKGQpIHtcblxuICAgIHJldHVybiBkICogTWF0aC5QSSAvIDE4MC4wO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldERpc3RhbmNlKGEsIGIpIHtcblxuICAgIHZhciBkeCA9IGIueCAtIGEueDtcbiAgICB2YXIgZHkgPSBiLnkgLSBhLnk7XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgfTtcblxuICBmdW5jdGlvbiBTdHJva2UocG9pbnRzLCBuYW1lKSB7XG5cbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucHJvY2Vzc1N0cm9rZSgpO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUucHJvY2Vzc1N0cm9rZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnJlc2FtcGxlKCk7XG4gICAgdGhpcy5zZXRDZW50cm9pZCgpO1xuICAgIHRoaXMucG9pbnRzID0gdGhpcy5yb3RhdGVCeSgtdGhpcy5pbmRpY2F0aXZlQW5nbGUoKSk7XG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnNjYWxlVG9TcXVhcmUoKTtcbiAgICB0aGlzLnNldENlbnRyb2lkKCk7XG4gICAgdGhpcy5wb2ludHMgPSB0aGlzLnRyYW5zbGF0ZVRvT3JpZ2luKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnJlc2FtcGxlID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgbG9jYWxEaXN0YW5jZSwgcTtcbiAgICB2YXIgaW50ZXJ2YWwgPSB0aGlzLnN0cm9rZUxlbmd0aCgpIC8gKF9uYlNhbXBsZVBvaW50cyAtIDEpO1xuICAgIHZhciBkaXN0YW5jZSA9IDAuMDtcbiAgICB2YXIgbmV3UG9pbnRzID0gW3RoaXMucG9pbnRzWzBdXTtcblxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvY2FsRGlzdGFuY2UgPSBnZXREaXN0YW5jZSh0aGlzLnBvaW50c1tpIC0gMV0sIHRoaXMucG9pbnRzW2ldKTtcblxuICAgICAgaWYgKGRpc3RhbmNlICsgbG9jYWxEaXN0YW5jZSA+PSBpbnRlcnZhbCkge1xuICAgICAgICBxID0ge1xuICAgICAgICAgIHg6IHRoaXMucG9pbnRzW2kgLSAxXS54ICsgKChpbnRlcnZhbCAtIGRpc3RhbmNlKSAvIGxvY2FsRGlzdGFuY2UpICogKHRoaXMucG9pbnRzW2ldLnggLSB0aGlzLnBvaW50c1tpIC0gMV0ueCksXG4gICAgICAgICAgeTogdGhpcy5wb2ludHNbaSAtIDFdLnkgKyAoKGludGVydmFsIC0gZGlzdGFuY2UpIC8gbG9jYWxEaXN0YW5jZSkgKiAodGhpcy5wb2ludHNbaV0ueSAtIHRoaXMucG9pbnRzW2kgLSAxXS55KVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1BvaW50cy5wdXNoKHEpO1xuICAgICAgICB0aGlzLnBvaW50cy5zcGxpY2UoaSwgMCwgcSk7XG4gICAgICAgIGRpc3RhbmNlID0gMC4wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzdGFuY2UgKz0gbG9jYWxEaXN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3UG9pbnRzLmxlbmd0aCA9PT0gX25iU2FtcGxlUG9pbnRzIC0gMSkge1xuICAgICAgbmV3UG9pbnRzLnB1c2godGhpcy5wb2ludHNbdGhpcy5wb2ludHMubGVuZ3RoIC0gMV0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5yb3RhdGVCeSA9IGZ1bmN0aW9uKGFuZ2xlKSB7XG5cbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBuZXdQb2ludHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG5cbiAgICAgIG5ld1BvaW50cy5wdXNoKHtcbiAgICAgICAgeDogKHBvaW50LnggLSB0aGlzLmMueCkgKiBjb3MgLSAocG9pbnQueSAtIHRoaXMuYy55KSAqIHNpbiArIHRoaXMuYy54LFxuICAgICAgICB5OiAocG9pbnQueCAtIHRoaXMuYy54KSAqIHNpbiArIChwb2ludC55IC0gdGhpcy5jLnkpICogY29zICsgdGhpcy5jLnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zY2FsZVRvU3F1YXJlID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIG5ld1BvaW50cyA9IFtdXG4gICAgdmFyIGJveCA9IHtcbiAgICAgIG1pblg6ICtJbmZpbml0eSxcbiAgICAgIG1heFg6IC1JbmZpbml0eSxcbiAgICAgIG1pblk6ICtJbmZpbml0eSxcbiAgICAgIG1heFk6IC1JbmZpbml0eVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBib3gubWluWCA9IE1hdGgubWluKGJveC5taW5YLCBwb2ludC54KTtcbiAgICAgIGJveC5taW5ZID0gTWF0aC5taW4oYm94Lm1pblksIHBvaW50LnkpO1xuICAgICAgYm94Lm1heFggPSBNYXRoLm1heChib3gubWF4WCwgcG9pbnQueCk7XG4gICAgICBib3gubWF4WSA9IE1hdGgubWF4KGJveC5tYXhZLCBwb2ludC55KTtcbiAgICB9XG5cbiAgICBib3gud2lkdGggPSBib3gubWF4WCAtIGJveC5taW5YO1xuICAgIGJveC5oZWlnaHQgPSBib3gubWF4WSAtIGJveC5taW5ZO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICBuZXdQb2ludHMucHVzaCh7XG4gICAgICAgIHg6IHBvaW50LnggKiAoX3NxdWFyZVNpemUgLyBib3gud2lkdGgpLFxuICAgICAgICB5OiBwb2ludC55ICogKF9zcXVhcmVTaXplIC8gYm94LmhlaWdodClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS50cmFuc2xhdGVUb09yaWdpbiA9IGZ1bmN0aW9uKHBvaW50cykge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBuZXdQb2ludHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG5cbiAgICAgIG5ld1BvaW50cy5wdXNoKHtcbiAgICAgICAgeDogcG9pbnQueCArIF9vcmlnaW4ueCAtIHRoaXMuYy54LFxuICAgICAgICB5OiBwb2ludC55ICsgX29yaWdpbi55IC0gdGhpcy5jLnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5zZXRDZW50cm9pZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHBvaW50O1xuICAgIHRoaXMuYyA9IHtcbiAgICAgIHg6IDAuMCxcbiAgICAgIHk6IDAuMFxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuXG4gICAgICB0aGlzLmMueCArPSBwb2ludC54O1xuICAgICAgdGhpcy5jLnkgKz0gcG9pbnQueTtcbiAgICB9XG5cbiAgICB0aGlzLmMueCAvPSB0aGlzLnBvaW50cy5sZW5ndGg7XG4gICAgdGhpcy5jLnkgLz0gdGhpcy5wb2ludHMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgU3Ryb2tlLnByb3RvdHlwZS5pbmRpY2F0aXZlQW5nbGUgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMuYy55IC0gdGhpcy5wb2ludHNbMF0ueSwgdGhpcy5jLnggLSB0aGlzLnBvaW50c1swXS54KTtcbiAgfTtcblxuICBTdHJva2UucHJvdG90eXBlLnN0cm9rZUxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGQgPSAwLjA7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkICs9IGdldERpc3RhbmNlKHRoaXMucG9pbnRzW2kgLSAxXSwgdGhpcy5wb2ludHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBkO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuZGlzdGFuY2VBdEJlc3RBbmdsZSA9IGZ1bmN0aW9uKHBhdHRlcm4pIHtcblxuICAgIHZhciBhID0gLV9hbmdsZVJhbmdlO1xuICAgIHZhciBiID0gX2FuZ2xlUmFuZ2U7XG4gICAgdmFyIHgxID0gX3BoaSAqIGEgKyAoMS4wIC0gX3BoaSkgKiBiO1xuICAgIHZhciBmMSA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgxKTtcbiAgICB2YXIgeDIgPSAoMS4wIC0gX3BoaSkgKiBhICsgX3BoaSAqIGI7XG4gICAgdmFyIGYyID0gdGhpcy5kaXN0YW5jZUF0QW5nbGUocGF0dGVybiwgeDIpO1xuXG4gICAgd2hpbGUgKE1hdGguYWJzKGIgLSBhKSA+IF9hbmdsZVByZWNpc2lvbikge1xuXG4gICAgICBpZiAoZjEgPCBmMikge1xuICAgICAgICBiID0geDI7XG4gICAgICAgIHgyID0geDE7XG4gICAgICAgIGYyID0gZjE7XG4gICAgICAgIHgxID0gX3BoaSAqIGEgKyAoMS4wIC0gX3BoaSkgKiBiO1xuICAgICAgICBmMSA9IHRoaXMuZGlzdGFuY2VBdEFuZ2xlKHBhdHRlcm4sIHgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGEgPSB4MTtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgZjEgPSBmMjtcbiAgICAgICAgeDIgPSAoMS4wIC0gX3BoaSkgKiBhICsgX3BoaSAqIGI7XG4gICAgICAgIGYyID0gdGhpcy5kaXN0YW5jZUF0QW5nbGUocGF0dGVybiwgeDIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBNYXRoLm1pbihmMSwgZjIpO1xuICB9O1xuXG4gIFN0cm9rZS5wcm90b3R5cGUuZGlzdGFuY2VBdEFuZ2xlID0gZnVuY3Rpb24ocGF0dGVybiwgYW5nbGUpIHtcblxuICAgIHZhciBzdHJva2VQb2ludHMgPSB0aGlzLnJvdGF0ZUJ5KGFuZ2xlKTtcbiAgICB2YXIgcGF0dGVyblBvaW50cyA9IHBhdHRlcm4ucG9pbnRzO1xuICAgIHZhciBkID0gMC4wO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJva2VQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGQgKz0gZ2V0RGlzdGFuY2Uoc3Ryb2tlUG9pbnRzW2ldLCBwYXR0ZXJuUG9pbnRzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZCAvIHN0cm9rZVBvaW50cy5sZW5ndGg7XG4gIH07XG5cbiAgZnVuY3Rpb24gU2hhcGVEZXRlY3RvcihwYXR0ZXJucywgb3B0aW9ucykge1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy50aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZCB8fCAwO1xuICAgIF9uYlNhbXBsZVBvaW50cyA9IG9wdGlvbnMubmJTYW1wbGVQb2ludHMgfHwgNjQ7XG5cbiAgICB0aGlzLnBhdHRlcm5zID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmxlYXJuKHBhdHRlcm5zW2ldLm5hbWUsIHBhdHRlcm5zW2ldLnBvaW50cyk7XG4gICAgfVxuICB9XG5cbiAgU2hhcGVEZXRlY3Rvci5kZWZhdWx0U2hhcGVzID0gW1xuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogMCwgeTogNTAgfSwgeyB4OiAxMDAsIHk6IDUwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogNTAsIHk6IDAgfSwgeyB4OiA1MCwgeTogMTAwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3sgeDogMCwgeTogMCB9LCB7IHg6IDEwMCwgeTogMTAwIH1dLFxuICAgICAgbmFtZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogODksXCJ5XCI6IDE2NH0se1wieFwiOiA5MCxcInlcIjogMTYyfSx7XCJ4XCI6IDkyLFwieVwiOiAxNjJ9LHtcInhcIjogOTQsXCJ5XCI6IDE2NH0se1wieFwiOiA5NSxcInlcIjogMTY2fSx7XCJ4XCI6IDk2LFwieVwiOiAxNjl9LHtcInhcIjogOTcsXCJ5XCI6IDE3MX0se1wieFwiOiA5OSxcInlcIjogMTc1fSx7XCJ4XCI6IDEwMSxcInlcIjogMTc4fSx7XCJ4XCI6IDEwMyxcInlcIjogMTgyfSx7XCJ4XCI6IDEwNixcInlcIjogMTg5fSx7XCJ4XCI6IDEwOCxcInlcIjogMTk0fSx7XCJ4XCI6IDExMSxcInlcIjogMTk5fSx7XCJ4XCI6IDExNCxcInlcIjogMjA0fSx7XCJ4XCI6IDExNyxcInlcIjogMjA5fSx7XCJ4XCI6IDExOSxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMixcInlcIjogMjE4fSx7XCJ4XCI6IDEyNCxcInlcIjogMjIyfSx7XCJ4XCI6IDEyNixcInlcIjogMjI1fSx7XCJ4XCI6IDEyOCxcInlcIjogMjI4fSx7XCJ4XCI6IDEzMCxcInlcIjogMjI5fSx7XCJ4XCI6IDEzMyxcInlcIjogMjMzfSx7XCJ4XCI6IDEzNCxcInlcIjogMjM2fSx7XCJ4XCI6IDEzNixcInlcIjogMjM5fSx7XCJ4XCI6IDEzOCxcInlcIjogMjQwfSx7XCJ4XCI6IDEzOSxcInlcIjogMjQyfSx7XCJ4XCI6IDE0MCxcInlcIjogMjQ0fSx7XCJ4XCI6IDE0MixcInlcIjogMjQyfSx7XCJ4XCI6IDE0MixcInlcIjogMjQwfSx7XCJ4XCI6IDE0MixcInlcIjogMjM3fSx7XCJ4XCI6IDE0MyxcInlcIjogMjM1fSx7XCJ4XCI6IDE0MyxcInlcIjogMjMzfSx7XCJ4XCI6IDE0NSxcInlcIjogMjI5fSx7XCJ4XCI6IDE0NixcInlcIjogMjI2fSx7XCJ4XCI6IDE0OCxcInlcIjogMjE3fSx7XCJ4XCI6IDE0OSxcInlcIjogMjA4fSx7XCJ4XCI6IDE0OSxcInlcIjogMjA1fSx7XCJ4XCI6IDE1MSxcInlcIjogMTk2fSx7XCJ4XCI6IDE1MSxcInlcIjogMTkzfSx7XCJ4XCI6IDE1MyxcInlcIjogMTgyfSx7XCJ4XCI6IDE1NSxcInlcIjogMTcyfSx7XCJ4XCI6IDE1NyxcInlcIjogMTY1fSx7XCJ4XCI6IDE1OSxcInlcIjogMTYwfSx7XCJ4XCI6IDE2MixcInlcIjogMTU1fSx7XCJ4XCI6IDE2NCxcInlcIjogMTUwfSx7XCJ4XCI6IDE2NSxcInlcIjogMTQ4fSx7XCJ4XCI6IDE2NixcInlcIjogMTQ2fV0sXG4gICAgICBuYW1lOiBcImxpbmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA5MSxcInlcIjogMTg1fSx7XCJ4XCI6IDkzLFwieVwiOiAxODV9LHtcInhcIjogOTUsXCJ5XCI6IDE4NX0se1wieFwiOiA5NyxcInlcIjogMTg1fSx7XCJ4XCI6IDEwMCxcInlcIjogMTg4fSx7XCJ4XCI6IDEwMixcInlcIjogMTg5fSx7XCJ4XCI6IDEwNCxcInlcIjogMTkwfSx7XCJ4XCI6IDEwNixcInlcIjogMTkzfSx7XCJ4XCI6IDEwOCxcInlcIjogMTk1fSx7XCJ4XCI6IDExMCxcInlcIjogMTk4fSx7XCJ4XCI6IDExMixcInlcIjogMjAxfSx7XCJ4XCI6IDExNCxcInlcIjogMjA0fSx7XCJ4XCI6IDExNSxcInlcIjogMjA3fSx7XCJ4XCI6IDExNyxcInlcIjogMjEwfSx7XCJ4XCI6IDExOCxcInlcIjogMjEyfSx7XCJ4XCI6IDEyMCxcInlcIjogMjE0fSx7XCJ4XCI6IDEyMSxcInlcIjogMjE3fSx7XCJ4XCI6IDEyMixcInlcIjogMjE5fSx7XCJ4XCI6IDEyMyxcInlcIjogMjIyfSx7XCJ4XCI6IDEyNCxcInlcIjogMjI0fSx7XCJ4XCI6IDEyNixcInlcIjogMjI2fSx7XCJ4XCI6IDEyNyxcInlcIjogMjI5fSx7XCJ4XCI6IDEyOSxcInlcIjogMjMxfSx7XCJ4XCI6IDEzMCxcInlcIjogMjMzfSx7XCJ4XCI6IDEyOSxcInlcIjogMjMxfSx7XCJ4XCI6IDEyOSxcInlcIjogMjI4fSx7XCJ4XCI6IDEyOSxcInlcIjogMjI2fSx7XCJ4XCI6IDEyOSxcInlcIjogMjI0fSx7XCJ4XCI6IDEyOSxcInlcIjogMjIxfSx7XCJ4XCI6IDEyOSxcInlcIjogMjE4fSx7XCJ4XCI6IDEyOSxcInlcIjogMjEyfSx7XCJ4XCI6IDEyOSxcInlcIjogMjA4fSx7XCJ4XCI6IDEzMCxcInlcIjogMTk4fSx7XCJ4XCI6IDEzMixcInlcIjogMTg5fSx7XCJ4XCI6IDEzNCxcInlcIjogMTgyfSx7XCJ4XCI6IDEzNyxcInlcIjogMTczfSx7XCJ4XCI6IDE0MyxcInlcIjogMTY0fSx7XCJ4XCI6IDE0NyxcInlcIjogMTU3fSx7XCJ4XCI6IDE1MSxcInlcIjogMTUxfSx7XCJ4XCI6IDE1NSxcInlcIjogMTQ0fSx7XCJ4XCI6IDE2MSxcInlcIjogMTM3fSx7XCJ4XCI6IDE2NSxcInlcIjogMTMxfSx7XCJ4XCI6IDE3MSxcInlcIjogMTIyfSx7XCJ4XCI6IDE3NCxcInlcIjogMTE4fSx7XCJ4XCI6IDE3NixcInlcIjogMTE0fSx7XCJ4XCI6IDE3NyxcInlcIjogMTEyfSx7XCJ4XCI6IDE3NyxcInlcIjogMTE0fSx7XCJ4XCI6IDE3NSxcInlcIjogMTE2fSx7XCJ4XCI6IDE3MyxcInlcIjogMTE4fV0sXG4gICAgICBuYW1lOiBcImxpbmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjExMyxcInlcIjo2OH0se1wieFwiOjg2LFwieVwiOjc5fSx7XCJ4XCI6NjMsXCJ5XCI6MTMxfSx7XCJ4XCI6NzgsXCJ5XCI6MTQ3fSx7XCJ4XCI6MTU2LFwieVwiOjE0OX0se1wieFwiOjE5NSxcInlcIjoxMDB9LHtcInhcIjoxODksXCJ5XCI6Nzl9LHtcInhcIjoxMjUuNzM0OTcsXCJ5XCI6NjIuODExNjh9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo5OCxcInlcIjo2N30se1wieFwiOjc3LFwieVwiOjg1fSx7XCJ4XCI6NzcsXCJ5XCI6MTYyfSx7XCJ4XCI6MTc5LFwieVwiOjE1Nn0se1wieFwiOjE5NyxcInlcIjoxMjN9LHtcInhcIjoxNjcsXCJ5XCI6NjN9LHtcInhcIjoxNDEsXCJ5XCI6NjF9LHtcInhcIjoxMTAsXCJ5XCI6NTl9LHtcInhcIjoxMDYuNTExOTIsXCJ5XCI6NTkuNzA0MDd9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo2MCxcInlcIjo0N30se1wieFwiOjQzLFwieVwiOjk2fSx7XCJ4XCI6NTIsXCJ5XCI6MjA2fSx7XCJ4XCI6NjMsXCJ5XCI6MjQ2fSx7XCJ4XCI6MTE4LFwieVwiOjI5Nn0se1wieFwiOjE0NCxcInlcIjoyNDZ9LHtcInhcIjoxNDEsXCJ5XCI6MTQ3fSx7XCJ4XCI6MTMzLFwieVwiOjEyOX0se1wieFwiOjExMyxcInlcIjo4MH0se1wieFwiOjYwLjQyNzM4LFwieVwiOjQ1Ljc2ODEzfV0sXG4gICAgICBuYW1lOiBcImNpcmNsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDEyNyxcInlcIjogMTQxfSx7XCJ4XCI6IDEyNCxcInlcIjogMTQwfSx7XCJ4XCI6IDEyMCxcInlcIjogMTM5fSx7XCJ4XCI6IDExOCxcInlcIjogMTM5fSx7XCJ4XCI6IDExNixcInlcIjogMTM5fSx7XCJ4XCI6IDExMSxcInlcIjogMTQwfSx7XCJ4XCI6IDEwOSxcInlcIjogMTQxfSx7XCJ4XCI6IDEwNCxcInlcIjogMTQ0fSx7XCJ4XCI6IDEwMCxcInlcIjogMTQ3fSx7XCJ4XCI6IDk2LFwieVwiOiAxNTJ9LHtcInhcIjogOTMsXCJ5XCI6IDE1N30se1wieFwiOiA5MCxcInlcIjogMTYzfSx7XCJ4XCI6IDg3LFwieVwiOiAxNjl9LHtcInhcIjogODUsXCJ5XCI6IDE3NX0se1wieFwiOiA4MyxcInlcIjogMTgxfSx7XCJ4XCI6IDgyLFwieVwiOiAxOTB9LHtcInhcIjogODIsXCJ5XCI6IDE5NX0se1wieFwiOiA4MyxcInlcIjogMjAwfSx7XCJ4XCI6IDg0LFwieVwiOiAyMDV9LHtcInhcIjogODgsXCJ5XCI6IDIxM30se1wieFwiOiA5MSxcInlcIjogMjE2fSx7XCJ4XCI6IDk2LFwieVwiOiAyMTl9LHtcInhcIjogMTAzLFwieVwiOiAyMjJ9LHtcInhcIjogMTA4LFwieVwiOiAyMjR9LHtcInhcIjogMTExLFwieVwiOiAyMjR9LHtcInhcIjogMTIwLFwieVwiOiAyMjR9LHtcInhcIjogMTMzLFwieVwiOiAyMjN9LHtcInhcIjogMTQyLFwieVwiOiAyMjJ9LHtcInhcIjogMTUyLFwieVwiOiAyMTh9LHtcInhcIjogMTYwLFwieVwiOiAyMTR9LHtcInhcIjogMTY3LFwieVwiOiAyMTB9LHtcInhcIjogMTczLFwieVwiOiAyMDR9LHtcInhcIjogMTc4LFwieVwiOiAxOTh9LHtcInhcIjogMTc5LFwieVwiOiAxOTZ9LHtcInhcIjogMTgyLFwieVwiOiAxODh9LHtcInhcIjogMTgyLFwieVwiOiAxNzd9LHtcInhcIjogMTc4LFwieVwiOiAxNjd9LHtcInhcIjogMTcwLFwieVwiOiAxNTB9LHtcInhcIjogMTYzLFwieVwiOiAxMzh9LHtcInhcIjogMTUyLFwieVwiOiAxMzB9LHtcInhcIjogMTQzLFwieVwiOiAxMjl9LHtcInhcIjogMTQwLFwieVwiOiAxMzF9LHtcInhcIjogMTI5LFwieVwiOiAxMzZ9LHtcInhcIjogMTI2LFwieVwiOiAxMzl9XSxcbiAgICAgIG5hbWU6IFwiY2lyY2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjo1MTYsXCJ5XCI6Mjg0fSx7XCJ4XCI6NDk2LFwieVwiOjMxOX0se1wieFwiOjQ5NixcInlcIjozMjl9LHtcInhcIjo1MTMsXCJ5XCI6MzI5fSx7XCJ4XCI6NTUwLFwieVwiOjMyNH0se1wieFwiOjY5NixcInlcIjozMDV9LHtcInhcIjo3MzcsXCJ5XCI6Mjk4fSx7XCJ4XCI6NzQ2LFwieVwiOjI5Mn0se1wieFwiOjczNCxcInlcIjoyNzh9LHtcInhcIjo3MDksXCJ5XCI6MjUyfSx7XCJ4XCI6NjY0LFwieVwiOjE5M31dLFxuICAgICAgbmFtZTogXCJ0cmlhbmdsZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6MTc5LFwieVwiOjE1OX0se1wieFwiOjE1MixcInlcIjoyOTB9LHtcInhcIjoxNDMsXCJ5XCI6MzM2fSx7XCJ4XCI6MTQyLFwieVwiOjM1NX0se1wieFwiOjE2MCxcInlcIjozNDh9LHtcInhcIjoyMDgsXCJ5XCI6MzM3fSx7XCJ4XCI6MjQxLFwieVwiOjMzMH0se1wieFwiOjI1NixcInlcIjozMjh9LHtcInhcIjoyNTQsXCJ5XCI6MzE1fSx7XCJ4XCI6MjM4LFwieVwiOjI3N30se1wieFwiOjIxMCxcInlcIjoyMDB9LHtcInhcIjoxODIuOTQzNTYsXCJ5XCI6MTEwLjQ1NjU2fV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjoxMDUsXCJ5XCI6MzM1fSx7XCJ4XCI6MTE1LFwieVwiOjM2Mn0se1wieFwiOjEyOCxcInlcIjozMzh9LHtcInhcIjoxNjMsXCJ5XCI6MjcxfSx7XCJ4XCI6MjQxLFwieVwiOjEzNX0se1wieFwiOjI2MSxcInlcIjoxMDR9LHtcInhcIjoyNjcsXCJ5XCI6OTh9LHtcInhcIjoyNjEsXCJ5XCI6MTAyfSx7XCJ4XCI6MjM2LFwieVwiOjExOX0se1wieFwiOjE1MSxcInlcIjoxOTV9LHtcInhcIjoxMDgsXCJ5XCI6MjM1fSx7XCJ4XCI6ODMsXCJ5XCI6MjY3fSx7XCJ4XCI6NzkuOTI2MTYsXCJ5XCI6MjcwLjkzNDUxfV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogMTM3LFwieVwiOiAxMzl9LHtcInhcIjogMTM1LFwieVwiOiAxNDF9LHtcInhcIjogMTMzLFwieVwiOiAxNDR9LHtcInhcIjogMTMyLFwieVwiOiAxNDZ9LHtcInhcIjogMTMwLFwieVwiOiAxNDl9LHtcInhcIjogMTI4LFwieVwiOiAxNTF9LHtcInhcIjogMTI2LFwieVwiOiAxNTV9LHtcInhcIjogMTIzLFwieVwiOiAxNjB9LHtcInhcIjogMTIwLFwieVwiOiAxNjZ9LHtcInhcIjogMTE2LFwieVwiOiAxNzF9LHtcInhcIjogMTEyLFwieVwiOiAxNzd9LHtcInhcIjogMTA3LFwieVwiOiAxODN9LHtcInhcIjogMTAyLFwieVwiOiAxODh9LHtcInhcIjogMTAwLFwieVwiOiAxOTF9LHtcInhcIjogOTUsXCJ5XCI6IDE5NX0se1wieFwiOiA5MCxcInlcIjogMTk5fSx7XCJ4XCI6IDg2LFwieVwiOiAyMDN9LHtcInhcIjogODIsXCJ5XCI6IDIwNn0se1wieFwiOiA4MCxcInlcIjogMjA5fSx7XCJ4XCI6IDc1LFwieVwiOiAyMTN9LHtcInhcIjogNzMsXCJ5XCI6IDIxM30se1wieFwiOiA3MCxcInlcIjogMjE2fSx7XCJ4XCI6IDY3LFwieVwiOiAyMTl9LHtcInhcIjogNjQsXCJ5XCI6IDIyMX0se1wieFwiOiA2MSxcInlcIjogMjIzfSx7XCJ4XCI6IDYwLFwieVwiOiAyMjV9LHtcInhcIjogNjIsXCJ5XCI6IDIyNn0se1wieFwiOiA2NSxcInlcIjogMjI1fSx7XCJ4XCI6IDY3LFwieVwiOiAyMjZ9LHtcInhcIjogNzQsXCJ5XCI6IDIyNn0se1wieFwiOiA3NyxcInlcIjogMjI3fSx7XCJ4XCI6IDg1LFwieVwiOiAyMjl9LHtcInhcIjogOTEsXCJ5XCI6IDIzMH0se1wieFwiOiA5OSxcInlcIjogMjMxfSx7XCJ4XCI6IDEwOCxcInlcIjogMjMyfSx7XCJ4XCI6IDExNixcInlcIjogMjMzfSx7XCJ4XCI6IDEyNSxcInlcIjogMjMzfSx7XCJ4XCI6IDEzNCxcInlcIjogMjM0fSx7XCJ4XCI6IDE0NSxcInlcIjogMjMzfSx7XCJ4XCI6IDE1MyxcInlcIjogMjMyfSx7XCJ4XCI6IDE2MCxcInlcIjogMjMzfSx7XCJ4XCI6IDE3MCxcInlcIjogMjM0fSx7XCJ4XCI6IDE3NyxcInlcIjogMjM1fSx7XCJ4XCI6IDE3OSxcInlcIjogMjM2fSx7XCJ4XCI6IDE4NixcInlcIjogMjM3fSx7XCJ4XCI6IDE5MyxcInlcIjogMjM4fSx7XCJ4XCI6IDE5OCxcInlcIjogMjM5fSx7XCJ4XCI6IDIwMCxcInlcIjogMjM3fSx7XCJ4XCI6IDIwMixcInlcIjogMjM5fSx7XCJ4XCI6IDIwNCxcInlcIjogMjM4fSx7XCJ4XCI6IDIwNixcInlcIjogMjM0fSx7XCJ4XCI6IDIwNSxcInlcIjogMjMwfSx7XCJ4XCI6IDIwMixcInlcIjogMjIyfSx7XCJ4XCI6IDE5NyxcInlcIjogMjE2fSx7XCJ4XCI6IDE5MixcInlcIjogMjA3fSx7XCJ4XCI6IDE4NixcInlcIjogMTk4fSx7XCJ4XCI6IDE3OSxcInlcIjogMTg5fSx7XCJ4XCI6IDE3NCxcInlcIjogMTgzfSx7XCJ4XCI6IDE3MCxcInlcIjogMTc4fSx7XCJ4XCI6IDE2NCxcInlcIjogMTcxfSx7XCJ4XCI6IDE2MSxcInlcIjogMTY4fSx7XCJ4XCI6IDE1NCxcInlcIjogMTYwfSx7XCJ4XCI6IDE0OCxcInlcIjogMTU1fSx7XCJ4XCI6IDE0MyxcInlcIjogMTUwfSx7XCJ4XCI6IDEzOCxcInlcIjogMTQ4fSx7XCJ4XCI6IDEzNixcInlcIjogMTQ4fV0sXG4gICAgICBuYW1lOiBcInRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3t4OiAwLCB5OiAwfSwge3g6IDAsIHk6IDUwfSwge3g6IDUwLCB5OiA1MH0sIHt4OiA1MCwgeTogMH1dLFxuICAgICAgbmFtZTogXCJzcXVhcmVcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe3g6IDAsIHk6IDB9LCB7eDogMCwgeTogMTAwfSwge3g6IDUwLCB5OiAxMDB9LCB7eDogNTAsIHk6IDB9XSxcbiAgICAgIG5hbWU6IFwic3F1YXJlXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogNzgsXCJ5XCI6IDE0OX0se1wieFwiOiA3OCxcInlcIjogMTUzfSx7XCJ4XCI6IDc4LFwieVwiOiAxNTd9LHtcInhcIjogNzgsXCJ5XCI6IDE2MH0se1wieFwiOiA3OSxcInlcIjogMTYyfSx7XCJ4XCI6IDc5LFwieVwiOiAxNjR9LHtcInhcIjogNzksXCJ5XCI6IDE2N30se1wieFwiOiA3OSxcInlcIjogMTY5fSx7XCJ4XCI6IDc5LFwieVwiOiAxNzN9LHtcInhcIjogNzksXCJ5XCI6IDE3OH0se1wieFwiOiA3OSxcInlcIjogMTgzfSx7XCJ4XCI6IDgwLFwieVwiOiAxODl9LHtcInhcIjogODAsXCJ5XCI6IDE5M30se1wieFwiOiA4MCxcInlcIjogMTk4fSx7XCJ4XCI6IDgwLFwieVwiOiAyMDJ9LHtcInhcIjogODEsXCJ5XCI6IDIwOH0se1wieFwiOiA4MSxcInlcIjogMjEwfSx7XCJ4XCI6IDgxLFwieVwiOiAyMTZ9LHtcInhcIjogODIsXCJ5XCI6IDIyMn0se1wieFwiOiA4MixcInlcIjogMjI0fSx7XCJ4XCI6IDgyLFwieVwiOiAyMjd9LHtcInhcIjogODMsXCJ5XCI6IDIyOX0se1wieFwiOiA4MyxcInlcIjogMjMxfSx7XCJ4XCI6IDg1LFwieVwiOiAyMzB9LHtcInhcIjogODgsXCJ5XCI6IDIzMn0se1wieFwiOiA5MCxcInlcIjogMjMzfSx7XCJ4XCI6IDkyLFwieVwiOiAyMzJ9LHtcInhcIjogOTQsXCJ5XCI6IDIzM30se1wieFwiOiA5OSxcInlcIjogMjMyfSx7XCJ4XCI6IDEwMixcInlcIjogMjMzfSx7XCJ4XCI6IDEwNixcInlcIjogMjMzfSx7XCJ4XCI6IDEwOSxcInlcIjogMjM0fSx7XCJ4XCI6IDExNyxcInlcIjogMjM1fSx7XCJ4XCI6IDEyMyxcInlcIjogMjM2fSx7XCJ4XCI6IDEyNixcInlcIjogMjM2fSx7XCJ4XCI6IDEzNSxcInlcIjogMjM3fSx7XCJ4XCI6IDE0MixcInlcIjogMjM4fSx7XCJ4XCI6IDE0NSxcInlcIjogMjM4fSx7XCJ4XCI6IDE1MixcInlcIjogMjM4fSx7XCJ4XCI6IDE1NCxcInlcIjogMjM5fSx7XCJ4XCI6IDE2NSxcInlcIjogMjM4fSx7XCJ4XCI6IDE3NCxcInlcIjogMjM3fSx7XCJ4XCI6IDE3OSxcInlcIjogMjM2fSx7XCJ4XCI6IDE4NixcInlcIjogMjM1fSx7XCJ4XCI6IDE5MSxcInlcIjogMjM1fSx7XCJ4XCI6IDE5NSxcInlcIjogMjMzfSx7XCJ4XCI6IDE5NyxcInlcIjogMjMzfSx7XCJ4XCI6IDIwMCxcInlcIjogMjMzfSx7XCJ4XCI6IDIwMSxcInlcIjogMjM1fSx7XCJ4XCI6IDIwMSxcInlcIjogMjMzfSx7XCJ4XCI6IDE5OSxcInlcIjogMjMxfSx7XCJ4XCI6IDE5OCxcInlcIjogMjI2fSx7XCJ4XCI6IDE5OCxcInlcIjogMjIwfSx7XCJ4XCI6IDE5NixcInlcIjogMjA3fSx7XCJ4XCI6IDE5NSxcInlcIjogMTk1fSx7XCJ4XCI6IDE5NSxcInlcIjogMTgxfSx7XCJ4XCI6IDE5NSxcInlcIjogMTczfSx7XCJ4XCI6IDE5NSxcInlcIjogMTYzfSx7XCJ4XCI6IDE5NCxcInlcIjogMTU1fSx7XCJ4XCI6IDE5MixcInlcIjogMTQ1fSx7XCJ4XCI6IDE5MixcInlcIjogMTQzfSx7XCJ4XCI6IDE5MixcInlcIjogMTM4fSx7XCJ4XCI6IDE5MSxcInlcIjogMTM1fSx7XCJ4XCI6IDE5MSxcInlcIjogMTMzfSx7XCJ4XCI6IDE5MSxcInlcIjogMTMwfSx7XCJ4XCI6IDE5MCxcInlcIjogMTI4fSx7XCJ4XCI6IDE4OCxcInlcIjogMTI5fSx7XCJ4XCI6IDE4NixcInlcIjogMTI5fSx7XCJ4XCI6IDE4MSxcInlcIjogMTMyfSx7XCJ4XCI6IDE3MyxcInlcIjogMTMxfSx7XCJ4XCI6IDE2MixcInlcIjogMTMxfSx7XCJ4XCI6IDE1MSxcInlcIjogMTMyfSx7XCJ4XCI6IDE0OSxcInlcIjogMTMyfSx7XCJ4XCI6IDEzOCxcInlcIjogMTMyfSx7XCJ4XCI6IDEzNixcInlcIjogMTMyfSx7XCJ4XCI6IDEyMixcInlcIjogMTMxfSx7XCJ4XCI6IDEyMCxcInlcIjogMTMxfSx7XCJ4XCI6IDEwOSxcInlcIjogMTMwfSx7XCJ4XCI6IDEwNyxcInlcIjogMTMwfSx7XCJ4XCI6IDkwLFwieVwiOiAxMzJ9LHtcInhcIjogODEsXCJ5XCI6IDEzM30se1wieFwiOiA3NixcInlcIjogMTMzfV0sXG4gICAgICBuYW1lOiBcInNxdWFyZVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6NjcsXCJ5XCI6MTcyfSx7XCJ4XCI6ODAsXCJ5XCI6ODV9LHtcInhcIjo4MyxcInlcIjo1OH0se1wieFwiOjgzLFwieVwiOjU0fSx7XCJ4XCI6MTM2LFwieVwiOjExMH0se1wieFwiOjE1NyxcInlcIjoxMzZ9LHtcInhcIjoxNjIsXCJ5XCI6MTQwfSx7XCJ4XCI6MTY2LFwieVwiOjE0M30se1wieFwiOjgwLFwieVwiOjEyNH0se1wieFwiOjQ1LFwieVwiOjExNn0se1wieFwiOjM3LFwieVwiOjExNH0se1wieFwiOjMxLFwieVwiOjExM30se1wieFwiOjUyLFwieVwiOjEwNn0se1wieFwiOjEwMSxcInlcIjo4Nn0se1wieFwiOjEzMSxcInlcIjo3NX0se1wieFwiOjE1NyxcInlcIjo2M30se1wieFwiOjE2MyxcInlcIjo2Mn0se1wieFwiOjE1OCxcInlcIjo2NH0se1wieFwiOjE1MyxcInlcIjo3M30se1wieFwiOjEyOCxcInlcIjoxMDN9LHtcInhcIjo3MSxcInlcIjoxNzB9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOjMwLFwieVwiOjY5fSx7XCJ4XCI6MTE2LFwieVwiOjExOH0se1wieFwiOjkwLFwieVwiOjE2NH0se1wieFwiOjc1LFwieVwiOjExN30se1wieFwiOjE1NyxcInlcIjo4M30se1wieFwiOjE4MixcInlcIjoxNDB9LHtcInhcIjoxNTUsXCJ5XCI6MTYzfSx7XCJ4XCI6MTQ0LFwieVwiOjExOX0se1wieFwiOjIyMSxcInlcIjo1NH1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6ODcsXCJ5XCI6NzZ9LHtcInhcIjo2MixcInlcIjo3M30se1wieFwiOjEwMCxcInlcIjo5OH0se1wieFwiOjEwNyxcInlcIjo1N30se1wieFwiOjYxLFwieVwiOjM4fSx7XCJ4XCI6NzMsXCJ5XCI6MTM3fV0sXG4gICAgICBuYW1lOiBcIm90aGVyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHBvaW50czogW3tcInhcIjogMTIzLFwieVwiOiAxMjl9LHtcInhcIjogMTIzLFwieVwiOiAxMzF9LHtcInhcIjogMTI0LFwieVwiOiAxMzN9LHtcInhcIjogMTI1LFwieVwiOiAxMzZ9LHtcInhcIjogMTI3LFwieVwiOiAxNDB9LHtcInhcIjogMTI5LFwieVwiOiAxNDJ9LHtcInhcIjogMTMzLFwieVwiOiAxNDh9LHtcInhcIjogMTM3LFwieVwiOiAxNTR9LHtcInhcIjogMTQzLFwieVwiOiAxNTh9LHtcInhcIjogMTQ1LFwieVwiOiAxNjF9LHtcInhcIjogMTQ4LFwieVwiOiAxNjR9LHtcInhcIjogMTUzLFwieVwiOiAxNzB9LHtcInhcIjogMTU4LFwieVwiOiAxNzZ9LHtcInhcIjogMTYwLFwieVwiOiAxNzh9LHtcInhcIjogMTY0LFwieVwiOiAxODN9LHtcInhcIjogMTY4LFwieVwiOiAxODh9LHtcInhcIjogMTcxLFwieVwiOiAxOTF9LHtcInhcIjogMTc1LFwieVwiOiAxOTZ9LHtcInhcIjogMTc4LFwieVwiOiAyMDB9LHtcInhcIjogMTgwLFwieVwiOiAyMDJ9LHtcInhcIjogMTgxLFwieVwiOiAyMDV9LHtcInhcIjogMTg0LFwieVwiOiAyMDh9LHtcInhcIjogMTg2LFwieVwiOiAyMTB9LHtcInhcIjogMTg3LFwieVwiOiAyMTN9LHtcInhcIjogMTg4LFwieVwiOiAyMTV9LHtcInhcIjogMTg2LFwieVwiOiAyMTJ9LHtcInhcIjogMTgzLFwieVwiOiAyMTF9LHtcInhcIjogMTc3LFwieVwiOiAyMDh9LHtcInhcIjogMTY5LFwieVwiOiAyMDZ9LHtcInhcIjogMTYyLFwieVwiOiAyMDV9LHtcInhcIjogMTU0LFwieVwiOiAyMDd9LHtcInhcIjogMTQ1LFwieVwiOiAyMDl9LHtcInhcIjogMTM3LFwieVwiOiAyMTB9LHtcInhcIjogMTI5LFwieVwiOiAyMTR9LHtcInhcIjogMTIyLFwieVwiOiAyMTd9LHtcInhcIjogMTE4LFwieVwiOiAyMTh9LHtcInhcIjogMTExLFwieVwiOiAyMjF9LHtcInhcIjogMTA5LFwieVwiOiAyMjJ9LHtcInhcIjogMTEwLFwieVwiOiAyMTl9LHtcInhcIjogMTEyLFwieVwiOiAyMTd9LHtcInhcIjogMTE4LFwieVwiOiAyMDl9LHtcInhcIjogMTIwLFwieVwiOiAyMDd9LHtcInhcIjogMTI4LFwieVwiOiAxOTZ9LHtcInhcIjogMTM1LFwieVwiOiAxODd9LHtcInhcIjogMTM4LFwieVwiOiAxODN9LHtcInhcIjogMTQ4LFwieVwiOiAxNjd9LHtcInhcIjogMTU3LFwieVwiOiAxNTN9LHtcInhcIjogMTYzLFwieVwiOiAxNDV9LHtcInhcIjogMTY1LFwieVwiOiAxNDJ9LHtcInhcIjogMTcyLFwieVwiOiAxMzN9LHtcInhcIjogMTc3LFwieVwiOiAxMjd9LHtcInhcIjogMTc5LFwieVwiOiAxMjd9LHtcInhcIjogMTgwLFwieVwiOiAxMjV9XSxcbiAgICAgIG5hbWU6IFwib3RoZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgcG9pbnRzOiBbe1wieFwiOiA4MSxcInlcIjogMjE5fSx7XCJ4XCI6IDg0LFwieVwiOiAyMTh9LHtcInhcIjogODYsXCJ5XCI6IDIyMH0se1wieFwiOiA4OCxcInlcIjogMjIwfSx7XCJ4XCI6IDkwLFwieVwiOiAyMjB9LHtcInhcIjogOTIsXCJ5XCI6IDIxOX0se1wieFwiOiA5NSxcInlcIjogMjIwfSx7XCJ4XCI6IDk3LFwieVwiOiAyMTl9LHtcInhcIjogOTksXCJ5XCI6IDIyMH0se1wieFwiOiAxMDIsXCJ5XCI6IDIxOH0se1wieFwiOiAxMDUsXCJ5XCI6IDIxN30se1wieFwiOiAxMDcsXCJ5XCI6IDIxNn0se1wieFwiOiAxMTAsXCJ5XCI6IDIxNn0se1wieFwiOiAxMTMsXCJ5XCI6IDIxNH0se1wieFwiOiAxMTYsXCJ5XCI6IDIxMn0se1wieFwiOiAxMTgsXCJ5XCI6IDIxMH0se1wieFwiOiAxMjEsXCJ5XCI6IDIwOH0se1wieFwiOiAxMjQsXCJ5XCI6IDIwNX0se1wieFwiOiAxMjYsXCJ5XCI6IDIwMn0se1wieFwiOiAxMjksXCJ5XCI6IDE5OX0se1wieFwiOiAxMzIsXCJ5XCI6IDE5Nn0se1wieFwiOiAxMzYsXCJ5XCI6IDE5MX0se1wieFwiOiAxMzksXCJ5XCI6IDE4N30se1wieFwiOiAxNDIsXCJ5XCI6IDE4Mn0se1wieFwiOiAxNDQsXCJ5XCI6IDE3OX0se1wieFwiOiAxNDYsXCJ5XCI6IDE3NH0se1wieFwiOiAxNDgsXCJ5XCI6IDE3MH0se1wieFwiOiAxNDksXCJ5XCI6IDE2OH0se1wieFwiOiAxNTEsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNTIsXCJ5XCI6IDE2MH0se1wieFwiOiAxNTIsXCJ5XCI6IDE1N30se1wieFwiOiAxNTIsXCJ5XCI6IDE1NX0se1wieFwiOiAxNTIsXCJ5XCI6IDE1MX0se1wieFwiOiAxNTIsXCJ5XCI6IDE0OX0se1wieFwiOiAxNTIsXCJ5XCI6IDE0Nn0se1wieFwiOiAxNDksXCJ5XCI6IDE0Mn0se1wieFwiOiAxNDgsXCJ5XCI6IDEzOX0se1wieFwiOiAxNDUsXCJ5XCI6IDEzN30se1wieFwiOiAxNDEsXCJ5XCI6IDEzNX0se1wieFwiOiAxMzksXCJ5XCI6IDEzNX0se1wieFwiOiAxMzQsXCJ5XCI6IDEzNn0se1wieFwiOiAxMzAsXCJ5XCI6IDE0MH0se1wieFwiOiAxMjgsXCJ5XCI6IDE0Mn0se1wieFwiOiAxMjYsXCJ5XCI6IDE0NX0se1wieFwiOiAxMjIsXCJ5XCI6IDE1MH0se1wieFwiOiAxMTksXCJ5XCI6IDE1OH0se1wieFwiOiAxMTcsXCJ5XCI6IDE2M30se1wieFwiOiAxMTUsXCJ5XCI6IDE3MH0se1wieFwiOiAxMTQsXCJ5XCI6IDE3NX0se1wieFwiOiAxMTcsXCJ5XCI6IDE4NH0se1wieFwiOiAxMjAsXCJ5XCI6IDE5MH0se1wieFwiOiAxMjUsXCJ5XCI6IDE5OX0se1wieFwiOiAxMjksXCJ5XCI6IDIwM30se1wieFwiOiAxMzMsXCJ5XCI6IDIwOH0se1wieFwiOiAxMzgsXCJ5XCI6IDIxM30se1wieFwiOiAxNDUsXCJ5XCI6IDIxNX0se1wieFwiOiAxNTUsXCJ5XCI6IDIxOH0se1wieFwiOiAxNjQsXCJ5XCI6IDIxOX0se1wieFwiOiAxNjYsXCJ5XCI6IDIxOX0se1wieFwiOiAxNzcsXCJ5XCI6IDIxOX0se1wieFwiOiAxODIsXCJ5XCI6IDIxOH0se1wieFwiOiAxOTIsXCJ5XCI6IDIxNn0se1wieFwiOiAxOTYsXCJ5XCI6IDIxM30se1wieFwiOiAxOTksXCJ5XCI6IDIxMn0se1wieFwiOiAyMDEsXCJ5XCI6IDIxMX1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgICB7XG4gICAgICBwb2ludHM6IFt7XCJ4XCI6IDc1LFwieVwiOiAyNTB9LHtcInhcIjogNzUsXCJ5XCI6IDI0N30se1wieFwiOiA3NyxcInlcIjogMjQ0fSx7XCJ4XCI6IDc4LFwieVwiOiAyNDJ9LHtcInhcIjogNzksXCJ5XCI6IDIzOX0se1wieFwiOiA4MCxcInlcIjogMjM3fSx7XCJ4XCI6IDgyLFwieVwiOiAyMzR9LHtcInhcIjogODIsXCJ5XCI6IDIzMn0se1wieFwiOiA4NCxcInlcIjogMjI5fSx7XCJ4XCI6IDg1LFwieVwiOiAyMjV9LHtcInhcIjogODcsXCJ5XCI6IDIyMn0se1wieFwiOiA4OCxcInlcIjogMjE5fSx7XCJ4XCI6IDg5LFwieVwiOiAyMTZ9LHtcInhcIjogOTEsXCJ5XCI6IDIxMn0se1wieFwiOiA5MixcInlcIjogMjA4fSx7XCJ4XCI6IDk0LFwieVwiOiAyMDR9LHtcInhcIjogOTUsXCJ5XCI6IDIwMX0se1wieFwiOiA5NixcInlcIjogMTk2fSx7XCJ4XCI6IDk3LFwieVwiOiAxOTR9LHtcInhcIjogOTgsXCJ5XCI6IDE5MX0se1wieFwiOiAxMDAsXCJ5XCI6IDE4NX0se1wieFwiOiAxMDIsXCJ5XCI6IDE3OH0se1wieFwiOiAxMDQsXCJ5XCI6IDE3M30se1wieFwiOiAxMDQsXCJ5XCI6IDE3MX0se1wieFwiOiAxMDUsXCJ5XCI6IDE2NH0se1wieFwiOiAxMDYsXCJ5XCI6IDE1OH0se1wieFwiOiAxMDcsXCJ5XCI6IDE1Nn0se1wieFwiOiAxMDcsXCJ5XCI6IDE1Mn0se1wieFwiOiAxMDgsXCJ5XCI6IDE0NX0se1wieFwiOiAxMDksXCJ5XCI6IDE0MX0se1wieFwiOiAxMTAsXCJ5XCI6IDEzOX0se1wieFwiOiAxMTIsXCJ5XCI6IDEzM30se1wieFwiOiAxMTMsXCJ5XCI6IDEzMX0se1wieFwiOiAxMTYsXCJ5XCI6IDEyN30se1wieFwiOiAxMTcsXCJ5XCI6IDEyNX0se1wieFwiOiAxMTksXCJ5XCI6IDEyMn0se1wieFwiOiAxMjEsXCJ5XCI6IDEyMX0se1wieFwiOiAxMjMsXCJ5XCI6IDEyMH0se1wieFwiOiAxMjUsXCJ5XCI6IDEyMn0se1wieFwiOiAxMjUsXCJ5XCI6IDEyNX0se1wieFwiOiAxMjcsXCJ5XCI6IDEzMH0se1wieFwiOiAxMjgsXCJ5XCI6IDEzM30se1wieFwiOiAxMzEsXCJ5XCI6IDE0M30se1wieFwiOiAxMzYsXCJ5XCI6IDE1M30se1wieFwiOiAxNDAsXCJ5XCI6IDE2M30se1wieFwiOiAxNDQsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNDUsXCJ5XCI6IDE3NX0se1wieFwiOiAxNTEsXCJ5XCI6IDE4OX0se1wieFwiOiAxNTYsXCJ5XCI6IDIwMX0se1wieFwiOiAxNjEsXCJ5XCI6IDIxM30se1wieFwiOiAxNjYsXCJ5XCI6IDIyNX0se1wieFwiOiAxNjksXCJ5XCI6IDIzM30se1wieFwiOiAxNzEsXCJ5XCI6IDIzNn0se1wieFwiOiAxNzQsXCJ5XCI6IDI0M30se1wieFwiOiAxNzcsXCJ5XCI6IDI0N30se1wieFwiOiAxNzgsXCJ5XCI6IDI0OX0se1wieFwiOiAxNzksXCJ5XCI6IDI1MX0se1wieFwiOiAxODAsXCJ5XCI6IDI1M30se1wieFwiOiAxODAsXCJ5XCI6IDI1NX0se1wieFwiOiAxNzksXCJ5XCI6IDI1N30se1wieFwiOiAxNzcsXCJ5XCI6IDI1N30se1wieFwiOiAxNzQsXCJ5XCI6IDI1NX0se1wieFwiOiAxNjksXCJ5XCI6IDI1MH0se1wieFwiOiAxNjQsXCJ5XCI6IDI0N30se1wieFwiOiAxNjAsXCJ5XCI6IDI0NX0se1wieFwiOiAxNDksXCJ5XCI6IDIzOH0se1wieFwiOiAxMzgsXCJ5XCI6IDIzMH0se1wieFwiOiAxMjcsXCJ5XCI6IDIyMX0se1wieFwiOiAxMjQsXCJ5XCI6IDIyMH0se1wieFwiOiAxMTIsXCJ5XCI6IDIxMn0se1wieFwiOiAxMTAsXCJ5XCI6IDIxMH0se1wieFwiOiA5NixcInlcIjogMjAxfSx7XCJ4XCI6IDg0LFwieVwiOiAxOTV9LHtcInhcIjogNzQsXCJ5XCI6IDE5MH0se1wieFwiOiA2NCxcInlcIjogMTgyfSx7XCJ4XCI6IDU1LFwieVwiOiAxNzV9LHtcInhcIjogNTEsXCJ5XCI6IDE3Mn0se1wieFwiOiA0OSxcInlcIjogMTcwfSx7XCJ4XCI6IDUxLFwieVwiOiAxNjl9LHtcInhcIjogNTYsXCJ5XCI6IDE2OX0se1wieFwiOiA2NixcInlcIjogMTY5fSx7XCJ4XCI6IDc4LFwieVwiOiAxNjh9LHtcInhcIjogOTIsXCJ5XCI6IDE2Nn0se1wieFwiOiAxMDcsXCJ5XCI6IDE2NH0se1wieFwiOiAxMjMsXCJ5XCI6IDE2MX0se1wieFwiOiAxNDAsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNTYsXCJ5XCI6IDE2Mn0se1wieFwiOiAxNzEsXCJ5XCI6IDE2MH0se1wieFwiOiAxNzMsXCJ5XCI6IDE2MH0se1wieFwiOiAxODYsXCJ5XCI6IDE2MH0se1wieFwiOiAxOTUsXCJ5XCI6IDE2MH0se1wieFwiOiAxOTgsXCJ5XCI6IDE2MX0se1wieFwiOiAyMDMsXCJ5XCI6IDE2M30se1wieFwiOiAyMDgsXCJ5XCI6IDE2M30se1wieFwiOiAyMDYsXCJ5XCI6IDE2NH0se1wieFwiOiAyMDAsXCJ5XCI6IDE2N30se1wieFwiOiAxODcsXCJ5XCI6IDE3Mn0se1wieFwiOiAxNzQsXCJ5XCI6IDE3OX0se1wieFwiOiAxNzIsXCJ5XCI6IDE4MX0se1wieFwiOiAxNTMsXCJ5XCI6IDE5Mn0se1wieFwiOiAxMzcsXCJ5XCI6IDIwMX0se1wieFwiOiAxMjMsXCJ5XCI6IDIxMX0se1wieFwiOiAxMTIsXCJ5XCI6IDIyMH0se1wieFwiOiA5OSxcInlcIjogMjI5fSx7XCJ4XCI6IDkwLFwieVwiOiAyMzd9LHtcInhcIjogODAsXCJ5XCI6IDI0NH0se1wieFwiOiA3MyxcInlcIjogMjUwfSx7XCJ4XCI6IDY5LFwieVwiOiAyNTR9LHtcInhcIjogNjksXCJ5XCI6IDI1Mn1dLFxuICAgICAgbmFtZTogXCJvdGhlclwiXG4gICAgfSxcbiAgXTtcblxuICBTaGFwZURldGVjdG9yLnByb3RvdHlwZS5zcG90ID0gZnVuY3Rpb24ocG9pbnRzLCBwYXR0ZXJuTmFtZSkge1xuXG4gICAgaWYgKHBhdHRlcm5OYW1lID09IG51bGwpIHtcbiAgICAgIHBhdHRlcm5OYW1lID0gJyc7XG4gICAgfVxuXG4gICAgdmFyIGRpc3RhbmNlLCBwYXR0ZXJuLCBzY29yZTtcbiAgICB2YXIgc3Ryb2tlID0gbmV3IFN0cm9rZShwb2ludHMpO1xuICAgIHZhciBiZXN0RGlzdGFuY2UgPSArSW5maW5pdHk7XG4gICAgdmFyIGJlc3RQYXR0ZXJuID0gbnVsbDtcbiAgICB2YXIgYmVzdFNjb3JlID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXR0ZXJucy5sZW5ndGg7IGkrKykge1xuICAgICAgcGF0dGVybiA9IHRoaXMucGF0dGVybnNbaV07XG5cbiAgICAgIGlmIChwYXR0ZXJuLm5hbWUuaW5kZXhPZihwYXR0ZXJuTmFtZSkgPiAtMSkge1xuICAgICAgICBkaXN0YW5jZSA9IHN0cm9rZS5kaXN0YW5jZUF0QmVzdEFuZ2xlKHBhdHRlcm4pO1xuICAgICAgICBzY29yZSA9IDEuMCAtIGRpc3RhbmNlIC8gX2hhbGZEaWFnb25hbDtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBiZXN0RGlzdGFuY2UgJiYgc2NvcmUgPiB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAgIGJlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgIGJlc3RQYXR0ZXJuID0gcGF0dGVybi5uYW1lO1xuICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdHRlcm46IGJlc3RQYXR0ZXJuLFxuICAgICAgc2NvcmU6IGJlc3RTY29yZVxuICAgIH07XG4gIH07XG5cbiAgU2hhcGVEZXRlY3Rvci5wcm90b3R5cGUubGVhcm4gPSBmdW5jdGlvbihuYW1lLCBwb2ludHMpIHtcblxuICAgIHJldHVybiB0aGlzLnBhdHRlcm5zLnB1c2gobmV3IFN0cm9rZShwb2ludHMsIG5hbWUpKTtcbiAgfTtcblxuICByZXR1cm4gU2hhcGVEZXRlY3Rvcjtcbn0pKTtcbiIsImNvbnN0IHRvdWNoID0gcmVxdWlyZSgnLi90b3VjaCcpO1xuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHZpZGVvID0gcmVxdWlyZSgnLi92aWRlbycpO1xuY29uc3QgdGltaW5nID0gcmVxdWlyZSgnLi90aW1pbmcnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldFdpbmRvdygpIHtcbiAgd2luZG93LmthbiA9IHtcbiAgICBjdXJyZW50Q29sb3I6ICcjMkI1RTJFJyxcbiAgICBjb21wb3NpdGlvbjogW10sXG4gICAgY29tcG9zaXRpb25JbnRlcnZhbDogbnVsbCxcbiAgICBjb21wb3NpdGlvblRpbWVvdXQ6IG51bGwsXG4gICAgc291bmRUaW1lb3V0czogW10sXG4gICAgbGFzdEV2ZW50OiBudWxsLFxuICAgIGludGVyYWN0aW9uOiBmYWxzZSxcbiAgICBtb3ZlczogW10sXG4gICAgcGxheWluZzogZmFsc2UsXG4gICAgcGluY2hpbmc6IGZhbHNlLFxuICAgIHBpbmNoZWRHcm91cDogbnVsbCxcbiAgICBwaW5jaGVkVHV0OiBudWxsLFxuICAgIHBhdGhEYXRhOiB7fSxcbiAgICBzaGFwZVBhdGg6IG51bGwsXG4gICAgcHJldkFuZ2xlOiBudWxsLFxuICAgIHNpZGVzOiBbXSxcbiAgICBzaWRlOiBbXSxcbiAgICBjb3JuZXJzOiBbXSxcbiAgICBsYXN0U2NhbGU6IDEsXG4gICAgbGFzdFJvdGF0aW9uOiAwLFxuICAgIG9yaWdpbmFsUG9zaXRpb246IG51bGwsXG4gICAgdHV0b3JpYWxDb21wbGV0aW9uOiB7XG4gICAgICBcImZpbGxcIjogZmFsc2UsXG4gICAgICBcInBpbmNoXCI6IGZhbHNlLFxuICAgICAgXCJzd2lwZVwiOiBmYWxzZVxuICAgIH0sXG4gICAgaW5hY3Rpdml0eVRpbWVvdXQ6IG51bGwsXG4gICAgcGxheVByb21wdFRpbWVvdXQ6IG51bGwsXG4gICAgdXNlckhhc0RyYXduRmlyc3RTaGFwZTogZmFsc2UsXG4gICAgZmlyc3RUaW1lUGxheWluZzogdHJ1ZSxcbiAgICBzaGFwZXNTaW5jZVR1dDogMCxcbiAgICByZWZyZXNoQ2hlY2tJbnRlcnZhbDogbnVsbCxcbiAgICBzaGE6IG51bGwsXG4gICAgc2NoZWR1bGVkT3ZlcmxheTogbnVsbCxcbiAgICBjb250aW51ZUNvdW50ZG93bkludGVydmFsOiBudWxsLFxuICAgIHNoYXBlU291bmRzOiBudWxsLFxuICB9O1xufVxuXG4kKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gcnVuKCkge1xuICAgIHJlc2V0V2luZG93KCk7XG4gICAgdXRpbC5zZXRTaGEoKTtcbiAgICB1aS5pbml0KCk7XG4gICAgb3ZlcmxheXMuaW5pdCgpO1xuICAgIHRpbWluZy5pbml0KCk7XG4gICAgc2hhcGUuaW5pdCgpO1xuICAgIHNvdW5kLmluaXQoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBzb3VuZC5pbml0KCkgaXMgYXN5bmMgYmVjYXVzZSBpdCBsb2FkcyBpbiB0aGUgc291bmQgZmlsZXNcbiAgICAgICAgdG91Y2guaW5pdCgpO1xuICAgICAgfSlcbiAgICAgIC5mYWlsKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGluaXR0aW5nIHNoYXBlIHNvdW5kczonLCBlKTtcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBydW4oKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIHdhaXQgNSBzZWNvbmRzIHRoZW4gcmVsb2FkXG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9LCA1ICogMTAwMCk7XG4gIH1cbn0pO1xuIiwiY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuY29uc3QgdG91Y2ggPSByZXF1aXJlKCcuL3RvdWNoJyk7XG5jb25zdCB2aWRlbyA9IHJlcXVpcmUoJy4vdmlkZW8nKTtcbmNvbnN0IHRpbWluZyA9IHJlcXVpcmUoJy4vdGltaW5nJyk7XG5jb25zdCB0dXRvcmlhbCA9IHJlcXVpcmUoJy4vdHV0b3JpYWwnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuY29uc3QgaGFtbWVyQ2FudmFzID0gdG91Y2guaGFtbWVyQ2FudmFzO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbmNvbnN0IHRhcEV2ZW50ID0gJ2NsaWNrIHRhcCB0b3VjaCc7XG5cbmNvbnN0ICRjYXJkc1dyYXAgPSAkYm9keS5maW5kKCcub3ZlcmxheS50aXBzIC5jYXJkLXdyYXAnKTtcbmNvbnN0ICRjYXJkSXRlbXMgPSAkY2FyZHNXcmFwLmZpbmQoJ2FydGljbGUnKTtcbmNvbnN0IGNhcmRzQ291bnQgPSAkY2FyZEl0ZW1zLmxlbmd0aDtcbmNvbnN0ICRmb290ZXIgPSAkYm9keS5maW5kKCcub3ZlcmxheS50aXBzIC5mb290ZXInKTtcblxuY29uc3QgJHNoYXJlUGhvbmUgPSAkYm9keS5maW5kKCcjcGhvbmUnKTtcbmNvbnN0ICRzaGFyZUtleXBhZCA9ICRib2R5LmZpbmQoJy5rZXlwYWQnKTtcblxuY29uc3QgYWxsT3ZlcmxheXMgPSBbJ2ludHJvJywgJ3BsYXktcHJvbXB0JywgJ3NoYXJlLXByb21wdCcsICdjb250aW51ZScsICd0aXBzJywgJ3NoYXJlJ107XG5jb25zdCBvdmVybGF5T3BlbkNsYXNzZXMgPSBhbGxPdmVybGF5cy5tYXAoKG92ZXJsYXkpID0+IGAke292ZXJsYXl9LWFjdGl2ZWApLmpvaW4oJyAnKTtcblxuY29uc3Qgb3ZlcmxheUFjdGl2ZUNsYXNzID0gJ292ZXJsYXktYWN0aXZlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5PdmVybGF5KG92ZXJsYXlOYW1lKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdhdHRlbXB0aW5nIHRvIG9wZW4gb3ZlcmxheScsIG92ZXJsYXlOYW1lKTtcbiAgaWYgKHdpbmRvdy5rYW4ub3ZlcmxheXMgPT09IGZhbHNlKSByZXR1cm47XG4gIGlmIChhbGxPdmVybGF5cy5pbmNsdWRlcyhvdmVybGF5TmFtZSkpIHtcbiAgICBpZiAod2luZG93Lmthbi5waW5jaGluZyA9PT0gdHJ1ZSB8fCB3aW5kb3cua2FuLnBhbm5pbmcgPT09IHRydWUpIHtcbiAgICAgIGlmIChvdmVybGF5TmFtZSA9PT0gJ2NvbnRpbnVlJykge1xuICAgICAgICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2NoZWR1bGluZyBvdmVybGF5Jywgb3ZlcmxheU5hbWUpO1xuICAgICAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBvdmVybGF5TmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2xvc2VBbmRSZXNldE92ZXJsYXlzKCk7XG4gICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gICAgJGJvZHkuYWRkQ2xhc3Mob3ZlcmxheUFjdGl2ZUNsYXNzKTtcbiAgICAkYm9keS5maW5kKCcub3ZlcmxheTpub3QoLnRpcHMpJykub24odGFwRXZlbnQsICgpID0+IHtcbiAgICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIH0pO1xuXG4gICAgc3dpdGNoIChvdmVybGF5TmFtZSkge1xuICAgICAgY2FzZSAnaW50cm8nOlxuICAgICAgICBvcGVuSW50cm9PdmVybGF5KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheS1wcm9tcHQnOlxuICAgICAgICBpZiAodXRpbC5hbnlTaGFwZXNPbkNhbnZhcygpKSB7XG4gICAgICAgICAgb3BlblBsYXlQcm9tcHRPdmVybGF5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgb3Blbk92ZXJsYXkoJ3BsYXktcHJvbXB0Jyk7XG4gICAgICAgICAgfSwgdGltaW5nLnBsYXlQcm9tcHREZWxheSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2hhcmUtcHJvbXB0JzpcbiAgICAgICAgb3BlblNoYXJlUHJvbXB0T3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvbnRpbnVlJzpcbiAgICAgICAgb3BlbkNvbnRpbnVlT3ZlcmxheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpcHMnOlxuICAgICAgICBvcGVuVGlwc092ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzaGFyZSc6XG4gICAgICAgIG9wZW5TaGFyZU92ZXJsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKCd1bmFibGUgdG8gb3BlbiB1bmtub3duIG92ZXJsYXknLCBvdmVybGF5TmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlbkludHJvT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ2ludHJvLWFjdGl2ZScpO1xufVxuXG5mdW5jdGlvbiBvcGVuUGxheVByb21wdE92ZXJsYXkoKSB7XG4gICRib2R5LmFkZENsYXNzKCdwbGF5LXByb21wdC1hY3RpdmUnKTtcbn1cblxuZnVuY3Rpb24gb3BlblNoYXJlUHJvbXB0T3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3NoYXJlLXByb21wdC1hY3RpdmUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29udGludWVDb3VudGRvd24oKSB7XG4gICQoJy5vdmVybGF5LmNvbnRpbnVlIC5jb3VudGRvd24tbnVtJykuaHRtbChwYXJzZUludCh0aW1pbmcuY29udGludWVJbmFjdGl2aXR5RGVsYXkgLyAxMDAwKSk7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcbn1cblxuZnVuY3Rpb24gb3BlbkNvbnRpbnVlT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ2NvbnRpbnVlLWFjdGl2ZScpO1xuXG4gIHJlc2V0Q29udGludWVDb3VudGRvd24oKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCk7XG5cbiAgd2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGxldCAkY291bnRkb3duTnVtV3JhcCA9ICQoJy5vdmVybGF5LmNvbnRpbnVlIC5jb3VudGRvd24tbnVtJyk7XG4gICAgbGV0IGNvdW50ID0gcGFyc2VJbnQoJGNvdW50ZG93bk51bVdyYXAuaHRtbCgpKTtcbiAgICBpZiAoY291bnQgPiAxKSB7XG4gICAgICAkY291bnRkb3duTnVtV3JhcC5odG1sKGNvdW50IC0gMSk7XG4gICAgfVxuICB9LCAxMDAwKTtcblxuICB3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdmlkZW8uZW50ZXJUdXRvcmlhbE1vZGUoKTtcbiAgfSwgdGltaW5nLmNvbnRpbnVlSW5hY3Rpdml0eURlbGF5KTtcbn1cblxuZnVuY3Rpb24gb3BlblRpcHNPdmVybGF5KCkge1xuICAkYm9keS5hZGRDbGFzcygndGlwcy1hY3RpdmUnKTtcbiAgYWN0aXZhdGVUaXBzQ2FyZHMoKTtcbn1cblxuZnVuY3Rpb24gb3BlblNoYXJlT3ZlcmxheSgpIHtcbiAgJGJvZHkuYWRkQ2xhc3MoJ3NoYXJlLWFjdGl2ZScpO1xufVxuXG5cbi8vIGNhcmQgc2xpZGVyIG5hdmlnYXRpb25cbmV4cG9ydCBmdW5jdGlvbiBjYXJkTmF2TmV4dCgpIHtcbiAgbGV0ICRvbGQgPSAkYm9keS5maW5kKCcuY2FyZC13cmFwIC5jdXJyZW50Jyk7XG4gIGxldCAkbmV3ID0gKCRvbGQubmV4dCgpLmxlbmd0aCkgPyAkb2xkLm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKTtcbiAgbGV0ICRuZXh0ID0gKCRuZXcubmV4dCgpLmxlbmd0aCkgPyAkbmV3Lm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKTtcbiAgbGV0ICR0aGlyZCA9ICgkbmV4dC5uZXh0KCkubGVuZ3RoKSA/ICRuZXh0Lm5leHQoKSA6ICRjYXJkSXRlbXMuZmlyc3QoKS5uZXh0KCk7XG4gIGxldCBzbGlkZSA9ICRuZXcuaW5kZXgoKTtcbiAgJG9sZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdyZW1vdmUnKTtcbiAgJG5ldy5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICRuZXh0LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ25leHQnKTtcbiAgJHRoaXJkLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ3RoaXJkJyk7XG4gIHVwZGF0ZUNhcmRDb3VudGVyKHNsaWRlICsgMSwgY2FyZHNDb3VudCk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICRvbGQucmVtb3ZlQ2xhc3MoKTtcbiAgfSwgNjAwKTtcbn1cblxuLy8gdGlwcyBjYXJkIGludGVyYWN0aW9uc1xuZnVuY3Rpb24gY2FyZEludGVyYWN0aW9ucygpIHtcbiAgbGV0IHRpbWVPZkxhc3RJbnRlcmFjdGlvbiA9IDA7XG5cbiAgJGJvZHkuZmluZCgnLm92ZXJsYXknKS5vbih0YXBFdmVudCwgZSA9PiB7XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aW1lT2ZMYXN0SW50ZXJhY3Rpb24gPiAoY3VycmVudFRpbWUgLSAyNTApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRpbWVPZkxhc3RJbnRlcmFjdGlvbiA9IGN1cnJlbnRUaW1lO1xuXG4gICAgaWYgKCAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2FyZC13cmFwJykubGVuZ3RoID09IDEgKSB7XG4gICAgICAvLyBkaXJlY3RseSBvbiBhIGNhcmQsIG5hdmlnYXRlIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgY2FyZE5hdk5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3V0c2lkZSBlbGVtZW50cywgY2xvc2UgZXZlcnl0aGluZyBhbmQgcmVzZXRcbiAgICAgIGNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlc2V0VGlwcygpIHtcbiAgJGNhcmRJdGVtcy5yZW1vdmVDbGFzcygpO1xuICAkc2hhcmVQaG9uZS5odG1sKCcnKTtcbn1cblxuLy8gY2xvc2UgYW5kIHJlc2V0IHRpcHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZUFuZFJlc2V0T3ZlcmxheXMoKSB7XG4gICRib2R5LnJlbW92ZUNsYXNzKCdvdmVybGF5LWFjdGl2ZScpO1xuICAkYm9keS5yZW1vdmVDbGFzcyhvdmVybGF5T3BlbkNsYXNzZXMpO1xuICByZXNldFRpcHMoKTtcbn1cblxuLy8gZGVhbCBhIGZyZXNoIHN0YWNrIG9mIGNhcmRzXG5mdW5jdGlvbiBhY3RpdmF0ZVRpcHNDYXJkcygpIHtcbiAgbGV0ICRuZXcgPSAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkbmV4dCA9ICgkbmV3Lm5leHQoKS5sZW5ndGgpID8gJG5ldy5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCk7XG4gIGxldCAkdGhpcmQgPSAoJG5leHQubmV4dCgpLmxlbmd0aCkgPyAkbmV4dC5uZXh0KCkgOiAkY2FyZEl0ZW1zLmZpcnN0KCkubmV4dCgpO1xuICAkY2FyZEl0ZW1zLnJlbW92ZUNsYXNzKCk7XG4gICRuZXcucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnY3VycmVudCcpO1xuICAkbmV4dC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCduZXh0Jyk7XG4gICR0aGlyZC5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCd0aGlyZCcpO1xuICB1cGRhdGVDYXJkQ291bnRlcigxLCBjYXJkc0NvdW50KTtcbn1cblxuLy8gY291bnRpbmcgY2FyZHNcbmZ1bmN0aW9uIHVwZGF0ZUNhcmRDb3VudGVyKGN1cnJlbnQsIHRvdGFsKSB7XG4gICRmb290ZXIuZmluZCgnLmN1cnJlbnQnKS5odG1sKGN1cnJlbnQpO1xuICAkZm9vdGVyLmZpbmQoJy5uZXh0JykuaHRtbCh0b3RhbCk7XG59XG5cbi8vIHBob25lIGlucHV0c1xuZnVuY3Rpb24gcGhvbmVOdW1iZXJJbnB1dHMoKSB7XG4gIC8vIG1hc2sgdGhlIG91dHB1dFxuICAkc2hhcmVQaG9uZS5tYXNrKCcwMDAtMDAwLTAwMDAnKTtcbiAgLy8gZ2V0IGludGVyYWN0aW9ucyBmcm9tIHRoZSBrZXlwYWRcbiAgJHNoYXJlS2V5cGFkLmZpbmQoJy5udW0nKS5vbih0YXBFdmVudCwgZSA9PiB7XG4gICAgbGV0IHBob25lTnVtYmVyID0gJHNoYXJlUGhvbmUuaHRtbCgpLnRvU3RyaW5nKCkgKyAkKGUudGFyZ2V0KS5odG1sKCkudG9TdHJpbmcoKTtcbiAgICBwaG9uZU51bWJlciA9ICRzaGFyZVBob25lLm1hc2tlZChwaG9uZU51bWJlcik7XG4gICAgJHNoYXJlUGhvbmUuaHRtbChwaG9uZU51bWJlcik7XG4gIH0pO1xuICAvLyBjbGVhciB0aGUgZGlzcGxheVxuICAkc2hhcmVLZXlwYWQuZmluZCgnLmNsZWFyJykub24odGFwRXZlbnQsIGUgPT4ge1xuICAgICRzaGFyZVBob25lLmh0bWwoJycpO1xuICB9KTtcbiAgLy8gRklYTUU6IHNlbmQgc21zXG4gIC8vICRzaGFyZUtleXBhZC5maW5kKCcuc2VuZCcpLm9uKHRhcEV2ZW50LCBlID0+IHt9KTtcbn1cblxuLy8gXCJyYW5kb21seVwiIHBsYWNlIGZpZGRseSBiaXRzIG9uIHRoZSBjYXJkc1xuZnVuY3Rpb24gcmFuZG9tQ2FyZEdyYXBoaWNzKCkge1xuICAkYm9keS5maW5kKCcuY2FyZC13cmFwIGFydGljbGUnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICQoZWwpLmF0dHIoJ2RhdGEtYmcnLCBpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRUaXBzKCkge1xuICBjYXJkSW50ZXJhY3Rpb25zKCk7XG59XG5cbmZ1bmN0aW9uIGluaXRTaGFyZSgpIHtcbiAgcGhvbmVOdW1iZXJJbnB1dHMoKTtcbiAgcmFuZG9tQ2FyZEdyYXBoaWNzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBpbml0VGlwcygpO1xuICBpbml0U2hhcmUoKTtcbn1cbiIsImNvbnN0IFNoYXBlRGV0ZWN0b3IgPSByZXF1aXJlKCcuL2xpYi9zaGFwZS1kZXRlY3RvcicpO1xuXG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcblxuZXhwb3J0IGxldCBrZWVwYWxpdmVTaGFwZTtcblxuZXhwb3J0IGNvbnN0IGNvcm5lclRocmVzaG9sZERlZyA9IDMwO1xuZXhwb3J0IGNvbnN0IHRocmVzaG9sZERpc3RNdWx0aXBsaWVyID0gMC4xO1xuXG5leHBvcnQgY29uc3QgZGV0ZWN0b3IgPSBuZXcgU2hhcGVEZXRlY3RvcihTaGFwZURldGVjdG9yLmRlZmF1bHRTaGFwZXMpO1xuXG5leHBvcnQgY29uc3Qgc2hhcGVOYW1lcyA9IFtcImxpbmVcIiwgXCJjaXJjbGVcIiwgXCJzcXVhcmVcIiwgXCJ0cmlhbmdsZVwiLCBcIm90aGVyXCJdO1xuXG5mdW5jdGlvbiBjbGVhclBvcHMoKSB7XG4gIGNvbnN0IHBvcHMgPSB1dGlsLmdldEFsbFBvcHMoKTtcbiAgcG9wcy5mb3JFYWNoKChwb3ApID0+IHBvcC5yZW1vdmUoKSk7XG59XG5cbmxldCBrZWVwYWxpdmVJbnRlcnZhbCA9IG51bGw7XG5cbi8vIHRoZSBjYW52YXMgcmVjb3JkZXIgYXV0b21hdGljYWxseSB0cmltcyAnc3RpbGwnIGZyYW1lcywgc28gSSBhZGQgYSBzZW1pdHJhbnNwYXJlbnQgMXB4IHNxdWFyZSB0byB0cmljayB0aGUgcmVjb3JkZXIgaW50byByZWNvcmRpbmcgOilcbmZ1bmN0aW9uIGluaXRLZWVwYWxpdmVTaGFwZSgpIHtcbiAga2VlcGFsaXZlU2hhcGUgPSBQYXRoLlJlY3RhbmdsZSh7XG4gICBwb2ludDogWzEsIDFdLFxuICAgc2l6ZTogWzEsIDFdLFxuICAgc3Ryb2tlQ29sb3I6IG5ldyBDb2xvcigwLCAwLjAwMSksXG4gICB2aXNpYmxlOiBmYWxzZSxcbiAgIG5hbWU6ICdrZWVwYWxpdmUnXG4gfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydEtlZXBhbGl2ZUFuaW1hdGlvbigpIHtcbiAga2VlcGFsaXZlU2hhcGUudmlzaWJsZSA9IHRydWU7XG4gIGtlZXBhbGl2ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGtlZXBhbGl2ZVNoYXBlLnJvdGF0aW9uICs9IDU7XG4gIH0sIDQwKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wS2VlcGFsaXZlQW5pbWF0aW9uKCkge1xuICBrZWVwYWxpdmVTaGFwZS52aXNpYmxlID0gZmFsc2U7XG4gIGNsZWFySW50ZXJ2YWwoa2VlcGFsaXZlSW50ZXJ2YWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveUdyb3VwUG9wcyhncm91cCkge1xuICAvLyBjb25zb2xlLmxvZygnZGVzdHJveWluZyBwb3BzJyk7XG4gIGNvbnN0IGdyb3VwUG9wc0JlZm9yZSA9IHV0aWwuZ2V0R3JvdXBQb3BzKGdyb3VwKTtcbiAgLy8gY29uc29sZS5sb2coJ3BvcHMgdG8gYmUgZGVzdHJveWVkJywgZ3JvdXBQb3BzQmVmb3JlKTtcbiAgaWYgKGdyb3VwUG9wc0JlZm9yZS5sZW5ndGggPiAwKSB7XG4gICAgZ3JvdXBQb3BzQmVmb3JlLmZvckVhY2goKHBvcCkgPT4gcG9wLnJlbW92ZSgpKTtcbiAgfVxuICBjb25zdCBncm91cFBvcHNBZnRlciA9IHV0aWwuZ2V0R3JvdXBQb3BzKGdyb3VwKTtcbiAgLy8gY29uc29sZS5sb2coJ2dyb3VwIHBvcHMgYWZ0ZXInLCBncm91cFBvcHNBZnRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxsSW5Hcm91cFBvcHNCeUlkKGdyb3VwSWQpIHtcbiAgY29uc3QgZ3JvdXAgPSBwYXBlci5wcm9qZWN0LmdldEl0ZW0oe1xuICAgIGNsYXNzTmFtZTogJ0dyb3VwJyxcbiAgICBtYXRjaDogKGVsKSA9PiBlbC5pZCA9PT0gZ3JvdXBJZFxuICB9KTtcblxuICBpZiAoISFncm91cCAmJiBncm91cC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgZ3JvdXAuY2hpbGRyZW4uZm9yRWFjaCgoZ3JvdXBDaGlsZCkgPT4ge1xuICAgICAgaWYgKGdyb3VwQ2hpbGQubmFtZSA9PT0gJ2xvb3AnKSB7XG4gICAgICAgIHRvZ2dsZUZpbGwoZ3JvdXBDaGlsZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUZpbGwoaXRlbSkge1xuICBjb25zdCB0cmFuc3BhcmVudCA9IGNvbG9yLnRyYW5zcGFyZW50O1xuICAvLyBjb25zb2xlLmxvZygnaGl0Jyk7XG4gIGxldCBwYXJlbnQgPSBpdGVtLnBhcmVudDtcblxuICAvLyBjb25zb2xlLmxvZygnaGl0IGl0ZW0nLCBpdGVtKTtcbiAgLy8gY29uc29sZS5sb2coJ2hpdCBwYXJlbnQnLCBwYXJlbnQpO1xuXG4gIGlmIChpdGVtLmRhdGEuaW50ZXJpb3IpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnaW50ZXJpb3InKTtcbiAgICBpdGVtLmRhdGEudHJhbnNwYXJlbnQgPSAhaXRlbS5kYXRhLnRyYW5zcGFyZW50O1xuXG4gICAgaWYgKGl0ZW0uZGF0YS50cmFuc3BhcmVudCkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RyYW5zcGFyZW50Jyk7XG4gICAgICBpdGVtLmZpbGxDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgaXRlbS5zdHJva2VDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnbm90IHRyYW5zcGFyZW50Jyk7XG4gICAgICBpdGVtLmZpbGxDb2xvciA9IHBhcmVudC5kYXRhLmNvbG9yO1xuICAgICAgaXRlbS5zdHJva2VDb2xvciA9IHBhcmVudC5kYXRhLmNvbG9yO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4ubW92ZXMucHVzaCh7XG4gICAgICB0eXBlOiAnZmlsbENoYW5nZScsXG4gICAgICBpZDogaXRlbS5pZCxcbiAgICAgIGZpbGw6IHBhcmVudC5kYXRhLmNvbG9yLFxuICAgICAgdHJhbnNwYXJlbnQ6IGl0ZW0uZGF0YS50cmFuc3BhcmVudFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKCdub3QgaW50ZXJpb3InKTtcbiAgICAvLyBjaGVjayBpZiBpdGVtIGlzIGEgcG9wLCBiZWNhdXNlIHRoZW4gd2UnbGwgZmlsbCB0aGUgcG9wJ3MgcGFyZW50XG4gICAgaWYgKCEhaXRlbS5kYXRhICYmIGl0ZW0uZGF0YS5wb3AgPT09IHRydWUpIHtcbiAgICAgIGlmICghIWl0ZW0ucGFyZW50KSB7XG4gICAgICAgIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgICAgICAgZmlsbEluR3JvdXBQb3BzQnlJZChpdGVtLnBhcmVudC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuVXBHcm91cChncm91cCkge1xuICAvLyBjb25zb2xlLmxvZygnY2xlYW5pbmcgdXAgZ3JvdXAnKTtcbiAgY29uc3QgYWNjZXB0YWJsZU5hbWVzID0gWydtYXNrJywgJ291dGVyJywgJ3NoYXBlUGF0aCcsICdsb29wJywgJ3BvcCddO1xuXG4gIGdyb3VwLmNoaWxkcmVuLmZvckVhY2goKGdyb3VwQ2hpbGQpID0+IHtcbiAgICBpZiAoZ3JvdXBDaGlsZC5uYW1lID09PSBudWxsIHx8ICFhY2NlcHRhYmxlTmFtZXMuaW5jbHVkZXMoZ3JvdXBDaGlsZC5uYW1lKSB8fCAhZ3JvdXBDaGlsZC5sZW5ndGggPiAwKSB7XG4gICAgICBncm91cENoaWxkLnJlbW92ZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGdyb3VwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUG9wcygpIHtcbiAgY29uc3QgZnJlc2hHcm91cHMgPSB1dGlsLmdldEZyZXNoR3JvdXBzKCk7XG4gIGNvbnN0IHBvcENhbmRpZGF0ZXMgPSB1dGlsLmdldFBvcENhbmRpZGF0ZXMoKTtcbiAgY29uc3QgYWxsUG9wcyA9IHV0aWwuZ2V0QWxsUG9wcygpO1xuICBwb3BDYW5kaWRhdGVzLnJldmVyc2UoKTtcbiAgLy8gY29uc29sZS5sb2coJ2ZyZXNoR3JvdXBzJywgZnJlc2hHcm91cHMpO1xuICAvLyBjb25zb2xlLmxvZygncG9wQ2FuZGlkYXRlcycsIHBvcENhbmRpZGF0ZXMpO1xuICAvLyBjbGVhclBvcHMoKTtcblxuICBmcmVzaEdyb3Vwcy5mb3JFYWNoKChmcmVzaEdyb3VwLCBpKSA9PiB7XG4gICAgLy8gaWYgKGkgPj0gNCkgcmV0dXJuO1xuICAgIC8vIGNvbnNvbGUubG9nKCdmcmVzaEdyb3VwJywgZnJlc2hHcm91cCk7XG5cbiAgICBjb25zdCBmcmVzaE91dGVyID0gZnJlc2hHcm91cC5fbmFtZWRDaGlsZHJlbi5tYXNrWzBdO1xuICAgIGZyZXNoT3V0ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgLy8gZnJlc2hPdXRlci52aXNpYmxlID0gdHJ1ZTtcbiAgICAvLyBmcmVzaE91dGVyLmZpbGxDb2xvciA9ICdibGFjayc7XG4gICAgLy8gZnJlc2hPdXRlci5zZWxlY3RlZCA9IHRydWU7XG4gICAgLy8gY29uc29sZS5sb2coJ2ZyZXNoT3V0ZXInLCBmcmVzaE91dGVyKTtcbiAgICAvLyBmcmVzaE91dGVyLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICBwb3BDYW5kaWRhdGVzLmZvckVhY2goKG90aGVyR3JvdXAsIGopID0+IHtcbiAgICAgIGNvbnN0IG90aGVyR3JvdXBPdXRlciA9IG90aGVyR3JvdXAuX25hbWVkQ2hpbGRyZW4ubWFza1swXTtcbiAgICAgIGlmIChmcmVzaEdyb3VwLmlkICE9PSBvdGhlckdyb3VwLmlkKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvdGhlckdyb3VwJywgb3RoZXJHcm91cCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvdGhlckdyb3VwT3V0ZXInLCBvdGhlckdyb3VwT3V0ZXIpO1xuICAgICAgICAvLyBvdGhlckdyb3VwT3V0ZXIuZmlsbENvbG9yID0gJ3doaXRlJztcbiAgICAgICAgb3RoZXJHcm91cE91dGVyLmJyaW5nVG9Gcm9udCgpO1xuICAgICAgICBsZXQgdGhpc1BvcCA9IGZyZXNoT3V0ZXIuaW50ZXJzZWN0KG90aGVyR3JvdXBPdXRlcik7XG4gICAgICAgIGlmICghIXRoaXNQb3AgJiYgdGhpc1BvcC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRJbmRleGVkUG9wQ29sb3IoaSArIGopO1xuICAgICAgICAgIGNvbnN0IHBvcENvbG9yID0gY29sb3IuZ2V0UmFuZG9tUG9wKCk7XG4gICAgICAgICAgdGhpc1BvcC5maWxsQ29sb3IgPSBwb3BDb2xvcjtcbiAgICAgICAgICB0aGlzUG9wLnN0cm9rZUNvbG9yID0gcG9wQ29sb3I7XG4gICAgICAgICAgdGhpc1BvcC5kYXRhLnBvcCA9IHRydWU7XG4gICAgICAgICAgdGhpc1BvcC5uYW1lID0gJ3BvcCc7XG4gICAgICAgICAgdGhpc1BvcC5kYXRhLnBvcEdyb3VwID0gZnJlc2hHcm91cC5pZDtcbiAgICAgICAgICB0aGlzUG9wLmRhdGEuaW50ZXJzZWN0aW5nR3JvdXAgPSBvdGhlckdyb3VwLmlkO1xuICAgICAgICAgIHRoaXNQb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgdGhpc1BvcC5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXNQb3AuYnJpbmdUb0Zyb250KCk7XG4gICAgICAgICAgZnJlc2hHcm91cC5hZGRDaGlsZCh0aGlzUG9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFuVXBHcm91cChmcmVzaEdyb3VwKTtcblxuICAgICAgICAvLyBmaWd1cmUgb3V0IGlmIHRoaXMgcG9wIGludGVyc2VjdHMgYW55IG90aGVyIHBvcHNcbiAgICAgICAgLy8gYWxsUG9wcy5mb3JFYWNoKChvdGhlclBvcCwgaykgPT4ge1xuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdjaGVja2luZyBvdGhlciBwb3AnLCBvdGhlclBvcCk7XG4gICAgICAgIC8vICAgaWYgKHRoaXNQb3AuaWQgIT09IG90aGVyUG9wLmlkICYmIHRoaXNQb3AuaW50ZXJzZWN0cyhvdGhlclBvcCkpIHtcbiAgICAgICAgLy8gICAgIGxldCBwb3BJbnRlcnNlY3Rpb24gPSB0aGlzUG9wLmdldEludGVyc2VjdGlvbnMob3RoZXJQb3ApO1xuICAgICAgICAvLyAgICAgaWYgKCEhcG9wSW50ZXJzZWN0aW9uICYmIHBvcEludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbiA9IG5ldyBQYXRoKFtwb3BJbnRlcnNlY3Rpb25dKVxuICAgICAgICAvLyAgICAgICBjb25zb2xlLmxvZygncG9wSW50ZXJzZWN0aW9uJywgcG9wSW50ZXJzZWN0aW9uKTtcbiAgICAgICAgLy8gICAgICAgLy8gY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRJbmRleGVkUG9wQ29sb3IoaSArIGogKyBrKTtcbiAgICAgICAgLy8gICAgICAgY29uc3QgcG9wQ29sb3IgPSBjb2xvci5nZXRSYW5kb21Qb3AoKTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmRhdGEucG9wID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgICAgcG9wSW50ZXJzZWN0aW9uLmZpbGxDb2xvciA9IHBvcENvbG9yXG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5zdHJva2VDb2xvciA9IHBvcENvbG9yO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24udmlzaWJsZSA9IHRydWU7XG4gICAgICAgIC8vICAgICAgIHBvcEludGVyc2VjdGlvbi5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAvLyAgICAgICBwb3BJbnRlcnNlY3Rpb24uYnJpbmdUb0Zyb250KCk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9KTtcblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnJlc2hHcm91cC5kYXRhLmZyZXNoID0gZmFsc2U7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0bGluZUdyb3VwKHRydWVkU2hhcGUpIHtcbiAgLy8gY29uc29sZS5sb2coJ3RydWVkU2hhcGUnLCB0cnVlZFNoYXBlKTtcbiAgbGV0IG91dGVyUGF0aCA9IG5ldyBQYXRoKCk7XG4gIG91dGVyUGF0aC5uYW1lID0gJ291dGVyJztcbiAgb3V0ZXJQYXRoLnZpc2libGUgPSB0cnVlO1xuXG4gIGxldCBtaWRkbGVQYXRoID0gbmV3IFBhdGgoKTtcbiAgbWlkZGxlUGF0aC5uYW1lID0gJ21pZGRsZSc7XG4gIGxldCBzaXplcyA9IFtdO1xuICBsZXQgYW5nbGUgPSBudWxsLCBsYXN0QW5nbGUgPSBudWxsLCBhbmdsZURlbHRhO1xuXG4gIGxldCBmaXJzdFRvcCA9IG51bGwsIGZpcnN0Qm90dG9tID0gbnVsbDtcbiAgbGV0IGxhc3RUb3AgPSBudWxsLCBsYXN0Qm90dG9tID0gbnVsbDtcblxuICBpZiAoISh0cnVlZFNoYXBlLmxlbmd0aCA+IDApKSByZXR1cm4gbmV3IEdyb3VwKG91dGVyUGF0aCwgbWlkZGxlUGF0aCk7XG5cbiAgbWlkZGxlUGF0aC5hZGQodHJ1ZWRTaGFwZS5maXJzdFNlZ21lbnQucG9pbnQpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdHJ1ZWRTaGFwZS5sZW5ndGg7IGkgKz0gMTApIHtcbiAgICB3aGlsZSAoc2l6ZXMubGVuZ3RoID4gMTApIHtcbiAgICAgIHNpemVzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiA5OyAvLyBUaGlzIGlzIGp1c3QgcmFuZG9tIHZhcmlhbmNlXG4gICAgc2l6ZXMucHVzaChzaXplKTtcblxuICAgIGxldCBjdW1TaXplID0gMDtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemVzLmxlbmd0aDsgaisrKSB7XG4gICAgICBjdW1TaXplICs9IHNpemVzW2pdO1xuICAgIH1cbiAgICBsZXQgYXZnU2l6ZSA9IE1hdGgubWF4KDUsICgoY3VtU2l6ZSAvIHNpemVzLmxlbmd0aCkgKyBzaXplKSAvIDIpO1xuXG4gICAgY29uc3QgcG9pbnQgPSB0cnVlZFNoYXBlLmdldFBvaW50QXQoaSk7XG4gICAgY29uc3Qgbm9ybWFsID0gdHJ1ZWRTaGFwZS5nZXROb3JtYWxBdChpKTtcblxuICAgIGNvbnN0IHRvcCA9IG5ldyBQb2ludChwb2ludC54ICsgbm9ybWFsLnggKiBhdmdTaXplLCBwb2ludC55ICsgbm9ybWFsLnkgKiBhdmdTaXplKTtcbiAgICBjb25zdCBib3R0b20gPSBuZXcgUG9pbnQocG9pbnQueCAtIG5vcm1hbC54ICogYXZnU2l6ZSwgcG9pbnQueSAtIG5vcm1hbC55ICogYXZnU2l6ZSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygncG9pbnQnLCBwb2ludCwgJ25vcm1hbCcsIG5vcm1hbCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3RvcCcsIHRvcCwgJ2JvdHRvbScsIGJvdHRvbSk7XG5cbiAgICBvdXRlclBhdGguYWRkKHRvcCk7XG4gICAgb3V0ZXJQYXRoLmluc2VydCgwLCBib3R0b20pO1xuICAgIG1pZGRsZVBhdGguYWRkKHBvaW50KTtcblxuICAgIGxhc3RBbmdsZSA9IGFuZ2xlO1xuXG4gICAgaWYgKGkgPT0gMTApIHtcbiAgICAgIGZpcnN0VG9wID0gdG9wO1xuICAgICAgZmlyc3RCb3R0b20gPSBib3R0b207XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3RUb3AgPSB0b3A7XG4gICAgICBsYXN0Qm90dG9tID0gYm90dG9tO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0cnVlZFNoYXBlLmNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgIGNvbnN0IGNlbnRlclRvcCA9IG5ldyBQb2ludCgoZmlyc3RUb3AueCArIGxhc3RUb3AueCkgLyAyLCAoZmlyc3RUb3AueSArIGxhc3RUb3AueSkgLyAyKTtcbiAgICBjb25zdCBjZW50ZXJCb3R0b20gPSBuZXcgUG9pbnQoKGZpcnN0Qm90dG9tLnggKyBsYXN0Qm90dG9tLngpIC8gMiwgKGZpcnN0Qm90dG9tLnkgKyBsYXN0Qm90dG9tLnkpIC8gMik7XG4gICAgY29uc3QgY2VudGVyID0gbmV3IFBvaW50KChjZW50ZXJUb3AueCArIGNlbnRlckJvdHRvbS54KSAvIDIsIChjZW50ZXJUb3AueSArIGNlbnRlckJvdHRvbS55KSAvIDIpO1xuXG4gICAgb3V0ZXJQYXRoLmFkZChjZW50ZXJUb3ApO1xuICAgIG91dGVyUGF0aC5pbnNlcnQoMCwgY2VudGVyQm90dG9tKTtcbiAgICBtaWRkbGVQYXRoLmFkZChjZW50ZXIpO1xuXG4gICAgb3V0ZXJQYXRoLmFkZChmaXJzdFRvcCk7XG4gICAgb3V0ZXJQYXRoLmluc2VydCgwLCBmaXJzdEJvdHRvbSk7XG4gICAgbWlkZGxlUGF0aC5jbG9zZWQgPSB0cnVlO1xuICB9XG5cbiAgb3V0ZXJQYXRoLmZsYXR0ZW4oNTApO1xuICBtaWRkbGVQYXRoLmZsYXR0ZW4oNTApO1xuICBvdXRlclBhdGguc2ltcGxpZnkoKTtcbiAgbWlkZGxlUGF0aC5zaW1wbGlmeSgpO1xuXG4gIG91dGVyUGF0aC5zZWxlY3RlZCA9IGZhbHNlO1xuICAvLyBtaWRkbGVQYXRoLnNlbGVjdGVkID0gdHJ1ZTtcbiAgb3V0ZXJQYXRoLm5hbWUgPSAnb3V0ZXInO1xuICBtaWRkbGVQYXRoLm5hbWUgPSAnbWlkZGxlJztcbiAgY29uc3QgcmV0dXJuR3JvdXAgPSBuZXcgR3JvdXAob3V0ZXJQYXRoLCBtaWRkbGVQYXRoKTtcbiAgcmV0dXJuIHJldHVybkdyb3VwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJ1ZWRTaGFwZShwYXRoKSB7XG4gIGxldCBwYXRoQ2xvbmUgPSBwYXRoLmNsb25lKCk7XG4gIHBhdGhDbG9uZS52aXNpYmxlID0gZmFsc2U7XG4gIC8vIGNvbnNvbGUubG9nKCdwYXRoQ2xvbmUnLCBwYXRoQ2xvbmUpO1xuICBsZXQgY29tcGxldGVkUGF0aCA9IGdldENvbXBsZXRlZFBhdGgocGF0aENsb25lKTtcbiAgLy8gY29tcGxldGVkUGF0aC5yZWR1Y2UoKTtcblxuICAvLyB0cnVlIHRoZSBwYXRoIVxuICBsZXQgdHJ1ZWRQYXRoID0gY29tcGxldGVkUGF0aDtcbiAgLy8gY29uc29sZS5sb2coJ3RydWVkUGF0aCcsIHRydWVkUGF0aCk7XG5cbiAgdHJ1ZWRQYXRoLnN0cm9rZVdpZHRoID0gcGF0aENsb25lLnN0cm9rZVdpZHRoO1xuXG4gIHBhdGhDbG9uZS5yZW1vdmUoKTtcbiAgcmV0dXJuIHRydWVkUGF0aDtcbn1cblxuLy8gZXh0ZW5kIG9yIHRyaW0gcGF0aCBpZiB0aGUgZW5kcyBhcmUgY2xvc2VcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wbGV0ZWRQYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgcGF0aENsb25lLnJlZHVjZSgpO1xuICBwYXRoQ2xvbmUuc2ltcGxpZnkoKTtcblxuICBsZXQgaW50ZXJzZWN0aW9ucyA9IHBhdGhDbG9uZS5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIC8vIHRyaW0gcGF0aCBpZiBlbmRzIGFyZSBjbG9zZVxuICAgIGxldCB0cmltbWVkUGF0aCA9IGdldFRyaW1tZWRQYXRoKHBhdGhDbG9uZSk7XG5cbiAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gdHJpbW1lZFBhdGg7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXh0ZW5kIHBhdGggdG8gc2VlIGlmIGFuIGludGVyc2VjdGlvbiBpcyBuZWFyXG4gICAgbGV0IGV4dGVuZGVkUGF0aCA9IGdldEV4dGVuZGVkUGF0aChwYXRoQ2xvbmUpO1xuICAgIGxldCBpbnRlcnNlY3Rpb25zID0gZXh0ZW5kZWRQYXRoLmdldEludGVyc2VjdGlvbnMoKTtcblxuICAgIC8vIHBhdGhDbG9uZS5yZW1vdmUoKTtcblxuICAgIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIHRyaW0gZXh0cmEgZXh0ZW5kZWQgcGF0aFxuICAgICAgbGV0IHRyaW1tZWRQYXRoID0gZ2V0VHJpbW1lZFBhdGgoZXh0ZW5kZWRQYXRoKTtcbiAgICAgIGV4dGVuZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXh0ZW5kZWQgcGF0aCBkb2VzIG5vdCBpbnRlcnNlY3QsIHJldHVybiB0aGUgb3JpZ2luYWwgcGF0aFxuICAgICAgZXh0ZW5kZWRQYXRoLnJlcGxhY2VXaXRoKGdldEJydXRlRXh0ZW5kZWRQYXRoKHBhdGhDbG9uZSkpO1xuICAgICAgaWYgKGV4dGVuZGVkUGF0aCAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW9ucyA9IGV4dGVuZGVkUGF0aC5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgICAgICAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCB0cmltbWVkUGF0aCA9IGdldFRyaW1tZWRQYXRoKGV4dGVuZGVkUGF0aCk7XG4gICAgICAgICAgZXh0ZW5kZWRQYXRoLnJlbW92ZSgpO1xuICAgICAgICAgIHJldHVybiB0cmltbWVkUGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIWV4dGVuZGVkUGF0aCAmJiBleHRlbmRlZFBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGV4dGVuZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXRoQ2xvbmUudmlzaWJsZSA9IHRydWU7XG4gICAgICByZXR1cm4gcGF0aENsb25lO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcGVQcmVkaWN0aW9uKHBhdGgpIHtcbiAgbGV0IHByZWRpY3Rpb24gPSB7fTtcblxuICBsZXQgc2hhcGVKU09OID0gcGF0aC5leHBvcnRKU09OKCk7XG4gIGxldCBzaGFwZURhdGEgPSBwcm9jZXNzU2hhcGVEYXRhKHNoYXBlSlNPTik7XG4gIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHNoYXBlRGF0YSkpO1xuICBsZXQgc2hhcGVQcmVkaWN0aW9uID0gZGV0ZWN0b3Iuc3BvdChzaGFwZURhdGEpO1xuXG4gIGlmIChzaGFwZVByZWRpY3Rpb24uc2NvcmUgPT09IDApIHtcbiAgICAvLyBhbGdvcml0aG0gZG9lc24ndCBsaWtlIHZlcnRpY2FsIGxpbmVzIGZvciBzb21lIHJlYXNvblxuICAgIC8vIGlmIHRoZSBjZXJ0YWludHkgaXMgMCBpdCdzIHByb2JhYmx5IGEgbGluZVxuICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IFwibGluZVwiO1xuICAgIHByZWRpY3Rpb24uc2NvcmUgPSAwLjk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNoYXBlUHJlZGljdGlvbi5zY29yZSA+IDAuNSkge1xuICAgICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gc2hhcGVQcmVkaWN0aW9uLnBhdHRlcm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWRpY3Rpb24ucGF0dGVybiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcHJlZGljdGlvbi5zY29yZSA9IHNoYXBlUHJlZGljdGlvbi5zY29yZTtcbiAgfVxuXG4gIGlmIChwYXRoLmNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgIGNvbnN0IGNsb3NlZFNoYXBlcyA9IFsndHJpYW5nbGUnLCAnc3F1YXJlJywgJ2NpcmNsZSddO1xuICAgIGlmIChjbG9zZWRTaGFwZXMuaW5jbHVkZXMocHJlZGljdGlvbi5wYXR0ZXJuKSA9PT0gZmFsc2UpIHtcbiAgICAgIC8vIGNsb3NlZCBzaGFwZSBzaG91bGQgYmUgb25lIG9mIHRoZSBhYm92ZSwgbWFrZSBhIHJhbmRvbSBwaWNrXG4gICAgICBwcmVkaWN0aW9uLnBhdHRlcm4gPSB1dGlsLnJhbmRvbVBpY2soY2xvc2VkU2hhcGVzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocGF0aC5pbnRlcnNlY3RzKHBhdGgpID09PSB0cnVlKSB7XG4gICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gJ290aGVyJztcbiAgICAvLyBjb25zdCBpbnRlcnNlY3RpbmdTaGFwZXMgPSBbJ3RyaWFuZ2xlJywgJ3NxdWFyZScsICdjaXJjbGUnLCAnb3RoZXInXTtcbiAgICAvLyBpZiAoaW50ZXJzZWN0aW5nU2hhcGVzLmluY2x1ZGVzKHByZWRpY3Rpb24ucGF0dGVybikgPT09IGZhbHNlKSB7XG4gICAgLy8gICBwcmVkaWN0aW9uLnBhdHRlcm4gPSB1dGlsLnJhbmRvbVBpY2soaW50ZXJzZWN0aW5nU2hhcGVzKTtcbiAgICAvLyB9XG4gIH0gZWxzZSB7XG4gICAgcHJlZGljdGlvbi5wYXR0ZXJuID0gJ2xpbmUnOyAvLyBsaW5lcyBhcmUgdGhlIG9ubHkgc2hhcGUgdGhhdCBpcyBub3QgY2xvc2VkIGFuZCBkb2VzIG5vdCBpbnRlcnNlY3RcbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKCdzaGFwZSBwcmVkaWN0aW9uJywgcHJlZGljdGlvbik7XG5cbiAgcmV0dXJuIHByZWRpY3Rpb247XG59XG5cbi8vIGZsb29ycyB0aGUgY29vcmRpbmF0ZXMgb2YgYSBwb2ludFxuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVnZXJQb2ludChwb2ludCkge1xuICByZXR1cm4gbmV3IFBvaW50KE1hdGguZmxvb3IocG9pbnQueCksIE1hdGguZmxvb3IocG9pbnQueSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UG9pbnQocG9pbnQpIHtcbiAgcmV0dXJuIGAke01hdGguZmxvb3IocG9pbnQueCl9LCR7TWF0aC5mbG9vcihwb2ludC55KX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQb2ludChwb2ludFN0cikge1xuICBsZXQgc3BsaXQgPSBwb2ludFN0ci5zcGxpdCgnLCcpLm1hcCgobnVtKSA9PiBNYXRoLmZsb29yKG51bSkpO1xuXG4gIGlmIChzcGxpdC5sZW5ndGggPj0gMikge1xuICAgIHJldHVybiBuZXcgUG9pbnQoc3BsaXRbMF0sIHNwbGl0WzFdKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvc2VzdFBvaW50RnJvbVBhdGhEYXRhKHBvaW50LCBwYXRoRGF0YSkge1xuICBsZXQgbGVhc3REaXN0YW5jZSwgY2xvc2VzdFBvaW50O1xuXG4gIEJhc2UuZWFjaChwYXRoRGF0YSwgKGRhdHVtLCBpKSA9PiB7XG4gICAgbGV0IGRpc3RhbmNlID0gcG9pbnQuZ2V0RGlzdGFuY2UoZGF0dW0ucG9pbnQpO1xuICAgIGlmICghbGVhc3REaXN0YW5jZSB8fCBkaXN0YW5jZSA8IGxlYXN0RGlzdGFuY2UpIHtcbiAgICAgIGxlYXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgIGNsb3Nlc3RQb2ludCA9IGRhdHVtLnBvaW50O1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNsb3Nlc3RQb2ludCB8fCBwb2ludDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NTaGFwZURhdGEoanNvbikge1xuICBsZXQgcmV0dXJuU2hhcGUgPSBbXTtcbiAgbGV0IGpzb25PYmogPSBKU09OLnBhcnNlKGpzb24pWzFdOyAvLyB6ZXJvIGluZGV4IGlzIHN0cmluZ2lmaWVkIHR5cGUgKGUuZy4gXCJQYXRoXCIpXG5cbiAgaWYgKCdzZWdtZW50cycgaW4ganNvbk9iaikge1xuICAgIGxldCBzZWdtZW50cyA9IGpzb25PYmouc2VnbWVudHM7XG4gICAgQmFzZS5lYWNoKHNlZ21lbnRzLCAoc2VnbWVudCwgaSkgPT4ge1xuICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGxldCBwb3NpdGlvbkluZm8gPSBzZWdtZW50WzBdOyAvLyBpbmRleGVzIDEgYW5kIDIgYXJlIHN1cGVyZmx1b3VzIG1hdHJpeCBkZXRhaWxzXG4gICAgICAgIHJldHVyblNoYXBlLnB1c2goe1xuICAgICAgICAgIHg6IHBvc2l0aW9uSW5mb1swXSxcbiAgICAgICAgICB5OiBwb3NpdGlvbkluZm9bMV1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVyblNoYXBlLnB1c2goe1xuICAgICAgICAgIHg6IHNlZ21lbnRbMF0sXG4gICAgICAgICAgeTogc2VnbWVudFsxXVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJldHVyblNoYXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEludGVyaW9yQ3VydmVzKHBhdGgpIHtcbiAgY29uc3QgdHJhbnNwYXJlbnQgPSBjb2xvci50cmFuc3BhcmVudDtcblxuICBsZXQgaW50ZXJpb3JDdXJ2ZXMgPSBbXTtcblxuICBsZXQgcGF0aENsb25lID0gcGF0aC5jbG9uZSgpO1xuICBsZXQgaW50ZXJzZWN0aW9ucyA9IHBhdGhDbG9uZS5nZXRJbnRlcnNlY3Rpb25zKCk7XG5cbiAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIGxldCBkaXZpZGVkUGF0aCA9IHBhdGhDbG9uZS5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gICAgLy8gY29uc29sZS5sb2coZGl2aWRlZFBhdGgpO1xuXG4gICAgaWYgKGRpdmlkZWRQYXRoLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcpIHtcbiAgICAgIEJhc2UuZWFjaChkaXZpZGVkUGF0aC5jaGlsZHJlbiwgKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmIChjaGlsZC5sZW5ndGggPiAwICYmIGNoaWxkLmNsb3NlZCkge1xuICAgICAgICAgIGxldCBlbmNsb3NlZExvb3AgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICAgIGlmIChwYXRoQ2xvbmUuY2xvc2VkKSB7XG4gICAgICAgICAgICBlbmNsb3NlZExvb3AuZmlsbENvbG9yID0gcGF0aENsb25lLnN0cm9rZUNvbG9yO1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEuaW50ZXJpb3IgPSB0cnVlO1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbmNsb3NlZExvb3AuZGF0YS5pbnRlcmlvciA9IHRydWU7XG4gICAgICAgICAgZW5jbG9zZWRMb29wLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIGVuY2xvc2VkTG9vcC5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIGludGVyaW9yQ3VydmVzLnB1c2goZW5jbG9zZWRMb29wKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhdGhDbG9uZS5jbG9zZWQpIHtcbiAgICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IHBhdGhDbG9uZS5jbG9uZSgpO1xuICAgICAgICBlbmNsb3NlZExvb3AudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIGVuY2xvc2VkTG9vcC5maWxsQ29sb3IgPSBwYXRoQ2xvbmUuc3Ryb2tlQ29sb3I7XG4gICAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgICAgZW5jbG9zZWRMb29wLmRhdGEudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgaW50ZXJpb3JDdXJ2ZXMucHVzaChlbmNsb3NlZExvb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocGF0aENsb25lLmNsb3NlZCkge1xuICAgICAgbGV0IGVuY2xvc2VkTG9vcCA9IHBhdGhDbG9uZS5jbG9uZSgpO1xuICAgICAgZW5jbG9zZWRMb29wLnZpc2libGUgPSB0cnVlO1xuICAgICAgZW5jbG9zZWRMb29wLmZpbGxDb2xvciA9IHBhdGhDbG9uZS5zdHJva2VDb2xvcjtcbiAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLmludGVyaW9yID0gdHJ1ZTtcbiAgICAgIGVuY2xvc2VkTG9vcC5kYXRhLnRyYW5zcGFyZW50ID0gZmFsc2U7XG4gICAgICBpbnRlcmlvckN1cnZlcy5wdXNoKGVuY2xvc2VkTG9vcCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGludGVyaW9yQ3VydmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5kZWRQYXRoKHBhdGgsIGJydXRlRm9yY2UgPSBmYWxzZSkge1xuICBsZXQgZXh0ZW5kZWRQYXRoID0gcGF0aC5jbG9uZSgpO1xuICBleHRlbmRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuXG4gIGNvbnN0IHRocmVzaG9sZERpc3QgPSB0aHJlc2hvbGREaXN0TXVsdGlwbGllciAqIGV4dGVuZGVkUGF0aC5sZW5ndGg7XG5cbiAgY29uc3QgZmlyc3RTZWdtZW50ID0gZXh0ZW5kZWRQYXRoLmZpcnN0U2VnbWVudDtcbiAgY29uc3QgbmV4dFNlZ21lbnQgPSBmaXJzdFNlZ21lbnQubmV4dDtcbiAgY29uc3Qgc3RhcnRBbmdsZSA9IE1hdGguYXRhbjIobmV4dFNlZ21lbnQucG9pbnQueSAtIGZpcnN0U2VnbWVudC5wb2ludC55LCBuZXh0U2VnbWVudC5wb2ludC54IC0gZmlyc3RTZWdtZW50LnBvaW50LngpOyAvLyByYWRcbiAgY29uc3QgaW52ZXJzZVN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlICsgTWF0aC5QSTtcbiAgY29uc3QgZXh0ZW5kZWRTdGFydFBvaW50ID0gbmV3IFBvaW50KGZpcnN0U2VnbWVudC5wb2ludC54ICsgKE1hdGguY29zKGludmVyc2VTdGFydEFuZ2xlKSAqIHRocmVzaG9sZERpc3QgLyAyKSwgZmlyc3RTZWdtZW50LnBvaW50LnkgKyAoTWF0aC5zaW4oaW52ZXJzZVN0YXJ0QW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpKTtcbiAgZXh0ZW5kZWRQYXRoLmluc2VydCgwLCBleHRlbmRlZFN0YXJ0UG9pbnQpO1xuXG4gIGNvbnN0IGxhc3RTZWdtZW50ID0gZXh0ZW5kZWRQYXRoLmxhc3RTZWdtZW50O1xuICBjb25zdCBwZW5TZWdtZW50ID0gbGFzdFNlZ21lbnQucHJldmlvdXM7IC8vIHBlbnVsdGltYXRlXG4gIGNvbnN0IGVuZEFuZ2xlID0gTWF0aC5hdGFuMihsYXN0U2VnbWVudC5wb2ludC55IC0gcGVuU2VnbWVudC5wb2ludC55LCBsYXN0U2VnbWVudC5wb2ludC54IC0gcGVuU2VnbWVudC5wb2ludC54KTsgLy8gcmFkXG4gIGNvbnN0IGV4dGVuZGVkRW5kUG9pbnQgPSBuZXcgUG9pbnQobGFzdFNlZ21lbnQucG9pbnQueCArIChNYXRoLmNvcyhlbmRBbmdsZSkgKiB0aHJlc2hvbGREaXN0IC8gMiksIGxhc3RTZWdtZW50LnBvaW50LnkgKyAoTWF0aC5zaW4oZW5kQW5nbGUpICogdGhyZXNob2xkRGlzdCAvIDIpKTtcbiAgZXh0ZW5kZWRQYXRoLmFkZChleHRlbmRlZEVuZFBvaW50KTtcblxuICAvLyBleHRlbmRlZFBhdGgudmlzaWJsZSA9IHRydWU7XG5cbiAgcmV0dXJuIGV4dGVuZGVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJydXRlRXh0ZW5kZWRQYXRoKHBhdGgpIHtcbiAgbGV0IGV4dGVuZGVkUGF0aCA9IHBhdGguY2xvbmUoKTtcbiAgZXh0ZW5kZWRQYXRoLnZpc2libGUgPSBmYWxzZTtcblxuICBjb25zdCB0aHJlc2hvbGREaXN0ID0gdGhyZXNob2xkRGlzdE11bHRpcGxpZXIgKiBleHRlbmRlZFBhdGgubGVuZ3RoO1xuICBjb25zdCBmaXJzdFBvaW50ID0gZXh0ZW5kZWRQYXRoLmZpcnN0U2VnbWVudC5wb2ludDtcbiAgY29uc3QgbGFzdFBvaW50ID0gZXh0ZW5kZWRQYXRoLmxhc3RTZWdtZW50LnBvaW50O1xuXG4gIGlmIChmaXJzdFBvaW50LmdldERpc3RhbmNlKGxhc3RQb2ludCkgPCB0aHJlc2hvbGREaXN0KSB7XG4gICAgZXh0ZW5kZWRQYXRoLmluc2VydCgwLCBsYXN0UG9pbnQpO1xuICAgIGV4dGVuZGVkUGF0aC5hZGQoZmlyc3RQb2ludCk7XG4gICAgZXh0ZW5kZWRQYXRoLmNsb3NlZCA9IHRydWU7XG4gICAgZXh0ZW5kZWRQYXRoLnVuaXRlKCk7XG4gICAgbGV0IGNyb3NzaW5ncyA9IGV4dGVuZGVkUGF0aC5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gICAgaWYgKCEhY3Jvc3NpbmdzICYmICEhY3Jvc3NpbmdzLmNoaWxkcmVuICYmIGNyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgbWF4QXJlYSA9IDAsIG1heENoaWxkID0gbnVsbDtcbiAgICAgIGNyb3NzaW5ncy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQuYXJlYSA+IG1heEFyZWEpIHtcbiAgICAgICAgICBtYXhDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIG1heEFyZWEgPSBjaGlsZC5hcmVhO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZXh0ZW5kZWRQYXRoID0gbWF4Q2hpbGQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4dGVuZGVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyaW1tZWRQYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhDbG9uZSA9IHBhdGguY2xvbmUoKTtcbiAgcGF0aENsb25lLnZpc2libGUgPSBmYWxzZTtcblxuICBsZXQgZmlyc3RQb2ludCA9IHBhdGhDbG9uZS5maXJzdFNlZ21lbnQucG9pbnQ7XG4gIGxldCBsYXN0UG9pbnQgPSBwYXRoQ2xvbmUubGFzdFNlZ21lbnQucG9pbnQ7XG4gIGxldCB0aHJlc2hvbGREaXN0ID0gdGhyZXNob2xkRGlzdE11bHRpcGxpZXIgKiBwYXRoQ2xvbmUubGVuZ3RoO1xuXG4gIGxldCBpbnRlcnNlY3Rpb25zID0gcGF0aENsb25lLmdldEludGVyc2VjdGlvbnMoKTtcbiAgaW50ZXJzZWN0aW9ucy5mb3JFYWNoKChpbnRlcnNlY3Rpb24sIGkpID0+IHtcbiAgICBpZiAoaW50ZXJzZWN0aW9uLm9mZnNldCA9PT0gMCkge1xuICAgICAgaW50ZXJzZWN0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBjb25zb2xlLmxvZygnaW50ZXJzZWN0aW9ucycsIGludGVyc2VjdGlvbnMpO1xuXG4gIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCA9PSAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb25zW2ldLnBvaW50O1xuXG4gICAgICAvLyBpZiB0aGUgYXZlcmFnZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnRzIGFuZCB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGlzIHdpdGhpbiB0aGUgdGhyZXNob2xkLCB0cmltXG4gICAgICBpZiAoZmlyc3RQb2ludC5nZXREaXN0YW5jZShpbnRlcnNlY3Rpb25Qb2ludCkgKyBsYXN0UG9pbnQuZ2V0RGlzdGFuY2UoaW50ZXJzZWN0aW9uUG9pbnQpIDwgMiAqIHRocmVzaG9sZERpc3QpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1taW5nIHBhdGgnKTtcbiAgICAgICAgbGV0IGRpdmlkZWRQYXRoID0gcGF0aENsb25lLmNsb25lKCk7IC8vIHJlc29sdmUgY3Jvc3NpbmdzIHNlZW1zIHRvIG1vZGlmeSB0aGUgcGF0aCBpdCB3YXMgcGFzc2VkLCBzbyBtYWtlIGFuIGV4dHJhIGNsb25lIHRvIGJlIHNhZmVcbiAgICAgICAgZGl2aWRlZFBhdGgudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBsZXQgcGF0aENyb3NzaW5ncyA9IGRpdmlkZWRQYXRoLnJlc29sdmVDcm9zc2luZ3MoKTtcblxuICAgICAgICBpZiAocGF0aENyb3NzaW5ncy5jbGFzc05hbWUgPT09ICdDb21wb3VuZFBhdGgnICYmIHBhdGhDcm9zc2luZ3MuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGF0aENyb3NzaW5ncy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gcGF0aENyb3NzaW5ncy5jaGlsZHJlbltqXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgLy8gY2hpbGQuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBkaXZpZGVkUGF0aCA9IGRpdmlkZWRQYXRoLnN1YnRyYWN0KGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXZpZGVkUGF0aC5zZWxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgbGV0IHRyaW1tZWRQYXRoID0gcGF0aENsb25lLnN1YnRyYWN0KGRpdmlkZWRQYXRoKTtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHBhdGhDbG9uZTtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXRoLmNsYXNzTmFtZSA9PT0gJ0NvbXBvdW5kUGF0aCcgJiYgdHJpbW1lZFBhdGguY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBjbG9zZWRDaGlsZHJlbiA9IFtdO1xuICAgICAgICAgIHRyaW1tZWRQYXRoLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGQubGVuZ3RoID4gMCAmJiBjaGlsZC5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgbGV0IGNoaWxkQ2xvbmUgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICAgICAgICBjaGlsZENsb25lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgY2xvc2VkQ2hpbGRyZW4ucHVzaChjaGlsZENsb25lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChjbG9zZWRDaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoY2xvc2VkQ2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAvLyBmb3Igc29tZSByZWFzb24gdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgY2xvc2VkIGNoaWxkcmVuLCBtZXJnZSB0aGVtXG4gICAgICAgICAgICAgIGxldCBhY2N1bXVsYXRvciA9IGNsb3NlZENoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgY2xvc2VkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yLnVuaXRlKGNsb3NlZENoaWxkcmVuW2pdKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChhY2N1bXVsYXRvci5sZW5ndGggPiAwICYmIGFjY3VtdWxhdG9yLmNsYXNzTmFtZSA9PT0gJ1BhdGgnKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaW1tZWQgYWNjdW11bGF0b3InLCBhY2N1bXVsYXRvcik7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1BhdGggPSBuZXcgUGF0aCgpO1xuICAgICAgICAgICAgICAgIG5ld1BhdGguY29weUNvbnRlbnQoYWNjdW11bGF0b3IpO1xuICAgICAgICAgICAgICAgIG5ld1BhdGguY29weUF0dHJpYnV0ZXMocGF0aENsb25lKTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBwYXRoQ2xvbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZGl2aWRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdHJpbW1lZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1BhdGg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGF0aENsb25lLnJlbW92ZSgpO1xuICAgICAgICAgICAgZGl2aWRlZFBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICB0cmltbWVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmltbWVkIGNsb3NlZENoaWxkcmVuWzBdJywgY2xvc2VkQ2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZENoaWxkcmVuWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmltbWVkIHBhdGggcmV0dXJuJywgdHJpbW1lZFBhdGgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygncGF0aCBjbG9uZScsIHBhdGhDbG9uZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXZpZGVkUGF0aCcsIGRpdmlkZWRQYXRoKTtcbiAgICAgICAgcGF0aENsb25lLnJlbW92ZSgpO1xuICAgICAgICBkaXZpZGVkUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRyaW1tZWRQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vIGNsb3NlIGludGVyc2VjdGlvbiB3ZXJlIGZvdW5kIHNvIG5vdGhpbmcgY2FuIGJlIHRyaW1tZWRcbiAgICByZXR1cm4gcGF0aENsb25lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXRoO1xuICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGhpdFRlc3RHcm91cEJvdW5kcyhwb2ludCkge1xuICBsZXQgZ3JvdXBzID0gdXRpbC5nZXRWaXNpYmxlR3JvdXBzKCk7XG4gIHJldHVybiBoaXRUZXN0Qm91bmRzKHBvaW50LCBncm91cHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGl0VGVzdEJvdW5kcyhwb2ludCwgY2hpbGRyZW4pIHtcbiAgaWYgKCFwb2ludCkgcmV0dXJuIG51bGw7XG5cbiAgZm9yIChsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgbGV0IGJvdW5kcyA9IGNoaWxkLnN0cm9rZUJvdW5kcztcbiAgICBpZiAocG9pbnQuaXNJbnNpZGUoY2hpbGQuc3Ryb2tlQm91bmRzKSkge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaW5pdEtlZXBhbGl2ZVNoYXBlKCk7XG59XG4iLCJjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuXG5jb25zdCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTtcblxuY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5jb25zdCBzb3VuZCA9IHJlcXVpcmUoJy4vc291bmQnKTtcblxuY29uc3QgZHJhd0NhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5jYW52YXNJZCk7XG5jb25zdCBjYW52YXNSZWNvcmRlciA9IFJlY29yZFJUQyhkcmF3Q2FudmFzLCB7XG4gIHR5cGU6ICdjYW52YXMnXG59KTtcblxuZnVuY3Rpb24gYXN5bmNTdG9wQXVkaW9SZWNvcmRpbmdBbmRFeHBvcnRCbG9iKHJlY29yZGVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB0cnkge1xuICAgICAgcmVjb3JkZXIuc3RvcCgpO1xuICAgICAgcmVjb3JkZXIuZXhwb3J0V0FWKGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgICAgcmVzb2x2ZShibG9iKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgcmVqZWN0KGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzeW5jU3RvcFZpZGVvUmVjb3JkaW5nQW5kRXhwb3J0QmxvYihyZWNvcmRlcikge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlY29yZGVyLnN0b3BSZWNvcmRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBibG9iID0gcmVjb3JkZXIuZ2V0QmxvYigpO1xuICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZCgpIHtcbiAgbGV0IGF1ZGlvUmVjb3JkZXIgPSBuZXcgUmVjb3JkZXIoSG93bGVyLm1hc3RlckdhaW4sIHtcbiAgICB3b3JrZXJQYXRoOiAnL2pzL2xpYi9yZWNvcmRlcldvcmtlci5qcydcbiAgfSk7XG5cbiAgY2FudmFzUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKTtcbiAgYXVkaW9SZWNvcmRlci5yZWNvcmQoKTtcblxuICBzb3VuZC5hc3luY1BsYXlDb21wb3NpdGlvbk9uY2UoKS50aGVuKCgpID0+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2FzeW5jU3RvcEF1ZGlvUmVjb3JkaW5nQW5kRXhwb3J0QmxvYihhdWRpb1JlY29yZGVyKSwgYXN5bmNTdG9wVmlkZW9SZWNvcmRpbmdBbmRFeHBvcnRCbG9iKGNhbnZhc1JlY29yZGVyKV0pXG4gICAgICAudGhlbihmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgICAgbGV0IFthdWRpb0Jsb2IsIHZpZGVvQmxvYl0gPSB2YWx1ZXM7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhdWRpb0Jsb2InLCBhdWRpb0Jsb2IpO1xuICAgICAgICBjb25zb2xlLmxvZygndmlkZW9CbG9iJywgdmlkZW9CbG9iKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnc2VuZGluZyBmaWxlcycpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXVkaW8nLCBhdWRpb0Jsb2IpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3ZpZGVvJywgdmlkZW9CbG9iKTtcblxuICAgICAgICBheGlvcy5wb3N0KCcvcHJvY2VzcycsIGZvcm1EYXRhKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvSWQgPSByZXNwO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvcHJvY2Vzcz9pZD0ke3ZpZGVvSWR9YDtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9KTtcbiAgICAvLyBhdWRpb1JlY29yZGVyLnN0b3AoKTtcbiAgICAvLyBhdWRpb1JlY29yZGVyLmV4cG9ydFdBVihmdW5jdGlvbihibG9iKSB7XG4gICAgLy8gICBkb3dubG9hZChibG9iLCAnYmxvYi53YXYnKTtcbiAgICAvLyB9KTtcbiAgICAvLyBjYW52YXNSZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgdmFyIGJsb2IgPSBjYW52YXNSZWNvcmRlci5nZXRCbG9iKCk7XG4gICAgLy8gICBkb3dubG9hZChibG9iLCAnYmxvYi53ZWJtJyk7XG4gICAgLy8gfSk7XG4gIH0pLmVycm9yKChlKSA9PiB7XG4gICAgUHJvbWlzZS5hbGwoW2FzeW5jU3RvcEF1ZGlvUmVjb3JkaW5nQW5kRXhwb3J0QmxvYihhdWRpb1JlY29yZGVyKSwgYXN5bmNTdG9wVmlkZW9SZWNvcmRpbmdBbmRFeHBvcnRCbG9iKGNhbnZhc1JlY29yZGVyKV0pXG4gICAgICAudGhlbihmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2codmFsdWVzKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9KTtcbiAgICAvLyBhdWRpb1JlY29yZGVyLnN0b3AoKTtcbiAgICAvLyBhdWRpb1JlY29yZGVyLmV4cG9ydFdBVihmdW5jdGlvbihibG9iKSB7XG4gICAgLy8gICBkb3dubG9hZChibG9iLCAnYmxvYi53YXYnKTtcbiAgICAvLyB9KTtcbiAgICAvLyBjYW52YXNSZWNvcmRlci5zdG9wUmVjb3JkaW5nKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgdmFyIGJsb2IgPSBjYW52YXNSZWNvcmRlci5nZXRCbG9iKCk7XG4gICAgLy8gICBkb3dubG9hZChibG9iLCAnYmxvYi53ZWJtJyk7XG4gICAgLy8gfSk7XG4gIH0pO1xufVxuIiwicmVxdWlyZSgnaG93bGVyJyk7XG5jb25zdCBQcm9taXNlID0gcmVxdWlyZShcImJsdWViaXJkXCIpO1xuXG5jb25zdCB1aSA9IHJlcXVpcmUoJy4vdWknKTtcbmNvbnN0IHNoYXBlID0gcmVxdWlyZSgnLi9zaGFwZScpO1xuY29uc3QgY29sb3IgPSByZXF1aXJlKCcuL2NvbG9yJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHR1dG9yaWFsID0gcmVxdWlyZSgnLi90dXRvcmlhbCcpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcblxuY29uc3QgbWVhc3VyZXMgPSA0O1xuY29uc3QgYnBtID0gMTIwO1xuY29uc3QgYmVhdExlbmd0aCA9ICg2MCAvIGJwbSkgKiAxMDAwOyAvLyBtc1xuY29uc3QgbWVhc3VyZUxlbmd0aCA9IGJlYXRMZW5ndGggKiA0O1xuZXhwb3J0IGNvbnN0IGNvbXBvc2l0aW9uTGVuZ3RoID0gbWVhc3VyZUxlbmd0aCAqIG1lYXN1cmVzO1xuXG5leHBvcnQgY29uc3QgcGxheWluZ0NsYXNzID0gJ3BsYXlpbmcnO1xuZXhwb3J0IGNvbnN0IHBsYXlFbmFibGVkQ2xhc3MgPSAncGxheS1lbmFibGVkJztcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIHJldHVybiBhc3luY0luaXRTaGFwZVNvdW5kcygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVpbml0U2hhcGVTb3VuZHMoKSB7XG4gIHJldHVybiBhc3luY0luaXRTaGFwZVNvdW5kcygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcGVTb3VuZE9iaihwYXRoKSB7XG4gIGNvbnN0IHZpZXdXaWR0aCA9IHBhcGVyLnZpZXcudmlld1NpemUud2lkdGg7XG4gIGNvbnN0IHZpZXdIZWlnaHQgPSBwYXBlci52aWV3LnZpZXdTaXplLmhlaWdodDtcbiAgY29uc3Qgc2hhcGVTb3VuZHMgPSB3aW5kb3cua2FuLnNoYXBlU291bmRzIHx8IGluaXRTaGFwZVNvdW5kcygpO1xuICAvLyBhbGVydChKU09OLnN0cmluZ2lmeSh3aW5kb3cua2FuLnNoYXBlU291bmRzKSk7XG4gIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMpKTtcblxuICBsZXQgc2hhcGVQcmVkaWN0aW9uID0gc2hhcGUuZ2V0U2hhcGVQcmVkaWN0aW9uKHBhdGgpO1xuICBsZXQgY29sb3JOYW1lID0gY29sb3IuZ2V0UGF0aENvbG9yTmFtZShwYXRoKTtcbiAgaWYgKGNvbG9yTmFtZSA9PT0gbnVsbCkgY29sb3JOYW1lID0gJ2JsYWNrJzsgLy8ganVzdCBpbiBjYXNlXG5cbiAgY29uc3QgcXVhbnRpemVkU291bmRTdGFydFRpbWUgPSBxdWFudGl6ZUxlbmd0aChwYXRoLmJvdW5kcy54IC8gdmlld1dpZHRoICogY29tcG9zaXRpb25MZW5ndGgpOyAvLyBtc1xuICBjb25zdCBxdWFudGl6ZWRTb3VuZER1cmF0aW9uID0gcXVhbnRpemVMZW5ndGgocGF0aC5ib3VuZHMud2lkdGggLyB2aWV3V2lkdGggKiBjb21wb3NpdGlvbkxlbmd0aCk7IC8vIG1zXG5cbiAgbGV0IHNvdW5kT2JqID0ge307XG4gIHNvdW5kT2JqLnNvdW5kID0gc2hhcGVTb3VuZHNbc2hhcGVQcmVkaWN0aW9uLnBhdHRlcm5dO1xuICBzb3VuZE9iai5zdGFydFRpbWUgPSBxdWFudGl6ZWRTb3VuZFN0YXJ0VGltZTtcbiAgc291bmRPYmouZHVyYXRpb24gPSBxdWFudGl6ZWRTb3VuZER1cmF0aW9uO1xuICBzb3VuZE9iai5wYXRoSWQgPSBwYXRoLmlkO1xuICBzb3VuZE9iai5zcHJpdGVOYW1lID0gY29sb3JOYW1lO1xuICBzb3VuZE9iai5ncm91cElkID0gcGF0aC5wYXJlbnQuaWQ7XG4gIHNvdW5kT2JqLnBsYXkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBzb3VuZE9iai5zb3VuZC5wbGF5KHNvdW5kT2JqLnNwcml0ZU5hbWUpO1xuICAgICAgc291bmRPYmouc291bmQub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKGBHcm91cCAke3NvdW5kT2JqLmdyb3VwSWR9IGRvbmUgcGxheWluZyBzb3VuZGApO1xuICAgICAgfSk7XG4gICAgICBzb3VuZE9iai5zb3VuZC5vbignbG9hZGVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChgR3JvdXAgJHtzb3VuZE9iai5ncm91cElkfSBmYWlsZWQgdG8gbG9hZCBzb3VuZGApO1xuICAgICAgfSk7XG4gICAgfSlcbiAgfVxuXG5cbiAgcmV0dXJuIHNvdW5kT2JqO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRQbGF5aW5nKCkge1xuICAvLyBjb25zb2xlLmxvZygnZmlyc3QgdGltZScsIHdpbmRvdy5rYW4uZmlyc3RUaW1lUGxheWluZyk7XG4gIGlmICgkYm9keS5oYXNDbGFzcyhwbGF5RW5hYmxlZENsYXNzKSkge1xuICAgICRib2R5LmFkZENsYXNzKHBsYXlpbmdDbGFzcyk7XG5cbiAgICBIb3dsZXIubXV0ZShmYWxzZSk7XG5cbiAgICB3aW5kb3cua2FuLnBsYXlpbmcgPSB0cnVlO1xuXG4gICAgaWYgKHdpbmRvdy5rYW4uZmlyc3RUaW1lUGxheWluZyA9PT0gdHJ1ZSkge1xuICAgICAgd2luZG93Lmthbi5maXJzdFRpbWVQbGF5aW5nID0gZmFsc2U7XG4gICAgICBzdGFydENvbXBvc2l0aW9uKHdpbmRvdy5rYW4uY29tcG9zaXRpb24sIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRDb21wb3NpdGlvbih3aW5kb3cua2FuLmNvbXBvc2l0aW9uLCB0cnVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lmthbi5wbGF5aW5nID0gZmFsc2U7XG4gICAgJGJvZHkucmVtb3ZlQ2xhc3MocGxheWluZ0NsYXNzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcFBsYXlpbmcobXV0ZSA9IGZhbHNlKSB7XG4gIGlmICghIW11dGUpIHtcbiAgICBIb3dsZXIubXV0ZSh0cnVlKTtcbiAgfVxuXG4gIHdpbmRvdy5rYW4ucGxheWluZyA9IGZhbHNlO1xuICAkYm9keS5yZW1vdmVDbGFzcyhwbGF5aW5nQ2xhc3MpO1xuXG4gIHN0b3BDb21wb3NpdGlvbigpO1xufVxuXG5mdW5jdGlvbiBhc3luY0dldFNoYXBlU291bmRGcm9tU2hhcGVOYW1lKHNoYXBlTmFtZSkge1xuICBjb25zdCBzaGFwZVNvdW5kSlNPTlBhdGggPSBgLi9hdWRpby9zaGFwZXMvJHtzaGFwZU5hbWV9LyR7c2hhcGVOYW1lfS5qc29uYDtcbiAgcmV0dXJuICQuZ2V0SlNPTihzaGFwZVNvdW5kSlNPTlBhdGgpLnRoZW4oKHJlc3ApID0+IHtcbiAgICBjb25zdCBzaGFwZVNvdW5kRGF0YSA9IGZvcm1hdFNoYXBlU291bmREYXRhKHNoYXBlTmFtZSwgcmVzcCk7XG4gICAgY29uc3Qgc291bmQgPSBuZXcgSG93bChzaGFwZVNvdW5kRGF0YSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNoYXBlTmFtZTogc2hhcGVOYW1lLFxuICAgICAgc291bmQ6IHNvdW5kXG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jSW5pdFNoYXBlU291bmRzKCkge1xuICBsZXQgcmV0dXJuU291bmRzID0ge307XG4gIGNvbnN0IGV4dGVuc2lvbnMgPSBbJ29nZycsICdtNGEnLCAnbXAzJywgJ2FjMyddO1xuXG4gIGNvbnN0IHNoYXBlTmFtZXMgPSBzaGFwZS5zaGFwZU5hbWVzO1xuICBsZXQgcHJvbWlzZXMgPSBbXTtcbiAgQmFzZS5lYWNoKHNoYXBlTmFtZXMsIChzaGFwZU5hbWUpID0+IHtcbiAgICBwcm9taXNlcy5wdXNoKGFzeW5jR2V0U2hhcGVTb3VuZEZyb21TaGFwZU5hbWUoc2hhcGVOYW1lKSk7XG4gIH0pO1xuXG4gIHJldHVybiAkLndoZW4uYXBwbHkoJCwgcHJvbWlzZXMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgbGV0IHJldHVyblNvdW5kcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgICAgcmV0dXJuU291bmRzW2FyZy5zaGFwZU5hbWVdID0gYXJnLnNvdW5kO1xuICAgIH1cblxuICAgIHdpbmRvdy5rYW4uc2hhcGVTb3VuZHMgPSByZXR1cm5Tb3VuZHM7XG4gICAgcmV0dXJuIHJldHVyblNvdW5kcztcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTaGFwZVNvdW5kRGF0YShzaGFwZU5hbWUsIGRhdGEpIHtcbiAgbGV0IHJldHVybkRhdGEgPSB7fTtcblxuICByZXR1cm5EYXRhLnNyYyA9IGRhdGEudXJscy5tYXAoKHVybCkgPT4gYC4vYXVkaW8vc2hhcGVzLyR7c2hhcGVOYW1lfS8ke3VybH1gKTtcbiAgcmV0dXJuRGF0YS5zcHJpdGUgPSBkYXRhLnNwcml0ZTtcbiAgcmV0dXJuRGF0YS5odG1sNSA9IGZhbHNlO1xuICByZXR1cm5EYXRhLmxvb3AgPSBmYWxzZTtcblxuICByZXR1cm4gcmV0dXJuRGF0YTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplTGVuZ3RoKGR1cmF0aW9uKSB7XG4gIGNvbnN0IHNtYWxsZXN0RHVyYXRpb24gPSAoNjAgLyBicG0pO1xuICBjb25zdCByZXR1cm5EdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyBzbWFsbGVzdER1cmF0aW9uKSAqIHNtYWxsZXN0RHVyYXRpb247XG5cbiAgaWYgKHJldHVybkR1cmF0aW9uID4gMCkge1xuICAgIHJldHVybiByZXR1cm5EdXJhdGlvbjtcbiAgfSBlbHNlIHtcbiAgICAvLyBhbHdheXMgcmV0dXJuIHNvbWV0aGluZyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHJldHVybiBzbWFsbGVzdER1cmF0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZVBvc2l0aW9uKHBvc2l0aW9uLCB2aWV3V2lkdGgpIHtcbiAgY29uc3Qgc21hbGxlc3RJbnRlcnZhbCA9IHZpZXdXaWR0aCAvICg0ICogbWVhc3VyZXMpO1xuICByZXR1cm4gcmV0dXJuUG9zaXRpb24gPSBNYXRoLmZsb29yKHBvc2l0aW9uIC8gc21hbGxlc3RJbnRlcnZhbCkgKiBzbWFsbGVzdEludGVydmFsO1xufVxuXG5mdW5jdGlvbiBhc3luY1BsYXlTaGFwZShzaGFwZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgUHJvbWlzZS5hbGwoW2FzeW5jUGxheVNoYXBlU291bmQoc2hhcGUpLCBhc3luY1BsYXlTaGFwZUFuaW1hdGlvbihzaGFwZSldKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXNvbHZlKGBHcm91cCAke3NoYXBlLmdyb3VwSWR9IGZ1bGx5IGRvbmUgcGxheWluZ2ApO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcigoZSkgPT4ge1xuICAgICAgICByZWplY3QoYEdyb3VwICR7c2hhcGUuZ3JvdXBJZH0gZXJyb3JlZCB3aGlsZSBwbGF5aW5nOiAke2V9YCk7XG4gICAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzeW5jUGxheVNoYXBlU291bmQoc2hhcGUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygncGxheWluZzogJywgc2hhcGUuc291bmQsIHNoYXBlLnNwcml0ZU5hbWUsIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICBzaGFwZS5wbGF5KCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgcmVqZWN0KGBFcnJvciBwbGF5aW5nIHNoYXBlIHNvdW5kOiAke2V9YCk7XG4gICAgfVxuXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhc3luY1BsYXlTaGFwZUFuaW1hdGlvbihzaGFwZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3QgaXRlbSA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbSh7XG4gICAgICBjbGFzc05hbWU6ICdQYXRoJyxcbiAgICAgIG1hdGNoOiBmdW5jdGlvbihlbCkge1xuICAgICAgICByZXR1cm4gKGVsLmlkID09PSBzaGFwZS5wYXRoSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghIWl0ZW0pIHtcbiAgICAgIGxldCBncm91cCA9IGl0ZW0ucGFyZW50O1xuICAgICAgZ3JvdXAuZGF0YS5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IG1lYXN1cmVMZW5ndGggLyAyO1xuICAgICAgZ3JvdXAuYW5pbWF0ZShbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIHJvdGF0ZTogLTUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgZHVyYXRpb246IHRvdGFsRHVyYXRpb24gLyA0LFxuICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VJbk91dFwiLFxuICAgICAgICAgICAgLy8gY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnYW5pbWF0aW9uIHN0ZXAgMScpXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHNjYWxlOiAxLjE1LFxuICAgICAgICAgICAgcm90YXRlOiA1LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0b3RhbER1cmF0aW9uIC8gMixcbiAgICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5PdXRcIixcbiAgICAgICAgICAgIC8vIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coJ2FuaW1hdGlvbiBzdGVwIDInKVxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBkdXJhdGlvbjogdG90YWxEdXJhdGlvbiAvIDQsXG4gICAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluT3V0XCIsXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmVzb2x2ZShgR3JvdXAgJHtncm91cC5pZH0gZG9uZSBhbmltYXRpbmdgKTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FuaW1hdGlvbiBzdGVwIDMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWplY3QoJ0l0ZW0gbm90IHNwZWNpZmllZC4gQ291bGQgbm90IGFuaW1hdGUnKTtcbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVTaGFwZUZyb21Db21wb3NpdGlvbihzaGFwZUdyb3VwKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93Lmthbi5jb21wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgIGxldCBzb3VuZCA9IHdpbmRvdy5rYW4uY29tcG9zaXRpb25baV07XG5cbiAgICBpZiAoJ2dyb3VwSWQnIGluIHNvdW5kKSB7XG4gICAgICBpZiAoc291bmQuZ3JvdXBJZCA9PT0gc2hhcGVHcm91cC5pZCkge1xuICAgICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoJ3BhdGhJZCcgaW4gc291bmQpIHtcbiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbXMoe1xuICAgICAgICBtYXRjaDogZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwuaWQgPT09IHNvdW5kLnBhdGhJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChpdGVtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCEhaXRlbS5wYXJlbnQgJiYgaXRlbS5wYXJlbnQuY2xhc3NOYW1lID09PSAnR3JvdXAnICYmIGl0ZW0ucGFyZW50LmlkID09PSBzaGFwZUdyb3VwLmlkKSB7XG4gICAgICAgICAgd2luZG93Lmthbi5jb21wb3NpdGlvbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNvdW5kVGltZW91dHMoKSB7XG4gIGlmICh3aW5kb3cua2FuLnNvdW5kVGltZW91dHMubGVuZ3RoID4gMCkge1xuICAgIHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5mb3JFYWNoKChzb3VuZFRpbWVvdXQpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChzb3VuZFRpbWVvdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzID0gW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydENvbXBvc2l0aW9uKGNvbXBvc2l0aW9uLCBsb29wID0gZmFsc2UpIHtcbiAgc3RvcENvbXBvc2l0aW9uKCk7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLnBsYXlQcm9tcHRUaW1lb3V0KTtcblxuICBsZXQgaXRlcmF0aW9ucyA9IDA7XG4gIHBsYXlDb21wb3NpdGlvbkZpcnN0VGltZSgpO1xuXG4gIGZ1bmN0aW9uIHBsYXlDb21wb3NpdGlvbkZpcnN0VGltZSgpIHtcbiAgICBjbGVhclNvdW5kVGltZW91dHMoKTtcbiAgICAvLyBjb25zb2xlLmxvZygncGxheWluZyBjb21wb3NpdGlvbiBmaXJzdCB0aW1lJyk7XG4gICAgbGV0IHRyaW1tZWRDb21wb3NpdGlvbk9iaiA9IGdldFRyaW1tZWRDb21wb3NpdGlvbk9iaihjb21wb3NpdGlvbik7XG5cbiAgICBCYXNlLmVhY2godHJpbW1lZENvbXBvc2l0aW9uT2JqLmNvbXBvc2l0aW9uLCAoc2hhcGUsIGkpID0+IHtcbiAgICAgIGxldCBzb3VuZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF3aW5kb3cua2FuLnBsYXlpbmcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbm90IHBsYXlpbmcsIHJldHVybmluZycpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaGFwZS5zcHJpdGVOYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJyVjc2hhcGUgaXMgbnVsbCcsICdjb2xvcjpyZWQnLCBzaGFwZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmNQbGF5U2hhcGUoc2hhcGUpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgIH0pLmVycm9yKChlKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHBsYXlpbmcgc2hhcGUnLCBlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBzaGFwZS5zdGFydFRpbWUpO1xuICAgICAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLnB1c2goc291bmRUaW1lb3V0KTtcbiAgICB9KTtcblxuICAgIGl0ZXJhdGlvbnMrKztcbiAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uVGltZW91dCA9IHNldFRpbWVvdXQocmVwZWF0Q29tcG9zaXRpb24sIGNvbXBvc2l0aW9uTGVuZ3RoIC0gdHJpbW1lZENvbXBvc2l0aW9uT2JqLnN0YXJ0VGltZSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5Q29tcG9zaXRpb25PbmNlKCkge1xuICAgIGNsZWFyU291bmRUaW1lb3V0cygpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdyZXBlYXQnKTtcbiAgICBCYXNlLmVhY2goY29tcG9zaXRpb24sIChzaGFwZSwgaSkgPT4ge1xuICAgICAgbGV0IHNvdW5kVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXdpbmRvdy5rYW4ucGxheWluZykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3QgcGxheWluZywgcmV0dXJpbmcnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zb2xlLmxvZygncGxheWluZzogJywgc2hhcGUuc291bmQsIHNoYXBlLnNwcml0ZU5hbWUsIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgICAgIGFzeW5jUGxheVNoYXBlKHNoYXBlKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICB9KS5lcnJvcigoZSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBwbGF5aW5nIHNoYXBlJywgZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIHdpbmRvdy5rYW4uc291bmRUaW1lb3V0cy5wdXNoKHNvdW5kVGltZW91dCk7XG4gICAgfSk7XG4gICAgaXRlcmF0aW9ucysrO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVwZWF0Q29tcG9zaXRpb24oKSB7XG4gICAgaWYgKGxvb3AgPT09IHRydWUpIHtcbiAgICAgIHBsYXlDb21wb3NpdGlvbk9uY2UoKTtcbiAgICAgIHdpbmRvdy5rYW4uY29tcG9zaXRpb25JbnRlcnZhbCA9IHNldEludGVydmFsKHBsYXlDb21wb3NpdGlvbk9uY2UsIGNvbXBvc2l0aW9uTGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGl0ZXJhdGlvbnMgPCAyKSB7XG4gICAgICAgIHBsYXlDb21wb3NpdGlvbk9uY2UoKTtcbiAgICAgICAgc2V0VGltZW91dChyZXBlYXRDb21wb3NpdGlvbiwgY29tcG9zaXRpb25MZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RvcFBsYXlpbmcoKTtcbiAgICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ3NoYXJlLXByb21wdCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXN5bmNQbGF5Q29tcG9zaXRpb25NdWx0aXBsZVRpbWVzKHJlcGVhdHMgPSAxKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBsZXQgcHJvbWlzZWRSZXBlYXRzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcGVhdHM7IGkrKykge1xuICAgICAgcHJvbWlzZWRSZXBlYXRzLnB1c2goYXN5bmNQbGF5Q29tcG9zaXRpb25PbmNlKCkpO1xuICAgIH1cblxuICAgIFByb21pc2UuZWFjaChwcm9taXNlZFJlcGVhdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coJ3JlcGVhdCcpO1xuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgcmVzb2x2ZSgnUmVwZWF0cyBkb25lJyk7XG4gICAgfSkuZXJyb3IoKGUpID0+IHtcbiAgICAgIHJlamVjdChlKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3luY1BsYXlDb21wb3NpdGlvbk9uY2UoKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBjb21wb3NpdGlvbiA9IHdpbmRvdy5rYW4uY29tcG9zaXRpb247XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY2xlYXJTb3VuZFRpbWVvdXRzKCk7XG5cbiAgICBsZXQgc2hhcGVQcm9taXNlcyA9IFtdO1xuXG4gICAgc2hhcGUuc3RhcnRLZWVwYWxpdmVBbmltYXRpb24oKTtcblxuICAgIEJhc2UuZWFjaChjb21wb3NpdGlvbiwgKHNoYXBlLCBpKSA9PiB7XG4gICAgICBzaGFwZVByb21pc2VzLnB1c2goYXN5bmNQbGF5U2hhcGVXaXRoRGVsYXkoc2hhcGUpKTtcbiAgICB9KTtcblxuICAgIFByb21pc2UuYWxsKHNoYXBlUHJvbWlzZXMpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgY29uc3QgcGxheVRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyB3YWl0IGZvciBjb21wb3NpdGlvbiB0byBiZSBmdWxseSBkb25lIGJlZm9yZSByZXBlYXRpbmcgKHBsYXkgaXMgbmF0dXJhbGx5IHRydW5jYXRlZCB3aGVuIHRoZSBsYXN0IHNoYXBlIGZpbmlzaGVzIHBsYXlpbmcpXG4gICAgICBpZiAocGxheVRpbWUgPCBjb21wb3NpdGlvbkxlbmd0aCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5kZWxheShjb21wb3NpdGlvbkxlbmd0aCAtIHBsYXlUaW1lKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzaGFwZS5zdG9wS2VlcGFsaXZlQW5pbWF0aW9uKCk7XG4gICAgICAgICAgcmVzb2x2ZShgQ29tcG9zaXRpb24gZnVsbHkgZG9uZSwgYWZ0ZXIgYSB3YWl0YCk7XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaGFwZS5zdG9wS2VlcGFsaXZlQW5pbWF0aW9uKCk7XG4gICAgICAgIHJlc29sdmUoYENvbXBvc2l0aW9uIGZ1bGx5IGRvbmUsIHdpdGggbm8gd2FpdGApO1xuICAgICAgfVxuICAgIH0pLmVycm9yKChlKSA9PiB7XG4gICAgICBzaGFwZS5zdG9wS2VlcGFsaXZlQW5pbWF0aW9uKCk7XG4gICAgICByZWplY3QoZSk7XG4gICAgfSk7XG4gIH0pXG59XG5cbmZ1bmN0aW9uIGFzeW5jUGxheVNoYXBlV2l0aERlbGF5KHNoYXBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBzb3VuZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5aW5nOiAnLCBzaGFwZS5zb3VuZCwgc2hhcGUuc3ByaXRlTmFtZSwgc2hhcGUuc3RhcnRUaW1lKTtcbiAgICAgIGFzeW5jUGxheVNoYXBlKHNoYXBlKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSkuZXJyb3IoKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGBFcnJvciBwbGF5aW5nIHNoYXBlIHdpdGggZGVsYXk6ICR7ZX1gKTtcbiAgICAgIH0pO1xuICAgIH0sIHNoYXBlLnN0YXJ0VGltZSk7XG4gICAgd2luZG93Lmthbi5zb3VuZFRpbWVvdXRzLnB1c2goc291bmRUaW1lb3V0KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wQ29tcG9zaXRpb24oKSB7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb21wb3NpdGlvbkludGVydmFsKTtcbiAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uY29tcG9zaXRpb25UaW1lb3V0KTtcbiAgY2xlYXJTb3VuZFRpbWVvdXRzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmltbWVkQ29tcG9zaXRpb25PYmooY29tcG9zaXRpb24pIHtcbiAgbGV0IGZpcnN0VGltZSA9IDA7XG4gIGxldCB0cmltbWVkQ29tcG9zaXRpb24gPSBbXTtcbiAgbGV0IHN0YXJ0VGltZSA9IGdldENvbXBvc2l0aW9uU3RhcnRUaW1lKGNvbXBvc2l0aW9uKTtcblxuICBjb21wb3NpdGlvbi5mb3JFYWNoKChzb3VuZCkgPT4ge1xuICAgIGxldCBtb2RpZmllZFNvdW5kID0gdXRpbC5zaGFsbG93Q29weShzb3VuZCk7XG4gICAgbW9kaWZpZWRTb3VuZC5zdGFydFRpbWUgPSBzb3VuZC5zdGFydFRpbWUgLSBzdGFydFRpbWU7XG4gICAgaWYgKG1vZGlmaWVkU291bmQuc3RhcnRUaW1lIDwgMCkgbW9kaWZpZWRTb3VuZC5zdGFydFRpbWUgPSAwOyAvLyB0aGlzIHNob3VsZG4ndCBoYXBwZW5cbiAgICB0cmltbWVkQ29tcG9zaXRpb24ucHVzaChtb2RpZmllZFNvdW5kKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb21wb3NpdGlvbjogdHJpbW1lZENvbXBvc2l0aW9uLFxuICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q29tcG9zaXRpb25TdGFydFRpbWUoY29tcG9zaXRpb24pIHtcbiAgbGV0IHN0YXJ0VGltZSA9IGNvbXBvc2l0aW9uTGVuZ3RoO1xuXG4gIGNvbXBvc2l0aW9uLmZvckVhY2goKHNvdW5kKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coc291bmQpO1xuICAgIC8vIGNvbnNvbGUubG9nKHNvdW5kLnN0YXJ0VGltZSlcbiAgICBpZiAoJ3N0YXJ0VGltZScgaW4gc291bmQgJiYgc291bmQuc3RhcnRUaW1lIDwgc3RhcnRUaW1lKSB7XG4gICAgICBzdGFydFRpbWUgPSBzb3VuZC5zdGFydFRpbWU7XG4gICAgfVxuICB9KTtcblxuICAvLyBjb25zb2xlLmxvZygnc3RhcnQgdGltZScsIHN0YXJ0VGltZSk7XG5cbiAgaWYgKHN0YXJ0VGltZSAhPT0gY29tcG9zaXRpb25MZW5ndGgpIHtcbiAgICByZXR1cm4gc3RhcnRUaW1lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG4iLCJjb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHZpZGVvID0gcmVxdWlyZSgnLi92aWRlbycpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcblxuZXhwb3J0IGNvbnN0IGRyYXdJbmFjdGl2aXR5RGVsYXkgPSA0MCAqIDEwMDA7IC8vIG1zXG5leHBvcnQgY29uc3QgY29udGludWVJbmFjdGl2aXR5RGVsYXkgPSAzMCAqIDEwMDA7IC8vIG1zXG5leHBvcnQgY29uc3QgcGxheVByb21wdERlbGF5ID0gNjAgKiAxMDAwOyAvLyBtcztcbmV4cG9ydCBjb25zdCBpbnB1dERlbGF5ID0gMTAwOyAvLyBtc1xuZXhwb3J0IGNvbnN0IHJlZnJlc2hDaGVja0RlbGF5ID0gNjAgKiAxMDAwOyAvLyBtc1xuZXhwb3J0IGNvbnN0IG92ZXJsYXlEZWxheSA9IDEwMDA7IC8vIG1zXG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gubGVuZ3RoID4gMCAmJiB3aW5kb3cubG9jYXRpb24uaGFzaCA9PSAnI2RldicpIHtcbiAgICB3aW5kb3cua2FuLm92ZXJsYXlzID0gZmFsc2U7XG4gICAgdmlkZW8ucGF1c2VWaWRlbygpO1xuICAgIHZpZGVvLmV4aXRUdXRvcmlhbE1vZGUoKTtcbiAgfSBlbHNlIHtcbiAgICB2aWRlby5lbnRlclR1dG9yaWFsTW9kZSgpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50SW5hY3Rpdml0eVRpbWVvdXQoKSB7XG4gIGNvbnNvbGUubG9nKGBwcmV2ZW50IHRpbWVvdXQ6ICR7dXRpbC5nZXRUaW1lKCl9YCk7XG4gIC8vIG92ZXJsYXlzLmNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuXG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLmluYWN0aXZpdHlUaW1lb3V0KTtcbiAgY2xlYXJJbnRlcnZhbCh3aW5kb3cua2FuLmNvbnRpbnVlQ291bnRkb3duSW50ZXJ2YWwpO1xuXG4gIHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnY29udGludWUnKTtcbiAgfSwgZHJhd0luYWN0aXZpdHlEZWxheSk7XG59XG4iLCJyZXF1aXJlKCdoYW1tZXJqcycpO1xuXG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuLy4uLy4uL2NvbmZpZycpO1xuY29uc3Qgc291bmQgPSByZXF1aXJlKCcuL3NvdW5kJyk7XG5jb25zdCBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbmNvbnN0IHNoYXBlID0gcmVxdWlyZSgnLi9zaGFwZScpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCB0aW1pbmcgPSByZXF1aXJlKCcuL3RpbWluZycpO1xuY29uc3Qgb3ZlcmxheXMgPSByZXF1aXJlKCcuL292ZXJsYXlzJyk7XG5jb25zdCB1aSA9IHJlcXVpcmUoJy4vdWknKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbmNvbnN0IGhpdE9wdGlvbnMgPSB7XG4gIHNlZ21lbnRzOiBmYWxzZSxcbiAgc3Ryb2tlOiB0cnVlLFxuICBmaWxsOiB0cnVlLFxuICB0b2xlcmFuY2U6IDVcbn07XG5cbmNvbnN0IG1pblNoYXBlU2l6ZSA9IDEwMDtcbmNvbnN0IG1heFNoYXBlTGVuZ3RoID0gNTAwMDtcbmNvbnN0IG1heFNjYWxlRmFjdG9yID0gMC44O1xuXG5sZXQgb3V0ZXJQYXRoO1xubGV0IHNpemVzID0gW107XG5sZXQgc2l6ZTtcbmxldCBjdW1TaXplO1xubGV0IHByZXZQb2ludDtcblxuZXhwb3J0IGxldCBoYW1tZXJUaXBzO1xuZXhwb3J0IGxldCBoYW1tZXJDYW52YXM7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBoYW1tZXJUaXBzID0gbmV3IEhhbW1lci5NYW5hZ2VyKHVpLnRpcHNPdmVybGF5KTtcbiAgaGFtbWVyVGlwcy5hZGQobmV3IEhhbW1lci5Td2lwZSh7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9BTEwgfSkpO1xuICBoYW1tZXJUaXBzLm9uKCdzd2lwZScsIG92ZXJsYXlzLmNhcmROYXZOZXh0KTtcblxuICBoYW1tZXJDYW52YXMgPSBuZXcgSGFtbWVyLk1hbmFnZXIodWkuZHJhd0NhbnZhcyk7XG4gIGhhbW1lckNhbnZhcy5hZGQobmV3IEhhbW1lci5UYXAoeyBldmVudDogJ2RvdWJsZXRhcCcsIHRhcHM6IDIsIGludGVydmFsOiA0MDAsIHRpbWU6IDE1MCwgcG9zVGhyZXNob2xkOiA1MCB9KSk7XG4gIGhhbW1lckNhbnZhcy5hZGQobmV3IEhhbW1lci5UYXAoeyBldmVudDogJ3NpbmdsZXRhcCcgfSkpO1xuICBoYW1tZXJDYW52YXMuYWRkKG5ldyBIYW1tZXIuUGFuKHsgZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX0FMTCB9KSk7XG4gIGhhbW1lckNhbnZhcy5hZGQobmV3IEhhbW1lci5QaW5jaCgpKTtcblxuICBoYW1tZXJDYW52YXMuZ2V0KCdkb3VibGV0YXAnKS5yZWNvZ25pemVXaXRoKCdzaW5nbGV0YXAnKTtcbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgnc2luZ2xldGFwJykucmVxdWlyZUZhaWx1cmUoJ2RvdWJsZXRhcCcpO1xuICBoYW1tZXJDYW52YXMuZ2V0KCdwYW4nKS5yZXF1aXJlRmFpbHVyZSgncGluY2gnKTtcbiAgaGFtbWVyQ2FudmFzLmdldCgncGluY2gnKS5yZXF1aXJlRmFpbHVyZSgncGFuJyk7XG5cbiAgLy8gaGFtbWVyQ2FudmFzLm9uKCdzaW5nbGV0YXAnLCBzaW5nbGVUYXApO1xuICBoYW1tZXJDYW52YXMub24oJ2RvdWJsZXRhcCcsIGRvdWJsZVRhcCk7XG5cbiAgaGFtbWVyQ2FudmFzLm9uKCdwYW5zdGFydCcsIHBhblN0YXJ0KTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdwYW5tb3ZlJywgcGFuTW92ZSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGFuZW5kJywgcGFuRW5kKTtcbiAgLy8gaGFtbWVyQ2FudmFzLm9uKCdwYW5jYW5jZWwnLCBwYW5DYW5jZWwpO1xuXG4gIGhhbW1lckNhbnZhcy5vbigncGluY2hzdGFydCcsIHBpbmNoU3RhcnQpO1xuICBoYW1tZXJDYW52YXMub24oJ3BpbmNobW92ZScsIHBpbmNoTW92ZSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGluY2hlbmQnLCBwaW5jaEVuZCk7XG4gIC8vIGhhbW1lckNhbnZhcy5vbigncGluY2hjYW5jZWwnLCBwaW5jaENhbmNlbCk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVBhbkFuZFBpbmNoRXZlbnRzKCkge1xuICBlbmFibGVQYW5FdmVudHMoKTtcbiAgZW5hYmxlUGluY2hFdmVudHMoKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlVGFwRXZlbnRzKGVuYWJsZSA9IHRydWUpIHtcbiAgZW5hYmxlID0gZW5hYmxlID09PSB0cnVlO1xuICBoYW1tZXJDYW52YXMuZ2V0KCdzaW5nbGV0YXAnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIGhhbW1lckNhbnZhcy5nZXQoJ2RvdWJsZXRhcCcpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZVRhcEV2ZW50cygpIHtcbiAgZW5hYmxlVGFwRXZlbnRzKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlUGFuRXZlbnRzKGVuYWJsZSA9IHRydWUpIHtcbiAgZW5hYmxlID0gZW5hYmxlID09PSB0cnVlO1xuXG4gIGhhbW1lckNhbnZhcy5nZXQoJ3BhbicpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgncGFuc3RhcnQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3Bhbm1vdmUnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbmVuZCcpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZVBhbkV2ZW50cygpIHtcbiAgZW5hYmxlUGFuRXZlbnRzKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlUGluY2hFdmVudHMoZW5hYmxlID0gdHJ1ZSkge1xuICBlbmFibGUgPSBlbmFibGUgPT09IHRydWU7XG5cbiAgaGFtbWVyQ2FudmFzLmdldCgncGluY2gnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNoc3RhcnQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BpbmNobW92ZScpLnNldCh7ZW5hYmxlOiBlbmFibGV9KTtcbiAgLy8gaGFtbWVyQ2FudmFzLmdldCgncGluY2hlbmQnKS5zZXQoe2VuYWJsZTogZW5hYmxlfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVQaW5jaEV2ZW50cygpIHtcbiAgZW5hYmxlUGluY2hFdmVudHMoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBzaW5nbGVUYXAoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuICAvLyAkKGV2ZW50LnRhcmdldCkuY2xpY2soKTtcblxuICAvLyBzb3VuZC5zdG9wUGxheWluZygpO1xuICAvLyBpZiAoIWV2ZW50VGFyZ2V0SXNPbkNhbnZhcyhldmVudCkpIHJldHVybjtcbiAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xuICAvLyB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgLy9cbiAgLy8gc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy9cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcixcbiAgICAgIHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KSxcbiAgICAgIGhpdFJlc3VsdCA9IHBhcGVyLnByb2plY3QuaGl0VGVzdChwb2ludCwgaGl0T3B0aW9ucyk7XG5cbiAgaWYgKGhpdFJlc3VsdCkge1xuICAgIGxldCBpdGVtID0gaGl0UmVzdWx0Lml0ZW07XG4gICAgLy8gaXRlbS5zZWxlY3RlZCA9ICFpdGVtLnNlbGVjdGVkO1xuICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvdWJsZVRhcChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyBjb25zb2xlLmxvZygnZG91YmxldGFwJyk7XG5cbiAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNlbnRlcixcbiAgICAgIHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KSxcbiAgICAgIGhpdFJlc3VsdCA9IHBhcGVyLnByb2plY3QuaGl0VGVzdChwb2ludCwgaGl0T3B0aW9ucyk7XG5cbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG5cblxuICBpZiAoaGl0UmVzdWx0KSB7XG4gICAgc2hhcGUudG9nZ2xlRmlsbChoaXRSZXN1bHQuaXRlbSk7XG4gICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRCeU5hbWUoJ2ZpbGwnKTtcblxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgICAvLyBjb25zb2xlLmxvZygnaGl0IG5vIGl0ZW0nKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYW5TdGFydChldmVudCkge1xuICAvLyBjb25zb2xlLmxvZyhldmVudCk7XG4gIC8vIGNvbnNvbGUubG9nKCdwYW5zdGFydCcpO1xuICAvLyBwYXBlci5wcm9qZWN0LmFjdGl2ZUxheWVyLnJlbW92ZUNoaWxkcmVuKCk7IC8vIFJFTU9WRVxuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KCk7XG5cbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSB7XG4gICAgd2luZG93Lmthbi5wYW5uaW5nID0gZmFsc2U7XG4gICAgLy8gY2hlY2sgaWYgdGlwcyBtb2RhbCBpcyB1cFxuICAgIGlmICgkYm9keS5oYXNDbGFzcygnb3ZlcmxheS1hY3RpdmUgdGlwcy1hY3RpdmUnKSkge1xuICAgICAgLy8gaWYgc28sIGdvIHRvIG5leHQgdGlwIGNhcmRcbiAgICAgIG92ZXJsYXlzLmNhcmROYXZOZXh0KCk7XG4gICAgfVxuICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHdpbmRvdy5rYW4ucGFubmluZyA9IHRydWU7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGhhbW1lckNhbnZhcy5vZmYoJ3BhbnN0YXJ0Jyk7XG4gIC8vIGhhbW1lckNhbnZhcy5nZXQoJ3BhbicpLnNldCh7ZW5hYmxlOiBmYWxzZX0pO1xuICBkaXNhYmxlUGluY2hFdmVudHMoKTtcbiAgZGlzYWJsZVRhcEV2ZW50cygpO1xuXG4gIC8vIGlnbm9yZSBvdGhlciB0b3VjaCBpbnB1dHNcbiAgLy8gaWYgKHdpbmRvdy5rYW4ucGluY2hpbmcpIHJldHVybjtcbiAgLy8gaWYgKCEoZXZlbnQuY2hhbmdlZFBvaW50ZXJzICYmIGV2ZW50LmNoYW5nZWRQb2ludGVycy5sZW5ndGggPiAwKSkgcmV0dXJuO1xuICAvLyBpZiAoZXZlbnQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCA+IDEpIHtcbiAgLy8gICBjb25zb2xlLmxvZygnZXZlbnQuY2hhbmdlZFBvaW50ZXJzID4gMScpO1xuICAvLyB9XG5cbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcblxuICB3aW5kb3cua2FuLnByZXZBbmdsZSA9IE1hdGguYXRhbjIoZXZlbnQudmVsb2NpdHlZLCBldmVudC52ZWxvY2l0eVgpO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXI7XG4gIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KTtcblxuICBvdXRlclBhdGggPSBuZXcgUGF0aCgpO1xuICBvdXRlclBhdGguZmlsbENvbG9yID0gd2luZG93Lmthbi5jdXJyZW50Q29sb3I7XG4gIC8vIG91dGVyUGF0aC5maWxsQ29sb3IgPSBuZXcgQ29sb3IoMCwgMC41KTtcblxuICBzaXplcyA9IFtdO1xuXG4gIGxldCBzaGFwZVBhdGggPSBuZXcgUGF0aCh7XG4gICAgc3Ryb2tlQ29sb3I6IHdpbmRvdy5rYW4uY3VycmVudENvbG9yLFxuICAgIG5hbWU6ICdzaGFwZVBhdGgnLFxuICAgIHN0cm9rZVdpZHRoOiA1LFxuICAgIHZpc2libGU6IGZhbHNlLFxuICAgIHN0cm9rZUNhcDogJ3JvdW5kJ1xuICB9KTtcblxuICBzaGFwZVBhdGguYWRkKHBvaW50KTtcblxuICB3aW5kb3cua2FuLnBhdGhEYXRhW3NoYXBlLnN0cmluZ2lmeVBvaW50KHBvaW50KV0gPSB7XG4gICAgcG9pbnQ6IHBvaW50LFxuICAgIGZpcnN0OiB0cnVlXG4gIH07XG5cbiAgd2luZG93Lmthbi5zaGFwZVBhdGggPSBzaGFwZVBhdGg7XG59XG5cbmZ1bmN0aW9uIHBhbk1vdmUoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coJ3Bhbm1vdmUnKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSB7XG4gICAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cua2FuLnBhbm5pbmcgIT09IHRydWUpIHJldHVybjtcblxuICAvLyBkb24ndCBsZXQgdGhlIHVzZXIgZHJhdyBwYXN0IHRoZSBtYXggbGVuZ3RoXG4gIGlmICh3aW5kb3cua2FuLnNoYXBlUGF0aC5sZW5ndGggPD0gbWF4U2hhcGVMZW5ndGgpIHtcbiAgICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyO1xuICAgIGxldCBwb2ludCA9IG5ldyBQb2ludChwb2ludGVyLngsIHBvaW50ZXIueSk7XG5cbiAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKGV2ZW50LnZlbG9jaXR5WSwgZXZlbnQudmVsb2NpdHlYKTtcbiAgICBsZXQgcHJldkFuZ2xlID0gd2luZG93Lmthbi5wcmV2QW5nbGU7XG4gICAgbGV0IGFuZ2xlRGVsdGEgPSB1dGlsLmFuZ2xlRGVsdGEoYW5nbGUsIHByZXZBbmdsZSk7XG4gICAgd2luZG93Lmthbi5wcmV2QW5nbGUgPSBhbmdsZTtcblxuICAgIHdoaWxlIChzaXplcy5sZW5ndGggPiAxMCkge1xuICAgICAgc2l6ZXMuc2hpZnQoKTtcbiAgICB9XG4gICAgaWYgKHNpemVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGRpc3QgPSBwcmV2UG9pbnQuZ2V0RGlzdGFuY2UocG9pbnQpO1xuXG4gICAgICAvLyBUaGVzZSBhcmUgYmFzZWQgb24gYWNjZWxlcmF0aW9uXG4gICAgICBzaXplID0gTWF0aC5yYW5kb20oKSAqIDEwOyAvLyBUaGlzIGlzIGp1c3QgcmFuZG9tIHZhcmlhbmNlXG5cbiAgICAgIGN1bVNpemUgPSAwO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjdW1TaXplICs9IHNpemVzW2pdO1xuICAgICAgfVxuICAgICAgLy8gY29uc3QgYXZnU2l6ZSA9ICgoY3VtU2l6ZSAvIHNpemVzLmxlbmd0aCkgKyBzaXplKSAvIDI7XG4gICAgICBjb25zdCBhdmdTaXplID0gTWF0aC5tYXgoNSwgKChjdW1TaXplIC8gc2l6ZXMubGVuZ3RoKSArIHNpemUpIC8gMik7XG5cbiAgICAgIGNvbnN0IGhhbGZQb2ludFggPSAocG9pbnQueCArIHByZXZQb2ludC54KSAvIDI7XG4gICAgICBjb25zdCBoYWxmUG9pbnRZID0gKHBvaW50LnkgKyBwcmV2UG9pbnQueSkgLyAyO1xuICAgICAgY29uc3QgaGFsZlBvaW50ID0gbmV3IFBvaW50KGhhbGZQb2ludFgsIGhhbGZQb2ludFkpO1xuXG4gICAgICBjb25zdCB0b3BYID0gaGFsZlBvaW50LnggKyBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkvMikgKiBhdmdTaXplO1xuICAgICAgY29uc3QgdG9wWSA9IGhhbGZQb2ludC55ICsgTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICAgIGNvbnN0IHRvcCA9IG5ldyBQb2ludCh0b3BYLCB0b3BZKTtcblxuICAgICAgY29uc3QgYm90dG9tWCA9IGhhbGZQb2ludC54ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJLzIpICogYXZnU2l6ZTtcbiAgICAgIGNvbnN0IGJvdHRvbVkgPSBoYWxmUG9pbnQueSArIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSS8yKSAqIGF2Z1NpemU7XG4gICAgICBjb25zdCBib3R0b20gPSBuZXcgUG9pbnQoYm90dG9tWCwgYm90dG9tWSk7XG5cbiAgICAgIG91dGVyUGF0aC5hZGQodG9wKTtcbiAgICAgIG91dGVyUGF0aC5pbnNlcnQoMCwgYm90dG9tKTtcbiAgICAgIG91dGVyUGF0aC5zbW9vdGgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2l6ZSA9IDU7XG4gICAgfVxuXG4gICAgc2l6ZXMucHVzaChzaXplKTtcbiAgICBwcmV2UG9pbnQgPSBwb2ludDtcblxuICAgIHdpbmRvdy5rYW4ucGF0aERhdGFbc2hhcGUuc3RyaW5naWZ5UG9pbnQocG9pbnQpXSA9IHtcbiAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgIHNwZWVkOiBNYXRoLmFicyhldmVudC5vdmVyYWxsVmVsb2NpdHkpLFxuICAgICAgYW5nbGU6IGFuZ2xlXG4gICAgfTtcblxuICAgIHdpbmRvdy5rYW4uc2hhcGVQYXRoLmFkZChwb2ludCk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lmthbi5zaGFwZVBhdGguZGF0YS50b29Mb25nID0gdHJ1ZTtcbiAgfVxuXG4gIHBhcGVyLnZpZXcuZHJhdygpO1xufVxuXG5mdW5jdGlvbiBwYW5FbmQoZXZlbnQpIHtcbiAgLy8gY29uc29sZS5sb2coJ3BhbmVuZCcpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBpZiAoIWV2ZW50VGFyZ2V0SXNPbkNhbnZhcyhldmVudCkpIHtcbiAgICBldmVudC5zcmNFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHdpbmRvdy5rYW4ucGFubmluZyAhPT0gdHJ1ZSkgcmV0dXJuO1xuXG4gIGNvbnN0IHBvaW50ZXIgPSBldmVudC5jZW50ZXI7XG4gIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHBvaW50ZXIueCwgcG9pbnRlci55KTtcblxuICBjb25zdCB0cmFuc3BhcmVudCA9IGNvbG9yLnRyYW5zcGFyZW50O1xuICBjb25zdCBjb2xvck5hbWUgPSBjb2xvci5nZXRDb2xvck5hbWUod2luZG93Lmthbi5jdXJyZW50Q29sb3IpO1xuXG4gIGxldCBtb3ZlID0geyB0eXBlOiAnbmV3R3JvdXAnIH07XG5cbiAgbGV0IHNoYXBlUGF0aCA9IHdpbmRvdy5rYW4uc2hhcGVQYXRoO1xuXG4gIGlmIChzaGFwZVBhdGgubGVuZ3RoIDw9IG1heFNoYXBlTGVuZ3RoKSB7XG4gICAgc2hhcGVQYXRoLmFkZChwb2ludCk7XG4gIH1cbiAgb3V0ZXJQYXRoLnZpc2libGUgPSBmYWxzZTtcblxuICBpZiAoc2hhcGVQYXRoLmxlbmd0aCA8IG1pblNoYXBlU2l6ZSB8fCAoc2hhcGVQYXRoLmRhdGEgJiYgc2hhcGVQYXRoLmRhdGEudG9vTG9uZyA9PT0gdHJ1ZSkpIHtcbiAgICAvLyBjb25zb2xlLmxvZygncGF0aCBpcyB0b28gc2hvcnQnKTtcbiAgICBzaGFwZVBhdGgucmVtb3ZlKCk7XG4gICAgaGFtbWVyQ2FudmFzLm9uKCdwYW5zdGFydCcsIHBhblN0YXJ0KTtcbiAgICBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpO1xuICAgIGVuYWJsZVRhcEV2ZW50cygpO1xuICAgIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHZpc2libGVHcm91cHMgPSB1dGlsLmdldFZpc2libGVHcm91cHMoKTtcbiAgaWYgKHZpc2libGVHcm91cHMubGVuZ3RoID49IGNvbmZpZy5tYXhTaGFwZXMpIHtcbiAgICAvLyB0b28gbWFueSBzaGFwZXMgb24gY2FudmFzLCByZW1vdmUgZmlyc3Qgc2hhcGVcbiAgICAvLyBUT0RPOiBwbGFjZSBvbiBtb3ZlcyBzdGFjayBzbyB0aGF0IHRoZXkgY2FuIGJlIHJlc3RvcmVkIHdpdGggYW4gdW5kb1xuICAgIGNvbnN0IGZpcnN0R3JvdXAgPSB2aXNpYmxlR3JvdXBzWzBdO1xuICAgIHNoYXBlLmRlc3Ryb3lHcm91cFBvcHMoZmlyc3RHcm91cCk7XG4gICAgc291bmQucmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24oZmlyc3RHcm91cCk7XG4gICAgbW92ZS5yZW1vdmVkR3JvdXAgPSBmaXJzdEdyb3VwO1xuICAgIC8vIGZpcnN0R3JvdXAucmVtb3ZlKCk7XG4gICAgZmlyc3RHcm91cC52aXNpYmxlID0gZmFsc2U7XG4gIH1cblxuICB3aW5kb3cua2FuLnBhdGhEYXRhW3NoYXBlLnN0cmluZ2lmeVBvaW50KHBvaW50KV0gPSB7XG4gICAgcG9pbnQ6IHBvaW50LFxuICAgIGxhc3Q6IHRydWVcbiAgfTtcblxuICBsZXQgZ3JvdXAgPSBuZXcgR3JvdXAoKTtcblxuICBsZXQgdHJ1ZWRTaGFwZSA9IHNoYXBlLmdldFRydWVkU2hhcGUoc2hhcGVQYXRoKTtcblxuICAvLyBncm91cC5kYXRhLmNvbG9yID0gdHJ1ZWRTaGFwZS5zdHJva2VDb2xvcjtcbiAgLy8gY29uc29sZS5sb2coJ2N1cnJlbnRHcmFkaWVudDonLCBjb25maWcucGFsZXR0ZS5ncmFkaWVudHNbd2luZG93Lmthbi5jdXJyZW50Q29sb3JdKTtcblxuICBjb25zdCBzaGFwZVNpemUgPSB0cnVlZFNoYXBlLnN0cm9rZUJvdW5kcztcbiAgY29uc3QgY2VudGVyUG9pbnQgPSBuZXcgUG9pbnQoc2hhcGVTaXplLndpZHRoIC8gMiwgc2hhcGVTaXplLmhlaWdodCAvIDIpO1xuICBjb25zdCBhbmdsZSA9IHV0aWwucmFkKE1hdGgucmFuZG9tKCkgKiAzNjApO1xuICBjb25zdCBncmFkaWVudFNpemUgPSAoc2hhcGVTaXplLndpZHRoICsgc2hhcGVTaXplLmhlaWdodCkgLyA0O1xuICBjb25zdCBvcmlnaW5YID0gY2VudGVyUG9pbnQueCArIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSS8yKSAqIGdyYWRpZW50U2l6ZTtcbiAgY29uc3Qgb3JpZ2luWSA9IGNlbnRlclBvaW50LnkgKyBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkvMikgKiBncmFkaWVudFNpemU7XG4gIGNvbnN0IGRlc3RpbmF0aW9uWCA9IGNlbnRlclBvaW50LnggKyBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkvMikgKiBncmFkaWVudFNpemU7XG4gIGNvbnN0IGRlc3RpbmF0aW9uWSA9IGNlbnRlclBvaW50LnkgKyBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkvMikgKiBncmFkaWVudFNpemU7XG5cbiAgY29uc3Qgb3JpZ2luID0gbmV3IFBvaW50KG9yaWdpblggKyBzaGFwZVNpemUueCwgb3JpZ2luWSArIHNoYXBlU2l6ZS55KTtcbiAgY29uc3QgZGVzdGluYXRpb24gPSBuZXcgUG9pbnQoZGVzdGluYXRpb25YICsgc2hhcGVTaXplLngsIGRlc3RpbmF0aW9uWSArIHNoYXBlU2l6ZS55KTtcbiAgLy8gZ3JvdXAuYWRkQ2hpbGQobmV3IFBhdGguQ2lyY2xlKHtcbiAgLy8gICBjZW50ZXI6IG9yaWdpbixcbiAgLy8gICByYWRpdXM6IDUsXG4gIC8vICAgZmlsbENvbG9yOiAncmVkJyxcbiAgLy8gfSkpO1xuICAvLyBncm91cC5hZGRDaGlsZChuZXcgUGF0aC5DaXJjbGUoe1xuICAvLyAgIGNlbnRlcjogZGVzdGluYXRpb24sXG4gIC8vICAgcmFkaXVzOiA1LFxuICAvLyAgIGZpbGxDb2xvcjogJ2dyZWVuJyxcbiAgLy8gfSkpO1xuICBncm91cC5kYXRhLm9yaWdpbmFsQ29sb3IgPSB3aW5kb3cua2FuLmN1cnJlbnRDb2xvcjtcbiAgZ3JvdXAuZGF0YS5jb2xvciA9IHtcbiAgICBncmFkaWVudDoge1xuICAgICAgc3RvcHM6IGNvbmZpZy5wYWxldHRlLmdyYWRpZW50c1t3aW5kb3cua2FuLmN1cnJlbnRDb2xvcl0sXG4gICAgfSxcbiAgICBvcmlnaW46IG9yaWdpbixcbiAgICBkZXN0aW5hdGlvbjogZGVzdGluYXRpb24sXG4gIH07XG4gIGdyb3VwLmRhdGEuc2NhbGUgPSAxOyAvLyBpbml0IHZhcmlhYmxlIHRvIHRyYWNrIHNjYWxlIGNoYW5nZXNcbiAgZ3JvdXAuZGF0YS5yb3RhdGlvbiA9IDA7IC8vIGluaXQgdmFyaWFibGUgdG8gdHJhY2sgcm90YXRpb24gY2hhbmdlc1xuICBncm91cC5kYXRhLmZyZXNoID0gdHJ1ZTtcblxuICBzaGFwZVBhdGgucmVtb3ZlKCk7XG4gIHRydWVkU2hhcGUudmlzaWJsZSA9IGZhbHNlO1xuICB0cnVlZFNoYXBlLnN0cm9rZUNvbG9yID0gbmV3IENvbG9yKDAsIDApO1xuICB3aW5kb3cua2FuLnNoYXBlUGF0aCA9IHRydWVkU2hhcGU7XG4gIHRydWVkU2hhcGUubmFtZSA9ICdzaGFwZVBhdGgnO1xuXG4gIGlmICghKHRydWVkU2hhcGUubGVuZ3RoID4gMCkpIHtcbiAgICB0cnVlZFNoYXBlLnJlbW92ZSgpO1xuICAgIGdyb3VwLnJlbW92ZSgpO1xuICAgIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGdyb3VwLmFkZENoaWxkKHRydWVkU2hhcGUpO1xuXG4gIGxldCBzaGFwZVNvdW5kT2JqID0gc291bmQuZ2V0U2hhcGVTb3VuZE9iaih0cnVlZFNoYXBlKTtcbiAgd2luZG93Lmthbi5jb21wb3NpdGlvbi5wdXNoKHNoYXBlU291bmRPYmopO1xuXG4gIHRydWVkU2hhcGUudmlzaWJsZSA9IGZhbHNlO1xuICBjb25zdCBvdXRsaW5lR3JvdXAgPSBzaGFwZS5nZXRPdXRsaW5lR3JvdXAodHJ1ZWRTaGFwZSk7XG4gIGNvbnN0IG91dGxpbmUgPSBvdXRsaW5lR3JvdXAuX25hbWVkQ2hpbGRyZW4ub3V0ZXJbMF0uY2xvbmUoKTtcbiAgb3V0bGluZS5uYW1lID0gJ291dGVyJztcbiAgb3V0bGluZS5maWxsQ29sb3IgPSB3aW5kb3cua2FuLmN1cnJlbnRDb2xvcjtcbiAgb3V0bGluZS5maWxsQ29sb3IgPSBncm91cC5kYXRhLmNvbG9yO1xuXG4gIGNvbnN0IG91dGxpbmVDZW50ZXIgPSBvdXRsaW5lR3JvdXAuX25hbWVkQ2hpbGRyZW4ubWlkZGxlWzBdLmNsb25lKCk7XG4gIG91dGxpbmVDZW50ZXIuc3Ryb2tlQ29sb3IgPSBncm91cC5kYXRhLmNvbG9yO1xuICBvdXRsaW5lQ2VudGVyLnZpc2libGUgPSBmYWxzZTtcbiAgZ3JvdXAuYWRkQ2hpbGQob3V0bGluZSk7XG4gIG91dGxpbmUuc2VuZFRvQmFjaygpO1xuXG4gIG91dGxpbmVHcm91cC5yZW1vdmUoKTtcblxuICBsZXQgc2hhcGVNYXNrID0gb3V0bGluZS5jbG9uZSgpO1xuICBzaGFwZU1hc2suZmlsbENvbG9yID0gb3V0bGluZS5maWxsQ29sb3I7XG4gIHNoYXBlTWFzay5zdHJva2VDb2xvciA9IG91dGxpbmUuc3Ryb2tlQ29sb3I7XG4gIHNoYXBlTWFzay5jbG9zZWQgPSB0cnVlO1xuXG4gIGxldCBlbmNsb3NlZExvb3BzID0gc2hhcGUuZmluZEludGVyaW9yQ3VydmVzKG91dGxpbmVDZW50ZXIpO1xuICBpZiAoZW5jbG9zZWRMb29wcy5sZW5ndGggPiAwIHx8IHRydWVkU2hhcGUuY2xvc2VkID09PSB0cnVlKSB7XG4gICAgZ3JvdXAuZGF0YS5saW5lID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgZ3JvdXAuZGF0YS5saW5lID0gdHJ1ZTtcbiAgfVxuXG4gIGVuY2xvc2VkTG9vcHMuZm9yRWFjaCgobG9vcCkgPT4ge1xuICAgIHNoYXBlTWFzay51bml0ZShsb29wKTtcbiAgICBzaGFwZU1hc2suc2VuZFRvQmFjaygpO1xuICAgIGxvb3AubmFtZSA9ICdsb29wJztcbiAgICBsb29wLmRhdGEubG9vcCA9IHRydWU7XG4gICAgbG9vcC52aXNpYmxlID0gdHJ1ZTtcbiAgICBncm91cC5hZGRDaGlsZChsb29wKTtcbiAgfSk7XG5cblxuICBzaGFwZU1hc2sudW5pdGUoKTtcbiAgbGV0IGNyb3NzaW5ncyA9IHNoYXBlTWFzay5yZXNvbHZlQ3Jvc3NpbmdzKCk7XG4gIGlmICghIWNyb3NzaW5ncyAmJiAhIWNyb3NzaW5ncy5jaGlsZHJlbiAmJiBjcm9zc2luZ3MuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgIGxldCBtYXhBcmVhID0gMCwgbWF4Q2hpbGQgPSBudWxsO1xuICAgIGNyb3NzaW5ncy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgaWYgKGNoaWxkLmFyZWEgPiBtYXhBcmVhKSB7XG4gICAgICAgIG1heENoaWxkID0gY2hpbGQ7XG4gICAgICAgIG1heEFyZWEgPSBjaGlsZC5hcmVhO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2hhcGVNYXNrID0gbWF4Q2hpbGQ7XG4gIH1cblxuICBvdXRsaW5lQ2VudGVyLnJlbW92ZSgpO1xuICBzaGFwZU1hc2sudmlzaWJsZSA9IGZhbHNlO1xuICBzaGFwZU1hc2submFtZSA9ICdtYXNrJztcbiAgc2hhcGVNYXNrLmRhdGEubWFzayA9IHRydWU7XG4gIGdyb3VwLmFkZENoaWxkKHNoYXBlTWFzayk7XG4gIHNoYXBlTWFzay5zZW5kVG9CYWNrKCk7XG5cbiAgc2hhcGUuY2xlYW5VcEdyb3VwKGdyb3VwKTtcblxuICBtb3ZlLmlkID0gZ3JvdXAuaWQ7XG4gIHdpbmRvdy5rYW4ubW92ZXMucHVzaChtb3ZlKTtcblxuXG4gIHVpLnVuZGl0aGVyQnV0dG9uc0J5TmFtZShbJ25ldycsICd1bmRvJywgJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgJGJvZHkuYWRkQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcyk7XG5cbiAgaWYgKHdpbmRvdy5rYW4udXNlckhhc0RyYXduRmlyc3RTaGFwZSAhPT0gdHJ1ZSkge1xuICAgIC8vIGZpcnN0IHNoYXBlIVxuICAgIC8vIHNldCBwbGF5IHByb21wdCB0aW1lb3V0XG4gICAgd2luZG93Lmthbi5wbGF5UHJvbXB0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoJ3BsYXktcHJvbXB0Jyk7XG4gICAgfSwgdGltaW5nLnBsYXlQcm9tcHREZWxheSk7XG5cbiAgICB3aW5kb3cua2FuLnVzZXJIYXNEcmF3bkZpcnN0U2hhcGUgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgY29uc3Qgc2NhbGVGYWN0b3IgPSAwLjk7XG4gICAgZ3JvdXAuYW5pbWF0ZShcbiAgICAgIFt7XG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzY2FsZTogc2NhbGVGYWN0b3JcbiAgICAgICAgfSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBkdXJhdGlvbjogMTAwLFxuICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0XCIsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzY2FsZTogMSAvIHNjYWxlRmFjdG9yXG4gICAgICAgIH0sXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluXCIsXG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgKTtcbiAgfVxuXG4gIGlmICghdHV0b3JpYWwuYWxsVHV0c0NvbXBsZXRlZCgpKSB7XG4gICAgY29uc3QgdHV0b3JpYWxDb21wbGV0aW9uID0gd2luZG93Lmthbi50dXRvcmlhbENvbXBsZXRpb247XG4gICAgbGV0IHR1dE5hbWUgPSBudWxsO1xuXG4gICAgaWYgKCF0dXRvcmlhbENvbXBsZXRpb25bJ2ZpbGwnXSAmJiB0cnVlZFNoYXBlLmNsb3NlZCkge1xuICAgICAgdHV0TmFtZSA9ICdmaWxsJztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGdyb3VwcyA9IHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgICAgICBtYXRjaDogZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwuY2xhc3NOYW1lID09PSAnR3JvdXAnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCF0dXRvcmlhbENvbXBsZXRpb25bJ3BpbmNoJ10gJiYgZ3JvdXBzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIHR1dE5hbWUgPSAncGluY2gnO1xuICAgICAgfSBlbHNlIGlmICghdHV0b3JpYWxDb21wbGV0aW9uWydzd2lwZSddICYmIGdyb3Vwcy5sZW5ndGggPj0gNSkge1xuICAgICAgICB0dXROYW1lID0gJ3N3aXBlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHV0TmFtZSAhPT0gbnVsbCkge1xuICAgICAgLy8gY29uc29sZS5sb2coYCR7dHV0TmFtZX0gdHV0b3JpYWxgKTtcbiAgICAgIHR1dG9yaWFsLmFkZENvbnRleHR1YWxUdXQodHV0TmFtZSk7XG4gICAgICB3aW5kb3cua2FuLnR1dG9yaWFsQ29tcGxldGlvblt0dXROYW1lXSA9IHRydWU7XG4gICAgICBncm91cC5kYXRhLnR1dCA9IHR1dE5hbWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheSAhPT0gbnVsbCkge1xuICAgIGxldCBzY2hlZHVsZWRPdmVybGF5ID0gd2luZG93Lmthbi5zY2hlZHVsZWRPdmVybGF5O1xuICAgIHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheSA9IG51bGw7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvdmVybGF5cy5vcGVuT3ZlcmxheShzY2hlZHVsZWRPdmVybGF5KTtcbiAgICB9LCB0aW1pbmcub3ZlcmxheURlbGF5KTtcbiAgfVxuXG4gIHNoYXBlU291bmRPYmoucGxheSgpO1xuXG4gIC8vIGNvbnNvbGUubG9nKCdwYW4gZG9uZScpO1xuICBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiBmYWxzZSB9KTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogdHJ1ZSB9KTtcbiAgICBjb25zb2xlLmxvZygndG91Y2ggZW5hYmxlZCcpO1xuICAgIGhhbW1lckNhbnZhcy5vbigncGFuc3RhcnQnLCBwYW5TdGFydCk7XG4gICAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICBlbmFibGVUYXBFdmVudHMoKTtcblxuICAgIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xuICB9LCB0aW1pbmcuaW5wdXREZWxheSk7XG5cbiAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICBzaGFwZS51cGRhdGVQb3BzKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFuQ2FuY2VsKGV2ZW50KSB7XG4gIGNvbnNvbGUubG9nKCdwYW5jYW5jZWwnKTtcbiAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgaGFtbWVyQ2FudmFzLnNldCh7IGVuYWJsZTogdHJ1ZSB9KTtcbiAgaGFtbWVyQ2FudmFzLm9uKCdwYW5zdGFydCcsIHBhblN0YXJ0KTtcbiAgZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgZW5hYmxlVGFwRXZlbnRzKCk7XG4gIHdpbmRvdy5rYW4ucGFubmluZyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBwaW5jaFN0YXJ0KGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKCdwaW5jaHN0YXJ0Jyk7XG4gIHRpbWluZy5wcmV2ZW50SW5hY3Rpdml0eVRpbWVvdXQoKTtcbiAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gIHdpbmRvdy5rYW4uaW50ZXJhY3RpbmcgPSB0cnVlO1xuICB3aW5kb3cua2FuLnBpbmNoaW5nID0gdHJ1ZTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAvLyBoYW1tZXJDYW52YXMuZ2V0KCdwaW5jaHN0YXJ0Jykuc2V0KHtlbmFibGU6IGZhbHNlfSk7XG4gIGhhbW1lckNhbnZhcy5vZmYoJ3BpbmNoc3RhcnQnKTtcbiAgZGlzYWJsZVBhbkV2ZW50cygpO1xuICBkaXNhYmxlVGFwRXZlbnRzKCk7XG5cbiAgaWYgKCFldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpKSByZXR1cm47XG5cbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcblxuICBjb25zdCBwb2ludGVyID0gZXZlbnQuY2VudGVyLFxuICAgICAgcG9pbnQgPSBuZXcgUG9pbnQocG9pbnRlci54LCBwb2ludGVyLnkpLFxuICAgICAgaGl0UmVzdWx0ID0gc2hhcGUuaGl0VGVzdEdyb3VwQm91bmRzKHBvaW50KTtcblxuICBpZiAoaGl0UmVzdWx0KSB7XG4gICAgd2luZG93Lmthbi5waW5jaGluZyA9IHRydWU7XG4gICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBoaXRSZXN1bHQ7XG4gICAgd2luZG93Lmthbi5sYXN0U2NhbGUgPSAxO1xuICAgIHdpbmRvdy5rYW4ubGFzdFJvdGF0aW9uID0gZXZlbnQucm90YXRpb247XG5cbiAgICB3aW5kb3cua2FuLm9yaWdpbmFsUG9zaXRpb24gPSBoaXRSZXN1bHQucG9zaXRpb247XG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFJvdGF0aW9uID0gaGl0UmVzdWx0LmRhdGEucm90YXRpb247XG4gICAgd2luZG93Lmthbi5vcmlnaW5hbFNjYWxlID0gaGl0UmVzdWx0LmRhdGEuc2NhbGU7XG4gICAgaGl0UmVzdWx0LmRhdGEudGhyb3duID0gZmFsc2U7XG5cbiAgICBpZiAoY29uZmlnLnBvcCA9PT0gdHJ1ZSkge1xuICAgICAgc2hhcGUuZGVzdHJveUdyb3VwUG9wcyhoaXRSZXN1bHQpO1xuICAgIH1cblxuICAgIGhpdFJlc3VsdC5icmluZ1RvRnJvbnQoKTtcblxuICAgIGlmIChoaXRSZXN1bHQuZGF0YS50dXQgJiYgaGl0UmVzdWx0LmRhdGEudHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke2hpdFJlc3VsdC5kYXRhLnR1dH0nXWApO1xuICAgICAgaWYgKCR0dXQpIHtcbiAgICAgICAgd2luZG93Lmthbi5waW5jaGVkVHV0ID0gJHR1dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5rYW4ucGluY2hlZFR1dCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgLy8gICBoaXRSZXN1bHQuYW5pbWF0ZSh7XG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICBzY2FsZTogMS4yNVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBzZXR0aW5nczoge1xuICAgIC8vICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgLy8gICAgICAgZWFzaW5nOiBcImVhc2VPdXRcIixcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG4gICAgLy8gfVxuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5rYW4ucGluY2hlZEdyb3VwID0gbnVsbDtcbiAgICB3aW5kb3cua2FuLnBpbmNoZWRUdXQgPSBudWxsO1xuICAgIC8vIGNvbnNvbGUubG9nKCdoaXQgbm8gaXRlbScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBpbmNoTW92ZShldmVudCkge1xuICAvLyBjb25zb2xlLmxvZygncGluY2hNb3ZlJyk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG4gIGxldCAkcGluY2hlZFR1dCA9IHdpbmRvdy5rYW4ucGluY2hlZFR1dDtcblxuICBpZiAoISFwaW5jaGVkR3JvdXApIHtcbiAgICBsZXQgY3VycmVudFNjYWxlID0gZXZlbnQuc2NhbGU7XG4gICAgbGV0IHNjYWxlRGVsdGE7XG5cbiAgICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dEJ5TmFtZSgncGluY2gnKTtcblxuICAgIGlmIChwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIDwgbWluU2hhcGVTaXplIHx8IHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0IDwgbWluU2hhcGVTaXplKSB7XG4gICAgICAvLyBvbmx5IGFsbG93IGEgc2hhcGUgdG8gc2NhbGUgZG93biBpZiBpdCBpcyBsYXJnZXIgdGhhbiB0aGUgbWluaW11bSBzaXplXG4gICAgICBzY2FsZURlbHRhID0gMS4xO1xuICAgIH0gZWxzZSBpZiAocGluY2hlZEdyb3VwLmJvdW5kcy53aWR0aCA+PSBwYXBlci52aWV3LnZpZXdTaXplLndpZHRoIHx8XG4gICAgICAgIHBpbmNoZWRHcm91cC5ib3VuZHMuaGVpZ2h0ID49IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0KSB7XG4gICAgICAvLyBvbmx5IGFsbG93IHNoYXBlIHRvIHNjYWxlIHVwIGlmIGl0IGZpdHMgaW4gdGhlIHZpZXdwb3J0XG4gICAgICBzY2FsZURlbHRhID0gMC45O1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZURlbHRhID0gY3VycmVudFNjYWxlIC8gd2luZG93Lmthbi5sYXN0U2NhbGU7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5sYXN0U2NhbGUgPSBjdXJyZW50U2NhbGU7XG5cbiAgICBsZXQgY3VycmVudFJvdGF0aW9uID0gZXZlbnQucm90YXRpb247XG4gICAgbGV0IHJvdGF0aW9uRGVsdGEgPSBjdXJyZW50Um90YXRpb24gLSB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbjtcbiAgICB3aW5kb3cua2FuLmxhc3RSb3RhdGlvbiA9IGN1cnJlbnRSb3RhdGlvbjtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBzY2FsaW5nIGJ5ICR7c2NhbGVEZWx0YX1gKTtcbiAgICAvLyBjb25zb2xlLmxvZyhgcm90YXRpbmcgYnkgJHtyb3RhdGlvbkRlbHRhfWApO1xuXG4gICAgY29uc3QgY2VudGVyUG9pbnQgPSBldmVudC5jZW50ZXI7XG4gICAgcGluY2hlZEdyb3VwLnBvc2l0aW9uID0gY2VudGVyUG9pbnQ7XG4gICAgaWYgKCEhJHBpbmNoZWRUdXQpIHtcbiAgICAgIHR1dG9yaWFsLm1vdmVDb250ZXh0dWFsVHV0KCRwaW5jaGVkVHV0LCBjZW50ZXJQb2ludCk7XG4gICAgfVxuXG4gICAgaWYgKHNjYWxlRGVsdGEgIT09IDEpIHtcbiAgICAgIHBpbmNoZWRHcm91cC5zY2FsZShzY2FsZURlbHRhKTtcblxuICAgICAgLy8gY2hlY2sgaWYgc2NhbGluZyB3ZW50IGF3cnksIGNhbm5vdCBiZSB0b28gYmlnIG9yIHRvbyBzbWFsbFxuICAgICAgLy8gaHlwb3RlbnVzZSBtdXN0IGZpdCB3aXRoaW4gdmlldyBib3VuZHNcbiAgICAgIGNvbnN0IGh5cG90ID0gdXRpbC5oeXBvdChwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoLCBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCk7XG4gICAgICBjb25zdCB2aWV3SHlwb3QgPSB1dGlsLmh5cG90KHBhcGVyLnZpZXcudmlld1NpemUud2lkdGgsIHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0KVxuICAgICAgaWYgKGh5cG90ID49IHZpZXdIeXBvdCkge1xuICAgICAgICAvLyBzaGFwZSBpcyB0b28gYmlnLCBicmluZyBpdCBiYWNrIGRvd24gdG8gc2l6ZVxuICAgICAgICBzY2FsZURlbHRhID0gdmlld0h5cG90ICogbWF4U2NhbGVGYWN0b3IgLyBoeXBvdDtcbiAgICAgICAgcGluY2hlZEdyb3VwLnNjYWxlKHNjYWxlRGVsdGEpO1xuICAgICAgfSBlbHNlIGlmIChoeXBvdCA8PSBtaW5TaGFwZVNpemUpIHtcbiAgICAgICAgc2NhbGVEZWx0YSA9IG1pblNoYXBlU2l6ZSAvIGh5cG90O1xuICAgICAgICBwaW5jaGVkR3JvdXAuc2NhbGUoc2NhbGVEZWx0YSk7XG4gICAgICB9XG4gICAgfVxuICAgIHBpbmNoZWRHcm91cC5yb3RhdGUocm90YXRpb25EZWx0YSk7XG5cbiAgICBwaW5jaGVkR3JvdXAuZGF0YS5zY2FsZSAqPSBzY2FsZURlbHRhO1xuICAgIHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uICs9IHJvdGF0aW9uRGVsdGE7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGluY2hFbmQoZXZlbnQpIHtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICB3aW5kb3cua2FuLmxhc3RFdmVudCA9IGV2ZW50O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG4gIGxldCAkcGluY2hlZFR1dCA9IHdpbmRvdy5rYW4ucGluY2hlZFR1dDtcbiAgbGV0IG9yaWdpbmFsUG9zaXRpb24gPSB3aW5kb3cua2FuLm9yaWdpbmFsUG9zaXRpb247XG4gIGxldCBvcmlnaW5hbFJvdGF0aW9uID0gd2luZG93Lmthbi5vcmlnaW5hbFJvdGF0aW9uO1xuICBsZXQgb3JpZ2luYWxTY2FsZSA9IHdpbmRvdy5rYW4ub3JpZ2luYWxTY2FsZTtcblxuICBpZiAoISFwaW5jaGVkR3JvdXApIHtcbiAgICBwaW5jaGVkR3JvdXAuZGF0YS5mcmVzaCA9IHRydWU7XG4gICAgbGV0IG1vdmUgPSB7XG4gICAgICBpZDogcGluY2hlZEdyb3VwLmlkLFxuICAgICAgdHlwZTogJ3RyYW5zZm9ybSdcbiAgICB9O1xuICAgIGlmIChwaW5jaGVkR3JvdXAucG9zaXRpb24gIT0gb3JpZ2luYWxQb3NpdGlvbikge1xuICAgICAgbW92ZS5wb3NpdGlvbiA9IG9yaWdpbmFsUG9zaXRpb247XG4gICAgfVxuXG4gICAgaWYgKHBpbmNoZWRHcm91cC5kYXRhLnJvdGF0aW9uICE9IG9yaWdpbmFsUm90YXRpb24pIHtcbiAgICAgIG1vdmUucm90YXRpb24gPSBvcmlnaW5hbFJvdGF0aW9uIC0gcGluY2hlZEdyb3VwLmRhdGEucm90YXRpb247XG4gICAgfVxuXG4gICAgaWYgKHBpbmNoZWRHcm91cC5kYXRhLnNjYWxlICE9IG9yaWdpbmFsU2NhbGUpIHtcbiAgICAgIG1vdmUuc2NhbGUgPSBvcmlnaW5hbFNjYWxlIC8gcGluY2hlZEdyb3VwLmRhdGEuc2NhbGU7XG4gICAgfVxuXG4gICAgaWYgKHBpbmNoZWRHcm91cC5jaGlsZHJlbi5sZW5ndGggPiAwICYmIHBpbmNoZWRHcm91cC5fbmFtZWRDaGlsZHJlbi5zaGFwZVBhdGggJiYgcGluY2hlZEdyb3VwLl9uYW1lZENoaWxkcmVuLnNoYXBlUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAvLyB1cGRhdGUgc2hhcGVQYXRoIHNvdW5kIG9iamVjdCBpZiBwb3NzaWJsZVxuICAgICAgc291bmQucmVtb3ZlU2hhcGVGcm9tQ29tcG9zaXRpb24ocGluY2hlZEdyb3VwKTsgLy8gc291bmQgaXMgbm93IHdyb25nXG5cbiAgICAgIGxldCBzaGFwZVBhdGggPSBwaW5jaGVkR3JvdXAuX25hbWVkQ2hpbGRyZW4uc2hhcGVQYXRoWzBdO1xuICAgICAgbGV0IHNoYXBlU291bmRPYmogPSBzb3VuZC5nZXRTaGFwZVNvdW5kT2JqKHNoYXBlUGF0aCk7XG4gICAgICB3aW5kb3cua2FuLmNvbXBvc2l0aW9uLnB1c2goc2hhcGVTb3VuZE9iaik7XG4gICAgfVxuXG4gICAgd2luZG93Lmthbi5tb3Zlcy5wdXNoKG1vdmUpO1xuXG4gICAgaWYgKE1hdGguYWJzKGV2ZW50LnZlbG9jaXR5KSA+IDEpIHtcbiAgICAgIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKCdzd2lwZScpO1xuXG4gICAgICAvLyBoaWRlIGFueSBjb25uZWN0ZWQgdHV0c1xuICAgICAgaWYgKCEhJHBpbmNoZWRUdXQpIHtcbiAgICAgICAgdHV0b3JpYWwuaGlkZUNvbnRleHR1YWxUdXQoJHBpbmNoZWRUdXQpO1xuICAgICAgfVxuICAgICAgLy8gZGlzcG9zZSBvZiBncm91cCBvZmZzY3JlZW5cbiAgICAgIGlmIChjb25maWcucG9wID09PSB0cnVlKSB7XG4gICAgICAgIHNoYXBlLmRlc3Ryb3lHcm91cFBvcHMocGluY2hlZEdyb3VwKTtcbiAgICAgICAgcGluY2hlZEdyb3VwLmRhdGEuZnJlc2ggPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcGluY2hlZEdyb3VwLmRhdGEudGhyb3duID0gdHJ1ZTtcbiAgICAgIHRocm93UGluY2hlZEdyb3VwKCk7XG4gICAgfVxuXG4gICAgLy8gaWYgKGNvbmZpZy5ydW5BbmltYXRpb25zKSB7XG4gICAgLy8gICBwaW5jaGVkR3JvdXAuYW5pbWF0ZSh7XG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICBzY2FsZTogMC44XG4gICAgLy8gICAgIH0sXG4gICAgLy8gICAgIHNldHRpbmdzOiB7XG4gICAgLy8gICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAvLyAgICAgICBlYXNpbmc6IFwiZWFzZU91dFwiLFxuICAgIC8vICAgICB9XG4gICAgLy8gICB9KTtcbiAgICAvLyB9XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBudWxsO1xuICB9XG5cbiAgLy8gaWYgYW4gb3ZlcmxheSB3YXMgaW50ZXJydXB0ZWQsIG9wZW4gaXQgdXAgbm93XG4gIGlmICh3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgIT09IG51bGwpIHtcbiAgICBsZXQgc2NoZWR1bGVkT3ZlcmxheSA9IHdpbmRvdy5rYW4uc2NoZWR1bGVkT3ZlcmxheTtcbiAgICB3aW5kb3cua2FuLnNjaGVkdWxlZE92ZXJsYXkgPSBudWxsO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb3ZlcmxheXMub3Blbk92ZXJsYXkoc2NoZWR1bGVkT3ZlcmxheSk7XG4gICAgfSwgdGltaW5nLm92ZXJsYXlEZWxheSk7XG4gIH1cblxuICB3aW5kb3cua2FuLnBpbmNoaW5nID0gZmFsc2U7XG5cbiAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICBzaGFwZS51cGRhdGVQb3BzKCk7XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZygncGluY2ggZG9uZScpO1xuICAvLyBoYW1tZXJDYW52YXMuc2V0KHsgZW5hYmxlOiBmYWxzZSB9KTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3RvdWNoIGVuYWJsZWQnKTtcbiAgICBoYW1tZXJDYW52YXMub24oJ3BpbmNoc3RhcnQnLCBwaW5jaFN0YXJ0KTtcbiAgICBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpO1xuICAgIGVuYWJsZVRhcEV2ZW50cygpO1xuICAgIC8vIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gICAgLy8gaGFtbWVyQ2FudmFzLm9uKCdwaW5jaHN0YXJ0JywgcGluY2hTdGFydCk7XG4gICAgLy8gZW5hYmxlUGFuQW5kUGluY2hFdmVudHMoKTtcbiAgICAvLyBlbmFibGVUYXBFdmVudHMoKTtcbiAgICAvLyB3aW5kb3cua2FuLnBpbmNoaW5nID0gZmFsc2U7XG4gICAgLy8gd2luZG93Lmthbi5waW5jaGVkR3JvdXAgPSBudWxsO1xuICB9LCB0aW1pbmcuaW5wdXREZWxheSk7XG59XG5cbmZ1bmN0aW9uIHBpbmNoQ2FuY2VsKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGNvbnNvbGUubG9nKCdwaW5jaGNhbmNlbCcpO1xuICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGhhbW1lckNhbnZhcy5zZXQoeyBlbmFibGU6IHRydWUgfSk7XG4gIGhhbW1lckNhbnZhcy5vbigncGluY2hzdGFydCcsIHBpbmNoU3RhcnQpO1xuICBlbmFibGVQYW5BbmRQaW5jaEV2ZW50cygpO1xuICBlbmFibGVUYXBFdmVudHMoKTtcblxuICB3aW5kb3cua2FuLnBpbmNoaW5nID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHRocm93UGluY2hlZEdyb3VwKCkge1xuXG4gIGNvbnN0IHZlbG9jaXR5TXVsdGlwbGllciA9IDI1O1xuICBjb25zdCBsYXN0RXZlbnQgPSB3aW5kb3cua2FuLmxhc3RFdmVudDtcbiAgY29uc3Qgdmlld1dpZHRoID0gcGFwZXIudmlldy52aWV3U2l6ZS53aWR0aDtcbiAgY29uc3Qgdmlld0hlaWdodCA9IHBhcGVyLnZpZXcudmlld1NpemUuaGVpZ2h0O1xuICBsZXQgcGluY2hlZEdyb3VwID0gd2luZG93Lmthbi5waW5jaGVkR3JvdXA7XG5cbiAgaWYgKHBpbmNoZWRHcm91cCA9PT0gbnVsbCB8fCAocGluY2hlZEdyb3VwLmRhdGEgJiYgcGluY2hlZEdyb3VwLmRhdGEudGhyb3duID09PSBmYWxzZSkpIHJldHVybjtcbiAgaWYgKHBpbmNoZWRHcm91cC5wb3NpdGlvbi54IDw9IDAgLSBwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIHx8XG4gICAgICBwaW5jaGVkR3JvdXAucG9zaXRpb24ueCA+PSB2aWV3V2lkdGggKyBwaW5jaGVkR3JvdXAuYm91bmRzLndpZHRoIHx8XG4gICAgICBwaW5jaGVkR3JvdXAucG9zaXRpb24ueSA8PSAwIC0gcGluY2hlZEdyb3VwLmJvdW5kcy5oZWlnaHQgfHxcbiAgICAgIHBpbmNoZWRHcm91cC5wb3NpdGlvbi55ID49IHZpZXdIZWlnaHQgKyBwaW5jaGVkR3JvdXAuYm91bmRzLmhlaWdodCkge1xuICAgICAgICBwaW5jaGVkR3JvdXAuZGF0YS5vZmZTY3JlZW4gPSB0cnVlO1xuICAgICAgICBwaW5jaGVkR3JvdXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBzb3VuZC5yZW1vdmVTaGFwZUZyb21Db21wb3NpdGlvbihwaW5jaGVkR3JvdXApO1xuICAgICAgICB3aW5kb3cua2FuLnBpbmNoZWRHcm91cCA9IG51bGw7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aHJvd1BpbmNoZWRHcm91cCk7XG4gIGNvbnN0IG5ld1ggPSBwaW5jaGVkR3JvdXAucG9zaXRpb24ueCArIGxhc3RFdmVudC52ZWxvY2l0eVggKiB2ZWxvY2l0eU11bHRpcGxpZXI7XG4gIGNvbnN0IG5ld1kgPSBwaW5jaGVkR3JvdXAucG9zaXRpb24ueSArIGxhc3RFdmVudC52ZWxvY2l0eVkgKiB2ZWxvY2l0eU11bHRpcGxpZXI7XG4gIGNvbnN0IG5ld1BvcyA9IG5ldyBQb2ludChuZXdYLCBuZXdZKTtcbiAgcGluY2hlZEdyb3VwLnBvc2l0aW9uID0gbmV3UG9zO1xufVxuXG5mdW5jdGlvbiBldmVudFRhcmdldElzT25DYW52YXMoZXZlbnQpIHtcbiAgaWYgKCFldmVudCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoZXZlbnQudGFyZ2V0ICE9IHVpLmRyYXdDYW52YXMpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG5cbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IGNvbnRleHR1YWxUdXRzID0gY29uZmlnLmNvbnRleHR1YWxUdXRzO1xuY29uc3QgdHV0QXJyb3dIZWlnaHQgPSAxNjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1dEJ5TmFtZSh0dXROYW1lKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dHVhbFR1dHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgdHV0T2JqID0gY29udGV4dHVhbFR1dHNbaV07XG5cbiAgICBpZiAodHV0T2JqLnR5cGUgPT09IHR1dE5hbWUpIHtcbiAgICAgIHJldHVybiB0dXRPYmouY29weTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFsbFR1dHNDb21wbGV0ZWQoKSB7XG4gIGNvbnN0IHR1dG9yaWFsQ29tcGxldGlvbk9iaiA9IHdpbmRvdy5rYW4udHV0b3JpYWxDb21wbGV0aW9uO1xuICBsZXQgY29tcGxldGlvbiA9IHRydWU7XG5cbiAgT2JqZWN0LmtleXModHV0b3JpYWxDb21wbGV0aW9uT2JqKS5mb3JFYWNoKChrZXksIHZhbCkgPT4ge1xuICAgIGNvbXBsZXRpb24gPSBjb21wbGV0aW9uICYmIHR1dG9yaWFsQ29tcGxldGlvbk9ialtrZXldO1xuICB9KTtcblxuICByZXR1cm4gY29tcGxldGlvbiA9PT0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbnRleHR1YWxUdXQodHV0TmFtZSkge1xuICBpZiAoISF3aW5kb3cua2FuLnNoYXBlUGF0aCAmJiB3aW5kb3cua2FuLnNoYXBlUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgaGlkZUNvbnRleHR1YWxUdXRzKCk7XG4gICAgd2luZG93Lmthbi5zaGFwZXNTaW5jZVR1dCA9IDA7XG5cbiAgICBsZXQgc2hhcGVQYXRoID0gd2luZG93Lmthbi5zaGFwZVBhdGg7XG4gICAgbGV0IHNoYXBlQ2VudGVyID0gc2hhcGVQYXRoLmJvdW5kcy5jZW50ZXI7XG5cbiAgICBsZXQgdHV0Q29weSA9IGdldFR1dEJ5TmFtZSh0dXROYW1lKTtcblxuICAgIGlmICh0dXRDb3B5ICE9PSBudWxsKSB7XG4gICAgICBjb25zdCAkdHV0ID0gJChgLnR1dFtkYXRhLXR1dC10eXBlPScke3R1dE5hbWV9J11gKTtcbiAgICAgIGlmICgkdHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdHV0UG9zID0gZ2V0VHV0UG9zaXRpb25Gcm9tQ2VudGVyKCR0dXQsIHNoYXBlQ2VudGVyKTtcbiAgICAgICAgJHR1dC5jc3Moe3RvcDogYCR7dHV0UG9zLnl9cHhgLCBsZWZ0OiBgJHt0dXRQb3MueH1weGAsIHZpc2liaWxpdHk6ICd2aXNpYmxlJ30pO1xuICAgICAgICAkdHV0LmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUNvbnRleHR1YWxUdXQoJHR1dCkge1xuICAkdHV0LmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVDb250ZXh0dWFsVHV0QnlOYW1lKHR1dE5hbWUpIHtcbiAgY29uc3QgJHR1dCA9ICQoYC50dXRbZGF0YS10dXQtdHlwZT0nJHt0dXROYW1lfSddYCk7XG4gIGhpZGVDb250ZXh0dWFsVHV0KCR0dXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUNvbnRleHR1YWxUdXRzKCkge1xuICBjb25zdCAkdHV0cyA9ICQoJy5jb250ZXh0dWFsLXR1dHMgLnR1dCcpO1xuICAkdHV0cy5jc3Moe3Zpc2liaWxpdHk6ICdoaWRkZW4nfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldENvbnRleHR1YWxUdXRzKCkge1xuICBoaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgd2luZG93Lmthbi50dXRvcmlhbENvbXBsZXRpb24gPSB7XG4gICAgXCJmaWxsXCI6IGZhbHNlLFxuICAgIFwicGluY2hcIjogZmFsc2UsXG4gICAgXCJzd2lwZVwiOiBmYWxzZVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW92ZUNvbnRleHR1YWxUdXQoJHR1dCwgY2VudGVyUG9pbnQpIHtcbiAgbGV0IHR1dFBvcyA9IGdldFR1dFBvc2l0aW9uRnJvbUNlbnRlcigkdHV0LCBjZW50ZXJQb2ludCk7XG4gICR0dXQuY3NzKHt0b3A6IGAke3R1dFBvcy55fXB4YCwgbGVmdDogYCR7dHV0UG9zLnh9cHhgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXRQb3NpdGlvbkZyb21DZW50ZXIoJHR1dCwgY2VudGVyUG9pbnQpIHtcbiAgY29uc3QgdHV0V2lkdGggPSAkdHV0Lm91dGVyV2lkdGgoKTtcbiAgY29uc3QgdHV0SGVpZ2h0ID0gJHR1dC5vdXRlckhlaWdodCgpO1xuICBjb25zdCBsZWZ0UG9zID0gY2VudGVyUG9pbnQueCAtICh0dXRXaWR0aCAvIDIpO1xuICBjb25zdCB0b3BQb3MgPSBjZW50ZXJQb2ludC55IC0gdHV0SGVpZ2h0IC0gdHV0QXJyb3dIZWlnaHQ7XG4gIHJldHVybiBuZXcgUG9pbnQobGVmdFBvcywgdG9wUG9zKTtcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IHNvdW5kID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuY29uc3QgdHV0b3JpYWwgPSByZXF1aXJlKCcuL3R1dG9yaWFsJyk7XG5jb25zdCBvdmVybGF5cyA9IHJlcXVpcmUoJy4vb3ZlcmxheXMnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xuY29uc3Qgc2hhcGUgPSByZXF1aXJlKCcuL3NoYXBlJyk7XG5jb25zdCBzaGFyZSA9IHJlcXVpcmUoJy4vc2hhcmUnKTtcblxuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5jb25zdCB0YXBFdmVudCA9ICdjbGljayB0YXAgdG91Y2gnO1xuXG5jb25zdCBwbGF5aW5nQ2xhc3MgPSBzb3VuZC5wbGF5aW5nQ2xhc3M7XG5jb25zdCBwbGF5RW5hYmxlZENsYXNzID0gc291bmQucGxheUVuYWJsZWRDbGFzcztcblxuY29uc3QgJG5ld0J1dHRvbiA9ICQoJy5jb250cm9scyAubmV3Jyk7XG5jb25zdCAkdW5kb0J1dHRvbiA9ICQoJy5jb250cm9scyAudW5kbycpO1xuY29uc3QgJHBsYXlCdXR0b24gPSAkKCcuY29udHJvbHMgLnBsYXktc3RvcCcpO1xuY29uc3QgJHNoYXJlQnV0dG9uID0gJCgnLmNvbnRyb2xzIC5zaGFyZScpO1xuY29uc3QgJHRpcHNCdXR0b24gPSAkKCcuY29udHJvbHMgLnRpcHMnKTtcblxuZXhwb3J0IGNvbnN0IGRyYXdDYW52YXMgPSAkKCcjY2FudmFzJylbMF07XG5leHBvcnQgY29uc3QgdGlwc092ZXJsYXkgPSAkKCcub3ZlcmxheS50aXBzJylbMF07XG5cbmNvbnN0IGRpdGhlcmVkQ2xhc3MgPSAnZGl0aGVyZWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgaW5pdExvZ29SZWZyZXNoKCk7XG4gIGluaXRDb2xvclBhbGV0dGUoKTtcbiAgaW5pdE5ld0J1dHRvbigpO1xuICBpbml0VW5kb0J1dHRvbigpO1xuICBpbml0UGxheUJ1dHRvbigpO1xuICBpbml0VGlwc0J1dHRvbigpO1xuICBpbml0U2hhcmVCdXR0b24oKTtcbiAgaW5pdENvbnRleHR1YWxUdXRzKCk7XG4gIHJlc2V0Q2FudmFzKCk7XG59XG5cbmZ1bmN0aW9uIHVuZGl0aGVyQWxsQnV0dG9ucygpIHtcbiAgJChgLmNvbnRyb2xzIC4ke2RpdGhlcmVkQ2xhc3N9YCkucmVtb3ZlQ2xhc3MoZGl0aGVyZWRDbGFzcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB1bmRpdGhlciA9IGZhbHNlKSB7XG4gIGlmIChidXR0b25OYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKCQuaXNBcnJheShidXR0b25OYW1lcykpIHtcbiAgICAgIGJ1dHRvbk5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRpdGhlckJ1dHRvbkJ5TmFtZShuYW1lLCB1bmRpdGhlcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZXMsIHVuZGl0aGVyKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcykge1xuICBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdGhlckJ1dHRvbkJ5TmFtZShidXR0b25OYW1lLCB1bmRpdGhlciA9IGZhbHNlKSB7XG4gIGxldCAkYnV0dG9uID0gJChgLmNvbnRyb2xzIC4ke2J1dHRvbk5hbWV9YCk7XG4gIC8vIGNvbnNvbGUubG9nKCRidXR0b24pO1xuICBpZiAoJGJ1dHRvbi5sZW5ndGggPiAwKSB7XG4gICAgaWYgKHVuZGl0aGVyICE9PSB0cnVlKSB7XG4gICAgICAkYnV0dG9uLmFkZENsYXNzKGRpdGhlcmVkQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkYnV0dG9uLnJlbW92ZUNsYXNzKGRpdGhlcmVkQ2xhc3MpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5kaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSkge1xuICBkaXRoZXJCdXR0b25CeU5hbWUoYnV0dG9uTmFtZSwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHVuZGl0aGVyQnV0dG9uc0J5TmFtZShidXR0b25OYW1lcykge1xuICBkaXRoZXJCdXR0b25zQnlOYW1lKGJ1dHRvbk5hbWVzLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gbmV3UHJlc3NlZCgpIHtcbiAgLy8gY29uc29sZS5sb2coJ25ldyBwcmVzc2VkJyk7XG4gIHdpbmRvdy5rYW4uY29tcG9zaXRpb24gPSBbXTtcbiAgcGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5yZW1vdmVDaGlsZHJlbigpO1xuICB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgZGl0aGVyQnV0dG9uc0J5TmFtZShbJ3VuZG8nLCAnbmV3JywgJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgc291bmQuc3RvcFBsYXlpbmcoKTtcbiAgLy8gd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gZmFsc2U7XG4gIC8vIHR1dG9yaWFsLnJlc2V0Q29udGV4dHVhbFR1dHMoKTtcbn1cblxuZnVuY3Rpb24gdW5kb1ByZXNzZWQoKSB7XG4gIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIHR1dG9yaWFsLmhpZGVDb250ZXh0dWFsVHV0cygpO1xuXG4gIGNvbnN0IHRyYW5zcGFyZW50ID0gbmV3IENvbG9yKDAsIDApO1xuICAvLyBjb25zb2xlLmxvZygndW5kbyBwcmVzc2VkJyk7XG4gIGlmICghKHdpbmRvdy5rYW4ubW92ZXMubGVuZ3RoID4gMCkpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnbm8gbW92ZXMgeWV0Jyk7XG4gICAgd2luZG93Lmthbi51c2VySGFzRHJhd25GaXJzdFNoYXBlID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGxhc3RNb3ZlID0gd2luZG93Lmthbi5tb3Zlcy5wb3AoKTtcbiAgbGV0IGl0ZW0gPSBwcm9qZWN0LmdldEl0ZW0oe1xuICAgIGlkOiBsYXN0TW92ZS5pZFxuICB9KTtcblxuICBpZiAoaXRlbSkge1xuICAgIGl0ZW0udmlzaWJsZSA9IHRydWU7IC8vIG1ha2Ugc3VyZVxuICAgIHN3aXRjaChsYXN0TW92ZS50eXBlKSB7XG4gICAgICBjYXNlICduZXdHcm91cCc6XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW1vdmluZyBncm91cCcpO1xuICAgICAgICBzb3VuZC5yZW1vdmVTaGFwZUZyb21Db21wb3NpdGlvbihpdGVtKTtcbiAgICAgICAgdXRpbC5jbGVhckdyb3VwUG9wcyhpdGVtKTtcbiAgICAgICAgaXRlbS5yZW1vdmUoKTtcblxuICAgICAgICBpZiAoJ3JlbW92ZWRHcm91cCcgaW4gbGFzdE1vdmUpIHtcbiAgICAgICAgICAvLyBicmluZyBiYWNrIHJlbW92ZWQgZ3JvdXBcbiAgICAgICAgICBsYXN0TW92ZS5yZW1vdmVkR3JvdXAudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgbGFzdE1vdmUucmVtb3ZlZEdyb3VwLmRhdGEuZnJlc2ggPSB0cnVlO1xuICAgICAgICAgIHNoYXBlLnVwZGF0ZVBvcHMoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgY29uc3QgbnVtR3JvdXBzID0gdXRpbC5nZXROdW1Hcm91cHMoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ251bUdyb3VwcycsIG51bUdyb3Vwcyk7XG5cbiAgICAgICAgaWYgKG51bUdyb3VwcyA8PSAwKSB7XG4gICAgICAgICAgZGl0aGVyQnV0dG9uc0J5TmFtZShbJ3VuZG8nLCAnbmV3JywgJ3BsYXktc3RvcCcsICdzaGFyZSddKTtcbiAgICAgICAgICAkYm9keS5yZW1vdmVDbGFzcyhzb3VuZC5wbGF5RW5hYmxlZENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmRpdGhlckJ1dHRvbnNCeU5hbWUoWyd1bmRvJywgJ25ldycsICdwbGF5LXN0b3AnLCAnc2hhcmUnXSk7XG4gICAgICAgICAgJGJvZHkuYWRkQ2xhc3Moc291bmQucGxheUVuYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2ZpbGxDaGFuZ2UnOlxuICAgICAgICBpZiAobGFzdE1vdmUudHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICBpdGVtLmZpbGxDb2xvciA9IGxhc3RNb3ZlLmZpbGw7XG4gICAgICAgICAgaXRlbS5zdHJva2VDb2xvciA9IGxhc3RNb3ZlLmZpbGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbS5maWxsQ29sb3IgPSB0cmFuc3BhcmVudDtcbiAgICAgICAgICBpdGVtLnN0cm9rZUNvbG9yID0gdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ3RyYW5zZm9ybSc6XG4gICAgICAgIGl0ZW0uZGF0YS5mcmVzaCA9IHRydWU7XG4gICAgICAgIGlmICghIWxhc3RNb3ZlLnBvc2l0aW9uKSB7XG4gICAgICAgICAgaXRlbS5wb3NpdGlvbiA9IGxhc3RNb3ZlLnBvc2l0aW9uXG4gICAgICAgICAgaWYgKGl0ZW0uZGF0YSAmJiBpdGVtLmRhdGEudHV0ICYmIGl0ZW0uZGF0YS50dXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gaXRlbSBoYXMgY29ubmVjdGVkIGNvbnRleHR1YWwgdHV0LCBtb3ZlIGl0IHRvIHRoZSByaWdodCBwbGFjZVxuICAgICAgICAgICAgY29uc3QgJHR1dCA9ICQoYC50dXRbZGF0YS10dXQtdHlwZT0nJHt0dXROYW1lfSddYCk7XG4gICAgICAgICAgICB0dXRvcmlhbC5tb3ZlQ29udGV4dHVhbFR1dCgkdHV0LCBsYXN0TW92ZS5wb3NpdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIWxhc3RNb3ZlLnJvdGF0aW9uKSB7XG4gICAgICAgICAgaXRlbS5yb3RhdGlvbiA9IGxhc3RNb3ZlLnJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIWxhc3RNb3ZlLnNjYWxlKSB7XG4gICAgICAgICAgaXRlbS5zY2FsZShsYXN0TW92ZS5zY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5wb3AgPT09IHRydWUpIHtcbiAgICAgICAgICBzaGFwZS51cGRhdGVQb3BzKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBjb25zb2xlLmxvZygndW5rbm93biBjYXNlJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKCdjb3VsZCBub3QgZmluZCBtYXRjaGluZyBpdGVtJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGxheVByZXNzZWQoKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdwbGF5IHByZXNzZWQnKTtcbiAgLy8gc291bmQuc3RvcENvbXBvc2l0aW9uKCk7XG4gIC8vIG92ZXJsYXlzLmNsb3NlQW5kUmVzZXRPdmVybGF5cygpO1xuICAvLyB0dXRvcmlhbC5oaWRlQ29udGV4dHVhbFR1dHMoKTtcbiAgbGV0IHBsYXlpbmcgPSB3aW5kb3cua2FuLnBsYXlpbmc7XG4gIC8vIGNvbnNvbGUubG9nKHBsYXlpbmcsIHV0aWwuZ2V0TnVtR3JvdXBzKCkgPiAyLCAhcGxheWluZyAmJiB1dGlsLmdldE51bUdyb3VwcygpID4gMiwgJGJvZHkpO1xuXG4gIGNsZWFyVGltZW91dCh3aW5kb3cua2FuLnBsYXlQcm9tcHRUaW1lb3V0KTtcbiAgaWYgKCFwbGF5aW5nICYmIHV0aWwuZ2V0TnVtR3JvdXBzKCkgPiAyKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3N0YXJ0aW5nIHBsYXlpbmcnKTtcbiAgICBzb3VuZC5zdGFydFBsYXlpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZygnc3RvcHBpbmcgcGxheWluZycpO1xuICAgIHNvdW5kLnN0b3BQbGF5aW5nKHRydWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRpcHNQcmVzc2VkKCkge1xuICBzb3VuZC5zdG9wUGxheWluZygpO1xuICBvdmVybGF5cy5vcGVuT3ZlcmxheSgndGlwcycpO1xuICAvLyBjb25zb2xlLmxvZygndGlwcyBwcmVzc2VkJyk7XG59XG5cbmZ1bmN0aW9uIHNoYXJlUHJlc3NlZCgpIHtcbiAgc2hhcmUucmVjb3JkKCk7XG4gIC8vIGNvbnNvbGUubG9nKCdzaGFyZSBwcmVzc2VkJyk7XG4gIC8vIHNvdW5kLnN0b3BQbGF5aW5nKCk7XG4gIC8vIGlmICgkYm9keS5oYXNDbGFzcyhzb3VuZC5wbGF5RW5hYmxlZENsYXNzKSkge1xuICAvLyAgIG92ZXJsYXlzLm9wZW5PdmVybGF5KCdzaGFyZScpO1xuICAvLyB9XG59XG5cbmZ1bmN0aW9uIGluaXRMb2dvUmVmcmVzaCgpIHtcbiAgJCgnLm1haW4tbG9nbycpLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDb2xvclBhbGV0dGUoKSB7XG4gIGNvbnN0ICRwYWxldHRlV3JhcCA9ICQoJ3VsLnBhbGV0dGUtY29sb3JzJyk7XG4gIGNvbnN0ICRwYWxldHRlQ29sb3JzID0gJHBhbGV0dGVXcmFwLmZpbmQoJ2xpJyk7XG4gIGNvbnN0IHBhbGV0dGVDb2xvclNpemUgPSAyMDtcbiAgY29uc3QgcGFsZXR0ZVNlbGVjdGVkQ29sb3JTaXplID0gMzA7XG4gIGNvbnN0IHBhbGV0dGVTZWxlY3RlZENsYXNzID0gJ3BhbGV0dGUtc2VsZWN0ZWQnO1xuXG4gIC8vIGhvb2sgdXAgY2xpY2tcbiAgJHBhbGV0dGVDb2xvcnMub24oJ2NsaWNrIHRhcCB0b3VjaCcsIGZ1bmN0aW9uKCkge1xuICAgIGlmICghJGJvZHkuaGFzQ2xhc3MocGxheWluZ0NsYXNzKSkge1xuICAgICAgbGV0ICRzdmcgPSAkKHRoaXMpLmZpbmQoJ3N2Zy5wYWxldHRlLWNvbG9yJyk7XG5cbiAgICAgIGlmICghJHN2Zy5oYXNDbGFzcyhwYWxldHRlU2VsZWN0ZWRDbGFzcykpIHtcbiAgICAgICAgJCgnLicgKyBwYWxldHRlU2VsZWN0ZWRDbGFzcylcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MocGFsZXR0ZVNlbGVjdGVkQ2xhc3MpXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgcGFsZXR0ZUNvbG9yU2l6ZSlcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgcGFsZXR0ZUNvbG9yU2l6ZSlcbiAgICAgICAgICAuZmluZCgncmVjdCcpXG4gICAgICAgICAgLmF0dHIoJ3J4JywgMClcbiAgICAgICAgICAuYXR0cigncnknLCAwKTtcblxuICAgICAgICAkc3ZnLmFkZENsYXNzKHBhbGV0dGVTZWxlY3RlZENsYXNzKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSlcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgcGFsZXR0ZVNlbGVjdGVkQ29sb3JTaXplKVxuICAgICAgICAgIC5maW5kKCdyZWN0JylcbiAgICAgICAgICAuYXR0cigncngnLCBwYWxldHRlU2VsZWN0ZWRDb2xvclNpemUgLyAyKVxuICAgICAgICAgIC5hdHRyKCdyeScsIHBhbGV0dGVTZWxlY3RlZENvbG9yU2l6ZSAvIDIpXG5cbiAgICAgICAgd2luZG93Lmthbi5jdXJyZW50Q29sb3IgPSAkc3ZnLmZpbmQoJ3JlY3QnKS5hdHRyKCdmaWxsJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCclY2NvbG9yJywgJ2NvbG9yOnJlZCcsIGNvbG9yLmdldENvbG9yTmFtZSh3aW5kb3cua2FuLmN1cnJlbnRDb2xvcikpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0TmV3QnV0dG9uKCkge1xuICAkKCcubWFpbi1jb250cm9scyAubmV3Jykub24odGFwRXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgIGlmICghJGJvZHkuaGFzQ2xhc3MocGxheWluZ0NsYXNzKSkge1xuICAgICAgbmV3UHJlc3NlZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRVbmRvQnV0dG9uKCkge1xuICAkKCcubWFpbi1jb250cm9scyAudW5kbycpLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRib2R5Lmhhc0NsYXNzKHBsYXlpbmdDbGFzcykpIHtcbiAgICAgIHVuZG9QcmVzc2VkKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdFBsYXlCdXR0b24oKSB7XG4gICQoJy5tYWluLWNvbnRyb2xzIC5wbGF5LXN0b3AgLnBsYXknKS5vbih0YXBFdmVudCwgc291bmQuc3RhcnRQbGF5aW5nKTtcbiAgJCgnLm1haW4tY29udHJvbHMgLnBsYXktc3RvcCAuc3RvcCcpLm9uKHRhcEV2ZW50LCBzb3VuZC5zdG9wUGxheWluZyk7XG59XG5cbmZ1bmN0aW9uIGluaXRUaXBzQnV0dG9uKCkge1xuICAkKCcuY29udHJvbHMgLnRpcHMnKS5vbih0YXBFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkYm9keS5oYXNDbGFzcyhwbGF5aW5nQ2xhc3MpKSB7XG4gICAgICB0aXBzUHJlc3NlZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRTaGFyZUJ1dHRvbigpIHtcbiAgJCgnLmNvbnRyb2xzIC5zaGFyZScpLm9uKHRhcEV2ZW50LCBzaGFyZVByZXNzZWQpO1xufVxuXG5mdW5jdGlvbiBpbml0Q29udGV4dHVhbFR1dHMoKSB7XG4gIGNvbnN0ICR0dXRzID0gJCgnLmNvbnRleHR1YWwtdHV0cyAudHV0Jyk7XG4gICR0dXRzLm9uKHRhcEV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmNzcyh7dmlzaWJpbGl0eTogJ2hpZGRlbid9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldENhbnZhcygpIHtcbiAgcGFwZXIucHJvamVjdC5jbGVhcigpO1xuXG4gIC8vIGFkZCByYW5kb20gYmFja2dyb3VuZFxuICBwYXBlci5wcm9qZWN0LmFjdGl2ZUxheWVyLm5hbWUgPSAnYmFja2dyb3VuZCc7XG4gIGNvbnN0IG51bUNhbnZhc3NlcyA9IDEwO1xuICBjb25zdCByYW5kb21DYW52YXNJbmRleCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChudW1DYW52YXNzZXMgLSAxKSkgKyAxOyAvLyBbMSwgbnVtQ2FudmFzc2VzXVxuICBjb25zdCBjYW52YXNCZyA9IG5ldyBSYXN0ZXIoYGNhbnZhcy0ke3JhbmRvbUNhbnZhc0luZGV4fWApO1xuICBjYW52YXNCZy5uYW1lID0gJ2NhbnZhc0JnJztcbiAgY2FudmFzQmcucG9zaXRpb24gPSBwYXBlci52aWV3LmNlbnRlcjtcblxuICAvLyBhZGQgY2FudmFzIGxheWVyXG4gIGNvbnN0IHNjYWxlRmFjdG9ySG9yaXpvbnRhbCA9IHBhcGVyLnZpZXcudmlld1NpemUud2lkdGggLyBjYW52YXNCZy5zaXplLndpZHRoO1xuICBjb25zdCBzY2FsZUZhY3RvclZlcnRpY2FsID0gcGFwZXIudmlldy52aWV3U2l6ZS5oZWlnaHQgLyBjYW52YXNCZy5zaXplLmhlaWdodDtcbiAgY2FudmFzQmcuc2NhbGUoTWF0aC5tYXgoc2NhbGVGYWN0b3JIb3Jpem9udGFsLCBzY2FsZUZhY3RvclZlcnRpY2FsKSk7XG4gIGxldCBsYXllciA9IG5ldyBMYXllcigpOyAvLyBpbml0IG5ldyBsYXllciB0aGF0IGFsbCBvdGhlciBzaGFwZXMgd2lsbCBiZSBkcmF3biB1cG9uXG4gIHBhcGVyLnByb2plY3QuYWN0aXZlTGF5ZXIubmFtZSA9ICdjYW52YXMnO1xufVxuIiwiY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi9jb25maWcnKTtcblxuLy8gQ29udmVydHMgZnJvbSBkZWdyZWVzIHRvIHJhZGlhbnMuXG5leHBvcnQgZnVuY3Rpb24gcmFkKGRlZ3JlZXMpIHtcbiAgcmV0dXJuIGRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwO1xufTtcblxuLy8gQ29udmVydHMgZnJvbSByYWRpYW5zIHRvIGRlZ3JlZXMuXG5leHBvcnQgZnVuY3Rpb24gZGVnKHJhZGlhbnMpIHtcbiAgcmV0dXJuIHJhZGlhbnMgKiAxODAgLyBNYXRoLlBJO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGh5cG90KGEsIGIpIHtcbiAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLCAyKSArIE1hdGgucG93KGIsIDIpKTsgLy8gcHl0aGFnb3JlYW4hXG59XG5cbi8vIHJldHVybnMgYWJzb2x1dGUgdmFsdWUgb2YgdGhlIGRlbHRhIG9mIHR3byBhbmdsZXMgaW4gcmFkaWFuc1xuZXhwb3J0IGZ1bmN0aW9uIGFuZ2xlRGVsdGEoeCwgeSkge1xuICByZXR1cm4gTWF0aC5hYnMoTWF0aC5hdGFuMihNYXRoLnNpbih5IC0geCksIE1hdGguY29zKHkgLSB4KSkpOztcbn1cblxuLy8gZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG5leHBvcnQgZnVuY3Rpb24gZGVsdGEocDEsIHAyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3cocDEueCAtIHAyLngsIDIpICsgTWF0aC5wb3cocDEueSAtIHAyLnksIDIpKTsgLy8gcHl0aGFnb3JlYW4hXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE51bVZpc2libGVHcm91cHMoKSB7XG4gIGNvbnN0IGdyb3VwcyA9IGdldFZpc2libGVHcm91cHMoKTtcbiAgcmV0dXJuIGdyb3Vwcy5sZW5ndGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWaXNpYmxlR3JvdXBzKCkge1xuICByZXR1cm4gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLnZpc2libGUgPT09IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxHcm91cHMoKSB7XG4gIHJldHVybiBwYXBlci5wcm9qZWN0LmdldEl0ZW1zKHtcbiAgICBjbGFzc05hbWU6ICdHcm91cCdcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbnlTaGFwZXNPbkNhbnZhcygpIHtcbiAgY29uc3QgZ3JvdXBzID0gZ2V0VmlzaWJsZUdyb3VwcygpO1xuICByZXR1cm4gZ3JvdXBzLmxlbmd0aCA+IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROdW1Hcm91cHMoKSB7XG4gIGNvbnN0IGdyb3VwcyA9IGdldFZpc2libGVHcm91cHMoKTtcbiAgLy8gY29uc29sZS5sb2coJ251bWdyb3VwcycsIGdyb3Vwcy5sZW5ndGgpO1xuICByZXR1cm4gZ3JvdXBzLmxlbmd0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyZXNoR3JvdXBzKCkge1xuICByZXR1cm4gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5saW5lID09PSBmYWxzZSAmJiBlbC5kYXRhLmZyZXNoID09PSB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsUG9wcygpIHtcbiAgcmV0dXJuIHBhcGVyLnByb2plY3QuZ2V0SXRlbXMoe1xuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5wb3AgPT09IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckdyb3VwUG9wcyhncm91cCkge1xuICBjb25zdCBwb3BzID0gZ2V0R3JvdXBQb3BzKGdyb3VwKTtcbiAgcG9wcy5mb3JFYWNoKChwb3ApID0+IHBvcC5yZW1vdmUoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcm91cFBvcHMoZ3JvdXApIHtcbiAgLy8gY29uc29sZS5sb2coJ2dyb3VwIHBvcCBncm91cCcsIGdyb3VwLmlkLCBncm91cCk7XG4gIGxldCByZXR1cm5Qb3BzID0gW107XG5cbiAgaWYgKGdyb3VwLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBncm91cFBvcHMgPSBncm91cC5nZXRJdGVtcyh7XG4gICAgICBtYXRjaDogKGVsKSA9PiBlbC5kYXRhICYmIGVsLmRhdGEucG9wID09PSB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuUG9wcyA9IHJldHVyblBvcHMuY29uY2F0KGdyb3VwUG9wcyk7XG4gIH1cblxuICBjb25zdCBpbnRlcnNlY3RpbmdQb3BzID0gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgbWF0Y2g6IChlbCkgPT4gZWwuZGF0YSAmJiBlbC5kYXRhLnBvcCA9PT0gdHJ1ZSAmJiBlbC5kYXRhLmludGVyc2VjdGluZ0dyb3VwID09PSBncm91cC5pZFxuICB9KTtcblxuICBpZiAoaW50ZXJzZWN0aW5nUG9wcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuUG9wcyA9IHJldHVyblBvcHMuY29uY2F0KGludGVyc2VjdGluZ1BvcHMpO1xuICB9XG5cbiAgcmV0dXJuIHJldHVyblBvcHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb3BDYW5kaWRhdGVzKCkge1xuICByZXR1cm4gcGFwZXIucHJvamVjdC5nZXRJdGVtcyh7XG4gICAgY2xhc3NOYW1lOiAnR3JvdXAnLFxuICAgIG1hdGNoOiAoZWwpID0+IGVsLmRhdGEgJiYgZWwuZGF0YS5saW5lID09PSBmYWxzZSAmJiBlbC52aXNpYmxlID09PSB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0U2hhKCkge1xuICAkLmdldCgnL2hhc2gnKVxuICAgIC5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgY29uc29sZS5sb2coJ2N1cnJlbnQgaGFzaDonLCByZXMpO1xuICAgICAgd2luZG93Lmthbi5oYXNoID0gcmVzO1xuICAgIH0pXG4gICAgLmZhaWwoZnVuY3Rpb24oZSkge1xuICAgICAgY29uc29sZS5lcnJvcignZXJyb3IgZ2V0dGluZyBoYXNoOicsIGUpO1xuICAgIH0pO1xufVxuXG4vLyBodHRwOi8vYmxvZy5zb3Vsc2Vydi5uZXQvdW5kZXJzdGFuZGluZy1vYmplY3QtY2xvbmluZy1pbi1qYXZhc2NyaXB0LXBhcnQtaS9cbmV4cG9ydCBmdW5jdGlvbiBzaGFsbG93Q29weSggb3JpZ2luYWwgKSB7XG4gICAgLy8gRmlyc3QgY3JlYXRlIGFuIGVtcHR5IG9iamVjdCB3aXRoXG4gICAgLy8gc2FtZSBwcm90b3R5cGUgb2Ygb3VyIG9yaWdpbmFsIHNvdXJjZVxuICAgIHZhciBjbG9uZSA9IE9iamVjdC5jcmVhdGUoIE9iamVjdC5nZXRQcm90b3R5cGVPZiggb3JpZ2luYWwgKSApIDtcblxuICAgIHZhciBpLCBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoIG9yaWdpbmFsICkgO1xuXG4gICAgZm9yICggaSA9IDAgOyBpIDwga2V5cy5sZW5ndGggOyBpICsrICkge1xuICAgICAgLy8gY29weSBlYWNoIHByb3BlcnR5IGludG8gdGhlIGNsb25lXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoIGNsb25lICwga2V5c1sgaSBdICxcbiAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciggb3JpZ2luYWwgLCBrZXlzWyBpIF0gKVxuICAgICAgKSA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb25lIDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbVBpY2soYXJyYXkpIHtcbiAgaWYgKGFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gYXJyYXlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXkubGVuZ3RoKV07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vLi4vLi4vY29uZmlnJyk7XG5cbmNvbnN0IG1haW4gPSByZXF1aXJlKCcuL21haW4nKTtcbmNvbnN0IG92ZXJsYXlzID0gcmVxdWlyZSgnLi9vdmVybGF5cycpO1xuY29uc3QgdGltaW5nID0gcmVxdWlyZSgnLi90aW1pbmcnKTtcbmNvbnN0IHVpID0gcmVxdWlyZSgnLi91aScpO1xuY29uc3Qgc291bmQgPSByZXF1aXJlKCcuL3NvdW5kJyk7XG5cbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuY29uc3QgdGFwRXZlbnQgPSAnY2xpY2sgdGFwIHRvdWNoJztcblxuZXhwb3J0IGNvbnN0IHZpZGVvUGxheWluZ0NsYXNzID0gJ3ZpZGVvLXBsYXlpbmcnO1xuXG5jb25zdCAkdmlkZW9XcmFwcGVyID0gJGJvZHkuZmluZCgnI3ZpZGVvLXdyYXAnKTtcbmNvbnN0ICR2aWRlbyA9ICR2aWRlb1dyYXBwZXIuZmluZCgndmlkZW8nKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVudGVyVHV0b3JpYWxNb2RlKCkge1xuICBjb25zb2xlLmxvZygnZW50ZXJpbmcgdHV0b3JpYWwgbW9kZScpO1xuICBwbGF5VmlkZW8oKTtcbiAgJGJvZHkuYWRkQ2xhc3ModmlkZW9QbGF5aW5nQ2xhc3MpO1xuICBjbGVhclRpbWVvdXQod2luZG93Lmthbi5pbmFjdGl2aXR5VGltZW91dCk7XG4gIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5jb250aW51ZUNvdW50ZG93bkludGVydmFsKTtcbiAgJGJvZHkub2ZmKHRhcEV2ZW50LCB0aW1pbmcucHJldmVudEluYWN0aXZpdHlUaW1lb3V0KTtcbiAgJGJvZHkub24odGFwRXZlbnQsIGV4aXRUdXRvcmlhbE1vZGUpO1xuICBtYWluLnJlc2V0V2luZG93KCk7XG4gIHVpLnJlc2V0Q2FudmFzKCk7XG4gIHdpbmRvdy5rYW4ucmVmcmVzaENoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgJC5nZXQoJy9oYXNoJylcbiAgICAgIC5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBpZiAocmVzICE9PSB3aW5kb3cua2FuLmhhc2gpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZGlmZmVyZW50IGhhc2gsIHJlbG9hZGluZycpO1xuICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdlcnJvciBnZXR0aW5nIGhhc2g6JywgZSk7XG4gICAgICB9KTtcbiAgfSwgdGltaW5nLnJlZnJlc2hDaGVja0RlbGF5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4aXRUdXRvcmlhbE1vZGUoKSB7XG4gIGNvbnNvbGUubG9nKCdleGl0aW5nIHR1dG9yaWFsIG1vZGUnKTtcbiAgc291bmQucmVpbml0U2hhcGVTb3VuZHMoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwod2luZG93Lmthbi5yZWZyZXNoQ2hlY2tJbnRlcnZhbCk7XG4gICAgICBIb3dsZXIubXV0ZShmYWxzZSk7XG4gICAgICBwYXVzZVZpZGVvKCk7XG4gICAgICAkYm9keS5vZmYodGFwRXZlbnQsIGV4aXRUdXRvcmlhbE1vZGUpO1xuICAgICAgJGJvZHkub24odGFwRXZlbnQsIHRpbWluZy5wcmV2ZW50SW5hY3Rpdml0eVRpbWVvdXQpO1xuICAgICAgJGJvZHkucmVtb3ZlQ2xhc3ModmlkZW9QbGF5aW5nQ2xhc3MpO1xuICAgICAgY2xlYXJUaW1lb3V0KHdpbmRvdy5rYW4uaW5hY3Rpdml0eVRpbWVvdXQpO1xuICAgICAgY2xlYXJJbnRlcnZhbCh3aW5kb3cua2FuLmNvbnRpbnVlQ291bnRkb3duSW50ZXJ2YWwpO1xuXG4gICAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnaW50cm8nKTtcblxuICAgICAgd2luZG93Lmthbi5pbmFjdGl2aXR5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBvdmVybGF5cy5vcGVuT3ZlcmxheSgnY29udGludWUnKTtcbiAgICAgIH0sIHRpbWluZy5jb250aW51ZUluYWN0aXZpdHlEZWxheSk7XG4gICAgfSlcbiAgLmZhaWwoKGUpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdlcnJvciBpbml0dGluZyBzaGFwZSBzb3VuZHM6JywgZSk7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGF1c2VWaWRlbygpIHtcbiAgJHZpZGVvLmdldCgwKS5wYXVzZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxheVZpZGVvKCkge1xuICAkdmlkZW8uZ2V0KDApLnBsYXkoKTtcbn1cbiJdfQ==\n"]}
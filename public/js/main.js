!function(n){function t(e){if(o[e])return o[e].exports;var r=o[e]={exports:{},id:e,loaded:!1};return n[e].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=n,t.c=o,t.p="public",t(0)}([function(n,t,o){o(1),n.exports=o(2)},function(n,t){window.kan=window.kan||{palette:["#20171C","#1E2A43","#28377D","#352747","#F285A5","#CA2E26","#B84526","#DA6C26","#453121","#916A47","#EEB641","#F6EB16","#7F7D31","#6EAD79","#2A4621","#F4EAE0"],currentColor:"#20171C",numPaths:10,paths:[]},paper.install(window),$(document).ready(function(){function n(){t(),e(),h(),d(),u(),p(),f()}function t(){var n=$("ul.palette-colors"),t=n.find("li"),o=20,e=30,r="palette-selected";t.on("click tap touch",function(){var n=$(this).find("svg.palette-color");n.hasClass(r)||($("."+r).removeClass(r).attr("width",o).attr("height",o).find("rect").attr("rx",0).attr("ry",0),n.addClass(r).attr("width",e).attr("height",e).find("rect").attr("rx",e/2).attr("ry",e/2),window.kan.currentColor=n.find("rect").attr("fill"))})}function o(n){for(var t=[],o=0;o<n;o++){var e=new paper.CompoundPath({children:[new paper.Path,new paper.Path({strokeColor:"#fff"}),new paper.Path]});e.strokeColor=window.kan.currentColor,e.strokeWidth=1,t.push(e)}return t}function e(){function n(n){h=!0;for(var t=0;t<n.touches.length;t++){l[t].strokeColor=window.kan.currentColor;for(var o=0;o<l[t].children.length;o++)l[t].children[o].add(new Point(n.touches[t].pageX,n.touches[t].pageY))}}function t(n){if(n.preventDefault(),h){for(;s.length>p;)s.shift();for(var t=0;t<n.touches.length;t++){var o,e,f,g,w,m,v,k,C,x,P,M,y;if(o=n.touches[t].pageX,e=n.touches[t].pageY,x=new Point(o,e),i.length>t){C=i[t],M=r(x,C),y=M*u,y>=d&&(y=d),a=0;for(var $=0;$<s.length;$++)a+=s[$];c=Math.round((a/s.length+y)/2),P=Math.atan2(x.y-C.y,x.x-C.x),f=o+Math.cos(P+Math.PI/2)*c,g=e+Math.sin(P+Math.PI/2)*c,w=new Point(f,g),m=o+Math.cos(P-Math.PI/2)*c,v=e+Math.sin(P-Math.PI/2)*c,k=new Point(m,v),l[t].children[0].add(w),l[t].children[0].smooth(),l[t].children[1].add(x),l[t].children[1].smooth(),l[t].children[2].add(k),l[t].children[2].smooth()}else M=1,P=0,y=M*u,y>=d&&(y=d);paper.view.draw(),i[t]=x,s.push(y)}}}function e(n){h=!1;for(var t=0;t<l.length;t++)for(var e=0;e<l[t].children.length;e++)if(l[t].children[e].segments.length&&1!==e){l[t].children[e].segments[l[t].children[e].segments.length-1]=l[t].children[1].segments[l[t].children[1].segments.length-1],l[t].children[e].smooth(),l[t].children[e].simplify(),console.log("--------------------------");for(var r=0;r<l[t].children[e].segments.length;r++)console.log(l[t].children[e].segments[r].point.x,l[t].children[e].segments[r].point.y);console.log("--------------------------")}l=o(window.kan.numPaths),i=[],s=[]}paper.setup(w[0]);var a,c,i=[],s=[],l=o(window.kan.numPaths),h=!1,d=20,u=1,p=10;w.on("touchstart",n),w.on("touchmove",t),w.on("touchend",e)}function r(n,t){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function a(){console.log("new pressed"),moves=[]}function c(){console.log("undo pressed")}function i(){console.log("play pressed")}function s(){console.log("tips pressed")}function l(){console.log("share pressed")}function h(){$(".main-controls .new").on("click tap touch",a)}function d(){$(".main-controls .undo").on("click",c)}function u(){$(".main-controls .play").on("click",i)}function p(){$(".aux-controls .tips").on("click",s)}function f(){$(".aux-controls .share").on("click",l)}function g(){n()}var w=($(window),$("body"),$("canvas#mainCanvas"));g()})},function(n,t){}]);
!function(o){function n(e){if(t[e])return t[e].exports;var r=t[e]={exports:{},id:e,loaded:!1};return o[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=o,n.c=t,n.p="public",n(0)}([function(o,n,t){t(1),o.exports=t(2)},function(o,n){window.kan=window.kan||{palette:["#20171C","#1E2A43","#28377D","#352747","#F285A5","#CA2E26","#B84526","#DA6C26","#453121","#916A47","#EEB641","#F6EB16","#7F7D31","#6EAD79","#2A4621","#F4EAE0"],currentColor:"#20171C",numPaths:10,paths:[]},paper.install(window),$(document).ready(function(){function o(){n(),e(),u(),h(),p(),f(),d()}function n(){var o=$("ul.palette-colors"),n=o.find("li"),t=20,e=30,r="palette-selected";n.on("click tap touch",function(){var o=$(this).find("svg.palette-color");o.hasClass(r)||($("."+r).removeClass(r).attr("width",t).attr("height",t).find("rect").attr("rx",0).attr("ry",0),o.addClass(r).attr("width",e).attr("height",e).find("rect").attr("rx",e/2).attr("ry",e/2),window.kan.currentColor=o.find("rect").attr("fill"))})}function t(o){for(var n=[],t=0;t<o;t++)n.push(new paper.Path({strokeColor:window.kan.currentColor,fillColor:window.kan.currentColor,strokeWidth:5}));return n}function e(){function o(o){if(p)console.log("still being touched; ignoring");else{p=!0;for(var n=0;n<o.touches.length;n++)h[n].strokeColor=window.kan.currentColor,h[n].fillColor=window.kan.currentColor,h[n].add(new Point(o.touches[n].pageX,o.touches[n].pageY))}}function n(o){if(o.preventDefault(),p){for(console.log("not ignoring");u.length>w;)u.shift();for(var n=0;n<o.touches.length;n++)if(o.touches[n]){var t,e,a,i,g,v,m,C,k,x,y,M,P;if(t=o.touches[n].pageX,e=o.touches[n].pageY,x=new Point(t,e),l.length>n){k=l[n],M=r(x,k),P=M*d,P>=f&&(P=f),s=0;for(var $=0;$<u.length;$++)s+=u[$];c=Math.round((s/u.length+P)/2),y=Math.atan2(x.y-k.y,x.x-k.x),a=t+Math.cos(y+Math.PI/2)*c,i=e+Math.sin(y+Math.PI/2)*c,g=new Point(a,i),v=t+Math.cos(y-Math.PI/2)*c,m=e+Math.sin(y-Math.PI/2)*c,C=new Point(v,m),h[n].add(C),h[n].insert(0,g),h[n].smooth({type:"continuous"})}else M=1,y=0,P=M*d,P>=f&&(P=f);paper.view.draw(),l[n]=x,u.push(P)}}}function e(o){v=1;for(var n=0;n<h.length;n++)h[n].segments.length>0?(h[n].smooth({type:"continuous"}),h[n].simplify(),i=h[n]):h[n].remove();var e=paper.project.activeLayer.lastChild;console.log(e);0===o.touches.length&&(p=!1,h=t(window.kan.numPaths),l=[],u=[])}function a(o){if(i&&v>0)for(var n=0;n<i.segments.length;n++){var t=i.segments[n],e=16,r=2,a=Math.cos(o.time*e+n),s=Math.sin(o.time*e+n);t.point.x+=a/r*v,t.point.y+=s/r*v,console.log(a,s,v),v-=.001}}paper.setup(g[0]);var i,s,c,l=[],u=[],h=t(window.kan.numPaths),p=!1,f=20,d=.3,w=10,v=0;paper.view.onFrame=a,g.on("touchstart",o),g.on("touchmove",n),g.on("touchend",e)}function r(o,n){return Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))}function a(){console.log("new pressed"),moves=[]}function i(){console.log("undo pressed")}function s(){console.log("play pressed")}function c(){console.log("tips pressed")}function l(){console.log("share pressed")}function u(){$(".main-controls .new").on("click tap touch",a)}function h(){$(".main-controls .undo").on("click",i)}function p(){$(".main-controls .play").on("click",s)}function f(){$(".aux-controls .tips").on("click",c)}function d(){$(".aux-controls .share").on("click",l)}function w(){o()}var g=($(window),$("body"),$("canvas#mainCanvas"));w()})},function(o,n){}]);
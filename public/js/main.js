!function e(o,n,t){function r(i,l){if(!n[i]){if(!o[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(a)return a(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[i]={exports:{}};o[i][0].call(c.exports,function(e){var n=o[i][1][e];return r(n?n:e)},c,c.exports,e,o,n,t)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,o,n){"use strict";window.kan=window.kan||{palette:["#20171C","#1E2A43","#28377D","#352747","#F285A5","#CA2E26","#B84526","#DA6C26","#453121","#916A47","#EEB641","#F6EB16","#7F7D31","#6EAD79","#2A4621","#F4EAE0"],currentColor:"#20171C",numPaths:10,paths:[]},paper.install(window);var t=e("./util");$(document).ready(function(){function e(){o(),n(),d(),c(),u(),p(),f()}function o(){var e=$("ul.palette-colors"),o=e.find("li"),n=20,t=30,r="palette-selected";o.on("click tap touch",function(){var e=$(this).find("svg.palette-color");e.hasClass(r)||($("."+r).removeClass(r).attr("width",n).attr("height",n).find("rect").attr("rx",0).attr("ry",0),e.addClass(r).attr("width",t).attr("height",t).find("rect").attr("rx",t/2).attr("ry",t/2),window.kan.currentColor=e.find("rect").attr("fill"))})}function n(){function e(e){if(s=[],e.changedPointers&&e.changedPointers.length>0){e.changedPointers.length>1&&console.log("event.changedPointers > 1");var o=e.center,n=new Point(o.x,o.y);i=new Path({strokeColor:window.kan.currentColor,fillColor:window.kan.currentColor,name:"bounds"}),a=new Path({strokeColor:window.kan.currentColor,name:"middle",strokeWidth:1}),i.add(n),a.add(n)}}function o(e){e.preventDefault();for(var o=e.center,n=new Point(o.x,o.y);s.length>p;)s.shift();var r=void 0,d=void 0,v=void 0,g=void 0,w=void 0,m=void 0,C=void 0,y=void 0,P=void 0,k=void 0;if(s.length>0){C=l,P=t.delta(n,C),k=P*u,k>=c&&(k=c),f=0;for(var x=0;x<s.length;x++)f+=s[x];h=Math.round((f/s.length+k)/2),y=Math.atan2(n.y-C.y,n.x-C.x),r=n.x+Math.cos(y+Math.PI/2)*h,d=n.y+Math.sin(y+Math.PI/2)*h,v=new Point(r,d),g=n.x+Math.cos(y-Math.PI/2)*h,w=n.y+Math.sin(y-Math.PI/2)*h,m=new Point(g,w),i.add(m),i.insert(0,v),a.add(n)}else P=1,y=0,k=P*u,k>=c&&(k=c);paper.view.draw(),l=n,s.push(k)}function n(e){y=1;var o=e.center,n=new Point(o.x,o.y),r=new Group([i,a]);i.add(n),i.flatten(4),i.smooth(),i.simplify(),i.closed=!0,a.add(n),a.flatten(4),a.smooth(),a.simplify();var l=a.getCrossings();if(l.length>0){var s=new Path;s.copyContent(a),s.visible=!1;var c=s.resolveCrossings();c.visible=!1;var u=t.findInteriorCurves(c);if(u)for(var p=0;p<u.length;p++)u[p].visible=!0,u[p].closed=!0,u[p].fillColor=new Color(0,0),u[p].data.interior=!0,u[p].data.transparent=!0,r.addChild(u[p]);s.remove()}r.data.color=i.fillColor,d=r,v.push({type:"newGroup",id:r.id}),w&&r.animate([{properties:{scale:.9},settings:{duration:100,easing:"easeOut"}},{properties:{scale:1.11},settings:{duration:100,easing:"easeIn"}}])}function r(e){var o=e.center,n=new Point(o.x,o.y),t=paper.project.hitTest(n,C);if(t){var r=t.item,a=r.parent;r.data.interior?(console.log("interior"),r.data.transparent=!r.data.transparent,r.data.transparent?(r.fillColor=m,r.strokeColor=m):(r.fillColor=a.data.color,r.strokeColor=a.data.color),v.push({type:"fillChanged",id:r.id,fill:a.data.color,transparent:r.data.transparent})):console.log("not interior")}else console.log("hit no item")}paper.setup(g[0]);var a=void 0,i=void 0,l=void 0,s=void 0,d=void 0,c=20,u=.3,p=10,f=void 0,h=void 0,C={segments:!1,stroke:!0,fill:!0,tolerance:5},y=0,P=new Hammer.Manager(g[0]);P.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL})),P.add(new Hammer.Tap({event:"doubletap",taps:2})),P.add(new Hammer.Tap({event:"singletap"})),P.on("panstart",e),P.on("panmove",o),P.on("panend",n),P.get("doubletap").recognizeWith("singletap"),P.get("singletap").requireFailure("doubletap"),P.on("singletap",function(){console.log("singleTap")}),P.on("doubletap",r)}function r(){console.log("new pressed"),paper.project.activeLayer.removeChildren()}function a(){if(console.log("undo pressed"),!(v.length>0))return void console.log("no moves yet");var e=v.pop();switch(e.type){case"newGroup":var o=project.getItem({id:e.id});o?(console.log("removing group"),o.remove()):console.log("could not find matching group");break;case"fillChanged":var n=project.getItem({id:e.id});e.transparent?(n.fillColor=e.fill,n.strokeColor=e.fill):(n.fillColor=m,n.strokeColor=m);break;default:console.log("unknown case")}console.log(e)}function i(){console.log("play pressed")}function l(){console.log("tips pressed")}function s(){console.log("share pressed")}function d(){$(".main-controls .new").on("click tap touch",r)}function c(){$(".main-controls .undo").on("click",a)}function u(){$(".main-controls .play").on("click",i)}function p(){$(".aux-controls .tips").on("click",l)}function f(){$(".aux-controls .share").on("click",s)}function h(){e()}var v=[],g=($(window),$("body"),$("canvas#mainCanvas")),w=!0,m=new Color(0,0);h()})},{"./util":2}],2:[function(e,o,n){"use strict";function t(e){return e*Math.PI/180}function r(e){return 180*e/Math.PI}function a(e,o){return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))}function i(e){for(var o=[],n=0;n<e.children.length;n++){var t=e.children[n];t.closed&&o.push(new Path(t.segments))}return e.remove(),o}function l(e){var o=(e._namedChildren.bounds[0],e._namedChildren.middle[0]),n=new Path;n.copyContent(o),n.visible=!1;var t=n.resolveCrossings();t.visible=!1,Base.each(t.children,function(e,o){e.closed?e.selected=!1:e.selected=!0,console.log(e,o)})}function s(e){console.log(group)}Object.defineProperty(n,"__esModule",{value:!0}),n.rad=t,n.deg=r,n.delta=a,n.findInteriorCurves=i,n.trueGroup=l,n.truePath=s},{}]},{},[1]);
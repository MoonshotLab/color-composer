!function n(e,t,o){function r(i,l){if(!t[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=t[i]={exports:{}};e[i][0].call(d.exports,function(n){var t=e[i][1][n];return r(t?t:n)},d,d.exports,n,e,t,o)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(n,e,t){"use strict";window.kan=window.kan||{palette:["#20171C","#1E2A43","#28377D","#352747","#F285A5","#CA2E26","#B84526","#DA6C26","#453121","#916A47","#EEB641","#F6EB16","#7F7D31","#6EAD79","#2A4621","#F4EAE0"],currentColor:"#20171C",numPaths:10,paths:[]},paper.install(window);var o=n("./util");$(document).ready(function(){function n(){e(),t(),c(),d(),u(),f(),p()}function e(){var n=$("ul.palette-colors"),e=n.find("li"),t=20,o=30,r="palette-selected";e.on("click tap touch",function(){var n=$(this).find("svg.palette-color");n.hasClass(r)||($("."+r).removeClass(r).attr("width",t).attr("height",t).find("rect").attr("rx",0).attr("ry",0),n.addClass(r).attr("width",o).attr("height",o).find("rect").attr("rx",o/2).attr("ry",o/2),window.kan.currentColor=n.find("rect").attr("fill"))})}function t(){function n(n){if(paper.project.activeLayer.removeChildren(),l=[],n.changedPointers&&n.changedPointers.length>0){n.changedPointers.length>1&&console.log("event.changedPointers > 1");var e=n.center,t=new Point(e.x,e.y);a=new Path({strokeColor:window.kan.currentColor,fillColor:window.kan.currentColor,name:"bounds"}),a.add(t)}}function e(n){n.preventDefault();for(var e=n.center,t=new Point(e.x,e.y);l.length>u;)l.shift();var r=void 0,s=void 0,v=void 0,h=void 0,g=void 0,w=void 0,m=void 0,C=void 0,y=void 0,P=void 0;if(l.length>0){m=i,y=o.delta(t,m),P=y*d,P>=c&&(P=c),f=0;for(var x=0;x<l.length;x++)f+=l[x];p=Math.round((f/l.length+P)/2),C=Math.atan2(t.y-m.y,t.x-m.x),r=t.x+Math.cos(C+Math.PI/2)*p,s=t.y+Math.sin(C+Math.PI/2)*p,v=new Point(r,s),h=t.x+Math.cos(C-Math.PI/2)*p,g=t.y+Math.sin(C-Math.PI/2)*p,w=new Point(h,g),a.add(w),a.insert(0,v),a.smooth()}else y=1,C=0,P=y*d,P>=c&&(P=c);paper.view.draw(),i=t,l.push(P)}function t(n){g=1;var e=n.center,t=new Point(e.x,e.y),r=new Group(a);a.add(t),a.smooth(),a.simplify(0),a.closed=!0;var i=a.getCrossings();if(i.length>0){var l=new Path;l.copyContent(a),l.visible=!1;var c=l.resolveCrossings();c.visible=!1;var d=o.findInteriorCurves(c);if(d)for(var u=0;u<d.length;u++)d[u].visible=!0,d[u].closed=!0,d[u].fillColor=new Color(0,0),d[u].data.interior=!0,d[u].data.transparent=!0,r.addChild(d[u]);l.remove()}r.data.color=a.fillColor,s=r}function r(n){var e=n.center,t=new Point(e.x,e.y),o=paper.project.hitTest(t,v),r=new Color(0,0);if(o){var a=o.item,i=a.parent;a.data.interior?(console.log("interior"),a.data.transparent=!a.data.transparent,a.data.transparent?a.fillColor=r:a.fillColor=i.data.color):console.log("not interior")}else console.log("hit no item")}paper.setup(h[0]);var a=void 0,i=void 0,l=void 0,s=void 0,c=20,d=.3,u=10,f=void 0,p=void 0,v={segments:!1,stroke:!0,fill:!0,tolerance:5},g=0,w=new Hammer.Manager(h[0]);w.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL})),w.add(new Hammer.Tap({event:"doubletap",taps:2})),w.add(new Hammer.Tap({event:"singletap"})),w.on("panstart",n),w.on("panmove",e),w.on("panend",t),w.get("doubletap").recognizeWith("singletap"),w.get("singletap").requireFailure("doubletap"),w.on("singletap",function(){console.log("singleTap")}),w.on("doubletap",r)}function r(){console.log("new pressed"),paper.project.activeLayer.removeChildren()}function a(){console.log("undo pressed")}function i(){console.log("play pressed")}function l(){console.log("tips pressed")}function s(){console.log("share pressed")}function c(){$(".main-controls .new").on("click tap touch",r)}function d(){$(".main-controls .undo").on("click",a)}function u(){$(".main-controls .play").on("click",i)}function f(){$(".aux-controls .tips").on("click",l)}function p(){$(".aux-controls .share").on("click",s)}function v(){n()}var h=($(window),$("body"),$("canvas#mainCanvas"));v()})},{"./util":2}],2:[function(n,e,t){"use strict";function o(n){return n*Math.PI/180}function r(n){return 180*n/Math.PI}function a(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function i(n){for(var e=[],t=0;t<n.children.length;t++){var o=n.children[t];if(o.closed){for(var r=(o.strokeBounds,!1),a=0;a<n.children.length;a++)a!==t&&o.isInside(n.children[a].strokeBounds)&&(r=!0);r&&e.push(new Path(o.segments))}else o.remove()}return n.remove(),e}Object.defineProperty(t,"__esModule",{value:!0}),t.rad=o,t.deg=r,t.delta=a,t.findInteriorCurves=i},{}]},{},[1]);
//# sourceMappingURL=maps/main.js.map

!function n(o,e,t){function r(i,l){if(!e[i]){if(!o[i]){var c="function"==typeof require&&require;if(!l&&c)return c(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var d=e[i]={exports:{}};o[i][0].call(d.exports,function(n){var e=o[i][1][n];return r(e?e:n)},d,d.exports,n,o,e,t)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(n,o,e){"use strict";window.kan=window.kan||{palette:["#20171C","#1E2A43","#28377D","#352747","#F285A5","#CA2E26","#B84526","#DA6C26","#453121","#916A47","#EEB641","#F6EB16","#7F7D31","#6EAD79","#2A4621","#F4EAE0"],currentColor:"#20171C",numPaths:10,paths:[]},paper.install(window);var t=n("./util");$(document).ready(function(){function n(){o(),e(),s(),d(),u(),p(),f()}function o(){var n=$("ul.palette-colors"),o=n.find("li"),e=20,t=30,r="palette-selected";o.on("click tap touch",function(){var n=$(this).find("svg.palette-color");n.hasClass(r)||($("."+r).removeClass(r).attr("width",e).attr("height",e).find("rect").attr("rx",0).attr("ry",0),n.addClass(r).attr("width",t).attr("height",t).find("rect").attr("rx",t/2).attr("ry",t/2),window.kan.currentColor=n.find("rect").attr("fill"))})}function e(){function n(n){if(u=[],n.changedPointers&&n.changedPointers.length>0){n.changedPointers.length>1&&console.log("event.changedPointers > 1");var o=n.center,e=new Point(o.x,o.y);s=new Path({strokeColor:window.kan.currentColor,fillColor:window.kan.currentColor,name:"bounds"}),c=new Path({strokeColor:window.kan.currentColor,name:"middle",strokeWidth:1}),s.add(e),c.add(e)}}function o(n){n.preventDefault();for(var o=n.center,e=new Point(o.x,o.y);u.length>w;)u.shift();var r=void 0,a=void 0,i=void 0,l=void 0,p=void 0,v=void 0,P=void 0,y=void 0,M=void 0,x=void 0;if(u.length>0){P=d,M=t.delta(e,P),x=M*g,x=Math.max(Math.min(x,h),f),m=0;for(var k=0;k<u.length;k++)m+=u[k];C=Math.round((m/u.length+x)/2),y=Math.atan2(e.y-P.y,e.x-P.x),r=e.x+Math.cos(y+Math.PI/2)*C,a=e.y+Math.sin(y+Math.PI/2)*C,i=new Point(r,a),l=e.x+Math.cos(y-Math.PI/2)*C,p=e.y+Math.sin(y-Math.PI/2)*C,v=new Point(l,p),s.add(v),s.insert(0,i),c.add(e)}else M=1,y=0,x=M*g,x=Math.max(Math.min(x,h),f);paper.view.draw(),d=e,u.push(x)}function e(n){k=1;var o=n.center,e=new Point(o.x,o.y),r=new Group([s,c]);s.add(e),s.flatten(4),s.smooth(),s.simplify(),s.closed=!0,c.add(e),c.flatten(4),c.smooth(),c.simplify();var a=c.getCrossings();if(a.length>0){var i=new Path;i.copyContent(c),i.visible=!1;var l=i.resolveCrossings();l.visible=!1;var d=t.findInteriorCurves(l);if(d)for(var u=0;u<d.length;u++)d[u].visible=!0,d[u].closed=!0,d[u].fillColor=new Color(0,0),d[u].data.interior=!0,d[u].data.transparent=!0,r.addChild(d[u]);i.remove()}else console.log("no intersections");r.data.color=s.fillColor,console.log(r.rotation),p=r}function r(n){console.log("pinchstart",n),b.get("pan").set({enable:!1});var o=n.center,e=new Point(o.x,o.y),t=paper.project.hitTest(e,x);t?(P=t.item.parent,y=P.scale,M=P.rotation):console.log("hit no item")}function a(n){if(P){console.log("pinchmove",n),console.log(P);var o=n.scale,e=o/y;y=o,console.log(y,o,e);var t=n.rotation,r=t-M;M=t,console.log(M,t,r),P.rotate(r)}}function i(n){console.log("pinchend",n),setTimeout(function(){b.get("pan").set({enable:!0})},250)}function l(n){var o=n.center,e=new Point(o.x,o.y),t=paper.project.hitTest(e,x),r=new Color(0,0);if(t){var a=t.item,i=a.parent;a.data.interior?(console.log("interior"),a.data.transparent=!a.data.transparent,a.data.transparent?(a.fillColor=r,a.strokeColor=r):(a.fillColor=i.data.color,a.strokeColor=i.data.color)):console.log("not interior")}else console.log("hit no item")}paper.setup(v[0]);var c=void 0,s=void 0,d=void 0,u=void 0,p=void 0,f=0,h=20,g=.3,w=10,m=void 0,C=void 0,P=void 0,y=void 0,M=void 0,x={segments:!1,stroke:!0,fill:!0,tolerance:5},k=0,b=new Hammer.Manager(v[0]);b.add(new Hammer.Tap({event:"doubletap",taps:2})),b.add(new Hammer.Tap({event:"singletap"})),b.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL})),b.add(new Hammer.Pinch),b.get("doubletap").recognizeWith("singletap"),b.get("singletap").requireFailure("doubletap"),b.get("pan").requireFailure("pinch"),b.on("singletap",function(){console.log("singleTap")}),b.on("doubletap",l),b.on("panstart",n),b.on("panmove",o),b.on("panend",e),b.on("pinchstart",r),b.on("pinchmove",a),b.on("pinchend",i),b.on("pinchcancel",function(){b.get("pan").set({enable:!0})})}function r(){console.log("new pressed"),paper.project.activeLayer.removeChildren()}function a(){console.log("undo pressed")}function i(){console.log("play pressed")}function l(){console.log("tips pressed")}function c(){console.log("share pressed")}function s(){$(".main-controls .new").on("click tap touch",r)}function d(){$(".main-controls .undo").on("click",a)}function u(){$(".main-controls .play").on("click",i)}function p(){$(".aux-controls .tips").on("click",l)}function f(){$(".aux-controls .share").on("click",c)}function h(){n()}var v=($(window),$("body"),$("canvas#mainCanvas"));h()})},{"./util":2}],2:[function(n,o,e){"use strict";function t(n){return n*Math.PI/180}function r(n){return 180*n/Math.PI}function a(n,o){return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))}function i(n){for(var o=[],e=0;e<n.children.length;e++){var t=n.children[e];t.closed&&o.push(new Path(t.segments))}return n.remove(),o}Object.defineProperty(e,"__esModule",{value:!0}),e.rad=t,e.deg=r,e.delta=a,e.findInteriorCurves=i},{}]},{},[1]);
//# sourceMappingURL=maps/main.js.map

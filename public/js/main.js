!function(t){function o(e){if(n[e])return n[e].exports;var r=n[e]={exports:{},id:e,loaded:!1};return t[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var n={};return o.m=t,o.c=n,o.p="public",o(0)}([function(t,o,n){n(1),t.exports=n(2)},function(t,o){window.kan=window.kan||{palette:["#20171C","#1E2A43","#28377D","#352747","#F285A5","#CA2E26","#B84526","#DA6C26","#453121","#916A47","#EEB641","#F6EB16","#7F7D31","#6EAD79","#2A4621","#F4EAE0"],currentColor:"#20171C",numPaths:10,paths:[]},paper.install(window),$(document).ready(function(){function t(){o(),e(),u(),h(),p(),f(),d()}function o(){var t=$("ul.palette-colors"),o=t.find("li"),n=20,e=30,r="palette-selected";o.on("click tap touch",function(){var t=$(this).find("svg.palette-color");t.hasClass(r)||($("."+r).removeClass(r).attr("width",n).attr("height",n).find("rect").attr("rx",0).attr("ry",0),t.addClass(r).attr("width",e).attr("height",e).find("rect").attr("rx",e/2).attr("ry",e/2),window.kan.currentColor=t.find("rect").attr("fill"))})}function n(t){for(var o=[],n=0;n<t;n++)o.push(new paper.Path({strokeColor:window.kan.currentColor,fillColor:window.kan.currentColor,strokeWidth:5}));return o}function e(){function t(t){if(t.touches.length){for(var o,n={segments:!1,stroke:!0,fill:!0,tolerance:5},e=0;e<t.touches.length;e++){var r=new Point(t.touches[e].pageX,t.touches[e].pageY);if(o=paper.project.hitTest(r,n)){console.log(o),o.item.selected=!o.item.selected;break}}if(p)console.log("still being touched; ignoring");else{p=!0;for(var e=0;e<t.touches.length;e++)h[e].strokeColor=window.kan.currentColor,h[e].fillColor=window.kan.currentColor,h[e].add(new Point(t.touches[e].pageX,t.touches[e].pageY))}}}function o(t){if(t.preventDefault(),p){for(console.log("not ignoring");u.length>g;)u.shift();for(var o=0;o<t.touches.length;o++)if(t.touches[o]){var n,e,a,i,w,v,m,k,C,x,y,M,P;if(n=t.touches[o].pageX,e=t.touches[o].pageY,x=new Point(n,e),l.length>o){C=l[o],M=r(x,C),P=M*d,P>=f&&(P=f),s=0;for(var $=0;$<u.length;$++)s+=u[$];c=Math.round((s/u.length+P)/2),y=Math.atan2(x.y-C.y,x.x-C.x),a=n+Math.cos(y+Math.PI/2)*c,i=e+Math.sin(y+Math.PI/2)*c,w=new Point(a,i),v=n+Math.cos(y-Math.PI/2)*c,m=e+Math.sin(y-Math.PI/2)*c,k=new Point(v,m),h[o].add(k),h[o].insert(0,w),h[o].smooth({type:"continuous"})}else M=1,y=0,P=M*d,P>=f&&(P=f);paper.view.draw(),l[o]=x,u.push(P)}}}function e(t){v=1;for(var o=0;o<h.length;o++)h[o].segments.length>0?(h[o].smooth({type:"continuous"}),h[o].simplify(),i=h[o]):h[o].remove();var e=paper.project.activeLayer.lastChild;console.log(e);0===t.touches.length&&(p=!1,h=n(window.kan.numPaths),l=[],u=[])}function a(t){if(i&&v>0)for(var o=0;o<i.segments.length;o++){var n=i.segments[o],e=16,r=2,a=Math.cos(t.time*e+o),s=Math.sin(t.time*e+o);n.point.x+=a/r*v,n.point.y+=s/r*v,v-=.001}}paper.setup(w[0]);var i,s,c,l=[],u=[],h=n(window.kan.numPaths),p=!1,f=20,d=.3,g=10,v=0;paper.view.onFrame=a,w.on("touchstart",t),w.on("touchmove",o),w.on("touchend",e)}function r(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function a(){console.log("new pressed"),moves=[]}function i(){console.log("undo pressed")}function s(){console.log("play pressed")}function c(){console.log("tips pressed")}function l(){console.log("share pressed")}function u(){$(".main-controls .new").on("click tap touch",a)}function h(){$(".main-controls .undo").on("click",i)}function p(){$(".main-controls .play").on("click",s)}function f(){$(".aux-controls .tips").on("click",c)}function d(){$(".aux-controls .share").on("click",l)}function g(){t()}var w=($(window),$("body"),$("canvas#mainCanvas"));g()})},function(t,o){}]);